var i4e=Object.defineProperty;var s4e=(e,t,n)=>t in e?i4e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var o4e=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var Wo=(e,t,n)=>s4e(e,typeof t!="symbol"?t+"":t,n);var DVt=o4e((IHt,OQ)=>{function a4e(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var ws=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Tl(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function u4e(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var NM={exports:{}},i_={},OM={exports:{}},Pn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var see;function l4e(){if(see)return Pn;see=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),l=Symbol.for("react.memo"),c=Symbol.for("react.lazy"),d=Symbol.iterator;function f(L){return L===null||typeof L!="object"?null:(L=d&&L[d]||L["@@iterator"],typeof L=="function"?L:null)}var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p=Object.assign,m={};function y(L,Y,j){this.props=L,this.context=Y,this.refs=m,this.updater=j||h}y.prototype.isReactComponent={},y.prototype.setState=function(L,Y){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,Y,"setState")},y.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function v(){}v.prototype=y.prototype;function b(L,Y,j){this.props=L,this.context=Y,this.refs=m,this.updater=j||h}var w=b.prototype=new v;w.constructor=b,p(w,y.prototype),w.isPureReactComponent=!0;var E=Array.isArray,_=Object.prototype.hasOwnProperty,C={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function k(L,Y,j){var G,X={},ne=null,pe=null;if(Y!=null)for(G in Y.ref!==void 0&&(pe=Y.ref),Y.key!==void 0&&(ne=""+Y.key),Y)_.call(Y,G)&&!S.hasOwnProperty(G)&&(X[G]=Y[G]);var de=arguments.length-2;if(de===1)X.children=j;else if(1<de){for(var xe=Array(de),Ce=0;Ce<de;Ce++)xe[Ce]=arguments[Ce+2];X.children=xe}if(L&&L.defaultProps)for(G in de=L.defaultProps,de)X[G]===void 0&&(X[G]=de[G]);return{$$typeof:e,type:L,key:ne,ref:pe,props:X,_owner:C.current}}function R(L,Y){return{$$typeof:e,type:L.type,key:Y,ref:L.ref,props:L.props,_owner:L._owner}}function N(L){return typeof L=="object"&&L!==null&&L.$$typeof===e}function O(L){var Y={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(j){return Y[j]})}var F=/\/+/g;function $(L,Y){return typeof L=="object"&&L!==null&&L.key!=null?O(""+L.key):Y.toString(36)}function z(L,Y,j,G,X){var ne=typeof L;(ne==="undefined"||ne==="boolean")&&(L=null);var pe=!1;if(L===null)pe=!0;else switch(ne){case"string":case"number":pe=!0;break;case"object":switch(L.$$typeof){case e:case t:pe=!0}}if(pe)return pe=L,X=X(pe),L=G===""?"."+$(pe,0):G,E(X)?(j="",L!=null&&(j=L.replace(F,"$&/")+"/"),z(X,Y,j,"",function(Ce){return Ce})):X!=null&&(N(X)&&(X=R(X,j+(!X.key||pe&&pe.key===X.key?"":(""+X.key).replace(F,"$&/")+"/")+L)),Y.push(X)),1;if(pe=0,G=G===""?".":G+":",E(L))for(var de=0;de<L.length;de++){ne=L[de];var xe=G+$(ne,de);pe+=z(ne,Y,j,xe,X)}else if(xe=f(L),typeof xe=="function")for(L=xe.call(L),de=0;!(ne=L.next()).done;)ne=ne.value,xe=G+$(ne,de++),pe+=z(ne,Y,j,xe,X);else if(ne==="object")throw Y=String(L),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.");return pe}function q(L,Y,j){if(L==null)return L;var G=[],X=0;return z(L,G,"","",function(ne){return Y.call(j,ne,X++)}),G}function W(L){if(L._status===-1){var Y=L._result;Y=Y(),Y.then(function(j){(L._status===0||L._status===-1)&&(L._status=1,L._result=j)},function(j){(L._status===0||L._status===-1)&&(L._status=2,L._result=j)}),L._status===-1&&(L._status=0,L._result=Y)}if(L._status===1)return L._result.default;throw L._result}var J={current:null},K={transition:null},Z={ReactCurrentDispatcher:J,ReactCurrentBatchConfig:K,ReactCurrentOwner:C};function U(){throw Error("act(...) is not supported in production builds of React.")}return Pn.Children={map:q,forEach:function(L,Y,j){q(L,function(){Y.apply(this,arguments)},j)},count:function(L){var Y=0;return q(L,function(){Y++}),Y},toArray:function(L){return q(L,function(Y){return Y})||[]},only:function(L){if(!N(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},Pn.Component=y,Pn.Fragment=n,Pn.Profiler=i,Pn.PureComponent=b,Pn.StrictMode=r,Pn.Suspense=u,Pn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Z,Pn.act=U,Pn.cloneElement=function(L,Y,j){if(L==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+L+".");var G=p({},L.props),X=L.key,ne=L.ref,pe=L._owner;if(Y!=null){if(Y.ref!==void 0&&(ne=Y.ref,pe=C.current),Y.key!==void 0&&(X=""+Y.key),L.type&&L.type.defaultProps)var de=L.type.defaultProps;for(xe in Y)_.call(Y,xe)&&!S.hasOwnProperty(xe)&&(G[xe]=Y[xe]===void 0&&de!==void 0?de[xe]:Y[xe])}var xe=arguments.length-2;if(xe===1)G.children=j;else if(1<xe){de=Array(xe);for(var Ce=0;Ce<xe;Ce++)de[Ce]=arguments[Ce+2];G.children=de}return{$$typeof:e,type:L.type,key:X,ref:ne,props:G,_owner:pe}},Pn.createContext=function(L){return L={$$typeof:o,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},L.Provider={$$typeof:s,_context:L},L.Consumer=L},Pn.createElement=k,Pn.createFactory=function(L){var Y=k.bind(null,L);return Y.type=L,Y},Pn.createRef=function(){return{current:null}},Pn.forwardRef=function(L){return{$$typeof:a,render:L}},Pn.isValidElement=N,Pn.lazy=function(L){return{$$typeof:c,_payload:{_status:-1,_result:L},_init:W}},Pn.memo=function(L,Y){return{$$typeof:l,type:L,compare:Y===void 0?null:Y}},Pn.startTransition=function(L){var Y=K.transition;K.transition={};try{L()}finally{K.transition=Y}},Pn.unstable_act=U,Pn.useCallback=function(L,Y){return J.current.useCallback(L,Y)},Pn.useContext=function(L){return J.current.useContext(L)},Pn.useDebugValue=function(){},Pn.useDeferredValue=function(L){return J.current.useDeferredValue(L)},Pn.useEffect=function(L,Y){return J.current.useEffect(L,Y)},Pn.useId=function(){return J.current.useId()},Pn.useImperativeHandle=function(L,Y,j){return J.current.useImperativeHandle(L,Y,j)},Pn.useInsertionEffect=function(L,Y){return J.current.useInsertionEffect(L,Y)},Pn.useLayoutEffect=function(L,Y){return J.current.useLayoutEffect(L,Y)},Pn.useMemo=function(L,Y){return J.current.useMemo(L,Y)},Pn.useReducer=function(L,Y,j){return J.current.useReducer(L,Y,j)},Pn.useRef=function(L){return J.current.useRef(L)},Pn.useState=function(L){return J.current.useState(L)},Pn.useSyncExternalStore=function(L,Y,j){return J.current.useSyncExternalStore(L,Y,j)},Pn.useTransition=function(){return J.current.useTransition()},Pn.version="18.3.1",Pn}var oee;function u4(){return oee||(oee=1,OM.exports=l4e()),OM.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aee;function c4e(){if(aee)return i_;aee=1;var e=u4(),t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(a,u,l){var c,d={},f=null,h=null;l!==void 0&&(f=""+l),u.key!==void 0&&(f=""+u.key),u.ref!==void 0&&(h=u.ref);for(c in u)r.call(u,c)&&!s.hasOwnProperty(c)&&(d[c]=u[c]);if(a&&a.defaultProps)for(c in u=a.defaultProps,u)d[c]===void 0&&(d[c]=u[c]);return{$$typeof:t,type:a,key:f,ref:h,props:d,_owner:i.current}}return i_.Fragment=n,i_.jsx=o,i_.jsxs=o,i_}var uee;function d4e(){return uee||(uee=1,NM.exports=c4e()),NM.exports}var T=d4e(),D=u4();const rr=Tl(D),f4e=a4e({__proto__:null,default:rr},[D]);var Ak={},$M={exports:{}},ou={},MM={exports:{}},LM={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lee;function h4e(){return lee||(lee=1,function(e){function t(K,Z){var U=K.length;K.push(Z);e:for(;0<U;){var L=U-1>>>1,Y=K[L];if(0<i(Y,Z))K[L]=Z,K[U]=Y,U=L;else break e}}function n(K){return K.length===0?null:K[0]}function r(K){if(K.length===0)return null;var Z=K[0],U=K.pop();if(U!==Z){K[0]=U;e:for(var L=0,Y=K.length,j=Y>>>1;L<j;){var G=2*(L+1)-1,X=K[G],ne=G+1,pe=K[ne];if(0>i(X,U))ne<Y&&0>i(pe,X)?(K[L]=pe,K[ne]=U,L=ne):(K[L]=X,K[G]=U,L=G);else if(ne<Y&&0>i(pe,U))K[L]=pe,K[ne]=U,L=ne;else break e}}return Z}function i(K,Z){var U=K.sortIndex-Z.sortIndex;return U!==0?U:K.id-Z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var u=[],l=[],c=1,d=null,f=3,h=!1,p=!1,m=!1,y=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(K){for(var Z=n(l);Z!==null;){if(Z.callback===null)r(l);else if(Z.startTime<=K)r(l),Z.sortIndex=Z.expirationTime,t(u,Z);else break;Z=n(l)}}function E(K){if(m=!1,w(K),!p)if(n(u)!==null)p=!0,W(_);else{var Z=n(l);Z!==null&&J(E,Z.startTime-K)}}function _(K,Z){p=!1,m&&(m=!1,v(k),k=-1),h=!0;var U=f;try{for(w(Z),d=n(u);d!==null&&(!(d.expirationTime>Z)||K&&!O());){var L=d.callback;if(typeof L=="function"){d.callback=null,f=d.priorityLevel;var Y=L(d.expirationTime<=Z);Z=e.unstable_now(),typeof Y=="function"?d.callback=Y:d===n(u)&&r(u),w(Z)}else r(u);d=n(u)}if(d!==null)var j=!0;else{var G=n(l);G!==null&&J(E,G.startTime-Z),j=!1}return j}finally{d=null,f=U,h=!1}}var C=!1,S=null,k=-1,R=5,N=-1;function O(){return!(e.unstable_now()-N<R)}function F(){if(S!==null){var K=e.unstable_now();N=K;var Z=!0;try{Z=S(!0,K)}finally{Z?$():(C=!1,S=null)}}else C=!1}var $;if(typeof b=="function")$=function(){b(F)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,q=z.port2;z.port1.onmessage=F,$=function(){q.postMessage(null)}}else $=function(){y(F,0)};function W(K){S=K,C||(C=!0,$())}function J(K,Z){k=y(function(){K(e.unstable_now())},Z)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(K){K.callback=null},e.unstable_continueExecution=function(){p||h||(p=!0,W(_))},e.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<K?Math.floor(1e3/K):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(K){switch(f){case 1:case 2:case 3:var Z=3;break;default:Z=f}var U=f;f=Z;try{return K()}finally{f=U}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(K,Z){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var U=f;f=K;try{return Z()}finally{f=U}},e.unstable_scheduleCallback=function(K,Z,U){var L=e.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?L+U:L):U=L,K){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=U+Y,K={id:c++,callback:Z,priorityLevel:K,startTime:U,expirationTime:Y,sortIndex:-1},U>L?(K.sortIndex=U,t(l,K),n(u)===null&&K===n(l)&&(m?(v(k),k=-1):m=!0,J(E,U-L))):(K.sortIndex=Y,t(u,K),p||h||(p=!0,W(_))),K},e.unstable_shouldYield=O,e.unstable_wrapCallback=function(K){var Z=f;return function(){var U=f;f=Z;try{return K.apply(this,arguments)}finally{f=U}}}}(LM)),LM}var cee;function p4e(){return cee||(cee=1,MM.exports=h4e()),MM.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dee;function m4e(){if(dee)return ou;dee=1;var e=u4(),t=p4e();function n(g){for(var x="https://reactjs.org/docs/error-decoder.html?invariant="+g,A=1;A<arguments.length;A++)x+="&args[]="+encodeURIComponent(arguments[A]);return"Minified React error #"+g+"; visit "+x+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function s(g,x){o(g,x),o(g+"Capture",x)}function o(g,x){for(i[g]=x,g=0;g<x.length;g++)r.add(x[g])}var a=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),u=Object.prototype.hasOwnProperty,l=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,c={},d={};function f(g){return u.call(d,g)?!0:u.call(c,g)?!1:l.test(g)?d[g]=!0:(c[g]=!0,!1)}function h(g,x,A,P){if(A!==null&&A.type===0)return!1;switch(typeof x){case"function":case"symbol":return!0;case"boolean":return P?!1:A!==null?!A.acceptsBooleans:(g=g.toLowerCase().slice(0,5),g!=="data-"&&g!=="aria-");default:return!1}}function p(g,x,A,P){if(x===null||typeof x>"u"||h(g,x,A,P))return!0;if(P)return!1;if(A!==null)switch(A.type){case 3:return!x;case 4:return x===!1;case 5:return isNaN(x);case 6:return isNaN(x)||1>x}return!1}function m(g,x,A,P,B,H,ee){this.acceptsBooleans=x===2||x===3||x===4,this.attributeName=P,this.attributeNamespace=B,this.mustUseProperty=A,this.propertyName=g,this.type=x,this.sanitizeURL=H,this.removeEmptyString=ee}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(g){y[g]=new m(g,0,!1,g,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(g){var x=g[0];y[x]=new m(x,1,!1,g[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(g){y[g]=new m(g,2,!1,g.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(g){y[g]=new m(g,2,!1,g,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(g){y[g]=new m(g,3,!1,g.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(g){y[g]=new m(g,3,!0,g,null,!1,!1)}),["capture","download"].forEach(function(g){y[g]=new m(g,4,!1,g,null,!1,!1)}),["cols","rows","size","span"].forEach(function(g){y[g]=new m(g,6,!1,g,null,!1,!1)}),["rowSpan","start"].forEach(function(g){y[g]=new m(g,5,!1,g.toLowerCase(),null,!1,!1)});var v=/[\-:]([a-z])/g;function b(g){return g[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(g){var x=g.replace(v,b);y[x]=new m(x,1,!1,g,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(g){var x=g.replace(v,b);y[x]=new m(x,1,!1,g,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(g){var x=g.replace(v,b);y[x]=new m(x,1,!1,g,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(g){y[g]=new m(g,1,!1,g.toLowerCase(),null,!1,!1)}),y.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(g){y[g]=new m(g,1,!1,g.toLowerCase(),null,!0,!0)});function w(g,x,A,P){var B=y.hasOwnProperty(x)?y[x]:null;(B!==null?B.type!==0:P||!(2<x.length)||x[0]!=="o"&&x[0]!=="O"||x[1]!=="n"&&x[1]!=="N")&&(p(x,A,B,P)&&(A=null),P||B===null?f(x)&&(A===null?g.removeAttribute(x):g.setAttribute(x,""+A)):B.mustUseProperty?g[B.propertyName]=A===null?B.type===3?!1:"":A:(x=B.attributeName,P=B.attributeNamespace,A===null?g.removeAttribute(x):(B=B.type,A=B===3||B===4&&A===!0?"":""+A,P?g.setAttributeNS(P,x,A):g.setAttribute(x,A))))}var E=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=Symbol.for("react.element"),C=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),N=Symbol.for("react.provider"),O=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),$=Symbol.for("react.suspense"),z=Symbol.for("react.suspense_list"),q=Symbol.for("react.memo"),W=Symbol.for("react.lazy"),J=Symbol.for("react.offscreen"),K=Symbol.iterator;function Z(g){return g===null||typeof g!="object"?null:(g=K&&g[K]||g["@@iterator"],typeof g=="function"?g:null)}var U=Object.assign,L;function Y(g){if(L===void 0)try{throw Error()}catch(A){var x=A.stack.trim().match(/\n( *(at )?)/);L=x&&x[1]||""}return`
`+L+g}var j=!1;function G(g,x){if(!g||j)return"";j=!0;var A=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(x)if(x=function(){throw Error()},Object.defineProperty(x.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(x,[])}catch(Fe){var P=Fe}Reflect.construct(g,[],x)}else{try{x.call()}catch(Fe){P=Fe}g.call(x.prototype)}else{try{throw Error()}catch(Fe){P=Fe}g()}}catch(Fe){if(Fe&&P&&typeof Fe.stack=="string"){for(var B=Fe.stack.split(`
`),H=P.stack.split(`
`),ee=B.length-1,fe=H.length-1;1<=ee&&0<=fe&&B[ee]!==H[fe];)fe--;for(;1<=ee&&0<=fe;ee--,fe--)if(B[ee]!==H[fe]){if(ee!==1||fe!==1)do if(ee--,fe--,0>fe||B[ee]!==H[fe]){var ve=`
`+B[ee].replace(" at new "," at ");return g.displayName&&ve.includes("<anonymous>")&&(ve=ve.replace("<anonymous>",g.displayName)),ve}while(1<=ee&&0<=fe);break}}}finally{j=!1,Error.prepareStackTrace=A}return(g=g?g.displayName||g.name:"")?Y(g):""}function X(g){switch(g.tag){case 5:return Y(g.type);case 16:return Y("Lazy");case 13:return Y("Suspense");case 19:return Y("SuspenseList");case 0:case 2:case 15:return g=G(g.type,!1),g;case 11:return g=G(g.type.render,!1),g;case 1:return g=G(g.type,!0),g;default:return""}}function ne(g){if(g==null)return null;if(typeof g=="function")return g.displayName||g.name||null;if(typeof g=="string")return g;switch(g){case S:return"Fragment";case C:return"Portal";case R:return"Profiler";case k:return"StrictMode";case $:return"Suspense";case z:return"SuspenseList"}if(typeof g=="object")switch(g.$$typeof){case O:return(g.displayName||"Context")+".Consumer";case N:return(g._context.displayName||"Context")+".Provider";case F:var x=g.render;return g=g.displayName,g||(g=x.displayName||x.name||"",g=g!==""?"ForwardRef("+g+")":"ForwardRef"),g;case q:return x=g.displayName||null,x!==null?x:ne(g.type)||"Memo";case W:x=g._payload,g=g._init;try{return ne(g(x))}catch{}}return null}function pe(g){var x=g.type;switch(g.tag){case 24:return"Cache";case 9:return(x.displayName||"Context")+".Consumer";case 10:return(x._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return g=x.render,g=g.displayName||g.name||"",x.displayName||(g!==""?"ForwardRef("+g+")":"ForwardRef");case 7:return"Fragment";case 5:return x;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ne(x);case 8:return x===k?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof x=="function")return x.displayName||x.name||null;if(typeof x=="string")return x}return null}function de(g){switch(typeof g){case"boolean":case"number":case"string":case"undefined":return g;case"object":return g;default:return""}}function xe(g){var x=g.type;return(g=g.nodeName)&&g.toLowerCase()==="input"&&(x==="checkbox"||x==="radio")}function Ce(g){var x=xe(g)?"checked":"value",A=Object.getOwnPropertyDescriptor(g.constructor.prototype,x),P=""+g[x];if(!g.hasOwnProperty(x)&&typeof A<"u"&&typeof A.get=="function"&&typeof A.set=="function"){var B=A.get,H=A.set;return Object.defineProperty(g,x,{configurable:!0,get:function(){return B.call(this)},set:function(ee){P=""+ee,H.call(this,ee)}}),Object.defineProperty(g,x,{enumerable:A.enumerable}),{getValue:function(){return P},setValue:function(ee){P=""+ee},stopTracking:function(){g._valueTracker=null,delete g[x]}}}}function ue(g){g._valueTracker||(g._valueTracker=Ce(g))}function se(g){if(!g)return!1;var x=g._valueTracker;if(!x)return!0;var A=x.getValue(),P="";return g&&(P=xe(g)?g.checked?"true":"false":g.value),g=P,g!==A?(x.setValue(g),!0):!1}function me(g){if(g=g||(typeof document<"u"?document:void 0),typeof g>"u")return null;try{return g.activeElement||g.body}catch{return g.body}}function be(g,x){var A=x.checked;return U({},x,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:A??g._wrapperState.initialChecked})}function Le(g,x){var A=x.defaultValue==null?"":x.defaultValue,P=x.checked!=null?x.checked:x.defaultChecked;A=de(x.value!=null?x.value:A),g._wrapperState={initialChecked:P,initialValue:A,controlled:x.type==="checkbox"||x.type==="radio"?x.checked!=null:x.value!=null}}function Ue(g,x){x=x.checked,x!=null&&w(g,"checked",x,!1)}function Ne(g,x){Ue(g,x);var A=de(x.value),P=x.type;if(A!=null)P==="number"?(A===0&&g.value===""||g.value!=A)&&(g.value=""+A):g.value!==""+A&&(g.value=""+A);else if(P==="submit"||P==="reset"){g.removeAttribute("value");return}x.hasOwnProperty("value")?Ke(g,x.type,A):x.hasOwnProperty("defaultValue")&&Ke(g,x.type,de(x.defaultValue)),x.checked==null&&x.defaultChecked!=null&&(g.defaultChecked=!!x.defaultChecked)}function je(g,x,A){if(x.hasOwnProperty("value")||x.hasOwnProperty("defaultValue")){var P=x.type;if(!(P!=="submit"&&P!=="reset"||x.value!==void 0&&x.value!==null))return;x=""+g._wrapperState.initialValue,A||x===g.value||(g.value=x),g.defaultValue=x}A=g.name,A!==""&&(g.name=""),g.defaultChecked=!!g._wrapperState.initialChecked,A!==""&&(g.name=A)}function Ke(g,x,A){(x!=="number"||me(g.ownerDocument)!==g)&&(A==null?g.defaultValue=""+g._wrapperState.initialValue:g.defaultValue!==""+A&&(g.defaultValue=""+A))}var ut=Array.isArray;function pt(g,x,A,P){if(g=g.options,x){x={};for(var B=0;B<A.length;B++)x["$"+A[B]]=!0;for(A=0;A<g.length;A++)B=x.hasOwnProperty("$"+g[A].value),g[A].selected!==B&&(g[A].selected=B),B&&P&&(g[A].defaultSelected=!0)}else{for(A=""+de(A),x=null,B=0;B<g.length;B++){if(g[B].value===A){g[B].selected=!0,P&&(g[B].defaultSelected=!0);return}x!==null||g[B].disabled||(x=g[B])}x!==null&&(x.selected=!0)}}function xt(g,x){if(x.dangerouslySetInnerHTML!=null)throw Error(n(91));return U({},x,{value:void 0,defaultValue:void 0,children:""+g._wrapperState.initialValue})}function De(g,x){var A=x.value;if(A==null){if(A=x.children,x=x.defaultValue,A!=null){if(x!=null)throw Error(n(92));if(ut(A)){if(1<A.length)throw Error(n(93));A=A[0]}x=A}x==null&&(x=""),A=x}g._wrapperState={initialValue:de(A)}}function wt(g,x){var A=de(x.value),P=de(x.defaultValue);A!=null&&(A=""+A,A!==g.value&&(g.value=A),x.defaultValue==null&&g.defaultValue!==A&&(g.defaultValue=A)),P!=null&&(g.defaultValue=""+P)}function Kt(g){var x=g.textContent;x===g._wrapperState.initialValue&&x!==""&&x!==null&&(g.value=x)}function Te(g){switch(g){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Oe(g,x){return g==null||g==="http://www.w3.org/1999/xhtml"?Te(x):g==="http://www.w3.org/2000/svg"&&x==="foreignObject"?"http://www.w3.org/1999/xhtml":g}var lt,_t=function(g){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(x,A,P,B){MSApp.execUnsafeLocalFunction(function(){return g(x,A,P,B)})}:g}(function(g,x){if(g.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in g)g.innerHTML=x;else{for(lt=lt||document.createElement("div"),lt.innerHTML="<svg>"+x.valueOf().toString()+"</svg>",x=lt.firstChild;g.firstChild;)g.removeChild(g.firstChild);for(;x.firstChild;)g.appendChild(x.firstChild)}});function St(g,x){if(x){var A=g.firstChild;if(A&&A===g.lastChild&&A.nodeType===3){A.nodeValue=x;return}}g.textContent=x}var en={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},En=["Webkit","ms","Moz","O"];Object.keys(en).forEach(function(g){En.forEach(function(x){x=x+g.charAt(0).toUpperCase()+g.substring(1),en[x]=en[g]})});function sr(g,x,A){return x==null||typeof x=="boolean"||x===""?"":A||typeof x!="number"||x===0||en.hasOwnProperty(g)&&en[g]?(""+x).trim():x+"px"}function Jr(g,x){g=g.style;for(var A in x)if(x.hasOwnProperty(A)){var P=A.indexOf("--")===0,B=sr(A,x[A],P);A==="float"&&(A="cssFloat"),P?g.setProperty(A,B):g[A]=B}}var wn=U({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function An(g,x){if(x){if(wn[g]&&(x.children!=null||x.dangerouslySetInnerHTML!=null))throw Error(n(137,g));if(x.dangerouslySetInnerHTML!=null){if(x.children!=null)throw Error(n(60));if(typeof x.dangerouslySetInnerHTML!="object"||!("__html"in x.dangerouslySetInnerHTML))throw Error(n(61))}if(x.style!=null&&typeof x.style!="object")throw Error(n(62))}}function Hr(g,x){if(g.indexOf("-")===-1)return typeof x.is=="string";switch(g){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ln=null;function Ns(g){return g=g.target||g.srcElement||window,g.correspondingUseElement&&(g=g.correspondingUseElement),g.nodeType===3?g.parentNode:g}var Zr=null,qr=null,ai=null;function or(g){if(g=VE(g)){if(typeof Zr!="function")throw Error(n(280));var x=g.stateNode;x&&(x=UA(x),Zr(g.stateNode,g.type,x))}}function Os(g){qr?ai?ai.push(g):ai=[g]:qr=g}function Al(){if(qr){var g=qr,x=ai;if(ai=qr=null,or(g),x)for(g=0;g<x.length;g++)or(x[g])}}function zo(g,x){return g(x)}function Bu(){}var ar=!1;function Wr(g,x,A){if(ar)return g(x,A);ar=!0;try{return zo(g,x,A)}finally{ar=!1,(qr!==null||ai!==null)&&(Bu(),Al())}}function br(g,x){var A=g.stateNode;if(A===null)return null;var P=UA(A);if(P===null)return null;A=P[x];e:switch(x){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(P=!P.disabled)||(g=g.type,P=!(g==="button"||g==="input"||g==="select"||g==="textarea")),g=!P;break e;default:g=!1}if(g)return null;if(A&&typeof A!="function")throw Error(n(231,x,typeof A));return A}var $s=!1;if(a)try{var Zn={};Object.defineProperty(Zn,"passive",{get:function(){$s=!0}}),window.addEventListener("test",Zn,Zn),window.removeEventListener("test",Zn,Zn)}catch{$s=!1}function mi(g,x,A,P,B,H,ee,fe,ve){var Fe=Array.prototype.slice.call(arguments,3);try{x.apply(A,Fe)}catch(ot){this.onError(ot)}}var Ms=!1,as=null,lo=!1,ju=null,gh={onError:function(g){Ms=!0,as=g}};function Yn(g,x,A,P,B,H,ee,fe,ve){Ms=!1,as=null,mi.apply(gh,arguments)}function kl(g,x,A,P,B,H,ee,fe,ve){if(Yn.apply(this,arguments),Ms){if(Ms){var Fe=as;Ms=!1,as=null}else throw Error(n(198));lo||(lo=!0,ju=Fe)}}function gi(g){var x=g,A=g;if(g.alternate)for(;x.return;)x=x.return;else{g=x;do x=g,x.flags&4098&&(A=x.return),g=x.return;while(g)}return x.tag===3?A:null}function Xa(g){if(g.tag===13){var x=g.memoizedState;if(x===null&&(g=g.alternate,g!==null&&(x=g.memoizedState)),x!==null)return x.dehydrated}return null}function co(g){if(gi(g)!==g)throw Error(n(188))}function sm(g){var x=g.alternate;if(!x){if(x=gi(g),x===null)throw Error(n(188));return x!==g?null:g}for(var A=g,P=x;;){var B=A.return;if(B===null)break;var H=B.alternate;if(H===null){if(P=B.return,P!==null){A=P;continue}break}if(B.child===H.child){for(H=B.child;H;){if(H===A)return co(B),g;if(H===P)return co(B),x;H=H.sibling}throw Error(n(188))}if(A.return!==P.return)A=B,P=H;else{for(var ee=!1,fe=B.child;fe;){if(fe===A){ee=!0,A=B,P=H;break}if(fe===P){ee=!0,P=B,A=H;break}fe=fe.sibling}if(!ee){for(fe=H.child;fe;){if(fe===A){ee=!0,A=H,P=B;break}if(fe===P){ee=!0,P=H,A=B;break}fe=fe.sibling}if(!ee)throw Error(n(189))}}if(A.alternate!==P)throw Error(n(190))}if(A.tag!==3)throw Error(n(188));return A.stateNode.current===A?g:x}function yh(g){return g=sm(g),g!==null?Od(g):null}function Od(g){if(g.tag===5||g.tag===6)return g;for(g=g.child;g!==null;){var x=Od(g);if(x!==null)return x;g=g.sibling}return null}var $d=t.unstable_scheduleCallback,vc=t.unstable_cancelCallback,om=t.unstable_shouldYield,xc=t.unstable_requestPaint,Fn=t.unstable_now,bh=t.unstable_getCurrentPriorityLevel,us=t.unstable_ImmediatePriority,zu=t.unstable_UserBlockingPriority,ls=t.unstable_NormalPriority,wc=t.unstable_LowPriority,am=t.unstable_IdlePriority,Il=null,cs=null;function um(g){if(cs&&typeof cs.onCommitFiberRoot=="function")try{cs.onCommitFiberRoot(Il,g,void 0,(g.current.flags&128)===128)}catch{}}var ds=Math.clz32?Math.clz32:ae,te=Math.log,ge=Math.LN2;function ae(g){return g>>>=0,g===0?32:31-(te(g)/ge|0)|0}var Ee=64,Ae=4194304;function we(g){switch(g&-g){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return g&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return g&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return g}}function qe(g,x){var A=g.pendingLanes;if(A===0)return 0;var P=0,B=g.suspendedLanes,H=g.pingedLanes,ee=A&268435455;if(ee!==0){var fe=ee&~B;fe!==0?P=we(fe):(H&=ee,H!==0&&(P=we(H)))}else ee=A&~B,ee!==0?P=we(ee):H!==0&&(P=we(H));if(P===0)return 0;if(x!==0&&x!==P&&!(x&B)&&(B=P&-P,H=x&-x,B>=H||B===16&&(H&4194240)!==0))return x;if(P&4&&(P|=A&16),x=g.entangledLanes,x!==0)for(g=g.entanglements,x&=P;0<x;)A=31-ds(x),B=1<<A,P|=g[A],x&=~B;return P}function nt(g,x){switch(g){case 1:case 2:case 4:return x+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return x+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function it(g,x){for(var A=g.suspendedLanes,P=g.pingedLanes,B=g.expirationTimes,H=g.pendingLanes;0<H;){var ee=31-ds(H),fe=1<<ee,ve=B[ee];ve===-1?(!(fe&A)||fe&P)&&(B[ee]=nt(fe,x)):ve<=x&&(g.expiredLanes|=fe),H&=~fe}}function rt(g){return g=g.pendingLanes&-1073741825,g!==0?g:g&1073741824?1073741824:0}function mt(){var g=Ee;return Ee<<=1,!(Ee&4194240)&&(Ee=64),g}function Pt(g){for(var x=[],A=0;31>A;A++)x.push(g);return x}function un(g,x,A){g.pendingLanes|=x,x!==536870912&&(g.suspendedLanes=0,g.pingedLanes=0),g=g.eventTimes,x=31-ds(x),g[x]=A}function Gt(g,x){var A=g.pendingLanes&~x;g.pendingLanes=x,g.suspendedLanes=0,g.pingedLanes=0,g.expiredLanes&=x,g.mutableReadLanes&=x,g.entangledLanes&=x,x=g.entanglements;var P=g.eventTimes;for(g=g.expirationTimes;0<A;){var B=31-ds(A),H=1<<B;x[B]=0,P[B]=-1,g[B]=-1,A&=~H}}function kn(g,x){var A=g.entangledLanes|=x;for(g=g.entanglements;A;){var P=31-ds(A),B=1<<P;B&x|g[P]&x&&(g[P]|=x),A&=~B}}var Xt=0;function ur(g){return g&=-g,1<g?4<g?g&268435455?16:536870912:4:1}var fs,Qa,Rl,lm,Md,cm=!1,fo=[],yi=null,Ls=null,xa=null,Ld=new Map,wa=new Map,Ja=[],Eb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dl(g,x){switch(g){case"focusin":case"focusout":yi=null;break;case"dragenter":case"dragleave":Ls=null;break;case"mouseover":case"mouseout":xa=null;break;case"pointerover":case"pointerout":Ld.delete(x.pointerId);break;case"gotpointercapture":case"lostpointercapture":wa.delete(x.pointerId)}}function Ki(g,x,A,P,B,H){return g===null||g.nativeEvent!==H?(g={blockedOn:x,domEventName:A,eventSystemFlags:P,nativeEvent:H,targetContainers:[B]},x!==null&&(x=VE(x),x!==null&&Qa(x)),g):(g.eventSystemFlags|=P,x=g.targetContainers,B!==null&&x.indexOf(B)===-1&&x.push(B),g)}function PE(g,x,A,P,B){switch(x){case"focusin":return yi=Ki(yi,g,x,A,P,B),!0;case"dragenter":return Ls=Ki(Ls,g,x,A,P,B),!0;case"mouseover":return xa=Ki(xa,g,x,A,P,B),!0;case"pointerover":var H=B.pointerId;return Ld.set(H,Ki(Ld.get(H)||null,g,x,A,P,B)),!0;case"gotpointercapture":return H=B.pointerId,wa.set(H,Ki(wa.get(H)||null,g,x,A,P,B)),!0}return!1}function Ag(g){var x=Rg(g.target);if(x!==null){var A=gi(x);if(A!==null){if(x=A.tag,x===13){if(x=Xa(A),x!==null){g.blockedOn=x,Md(g.priority,function(){Rl(A)});return}}else if(x===3&&A.stateNode.current.memoizedState.isDehydrated){g.blockedOn=A.tag===3?A.stateNode.containerInfo:null;return}}}g.blockedOn=null}function Ec(g){if(g.blockedOn!==null)return!1;for(var x=g.targetContainers;0<x.length;){var A=Kn(g.domEventName,g.eventSystemFlags,x[0],g.nativeEvent);if(A===null){A=g.nativeEvent;var P=new A.constructor(A.type,A);Ln=P,A.target.dispatchEvent(P),Ln=null}else return x=VE(A),x!==null&&Qa(x),g.blockedOn=A,!1;x.shift()}return!0}function Fd(g,x,A){Ec(g)&&A.delete(x)}function _b(){cm=!1,yi!==null&&Ec(yi)&&(yi=null),Ls!==null&&Ec(Ls)&&(Ls=null),xa!==null&&Ec(xa)&&(xa=null),Ld.forEach(Fd),wa.forEach(Fd)}function Uu(g,x){g.blockedOn===x&&(g.blockedOn=null,cm||(cm=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,_b)))}function Za(g){function x(B){return Uu(B,g)}if(0<fo.length){Uu(fo[0],g);for(var A=1;A<fo.length;A++){var P=fo[A];P.blockedOn===g&&(P.blockedOn=null)}}for(yi!==null&&Uu(yi,g),Ls!==null&&Uu(Ls,g),xa!==null&&Uu(xa,g),Ld.forEach(x),wa.forEach(x),A=0;A<Ja.length;A++)P=Ja[A],P.blockedOn===g&&(P.blockedOn=null);for(;0<Ja.length&&(A=Ja[0],A.blockedOn===null);)Ag(A),A.blockedOn===null&&Ja.shift()}var _c=E.ReactCurrentBatchConfig,le=!0;function ye(g,x,A,P){var B=Xt,H=_c.transition;_c.transition=null;try{Xt=1,Bt(g,x,A,P)}finally{Xt=B,_c.transition=H}}function Be(g,x,A,P){var B=Xt,H=_c.transition;_c.transition=null;try{Xt=4,Bt(g,x,A,P)}finally{Xt=B,_c.transition=H}}function Bt(g,x,A,P){if(le){var B=Kn(g,x,A,P);if(B===null)_5(g,x,P,_n,A),Dl(g,P);else if(PE(B,g,x,A,P))P.stopPropagation();else if(Dl(g,P),x&4&&-1<Eb.indexOf(g)){for(;B!==null;){var H=VE(B);if(H!==null&&fs(H),H=Kn(g,x,A,P),H===null&&_5(g,x,P,_n,A),H===B)break;B=H}B!==null&&P.stopPropagation()}else _5(g,x,P,null,A)}}var _n=null;function Kn(g,x,A,P){if(_n=null,g=Ns(P),g=Rg(g),g!==null)if(x=gi(g),x===null)g=null;else if(A=x.tag,A===13){if(g=Xa(x),g!==null)return g;g=null}else if(A===3){if(x.stateNode.current.memoizedState.isDehydrated)return x.tag===3?x.stateNode.containerInfo:null;g=null}else x!==g&&(g=null);return _n=g,null}function wr(g){switch(g){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(bh()){case us:return 1;case zu:return 4;case ls:case wc:return 16;case am:return 536870912;default:return 16}default:return 16}}var yn=null,vr=null,Gr=null;function hs(){if(Gr)return Gr;var g,x=vr,A=x.length,P,B="value"in yn?yn.value:yn.textContent,H=B.length;for(g=0;g<A&&x[g]===B[g];g++);var ee=A-g;for(P=1;P<=ee&&x[A-P]===B[H-P];P++);return Gr=B.slice(g,1<P?1-P:void 0)}function Pl(g){var x=g.keyCode;return"charCode"in g?(g=g.charCode,g===0&&x===13&&(g=13)):g=x,g===10&&(g=13),32<=g||g===13?g:0}function eu(){return!0}function vh(){return!1}function Xi(g){function x(A,P,B,H,ee){this._reactName=A,this._targetInst=B,this.type=P,this.nativeEvent=H,this.target=ee,this.currentTarget=null;for(var fe in g)g.hasOwnProperty(fe)&&(A=g[fe],this[fe]=A?A(H):H[fe]);return this.isDefaultPrevented=(H.defaultPrevented!=null?H.defaultPrevented:H.returnValue===!1)?eu:vh,this.isPropagationStopped=vh,this}return U(x.prototype,{preventDefault:function(){this.defaultPrevented=!0;var A=this.nativeEvent;A&&(A.preventDefault?A.preventDefault():typeof A.returnValue!="unknown"&&(A.returnValue=!1),this.isDefaultPrevented=eu)},stopPropagation:function(){var A=this.nativeEvent;A&&(A.stopPropagation?A.stopPropagation():typeof A.cancelBubble!="unknown"&&(A.cancelBubble=!0),this.isPropagationStopped=eu)},persist:function(){},isPersistent:eu}),x}var Tc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(g){return g.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Tb=Xi(Tc),Bd=U({},Tc,{view:0,detail:0}),h5=Xi(Bd),Cb,xh,dm,kg=U({},Bd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:jd,button:0,buttons:0,relatedTarget:function(g){return g.relatedTarget===void 0?g.fromElement===g.srcElement?g.toElement:g.fromElement:g.relatedTarget},movementX:function(g){return"movementX"in g?g.movementX:(g!==dm&&(dm&&g.type==="mousemove"?(Cb=g.screenX-dm.screenX,xh=g.screenY-dm.screenY):xh=Cb=0,dm=g),Cb)},movementY:function(g){return"movementY"in g?g.movementY:xh}}),Sb=Xi(kg),NE=U({},kg,{dataTransfer:0}),kA=Xi(NE),Ab=U({},Bd,{relatedTarget:0}),kb=Xi(Ab),IA=U({},Tc,{animationName:0,elapsedTime:0,pseudoElement:0}),wh=Xi(IA),RA=U({},Tc,{clipboardData:function(g){return"clipboardData"in g?g.clipboardData:window.clipboardData}}),DA=Xi(RA),PA=U({},Tc,{data:0}),OE=Xi(PA),Ib={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ea={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},NA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function OA(g){var x=this.nativeEvent;return x.getModifierState?x.getModifierState(g):(g=NA[g])?!!x[g]:!1}function jd(){return OA}var I=U({},Bd,{key:function(g){if(g.key){var x=Ib[g.key]||g.key;if(x!=="Unidentified")return x}return g.type==="keypress"?(g=Pl(g),g===13?"Enter":String.fromCharCode(g)):g.type==="keydown"||g.type==="keyup"?Ea[g.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:jd,charCode:function(g){return g.type==="keypress"?Pl(g):0},keyCode:function(g){return g.type==="keydown"||g.type==="keyup"?g.keyCode:0},which:function(g){return g.type==="keypress"?Pl(g):g.type==="keydown"||g.type==="keyup"?g.keyCode:0}}),V=Xi(I),Q=U({},kg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ie=Xi(Q),ke=U({},Bd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:jd}),Ve=Xi(ke),Tt=U({},Tc,{propertyName:0,elapsedTime:0,pseudoElement:0}),Cr=Xi(Tt),ps=U({},kg,{deltaX:function(g){return"deltaX"in g?g.deltaX:"wheelDeltaX"in g?-g.wheelDeltaX:0},deltaY:function(g){return"deltaY"in g?g.deltaY:"wheelDeltaY"in g?-g.wheelDeltaY:"wheelDelta"in g?-g.wheelDelta:0},deltaZ:0,deltaMode:0}),Xn=Xi(ps),Fs=[9,13,27,32],Qi=a&&"CompositionEvent"in window,Nl=null;a&&"documentMode"in document&&(Nl=document.documentMode);var Vu=a&&"TextEvent"in window&&!Nl,Ig=a&&(!Qi||Nl&&8<Nl&&11>=Nl),Rb=" ",ZQ=!1;function eJ(g,x){switch(g){case"keyup":return Fs.indexOf(x.keyCode)!==-1;case"keydown":return x.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function tJ(g){return g=g.detail,typeof g=="object"&&"data"in g?g.data:null}var Db=!1;function nNe(g,x){switch(g){case"compositionend":return tJ(x);case"keypress":return x.which!==32?null:(ZQ=!0,Rb);case"textInput":return g=x.data,g===Rb&&ZQ?null:g;default:return null}}function rNe(g,x){if(Db)return g==="compositionend"||!Qi&&eJ(g,x)?(g=hs(),Gr=vr=yn=null,Db=!1,g):null;switch(g){case"paste":return null;case"keypress":if(!(x.ctrlKey||x.altKey||x.metaKey)||x.ctrlKey&&x.altKey){if(x.char&&1<x.char.length)return x.char;if(x.which)return String.fromCharCode(x.which)}return null;case"compositionend":return Ig&&x.locale!=="ko"?null:x.data;default:return null}}var iNe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function nJ(g){var x=g&&g.nodeName&&g.nodeName.toLowerCase();return x==="input"?!!iNe[g.type]:x==="textarea"}function rJ(g,x,A,P){Os(P),x=BA(x,"onChange"),0<x.length&&(A=new Tb("onChange","change",null,A,P),g.push({event:A,listeners:x}))}var $E=null,ME=null;function sNe(g){wJ(g,0)}function $A(g){var x=Mb(g);if(se(x))return g}function oNe(g,x){if(g==="change")return x}var iJ=!1;if(a){var p5;if(a){var m5="oninput"in document;if(!m5){var sJ=document.createElement("div");sJ.setAttribute("oninput","return;"),m5=typeof sJ.oninput=="function"}p5=m5}else p5=!1;iJ=p5&&(!document.documentMode||9<document.documentMode)}function oJ(){$E&&($E.detachEvent("onpropertychange",aJ),ME=$E=null)}function aJ(g){if(g.propertyName==="value"&&$A(ME)){var x=[];rJ(x,ME,g,Ns(g)),Wr(sNe,x)}}function aNe(g,x,A){g==="focusin"?(oJ(),$E=x,ME=A,$E.attachEvent("onpropertychange",aJ)):g==="focusout"&&oJ()}function uNe(g){if(g==="selectionchange"||g==="keyup"||g==="keydown")return $A(ME)}function lNe(g,x){if(g==="click")return $A(x)}function cNe(g,x){if(g==="input"||g==="change")return $A(x)}function dNe(g,x){return g===x&&(g!==0||1/g===1/x)||g!==g&&x!==x}var Cc=typeof Object.is=="function"?Object.is:dNe;function LE(g,x){if(Cc(g,x))return!0;if(typeof g!="object"||g===null||typeof x!="object"||x===null)return!1;var A=Object.keys(g),P=Object.keys(x);if(A.length!==P.length)return!1;for(P=0;P<A.length;P++){var B=A[P];if(!u.call(x,B)||!Cc(g[B],x[B]))return!1}return!0}function uJ(g){for(;g&&g.firstChild;)g=g.firstChild;return g}function lJ(g,x){var A=uJ(g);g=0;for(var P;A;){if(A.nodeType===3){if(P=g+A.textContent.length,g<=x&&P>=x)return{node:A,offset:x-g};g=P}e:{for(;A;){if(A.nextSibling){A=A.nextSibling;break e}A=A.parentNode}A=void 0}A=uJ(A)}}function cJ(g,x){return g&&x?g===x?!0:g&&g.nodeType===3?!1:x&&x.nodeType===3?cJ(g,x.parentNode):"contains"in g?g.contains(x):g.compareDocumentPosition?!!(g.compareDocumentPosition(x)&16):!1:!1}function dJ(){for(var g=window,x=me();x instanceof g.HTMLIFrameElement;){try{var A=typeof x.contentWindow.location.href=="string"}catch{A=!1}if(A)g=x.contentWindow;else break;x=me(g.document)}return x}function g5(g){var x=g&&g.nodeName&&g.nodeName.toLowerCase();return x&&(x==="input"&&(g.type==="text"||g.type==="search"||g.type==="tel"||g.type==="url"||g.type==="password")||x==="textarea"||g.contentEditable==="true")}function fNe(g){var x=dJ(),A=g.focusedElem,P=g.selectionRange;if(x!==A&&A&&A.ownerDocument&&cJ(A.ownerDocument.documentElement,A)){if(P!==null&&g5(A)){if(x=P.start,g=P.end,g===void 0&&(g=x),"selectionStart"in A)A.selectionStart=x,A.selectionEnd=Math.min(g,A.value.length);else if(g=(x=A.ownerDocument||document)&&x.defaultView||window,g.getSelection){g=g.getSelection();var B=A.textContent.length,H=Math.min(P.start,B);P=P.end===void 0?H:Math.min(P.end,B),!g.extend&&H>P&&(B=P,P=H,H=B),B=lJ(A,H);var ee=lJ(A,P);B&&ee&&(g.rangeCount!==1||g.anchorNode!==B.node||g.anchorOffset!==B.offset||g.focusNode!==ee.node||g.focusOffset!==ee.offset)&&(x=x.createRange(),x.setStart(B.node,B.offset),g.removeAllRanges(),H>P?(g.addRange(x),g.extend(ee.node,ee.offset)):(x.setEnd(ee.node,ee.offset),g.addRange(x)))}}for(x=[],g=A;g=g.parentNode;)g.nodeType===1&&x.push({element:g,left:g.scrollLeft,top:g.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<x.length;A++)g=x[A],g.element.scrollLeft=g.left,g.element.scrollTop=g.top}}var hNe=a&&"documentMode"in document&&11>=document.documentMode,Pb=null,y5=null,FE=null,b5=!1;function fJ(g,x,A){var P=A.window===A?A.document:A.nodeType===9?A:A.ownerDocument;b5||Pb==null||Pb!==me(P)||(P=Pb,"selectionStart"in P&&g5(P)?P={start:P.selectionStart,end:P.selectionEnd}:(P=(P.ownerDocument&&P.ownerDocument.defaultView||window).getSelection(),P={anchorNode:P.anchorNode,anchorOffset:P.anchorOffset,focusNode:P.focusNode,focusOffset:P.focusOffset}),FE&&LE(FE,P)||(FE=P,P=BA(y5,"onSelect"),0<P.length&&(x=new Tb("onSelect","select",null,x,A),g.push({event:x,listeners:P}),x.target=Pb)))}function MA(g,x){var A={};return A[g.toLowerCase()]=x.toLowerCase(),A["Webkit"+g]="webkit"+x,A["Moz"+g]="moz"+x,A}var Nb={animationend:MA("Animation","AnimationEnd"),animationiteration:MA("Animation","AnimationIteration"),animationstart:MA("Animation","AnimationStart"),transitionend:MA("Transition","TransitionEnd")},v5={},hJ={};a&&(hJ=document.createElement("div").style,"AnimationEvent"in window||(delete Nb.animationend.animation,delete Nb.animationiteration.animation,delete Nb.animationstart.animation),"TransitionEvent"in window||delete Nb.transitionend.transition);function LA(g){if(v5[g])return v5[g];if(!Nb[g])return g;var x=Nb[g],A;for(A in x)if(x.hasOwnProperty(A)&&A in hJ)return v5[g]=x[A];return g}var pJ=LA("animationend"),mJ=LA("animationiteration"),gJ=LA("animationstart"),yJ=LA("transitionend"),bJ=new Map,vJ="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function fm(g,x){bJ.set(g,x),s(x,[g])}for(var x5=0;x5<vJ.length;x5++){var w5=vJ[x5],pNe=w5.toLowerCase(),mNe=w5[0].toUpperCase()+w5.slice(1);fm(pNe,"on"+mNe)}fm(pJ,"onAnimationEnd"),fm(mJ,"onAnimationIteration"),fm(gJ,"onAnimationStart"),fm("dblclick","onDoubleClick"),fm("focusin","onFocus"),fm("focusout","onBlur"),fm(yJ,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var BE="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gNe=new Set("cancel close invalid load scroll toggle".split(" ").concat(BE));function xJ(g,x,A){var P=g.type||"unknown-event";g.currentTarget=A,kl(P,x,void 0,g),g.currentTarget=null}function wJ(g,x){x=(x&4)!==0;for(var A=0;A<g.length;A++){var P=g[A],B=P.event;P=P.listeners;e:{var H=void 0;if(x)for(var ee=P.length-1;0<=ee;ee--){var fe=P[ee],ve=fe.instance,Fe=fe.currentTarget;if(fe=fe.listener,ve!==H&&B.isPropagationStopped())break e;xJ(B,fe,Fe),H=ve}else for(ee=0;ee<P.length;ee++){if(fe=P[ee],ve=fe.instance,Fe=fe.currentTarget,fe=fe.listener,ve!==H&&B.isPropagationStopped())break e;xJ(B,fe,Fe),H=ve}}}if(lo)throw g=ju,lo=!1,ju=null,g}function ei(g,x){var A=x[I5];A===void 0&&(A=x[I5]=new Set);var P=g+"__bubble";A.has(P)||(EJ(x,g,2,!1),A.add(P))}function E5(g,x,A){var P=0;x&&(P|=4),EJ(A,g,P,x)}var FA="_reactListening"+Math.random().toString(36).slice(2);function jE(g){if(!g[FA]){g[FA]=!0,r.forEach(function(A){A!=="selectionchange"&&(gNe.has(A)||E5(A,!1,g),E5(A,!0,g))});var x=g.nodeType===9?g:g.ownerDocument;x===null||x[FA]||(x[FA]=!0,E5("selectionchange",!1,x))}}function EJ(g,x,A,P){switch(wr(x)){case 1:var B=ye;break;case 4:B=Be;break;default:B=Bt}A=B.bind(null,x,A,g),B=void 0,!$s||x!=="touchstart"&&x!=="touchmove"&&x!=="wheel"||(B=!0),P?B!==void 0?g.addEventListener(x,A,{capture:!0,passive:B}):g.addEventListener(x,A,!0):B!==void 0?g.addEventListener(x,A,{passive:B}):g.addEventListener(x,A,!1)}function _5(g,x,A,P,B){var H=P;if(!(x&1)&&!(x&2)&&P!==null)e:for(;;){if(P===null)return;var ee=P.tag;if(ee===3||ee===4){var fe=P.stateNode.containerInfo;if(fe===B||fe.nodeType===8&&fe.parentNode===B)break;if(ee===4)for(ee=P.return;ee!==null;){var ve=ee.tag;if((ve===3||ve===4)&&(ve=ee.stateNode.containerInfo,ve===B||ve.nodeType===8&&ve.parentNode===B))return;ee=ee.return}for(;fe!==null;){if(ee=Rg(fe),ee===null)return;if(ve=ee.tag,ve===5||ve===6){P=H=ee;continue e}fe=fe.parentNode}}P=P.return}Wr(function(){var Fe=H,ot=Ns(A),dt=[];e:{var st=bJ.get(g);if(st!==void 0){var Mt=Tb,zt=g;switch(g){case"keypress":if(Pl(A)===0)break e;case"keydown":case"keyup":Mt=V;break;case"focusin":zt="focus",Mt=kb;break;case"focusout":zt="blur",Mt=kb;break;case"beforeblur":case"afterblur":Mt=kb;break;case"click":if(A.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Mt=Sb;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Mt=kA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Mt=Ve;break;case pJ:case mJ:case gJ:Mt=wh;break;case yJ:Mt=Cr;break;case"scroll":Mt=h5;break;case"wheel":Mt=Xn;break;case"copy":case"cut":case"paste":Mt=DA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Mt=ie}var Ut=(x&4)!==0,Fi=!Ut&&g==="scroll",Ie=Ut?st!==null?st+"Capture":null:st;Ut=[];for(var _e=Fe,Pe;_e!==null;){Pe=_e;var vt=Pe.stateNode;if(Pe.tag===5&&vt!==null&&(Pe=vt,Ie!==null&&(vt=br(_e,Ie),vt!=null&&Ut.push(zE(_e,vt,Pe)))),Fi)break;_e=_e.return}0<Ut.length&&(st=new Mt(st,zt,null,A,ot),dt.push({event:st,listeners:Ut}))}}if(!(x&7)){e:{if(st=g==="mouseover"||g==="pointerover",Mt=g==="mouseout"||g==="pointerout",st&&A!==Ln&&(zt=A.relatedTarget||A.fromElement)&&(Rg(zt)||zt[Eh]))break e;if((Mt||st)&&(st=ot.window===ot?ot:(st=ot.ownerDocument)?st.defaultView||st.parentWindow:window,Mt?(zt=A.relatedTarget||A.toElement,Mt=Fe,zt=zt?Rg(zt):null,zt!==null&&(Fi=gi(zt),zt!==Fi||zt.tag!==5&&zt.tag!==6)&&(zt=null)):(Mt=null,zt=Fe),Mt!==zt)){if(Ut=Sb,vt="onMouseLeave",Ie="onMouseEnter",_e="mouse",(g==="pointerout"||g==="pointerover")&&(Ut=ie,vt="onPointerLeave",Ie="onPointerEnter",_e="pointer"),Fi=Mt==null?st:Mb(Mt),Pe=zt==null?st:Mb(zt),st=new Ut(vt,_e+"leave",Mt,A,ot),st.target=Fi,st.relatedTarget=Pe,vt=null,Rg(ot)===Fe&&(Ut=new Ut(Ie,_e+"enter",zt,A,ot),Ut.target=Pe,Ut.relatedTarget=Fi,vt=Ut),Fi=vt,Mt&&zt)t:{for(Ut=Mt,Ie=zt,_e=0,Pe=Ut;Pe;Pe=Ob(Pe))_e++;for(Pe=0,vt=Ie;vt;vt=Ob(vt))Pe++;for(;0<_e-Pe;)Ut=Ob(Ut),_e--;for(;0<Pe-_e;)Ie=Ob(Ie),Pe--;for(;_e--;){if(Ut===Ie||Ie!==null&&Ut===Ie.alternate)break t;Ut=Ob(Ut),Ie=Ob(Ie)}Ut=null}else Ut=null;Mt!==null&&_J(dt,st,Mt,Ut,!1),zt!==null&&Fi!==null&&_J(dt,Fi,zt,Ut,!0)}}e:{if(st=Fe?Mb(Fe):window,Mt=st.nodeName&&st.nodeName.toLowerCase(),Mt==="select"||Mt==="input"&&st.type==="file")var Yt=oNe;else if(nJ(st))if(iJ)Yt=cNe;else{Yt=uNe;var sn=aNe}else(Mt=st.nodeName)&&Mt.toLowerCase()==="input"&&(st.type==="checkbox"||st.type==="radio")&&(Yt=lNe);if(Yt&&(Yt=Yt(g,Fe))){rJ(dt,Yt,A,ot);break e}sn&&sn(g,st,Fe),g==="focusout"&&(sn=st._wrapperState)&&sn.controlled&&st.type==="number"&&Ke(st,"number",st.value)}switch(sn=Fe?Mb(Fe):window,g){case"focusin":(nJ(sn)||sn.contentEditable==="true")&&(Pb=sn,y5=Fe,FE=null);break;case"focusout":FE=y5=Pb=null;break;case"mousedown":b5=!0;break;case"contextmenu":case"mouseup":case"dragend":b5=!1,fJ(dt,A,ot);break;case"selectionchange":if(hNe)break;case"keydown":case"keyup":fJ(dt,A,ot)}var on;if(Qi)e:{switch(g){case"compositionstart":var dn="onCompositionStart";break e;case"compositionend":dn="onCompositionEnd";break e;case"compositionupdate":dn="onCompositionUpdate";break e}dn=void 0}else Db?eJ(g,A)&&(dn="onCompositionEnd"):g==="keydown"&&A.keyCode===229&&(dn="onCompositionStart");dn&&(Ig&&A.locale!=="ko"&&(Db||dn!=="onCompositionStart"?dn==="onCompositionEnd"&&Db&&(on=hs()):(yn=ot,vr="value"in yn?yn.value:yn.textContent,Db=!0)),sn=BA(Fe,dn),0<sn.length&&(dn=new OE(dn,g,null,A,ot),dt.push({event:dn,listeners:sn}),on?dn.data=on:(on=tJ(A),on!==null&&(dn.data=on)))),(on=Vu?nNe(g,A):rNe(g,A))&&(Fe=BA(Fe,"onBeforeInput"),0<Fe.length&&(ot=new OE("onBeforeInput","beforeinput",null,A,ot),dt.push({event:ot,listeners:Fe}),ot.data=on))}wJ(dt,x)})}function zE(g,x,A){return{instance:g,listener:x,currentTarget:A}}function BA(g,x){for(var A=x+"Capture",P=[];g!==null;){var B=g,H=B.stateNode;B.tag===5&&H!==null&&(B=H,H=br(g,A),H!=null&&P.unshift(zE(g,H,B)),H=br(g,x),H!=null&&P.push(zE(g,H,B))),g=g.return}return P}function Ob(g){if(g===null)return null;do g=g.return;while(g&&g.tag!==5);return g||null}function _J(g,x,A,P,B){for(var H=x._reactName,ee=[];A!==null&&A!==P;){var fe=A,ve=fe.alternate,Fe=fe.stateNode;if(ve!==null&&ve===P)break;fe.tag===5&&Fe!==null&&(fe=Fe,B?(ve=br(A,H),ve!=null&&ee.unshift(zE(A,ve,fe))):B||(ve=br(A,H),ve!=null&&ee.push(zE(A,ve,fe)))),A=A.return}ee.length!==0&&g.push({event:x,listeners:ee})}var yNe=/\r\n?/g,bNe=/\u0000|\uFFFD/g;function TJ(g){return(typeof g=="string"?g:""+g).replace(yNe,`
`).replace(bNe,"")}function jA(g,x,A){if(x=TJ(x),TJ(g)!==x&&A)throw Error(n(425))}function zA(){}var T5=null,C5=null;function S5(g,x){return g==="textarea"||g==="noscript"||typeof x.children=="string"||typeof x.children=="number"||typeof x.dangerouslySetInnerHTML=="object"&&x.dangerouslySetInnerHTML!==null&&x.dangerouslySetInnerHTML.__html!=null}var A5=typeof setTimeout=="function"?setTimeout:void 0,vNe=typeof clearTimeout=="function"?clearTimeout:void 0,CJ=typeof Promise=="function"?Promise:void 0,xNe=typeof queueMicrotask=="function"?queueMicrotask:typeof CJ<"u"?function(g){return CJ.resolve(null).then(g).catch(wNe)}:A5;function wNe(g){setTimeout(function(){throw g})}function k5(g,x){var A=x,P=0;do{var B=A.nextSibling;if(g.removeChild(A),B&&B.nodeType===8)if(A=B.data,A==="/$"){if(P===0){g.removeChild(B),Za(x);return}P--}else A!=="$"&&A!=="$?"&&A!=="$!"||P++;A=B}while(A);Za(x)}function hm(g){for(;g!=null;g=g.nextSibling){var x=g.nodeType;if(x===1||x===3)break;if(x===8){if(x=g.data,x==="$"||x==="$!"||x==="$?")break;if(x==="/$")return null}}return g}function SJ(g){g=g.previousSibling;for(var x=0;g;){if(g.nodeType===8){var A=g.data;if(A==="$"||A==="$!"||A==="$?"){if(x===0)return g;x--}else A==="/$"&&x++}g=g.previousSibling}return null}var $b=Math.random().toString(36).slice(2),zd="__reactFiber$"+$b,UE="__reactProps$"+$b,Eh="__reactContainer$"+$b,I5="__reactEvents$"+$b,ENe="__reactListeners$"+$b,_Ne="__reactHandles$"+$b;function Rg(g){var x=g[zd];if(x)return x;for(var A=g.parentNode;A;){if(x=A[Eh]||A[zd]){if(A=x.alternate,x.child!==null||A!==null&&A.child!==null)for(g=SJ(g);g!==null;){if(A=g[zd])return A;g=SJ(g)}return x}g=A,A=g.parentNode}return null}function VE(g){return g=g[zd]||g[Eh],!g||g.tag!==5&&g.tag!==6&&g.tag!==13&&g.tag!==3?null:g}function Mb(g){if(g.tag===5||g.tag===6)return g.stateNode;throw Error(n(33))}function UA(g){return g[UE]||null}var R5=[],Lb=-1;function pm(g){return{current:g}}function ti(g){0>Lb||(g.current=R5[Lb],R5[Lb]=null,Lb--)}function Yr(g,x){Lb++,R5[Lb]=g.current,g.current=x}var mm={},Uo=pm(mm),tu=pm(!1),Dg=mm;function Fb(g,x){var A=g.type.contextTypes;if(!A)return mm;var P=g.stateNode;if(P&&P.__reactInternalMemoizedUnmaskedChildContext===x)return P.__reactInternalMemoizedMaskedChildContext;var B={},H;for(H in A)B[H]=x[H];return P&&(g=g.stateNode,g.__reactInternalMemoizedUnmaskedChildContext=x,g.__reactInternalMemoizedMaskedChildContext=B),B}function nu(g){return g=g.childContextTypes,g!=null}function VA(){ti(tu),ti(Uo)}function AJ(g,x,A){if(Uo.current!==mm)throw Error(n(168));Yr(Uo,x),Yr(tu,A)}function kJ(g,x,A){var P=g.stateNode;if(x=x.childContextTypes,typeof P.getChildContext!="function")return A;P=P.getChildContext();for(var B in P)if(!(B in x))throw Error(n(108,pe(g)||"Unknown",B));return U({},A,P)}function HA(g){return g=(g=g.stateNode)&&g.__reactInternalMemoizedMergedChildContext||mm,Dg=Uo.current,Yr(Uo,g),Yr(tu,tu.current),!0}function IJ(g,x,A){var P=g.stateNode;if(!P)throw Error(n(169));A?(g=kJ(g,x,Dg),P.__reactInternalMemoizedMergedChildContext=g,ti(tu),ti(Uo),Yr(Uo,g)):ti(tu),Yr(tu,A)}var _h=null,qA=!1,D5=!1;function RJ(g){_h===null?_h=[g]:_h.push(g)}function TNe(g){qA=!0,RJ(g)}function gm(){if(!D5&&_h!==null){D5=!0;var g=0,x=Xt;try{var A=_h;for(Xt=1;g<A.length;g++){var P=A[g];do P=P(!0);while(P!==null)}_h=null,qA=!1}catch(B){throw _h!==null&&(_h=_h.slice(g+1)),$d(us,gm),B}finally{Xt=x,D5=!1}}return null}var Bb=[],jb=0,WA=null,GA=0,Ol=[],$l=0,Pg=null,Th=1,Ch="";function Ng(g,x){Bb[jb++]=GA,Bb[jb++]=WA,WA=g,GA=x}function DJ(g,x,A){Ol[$l++]=Th,Ol[$l++]=Ch,Ol[$l++]=Pg,Pg=g;var P=Th;g=Ch;var B=32-ds(P)-1;P&=~(1<<B),A+=1;var H=32-ds(x)+B;if(30<H){var ee=B-B%5;H=(P&(1<<ee)-1).toString(32),P>>=ee,B-=ee,Th=1<<32-ds(x)+B|A<<B|P,Ch=H+g}else Th=1<<H|A<<B|P,Ch=g}function P5(g){g.return!==null&&(Ng(g,1),DJ(g,1,0))}function N5(g){for(;g===WA;)WA=Bb[--jb],Bb[jb]=null,GA=Bb[--jb],Bb[jb]=null;for(;g===Pg;)Pg=Ol[--$l],Ol[$l]=null,Ch=Ol[--$l],Ol[$l]=null,Th=Ol[--$l],Ol[$l]=null}var Hu=null,qu=null,ui=!1,Sc=null;function PJ(g,x){var A=Bl(5,null,null,0);A.elementType="DELETED",A.stateNode=x,A.return=g,x=g.deletions,x===null?(g.deletions=[A],g.flags|=16):x.push(A)}function NJ(g,x){switch(g.tag){case 5:var A=g.type;return x=x.nodeType!==1||A.toLowerCase()!==x.nodeName.toLowerCase()?null:x,x!==null?(g.stateNode=x,Hu=g,qu=hm(x.firstChild),!0):!1;case 6:return x=g.pendingProps===""||x.nodeType!==3?null:x,x!==null?(g.stateNode=x,Hu=g,qu=null,!0):!1;case 13:return x=x.nodeType!==8?null:x,x!==null?(A=Pg!==null?{id:Th,overflow:Ch}:null,g.memoizedState={dehydrated:x,treeContext:A,retryLane:1073741824},A=Bl(18,null,null,0),A.stateNode=x,A.return=g,g.child=A,Hu=g,qu=null,!0):!1;default:return!1}}function O5(g){return(g.mode&1)!==0&&(g.flags&128)===0}function $5(g){if(ui){var x=qu;if(x){var A=x;if(!NJ(g,x)){if(O5(g))throw Error(n(418));x=hm(A.nextSibling);var P=Hu;x&&NJ(g,x)?PJ(P,A):(g.flags=g.flags&-4097|2,ui=!1,Hu=g)}}else{if(O5(g))throw Error(n(418));g.flags=g.flags&-4097|2,ui=!1,Hu=g}}}function OJ(g){for(g=g.return;g!==null&&g.tag!==5&&g.tag!==3&&g.tag!==13;)g=g.return;Hu=g}function YA(g){if(g!==Hu)return!1;if(!ui)return OJ(g),ui=!0,!1;var x;if((x=g.tag!==3)&&!(x=g.tag!==5)&&(x=g.type,x=x!=="head"&&x!=="body"&&!S5(g.type,g.memoizedProps)),x&&(x=qu)){if(O5(g))throw $J(),Error(n(418));for(;x;)PJ(g,x),x=hm(x.nextSibling)}if(OJ(g),g.tag===13){if(g=g.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(n(317));e:{for(g=g.nextSibling,x=0;g;){if(g.nodeType===8){var A=g.data;if(A==="/$"){if(x===0){qu=hm(g.nextSibling);break e}x--}else A!=="$"&&A!=="$!"&&A!=="$?"||x++}g=g.nextSibling}qu=null}}else qu=Hu?hm(g.stateNode.nextSibling):null;return!0}function $J(){for(var g=qu;g;)g=hm(g.nextSibling)}function zb(){qu=Hu=null,ui=!1}function M5(g){Sc===null?Sc=[g]:Sc.push(g)}var CNe=E.ReactCurrentBatchConfig;function HE(g,x,A){if(g=A.ref,g!==null&&typeof g!="function"&&typeof g!="object"){if(A._owner){if(A=A._owner,A){if(A.tag!==1)throw Error(n(309));var P=A.stateNode}if(!P)throw Error(n(147,g));var B=P,H=""+g;return x!==null&&x.ref!==null&&typeof x.ref=="function"&&x.ref._stringRef===H?x.ref:(x=function(ee){var fe=B.refs;ee===null?delete fe[H]:fe[H]=ee},x._stringRef=H,x)}if(typeof g!="string")throw Error(n(284));if(!A._owner)throw Error(n(290,g))}return g}function KA(g,x){throw g=Object.prototype.toString.call(x),Error(n(31,g==="[object Object]"?"object with keys {"+Object.keys(x).join(", ")+"}":g))}function MJ(g){var x=g._init;return x(g._payload)}function LJ(g){function x(Ie,_e){if(g){var Pe=Ie.deletions;Pe===null?(Ie.deletions=[_e],Ie.flags|=16):Pe.push(_e)}}function A(Ie,_e){if(!g)return null;for(;_e!==null;)x(Ie,_e),_e=_e.sibling;return null}function P(Ie,_e){for(Ie=new Map;_e!==null;)_e.key!==null?Ie.set(_e.key,_e):Ie.set(_e.index,_e),_e=_e.sibling;return Ie}function B(Ie,_e){return Ie=Tm(Ie,_e),Ie.index=0,Ie.sibling=null,Ie}function H(Ie,_e,Pe){return Ie.index=Pe,g?(Pe=Ie.alternate,Pe!==null?(Pe=Pe.index,Pe<_e?(Ie.flags|=2,_e):Pe):(Ie.flags|=2,_e)):(Ie.flags|=1048576,_e)}function ee(Ie){return g&&Ie.alternate===null&&(Ie.flags|=2),Ie}function fe(Ie,_e,Pe,vt){return _e===null||_e.tag!==6?(_e=AM(Pe,Ie.mode,vt),_e.return=Ie,_e):(_e=B(_e,Pe),_e.return=Ie,_e)}function ve(Ie,_e,Pe,vt){var Yt=Pe.type;return Yt===S?ot(Ie,_e,Pe.props.children,vt,Pe.key):_e!==null&&(_e.elementType===Yt||typeof Yt=="object"&&Yt!==null&&Yt.$$typeof===W&&MJ(Yt)===_e.type)?(vt=B(_e,Pe.props),vt.ref=HE(Ie,_e,Pe),vt.return=Ie,vt):(vt=vk(Pe.type,Pe.key,Pe.props,null,Ie.mode,vt),vt.ref=HE(Ie,_e,Pe),vt.return=Ie,vt)}function Fe(Ie,_e,Pe,vt){return _e===null||_e.tag!==4||_e.stateNode.containerInfo!==Pe.containerInfo||_e.stateNode.implementation!==Pe.implementation?(_e=kM(Pe,Ie.mode,vt),_e.return=Ie,_e):(_e=B(_e,Pe.children||[]),_e.return=Ie,_e)}function ot(Ie,_e,Pe,vt,Yt){return _e===null||_e.tag!==7?(_e=zg(Pe,Ie.mode,vt,Yt),_e.return=Ie,_e):(_e=B(_e,Pe),_e.return=Ie,_e)}function dt(Ie,_e,Pe){if(typeof _e=="string"&&_e!==""||typeof _e=="number")return _e=AM(""+_e,Ie.mode,Pe),_e.return=Ie,_e;if(typeof _e=="object"&&_e!==null){switch(_e.$$typeof){case _:return Pe=vk(_e.type,_e.key,_e.props,null,Ie.mode,Pe),Pe.ref=HE(Ie,null,_e),Pe.return=Ie,Pe;case C:return _e=kM(_e,Ie.mode,Pe),_e.return=Ie,_e;case W:var vt=_e._init;return dt(Ie,vt(_e._payload),Pe)}if(ut(_e)||Z(_e))return _e=zg(_e,Ie.mode,Pe,null),_e.return=Ie,_e;KA(Ie,_e)}return null}function st(Ie,_e,Pe,vt){var Yt=_e!==null?_e.key:null;if(typeof Pe=="string"&&Pe!==""||typeof Pe=="number")return Yt!==null?null:fe(Ie,_e,""+Pe,vt);if(typeof Pe=="object"&&Pe!==null){switch(Pe.$$typeof){case _:return Pe.key===Yt?ve(Ie,_e,Pe,vt):null;case C:return Pe.key===Yt?Fe(Ie,_e,Pe,vt):null;case W:return Yt=Pe._init,st(Ie,_e,Yt(Pe._payload),vt)}if(ut(Pe)||Z(Pe))return Yt!==null?null:ot(Ie,_e,Pe,vt,null);KA(Ie,Pe)}return null}function Mt(Ie,_e,Pe,vt,Yt){if(typeof vt=="string"&&vt!==""||typeof vt=="number")return Ie=Ie.get(Pe)||null,fe(_e,Ie,""+vt,Yt);if(typeof vt=="object"&&vt!==null){switch(vt.$$typeof){case _:return Ie=Ie.get(vt.key===null?Pe:vt.key)||null,ve(_e,Ie,vt,Yt);case C:return Ie=Ie.get(vt.key===null?Pe:vt.key)||null,Fe(_e,Ie,vt,Yt);case W:var sn=vt._init;return Mt(Ie,_e,Pe,sn(vt._payload),Yt)}if(ut(vt)||Z(vt))return Ie=Ie.get(Pe)||null,ot(_e,Ie,vt,Yt,null);KA(_e,vt)}return null}function zt(Ie,_e,Pe,vt){for(var Yt=null,sn=null,on=_e,dn=_e=0,zs=null;on!==null&&dn<Pe.length;dn++){on.index>dn?(zs=on,on=null):zs=on.sibling;var lr=st(Ie,on,Pe[dn],vt);if(lr===null){on===null&&(on=zs);break}g&&on&&lr.alternate===null&&x(Ie,on),_e=H(lr,_e,dn),sn===null?Yt=lr:sn.sibling=lr,sn=lr,on=zs}if(dn===Pe.length)return A(Ie,on),ui&&Ng(Ie,dn),Yt;if(on===null){for(;dn<Pe.length;dn++)on=dt(Ie,Pe[dn],vt),on!==null&&(_e=H(on,_e,dn),sn===null?Yt=on:sn.sibling=on,sn=on);return ui&&Ng(Ie,dn),Yt}for(on=P(Ie,on);dn<Pe.length;dn++)zs=Mt(on,Ie,dn,Pe[dn],vt),zs!==null&&(g&&zs.alternate!==null&&on.delete(zs.key===null?dn:zs.key),_e=H(zs,_e,dn),sn===null?Yt=zs:sn.sibling=zs,sn=zs);return g&&on.forEach(function(Cm){return x(Ie,Cm)}),ui&&Ng(Ie,dn),Yt}function Ut(Ie,_e,Pe,vt){var Yt=Z(Pe);if(typeof Yt!="function")throw Error(n(150));if(Pe=Yt.call(Pe),Pe==null)throw Error(n(151));for(var sn=Yt=null,on=_e,dn=_e=0,zs=null,lr=Pe.next();on!==null&&!lr.done;dn++,lr=Pe.next()){on.index>dn?(zs=on,on=null):zs=on.sibling;var Cm=st(Ie,on,lr.value,vt);if(Cm===null){on===null&&(on=zs);break}g&&on&&Cm.alternate===null&&x(Ie,on),_e=H(Cm,_e,dn),sn===null?Yt=Cm:sn.sibling=Cm,sn=Cm,on=zs}if(lr.done)return A(Ie,on),ui&&Ng(Ie,dn),Yt;if(on===null){for(;!lr.done;dn++,lr=Pe.next())lr=dt(Ie,lr.value,vt),lr!==null&&(_e=H(lr,_e,dn),sn===null?Yt=lr:sn.sibling=lr,sn=lr);return ui&&Ng(Ie,dn),Yt}for(on=P(Ie,on);!lr.done;dn++,lr=Pe.next())lr=Mt(on,Ie,dn,lr.value,vt),lr!==null&&(g&&lr.alternate!==null&&on.delete(lr.key===null?dn:lr.key),_e=H(lr,_e,dn),sn===null?Yt=lr:sn.sibling=lr,sn=lr);return g&&on.forEach(function(r4e){return x(Ie,r4e)}),ui&&Ng(Ie,dn),Yt}function Fi(Ie,_e,Pe,vt){if(typeof Pe=="object"&&Pe!==null&&Pe.type===S&&Pe.key===null&&(Pe=Pe.props.children),typeof Pe=="object"&&Pe!==null){switch(Pe.$$typeof){case _:e:{for(var Yt=Pe.key,sn=_e;sn!==null;){if(sn.key===Yt){if(Yt=Pe.type,Yt===S){if(sn.tag===7){A(Ie,sn.sibling),_e=B(sn,Pe.props.children),_e.return=Ie,Ie=_e;break e}}else if(sn.elementType===Yt||typeof Yt=="object"&&Yt!==null&&Yt.$$typeof===W&&MJ(Yt)===sn.type){A(Ie,sn.sibling),_e=B(sn,Pe.props),_e.ref=HE(Ie,sn,Pe),_e.return=Ie,Ie=_e;break e}A(Ie,sn);break}else x(Ie,sn);sn=sn.sibling}Pe.type===S?(_e=zg(Pe.props.children,Ie.mode,vt,Pe.key),_e.return=Ie,Ie=_e):(vt=vk(Pe.type,Pe.key,Pe.props,null,Ie.mode,vt),vt.ref=HE(Ie,_e,Pe),vt.return=Ie,Ie=vt)}return ee(Ie);case C:e:{for(sn=Pe.key;_e!==null;){if(_e.key===sn)if(_e.tag===4&&_e.stateNode.containerInfo===Pe.containerInfo&&_e.stateNode.implementation===Pe.implementation){A(Ie,_e.sibling),_e=B(_e,Pe.children||[]),_e.return=Ie,Ie=_e;break e}else{A(Ie,_e);break}else x(Ie,_e);_e=_e.sibling}_e=kM(Pe,Ie.mode,vt),_e.return=Ie,Ie=_e}return ee(Ie);case W:return sn=Pe._init,Fi(Ie,_e,sn(Pe._payload),vt)}if(ut(Pe))return zt(Ie,_e,Pe,vt);if(Z(Pe))return Ut(Ie,_e,Pe,vt);KA(Ie,Pe)}return typeof Pe=="string"&&Pe!==""||typeof Pe=="number"?(Pe=""+Pe,_e!==null&&_e.tag===6?(A(Ie,_e.sibling),_e=B(_e,Pe),_e.return=Ie,Ie=_e):(A(Ie,_e),_e=AM(Pe,Ie.mode,vt),_e.return=Ie,Ie=_e),ee(Ie)):A(Ie,_e)}return Fi}var Ub=LJ(!0),FJ=LJ(!1),XA=pm(null),QA=null,Vb=null,L5=null;function F5(){L5=Vb=QA=null}function B5(g){var x=XA.current;ti(XA),g._currentValue=x}function j5(g,x,A){for(;g!==null;){var P=g.alternate;if((g.childLanes&x)!==x?(g.childLanes|=x,P!==null&&(P.childLanes|=x)):P!==null&&(P.childLanes&x)!==x&&(P.childLanes|=x),g===A)break;g=g.return}}function Hb(g,x){QA=g,L5=Vb=null,g=g.dependencies,g!==null&&g.firstContext!==null&&(g.lanes&x&&(ru=!0),g.firstContext=null)}function Ml(g){var x=g._currentValue;if(L5!==g)if(g={context:g,memoizedValue:x,next:null},Vb===null){if(QA===null)throw Error(n(308));Vb=g,QA.dependencies={lanes:0,firstContext:g}}else Vb=Vb.next=g;return x}var Og=null;function z5(g){Og===null?Og=[g]:Og.push(g)}function BJ(g,x,A,P){var B=x.interleaved;return B===null?(A.next=A,z5(x)):(A.next=B.next,B.next=A),x.interleaved=A,Sh(g,P)}function Sh(g,x){g.lanes|=x;var A=g.alternate;for(A!==null&&(A.lanes|=x),A=g,g=g.return;g!==null;)g.childLanes|=x,A=g.alternate,A!==null&&(A.childLanes|=x),A=g,g=g.return;return A.tag===3?A.stateNode:null}var ym=!1;function U5(g){g.updateQueue={baseState:g.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function jJ(g,x){g=g.updateQueue,x.updateQueue===g&&(x.updateQueue={baseState:g.baseState,firstBaseUpdate:g.firstBaseUpdate,lastBaseUpdate:g.lastBaseUpdate,shared:g.shared,effects:g.effects})}function Ah(g,x){return{eventTime:g,lane:x,tag:0,payload:null,callback:null,next:null}}function bm(g,x,A){var P=g.updateQueue;if(P===null)return null;if(P=P.shared,er&2){var B=P.pending;return B===null?x.next=x:(x.next=B.next,B.next=x),P.pending=x,Sh(g,A)}return B=P.interleaved,B===null?(x.next=x,z5(P)):(x.next=B.next,B.next=x),P.interleaved=x,Sh(g,A)}function JA(g,x,A){if(x=x.updateQueue,x!==null&&(x=x.shared,(A&4194240)!==0)){var P=x.lanes;P&=g.pendingLanes,A|=P,x.lanes=A,kn(g,A)}}function zJ(g,x){var A=g.updateQueue,P=g.alternate;if(P!==null&&(P=P.updateQueue,A===P)){var B=null,H=null;if(A=A.firstBaseUpdate,A!==null){do{var ee={eventTime:A.eventTime,lane:A.lane,tag:A.tag,payload:A.payload,callback:A.callback,next:null};H===null?B=H=ee:H=H.next=ee,A=A.next}while(A!==null);H===null?B=H=x:H=H.next=x}else B=H=x;A={baseState:P.baseState,firstBaseUpdate:B,lastBaseUpdate:H,shared:P.shared,effects:P.effects},g.updateQueue=A;return}g=A.lastBaseUpdate,g===null?A.firstBaseUpdate=x:g.next=x,A.lastBaseUpdate=x}function ZA(g,x,A,P){var B=g.updateQueue;ym=!1;var H=B.firstBaseUpdate,ee=B.lastBaseUpdate,fe=B.shared.pending;if(fe!==null){B.shared.pending=null;var ve=fe,Fe=ve.next;ve.next=null,ee===null?H=Fe:ee.next=Fe,ee=ve;var ot=g.alternate;ot!==null&&(ot=ot.updateQueue,fe=ot.lastBaseUpdate,fe!==ee&&(fe===null?ot.firstBaseUpdate=Fe:fe.next=Fe,ot.lastBaseUpdate=ve))}if(H!==null){var dt=B.baseState;ee=0,ot=Fe=ve=null,fe=H;do{var st=fe.lane,Mt=fe.eventTime;if((P&st)===st){ot!==null&&(ot=ot.next={eventTime:Mt,lane:0,tag:fe.tag,payload:fe.payload,callback:fe.callback,next:null});e:{var zt=g,Ut=fe;switch(st=x,Mt=A,Ut.tag){case 1:if(zt=Ut.payload,typeof zt=="function"){dt=zt.call(Mt,dt,st);break e}dt=zt;break e;case 3:zt.flags=zt.flags&-65537|128;case 0:if(zt=Ut.payload,st=typeof zt=="function"?zt.call(Mt,dt,st):zt,st==null)break e;dt=U({},dt,st);break e;case 2:ym=!0}}fe.callback!==null&&fe.lane!==0&&(g.flags|=64,st=B.effects,st===null?B.effects=[fe]:st.push(fe))}else Mt={eventTime:Mt,lane:st,tag:fe.tag,payload:fe.payload,callback:fe.callback,next:null},ot===null?(Fe=ot=Mt,ve=dt):ot=ot.next=Mt,ee|=st;if(fe=fe.next,fe===null){if(fe=B.shared.pending,fe===null)break;st=fe,fe=st.next,st.next=null,B.lastBaseUpdate=st,B.shared.pending=null}}while(!0);if(ot===null&&(ve=dt),B.baseState=ve,B.firstBaseUpdate=Fe,B.lastBaseUpdate=ot,x=B.shared.interleaved,x!==null){B=x;do ee|=B.lane,B=B.next;while(B!==x)}else H===null&&(B.shared.lanes=0);Lg|=ee,g.lanes=ee,g.memoizedState=dt}}function UJ(g,x,A){if(g=x.effects,x.effects=null,g!==null)for(x=0;x<g.length;x++){var P=g[x],B=P.callback;if(B!==null){if(P.callback=null,P=A,typeof B!="function")throw Error(n(191,B));B.call(P)}}}var qE={},Ud=pm(qE),WE=pm(qE),GE=pm(qE);function $g(g){if(g===qE)throw Error(n(174));return g}function V5(g,x){switch(Yr(GE,x),Yr(WE,g),Yr(Ud,qE),g=x.nodeType,g){case 9:case 11:x=(x=x.documentElement)?x.namespaceURI:Oe(null,"");break;default:g=g===8?x.parentNode:x,x=g.namespaceURI||null,g=g.tagName,x=Oe(x,g)}ti(Ud),Yr(Ud,x)}function qb(){ti(Ud),ti(WE),ti(GE)}function VJ(g){$g(GE.current);var x=$g(Ud.current),A=Oe(x,g.type);x!==A&&(Yr(WE,g),Yr(Ud,A))}function H5(g){WE.current===g&&(ti(Ud),ti(WE))}var bi=pm(0);function ek(g){for(var x=g;x!==null;){if(x.tag===13){var A=x.memoizedState;if(A!==null&&(A=A.dehydrated,A===null||A.data==="$?"||A.data==="$!"))return x}else if(x.tag===19&&x.memoizedProps.revealOrder!==void 0){if(x.flags&128)return x}else if(x.child!==null){x.child.return=x,x=x.child;continue}if(x===g)break;for(;x.sibling===null;){if(x.return===null||x.return===g)return null;x=x.return}x.sibling.return=x.return,x=x.sibling}return null}var q5=[];function W5(){for(var g=0;g<q5.length;g++)q5[g]._workInProgressVersionPrimary=null;q5.length=0}var tk=E.ReactCurrentDispatcher,G5=E.ReactCurrentBatchConfig,Mg=0,vi=null,ms=null,Bs=null,nk=!1,YE=!1,KE=0,SNe=0;function Vo(){throw Error(n(321))}function Y5(g,x){if(x===null)return!1;for(var A=0;A<x.length&&A<g.length;A++)if(!Cc(g[A],x[A]))return!1;return!0}function K5(g,x,A,P,B,H){if(Mg=H,vi=x,x.memoizedState=null,x.updateQueue=null,x.lanes=0,tk.current=g===null||g.memoizedState===null?RNe:DNe,g=A(P,B),YE){H=0;do{if(YE=!1,KE=0,25<=H)throw Error(n(301));H+=1,Bs=ms=null,x.updateQueue=null,tk.current=PNe,g=A(P,B)}while(YE)}if(tk.current=sk,x=ms!==null&&ms.next!==null,Mg=0,Bs=ms=vi=null,nk=!1,x)throw Error(n(300));return g}function X5(){var g=KE!==0;return KE=0,g}function Vd(){var g={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Bs===null?vi.memoizedState=Bs=g:Bs=Bs.next=g,Bs}function Ll(){if(ms===null){var g=vi.alternate;g=g!==null?g.memoizedState:null}else g=ms.next;var x=Bs===null?vi.memoizedState:Bs.next;if(x!==null)Bs=x,ms=g;else{if(g===null)throw Error(n(310));ms=g,g={memoizedState:ms.memoizedState,baseState:ms.baseState,baseQueue:ms.baseQueue,queue:ms.queue,next:null},Bs===null?vi.memoizedState=Bs=g:Bs=Bs.next=g}return Bs}function XE(g,x){return typeof x=="function"?x(g):x}function Q5(g){var x=Ll(),A=x.queue;if(A===null)throw Error(n(311));A.lastRenderedReducer=g;var P=ms,B=P.baseQueue,H=A.pending;if(H!==null){if(B!==null){var ee=B.next;B.next=H.next,H.next=ee}P.baseQueue=B=H,A.pending=null}if(B!==null){H=B.next,P=P.baseState;var fe=ee=null,ve=null,Fe=H;do{var ot=Fe.lane;if((Mg&ot)===ot)ve!==null&&(ve=ve.next={lane:0,action:Fe.action,hasEagerState:Fe.hasEagerState,eagerState:Fe.eagerState,next:null}),P=Fe.hasEagerState?Fe.eagerState:g(P,Fe.action);else{var dt={lane:ot,action:Fe.action,hasEagerState:Fe.hasEagerState,eagerState:Fe.eagerState,next:null};ve===null?(fe=ve=dt,ee=P):ve=ve.next=dt,vi.lanes|=ot,Lg|=ot}Fe=Fe.next}while(Fe!==null&&Fe!==H);ve===null?ee=P:ve.next=fe,Cc(P,x.memoizedState)||(ru=!0),x.memoizedState=P,x.baseState=ee,x.baseQueue=ve,A.lastRenderedState=P}if(g=A.interleaved,g!==null){B=g;do H=B.lane,vi.lanes|=H,Lg|=H,B=B.next;while(B!==g)}else B===null&&(A.lanes=0);return[x.memoizedState,A.dispatch]}function J5(g){var x=Ll(),A=x.queue;if(A===null)throw Error(n(311));A.lastRenderedReducer=g;var P=A.dispatch,B=A.pending,H=x.memoizedState;if(B!==null){A.pending=null;var ee=B=B.next;do H=g(H,ee.action),ee=ee.next;while(ee!==B);Cc(H,x.memoizedState)||(ru=!0),x.memoizedState=H,x.baseQueue===null&&(x.baseState=H),A.lastRenderedState=H}return[H,P]}function HJ(){}function qJ(g,x){var A=vi,P=Ll(),B=x(),H=!Cc(P.memoizedState,B);if(H&&(P.memoizedState=B,ru=!0),P=P.queue,Z5(YJ.bind(null,A,P,g),[g]),P.getSnapshot!==x||H||Bs!==null&&Bs.memoizedState.tag&1){if(A.flags|=2048,QE(9,GJ.bind(null,A,P,B,x),void 0,null),js===null)throw Error(n(349));Mg&30||WJ(A,x,B)}return B}function WJ(g,x,A){g.flags|=16384,g={getSnapshot:x,value:A},x=vi.updateQueue,x===null?(x={lastEffect:null,stores:null},vi.updateQueue=x,x.stores=[g]):(A=x.stores,A===null?x.stores=[g]:A.push(g))}function GJ(g,x,A,P){x.value=A,x.getSnapshot=P,KJ(x)&&XJ(g)}function YJ(g,x,A){return A(function(){KJ(x)&&XJ(g)})}function KJ(g){var x=g.getSnapshot;g=g.value;try{var A=x();return!Cc(g,A)}catch{return!0}}function XJ(g){var x=Sh(g,1);x!==null&&Rc(x,g,1,-1)}function QJ(g){var x=Vd();return typeof g=="function"&&(g=g()),x.memoizedState=x.baseState=g,g={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:XE,lastRenderedState:g},x.queue=g,g=g.dispatch=INe.bind(null,vi,g),[x.memoizedState,g]}function QE(g,x,A,P){return g={tag:g,create:x,destroy:A,deps:P,next:null},x=vi.updateQueue,x===null?(x={lastEffect:null,stores:null},vi.updateQueue=x,x.lastEffect=g.next=g):(A=x.lastEffect,A===null?x.lastEffect=g.next=g:(P=A.next,A.next=g,g.next=P,x.lastEffect=g)),g}function JJ(){return Ll().memoizedState}function rk(g,x,A,P){var B=Vd();vi.flags|=g,B.memoizedState=QE(1|x,A,void 0,P===void 0?null:P)}function ik(g,x,A,P){var B=Ll();P=P===void 0?null:P;var H=void 0;if(ms!==null){var ee=ms.memoizedState;if(H=ee.destroy,P!==null&&Y5(P,ee.deps)){B.memoizedState=QE(x,A,H,P);return}}vi.flags|=g,B.memoizedState=QE(1|x,A,H,P)}function ZJ(g,x){return rk(8390656,8,g,x)}function Z5(g,x){return ik(2048,8,g,x)}function eZ(g,x){return ik(4,2,g,x)}function tZ(g,x){return ik(4,4,g,x)}function nZ(g,x){if(typeof x=="function")return g=g(),x(g),function(){x(null)};if(x!=null)return g=g(),x.current=g,function(){x.current=null}}function rZ(g,x,A){return A=A!=null?A.concat([g]):null,ik(4,4,nZ.bind(null,x,g),A)}function eM(){}function iZ(g,x){var A=Ll();x=x===void 0?null:x;var P=A.memoizedState;return P!==null&&x!==null&&Y5(x,P[1])?P[0]:(A.memoizedState=[g,x],g)}function sZ(g,x){var A=Ll();x=x===void 0?null:x;var P=A.memoizedState;return P!==null&&x!==null&&Y5(x,P[1])?P[0]:(g=g(),A.memoizedState=[g,x],g)}function oZ(g,x,A){return Mg&21?(Cc(A,x)||(A=mt(),vi.lanes|=A,Lg|=A,g.baseState=!0),x):(g.baseState&&(g.baseState=!1,ru=!0),g.memoizedState=A)}function ANe(g,x){var A=Xt;Xt=A!==0&&4>A?A:4,g(!0);var P=G5.transition;G5.transition={};try{g(!1),x()}finally{Xt=A,G5.transition=P}}function aZ(){return Ll().memoizedState}function kNe(g,x,A){var P=Em(g);if(A={lane:P,action:A,hasEagerState:!1,eagerState:null,next:null},uZ(g))lZ(x,A);else if(A=BJ(g,x,A,P),A!==null){var B=Ta();Rc(A,g,P,B),cZ(A,x,P)}}function INe(g,x,A){var P=Em(g),B={lane:P,action:A,hasEagerState:!1,eagerState:null,next:null};if(uZ(g))lZ(x,B);else{var H=g.alternate;if(g.lanes===0&&(H===null||H.lanes===0)&&(H=x.lastRenderedReducer,H!==null))try{var ee=x.lastRenderedState,fe=H(ee,A);if(B.hasEagerState=!0,B.eagerState=fe,Cc(fe,ee)){var ve=x.interleaved;ve===null?(B.next=B,z5(x)):(B.next=ve.next,ve.next=B),x.interleaved=B;return}}catch{}finally{}A=BJ(g,x,B,P),A!==null&&(B=Ta(),Rc(A,g,P,B),cZ(A,x,P))}}function uZ(g){var x=g.alternate;return g===vi||x!==null&&x===vi}function lZ(g,x){YE=nk=!0;var A=g.pending;A===null?x.next=x:(x.next=A.next,A.next=x),g.pending=x}function cZ(g,x,A){if(A&4194240){var P=x.lanes;P&=g.pendingLanes,A|=P,x.lanes=A,kn(g,A)}}var sk={readContext:Ml,useCallback:Vo,useContext:Vo,useEffect:Vo,useImperativeHandle:Vo,useInsertionEffect:Vo,useLayoutEffect:Vo,useMemo:Vo,useReducer:Vo,useRef:Vo,useState:Vo,useDebugValue:Vo,useDeferredValue:Vo,useTransition:Vo,useMutableSource:Vo,useSyncExternalStore:Vo,useId:Vo,unstable_isNewReconciler:!1},RNe={readContext:Ml,useCallback:function(g,x){return Vd().memoizedState=[g,x===void 0?null:x],g},useContext:Ml,useEffect:ZJ,useImperativeHandle:function(g,x,A){return A=A!=null?A.concat([g]):null,rk(4194308,4,nZ.bind(null,x,g),A)},useLayoutEffect:function(g,x){return rk(4194308,4,g,x)},useInsertionEffect:function(g,x){return rk(4,2,g,x)},useMemo:function(g,x){var A=Vd();return x=x===void 0?null:x,g=g(),A.memoizedState=[g,x],g},useReducer:function(g,x,A){var P=Vd();return x=A!==void 0?A(x):x,P.memoizedState=P.baseState=x,g={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:g,lastRenderedState:x},P.queue=g,g=g.dispatch=kNe.bind(null,vi,g),[P.memoizedState,g]},useRef:function(g){var x=Vd();return g={current:g},x.memoizedState=g},useState:QJ,useDebugValue:eM,useDeferredValue:function(g){return Vd().memoizedState=g},useTransition:function(){var g=QJ(!1),x=g[0];return g=ANe.bind(null,g[1]),Vd().memoizedState=g,[x,g]},useMutableSource:function(){},useSyncExternalStore:function(g,x,A){var P=vi,B=Vd();if(ui){if(A===void 0)throw Error(n(407));A=A()}else{if(A=x(),js===null)throw Error(n(349));Mg&30||WJ(P,x,A)}B.memoizedState=A;var H={value:A,getSnapshot:x};return B.queue=H,ZJ(YJ.bind(null,P,H,g),[g]),P.flags|=2048,QE(9,GJ.bind(null,P,H,A,x),void 0,null),A},useId:function(){var g=Vd(),x=js.identifierPrefix;if(ui){var A=Ch,P=Th;A=(P&~(1<<32-ds(P)-1)).toString(32)+A,x=":"+x+"R"+A,A=KE++,0<A&&(x+="H"+A.toString(32)),x+=":"}else A=SNe++,x=":"+x+"r"+A.toString(32)+":";return g.memoizedState=x},unstable_isNewReconciler:!1},DNe={readContext:Ml,useCallback:iZ,useContext:Ml,useEffect:Z5,useImperativeHandle:rZ,useInsertionEffect:eZ,useLayoutEffect:tZ,useMemo:sZ,useReducer:Q5,useRef:JJ,useState:function(){return Q5(XE)},useDebugValue:eM,useDeferredValue:function(g){var x=Ll();return oZ(x,ms.memoizedState,g)},useTransition:function(){var g=Q5(XE)[0],x=Ll().memoizedState;return[g,x]},useMutableSource:HJ,useSyncExternalStore:qJ,useId:aZ,unstable_isNewReconciler:!1},PNe={readContext:Ml,useCallback:iZ,useContext:Ml,useEffect:Z5,useImperativeHandle:rZ,useInsertionEffect:eZ,useLayoutEffect:tZ,useMemo:sZ,useReducer:J5,useRef:JJ,useState:function(){return J5(XE)},useDebugValue:eM,useDeferredValue:function(g){var x=Ll();return ms===null?x.memoizedState=g:oZ(x,ms.memoizedState,g)},useTransition:function(){var g=J5(XE)[0],x=Ll().memoizedState;return[g,x]},useMutableSource:HJ,useSyncExternalStore:qJ,useId:aZ,unstable_isNewReconciler:!1};function Ac(g,x){if(g&&g.defaultProps){x=U({},x),g=g.defaultProps;for(var A in g)x[A]===void 0&&(x[A]=g[A]);return x}return x}function tM(g,x,A,P){x=g.memoizedState,A=A(P,x),A=A==null?x:U({},x,A),g.memoizedState=A,g.lanes===0&&(g.updateQueue.baseState=A)}var ok={isMounted:function(g){return(g=g._reactInternals)?gi(g)===g:!1},enqueueSetState:function(g,x,A){g=g._reactInternals;var P=Ta(),B=Em(g),H=Ah(P,B);H.payload=x,A!=null&&(H.callback=A),x=bm(g,H,B),x!==null&&(Rc(x,g,B,P),JA(x,g,B))},enqueueReplaceState:function(g,x,A){g=g._reactInternals;var P=Ta(),B=Em(g),H=Ah(P,B);H.tag=1,H.payload=x,A!=null&&(H.callback=A),x=bm(g,H,B),x!==null&&(Rc(x,g,B,P),JA(x,g,B))},enqueueForceUpdate:function(g,x){g=g._reactInternals;var A=Ta(),P=Em(g),B=Ah(A,P);B.tag=2,x!=null&&(B.callback=x),x=bm(g,B,P),x!==null&&(Rc(x,g,P,A),JA(x,g,P))}};function dZ(g,x,A,P,B,H,ee){return g=g.stateNode,typeof g.shouldComponentUpdate=="function"?g.shouldComponentUpdate(P,H,ee):x.prototype&&x.prototype.isPureReactComponent?!LE(A,P)||!LE(B,H):!0}function fZ(g,x,A){var P=!1,B=mm,H=x.contextType;return typeof H=="object"&&H!==null?H=Ml(H):(B=nu(x)?Dg:Uo.current,P=x.contextTypes,H=(P=P!=null)?Fb(g,B):mm),x=new x(A,H),g.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,x.updater=ok,g.stateNode=x,x._reactInternals=g,P&&(g=g.stateNode,g.__reactInternalMemoizedUnmaskedChildContext=B,g.__reactInternalMemoizedMaskedChildContext=H),x}function hZ(g,x,A,P){g=x.state,typeof x.componentWillReceiveProps=="function"&&x.componentWillReceiveProps(A,P),typeof x.UNSAFE_componentWillReceiveProps=="function"&&x.UNSAFE_componentWillReceiveProps(A,P),x.state!==g&&ok.enqueueReplaceState(x,x.state,null)}function nM(g,x,A,P){var B=g.stateNode;B.props=A,B.state=g.memoizedState,B.refs={},U5(g);var H=x.contextType;typeof H=="object"&&H!==null?B.context=Ml(H):(H=nu(x)?Dg:Uo.current,B.context=Fb(g,H)),B.state=g.memoizedState,H=x.getDerivedStateFromProps,typeof H=="function"&&(tM(g,x,H,A),B.state=g.memoizedState),typeof x.getDerivedStateFromProps=="function"||typeof B.getSnapshotBeforeUpdate=="function"||typeof B.UNSAFE_componentWillMount!="function"&&typeof B.componentWillMount!="function"||(x=B.state,typeof B.componentWillMount=="function"&&B.componentWillMount(),typeof B.UNSAFE_componentWillMount=="function"&&B.UNSAFE_componentWillMount(),x!==B.state&&ok.enqueueReplaceState(B,B.state,null),ZA(g,A,B,P),B.state=g.memoizedState),typeof B.componentDidMount=="function"&&(g.flags|=4194308)}function Wb(g,x){try{var A="",P=x;do A+=X(P),P=P.return;while(P);var B=A}catch(H){B=`
Error generating stack: `+H.message+`
`+H.stack}return{value:g,source:x,stack:B,digest:null}}function rM(g,x,A){return{value:g,source:null,stack:A??null,digest:x??null}}function iM(g,x){try{console.error(x.value)}catch(A){setTimeout(function(){throw A})}}var NNe=typeof WeakMap=="function"?WeakMap:Map;function pZ(g,x,A){A=Ah(-1,A),A.tag=3,A.payload={element:null};var P=x.value;return A.callback=function(){hk||(hk=!0,vM=P),iM(g,x)},A}function mZ(g,x,A){A=Ah(-1,A),A.tag=3;var P=g.type.getDerivedStateFromError;if(typeof P=="function"){var B=x.value;A.payload=function(){return P(B)},A.callback=function(){iM(g,x)}}var H=g.stateNode;return H!==null&&typeof H.componentDidCatch=="function"&&(A.callback=function(){iM(g,x),typeof P!="function"&&(xm===null?xm=new Set([this]):xm.add(this));var ee=x.stack;this.componentDidCatch(x.value,{componentStack:ee!==null?ee:""})}),A}function gZ(g,x,A){var P=g.pingCache;if(P===null){P=g.pingCache=new NNe;var B=new Set;P.set(x,B)}else B=P.get(x),B===void 0&&(B=new Set,P.set(x,B));B.has(A)||(B.add(A),g=GNe.bind(null,g,x,A),x.then(g,g))}function yZ(g){do{var x;if((x=g.tag===13)&&(x=g.memoizedState,x=x!==null?x.dehydrated!==null:!0),x)return g;g=g.return}while(g!==null);return null}function bZ(g,x,A,P,B){return g.mode&1?(g.flags|=65536,g.lanes=B,g):(g===x?g.flags|=65536:(g.flags|=128,A.flags|=131072,A.flags&=-52805,A.tag===1&&(A.alternate===null?A.tag=17:(x=Ah(-1,1),x.tag=2,bm(A,x,1))),A.lanes|=1),g)}var ONe=E.ReactCurrentOwner,ru=!1;function _a(g,x,A,P){x.child=g===null?FJ(x,null,A,P):Ub(x,g.child,A,P)}function vZ(g,x,A,P,B){A=A.render;var H=x.ref;return Hb(x,B),P=K5(g,x,A,P,H,B),A=X5(),g!==null&&!ru?(x.updateQueue=g.updateQueue,x.flags&=-2053,g.lanes&=~B,kh(g,x,B)):(ui&&A&&P5(x),x.flags|=1,_a(g,x,P,B),x.child)}function xZ(g,x,A,P,B){if(g===null){var H=A.type;return typeof H=="function"&&!SM(H)&&H.defaultProps===void 0&&A.compare===null&&A.defaultProps===void 0?(x.tag=15,x.type=H,wZ(g,x,H,P,B)):(g=vk(A.type,null,P,x,x.mode,B),g.ref=x.ref,g.return=x,x.child=g)}if(H=g.child,!(g.lanes&B)){var ee=H.memoizedProps;if(A=A.compare,A=A!==null?A:LE,A(ee,P)&&g.ref===x.ref)return kh(g,x,B)}return x.flags|=1,g=Tm(H,P),g.ref=x.ref,g.return=x,x.child=g}function wZ(g,x,A,P,B){if(g!==null){var H=g.memoizedProps;if(LE(H,P)&&g.ref===x.ref)if(ru=!1,x.pendingProps=P=H,(g.lanes&B)!==0)g.flags&131072&&(ru=!0);else return x.lanes=g.lanes,kh(g,x,B)}return sM(g,x,A,P,B)}function EZ(g,x,A){var P=x.pendingProps,B=P.children,H=g!==null?g.memoizedState:null;if(P.mode==="hidden")if(!(x.mode&1))x.memoizedState={baseLanes:0,cachePool:null,transitions:null},Yr(Yb,Wu),Wu|=A;else{if(!(A&1073741824))return g=H!==null?H.baseLanes|A:A,x.lanes=x.childLanes=1073741824,x.memoizedState={baseLanes:g,cachePool:null,transitions:null},x.updateQueue=null,Yr(Yb,Wu),Wu|=g,null;x.memoizedState={baseLanes:0,cachePool:null,transitions:null},P=H!==null?H.baseLanes:A,Yr(Yb,Wu),Wu|=P}else H!==null?(P=H.baseLanes|A,x.memoizedState=null):P=A,Yr(Yb,Wu),Wu|=P;return _a(g,x,B,A),x.child}function _Z(g,x){var A=x.ref;(g===null&&A!==null||g!==null&&g.ref!==A)&&(x.flags|=512,x.flags|=2097152)}function sM(g,x,A,P,B){var H=nu(A)?Dg:Uo.current;return H=Fb(x,H),Hb(x,B),A=K5(g,x,A,P,H,B),P=X5(),g!==null&&!ru?(x.updateQueue=g.updateQueue,x.flags&=-2053,g.lanes&=~B,kh(g,x,B)):(ui&&P&&P5(x),x.flags|=1,_a(g,x,A,B),x.child)}function TZ(g,x,A,P,B){if(nu(A)){var H=!0;HA(x)}else H=!1;if(Hb(x,B),x.stateNode===null)uk(g,x),fZ(x,A,P),nM(x,A,P,B),P=!0;else if(g===null){var ee=x.stateNode,fe=x.memoizedProps;ee.props=fe;var ve=ee.context,Fe=A.contextType;typeof Fe=="object"&&Fe!==null?Fe=Ml(Fe):(Fe=nu(A)?Dg:Uo.current,Fe=Fb(x,Fe));var ot=A.getDerivedStateFromProps,dt=typeof ot=="function"||typeof ee.getSnapshotBeforeUpdate=="function";dt||typeof ee.UNSAFE_componentWillReceiveProps!="function"&&typeof ee.componentWillReceiveProps!="function"||(fe!==P||ve!==Fe)&&hZ(x,ee,P,Fe),ym=!1;var st=x.memoizedState;ee.state=st,ZA(x,P,ee,B),ve=x.memoizedState,fe!==P||st!==ve||tu.current||ym?(typeof ot=="function"&&(tM(x,A,ot,P),ve=x.memoizedState),(fe=ym||dZ(x,A,fe,P,st,ve,Fe))?(dt||typeof ee.UNSAFE_componentWillMount!="function"&&typeof ee.componentWillMount!="function"||(typeof ee.componentWillMount=="function"&&ee.componentWillMount(),typeof ee.UNSAFE_componentWillMount=="function"&&ee.UNSAFE_componentWillMount()),typeof ee.componentDidMount=="function"&&(x.flags|=4194308)):(typeof ee.componentDidMount=="function"&&(x.flags|=4194308),x.memoizedProps=P,x.memoizedState=ve),ee.props=P,ee.state=ve,ee.context=Fe,P=fe):(typeof ee.componentDidMount=="function"&&(x.flags|=4194308),P=!1)}else{ee=x.stateNode,jJ(g,x),fe=x.memoizedProps,Fe=x.type===x.elementType?fe:Ac(x.type,fe),ee.props=Fe,dt=x.pendingProps,st=ee.context,ve=A.contextType,typeof ve=="object"&&ve!==null?ve=Ml(ve):(ve=nu(A)?Dg:Uo.current,ve=Fb(x,ve));var Mt=A.getDerivedStateFromProps;(ot=typeof Mt=="function"||typeof ee.getSnapshotBeforeUpdate=="function")||typeof ee.UNSAFE_componentWillReceiveProps!="function"&&typeof ee.componentWillReceiveProps!="function"||(fe!==dt||st!==ve)&&hZ(x,ee,P,ve),ym=!1,st=x.memoizedState,ee.state=st,ZA(x,P,ee,B);var zt=x.memoizedState;fe!==dt||st!==zt||tu.current||ym?(typeof Mt=="function"&&(tM(x,A,Mt,P),zt=x.memoizedState),(Fe=ym||dZ(x,A,Fe,P,st,zt,ve)||!1)?(ot||typeof ee.UNSAFE_componentWillUpdate!="function"&&typeof ee.componentWillUpdate!="function"||(typeof ee.componentWillUpdate=="function"&&ee.componentWillUpdate(P,zt,ve),typeof ee.UNSAFE_componentWillUpdate=="function"&&ee.UNSAFE_componentWillUpdate(P,zt,ve)),typeof ee.componentDidUpdate=="function"&&(x.flags|=4),typeof ee.getSnapshotBeforeUpdate=="function"&&(x.flags|=1024)):(typeof ee.componentDidUpdate!="function"||fe===g.memoizedProps&&st===g.memoizedState||(x.flags|=4),typeof ee.getSnapshotBeforeUpdate!="function"||fe===g.memoizedProps&&st===g.memoizedState||(x.flags|=1024),x.memoizedProps=P,x.memoizedState=zt),ee.props=P,ee.state=zt,ee.context=ve,P=Fe):(typeof ee.componentDidUpdate!="function"||fe===g.memoizedProps&&st===g.memoizedState||(x.flags|=4),typeof ee.getSnapshotBeforeUpdate!="function"||fe===g.memoizedProps&&st===g.memoizedState||(x.flags|=1024),P=!1)}return oM(g,x,A,P,H,B)}function oM(g,x,A,P,B,H){_Z(g,x);var ee=(x.flags&128)!==0;if(!P&&!ee)return B&&IJ(x,A,!1),kh(g,x,H);P=x.stateNode,ONe.current=x;var fe=ee&&typeof A.getDerivedStateFromError!="function"?null:P.render();return x.flags|=1,g!==null&&ee?(x.child=Ub(x,g.child,null,H),x.child=Ub(x,null,fe,H)):_a(g,x,fe,H),x.memoizedState=P.state,B&&IJ(x,A,!0),x.child}function CZ(g){var x=g.stateNode;x.pendingContext?AJ(g,x.pendingContext,x.pendingContext!==x.context):x.context&&AJ(g,x.context,!1),V5(g,x.containerInfo)}function SZ(g,x,A,P,B){return zb(),M5(B),x.flags|=256,_a(g,x,A,P),x.child}var aM={dehydrated:null,treeContext:null,retryLane:0};function uM(g){return{baseLanes:g,cachePool:null,transitions:null}}function AZ(g,x,A){var P=x.pendingProps,B=bi.current,H=!1,ee=(x.flags&128)!==0,fe;if((fe=ee)||(fe=g!==null&&g.memoizedState===null?!1:(B&2)!==0),fe?(H=!0,x.flags&=-129):(g===null||g.memoizedState!==null)&&(B|=1),Yr(bi,B&1),g===null)return $5(x),g=x.memoizedState,g!==null&&(g=g.dehydrated,g!==null)?(x.mode&1?g.data==="$!"?x.lanes=8:x.lanes=1073741824:x.lanes=1,null):(ee=P.children,g=P.fallback,H?(P=x.mode,H=x.child,ee={mode:"hidden",children:ee},!(P&1)&&H!==null?(H.childLanes=0,H.pendingProps=ee):H=xk(ee,P,0,null),g=zg(g,P,A,null),H.return=x,g.return=x,H.sibling=g,x.child=H,x.child.memoizedState=uM(A),x.memoizedState=aM,g):lM(x,ee));if(B=g.memoizedState,B!==null&&(fe=B.dehydrated,fe!==null))return $Ne(g,x,ee,P,fe,B,A);if(H){H=P.fallback,ee=x.mode,B=g.child,fe=B.sibling;var ve={mode:"hidden",children:P.children};return!(ee&1)&&x.child!==B?(P=x.child,P.childLanes=0,P.pendingProps=ve,x.deletions=null):(P=Tm(B,ve),P.subtreeFlags=B.subtreeFlags&14680064),fe!==null?H=Tm(fe,H):(H=zg(H,ee,A,null),H.flags|=2),H.return=x,P.return=x,P.sibling=H,x.child=P,P=H,H=x.child,ee=g.child.memoizedState,ee=ee===null?uM(A):{baseLanes:ee.baseLanes|A,cachePool:null,transitions:ee.transitions},H.memoizedState=ee,H.childLanes=g.childLanes&~A,x.memoizedState=aM,P}return H=g.child,g=H.sibling,P=Tm(H,{mode:"visible",children:P.children}),!(x.mode&1)&&(P.lanes=A),P.return=x,P.sibling=null,g!==null&&(A=x.deletions,A===null?(x.deletions=[g],x.flags|=16):A.push(g)),x.child=P,x.memoizedState=null,P}function lM(g,x){return x=xk({mode:"visible",children:x},g.mode,0,null),x.return=g,g.child=x}function ak(g,x,A,P){return P!==null&&M5(P),Ub(x,g.child,null,A),g=lM(x,x.pendingProps.children),g.flags|=2,x.memoizedState=null,g}function $Ne(g,x,A,P,B,H,ee){if(A)return x.flags&256?(x.flags&=-257,P=rM(Error(n(422))),ak(g,x,ee,P)):x.memoizedState!==null?(x.child=g.child,x.flags|=128,null):(H=P.fallback,B=x.mode,P=xk({mode:"visible",children:P.children},B,0,null),H=zg(H,B,ee,null),H.flags|=2,P.return=x,H.return=x,P.sibling=H,x.child=P,x.mode&1&&Ub(x,g.child,null,ee),x.child.memoizedState=uM(ee),x.memoizedState=aM,H);if(!(x.mode&1))return ak(g,x,ee,null);if(B.data==="$!"){if(P=B.nextSibling&&B.nextSibling.dataset,P)var fe=P.dgst;return P=fe,H=Error(n(419)),P=rM(H,P,void 0),ak(g,x,ee,P)}if(fe=(ee&g.childLanes)!==0,ru||fe){if(P=js,P!==null){switch(ee&-ee){case 4:B=2;break;case 16:B=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:B=32;break;case 536870912:B=268435456;break;default:B=0}B=B&(P.suspendedLanes|ee)?0:B,B!==0&&B!==H.retryLane&&(H.retryLane=B,Sh(g,B),Rc(P,g,B,-1))}return CM(),P=rM(Error(n(421))),ak(g,x,ee,P)}return B.data==="$?"?(x.flags|=128,x.child=g.child,x=YNe.bind(null,g),B._reactRetry=x,null):(g=H.treeContext,qu=hm(B.nextSibling),Hu=x,ui=!0,Sc=null,g!==null&&(Ol[$l++]=Th,Ol[$l++]=Ch,Ol[$l++]=Pg,Th=g.id,Ch=g.overflow,Pg=x),x=lM(x,P.children),x.flags|=4096,x)}function kZ(g,x,A){g.lanes|=x;var P=g.alternate;P!==null&&(P.lanes|=x),j5(g.return,x,A)}function cM(g,x,A,P,B){var H=g.memoizedState;H===null?g.memoizedState={isBackwards:x,rendering:null,renderingStartTime:0,last:P,tail:A,tailMode:B}:(H.isBackwards=x,H.rendering=null,H.renderingStartTime=0,H.last=P,H.tail=A,H.tailMode=B)}function IZ(g,x,A){var P=x.pendingProps,B=P.revealOrder,H=P.tail;if(_a(g,x,P.children,A),P=bi.current,P&2)P=P&1|2,x.flags|=128;else{if(g!==null&&g.flags&128)e:for(g=x.child;g!==null;){if(g.tag===13)g.memoizedState!==null&&kZ(g,A,x);else if(g.tag===19)kZ(g,A,x);else if(g.child!==null){g.child.return=g,g=g.child;continue}if(g===x)break e;for(;g.sibling===null;){if(g.return===null||g.return===x)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}P&=1}if(Yr(bi,P),!(x.mode&1))x.memoizedState=null;else switch(B){case"forwards":for(A=x.child,B=null;A!==null;)g=A.alternate,g!==null&&ek(g)===null&&(B=A),A=A.sibling;A=B,A===null?(B=x.child,x.child=null):(B=A.sibling,A.sibling=null),cM(x,!1,B,A,H);break;case"backwards":for(A=null,B=x.child,x.child=null;B!==null;){if(g=B.alternate,g!==null&&ek(g)===null){x.child=B;break}g=B.sibling,B.sibling=A,A=B,B=g}cM(x,!0,A,null,H);break;case"together":cM(x,!1,null,null,void 0);break;default:x.memoizedState=null}return x.child}function uk(g,x){!(x.mode&1)&&g!==null&&(g.alternate=null,x.alternate=null,x.flags|=2)}function kh(g,x,A){if(g!==null&&(x.dependencies=g.dependencies),Lg|=x.lanes,!(A&x.childLanes))return null;if(g!==null&&x.child!==g.child)throw Error(n(153));if(x.child!==null){for(g=x.child,A=Tm(g,g.pendingProps),x.child=A,A.return=x;g.sibling!==null;)g=g.sibling,A=A.sibling=Tm(g,g.pendingProps),A.return=x;A.sibling=null}return x.child}function MNe(g,x,A){switch(x.tag){case 3:CZ(x),zb();break;case 5:VJ(x);break;case 1:nu(x.type)&&HA(x);break;case 4:V5(x,x.stateNode.containerInfo);break;case 10:var P=x.type._context,B=x.memoizedProps.value;Yr(XA,P._currentValue),P._currentValue=B;break;case 13:if(P=x.memoizedState,P!==null)return P.dehydrated!==null?(Yr(bi,bi.current&1),x.flags|=128,null):A&x.child.childLanes?AZ(g,x,A):(Yr(bi,bi.current&1),g=kh(g,x,A),g!==null?g.sibling:null);Yr(bi,bi.current&1);break;case 19:if(P=(A&x.childLanes)!==0,g.flags&128){if(P)return IZ(g,x,A);x.flags|=128}if(B=x.memoizedState,B!==null&&(B.rendering=null,B.tail=null,B.lastEffect=null),Yr(bi,bi.current),P)break;return null;case 22:case 23:return x.lanes=0,EZ(g,x,A)}return kh(g,x,A)}var RZ,dM,DZ,PZ;RZ=function(g,x){for(var A=x.child;A!==null;){if(A.tag===5||A.tag===6)g.appendChild(A.stateNode);else if(A.tag!==4&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===x)break;for(;A.sibling===null;){if(A.return===null||A.return===x)return;A=A.return}A.sibling.return=A.return,A=A.sibling}},dM=function(){},DZ=function(g,x,A,P){var B=g.memoizedProps;if(B!==P){g=x.stateNode,$g(Ud.current);var H=null;switch(A){case"input":B=be(g,B),P=be(g,P),H=[];break;case"select":B=U({},B,{value:void 0}),P=U({},P,{value:void 0}),H=[];break;case"textarea":B=xt(g,B),P=xt(g,P),H=[];break;default:typeof B.onClick!="function"&&typeof P.onClick=="function"&&(g.onclick=zA)}An(A,P);var ee;A=null;for(Fe in B)if(!P.hasOwnProperty(Fe)&&B.hasOwnProperty(Fe)&&B[Fe]!=null)if(Fe==="style"){var fe=B[Fe];for(ee in fe)fe.hasOwnProperty(ee)&&(A||(A={}),A[ee]="")}else Fe!=="dangerouslySetInnerHTML"&&Fe!=="children"&&Fe!=="suppressContentEditableWarning"&&Fe!=="suppressHydrationWarning"&&Fe!=="autoFocus"&&(i.hasOwnProperty(Fe)?H||(H=[]):(H=H||[]).push(Fe,null));for(Fe in P){var ve=P[Fe];if(fe=B!=null?B[Fe]:void 0,P.hasOwnProperty(Fe)&&ve!==fe&&(ve!=null||fe!=null))if(Fe==="style")if(fe){for(ee in fe)!fe.hasOwnProperty(ee)||ve&&ve.hasOwnProperty(ee)||(A||(A={}),A[ee]="");for(ee in ve)ve.hasOwnProperty(ee)&&fe[ee]!==ve[ee]&&(A||(A={}),A[ee]=ve[ee])}else A||(H||(H=[]),H.push(Fe,A)),A=ve;else Fe==="dangerouslySetInnerHTML"?(ve=ve?ve.__html:void 0,fe=fe?fe.__html:void 0,ve!=null&&fe!==ve&&(H=H||[]).push(Fe,ve)):Fe==="children"?typeof ve!="string"&&typeof ve!="number"||(H=H||[]).push(Fe,""+ve):Fe!=="suppressContentEditableWarning"&&Fe!=="suppressHydrationWarning"&&(i.hasOwnProperty(Fe)?(ve!=null&&Fe==="onScroll"&&ei("scroll",g),H||fe===ve||(H=[])):(H=H||[]).push(Fe,ve))}A&&(H=H||[]).push("style",A);var Fe=H;(x.updateQueue=Fe)&&(x.flags|=4)}},PZ=function(g,x,A,P){A!==P&&(x.flags|=4)};function JE(g,x){if(!ui)switch(g.tailMode){case"hidden":x=g.tail;for(var A=null;x!==null;)x.alternate!==null&&(A=x),x=x.sibling;A===null?g.tail=null:A.sibling=null;break;case"collapsed":A=g.tail;for(var P=null;A!==null;)A.alternate!==null&&(P=A),A=A.sibling;P===null?x||g.tail===null?g.tail=null:g.tail.sibling=null:P.sibling=null}}function Ho(g){var x=g.alternate!==null&&g.alternate.child===g.child,A=0,P=0;if(x)for(var B=g.child;B!==null;)A|=B.lanes|B.childLanes,P|=B.subtreeFlags&14680064,P|=B.flags&14680064,B.return=g,B=B.sibling;else for(B=g.child;B!==null;)A|=B.lanes|B.childLanes,P|=B.subtreeFlags,P|=B.flags,B.return=g,B=B.sibling;return g.subtreeFlags|=P,g.childLanes=A,x}function LNe(g,x,A){var P=x.pendingProps;switch(N5(x),x.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ho(x),null;case 1:return nu(x.type)&&VA(),Ho(x),null;case 3:return P=x.stateNode,qb(),ti(tu),ti(Uo),W5(),P.pendingContext&&(P.context=P.pendingContext,P.pendingContext=null),(g===null||g.child===null)&&(YA(x)?x.flags|=4:g===null||g.memoizedState.isDehydrated&&!(x.flags&256)||(x.flags|=1024,Sc!==null&&(EM(Sc),Sc=null))),dM(g,x),Ho(x),null;case 5:H5(x);var B=$g(GE.current);if(A=x.type,g!==null&&x.stateNode!=null)DZ(g,x,A,P,B),g.ref!==x.ref&&(x.flags|=512,x.flags|=2097152);else{if(!P){if(x.stateNode===null)throw Error(n(166));return Ho(x),null}if(g=$g(Ud.current),YA(x)){P=x.stateNode,A=x.type;var H=x.memoizedProps;switch(P[zd]=x,P[UE]=H,g=(x.mode&1)!==0,A){case"dialog":ei("cancel",P),ei("close",P);break;case"iframe":case"object":case"embed":ei("load",P);break;case"video":case"audio":for(B=0;B<BE.length;B++)ei(BE[B],P);break;case"source":ei("error",P);break;case"img":case"image":case"link":ei("error",P),ei("load",P);break;case"details":ei("toggle",P);break;case"input":Le(P,H),ei("invalid",P);break;case"select":P._wrapperState={wasMultiple:!!H.multiple},ei("invalid",P);break;case"textarea":De(P,H),ei("invalid",P)}An(A,H),B=null;for(var ee in H)if(H.hasOwnProperty(ee)){var fe=H[ee];ee==="children"?typeof fe=="string"?P.textContent!==fe&&(H.suppressHydrationWarning!==!0&&jA(P.textContent,fe,g),B=["children",fe]):typeof fe=="number"&&P.textContent!==""+fe&&(H.suppressHydrationWarning!==!0&&jA(P.textContent,fe,g),B=["children",""+fe]):i.hasOwnProperty(ee)&&fe!=null&&ee==="onScroll"&&ei("scroll",P)}switch(A){case"input":ue(P),je(P,H,!0);break;case"textarea":ue(P),Kt(P);break;case"select":case"option":break;default:typeof H.onClick=="function"&&(P.onclick=zA)}P=B,x.updateQueue=P,P!==null&&(x.flags|=4)}else{ee=B.nodeType===9?B:B.ownerDocument,g==="http://www.w3.org/1999/xhtml"&&(g=Te(A)),g==="http://www.w3.org/1999/xhtml"?A==="script"?(g=ee.createElement("div"),g.innerHTML="<script><\/script>",g=g.removeChild(g.firstChild)):typeof P.is=="string"?g=ee.createElement(A,{is:P.is}):(g=ee.createElement(A),A==="select"&&(ee=g,P.multiple?ee.multiple=!0:P.size&&(ee.size=P.size))):g=ee.createElementNS(g,A),g[zd]=x,g[UE]=P,RZ(g,x,!1,!1),x.stateNode=g;e:{switch(ee=Hr(A,P),A){case"dialog":ei("cancel",g),ei("close",g),B=P;break;case"iframe":case"object":case"embed":ei("load",g),B=P;break;case"video":case"audio":for(B=0;B<BE.length;B++)ei(BE[B],g);B=P;break;case"source":ei("error",g),B=P;break;case"img":case"image":case"link":ei("error",g),ei("load",g),B=P;break;case"details":ei("toggle",g),B=P;break;case"input":Le(g,P),B=be(g,P),ei("invalid",g);break;case"option":B=P;break;case"select":g._wrapperState={wasMultiple:!!P.multiple},B=U({},P,{value:void 0}),ei("invalid",g);break;case"textarea":De(g,P),B=xt(g,P),ei("invalid",g);break;default:B=P}An(A,B),fe=B;for(H in fe)if(fe.hasOwnProperty(H)){var ve=fe[H];H==="style"?Jr(g,ve):H==="dangerouslySetInnerHTML"?(ve=ve?ve.__html:void 0,ve!=null&&_t(g,ve)):H==="children"?typeof ve=="string"?(A!=="textarea"||ve!=="")&&St(g,ve):typeof ve=="number"&&St(g,""+ve):H!=="suppressContentEditableWarning"&&H!=="suppressHydrationWarning"&&H!=="autoFocus"&&(i.hasOwnProperty(H)?ve!=null&&H==="onScroll"&&ei("scroll",g):ve!=null&&w(g,H,ve,ee))}switch(A){case"input":ue(g),je(g,P,!1);break;case"textarea":ue(g),Kt(g);break;case"option":P.value!=null&&g.setAttribute("value",""+de(P.value));break;case"select":g.multiple=!!P.multiple,H=P.value,H!=null?pt(g,!!P.multiple,H,!1):P.defaultValue!=null&&pt(g,!!P.multiple,P.defaultValue,!0);break;default:typeof B.onClick=="function"&&(g.onclick=zA)}switch(A){case"button":case"input":case"select":case"textarea":P=!!P.autoFocus;break e;case"img":P=!0;break e;default:P=!1}}P&&(x.flags|=4)}x.ref!==null&&(x.flags|=512,x.flags|=2097152)}return Ho(x),null;case 6:if(g&&x.stateNode!=null)PZ(g,x,g.memoizedProps,P);else{if(typeof P!="string"&&x.stateNode===null)throw Error(n(166));if(A=$g(GE.current),$g(Ud.current),YA(x)){if(P=x.stateNode,A=x.memoizedProps,P[zd]=x,(H=P.nodeValue!==A)&&(g=Hu,g!==null))switch(g.tag){case 3:jA(P.nodeValue,A,(g.mode&1)!==0);break;case 5:g.memoizedProps.suppressHydrationWarning!==!0&&jA(P.nodeValue,A,(g.mode&1)!==0)}H&&(x.flags|=4)}else P=(A.nodeType===9?A:A.ownerDocument).createTextNode(P),P[zd]=x,x.stateNode=P}return Ho(x),null;case 13:if(ti(bi),P=x.memoizedState,g===null||g.memoizedState!==null&&g.memoizedState.dehydrated!==null){if(ui&&qu!==null&&x.mode&1&&!(x.flags&128))$J(),zb(),x.flags|=98560,H=!1;else if(H=YA(x),P!==null&&P.dehydrated!==null){if(g===null){if(!H)throw Error(n(318));if(H=x.memoizedState,H=H!==null?H.dehydrated:null,!H)throw Error(n(317));H[zd]=x}else zb(),!(x.flags&128)&&(x.memoizedState=null),x.flags|=4;Ho(x),H=!1}else Sc!==null&&(EM(Sc),Sc=null),H=!0;if(!H)return x.flags&65536?x:null}return x.flags&128?(x.lanes=A,x):(P=P!==null,P!==(g!==null&&g.memoizedState!==null)&&P&&(x.child.flags|=8192,x.mode&1&&(g===null||bi.current&1?gs===0&&(gs=3):CM())),x.updateQueue!==null&&(x.flags|=4),Ho(x),null);case 4:return qb(),dM(g,x),g===null&&jE(x.stateNode.containerInfo),Ho(x),null;case 10:return B5(x.type._context),Ho(x),null;case 17:return nu(x.type)&&VA(),Ho(x),null;case 19:if(ti(bi),H=x.memoizedState,H===null)return Ho(x),null;if(P=(x.flags&128)!==0,ee=H.rendering,ee===null)if(P)JE(H,!1);else{if(gs!==0||g!==null&&g.flags&128)for(g=x.child;g!==null;){if(ee=ek(g),ee!==null){for(x.flags|=128,JE(H,!1),P=ee.updateQueue,P!==null&&(x.updateQueue=P,x.flags|=4),x.subtreeFlags=0,P=A,A=x.child;A!==null;)H=A,g=P,H.flags&=14680066,ee=H.alternate,ee===null?(H.childLanes=0,H.lanes=g,H.child=null,H.subtreeFlags=0,H.memoizedProps=null,H.memoizedState=null,H.updateQueue=null,H.dependencies=null,H.stateNode=null):(H.childLanes=ee.childLanes,H.lanes=ee.lanes,H.child=ee.child,H.subtreeFlags=0,H.deletions=null,H.memoizedProps=ee.memoizedProps,H.memoizedState=ee.memoizedState,H.updateQueue=ee.updateQueue,H.type=ee.type,g=ee.dependencies,H.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext}),A=A.sibling;return Yr(bi,bi.current&1|2),x.child}g=g.sibling}H.tail!==null&&Fn()>Kb&&(x.flags|=128,P=!0,JE(H,!1),x.lanes=4194304)}else{if(!P)if(g=ek(ee),g!==null){if(x.flags|=128,P=!0,A=g.updateQueue,A!==null&&(x.updateQueue=A,x.flags|=4),JE(H,!0),H.tail===null&&H.tailMode==="hidden"&&!ee.alternate&&!ui)return Ho(x),null}else 2*Fn()-H.renderingStartTime>Kb&&A!==1073741824&&(x.flags|=128,P=!0,JE(H,!1),x.lanes=4194304);H.isBackwards?(ee.sibling=x.child,x.child=ee):(A=H.last,A!==null?A.sibling=ee:x.child=ee,H.last=ee)}return H.tail!==null?(x=H.tail,H.rendering=x,H.tail=x.sibling,H.renderingStartTime=Fn(),x.sibling=null,A=bi.current,Yr(bi,P?A&1|2:A&1),x):(Ho(x),null);case 22:case 23:return TM(),P=x.memoizedState!==null,g!==null&&g.memoizedState!==null!==P&&(x.flags|=8192),P&&x.mode&1?Wu&1073741824&&(Ho(x),x.subtreeFlags&6&&(x.flags|=8192)):Ho(x),null;case 24:return null;case 25:return null}throw Error(n(156,x.tag))}function FNe(g,x){switch(N5(x),x.tag){case 1:return nu(x.type)&&VA(),g=x.flags,g&65536?(x.flags=g&-65537|128,x):null;case 3:return qb(),ti(tu),ti(Uo),W5(),g=x.flags,g&65536&&!(g&128)?(x.flags=g&-65537|128,x):null;case 5:return H5(x),null;case 13:if(ti(bi),g=x.memoizedState,g!==null&&g.dehydrated!==null){if(x.alternate===null)throw Error(n(340));zb()}return g=x.flags,g&65536?(x.flags=g&-65537|128,x):null;case 19:return ti(bi),null;case 4:return qb(),null;case 10:return B5(x.type._context),null;case 22:case 23:return TM(),null;case 24:return null;default:return null}}var lk=!1,qo=!1,BNe=typeof WeakSet=="function"?WeakSet:Set,jt=null;function Gb(g,x){var A=g.ref;if(A!==null)if(typeof A=="function")try{A(null)}catch(P){Si(g,x,P)}else A.current=null}function fM(g,x,A){try{A()}catch(P){Si(g,x,P)}}var NZ=!1;function jNe(g,x){if(T5=le,g=dJ(),g5(g)){if("selectionStart"in g)var A={start:g.selectionStart,end:g.selectionEnd};else e:{A=(A=g.ownerDocument)&&A.defaultView||window;var P=A.getSelection&&A.getSelection();if(P&&P.rangeCount!==0){A=P.anchorNode;var B=P.anchorOffset,H=P.focusNode;P=P.focusOffset;try{A.nodeType,H.nodeType}catch{A=null;break e}var ee=0,fe=-1,ve=-1,Fe=0,ot=0,dt=g,st=null;t:for(;;){for(var Mt;dt!==A||B!==0&&dt.nodeType!==3||(fe=ee+B),dt!==H||P!==0&&dt.nodeType!==3||(ve=ee+P),dt.nodeType===3&&(ee+=dt.nodeValue.length),(Mt=dt.firstChild)!==null;)st=dt,dt=Mt;for(;;){if(dt===g)break t;if(st===A&&++Fe===B&&(fe=ee),st===H&&++ot===P&&(ve=ee),(Mt=dt.nextSibling)!==null)break;dt=st,st=dt.parentNode}dt=Mt}A=fe===-1||ve===-1?null:{start:fe,end:ve}}else A=null}A=A||{start:0,end:0}}else A=null;for(C5={focusedElem:g,selectionRange:A},le=!1,jt=x;jt!==null;)if(x=jt,g=x.child,(x.subtreeFlags&1028)!==0&&g!==null)g.return=x,jt=g;else for(;jt!==null;){x=jt;try{var zt=x.alternate;if(x.flags&1024)switch(x.tag){case 0:case 11:case 15:break;case 1:if(zt!==null){var Ut=zt.memoizedProps,Fi=zt.memoizedState,Ie=x.stateNode,_e=Ie.getSnapshotBeforeUpdate(x.elementType===x.type?Ut:Ac(x.type,Ut),Fi);Ie.__reactInternalSnapshotBeforeUpdate=_e}break;case 3:var Pe=x.stateNode.containerInfo;Pe.nodeType===1?Pe.textContent="":Pe.nodeType===9&&Pe.documentElement&&Pe.removeChild(Pe.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(vt){Si(x,x.return,vt)}if(g=x.sibling,g!==null){g.return=x.return,jt=g;break}jt=x.return}return zt=NZ,NZ=!1,zt}function ZE(g,x,A){var P=x.updateQueue;if(P=P!==null?P.lastEffect:null,P!==null){var B=P=P.next;do{if((B.tag&g)===g){var H=B.destroy;B.destroy=void 0,H!==void 0&&fM(x,A,H)}B=B.next}while(B!==P)}}function ck(g,x){if(x=x.updateQueue,x=x!==null?x.lastEffect:null,x!==null){var A=x=x.next;do{if((A.tag&g)===g){var P=A.create;A.destroy=P()}A=A.next}while(A!==x)}}function hM(g){var x=g.ref;if(x!==null){var A=g.stateNode;switch(g.tag){case 5:g=A;break;default:g=A}typeof x=="function"?x(g):x.current=g}}function OZ(g){var x=g.alternate;x!==null&&(g.alternate=null,OZ(x)),g.child=null,g.deletions=null,g.sibling=null,g.tag===5&&(x=g.stateNode,x!==null&&(delete x[zd],delete x[UE],delete x[I5],delete x[ENe],delete x[_Ne])),g.stateNode=null,g.return=null,g.dependencies=null,g.memoizedProps=null,g.memoizedState=null,g.pendingProps=null,g.stateNode=null,g.updateQueue=null}function $Z(g){return g.tag===5||g.tag===3||g.tag===4}function MZ(g){e:for(;;){for(;g.sibling===null;){if(g.return===null||$Z(g.return))return null;g=g.return}for(g.sibling.return=g.return,g=g.sibling;g.tag!==5&&g.tag!==6&&g.tag!==18;){if(g.flags&2||g.child===null||g.tag===4)continue e;g.child.return=g,g=g.child}if(!(g.flags&2))return g.stateNode}}function pM(g,x,A){var P=g.tag;if(P===5||P===6)g=g.stateNode,x?A.nodeType===8?A.parentNode.insertBefore(g,x):A.insertBefore(g,x):(A.nodeType===8?(x=A.parentNode,x.insertBefore(g,A)):(x=A,x.appendChild(g)),A=A._reactRootContainer,A!=null||x.onclick!==null||(x.onclick=zA));else if(P!==4&&(g=g.child,g!==null))for(pM(g,x,A),g=g.sibling;g!==null;)pM(g,x,A),g=g.sibling}function mM(g,x,A){var P=g.tag;if(P===5||P===6)g=g.stateNode,x?A.insertBefore(g,x):A.appendChild(g);else if(P!==4&&(g=g.child,g!==null))for(mM(g,x,A),g=g.sibling;g!==null;)mM(g,x,A),g=g.sibling}var ho=null,kc=!1;function vm(g,x,A){for(A=A.child;A!==null;)LZ(g,x,A),A=A.sibling}function LZ(g,x,A){if(cs&&typeof cs.onCommitFiberUnmount=="function")try{cs.onCommitFiberUnmount(Il,A)}catch{}switch(A.tag){case 5:qo||Gb(A,x);case 6:var P=ho,B=kc;ho=null,vm(g,x,A),ho=P,kc=B,ho!==null&&(kc?(g=ho,A=A.stateNode,g.nodeType===8?g.parentNode.removeChild(A):g.removeChild(A)):ho.removeChild(A.stateNode));break;case 18:ho!==null&&(kc?(g=ho,A=A.stateNode,g.nodeType===8?k5(g.parentNode,A):g.nodeType===1&&k5(g,A),Za(g)):k5(ho,A.stateNode));break;case 4:P=ho,B=kc,ho=A.stateNode.containerInfo,kc=!0,vm(g,x,A),ho=P,kc=B;break;case 0:case 11:case 14:case 15:if(!qo&&(P=A.updateQueue,P!==null&&(P=P.lastEffect,P!==null))){B=P=P.next;do{var H=B,ee=H.destroy;H=H.tag,ee!==void 0&&(H&2||H&4)&&fM(A,x,ee),B=B.next}while(B!==P)}vm(g,x,A);break;case 1:if(!qo&&(Gb(A,x),P=A.stateNode,typeof P.componentWillUnmount=="function"))try{P.props=A.memoizedProps,P.state=A.memoizedState,P.componentWillUnmount()}catch(fe){Si(A,x,fe)}vm(g,x,A);break;case 21:vm(g,x,A);break;case 22:A.mode&1?(qo=(P=qo)||A.memoizedState!==null,vm(g,x,A),qo=P):vm(g,x,A);break;default:vm(g,x,A)}}function FZ(g){var x=g.updateQueue;if(x!==null){g.updateQueue=null;var A=g.stateNode;A===null&&(A=g.stateNode=new BNe),x.forEach(function(P){var B=KNe.bind(null,g,P);A.has(P)||(A.add(P),P.then(B,B))})}}function Ic(g,x){var A=x.deletions;if(A!==null)for(var P=0;P<A.length;P++){var B=A[P];try{var H=g,ee=x,fe=ee;e:for(;fe!==null;){switch(fe.tag){case 5:ho=fe.stateNode,kc=!1;break e;case 3:ho=fe.stateNode.containerInfo,kc=!0;break e;case 4:ho=fe.stateNode.containerInfo,kc=!0;break e}fe=fe.return}if(ho===null)throw Error(n(160));LZ(H,ee,B),ho=null,kc=!1;var ve=B.alternate;ve!==null&&(ve.return=null),B.return=null}catch(Fe){Si(B,x,Fe)}}if(x.subtreeFlags&12854)for(x=x.child;x!==null;)BZ(x,g),x=x.sibling}function BZ(g,x){var A=g.alternate,P=g.flags;switch(g.tag){case 0:case 11:case 14:case 15:if(Ic(x,g),Hd(g),P&4){try{ZE(3,g,g.return),ck(3,g)}catch(Ut){Si(g,g.return,Ut)}try{ZE(5,g,g.return)}catch(Ut){Si(g,g.return,Ut)}}break;case 1:Ic(x,g),Hd(g),P&512&&A!==null&&Gb(A,A.return);break;case 5:if(Ic(x,g),Hd(g),P&512&&A!==null&&Gb(A,A.return),g.flags&32){var B=g.stateNode;try{St(B,"")}catch(Ut){Si(g,g.return,Ut)}}if(P&4&&(B=g.stateNode,B!=null)){var H=g.memoizedProps,ee=A!==null?A.memoizedProps:H,fe=g.type,ve=g.updateQueue;if(g.updateQueue=null,ve!==null)try{fe==="input"&&H.type==="radio"&&H.name!=null&&Ue(B,H),Hr(fe,ee);var Fe=Hr(fe,H);for(ee=0;ee<ve.length;ee+=2){var ot=ve[ee],dt=ve[ee+1];ot==="style"?Jr(B,dt):ot==="dangerouslySetInnerHTML"?_t(B,dt):ot==="children"?St(B,dt):w(B,ot,dt,Fe)}switch(fe){case"input":Ne(B,H);break;case"textarea":wt(B,H);break;case"select":var st=B._wrapperState.wasMultiple;B._wrapperState.wasMultiple=!!H.multiple;var Mt=H.value;Mt!=null?pt(B,!!H.multiple,Mt,!1):st!==!!H.multiple&&(H.defaultValue!=null?pt(B,!!H.multiple,H.defaultValue,!0):pt(B,!!H.multiple,H.multiple?[]:"",!1))}B[UE]=H}catch(Ut){Si(g,g.return,Ut)}}break;case 6:if(Ic(x,g),Hd(g),P&4){if(g.stateNode===null)throw Error(n(162));B=g.stateNode,H=g.memoizedProps;try{B.nodeValue=H}catch(Ut){Si(g,g.return,Ut)}}break;case 3:if(Ic(x,g),Hd(g),P&4&&A!==null&&A.memoizedState.isDehydrated)try{Za(x.containerInfo)}catch(Ut){Si(g,g.return,Ut)}break;case 4:Ic(x,g),Hd(g);break;case 13:Ic(x,g),Hd(g),B=g.child,B.flags&8192&&(H=B.memoizedState!==null,B.stateNode.isHidden=H,!H||B.alternate!==null&&B.alternate.memoizedState!==null||(bM=Fn())),P&4&&FZ(g);break;case 22:if(ot=A!==null&&A.memoizedState!==null,g.mode&1?(qo=(Fe=qo)||ot,Ic(x,g),qo=Fe):Ic(x,g),Hd(g),P&8192){if(Fe=g.memoizedState!==null,(g.stateNode.isHidden=Fe)&&!ot&&g.mode&1)for(jt=g,ot=g.child;ot!==null;){for(dt=jt=ot;jt!==null;){switch(st=jt,Mt=st.child,st.tag){case 0:case 11:case 14:case 15:ZE(4,st,st.return);break;case 1:Gb(st,st.return);var zt=st.stateNode;if(typeof zt.componentWillUnmount=="function"){P=st,A=st.return;try{x=P,zt.props=x.memoizedProps,zt.state=x.memoizedState,zt.componentWillUnmount()}catch(Ut){Si(P,A,Ut)}}break;case 5:Gb(st,st.return);break;case 22:if(st.memoizedState!==null){UZ(dt);continue}}Mt!==null?(Mt.return=st,jt=Mt):UZ(dt)}ot=ot.sibling}e:for(ot=null,dt=g;;){if(dt.tag===5){if(ot===null){ot=dt;try{B=dt.stateNode,Fe?(H=B.style,typeof H.setProperty=="function"?H.setProperty("display","none","important"):H.display="none"):(fe=dt.stateNode,ve=dt.memoizedProps.style,ee=ve!=null&&ve.hasOwnProperty("display")?ve.display:null,fe.style.display=sr("display",ee))}catch(Ut){Si(g,g.return,Ut)}}}else if(dt.tag===6){if(ot===null)try{dt.stateNode.nodeValue=Fe?"":dt.memoizedProps}catch(Ut){Si(g,g.return,Ut)}}else if((dt.tag!==22&&dt.tag!==23||dt.memoizedState===null||dt===g)&&dt.child!==null){dt.child.return=dt,dt=dt.child;continue}if(dt===g)break e;for(;dt.sibling===null;){if(dt.return===null||dt.return===g)break e;ot===dt&&(ot=null),dt=dt.return}ot===dt&&(ot=null),dt.sibling.return=dt.return,dt=dt.sibling}}break;case 19:Ic(x,g),Hd(g),P&4&&FZ(g);break;case 21:break;default:Ic(x,g),Hd(g)}}function Hd(g){var x=g.flags;if(x&2){try{e:{for(var A=g.return;A!==null;){if($Z(A)){var P=A;break e}A=A.return}throw Error(n(160))}switch(P.tag){case 5:var B=P.stateNode;P.flags&32&&(St(B,""),P.flags&=-33);var H=MZ(g);mM(g,H,B);break;case 3:case 4:var ee=P.stateNode.containerInfo,fe=MZ(g);pM(g,fe,ee);break;default:throw Error(n(161))}}catch(ve){Si(g,g.return,ve)}g.flags&=-3}x&4096&&(g.flags&=-4097)}function zNe(g,x,A){jt=g,jZ(g)}function jZ(g,x,A){for(var P=(g.mode&1)!==0;jt!==null;){var B=jt,H=B.child;if(B.tag===22&&P){var ee=B.memoizedState!==null||lk;if(!ee){var fe=B.alternate,ve=fe!==null&&fe.memoizedState!==null||qo;fe=lk;var Fe=qo;if(lk=ee,(qo=ve)&&!Fe)for(jt=B;jt!==null;)ee=jt,ve=ee.child,ee.tag===22&&ee.memoizedState!==null?VZ(B):ve!==null?(ve.return=ee,jt=ve):VZ(B);for(;H!==null;)jt=H,jZ(H),H=H.sibling;jt=B,lk=fe,qo=Fe}zZ(g)}else B.subtreeFlags&8772&&H!==null?(H.return=B,jt=H):zZ(g)}}function zZ(g){for(;jt!==null;){var x=jt;if(x.flags&8772){var A=x.alternate;try{if(x.flags&8772)switch(x.tag){case 0:case 11:case 15:qo||ck(5,x);break;case 1:var P=x.stateNode;if(x.flags&4&&!qo)if(A===null)P.componentDidMount();else{var B=x.elementType===x.type?A.memoizedProps:Ac(x.type,A.memoizedProps);P.componentDidUpdate(B,A.memoizedState,P.__reactInternalSnapshotBeforeUpdate)}var H=x.updateQueue;H!==null&&UJ(x,H,P);break;case 3:var ee=x.updateQueue;if(ee!==null){if(A=null,x.child!==null)switch(x.child.tag){case 5:A=x.child.stateNode;break;case 1:A=x.child.stateNode}UJ(x,ee,A)}break;case 5:var fe=x.stateNode;if(A===null&&x.flags&4){A=fe;var ve=x.memoizedProps;switch(x.type){case"button":case"input":case"select":case"textarea":ve.autoFocus&&A.focus();break;case"img":ve.src&&(A.src=ve.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(x.memoizedState===null){var Fe=x.alternate;if(Fe!==null){var ot=Fe.memoizedState;if(ot!==null){var dt=ot.dehydrated;dt!==null&&Za(dt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}qo||x.flags&512&&hM(x)}catch(st){Si(x,x.return,st)}}if(x===g){jt=null;break}if(A=x.sibling,A!==null){A.return=x.return,jt=A;break}jt=x.return}}function UZ(g){for(;jt!==null;){var x=jt;if(x===g){jt=null;break}var A=x.sibling;if(A!==null){A.return=x.return,jt=A;break}jt=x.return}}function VZ(g){for(;jt!==null;){var x=jt;try{switch(x.tag){case 0:case 11:case 15:var A=x.return;try{ck(4,x)}catch(ve){Si(x,A,ve)}break;case 1:var P=x.stateNode;if(typeof P.componentDidMount=="function"){var B=x.return;try{P.componentDidMount()}catch(ve){Si(x,B,ve)}}var H=x.return;try{hM(x)}catch(ve){Si(x,H,ve)}break;case 5:var ee=x.return;try{hM(x)}catch(ve){Si(x,ee,ve)}}}catch(ve){Si(x,x.return,ve)}if(x===g){jt=null;break}var fe=x.sibling;if(fe!==null){fe.return=x.return,jt=fe;break}jt=x.return}}var UNe=Math.ceil,dk=E.ReactCurrentDispatcher,gM=E.ReactCurrentOwner,Fl=E.ReactCurrentBatchConfig,er=0,js=null,Ji=null,po=0,Wu=0,Yb=pm(0),gs=0,e_=null,Lg=0,fk=0,yM=0,t_=null,iu=null,bM=0,Kb=1/0,Ih=null,hk=!1,vM=null,xm=null,pk=!1,wm=null,mk=0,n_=0,xM=null,gk=-1,yk=0;function Ta(){return er&6?Fn():gk!==-1?gk:gk=Fn()}function Em(g){return g.mode&1?er&2&&po!==0?po&-po:CNe.transition!==null?(yk===0&&(yk=mt()),yk):(g=Xt,g!==0||(g=window.event,g=g===void 0?16:wr(g.type)),g):1}function Rc(g,x,A,P){if(50<n_)throw n_=0,xM=null,Error(n(185));un(g,A,P),(!(er&2)||g!==js)&&(g===js&&(!(er&2)&&(fk|=A),gs===4&&_m(g,po)),su(g,P),A===1&&er===0&&!(x.mode&1)&&(Kb=Fn()+500,qA&&gm()))}function su(g,x){var A=g.callbackNode;it(g,x);var P=qe(g,g===js?po:0);if(P===0)A!==null&&vc(A),g.callbackNode=null,g.callbackPriority=0;else if(x=P&-P,g.callbackPriority!==x){if(A!=null&&vc(A),x===1)g.tag===0?TNe(qZ.bind(null,g)):RJ(qZ.bind(null,g)),xNe(function(){!(er&6)&&gm()}),A=null;else{switch(ur(P)){case 1:A=us;break;case 4:A=zu;break;case 16:A=ls;break;case 536870912:A=am;break;default:A=ls}A=ZZ(A,HZ.bind(null,g))}g.callbackPriority=x,g.callbackNode=A}}function HZ(g,x){if(gk=-1,yk=0,er&6)throw Error(n(327));var A=g.callbackNode;if(Xb()&&g.callbackNode!==A)return null;var P=qe(g,g===js?po:0);if(P===0)return null;if(P&30||P&g.expiredLanes||x)x=bk(g,P);else{x=P;var B=er;er|=2;var H=GZ();(js!==g||po!==x)&&(Ih=null,Kb=Fn()+500,Bg(g,x));do try{qNe();break}catch(fe){WZ(g,fe)}while(!0);F5(),dk.current=H,er=B,Ji!==null?x=0:(js=null,po=0,x=gs)}if(x!==0){if(x===2&&(B=rt(g),B!==0&&(P=B,x=wM(g,B))),x===1)throw A=e_,Bg(g,0),_m(g,P),su(g,Fn()),A;if(x===6)_m(g,P);else{if(B=g.current.alternate,!(P&30)&&!VNe(B)&&(x=bk(g,P),x===2&&(H=rt(g),H!==0&&(P=H,x=wM(g,H))),x===1))throw A=e_,Bg(g,0),_m(g,P),su(g,Fn()),A;switch(g.finishedWork=B,g.finishedLanes=P,x){case 0:case 1:throw Error(n(345));case 2:jg(g,iu,Ih);break;case 3:if(_m(g,P),(P&130023424)===P&&(x=bM+500-Fn(),10<x)){if(qe(g,0)!==0)break;if(B=g.suspendedLanes,(B&P)!==P){Ta(),g.pingedLanes|=g.suspendedLanes&B;break}g.timeoutHandle=A5(jg.bind(null,g,iu,Ih),x);break}jg(g,iu,Ih);break;case 4:if(_m(g,P),(P&4194240)===P)break;for(x=g.eventTimes,B=-1;0<P;){var ee=31-ds(P);H=1<<ee,ee=x[ee],ee>B&&(B=ee),P&=~H}if(P=B,P=Fn()-P,P=(120>P?120:480>P?480:1080>P?1080:1920>P?1920:3e3>P?3e3:4320>P?4320:1960*UNe(P/1960))-P,10<P){g.timeoutHandle=A5(jg.bind(null,g,iu,Ih),P);break}jg(g,iu,Ih);break;case 5:jg(g,iu,Ih);break;default:throw Error(n(329))}}}return su(g,Fn()),g.callbackNode===A?HZ.bind(null,g):null}function wM(g,x){var A=t_;return g.current.memoizedState.isDehydrated&&(Bg(g,x).flags|=256),g=bk(g,x),g!==2&&(x=iu,iu=A,x!==null&&EM(x)),g}function EM(g){iu===null?iu=g:iu.push.apply(iu,g)}function VNe(g){for(var x=g;;){if(x.flags&16384){var A=x.updateQueue;if(A!==null&&(A=A.stores,A!==null))for(var P=0;P<A.length;P++){var B=A[P],H=B.getSnapshot;B=B.value;try{if(!Cc(H(),B))return!1}catch{return!1}}}if(A=x.child,x.subtreeFlags&16384&&A!==null)A.return=x,x=A;else{if(x===g)break;for(;x.sibling===null;){if(x.return===null||x.return===g)return!0;x=x.return}x.sibling.return=x.return,x=x.sibling}}return!0}function _m(g,x){for(x&=~yM,x&=~fk,g.suspendedLanes|=x,g.pingedLanes&=~x,g=g.expirationTimes;0<x;){var A=31-ds(x),P=1<<A;g[A]=-1,x&=~P}}function qZ(g){if(er&6)throw Error(n(327));Xb();var x=qe(g,0);if(!(x&1))return su(g,Fn()),null;var A=bk(g,x);if(g.tag!==0&&A===2){var P=rt(g);P!==0&&(x=P,A=wM(g,P))}if(A===1)throw A=e_,Bg(g,0),_m(g,x),su(g,Fn()),A;if(A===6)throw Error(n(345));return g.finishedWork=g.current.alternate,g.finishedLanes=x,jg(g,iu,Ih),su(g,Fn()),null}function _M(g,x){var A=er;er|=1;try{return g(x)}finally{er=A,er===0&&(Kb=Fn()+500,qA&&gm())}}function Fg(g){wm!==null&&wm.tag===0&&!(er&6)&&Xb();var x=er;er|=1;var A=Fl.transition,P=Xt;try{if(Fl.transition=null,Xt=1,g)return g()}finally{Xt=P,Fl.transition=A,er=x,!(er&6)&&gm()}}function TM(){Wu=Yb.current,ti(Yb)}function Bg(g,x){g.finishedWork=null,g.finishedLanes=0;var A=g.timeoutHandle;if(A!==-1&&(g.timeoutHandle=-1,vNe(A)),Ji!==null)for(A=Ji.return;A!==null;){var P=A;switch(N5(P),P.tag){case 1:P=P.type.childContextTypes,P!=null&&VA();break;case 3:qb(),ti(tu),ti(Uo),W5();break;case 5:H5(P);break;case 4:qb();break;case 13:ti(bi);break;case 19:ti(bi);break;case 10:B5(P.type._context);break;case 22:case 23:TM()}A=A.return}if(js=g,Ji=g=Tm(g.current,null),po=Wu=x,gs=0,e_=null,yM=fk=Lg=0,iu=t_=null,Og!==null){for(x=0;x<Og.length;x++)if(A=Og[x],P=A.interleaved,P!==null){A.interleaved=null;var B=P.next,H=A.pending;if(H!==null){var ee=H.next;H.next=B,P.next=ee}A.pending=P}Og=null}return g}function WZ(g,x){do{var A=Ji;try{if(F5(),tk.current=sk,nk){for(var P=vi.memoizedState;P!==null;){var B=P.queue;B!==null&&(B.pending=null),P=P.next}nk=!1}if(Mg=0,Bs=ms=vi=null,YE=!1,KE=0,gM.current=null,A===null||A.return===null){gs=1,e_=x,Ji=null;break}e:{var H=g,ee=A.return,fe=A,ve=x;if(x=po,fe.flags|=32768,ve!==null&&typeof ve=="object"&&typeof ve.then=="function"){var Fe=ve,ot=fe,dt=ot.tag;if(!(ot.mode&1)&&(dt===0||dt===11||dt===15)){var st=ot.alternate;st?(ot.updateQueue=st.updateQueue,ot.memoizedState=st.memoizedState,ot.lanes=st.lanes):(ot.updateQueue=null,ot.memoizedState=null)}var Mt=yZ(ee);if(Mt!==null){Mt.flags&=-257,bZ(Mt,ee,fe,H,x),Mt.mode&1&&gZ(H,Fe,x),x=Mt,ve=Fe;var zt=x.updateQueue;if(zt===null){var Ut=new Set;Ut.add(ve),x.updateQueue=Ut}else zt.add(ve);break e}else{if(!(x&1)){gZ(H,Fe,x),CM();break e}ve=Error(n(426))}}else if(ui&&fe.mode&1){var Fi=yZ(ee);if(Fi!==null){!(Fi.flags&65536)&&(Fi.flags|=256),bZ(Fi,ee,fe,H,x),M5(Wb(ve,fe));break e}}H=ve=Wb(ve,fe),gs!==4&&(gs=2),t_===null?t_=[H]:t_.push(H),H=ee;do{switch(H.tag){case 3:H.flags|=65536,x&=-x,H.lanes|=x;var Ie=pZ(H,ve,x);zJ(H,Ie);break e;case 1:fe=ve;var _e=H.type,Pe=H.stateNode;if(!(H.flags&128)&&(typeof _e.getDerivedStateFromError=="function"||Pe!==null&&typeof Pe.componentDidCatch=="function"&&(xm===null||!xm.has(Pe)))){H.flags|=65536,x&=-x,H.lanes|=x;var vt=mZ(H,fe,x);zJ(H,vt);break e}}H=H.return}while(H!==null)}KZ(A)}catch(Yt){x=Yt,Ji===A&&A!==null&&(Ji=A=A.return);continue}break}while(!0)}function GZ(){var g=dk.current;return dk.current=sk,g===null?sk:g}function CM(){(gs===0||gs===3||gs===2)&&(gs=4),js===null||!(Lg&268435455)&&!(fk&268435455)||_m(js,po)}function bk(g,x){var A=er;er|=2;var P=GZ();(js!==g||po!==x)&&(Ih=null,Bg(g,x));do try{HNe();break}catch(B){WZ(g,B)}while(!0);if(F5(),er=A,dk.current=P,Ji!==null)throw Error(n(261));return js=null,po=0,gs}function HNe(){for(;Ji!==null;)YZ(Ji)}function qNe(){for(;Ji!==null&&!om();)YZ(Ji)}function YZ(g){var x=JZ(g.alternate,g,Wu);g.memoizedProps=g.pendingProps,x===null?KZ(g):Ji=x,gM.current=null}function KZ(g){var x=g;do{var A=x.alternate;if(g=x.return,x.flags&32768){if(A=FNe(A,x),A!==null){A.flags&=32767,Ji=A;return}if(g!==null)g.flags|=32768,g.subtreeFlags=0,g.deletions=null;else{gs=6,Ji=null;return}}else if(A=LNe(A,x,Wu),A!==null){Ji=A;return}if(x=x.sibling,x!==null){Ji=x;return}Ji=x=g}while(x!==null);gs===0&&(gs=5)}function jg(g,x,A){var P=Xt,B=Fl.transition;try{Fl.transition=null,Xt=1,WNe(g,x,A,P)}finally{Fl.transition=B,Xt=P}return null}function WNe(g,x,A,P){do Xb();while(wm!==null);if(er&6)throw Error(n(327));A=g.finishedWork;var B=g.finishedLanes;if(A===null)return null;if(g.finishedWork=null,g.finishedLanes=0,A===g.current)throw Error(n(177));g.callbackNode=null,g.callbackPriority=0;var H=A.lanes|A.childLanes;if(Gt(g,H),g===js&&(Ji=js=null,po=0),!(A.subtreeFlags&2064)&&!(A.flags&2064)||pk||(pk=!0,ZZ(ls,function(){return Xb(),null})),H=(A.flags&15990)!==0,A.subtreeFlags&15990||H){H=Fl.transition,Fl.transition=null;var ee=Xt;Xt=1;var fe=er;er|=4,gM.current=null,jNe(g,A),BZ(A,g),fNe(C5),le=!!T5,C5=T5=null,g.current=A,zNe(A),xc(),er=fe,Xt=ee,Fl.transition=H}else g.current=A;if(pk&&(pk=!1,wm=g,mk=B),H=g.pendingLanes,H===0&&(xm=null),um(A.stateNode),su(g,Fn()),x!==null)for(P=g.onRecoverableError,A=0;A<x.length;A++)B=x[A],P(B.value,{componentStack:B.stack,digest:B.digest});if(hk)throw hk=!1,g=vM,vM=null,g;return mk&1&&g.tag!==0&&Xb(),H=g.pendingLanes,H&1?g===xM?n_++:(n_=0,xM=g):n_=0,gm(),null}function Xb(){if(wm!==null){var g=ur(mk),x=Fl.transition,A=Xt;try{if(Fl.transition=null,Xt=16>g?16:g,wm===null)var P=!1;else{if(g=wm,wm=null,mk=0,er&6)throw Error(n(331));var B=er;for(er|=4,jt=g.current;jt!==null;){var H=jt,ee=H.child;if(jt.flags&16){var fe=H.deletions;if(fe!==null){for(var ve=0;ve<fe.length;ve++){var Fe=fe[ve];for(jt=Fe;jt!==null;){var ot=jt;switch(ot.tag){case 0:case 11:case 15:ZE(8,ot,H)}var dt=ot.child;if(dt!==null)dt.return=ot,jt=dt;else for(;jt!==null;){ot=jt;var st=ot.sibling,Mt=ot.return;if(OZ(ot),ot===Fe){jt=null;break}if(st!==null){st.return=Mt,jt=st;break}jt=Mt}}}var zt=H.alternate;if(zt!==null){var Ut=zt.child;if(Ut!==null){zt.child=null;do{var Fi=Ut.sibling;Ut.sibling=null,Ut=Fi}while(Ut!==null)}}jt=H}}if(H.subtreeFlags&2064&&ee!==null)ee.return=H,jt=ee;else e:for(;jt!==null;){if(H=jt,H.flags&2048)switch(H.tag){case 0:case 11:case 15:ZE(9,H,H.return)}var Ie=H.sibling;if(Ie!==null){Ie.return=H.return,jt=Ie;break e}jt=H.return}}var _e=g.current;for(jt=_e;jt!==null;){ee=jt;var Pe=ee.child;if(ee.subtreeFlags&2064&&Pe!==null)Pe.return=ee,jt=Pe;else e:for(ee=_e;jt!==null;){if(fe=jt,fe.flags&2048)try{switch(fe.tag){case 0:case 11:case 15:ck(9,fe)}}catch(Yt){Si(fe,fe.return,Yt)}if(fe===ee){jt=null;break e}var vt=fe.sibling;if(vt!==null){vt.return=fe.return,jt=vt;break e}jt=fe.return}}if(er=B,gm(),cs&&typeof cs.onPostCommitFiberRoot=="function")try{cs.onPostCommitFiberRoot(Il,g)}catch{}P=!0}return P}finally{Xt=A,Fl.transition=x}}return!1}function XZ(g,x,A){x=Wb(A,x),x=pZ(g,x,1),g=bm(g,x,1),x=Ta(),g!==null&&(un(g,1,x),su(g,x))}function Si(g,x,A){if(g.tag===3)XZ(g,g,A);else for(;x!==null;){if(x.tag===3){XZ(x,g,A);break}else if(x.tag===1){var P=x.stateNode;if(typeof x.type.getDerivedStateFromError=="function"||typeof P.componentDidCatch=="function"&&(xm===null||!xm.has(P))){g=Wb(A,g),g=mZ(x,g,1),x=bm(x,g,1),g=Ta(),x!==null&&(un(x,1,g),su(x,g));break}}x=x.return}}function GNe(g,x,A){var P=g.pingCache;P!==null&&P.delete(x),x=Ta(),g.pingedLanes|=g.suspendedLanes&A,js===g&&(po&A)===A&&(gs===4||gs===3&&(po&130023424)===po&&500>Fn()-bM?Bg(g,0):yM|=A),su(g,x)}function QZ(g,x){x===0&&(g.mode&1?(x=Ae,Ae<<=1,!(Ae&130023424)&&(Ae=4194304)):x=1);var A=Ta();g=Sh(g,x),g!==null&&(un(g,x,A),su(g,A))}function YNe(g){var x=g.memoizedState,A=0;x!==null&&(A=x.retryLane),QZ(g,A)}function KNe(g,x){var A=0;switch(g.tag){case 13:var P=g.stateNode,B=g.memoizedState;B!==null&&(A=B.retryLane);break;case 19:P=g.stateNode;break;default:throw Error(n(314))}P!==null&&P.delete(x),QZ(g,A)}var JZ;JZ=function(g,x,A){if(g!==null)if(g.memoizedProps!==x.pendingProps||tu.current)ru=!0;else{if(!(g.lanes&A)&&!(x.flags&128))return ru=!1,MNe(g,x,A);ru=!!(g.flags&131072)}else ru=!1,ui&&x.flags&1048576&&DJ(x,GA,x.index);switch(x.lanes=0,x.tag){case 2:var P=x.type;uk(g,x),g=x.pendingProps;var B=Fb(x,Uo.current);Hb(x,A),B=K5(null,x,P,g,B,A);var H=X5();return x.flags|=1,typeof B=="object"&&B!==null&&typeof B.render=="function"&&B.$$typeof===void 0?(x.tag=1,x.memoizedState=null,x.updateQueue=null,nu(P)?(H=!0,HA(x)):H=!1,x.memoizedState=B.state!==null&&B.state!==void 0?B.state:null,U5(x),B.updater=ok,x.stateNode=B,B._reactInternals=x,nM(x,P,g,A),x=oM(null,x,P,!0,H,A)):(x.tag=0,ui&&H&&P5(x),_a(null,x,B,A),x=x.child),x;case 16:P=x.elementType;e:{switch(uk(g,x),g=x.pendingProps,B=P._init,P=B(P._payload),x.type=P,B=x.tag=QNe(P),g=Ac(P,g),B){case 0:x=sM(null,x,P,g,A);break e;case 1:x=TZ(null,x,P,g,A);break e;case 11:x=vZ(null,x,P,g,A);break e;case 14:x=xZ(null,x,P,Ac(P.type,g),A);break e}throw Error(n(306,P,""))}return x;case 0:return P=x.type,B=x.pendingProps,B=x.elementType===P?B:Ac(P,B),sM(g,x,P,B,A);case 1:return P=x.type,B=x.pendingProps,B=x.elementType===P?B:Ac(P,B),TZ(g,x,P,B,A);case 3:e:{if(CZ(x),g===null)throw Error(n(387));P=x.pendingProps,H=x.memoizedState,B=H.element,jJ(g,x),ZA(x,P,null,A);var ee=x.memoizedState;if(P=ee.element,H.isDehydrated)if(H={element:P,isDehydrated:!1,cache:ee.cache,pendingSuspenseBoundaries:ee.pendingSuspenseBoundaries,transitions:ee.transitions},x.updateQueue.baseState=H,x.memoizedState=H,x.flags&256){B=Wb(Error(n(423)),x),x=SZ(g,x,P,A,B);break e}else if(P!==B){B=Wb(Error(n(424)),x),x=SZ(g,x,P,A,B);break e}else for(qu=hm(x.stateNode.containerInfo.firstChild),Hu=x,ui=!0,Sc=null,A=FJ(x,null,P,A),x.child=A;A;)A.flags=A.flags&-3|4096,A=A.sibling;else{if(zb(),P===B){x=kh(g,x,A);break e}_a(g,x,P,A)}x=x.child}return x;case 5:return VJ(x),g===null&&$5(x),P=x.type,B=x.pendingProps,H=g!==null?g.memoizedProps:null,ee=B.children,S5(P,B)?ee=null:H!==null&&S5(P,H)&&(x.flags|=32),_Z(g,x),_a(g,x,ee,A),x.child;case 6:return g===null&&$5(x),null;case 13:return AZ(g,x,A);case 4:return V5(x,x.stateNode.containerInfo),P=x.pendingProps,g===null?x.child=Ub(x,null,P,A):_a(g,x,P,A),x.child;case 11:return P=x.type,B=x.pendingProps,B=x.elementType===P?B:Ac(P,B),vZ(g,x,P,B,A);case 7:return _a(g,x,x.pendingProps,A),x.child;case 8:return _a(g,x,x.pendingProps.children,A),x.child;case 12:return _a(g,x,x.pendingProps.children,A),x.child;case 10:e:{if(P=x.type._context,B=x.pendingProps,H=x.memoizedProps,ee=B.value,Yr(XA,P._currentValue),P._currentValue=ee,H!==null)if(Cc(H.value,ee)){if(H.children===B.children&&!tu.current){x=kh(g,x,A);break e}}else for(H=x.child,H!==null&&(H.return=x);H!==null;){var fe=H.dependencies;if(fe!==null){ee=H.child;for(var ve=fe.firstContext;ve!==null;){if(ve.context===P){if(H.tag===1){ve=Ah(-1,A&-A),ve.tag=2;var Fe=H.updateQueue;if(Fe!==null){Fe=Fe.shared;var ot=Fe.pending;ot===null?ve.next=ve:(ve.next=ot.next,ot.next=ve),Fe.pending=ve}}H.lanes|=A,ve=H.alternate,ve!==null&&(ve.lanes|=A),j5(H.return,A,x),fe.lanes|=A;break}ve=ve.next}}else if(H.tag===10)ee=H.type===x.type?null:H.child;else if(H.tag===18){if(ee=H.return,ee===null)throw Error(n(341));ee.lanes|=A,fe=ee.alternate,fe!==null&&(fe.lanes|=A),j5(ee,A,x),ee=H.sibling}else ee=H.child;if(ee!==null)ee.return=H;else for(ee=H;ee!==null;){if(ee===x){ee=null;break}if(H=ee.sibling,H!==null){H.return=ee.return,ee=H;break}ee=ee.return}H=ee}_a(g,x,B.children,A),x=x.child}return x;case 9:return B=x.type,P=x.pendingProps.children,Hb(x,A),B=Ml(B),P=P(B),x.flags|=1,_a(g,x,P,A),x.child;case 14:return P=x.type,B=Ac(P,x.pendingProps),B=Ac(P.type,B),xZ(g,x,P,B,A);case 15:return wZ(g,x,x.type,x.pendingProps,A);case 17:return P=x.type,B=x.pendingProps,B=x.elementType===P?B:Ac(P,B),uk(g,x),x.tag=1,nu(P)?(g=!0,HA(x)):g=!1,Hb(x,A),fZ(x,P,B),nM(x,P,B,A),oM(null,x,P,!0,g,A);case 19:return IZ(g,x,A);case 22:return EZ(g,x,A)}throw Error(n(156,x.tag))};function ZZ(g,x){return $d(g,x)}function XNe(g,x,A,P){this.tag=g,this.key=A,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=x,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=P,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bl(g,x,A,P){return new XNe(g,x,A,P)}function SM(g){return g=g.prototype,!(!g||!g.isReactComponent)}function QNe(g){if(typeof g=="function")return SM(g)?1:0;if(g!=null){if(g=g.$$typeof,g===F)return 11;if(g===q)return 14}return 2}function Tm(g,x){var A=g.alternate;return A===null?(A=Bl(g.tag,x,g.key,g.mode),A.elementType=g.elementType,A.type=g.type,A.stateNode=g.stateNode,A.alternate=g,g.alternate=A):(A.pendingProps=x,A.type=g.type,A.flags=0,A.subtreeFlags=0,A.deletions=null),A.flags=g.flags&14680064,A.childLanes=g.childLanes,A.lanes=g.lanes,A.child=g.child,A.memoizedProps=g.memoizedProps,A.memoizedState=g.memoizedState,A.updateQueue=g.updateQueue,x=g.dependencies,A.dependencies=x===null?null:{lanes:x.lanes,firstContext:x.firstContext},A.sibling=g.sibling,A.index=g.index,A.ref=g.ref,A}function vk(g,x,A,P,B,H){var ee=2;if(P=g,typeof g=="function")SM(g)&&(ee=1);else if(typeof g=="string")ee=5;else e:switch(g){case S:return zg(A.children,B,H,x);case k:ee=8,B|=8;break;case R:return g=Bl(12,A,x,B|2),g.elementType=R,g.lanes=H,g;case $:return g=Bl(13,A,x,B),g.elementType=$,g.lanes=H,g;case z:return g=Bl(19,A,x,B),g.elementType=z,g.lanes=H,g;case J:return xk(A,B,H,x);default:if(typeof g=="object"&&g!==null)switch(g.$$typeof){case N:ee=10;break e;case O:ee=9;break e;case F:ee=11;break e;case q:ee=14;break e;case W:ee=16,P=null;break e}throw Error(n(130,g==null?g:typeof g,""))}return x=Bl(ee,A,x,B),x.elementType=g,x.type=P,x.lanes=H,x}function zg(g,x,A,P){return g=Bl(7,g,P,x),g.lanes=A,g}function xk(g,x,A,P){return g=Bl(22,g,P,x),g.elementType=J,g.lanes=A,g.stateNode={isHidden:!1},g}function AM(g,x,A){return g=Bl(6,g,null,x),g.lanes=A,g}function kM(g,x,A){return x=Bl(4,g.children!==null?g.children:[],g.key,x),x.lanes=A,x.stateNode={containerInfo:g.containerInfo,pendingChildren:null,implementation:g.implementation},x}function JNe(g,x,A,P,B){this.tag=x,this.containerInfo=g,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Pt(0),this.expirationTimes=Pt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Pt(0),this.identifierPrefix=P,this.onRecoverableError=B,this.mutableSourceEagerHydrationData=null}function IM(g,x,A,P,B,H,ee,fe,ve){return g=new JNe(g,x,A,fe,ve),x===1?(x=1,H===!0&&(x|=8)):x=0,H=Bl(3,null,null,x),g.current=H,H.stateNode=g,H.memoizedState={element:P,isDehydrated:A,cache:null,transitions:null,pendingSuspenseBoundaries:null},U5(H),g}function ZNe(g,x,A){var P=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:C,key:P==null?null:""+P,children:g,containerInfo:x,implementation:A}}function eee(g){if(!g)return mm;g=g._reactInternals;e:{if(gi(g)!==g||g.tag!==1)throw Error(n(170));var x=g;do{switch(x.tag){case 3:x=x.stateNode.context;break e;case 1:if(nu(x.type)){x=x.stateNode.__reactInternalMemoizedMergedChildContext;break e}}x=x.return}while(x!==null);throw Error(n(171))}if(g.tag===1){var A=g.type;if(nu(A))return kJ(g,A,x)}return x}function tee(g,x,A,P,B,H,ee,fe,ve){return g=IM(A,P,!0,g,B,H,ee,fe,ve),g.context=eee(null),A=g.current,P=Ta(),B=Em(A),H=Ah(P,B),H.callback=x??null,bm(A,H,B),g.current.lanes=B,un(g,B,P),su(g,P),g}function wk(g,x,A,P){var B=x.current,H=Ta(),ee=Em(B);return A=eee(A),x.context===null?x.context=A:x.pendingContext=A,x=Ah(H,ee),x.payload={element:g},P=P===void 0?null:P,P!==null&&(x.callback=P),g=bm(B,x,ee),g!==null&&(Rc(g,B,ee,H),JA(g,B,ee)),ee}function Ek(g){if(g=g.current,!g.child)return null;switch(g.child.tag){case 5:return g.child.stateNode;default:return g.child.stateNode}}function nee(g,x){if(g=g.memoizedState,g!==null&&g.dehydrated!==null){var A=g.retryLane;g.retryLane=A!==0&&A<x?A:x}}function RM(g,x){nee(g,x),(g=g.alternate)&&nee(g,x)}var ree=typeof reportError=="function"?reportError:function(g){console.error(g)};function DM(g){this._internalRoot=g}_k.prototype.render=DM.prototype.render=function(g){var x=this._internalRoot;if(x===null)throw Error(n(409));wk(g,x,null,null)},_k.prototype.unmount=DM.prototype.unmount=function(){var g=this._internalRoot;if(g!==null){this._internalRoot=null;var x=g.containerInfo;Fg(function(){wk(null,g,null,null)}),x[Eh]=null}};function _k(g){this._internalRoot=g}_k.prototype.unstable_scheduleHydration=function(g){if(g){var x=lm();g={blockedOn:null,target:g,priority:x};for(var A=0;A<Ja.length&&x!==0&&x<Ja[A].priority;A++);Ja.splice(A,0,g),A===0&&Ag(g)}};function PM(g){return!(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)}function Tk(g){return!(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11&&(g.nodeType!==8||g.nodeValue!==" react-mount-point-unstable "))}function iee(){}function e4e(g,x,A,P,B){if(B){if(typeof P=="function"){var H=P;P=function(){var Fe=Ek(ee);H.call(Fe)}}var ee=tee(x,P,g,0,null,!1,!1,"",iee);return g._reactRootContainer=ee,g[Eh]=ee.current,jE(g.nodeType===8?g.parentNode:g),Fg(),ee}for(;B=g.lastChild;)g.removeChild(B);if(typeof P=="function"){var fe=P;P=function(){var Fe=Ek(ve);fe.call(Fe)}}var ve=IM(g,0,!1,null,null,!1,!1,"",iee);return g._reactRootContainer=ve,g[Eh]=ve.current,jE(g.nodeType===8?g.parentNode:g),Fg(function(){wk(x,ve,A,P)}),ve}function Ck(g,x,A,P,B){var H=A._reactRootContainer;if(H){var ee=H;if(typeof B=="function"){var fe=B;B=function(){var ve=Ek(ee);fe.call(ve)}}wk(x,ee,g,B)}else ee=e4e(A,x,g,B,P);return Ek(ee)}fs=function(g){switch(g.tag){case 3:var x=g.stateNode;if(x.current.memoizedState.isDehydrated){var A=we(x.pendingLanes);A!==0&&(kn(x,A|1),su(x,Fn()),!(er&6)&&(Kb=Fn()+500,gm()))}break;case 13:Fg(function(){var P=Sh(g,1);if(P!==null){var B=Ta();Rc(P,g,1,B)}}),RM(g,1)}},Qa=function(g){if(g.tag===13){var x=Sh(g,134217728);if(x!==null){var A=Ta();Rc(x,g,134217728,A)}RM(g,134217728)}},Rl=function(g){if(g.tag===13){var x=Em(g),A=Sh(g,x);if(A!==null){var P=Ta();Rc(A,g,x,P)}RM(g,x)}},lm=function(){return Xt},Md=function(g,x){var A=Xt;try{return Xt=g,x()}finally{Xt=A}},Zr=function(g,x,A){switch(x){case"input":if(Ne(g,A),x=A.name,A.type==="radio"&&x!=null){for(A=g;A.parentNode;)A=A.parentNode;for(A=A.querySelectorAll("input[name="+JSON.stringify(""+x)+'][type="radio"]'),x=0;x<A.length;x++){var P=A[x];if(P!==g&&P.form===g.form){var B=UA(P);if(!B)throw Error(n(90));se(P),Ne(P,B)}}}break;case"textarea":wt(g,A);break;case"select":x=A.value,x!=null&&pt(g,!!A.multiple,x,!1)}},zo=_M,Bu=Fg;var t4e={usingClientEntryPoint:!1,Events:[VE,Mb,UA,Os,Al,_M]},r_={findFiberByHostInstance:Rg,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},n4e={bundleType:r_.bundleType,version:r_.version,rendererPackageName:r_.rendererPackageName,rendererConfig:r_.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:E.ReactCurrentDispatcher,findHostInstanceByFiber:function(g){return g=yh(g),g===null?null:g.stateNode},findFiberByHostInstance:r_.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Sk=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Sk.isDisabled&&Sk.supportsFiber)try{Il=Sk.inject(n4e),cs=Sk}catch{}}return ou.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=t4e,ou.createPortal=function(g,x){var A=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!PM(x))throw Error(n(200));return ZNe(g,x,null,A)},ou.createRoot=function(g,x){if(!PM(g))throw Error(n(299));var A=!1,P="",B=ree;return x!=null&&(x.unstable_strictMode===!0&&(A=!0),x.identifierPrefix!==void 0&&(P=x.identifierPrefix),x.onRecoverableError!==void 0&&(B=x.onRecoverableError)),x=IM(g,1,!1,null,null,A,!1,P,B),g[Eh]=x.current,jE(g.nodeType===8?g.parentNode:g),new DM(x)},ou.findDOMNode=function(g){if(g==null)return null;if(g.nodeType===1)return g;var x=g._reactInternals;if(x===void 0)throw typeof g.render=="function"?Error(n(188)):(g=Object.keys(g).join(","),Error(n(268,g)));return g=yh(x),g=g===null?null:g.stateNode,g},ou.flushSync=function(g){return Fg(g)},ou.hydrate=function(g,x,A){if(!Tk(x))throw Error(n(200));return Ck(null,g,x,!0,A)},ou.hydrateRoot=function(g,x,A){if(!PM(g))throw Error(n(405));var P=A!=null&&A.hydratedSources||null,B=!1,H="",ee=ree;if(A!=null&&(A.unstable_strictMode===!0&&(B=!0),A.identifierPrefix!==void 0&&(H=A.identifierPrefix),A.onRecoverableError!==void 0&&(ee=A.onRecoverableError)),x=tee(x,null,g,1,A??null,B,!1,H,ee),g[Eh]=x.current,jE(g),P)for(g=0;g<P.length;g++)A=P[g],B=A._getVersion,B=B(A._source),x.mutableSourceEagerHydrationData==null?x.mutableSourceEagerHydrationData=[A,B]:x.mutableSourceEagerHydrationData.push(A,B);return new _k(x)},ou.render=function(g,x,A){if(!Tk(x))throw Error(n(200));return Ck(null,g,x,!1,A)},ou.unmountComponentAtNode=function(g){if(!Tk(g))throw Error(n(40));return g._reactRootContainer?(Fg(function(){Ck(null,null,g,!1,function(){g._reactRootContainer=null,g[Eh]=null})}),!0):!1},ou.unstable_batchedUpdates=_M,ou.unstable_renderSubtreeIntoContainer=function(g,x,A,P){if(!Tk(A))throw Error(n(200));if(g==null||g._reactInternals===void 0)throw Error(n(38));return Ck(g,x,A,!1,P)},ou.version="18.3.1-next-f1338f8080-20240426",ou}var fee;function spe(){if(fee)return $M.exports;fee=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),$M.exports=m4e(),$M.exports}var hee;function g4e(){if(hee)return Ak;hee=1;var e=spe();return Ak.createRoot=e.createRoot,Ak.hydrateRoot=e.hydrateRoot,Ak}var y4e=g4e();const b4e=Tl(y4e);var rf=function(){return rf=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},rf.apply(this,arguments)};function zC(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function v4e(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}var BR="right-scroll-bar-position",jR="width-before-scroll-bar",x4e="with-scroll-bars-hidden",w4e="--removed-body-scroll-bar-size";function FM(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function E4e(e,t){var n=D.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=t,n.facade}var _4e=typeof window<"u"?D.useLayoutEffect:D.useEffect,pee=new WeakMap;function T4e(e,t){var n=E4e(null,function(r){return e.forEach(function(i){return FM(i,r)})});return _4e(function(){var r=pee.get(n);if(r){var i=new Set(r),s=new Set(e),o=n.current;i.forEach(function(a){s.has(a)||FM(a,null)}),s.forEach(function(a){i.has(a)||FM(a,o)})}pee.set(n,e)},[e]),n}function C4e(e){return e}function S4e(e,t){t===void 0&&(t=C4e);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(s){var o=t(s,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(r=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var u=function(){var c=o;o=[],c.forEach(s)},l=function(){return Promise.resolve().then(u)};l(),n={push:function(c){o.push(c),l()},filter:function(c){return o=o.filter(c),n}}}};return i}function A4e(e){e===void 0&&(e={});var t=S4e(null);return t.options=rf({async:!0,ssr:!1},e),t}var ope=function(e){var t=e.sideCar,n=zC(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return D.createElement(r,rf({},n))};ope.isSideCarExport=!0;function k4e(e,t){return e.useMedium(t),ope}var ape=A4e(),BM=function(){},l4=D.forwardRef(function(e,t){var n=D.useRef(null),r=D.useState({onScrollCapture:BM,onWheelCapture:BM,onTouchMoveCapture:BM}),i=r[0],s=r[1],o=e.forwardProps,a=e.children,u=e.className,l=e.removeScrollBar,c=e.enabled,d=e.shards,f=e.sideCar,h=e.noIsolation,p=e.inert,m=e.allowPinchZoom,y=e.as,v=y===void 0?"div":y,b=e.gapMode,w=zC(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),E=f,_=T4e([n,t]),C=rf(rf({},w),i);return D.createElement(D.Fragment,null,c&&D.createElement(E,{sideCar:ape,removeScrollBar:l,shards:d,noIsolation:h,inert:p,setCallbacks:s,allowPinchZoom:!!m,lockRef:n,gapMode:b}),o?D.cloneElement(D.Children.only(a),rf(rf({},C),{ref:_})):D.createElement(v,rf({},C,{className:u,ref:_}),a))});l4.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};l4.classNames={fullWidth:jR,zeroRight:BR};var upe=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function I4e(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=upe();return t&&e.setAttribute("nonce",t),e}function R4e(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function D4e(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var P4e=function(){var e=0,t=null;return{add:function(n){e==0&&(t=I4e())&&(R4e(t,n),D4e(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},N4e=function(){var e=P4e();return function(t,n){D.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},O4e=function(){var e=N4e(),t=function(n){var r=n.styles,i=n.dynamic;return e(r,i),null};return t},$4e={left:0,top:0,right:0,gap:0},jM=function(e){return parseInt(e||"",10)||0},M4e=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],i=t[e==="padding"?"paddingRight":"marginRight"];return[jM(n),jM(r),jM(i)]},L4e=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return $4e;var t=M4e(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},F4e=O4e(),Wv="data-scroll-locked",B4e=function(e,t,n,r){var i=e.left,s=e.top,o=e.right,a=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(x4e,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(Wv,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(BR,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(jR,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(BR," .").concat(BR,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(jR," .").concat(jR,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Wv,`] {
    `).concat(w4e,": ").concat(a,`px;
  }
`)},mee=function(){var e=parseInt(document.body.getAttribute(Wv)||"0",10);return isFinite(e)?e:0},j4e=function(){D.useEffect(function(){return document.body.setAttribute(Wv,(mee()+1).toString()),function(){var e=mee()-1;e<=0?document.body.removeAttribute(Wv):document.body.setAttribute(Wv,e.toString())}},[])},z4e=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,i=r===void 0?"margin":r;j4e();var s=D.useMemo(function(){return L4e(i)},[i]);return D.createElement(F4e,{styles:B4e(s,!t,i,n?"":"!important")})};function U4e(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=upe();return t&&e.setAttribute("nonce",t),e}function V4e(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function H4e(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var q4e=function(){var e=0,t=null;return{add:function(n){e==0&&(t=U4e())&&(V4e(t,n),H4e(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},W4e=function(){var e=q4e();return function(t,n){D.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},G4e=function(){var e=W4e(),t=function(n){var r=n.styles,i=n.dynamic;return e(r,i),null};return t},k9=!1;if(typeof window<"u")try{var kk=Object.defineProperty({},"passive",{get:function(){return k9=!0,!0}});window.addEventListener("test",kk,kk),window.removeEventListener("test",kk,kk)}catch{k9=!1}var Qb=k9?{passive:!1}:!1,Y4e=function(e){return e.tagName==="TEXTAREA"},lpe=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!Y4e(e)&&n[t]==="visible")},K4e=function(e){return lpe(e,"overflowY")},X4e=function(e){return lpe(e,"overflowX")},gee=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=cpe(e,r);if(i){var s=dpe(e,r),o=s[1],a=s[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},Q4e=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},J4e=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},cpe=function(e,t){return e==="v"?K4e(t):X4e(t)},dpe=function(e,t){return e==="v"?Q4e(t):J4e(t)},Z4e=function(e,t){return e==="h"&&t==="rtl"?-1:1},eOe=function(e,t,n,r,i){var s=Z4e(e,window.getComputedStyle(t).direction),o=s*r,a=n.target,u=t.contains(a),l=!1,c=o>0,d=0,f=0;do{var h=dpe(e,a),p=h[0],m=h[1],y=h[2],v=m-y-s*p;(p||v)&&cpe(e,a)&&(d+=v,f+=p),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!u&&a!==document.body||u&&(t.contains(a)||t===a));return(c&&Math.abs(d)<1||!c&&Math.abs(f)<1)&&(l=!0),l},Ik=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},yee=function(e){return[e.deltaX,e.deltaY]},bee=function(e){return e&&"current"in e?e.current:e},tOe=function(e,t){return e[0]===t[0]&&e[1]===t[1]},nOe=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},rOe=0,Jb=[];function iOe(e){var t=D.useRef([]),n=D.useRef([0,0]),r=D.useRef(),i=D.useState(rOe++)[0],s=D.useState(G4e)[0],o=D.useRef(e);D.useEffect(function(){o.current=e},[e]),D.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var m=v4e([e.lockRef.current],(e.shards||[]).map(bee),!0).filter(Boolean);return m.forEach(function(y){return y.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),m.forEach(function(y){return y.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var a=D.useCallback(function(m,y){if("touches"in m&&m.touches.length===2||m.type==="wheel"&&m.ctrlKey)return!o.current.allowPinchZoom;var v=Ik(m),b=n.current,w="deltaX"in m?m.deltaX:b[0]-v[0],E="deltaY"in m?m.deltaY:b[1]-v[1],_,C=m.target,S=Math.abs(w)>Math.abs(E)?"h":"v";if("touches"in m&&S==="h"&&C.type==="range")return!1;var k=gee(S,C);if(!k)return!0;if(k?_=S:(_=S==="v"?"h":"v",k=gee(S,C)),!k)return!1;if(!r.current&&"changedTouches"in m&&(w||E)&&(r.current=_),!_)return!0;var R=r.current||_;return eOe(R,y,m,R==="h"?w:E)},[]),u=D.useCallback(function(m){var y=m;if(!(!Jb.length||Jb[Jb.length-1]!==s)){var v="deltaY"in y?yee(y):Ik(y),b=t.current.filter(function(_){return _.name===y.type&&(_.target===y.target||y.target===_.shadowParent)&&tOe(_.delta,v)})[0];if(b&&b.should){y.cancelable&&y.preventDefault();return}if(!b){var w=(o.current.shards||[]).map(bee).filter(Boolean).filter(function(_){return _.contains(y.target)}),E=w.length>0?a(y,w[0]):!o.current.noIsolation;E&&y.cancelable&&y.preventDefault()}}},[]),l=D.useCallback(function(m,y,v,b){var w={name:m,delta:y,target:v,should:b,shadowParent:sOe(v)};t.current.push(w),setTimeout(function(){t.current=t.current.filter(function(E){return E!==w})},1)},[]),c=D.useCallback(function(m){n.current=Ik(m),r.current=void 0},[]),d=D.useCallback(function(m){l(m.type,yee(m),m.target,a(m,e.lockRef.current))},[]),f=D.useCallback(function(m){l(m.type,Ik(m),m.target,a(m,e.lockRef.current))},[]);D.useEffect(function(){return Jb.push(s),e.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:f}),document.addEventListener("wheel",u,Qb),document.addEventListener("touchmove",u,Qb),document.addEventListener("touchstart",c,Qb),function(){Jb=Jb.filter(function(m){return m!==s}),document.removeEventListener("wheel",u,Qb),document.removeEventListener("touchmove",u,Qb),document.removeEventListener("touchstart",c,Qb)}},[]);var h=e.removeScrollBar,p=e.inert;return D.createElement(D.Fragment,null,p?D.createElement(s,{styles:nOe(i)}):null,h?D.createElement(z4e,{gapMode:e.gapMode}):null)}function sOe(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const oOe=k4e(ape,iOe);var xx=D.forwardRef(function(e,t){return D.createElement(l4,rf({},e,{ref:t,sideCar:oOe}))});xx.classNames=l4.classNames;function Ur(e){return Object.keys(e)}function zM(e){return e&&typeof e=="object"&&!Array.isArray(e)}function Wz(e,t){const n={...e},r=t;return zM(e)&&zM(t)&&Object.keys(t).forEach(i=>{zM(r[i])&&i in e?n[i]=Wz(n[i],r[i]):n[i]=r[i]}),n}function aOe(e){return e.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}function uOe(e){var t;return typeof e!="string"||!e.includes("var(--mantine-scale)")?e:(t=e.match(/^calc\((.*?)\)$/))==null?void 0:t[1].split("*")[0].trim()}function E2(e){const t=uOe(e);return typeof t=="number"?t:typeof t=="string"?t.includes("calc")||t.includes("var")?t:t.includes("px")?Number(t.replace("px","")):t.includes("rem")?Number(t.replace("rem",""))*16:t.includes("em")?Number(t.replace("em",""))*16:Number(t):NaN}function UM(e){return e==="0rem"?"0rem":`calc(${e} * var(--mantine-scale))`}function fpe(e,{shouldScale:t=!1}={}){function n(r){if(r===0||r==="0")return`0${e}`;if(typeof r=="number"){const i=`${r/16}${e}`;return t?UM(i):i}if(typeof r=="string"){if(r===""||r.startsWith("calc(")||r.startsWith("clamp(")||r.includes("rgba("))return r;if(r.includes(","))return r.split(",").map(s=>n(s)).join(",");if(r.includes(" "))return r.split(" ").map(s=>n(s)).join(" ");if(r.includes(e))return t?UM(r):r;const i=r.replace("px","");if(!Number.isNaN(Number(i))){const s=`${Number(i)/16}${e}`;return t?UM(s):s}}return r}return n}const $e=fpe("rem",{shouldScale:!0}),_P=fpe("em");function Q0(e){return Object.keys(e).reduce((t,n)=>(e[n]!==void 0&&(t[n]=e[n]),t),{})}function hpe(e){if(typeof e=="number")return!0;if(typeof e=="string"){if(e.startsWith("calc(")||e.startsWith("var(")||e.includes(" ")&&e.trim()!=="")return!0;const t=/^[+-]?[0-9]+(\.[0-9]+)?(px|em|rem|ex|ch|lh|rlh|vw|vh|vmin|vmax|vb|vi|svw|svh|lvw|lvh|dvw|dvh|cm|mm|in|pt|pc|q|cqw|cqh|cqi|cqb|cqmin|cqmax|%)?$/;return e.trim().split(/\s+/).every(r=>t.test(r))}return!1}function jp(e){return Array.isArray(e)||e===null?!1:typeof e=="object"?e.type!==D.Fragment:!1}function Is(e){const t=D.createContext(null);return[({children:i,value:s})=>T.jsx(t.Provider,{value:s,children:i}),()=>{const i=D.useContext(t);if(i===null)throw new Error(e);return i}]}function zp(e=null){const t=D.createContext(e);return[({children:i,value:s})=>T.jsx(t.Provider,{value:s,children:i}),()=>D.useContext(t)]}function TP(e,t){return n=>{if(typeof n!="string"||n.trim().length===0)throw new Error(t);return`${e}-${n}`}}function CP(e,t){let n=e;for(;(n=n.parentElement)&&!n.matches(t););return n}function lOe(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].disabled)return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].disabled)return r}return e}function cOe(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].disabled)return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].disabled)return r}return e}function dOe(e,t,n){return CP(e,n)===CP(t,n)}function Gz({parentSelector:e,siblingSelector:t,onKeyDown:n,loop:r=!0,activateOnFocus:i=!1,dir:s="rtl",orientation:o}){return a=>{var p;n==null||n(a);const u=Array.from(((p=CP(a.currentTarget,e))==null?void 0:p.querySelectorAll(t))||[]).filter(m=>dOe(a.currentTarget,m,e)),l=u.findIndex(m=>a.currentTarget===m),c=cOe(l,u,r),d=lOe(l,u,r),f=s==="rtl"?d:c,h=s==="rtl"?c:d;switch(a.key){case"ArrowRight":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),u[f].focus(),i&&u[f].click());break}case"ArrowLeft":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),u[h].focus(),i&&u[h].click());break}case"ArrowUp":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),u[d].focus(),i&&u[d].click());break}case"ArrowDown":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),u[c].focus(),i&&u[c].click());break}case"Home":{a.stopPropagation(),a.preventDefault(),!u[0].disabled&&u[0].focus();break}case"End":{a.stopPropagation(),a.preventDefault();const m=u.length-1;!u[m].disabled&&u[m].focus();break}}}}const fOe={app:100,modal:200,popover:300,overlay:400,max:9999};function so(e){return fOe[e]}const I9=()=>{};function hOe(e,t={active:!0}){return typeof e!="function"||!t.active?t.onKeyDown||I9:n=>{var r;n.key==="Escape"&&(e(n),(r=t.onTrigger)==null||r.call(t))}}function mn(e,t="size",n=!0){if(e!==void 0)return hpe(e)?n?$e(e):e:`var(--${t}-${e})`}function ns(e){return mn(e,"mantine-spacing")}function Dr(e){return e===void 0?"var(--mantine-radius-default)":mn(e,"mantine-radius")}function Do(e){return mn(e,"mantine-font-size")}function ppe(e){return mn(e,"mantine-line-height",!1)}function Yz(e){if(e)return mn(e,"mantine-shadow",!1)}function wu(e,t){return n=>{e==null||e(n),t==null||t(n)}}function Kz(e,t){return e in t?E2(t[e]):E2(e)}function _2(e,t){const n=e.map(r=>({value:r,px:Kz(r,t)}));return n.sort((r,i)=>r.px-i.px),n}function Yc(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}function pOe(e,t,n){var r;return n?Array.from(((r=CP(n,t))==null?void 0:r.querySelectorAll(e))||[]).findIndex(i=>i===n):null}function mOe(){const[e,t]=D.useState(-1);return[e,{setHovered:t,resetHovered:()=>t(-1)}]}function sf(e,t,n){return t===void 0&&n===void 0?e:t!==void 0&&n===void 0?Math.max(e,t):Math.min(t===void 0&&n!==void 0?e:Math.max(e,t),n)}function Gv(e="mantine-"){return`${e}${Math.random().toString(36).slice(2,11)}`}function Um(e){const t=D.useRef(e);return D.useEffect(()=>{t.current=e}),D.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}const gOe=()=>{};function c4(e,t){const n=typeof t=="number"?t:t.delay,r=typeof t=="number"?!1:t.flushOnUnmount,i=Um(e),s=D.useRef(0),o=Object.assign(D.useCallback((...a)=>{window.clearTimeout(s.current);const u=()=>{s.current!==0&&(s.current=0,i(...a))};o.flush=u,s.current=window.setTimeout(u,n)},[i,n]),{flush:gOe});return D.useEffect(()=>()=>{window.clearTimeout(s.current),r&&o.flush()},[o,r]),o}const vee=["mousedown","touchstart"];function yOe(e,t,n){const r=D.useRef(null);return D.useEffect(()=>{const i=s=>{const{target:o}=s??{};if(Array.isArray(n)){const a=(o==null?void 0:o.hasAttribute("data-ignore-outside-clicks"))||!document.body.contains(o)&&o.tagName!=="HTML";n.every(l=>!!l&&!s.composedPath().includes(l))&&!a&&e()}else r.current&&!r.current.contains(o)&&e()};return(t||vee).forEach(s=>document.addEventListener(s,i)),()=>{(t||vee).forEach(s=>document.removeEventListener(s,i))}},[r,e,n]),r}function bOe(e,t){try{return e.addEventListener("change",t),()=>e.removeEventListener("change",t)}catch{return e.addListener(t),()=>e.removeListener(t)}}function vOe(e,t){return typeof window<"u"&&"matchMedia"in window?window.matchMedia(e).matches:!1}function xOe(e,t,{getInitialValueInEffect:n}={getInitialValueInEffect:!0}){const[r,i]=D.useState(n?t:vOe(e)),s=D.useRef(null);return D.useEffect(()=>{if("matchMedia"in window)return s.current=window.matchMedia(e),i(s.current.matches),bOe(s.current,o=>i(o.matches))},[e]),r}const N1=typeof document<"u"?D.useLayoutEffect:D.useEffect;function Nf(e,t){const n=D.useRef(!1);D.useEffect(()=>()=>{n.current=!1},[]),D.useEffect(()=>{if(n.current)return e();n.current=!0},t)}function mpe({opened:e,shouldReturnFocus:t=!0}){const n=D.useRef(null),r=()=>{var i;n.current&&"focus"in n.current&&typeof n.current.focus=="function"&&((i=n.current)==null||i.focus({preventScroll:!0}))};return Nf(()=>{let i=-1;const s=o=>{o.key==="Tab"&&window.clearTimeout(i)};return document.addEventListener("keydown",s),e?n.current=document.activeElement:t&&(i=window.setTimeout(r,10)),()=>{window.clearTimeout(i),document.removeEventListener("keydown",s)}},[e,t]),r}const wOe=/input|select|textarea|button|object/,gpe="a, input, select, textarea, button, object, [tabindex]";function EOe(e){return e.style.display==="none"}function _Oe(e){if(e.getAttribute("aria-hidden")||e.getAttribute("hidden")||e.getAttribute("type")==="hidden")return!1;let n=e;for(;n&&!(n===document.body||n.nodeType===11);){if(EOe(n))return!1;n=n.parentNode}return!0}function ype(e){let t=e.getAttribute("tabindex");return t===null&&(t=void 0),parseInt(t,10)}function R9(e){const t=e.nodeName.toLowerCase(),n=!Number.isNaN(ype(e));return(wOe.test(t)&&!e.disabled||e instanceof HTMLAnchorElement&&e.href||n)&&_Oe(e)}function bpe(e){const t=ype(e);return(Number.isNaN(t)||t>=0)&&R9(e)}function TOe(e){return Array.from(e.querySelectorAll(gpe)).filter(bpe)}function COe(e,t){const n=TOe(e);if(!n.length){t.preventDefault();return}const r=n[t.shiftKey?0:n.length-1],i=e.getRootNode();let s=r===i.activeElement||e===i.activeElement;const o=i.activeElement;if(o.tagName==="INPUT"&&o.getAttribute("type")==="radio"&&(s=n.filter(c=>c.getAttribute("type")==="radio"&&c.getAttribute("name")===o.getAttribute("name")).includes(r)),!s)return;t.preventDefault();const u=n[t.shiftKey?n.length-1:0];u&&u.focus()}function SOe(e=!0){const t=D.useRef(null),n=i=>{let s=i.querySelector("[data-autofocus]");if(!s){const o=Array.from(i.querySelectorAll(gpe));s=o.find(bpe)||o.find(R9)||null,!s&&R9(i)&&(s=i)}s&&s.focus({preventScroll:!0})},r=D.useCallback(i=>{e&&i!==null&&t.current!==i&&(i?(setTimeout(()=>{i.getRootNode()&&n(i)}),t.current=i):t.current=null)},[e]);return D.useEffect(()=>{if(!e)return;t.current&&setTimeout(()=>n(t.current));const i=s=>{s.key==="Tab"&&t.current&&COe(t.current,s)};return document.addEventListener("keydown",i),()=>document.removeEventListener("keydown",i)},[e]),r}const AOe=e=>(e+1)%1e6;function kOe(){const[,e]=D.useReducer(AOe,0);return e}const IOe=rr.useId||(()=>{});function ROe(){const e=IOe();return e?`mantine-${e.replace(/:/g,"")}`:""}function Ga(e){const t=ROe(),[n,r]=D.useState(t);return N1(()=>{r(Gv())},[]),typeof e=="string"?e:typeof window>"u"?t:n}function vpe(e,t,n){D.useEffect(()=>(window.addEventListener(e,t,n),()=>window.removeEventListener(e,t,n)),[e,t])}function SP(e,t){if(typeof e=="function")return e(t);typeof e=="object"&&e!==null&&"current"in e&&(e.current=t)}function xpe(...e){const t=new Map;return n=>{if(e.forEach(r=>{const i=SP(r,n);i&&t.set(r,i)}),t.size>0)return()=>{e.forEach(r=>{const i=t.get(r);i?i():SP(r,null)}),t.clear()}}}function Rs(...e){return D.useCallback(xpe(...e),e)}function DOe(e,t,n="ltr"){const r=D.useRef(null),i=D.useRef(!1),s=D.useRef(!1),o=D.useRef(0),[a,u]=D.useState(!1);return D.useEffect(()=>{i.current=!0},[]),D.useEffect(()=>{var b,w;const l=({x:E,y:_})=>{cancelAnimationFrame(o.current),o.current=requestAnimationFrame(()=>{if(i.current&&r.current){r.current.style.userSelect="none";const C=r.current.getBoundingClientRect();if(C.width&&C.height){const S=sf((E-C.left)/C.width,0,1);e({x:n==="ltr"?S:1-S,y:sf((_-C.top)/C.height,0,1)})}}})},c=()=>{document.addEventListener("mousemove",m),document.addEventListener("mouseup",h),document.addEventListener("touchmove",v),document.addEventListener("touchend",h)},d=()=>{document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",h),document.removeEventListener("touchmove",v),document.removeEventListener("touchend",h)},f=()=>{!s.current&&i.current&&(s.current=!0,typeof(t==null?void 0:t.onScrubStart)=="function"&&t.onScrubStart(),u(!0),c())},h=()=>{s.current&&i.current&&(s.current=!1,u(!1),d(),setTimeout(()=>{typeof(t==null?void 0:t.onScrubEnd)=="function"&&t.onScrubEnd()},0))},p=E=>{f(),E.preventDefault(),m(E)},m=E=>l({x:E.clientX,y:E.clientY}),y=E=>{E.cancelable&&E.preventDefault(),f(),v(E)},v=E=>{E.cancelable&&E.preventDefault(),l({x:E.changedTouches[0].clientX,y:E.changedTouches[0].clientY})};return(b=r.current)==null||b.addEventListener("mousedown",p),(w=r.current)==null||w.addEventListener("touchstart",y,{passive:!1}),()=>{r.current&&(r.current.removeEventListener("mousedown",p),r.current.removeEventListener("touchstart",y))}},[n,e]),{ref:r,active:a}}function no({value:e,defaultValue:t,finalValue:n,onChange:r=()=>{}}){const[i,s]=D.useState(t!==void 0?t:n),o=(a,...u)=>{s(a),r==null||r(a,...u)};return e!==void 0?[e,r,!0]:[i,o,!1]}function d4(e,t){return xOe("(prefers-reduced-motion: reduce)",e,t)}const POe={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};function _w(e){const t=D.useRef(0),n=D.useRef(null),[r,i]=D.useState(POe),s=D.useMemo(()=>typeof window<"u"?new ResizeObserver(o=>{const a=o[0];a&&(cancelAnimationFrame(t.current),t.current=requestAnimationFrame(()=>{n.current&&i(a.contentRect)}))}):null,[]);return D.useEffect(()=>(n.current&&(s==null||s.observe(n.current,e)),()=>{s==null||s.disconnect(),t.current&&cancelAnimationFrame(t.current)}),[n.current]),[n,r]}function NOe(e){const[t,{width:n,height:r}]=_w(e);return{ref:t,width:n,height:r}}function Xz(e=!1,t){const{onOpen:n,onClose:r}=t||{},[i,s]=D.useState(e),o=D.useCallback(()=>{s(l=>l||(n==null||n(),!0))},[n]),a=D.useCallback(()=>{s(l=>l&&(r==null||r(),!1))},[r]),u=D.useCallback(()=>{i?a():o()},[a,o,i]);return[i,{open:o,close:a,toggle:u}]}function OOe(e){const t=D.useRef(void 0);return D.useEffect(()=>{t.current=e},[e]),t.current}function $Oe(e,t){const n=Um(e),r=D.useRef(null),i=D.useRef(null),s=D.useRef(!0),o=D.useRef(t),a=D.useRef(-1),u=()=>window.clearTimeout(a.current),l=D.useCallback((...f)=>{n(...f),r.current=f,i.current=f,s.current=!1},[n]),c=D.useCallback(()=>{r.current&&r.current!==i.current?(l(...r.current),a.current=window.setTimeout(c,o.current)):s.current=!0},[l]),d=D.useCallback((...f)=>{s.current?(l(...f),a.current=window.setTimeout(c,o.current)):r.current=f},[l,c]);return D.useEffect(()=>{o.current=t},[t]),[d,u]}function MOe(e,t){const[n,r]=D.useState(e),[i,s]=$Oe(r,t);return D.useEffect(()=>s,[]),[n,i]}function LOe(e,t){window.dispatchEvent(new CustomEvent(e,{detail:t}))}function FOe(e){function t(r){const i=Object.keys(r).reduce((s,o)=>(s[`${e}:${o}`]=a=>r[o](a.detail),s),{});N1(()=>(Object.keys(i).forEach(s=>{window.removeEventListener(s,i[s]),window.addEventListener(s,i[s])}),()=>Object.keys(i).forEach(s=>{window.removeEventListener(s,i[s])})),[i])}function n(r){return(...i)=>LOe(`${e}:${String(r)}`,i[0])}return[t,n]}var BOe={};function jOe(){return typeof process<"u"&&BOe?"production":"development"}function xee(e,t){return t.length===0?e:t.reduce((n,r)=>Math.abs(r-e)<Math.abs(n-e)?r:n)}function f4(e){var n;const t=rr.version;return typeof rr.version!="string"||t.startsWith("18.")?e==null?void 0:e.ref:(n=e==null?void 0:e.props)==null?void 0:n.ref}function wpe(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=wpe(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function qi(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=wpe(e))&&(r&&(r+=" "),r+=t);return r}const zOe={};function UOe(e){const t={};return e.forEach(n=>{Object.entries(n).forEach(([r,i])=>{t[r]?t[r]=qi(t[r],i):t[r]=i})}),t}function h4({theme:e,classNames:t,props:n,stylesCtx:r}){const s=(Array.isArray(t)?t:[t]).map(o=>typeof o=="function"?o(e,n,r):o||zOe);return UOe(s)}function AP({theme:e,styles:t,props:n,stylesCtx:r}){return(Array.isArray(t)?t:[t]).reduce((s,o)=>typeof o=="function"?{...s,...o(e,n,r)}:{...s,...o},{})}const Epe=D.createContext(null);function J0(){const e=D.useContext(Epe);if(!e)throw new Error("[@mantine/core] MantineProvider was not found in tree");return e}function VOe(){return J0().cssVariablesResolver}function HOe(){return J0().classNamesPrefix}function Qz(){return J0().getStyleNonce}function qOe(){return J0().withStaticClasses}function WOe(){return J0().headless}function GOe(){var e;return(e=J0().stylesTransform)==null?void 0:e.sx}function YOe(){var e;return(e=J0().stylesTransform)==null?void 0:e.styles}function KOe(e){return/^#?([0-9A-F]{3}){1,2}([0-9A-F]{2})?$/i.test(e)}function XOe(e){let t=e.replace("#","");if(t.length===3){const o=t.split("");t=[o[0],o[0],o[1],o[1],o[2],o[2]].join("")}if(t.length===8){const o=parseInt(t.slice(6,8),16)/255;return{r:parseInt(t.slice(0,2),16),g:parseInt(t.slice(2,4),16),b:parseInt(t.slice(4,6),16),a:o}}const n=parseInt(t,16),r=n>>16&255,i=n>>8&255,s=n&255;return{r,g:i,b:s,a:1}}function QOe(e){const[t,n,r,i]=e.replace(/[^0-9,./]/g,"").split(/[/,]/).map(Number);return{r:t,g:n,b:r,a:i||1}}function JOe(e){const t=/^hsla?\(\s*(\d+)\s*,\s*(\d+%)\s*,\s*(\d+%)\s*(,\s*(0?\.\d+|\d+(\.\d+)?))?\s*\)$/i,n=e.match(t);if(!n)return{r:0,g:0,b:0,a:1};const r=parseInt(n[1],10),i=parseInt(n[2],10)/100,s=parseInt(n[3],10)/100,o=n[5]?parseFloat(n[5]):void 0,a=(1-Math.abs(2*s-1))*i,u=r/60,l=a*(1-Math.abs(u%2-1)),c=s-a/2;let d,f,h;return u>=0&&u<1?(d=a,f=l,h=0):u>=1&&u<2?(d=l,f=a,h=0):u>=2&&u<3?(d=0,f=a,h=l):u>=3&&u<4?(d=0,f=l,h=a):u>=4&&u<5?(d=l,f=0,h=a):(d=a,f=0,h=l),{r:Math.round((d+c)*255),g:Math.round((f+c)*255),b:Math.round((h+c)*255),a:o||1}}function Jz(e){return KOe(e)?XOe(e):e.startsWith("rgb")?QOe(e):e.startsWith("hsl")?JOe(e):{r:0,g:0,b:0,a:1}}function Rk(e,t){if(e.startsWith("var("))return`color-mix(in srgb, ${e}, black ${t*100}%)`;const{r:n,g:r,b:i,a:s}=Jz(e),o=1-t,a=u=>Math.round(u*o);return`rgba(${a(n)}, ${a(r)}, ${a(i)}, ${s})`}function T2(e,t){return typeof e.primaryShade=="number"?e.primaryShade:t==="dark"?e.primaryShade.dark:e.primaryShade.light}function VM(e){return e<=.03928?e/12.92:((e+.055)/1.055)**2.4}function ZOe(e){const t=e.match(/oklch\((.*?)%\s/);return t?parseFloat(t[1]):null}function e6e(e){if(e.startsWith("oklch("))return(ZOe(e)||0)/100;const{r:t,g:n,b:r}=Jz(e),i=t/255,s=n/255,o=r/255,a=VM(i),u=VM(s),l=VM(o);return .2126*a+.7152*u+.0722*l}function s_(e,t=.179){return e.startsWith("var(")?!1:e6e(e)>t}function Qf({color:e,theme:t,colorScheme:n}){if(typeof e!="string")throw new Error(`[@mantine/core] Failed to parse color. Expected color to be a string, instead got ${typeof e}`);if(e==="bright")return{color:e,value:n==="dark"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:s_(n==="dark"?t.white:t.black,t.luminanceThreshold),variable:"--mantine-color-bright"};if(e==="dimmed")return{color:e,value:n==="dark"?t.colors.dark[2]:t.colors.gray[7],shade:void 0,isThemeColor:!1,isLight:s_(n==="dark"?t.colors.dark[2]:t.colors.gray[6],t.luminanceThreshold),variable:"--mantine-color-dimmed"};if(e==="white"||e==="black")return{color:e,value:e==="white"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:s_(e==="white"?t.white:t.black,t.luminanceThreshold),variable:`--mantine-color-${e}`};const[r,i]=e.split("."),s=i?Number(i):void 0,o=r in t.colors;if(o){const a=s!==void 0?t.colors[r][s]:t.colors[r][T2(t,n||"light")];return{color:r,value:a,shade:s,isThemeColor:o,isLight:s_(a,t.luminanceThreshold),variable:i?`--mantine-color-${r}-${s}`:`--mantine-color-${r}-filled`}}return{color:e,value:e,isThemeColor:o,isLight:s_(e,t.luminanceThreshold),shade:s,variable:void 0}}function Vr(e,t){const n=Qf({color:e||t.primaryColor,theme:t});return n.variable?`var(${n.variable})`:e}function D9(e,t){const n={from:(e==null?void 0:e.from)||t.defaultGradient.from,to:(e==null?void 0:e.to)||t.defaultGradient.to,deg:(e==null?void 0:e.deg)||t.defaultGradient.deg||0},r=Vr(n.from,t),i=Vr(n.to,t);return`linear-gradient(${n.deg}deg, ${r} 0%, ${i} 100%)`}function Xd(e,t){if(typeof e!="string"||t>1||t<0)return"rgba(0, 0, 0, 1)";if(e.startsWith("var(")){const s=(1-t)*100;return`color-mix(in srgb, ${e}, transparent ${s}%)`}if(e.startsWith("oklch"))return e.includes("/")?e.replace(/\/\s*[\d.]+\s*\)/,`/ ${t})`):e.replace(")",` / ${t})`);const{r:n,g:r,b:i}=Jz(e);return`rgba(${n}, ${r}, ${i}, ${t})`}const Zb=Xd,t6e=({color:e,theme:t,variant:n,gradient:r,autoContrast:i})=>{const s=Qf({color:e,theme:t}),o=typeof i=="boolean"?i:t.autoContrast;if(n==="filled"){const a=o&&s.isLight?"var(--mantine-color-black)":"var(--mantine-color-white)";return s.isThemeColor?s.shade===void 0?{background:`var(--mantine-color-${e}-filled)`,hover:`var(--mantine-color-${e}-filled-hover)`,color:a,border:`${$e(1)} solid transparent`}:{background:`var(--mantine-color-${s.color}-${s.shade})`,hover:`var(--mantine-color-${s.color}-${s.shade===9?8:s.shade+1})`,color:a,border:`${$e(1)} solid transparent`}:{background:e,hover:Rk(e,.1),color:a,border:`${$e(1)} solid transparent`}}if(n==="light"){if(s.isThemeColor){if(s.shade===void 0)return{background:`var(--mantine-color-${e}-light)`,hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${$e(1)} solid transparent`};const a=t.colors[s.color][s.shade];return{background:Xd(a,.1),hover:Xd(a,.12),color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${$e(1)} solid transparent`}}return{background:Xd(e,.1),hover:Xd(e,.12),color:e,border:`${$e(1)} solid transparent`}}if(n==="outline")return s.isThemeColor?s.shade===void 0?{background:"transparent",hover:`var(--mantine-color-${e}-outline-hover)`,color:`var(--mantine-color-${e}-outline)`,border:`${$e(1)} solid var(--mantine-color-${e}-outline)`}:{background:"transparent",hover:Xd(t.colors[s.color][s.shade],.05),color:`var(--mantine-color-${s.color}-${s.shade})`,border:`${$e(1)} solid var(--mantine-color-${s.color}-${s.shade})`}:{background:"transparent",hover:Xd(e,.05),color:e,border:`${$e(1)} solid ${e}`};if(n==="subtle"){if(s.isThemeColor){if(s.shade===void 0)return{background:"transparent",hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${$e(1)} solid transparent`};const a=t.colors[s.color][s.shade];return{background:"transparent",hover:Xd(a,.12),color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${$e(1)} solid transparent`}}return{background:"transparent",hover:Xd(e,.12),color:e,border:`${$e(1)} solid transparent`}}return n==="transparent"?s.isThemeColor?s.shade===void 0?{background:"transparent",hover:"transparent",color:`var(--mantine-color-${e}-light-color)`,border:`${$e(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${$e(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:e,border:`${$e(1)} solid transparent`}:n==="white"?s.isThemeColor?s.shade===void 0?{background:"var(--mantine-color-white)",hover:Rk(t.white,.01),color:`var(--mantine-color-${e}-filled)`,border:`${$e(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:Rk(t.white,.01),color:`var(--mantine-color-${s.color}-${s.shade})`,border:`${$e(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:Rk(t.white,.01),color:e,border:`${$e(1)} solid transparent`}:n==="gradient"?{background:D9(r,t),hover:D9(r,t),color:"var(--mantine-color-white)",border:"none"}:n==="default"?{background:"var(--mantine-color-default)",hover:"var(--mantine-color-default-hover)",color:"var(--mantine-color-default-color)",border:`${$e(1)} solid var(--mantine-color-default-border)`}:{}},n6e={dark:["#C9C9C9","#b8b8b8","#828282","#696969","#424242","#3b3b3b","#2e2e2e","#242424","#1f1f1f","#141414"],gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]},wee="-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",Zz={scale:1,fontSmoothing:!0,focusRing:"auto",white:"#fff",black:"#000",colors:n6e,primaryShade:{light:6,dark:8},primaryColor:"blue",variantColorResolver:t6e,autoContrast:!1,luminanceThreshold:.3,fontFamily:wee,fontFamilyMonospace:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace",respectReducedMotion:!1,cursorType:"default",defaultGradient:{from:"blue",to:"cyan",deg:45},defaultRadius:"sm",activeClassName:"mantine-active",focusClassName:"",headings:{fontFamily:wee,fontWeight:"700",textWrap:"wrap",sizes:{h1:{fontSize:$e(34),lineHeight:"1.3"},h2:{fontSize:$e(26),lineHeight:"1.35"},h3:{fontSize:$e(22),lineHeight:"1.4"},h4:{fontSize:$e(18),lineHeight:"1.45"},h5:{fontSize:$e(16),lineHeight:"1.5"},h6:{fontSize:$e(14),lineHeight:"1.5"}}},fontSizes:{xs:$e(12),sm:$e(14),md:$e(16),lg:$e(18),xl:$e(20)},lineHeights:{xs:"1.4",sm:"1.45",md:"1.55",lg:"1.6",xl:"1.65"},radius:{xs:$e(2),sm:$e(4),md:$e(8),lg:$e(16),xl:$e(32)},spacing:{xs:$e(10),sm:$e(12),md:$e(16),lg:$e(20),xl:$e(32)},breakpoints:{xs:"36em",sm:"48em",md:"62em",lg:"75em",xl:"88em"},shadows:{xs:`0 ${$e(1)} ${$e(3)} rgba(0, 0, 0, 0.05), 0 ${$e(1)} ${$e(2)} rgba(0, 0, 0, 0.1)`,sm:`0 ${$e(1)} ${$e(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${$e(10)} ${$e(15)} ${$e(-5)}, rgba(0, 0, 0, 0.04) 0 ${$e(7)} ${$e(7)} ${$e(-5)}`,md:`0 ${$e(1)} ${$e(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${$e(20)} ${$e(25)} ${$e(-5)}, rgba(0, 0, 0, 0.04) 0 ${$e(10)} ${$e(10)} ${$e(-5)}`,lg:`0 ${$e(1)} ${$e(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${$e(28)} ${$e(23)} ${$e(-7)}, rgba(0, 0, 0, 0.04) 0 ${$e(12)} ${$e(12)} ${$e(-7)}`,xl:`0 ${$e(1)} ${$e(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${$e(36)} ${$e(28)} ${$e(-7)}, rgba(0, 0, 0, 0.04) 0 ${$e(17)} ${$e(17)} ${$e(-7)}`},other:{},components:{}};function Eee(e){return e==="auto"||e==="dark"||e==="light"}function r6e({key:e="mantine-color-scheme-value"}={}){let t;return{get:n=>{if(typeof window>"u")return n;try{const r=window.localStorage.getItem(e);return Eee(r)?r:n}catch{return n}},set:n=>{try{window.localStorage.setItem(e,n)}catch(r){console.warn("[@mantine/core] Local storage color scheme manager was unable to save color scheme.",r)}},subscribe:n=>{t=r=>{r.storageArea===window.localStorage&&r.key===e&&Eee(r.newValue)&&n(r.newValue)},window.addEventListener("storage",t)},unsubscribe:()=>{window.removeEventListener("storage",t)},clear:()=>{window.localStorage.removeItem(e)}}}const i6e="[@mantine/core] MantineProvider: Invalid theme.primaryColor, it accepts only key of theme.colors, learn more  https://mantine.dev/theming/colors/#primary-color",_ee="[@mantine/core] MantineProvider: Invalid theme.primaryShade, it accepts only 0-9 integers or an object { light: 0-9, dark: 0-9 }";function HM(e){return e<0||e>9?!1:parseInt(e.toString(),10)===e}function Tee(e){if(!(e.primaryColor in e.colors))throw new Error(i6e);if(typeof e.primaryShade=="object"&&(!HM(e.primaryShade.dark)||!HM(e.primaryShade.light)))throw new Error(_ee);if(typeof e.primaryShade=="number"&&!HM(e.primaryShade))throw new Error(_ee)}function s6e(e,t){var r;if(!t)return Tee(e),e;const n=Wz(e,t);return t.fontFamily&&!((r=t.headings)!=null&&r.fontFamily)&&(n.headings.fontFamily=t.fontFamily),Tee(n),n}const eU=D.createContext(null),o6e=()=>D.useContext(eU)||Zz;function ss(){const e=D.useContext(eU);if(!e)throw new Error("@mantine/core: MantineProvider was not found in component tree, make sure you have it in your app");return e}function _pe({theme:e,children:t,inherit:n=!0}){const r=o6e(),i=D.useMemo(()=>s6e(n?r:Zz,e),[e,r,n]);return T.jsx(eU.Provider,{value:i,children:t})}_pe.displayName="@mantine/core/MantineThemeProvider";function a6e(){const e=ss(),t=Qz(),n=Ur(e.breakpoints).reduce((r,i)=>{const s=e.breakpoints[i].includes("px"),o=E2(e.breakpoints[i]),a=s?`${o-.1}px`:_P(o-.1),u=s?`${o}px`:_P(o);return`${r}@media (max-width: ${a}) {.mantine-visible-from-${i} {display: none !important;}}@media (min-width: ${u}) {.mantine-hidden-from-${i} {display: none !important;}}`},"");return T.jsx("style",{"data-mantine-styles":"classes",nonce:t==null?void 0:t(),dangerouslySetInnerHTML:{__html:n}})}function qM(e){return Object.entries(e).map(([t,n])=>`${t}: ${n};`).join("")}function o_(e,t){return(Array.isArray(e)?e:[e]).reduce((r,i)=>`${i}{${r}}`,t)}function u6e(e,t){const n=qM(e.variables),r=n?o_(t,n):"",i=qM(e.dark),s=qM(e.light),o=i?o_(t===":host"?`${t}([data-mantine-color-scheme="dark"])`:`${t}[data-mantine-color-scheme="dark"]`,i):"",a=s?o_(t===":host"?`${t}([data-mantine-color-scheme="light"])`:`${t}[data-mantine-color-scheme="light"]`,s):"";return`${r}${o}${a}`}function O1({color:e,theme:t,autoContrast:n}){return(typeof n=="boolean"?n:t.autoContrast)&&Qf({color:e||t.primaryColor,theme:t}).isLight?"var(--mantine-color-black)":"var(--mantine-color-white)"}function Cee(e,t){return O1({color:e.colors[e.primaryColor][T2(e,t)],theme:e,autoContrast:null})}function Dk({theme:e,color:t,colorScheme:n,name:r=t,withColorValues:i=!0}){if(!e.colors[t])return{};if(n==="light"){const a=T2(e,"light"),u={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-filled)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${a===9?8:a+1})`,[`--mantine-color-${r}-light`]:Zb(e.colors[t][a],.1),[`--mantine-color-${r}-light-hover`]:Zb(e.colors[t][a],.12),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline-hover`]:Zb(e.colors[t][a],.05)};return i?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...u}:u}const s=T2(e,"dark"),o={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-4)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${s})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${s===9?8:s+1})`,[`--mantine-color-${r}-light`]:Zb(e.colors[t][Math.max(0,s-2)],.15),[`--mantine-color-${r}-light-hover`]:Zb(e.colors[t][Math.max(0,s-2)],.2),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${Math.max(s-5,0)})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${Math.max(s-4,0)})`,[`--mantine-color-${r}-outline-hover`]:Zb(e.colors[t][Math.max(s-4,0)],.05)};return i?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...o}:o}function l6e(e){return!!e&&typeof e=="object"&&"mantine-virtual-color"in e}function ev(e,t,n){Ur(t).forEach(r=>Object.assign(e,{[`--mantine-${n}-${r}`]:t[r]}))}const Tpe=e=>{const t=T2(e,"light"),n=e.defaultRadius in e.radius?e.radius[e.defaultRadius]:$e(e.defaultRadius),r={variables:{"--mantine-scale":e.scale.toString(),"--mantine-cursor-type":e.cursorType,"--mantine-color-scheme":"light dark","--mantine-webkit-font-smoothing":e.fontSmoothing?"antialiased":"unset","--mantine-moz-font-smoothing":e.fontSmoothing?"grayscale":"unset","--mantine-color-white":e.white,"--mantine-color-black":e.black,"--mantine-line-height":e.lineHeights.md,"--mantine-font-family":e.fontFamily,"--mantine-font-family-monospace":e.fontFamilyMonospace,"--mantine-font-family-headings":e.headings.fontFamily,"--mantine-heading-font-weight":e.headings.fontWeight,"--mantine-heading-text-wrap":e.headings.textWrap,"--mantine-radius-default":n,"--mantine-primary-color-filled":`var(--mantine-color-${e.primaryColor}-filled)`,"--mantine-primary-color-filled-hover":`var(--mantine-color-${e.primaryColor}-filled-hover)`,"--mantine-primary-color-light":`var(--mantine-color-${e.primaryColor}-light)`,"--mantine-primary-color-light-hover":`var(--mantine-color-${e.primaryColor}-light-hover)`,"--mantine-primary-color-light-color":`var(--mantine-color-${e.primaryColor}-light-color)`},light:{"--mantine-primary-color-contrast":Cee(e,"light"),"--mantine-color-bright":"var(--mantine-color-black)","--mantine-color-text":e.black,"--mantine-color-body":e.white,"--mantine-color-error":"var(--mantine-color-red-6)","--mantine-color-placeholder":"var(--mantine-color-gray-5)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-${t})`,"--mantine-color-default":"var(--mantine-color-white)","--mantine-color-default-hover":"var(--mantine-color-gray-0)","--mantine-color-default-color":"var(--mantine-color-black)","--mantine-color-default-border":"var(--mantine-color-gray-4)","--mantine-color-dimmed":"var(--mantine-color-gray-6)"},dark:{"--mantine-primary-color-contrast":Cee(e,"dark"),"--mantine-color-bright":"var(--mantine-color-white)","--mantine-color-text":"var(--mantine-color-dark-0)","--mantine-color-body":"var(--mantine-color-dark-7)","--mantine-color-error":"var(--mantine-color-red-8)","--mantine-color-placeholder":"var(--mantine-color-dark-3)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-4)`,"--mantine-color-default":"var(--mantine-color-dark-6)","--mantine-color-default-hover":"var(--mantine-color-dark-5)","--mantine-color-default-color":"var(--mantine-color-white)","--mantine-color-default-border":"var(--mantine-color-dark-4)","--mantine-color-dimmed":"var(--mantine-color-dark-2)"}};ev(r.variables,e.breakpoints,"breakpoint"),ev(r.variables,e.spacing,"spacing"),ev(r.variables,e.fontSizes,"font-size"),ev(r.variables,e.lineHeights,"line-height"),ev(r.variables,e.shadows,"shadow"),ev(r.variables,e.radius,"radius"),e.colors[e.primaryColor].forEach((s,o)=>{r.variables[`--mantine-primary-color-${o}`]=`var(--mantine-color-${e.primaryColor}-${o})`}),Ur(e.colors).forEach(s=>{const o=e.colors[s];if(l6e(o)){Object.assign(r.light,Dk({theme:e,name:o.name,color:o.light,colorScheme:"light",withColorValues:!0})),Object.assign(r.dark,Dk({theme:e,name:o.name,color:o.dark,colorScheme:"dark",withColorValues:!0}));return}o.forEach((a,u)=>{r.variables[`--mantine-color-${s}-${u}`]=a}),Object.assign(r.light,Dk({theme:e,color:s,colorScheme:"light",withColorValues:!1})),Object.assign(r.dark,Dk({theme:e,color:s,colorScheme:"dark",withColorValues:!1}))});const i=e.headings.sizes;return Ur(i).forEach(s=>{r.variables[`--mantine-${s}-font-size`]=i[s].fontSize,r.variables[`--mantine-${s}-line-height`]=i[s].lineHeight,r.variables[`--mantine-${s}-font-weight`]=i[s].fontWeight||e.headings.fontWeight}),r};function c6e({theme:e,generator:t}){const n=Tpe(e),r=t==null?void 0:t(e);return r?Wz(n,r):n}const WM=Tpe(Zz);function d6e(e){const t={variables:{},light:{},dark:{}};return Ur(e.variables).forEach(n=>{WM.variables[n]!==e.variables[n]&&(t.variables[n]=e.variables[n])}),Ur(e.light).forEach(n=>{WM.light[n]!==e.light[n]&&(t.light[n]=e.light[n])}),Ur(e.dark).forEach(n=>{WM.dark[n]!==e.dark[n]&&(t.dark[n]=e.dark[n])}),t}function f6e(e){return`
  ${e}[data-mantine-color-scheme="dark"] { --mantine-color-scheme: dark; }
  ${e}[data-mantine-color-scheme="light"] { --mantine-color-scheme: light; }
`}function Cpe({cssVariablesSelector:e,deduplicateCssVariables:t}){const n=ss(),r=Qz(),i=VOe(),s=c6e({theme:n,generator:i}),o=e===":root"&&t,a=o?d6e(s):s,u=u6e(a,e);return u?T.jsx("style",{"data-mantine-styles":!0,nonce:r==null?void 0:r(),dangerouslySetInnerHTML:{__html:`${u}${o?"":f6e(e)}`}}):null}Cpe.displayName="@mantine/CssVariables";function h6e(){const e=console.error;console.error=(...t)=>{t.length>1&&typeof t[0]=="string"&&t[0].toLowerCase().includes("extra attributes from the server")&&typeof t[1]=="string"&&t[1].toLowerCase().includes("data-mantine-color-scheme")||e(...t)}}function tv(e,t){var i;const n=typeof window<"u"&&"matchMedia"in window&&window.matchMedia("(prefers-color-scheme: dark)").matches,r=e!=="auto"?e:n?"dark":"light";(i=t())==null||i.setAttribute("data-mantine-color-scheme",r)}function p6e({manager:e,defaultColorScheme:t,getRootElement:n,forceColorScheme:r}){const i=D.useRef(null),[s,o]=D.useState(()=>e.get(t)),a=r||s,u=D.useCallback(c=>{r||(tv(c,n),o(c),e.set(c))},[e.set,a,r]),l=D.useCallback(()=>{o(t),tv(t,n),e.clear()},[e.clear,t]);return D.useEffect(()=>(e.subscribe(u),e.unsubscribe),[e.subscribe,e.unsubscribe]),N1(()=>{tv(e.get(t),n)},[]),D.useEffect(()=>{var d;if(r)return tv(r,n),()=>{};r===void 0&&tv(s,n),typeof window<"u"&&"matchMedia"in window&&(i.current=window.matchMedia("(prefers-color-scheme: dark)"));const c=f=>{s==="auto"&&tv(f.matches?"dark":"light",n)};return(d=i.current)==null||d.addEventListener("change",c),()=>{var f;return(f=i.current)==null?void 0:f.removeEventListener("change",c)}},[s,r]),{colorScheme:a,setColorScheme:u,clearColorScheme:l}}function m6e({respectReducedMotion:e,getRootElement:t}){N1(()=>{var n;e&&((n=t())==null||n.setAttribute("data-respect-reduced-motion","true"))},[e])}h6e();function Spe({theme:e,children:t,getStyleNonce:n,withStaticClasses:r=!0,withGlobalClasses:i=!0,deduplicateCssVariables:s=!0,withCssVariables:o=!0,cssVariablesSelector:a=":root",classNamesPrefix:u="mantine",colorSchemeManager:l=r6e(),defaultColorScheme:c="light",getRootElement:d=()=>document.documentElement,cssVariablesResolver:f,forceColorScheme:h,stylesTransform:p}){const{colorScheme:m,setColorScheme:y,clearColorScheme:v}=p6e({defaultColorScheme:c,forceColorScheme:h,manager:l,getRootElement:d});return m6e({respectReducedMotion:(e==null?void 0:e.respectReducedMotion)||!1,getRootElement:d}),T.jsx(Epe.Provider,{value:{colorScheme:m,setColorScheme:y,clearColorScheme:v,getRootElement:d,classNamesPrefix:u,getStyleNonce:n,cssVariablesResolver:f,cssVariablesSelector:a,withStaticClasses:r,stylesTransform:p},children:T.jsxs(_pe,{theme:e,children:[o&&T.jsx(Cpe,{cssVariablesSelector:a,deduplicateCssVariables:s}),i&&T.jsx(a6e,{}),t]})})}Spe.displayName="@mantine/core/MantineProvider";function $1({classNames:e,styles:t,props:n,stylesCtx:r}){const i=ss();return{resolvedClassNames:h4({theme:i,classNames:e,props:n,stylesCtx:r||void 0}),resolvedStyles:AP({theme:i,styles:t,props:n,stylesCtx:r||void 0})}}const g6e={always:"mantine-focus-always",auto:"mantine-focus-auto",never:"mantine-focus-never"};function y6e({theme:e,options:t,unstyled:n}){return qi((t==null?void 0:t.focusable)&&!n&&(e.focusClassName||g6e[e.focusRing]),(t==null?void 0:t.active)&&!n&&e.activeClassName)}function b6e({selector:e,stylesCtx:t,options:n,props:r,theme:i}){return h4({theme:i,classNames:n==null?void 0:n.classNames,props:(n==null?void 0:n.props)||r,stylesCtx:t})[e]}function See({selector:e,stylesCtx:t,theme:n,classNames:r,props:i}){return h4({theme:n,classNames:r,props:i,stylesCtx:t})[e]}function v6e({rootSelector:e,selector:t,className:n}){return e===t?n:void 0}function x6e({selector:e,classes:t,unstyled:n}){return n?void 0:t[e]}function w6e({themeName:e,classNamesPrefix:t,selector:n,withStaticClass:r}){return r===!1?[]:e.map(i=>`${t}-${i}-${n}`)}function E6e({themeName:e,theme:t,selector:n,props:r,stylesCtx:i}){return e.map(s=>{var o,a;return(a=h4({theme:t,classNames:(o=t.components[s])==null?void 0:o.classNames,props:r,stylesCtx:i}))==null?void 0:a[n]})}function _6e({options:e,classes:t,selector:n,unstyled:r}){return e!=null&&e.variant&&!r?t[`${n}--${e.variant}`]:void 0}function T6e({theme:e,options:t,themeName:n,selector:r,classNamesPrefix:i,classNames:s,classes:o,unstyled:a,className:u,rootSelector:l,props:c,stylesCtx:d,withStaticClasses:f,headless:h,transformedStyles:p}){return qi(y6e({theme:e,options:t,unstyled:a||h}),E6e({theme:e,themeName:n,selector:r,props:c,stylesCtx:d}),_6e({options:t,classes:o,selector:r,unstyled:a}),See({selector:r,stylesCtx:d,theme:e,classNames:s,props:c}),See({selector:r,stylesCtx:d,theme:e,classNames:p,props:c}),b6e({selector:r,stylesCtx:d,options:t,props:c,theme:e}),v6e({rootSelector:l,selector:r,className:u}),x6e({selector:r,classes:o,unstyled:a||h}),f&&!h&&w6e({themeName:n,classNamesPrefix:i,selector:r,withStaticClass:t==null?void 0:t.withStaticClass}),t==null?void 0:t.className)}function C6e({theme:e,themeName:t,props:n,stylesCtx:r,selector:i}){return t.map(s=>{var o;return AP({theme:e,styles:(o=e.components[s])==null?void 0:o.styles,props:n,stylesCtx:r})[i]}).reduce((s,o)=>({...s,...o}),{})}function P9({style:e,theme:t}){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...P9({style:r,theme:t})}),{}):typeof e=="function"?e(t):e??{}}function S6e(e){return e.reduce((t,n)=>(n&&Object.keys(n).forEach(r=>{t[r]={...t[r],...Q0(n[r])}}),t),{})}function A6e({vars:e,varsResolver:t,theme:n,props:r,stylesCtx:i,selector:s,themeName:o,headless:a}){var u;return(u=S6e([a?{}:t==null?void 0:t(n,r,i),...o.map(l=>{var c,d,f;return(f=(d=(c=n.components)==null?void 0:c[l])==null?void 0:d.vars)==null?void 0:f.call(d,n,r,i)}),e==null?void 0:e(n,r,i)]))==null?void 0:u[s]}function k6e({theme:e,themeName:t,selector:n,options:r,props:i,stylesCtx:s,rootSelector:o,styles:a,style:u,vars:l,varsResolver:c,headless:d,withStylesTransform:f}){return{...!f&&C6e({theme:e,themeName:t,props:i,stylesCtx:s,selector:n}),...!f&&AP({theme:e,styles:a,props:i,stylesCtx:s})[n],...!f&&AP({theme:e,styles:r==null?void 0:r.styles,props:(r==null?void 0:r.props)||i,stylesCtx:s})[n],...A6e({theme:e,props:i,stylesCtx:s,vars:l,varsResolver:c,selector:n,themeName:t,headless:d}),...o===n?P9({style:u,theme:e}):null,...P9({style:r==null?void 0:r.style,theme:e})}}function I6e({props:e,stylesCtx:t,themeName:n}){var o;const r=ss(),i=(o=YOe())==null?void 0:o();return{getTransformedStyles:a=>i?[...a.map(l=>i(l,{props:e,theme:r,ctx:t})),...n.map(l=>{var c;return i((c=r.components[l])==null?void 0:c.styles,{props:e,theme:r,ctx:t})})].filter(Boolean):[],withStylesTransform:!!i}}function $t({name:e,classes:t,props:n,stylesCtx:r,className:i,style:s,rootSelector:o="root",unstyled:a,classNames:u,styles:l,vars:c,varsResolver:d}){const f=ss(),h=HOe(),p=qOe(),m=WOe(),y=(Array.isArray(e)?e:[e]).filter(w=>w),{withStylesTransform:v,getTransformedStyles:b}=I6e({props:n,stylesCtx:r,themeName:y});return(w,E)=>({className:T6e({theme:f,options:E,themeName:y,selector:w,classNamesPrefix:h,classNames:u,classes:t,unstyled:a,className:i,rootSelector:o,props:n,stylesCtx:r,withStaticClasses:p,headless:m,transformedStyles:b([E==null?void 0:E.styles,l])}),style:k6e({theme:f,themeName:y,selector:w,options:E,props:n,stylesCtx:r,rootSelector:o,styles:l,style:s,vars:c,varsResolver:d,headless:m,withStylesTransform:v})})}function Tw(e,t){return typeof e=="boolean"?e:t.autoContrast}function Me(e,t,n){var o;const r=ss(),i=(o=r.components[e])==null?void 0:o.defaultProps,s=typeof i=="function"?i(r):i;return{...t,...s,...Q0(n)}}function GM(e){return Ur(e).reduce((t,n)=>e[n]!==void 0?`${t}${aOe(n)}:${e[n]};`:t,"").trim()}function R6e({selector:e,styles:t,media:n,container:r}){const i=t?GM(t):"",s=Array.isArray(n)?n.map(a=>`@media${a.query}{${e}{${GM(a.styles)}}}`):[],o=Array.isArray(r)?r.map(a=>`@container ${a.query}{${e}{${GM(a.styles)}}}`):[];return`${i?`${e}{${i}}`:""}${s.join("")}${o.join("")}`.trim()}function M1(e){const t=Qz();return T.jsx("style",{"data-mantine-styles":"inline",nonce:t==null?void 0:t(),dangerouslySetInnerHTML:{__html:R6e(e)}})}function L1(e){const{m:t,mx:n,my:r,mt:i,mb:s,ml:o,mr:a,me:u,ms:l,p:c,px:d,py:f,pt:h,pb:p,pl:m,pr:y,pe:v,ps:b,bd:w,bg:E,c:_,opacity:C,ff:S,fz:k,fw:R,lts:N,ta:O,lh:F,fs:$,tt:z,td:q,w:W,miw:J,maw:K,h:Z,mih:U,mah:L,bgsz:Y,bgp:j,bgr:G,bga:X,pos:ne,top:pe,left:de,bottom:xe,right:Ce,inset:ue,display:se,flex:me,hiddenFrom:be,visibleFrom:Le,lightHidden:Ue,darkHidden:Ne,sx:je,...Ke}=e;return{styleProps:Q0({m:t,mx:n,my:r,mt:i,mb:s,ml:o,mr:a,me:u,ms:l,p:c,px:d,py:f,pt:h,pb:p,pl:m,pr:y,pe:v,ps:b,bd:w,bg:E,c:_,opacity:C,ff:S,fz:k,fw:R,lts:N,ta:O,lh:F,fs:$,tt:z,td:q,w:W,miw:J,maw:K,h:Z,mih:U,mah:L,bgsz:Y,bgp:j,bgr:G,bga:X,pos:ne,top:pe,left:de,bottom:xe,right:Ce,inset:ue,display:se,flex:me,hiddenFrom:be,visibleFrom:Le,lightHidden:Ue,darkHidden:Ne,sx:je}),rest:Ke}}const D6e={m:{type:"spacing",property:"margin"},mt:{type:"spacing",property:"marginTop"},mb:{type:"spacing",property:"marginBottom"},ml:{type:"spacing",property:"marginLeft"},mr:{type:"spacing",property:"marginRight"},ms:{type:"spacing",property:"marginInlineStart"},me:{type:"spacing",property:"marginInlineEnd"},mx:{type:"spacing",property:"marginInline"},my:{type:"spacing",property:"marginBlock"},p:{type:"spacing",property:"padding"},pt:{type:"spacing",property:"paddingTop"},pb:{type:"spacing",property:"paddingBottom"},pl:{type:"spacing",property:"paddingLeft"},pr:{type:"spacing",property:"paddingRight"},ps:{type:"spacing",property:"paddingInlineStart"},pe:{type:"spacing",property:"paddingInlineEnd"},px:{type:"spacing",property:"paddingInline"},py:{type:"spacing",property:"paddingBlock"},bd:{type:"border",property:"border"},bg:{type:"color",property:"background"},c:{type:"textColor",property:"color"},opacity:{type:"identity",property:"opacity"},ff:{type:"fontFamily",property:"fontFamily"},fz:{type:"fontSize",property:"fontSize"},fw:{type:"identity",property:"fontWeight"},lts:{type:"size",property:"letterSpacing"},ta:{type:"identity",property:"textAlign"},lh:{type:"lineHeight",property:"lineHeight"},fs:{type:"identity",property:"fontStyle"},tt:{type:"identity",property:"textTransform"},td:{type:"identity",property:"textDecoration"},w:{type:"spacing",property:"width"},miw:{type:"spacing",property:"minWidth"},maw:{type:"spacing",property:"maxWidth"},h:{type:"spacing",property:"height"},mih:{type:"spacing",property:"minHeight"},mah:{type:"spacing",property:"maxHeight"},bgsz:{type:"size",property:"backgroundSize"},bgp:{type:"identity",property:"backgroundPosition"},bgr:{type:"identity",property:"backgroundRepeat"},bga:{type:"identity",property:"backgroundAttachment"},pos:{type:"identity",property:"position"},top:{type:"size",property:"top"},left:{type:"size",property:"left"},bottom:{type:"size",property:"bottom"},right:{type:"size",property:"right"},inset:{type:"size",property:"inset"},display:{type:"identity",property:"display"},flex:{type:"identity",property:"flex"}};function tU(e,t){const n=Qf({color:e,theme:t});return n.color==="dimmed"?"var(--mantine-color-dimmed)":n.color==="bright"?"var(--mantine-color-bright)":n.variable?`var(${n.variable})`:n.color}function P6e(e,t){const n=Qf({color:e,theme:t});return n.isThemeColor&&n.shade===void 0?`var(--mantine-color-${n.color}-text)`:tU(e,t)}function N6e(e,t){if(typeof e=="number")return $e(e);if(typeof e=="string"){const[n,r,...i]=e.split(" ").filter(o=>o.trim()!=="");let s=`${$e(n)}`;return r&&(s+=` ${r}`),i.length>0&&(s+=` ${tU(i.join(" "),t)}`),s.trim()}return e}const Aee={text:"var(--mantine-font-family)",mono:"var(--mantine-font-family-monospace)",monospace:"var(--mantine-font-family-monospace)",heading:"var(--mantine-font-family-headings)",headings:"var(--mantine-font-family-headings)"};function O6e(e){return typeof e=="string"&&e in Aee?Aee[e]:e}const $6e=["h1","h2","h3","h4","h5","h6"];function M6e(e,t){return typeof e=="string"&&e in t.fontSizes?`var(--mantine-font-size-${e})`:typeof e=="string"&&$6e.includes(e)?`var(--mantine-${e}-font-size)`:typeof e=="number"||typeof e=="string"?$e(e):e}function L6e(e){return e}const F6e=["h1","h2","h3","h4","h5","h6"];function B6e(e,t){return typeof e=="string"&&e in t.lineHeights?`var(--mantine-line-height-${e})`:typeof e=="string"&&F6e.includes(e)?`var(--mantine-${e}-line-height)`:e}function j6e(e){return typeof e=="number"?$e(e):e}function z6e(e,t){if(typeof e=="number")return $e(e);if(typeof e=="string"){const n=e.replace("-","");if(!(n in t.spacing))return $e(e);const r=`--mantine-spacing-${n}`;return e.startsWith("-")?`calc(var(${r}) * -1)`:`var(${r})`}return e}const YM={color:tU,textColor:P6e,fontSize:M6e,spacing:z6e,identity:L6e,size:j6e,lineHeight:B6e,fontFamily:O6e,border:N6e};function kee(e){return e.replace("(min-width: ","").replace("em)","")}function U6e({media:e,...t}){const r=Object.keys(e).sort((i,s)=>Number(kee(i))-Number(kee(s))).map(i=>({query:i,styles:e[i]}));return{...t,media:r}}function V6e(e){if(typeof e!="object"||e===null)return!1;const t=Object.keys(e);return!(t.length===1&&t[0]==="base")}function H6e(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}function q6e(e){return typeof e=="object"&&e!==null?Ur(e).filter(t=>t!=="base"):[]}function W6e(e,t){return typeof e=="object"&&e!==null&&t in e?e[t]:e}function Ape({styleProps:e,data:t,theme:n}){return U6e(Ur(e).reduce((r,i)=>{if(i==="hiddenFrom"||i==="visibleFrom"||i==="sx")return r;const s=t[i],o=Array.isArray(s.property)?s.property:[s.property],a=H6e(e[i]);if(!V6e(e[i]))return o.forEach(l=>{r.inlineStyles[l]=YM[s.type](a,n)}),r;r.hasResponsiveStyles=!0;const u=q6e(e[i]);return o.forEach(l=>{a&&(r.styles[l]=YM[s.type](a,n)),u.forEach(c=>{const d=`(min-width: ${n.breakpoints[c]})`;r.media[d]={...r.media[d],[l]:YM[s.type](W6e(e[i],c),n)}})}),r},{hasResponsiveStyles:!1,styles:{},inlineStyles:{},media:{}}))}function UC(){return`__m__-${D.useId().replace(/:/g,"")}`}function nU(e,t){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...nU(r,t)}),{}):typeof e=="function"?e(t):e??{}}function kpe(e){return e.startsWith("data-")?e:`data-${e}`}function G6e(e){return Object.keys(e).reduce((t,n)=>{const r=e[n];return r===void 0||r===""||r===!1||r===null||(t[kpe(n)]=e[n]),t},{})}function Ipe(e){return e?typeof e=="string"?{[kpe(e)]:!0}:Array.isArray(e)?[...e].reduce((t,n)=>({...t,...Ipe(n)}),{}):G6e(e):null}function N9(e,t){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...N9(r,t)}),{}):typeof e=="function"?e(t):e??{}}function Y6e({theme:e,style:t,vars:n,styleProps:r}){const i=N9(t,e),s=N9(n,e);return{...i,...s,...r}}const Rpe=D.forwardRef(({component:e,style:t,__vars:n,className:r,variant:i,mod:s,size:o,hiddenFrom:a,visibleFrom:u,lightHidden:l,darkHidden:c,renderRoot:d,__size:f,...h},p)=>{var k;const m=ss(),y=e||"div",{styleProps:v,rest:b}=L1(h),w=GOe(),E=(k=w==null?void 0:w())==null?void 0:k(v.sx),_=UC(),C=Ape({styleProps:v,theme:m,data:D6e}),S={ref:p,style:Y6e({theme:m,style:t,vars:n,styleProps:C.inlineStyles}),className:qi(r,E,{[_]:C.hasResponsiveStyles,"mantine-light-hidden":l,"mantine-dark-hidden":c,[`mantine-hidden-from-${a}`]:a,[`mantine-visible-from-${u}`]:u}),"data-variant":i,"data-size":hpe(o)?void 0:o||void 0,size:f,...Ipe(s),...b};return T.jsxs(T.Fragment,{children:[C.hasResponsiveStyles&&T.jsx(M1,{selector:`.${_}`,styles:C.styles,media:C.media}),typeof d=="function"?d(S):T.jsx(y,{...S})]})});Rpe.displayName="@mantine/core/Box";const Se=Rpe;function Dpe(e){return e}function K6e(e){const t=e;return n=>{const r=D.forwardRef((i,s)=>T.jsx(t,{...n,...i,ref:s}));return r.extend=t.extend,r.displayName=`WithProps(${t.displayName})`,r}}function tt(e){const t=D.forwardRef(e);return t.extend=Dpe,t.withProps=n=>{const r=D.forwardRef((i,s)=>T.jsx(t,{...n,...i,ref:s}));return r.extend=t.extend,r.displayName=`WithProps(${t.displayName})`,r},t}function os(e){const t=D.forwardRef(e);return t.withProps=n=>{const r=D.forwardRef((i,s)=>T.jsx(t,{...n,...i,ref:s}));return r.extend=t.extend,r.displayName=`WithProps(${t.displayName})`,r},t.extend=Dpe,t}const X6e=D.createContext({dir:"ltr",toggleDirection:()=>{},setDirection:()=>{}});function Up(){return D.useContext(X6e)}var p4=spe();const eT=Tl(p4);function Q6e(e){if(!e||typeof e=="string")return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function KM(e){return e!=null&&e.current?e.current.scrollHeight:"auto"}const a_=typeof window<"u"&&window.requestAnimationFrame;function J6e({transitionDuration:e,transitionTimingFunction:t="ease",onTransitionEnd:n=()=>{},opened:r}){const i=D.useRef(null),s=0,o={display:"none",height:0,overflow:"hidden"},[a,u]=D.useState(r?{}:o),l=p=>{p4.flushSync(()=>u(p))},c=p=>{l(m=>({...m,...p}))};function d(p){const m=e||Q6e(p);return{transition:`height ${m}ms ${t}, opacity ${m}ms ${t}`}}Nf(()=>{typeof a_=="function"&&a_(r?()=>{c({willChange:"height",display:"block",overflow:"hidden"}),a_(()=>{const p=KM(i);c({...d(p),height:p})})}:()=>{const p=KM(i);c({...d(p),willChange:"height",height:p}),a_(()=>c({height:s,overflow:"hidden"}))})},[r]);const f=p=>{if(!(p.target!==i.current||p.propertyName!=="height"))if(r){const m=KM(i);m===a.height?l({}):c({height:m}),n()}else a.height===s&&(l(o),n())};function h({style:p={},refKey:m="ref",...y}={}){const v=y[m];return{"aria-hidden":!r,...y,[m]:xpe(i,v),onTransitionEnd:f,style:{boxSizing:"border-box",...p,...a}}}return h}const Z6e={transitionDuration:200,transitionTimingFunction:"ease",animateOpacity:!0},m4=tt((e,t)=>{const{children:n,in:r,transitionDuration:i,transitionTimingFunction:s,style:o,onTransitionEnd:a,animateOpacity:u,...l}=Me("Collapse",Z6e,e),c=ss(),d=d4(),h=(c.respectReducedMotion?d:!1)?0:i,p=J6e({opened:r,transitionDuration:h,transitionTimingFunction:s,onTransitionEnd:a});return h===0?r?T.jsx(Se,{...l,children:n}):null:T.jsx(Se,{...p({style:{opacity:r||!u?1:0,transition:u?`opacity ${h}ms ${s}`:"none",...nU(o,c)},ref:t,...l}),children:n})});m4.displayName="@mantine/core/Collapse";const[e$e,uc]=Is("ScrollArea.Root component was not found in tree");function wx(e,t){const n=Um(t);N1(()=>{let r=0;if(e){const i=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return i.observe(e),()=>{window.cancelAnimationFrame(r),i.unobserve(e)}}},[e,n])}const t$e=D.forwardRef((e,t)=>{const{style:n,...r}=e,i=uc(),[s,o]=D.useState(0),[a,u]=D.useState(0),l=!!(s&&a);return wx(i.scrollbarX,()=>{var d;const c=((d=i.scrollbarX)==null?void 0:d.offsetHeight)||0;i.onCornerHeightChange(c),u(c)}),wx(i.scrollbarY,()=>{var d;const c=((d=i.scrollbarY)==null?void 0:d.offsetWidth)||0;i.onCornerWidthChange(c),o(c)}),l?T.jsx("div",{...r,ref:t,style:{...n,width:s,height:a}}):null}),n$e=D.forwardRef((e,t)=>{const n=uc(),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?T.jsx(t$e,{...e,ref:t}):null}),r$e={scrollHideDelay:1e3,type:"hover"},Ppe=D.forwardRef((e,t)=>{const n=Me("ScrollAreaRoot",r$e,e),{type:r,scrollHideDelay:i,scrollbars:s,...o}=n,[a,u]=D.useState(null),[l,c]=D.useState(null),[d,f]=D.useState(null),[h,p]=D.useState(null),[m,y]=D.useState(null),[v,b]=D.useState(0),[w,E]=D.useState(0),[_,C]=D.useState(!1),[S,k]=D.useState(!1),R=Rs(t,N=>u(N));return T.jsx(e$e,{value:{type:r,scrollHideDelay:i,scrollArea:a,viewport:l,onViewportChange:c,content:d,onContentChange:f,scrollbarX:h,onScrollbarXChange:p,scrollbarXEnabled:_,onScrollbarXEnabledChange:C,scrollbarY:m,onScrollbarYChange:y,scrollbarYEnabled:S,onScrollbarYEnabledChange:k,onCornerWidthChange:b,onCornerHeightChange:E},children:T.jsx(Se,{...o,ref:R,__vars:{"--sa-corner-width":s!=="xy"?"0px":`${v}px`,"--sa-corner-height":s!=="xy"?"0px":`${w}px`}})})});Ppe.displayName="@mantine/core/ScrollAreaRoot";function Npe(e,t){const n=e/t;return Number.isNaN(n)?0:n}function g4(e){const t=Npe(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function Ope(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function i$e(e,[t,n]){return Math.min(n,Math.max(t,e))}function Iee(e,t,n="ltr"){const r=g4(t),i=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,s=t.scrollbar.size-i,o=t.content-t.viewport,a=s-r,u=n==="ltr"?[0,o]:[o*-1,0],l=i$e(e,u);return Ope([0,o],[0,a])(l)}function s$e(e,t,n,r="ltr"){const i=g4(n),s=i/2,o=t||s,a=i-o,u=n.scrollbar.paddingStart+o,l=n.scrollbar.size-n.scrollbar.paddingEnd-a,c=n.content-n.viewport,d=r==="ltr"?[0,c]:[c*-1,0];return Ope([u,l],d)(e)}function $pe(e,t){return e>0&&e<t}function kP(e){return e?parseInt(e,10):0}function $y(e,t,{checkForDefaultPrevented:n=!0}={}){return r=>{e==null||e(r),(n===!1||!r.defaultPrevented)&&(t==null||t(r))}}const[o$e,Mpe]=Is("ScrollAreaScrollbar was not found in tree"),Lpe=D.forwardRef((e,t)=>{const{sizes:n,hasThumb:r,onThumbChange:i,onThumbPointerUp:s,onThumbPointerDown:o,onThumbPositionChange:a,onDragScroll:u,onWheelScroll:l,onResize:c,...d}=e,f=uc(),[h,p]=D.useState(null),m=Rs(t,k=>p(k)),y=D.useRef(null),v=D.useRef(""),{viewport:b}=f,w=n.content-n.viewport,E=Um(l),_=Um(a),C=c4(c,10),S=k=>{if(y.current){const R=k.clientX-y.current.left,N=k.clientY-y.current.top;u({x:R,y:N})}};return D.useEffect(()=>{const k=R=>{const N=R.target;(h==null?void 0:h.contains(N))&&E(R,w)};return document.addEventListener("wheel",k,{passive:!1}),()=>document.removeEventListener("wheel",k,{passive:!1})},[b,h,w,E]),D.useEffect(_,[n,_]),wx(h,C),wx(f.content,C),T.jsx(o$e,{value:{scrollbar:h,hasThumb:r,onThumbChange:Um(i),onThumbPointerUp:Um(s),onThumbPositionChange:_,onThumbPointerDown:Um(o)},children:T.jsx("div",{...d,ref:m,"data-mantine-scrollbar":!0,style:{position:"absolute",...d.style},onPointerDown:$y(e.onPointerDown,k=>{k.preventDefault(),k.button===0&&(k.target.setPointerCapture(k.pointerId),y.current=h.getBoundingClientRect(),v.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",S(k))}),onPointerMove:$y(e.onPointerMove,S),onPointerUp:$y(e.onPointerUp,k=>{k.preventDefault();const R=k.target;R.hasPointerCapture(k.pointerId)&&R.releasePointerCapture(k.pointerId),document.body.style.webkitUserSelect=v.current,y.current=null})})})}),Fpe=D.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,style:i,...s}=e,o=uc(),[a,u]=D.useState(),l=D.useRef(null),c=Rs(t,l,o.onScrollbarXChange);return D.useEffect(()=>{l.current&&u(getComputedStyle(l.current))},[l]),T.jsx(Lpe,{"data-orientation":"horizontal",...s,ref:c,sizes:n,style:{...i,"--sa-thumb-width":`${g4(n)}px`},onThumbPointerDown:d=>e.onThumbPointerDown(d.x),onDragScroll:d=>e.onDragScroll(d.x),onWheelScroll:(d,f)=>{if(o.viewport){const h=o.viewport.scrollLeft+d.deltaX;e.onWheelScroll(h),$pe(h,f)&&d.preventDefault()}},onResize:()=>{l.current&&o.viewport&&a&&r({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:kP(a.paddingLeft),paddingEnd:kP(a.paddingRight)}})}})});Fpe.displayName="@mantine/core/ScrollAreaScrollbarX";const Bpe=D.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,style:i,...s}=e,o=uc(),[a,u]=D.useState(),l=D.useRef(null),c=Rs(t,l,o.onScrollbarYChange);return D.useEffect(()=>{l.current&&u(window.getComputedStyle(l.current))},[]),T.jsx(Lpe,{...s,"data-orientation":"vertical",ref:c,sizes:n,style:{"--sa-thumb-height":`${g4(n)}px`,...i},onThumbPointerDown:d=>e.onThumbPointerDown(d.y),onDragScroll:d=>e.onDragScroll(d.y),onWheelScroll:(d,f)=>{if(o.viewport){const h=o.viewport.scrollTop+d.deltaY;e.onWheelScroll(h),$pe(h,f)&&d.preventDefault()}},onResize:()=>{l.current&&o.viewport&&a&&r({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:kP(a.paddingTop),paddingEnd:kP(a.paddingBottom)}})}})});Bpe.displayName="@mantine/core/ScrollAreaScrollbarY";const y4=D.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,{dir:i}=Up(),s=uc(),o=D.useRef(null),a=D.useRef(0),[u,l]=D.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=Npe(u.viewport,u.content),d={...r,sizes:u,onSizesChange:l,hasThumb:c>0&&c<1,onThumbChange:h=>{o.current=h},onThumbPointerUp:()=>{a.current=0},onThumbPointerDown:h=>{a.current=h}},f=(h,p)=>s$e(h,a.current,u,p);return n==="horizontal"?T.jsx(Fpe,{...d,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const h=s.viewport.scrollLeft,p=Iee(h,u,i);o.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollLeft=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollLeft=f(h,i))}}):n==="vertical"?T.jsx(Bpe,{...d,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const h=s.viewport.scrollTop,p=Iee(h,u);u.scrollbar.size===0?o.current.style.setProperty("--thumb-opacity","0"):o.current.style.setProperty("--thumb-opacity","1"),o.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollTop=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollTop=f(h))}}):null});y4.displayName="@mantine/core/ScrollAreaScrollbarVisible";const rU=D.forwardRef((e,t)=>{const n=uc(),{forceMount:r,...i}=e,[s,o]=D.useState(!1),a=e.orientation==="horizontal",u=c4(()=>{if(n.viewport){const l=n.viewport.offsetWidth<n.viewport.scrollWidth,c=n.viewport.offsetHeight<n.viewport.scrollHeight;o(a?l:c)}},10);return wx(n.viewport,u),wx(n.content,u),r||s?T.jsx(y4,{"data-state":s?"visible":"hidden",...i,ref:t}):null});rU.displayName="@mantine/core/ScrollAreaScrollbarAuto";const jpe=D.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=uc(),[s,o]=D.useState(!1);return D.useEffect(()=>{const{scrollArea:a}=i;let u=0;if(a){const l=()=>{window.clearTimeout(u),o(!0)},c=()=>{u=window.setTimeout(()=>o(!1),i.scrollHideDelay)};return a.addEventListener("pointerenter",l),a.addEventListener("pointerleave",c),()=>{window.clearTimeout(u),a.removeEventListener("pointerenter",l),a.removeEventListener("pointerleave",c)}}},[i.scrollArea,i.scrollHideDelay]),n||s?T.jsx(rU,{"data-state":s?"visible":"hidden",...r,ref:t}):null});jpe.displayName="@mantine/core/ScrollAreaScrollbarHover";const a$e=D.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=uc(),s=e.orientation==="horizontal",[o,a]=D.useState("hidden"),u=c4(()=>a("idle"),100);return D.useEffect(()=>{if(o==="idle"){const l=window.setTimeout(()=>a("hidden"),i.scrollHideDelay);return()=>window.clearTimeout(l)}},[o,i.scrollHideDelay]),D.useEffect(()=>{const{viewport:l}=i,c=s?"scrollLeft":"scrollTop";if(l){let d=l[c];const f=()=>{const h=l[c];d!==h&&(a("scrolling"),u()),d=h};return l.addEventListener("scroll",f),()=>l.removeEventListener("scroll",f)}},[i.viewport,s,u]),n||o!=="hidden"?T.jsx(y4,{"data-state":o==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:$y(e.onPointerEnter,()=>a("interacting")),onPointerLeave:$y(e.onPointerLeave,()=>a("idle"))}):null}),O9=D.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=uc(),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:o}=i,a=e.orientation==="horizontal";return D.useEffect(()=>(a?s(!0):o(!0),()=>{a?s(!1):o(!1)}),[a,s,o]),i.type==="hover"?T.jsx(jpe,{...r,ref:t,forceMount:n}):i.type==="scroll"?T.jsx(a$e,{...r,ref:t,forceMount:n}):i.type==="auto"?T.jsx(rU,{...r,ref:t,forceMount:n}):i.type==="always"?T.jsx(y4,{...r,ref:t}):null});O9.displayName="@mantine/core/ScrollAreaScrollbar";function u$e(e,t=()=>{}){let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function i(){const s={left:e.scrollLeft,top:e.scrollTop},o=n.left!==s.left,a=n.top!==s.top;(o||a)&&t(),n=s,r=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(r)}const zpe=D.forwardRef((e,t)=>{const{style:n,...r}=e,i=uc(),s=Mpe(),{onThumbPositionChange:o}=s,a=Rs(t,c=>s.onThumbChange(c)),u=D.useRef(void 0),l=c4(()=>{u.current&&(u.current(),u.current=void 0)},100);return D.useEffect(()=>{const{viewport:c}=i;if(c){const d=()=>{if(l(),!u.current){const f=u$e(c,o);u.current=f,o()}};return o(),c.addEventListener("scroll",d),()=>c.removeEventListener("scroll",d)}},[i.viewport,l,o]),T.jsx("div",{"data-state":s.hasThumb?"visible":"hidden",...r,ref:a,style:{width:"var(--sa-thumb-width)",height:"var(--sa-thumb-height)",...n},onPointerDownCapture:$y(e.onPointerDownCapture,c=>{const f=c.target.getBoundingClientRect(),h=c.clientX-f.left,p=c.clientY-f.top;s.onThumbPointerDown({x:h,y:p})}),onPointerUp:$y(e.onPointerUp,s.onThumbPointerUp)})});zpe.displayName="@mantine/core/ScrollAreaThumb";const $9=D.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Mpe();return n||i.hasThumb?T.jsx(zpe,{ref:t,...r}):null});$9.displayName="@mantine/core/ScrollAreaThumb";const Upe=D.forwardRef(({children:e,style:t,...n},r)=>{const i=uc(),s=Rs(r,i.onViewportChange);return T.jsx(Se,{...n,ref:s,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...t},children:T.jsx("div",{style:{minWidth:"100%",display:"table"},ref:i.onContentChange,children:e})})});Upe.displayName="@mantine/core/ScrollAreaViewport";var iU={root:"m_d57069b5",viewport:"m_c0783ff9",viewportInner:"m_f8f631dd",scrollbar:"m_c44ba933",thumb:"m_d8b5e363",corner:"m_21657268"};const Vpe={scrollHideDelay:1e3,type:"hover",scrollbars:"xy"},l$e=(e,{scrollbarSize:t})=>({root:{"--scrollarea-scrollbar-size":$e(t)}}),xp=tt((e,t)=>{const n=Me("ScrollArea",Vpe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,scrollbarSize:u,vars:l,type:c,scrollHideDelay:d,viewportProps:f,viewportRef:h,onScrollPositionChange:p,children:m,offsetScrollbars:y,scrollbars:v,onBottomReached:b,onTopReached:w,...E}=n,[_,C]=D.useState(!1),S=$t({name:"ScrollArea",props:n,classes:iU,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:l$e});return T.jsxs(Ppe,{type:c==="never"?"always":c,scrollHideDelay:d,ref:t,scrollbars:v,...S("root"),...E,children:[T.jsx(Upe,{...f,...S("viewport",{style:f==null?void 0:f.style}),ref:h,"data-offset-scrollbars":y===!0?"xy":y||void 0,"data-scrollbars":v||void 0,onScroll:k=>{var F;(F=f==null?void 0:f.onScroll)==null||F.call(f,k),p==null||p({x:k.currentTarget.scrollLeft,y:k.currentTarget.scrollTop});const{scrollTop:R,scrollHeight:N,clientHeight:O}=k.currentTarget;R-(N-O)>=0&&(b==null||b()),R===0&&(w==null||w())},children:m}),(v==="xy"||v==="x")&&T.jsx(O9,{...S("scrollbar"),orientation:"horizontal","data-hidden":c==="never"||void 0,forceMount:!0,onMouseEnter:()=>C(!0),onMouseLeave:()=>C(!1),children:T.jsx($9,{...S("thumb")})}),(v==="xy"||v==="y")&&T.jsx(O9,{...S("scrollbar"),orientation:"vertical","data-hidden":c==="never"||void 0,forceMount:!0,onMouseEnter:()=>C(!0),onMouseLeave:()=>C(!1),children:T.jsx($9,{...S("thumb")})}),T.jsx(n$e,{...S("corner"),"data-hovered":_||void 0,"data-hidden":c==="never"||void 0})]})});xp.displayName="@mantine/core/ScrollArea";const sU=tt((e,t)=>{const{children:n,classNames:r,styles:i,scrollbarSize:s,scrollHideDelay:o,type:a,dir:u,offsetScrollbars:l,viewportRef:c,onScrollPositionChange:d,unstyled:f,variant:h,viewportProps:p,scrollbars:m,style:y,vars:v,onBottomReached:b,onTopReached:w,...E}=Me("ScrollAreaAutosize",Vpe,e);return T.jsx(Se,{...E,ref:t,style:[{display:"flex",overflow:"auto"},y],children:T.jsx(Se,{style:{display:"flex",flexDirection:"column",flex:1},children:T.jsx(xp,{classNames:r,styles:i,scrollHideDelay:o,scrollbarSize:s,type:a,dir:u,offsetScrollbars:l,viewportRef:c,onScrollPositionChange:d,unstyled:f,variant:h,viewportProps:p,vars:v,scrollbars:m,onBottomReached:b,onTopReached:w,children:n})})})});xp.classes=iU;sU.displayName="@mantine/core/ScrollAreaAutosize";sU.classes=iU;xp.Autosize=sU;var Hpe={root:"m_87cf2631"};const c$e={__staticSelector:"UnstyledButton"},ku=os((e,t)=>{const n=Me("UnstyledButton",c$e,e),{className:r,component:i="button",__staticSelector:s,unstyled:o,classNames:a,styles:u,style:l,...c}=n,d=$t({name:s,props:n,classes:Hpe,className:r,style:l,classNames:a,styles:u,unstyled:o});return T.jsx(Se,{...d("root",{focusable:!0}),component:i,ref:t,type:i==="button"?"button":void 0,...c})});ku.classes=Hpe;ku.displayName="@mantine/core/UnstyledButton";var qpe={root:"m_515a97f8"};const d$e={},oU=tt((e,t)=>{const n=Me("VisuallyHidden",d$e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,...l}=n,c=$t({name:"VisuallyHidden",classes:qpe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a});return T.jsx(Se,{component:"span",ref:t,...c("root"),...l})});oU.classes=qpe;oU.displayName="@mantine/core/VisuallyHidden";var Wpe={root:"m_1b7284a3"};const f$e={},h$e=(e,{radius:t,shadow:n})=>({root:{"--paper-radius":t===void 0?void 0:Dr(t),"--paper-shadow":Yz(n)}}),Cw=os((e,t)=>{const n=Me("Paper",f$e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,withBorder:u,vars:l,radius:c,shadow:d,variant:f,mod:h,...p}=n,m=$t({name:"Paper",props:n,classes:Wpe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:h$e});return T.jsx(Se,{ref:t,mod:[{"data-with-border":u},h],...m("root"),variant:f,...p})});Cw.classes=Wpe;Cw.displayName="@mantine/core/Paper";function b4(){return typeof window<"u"}function Gpe(e){return Ype(e)?(e.nodeName||"").toLowerCase():"#document"}function Sw(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function p$e(e){var t;return(t=(Ype(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Ype(e){return b4()?e instanceof Node||e instanceof Sw(e).Node:!1}function gu(e){return b4()?e instanceof Element||e instanceof Sw(e).Element:!1}function aU(e){return b4()?e instanceof HTMLElement||e instanceof Sw(e).HTMLElement:!1}function M9(e){return!b4()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Sw(e).ShadowRoot}function m$e(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Ree(e){return["html","body","#document"].includes(Gpe(e))}function g$e(e){return Sw(e).getComputedStyle(e)}function y$e(e){if(Gpe(e)==="html")return e;const t=e.assignedSlot||e.parentNode||M9(e)&&e.host||p$e(e);return M9(t)?t.host:t}function Dee(e){let t=e.activeElement;for(;((n=t)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;t=t.shadowRoot.activeElement}return t}function C2(e,t){if(!e||!t)return!1;const n=t.getRootNode==null?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&M9(n)){let r=t;for(;r;){if(e===r)return!0;r=r.parentNode||r.host}}return!1}function Kpe(){const e=navigator.userAgentData;return e!=null&&e.platform?e.platform:navigator.platform}function Xpe(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(t=>{let{brand:n,version:r}=t;return n+"/"+r}).join(" "):navigator.userAgent}function b$e(e){return w$e()?!1:!Pee()&&e.width===0&&e.height===0||Pee()&&e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"||e.width<1&&e.height<1&&e.pressure===0&&e.detail===0&&e.pointerType==="touch"}function v$e(){return/apple/i.test(navigator.vendor)}function Pee(){const e=/android/i;return e.test(Kpe())||e.test(Xpe())}function x$e(){return Kpe().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function w$e(){return Xpe().includes("jsdom/")}function L9(e,t){const n=["mouse","pen"];return n.push("",void 0),n.includes(e)}function E$e(e){return"nativeEvent"in e}function _$e(e){return e.matches("html,body")}function Ty(e){return(e==null?void 0:e.ownerDocument)||document}function XM(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return n.target!=null&&t.contains(n.target)}function Tv(e){return"composedPath"in e?e.composedPath()[0]:e.target}const T$e="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function C$e(e){return aU(e)&&e.matches(T$e)}const nl=Math.min,ra=Math.max,IP=Math.round,Pk=Math.floor,w0=e=>({x:e,y:e}),S$e={left:"right",right:"left",bottom:"top",top:"bottom"},A$e={start:"end",end:"start"};function F9(e,t,n){return ra(e,nl(t,n))}function wp(e,t){return typeof e=="function"?e(t):e}function ud(e){return e.split("-")[0]}function Aw(e){return e.split("-")[1]}function uU(e){return e==="x"?"y":"x"}function lU(e){return e==="y"?"height":"width"}function F1(e){return["top","bottom"].includes(ud(e))?"y":"x"}function cU(e){return uU(F1(e))}function k$e(e,t,n){n===void 0&&(n=!1);const r=Aw(e),i=cU(e),s=lU(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(o=RP(o)),[o,RP(o)]}function I$e(e){const t=RP(e);return[B9(e),t,B9(t)]}function B9(e){return e.replace(/start|end/g,t=>A$e[t])}function R$e(e,t,n){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:r:t?r:i;case"left":case"right":return t?s:o;default:return[]}}function D$e(e,t,n,r){const i=Aw(e);let s=R$e(ud(e),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),t&&(s=s.concat(s.map(B9)))),s}function RP(e){return e.replace(/left|right|bottom|top/g,t=>S$e[t])}function P$e(e){return{top:0,right:0,bottom:0,left:0,...e}}function dU(e){return typeof e!="number"?P$e(e):{top:e,right:e,bottom:e,left:e}}function Ex(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function Nee(e,t,n){let{reference:r,floating:i}=e;const s=F1(t),o=cU(t),a=lU(o),u=ud(t),l=s==="y",c=r.x+r.width/2-i.width/2,d=r.y+r.height/2-i.height/2,f=r[a]/2-i[a]/2;let h;switch(u){case"top":h={x:c,y:r.y-i.height};break;case"bottom":h={x:c,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:d};break;case"left":h={x:r.x-i.width,y:d};break;default:h={x:r.x,y:r.y}}switch(Aw(t)){case"start":h[o]-=f*(n&&l?-1:1);break;case"end":h[o]+=f*(n&&l?-1:1);break}return h}const N$e=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),u=await(o.isRTL==null?void 0:o.isRTL(t));let l=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:c,y:d}=Nee(l,r,u),f=r,h={},p=0;for(let m=0;m<a.length;m++){const{name:y,fn:v}=a[m],{x:b,y:w,data:E,reset:_}=await v({x:c,y:d,initialPlacement:r,placement:f,strategy:i,middlewareData:h,rects:l,platform:o,elements:{reference:e,floating:t}});c=b??c,d=w??d,h={...h,[y]:{...h[y],...E}},_&&p<=50&&(p++,typeof _=="object"&&(_.placement&&(f=_.placement),_.rects&&(l=_.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:i}):_.rects),{x:c,y:d}=Nee(l,f,u)),m=-1)}return{x:c,y:d,placement:f,strategy:i,middlewareData:h}};async function fU(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:u}=e,{boundary:l="clippingAncestors",rootBoundary:c="viewport",elementContext:d="floating",altBoundary:f=!1,padding:h=0}=wp(t,e),p=dU(h),y=a[f?d==="floating"?"reference":"floating":d],v=Ex(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(y)))==null||n?y:y.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:l,rootBoundary:c,strategy:u})),b=d==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,w=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),E=await(s.isElement==null?void 0:s.isElement(w))?await(s.getScale==null?void 0:s.getScale(w))||{x:1,y:1}:{x:1,y:1},_=Ex(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:b,offsetParent:w,strategy:u}):b);return{top:(v.top-_.top+p.top)/E.y,bottom:(_.bottom-v.bottom+p.bottom)/E.y,left:(v.left-_.left+p.left)/E.x,right:(_.right-v.right+p.right)/E.x}}const O$e=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:u}=t,{element:l,padding:c=0}=wp(e,t)||{};if(l==null)return{};const d=dU(c),f={x:n,y:r},h=cU(i),p=lU(h),m=await o.getDimensions(l),y=h==="y",v=y?"top":"left",b=y?"bottom":"right",w=y?"clientHeight":"clientWidth",E=s.reference[p]+s.reference[h]-f[h]-s.floating[p],_=f[h]-s.reference[h],C=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l));let S=C?C[w]:0;(!S||!await(o.isElement==null?void 0:o.isElement(C)))&&(S=a.floating[w]||s.floating[p]);const k=E/2-_/2,R=S/2-m[p]/2-1,N=nl(d[v],R),O=nl(d[b],R),F=N,$=S-m[p]-O,z=S/2-m[p]/2+k,q=F9(F,z,$),W=!u.arrow&&Aw(i)!=null&&z!==q&&s.reference[p]/2-(z<F?N:O)-m[p]/2<0,J=W?z<F?z-F:z-$:0;return{[h]:f[h]+J,data:{[h]:q,centerOffset:z-q-J,...W&&{alignmentOffset:J}},reset:W}}}),$$e=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:u,elements:l}=t,{mainAxis:c=!0,crossAxis:d=!0,fallbackPlacements:f,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:m=!0,...y}=wp(e,t);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const v=ud(i),b=ud(a)===a,w=await(u.isRTL==null?void 0:u.isRTL(l.floating)),E=f||(b||!m?[RP(a)]:I$e(a));!f&&p!=="none"&&E.push(...D$e(a,m,p,w));const _=[a,...E],C=await fU(t,y),S=[];let k=((r=s.flip)==null?void 0:r.overflows)||[];if(c&&S.push(C[v]),d){const F=k$e(i,o,w);S.push(C[F[0]],C[F[1]])}if(k=[...k,{placement:i,overflows:S}],!S.every(F=>F<=0)){var R,N;const F=(((R=s.flip)==null?void 0:R.index)||0)+1,$=_[F];if($)return{data:{index:F,overflows:k},reset:{placement:$}};let z=(N=k.filter(q=>q.overflows[0]<=0).sort((q,W)=>q.overflows[1]-W.overflows[1])[0])==null?void 0:N.placement;if(!z)switch(h){case"bestFit":{var O;const q=(O=k.map(W=>[W.placement,W.overflows.filter(J=>J>0).reduce((J,K)=>J+K,0)]).sort((W,J)=>W[1]-J[1])[0])==null?void 0:O[0];q&&(z=q);break}case"initialPlacement":z=a;break}if(i!==z)return{reset:{placement:z}}}return{}}}};function Qpe(e){const t=nl(...e.map(s=>s.left)),n=nl(...e.map(s=>s.top)),r=ra(...e.map(s=>s.right)),i=ra(...e.map(s=>s.bottom));return{x:t,y:n,width:r-t,height:i-n}}function M$e(e){const t=e.slice().sort((i,s)=>i.y-s.y),n=[];let r=null;for(let i=0;i<t.length;i++){const s=t[i];!r||s.y-r.y>r.height/2?n.push([s]):n[n.length-1].push(s),r=s}return n.map(i=>Ex(Qpe(i)))}const L$e=function(e){return e===void 0&&(e={}),{name:"inline",options:e,async fn(t){const{placement:n,elements:r,rects:i,platform:s,strategy:o}=t,{padding:a=2,x:u,y:l}=wp(e,t),c=Array.from(await(s.getClientRects==null?void 0:s.getClientRects(r.reference))||[]),d=M$e(c),f=Ex(Qpe(c)),h=dU(a);function p(){if(d.length===2&&d[0].left>d[1].right&&u!=null&&l!=null)return d.find(y=>u>y.left-h.left&&u<y.right+h.right&&l>y.top-h.top&&l<y.bottom+h.bottom)||f;if(d.length>=2){if(F1(n)==="y"){const N=d[0],O=d[d.length-1],F=ud(n)==="top",$=N.top,z=O.bottom,q=F?N.left:O.left,W=F?N.right:O.right,J=W-q,K=z-$;return{top:$,bottom:z,left:q,right:W,width:J,height:K,x:q,y:$}}const y=ud(n)==="left",v=ra(...d.map(N=>N.right)),b=nl(...d.map(N=>N.left)),w=d.filter(N=>y?N.left===b:N.right===v),E=w[0].top,_=w[w.length-1].bottom,C=b,S=v,k=S-C,R=_-E;return{top:E,bottom:_,left:C,right:S,width:k,height:R,x:C,y:E}}return f}const m=await s.getElementRects({reference:{getBoundingClientRect:p},floating:r.floating,strategy:o});return i.reference.x!==m.reference.x||i.reference.y!==m.reference.y||i.reference.width!==m.reference.width||i.reference.height!==m.reference.height?{reset:{rects:m}}:{}}}};async function F$e(e,t){const{placement:n,platform:r,elements:i}=e,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=ud(n),a=Aw(n),u=F1(n)==="y",l=["left","top"].includes(o)?-1:1,c=s&&u?-1:1,d=wp(t,e);let{mainAxis:f,crossAxis:h,alignmentAxis:p}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...d};return a&&typeof p=="number"&&(h=a==="end"?p*-1:p),u?{x:h*c,y:f*l}:{x:f*l,y:h*c}}const B$e=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=t,u=await F$e(t,e);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+u.x,y:s+u.y,data:{...u,placement:o}}}}},j$e=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:y=>{let{x:v,y:b}=y;return{x:v,y:b}}},...u}=wp(e,t),l={x:n,y:r},c=await fU(t,u),d=F1(ud(i)),f=uU(d);let h=l[f],p=l[d];if(s){const y=f==="y"?"top":"left",v=f==="y"?"bottom":"right",b=h+c[y],w=h-c[v];h=F9(b,h,w)}if(o){const y=d==="y"?"top":"left",v=d==="y"?"bottom":"right",b=p+c[y],w=p-c[v];p=F9(b,p,w)}const m=a.fn({...t,[f]:h,[d]:p});return{...m,data:{x:m.x-n,y:m.y-r}}}}},z$e=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=t,{offset:a=0,mainAxis:u=!0,crossAxis:l=!0}=wp(e,t),c={x:n,y:r},d=F1(i),f=uU(d);let h=c[f],p=c[d];const m=wp(a,t),y=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(u){const w=f==="y"?"height":"width",E=s.reference[f]-s.floating[w]+y.mainAxis,_=s.reference[f]+s.reference[w]-y.mainAxis;h<E?h=E:h>_&&(h=_)}if(l){var v,b;const w=f==="y"?"width":"height",E=["top","left"].includes(ud(i)),_=s.reference[d]-s.floating[w]+(E&&((v=o.offset)==null?void 0:v[d])||0)+(E?0:y.crossAxis),C=s.reference[d]+s.reference[w]+(E?0:((b=o.offset)==null?void 0:b[d])||0)-(E?y.crossAxis:0);p<_?p=_:p>C&&(p=C)}return{[f]:h,[d]:p}}}},U$e=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){const{placement:n,rects:r,platform:i,elements:s}=t,{apply:o=()=>{},...a}=wp(e,t),u=await fU(t,a),l=ud(n),c=Aw(n),d=F1(n)==="y",{width:f,height:h}=r.floating;let p,m;l==="top"||l==="bottom"?(p=l,m=c===(await(i.isRTL==null?void 0:i.isRTL(s.floating))?"start":"end")?"left":"right"):(m=l,p=c==="end"?"top":"bottom");const y=h-u.top-u.bottom,v=f-u.left-u.right,b=nl(h-u[p],y),w=nl(f-u[m],v),E=!t.middlewareData.shift;let _=b,C=w;if(d?C=c||E?nl(w,v):v:_=c||E?nl(b,y):y,E&&!c){const k=ra(u.left,0),R=ra(u.right,0),N=ra(u.top,0),O=ra(u.bottom,0);d?C=f-2*(k!==0||R!==0?k+R:ra(u.left,u.right)):_=h-2*(N!==0||O!==0?N+O:ra(u.top,u.bottom))}await o({...t,availableWidth:C,availableHeight:_});const S=await i.getDimensions(s.floating);return f!==S.width||h!==S.height?{reset:{rects:!0}}:{}}}};function kw(e){return Jpe(e)?(e.nodeName||"").toLowerCase():"#document"}function ol(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Vp(e){var t;return(t=(Jpe(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Jpe(e){return e instanceof Node||e instanceof ol(e).Node}function Of(e){return e instanceof Element||e instanceof ol(e).Element}function $f(e){return e instanceof HTMLElement||e instanceof ol(e).HTMLElement}function Oee(e){return typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof ol(e).ShadowRoot}function VC(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=ld(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function V$e(e){return["table","td","th"].includes(kw(e))}function hU(e){const t=pU(),n=ld(e);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function H$e(e){let t=E0(e);for(;$f(t)&&!_x(t);){if(hU(t))return t;t=E0(t)}return null}function pU(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function _x(e){return["html","body","#document"].includes(kw(e))}function ld(e){return ol(e).getComputedStyle(e)}function v4(e){return Of(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function E0(e){if(kw(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Oee(e)&&e.host||Vp(e);return Oee(t)?t.host:t}function Zpe(e){const t=E0(e);return _x(t)?e.ownerDocument?e.ownerDocument.body:e.body:$f(t)&&VC(t)?t:Zpe(t)}function ap(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=Zpe(e),s=i===((r=e.ownerDocument)==null?void 0:r.body),o=ol(i);return s?t.concat(o,o.visualViewport||[],VC(i)?i:[],o.frameElement&&n?ap(o.frameElement):[]):t.concat(i,ap(i,[],n))}function eme(e){const t=ld(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=$f(e),s=i?e.offsetWidth:n,o=i?e.offsetHeight:r,a=IP(n)!==s||IP(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function mU(e){return Of(e)?e:e.contextElement}function Yv(e){const t=mU(e);if(!$f(t))return w0(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:s}=eme(t);let o=(s?IP(n.width):n.width)/r,a=(s?IP(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const q$e=w0(0);function tme(e){const t=ol(e);return!pU()||!t.visualViewport?q$e:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function W$e(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==ol(e)?!1:t}function Xy(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),s=mU(e);let o=w0(1);t&&(r?Of(r)&&(o=Yv(r)):o=Yv(e));const a=W$e(s,n,r)?tme(s):w0(0);let u=(i.left+a.x)/o.x,l=(i.top+a.y)/o.y,c=i.width/o.x,d=i.height/o.y;if(s){const f=ol(s),h=r&&Of(r)?ol(r):r;let p=f,m=p.frameElement;for(;m&&r&&h!==p;){const y=Yv(m),v=m.getBoundingClientRect(),b=ld(m),w=v.left+(m.clientLeft+parseFloat(b.paddingLeft))*y.x,E=v.top+(m.clientTop+parseFloat(b.paddingTop))*y.y;u*=y.x,l*=y.y,c*=y.x,d*=y.y,u+=w,l+=E,p=ol(m),m=p.frameElement}}return Ex({width:c,height:d,x:u,y:l})}const G$e=[":popover-open",":modal"];function gU(e){return G$e.some(t=>{try{return e.matches(t)}catch{return!1}})}function Y$e(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const s=i==="fixed",o=Vp(r),a=t?gU(t.floating):!1;if(r===o||a&&s)return n;let u={scrollLeft:0,scrollTop:0},l=w0(1);const c=w0(0),d=$f(r);if((d||!d&&!s)&&((kw(r)!=="body"||VC(o))&&(u=v4(r)),$f(r))){const f=Xy(r);l=Yv(r),c.x=f.x+r.clientLeft,c.y=f.y+r.clientTop}return{width:n.width*l.x,height:n.height*l.y,x:n.x*l.x-u.scrollLeft*l.x+c.x,y:n.y*l.y-u.scrollTop*l.y+c.y}}function K$e(e){return Array.from(e.getClientRects())}function nme(e){return Xy(Vp(e)).left+v4(e).scrollLeft}function X$e(e){const t=Vp(e),n=v4(e),r=e.ownerDocument.body,i=ra(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=ra(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+nme(e);const a=-n.scrollTop;return ld(r).direction==="rtl"&&(o+=ra(t.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function Q$e(e,t){const n=ol(e),r=Vp(e),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,u=0;if(i){s=i.width,o=i.height;const l=pU();(!l||l&&t==="fixed")&&(a=i.offsetLeft,u=i.offsetTop)}return{width:s,height:o,x:a,y:u}}function J$e(e,t){const n=Xy(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,s=$f(e)?Yv(e):w0(1),o=e.clientWidth*s.x,a=e.clientHeight*s.y,u=i*s.x,l=r*s.y;return{width:o,height:a,x:u,y:l}}function $ee(e,t,n){let r;if(t==="viewport")r=Q$e(e,n);else if(t==="document")r=X$e(Vp(e));else if(Of(t))r=J$e(t,n);else{const i=tme(e);r={...t,x:t.x-i.x,y:t.y-i.y}}return Ex(r)}function rme(e,t){const n=E0(e);return n===t||!Of(n)||_x(n)?!1:ld(n).position==="fixed"||rme(n,t)}function Z$e(e,t){const n=t.get(e);if(n)return n;let r=ap(e,[],!1).filter(a=>Of(a)&&kw(a)!=="body"),i=null;const s=ld(e).position==="fixed";let o=s?E0(e):e;for(;Of(o)&&!_x(o);){const a=ld(o),u=hU(o);!u&&a.position==="fixed"&&(i=null),(s?!u&&!i:!u&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||VC(o)&&!u&&rme(e,o))?r=r.filter(c=>c!==o):i=a,o=E0(o)}return t.set(e,r),r}function e5e(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const o=[...n==="clippingAncestors"?gU(t)?[]:Z$e(t,this._c):[].concat(n),r],a=o[0],u=o.reduce((l,c)=>{const d=$ee(t,c,i);return l.top=ra(d.top,l.top),l.right=nl(d.right,l.right),l.bottom=nl(d.bottom,l.bottom),l.left=ra(d.left,l.left),l},$ee(t,a,i));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function t5e(e){const{width:t,height:n}=eme(e);return{width:t,height:n}}function n5e(e,t,n){const r=$f(t),i=Vp(t),s=n==="fixed",o=Xy(e,!0,s,t);let a={scrollLeft:0,scrollTop:0};const u=w0(0);if(r||!r&&!s)if((kw(t)!=="body"||VC(i))&&(a=v4(t)),r){const d=Xy(t,!0,s,t);u.x=d.x+t.clientLeft,u.y=d.y+t.clientTop}else i&&(u.x=nme(i));const l=o.left+a.scrollLeft-u.x,c=o.top+a.scrollTop-u.y;return{x:l,y:c,width:o.width,height:o.height}}function QM(e){return ld(e).position==="static"}function Mee(e,t){return!$f(e)||ld(e).position==="fixed"?null:t?t(e):e.offsetParent}function ime(e,t){const n=ol(e);if(gU(e))return n;if(!$f(e)){let i=E0(e);for(;i&&!_x(i);){if(Of(i)&&!QM(i))return i;i=E0(i)}return n}let r=Mee(e,t);for(;r&&V$e(r)&&QM(r);)r=Mee(r,t);return r&&_x(r)&&QM(r)&&!hU(r)?n:r||H$e(e)||n}const r5e=async function(e){const t=this.getOffsetParent||ime,n=this.getDimensions,r=await n(e.floating);return{reference:n5e(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function i5e(e){return ld(e).direction==="rtl"}const s5e={convertOffsetParentRelativeRectToViewportRelativeRect:Y$e,getDocumentElement:Vp,getClippingRect:e5e,getOffsetParent:ime,getElementRects:r5e,getClientRects:K$e,getDimensions:t5e,getScale:Yv,isElement:Of,isRTL:i5e};function o5e(e,t){let n=null,r;const i=Vp(e);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,u){a===void 0&&(a=!1),u===void 0&&(u=1),s();const{left:l,top:c,width:d,height:f}=e.getBoundingClientRect();if(a||t(),!d||!f)return;const h=Pk(c),p=Pk(i.clientWidth-(l+d)),m=Pk(i.clientHeight-(c+f)),y=Pk(l),b={rootMargin:-h+"px "+-p+"px "+-m+"px "+-y+"px",threshold:ra(0,nl(1,u))||1};let w=!0;function E(_){const C=_[0].intersectionRatio;if(C!==u){if(!w)return o();C?o(!1,C):r=setTimeout(()=>{o(!1,1e-7)},1e3)}w=!1}try{n=new IntersectionObserver(E,{...b,root:i.ownerDocument})}catch{n=new IntersectionObserver(E,b)}n.observe(e)}return o(!0),s}function a5e(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:u=!1}=r,l=mU(e),c=i||s?[...l?ap(l):[],...ap(t)]:[];c.forEach(v=>{i&&v.addEventListener("scroll",n,{passive:!0}),s&&v.addEventListener("resize",n)});const d=l&&a?o5e(l,n):null;let f=-1,h=null;o&&(h=new ResizeObserver(v=>{let[b]=v;b&&b.target===l&&h&&(h.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var w;(w=h)==null||w.observe(t)})),n()}),l&&!u&&h.observe(l),h.observe(t));let p,m=u?Xy(e):null;u&&y();function y(){const v=Xy(e);m&&(v.x!==m.x||v.y!==m.y||v.width!==m.width||v.height!==m.height)&&n(),m=v,p=requestAnimationFrame(y)}return n(),()=>{var v;c.forEach(b=>{i&&b.removeEventListener("scroll",n),s&&b.removeEventListener("resize",n)}),d==null||d(),(v=h)==null||v.disconnect(),h=null,u&&cancelAnimationFrame(p)}}const u5e=B$e,l5e=j$e,c5e=$$e,d5e=U$e,Lee=O$e,f5e=L$e,h5e=z$e,p5e=(e,t,n)=>{const r=new Map,i={platform:s5e,...n},s={...i.platform,_c:r};return N$e(e,t,{...i,platform:s})};var zR=typeof document<"u"?D.useLayoutEffect:D.useEffect;function DP(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!DP(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&e.$$typeof)&&!DP(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function sme(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Fee(e,t){const n=sme(e);return Math.round(t*n)/n}function JM(e){const t=D.useRef(e);return zR(()=>{t.current=e}),t}function m5e(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:u,open:l}=e,[c,d]=D.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[f,h]=D.useState(r);DP(f,r)||h(r);const[p,m]=D.useState(null),[y,v]=D.useState(null),b=D.useCallback(K=>{K!==C.current&&(C.current=K,m(K))},[]),w=D.useCallback(K=>{K!==S.current&&(S.current=K,v(K))},[]),E=s||p,_=o||y,C=D.useRef(null),S=D.useRef(null),k=D.useRef(c),R=u!=null,N=JM(u),O=JM(i),F=JM(l),$=D.useCallback(()=>{if(!C.current||!S.current)return;const K={placement:t,strategy:n,middleware:f};O.current&&(K.platform=O.current),p5e(C.current,S.current,K).then(Z=>{const U={...Z,isPositioned:F.current!==!1};z.current&&!DP(k.current,U)&&(k.current=U,p4.flushSync(()=>{d(U)}))})},[f,t,n,O,F]);zR(()=>{l===!1&&k.current.isPositioned&&(k.current.isPositioned=!1,d(K=>({...K,isPositioned:!1})))},[l]);const z=D.useRef(!1);zR(()=>(z.current=!0,()=>{z.current=!1}),[]),zR(()=>{if(E&&(C.current=E),_&&(S.current=_),E&&_){if(N.current)return N.current(E,_,$);$()}},[E,_,$,N,R]);const q=D.useMemo(()=>({reference:C,floating:S,setReference:b,setFloating:w}),[b,w]),W=D.useMemo(()=>({reference:E,floating:_}),[E,_]),J=D.useMemo(()=>{const K={position:n,left:0,top:0};if(!W.floating)return K;const Z=Fee(W.floating,c.x),U=Fee(W.floating,c.y);return a?{...K,transform:"translate("+Z+"px, "+U+"px)",...sme(W.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:Z,top:U}},[n,a,W.floating,c.x,c.y]);return D.useMemo(()=>({...c,update:$,refs:q,elements:W,floatingStyles:J}),[c,$,q,W,J])}const g5e=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:i}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?Lee({element:r.current,padding:i}).fn(n):{}:r?Lee({element:r,padding:i}).fn(n):{}}}},ome=(e,t)=>({...u5e(e),options:[e,t]}),yU=(e,t)=>({...l5e(e),options:[e,t]}),Bee=(e,t)=>({...h5e(e),options:[e,t]}),PP=(e,t)=>({...c5e(e),options:[e,t]}),y5e=(e,t)=>({...d5e(e),options:[e,t]}),jT=(e,t)=>({...f5e(e),options:[e,t]}),ame=(e,t)=>({...g5e(e),options:[e,t]}),ume={...f4e},b5e=ume.useInsertionEffect,v5e=b5e||(e=>e());function qh(e){const t=D.useRef(()=>{});return v5e(()=>{t.current=e}),D.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}var bf=typeof document<"u"?D.useLayoutEffect:D.useEffect;let jee=!1,x5e=0;const zee=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+x5e++;function w5e(){const[e,t]=D.useState(()=>jee?zee():void 0);return bf(()=>{e==null&&t(zee())},[]),D.useEffect(()=>{jee=!0},[]),e}const E5e=ume.useId,lme=E5e||w5e;function _5e(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(i=>i(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,((r=e.get(t))==null?void 0:r.filter(i=>i!==n))||[])}}}const T5e=D.createContext(null),C5e=D.createContext(null),bU=()=>{var e;return((e=D.useContext(T5e))==null?void 0:e.id)||null},vU=()=>D.useContext(C5e);function xU(e){return"data-floating-ui-"+e}function ZM(e){const t=D.useRef(e);return bf(()=>{t.current=e}),t}const Uee=xU("safe-polygon");function UR(e,t,n){return n&&!L9(n)?0:typeof e=="number"?e:e==null?void 0:e[t]}function S5e(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,dataRef:i,events:s,elements:o}=e,{enabled:a=!0,delay:u=0,handleClose:l=null,mouseOnly:c=!1,restMs:d=0,move:f=!0}=t,h=vU(),p=bU(),m=ZM(l),y=ZM(u),v=ZM(n),b=D.useRef(),w=D.useRef(-1),E=D.useRef(),_=D.useRef(-1),C=D.useRef(!0),S=D.useRef(!1),k=D.useRef(()=>{}),R=D.useRef(!1),N=D.useCallback(()=>{var J;const K=(J=i.current.openEvent)==null?void 0:J.type;return(K==null?void 0:K.includes("mouse"))&&K!=="mousedown"},[i]);D.useEffect(()=>{if(!a)return;function J(K){let{open:Z}=K;Z||(clearTimeout(w.current),clearTimeout(_.current),C.current=!0,R.current=!1)}return s.on("openchange",J),()=>{s.off("openchange",J)}},[a,s]),D.useEffect(()=>{if(!a||!m.current||!n)return;function J(Z){N()&&r(!1,Z,"hover")}const K=Ty(o.floating).documentElement;return K.addEventListener("mouseleave",J),()=>{K.removeEventListener("mouseleave",J)}},[o.floating,n,r,a,m,N]);const O=D.useCallback(function(J,K,Z){K===void 0&&(K=!0),Z===void 0&&(Z="hover");const U=UR(y.current,"close",b.current);U&&!E.current?(clearTimeout(w.current),w.current=window.setTimeout(()=>r(!1,J,Z),U)):K&&(clearTimeout(w.current),r(!1,J,Z))},[y,r]),F=qh(()=>{k.current(),E.current=void 0}),$=qh(()=>{if(S.current){const J=Ty(o.floating).body;J.style.pointerEvents="",J.removeAttribute(Uee),S.current=!1}}),z=qh(()=>i.current.openEvent?["click","mousedown"].includes(i.current.openEvent.type):!1);D.useEffect(()=>{if(!a)return;function J(L){if(clearTimeout(w.current),C.current=!1,c&&!L9(b.current)||d>0&&!UR(y.current,"open"))return;const Y=UR(y.current,"open",b.current);Y?w.current=window.setTimeout(()=>{v.current||r(!0,L,"hover")},Y):n||r(!0,L,"hover")}function K(L){if(z())return;k.current();const Y=Ty(o.floating);if(clearTimeout(_.current),R.current=!1,m.current&&i.current.floatingContext){n||clearTimeout(w.current),E.current=m.current({...i.current.floatingContext,tree:h,x:L.clientX,y:L.clientY,onClose(){$(),F(),z()||O(L,!0,"safe-polygon")}});const G=E.current;Y.addEventListener("mousemove",G),k.current=()=>{Y.removeEventListener("mousemove",G)};return}(b.current==="touch"?!C2(o.floating,L.relatedTarget):!0)&&O(L)}function Z(L){z()||i.current.floatingContext&&(m.current==null||m.current({...i.current.floatingContext,tree:h,x:L.clientX,y:L.clientY,onClose(){$(),F(),z()||O(L)}})(L))}if(gu(o.domReference)){var U;const L=o.domReference;return n&&L.addEventListener("mouseleave",Z),(U=o.floating)==null||U.addEventListener("mouseleave",Z),f&&L.addEventListener("mousemove",J,{once:!0}),L.addEventListener("mouseenter",J),L.addEventListener("mouseleave",K),()=>{var Y;n&&L.removeEventListener("mouseleave",Z),(Y=o.floating)==null||Y.removeEventListener("mouseleave",Z),f&&L.removeEventListener("mousemove",J),L.removeEventListener("mouseenter",J),L.removeEventListener("mouseleave",K)}}},[o,a,e,c,d,f,O,F,$,r,n,v,h,y,m,i,z]),bf(()=>{var J;if(a&&n&&(J=m.current)!=null&&J.__options.blockPointerEvents&&N()){S.current=!0;const Z=o.floating;if(gu(o.domReference)&&Z){var K;const U=Ty(o.floating).body;U.setAttribute(Uee,"");const L=o.domReference,Y=h==null||(K=h.nodesRef.current.find(j=>j.id===p))==null||(K=K.context)==null?void 0:K.elements.floating;return Y&&(Y.style.pointerEvents=""),U.style.pointerEvents="none",L.style.pointerEvents="auto",Z.style.pointerEvents="auto",()=>{U.style.pointerEvents="",L.style.pointerEvents="",Z.style.pointerEvents=""}}}},[a,n,p,o,h,m,N]),bf(()=>{n||(b.current=void 0,R.current=!1,F(),$())},[n,F,$]),D.useEffect(()=>()=>{F(),clearTimeout(w.current),clearTimeout(_.current),$()},[a,o.domReference,F,$]);const q=D.useMemo(()=>{function J(K){b.current=K.pointerType}return{onPointerDown:J,onPointerEnter:J,onMouseMove(K){const{nativeEvent:Z}=K;function U(){!C.current&&!v.current&&r(!0,Z,"hover")}c&&!L9(b.current)||n||d===0||R.current&&K.movementX**2+K.movementY**2<2||(clearTimeout(_.current),b.current==="touch"?U():(R.current=!0,_.current=window.setTimeout(U,d)))}}},[c,r,n,v,d]),W=D.useMemo(()=>({onMouseEnter(){clearTimeout(w.current)},onMouseLeave(J){z()||O(J.nativeEvent,!1)}}),[O,z]);return D.useMemo(()=>a?{reference:q,floating:W}:{},[a,q,W])}const j9=()=>{},cme=D.createContext({delay:0,initialDelay:0,timeoutMs:0,currentId:null,setCurrentId:j9,setState:j9,isInstantPhase:!1}),dme=()=>D.useContext(cme);function A5e(e){const{children:t,delay:n,timeoutMs:r=0}=e,[i,s]=D.useReducer((u,l)=>({...u,...l}),{delay:n,timeoutMs:r,initialDelay:n,currentId:null,isInstantPhase:!1}),o=D.useRef(null),a=D.useCallback(u=>{s({currentId:u})},[]);return bf(()=>{i.currentId?o.current===null?o.current=i.currentId:i.isInstantPhase||s({isInstantPhase:!0}):(i.isInstantPhase&&s({isInstantPhase:!1}),o.current=null)},[i.currentId,i.isInstantPhase]),D.createElement(cme.Provider,{value:D.useMemo(()=>({...i,setState:s,setCurrentId:a}),[i,a])},t)}function k5e(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,floatingId:i}=e,{id:s,enabled:o=!0}=t,a=s??i,u=dme(),{currentId:l,setCurrentId:c,initialDelay:d,setState:f,timeoutMs:h}=u;return bf(()=>{o&&l&&(f({delay:{open:1,close:UR(d,"close")}}),l!==a&&r(!1))},[o,a,r,f,l,d]),bf(()=>{function p(){r(!1),f({delay:d,currentId:null})}if(o&&l&&!n&&l===a){if(h){const m=window.setTimeout(p,h);return()=>{clearTimeout(m)}}p()}},[o,n,f,l,a,r,d,h]),bf(()=>{o&&(c===j9||!n||c(a))},[o,n,c,a]),u}function e8(e,t){let n=e.filter(i=>{var s;return i.parentId===t&&((s=i.context)==null?void 0:s.open)}),r=n;for(;r.length;)r=e.filter(i=>{var s;return(s=r)==null?void 0:s.some(o=>{var a;return i.parentId===o.id&&((a=i.context)==null?void 0:a.open)})}),n=n.concat(r);return n}const I5e="data-floating-ui-focusable",R5e={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},D5e={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},Vee=e=>{var t,n;return{escapeKey:typeof e=="boolean"?e:(t=e==null?void 0:e.escapeKey)!=null?t:!1,outsidePress:typeof e=="boolean"?e:(n=e==null?void 0:e.outsidePress)!=null?n:!0}};function P5e(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,elements:i,dataRef:s}=e,{enabled:o=!0,escapeKey:a=!0,outsidePress:u=!0,outsidePressEvent:l="pointerdown",referencePress:c=!1,referencePressEvent:d="pointerdown",ancestorScroll:f=!1,bubbles:h,capture:p}=t,m=vU(),y=qh(typeof u=="function"?u:()=>!1),v=typeof u=="function"?y:u,b=D.useRef(!1),w=D.useRef(!1),{escapeKey:E,outsidePress:_}=Vee(h),{escapeKey:C,outsidePress:S}=Vee(p),k=D.useRef(!1),R=qh(q=>{var W;if(!n||!o||!a||q.key!=="Escape"||k.current)return;const J=(W=s.current.floatingContext)==null?void 0:W.nodeId,K=m?e8(m.nodesRef.current,J):[];if(!E&&(q.stopPropagation(),K.length>0)){let Z=!0;if(K.forEach(U=>{var L;if((L=U.context)!=null&&L.open&&!U.context.dataRef.current.__escapeKeyBubbles){Z=!1;return}}),!Z)return}r(!1,E$e(q)?q.nativeEvent:q,"escape-key")}),N=qh(q=>{var W;const J=()=>{var K;R(q),(K=Tv(q))==null||K.removeEventListener("keydown",J)};(W=Tv(q))==null||W.addEventListener("keydown",J)}),O=qh(q=>{var W;const J=b.current;b.current=!1;const K=w.current;if(w.current=!1,l==="click"&&K||J||typeof v=="function"&&!v(q))return;const Z=Tv(q),U="["+xU("inert")+"]",L=Ty(i.floating).querySelectorAll(U);let Y=gu(Z)?Z:null;for(;Y&&!Ree(Y);){const ne=y$e(Y);if(Ree(ne)||!gu(ne))break;Y=ne}if(L.length&&gu(Z)&&!_$e(Z)&&!C2(Z,i.floating)&&Array.from(L).every(ne=>!C2(Y,ne)))return;if(aU(Z)&&z){const ne=Z.clientWidth>0&&Z.scrollWidth>Z.clientWidth,pe=Z.clientHeight>0&&Z.scrollHeight>Z.clientHeight;let de=pe&&q.offsetX>Z.clientWidth;if(pe&&g$e(Z).direction==="rtl"&&(de=q.offsetX<=Z.offsetWidth-Z.clientWidth),de||ne&&q.offsetY>Z.clientHeight)return}const j=(W=s.current.floatingContext)==null?void 0:W.nodeId,G=m&&e8(m.nodesRef.current,j).some(ne=>{var pe;return XM(q,(pe=ne.context)==null?void 0:pe.elements.floating)});if(XM(q,i.floating)||XM(q,i.domReference)||G)return;const X=m?e8(m.nodesRef.current,j):[];if(X.length>0){let ne=!0;if(X.forEach(pe=>{var de;if((de=pe.context)!=null&&de.open&&!pe.context.dataRef.current.__outsidePressBubbles){ne=!1;return}}),!ne)return}r(!1,q,"outside-press")}),F=qh(q=>{var W;const J=()=>{var K;O(q),(K=Tv(q))==null||K.removeEventListener(l,J)};(W=Tv(q))==null||W.addEventListener(l,J)});D.useEffect(()=>{if(!n||!o)return;s.current.__escapeKeyBubbles=E,s.current.__outsidePressBubbles=_;let q=-1;function W(L){r(!1,L,"ancestor-scroll")}function J(){window.clearTimeout(q),k.current=!0}function K(){q=window.setTimeout(()=>{k.current=!1},m$e()?5:0)}const Z=Ty(i.floating);a&&(Z.addEventListener("keydown",C?N:R,C),Z.addEventListener("compositionstart",J),Z.addEventListener("compositionend",K)),v&&Z.addEventListener(l,S?F:O,S);let U=[];return f&&(gu(i.domReference)&&(U=ap(i.domReference)),gu(i.floating)&&(U=U.concat(ap(i.floating))),!gu(i.reference)&&i.reference&&i.reference.contextElement&&(U=U.concat(ap(i.reference.contextElement)))),U=U.filter(L=>{var Y;return L!==((Y=Z.defaultView)==null?void 0:Y.visualViewport)}),U.forEach(L=>{L.addEventListener("scroll",W,{passive:!0})}),()=>{a&&(Z.removeEventListener("keydown",C?N:R,C),Z.removeEventListener("compositionstart",J),Z.removeEventListener("compositionend",K)),v&&Z.removeEventListener(l,S?F:O,S),U.forEach(L=>{L.removeEventListener("scroll",W)}),window.clearTimeout(q)}},[s,i,a,v,l,n,r,f,o,E,_,R,C,N,O,S,F]),D.useEffect(()=>{b.current=!1},[v,l]);const $=D.useMemo(()=>({onKeyDown:R,[R5e[d]]:q=>{c&&r(!1,q.nativeEvent,"reference-press")}}),[R,r,c,d]),z=D.useMemo(()=>({onKeyDown:R,onMouseDown(){w.current=!0},onMouseUp(){w.current=!0},[D5e[l]]:()=>{b.current=!0}}),[R,l]);return D.useMemo(()=>o?{reference:$,floating:z}:{},[o,$,z])}function N5e(e){const{open:t=!1,onOpenChange:n,elements:r}=e,i=lme(),s=D.useRef({}),[o]=D.useState(()=>_5e()),a=bU()!=null,[u,l]=D.useState(r.reference),c=qh((h,p,m)=>{s.current.openEvent=h?p:void 0,o.emit("openchange",{open:h,event:p,reason:m,nested:a}),n==null||n(h,p,m)}),d=D.useMemo(()=>({setPositionReference:l}),[]),f=D.useMemo(()=>({reference:u||r.reference||null,floating:r.floating||null,domReference:r.reference}),[u,r.reference,r.floating]);return D.useMemo(()=>({dataRef:s,open:t,onOpenChange:c,elements:f,events:o,floatingId:i,refs:d}),[t,c,f,o,i,d])}function wU(e){e===void 0&&(e={});const{nodeId:t}=e,n=N5e({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,i=r.elements,[s,o]=D.useState(null),[a,u]=D.useState(null),c=(i==null?void 0:i.domReference)||s,d=D.useRef(null),f=vU();bf(()=>{c&&(d.current=c)},[c]);const h=m5e({...e,elements:{...i,...a&&{reference:a}}}),p=D.useCallback(w=>{const E=gu(w)?{getBoundingClientRect:()=>w.getBoundingClientRect(),contextElement:w}:w;u(E),h.refs.setReference(E)},[h.refs]),m=D.useCallback(w=>{(gu(w)||w===null)&&(d.current=w,o(w)),(gu(h.refs.reference.current)||h.refs.reference.current===null||w!==null&&!gu(w))&&h.refs.setReference(w)},[h.refs]),y=D.useMemo(()=>({...h.refs,setReference:m,setPositionReference:p,domReference:d}),[h.refs,m,p]),v=D.useMemo(()=>({...h.elements,domReference:c}),[h.elements,c]),b=D.useMemo(()=>({...h,...r,refs:y,elements:v,nodeId:t}),[h,y,v,t,r]);return bf(()=>{r.dataRef.current.floatingContext=b;const w=f==null?void 0:f.nodesRef.current.find(E=>E.id===t);w&&(w.context=b)}),D.useMemo(()=>({...h,context:b,refs:y,elements:v}),[h,y,v,b])}function O5e(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,events:i,dataRef:s,elements:o}=e,{enabled:a=!0,visibleOnly:u=!0}=t,l=D.useRef(!1),c=D.useRef(),d=D.useRef(!0);D.useEffect(()=>{if(!a)return;const h=Sw(o.domReference);function p(){!n&&aU(o.domReference)&&o.domReference===Dee(Ty(o.domReference))&&(l.current=!0)}function m(){d.current=!0}return h.addEventListener("blur",p),h.addEventListener("keydown",m,!0),()=>{h.removeEventListener("blur",p),h.removeEventListener("keydown",m,!0)}},[o.domReference,n,a]),D.useEffect(()=>{if(!a)return;function h(p){let{reason:m}=p;(m==="reference-press"||m==="escape-key")&&(l.current=!0)}return i.on("openchange",h),()=>{i.off("openchange",h)}},[i,a]),D.useEffect(()=>()=>{clearTimeout(c.current)},[]);const f=D.useMemo(()=>({onPointerDown(h){b$e(h.nativeEvent)||(d.current=!1)},onMouseLeave(){l.current=!1},onFocus(h){if(l.current)return;const p=Tv(h.nativeEvent);if(u&&gu(p))try{if(v$e()&&x$e())throw Error();if(!p.matches(":focus-visible"))return}catch{if(!d.current&&!C$e(p))return}r(!0,h.nativeEvent,"focus")},onBlur(h){l.current=!1;const p=h.relatedTarget,m=h.nativeEvent,y=gu(p)&&p.hasAttribute(xU("focus-guard"))&&p.getAttribute("data-type")==="outside";c.current=window.setTimeout(()=>{var v;const b=Dee(o.domReference?o.domReference.ownerDocument:document);!p&&b===o.domReference||C2((v=s.current.floatingContext)==null?void 0:v.refs.floating.current,b)||C2(o.domReference,b)||y||r(!1,m,"focus")})}}),[s,o.domReference,r,u]);return D.useMemo(()=>a?{reference:f}:{},[a,f])}const Hee="active",qee="selected";function t8(e,t,n){const r=new Map,i=n==="item";let s=e;if(i&&e){const{[Hee]:o,[qee]:a,...u}=e;s=u}return{...n==="floating"&&{tabIndex:-1,[I5e]:""},...s,...t.map(o=>{const a=o?o[n]:null;return typeof a=="function"?e?a(e):null:a}).concat(e).reduce((o,a)=>(a&&Object.entries(a).forEach(u=>{let[l,c]=u;if(!(i&&[Hee,qee].includes(l)))if(l.indexOf("on")===0){if(r.has(l)||r.set(l,[]),typeof c=="function"){var d;(d=r.get(l))==null||d.push(c),o[l]=function(){for(var f,h=arguments.length,p=new Array(h),m=0;m<h;m++)p[m]=arguments[m];return(f=r.get(l))==null?void 0:f.map(y=>y(...p)).find(y=>y!==void 0)}}}else o[l]=c}),o),{})}}function $5e(e){e===void 0&&(e=[]);const t=e.map(a=>a==null?void 0:a.reference),n=e.map(a=>a==null?void 0:a.floating),r=e.map(a=>a==null?void 0:a.item),i=D.useCallback(a=>t8(a,e,"reference"),t),s=D.useCallback(a=>t8(a,e,"floating"),n),o=D.useCallback(a=>t8(a,e,"item"),r);return D.useMemo(()=>({getReferenceProps:i,getFloatingProps:s,getItemProps:o}),[i,s,o])}const M5e=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function L5e(e,t){var n;t===void 0&&(t={});const{open:r,floatingId:i}=e,{enabled:s=!0,role:o="dialog"}=t,a=(n=M5e.get(o))!=null?n:o,u=lme(),c=bU()!=null,d=D.useMemo(()=>a==="tooltip"||o==="label"?{["aria-"+(o==="label"?"labelledby":"describedby")]:r?i:void 0}:{"aria-expanded":r?"true":"false","aria-haspopup":a==="alertdialog"?"dialog":a,"aria-controls":r?i:void 0,...a==="listbox"&&{role:"combobox"},...a==="menu"&&{id:u},...a==="menu"&&c&&{role:"menuitem"},...o==="select"&&{"aria-autocomplete":"none"},...o==="combobox"&&{"aria-autocomplete":"list"}},[a,i,c,r,u,o]),f=D.useMemo(()=>{const p={id:i,...a&&{role:a}};return a==="tooltip"||o==="label"?p:{...p,...a==="menu"&&{"aria-labelledby":u}}},[a,i,u,o]),h=D.useCallback(p=>{let{active:m,selected:y}=p;const v={role:"option",...m&&{id:i+"-option"}};switch(o){case"select":return{...v,"aria-selected":m&&y};case"combobox":return{...v,...m&&{"aria-selected":!0}}}return{}},[i,o]);return D.useMemo(()=>s?{reference:d,floating:f,item:h}:{},[s,d,f,h])}function fme(e,t){if(e==="rtl"&&(t.includes("right")||t.includes("left"))){const[n,r]=t.split("-"),i=n==="right"?"left":"right";return r===void 0?i:`${i}-${r}`}return t}function Wee(e,t,n,r){return e==="center"||r==="center"?{top:t}:e==="end"?{bottom:n}:e==="start"?{top:n}:{}}function Gee(e,t,n,r,i){return e==="center"||r==="center"?{left:t}:e==="end"?{[i==="ltr"?"right":"left"]:n}:e==="start"?{[i==="ltr"?"left":"right"]:n}:{}}const F5e={bottom:"borderTopLeftRadius",left:"borderTopRightRadius",right:"borderBottomLeftRadius",top:"borderBottomRightRadius"};function B5e({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,arrowX:s,arrowY:o,dir:a}){const[u,l="center"]=e.split("-"),c={width:t,height:t,transform:"rotate(45deg)",position:"absolute",[F5e[u]]:r},d=-t/2;return u==="left"?{...c,...Wee(l,o,n,i),right:d,borderLeftColor:"transparent",borderBottomColor:"transparent",clipPath:"polygon(100% 0, 0 0, 100% 100%)"}:u==="right"?{...c,...Wee(l,o,n,i),left:d,borderRightColor:"transparent",borderTopColor:"transparent",clipPath:"polygon(0 100%, 0 0, 100% 100%)"}:u==="top"?{...c,...Gee(l,s,n,i,a),bottom:d,borderTopColor:"transparent",borderLeftColor:"transparent",clipPath:"polygon(0 100%, 100% 100%, 100% 0)"}:u==="bottom"?{...c,...Gee(l,s,n,i,a),top:d,borderBottomColor:"transparent",borderRightColor:"transparent",clipPath:"polygon(0 100%, 0 0, 100% 0)"}:{}}const EU=D.forwardRef(({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,visible:s,arrowX:o,arrowY:a,style:u,...l},c)=>{const{dir:d}=Up();return s?T.jsx("div",{...l,ref:c,style:{...u,...B5e({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,dir:d,arrowX:o,arrowY:a})}}):null});EU.displayName="@mantine/core/FloatingArrow";var hme={root:"m_9814e45f"};const j5e={zIndex:so("modal")},z5e=(e,{gradient:t,color:n,backgroundOpacity:r,blur:i,radius:s,zIndex:o})=>({root:{"--overlay-bg":t||(n!==void 0||r!==void 0)&&Xd(n||"#000",r??.6)||void 0,"--overlay-filter":i?`blur(${$e(i)})`:void 0,"--overlay-radius":s===void 0?void 0:Dr(s),"--overlay-z-index":o==null?void 0:o.toString()}}),Tx=os((e,t)=>{const n=Me("Overlay",j5e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,fixed:l,center:c,children:d,radius:f,zIndex:h,gradient:p,blur:m,color:y,backgroundOpacity:v,mod:b,...w}=n,E=$t({name:"Overlay",props:n,classes:hme,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:z5e});return T.jsx(Se,{ref:t,...E("root"),mod:[{center:c,fixed:l},b],...w,children:d})});Tx.classes=hme;Tx.displayName="@mantine/core/Overlay";function U5e(e){const t=document.createElement("div");return t.setAttribute("data-portal","true"),typeof e.className=="string"&&t.classList.add(...e.className.split(" ").filter(Boolean)),typeof e.style=="object"&&Object.assign(t.style,e.style),typeof e.id=="string"&&t.setAttribute("id",e.id),t}const V5e={},pme=D.forwardRef((e,t)=>{const{children:n,target:r,...i}=Me("Portal",V5e,e),[s,o]=D.useState(!1),a=D.useRef(null);return N1(()=>(o(!0),a.current=r?typeof r=="string"?document.querySelector(r):r:U5e(i),SP(t,a.current),!r&&a.current&&document.body.appendChild(a.current),()=>{!r&&a.current&&document.body.removeChild(a.current)}),[r]),!s||!a.current?null:p4.createPortal(T.jsx(T.Fragment,{children:n}),a.current)});pme.displayName="@mantine/core/Portal";function Z0({withinPortal:e=!0,children:t,...n}){return e?T.jsx(pme,{...n,children:t}):T.jsx(T.Fragment,{children:t})}Z0.displayName="@mantine/core/OptionalPortal";const u_=e=>({in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:`scale(.9) translateY(${e==="bottom"?10:-10}px)`},transitionProperty:"transform, opacity"}),Nk={fade:{in:{opacity:1},out:{opacity:0},transitionProperty:"opacity"},"fade-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(30px)"},transitionProperty:"opacity, transform"},"fade-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-30px)"},transitionProperty:"opacity, transform"},"fade-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(30px)"},transitionProperty:"opacity, transform"},"fade-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-30px)"},transitionProperty:"opacity, transform"},scale:{in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-y":{in:{opacity:1,transform:"scaleY(1)"},out:{opacity:0,transform:"scaleY(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-x":{in:{opacity:1,transform:"scaleX(1)"},out:{opacity:0,transform:"scaleX(0)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"skew-up":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:"translateY(-20px) skew(-10deg, -5deg)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"skew-down":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:"translateY(20px) skew(-10deg, -5deg)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-left":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:"translateY(20px) rotate(-5deg)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-right":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:"translateY(20px) rotate(5deg)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-100%)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(100%)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"slide-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(100%)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"slide-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-100%)"},common:{transformOrigin:"right"},transitionProperty:"transform, opacity"},pop:{...u_("bottom"),common:{transformOrigin:"center center"}},"pop-bottom-left":{...u_("bottom"),common:{transformOrigin:"bottom left"}},"pop-bottom-right":{...u_("bottom"),common:{transformOrigin:"bottom right"}},"pop-top-left":{...u_("top"),common:{transformOrigin:"top left"}},"pop-top-right":{...u_("top"),common:{transformOrigin:"top right"}}},Yee={entering:"in",entered:"in",exiting:"out",exited:"out","pre-exiting":"out","pre-entering":"out"};function H5e({transition:e,state:t,duration:n,timingFunction:r}){const i={transitionDuration:`${n}ms`,transitionTimingFunction:r};return typeof e=="string"?e in Nk?{transitionProperty:Nk[e].transitionProperty,...i,...Nk[e].common,...Nk[e][Yee[t]]}:{}:{transitionProperty:e.transitionProperty,...i,...e.common,...e[Yee[t]]}}function q5e({duration:e,exitDuration:t,timingFunction:n,mounted:r,onEnter:i,onExit:s,onEntered:o,onExited:a,enterDelay:u,exitDelay:l}){const c=ss(),d=d4(),f=c.respectReducedMotion?d:!1,[h,p]=D.useState(f?0:e),[m,y]=D.useState(r?"entered":"exited"),v=D.useRef(-1),b=D.useRef(-1),w=D.useRef(-1),E=C=>{const S=C?i:s,k=C?o:a;window.clearTimeout(v.current);const R=f?0:C?e:t;p(R),R===0?(typeof S=="function"&&S(),typeof k=="function"&&k(),y(C?"entered":"exited")):w.current=requestAnimationFrame(()=>{eT.flushSync(()=>{y(C?"pre-entering":"pre-exiting")}),w.current=requestAnimationFrame(()=>{typeof S=="function"&&S(),y(C?"entering":"exiting"),v.current=window.setTimeout(()=>{typeof k=="function"&&k(),y(C?"entered":"exited")},R)})})},_=C=>{if(window.clearTimeout(b.current),typeof(C?u:l)!="number"){E(C);return}b.current=window.setTimeout(()=>{E(C)},C?u:l)};return Nf(()=>{_(r)},[r]),D.useEffect(()=>()=>{window.clearTimeout(v.current),cancelAnimationFrame(w.current)},[]),{transitionDuration:h,transitionStatus:m,transitionTimingFunction:n||"ease"}}function Jf({keepMounted:e,transition:t="fade",duration:n=250,exitDuration:r=n,mounted:i,children:s,timingFunction:o="ease",onExit:a,onEntered:u,onEnter:l,onExited:c,enterDelay:d,exitDelay:f}){const{transitionDuration:h,transitionStatus:p,transitionTimingFunction:m}=q5e({mounted:i,exitDuration:r,duration:n,timingFunction:o,onExit:a,onEntered:u,onEnter:l,onExited:c,enterDelay:d,exitDelay:f});return h===0?i?T.jsx(T.Fragment,{children:s({})}):e?s({display:"none"}):null:p==="exited"?e?s({display:"none"}):null:T.jsx(T.Fragment,{children:s(H5e({transition:t,duration:h,state:p,timingFunction:m}))})}Jf.displayName="@mantine/core/Transition";const[W5e,mme]=Is("Popover component was not found in the tree");function HC({children:e,active:t=!0,refProp:n="ref",innerRef:r}){const i=SOe(t),s=Rs(i,r);return jp(e)?D.cloneElement(e,{[n]:s}):e}function gme(e){return T.jsx(oU,{tabIndex:-1,"data-autofocus":!0,...e})}HC.displayName="@mantine/core/FocusTrap";gme.displayName="@mantine/core/FocusTrapInitialFocus";HC.InitialFocus=gme;var yme={dropdown:"m_38a85659",arrow:"m_a31dc6c1",overlay:"m_3d7bc908"};const G5e={},_U=tt((e,t)=>{var y,v,b,w;const n=Me("PopoverDropdown",G5e,e),{className:r,style:i,vars:s,children:o,onKeyDownCapture:a,variant:u,classNames:l,styles:c,...d}=n,f=mme(),h=mpe({opened:f.opened,shouldReturnFocus:f.returnFocus}),p=f.withRoles?{"aria-labelledby":f.getTargetId(),id:f.getDropdownId(),role:"dialog",tabIndex:-1}:{},m=Rs(t,f.floating);return f.disabled?null:T.jsx(Z0,{...f.portalProps,withinPortal:f.withinPortal,children:T.jsx(Jf,{mounted:f.opened,...f.transitionProps,transition:((y=f.transitionProps)==null?void 0:y.transition)||"fade",duration:((v=f.transitionProps)==null?void 0:v.duration)??150,keepMounted:f.keepMounted,exitDuration:typeof((b=f.transitionProps)==null?void 0:b.exitDuration)=="number"?f.transitionProps.exitDuration:(w=f.transitionProps)==null?void 0:w.duration,children:E=>T.jsx(HC,{active:f.trapFocus&&f.opened,innerRef:m,children:T.jsxs(Se,{...p,...d,variant:u,onKeyDownCapture:hOe(f.onClose,{active:f.closeOnEscape,onTrigger:h,onKeyDown:a}),"data-position":f.placement,"data-fixed":f.floatingStrategy==="fixed"||void 0,...f.getStyles("dropdown",{className:r,props:n,classNames:l,styles:c,style:[{...E,zIndex:f.zIndex,top:f.y??0,left:f.x??0,width:f.width==="target"?void 0:$e(f.width)},f.resolvedStyles.dropdown,c==null?void 0:c.dropdown,i]}),children:[o,T.jsx(EU,{ref:f.arrowRef,arrowX:f.arrowX,arrowY:f.arrowY,visible:f.withArrow,position:f.placement,arrowSize:f.arrowSize,arrowRadius:f.arrowRadius,arrowOffset:f.arrowOffset,arrowPosition:f.arrowPosition,...f.getStyles("arrow",{props:n,classNames:l,styles:c})})]})})})})});_U.classes=yme;_U.displayName="@mantine/core/PopoverDropdown";const Y5e={refProp:"ref",popupType:"dialog"},bme=tt((e,t)=>{const{children:n,refProp:r,popupType:i,...s}=Me("PopoverTarget",Y5e,e);if(!jp(n))throw new Error("Popover.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const o=s,a=mme(),u=Rs(a.reference,f4(n),t),l=a.withRoles?{"aria-haspopup":i,"aria-expanded":a.opened,"aria-controls":a.getDropdownId(),id:a.getTargetId()}:{};return D.cloneElement(n,{...o,...l,...a.targetProps,className:qi(a.targetProps.className,o.className,n.props.className),[r]:u,...a.controlled?null:{onClick:a.onToggle}})});bme.displayName="@mantine/core/PopoverTarget";function vme({opened:e,floating:t,position:n,positionDependencies:r}){const[i,s]=D.useState(0);D.useEffect(()=>{if(t.refs.reference.current&&t.refs.floating.current&&e)return a5e(t.refs.reference.current,t.refs.floating.current,t.update)},[t.refs.reference.current,t.refs.floating.current,e,i,n]),Nf(()=>{t.update()},r),Nf(()=>{s(o=>o+1)},[e])}function K5e(e){if(e===void 0)return{shift:!0,flip:!0};const t={...e};return e.shift===void 0&&(t.shift=!0),e.flip===void 0&&(t.flip=!0),t}function X5e(e,t){const n=K5e(e.middlewares),r=[ome(e.offset)];return n.shift&&r.push(yU(typeof n.shift=="boolean"?{limiter:Bee(),padding:5}:{limiter:Bee(),padding:5,...n.shift})),n.flip&&r.push(typeof n.flip=="boolean"?PP():PP(n.flip)),n.inline&&r.push(typeof n.inline=="boolean"?jT():jT(n.inline)),r.push(ame({element:e.arrowRef,padding:e.arrowOffset})),(n.size||e.width==="target")&&r.push(y5e({...typeof n.size=="boolean"?{}:n.size,apply({rects:i,availableWidth:s,availableHeight:o,...a}){var c;const l=((c=t().refs.floating.current)==null?void 0:c.style)??{};n.size&&(typeof n.size=="object"&&n.size.apply?n.size.apply({rects:i,availableWidth:s,availableHeight:o,...a}):Object.assign(l,{maxWidth:`${s}px`,maxHeight:`${o}px`})),e.width==="target"&&Object.assign(l,{width:`${i.reference.width}px`})}})),r}function Q5e(e){const[t,n]=no({value:e.opened,defaultValue:e.defaultOpened,finalValue:!1,onChange:e.onChange}),r=D.useRef(t),i=()=>{t&&n(!1)},s=()=>n(!t),o=wU({strategy:e.strategy,placement:e.position,middleware:X5e(e,()=>o)});return vme({opened:t,position:e.position,positionDependencies:e.positionDependencies||[],floating:o}),Nf(()=>{var a;(a=e.onPositionChange)==null||a.call(e,o.placement)},[o.placement]),Nf(()=>{var a,u;t!==r.current&&(t?(u=e.onOpen)==null||u.call(e):(a=e.onClose)==null||a.call(e)),r.current=t},[t,e.onClose,e.onOpen]),{floating:o,controlled:typeof e.opened=="boolean",opened:t,onClose:i,onToggle:s}}const J5e={position:"bottom",offset:8,positionDependencies:[],transitionProps:{transition:"fade",duration:150},middlewares:{flip:!0,shift:!0,inline:!1},arrowSize:7,arrowOffset:5,arrowRadius:0,arrowPosition:"side",closeOnClickOutside:!0,withinPortal:!0,closeOnEscape:!0,trapFocus:!1,withRoles:!0,returnFocus:!1,withOverlay:!1,clickOutsideEvents:["mousedown","touchstart"],zIndex:so("popover"),__staticSelector:"Popover",width:"max-content"},Z5e=(e,{radius:t,shadow:n})=>({dropdown:{"--popover-radius":t===void 0?void 0:Dr(t),"--popover-shadow":Yz(n)}});function Po(e){var wt,Kt,Te,Oe,lt,_t;const t=Me("Popover",J5e,e),{children:n,position:r,offset:i,onPositionChange:s,positionDependencies:o,opened:a,transitionProps:u,onExitTransitionEnd:l,onEnterTransitionEnd:c,width:d,middlewares:f,withArrow:h,arrowSize:p,arrowOffset:m,arrowRadius:y,arrowPosition:v,unstyled:b,classNames:w,styles:E,closeOnClickOutside:_,withinPortal:C,portalProps:S,closeOnEscape:k,clickOutsideEvents:R,trapFocus:N,onClose:O,onOpen:F,onChange:$,zIndex:z,radius:q,shadow:W,id:J,defaultOpened:K,__staticSelector:Z,withRoles:U,disabled:L,returnFocus:Y,variant:j,keepMounted:G,vars:X,floatingStrategy:ne,withOverlay:pe,overlayProps:de,...xe}=t,Ce=$t({name:Z,props:t,classes:yme,classNames:w,styles:E,unstyled:b,rootSelector:"dropdown",vars:X,varsResolver:Z5e}),{resolvedStyles:ue}=$1({classNames:w,styles:E,props:t}),se=D.useRef(null),[me,be]=D.useState(null),[Le,Ue]=D.useState(null),{dir:Ne}=Up(),je=Ga(J),Ke=Q5e({middlewares:f,width:d,position:fme(Ne,r),offset:typeof i=="number"?i+(h?p/2:0):i,arrowRef:se,arrowOffset:m,onPositionChange:s,positionDependencies:o,opened:a,defaultOpened:K,onChange:$,onOpen:F,onClose:O,strategy:ne});yOe(()=>_&&Ke.onClose(),R,[me,Le]);const ut=D.useCallback(St=>{be(St),Ke.floating.refs.setReference(St)},[Ke.floating.refs.setReference]),pt=D.useCallback(St=>{Ue(St),Ke.floating.refs.setFloating(St)},[Ke.floating.refs.setFloating]),xt=D.useCallback(()=>{var St;(St=u==null?void 0:u.onExited)==null||St.call(u),l==null||l()},[u==null?void 0:u.onExited,l]),De=D.useCallback(()=>{var St;(St=u==null?void 0:u.onEntered)==null||St.call(u),c==null||c()},[u==null?void 0:u.onEntered,c]);return T.jsxs(W5e,{value:{returnFocus:Y,disabled:L,controlled:Ke.controlled,reference:ut,floating:pt,x:Ke.floating.x,y:Ke.floating.y,arrowX:(Te=(Kt=(wt=Ke.floating)==null?void 0:wt.middlewareData)==null?void 0:Kt.arrow)==null?void 0:Te.x,arrowY:(_t=(lt=(Oe=Ke.floating)==null?void 0:Oe.middlewareData)==null?void 0:lt.arrow)==null?void 0:_t.y,opened:Ke.opened,arrowRef:se,transitionProps:{...u,onExited:xt,onEntered:De},width:d,withArrow:h,arrowSize:p,arrowOffset:m,arrowRadius:y,arrowPosition:v,placement:Ke.floating.placement,trapFocus:N,withinPortal:C,portalProps:S,zIndex:z,radius:q,shadow:W,closeOnEscape:k,onClose:Ke.onClose,onToggle:Ke.onToggle,getTargetId:()=>`${je}-target`,getDropdownId:()=>`${je}-dropdown`,withRoles:U,targetProps:xe,__staticSelector:Z,classNames:w,styles:E,unstyled:b,variant:j,keepMounted:G,getStyles:Ce,resolvedStyles:ue,floatingStrategy:ne},children:[n,pe&&T.jsx(Jf,{transition:"fade",mounted:Ke.opened,duration:(u==null?void 0:u.duration)||250,exitDuration:(u==null?void 0:u.exitDuration)||250,children:St=>T.jsx(Z0,{withinPortal:C,children:T.jsx(Tx,{...de,...Ce("overlay",{className:de==null?void 0:de.className,style:[St,de==null?void 0:de.style]})})})})]})}Po.Target=bme;Po.Dropdown=_U;Po.displayName="@mantine/core/Popover";Po.extend=e=>e;var Kc={root:"m_5ae2e3c",barsLoader:"m_7a2bd4cd",bar:"m_870bb79","bars-loader-animation":"m_5d2b3b9d",dotsLoader:"m_4e3f22d7",dot:"m_870c4af","loader-dots-animation":"m_aac34a1",ovalLoader:"m_b34414df","oval-loader-animation":"m_f8e89c4b"};const xme=D.forwardRef(({className:e,...t},n)=>T.jsxs(Se,{component:"span",className:qi(Kc.barsLoader,e),...t,ref:n,children:[T.jsx("span",{className:Kc.bar}),T.jsx("span",{className:Kc.bar}),T.jsx("span",{className:Kc.bar})]}));xme.displayName="@mantine/core/Bars";const wme=D.forwardRef(({className:e,...t},n)=>T.jsxs(Se,{component:"span",className:qi(Kc.dotsLoader,e),...t,ref:n,children:[T.jsx("span",{className:Kc.dot}),T.jsx("span",{className:Kc.dot}),T.jsx("span",{className:Kc.dot})]}));wme.displayName="@mantine/core/Dots";const Eme=D.forwardRef(({className:e,...t},n)=>T.jsx(Se,{component:"span",className:qi(Kc.ovalLoader,e),...t,ref:n}));Eme.displayName="@mantine/core/Oval";const _me={bars:xme,oval:Eme,dots:wme},eMe={loaders:_me,type:"oval"},tMe=(e,{size:t,color:n})=>({root:{"--loader-size":mn(t,"loader-size"),"--loader-color":n?Vr(n,e):void 0}}),bd=tt((e,t)=>{const n=Me("Loader",eMe,e),{size:r,color:i,type:s,vars:o,className:a,style:u,classNames:l,styles:c,unstyled:d,loaders:f,variant:h,children:p,...m}=n,y=$t({name:"Loader",props:n,classes:Kc,className:a,style:u,classNames:l,styles:c,unstyled:d,vars:o,varsResolver:tMe});return p?T.jsx(Se,{...y("root"),ref:t,...m,children:p}):T.jsx(Se,{...y("root"),ref:t,component:f[s],variant:h,size:r,...m})});bd.defaultLoaders=_me;bd.classes=Kc;bd.displayName="@mantine/core/Loader";var Iw={root:"m_8d3f4000",icon:"m_8d3afb97",loader:"m_302b9fb1",group:"m_1a0f1b21",groupSection:"m_437b6484"};const Kee={orientation:"horizontal"},nMe=(e,{borderWidth:t})=>({group:{"--ai-border-width":$e(t)}}),TU=tt((e,t)=>{const n=Me("ActionIconGroup",Kee,e),{className:r,style:i,classNames:s,styles:o,unstyled:a,orientation:u,vars:l,borderWidth:c,variant:d,mod:f,...h}=Me("ActionIconGroup",Kee,e),p=$t({name:"ActionIconGroup",props:n,classes:Iw,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:l,varsResolver:nMe,rootSelector:"group"});return T.jsx(Se,{...p("group"),ref:t,variant:d,mod:[{"data-orientation":u},f],role:"group",...h})});TU.classes=Iw;TU.displayName="@mantine/core/ActionIconGroup";const Xee={},rMe=(e,{radius:t,color:n,gradient:r,variant:i,autoContrast:s,size:o})=>{const a=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:s});return{groupSection:{"--section-height":mn(o,"section-height"),"--section-padding-x":mn(o,"section-padding-x"),"--section-fz":Do(o),"--section-radius":t===void 0?void 0:Dr(t),"--section-bg":n||i?a.background:void 0,"--section-color":a.color,"--section-bd":n||i?a.border:void 0}}},CU=tt((e,t)=>{const n=Me("ActionIconGroupSection",Xee,e),{className:r,style:i,classNames:s,styles:o,unstyled:a,vars:u,variant:l,gradient:c,radius:d,autoContrast:f,...h}=Me("ActionIconGroupSection",Xee,e),p=$t({name:"ActionIconGroupSection",props:n,classes:Iw,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:u,varsResolver:rMe,rootSelector:"groupSection"});return T.jsx(Se,{...p("groupSection"),ref:t,variant:l,...h})});CU.classes=Iw;CU.displayName="@mantine/core/ActionIconGroupSection";const iMe={},sMe=(e,{size:t,radius:n,variant:r,gradient:i,color:s,autoContrast:o})=>{const a=e.variantColorResolver({color:s||e.primaryColor,theme:e,gradient:i,variant:r||"filled",autoContrast:o});return{root:{"--ai-size":mn(t,"ai-size"),"--ai-radius":n===void 0?void 0:Dr(n),"--ai-bg":s||r?a.background:void 0,"--ai-hover":s||r?a.hover:void 0,"--ai-hover-color":s||r?a.hoverColor:void 0,"--ai-color":a.color,"--ai-bd":s||r?a.border:void 0}}},eg=os((e,t)=>{const n=Me("ActionIcon",iMe,e),{className:r,unstyled:i,variant:s,classNames:o,styles:a,style:u,loading:l,loaderProps:c,size:d,color:f,radius:h,__staticSelector:p,gradient:m,vars:y,children:v,disabled:b,"data-disabled":w,autoContrast:E,mod:_,...C}=n,S=$t({name:["ActionIcon",p],props:n,className:r,style:u,classes:Iw,classNames:o,styles:a,unstyled:i,vars:y,varsResolver:sMe});return T.jsxs(ku,{...S("root",{active:!b&&!l&&!w}),...C,unstyled:i,variant:s,size:d,disabled:b||l,ref:t,mod:[{loading:l,disabled:b||w},_],children:[T.jsx(Jf,{mounted:!!l,transition:"slide-down",duration:150,children:k=>T.jsx(Se,{component:"span",...S("loader",{style:k}),"aria-hidden":!0,children:T.jsx(bd,{color:"var(--ai-color)",size:"calc(var(--ai-size) * 0.55)",...c})})}),T.jsx(Se,{component:"span",mod:{loading:l},...S("icon"),children:v})]})});eg.classes=Iw;eg.displayName="@mantine/core/ActionIcon";eg.Group=TU;eg.GroupSection=CU;const Tme=D.forwardRef(({size:e="var(--cb-icon-size, 70%)",style:t,...n},r)=>T.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...t,width:e,height:e},ref:r,...n,children:T.jsx("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})}));Tme.displayName="@mantine/core/CloseIcon";var Cme={root:"m_86a44da5","root--subtle":"m_220c80f2"};const oMe={variant:"subtle"},aMe=(e,{size:t,radius:n,iconSize:r})=>({root:{"--cb-size":mn(t,"cb-size"),"--cb-radius":n===void 0?void 0:Dr(n),"--cb-icon-size":$e(r)}}),tg=os((e,t)=>{const n=Me("CloseButton",oMe,e),{iconSize:r,children:i,vars:s,radius:o,className:a,classNames:u,style:l,styles:c,unstyled:d,"data-disabled":f,disabled:h,variant:p,icon:m,mod:y,__staticSelector:v,...b}=n,w=$t({name:v||"CloseButton",props:n,className:a,style:l,classes:Cme,classNames:u,styles:c,unstyled:d,vars:s,varsResolver:aMe});return T.jsxs(ku,{ref:t,...b,unstyled:d,variant:p,disabled:h,mod:[{disabled:h||f},y],...w("root",{variant:p,active:!h&&!f}),children:[m||T.jsx(Tme,{}),i]})});tg.classes=Cme;tg.displayName="@mantine/core/CloseButton";function uMe(e){return D.Children.toArray(e).filter(Boolean)}var Sme={root:"m_4081bf90"};const lMe={preventGrowOverflow:!0,gap:"md",align:"center",justify:"flex-start",wrap:"wrap"},cMe=(e,{grow:t,preventGrowOverflow:n,gap:r,align:i,justify:s,wrap:o},{childWidth:a})=>({root:{"--group-child-width":t&&n?a:void 0,"--group-gap":ns(r),"--group-align":i,"--group-justify":s,"--group-wrap":o}}),Ti=tt((e,t)=>{const n=Me("Group",lMe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,children:u,gap:l,align:c,justify:d,wrap:f,grow:h,preventGrowOverflow:p,vars:m,variant:y,__size:v,mod:b,...w}=n,E=uMe(u),_=E.length,C=ns(l??"md"),k={childWidth:`calc(${100/_}% - (${C} - ${C} / ${_}))`},R=$t({name:"Group",props:n,stylesCtx:k,className:i,style:s,classes:Sme,classNames:r,styles:o,unstyled:a,vars:m,varsResolver:cMe});return T.jsx(Se,{...R("root"),ref:t,variant:y,mod:[{grow:h},b],size:v,...w,children:E})});Ti.classes=Sme;Ti.displayName="@mantine/core/Group";const[dMe,Hp]=Is("ModalBase component was not found in tree");function fMe({opened:e,transitionDuration:t}){const[n,r]=D.useState(e),i=D.useRef(-1),o=d4()?0:t;return D.useEffect(()=>(e?(r(!0),window.clearTimeout(i.current)):o===0?r(!1):i.current=window.setTimeout(()=>r(!1),o),()=>window.clearTimeout(i.current)),[e,o]),n}function hMe({id:e,transitionProps:t,opened:n,trapFocus:r,closeOnEscape:i,onClose:s,returnFocus:o}){const a=Ga(e),[u,l]=D.useState(!1),[c,d]=D.useState(!1),f=typeof(t==null?void 0:t.duration)=="number"?t==null?void 0:t.duration:200,h=fMe({opened:n,transitionDuration:f});return vpe("keydown",p=>{var m;p.key==="Escape"&&i&&n&&((m=p.target)==null?void 0:m.getAttribute("data-mantine-stop-propagation"))!=="true"&&s()},{capture:!0}),mpe({opened:n,shouldReturnFocus:r&&o}),{_id:a,titleMounted:u,bodyMounted:c,shouldLockScroll:h,setTitleMounted:l,setBodyMounted:d}}const SU=D.forwardRef(({keepMounted:e,opened:t,onClose:n,id:r,transitionProps:i,onExitTransitionEnd:s,onEnterTransitionEnd:o,trapFocus:a,closeOnEscape:u,returnFocus:l,closeOnClickOutside:c,withinPortal:d,portalProps:f,lockScroll:h,children:p,zIndex:m,shadow:y,padding:v,__vars:b,unstyled:w,removeScrollProps:E,..._},C)=>{const{_id:S,titleMounted:k,bodyMounted:R,shouldLockScroll:N,setTitleMounted:O,setBodyMounted:F}=hMe({id:r,transitionProps:i,opened:t,trapFocus:a,closeOnEscape:u,onClose:n,returnFocus:l}),{key:$,...z}=E||{};return T.jsx(Z0,{...f,withinPortal:d,children:T.jsx(dMe,{value:{opened:t,onClose:n,closeOnClickOutside:c,onExitTransitionEnd:s,onEnterTransitionEnd:o,transitionProps:{...i,keepMounted:e},getTitleId:()=>`${S}-title`,getBodyId:()=>`${S}-body`,titleMounted:k,bodyMounted:R,setTitleMounted:O,setBodyMounted:F,trapFocus:a,closeOnEscape:u,zIndex:m,unstyled:w},children:T.jsx(xx,{enabled:N&&h,...z,children:T.jsx(Se,{ref:C,..._,__vars:{...b,"--mb-z-index":(m||so("modal")).toString(),"--mb-shadow":Yz(y),"--mb-padding":ns(v)},children:p})},$)})})});SU.displayName="@mantine/core/ModalBase";function pMe(){const e=Hp();return D.useEffect(()=>(e.setBodyMounted(!0),()=>e.setBodyMounted(!1)),[]),e.getBodyId()}var Cx={title:"m_615af6c9",header:"m_b5489c3c",inner:"m_60c222c7",content:"m_fd1ab0aa",close:"m_606cb269",body:"m_5df29311"};const AU=D.forwardRef(({className:e,...t},n)=>{const r=pMe(),i=Hp();return T.jsx(Se,{ref:n,...t,id:r,className:qi({[Cx.body]:!i.unstyled},e)})});AU.displayName="@mantine/core/ModalBaseBody";const kU=D.forwardRef(({className:e,onClick:t,...n},r)=>{const i=Hp();return T.jsx(tg,{ref:r,...n,onClick:s=>{i.onClose(),t==null||t(s)},className:qi({[Cx.close]:!i.unstyled},e),unstyled:i.unstyled})});kU.displayName="@mantine/core/ModalBaseCloseButton";const IU=D.forwardRef(({transitionProps:e,className:t,innerProps:n,onKeyDown:r,style:i,...s},o)=>{const a=Hp();return T.jsx(Jf,{mounted:a.opened,transition:"pop",...a.transitionProps,onExited:()=>{var u,l,c;(u=a.onExitTransitionEnd)==null||u.call(a),(c=(l=a.transitionProps)==null?void 0:l.onExited)==null||c.call(l)},onEntered:()=>{var u,l,c;(u=a.onEnterTransitionEnd)==null||u.call(a),(c=(l=a.transitionProps)==null?void 0:l.onEntered)==null||c.call(l)},...e,children:u=>T.jsx("div",{...n,className:qi({[Cx.inner]:!a.unstyled},n.className),children:T.jsx(HC,{active:a.opened&&a.trapFocus,innerRef:o,children:T.jsx(Cw,{...s,component:"section",role:"dialog",tabIndex:-1,"aria-modal":!0,"aria-describedby":a.bodyMounted?a.getBodyId():void 0,"aria-labelledby":a.titleMounted?a.getTitleId():void 0,style:[i,u],className:qi({[Cx.content]:!a.unstyled},t),unstyled:a.unstyled,children:s.children})})})})});IU.displayName="@mantine/core/ModalBaseContent";const RU=D.forwardRef(({className:e,...t},n)=>{const r=Hp();return T.jsx(Se,{component:"header",ref:n,className:qi({[Cx.header]:!r.unstyled},e),...t})});RU.displayName="@mantine/core/ModalBaseHeader";const mMe={duration:200,timingFunction:"ease",transition:"fade"};function gMe(e){const t=Hp();return{...mMe,...t.transitionProps,...e}}const DU=D.forwardRef(({onClick:e,transitionProps:t,style:n,visible:r,...i},s)=>{const o=Hp(),a=gMe(t);return T.jsx(Jf,{mounted:r!==void 0?r:o.opened,...a,transition:"fade",children:u=>T.jsx(Tx,{ref:s,fixed:!0,style:[n,u],zIndex:o.zIndex,unstyled:o.unstyled,onClick:l=>{e==null||e(l),o.closeOnClickOutside&&o.onClose()},...i})})});DU.displayName="@mantine/core/ModalBaseOverlay";function yMe(){const e=Hp();return D.useEffect(()=>(e.setTitleMounted(!0),()=>e.setTitleMounted(!1)),[]),e.getTitleId()}const PU=D.forwardRef(({className:e,...t},n)=>{const r=yMe(),i=Hp();return T.jsx(Se,{component:"h2",ref:n,className:qi({[Cx.title]:!i.unstyled},e),...t,id:r})});PU.displayName="@mantine/core/ModalBaseTitle";function Ame({children:e}){return T.jsx(T.Fragment,{children:e})}const[bMe,vMe]=zp({size:"sm"}),xMe={},kme=tt((e,t)=>{const n=Me("InputClearButton",xMe,e),{size:r,variant:i,vars:s,classNames:o,styles:a,...u}=n,l=vMe(),{resolvedClassNames:c,resolvedStyles:d}=$1({classNames:o,styles:a,props:n});return T.jsx(tg,{variant:i||"transparent",ref:t,size:r||(l==null?void 0:l.size)||"sm",classNames:c,styles:d,__staticSelector:"InputClearButton",...u})});kme.displayName="@mantine/core/InputClearButton";const[wMe,Rw]=zp({offsetBottom:!1,offsetTop:!1,describedBy:void 0,getStyles:null,inputId:void 0,labelId:void 0});var lc={wrapper:"m_6c018570",input:"m_8fb7ebe7",section:"m_82577fc2",placeholder:"m_88bacfd0",root:"m_46b77525",label:"m_8fdc1311",required:"m_78a94662",error:"m_8f816625",description:"m_fe47ce59"};const Qee={},EMe=(e,{size:t})=>({description:{"--input-description-size":t===void 0?void 0:`calc(${Do(t)} - ${$e(2)})`}}),x4=tt((e,t)=>{const n=Me("InputDescription",Qee,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,__staticSelector:c,__inheritStyles:d=!0,variant:f,...h}=Me("InputDescription",Qee,n),p=Rw(),m=$t({name:["InputWrapper",c],props:n,classes:lc,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"description",vars:u,varsResolver:EMe}),y=d&&(p==null?void 0:p.getStyles)||m;return T.jsx(Se,{component:"p",ref:t,variant:f,size:l,...y("description",p!=null&&p.getStyles?{className:i,style:s}:void 0),...h})});x4.classes=lc;x4.displayName="@mantine/core/InputDescription";const _Me={},TMe=(e,{size:t})=>({error:{"--input-error-size":t===void 0?void 0:`calc(${Do(t)} - ${$e(2)})`}}),w4=tt((e,t)=>{const n=Me("InputError",_Me,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,__staticSelector:c,__inheritStyles:d=!0,variant:f,...h}=n,p=$t({name:["InputWrapper",c],props:n,classes:lc,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"error",vars:u,varsResolver:TMe}),m=Rw(),y=d&&(m==null?void 0:m.getStyles)||p;return T.jsx(Se,{component:"p",ref:t,variant:f,size:l,...y("error",m!=null&&m.getStyles?{className:i,style:s}:void 0),...h})});w4.classes=lc;w4.displayName="@mantine/core/InputError";const Jee={labelElement:"label"},CMe=(e,{size:t})=>({label:{"--input-label-size":Do(t),"--input-asterisk-color":void 0}}),E4=tt((e,t)=>{const n=Me("InputLabel",Jee,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,labelElement:l,size:c,required:d,htmlFor:f,onMouseDown:h,children:p,__staticSelector:m,variant:y,mod:v,...b}=Me("InputLabel",Jee,n),w=$t({name:["InputWrapper",m],props:n,classes:lc,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"label",vars:u,varsResolver:CMe}),E=Rw(),_=(E==null?void 0:E.getStyles)||w;return T.jsxs(Se,{..._("label",E!=null&&E.getStyles?{className:i,style:s}:void 0),component:l,variant:y,size:c,ref:t,htmlFor:l==="label"?f:void 0,mod:[{required:d},v],onMouseDown:C=>{h==null||h(C),!C.defaultPrevented&&C.detail>1&&C.preventDefault()},...b,children:[p,d&&T.jsx("span",{..._("required"),"aria-hidden":!0,children:" *"})]})});E4.classes=lc;E4.displayName="@mantine/core/InputLabel";const Zee={},NU=tt((e,t)=>{const n=Me("InputPlaceholder",Zee,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,variant:c,error:d,mod:f,...h}=Me("InputPlaceholder",Zee,n),p=$t({name:["InputPlaceholder",l],props:n,classes:lc,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"placeholder"});return T.jsx(Se,{...p("placeholder"),mod:[{error:!!d},f],component:"span",variant:c,ref:t,...h})});NU.classes=lc;NU.displayName="@mantine/core/InputPlaceholder";function SMe(e,{hasDescription:t,hasError:n}){const r=e.findIndex(u=>u==="input"),i=e.slice(0,r),s=e.slice(r+1),o=t&&i.includes("description")||n&&i.includes("error");return{offsetBottom:t&&s.includes("description")||n&&s.includes("error"),offsetTop:o}}const AMe={labelElement:"label",inputContainer:e=>e,inputWrapperOrder:["label","description","input","error"]},kMe=(e,{size:t})=>({label:{"--input-label-size":Do(t),"--input-asterisk-color":void 0},error:{"--input-error-size":t===void 0?void 0:`calc(${Do(t)} - ${$e(2)})`},description:{"--input-description-size":t===void 0?void 0:`calc(${Do(t)} - ${$e(2)})`}}),OU=tt((e,t)=>{const n=Me("InputWrapper",AMe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,variant:c,__staticSelector:d,inputContainer:f,inputWrapperOrder:h,label:p,error:m,description:y,labelProps:v,descriptionProps:b,errorProps:w,labelElement:E,children:_,withAsterisk:C,id:S,required:k,__stylesApiProps:R,mod:N,...O}=n,F=$t({name:["InputWrapper",d],props:R||n,classes:lc,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:kMe}),$={size:l,variant:c,__staticSelector:d},z=Ga(S),q=typeof C=="boolean"?C:k,W=(w==null?void 0:w.id)||`${z}-error`,J=(b==null?void 0:b.id)||`${z}-description`,K=z,Z=!!m&&typeof m!="boolean",U=!!y,L=`${Z?W:""} ${U?J:""}`,Y=L.trim().length>0?L.trim():void 0,j=(v==null?void 0:v.id)||`${z}-label`,G=p&&T.jsx(E4,{labelElement:E,id:j,htmlFor:K,required:q,...$,...v,children:p},"label"),X=U&&T.jsx(x4,{...b,...$,size:(b==null?void 0:b.size)||$.size,id:(b==null?void 0:b.id)||J,children:y},"description"),ne=T.jsx(D.Fragment,{children:f(_)},"input"),pe=Z&&D.createElement(w4,{...w,...$,size:(w==null?void 0:w.size)||$.size,key:"error",id:(w==null?void 0:w.id)||W},m),de=h.map(xe=>{switch(xe){case"label":return G;case"input":return ne;case"description":return X;case"error":return pe;default:return null}});return T.jsx(wMe,{value:{getStyles:F,describedBy:Y,inputId:K,labelId:j,...SMe(h,{hasDescription:U,hasError:Z})},children:T.jsx(Se,{ref:t,variant:c,size:l,mod:[{error:!!m},N],...F("root"),...O,children:de})})});OU.classes=lc;OU.displayName="@mantine/core/InputWrapper";const IMe={variant:"default",leftSectionPointerEvents:"none",rightSectionPointerEvents:"none",withAria:!0,withErrorStyles:!0},RMe=(e,t,n)=>({wrapper:{"--input-margin-top":n.offsetTop?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-margin-bottom":n.offsetBottom?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-height":mn(t.size,"input-height"),"--input-fz":Do(t.size),"--input-radius":t.radius===void 0?void 0:Dr(t.radius),"--input-left-section-width":t.leftSectionWidth!==void 0?$e(t.leftSectionWidth):void 0,"--input-right-section-width":t.rightSectionWidth!==void 0?$e(t.rightSectionWidth):void 0,"--input-padding-y":t.multiline?mn(t.size,"input-padding-y"):void 0,"--input-left-section-pointer-events":t.leftSectionPointerEvents,"--input-right-section-pointer-events":t.rightSectionPointerEvents}}),Fr=os((e,t)=>{const n=Me("Input",IMe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,required:u,__staticSelector:l,__stylesApiProps:c,size:d,wrapperProps:f,error:h,disabled:p,leftSection:m,leftSectionProps:y,leftSectionWidth:v,rightSection:b,rightSectionProps:w,rightSectionWidth:E,rightSectionPointerEvents:_,leftSectionPointerEvents:C,variant:S,vars:k,pointer:R,multiline:N,radius:O,id:F,withAria:$,withErrorStyles:z,mod:q,inputSize:W,__clearSection:J,__clearable:K,__defaultRightSection:Z,...U}=n,{styleProps:L,rest:Y}=L1(U),j=Rw(),G={offsetBottom:j==null?void 0:j.offsetBottom,offsetTop:j==null?void 0:j.offsetTop},X=$t({name:["Input",l],props:c||n,classes:lc,className:i,style:s,classNames:r,styles:o,unstyled:a,stylesCtx:G,rootSelector:"wrapper",vars:k,varsResolver:RMe}),ne=$?{required:u,disabled:p,"aria-invalid":!!h,"aria-describedby":j==null?void 0:j.describedBy,id:(j==null?void 0:j.inputId)||F}:{},pe=b||K&&J||Z;return T.jsx(bMe,{value:{size:d||"sm"},children:T.jsxs(Se,{...X("wrapper"),...L,...f,mod:[{error:!!h&&z,pointer:R,disabled:p,multiline:N,"data-with-right-section":!!b,"data-with-left-section":!!m},q],variant:S,size:d,children:[m&&T.jsx("div",{...y,"data-position":"left",...X("section",{className:y==null?void 0:y.className,style:y==null?void 0:y.style}),children:m}),T.jsx(Se,{component:"input",...Y,...ne,ref:t,required:u,mod:{disabled:p,error:!!h&&z},variant:S,__size:W,...X("input")}),pe&&T.jsx("div",{...w,"data-position":"right",...X("section",{className:w==null?void 0:w.className,style:w==null?void 0:w.style}),children:pe})]})})});Fr.classes=lc;Fr.Wrapper=OU;Fr.Label=E4;Fr.Error=w4;Fr.Description=x4;Fr.Placeholder=NU;Fr.ClearButton=kme;Fr.displayName="@mantine/core/Input";function DMe(e,t,n){const r=Me(e,t,n),{label:i,description:s,error:o,required:a,classNames:u,styles:l,className:c,unstyled:d,__staticSelector:f,__stylesApiProps:h,errorProps:p,labelProps:m,descriptionProps:y,wrapperProps:v,id:b,size:w,style:E,inputContainer:_,inputWrapperOrder:C,withAsterisk:S,variant:k,vars:R,mod:N,...O}=r,{styleProps:F,rest:$}=L1(O),z={label:i,description:s,error:o,required:a,classNames:u,className:c,__staticSelector:f,__stylesApiProps:h||r,errorProps:p,labelProps:m,descriptionProps:y,unstyled:d,styles:l,size:w,style:E,inputContainer:_,inputWrapperOrder:C,withAsterisk:S,variant:k,id:b,mod:N,...v};return{...$,classNames:u,styles:l,unstyled:d,wrapperProps:{...z,...F},inputProps:{required:a,classNames:u,styles:l,unstyled:d,size:w,__staticSelector:f,__stylesApiProps:h||r,error:o,variant:k,id:b}}}const PMe={__staticSelector:"InputBase",withAria:!0},Mu=os((e,t)=>{const{inputProps:n,wrapperProps:r,...i}=DMe("InputBase",PMe,e);return T.jsx(Fr.Wrapper,{...r,children:T.jsx(Fr,{...n,...i,ref:t})})});Mu.classes={...Fr.classes,...Fr.Wrapper.classes};Mu.displayName="@mantine/core/InputBase";const NMe={gap:{type:"spacing",property:"gap"},rowGap:{type:"spacing",property:"rowGap"},columnGap:{type:"spacing",property:"columnGap"},align:{type:"identity",property:"alignItems"},justify:{type:"identity",property:"justifyContent"},wrap:{type:"identity",property:"flexWrap"},direction:{type:"identity",property:"flexDirection"}};var Ime={root:"m_8bffd616"};const OMe={},Ft=os((e,t)=>{const n=Me("Flex",OMe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,gap:l,rowGap:c,columnGap:d,align:f,justify:h,wrap:p,direction:m,...y}=n,v=$t({name:"Flex",classes:Ime,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u}),b=ss(),w=UC(),E=Ape({styleProps:{gap:l,rowGap:c,columnGap:d,align:f,justify:h,wrap:p,direction:m},theme:b,data:NMe});return T.jsxs(T.Fragment,{children:[E.hasResponsiveStyles&&T.jsx(M1,{selector:`.${w}`,styles:E.styles,media:E.media}),T.jsx(Se,{ref:t,...v("root",{className:w,style:Q0(E.inlineStyles)}),...y})]})});Ft.classes=Ime;Ft.displayName="@mantine/core/Flex";const[$Me,$U]=Is("Accordion component was not found in the tree");function _4({style:e,size:t=16,...n}){return T.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...e,width:$e(t),height:$e(t),display:"block"},...n,children:T.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}_4.displayName="@mantine/core/AccordionChevron";const[MMe,Rme]=Is("Accordion.Item component was not found in the tree");var qC={root:"m_9bdbb667",panel:"m_df78851f",content:"m_4ba554d4",itemTitle:"m_8fa820a0",control:"m_4ba585b8","control--default":"m_6939a5e9","control--contained":"m_4271d21b",label:"m_df3ffa0f",chevron:"m_3f35ae96",icon:"m_9bd771fe",item:"m_9bd7b098","item--default":"m_fe19b709","item--contained":"m_1f921b3b","item--filled":"m_2cdf939a","item--separated":"m_9f59b069"};const LMe={},MU=tt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,chevron:a,icon:u,onClick:l,onKeyDown:c,children:d,disabled:f,mod:h,...p}=Me("AccordionControl",LMe,e),{value:m}=Rme(),y=$U(),v=y.isItemActive(m),b=typeof y.order=="number",w=`h${y.order}`,E=T.jsxs(ku,{...p,...y.getStyles("control",{className:r,classNames:n,style:i,styles:s,variant:y.variant}),unstyled:y.unstyled,mod:["accordion-control",{active:v,"chevron-position":y.chevronPosition,disabled:f},h],ref:t,onClick:_=>{l==null||l(_),y.onChange(m)},type:"button",disabled:f,"aria-expanded":v,"aria-controls":y.getRegionId(m),id:y.getControlId(m),onKeyDown:Gz({siblingSelector:"[data-accordion-control]",parentSelector:"[data-accordion]",activateOnFocus:!1,loop:y.loop,orientation:"vertical",onKeyDown:c}),children:[T.jsx(Se,{component:"span",mod:{rotate:!y.disableChevronRotation&&v,position:y.chevronPosition},...y.getStyles("chevron",{classNames:n,styles:s}),children:a||y.chevron}),T.jsx("span",{...y.getStyles("label",{classNames:n,styles:s}),children:d}),u&&T.jsx(Se,{component:"span",mod:{"chevron-position":y.chevronPosition},...y.getStyles("icon",{classNames:n,styles:s}),children:u})]});return b?T.jsx(w,{...y.getStyles("itemTitle",{classNames:n,styles:s}),children:E}):E});MU.displayName="@mantine/core/AccordionControl";MU.classes=qC;const FMe={},LU=tt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,value:a,mod:u,...l}=Me("AccordionItem",FMe,e),c=$U();return T.jsx(MMe,{value:{value:a},children:T.jsx(Se,{ref:t,mod:[{active:c.isItemActive(a)},u],...c.getStyles("item",{className:r,classNames:n,styles:s,style:i,variant:c.variant}),...l})})});LU.displayName="@mantine/core/AccordionItem";LU.classes=qC;const BMe={},FU=tt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,children:a,...u}=Me("AccordionPanel",BMe,e),{value:l}=Rme(),c=$U();return T.jsx(m4,{ref:t,...c.getStyles("panel",{className:r,classNames:n,style:i,styles:s}),...u,in:c.isItemActive(l),transitionDuration:c.transitionDuration??200,role:"region",id:c.getRegionId(l),"aria-labelledby":c.getControlId(l),children:T.jsx("div",{...c.getStyles("content",{classNames:n,styles:s}),children:a})})});FU.displayName="@mantine/core/AccordionPanel";FU.classes=qC;const jMe={multiple:!1,disableChevronRotation:!1,chevronPosition:"right",variant:"default",chevron:T.jsx(_4,{})},zMe=(e,{transitionDuration:t,chevronSize:n,radius:r})=>({root:{"--accordion-transition-duration":t===void 0?void 0:`${t}ms`,"--accordion-chevron-size":n===void 0?void 0:$e(n),"--accordion-radius":r===void 0?void 0:Dr(r)}});function na(e){const t=Me("Accordion",jMe,e),{classNames:n,className:r,style:i,styles:s,unstyled:o,vars:a,children:u,multiple:l,value:c,defaultValue:d,onChange:f,id:h,loop:p,transitionDuration:m,disableChevronRotation:y,chevronPosition:v,chevronSize:b,order:w,chevron:E,variant:_,radius:C,...S}=t,k=Ga(h),[R,N]=no({value:c,defaultValue:d,finalValue:l?[]:null,onChange:f}),O=z=>Array.isArray(R)?R.includes(z):z===R,F=z=>{const q=Array.isArray(R)?R.includes(z)?R.filter(W=>W!==z):[...R,z]:z===R?null:z;N(q)},$=$t({name:"Accordion",classes:qC,props:t,className:r,style:i,classNames:n,styles:s,unstyled:o,vars:a,varsResolver:zMe});return T.jsx($Me,{value:{isItemActive:O,onChange:F,getControlId:TP(`${k}-control`,"Accordion.Item component was rendered with invalid value or without value"),getRegionId:TP(`${k}-panel`,"Accordion.Item component was rendered with invalid value or without value"),transitionDuration:m,disableChevronRotation:y,chevronPosition:v,order:w,chevron:E,loop:p,getStyles:$,variant:_,unstyled:o},children:T.jsx(Se,{...$("root"),id:k,...S,variant:_,"data-accordion":!0,children:u})})}const UMe=e=>e;na.extend=UMe;na.withProps=K6e(na);na.classes=qC;na.displayName="@mantine/core/Accordion";na.Item=LU;na.Panel=FU;na.Control=MU;na.Chevron=_4;var Dme={root:"m_7f854edf"};const VMe={position:{bottom:0,right:0},zIndex:so("modal"),withinPortal:!0},HMe=(e,{zIndex:t,position:n})=>({root:{"--affix-z-index":t==null?void 0:t.toString(),"--affix-top":$e(n==null?void 0:n.top),"--affix-left":$e(n==null?void 0:n.left),"--affix-bottom":$e(n==null?void 0:n.bottom),"--affix-right":$e(n==null?void 0:n.right)}}),BU=tt((e,t)=>{const n=Me("Affix",VMe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,portalProps:l,zIndex:c,withinPortal:d,position:f,...h}=n,p=$t({name:"Affix",classes:Dme,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:HMe});return T.jsx(Z0,{...l,withinPortal:d,children:T.jsx(Se,{ref:t,...p("root"),...h})})});BU.classes=Dme;BU.displayName="@mantine/core/Affix";var Pme={root:"m_66836ed3",wrapper:"m_a5d60502",body:"m_667c2793",title:"m_6a03f287",label:"m_698f4f23",icon:"m_667f2a6a",message:"m_7fa78076",closeButton:"m_87f54839"};const qMe={},WMe=(e,{radius:t,color:n,variant:r,autoContrast:i})=>{const s=e.variantColorResolver({color:n||e.primaryColor,theme:e,variant:r||"light",autoContrast:i});return{root:{"--alert-radius":t===void 0?void 0:Dr(t),"--alert-bg":n||r?s.background:void 0,"--alert-color":s.color,"--alert-bd":n||r?s.border:void 0}}},up=tt((e,t)=>{const n=Me("Alert",qMe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,radius:l,color:c,title:d,children:f,id:h,icon:p,withCloseButton:m,onClose:y,closeButtonLabel:v,variant:b,autoContrast:w,...E}=n,_=$t({name:"Alert",classes:Pme,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:WMe}),C=Ga(h),S=d&&`${C}-title`||void 0,k=`${C}-body`;return T.jsx(Se,{id:C,..._("root",{variant:b}),variant:b,ref:t,...E,role:"alert","aria-describedby":k,"aria-labelledby":S,children:T.jsxs("div",{..._("wrapper"),children:[p&&T.jsx("div",{..._("icon"),children:p}),T.jsxs("div",{..._("body"),children:[d&&T.jsx("div",{..._("title"),"data-with-close-button":m||void 0,children:T.jsx("span",{id:S,..._("label"),children:d})}),f&&T.jsx("div",{id:k,..._("message"),"data-variant":b,children:f})]}),m&&T.jsx(tg,{..._("closeButton"),onClick:y,variant:"transparent",size:16,iconSize:16,"aria-label":v,unstyled:a})]})})});up.classes=Pme;up.displayName="@mantine/core/Alert";var Nme={root:"m_b6d8b162"};function GMe(e){if(e==="start")return"start";if(e==="end"||e)return"end"}const YMe={inherit:!1},KMe=(e,{variant:t,lineClamp:n,gradient:r,size:i,color:s})=>({root:{"--text-fz":Do(i),"--text-lh":ppe(i),"--text-gradient":t==="gradient"?D9(r,e):void 0,"--text-line-clamp":typeof n=="number"?n.toString():void 0,"--text-color":s?Vr(s,e):void 0}}),Je=os((e,t)=>{const n=Me("Text",YMe,e),{lineClamp:r,truncate:i,inline:s,inherit:o,gradient:a,span:u,__staticSelector:l,vars:c,className:d,style:f,classNames:h,styles:p,unstyled:m,variant:y,mod:v,size:b,...w}=n,E=$t({name:["Text",l],props:n,classes:Nme,className:d,style:f,classNames:h,styles:p,unstyled:m,vars:c,varsResolver:KMe});return T.jsx(Se,{...E("root",{focusable:!0}),ref:t,component:u?"span":"p",variant:y,mod:[{"data-truncate":GMe(i),"data-line-clamp":typeof r=="number","data-inline":s,"data-inherit":o},v],size:b,...w})});Je.classes=Nme;Je.displayName="@mantine/core/Text";var Ome={root:"m_849cf0da"};const XMe={underline:"hover"},B1=os((e,t)=>{const{underline:n,className:r,unstyled:i,mod:s,...o}=Me("Anchor",XMe,e);return T.jsx(Je,{component:"a",ref:t,className:qi({[Ome.root]:!i},r),...o,mod:[{underline:n},s],__staticSelector:"Anchor",unstyled:i})});B1.classes=Ome;B1.displayName="@mantine/core/Anchor";const[QMe,Dw]=Is("AppShell was not found in tree");var ng={root:"m_89ab340",navbar:"m_45252eee",aside:"m_9cdde9a",header:"m_3b16f56b",main:"m_8983817",footer:"m_3840c879",section:"m_6dcfc7c7"};const JMe={},jU=tt((e,t)=>{const n=Me("AppShellAside",JMe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:d,...f}=n,h=Dw();return h.disabled?null:T.jsx(Se,{component:"aside",ref:t,mod:[{"with-border":l??h.withBorder},d],...h.getStyles("aside",{className:i,classNames:r,styles:o,style:s}),...f,__vars:{"--app-shell-aside-z-index":`calc(${c??h.zIndex} + 1)`}})});jU.classes=ng;jU.displayName="@mantine/core/AppShellAside";const ZMe={},zU=tt((e,t)=>{var p;const n=Me("AppShellFooter",ZMe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:d,...f}=n,h=Dw();return h.disabled?null:T.jsx(Se,{component:"footer",ref:t,mod:[{"with-border":l??h.withBorder},d],...h.getStyles("footer",{className:qi({[xx.classNames.zeroRight]:h.offsetScrollbars},i),classNames:r,styles:o,style:s}),...f,__vars:{"--app-shell-footer-z-index":(p=c??h.zIndex)==null?void 0:p.toString()}})});zU.classes=ng;zU.displayName="@mantine/core/AppShellFooter";const e8e={},UU=tt((e,t)=>{var p;const n=Me("AppShellHeader",e8e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:d,...f}=n,h=Dw();return h.disabled?null:T.jsx(Se,{component:"header",ref:t,mod:[{"with-border":l??h.withBorder},d],...h.getStyles("header",{className:qi({[xx.classNames.zeroRight]:h.offsetScrollbars},i),classNames:r,styles:o,style:s}),...f,__vars:{"--app-shell-header-z-index":(p=c??h.zIndex)==null?void 0:p.toString()}})});UU.classes=ng;UU.displayName="@mantine/core/AppShellHeader";const t8e={},VU=tt((e,t)=>{const n=Me("AppShellMain",t8e,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Dw();return T.jsx(Se,{component:"main",ref:t,...l.getStyles("main",{className:i,style:s,classNames:r,styles:o}),...u})});VU.classes=ng;VU.displayName="@mantine/core/AppShellMain";function WC(e){return typeof e=="object"?e.base:e}function GC(e){const t=typeof e=="object"&&e!==null&&typeof e.base<"u"&&Object.keys(e).length===1;return typeof e=="number"||typeof e=="string"||t}function YC(e){return!(typeof e!="object"||e===null||Object.keys(e).length===1&&"base"in e)}function n8e({baseStyles:e,minMediaStyles:t,maxMediaStyles:n,aside:r,theme:i}){var u,l,c;const s=r==null?void 0:r.width,o="translateX(var(--app-shell-aside-width))",a="translateX(calc(var(--app-shell-aside-width) * -1))";if(r!=null&&r.breakpoint&&!((u=r==null?void 0:r.collapsed)!=null&&u.mobile)&&(n[r==null?void 0:r.breakpoint]=n[r==null?void 0:r.breakpoint]||{},n[r==null?void 0:r.breakpoint]["--app-shell-aside-width"]="100%",n[r==null?void 0:r.breakpoint]["--app-shell-aside-offset"]="0px"),GC(s)){const d=$e(WC(s));e["--app-shell-aside-width"]=d,e["--app-shell-aside-offset"]=d}if(YC(s)&&(typeof s.base<"u"&&(e["--app-shell-aside-width"]=$e(s.base),e["--app-shell-aside-offset"]=$e(s.base)),Ur(s).forEach(d=>{d!=="base"&&(t[d]=t[d]||{},t[d]["--app-shell-aside-width"]=$e(s[d]),t[d]["--app-shell-aside-offset"]=$e(s[d]))})),(l=r==null?void 0:r.collapsed)!=null&&l.desktop){const d=r.breakpoint;t[d]=t[d]||{},t[d]["--app-shell-aside-transform"]=o,t[d]["--app-shell-aside-transform-rtl"]=a,t[d]["--app-shell-aside-offset"]="0px !important"}if((c=r==null?void 0:r.collapsed)!=null&&c.mobile){const d=Kz(r.breakpoint,i.breakpoints)-.1;n[d]=n[d]||{},n[d]["--app-shell-aside-width"]="100%",n[d]["--app-shell-aside-offset"]="0px",n[d]["--app-shell-aside-transform"]=o,n[d]["--app-shell-aside-transform-rtl"]=a}}function r8e({baseStyles:e,minMediaStyles:t,footer:n}){const r=n==null?void 0:n.height,i="translateY(var(--app-shell-footer-height))",s=(n==null?void 0:n.offset)??!0;if(GC(r)){const o=$e(WC(r));e["--app-shell-footer-height"]=o,s&&(e["--app-shell-footer-offset"]=o)}YC(r)&&(typeof r.base<"u"&&(e["--app-shell-footer-height"]=$e(r.base),s&&(e["--app-shell-footer-offset"]=$e(r.base))),Ur(r).forEach(o=>{o!=="base"&&(t[o]=t[o]||{},t[o]["--app-shell-footer-height"]=$e(r[o]),s&&(t[o]["--app-shell-footer-offset"]=$e(r[o])))})),n!=null&&n.collapsed&&(e["--app-shell-footer-transform"]=i,e["--app-shell-footer-offset"]="0px !important")}function i8e({baseStyles:e,minMediaStyles:t,header:n}){const r=n==null?void 0:n.height,i="translateY(calc(var(--app-shell-header-height) * -1))",s=(n==null?void 0:n.offset)??!0;if(GC(r)){const o=$e(WC(r));e["--app-shell-header-height"]=o,s&&(e["--app-shell-header-offset"]=o)}YC(r)&&(typeof r.base<"u"&&(e["--app-shell-header-height"]=$e(r.base),s&&(e["--app-shell-header-offset"]=$e(r.base))),Ur(r).forEach(o=>{o!=="base"&&(t[o]=t[o]||{},t[o]["--app-shell-header-height"]=$e(r[o]),s&&(t[o]["--app-shell-header-offset"]=$e(r[o])))})),n!=null&&n.collapsed&&(e["--app-shell-header-transform"]=i,e["--app-shell-header-offset"]="0px !important")}function s8e({baseStyles:e,minMediaStyles:t,maxMediaStyles:n,navbar:r,theme:i}){var u,l,c;const s=r==null?void 0:r.width,o="translateX(calc(var(--app-shell-navbar-width) * -1))",a="translateX(var(--app-shell-navbar-width))";if(r!=null&&r.breakpoint&&!((u=r==null?void 0:r.collapsed)!=null&&u.mobile)&&(n[r==null?void 0:r.breakpoint]=n[r==null?void 0:r.breakpoint]||{},n[r==null?void 0:r.breakpoint]["--app-shell-navbar-width"]="100%",n[r==null?void 0:r.breakpoint]["--app-shell-navbar-offset"]="0px"),GC(s)){const d=$e(WC(s));e["--app-shell-navbar-width"]=d,e["--app-shell-navbar-offset"]=d}if(YC(s)&&(typeof s.base<"u"&&(e["--app-shell-navbar-width"]=$e(s.base),e["--app-shell-navbar-offset"]=$e(s.base)),Ur(s).forEach(d=>{d!=="base"&&(t[d]=t[d]||{},t[d]["--app-shell-navbar-width"]=$e(s[d]),t[d]["--app-shell-navbar-offset"]=$e(s[d]))})),(l=r==null?void 0:r.collapsed)!=null&&l.desktop){const d=r.breakpoint;t[d]=t[d]||{},t[d]["--app-shell-navbar-transform"]=o,t[d]["--app-shell-navbar-transform-rtl"]=a,t[d]["--app-shell-navbar-offset"]="0px !important"}if((c=r==null?void 0:r.collapsed)!=null&&c.mobile){const d=Kz(r.breakpoint,i.breakpoints)-.1;n[d]=n[d]||{},n[d]["--app-shell-navbar-width"]="100%",n[d]["--app-shell-navbar-offset"]="0px",n[d]["--app-shell-navbar-transform"]=o,n[d]["--app-shell-navbar-transform-rtl"]=a}}function n8(e){return Number(e)===0?"0px":ns(e)}function o8e({padding:e,baseStyles:t,minMediaStyles:n}){GC(e)&&(t["--app-shell-padding"]=n8(WC(e))),YC(e)&&(e.base&&(t["--app-shell-padding"]=n8(e.base)),Ur(e).forEach(r=>{r!=="base"&&(n[r]=n[r]||{},n[r]["--app-shell-padding"]=n8(e[r]))}))}function a8e({navbar:e,header:t,footer:n,aside:r,padding:i,theme:s}){const o={},a={},u={};s8e({baseStyles:u,minMediaStyles:o,maxMediaStyles:a,navbar:e,theme:s}),n8e({baseStyles:u,minMediaStyles:o,maxMediaStyles:a,aside:r,theme:s}),i8e({baseStyles:u,minMediaStyles:o,header:t}),r8e({baseStyles:u,minMediaStyles:o,footer:n}),o8e({baseStyles:u,minMediaStyles:o,padding:i});const l=_2(Ur(o),s.breakpoints).map(f=>({query:`(min-width: ${_P(f.px)})`,styles:o[f.value]})),c=_2(Ur(a),s.breakpoints).map(f=>({query:`(max-width: ${_P(f.px)})`,styles:a[f.value]})),d=[...l,...c];return{baseStyles:u,media:d}}function u8e({navbar:e,header:t,aside:n,footer:r,padding:i}){const s=ss(),o=J0(),{media:a,baseStyles:u}=a8e({navbar:e,header:t,footer:r,aside:n,padding:i,theme:s});return T.jsx(M1,{media:a,styles:u,selector:o.cssVariablesSelector})}const l8e={},HU=tt((e,t)=>{const n=Me("AppShellNavbar",l8e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:d,...f}=n,h=Dw();return h.disabled?null:T.jsx(Se,{component:"nav",ref:t,mod:[{"with-border":l??h.withBorder},d],...h.getStyles("navbar",{className:i,classNames:r,styles:o,style:s}),...f,__vars:{"--app-shell-navbar-z-index":`calc(${c??h.zIndex} + 1)`}})});HU.classes=ng;HU.displayName="@mantine/core/AppShellNavbar";const c8e={},qU=os((e,t)=>{const n=Me("AppShellSection",c8e,e),{classNames:r,className:i,style:s,styles:o,vars:a,grow:u,mod:l,...c}=n,d=Dw();return T.jsx(Se,{ref:t,mod:[{grow:u},l],...d.getStyles("section",{className:i,style:s,classNames:r,styles:o}),...c})});qU.classes=ng;qU.displayName="@mantine/core/AppShellSection";function d8e({transitionDuration:e,disabled:t}){const[n,r]=D.useState(!0),i=D.useRef(-1),s=D.useRef(-1);return vpe("resize",()=>{r(!0),clearTimeout(i.current),i.current=window.setTimeout(()=>D.startTransition(()=>{r(!1)}),200)}),N1(()=>{r(!0),clearTimeout(s.current),s.current=window.setTimeout(()=>D.startTransition(()=>{r(!1)}),e||0)},[t,e]),n}const f8e={withBorder:!0,padding:0,transitionDuration:200,transitionTimingFunction:"ease",zIndex:so("app")},h8e=(e,{transitionDuration:t,transitionTimingFunction:n})=>({root:{"--app-shell-transition-duration":`${t}ms`,"--app-shell-transition-timing-function":n}}),Or=tt((e,t)=>{const n=Me("AppShell",f8e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,navbar:l,withBorder:c,padding:d,transitionDuration:f,transitionTimingFunction:h,header:p,zIndex:m,layout:y,disabled:v,aside:b,footer:w,offsetScrollbars:E=y!=="alt",mod:_,...C}=n,S=$t({name:"AppShell",classes:ng,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:h8e}),k=d8e({disabled:v,transitionDuration:f});return T.jsxs(QMe,{value:{getStyles:S,withBorder:c,zIndex:m,disabled:v,offsetScrollbars:E},children:[T.jsx(u8e,{navbar:l,header:p,aside:b,footer:w,padding:d}),T.jsx(Se,{ref:t,...S("root"),mod:[{resizing:k,layout:y,disabled:v},_],...C})]})});Or.classes=ng;Or.displayName="@mantine/core/AppShell";Or.Navbar=HU;Or.Header=UU;Or.Main=VU;Or.Aside=jU;Or.Footer=zU;Or.Section=qU;function $me(e){return typeof e=="string"?{value:e,label:e}:"value"in e&&!("label"in e)?{value:e.value,label:e.value,disabled:e.disabled}:typeof e=="number"?{value:e.toString(),label:e.toString()}:"group"in e?{group:e.group,items:e.items.map(t=>$me(t))}:e}function WU(e){return e?e.map(t=>$me(t)):[]}function GU(e){return e.reduce((t,n)=>"group"in n?{...t,...GU(n.items)}:(t[n.value]=n,t),{})}var Iu={dropdown:"m_88b62a41",search:"m_985517d8",options:"m_b2821a6e",option:"m_92253aa5",empty:"m_2530cd1d",header:"m_858f94bd",footer:"m_82b967cb",group:"m_254f3e4f",groupLabel:"m_2bb2e9e5",chevron:"m_2943220b",optionsDropdownOption:"m_390b5f4",optionsDropdownCheckIcon:"m_8ee53fc2"};const p8e={error:null},m8e=(e,{size:t})=>({chevron:{"--combobox-chevron-size":mn(t,"combobox-chevron-size")}}),T4=tt((e,t)=>{const n=Me("ComboboxChevron",p8e,e),{size:r,error:i,style:s,className:o,classNames:a,styles:u,unstyled:l,vars:c,mod:d,...f}=n,h=$t({name:"ComboboxChevron",classes:Iu,props:n,style:s,className:o,classNames:a,styles:u,unstyled:l,vars:c,varsResolver:m8e,rootSelector:"chevron"});return T.jsx(Se,{component:"svg",...f,...h("chevron"),size:r,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",mod:["combobox-chevron",{error:i},d],ref:t,children:T.jsx("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})});T4.classes=Iu;T4.displayName="@mantine/core/ComboboxChevron";const[g8e,cc]=Is("Combobox component was not found in tree"),Mme=D.forwardRef(({size:e,onMouseDown:t,onClick:n,onClear:r,...i},s)=>T.jsx(Fr.ClearButton,{ref:s,tabIndex:-1,"aria-hidden":!0,...i,onMouseDown:o=>{o.preventDefault(),t==null||t(o)},onClick:o=>{r(),n==null||n(o)}}));Mme.displayName="@mantine/core/ComboboxClearButton";const y8e={},YU=tt((e,t)=>{const{classNames:n,styles:r,className:i,style:s,hidden:o,...a}=Me("ComboboxDropdown",y8e,e),u=cc();return T.jsx(Po.Dropdown,{...a,ref:t,role:"presentation","data-hidden":o||void 0,...u.getStyles("dropdown",{className:i,style:s,classNames:n,styles:r})})});YU.classes=Iu;YU.displayName="@mantine/core/ComboboxDropdown";const b8e={refProp:"ref"},Lme=tt((e,t)=>{const{children:n,refProp:r}=Me("ComboboxDropdownTarget",b8e,e);if(cc(),!jp(n))throw new Error("Combobox.DropdownTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");return T.jsx(Po.Target,{ref:t,refProp:r,children:n})});Lme.displayName="@mantine/core/ComboboxDropdownTarget";const v8e={},KU=tt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Me("ComboboxEmpty",v8e,e),u=cc();return T.jsx(Se,{ref:t,...u.getStyles("empty",{className:r,classNames:n,styles:s,style:i}),...a})});KU.classes=Iu;KU.displayName="@mantine/core/ComboboxEmpty";function XU({onKeyDown:e,withKeyboardNavigation:t,withAriaAttributes:n,withExpandedAttribute:r,targetType:i,autoComplete:s}){const o=cc(),[a,u]=D.useState(null),l=d=>{if(e==null||e(d),!o.readOnly&&t){if(d.nativeEvent.isComposing)return;if(d.nativeEvent.code==="ArrowDown"&&(d.preventDefault(),o.store.dropdownOpened?u(o.store.selectNextOption()):(o.store.openDropdown("keyboard"),u(o.store.selectActiveOption()),o.store.updateSelectedOptionIndex("selected",{scrollIntoView:!0}))),d.nativeEvent.code==="ArrowUp"&&(d.preventDefault(),o.store.dropdownOpened?u(o.store.selectPreviousOption()):(o.store.openDropdown("keyboard"),u(o.store.selectActiveOption()),o.store.updateSelectedOptionIndex("selected",{scrollIntoView:!0}))),d.nativeEvent.code==="Enter"||d.nativeEvent.code==="NumpadEnter"){if(d.nativeEvent.keyCode===229)return;const f=o.store.getSelectedOptionIndex();o.store.dropdownOpened&&f!==-1?(d.preventDefault(),o.store.clickSelectedOption()):i==="button"&&(d.preventDefault(),o.store.openDropdown("keyboard"))}d.nativeEvent.code==="Escape"&&o.store.closeDropdown("keyboard"),d.nativeEvent.code==="Space"&&i==="button"&&(d.preventDefault(),o.store.toggleDropdown("keyboard"))}};return{...n?{"aria-haspopup":"listbox","aria-expanded":r&&!!(o.store.listId&&o.store.dropdownOpened)||void 0,"aria-controls":o.store.dropdownOpened?o.store.listId:void 0,"aria-activedescendant":o.store.dropdownOpened&&a||void 0,autoComplete:s,"data-expanded":o.store.dropdownOpened||void 0,"data-mantine-stop-propagation":o.store.dropdownOpened||void 0}:{},onKeyDown:l}}const x8e={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},Fme=tt((e,t)=>{const{children:n,refProp:r,withKeyboardNavigation:i,withAriaAttributes:s,withExpandedAttribute:o,targetType:a,autoComplete:u,...l}=Me("ComboboxEventsTarget",x8e,e);if(!jp(n))throw new Error("Combobox.EventsTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const c=cc(),d=XU({targetType:a,withAriaAttributes:s,withKeyboardNavigation:i,withExpandedAttribute:o,onKeyDown:n.props.onKeyDown,autoComplete:u});return D.cloneElement(n,{...d,...l,[r]:Rs(t,c.store.targetRef,f4(n))})});Fme.displayName="@mantine/core/ComboboxEventsTarget";const w8e={},QU=tt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Me("ComboboxFooter",w8e,e),u=cc();return T.jsx(Se,{ref:t,...u.getStyles("footer",{className:r,classNames:n,style:i,styles:s}),...a,onMouseDown:l=>{l.preventDefault()}})});QU.classes=Iu;QU.displayName="@mantine/core/ComboboxFooter";const E8e={},JU=tt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,children:a,label:u,...l}=Me("ComboboxGroup",E8e,e),c=cc();return T.jsxs(Se,{ref:t,...c.getStyles("group",{className:r,classNames:n,style:i,styles:s}),...l,children:[u&&T.jsx("div",{...c.getStyles("groupLabel",{classNames:n,styles:s}),children:u}),a]})});JU.classes=Iu;JU.displayName="@mantine/core/ComboboxGroup";const _8e={},ZU=tt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Me("ComboboxHeader",_8e,e),u=cc();return T.jsx(Se,{ref:t,...u.getStyles("header",{className:r,classNames:n,style:i,styles:s}),...a,onMouseDown:l=>{l.preventDefault()}})});ZU.classes=Iu;ZU.displayName="@mantine/core/ComboboxHeader";function Bme({value:e,valuesDivider:t=",",...n}){return T.jsx("input",{type:"hidden",value:Array.isArray(e)?e.join(t):e||"",...n})}Bme.displayName="@mantine/core/ComboboxHiddenInput";const T8e={},eV=tt((e,t)=>{const n=Me("ComboboxOption",T8e,e),{classNames:r,className:i,style:s,styles:o,vars:a,onClick:u,id:l,active:c,onMouseDown:d,onMouseOver:f,disabled:h,selected:p,mod:m,...y}=n,v=cc(),b=D.useId(),w=l||b;return T.jsx(Se,{...v.getStyles("option",{className:i,classNames:r,styles:o,style:s}),...y,ref:t,id:w,mod:["combobox-option",{"combobox-active":c,"combobox-disabled":h,"combobox-selected":p},m],role:"option",onClick:E=>{var _;h?E.preventDefault():((_=v.onOptionSubmit)==null||_.call(v,n.value,n),u==null||u(E))},onMouseDown:E=>{E.preventDefault(),d==null||d(E)},onMouseOver:E=>{v.resetSelectionOnOptionHover&&v.store.resetSelectedOption(),f==null||f(E)}})});eV.classes=Iu;eV.displayName="@mantine/core/ComboboxOption";const C8e={},tV=tt((e,t)=>{const n=Me("ComboboxOptions",C8e,e),{classNames:r,className:i,style:s,styles:o,id:a,onMouseDown:u,labelledBy:l,...c}=n,d=cc(),f=Ga(a);return D.useEffect(()=>{d.store.setListId(f)},[f]),T.jsx(Se,{ref:t,...d.getStyles("options",{className:i,style:s,classNames:r,styles:o}),...c,id:f,role:"listbox","aria-labelledby":l,onMouseDown:h=>{h.preventDefault(),u==null||u(h)}})});tV.classes=Iu;tV.displayName="@mantine/core/ComboboxOptions";const S8e={withAriaAttributes:!0,withKeyboardNavigation:!0},nV=tt((e,t)=>{const n=Me("ComboboxSearch",S8e,e),{classNames:r,styles:i,unstyled:s,vars:o,withAriaAttributes:a,onKeyDown:u,withKeyboardNavigation:l,size:c,...d}=n,f=cc(),h=f.getStyles("search"),p=XU({targetType:"input",withAriaAttributes:a,withKeyboardNavigation:l,withExpandedAttribute:!1,onKeyDown:u,autoComplete:"off"});return T.jsx(Fr,{ref:Rs(t,f.store.searchRef),classNames:[{input:h.className},r],styles:[{input:h.style},i],size:c||f.size,...p,...d,__staticSelector:"Combobox"})});nV.classes=Iu;nV.displayName="@mantine/core/ComboboxSearch";const A8e={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},jme=tt((e,t)=>{const{children:n,refProp:r,withKeyboardNavigation:i,withAriaAttributes:s,withExpandedAttribute:o,targetType:a,autoComplete:u,...l}=Me("ComboboxTarget",A8e,e);if(!jp(n))throw new Error("Combobox.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const c=cc(),d=XU({targetType:a,withAriaAttributes:s,withKeyboardNavigation:i,withExpandedAttribute:o,onKeyDown:n.props.onKeyDown,autoComplete:u}),f=D.cloneElement(n,{...d,...l});return T.jsx(Po.Target,{ref:Rs(t,c.store.targetRef),children:f})});jme.displayName="@mantine/core/ComboboxTarget";function k8e(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r}return e}function I8e(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r}return e}function R8e(e){for(let t=0;t<e.length;t+=1)if(!e[t].hasAttribute("data-combobox-disabled"))return t;return-1}function rV({defaultOpened:e,opened:t,onOpenedChange:n,onDropdownClose:r,onDropdownOpen:i,loop:s=!0,scrollBehavior:o="instant"}={}){const[a,u]=no({value:t,defaultValue:e,finalValue:!1,onChange:n}),l=D.useRef(null),c=D.useRef(-1),d=D.useRef(null),f=D.useRef(null),h=D.useRef(-1),p=D.useRef(-1),m=D.useRef(-1),y=D.useCallback((W="unknown")=>{a||(u(!0),i==null||i(W))},[u,i,a]),v=D.useCallback((W="unknown")=>{a&&(u(!1),r==null||r(W))},[u,r,a]),b=D.useCallback((W="unknown")=>{a?v(W):y(W)},[v,y,a]),w=D.useCallback(()=>{const W=document.querySelector(`#${l.current} [data-combobox-selected]`);W==null||W.removeAttribute("data-combobox-selected"),W==null||W.removeAttribute("aria-selected")},[]),E=D.useCallback(W=>{const J=document.getElementById(l.current),K=J==null?void 0:J.querySelectorAll("[data-combobox-option]");if(!K)return null;const Z=W>=K.length?0:W<0?K.length-1:W;return c.current=Z,K!=null&&K[Z]&&!K[Z].hasAttribute("data-combobox-disabled")?(w(),K[Z].setAttribute("data-combobox-selected","true"),K[Z].setAttribute("aria-selected","true"),K[Z].scrollIntoView({block:"nearest",behavior:o}),K[Z].id):null},[o,w]),_=D.useCallback(()=>{const W=document.querySelector(`#${l.current} [data-combobox-active]`);if(W){const J=document.querySelectorAll(`#${l.current} [data-combobox-option]`),K=Array.from(J).findIndex(Z=>Z===W);return E(K)}return E(0)},[E]),C=D.useCallback(()=>E(I8e(c.current,document.querySelectorAll(`#${l.current} [data-combobox-option]`),s)),[E,s]),S=D.useCallback(()=>E(k8e(c.current,document.querySelectorAll(`#${l.current} [data-combobox-option]`),s)),[E,s]),k=D.useCallback(()=>E(R8e(document.querySelectorAll(`#${l.current} [data-combobox-option]`))),[E]),R=D.useCallback((W="selected",J)=>{m.current=window.setTimeout(()=>{var U;const K=document.querySelectorAll(`#${l.current} [data-combobox-option]`),Z=Array.from(K).findIndex(L=>L.hasAttribute(`data-combobox-${W}`));c.current=Z,J!=null&&J.scrollIntoView&&((U=K[Z])==null||U.scrollIntoView({block:"nearest",behavior:o}))},0)},[]),N=D.useCallback(()=>{c.current=-1,w()},[w]),O=D.useCallback(()=>{const W=document.querySelectorAll(`#${l.current} [data-combobox-option]`),J=W==null?void 0:W[c.current];J==null||J.click()},[]),F=D.useCallback(W=>{l.current=W},[]),$=D.useCallback(()=>{h.current=window.setTimeout(()=>d.current.focus(),0)},[]),z=D.useCallback(()=>{p.current=window.setTimeout(()=>f.current.focus(),0)},[]),q=D.useCallback(()=>c.current,[]);return D.useEffect(()=>()=>{window.clearTimeout(h.current),window.clearTimeout(p.current),window.clearTimeout(m.current)},[]),{dropdownOpened:a,openDropdown:y,closeDropdown:v,toggleDropdown:b,selectedOptionIndex:c.current,getSelectedOptionIndex:q,selectOption:E,selectFirstOption:k,selectActiveOption:_,selectNextOption:C,selectPreviousOption:S,resetSelectedOption:N,updateSelectedOptionIndex:R,listId:l.current,setListId:F,clickSelectedOption:O,searchRef:d,focusSearchInput:$,targetRef:f,focusTarget:z}}const D8e={keepMounted:!0,withinPortal:!0,resetSelectionOnOptionHover:!1,width:"target",transitionProps:{transition:"fade",duration:0}},P8e=(e,{size:t,dropdownPadding:n})=>({options:{"--combobox-option-fz":Do(t),"--combobox-option-padding":mn(t,"combobox-option-padding")},dropdown:{"--combobox-padding":n===void 0?void 0:$e(n),"--combobox-option-fz":Do(t),"--combobox-option-padding":mn(t,"combobox-option-padding")}});function Hn(e){const t=Me("Combobox",D8e,e),{classNames:n,styles:r,unstyled:i,children:s,store:o,vars:a,onOptionSubmit:u,onClose:l,size:c,dropdownPadding:d,resetSelectionOnOptionHover:f,__staticSelector:h,readOnly:p,...m}=t,y=rV(),v=o||y,b=$t({name:h||"Combobox",classes:Iu,props:t,classNames:n,styles:r,unstyled:i,vars:a,varsResolver:P8e}),w=()=>{l==null||l(),v.closeDropdown()};return T.jsx(g8e,{value:{getStyles:b,store:v,onOptionSubmit:u,size:c,resetSelectionOnOptionHover:f,readOnly:p},children:T.jsx(Po,{opened:v.dropdownOpened,...m,onChange:E=>!E&&w(),withRoles:!1,unstyled:i,children:s})})}const N8e=e=>e;Hn.extend=N8e;Hn.classes=Iu;Hn.displayName="@mantine/core/Combobox";Hn.Target=jme;Hn.Dropdown=YU;Hn.Options=tV;Hn.Option=eV;Hn.Search=nV;Hn.Empty=KU;Hn.Chevron=T4;Hn.Footer=QU;Hn.Header=ZU;Hn.EventsTarget=Fme;Hn.DropdownTarget=Lme;Hn.Group=JU;Hn.ClearButton=Mme;Hn.HiddenInput=Bme;var zme={root:"m_5f75b09e",body:"m_5f6e695e",labelWrapper:"m_d3ea56bb",label:"m_8ee546b8",description:"m_328f68c0",error:"m_8e8a99cc"};const Ume=zme,C4=D.forwardRef(({__staticSelector:e,__stylesApiProps:t,className:n,classNames:r,styles:i,unstyled:s,children:o,label:a,description:u,id:l,disabled:c,error:d,size:f,labelPosition:h="left",bodyElement:p="div",labelElement:m="label",variant:y,style:v,vars:b,mod:w,...E},_)=>{const C=$t({name:e,props:t,className:n,style:v,classes:zme,classNames:r,styles:i,unstyled:s});return T.jsx(Se,{...C("root"),ref:_,__vars:{"--label-fz":Do(f),"--label-lh":mn(f,"label-lh")},mod:[{"label-position":h},w],variant:y,size:f,...E,children:T.jsxs(Se,{component:p,htmlFor:p==="label"?l:void 0,...C("body"),children:[o,T.jsxs("div",{...C("labelWrapper"),"data-disabled":c||void 0,children:[a&&T.jsx(Se,{component:m,htmlFor:m==="label"?l:void 0,...C("label"),"data-disabled":c||void 0,children:a}),u&&T.jsx(Fr.Description,{size:f,__inheritStyles:!1,...C("description"),children:u}),d&&typeof d!="boolean"&&T.jsx(Fr.Error,{size:f,__inheritStyles:!1,...C("error"),children:d})]})]})})});C4.displayName="@mantine/core/InlineInput";const Vme=D.createContext(null),O8e=Vme.Provider,Hme=()=>D.useContext(Vme),[$8e,M8e]=zp();var qme={card:"m_26775b0a"};const L8e={withBorder:!0},F8e=(e,{radius:t})=>({card:{"--card-radius":Dr(t)}}),iV=tt((e,t)=>{const n=Me("CheckboxCard",L8e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,checked:l,mod:c,withBorder:d,value:f,onClick:h,defaultChecked:p,onChange:m,...y}=n,v=$t({name:"CheckboxCard",classes:qme,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:F8e,rootSelector:"card"}),b=Hme(),w=typeof l=="boolean"?l:b?b.value.includes(f||""):void 0,[E,_]=no({value:w,defaultValue:p,finalValue:!1,onChange:m});return T.jsx($8e,{value:{checked:E},children:T.jsx(ku,{ref:t,mod:[{"with-border":d,checked:E},c],...v("card"),...y,role:"checkbox","aria-checked":E,onClick:C=>{h==null||h(C),b==null||b.onChange(f||""),_(!E)}})})});iV.displayName="@mantine/core/CheckboxCard";iV.classes=qme;function sV({children:e,role:t}){const n=Rw();return n?T.jsx("div",{role:t,"aria-labelledby":n.labelId,"aria-describedby":n.describedBy,children:e}):T.jsx(T.Fragment,{children:e})}const B8e={},oV=tt((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,readOnly:u,...l}=Me("CheckboxGroup",B8e,e),[c,d]=no({value:n,defaultValue:r,finalValue:[],onChange:i}),f=h=>{const p=typeof h=="string"?h:h.currentTarget.value;!u&&d(c.includes(p)?c.filter(m=>m!==p):[...c,p])};return T.jsx(O8e,{value:{value:c,onChange:f,size:s},children:T.jsx(Fr.Wrapper,{size:s,ref:t,...o,...l,labelElement:"div",__staticSelector:"CheckboxGroup",children:T.jsx(sV,{role:"group",children:a})})})});oV.classes=Fr.Wrapper.classes;oV.displayName="@mantine/core/CheckboxGroup";function Wme({size:e,style:t,...n}){const r=e!==void 0?{width:$e(e),height:$e(e),...t}:t;return T.jsx("svg",{viewBox:"0 0 10 7",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:r,"aria-hidden":!0,...n,children:T.jsx("path",{d:"M4 4.586L1.707 2.293A1 1 0 1 0 .293 3.707l3 3a.997.997 0 0 0 1.414 0l5-5A1 1 0 1 0 8.293.293L4 4.586z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}function Gme({indeterminate:e,...t}){return e?T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 6","aria-hidden":!0,...t,children:T.jsx("rect",{width:"32",height:"6",fill:"currentColor",rx:"3"})}):T.jsx(Wme,{...t})}var Yme={indicator:"m_5e5256ee",icon:"m_1b1c543a","indicator--outline":"m_76e20374"};const j8e={icon:Gme},z8e=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=Qf({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{indicator:{"--checkbox-size":mn(r,"checkbox-size"),"--checkbox-radius":t===void 0?void 0:Dr(t),"--checkbox-color":s==="outline"?u:Vr(n,e),"--checkbox-icon-color":i?Vr(i,e):Tw(o,e)?O1({color:n,theme:e,autoContrast:o}):void 0}}},aV=tt((e,t)=>{const n=Me("CheckboxIndicator",j8e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,icon:l,indeterminate:c,radius:d,color:f,iconColor:h,autoContrast:p,checked:m,mod:y,variant:v,disabled:b,...w}=n,E=l,_=$t({name:"CheckboxIndicator",classes:Yme,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:z8e,rootSelector:"indicator"}),C=M8e(),S=typeof m=="boolean"||typeof c=="boolean"?m||c:(C==null?void 0:C.checked)||!1;return T.jsx(Se,{ref:t,..._("indicator",{variant:v}),variant:v,mod:[{checked:S,disabled:b},y],...w,children:T.jsx(E,{indeterminate:c,..._("icon")})})});aV.displayName="@mantine/core/CheckboxIndicator";aV.classes=Yme;var Kme={root:"m_bf2d988c",inner:"m_26062bec",input:"m_26063560",icon:"m_bf295423","input--outline":"m_215c4542"};const U8e={labelPosition:"right",icon:Gme},V8e=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=Qf({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{root:{"--checkbox-size":mn(r,"checkbox-size"),"--checkbox-radius":t===void 0?void 0:Dr(t),"--checkbox-color":s==="outline"?u:Vr(n,e),"--checkbox-icon-color":i?Vr(i,e):Tw(o,e)?O1({color:n,theme:e,autoContrast:o}):void 0}}},Ao=tt((e,t)=>{const n=Me("Checkbox",U8e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,label:c,id:d,size:f,radius:h,wrapperProps:p,checked:m,labelPosition:y,description:v,error:b,disabled:w,variant:E,indeterminate:_,icon:C,rootRef:S,iconColor:k,onChange:R,autoContrast:N,mod:O,...F}=n,$=Hme(),z=f||($==null?void 0:$.size),q=C,W=$t({name:"Checkbox",props:n,classes:Kme,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:V8e}),{styleProps:J,rest:K}=L1(F),Z=Ga(d),U=$?{checked:$.value.includes(K.value),onChange:L=>{$.onChange(L),R==null||R(L)}}:{};return T.jsx(C4,{...W("root"),__staticSelector:"Checkbox",__stylesApiProps:n,id:Z,size:z,labelPosition:y,label:c,description:v,error:b,disabled:w,classNames:r,styles:o,unstyled:a,"data-checked":U.checked||m||void 0,variant:E,ref:S,mod:O,...J,...p,children:T.jsxs(Se,{...W("inner"),mod:{"data-label-position":y},children:[T.jsx(Se,{component:"input",id:Z,ref:t,checked:m,disabled:w,mod:{error:!!b,indeterminate:_},...W("input",{focusable:!0,variant:E}),onChange:R,...K,...U,type:"checkbox"}),T.jsx(q,{indeterminate:_,...W("icon")})]})})});Ao.classes={...Kme,...Ume};Ao.displayName="@mantine/core/Checkbox";Ao.Group=oV;Ao.Indicator=aV;Ao.Card=iV;function Sx(e){return"group"in e}function Xme({options:e,search:t,limit:n}){const r=t.trim().toLowerCase(),i=[];for(let s=0;s<e.length;s+=1){const o=e[s];if(i.length===n)return i;Sx(o)&&i.push({group:o.group,items:Xme({options:o.items,search:t,limit:n-i.length})}),Sx(o)||o.label.toLowerCase().includes(r)&&i.push(o)}return i}function H8e(e){if(e.length===0)return!0;for(const t of e)if(!("group"in t)||t.items.length>0)return!1;return!0}function Qme(e,t=new Set){if(Array.isArray(e))for(const n of e)if(Sx(n))Qme(n.items,t);else{if(typeof n.value>"u")throw new Error("[@mantine/core] Each option must have value property");if(typeof n.value!="string")throw new Error(`[@mantine/core] Option value must be a string, other data formats are not supported, got ${typeof n.value}`);if(t.has(n.value))throw new Error(`[@mantine/core] Duplicate options are not supported. Option with value "${n.value}" was provided more than once`);t.add(n.value)}}function q8e(e,t){return Array.isArray(e)?e.includes(t):e===t}function Jme({data:e,withCheckIcon:t,value:n,checkIconPosition:r,unstyled:i,renderOption:s}){if(!Sx(e)){const a=q8e(n,e.value),u=t&&a&&T.jsx(Wme,{className:Iu.optionsDropdownCheckIcon}),l=T.jsxs(T.Fragment,{children:[r==="left"&&u,T.jsx("span",{children:e.label}),r==="right"&&u]});return T.jsx(Hn.Option,{value:e.value,disabled:e.disabled,className:qi({[Iu.optionsDropdownOption]:!i}),"data-reverse":r==="right"||void 0,"data-checked":a||void 0,"aria-selected":a,active:a,children:typeof s=="function"?s({option:e,checked:a}):l})}const o=e.items.map(a=>T.jsx(Jme,{data:a,value:n,unstyled:i,withCheckIcon:t,checkIconPosition:r,renderOption:s},a.value));return T.jsx(Hn.Group,{label:e.group,children:o})}function Zme({data:e,hidden:t,hiddenWhenEmpty:n,filter:r,search:i,limit:s,maxDropdownHeight:o,withScrollArea:a=!0,filterOptions:u=!0,withCheckIcon:l=!1,value:c,checkIconPosition:d,nothingFoundMessage:f,unstyled:h,labelId:p,renderOption:m,scrollAreaProps:y,"aria-label":v}){Qme(e);const w=typeof i=="string"?(r||Xme)({options:e,search:u?i:"",limit:s??1/0}):e,E=H8e(w),_=w.map(C=>T.jsx(Jme,{data:C,withCheckIcon:l,value:c,checkIconPosition:d,unstyled:h,renderOption:m},Sx(C)?C.group:C.value));return T.jsx(Hn.Dropdown,{hidden:t||n&&E,children:T.jsxs(Hn.Options,{labelledBy:p,"aria-label":v,children:[a?T.jsx(xp.Autosize,{mah:o??220,type:"scroll",scrollbarSize:"var(--combobox-padding)",offsetScrollbars:"y",...y,children:_}):_,E&&f&&T.jsx(Hn.Empty,{children:f})]})})}var e0e={root:"m_347db0ec","root--dot":"m_fbd81e3d",label:"m_5add502a",section:"m_91fdda9b"};const W8e={},G8e=(e,{radius:t,color:n,gradient:r,variant:i,size:s,autoContrast:o})=>{const a=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:o});return{root:{"--badge-height":mn(s,"badge-height"),"--badge-padding-x":mn(s,"badge-padding-x"),"--badge-fz":mn(s,"badge-fz"),"--badge-radius":t===void 0?void 0:Dr(t),"--badge-bg":n||i?a.background:void 0,"--badge-color":n||i?a.color:void 0,"--badge-bd":n||i?a.border:void 0,"--badge-dot-color":i==="dot"?Vr(n,e):void 0}}},td=os((e,t)=>{const n=Me("Badge",W8e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,radius:l,color:c,gradient:d,leftSection:f,rightSection:h,children:p,variant:m,fullWidth:y,autoContrast:v,circle:b,mod:w,...E}=n,_=$t({name:"Badge",props:n,classes:e0e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:G8e});return T.jsxs(Se,{variant:m,mod:[{block:y,circle:b,"with-right-section":!!h,"with-left-section":!!f},w],..._("root",{variant:m}),ref:t,...E,children:[f&&T.jsx("span",{..._("section"),"data-position":"left",children:f}),T.jsx("span",{..._("label"),children:p}),h&&T.jsx("span",{..._("section"),"data-position":"right",children:h})]})});td.classes=e0e;td.displayName="@mantine/core/Badge";var t0e={root:"m_fea6bf1a",burger:"m_d4fb9cad"};const Y8e={},K8e=(e,{color:t,size:n,lineSize:r,transitionDuration:i,transitionTimingFunction:s})=>({root:{"--burger-color":t?Vr(t,e):void 0,"--burger-size":mn(n,"burger-size"),"--burger-line-size":r?$e(r):void 0,"--burger-transition-duration":i===void 0?void 0:`${i}ms`,"--burger-transition-timing-function":s}}),uV=tt((e,t)=>{const n=Me("Burger",Y8e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,opened:l,children:c,transitionDuration:d,transitionTimingFunction:f,lineSize:h,...p}=n,m=$t({name:"Burger",classes:t0e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:K8e});return T.jsxs(ku,{...m("root"),ref:t,...p,children:[T.jsx(Se,{mod:["reduce-motion",{opened:l}],...m("burger")}),c]})});uV.classes=t0e;uV.displayName="@mantine/core/Burger";var Pw={root:"m_77c9d27d",inner:"m_80f1301b",label:"m_811560b9",section:"m_a74036a",loader:"m_a25b86ee",group:"m_80d6d844",groupSection:"m_70be2a01"};const ete={orientation:"horizontal"},X8e=(e,{borderWidth:t})=>({group:{"--button-border-width":$e(t)}}),lV=tt((e,t)=>{const n=Me("ButtonGroup",ete,e),{className:r,style:i,classNames:s,styles:o,unstyled:a,orientation:u,vars:l,borderWidth:c,variant:d,mod:f,...h}=Me("ButtonGroup",ete,e),p=$t({name:"ButtonGroup",props:n,classes:Pw,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:l,varsResolver:X8e,rootSelector:"group"});return T.jsx(Se,{...p("group"),ref:t,variant:d,mod:[{"data-orientation":u},f],role:"group",...h})});lV.classes=Pw;lV.displayName="@mantine/core/ButtonGroup";const tte={},Q8e=(e,{radius:t,color:n,gradient:r,variant:i,autoContrast:s,size:o})=>{const a=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:s});return{groupSection:{"--section-height":mn(o,"section-height"),"--section-padding-x":mn(o,"section-padding-x"),"--section-fz":o!=null&&o.includes("compact")?Do(o.replace("compact-","")):Do(o),"--section-radius":t===void 0?void 0:Dr(t),"--section-bg":n||i?a.background:void 0,"--section-color":a.color,"--section-bd":n||i?a.border:void 0}}},cV=tt((e,t)=>{const n=Me("ButtonGroupSection",tte,e),{className:r,style:i,classNames:s,styles:o,unstyled:a,vars:u,variant:l,gradient:c,radius:d,autoContrast:f,...h}=Me("ButtonGroupSection",tte,e),p=$t({name:"ButtonGroupSection",props:n,classes:Pw,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:u,varsResolver:Q8e,rootSelector:"groupSection"});return T.jsx(Se,{...p("groupSection"),ref:t,variant:l,...h})});cV.classes=Pw;cV.displayName="@mantine/core/ButtonGroupSection";const J8e={in:{opacity:1,transform:`translate(-50%, calc(-50% + ${$e(1)}))`},out:{opacity:0,transform:"translate(-50%, -200%)"},common:{transformOrigin:"center"},transitionProperty:"transform, opacity"},Z8e={},eLe=(e,{radius:t,color:n,gradient:r,variant:i,size:s,justify:o,autoContrast:a})=>{const u=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:a});return{root:{"--button-justify":o,"--button-height":mn(s,"button-height"),"--button-padding-x":mn(s,"button-padding-x"),"--button-fz":s!=null&&s.includes("compact")?Do(s.replace("compact-","")):Do(s),"--button-radius":t===void 0?void 0:Dr(t),"--button-bg":n||i?u.background:void 0,"--button-hover":n||i?u.hover:void 0,"--button-color":u.color,"--button-bd":n||i?u.border:void 0,"--button-hover-color":n||i?u.hoverColor:void 0}}},tn=os((e,t)=>{const n=Me("Button",Z8e,e),{style:r,vars:i,className:s,color:o,disabled:a,children:u,leftSection:l,rightSection:c,fullWidth:d,variant:f,radius:h,loading:p,loaderProps:m,gradient:y,classNames:v,styles:b,unstyled:w,"data-disabled":E,autoContrast:_,mod:C,...S}=n,k=$t({name:"Button",props:n,classes:Pw,className:s,style:r,classNames:v,styles:b,unstyled:w,vars:i,varsResolver:eLe}),R=!!l,N=!!c;return T.jsxs(ku,{ref:t,...k("root",{active:!a&&!p&&!E}),unstyled:w,variant:f,disabled:a||p,mod:[{disabled:a||E,loading:p,block:d,"with-left-section":R,"with-right-section":N},C],...S,children:[T.jsx(Jf,{mounted:!!p,transition:J8e,duration:150,children:O=>T.jsx(Se,{component:"span",...k("loader",{style:O}),"aria-hidden":!0,children:T.jsx(bd,{color:"var(--button-color)",size:"calc(var(--button-height) / 1.8)",...m})})}),T.jsxs("span",{...k("inner"),children:[l&&T.jsx(Se,{component:"span",...k("section"),mod:{position:"left"},children:l}),T.jsx(Se,{component:"span",mod:{loading:p},...k("label"),children:u}),c&&T.jsx(Se,{component:"span",...k("section"),mod:{position:"right"},children:c})]})]})});tn.classes=Pw;tn.displayName="@mantine/core/Button";tn.Group=lV;tn.GroupSection=cV;const[tLe,nLe]=Is("Card component was not found in tree");var dV={root:"m_e615b15f",section:"m_599a2148"};const rLe={},S4=os((e,t)=>{const n=Me("CardSection",rLe,e),{classNames:r,className:i,style:s,styles:o,vars:a,withBorder:u,inheritPadding:l,mod:c,...d}=n,f=nLe();return T.jsx(Se,{ref:t,mod:[{"with-border":u,"inherit-padding":l},c],...f.getStyles("section",{className:i,style:s,styles:o,classNames:r}),...d})});S4.classes=dV;S4.displayName="@mantine/core/CardSection";const iLe={},sLe=(e,{padding:t})=>({root:{"--card-padding":ns(t)}}),j1=os((e,t)=>{const n=Me("Card",iLe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,padding:c,...d}=n,f=$t({name:"Card",props:n,classes:dV,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:sLe}),h=D.Children.toArray(l),p=h.map((m,y)=>typeof m=="object"&&m&&"type"in m&&m.type===S4?D.cloneElement(m,{"data-first-section":y===0||void 0,"data-last-section":y===h.length-1||void 0}):m);return T.jsx(tLe,{value:{getStyles:f},children:T.jsx(Cw,{ref:t,unstyled:a,...f("root"),...d,children:p})})});j1.classes=dV;j1.displayName="@mantine/core/Card";j1.Section=S4;var n0e={root:"m_4451eb3a"};const oLe={},Ep=os((e,t)=>{const n=Me("Center",oLe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,inline:l,mod:c,...d}=n,f=$t({name:"Center",props:n,classes:n0e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u});return T.jsx(Se,{ref:t,mod:[{inline:l},c],...f("root"),...d})});Ep.classes=n0e;Ep.displayName="@mantine/core/Center";var r0e={root:"m_b183c0a2"};const aLe={},uLe=(e,{color:t})=>({root:{"--code-bg":t?Vr(t,e):void 0}}),Kh=tt((e,t)=>{const n=Me("Code",aLe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,block:c,variant:d,mod:f,...h}=n,p=$t({name:"Code",props:n,classes:r0e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:uLe});return T.jsx(Se,{component:c?"pre":"code",variant:d,ref:t,mod:[{block:c},f],...p("root"),...h,dir:"ltr"})});Kh.classes=r0e;Kh.displayName="@mantine/core/Code";var i0e={root:"m_de3d2490",colorOverlay:"m_862f3d1b",shadowOverlay:"m_98ae7f22",alphaOverlay:"m_95709ac0",childrenOverlay:"m_93e74e3"};const nte={withShadow:!0},lLe=(e,{radius:t,size:n})=>({root:{"--cs-radius":t===void 0?void 0:Dr(t),"--cs-size":$e(n)}}),fV=os((e,t)=>{const n=Me("ColorSwatch",nte,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,size:c,radius:d,withShadow:f,children:h,variant:p,...m}=Me("ColorSwatch",nte,n),y=$t({name:"ColorSwatch",props:n,classes:i0e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:lLe});return T.jsxs(Se,{ref:t,variant:p,size:c,...y("root",{focusable:!0}),...m,children:[T.jsx("span",{...y("alphaOverlay")}),f&&T.jsx("span",{...y("shadowOverlay")}),T.jsx("span",{...y("colorOverlay",{style:{backgroundColor:l}})}),T.jsx("span",{...y("childrenOverlay"),children:h})]})});fV.classes=i0e;fV.displayName="@mantine/core/ColorSwatch";var s0e={root:"m_7485cace"};const cLe={},dLe=(e,{size:t,fluid:n})=>({root:{"--container-size":n?void 0:mn(t,"container-size")}}),_p=tt((e,t)=>{const n=Me("Container",cLe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,fluid:l,mod:c,...d}=n,f=$t({name:"Container",classes:s0e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:dLe});return T.jsx(Se,{ref:t,mod:[{fluid:l},c],...f("root"),...d})});_p.classes=s0e;_p.displayName="@mantine/core/Container";var o0e={root:"m_3eebeb36",label:"m_9e365f20"};const fLe={orientation:"horizontal"},hLe=(e,{color:t,variant:n,size:r})=>({root:{"--divider-color":t?Vr(t,e):void 0,"--divider-border-style":n,"--divider-size":mn(r,"divider-size")}}),z1=tt((e,t)=>{const n=Me("Divider",fLe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,orientation:c,label:d,labelPosition:f,mod:h,...p}=n,m=$t({name:"Divider",classes:o0e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:hLe});return T.jsx(Se,{ref:t,mod:[{orientation:c,"with-label":!!d},h],...m("root"),...p,role:"separator",children:d&&T.jsx(Se,{component:"span",mod:{position:f},...m("label"),children:d})})});z1.classes=o0e;z1.displayName="@mantine/core/Divider";const[pLe,Nw]=Is("Drawer component was not found in tree");var qp={root:"m_f11b401e",header:"m_5a7c2c9",content:"m_b8a05bbd",inner:"m_31cd769a"};const mLe={},A4=tt((e,t)=>{const n=Me("DrawerBody",mLe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Nw();return T.jsx(AU,{ref:t,...l.getStyles("body",{classNames:r,style:s,styles:o,className:i}),...u})});A4.classes=qp;A4.displayName="@mantine/core/DrawerBody";const gLe={},k4=tt((e,t)=>{const n=Me("DrawerCloseButton",gLe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Nw();return T.jsx(kU,{ref:t,...l.getStyles("close",{classNames:r,style:s,styles:o,className:i}),...u})});k4.classes=qp;k4.displayName="@mantine/core/DrawerCloseButton";const yLe={},I4=tt((e,t)=>{const n=Me("DrawerContent",yLe,e),{classNames:r,className:i,style:s,styles:o,vars:a,children:u,radius:l,__hidden:c,...d}=n,f=Nw(),h=f.scrollAreaComponent||Ame;return T.jsx(IU,{...f.getStyles("content",{className:i,style:s,styles:o,classNames:r}),innerProps:f.getStyles("inner",{className:i,style:s,styles:o,classNames:r}),ref:t,...d,radius:l||f.radius||0,"data-hidden":c||void 0,children:T.jsx(h,{style:{height:"calc(100vh - var(--drawer-offset) * 2)"},children:u})})});I4.classes=qp;I4.displayName="@mantine/core/DrawerContent";const bLe={},R4=tt((e,t)=>{const n=Me("DrawerHeader",bLe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Nw();return T.jsx(RU,{ref:t,...l.getStyles("header",{classNames:r,style:s,styles:o,className:i}),...u})});R4.classes=qp;R4.displayName="@mantine/core/DrawerHeader";const vLe={},D4=tt((e,t)=>{const n=Me("DrawerOverlay",vLe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Nw();return T.jsx(DU,{ref:t,...l.getStyles("overlay",{classNames:r,style:s,styles:o,className:i}),...u})});D4.classes=qp;D4.displayName="@mantine/core/DrawerOverlay";function xLe(e){switch(e){case"top":return"flex-start";case"bottom":return"flex-end";default:return}}function wLe(e){if(e==="top"||e==="bottom")return"0 0 calc(100% - var(--drawer-offset, 0rem) * 2)"}const ELe={top:"slide-down",bottom:"slide-up",left:"slide-right",right:"slide-left"},_Le={top:"slide-down",bottom:"slide-up",right:"slide-right",left:"slide-left"},TLe={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:so("modal"),position:"left"},CLe=(e,{position:t,size:n,offset:r})=>({root:{"--drawer-size":mn(n,"drawer-size"),"--drawer-flex":wLe(t),"--drawer-height":t==="left"||t==="right"?void 0:"var(--drawer-size)","--drawer-align":xLe(t),"--drawer-justify":t==="right"?"flex-end":void 0,"--drawer-offset":$e(r)}}),P4=tt((e,t)=>{const n=Me("DrawerRoot",TLe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,scrollAreaComponent:l,position:c,transitionProps:d,radius:f,...h}=n,{dir:p}=Up(),m=$t({name:"Drawer",classes:qp,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:CLe}),y=(p==="rtl"?_Le:ELe)[c];return T.jsx(pLe,{value:{scrollAreaComponent:l,getStyles:m,radius:f},children:T.jsx(SU,{ref:t,...m("root"),transitionProps:{transition:y,...d},unstyled:a,...h})})});P4.classes=qp;P4.displayName="@mantine/core/DrawerRoot";const[SLe,ALe]=zp();function a0e({children:e}){const[t,n]=D.useState([]),[r,i]=D.useState(so("modal"));return T.jsx(SLe,{value:{stack:t,addModal:(s,o)=>{n(a=>[...new Set([...a,s])]),i(a=>typeof o=="number"&&typeof a=="number"?Math.max(a,o):a)},removeModal:s=>n(o=>o.filter(a=>a!==s)),getZIndex:s=>`calc(${r} + ${t.indexOf(s)} + 1)`,currentId:t[t.length-1],maxZIndex:r},children:e})}a0e.displayName="@mantine/core/DrawerStack";const kLe={},N4=tt((e,t)=>{const n=Me("DrawerTitle",kLe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Nw();return T.jsx(PU,{ref:t,...l.getStyles("title",{classNames:r,style:s,styles:o,className:i}),...u})});N4.classes=qp;N4.displayName="@mantine/core/DrawerTitle";const ILe={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:so("modal"),withOverlay:!0,withCloseButton:!0},vd=tt((e,t)=>{const{title:n,withOverlay:r,overlayProps:i,withCloseButton:s,closeButtonProps:o,children:a,opened:u,stackId:l,zIndex:c,...d}=Me("Drawer",ILe,e),f=ALe(),h=!!n||s,p=f&&l?{closeOnEscape:f.currentId===l,trapFocus:f.currentId===l,zIndex:f.getZIndex(l)}:{},m=r===!1?!1:l&&f?f.currentId===l:u;return D.useEffect(()=>{f&&l&&(u?f.addModal(l,c||so("modal")):f.removeModal(l))},[u,l,c]),T.jsxs(P4,{ref:t,opened:u,zIndex:f&&l?f.getZIndex(l):c,...d,...p,children:[r&&T.jsx(D4,{visible:m,transitionProps:f&&l?{duration:0}:void 0,...i}),T.jsxs(I4,{__hidden:f&&l&&u?l!==f.currentId:!1,children:[h&&T.jsxs(R4,{children:[n&&T.jsx(N4,{children:n}),s&&T.jsx(k4,{...o})]}),T.jsx(A4,{children:a})]})]})});vd.classes=qp;vd.displayName="@mantine/core/Drawer";vd.Root=P4;vd.Overlay=D4;vd.Content=I4;vd.Body=A4;vd.Header=R4;vd.Title=N4;vd.CloseButton=k4;vd.Stack=a0e;function u0e({open:e,close:t,openDelay:n,closeDelay:r}){const i=D.useRef(-1),s=D.useRef(-1),o=()=>{window.clearTimeout(i.current),window.clearTimeout(s.current)},a=()=>{o(),n===0||n===void 0?e():i.current=window.setTimeout(e,n)},u=()=>{o(),r===0||r===void 0?t():s.current=window.setTimeout(t,r)};return D.useEffect(()=>o,[]),{openDropdown:a,closeDropdown:u}}const[rte,l0e]=Is("Grid component was not found in tree"),z9=(e,t)=>e==="content"?"auto":e==="auto"?"0rem":e?`${100/(t/e)}%`:void 0,ite=(e,t,n)=>n||e==="auto"?"100%":e==="content"?"unset":z9(e,t),ste=(e,t)=>{if(e)return e==="auto"||t?"1":"auto"},ote=(e,t)=>e===0?"0":e?`${100/(t/e)}%`:void 0;function RLe({span:e,order:t,offset:n,selector:r}){var h;const i=ss(),s=l0e(),o=s.breakpoints||i.breakpoints,u=Yc(e)===void 0?12:Yc(e),l=Q0({"--col-order":(h=Yc(t))==null?void 0:h.toString(),"--col-flex-grow":ste(u,s.grow),"--col-flex-basis":z9(u,s.columns),"--col-width":u==="content"?"auto":void 0,"--col-max-width":ite(u,s.columns,s.grow),"--col-offset":ote(Yc(n),s.columns)}),c=Ur(o).reduce((p,m)=>{var y;return p[m]||(p[m]={}),typeof t=="object"&&t[m]!==void 0&&(p[m]["--col-order"]=(y=t[m])==null?void 0:y.toString()),typeof e=="object"&&e[m]!==void 0&&(p[m]["--col-flex-grow"]=ste(e[m],s.grow),p[m]["--col-flex-basis"]=z9(e[m],s.columns),p[m]["--col-width"]=e[m]==="content"?"auto":void 0,p[m]["--col-max-width"]=ite(e[m],s.columns,s.grow)),typeof n=="object"&&n[m]!==void 0&&(p[m]["--col-offset"]=ote(n[m],s.columns)),p},{}),f=_2(Ur(c),o).filter(p=>Ur(c[p.value]).length>0).map(p=>({query:s.type==="container"?`mantine-grid (min-width: ${o[p.value]})`:`(min-width: ${o[p.value]})`,styles:c[p.value]}));return T.jsx(M1,{styles:l,media:s.type==="container"?void 0:f,container:s.type==="container"?f:void 0,selector:r})}var hV={container:"m_8478a6da",root:"m_410352e9",inner:"m_dee7bd2f",col:"m_96bdd299"};const DLe={span:12},pV=tt((e,t)=>{const n=Me("GridCol",DLe,e),{classNames:r,className:i,style:s,styles:o,vars:a,span:u,order:l,offset:c,...d}=n,f=l0e(),h=UC();return T.jsxs(T.Fragment,{children:[T.jsx(RLe,{selector:`.${h}`,span:u,order:l,offset:c}),T.jsx(Se,{ref:t,...f.getStyles("col",{className:qi(i,h),style:s,classNames:r,styles:o}),...d})]})});pV.classes=hV;pV.displayName="@mantine/core/GridCol";function ate({gutter:e,selector:t,breakpoints:n,type:r}){const i=ss(),s=n||i.breakpoints,o=Q0({"--grid-gutter":ns(Yc(e))}),a=Ur(s).reduce((c,d)=>(c[d]||(c[d]={}),typeof e=="object"&&e[d]!==void 0&&(c[d]["--grid-gutter"]=ns(e[d])),c),{}),l=_2(Ur(a),s).filter(c=>Ur(a[c.value]).length>0).map(c=>({query:r==="container"?`mantine-grid (min-width: ${s[c.value]})`:`(min-width: ${s[c.value]})`,styles:a[c.value]}));return T.jsx(M1,{styles:o,media:r==="container"?void 0:l,container:r==="container"?l:void 0,selector:t})}const PLe={gutter:"md",grow:!1,columns:12},NLe=(e,{justify:t,align:n,overflow:r})=>({root:{"--grid-justify":t,"--grid-align":n,"--grid-overflow":r}}),ff=tt((e,t)=>{const n=Me("Grid",PLe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,grow:l,gutter:c,columns:d,align:f,justify:h,children:p,breakpoints:m,type:y,...v}=n,b=$t({name:"Grid",classes:hV,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:NLe}),w=UC();return y==="container"&&m?T.jsxs(rte,{value:{getStyles:b,grow:l,columns:d||12,breakpoints:m,type:y},children:[T.jsx(ate,{selector:`.${w}`,...n}),T.jsx("div",{...b("container"),children:T.jsx(Se,{ref:t,...b("root",{className:w}),...v,children:T.jsx("div",{...b("inner"),children:p})})})]}):T.jsxs(rte,{value:{getStyles:b,grow:l,columns:d||12,breakpoints:m,type:y},children:[T.jsx(ate,{selector:`.${w}`,...n}),T.jsx(Se,{ref:t,...b("root",{className:w}),...v,children:T.jsx("div",{...b("inner"),children:p})})]})});ff.classes=hV;ff.displayName="@mantine/core/Grid";ff.Col=pV;const[OLe,c0e]=Is("HoverCard component was not found in the tree"),$Le={};function d0e(e){const{children:t,onMouseEnter:n,onMouseLeave:r,...i}=Me("HoverCardDropdown",$Le,e),s=c0e(),o=wu(n,s.openDropdown),a=wu(r,s.closeDropdown);return T.jsx(Po.Dropdown,{onMouseEnter:o,onMouseLeave:a,...i,children:t})}d0e.displayName="@mantine/core/HoverCardDropdown";const MLe={refProp:"ref"},f0e=D.forwardRef((e,t)=>{const{children:n,refProp:r,eventPropsWrapperName:i,...s}=Me("HoverCardTarget",MLe,e);if(!jp(n))throw new Error("HoverCard.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const o=c0e(),a=wu(n.props.onMouseEnter,o.openDropdown),u=wu(n.props.onMouseLeave,o.closeDropdown),l={onMouseEnter:a,onMouseLeave:u};return T.jsx(Po.Target,{refProp:r,ref:t,...s,children:D.cloneElement(n,i?{[i]:l}:l)})});f0e.displayName="@mantine/core/HoverCardTarget";const LLe={openDelay:0,closeDelay:150,initiallyOpened:!1};function My(e){const{children:t,onOpen:n,onClose:r,openDelay:i,closeDelay:s,initiallyOpened:o,...a}=Me("HoverCard",LLe,e),[u,{open:l,close:c}]=Xz(o,{onClose:r,onOpen:n}),{openDropdown:d,closeDropdown:f}=u0e({open:l,close:c,openDelay:i,closeDelay:s});return T.jsx(OLe,{value:{openDropdown:d,closeDropdown:f},children:T.jsx(Po,{...a,opened:u,__staticSelector:"HoverCard",children:t})})}My.displayName="@mantine/core/HoverCard";My.Target=f0e;My.Dropdown=d0e;My.extend=e=>e;var h0e={root:"m_9e117634"};const FLe={},BLe=(e,{radius:t,fit:n})=>({root:{"--image-radius":t===void 0?void 0:Dr(t),"--image-object-fit":n}}),rg=os((e,t)=>{const n=Me("Image",FLe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,onError:l,src:c,radius:d,fit:f,fallbackSrc:h,mod:p,...m}=n,[y,v]=D.useState(!c);D.useEffect(()=>v(!c),[c]);const b=$t({name:"Image",classes:h0e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:BLe});return y&&h?T.jsx(Se,{component:"img",ref:t,src:h,...b("root"),onError:l,mod:["fallback",p],...m}):T.jsx(Se,{component:"img",ref:t,...b("root"),src:c,onError:w=>{l==null||l(w),v(!0)},mod:p,...m})});rg.classes=h0e;rg.displayName="@mantine/core/Image";function NP(){return NP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},NP.apply(null,arguments)}function mV(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var jLe=D.useLayoutEffect,zLe=function(t){var n=D.useRef(t);return jLe(function(){n.current=t}),n},ute=function(t,n){if(typeof t=="function"){t(n);return}t.current=n},ULe=function(t,n){var r=D.useRef();return D.useCallback(function(i){t.current=i,r.current&&ute(r.current,null),r.current=n,n&&ute(n,i)},[n])},lte={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0",display:"block"},VLe=function(t){Object.keys(lte).forEach(function(n){t.style.setProperty(n,lte[n],"important")})},cte=VLe,Ca=null,dte=function(t,n){var r=t.scrollHeight;return n.sizingStyle.boxSizing==="border-box"?r+n.borderSize:r-n.paddingSize};function HLe(e,t,n,r){n===void 0&&(n=1),r===void 0&&(r=1/0),Ca||(Ca=document.createElement("textarea"),Ca.setAttribute("tabindex","-1"),Ca.setAttribute("aria-hidden","true"),cte(Ca)),Ca.parentNode===null&&document.body.appendChild(Ca);var i=e.paddingSize,s=e.borderSize,o=e.sizingStyle,a=o.boxSizing;Object.keys(o).forEach(function(f){var h=f;Ca.style[h]=o[h]}),cte(Ca),Ca.value=t;var u=dte(Ca,e);Ca.value=t,u=dte(Ca,e),Ca.value="x";var l=Ca.scrollHeight-i,c=l*n;a==="border-box"&&(c=c+i+s),u=Math.max(c,u);var d=l*r;return a==="border-box"&&(d=d+i+s),u=Math.min(d,u),[u,l]}var fte=function(){},qLe=function(t,n){return t.reduce(function(r,i){return r[i]=n[i],r},{})},WLe=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak","wordSpacing","scrollbarGutter"],GLe=!!document.documentElement.currentStyle,YLe=function(t){var n=window.getComputedStyle(t);if(n===null)return null;var r=qLe(WLe,n),i=r.boxSizing;if(i==="")return null;GLe&&i==="border-box"&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px");var s=parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),o=parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth);return{sizingStyle:r,paddingSize:s,borderSize:o}},KLe=YLe;function p0e(e,t,n){var r=zLe(n);D.useLayoutEffect(function(){var i=function(o){return r.current(o)};if(e)return e.addEventListener(t,i),function(){return e.removeEventListener(t,i)}},[])}var XLe=function(t){p0e(window,"resize",t)},QLe=function(t){p0e(document.fonts,"loadingdone",t)},JLe=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],ZLe=function(t,n){var r=t.cacheMeasurements,i=t.maxRows,s=t.minRows,o=t.onChange,a=o===void 0?fte:o,u=t.onHeightChange,l=u===void 0?fte:u,c=mV(t,JLe),d=c.value!==void 0,f=D.useRef(null),h=ULe(f,n),p=D.useRef(0),m=D.useRef(),y=function(){var w=f.current,E=r&&m.current?m.current:KLe(w);if(E){m.current=E;var _=HLe(E,w.value||w.placeholder||"x",s,i),C=_[0],S=_[1];p.current!==C&&(p.current=C,w.style.setProperty("height",C+"px","important"),l(C,{rowHeight:S}))}},v=function(w){d||y(),a(w)};return D.useLayoutEffect(y),XLe(y),QLe(y),D.createElement("textarea",NP({},c,{onChange:v,ref:h}))},eFe=D.forwardRef(ZLe);const tFe={},gV=tt((e,t)=>{const{autosize:n,maxRows:r,minRows:i,__staticSelector:s,resize:o,...a}=Me("Textarea",tFe,e),u=n&&jOe()!=="test",l=u?{maxRows:r,minRows:i}:{};return T.jsx(Mu,{component:u?eFe:"textarea",ref:t,...a,__staticSelector:s||"Textarea",multiline:!0,"data-no-overflow":n&&r===void 0||void 0,__vars:{"--input-resize":o},...l})});gV.classes=Mu.classes;gV.displayName="@mantine/core/Textarea";const[nFe,rFe]=Is("List component was not found in tree");var yV={root:"m_abbac491",item:"m_abb6bec2",itemWrapper:"m_75cd9f71",itemIcon:"m_60f83e5b"};const iFe={},bV=tt((e,t)=>{const n=Me("ListItem",iFe,e),{classNames:r,className:i,style:s,styles:o,vars:a,icon:u,children:l,mod:c,...d}=n,f=rFe(),h=u||f.icon,p={classNames:r,styles:o};return T.jsx(Se,{...f.getStyles("item",{...p,className:i,style:s}),component:"li",mod:[{"with-icon":!!h,centered:f.center},c],ref:t,...d,children:T.jsxs("div",{...f.getStyles("itemWrapper",p),children:[h&&T.jsx("span",{...f.getStyles("itemIcon",p),children:h}),T.jsx("span",{...f.getStyles("itemLabel",p),children:l})]})})});bV.classes=yV;bV.displayName="@mantine/core/ListItem";const sFe={type:"unordered"},oFe=(e,{size:t,spacing:n})=>({root:{"--list-fz":Do(t),"--list-lh":ppe(t),"--list-spacing":ns(n)}}),nd=tt((e,t)=>{const n=Me("List",sFe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,type:c,withPadding:d,icon:f,spacing:h,center:p,listStyleType:m,mod:y,...v}=n,b=$t({name:"List",classes:yV,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:oFe});return T.jsx(nFe,{value:{center:p,icon:f,getStyles:b},children:T.jsx(Se,{...b("root",{style:{listStyleType:m}}),component:c==="unordered"?"ul":"ol",mod:[{"with-padding":d},y],ref:t,...v,children:l})})});nd.classes=yV;nd.displayName="@mantine/core/List";nd.Item=bV;var m0e={root:"m_6e45937b",loader:"m_e8eb006c",overlay:"m_df587f17"};const hte={transitionProps:{transition:"fade",duration:0},overlayProps:{backgroundOpacity:.75},zIndex:so("overlay")},aFe=(e,{zIndex:t})=>({root:{"--lo-z-index":t==null?void 0:t.toString()}}),fl=tt((e,t)=>{const n=Me("LoadingOverlay",hte,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,transitionProps:l,loaderProps:c,overlayProps:d,visible:f,zIndex:h,...p}=n,m=ss(),y=$t({name:"LoadingOverlay",classes:m0e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:aFe}),v={...hte.overlayProps,...d};return T.jsx(Jf,{transition:"fade",...l,mounted:!!f,children:b=>T.jsxs(Se,{...y("root",{style:b}),ref:t,...p,children:[T.jsx(bd,{...y("loader"),unstyled:a,...c}),T.jsx(Tx,{...v,...y("overlay"),darkHidden:!0,unstyled:a,color:(d==null?void 0:d.color)||m.white}),T.jsx(Tx,{...v,...y("overlay"),lightHidden:!0,unstyled:a,color:(d==null?void 0:d.color)||m.colors.dark[5]})]})})});fl.classes=m0e;fl.displayName="@mantine/core/LoadingOverlay";const[uFe,KC]=Is("Menu component was not found in the tree");var Ow={dropdown:"m_dc9b7c9f",label:"m_9bfac126",divider:"m_efdf90cb",item:"m_99ac2aa1",itemLabel:"m_5476e0d3",itemSection:"m_8b75e504"};const lFe={},vV=tt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Me("MenuDivider",lFe,e),u=KC();return T.jsx(Se,{ref:t,...u.getStyles("divider",{className:r,style:i,styles:s,classNames:n}),...a})});vV.classes=Ow;vV.displayName="@mantine/core/MenuDivider";const cFe={},xV=tt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,onMouseEnter:a,onMouseLeave:u,onKeyDown:l,children:c,...d}=Me("MenuDropdown",cFe,e),f=D.useRef(null),h=KC(),p=wu(l,v=>{var b,w;(v.key==="ArrowUp"||v.key==="ArrowDown")&&(v.preventDefault(),(w=(b=f.current)==null?void 0:b.querySelectorAll("[data-menu-item]:not(:disabled)")[0])==null||w.focus())}),m=wu(a,()=>(h.trigger==="hover"||h.trigger==="click-hover")&&h.openDropdown()),y=wu(u,()=>(h.trigger==="hover"||h.trigger==="click-hover")&&h.closeDropdown());return T.jsxs(Po.Dropdown,{...d,onMouseEnter:m,onMouseLeave:y,role:"menu","aria-orientation":"vertical",ref:Rs(t,f),...h.getStyles("dropdown",{className:r,style:i,styles:s,classNames:n,withStaticClass:!1}),tabIndex:-1,"data-menu-dropdown":!0,onKeyDown:p,children:[T.jsx("div",{tabIndex:-1,"data-autofocus":!0,"data-mantine-stop-propagation":!0,style:{outline:0}}),c]})});xV.classes=Ow;xV.displayName="@mantine/core/MenuDropdown";const dFe={},wV=os((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,color:a,closeMenuOnClick:u,leftSection:l,rightSection:c,children:d,disabled:f,...h}=Me("MenuItem",dFe,e),p=KC(),m=ss(),{dir:y}=Up(),v=D.useRef(null),b=p.getItemIndex(v.current),w=h,E=wu(w.onMouseLeave,()=>p.setHovered(-1)),_=wu(w.onMouseEnter,()=>p.setHovered(p.getItemIndex(v.current))),C=wu(w.onClick,()=>{typeof u=="boolean"?u&&p.closeDropdownImmediately():p.closeOnItemClick&&p.closeDropdownImmediately()}),S=wu(w.onFocus,()=>p.setHovered(p.getItemIndex(v.current))),k=a?m.variantColorResolver({color:a,theme:m,variant:"light"}):void 0,R=a?Qf({color:a,theme:m}):null;return T.jsxs(ku,{...h,unstyled:p.unstyled,tabIndex:p.menuItemTabIndex,onFocus:S,...p.getStyles("item",{className:r,style:i,styles:s,classNames:n}),ref:Rs(v,t),role:"menuitem",disabled:f,"data-menu-item":!0,"data-disabled":f||void 0,"data-hovered":p.hovered===b?!0:void 0,"data-mantine-stop-propagation":!0,onMouseEnter:_,onMouseLeave:E,onClick:C,onKeyDown:Gz({siblingSelector:"[data-menu-item]",parentSelector:"[data-menu-dropdown]",activateOnFocus:!1,loop:p.loop,dir:y,orientation:"vertical",onKeyDown:w.onKeyDown}),__vars:{"--menu-item-color":R!=null&&R.isThemeColor&&(R==null?void 0:R.shade)===void 0?`var(--mantine-color-${R.color}-6)`:k==null?void 0:k.color,"--menu-item-hover":k==null?void 0:k.hover},children:[l&&T.jsx("div",{...p.getStyles("itemSection",{styles:s,classNames:n}),"data-position":"left",children:l}),d&&T.jsx("div",{...p.getStyles("itemLabel",{styles:s,classNames:n}),children:d}),c&&T.jsx("div",{...p.getStyles("itemSection",{styles:s,classNames:n}),"data-position":"right",children:c})]})});wV.classes=Ow;wV.displayName="@mantine/core/MenuItem";const fFe={},EV=tt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Me("MenuLabel",fFe,e),u=KC();return T.jsx(Se,{ref:t,...u.getStyles("label",{className:r,style:i,styles:s,classNames:n}),...a})});EV.classes=Ow;EV.displayName="@mantine/core/MenuLabel";const hFe={refProp:"ref"},g0e=D.forwardRef((e,t)=>{const{children:n,refProp:r,...i}=Me("MenuTarget",hFe,e);if(!jp(n))throw new Error("Menu.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const s=KC(),o=n.props,a=wu(o.onClick,()=>{s.trigger==="click"?s.toggleDropdown():s.trigger==="click-hover"&&(s.setOpenedViaClick(!0),s.opened||s.openDropdown())}),u=wu(o.onMouseEnter,()=>(s.trigger==="hover"||s.trigger==="click-hover")&&s.openDropdown()),l=wu(o.onMouseLeave,()=>{(s.trigger==="hover"||s.trigger==="click-hover"&&!s.openedViaClick)&&s.closeDropdown()});return T.jsx(Po.Target,{refProp:r,popupType:"menu",ref:t,...i,children:D.cloneElement(n,{onClick:a,onMouseEnter:u,onMouseLeave:l,"data-expanded":s.opened?!0:void 0})})});g0e.displayName="@mantine/core/MenuTarget";const pFe={trapFocus:!0,closeOnItemClick:!0,clickOutsideEvents:["mousedown","touchstart","keydown"],loop:!0,trigger:"click",openDelay:0,closeDelay:100,menuItemTabIndex:-1};function Da(e){const t=Me("Menu",pFe,e),{children:n,onOpen:r,onClose:i,opened:s,defaultOpened:o,trapFocus:a,onChange:u,closeOnItemClick:l,loop:c,closeOnEscape:d,trigger:f,openDelay:h,closeDelay:p,classNames:m,styles:y,unstyled:v,variant:b,vars:w,menuItemTabIndex:E,keepMounted:_,...C}=t,S=$t({name:"Menu",classes:Ow,props:t,classNames:m,styles:y,unstyled:v}),[k,{setHovered:R,resetHovered:N}]=mOe(),[O,F]=no({value:s,defaultValue:o,finalValue:!1,onChange:u}),[$,z]=D.useState(!1),q=()=>{F(!1),z(!1),O&&(i==null||i())},W=()=>{F(!0),!O&&(r==null||r())},J=()=>{O?q():W()},{openDropdown:K,closeDropdown:Z}=u0e({open:W,close:q,closeDelay:p,openDelay:h}),U=j=>pOe("[data-menu-item]","[data-menu-dropdown]",j),{resolvedClassNames:L,resolvedStyles:Y}=$1({classNames:m,styles:y,props:t});return Nf(()=>{N()},[O]),T.jsx(uFe,{value:{getStyles:S,opened:O,toggleDropdown:J,getItemIndex:U,hovered:k,setHovered:R,openedViaClick:$,setOpenedViaClick:z,closeOnItemClick:l,closeDropdown:f==="click"?q:Z,openDropdown:f==="click"?W:K,closeDropdownImmediately:q,loop:c,trigger:f,unstyled:v,menuItemTabIndex:E},children:T.jsx(Po,{...C,opened:O,onChange:J,defaultOpened:o,trapFocus:_?!1:a,closeOnEscape:d,__staticSelector:"Menu",classNames:L,styles:Y,unstyled:v,variant:b,keepMounted:_,children:n})})}Da.extend=e=>e;Da.classes=Ow;Da.displayName="@mantine/core/Menu";Da.Item=wV;Da.Label=EV;Da.Dropdown=xV;Da.Target=g0e;Da.Divider=vV;const[mFe,$w]=Is("Modal component was not found in tree");var Wp={root:"m_9df02822",content:"m_54c44539",inner:"m_1f958f16",header:"m_d0e2b9cd"};const gFe={},O4=tt((e,t)=>{const n=Me("ModalBody",gFe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=$w();return T.jsx(AU,{ref:t,...l.getStyles("body",{classNames:r,style:s,styles:o,className:i}),...u})});O4.classes=Wp;O4.displayName="@mantine/core/ModalBody";const yFe={},$4=tt((e,t)=>{const n=Me("ModalCloseButton",yFe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=$w();return T.jsx(kU,{ref:t,...l.getStyles("close",{classNames:r,style:s,styles:o,className:i}),...u})});$4.classes=Wp;$4.displayName="@mantine/core/ModalCloseButton";const bFe={},M4=tt((e,t)=>{const n=Me("ModalContent",bFe,e),{classNames:r,className:i,style:s,styles:o,vars:a,children:u,__hidden:l,...c}=n,d=$w(),f=d.scrollAreaComponent||Ame;return T.jsx(IU,{...d.getStyles("content",{className:i,style:s,styles:o,classNames:r}),innerProps:d.getStyles("inner",{className:i,style:s,styles:o,classNames:r}),"data-full-screen":d.fullScreen||void 0,"data-modal-content":!0,"data-hidden":l||void 0,ref:t,...c,children:T.jsx(f,{style:{maxHeight:d.fullScreen?"100dvh":`calc(100dvh - (${$e(d.yOffset)} * 2))`},children:u})})});M4.classes=Wp;M4.displayName="@mantine/core/ModalContent";const vFe={},L4=tt((e,t)=>{const n=Me("ModalHeader",vFe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=$w();return T.jsx(RU,{ref:t,...l.getStyles("header",{classNames:r,style:s,styles:o,className:i}),...u})});L4.classes=Wp;L4.displayName="@mantine/core/ModalHeader";const xFe={},F4=tt((e,t)=>{const n=Me("ModalOverlay",xFe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=$w();return T.jsx(DU,{ref:t,...l.getStyles("overlay",{classNames:r,style:s,styles:o,className:i}),...u})});F4.classes=Wp;F4.displayName="@mantine/core/ModalOverlay";const wFe={__staticSelector:"Modal",closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:so("modal"),transitionProps:{duration:200,transition:"fade-down"},yOffset:"5dvh"},EFe=(e,{radius:t,size:n,yOffset:r,xOffset:i})=>({root:{"--modal-radius":t===void 0?void 0:Dr(t),"--modal-size":mn(n,"modal-size"),"--modal-y-offset":$e(r),"--modal-x-offset":$e(i)}}),B4=tt((e,t)=>{const n=Me("ModalRoot",wFe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,yOffset:l,scrollAreaComponent:c,radius:d,fullScreen:f,centered:h,xOffset:p,__staticSelector:m,...y}=n,v=$t({name:m,classes:Wp,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:EFe});return T.jsx(mFe,{value:{yOffset:l,scrollAreaComponent:c,getStyles:v,fullScreen:f},children:T.jsx(SU,{ref:t,...v("root"),"data-full-screen":f||void 0,"data-centered":h||void 0,unstyled:a,...y})})});B4.classes=Wp;B4.displayName="@mantine/core/ModalRoot";const[_Fe,TFe]=zp();function y0e({children:e}){const[t,n]=D.useState([]),[r,i]=D.useState(so("modal"));return T.jsx(_Fe,{value:{stack:t,addModal:(s,o)=>{n(a=>[...new Set([...a,s])]),i(a=>typeof o=="number"&&typeof a=="number"?Math.max(a,o):a)},removeModal:s=>n(o=>o.filter(a=>a!==s)),getZIndex:s=>`calc(${r} + ${t.indexOf(s)} + 1)`,currentId:t[t.length-1],maxZIndex:r},children:e})}y0e.displayName="@mantine/core/ModalStack";const CFe={},j4=tt((e,t)=>{const n=Me("ModalTitle",CFe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=$w();return T.jsx(PU,{ref:t,...l.getStyles("title",{classNames:r,style:s,styles:o,className:i}),...u})});j4.classes=Wp;j4.displayName="@mantine/core/ModalTitle";const SFe={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:so("modal"),transitionProps:{duration:200,transition:"fade-down"},withOverlay:!0,withCloseButton:!0},Ei=tt((e,t)=>{const{title:n,withOverlay:r,overlayProps:i,withCloseButton:s,closeButtonProps:o,children:a,radius:u,opened:l,stackId:c,zIndex:d,...f}=Me("Modal",SFe,e),h=TFe(),p=!!n||s,m=h&&c?{closeOnEscape:h.currentId===c,trapFocus:h.currentId===c,zIndex:h.getZIndex(c)}:{},y=r===!1?!1:c&&h?h.currentId===c:l;return D.useEffect(()=>{h&&c&&(l?h.addModal(c,d||so("modal")):h.removeModal(c))},[l,c,d]),T.jsxs(B4,{ref:t,radius:u,opened:l,zIndex:h&&c?h.getZIndex(c):d,...f,...m,children:[r&&T.jsx(F4,{visible:y,transitionProps:h&&c?{duration:0}:void 0,...i}),T.jsxs(M4,{radius:u,__hidden:h&&c&&l?c!==h.currentId:!1,children:[p&&T.jsxs(L4,{children:[n&&T.jsx(j4,{children:n}),s&&T.jsx($4,{...o})]}),T.jsx(O4,{children:a})]})]})});Ei.classes=Wp;Ei.displayName="@mantine/core/Modal";Ei.Root=B4;Ei.Overlay=F4;Ei.Content=M4;Ei.Body=O4;Ei.Header=L4;Ei.Title=j4;Ei.CloseButton=$4;Ei.Stack=y0e;const[AFe,_V]=zp(),[kFe,IFe]=zp();var z4={root:"m_7cda1cd6","root--default":"m_44da308b","root--contrast":"m_e3a01f8",label:"m_1e0e6180",remove:"m_ae386778",group:"m_1dcfd90b"};const RFe={},DFe=(e,{gap:t},{size:n})=>({group:{"--pg-gap":t!==void 0?mn(t):mn(n,"pg-gap")}}),TV=tt((e,t)=>{const n=Me("PillGroup",RFe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,disabled:c,...d}=n,f=_V(),h=(f==null?void 0:f.size)||l||void 0,p=$t({name:"PillGroup",classes:z4,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:DFe,stylesCtx:{size:h},rootSelector:"group"});return T.jsx(kFe,{value:{size:h,disabled:c},children:T.jsx(Se,{ref:t,size:h,...p("group"),...d})})});TV.classes=z4;TV.displayName="@mantine/core/PillGroup";const PFe={variant:"default"},NFe=(e,{radius:t},{size:n})=>({root:{"--pill-fz":mn(n,"pill-fz"),"--pill-height":mn(n,"pill-height"),"--pill-radius":t===void 0?void 0:Dr(t)}}),S2=tt((e,t)=>{const n=Me("Pill",PFe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,variant:l,children:c,withRemoveButton:d,onRemove:f,removeButtonProps:h,radius:p,size:m,disabled:y,mod:v,...b}=n,w=IFe(),E=_V(),_=m||(w==null?void 0:w.size)||void 0,C=(E==null?void 0:E.variant)==="filled"?"contrast":l||"default",S=$t({name:"Pill",classes:z4,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:NFe,stylesCtx:{size:_}});return T.jsxs(Se,{component:"span",ref:t,variant:C,size:_,...S("root",{variant:C}),mod:[{"with-remove":d&&!y,disabled:y||(w==null?void 0:w.disabled)},v],...b,children:[T.jsx("span",{...S("label"),children:c}),d&&T.jsx(tg,{variant:"transparent",radius:p,tabIndex:-1,"aria-hidden":!0,unstyled:a,...h,...S("remove",{className:h==null?void 0:h.className,style:h==null?void 0:h.style}),onMouseDown:k=>{var R;k.preventDefault(),k.stopPropagation(),(R=h==null?void 0:h.onMouseDown)==null||R.call(h,k)},onClick:k=>{var R;k.stopPropagation(),f==null||f(),(R=h==null?void 0:h.onClick)==null||R.call(h,k)}})]})});S2.classes=z4;S2.displayName="@mantine/core/Pill";S2.Group=TV;var b0e={field:"m_45c4369d"};const OFe={type:"visible"},CV=tt((e,t)=>{const n=Me("PillsInputField",OFe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,type:l,disabled:c,id:d,pointer:f,mod:h,...p}=n,m=_V(),y=Rw(),v=$t({name:"PillsInputField",classes:b0e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"field"}),b=c||(m==null?void 0:m.disabled);return T.jsx(Se,{component:"input",ref:Rs(t,m==null?void 0:m.fieldRef),"data-type":l,disabled:b,mod:[{disabled:b,pointer:f},h],...v("field"),...p,id:(y==null?void 0:y.inputId)||d,"aria-invalid":m==null?void 0:m.hasError,"aria-describedby":y==null?void 0:y.describedBy,type:"text",onMouseDown:w=>!f&&w.stopPropagation()})});CV.classes=b0e;CV.displayName="@mantine/core/PillsInputField";const $Fe={},OP=tt((e,t)=>{const n=Me("PillsInput",$Fe,e),{children:r,onMouseDown:i,onClick:s,size:o,disabled:a,__staticSelector:u,error:l,variant:c,...d}=n,f=D.useRef(null);return T.jsx(AFe,{value:{fieldRef:f,size:o,disabled:a,hasError:!!l,variant:c},children:T.jsx(Mu,{size:o,error:l,variant:c,component:"div",ref:t,onMouseDown:h=>{var p;h.preventDefault(),i==null||i(h),(p=f.current)==null||p.focus()},onClick:h=>{var p;h.preventDefault(),s==null||s(h),(p=f.current)==null||p.focus()},...d,multiline:!0,disabled:a,__staticSelector:u||"PillsInput",withAria:!1,children:r})})});OP.displayName="@mantine/core/PillsInput";OP.Field=CV;function MFe({data:e,value:t}){const n=t.map(i=>i.trim().toLowerCase());return e.reduce((i,s)=>(Sx(s)?i.push({group:s.group,items:s.items.filter(o=>n.indexOf(o.value.toLowerCase().trim())===-1)}):n.indexOf(s.value.toLowerCase().trim())===-1&&i.push(s),i),[])}const LFe={maxValues:1/0,withCheckIcon:!0,checkIconPosition:"left",hiddenInputValuesDivider:","},SV=tt((e,t)=>{const n=Me("MultiSelect",LFe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,value:c,defaultValue:d,onChange:f,onKeyDown:h,variant:p,data:m,dropdownOpened:y,defaultDropdownOpened:v,onDropdownOpen:b,onDropdownClose:w,selectFirstOptionOnChange:E,onOptionSubmit:_,comboboxProps:C,filter:S,limit:k,withScrollArea:R,maxDropdownHeight:N,searchValue:O,defaultSearchValue:F,onSearchChange:$,readOnly:z,disabled:q,onFocus:W,onBlur:J,onPaste:K,radius:Z,rightSection:U,rightSectionWidth:L,rightSectionPointerEvents:Y,rightSectionProps:j,leftSection:G,leftSectionWidth:X,leftSectionPointerEvents:ne,leftSectionProps:pe,inputContainer:de,inputWrapperOrder:xe,withAsterisk:Ce,labelProps:ue,descriptionProps:se,errorProps:me,wrapperProps:be,description:Le,label:Ue,error:Ne,maxValues:je,searchable:Ke,nothingFoundMessage:ut,withCheckIcon:pt,checkIconPosition:xt,hidePickedOptions:De,withErrorStyles:wt,name:Kt,form:Te,id:Oe,clearable:lt,clearButtonProps:_t,hiddenInputProps:St,placeholder:en,hiddenInputValuesDivider:En,required:sr,mod:Jr,renderOption:wn,onRemove:An,onClear:Hr,scrollAreaProps:Ln,...Ns}=n,Zr=Ga(Oe),qr=WU(m),ai=GU(qr),or=rV({opened:y,defaultOpened:v,onDropdownOpen:b,onDropdownClose:()=>{w==null||w(),or.resetSelectedOption()}}),{styleProps:Os,rest:{type:Al,autoComplete:zo,...Bu}}=L1(Ns),[ar,Wr]=no({value:c,defaultValue:d,finalValue:[],onChange:f}),[br,$s]=no({value:O,defaultValue:F,finalValue:"",onChange:$}),Zn=$t({name:"MultiSelect",classes:{},props:n,classNames:r,styles:o,unstyled:a}),{resolvedClassNames:mi,resolvedStyles:Ms}=$1({props:n,styles:o,classNames:r}),as=Yn=>{h==null||h(Yn),Yn.key===" "&&!Ke&&(Yn.preventDefault(),or.toggleDropdown()),Yn.key==="Backspace"&&br.length===0&&ar.length>0&&(An==null||An(ar[ar.length-1]),Wr(ar.slice(0,ar.length-1)))},lo=ar.map((Yn,kl)=>{var gi,Xa;return T.jsx(S2,{withRemoveButton:!z&&!((gi=ai[Yn])!=null&&gi.disabled),onRemove:()=>{Wr(ar.filter(co=>Yn!==co)),An==null||An(Yn)},unstyled:a,disabled:q,...Zn("pill"),children:((Xa=ai[Yn])==null?void 0:Xa.label)||Yn},`${Yn}-${kl}`)});D.useEffect(()=>{E&&or.selectFirstOption()},[E,ar]);const ju=T.jsx(Hn.ClearButton,{..._t,onClear:()=>{Hr==null||Hr(),Wr([]),$s("")}}),gh=MFe({data:qr,value:ar});return T.jsxs(T.Fragment,{children:[T.jsxs(Hn,{store:or,classNames:mi,styles:Ms,unstyled:a,size:l,readOnly:z,__staticSelector:"MultiSelect",onOptionSubmit:Yn=>{_==null||_(Yn),$s(""),or.updateSelectedOptionIndex("selected"),ar.includes(ai[Yn].value)?(Wr(ar.filter(kl=>kl!==ai[Yn].value)),An==null||An(ai[Yn].value)):ar.length<je&&Wr([...ar,ai[Yn].value])},...C,children:[T.jsx(Hn.DropdownTarget,{children:T.jsx(OP,{...Os,__staticSelector:"MultiSelect",classNames:mi,styles:Ms,unstyled:a,size:l,className:i,style:s,variant:p,disabled:q,radius:Z,__defaultRightSection:T.jsx(Hn.Chevron,{size:l,error:Ne,unstyled:a}),__clearSection:ju,__clearable:lt&&ar.length>0&&!q&&!z,rightSection:U,rightSectionPointerEvents:Y||(ju?"all":"none"),rightSectionWidth:L,rightSectionProps:j,leftSection:G,leftSectionWidth:X,leftSectionPointerEvents:ne,leftSectionProps:pe,inputContainer:de,inputWrapperOrder:xe,withAsterisk:Ce,labelProps:ue,descriptionProps:se,errorProps:me,wrapperProps:be,description:Le,label:Ue,error:Ne,multiline:!0,withErrorStyles:wt,__stylesApiProps:{...n,rightSectionPointerEvents:Y||(ju?"all":"none"),multiline:!0},pointer:!Ke,onClick:()=>Ke?or.openDropdown():or.toggleDropdown(),"data-expanded":or.dropdownOpened||void 0,id:Zr,required:sr,mod:Jr,children:T.jsxs(S2.Group,{disabled:q,unstyled:a,...Zn("pillsList"),children:[lo,T.jsx(Hn.EventsTarget,{autoComplete:zo,children:T.jsx(OP.Field,{...Bu,ref:t,id:Zr,placeholder:en,type:!Ke&&!en?"hidden":"visible",...Zn("inputField"),unstyled:a,onFocus:Yn=>{W==null||W(Yn),Ke&&or.openDropdown()},onBlur:Yn=>{J==null||J(Yn),or.closeDropdown(),$s("")},onKeyDown:as,value:br,onChange:Yn=>{$s(Yn.currentTarget.value),Ke&&or.openDropdown(),E&&or.selectFirstOption()},disabled:q,readOnly:z||!Ke,pointer:!Ke})})]})})}),T.jsx(Zme,{data:De?gh:qr,hidden:z||q,filter:S,search:br,limit:k,hiddenWhenEmpty:!ut,withScrollArea:R,maxDropdownHeight:N,filterOptions:Ke,value:ar,checkIconPosition:xt,withCheckIcon:pt,nothingFoundMessage:ut,unstyled:a,labelId:Ue?`${Zr}-label`:void 0,"aria-label":Ue?void 0:Ns["aria-label"],renderOption:wn,scrollAreaProps:Ln})]}),T.jsx(Hn.HiddenInput,{name:Kt,valuesDivider:En,value:ar,form:Te,disabled:q,...St})]})});SV.classes={...Mu.classes,...Hn.classes};SV.displayName="@mantine/core/MultiSelect";function FFe(e){return"group"in e}function AV({data:e}){if(FFe(e)){const i=e.items.map(s=>T.jsx(AV,{data:s},s.value));return T.jsx("optgroup",{label:e.group,children:i})}const{value:t,label:n,...r}=e;return T.jsx("option",{value:e.value,...r,children:e.label},e.value)}AV.displayName="@mantine/core/NativeSelectOption";const BFe={rightSectionPointerEvents:"none"},my=tt((e,t)=>{const{data:n,children:r,size:i,error:s,rightSection:o,unstyled:a,...u}=Me("NativeSelect",BFe,e),l=WU(n).map((c,d)=>T.jsx(AV,{data:c},d));return T.jsx(Mu,{component:"select",ref:t,...u,__staticSelector:"NativeSelect",size:i,pointer:!0,error:s,unstyled:a,rightSection:o||T.jsx(T4,{size:i,error:s,unstyled:a}),children:r||l})});my.classes=Mu.classes;my.displayName="@mantine/core/NativeSelect";var v0e={root:"m_f0824112",description:"m_57492dcc",section:"m_690090b5",label:"m_1f6ac4c4",body:"m_f07af9d2",children:"m_e17b862f",chevron:"m_1fd8a00b"};const jFe={},zFe=(e,{variant:t,color:n,childrenOffset:r,autoContrast:i})=>{const s=e.variantColorResolver({color:n||e.primaryColor,theme:e,variant:t||"light",autoContrast:i});return{root:{"--nl-bg":n||t?s.background:void 0,"--nl-hover":n||t?s.hover:void 0,"--nl-color":n||t?s.color:void 0},children:{"--nl-offset":ns(r)}}},U4=os((e,t)=>{const n=Me("NavLink",jFe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,opened:l,defaultOpened:c,onChange:d,children:f,onClick:h,active:p,disabled:m,leftSection:y,rightSection:v,label:b,description:w,disableRightSectionRotation:E,noWrap:_,childrenOffset:C,onKeyDown:S,autoContrast:k,mod:R,...N}=n,O=$t({name:"NavLink",props:n,classes:v0e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:zFe}),[F,$]=no({value:l,defaultValue:c,finalValue:!1,onChange:d}),z=!!f,q=W=>{h==null||h(W),z&&(W.preventDefault(),$(!F))};return T.jsxs(T.Fragment,{children:[T.jsxs(ku,{...O("root"),component:"a",ref:t,onClick:q,onKeyDown:W=>{S==null||S(W),W.nativeEvent.code==="Space"&&z&&(W.preventDefault(),$(!F))},unstyled:a,mod:[{disabled:m,active:p,expanded:F},R],...N,children:[y&&T.jsx(Se,{component:"span",...O("section"),mod:{position:"left"},children:y}),T.jsxs(Se,{...O("body"),mod:{"no-wrap":_},children:[T.jsx(Se,{component:"span",...O("label"),children:b}),T.jsx(Se,{component:"span",mod:{active:p},...O("description"),children:w})]}),(z||v)&&T.jsx(Se,{...O("section"),component:"span",mod:{rotate:F&&!E,position:"right"},children:z?v||T.jsx(_4,{...O("chevron")}):v})]}),z&&T.jsx(m4,{in:F,...O("collapse"),children:T.jsx("div",{...O("children"),children:f})})]})});U4.classes=v0e;U4.displayName="@mantine/core/NavLink";var x0e={root:"m_a513464",icon:"m_a4ceffb",loader:"m_b0920b15",body:"m_a49ed24",title:"m_3feedf16",description:"m_3d733a3a",closeButton:"m_919a4d88"};const UFe={withCloseButton:!0},VFe=(e,{radius:t,color:n})=>({root:{"--notification-radius":t===void 0?void 0:Dr(t),"--notification-color":n?Vr(n,e):void 0}}),kV=tt((e,t)=>{const n=Me("Notification",UFe,e),{className:r,color:i,radius:s,loading:o,withCloseButton:a,withBorder:u,title:l,icon:c,children:d,onClose:f,closeButtonProps:h,classNames:p,style:m,styles:y,unstyled:v,variant:b,vars:w,mod:E,..._}=n,C=$t({name:"Notification",classes:x0e,props:n,className:r,style:m,classNames:p,styles:y,unstyled:v,vars:w,varsResolver:VFe});return T.jsxs(Se,{...C("root"),mod:[{"data-with-icon":!!c||o,"data-with-border":u},E],ref:t,variant:b,..._,role:"alert",children:[c&&!o&&T.jsx("div",{...C("icon"),children:c}),o&&T.jsx(bd,{size:28,color:i,...C("loader")}),T.jsxs("div",{...C("body"),children:[l&&T.jsx("div",{...C("title"),children:l}),T.jsx(Se,{...C("description"),mod:{"data-with-title":!!l},children:d})]}),a&&T.jsx(tg,{iconSize:16,color:"gray",...h,unstyled:v,onClick:f,...C("closeButton")})]})});kV.classes=x0e;kV.displayName="@mantine/core/Notification";function w0e(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}var A2;(function(e){e.event="event",e.props="prop"})(A2||(A2={}));function Vm(){}function HFe(e){var t,n=void 0;return function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return t&&r.length===t.length&&r.every(function(s,o){return s===t[o]})||(t=r,n=e.apply(void 0,r)),n}}function k2(e){return!!(e||"").match(/\d/)}function Kv(e){return e==null}function qFe(e){return typeof e=="number"&&isNaN(e)}function E0e(e){return Kv(e)||qFe(e)||typeof e=="number"&&!isFinite(e)}function _0e(e){return e.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}function WFe(e){switch(e){case"lakh":return/(\d+?)(?=(\d\d)+(\d)(?!\d))(\.\d+)?/g;case"wan":return/(\d)(?=(\d{4})+(?!\d))/g;case"thousand":default:return/(\d)(?=(\d{3})+(?!\d))/g}}function GFe(e,t,n){var r=WFe(n),i=e.search(/[1-9]/);return i=i===-1?e.length:i,e.substring(0,i)+e.substring(i,e.length).replace(r,"$1"+t)}function YFe(e){var t=D.useRef(e);t.current=e;var n=D.useRef(function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return t.current.apply(t,r)});return n.current}function IV(e,t){t===void 0&&(t=!0);var n=e[0]==="-",r=n&&t;e=e.replace("-","");var i=e.split("."),s=i[0],o=i[1]||"";return{beforeDecimal:s,afterDecimal:o,hasNegation:n,addNegation:r}}function KFe(e){if(!e)return e;var t=e[0]==="-";t&&(e=e.substring(1,e.length));var n=e.split("."),r=n[0].replace(/^0+/,"")||"0",i=n[1]||"";return(t?"-":"")+r+(i?"."+i:"")}function T0e(e,t,n){for(var r="",i=n?"0":"",s=0;s<=t-1;s++)r+=e[s]||i;return r}function pte(e,t){return Array(t+1).join(e)}function C0e(e){var t=e+"",n=t[0]==="-"?"-":"";n&&(t=t.substring(1));var r=t.split(/[eE]/g),i=r[0],s=r[1];if(s=Number(s),!s)return n+i;i=i.replace(".","");var o=1+s,a=i.length;return o<0?i="0."+pte("0",Math.abs(o))+i:o>=a?i=i+pte("0",o-a):i=(i.substring(0,o)||"0")+"."+i.substring(o),n+i}function mte(e,t,n){if(["","-"].indexOf(e)!==-1)return e;var r=(e.indexOf(".")!==-1||n)&&t,i=IV(e),s=i.beforeDecimal,o=i.afterDecimal,a=i.hasNegation,u=parseFloat("0."+(o||"0")),l=o.length<=t?"0."+o:u.toFixed(t),c=l.split("."),d=s;s&&Number(c[0])&&(d=s.split("").reverse().reduce(function(m,y,v){return m.length>v?(Number(m[0])+Number(y)).toString()+m.substring(1,m.length):y+m},c[0]));var f=T0e(c[1]||"",t,n),h=a?"-":"",p=r?".":"";return""+h+d+p+f}function gy(e,t){if(e.value=e.value,e!==null){if(e.createTextRange){var n=e.createTextRange();return n.move("character",t),n.select(),!0}return e.selectionStart||e.selectionStart===0?(e.focus(),e.setSelectionRange(t,t),!0):(e.focus(),!1)}}var S0e=HFe(function(e,t){for(var n=0,r=0,i=e.length,s=t.length;e[n]===t[n]&&n<i;)n++;for(;e[i-1-r]===t[s-1-r]&&s-r>n&&i-r>n;)r++;return{from:{start:n,end:i-r},to:{start:n,end:s-r}}}),XFe=function(e,t){var n=Math.min(e.selectionStart,t);return{from:{start:n,end:e.selectionEnd},to:{start:n,end:t}}};function QFe(e,t,n){return Math.min(Math.max(e,t),n)}function r8(e){return Math.max(e.selectionStart,e.selectionEnd)}function JFe(){return typeof navigator<"u"&&!(navigator.platform&&/iPhone|iPod/.test(navigator.platform))}function ZFe(e){return{from:{start:0,end:0},to:{start:0,end:e.length},lastValue:""}}function e9e(e){var t=e.currentValue,n=e.formattedValue,r=e.currentValueIndex,i=e.formattedValueIndex;return t[r]===n[i]}function t9e(e,t,n,r,i,s,o){o===void 0&&(o=e9e);var a=i.findIndex(function(E){return E}),u=e.slice(0,a);!t&&!n.startsWith(u)&&(t=u,n=u+n,r=r+u.length);for(var l=n.length,c=e.length,d={},f=new Array(l),h=0;h<l;h++){f[h]=-1;for(var p=0,m=c;p<m;p++){var y=o({currentValue:n,lastValue:t,formattedValue:e,currentValueIndex:h,formattedValueIndex:p});if(y&&d[p]!==!0){f[h]=p,d[p]=!0;break}}}for(var v=r;v<l&&(f[v]===-1||!s(n[v]));)v++;var b=v===l||f[v]===-1?c:f[v];for(v=r-1;v>0&&f[v]===-1;)v--;var w=v===-1||f[v]===-1?0:f[v]+1;return w>b?b:r-w<b-r?w:b}function gte(e,t,n,r){var i=e.length;if(t=QFe(t,0,i),r==="left"){for(;t>=0&&!n[t];)t--;t===-1&&(t=n.indexOf(!0))}else{for(;t<=i&&!n[t];)t++;t>i&&(t=n.lastIndexOf(!0))}return t===-1&&(t=i),t}function n9e(e){for(var t=Array.from({length:e.length+1}).map(function(){return!0}),n=0,r=t.length;n<r;n++)t[n]=!!(k2(e[n])||k2(e[n-1]));return t}function A0e(e,t,n,r,i,s){s===void 0&&(s=Vm);var o=YFe(function(p,m){var y,v;return E0e(p)?(v="",y=""):typeof p=="number"||m?(v=typeof p=="number"?C0e(p):p,y=r(v)):(v=i(p,void 0),y=r(v)),{formattedValue:y,numAsString:v}}),a=D.useState(function(){return o(Kv(e)?t:e,n)}),u=a[0],l=a[1],c=function(p,m){p.formattedValue!==u.formattedValue&&l({formattedValue:p.formattedValue,numAsString:p.value}),s(p,m)},d=e,f=n;Kv(e)&&(d=u.numAsString,f=!0);var h=o(d,f);return D.useMemo(function(){l(h)},[h.formattedValue]),[u,c]}function r9e(e){return e.replace(/[^0-9]/g,"")}function i9e(e){return e}function s9e(e){var t=e.type;t===void 0&&(t="text");var n=e.displayType;n===void 0&&(n="input");var r=e.customInput,i=e.renderText,s=e.getInputRef,o=e.format;o===void 0&&(o=i9e);var a=e.removeFormatting;a===void 0&&(a=r9e);var u=e.defaultValue,l=e.valueIsNumericString,c=e.onValueChange,d=e.isAllowed,f=e.onChange;f===void 0&&(f=Vm);var h=e.onKeyDown;h===void 0&&(h=Vm);var p=e.onMouseUp;p===void 0&&(p=Vm);var m=e.onFocus;m===void 0&&(m=Vm);var y=e.onBlur;y===void 0&&(y=Vm);var v=e.value,b=e.getCaretBoundary;b===void 0&&(b=n9e);var w=e.isValidInputCharacter;w===void 0&&(w=k2);var E=e.isCharacterSame,_=w0e(e,["type","displayType","customInput","renderText","getInputRef","format","removeFormatting","defaultValue","valueIsNumericString","onValueChange","isAllowed","onChange","onKeyDown","onMouseUp","onFocus","onBlur","value","getCaretBoundary","isValidInputCharacter","isCharacterSame"]),C=A0e(v,u,!!l,o,a,c),S=C[0],k=S.formattedValue,R=S.numAsString,N=C[1],O=D.useRef(),F=D.useRef({formattedValue:k,numAsString:R}),$=function(Ne,je){F.current={formattedValue:Ne.formattedValue,numAsString:Ne.value},N(Ne,je)},z=D.useState(!1),q=z[0],W=z[1],J=D.useRef(null),K=D.useRef({setCaretTimeout:null,focusTimeout:null});D.useEffect(function(){return W(!0),function(){clearTimeout(K.current.setCaretTimeout),clearTimeout(K.current.focusTimeout)}},[]);var Z=o,U=function(Ne,je){var Ke=parseFloat(je);return{formattedValue:Ne,value:je,floatValue:isNaN(Ke)?void 0:Ke}},L=function(Ne,je,Ke){Ne.selectionStart===0&&Ne.selectionEnd===Ne.value.length||(gy(Ne,je),K.current.setCaretTimeout=setTimeout(function(){Ne.value===Ke&&Ne.selectionStart!==je&&gy(Ne,je)},0))},Y=function(Ne,je,Ke){return gte(Ne,je,b(Ne),Ke)},j=function(Ne,je,Ke){var ut=b(je),pt=t9e(je,k,Ne,Ke,ut,w,E);return pt=gte(je,pt,ut),pt},G=function(Ne){var je=Ne.formattedValue;je===void 0&&(je="");var Ke=Ne.input,ut=Ne.source,pt=Ne.event,xt=Ne.numAsString,De;if(Ke){var wt=Ne.inputValue||Ke.value,Kt=r8(Ke);Ke.value=je,De=j(wt,je,Kt),De!==void 0&&L(Ke,De,je)}je!==k&&$(U(je,xt),{event:pt,source:ut})};D.useEffect(function(){var Ne=F.current,je=Ne.formattedValue,Ke=Ne.numAsString;(k!==je||R!==Ke)&&$(U(k,R),{event:void 0,source:A2.props})},[k,R]);var X=J.current?r8(J.current):void 0,ne=typeof window<"u"?D.useLayoutEffect:D.useEffect;ne(function(){var Ne=J.current;if(k!==F.current.formattedValue&&Ne){var je=j(F.current.formattedValue,k,X);Ne.value=k,L(Ne,je,k)}},[k]);var pe=function(Ne,je,Ke){var ut=je.target,pt=O.current?XFe(O.current,ut.selectionEnd):S0e(k,Ne),xt=Object.assign(Object.assign({},pt),{lastValue:k}),De=a(Ne,xt),wt=Z(De);if(De=a(wt,void 0),d&&!d(U(wt,De))){var Kt=je.target,Te=r8(Kt),Oe=j(Ne,k,Te);return Kt.value=k,L(Kt,Oe,k),!1}return G({formattedValue:wt,numAsString:De,inputValue:Ne,event:je,source:Ke,input:je.target}),!0},de=function(Ne,je){je===void 0&&(je=0);var Ke=Ne.selectionStart,ut=Ne.selectionEnd;O.current={selectionStart:Ke,selectionEnd:ut+je}},xe=function(Ne){var je=Ne.target,Ke=je.value,ut=pe(Ke,Ne,A2.event);ut&&f(Ne),O.current=void 0},Ce=function(Ne){var je=Ne.target,Ke=Ne.key,ut=je.selectionStart,pt=je.selectionEnd,xt=je.value;xt===void 0&&(xt="");var De;Ke==="ArrowLeft"||Ke==="Backspace"?De=Math.max(ut-1,0):Ke==="ArrowRight"?De=Math.min(ut+1,xt.length):Ke==="Delete"&&(De=ut);var wt=0;Ke==="Delete"&&ut===pt&&(wt=1);var Kt=Ke==="ArrowLeft"||Ke==="ArrowRight";if(De===void 0||ut!==pt&&!Kt){h(Ne),de(je,wt);return}var Te=De;if(Kt){var Oe=Ke==="ArrowLeft"?"left":"right";Te=Y(xt,De,Oe),Te!==De&&Ne.preventDefault()}else Ke==="Delete"&&!w(xt[De])?Te=Y(xt,De,"right"):Ke==="Backspace"&&!w(xt[De])&&(Te=Y(xt,De,"left"));Te!==De&&L(je,Te,xt),h(Ne),de(je,wt)},ue=function(Ne){var je=Ne.target,Ke=function(){var ut=je.selectionStart,pt=je.selectionEnd,xt=je.value;if(xt===void 0&&(xt=""),ut===pt){var De=Y(xt,ut);De!==ut&&L(je,De,xt)}};Ke(),requestAnimationFrame(function(){Ke()}),p(Ne),de(je)},se=function(Ne){Ne.persist&&Ne.persist();var je=Ne.target,Ke=Ne.currentTarget;J.current=je,K.current.focusTimeout=setTimeout(function(){var ut=je.selectionStart,pt=je.selectionEnd,xt=je.value;xt===void 0&&(xt="");var De=Y(xt,ut);De!==ut&&!(ut===0&&pt===xt.length)&&L(je,De,xt),m(Object.assign(Object.assign({},Ne),{currentTarget:Ke}))},0)},me=function(Ne){J.current=null,clearTimeout(K.current.focusTimeout),clearTimeout(K.current.setCaretTimeout),y(Ne)},be=q&&JFe()?"numeric":void 0,Le=Object.assign({inputMode:be},_,{type:t,value:k,onChange:xe,onKeyDown:Ce,onMouseUp:ue,onFocus:se,onBlur:me});if(n==="text")return i?rr.createElement(rr.Fragment,null,i(k,_)||null):rr.createElement("span",Object.assign({},_,{ref:s}),k);if(r){var Ue=r;return rr.createElement(Ue,Object.assign({},Le,{ref:s}))}return rr.createElement("input",Object.assign({},Le,{ref:s}))}function yte(e,t){var n=t.decimalScale,r=t.fixedDecimalScale,i=t.prefix;i===void 0&&(i="");var s=t.suffix;s===void 0&&(s="");var o=t.allowNegative,a=t.thousandsGroupStyle;if(a===void 0&&(a="thousand"),e===""||e==="-")return e;var u=V4(t),l=u.thousandSeparator,c=u.decimalSeparator,d=n!==0&&e.indexOf(".")!==-1||n&&r,f=IV(e,o),h=f.beforeDecimal,p=f.afterDecimal,m=f.addNegation;return n!==void 0&&(p=T0e(p,n,!!r)),l&&(h=GFe(h,l,a)),i&&(h=i+h),s&&(p=p+s),m&&(h="-"+h),e=h+(d&&c||"")+p,e}function V4(e){var t=e.decimalSeparator;t===void 0&&(t=".");var n=e.thousandSeparator,r=e.allowedDecimalSeparators;return n===!0&&(n=","),r||(r=[t,"."]),{decimalSeparator:t,thousandSeparator:n,allowedDecimalSeparators:r}}function o9e(e,t){e===void 0&&(e="");var n=new RegExp("(-)"),r=new RegExp("(-)(.)*(-)"),i=n.test(e),s=r.test(e);return e=e.replace(/-/g,""),i&&!s&&t&&(e="-"+e),e}function a9e(e,t){return new RegExp("(^-)|[0-9]|"+_0e(e),"g")}function u9e(e,t,n){return e===""?!0:!(t!=null&&t.match(/\d/))&&!(n!=null&&n.match(/\d/))&&typeof e=="string"&&!isNaN(Number(e))}function l9e(e,t,n){var r;t===void 0&&(t=ZFe(e));var i=n.allowNegative,s=n.prefix;s===void 0&&(s="");var o=n.suffix;o===void 0&&(o="");var a=n.decimalScale,u=t.from,l=t.to,c=l.start,d=l.end,f=V4(n),h=f.allowedDecimalSeparators,p=f.decimalSeparator,m=e[d]===p;if(k2(e)&&(e===s||e===o)&&t.lastValue==="")return e;if(d-c===1&&h.indexOf(e[c])!==-1){var y=a===0?"":p;e=e.substring(0,c)+y+e.substring(c+1,e.length)}var v=function(J,K,Z){var U=!1,L=!1;s.startsWith("-")?U=!1:J.startsWith("--")?(U=!1,L=!0):o.startsWith("-")&&J.length===o.length?U=!1:J[0]==="-"&&(U=!0);var Y=U?1:0;return L&&(Y=2),Y&&(J=J.substring(Y),K-=Y,Z-=Y),{value:J,start:K,end:Z,hasNegation:U}},b=v(e,c,d),w=b.hasNegation;r=b,e=r.value,c=r.start,d=r.end;var E=v(t.lastValue,u.start,u.end),_=E.start,C=E.end,S=E.value,k=e.substring(c,d);e.length&&S.length&&(_>S.length-o.length||C<s.length)&&!(k&&o.startsWith(k))&&(e=S);var R=0;e.startsWith(s)?R+=s.length:c<s.length&&(R=c),e=e.substring(R),d-=R;var N=e.length,O=e.length-o.length;e.endsWith(o)?N=O:(d>O||d>e.length-o.length)&&(N=d),e=e.substring(0,N),e=o9e(w?"-"+e:e,i),e=(e.match(a9e(p))||[]).join("");var F=e.indexOf(p);e=e.replace(new RegExp(_0e(p),"g"),function(J,K){return K===F?".":""});var $=IV(e,i),z=$.beforeDecimal,q=$.afterDecimal,W=$.addNegation;return l.end-l.start<u.end-u.start&&z===""&&m&&!parseFloat(q)&&(e=W?"-":""),e}function c9e(e,t){var n=t.prefix;n===void 0&&(n="");var r=t.suffix;r===void 0&&(r="");var i=Array.from({length:e.length+1}).map(function(){return!0}),s=e[0]==="-";i.fill(!1,0,n.length+(s?1:0));var o=e.length;return i.fill(!1,o-r.length+1,o+1),i}function d9e(e){var t=V4(e),n=t.thousandSeparator,r=t.decimalSeparator,i=e.prefix;i===void 0&&(i="");var s=e.allowNegative;if(s===void 0&&(s=!0),n===r)throw new Error(`
        Decimal separator can't be same as thousand separator.
        thousandSeparator: `+n+` (thousandSeparator = {true} is same as thousandSeparator = ",")
        decimalSeparator: `+r+` (default value for decimalSeparator is .)
     `);return i.startsWith("-")&&s&&(console.error(`
      Prefix can't start with '-' when allowNegative is true.
      prefix: `+i+`
      allowNegative: `+s+`
    `),s=!1),Object.assign(Object.assign({},e),{allowNegative:s})}function f9e(e){e=d9e(e),e.decimalSeparator,e.allowedDecimalSeparators,e.thousandsGroupStyle;var t=e.suffix,n=e.allowNegative,r=e.allowLeadingZeros,i=e.onKeyDown;i===void 0&&(i=Vm);var s=e.onBlur;s===void 0&&(s=Vm);var o=e.thousandSeparator,a=e.decimalScale,u=e.fixedDecimalScale,l=e.prefix;l===void 0&&(l="");var c=e.defaultValue,d=e.value,f=e.valueIsNumericString,h=e.onValueChange,p=w0e(e,["decimalSeparator","allowedDecimalSeparators","thousandsGroupStyle","suffix","allowNegative","allowLeadingZeros","onKeyDown","onBlur","thousandSeparator","decimalScale","fixedDecimalScale","prefix","defaultValue","value","valueIsNumericString","onValueChange"]),m=V4(e),y=m.decimalSeparator,v=m.allowedDecimalSeparators,b=function(W){return yte(W,e)},w=function(W,J){return l9e(W,J,e)},E=Kv(d)?c:d,_=f??u9e(E,l,t);Kv(d)?Kv(c)||(_=_||typeof c=="number"):_=_||typeof d=="number";var C=function(W){return E0e(W)?W:(typeof W=="number"&&(W=C0e(W)),_&&typeof a=="number"?mte(W,a,!!u):W)},S=A0e(C(d),C(c),!!_,b,w,h),k=S[0],R=k.numAsString,N=k.formattedValue,O=S[1],F=function(W){var J=W.target,K=W.key,Z=J.selectionStart,U=J.selectionEnd,L=J.value;if(L===void 0&&(L=""),(K==="Backspace"||K==="Delete")&&U<l.length){W.preventDefault();return}if(Z!==U){i(W);return}K==="Backspace"&&L[0]==="-"&&Z===l.length+1&&n&&gy(J,1),a&&u&&(K==="Backspace"&&L[Z-1]===y?(gy(J,Z-1),W.preventDefault()):K==="Delete"&&L[Z]===y&&W.preventDefault()),v!=null&&v.includes(K)&&L[Z]===y&&gy(J,Z+1);var Y=o===!0?",":o;K==="Backspace"&&L[Z-1]===Y&&gy(J,Z-1),K==="Delete"&&L[Z]===Y&&gy(J,Z+1),i(W)},$=function(W){var J=R;if(J.match(/\d/g)||(J=""),r||(J=KFe(J)),u&&a&&(J=mte(J,a,u)),J!==R){var K=yte(J,e);O({formattedValue:K,value:J,floatValue:parseFloat(J)},{event:W,source:A2.event})}s(W)},z=function(W){return W===y?!0:k2(W)},q=function(W){var J=W.currentValue,K=W.lastValue,Z=W.formattedValue,U=W.currentValueIndex,L=W.formattedValueIndex,Y=J[U],j=Z[L],G=S0e(K,J),X=G.to,ne=function(pe){return w(pe).indexOf(".")+l.length};return d===0&&u&&a&&J[X.start]===y&&ne(J)<U&&ne(Z)>L?!1:U>=X.start&&U<X.end&&v&&v.includes(Y)&&j===y?!0:Y===j};return Object.assign(Object.assign({},p),{value:N,valueIsNumericString:!1,isValidInputCharacter:z,isCharacterSame:q,onValueChange:O,format:b,removeFormatting:w,getCaretBoundary:function(W){return c9e(W,e)},onKeyDown:F,onBlur:$})}function h9e(e){var t=f9e(e);return rr.createElement(s9e,Object.assign({},t))}function bte({direction:e,style:t,...n}){return T.jsx("svg",{style:{width:"var(--ni-chevron-size)",height:"var(--ni-chevron-size)",transform:e==="up"?"rotate(180deg)":void 0,...t},viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...n,children:T.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}var U9={root:"m_e2f5cd4e",controls:"m_95e17d22",control:"m_80b4b171"};const p9e=/^(0\.0*|-0(\.0*)?)$/,m9e=/^-?0\d+(\.\d+)?\.?$/;function V9(e){return typeof e=="string"&&e!==""&&!Number.isNaN(Number(e))}function i8(e){return typeof e=="number"?e<Number.MAX_SAFE_INTEGER:e===""||V9(e)&&Number(e)<Number.MAX_SAFE_INTEGER}function g9e(e){return e.toString().replace(".","").length}function y9e(e,t){return(typeof e=="number"?e<Number.MAX_SAFE_INTEGER:!Number.isNaN(Number(e)))&&!Number.isNaN(e)&&g9e(t)<14&&t!==""}function vte(e,t,n){if(e===void 0)return!0;const r=t===void 0||e>=t,i=n===void 0||e<=n;return r&&i}const b9e={step:1,clampBehavior:"blur",allowDecimal:!0,allowNegative:!0,withKeyboardEvents:!0,allowLeadingZeros:!0,trimLeadingZeroesOnBlur:!0,startValue:0},v9e=(e,{size:t})=>({controls:{"--ni-chevron-size":mn(t,"ni-chevron-size")}}),RV=tt((e,t)=>{const n=Me("NumberInput",b9e,e),{className:r,classNames:i,styles:s,unstyled:o,vars:a,onChange:u,onValueChange:l,value:c,defaultValue:d,max:f,min:h,step:p,hideControls:m,rightSection:y,isAllowed:v,clampBehavior:b,onBlur:w,allowDecimal:E,decimalScale:_,onKeyDown:C,onKeyDownCapture:S,handlersRef:k,startValue:R,disabled:N,rightSectionPointerEvents:O,allowNegative:F,readOnly:$,size:z,rightSectionWidth:q,stepHoldInterval:W,stepHoldDelay:J,allowLeadingZeros:K,withKeyboardEvents:Z,trimLeadingZeroesOnBlur:U,...L}=n,Y=$t({name:"NumberInput",classes:U9,props:n,classNames:i,styles:s,unstyled:o,vars:a,varsResolver:v9e}),{resolvedClassNames:j,resolvedStyles:G}=$1({classNames:i,styles:s,props:n}),[X,ne]=no({value:c,defaultValue:d,finalValue:"",onChange:u}),pe=J!==void 0&&W!==void 0,de=D.useRef(null),xe=D.useRef(null),Ce=D.useRef(0),ue=(De,wt)=>{wt.source==="event"&&ne(y9e(De.floatValue,De.value)&&!p9e.test(De.value)&&!(K&&m9e.test(De.value))?De.floatValue:De.value),l==null||l(De,wt)},se=De=>{const wt=String(De).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return wt?Math.max(0,(wt[1]?wt[1].length:0)-(wt[2]?+wt[2]:0)):0},me=De=>{de.current&&typeof De<"u"&&de.current.setSelectionRange(De,De)},be=D.useRef(I9);be.current=()=>{if(!i8(X))return;let De;const wt=se(X),Kt=se(p),Te=Math.max(wt,Kt),Oe=10**Te;if(!V9(X)&&(typeof X!="number"||Number.isNaN(X)))De=sf(R,h,f);else if(f!==void 0){const _t=(Math.round(Number(X)*Oe)+Math.round(p*Oe))/Oe;De=_t<=f?_t:f}else De=(Math.round(Number(X)*Oe)+Math.round(p*Oe))/Oe;const lt=De.toFixed(Te);ne(parseFloat(lt)),l==null||l({floatValue:parseFloat(lt),formattedValue:lt,value:lt},{source:"increment"}),setTimeout(()=>{var _t;return me((_t=de.current)==null?void 0:_t.value.length)},0)};const Le=D.useRef(I9);Le.current=()=>{if(!i8(X))return;let De;const wt=h!==void 0?h:F?Number.MIN_SAFE_INTEGER:0,Kt=se(X),Te=se(p),Oe=Math.max(Kt,Te),lt=10**Oe;if(!V9(X)&&typeof X!="number"||Number.isNaN(X))De=sf(R,wt,f);else{const St=(Math.round(Number(X)*lt)-Math.round(p*lt))/lt;De=wt!==void 0&&St<wt?wt:St}const _t=De.toFixed(Oe);ne(parseFloat(_t)),l==null||l({floatValue:parseFloat(_t),formattedValue:_t,value:_t},{source:"decrement"}),setTimeout(()=>{var St;return me((St=de.current)==null?void 0:St.value.length)},0)};const Ue=De=>{C==null||C(De),!($||!Z)&&(De.key==="ArrowUp"&&(De.preventDefault(),be.current()),De.key==="ArrowDown"&&(De.preventDefault(),Le.current()))},Ne=De=>{if(S==null||S(De),De.key==="Backspace"){const wt=de.current;wt.selectionStart===0&&wt.selectionStart===wt.selectionEnd&&(De.preventDefault(),window.setTimeout(()=>me(0),0))}};SP(k,{increment:be.current,decrement:Le.current});const je=De=>{De?be.current():Le.current(),Ce.current+=1},Ke=De=>{if(je(De),pe){const wt=typeof W=="number"?W:W(Ce.current);xe.current=window.setTimeout(()=>Ke(De),wt)}},ut=(De,wt)=>{var Kt;De.preventDefault(),(Kt=de.current)==null||Kt.focus(),je(wt),pe&&(xe.current=window.setTimeout(()=>Ke(wt),J))},pt=()=>{xe.current&&window.clearTimeout(xe.current),xe.current=null,Ce.current=0},xt=T.jsxs("div",{...Y("controls"),children:[T.jsx(ku,{...Y("control"),tabIndex:-1,"aria-hidden":!0,disabled:N||typeof X=="number"&&f!==void 0&&X>=f,mod:{direction:"up"},onMouseDown:De=>De.preventDefault(),onPointerDown:De=>{ut(De,!0)},onPointerUp:pt,onPointerLeave:pt,children:T.jsx(bte,{direction:"up"})}),T.jsx(ku,{...Y("control"),tabIndex:-1,"aria-hidden":!0,disabled:N||typeof X=="number"&&h!==void 0&&X<=h,mod:{direction:"down"},onMouseDown:De=>De.preventDefault(),onPointerDown:De=>{ut(De,!1)},onPointerUp:pt,onPointerLeave:pt,children:T.jsx(bte,{direction:"down"})})]});return T.jsx(Mu,{component:h9e,allowNegative:F,className:qi(U9.root,r),size:z,...L,readOnly:$,disabled:N,value:X,getInputRef:Rs(t,de),onValueChange:ue,rightSection:m||$||!i8(X)?y:y||xt,classNames:j,styles:G,unstyled:o,__staticSelector:"NumberInput",decimalScale:E?_:0,onKeyDown:Ue,onKeyDownCapture:Ne,rightSectionPointerEvents:O??(N?"none":void 0),rightSectionWidth:q??`var(--ni-right-section-width-${z||"sm"})`,allowLeadingZeros:K,onBlur:De=>{if(w==null||w(De),b==="blur"&&typeof X=="number"&&sf(X,h,f)!==X&&ne(sf(X,h,f)),U&&typeof X=="string"&&se(X)<15){const wt=X.replace(/^0+/,""),Kt=parseFloat(wt);ne(Number.isNaN(Kt)||Kt>Number.MAX_SAFE_INTEGER?wt:sf(Kt,h,f))}},isAllowed:De=>b==="strict"?v?v(De)&&vte(De.floatValue,h,f):vte(De.floatValue,h,f):v?v(De):!0})});RV.classes={...Mu.classes,...U9};RV.displayName="@mantine/core/NumberInput";const[x9e,k0e]=Is("Progress.Root component was not found in tree");var XC={root:"m_db6d6462",section:"m_2242eb65","stripes-animation":"m_81a374bd",label:"m_91e40b74"};const w9e={},DV=tt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Me("ProgressLabel",w9e,e),u=k0e();return T.jsx(Se,{ref:t,...u.getStyles("label",{className:r,style:i,classNames:n,styles:s}),...a})});DV.classes=XC;DV.displayName="@mantine/core/ProgressLabel";const E9e={},_9e=(e,{size:t,radius:n,transitionDuration:r})=>({root:{"--progress-size":mn(t,"progress-size"),"--progress-radius":n===void 0?void 0:Dr(n),"--progress-transition-duration":typeof r=="number"?`${r}ms`:void 0}}),H4=tt((e,t)=>{const n=Me("ProgressRoot",E9e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,autoContrast:l,transitionDuration:c,...d}=n,f=$t({name:"Progress",classes:XC,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:_9e});return T.jsx(x9e,{value:{getStyles:f,autoContrast:l},children:T.jsx(Se,{ref:t,...f("root"),...d})})});H4.classes=XC;H4.displayName="@mantine/core/ProgressRoot";const T9e={withAria:!0},q4=tt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,value:a,withAria:u,color:l,striped:c,animated:d,mod:f,...h}=Me("ProgressSection",T9e,e),p=k0e(),m=ss(),y=u?{role:"progressbar","aria-valuemax":100,"aria-valuemin":0,"aria-valuenow":a,"aria-valuetext":`${a}%`}:{};return T.jsx(Se,{ref:t,...p.getStyles("section",{className:r,classNames:n,styles:s,style:i}),...h,...y,mod:[{striped:c||d,animated:d},f],__vars:{"--progress-section-width":`${a}%`,"--progress-section-color":Vr(l,m),"--progress-label-color":Tw(p.autoContrast,m)?O1({color:l,theme:m,autoContrast:p.autoContrast}):void 0}})});q4.classes=XC;q4.displayName="@mantine/core/ProgressSection";const C9e={},Mw=tt((e,t)=>{const n=Me("Progress",C9e,e),{value:r,classNames:i,styles:s,vars:o,color:a,striped:u,animated:l,"aria-label":c,...d}=n,{resolvedClassNames:f,resolvedStyles:h}=$1({classNames:i,styles:s,props:n});return T.jsx(H4,{ref:t,classNames:f,styles:h,vars:o,...d,children:T.jsx(q4,{value:r,color:a,striped:u,animated:l,"aria-label":c})})});Mw.classes=XC;Mw.displayName="@mantine/core/Progress";Mw.Section=q4;Mw.Root=H4;Mw.Label=DV;const[S9e,I0e]=zp(),[A9e,k9e]=zp();var R0e={card:"m_9dc8ae12"};const I9e={withBorder:!0},R9e=(e,{radius:t})=>({card:{"--card-radius":Dr(t)}}),PV=tt((e,t)=>{const n=Me("RadioCard",I9e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,checked:l,mod:c,withBorder:d,value:f,onClick:h,name:p,onKeyDown:m,...y}=n,v=$t({name:"RadioCard",classes:R0e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:R9e,rootSelector:"card"}),{dir:b}=Up(),w=I0e(),E=typeof l=="boolean"?l:(w==null?void 0:w.value)===f||!1,_=p||(w==null?void 0:w.name),C=S=>{if(m==null||m(S),["ArrowDown","ArrowUp","ArrowLeft","ArrowRight"].includes(S.nativeEvent.code)){S.preventDefault();const k=Array.from(document.querySelectorAll(`[role="radio"][name="${_||"__mantine"}"]`)),R=k.findIndex(F=>F===S.target),N=R+1>=k.length?0:R+1,O=R-1<0?k.length-1:R-1;S.nativeEvent.code==="ArrowDown"&&(k[N].focus(),k[N].click()),S.nativeEvent.code==="ArrowUp"&&(k[O].focus(),k[O].click()),S.nativeEvent.code==="ArrowLeft"&&(k[b==="ltr"?O:N].focus(),k[b==="ltr"?O:N].click()),S.nativeEvent.code==="ArrowRight"&&(k[b==="ltr"?N:O].focus(),k[b==="ltr"?N:O].click())}};return T.jsx(A9e,{value:{checked:E},children:T.jsx(ku,{ref:t,mod:[{"with-border":d,checked:E},c],...v("card"),...y,role:"radio","aria-checked":E,name:_,onClick:S=>{h==null||h(S),w==null||w.onChange(f||"")},onKeyDown:C})})});PV.displayName="@mantine/core/RadioCard";PV.classes=R0e;const D9e={},NV=tt((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,name:u,readOnly:l,...c}=Me("RadioGroup",D9e,e),d=Ga(u),[f,h]=no({value:n,defaultValue:r,finalValue:"",onChange:i}),p=m=>!l&&h(typeof m=="string"?m:m.currentTarget.value);return T.jsx(S9e,{value:{value:f,onChange:p,size:s,name:d},children:T.jsx(Fr.Wrapper,{size:s,ref:t,...o,...c,labelElement:"div",__staticSelector:"RadioGroup",children:T.jsx(sV,{role:"radiogroup",children:a})})})});NV.classes=Fr.Wrapper.classes;NV.displayName="@mantine/core/RadioGroup";function D0e({size:e,style:t,...n}){return T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 5 5",style:{width:$e(e),height:$e(e),...t},"aria-hidden":!0,...n,children:T.jsx("circle",{cx:"2.5",cy:"2.5",r:"2.5",fill:"currentColor"})})}var P0e={indicator:"m_717d7ff6",icon:"m_3e4da632","indicator--outline":"m_2980836c"};const P9e={icon:D0e},N9e=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=Qf({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{indicator:{"--radio-size":mn(r,"radio-size"),"--radio-radius":t===void 0?void 0:Dr(t),"--radio-color":s==="outline"?u:Vr(n,e),"--radio-icon-size":mn(r,"radio-icon-size"),"--radio-icon-color":i?Vr(i,e):Tw(o,e)?O1({color:n,theme:e,autoContrast:o}):void 0}}},OV=tt((e,t)=>{const n=Me("RadioIndicator",P9e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,icon:l,radius:c,color:d,iconColor:f,autoContrast:h,checked:p,mod:m,variant:y,disabled:v,...b}=n,w=l,E=$t({name:"RadioIndicator",classes:P0e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:N9e,rootSelector:"indicator"}),_=k9e(),C=typeof p=="boolean"?p:(_==null?void 0:_.checked)||!1;return T.jsx(Se,{ref:t,...E("indicator",{variant:y}),variant:y,mod:[{checked:C,disabled:v},m],...b,children:T.jsx(w,{...E("icon")})})});OV.displayName="@mantine/core/RadioIndicator";OV.classes=P0e;var N0e={root:"m_f3f1af94",inner:"m_89c4f5e4",icon:"m_f3ed6b2b",radio:"m_8a3dbb89","radio--outline":"m_1bfe9d39"};const O9e={labelPosition:"right"},$9e=(e,{size:t,radius:n,color:r,iconColor:i,variant:s,autoContrast:o})=>{const a=Qf({color:r||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{root:{"--radio-size":mn(t,"radio-size"),"--radio-radius":n===void 0?void 0:Dr(n),"--radio-color":s==="outline"?u:Vr(r,e),"--radio-icon-color":i?Vr(i,e):Tw(o,e)?O1({color:r,theme:e,autoContrast:o}):void 0,"--radio-icon-size":mn(t,"radio-icon-size")}}},Xl=tt((e,t)=>{const n=Me("Radio",O9e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,id:l,size:c,label:d,labelPosition:f,description:h,error:p,radius:m,color:y,variant:v,disabled:b,wrapperProps:w,icon:E=D0e,rootRef:_,iconColor:C,onChange:S,mod:k,...R}=n,N=$t({name:"Radio",classes:N0e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:$9e}),O=I0e(),F=(O==null?void 0:O.size)??c,$=n.size?c:F,{styleProps:z,rest:q}=L1(R),W=Ga(l),J=O?{checked:O.value===q.value,name:q.name??O.name,onChange:K=>{O.onChange(K),S==null||S(K)}}:{};return T.jsx(C4,{...N("root"),__staticSelector:"Radio",__stylesApiProps:n,id:W,size:$,labelPosition:f,label:d,description:h,error:p,disabled:b,classNames:r,styles:o,unstyled:a,"data-checked":J.checked||void 0,variant:v,ref:_,mod:k,...z,...w,children:T.jsxs(Se,{...N("inner"),mod:{"label-position":f},children:[T.jsx(Se,{...N("radio",{focusable:!0,variant:v}),onChange:S,...q,...J,component:"input",mod:{error:!!p},ref:t,id:W,disabled:b,type:"radio"}),T.jsx(E,{...N("icon"),"aria-hidden":!0})]})})});Xl.classes=N0e;Xl.displayName="@mantine/core/Radio";Xl.Group=NV;Xl.Card=PV;Xl.Indicator=OV;const M9e={duration:100,transition:"fade"};function L9e(e,t){return{...M9e,...t,...e}}function F9e({offset:e,position:t,defaultOpened:n}){const[r,i]=D.useState(n),s=D.useRef(null),{x:o,y:a,elements:u,refs:l,update:c,placement:d}=wU({placement:t,middleware:[yU({crossAxis:!0,padding:5,rootBoundary:"document"})]}),f=d.includes("right")?e:t.includes("left")?e*-1:0,h=d.includes("bottom")?e:t.includes("top")?e*-1:0,p=D.useCallback(({clientX:m,clientY:y})=>{l.setPositionReference({getBoundingClientRect(){return{width:0,height:0,x:m,y,left:m+f,top:y+h,right:m,bottom:y}}})},[u.reference]);return D.useEffect(()=>{if(l.floating.current){const m=s.current;m.addEventListener("mousemove",p);const y=ap(l.floating.current);return y.forEach(v=>{v.addEventListener("scroll",c)}),()=>{m.removeEventListener("mousemove",p),y.forEach(v=>{v.removeEventListener("scroll",c)})}}},[u.reference,l.floating.current,c,p,r]),{handleMouseMove:p,x:o,y:a,opened:r,setOpened:i,boundaryRef:s,floating:l.setFloating}}var W4={tooltip:"m_1b3c8819",arrow:"m_f898399f"};const B9e={refProp:"ref",withinPortal:!0,offset:10,defaultOpened:!1,position:"right",zIndex:so("popover")},j9e=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":t===void 0?void 0:Dr(t),"--tooltip-bg":n?Vr(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),$V=tt((e,t)=>{const n=Me("TooltipFloating",B9e,e),{children:r,refProp:i,withinPortal:s,style:o,className:a,classNames:u,styles:l,unstyled:c,radius:d,color:f,label:h,offset:p,position:m,multiline:y,zIndex:v,disabled:b,defaultOpened:w,variant:E,vars:_,portalProps:C,...S}=n,k=ss(),R=$t({name:"TooltipFloating",props:n,classes:W4,className:a,style:o,classNames:u,styles:l,unstyled:c,rootSelector:"tooltip",vars:_,varsResolver:j9e}),{handleMouseMove:N,x:O,y:F,opened:$,boundaryRef:z,floating:q,setOpened:W}=F9e({offset:p,position:m,defaultOpened:w});if(!jp(r))throw new Error("[@mantine/core] Tooltip.Floating component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const J=Rs(z,f4(r),t),K=r.props,Z=L=>{var Y;(Y=K.onMouseEnter)==null||Y.call(K,L),N(L),W(!0)},U=L=>{var Y;(Y=K.onMouseLeave)==null||Y.call(K,L),W(!1)};return T.jsxs(T.Fragment,{children:[T.jsx(Z0,{...C,withinPortal:s,children:T.jsx(Se,{...S,...R("tooltip",{style:{...nU(o,k),zIndex:v,display:!b&&$?"block":"none",top:(F&&Math.round(F))??"",left:(O&&Math.round(O))??""}}),variant:E,ref:q,mod:{multiline:y},children:h})}),D.cloneElement(r,{...K,[i]:J,onMouseEnter:Z,onMouseLeave:U})]})});$V.classes=W4;$V.displayName="@mantine/core/TooltipFloating";const O0e=D.createContext(!1),z9e=O0e.Provider,U9e=()=>D.useContext(O0e),V9e={openDelay:0,closeDelay:0};function MV(e){const{openDelay:t,closeDelay:n,children:r}=Me("TooltipGroup",V9e,e);return T.jsx(z9e,{value:!0,children:T.jsx(A5e,{delay:{open:t,close:n},children:r})})}MV.displayName="@mantine/core/TooltipGroup";MV.extend=e=>e;function H9e(e){if(e===void 0)return{shift:!0,flip:!0};const t={...e};return e.shift===void 0&&(t.shift=!0),e.flip===void 0&&(t.flip=!0),t}function q9e(e){const t=H9e(e.middlewares),n=[ome(e.offset)];return t.shift&&n.push(yU(typeof t.shift=="boolean"?{padding:8}:{padding:8,...t.shift})),t.flip&&n.push(typeof t.flip=="boolean"?PP():PP(t.flip)),n.push(ame({element:e.arrowRef,padding:e.arrowOffset})),t.inline?n.push(typeof t.inline=="boolean"?jT():jT(t.inline)):e.inline&&n.push(jT()),n}function W9e(e){var C,S,k;const[t,n]=D.useState(e.defaultOpened),i=typeof e.opened=="boolean"?e.opened:t,s=U9e(),o=Ga(),{delay:a,currentId:u,setCurrentId:l}=dme(),c=D.useCallback(R=>{n(R),R&&l(o)},[l,o]),{x:d,y:f,context:h,refs:p,update:m,placement:y,middlewareData:{arrow:{x:v,y:b}={}}}=wU({strategy:e.strategy,placement:e.position,open:i,onOpenChange:c,middleware:q9e(e)});k5e(h,{id:o});const{getReferenceProps:w,getFloatingProps:E}=$5e([S5e(h,{enabled:(C=e.events)==null?void 0:C.hover,delay:s?a:{open:e.openDelay,close:e.closeDelay},mouseOnly:!((S=e.events)!=null&&S.touch)}),O5e(h,{enabled:(k=e.events)==null?void 0:k.focus,visibleOnly:!0}),L5e(h,{role:"tooltip"}),P5e(h,{enabled:typeof e.opened>"u"})]);vme({opened:i,position:e.position,positionDependencies:e.positionDependencies,floating:{refs:p,update:m}}),Nf(()=>{var R;(R=e.onPositionChange)==null||R.call(e,y)},[y]);const _=i&&u&&u!==o;return{x:d,y:f,arrowX:v,arrowY:b,reference:p.setReference,floating:p.setFloating,getFloatingProps:E,getReferenceProps:w,isGroupPhase:_,opened:i,placement:y}}const xte={position:"top",refProp:"ref",withinPortal:!0,inline:!1,defaultOpened:!1,arrowSize:4,arrowOffset:5,arrowRadius:0,arrowPosition:"side",offset:5,transitionProps:{duration:100,transition:"fade"},events:{hover:!0,focus:!1,touch:!1},zIndex:so("popover"),positionDependencies:[],middlewares:{flip:!0,shift:!0,inline:!1}},G9e=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":t===void 0?void 0:Dr(t),"--tooltip-bg":n?Vr(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),jr=tt((e,t)=>{const n=Me("Tooltip",xte,e),{children:r,position:i,refProp:s,label:o,openDelay:a,closeDelay:u,onPositionChange:l,opened:c,defaultOpened:d,withinPortal:f,radius:h,color:p,classNames:m,styles:y,unstyled:v,style:b,className:w,withArrow:E,arrowSize:_,arrowOffset:C,arrowRadius:S,arrowPosition:k,offset:R,transitionProps:N,multiline:O,events:F,zIndex:$,disabled:z,positionDependencies:q,onClick:W,onMouseEnter:J,onMouseLeave:K,inline:Z,variant:U,keepMounted:L,vars:Y,portalProps:j,mod:G,floatingStrategy:X,middlewares:ne,...pe}=Me("Tooltip",xte,n),{dir:de}=Up(),xe=D.useRef(null),Ce=W9e({position:fme(de,i),closeDelay:u,openDelay:a,onPositionChange:l,opened:c,defaultOpened:d,events:F,arrowRef:xe,arrowOffset:C,offset:typeof R=="number"?R+(E?_/2:0):R,positionDependencies:[...q,r],inline:Z,strategy:X,middlewares:ne}),ue=$t({name:"Tooltip",props:n,classes:W4,className:w,style:b,classNames:m,styles:y,unstyled:v,rootSelector:"tooltip",vars:Y,varsResolver:G9e});if(!jp(r))throw new Error("[@mantine/core] Tooltip component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const se=Rs(Ce.reference,f4(r),t),me=L9e(N,{duration:100,transition:"fade"}),be=r.props;return T.jsxs(T.Fragment,{children:[T.jsx(Z0,{...j,withinPortal:f,children:T.jsx(Jf,{...me,keepMounted:L,mounted:!z&&!!Ce.opened,duration:Ce.isGroupPhase?10:me.duration,children:Le=>T.jsxs(Se,{...pe,"data-fixed":X==="fixed"||void 0,variant:U,mod:[{multiline:O},G],...Ce.getFloatingProps({ref:Ce.floating,className:ue("tooltip").className,style:{...ue("tooltip").style,...Le,zIndex:$,top:Ce.y??0,left:Ce.x??0}}),children:[o,T.jsx(EU,{ref:xe,arrowX:Ce.arrowX,arrowY:Ce.arrowY,visible:E,position:Ce.placement,arrowSize:_,arrowOffset:C,arrowRadius:S,arrowPosition:k,...ue("arrow")})]})})}),D.cloneElement(r,Ce.getReferenceProps({onClick:W,onMouseEnter:J,onMouseLeave:K,onMouseMove:n.onMouseMove,onPointerDown:n.onPointerDown,onPointerEnter:n.onPointerEnter,[s]:se,className:qi(w,be.className),...be}))]})});jr.classes=W4;jr.displayName="@mantine/core/Tooltip";jr.Floating=$V;jr.Group=MV;const Y9e={searchable:!1,withCheckIcon:!0,allowDeselect:!0,checkIconPosition:"left"},Lw=tt((e,t)=>{const n=Me("Select",Y9e,e),{classNames:r,styles:i,unstyled:s,vars:o,dropdownOpened:a,defaultDropdownOpened:u,onDropdownClose:l,onDropdownOpen:c,onFocus:d,onBlur:f,onClick:h,onChange:p,data:m,value:y,defaultValue:v,selectFirstOptionOnChange:b,onOptionSubmit:w,comboboxProps:E,readOnly:_,disabled:C,filter:S,limit:k,withScrollArea:R,maxDropdownHeight:N,size:O,searchable:F,rightSection:$,checkIconPosition:z,withCheckIcon:q,nothingFoundMessage:W,name:J,form:K,searchValue:Z,defaultSearchValue:U,onSearchChange:L,allowDeselect:Y,error:j,rightSectionPointerEvents:G,id:X,clearable:ne,clearButtonProps:pe,hiddenInputProps:de,renderOption:xe,onClear:Ce,autoComplete:ue,scrollAreaProps:se,__defaultRightSection:me,__clearSection:be,__clearable:Le,...Ue}=n,Ne=D.useMemo(()=>WU(m),[m]),je=D.useMemo(()=>GU(Ne),[Ne]),Ke=Ga(X),[ut,pt,xt]=no({value:y,defaultValue:v,finalValue:null,onChange:p}),De=typeof ut=="string"?je[ut]:void 0,wt=OOe(De),[Kt,Te]=no({value:Z,defaultValue:U,finalValue:De?De.label:"",onChange:L}),Oe=rV({opened:a,defaultOpened:u,onDropdownOpen:()=>{c==null||c(),Oe.updateSelectedOptionIndex("active",{scrollIntoView:!0})},onDropdownClose:()=>{l==null||l(),Oe.resetSelectedOption()}}),{resolvedClassNames:lt,resolvedStyles:_t}=$1({props:n,styles:i,classNames:r});D.useEffect(()=>{b&&Oe.selectFirstOption()},[b,ut]),D.useEffect(()=>{y===null&&Te(""),typeof y=="string"&&De&&((wt==null?void 0:wt.value)!==De.value||(wt==null?void 0:wt.label)!==De.label)&&Te(De.label)},[y,De]);const St=T.jsx(Hn.ClearButton,{...pe,onClear:()=>{pt(null,null),Te(""),Ce==null||Ce()}});return T.jsxs(T.Fragment,{children:[T.jsxs(Hn,{store:Oe,__staticSelector:"Select",classNames:lt,styles:_t,unstyled:s,readOnly:_,onOptionSubmit:en=>{w==null||w(en);const En=Y&&je[en].value===ut?null:je[en],sr=En?En.value:null;sr!==ut&&pt(sr,En),!xt&&Te(typeof sr=="string"&&(En==null?void 0:En.label)||""),Oe.closeDropdown()},size:O,...E,children:[T.jsx(Hn.Target,{targetType:F?"input":"button",autoComplete:ue,children:T.jsx(Mu,{id:Ke,ref:t,__defaultRightSection:T.jsx(Hn.Chevron,{size:O,error:j,unstyled:s}),__clearSection:St,__clearable:ne&&!!ut&&!C&&!_,rightSection:$,rightSectionPointerEvents:G||(St?"all":"none"),...Ue,size:O,__staticSelector:"Select",disabled:C,readOnly:_||!F,value:Kt,onChange:en=>{Te(en.currentTarget.value),Oe.openDropdown(),b&&Oe.selectFirstOption()},onFocus:en=>{F&&Oe.openDropdown(),d==null||d(en)},onBlur:en=>{var En;F&&Oe.closeDropdown(),Te(ut!=null&&((En=je[ut])==null?void 0:En.label)||""),f==null||f(en)},onClick:en=>{F?Oe.openDropdown():Oe.toggleDropdown(),h==null||h(en)},classNames:lt,styles:_t,unstyled:s,pointer:!F,error:j})}),T.jsx(Zme,{data:Ne,hidden:_||C,filter:S,search:Kt,limit:k,hiddenWhenEmpty:!W,withScrollArea:R,maxDropdownHeight:N,filterOptions:F&&(De==null?void 0:De.label)!==Kt,value:ut,checkIconPosition:z,withCheckIcon:q,nothingFoundMessage:W,unstyled:s,labelId:Ue.label?`${Ke}-label`:void 0,"aria-label":Ue.label?void 0:Ue["aria-label"],renderOption:xe,scrollAreaProps:se})]}),T.jsx(Hn.HiddenInput,{value:ut,name:J,form:K,disabled:C,...de})]})});Lw.classes={...Mu.classes,...Hn.classes};Lw.displayName="@mantine/core/Select";function K9e({spacing:e,verticalSpacing:t,cols:n,selector:r}){var c;const i=ss(),s=t===void 0?e:t,o=Q0({"--sg-spacing-x":ns(Yc(e)),"--sg-spacing-y":ns(Yc(s)),"--sg-cols":(c=Yc(n))==null?void 0:c.toString()}),a=Ur(i.breakpoints).reduce((d,f)=>(d[f]||(d[f]={}),typeof e=="object"&&e[f]!==void 0&&(d[f]["--sg-spacing-x"]=ns(e[f])),typeof s=="object"&&s[f]!==void 0&&(d[f]["--sg-spacing-y"]=ns(s[f])),typeof n=="object"&&n[f]!==void 0&&(d[f]["--sg-cols"]=n[f]),d),{}),l=_2(Ur(a),i.breakpoints).filter(d=>Ur(a[d.value]).length>0).map(d=>({query:`(min-width: ${i.breakpoints[d.value]})`,styles:a[d.value]}));return T.jsx(M1,{styles:o,media:l,selector:r})}function s8(e){return typeof e=="object"&&e!==null?Ur(e):[]}function X9e(e){return e.sort((t,n)=>E2(t)-E2(n))}function Q9e({spacing:e,verticalSpacing:t,cols:n}){const r=Array.from(new Set([...s8(e),...s8(t),...s8(n)]));return X9e(r)}function J9e({spacing:e,verticalSpacing:t,cols:n,selector:r}){var l;const i=t===void 0?e:t,s=Q0({"--sg-spacing-x":ns(Yc(e)),"--sg-spacing-y":ns(Yc(i)),"--sg-cols":(l=Yc(n))==null?void 0:l.toString()}),o=Q9e({spacing:e,verticalSpacing:t,cols:n}),a=o.reduce((c,d)=>(c[d]||(c[d]={}),typeof e=="object"&&e[d]!==void 0&&(c[d]["--sg-spacing-x"]=ns(e[d])),typeof i=="object"&&i[d]!==void 0&&(c[d]["--sg-spacing-y"]=ns(i[d])),typeof n=="object"&&n[d]!==void 0&&(c[d]["--sg-cols"]=n[d]),c),{}),u=o.map(c=>({query:`simple-grid (min-width: ${c})`,styles:a[c]}));return T.jsx(M1,{styles:s,container:u,selector:r})}var $0e={container:"m_925c2d2c",root:"m_2415a157"};const Z9e={cols:1,spacing:"md",type:"media"},LV=tt((e,t)=>{const n=Me("SimpleGrid",Z9e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,cols:l,verticalSpacing:c,spacing:d,type:f,...h}=n,p=$t({name:"SimpleGrid",classes:$0e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u}),m=UC();return f==="container"?T.jsxs(T.Fragment,{children:[T.jsx(J9e,{...n,selector:`.${m}`}),T.jsx("div",{...p("container"),children:T.jsx(Se,{ref:t,...p("root",{className:m}),...h})})]}):T.jsxs(T.Fragment,{children:[T.jsx(K9e,{...n,selector:`.${m}`}),T.jsx(Se,{ref:t,...p("root",{className:m}),...h})]})});LV.classes=$0e;LV.displayName="@mantine/core/SimpleGrid";const[eBe,G4]=Is("SliderProvider was not found in tree"),M0e=D.forwardRef(({size:e,disabled:t,variant:n,color:r,thumbSize:i,radius:s,...o},a)=>{const{getStyles:u}=G4();return T.jsx(Se,{tabIndex:-1,variant:n,size:e,ref:a,...u("root"),...o})});M0e.displayName="@mantine/core/SliderRoot";const L0e=D.forwardRef(({max:e,min:t,value:n,position:r,label:i,dragging:s,onMouseDown:o,onKeyDownCapture:a,labelTransitionProps:u,labelAlwaysOn:l,thumbLabel:c,onFocus:d,onBlur:f,showLabelOnHover:h,isHovered:p,children:m=null,disabled:y},v)=>{const{getStyles:b}=G4(),[w,E]=D.useState(!1),_=l||s||w||h&&p;return T.jsxs(Se,{tabIndex:0,role:"slider","aria-label":c,"aria-valuemax":e,"aria-valuemin":t,"aria-valuenow":n,ref:v,__vars:{"--slider-thumb-offset":`${r}%`},...b("thumb",{focusable:!0}),mod:{dragging:s,disabled:y},onFocus:C=>{E(!0),typeof d=="function"&&d(C)},onBlur:C=>{E(!1),typeof f=="function"&&f(C)},onTouchStart:o,onMouseDown:o,onKeyDownCapture:a,onClick:C=>C.stopPropagation(),children:[m,T.jsx(Jf,{mounted:i!=null&&!!_,transition:"fade",duration:0,...u,children:C=>T.jsx("div",{...b("label",{style:C}),children:i})})]})});L0e.displayName="@mantine/core/SliderThumb";function F0e({value:e,min:t,max:n}){const r=(e-t)/(n-t)*100;return Math.min(Math.max(r,0),100)}function tBe({mark:e,offset:t,value:n,inverted:r=!1}){return r?typeof t=="number"&&e.value<=t||e.value>=n:typeof t=="number"?e.value>=t&&e.value<=n:e.value<=n}function B0e({marks:e,min:t,max:n,disabled:r,value:i,offset:s,inverted:o}){const{getStyles:a}=G4();if(!e)return null;const u=e.map((l,c)=>D.createElement(Se,{...a("markWrapper"),__vars:{"--mark-offset":`${F0e({value:l.value,min:t,max:n})}%`},key:c},T.jsx(Se,{...a("mark"),mod:{filled:tBe({mark:l,value:i,offset:s,inverted:o}),disabled:r}}),l.label&&T.jsx("div",{...a("markLabel"),children:l.label})));return T.jsx("div",{children:u})}B0e.displayName="@mantine/core/SliderMarks";function j0e({filled:e,children:t,offset:n,disabled:r,marksOffset:i,inverted:s,containerProps:o,...a}){const{getStyles:u}=G4();return T.jsx(Se,{...u("trackContainer"),mod:{disabled:r},...o,children:T.jsxs(Se,{...u("track"),mod:{inverted:s,disabled:r},children:[T.jsx(Se,{mod:{inverted:s,disabled:r},__vars:{"--slider-bar-width":`calc(${e}% + var(--slider-size))`,"--slider-bar-offset":`calc(${n}% - var(--slider-size))`},...u("bar")}),t,T.jsx(B0e,{...a,offset:i,disabled:r,inverted:s})]})})}j0e.displayName="@mantine/core/SliderTrack";function nBe({value:e,containerWidth:t,min:n,max:r,step:i,precision:s}){const a=(t?Math.min(Math.max(e,0),t)/t:e)*(r-n),u=(a!==0?Math.round(a/i)*i:0)+n,l=Math.max(u,n);return s!==void 0?Number(l.toFixed(s)):l}function Ok(e,t){return parseFloat(e.toFixed(t))}function rBe(e){if(!e)return 0;const t=e.toString().split(".");return t.length>1?t[1].length:0}function o8(e,t){const r=[...t].sort((i,s)=>i.value-s.value).find(i=>i.value>e);return r?r.value:e}function a8(e,t){const r=[...t].sort((i,s)=>s.value-i.value).find(i=>i.value<e);return r?r.value:e}function wte(e){const t=[...e].sort((n,r)=>n.value-r.value);return t.length>0?t[0].value:0}function Ete(e){const t=[...e].sort((n,r)=>n.value-r.value);return t.length>0?t[t.length-1].value:100}var z0e={root:"m_dd36362e",label:"m_c9357328",thumb:"m_c9a9a60a",trackContainer:"m_a8645c2",track:"m_c9ade57f",bar:"m_38aeed47",markWrapper:"m_b7b0423a",mark:"m_dd33bc19",markLabel:"m_68c77a5b"};const iBe={radius:"xl",min:0,max:100,step:1,marks:[],label:e=>e,labelTransitionProps:{transition:"fade",duration:0},labelAlwaysOn:!1,thumbLabel:"",showLabelOnHover:!0,disabled:!1,scale:e=>e},sBe=(e,{size:t,color:n,thumbSize:r,radius:i})=>({root:{"--slider-size":mn(t,"slider-size"),"--slider-color":n?Vr(n,e):void 0,"--slider-radius":i===void 0?void 0:Dr(i),"--slider-thumb-size":r!==void 0?$e(r):"calc(var(--slider-size) * 2)"}}),Xv=tt((e,t)=>{const n=Me("Slider",iBe,e),{classNames:r,styles:i,value:s,onChange:o,onChangeEnd:a,size:u,min:l,max:c,step:d,precision:f,defaultValue:h,name:p,marks:m,label:y,labelTransitionProps:v,labelAlwaysOn:b,thumbLabel:w,showLabelOnHover:E,thumbChildren:_,disabled:C,unstyled:S,scale:k,inverted:R,className:N,style:O,vars:F,hiddenInputProps:$,restrictToMarks:z,thumbProps:q,...W}=n,J=$t({name:"Slider",props:n,classes:z0e,classNames:r,className:N,styles:i,style:O,vars:F,varsResolver:sBe,unstyled:S}),{dir:K}=Up(),[Z,U]=D.useState(!1),[L,Y]=no({value:typeof s=="number"?sf(s,l,c):s,defaultValue:typeof h=="number"?sf(h,l,c):h,finalValue:sf(0,l,c),onChange:o}),j=D.useRef(L),G=D.useRef(null),X=D.useRef(null),ne=F0e({value:L,min:l,max:c}),pe=k(L),de=typeof y=="function"?y(pe):y,xe=f??rBe(d),Ce=D.useCallback(({x:be})=>{if(!C){const Le=nBe({value:be,min:l,max:c,step:d,precision:xe});Y(z&&(m!=null&&m.length)?xee(Le,m.map(Ue=>Ue.value)):Le),j.current=Le}},[C,l,c,d,xe,Y,m,z]),{ref:ue,active:se}=DOe(Ce,{onScrubEnd:()=>a==null?void 0:a(z&&(m!=null&&m.length)?xee(j.current,m.map(be=>be.value)):j.current)},K),me=be=>{var Le,Ue,Ne,je,Ke,ut;if(!C)switch(be.key){case"ArrowUp":{if(be.preventDefault(),(Le=X.current)==null||Le.focus(),z&&m){const xt=o8(L,m);Y(xt),a==null||a(xt);break}const pt=Ok(Math.min(Math.max(L+d,l),c),xe);Y(pt),a==null||a(pt);break}case"ArrowRight":{if(be.preventDefault(),(Ue=X.current)==null||Ue.focus(),z&&m){const xt=K==="rtl"?a8(L,m):o8(L,m);Y(xt),a==null||a(xt);break}const pt=Ok(Math.min(Math.max(K==="rtl"?L-d:L+d,l),c),xe);Y(pt),a==null||a(pt);break}case"ArrowDown":{if(be.preventDefault(),(Ne=X.current)==null||Ne.focus(),z&&m){const xt=a8(L,m);Y(xt),a==null||a(xt);break}const pt=Ok(Math.min(Math.max(L-d,l),c),xe);Y(pt),a==null||a(pt);break}case"ArrowLeft":{if(be.preventDefault(),(je=X.current)==null||je.focus(),z&&m){const xt=K==="rtl"?o8(L,m):a8(L,m);Y(xt),a==null||a(xt);break}const pt=Ok(Math.min(Math.max(K==="rtl"?L+d:L-d,l),c),xe);Y(pt),a==null||a(pt);break}case"Home":{if(be.preventDefault(),(Ke=X.current)==null||Ke.focus(),z&&m){Y(wte(m)),a==null||a(wte(m));break}Y(l),a==null||a(l);break}case"End":{if(be.preventDefault(),(ut=X.current)==null||ut.focus(),z&&m){Y(Ete(m)),a==null||a(Ete(m));break}Y(c),a==null||a(c);break}}};return T.jsx(eBe,{value:{getStyles:J},children:T.jsxs(M0e,{...W,ref:Rs(t,G),onKeyDownCapture:me,onMouseDownCapture:()=>{var be;return(be=G.current)==null?void 0:be.focus()},size:u,disabled:C,children:[T.jsx(j0e,{inverted:R,offset:0,filled:ne,marks:m,min:l,max:c,value:pe,disabled:C,containerProps:{ref:ue,onMouseEnter:E?()=>U(!0):void 0,onMouseLeave:E?()=>U(!1):void 0},children:T.jsx(L0e,{max:c,min:l,value:pe,position:ne,dragging:se,label:de,ref:X,labelTransitionProps:v,labelAlwaysOn:b,thumbLabel:w,showLabelOnHover:E,isHovered:Z,disabled:C,...q,children:_})}),T.jsx("input",{type:"hidden",name:p,value:pe,...$})]})})});Xv.classes=z0e;Xv.displayName="@mantine/core/Slider";const oBe={},al=tt((e,t)=>{const{w:n,h:r,miw:i,mih:s,...o}=Me("Space",oBe,e);return T.jsx(Se,{ref:t,...o,w:n,miw:i??n,h:r,mih:s??r})});al.displayName="@mantine/core/Space";var U0e={root:"m_559cce2d",content:"m_b912df4e",control:"m_b9131032"};const aBe={maxHeight:100,initialState:!1},uBe=(e,{transitionDuration:t})=>({root:{"--spoiler-transition-duration":t!==void 0?`${t}ms`:void 0}}),FV=tt((e,t)=>{const n=Me("Spoiler",aBe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,initialState:l,maxHeight:c,hideLabel:d,showLabel:f,children:h,controlRef:p,transitionDuration:m,id:y,expanded:v,onExpandedChange:b,...w}=n,E=$t({name:"Spoiler",classes:U0e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:uBe}),_=Ga(y),C=`${_}-region`,[S,k]=no({value:v,defaultValue:l,finalValue:!1,onChange:b}),{ref:R,height:N}=NOe(),O=S?d:f,F=O!==null&&c<N;return T.jsxs(Se,{...E("root"),id:_,ref:t,"data-has-spoiler":F||void 0,...w,children:[F&&T.jsx(B1,{component:"button",type:"button",ref:p,onClick:()=>k(!S),"aria-expanded":S,"aria-controls":C,...E("control"),children:O}),T.jsx("div",{...E("content",{style:{maxHeight:S?N?$e(N):void 0:$e(c)}}),"data-reduce-motion":!0,role:"region",id:C,children:T.jsx("div",{ref:R,children:h})})]})});FV.classes=U0e;FV.displayName="@mantine/core/Spoiler";var V0e={root:"m_6d731127"};const lBe={gap:"md",align:"stretch",justify:"flex-start"},cBe=(e,{gap:t,align:n,justify:r})=>({root:{"--stack-gap":ns(t),"--stack-align":n,"--stack-justify":r}}),Es=tt((e,t)=>{const n=Me("Stack",lBe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,align:l,justify:c,gap:d,variant:f,...h}=n,p=$t({name:"Stack",props:n,classes:V0e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:cBe});return T.jsx(Se,{ref:t,...p("root"),variant:f,...h})});Es.classes=V0e;Es.displayName="@mantine/core/Stack";const H0e=D.createContext(null),dBe=H0e.Provider,fBe=()=>D.useContext(H0e),hBe={},BV=tt((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,readOnly:u,...l}=Me("SwitchGroup",hBe,e),[c,d]=no({value:n,defaultValue:r,finalValue:[],onChange:i}),f=h=>{const p=h.currentTarget.value;!u&&d(c.includes(p)?c.filter(m=>m!==p):[...c,p])};return T.jsx(dBe,{value:{value:c,onChange:f,size:s},children:T.jsx(Fr.Wrapper,{size:s,ref:t,...o,...l,labelElement:"div",__staticSelector:"SwitchGroup",children:T.jsx(sV,{role:"group",children:a})})})});BV.classes=Fr.Wrapper.classes;BV.displayName="@mantine/core/SwitchGroup";var q0e={root:"m_5f93f3bb",input:"m_926b4011",track:"m_9307d992",thumb:"m_93039a1d",trackLabel:"m_8277e082"};const pBe={labelPosition:"right"},mBe=(e,{radius:t,color:n,size:r})=>({root:{"--switch-radius":t===void 0?void 0:Dr(t),"--switch-height":mn(r,"switch-height"),"--switch-width":mn(r,"switch-width"),"--switch-thumb-size":mn(r,"switch-thumb-size"),"--switch-label-font-size":mn(r,"switch-label-font-size"),"--switch-track-label-padding":mn(r,"switch-track-label-padding"),"--switch-color":n?Vr(n,e):void 0}}),Ly=tt((e,t)=>{const n=Me("Switch",pBe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,label:c,offLabel:d,onLabel:f,id:h,size:p,radius:m,wrapperProps:y,thumbIcon:v,checked:b,defaultChecked:w,onChange:E,labelPosition:_,description:C,error:S,disabled:k,variant:R,rootRef:N,mod:O,...F}=n,$=fBe(),z=p||($==null?void 0:$.size),q=$t({name:"Switch",props:n,classes:q0e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:mBe}),{styleProps:W,rest:J}=L1(F),K=Ga(h),Z=$?{checked:$.value.includes(J.value),onChange:$.onChange}:{},[U,L]=no({value:Z.checked??b,defaultValue:w,finalValue:!1});return T.jsxs(C4,{...q("root"),__staticSelector:"Switch",__stylesApiProps:n,id:K,size:z,labelPosition:_,label:c,description:C,error:S,disabled:k,bodyElement:"label",labelElement:"span",classNames:r,styles:o,unstyled:a,"data-checked":Z.checked||b||void 0,variant:R,ref:N,mod:O,...W,...y,children:[T.jsx("input",{...J,disabled:k,checked:U,"data-checked":Z.checked||b||void 0,onChange:Y=>{var j;$?(j=Z.onChange)==null||j.call(Z,Y):E==null||E(Y),L(Y.currentTarget.checked)},id:K,ref:t,type:"checkbox",role:"switch",...q("input")}),T.jsxs(Se,{"aria-hidden":"true",mod:{error:S,"label-position":_,"without-labels":!f&&!d},...q("track"),children:[T.jsx(Se,{component:"span",mod:"reduce-motion",...q("thumb"),children:v}),T.jsx("span",{...q("trackLabel"),children:U?f:d})]})]})});Ly.classes={...q0e,...Ume};Ly.displayName="@mantine/core/Switch";Ly.Group=BV;const[gBe,yBe]=Is("Table component was not found in the tree");var QC={table:"m_b23fa0ef",th:"m_4e7aa4f3",tr:"m_4e7aa4fd",td:"m_4e7aa4ef",tbody:"m_b2404537",thead:"m_b242d975",caption:"m_9e5a3ac7",scrollContainer:"m_a100c15",scrollContainerInner:"m_62259741"};function bBe(e,t){if(!t)return;const n={};return t.columnBorder&&e.withColumnBorders&&(n["data-with-column-border"]=!0),t.rowBorder&&e.withRowBorders&&(n["data-with-row-border"]=!0),t.striped&&e.striped&&(n["data-striped"]=e.striped),t.highlightOnHover&&e.highlightOnHover&&(n["data-hover"]=!0),t.captionSide&&e.captionSide&&(n["data-side"]=e.captionSide),t.stickyHeader&&e.stickyHeader&&(n["data-sticky"]=!0),n}function U1(e,t){const n=`Table${e.charAt(0).toUpperCase()}${e.slice(1)}`,r=tt((i,s)=>{const o=Me(n,{},i),{classNames:a,className:u,style:l,styles:c,...d}=o,f=yBe();return T.jsx(Se,{component:e,ref:s,...bBe(f,t),...f.getStyles(e,{className:u,classNames:a,style:l,styles:c,props:o}),...d})});return r.displayName=`@mantine/core/${n}`,r.classes=QC,r}const H9=U1("th",{columnBorder:!0}),W0e=U1("td",{columnBorder:!0}),VR=U1("tr",{rowBorder:!0,striped:!0,highlightOnHover:!0}),G0e=U1("thead",{stickyHeader:!0}),Y0e=U1("tbody"),K0e=U1("tfoot"),X0e=U1("caption",{captionSide:!0});function jV({data:e}){return T.jsxs(T.Fragment,{children:[e.caption&&T.jsx(X0e,{children:e.caption}),e.head&&T.jsx(G0e,{children:T.jsx(VR,{children:e.head.map((t,n)=>T.jsx(H9,{children:t},n))})}),e.body&&T.jsx(Y0e,{children:e.body.map((t,n)=>T.jsx(VR,{children:t.map((r,i)=>T.jsx(W0e,{children:r},i))},n))}),e.foot&&T.jsx(K0e,{children:T.jsx(VR,{children:e.foot.map((t,n)=>T.jsx(H9,{children:t},n))})})]})}jV.displayName="@mantine/core/TableDataRenderer";const vBe={type:"scrollarea"},xBe=(e,{minWidth:t,type:n})=>({scrollContainer:{"--table-min-width":$e(t),"--table-overflow":n==="native"?"auto":void 0}}),zV=tt((e,t)=>{const n=Me("TableScrollContainer",vBe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,minWidth:c,type:d,...f}=n,h=$t({name:"TableScrollContainer",classes:QC,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:xBe,rootSelector:"scrollContainer"});return T.jsx(Se,{component:d==="scrollarea"?xp:"div",...d==="scrollarea"?{offsetScrollbars:"x"}:{},ref:t,...h("scrollContainer"),...f,children:T.jsx("div",{...h("scrollContainerInner"),children:l})})});zV.classes=QC;zV.displayName="@mantine/core/TableScrollContainer";const wBe={withRowBorders:!0,verticalSpacing:7},EBe=(e,{layout:t,captionSide:n,horizontalSpacing:r,verticalSpacing:i,borderColor:s,stripedColor:o,highlightOnHoverColor:a,striped:u,highlightOnHover:l,stickyHeaderOffset:c,stickyHeader:d})=>({table:{"--table-layout":t,"--table-caption-side":n,"--table-horizontal-spacing":ns(r),"--table-vertical-spacing":ns(i),"--table-border-color":s?Vr(s,e):void 0,"--table-striped-color":u&&o?Vr(o,e):void 0,"--table-highlight-on-hover-color":l&&a?Vr(a,e):void 0,"--table-sticky-header-offset":d?$e(c):void 0}}),Vt=tt((e,t)=>{const n=Me("Table",wBe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,horizontalSpacing:l,verticalSpacing:c,captionSide:d,stripedColor:f,highlightOnHoverColor:h,striped:p,highlightOnHover:m,withColumnBorders:y,withRowBorders:v,withTableBorder:b,borderColor:w,layout:E,variant:_,data:C,children:S,stickyHeader:k,stickyHeaderOffset:R,mod:N,tabularNums:O,...F}=n,$=$t({name:"Table",props:n,className:i,style:s,classes:QC,classNames:r,styles:o,unstyled:a,rootSelector:"table",vars:u,varsResolver:EBe});return T.jsx(gBe,{value:{getStyles:$,stickyHeader:k,striped:p===!0?"odd":p||void 0,highlightOnHover:m,withColumnBorders:y,withRowBorders:v,captionSide:d||"bottom"},children:T.jsx(Se,{component:"table",variant:_,ref:t,mod:[{"data-with-table-border":b,"data-tabular-nums":O},N],...$("table"),...F,children:S||!!C&&T.jsx(jV,{data:C})})})});Vt.classes=QC;Vt.displayName="@mantine/core/Table";Vt.Td=W0e;Vt.Th=H9;Vt.Tr=VR;Vt.Thead=G0e;Vt.Tbody=Y0e;Vt.Tfoot=K0e;Vt.Caption=X0e;Vt.ScrollContainer=zV;Vt.DataRenderer=jV;const[_Be,UV]=Is("Tabs component was not found in the tree");var JC={root:"m_89d60db1","list--default":"m_576c9d4",list:"m_89d33d6d",panel:"m_b0c91715",tab:"m_4ec4dce6",tabSection:"m_fc420b1f","tab--default":"m_539e827b","list--outline":"m_6772fbd5","tab--outline":"m_b59ab47c","tab--pills":"m_c3381914"};const TBe={},VV=tt((e,t)=>{const n=Me("TabsList",TBe,e),{children:r,className:i,grow:s,justify:o,classNames:a,styles:u,style:l,mod:c,...d}=n,f=UV();return T.jsx(Se,{...d,...f.getStyles("list",{className:i,style:l,classNames:a,styles:u,props:n,variant:f.variant}),ref:t,role:"tablist",variant:f.variant,mod:[{grow:s,orientation:f.orientation,placement:f.orientation==="vertical"&&f.placement,inverted:f.inverted},c],"aria-orientation":f.orientation,__vars:{"--tabs-justify":o},children:r})});VV.classes=JC;VV.displayName="@mantine/core/TabsList";const CBe={},HV=tt((e,t)=>{const n=Me("TabsPanel",CBe,e),{children:r,className:i,value:s,classNames:o,styles:a,style:u,mod:l,keepMounted:c,...d}=n,f=UV(),h=f.value===s,p=f.keepMounted||c||h?r:null;return T.jsx(Se,{...d,...f.getStyles("panel",{className:i,classNames:o,styles:a,style:[u,h?void 0:{display:"none"}],props:n}),ref:t,mod:[{orientation:f.orientation},l],role:"tabpanel",id:f.getPanelId(s),"aria-labelledby":f.getTabId(s),children:p})});HV.classes=JC;HV.displayName="@mantine/core/TabsPanel";const SBe={},qV=tt((e,t)=>{const n=Me("TabsTab",SBe,e),{className:r,children:i,rightSection:s,leftSection:o,value:a,onClick:u,onKeyDown:l,disabled:c,color:d,style:f,classNames:h,styles:p,vars:m,mod:y,tabIndex:v,...b}=n,w=ss(),{dir:E}=Up(),_=UV(),C=a===_.value,S=R=>{_.onChange(_.allowTabDeactivation&&a===_.value?null:a),u==null||u(R)},k={classNames:h,styles:p,props:n};return T.jsxs(ku,{...b,..._.getStyles("tab",{className:r,style:f,variant:_.variant,...k}),disabled:c,unstyled:_.unstyled,variant:_.variant,mod:[{active:C,disabled:c,orientation:_.orientation,inverted:_.inverted,placement:_.orientation==="vertical"&&_.placement},y],ref:t,role:"tab",id:_.getTabId(a),"aria-selected":C,tabIndex:v||C||_.value===null?0:-1,"aria-controls":_.getPanelId(a),onClick:S,__vars:{"--tabs-color":d?Vr(d,w):void 0},onKeyDown:Gz({siblingSelector:'[role="tab"]',parentSelector:'[role="tablist"]',activateOnFocus:_.activateTabWithKeyboard,loop:_.loop,orientation:_.orientation||"horizontal",dir:E,onKeyDown:l}),children:[o&&T.jsx("span",{..._.getStyles("tabSection",k),"data-position":"left",children:o}),i&&T.jsx("span",{..._.getStyles("tabLabel",k),children:i}),s&&T.jsx("span",{..._.getStyles("tabSection",k),"data-position":"right",children:s})]})});qV.classes=JC;qV.displayName="@mantine/core/TabsTab";const _te="Tabs.Tab or Tabs.Panel component was rendered with invalid value or without value",ABe={keepMounted:!0,orientation:"horizontal",loop:!0,activateTabWithKeyboard:!0,allowTabDeactivation:!1,unstyled:!1,inverted:!1,variant:"default",placement:"left"},kBe=(e,{radius:t,color:n,autoContrast:r})=>({root:{"--tabs-radius":Dr(t),"--tabs-color":Vr(n,e),"--tabs-text-color":Tw(r,e)?O1({color:n,theme:e,autoContrast:r}):void 0}}),Un=tt((e,t)=>{const n=Me("Tabs",ABe,e),{defaultValue:r,value:i,onChange:s,orientation:o,children:a,loop:u,id:l,activateTabWithKeyboard:c,allowTabDeactivation:d,variant:f,color:h,radius:p,inverted:m,placement:y,keepMounted:v,classNames:b,styles:w,unstyled:E,className:_,style:C,vars:S,autoContrast:k,mod:R,...N}=n,O=Ga(l),[F,$]=no({value:i,defaultValue:r,finalValue:null,onChange:s}),z=$t({name:"Tabs",props:n,classes:JC,className:_,style:C,classNames:b,styles:w,unstyled:E,vars:S,varsResolver:kBe});return T.jsx(_Be,{value:{placement:y,value:F,orientation:o,id:O,loop:u,activateTabWithKeyboard:c,getTabId:TP(`${O}-tab`,_te),getPanelId:TP(`${O}-panel`,_te),onChange:$,allowTabDeactivation:d,variant:f,color:h,radius:p,inverted:m,keepMounted:v,unstyled:E,getStyles:z},children:T.jsx(Se,{ref:t,id:O,variant:f,mod:[{orientation:o,inverted:o==="horizontal"&&m,placement:o==="vertical"&&y},R],...z("root"),...N,children:a})})});Un.classes=JC;Un.displayName="@mantine/core/Tabs";Un.Tab=qV;Un.Panel=HV;Un.List=VV;const IBe={},Xh=tt((e,t)=>{const n=Me("TextInput",IBe,e);return T.jsx(Mu,{component:"input",ref:t,...n,__staticSelector:"TextInput"})});Xh.classes=Mu.classes;Xh.displayName="@mantine/core/TextInput";const RBe=["h1","h2","h3","h4","h5","h6"],DBe=["xs","sm","md","lg","xl"];function PBe(e,t){const n=t!==void 0?t:`h${e}`;return RBe.includes(n)?{fontSize:`var(--mantine-${n}-font-size)`,fontWeight:`var(--mantine-${n}-font-weight)`,lineHeight:`var(--mantine-${n}-line-height)`}:DBe.includes(n)?{fontSize:`var(--mantine-font-size-${n})`,fontWeight:`var(--mantine-h${e}-font-weight)`,lineHeight:`var(--mantine-h${e}-line-height)`}:{fontSize:$e(n),fontWeight:`var(--mantine-h${e}-font-weight)`,lineHeight:`var(--mantine-h${e}-line-height)`}}var Q0e={root:"m_8a5d1357"};const NBe={order:1},OBe=(e,{order:t,size:n,lineClamp:r,textWrap:i})=>{const s=PBe(t,n);return{root:{"--title-fw":s.fontWeight,"--title-lh":s.lineHeight,"--title-fz":s.fontSize,"--title-line-clamp":typeof r=="number"?r.toString():void 0,"--title-text-wrap":i}}},Pi=tt((e,t)=>{const n=Me("Title",NBe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,order:u,vars:l,size:c,variant:d,lineClamp:f,textWrap:h,mod:p,...m}=n,y=$t({name:"Title",props:n,classes:Q0e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:OBe});return[1,2,3,4,5,6].includes(u)?T.jsx(Se,{...y("root"),component:`h${u}`,variant:d,ref:t,mod:[{order:u,"data-line-clamp":typeof f=="number"},p],size:c,...m}):null});Pi.classes=Q0e;Pi.displayName="@mantine/core/Title";function $Be(e){let t=e,n=!1;const r=new Set;return{getState(){return t},updateState(i){t=typeof i=="function"?i(t):i},setState(i){this.updateState(i),r.forEach(s=>s(t))},initialize(i){n||(t=i,n=!0)},subscribe(i){return r.add(i),()=>r.delete(i)}}}function MBe(e){return D.useSyncExternalStore(e.subscribe,()=>e.getState(),()=>e.getState())}function LBe(e,t,n){const r=[],i=[],s={};for(const o of e){const a=o.position||t;s[a]=s[a]||0,s[a]+=1,s[a]<=n?i.push(o):r.push(o)}return{notifications:i,queue:r}}const FBe=()=>$Be({notifications:[],queue:[],defaultPosition:"bottom-right",limit:5}),V1=FBe(),BBe=(e=V1)=>MBe(e);function Fw(e,t){const n=e.getState(),r=t([...n.notifications,...n.queue]),i=LBe(r,n.defaultPosition,n.limit);e.setState({notifications:i.notifications,queue:i.queue,limit:n.limit,defaultPosition:n.defaultPosition})}function jBe(e,t=V1){const n=e.id||Gv();return Fw(t,r=>e.id&&r.some(i=>i.id===e.id)?r:[...r,{...e,id:n}]),n}function J0e(e,t=V1){return Fw(t,n=>n.filter(r=>{var i;return r.id===e?((i=r.onClose)==null||i.call(r,r),!1):!0})),e}function zBe(e,t=V1){return Fw(t,n=>n.map(r=>r.id===e.id?{...r,...e}:r)),e.id}function UBe(e=V1){Fw(e,()=>[])}function VBe(e=V1){Fw(e,t=>t.slice(0,e.getState().limit))}const H1={show:jBe,hide:J0e,update:zBe,clean:UBe,cleanQueue:VBe,updateState:Fw};function q9(e,t){return q9=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},q9(e,t)}function Z0e(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,q9(e,t)}var u8={exports:{}},l8,Tte;function HBe(){if(Tte)return l8;Tte=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return l8=e,l8}var c8,Cte;function qBe(){if(Cte)return c8;Cte=1;var e=HBe();function t(){}function n(){}return n.resetWarningCache=t,c8=function(){function r(o,a,u,l,c,d){if(d!==e){var f=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw f.name="Invariant Violation",f}}r.isRequired=r;function i(){return r}var s={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:n,resetWarningCache:t};return s.PropTypes=s,s},c8}var Ste;function WBe(){return Ste||(Ste=1,u8.exports=qBe()()),u8.exports}var GBe=WBe();const Ate=Tl(GBe),kte={disabled:!1},$P=rr.createContext(null);var YBe=function(t){return t.scrollTop},tT="unmounted",iy="exited",sy="entering",Cv="entered",W9="exiting",Gp=function(e){Z0e(t,e);function t(r,i){var s;s=e.call(this,r,i)||this;var o=i,a=o&&!o.isMounting?r.enter:r.appear,u;return s.appearStatus=null,r.in?a?(u=iy,s.appearStatus=sy):u=Cv:r.unmountOnExit||r.mountOnEnter?u=tT:u=iy,s.state={status:u},s.nextCallback=null,s}t.getDerivedStateFromProps=function(i,s){var o=i.in;return o&&s.status===tT?{status:iy}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(i){var s=null;if(i!==this.props){var o=this.state.status;this.props.in?o!==sy&&o!==Cv&&(s=sy):(o===sy||o===Cv)&&(s=W9)}this.updateStatus(!1,s)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var i=this.props.timeout,s,o,a;return s=o=a=i,i!=null&&typeof i!="number"&&(s=i.exit,o=i.enter,a=i.appear!==void 0?i.appear:o),{exit:s,enter:o,appear:a}},n.updateStatus=function(i,s){if(i===void 0&&(i=!1),s!==null)if(this.cancelNextCallback(),s===sy){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:eT.findDOMNode(this);o&&YBe(o)}this.performEnter(i)}else this.performExit();else this.props.unmountOnExit&&this.state.status===iy&&this.setState({status:tT})},n.performEnter=function(i){var s=this,o=this.props.enter,a=this.context?this.context.isMounting:i,u=this.props.nodeRef?[a]:[eT.findDOMNode(this),a],l=u[0],c=u[1],d=this.getTimeouts(),f=a?d.appear:d.enter;if(!i&&!o||kte.disabled){this.safeSetState({status:Cv},function(){s.props.onEntered(l)});return}this.props.onEnter(l,c),this.safeSetState({status:sy},function(){s.props.onEntering(l,c),s.onTransitionEnd(f,function(){s.safeSetState({status:Cv},function(){s.props.onEntered(l,c)})})})},n.performExit=function(){var i=this,s=this.props.exit,o=this.getTimeouts(),a=this.props.nodeRef?void 0:eT.findDOMNode(this);if(!s||kte.disabled){this.safeSetState({status:iy},function(){i.props.onExited(a)});return}this.props.onExit(a),this.safeSetState({status:W9},function(){i.props.onExiting(a),i.onTransitionEnd(o.exit,function(){i.safeSetState({status:iy},function(){i.props.onExited(a)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(i,s){s=this.setNextCallback(s),this.setState(i,s)},n.setNextCallback=function(i){var s=this,o=!0;return this.nextCallback=function(a){o&&(o=!1,s.nextCallback=null,i(a))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},n.onTransitionEnd=function(i,s){this.setNextCallback(s);var o=this.props.nodeRef?this.props.nodeRef.current:eT.findDOMNode(this),a=i==null&&!this.props.addEndListener;if(!o||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var u=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],l=u[0],c=u[1];this.props.addEndListener(l,c)}i!=null&&setTimeout(this.nextCallback,i)},n.render=function(){var i=this.state.status;if(i===tT)return null;var s=this.props,o=s.children;s.in,s.mountOnEnter,s.unmountOnExit,s.appear,s.enter,s.exit,s.timeout,s.addEndListener,s.onEnter,s.onEntering,s.onEntered,s.onExit,s.onExiting,s.onExited,s.nodeRef;var a=mV(s,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return rr.createElement($P.Provider,{value:null},typeof o=="function"?o(i,a):rr.cloneElement(rr.Children.only(o),a))},t}(rr.Component);Gp.contextType=$P;Gp.propTypes={};function nv(){}Gp.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:nv,onEntering:nv,onEntered:nv,onExit:nv,onExiting:nv,onExited:nv};Gp.UNMOUNTED=tT;Gp.EXITED=iy;Gp.ENTERING=sy;Gp.ENTERED=Cv;Gp.EXITING=W9;function KBe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function WV(e,t){var n=function(s){return t&&D.isValidElement(s)?t(s):s},r=Object.create(null);return e&&D.Children.map(e,function(i){return i}).forEach(function(i){r[i.key]=n(i)}),r}function XBe(e,t){e=e||{},t=t||{};function n(c){return c in t?t[c]:e[c]}var r=Object.create(null),i=[];for(var s in e)s in t?i.length&&(r[s]=i,i=[]):i.push(s);var o,a={};for(var u in t){if(r[u])for(o=0;o<r[u].length;o++){var l=r[u][o];a[r[u][o]]=n(l)}a[u]=n(u)}for(o=0;o<i.length;o++)a[i[o]]=n(i[o]);return a}function Cy(e,t,n){return n[t]!=null?n[t]:e.props[t]}function QBe(e,t){return WV(e.children,function(n){return D.cloneElement(n,{onExited:t.bind(null,n),in:!0,appear:Cy(n,"appear",e),enter:Cy(n,"enter",e),exit:Cy(n,"exit",e)})})}function JBe(e,t,n){var r=WV(e.children),i=XBe(t,r);return Object.keys(i).forEach(function(s){var o=i[s];if(D.isValidElement(o)){var a=s in t,u=s in r,l=t[s],c=D.isValidElement(l)&&!l.props.in;u&&(!a||c)?i[s]=D.cloneElement(o,{onExited:n.bind(null,o),in:!0,exit:Cy(o,"exit",e),enter:Cy(o,"enter",e)}):!u&&a&&!c?i[s]=D.cloneElement(o,{in:!1}):u&&a&&D.isValidElement(l)&&(i[s]=D.cloneElement(o,{onExited:n.bind(null,o),in:l.props.in,exit:Cy(o,"exit",e),enter:Cy(o,"enter",e)}))}}),i}var ZBe=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},eje={component:"div",childFactory:function(t){return t}},$m=function(e){Z0e(t,e);function t(r,i){var s;s=e.call(this,r,i)||this;var o=s.handleExited.bind(KBe(s));return s.state={contextValue:{isMounting:!0},handleExited:o,firstRender:!0},s}var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(i,s){var o=s.children,a=s.handleExited,u=s.firstRender;return{children:u?QBe(i,a):JBe(i,o,a),firstRender:!1}},n.handleExited=function(i,s){var o=WV(this.props.children);i.key in o||(i.props.onExited&&i.props.onExited(s),this.mounted&&this.setState(function(a){var u=NP({},a.children);return delete u[i.key],{children:u}}))},n.render=function(){var i=this.props,s=i.component,o=i.childFactory,a=mV(i,["component","childFactory"]),u=this.state.contextValue,l=ZBe(this.state.children).map(o);return delete a.appear,delete a.enter,delete a.exit,s===null?rr.createElement($P.Provider,{value:u},l):rr.createElement($P.Provider,{value:u},rr.createElement(s,a,l))},t}(rr.Component);$m.propTypes={};$m.defaultProps=eje;const ege=["bottom-center","bottom-left","bottom-right","top-center","top-left","top-right"];function tje(e,t){return e.reduce((n,r)=>(n[r.position||t].push(r),n),ege.reduce((n,r)=>(n[r]=[],n),{}))}const Ite={left:"translateX(-100%)",right:"translateX(100%)","top-center":"translateY(-100%)","bottom-center":"translateY(100%)"},nje={left:"translateX(0)",right:"translateX(0)","top-center":"translateY(0)","bottom-center":"translateY(0)"};function rje({state:e,maxHeight:t,position:n,transitionDuration:r}){const[i,s]=n.split("-"),o=s==="center"?`${i}-center`:s,a={opacity:0,maxHeight:t,transform:Ite[o],transitionDuration:`${r}ms, ${r}ms, ${r}ms`,transitionTimingFunction:"cubic-bezier(.51,.3,0,1.21), cubic-bezier(.51,.3,0,1.21), linear",transitionProperty:"opacity, transform, max-height"},u={opacity:1,transform:nje[o]},l={opacity:0,maxHeight:0,transform:Ite[o]};return{...a,...{entering:u,entered:u,exiting:l,exited:l}[e]}}function ije(e,t){return typeof t=="number"?t:t===!1||e===!1?!1:e}const tge=D.forwardRef(({data:e,onHide:t,autoClose:n,...r},i)=>{const{autoClose:s,message:o,...a}=e,u=ije(n,e.autoClose),l=D.useRef(-1),c=()=>window.clearTimeout(l.current),d=()=>{t(e.id),c()},f=()=>{typeof u=="number"&&(l.current=window.setTimeout(d,u))};return D.useEffect(()=>{var h;(h=e.onOpen)==null||h.call(e,e)},[]),D.useEffect(()=>(f(),c),[u]),T.jsx(kV,{...r,...a,onClose:d,ref:i,onMouseEnter:c,onMouseLeave:f,children:o})});tge.displayName="@mantine/notifications/NotificationContainer";var nge={root:"m_b37d9ac7",notification:"m_5ed0edd0"};const sje=Gp,oje={position:"bottom-right",autoClose:4e3,transitionDuration:250,containerWidth:440,notificationMaxHeight:200,limit:5,zIndex:so("overlay"),store:V1,withinPortal:!0},aje=(e,{zIndex:t,containerWidth:n})=>({root:{"--notifications-z-index":t==null?void 0:t.toString(),"--notifications-container-width":$e(n)}}),Yp=tt((e,t)=>{const n=Me("Notifications",oje,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,position:l,autoClose:c,transitionDuration:d,containerWidth:f,notificationMaxHeight:h,limit:p,zIndex:m,store:y,portalProps:v,withinPortal:b,...w}=n,E=ss(),_=BBe(y),C=kOe(),S=d4(),k=D.useRef({}),R=D.useRef(0),O=(E.respectReducedMotion?S:!1)?1:d,F=$t({name:"Notifications",classes:nge,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:aje});D.useEffect(()=>{y==null||y.updateState(q=>({...q,limit:p||5,defaultPosition:l}))},[p,l]),Nf(()=>{_.notifications.length>R.current&&setTimeout(()=>C(),0),R.current=_.notifications.length},[_.notifications]);const $=tje(_.notifications,l),z=ege.reduce((q,W)=>(q[W]=$[W].map(({style:J,...K})=>T.jsx(sje,{timeout:O,onEnter:()=>k.current[K.id].offsetHeight,nodeRef:{current:k.current[K.id]},children:Z=>T.jsx(tge,{ref:U=>{k.current[K.id]=U},data:K,onHide:U=>J0e(U,y),autoClose:c,...F("notification",{style:{...rje({state:Z,position:W,transitionDuration:O,maxHeight:h}),...J}})})},K.id)),q),{});return T.jsxs(Z0,{withinPortal:b,...v,children:[T.jsx(Se,{...F("root"),"data-position":"top-center",ref:t,...w,children:T.jsx($m,{children:z["top-center"]})}),T.jsx(Se,{...F("root"),"data-position":"top-left",...w,children:T.jsx($m,{children:z["top-left"]})}),T.jsx(Se,{...F("root",{className:xx.classNames.fullWidth}),"data-position":"top-right",...w,children:T.jsx($m,{children:z["top-right"]})}),T.jsx(Se,{...F("root",{className:xx.classNames.fullWidth}),"data-position":"bottom-right",...w,children:T.jsx($m,{children:z["bottom-right"]})}),T.jsx(Se,{...F("root"),"data-position":"bottom-left",...w,children:T.jsx($m,{children:z["bottom-left"]})}),T.jsx(Se,{...F("root"),"data-position":"bottom-center",...w,children:T.jsx($m,{children:z["bottom-center"]})})]})});Yp.classes=nge;Yp.displayName="@mantine/notifications/Notifications";Yp.show=H1.show;Yp.hide=H1.hide;Yp.update=H1.update;Yp.clean=H1.clean;Yp.cleanQueue=H1.cleanQueue;Yp.updateState=H1.updateState;const rge=D.createContext({storageEngine:void 0,setStorageEngine:()=>{}}),Mi=()=>D.useContext(rge);function uje({children:e}){const[t,n]=D.useState(void 0),r=D.useMemo(()=>({storageEngine:t,setStorageEngine:n}),[t]);return T.jsx(rge.Provider,{value:r,children:e})}var l_={},Rte;function lje(){if(Rte)return l_;Rte=1,Object.defineProperty(l_,"__esModule",{value:!0}),l_.parse=o,l_.serialize=l;const e=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,t=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,i=Object.prototype.toString,s=(()=>{const f=function(){};return f.prototype=Object.create(null),f})();function o(f,h){const p=new s,m=f.length;if(m<2)return p;const y=(h==null?void 0:h.decode)||c;let v=0;do{const b=f.indexOf("=",v);if(b===-1)break;const w=f.indexOf(";",v),E=w===-1?m:w;if(b>E){v=f.lastIndexOf(";",b-1)+1;continue}const _=a(f,v,b),C=u(f,b,_),S=f.slice(_,C);if(p[S]===void 0){let k=a(f,b+1,E),R=u(f,E,k);const N=y(f.slice(k,R));p[S]=N}v=E+1}while(v<m);return p}function a(f,h,p){do{const m=f.charCodeAt(h);if(m!==32&&m!==9)return h}while(++h<p);return p}function u(f,h,p){for(;h>p;){const m=f.charCodeAt(--h);if(m!==32&&m!==9)return h+1}return p}function l(f,h,p){const m=(p==null?void 0:p.encode)||encodeURIComponent;if(!e.test(f))throw new TypeError(`argument name is invalid: ${f}`);const y=m(h);if(!t.test(y))throw new TypeError(`argument val is invalid: ${h}`);let v=f+"="+y;if(!p)return v;if(p.maxAge!==void 0){if(!Number.isInteger(p.maxAge))throw new TypeError(`option maxAge is invalid: ${p.maxAge}`);v+="; Max-Age="+p.maxAge}if(p.domain){if(!n.test(p.domain))throw new TypeError(`option domain is invalid: ${p.domain}`);v+="; Domain="+p.domain}if(p.path){if(!r.test(p.path))throw new TypeError(`option path is invalid: ${p.path}`);v+="; Path="+p.path}if(p.expires){if(!d(p.expires)||!Number.isFinite(p.expires.valueOf()))throw new TypeError(`option expires is invalid: ${p.expires}`);v+="; Expires="+p.expires.toUTCString()}if(p.httpOnly&&(v+="; HttpOnly"),p.secure&&(v+="; Secure"),p.partitioned&&(v+="; Partitioned"),p.priority)switch(typeof p.priority=="string"?p.priority.toLowerCase():void 0){case"low":v+="; Priority=Low";break;case"medium":v+="; Priority=Medium";break;case"high":v+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${p.priority}`)}if(p.sameSite)switch(typeof p.sameSite=="string"?p.sameSite.toLowerCase():p.sameSite){case!0:case"strict":v+="; SameSite=Strict";break;case"lax":v+="; SameSite=Lax";break;case"none":v+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${p.sameSite}`)}return v}function c(f){if(f.indexOf("%")===-1)return f;try{return decodeURIComponent(f)}catch{return f}}function d(f){return i.call(f)==="[object Date]"}return l_}lje();/**
 * react-router v7.1.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Dte="popstate";function cje(e={}){function t(r,i){let{pathname:s,search:o,hash:a}=r.location;return G9("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:I2(i)}return fje(t,n,null,e)}function hi(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function ec(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function dje(){return Math.random().toString(36).substring(2,10)}function Pte(e,t){return{usr:e.state,key:e.key,idx:t}}function G9(e,t,n=null,r){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Bw(t):t,state:n,key:t&&t.key||r||dje()}}function I2({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Bw(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function fje(e,t,n,r={}){let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a="POP",u=null,l=c();l==null&&(l=0,o.replaceState({...o.state,idx:l},""));function c(){return(o.state||{idx:null}).idx}function d(){a="POP";let y=c(),v=y==null?null:y-l;l=y,u&&u({action:a,location:m.location,delta:v})}function f(y,v){a="PUSH";let b=G9(m.location,y,v);l=c()+1;let w=Pte(b,l),E=m.createHref(b);try{o.pushState(w,"",E)}catch(_){if(_ instanceof DOMException&&_.name==="DataCloneError")throw _;i.location.assign(E)}s&&u&&u({action:a,location:m.location,delta:1})}function h(y,v){a="REPLACE";let b=G9(m.location,y,v);l=c();let w=Pte(b,l),E=m.createHref(b);o.replaceState(w,"",E),s&&u&&u({action:a,location:m.location,delta:0})}function p(y){let v=i.location.origin!=="null"?i.location.origin:i.location.href,b=typeof y=="string"?y:I2(y);return b=b.replace(/ $/,"%20"),hi(v,`No window.location.(origin|href) available to create URL for href: ${b}`),new URL(b,v)}let m={get action(){return a},get location(){return e(i,o)},listen(y){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(Dte,d),u=y,()=>{i.removeEventListener(Dte,d),u=null}},createHref(y){return t(i,y)},createURL:p,encodeLocation(y){let v=p(y);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:f,replace:h,go(y){return o.go(y)}};return m}function ige(e,t,n="/"){return hje(e,t,n,!1)}function hje(e,t,n,r){let i=typeof t=="string"?Bw(t):t,s=_0(i.pathname||"/",n);if(s==null)return null;let o=sge(e);pje(o);let a=null;for(let u=0;a==null&&u<o.length;++u){let l=Cje(s);a=_je(o[u],l,r)}return a}function sge(e,t=[],n=[],r=""){let i=(s,o,a)=>{let u={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};u.relativePath.startsWith("/")&&(hi(u.relativePath.startsWith(r),`Absolute route path "${u.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(r.length));let l=lp([r,u.relativePath]),c=n.concat(u);s.children&&s.children.length>0&&(hi(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${l}".`),sge(s.children,t,c,l)),!(s.path==null&&!s.index)&&t.push({path:l,score:wje(l,s.index),routesMeta:c})};return e.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let u of oge(s.path))i(s,o,u)}),t}function oge(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=oge(r.join("/")),a=[];return a.push(...o.map(u=>u===""?s:[s,u].join("/"))),i&&a.push(...o),a.map(u=>e.startsWith("/")&&u===""?"/":u)}function pje(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:Eje(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var mje=/^:[\w-]+$/,gje=3,yje=2,bje=1,vje=10,xje=-2,Nte=e=>e==="*";function wje(e,t){let n=e.split("/"),r=n.length;return n.some(Nte)&&(r+=xje),t&&(r+=yje),n.filter(i=>!Nte(i)).reduce((i,s)=>i+(mje.test(s)?gje:s===""?bje:vje),r)}function Eje(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function _je(e,t,n=!1){let{routesMeta:r}=e,i={},s="/",o=[];for(let a=0;a<r.length;++a){let u=r[a],l=a===r.length-1,c=s==="/"?t:t.slice(s.length)||"/",d=MP({path:u.relativePath,caseSensitive:u.caseSensitive,end:l},c),f=u.route;if(!d&&l&&n&&!r[r.length-1].route.index&&(d=MP({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},c)),!d)return null;Object.assign(i,d.params),o.push({params:i,pathname:lp([s,d.pathname]),pathnameBase:Ije(lp([s,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(s=lp([s,d.pathnameBase]))}return o}function MP(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=Tje(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((l,{paramName:c,isOptional:d},f)=>{if(c==="*"){let p=a[f]||"";o=s.slice(0,s.length-p.length).replace(/(.)\/+$/,"$1")}const h=a[f];return d&&!h?l[c]=void 0:l[c]=(h||"").replace(/%2F/g,"/"),l},{}),pathname:s,pathnameBase:o,pattern:e}}function Tje(e,t=!1,n=!0){ec(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,u)=>(r.push({paramName:a,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function Cje(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return ec(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function _0(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function Sje(e,t="/"){let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?Bw(e):e;return{pathname:n?n.startsWith("/")?n:Aje(n,t):t,search:Rje(r),hash:Dje(i)}}function Aje(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function d8(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function kje(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function GV(e){let t=kje(e);return t.map((n,r)=>r===t.length-1?n.pathname:n.pathnameBase)}function YV(e,t,n,r=!1){let i;typeof e=="string"?i=Bw(e):(i={...e},hi(!i.pathname||!i.pathname.includes("?"),d8("?","pathname","search",i)),hi(!i.pathname||!i.pathname.includes("#"),d8("#","pathname","hash",i)),hi(!i.search||!i.search.includes("#"),d8("#","search","hash",i)));let s=e===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let d=t.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),d-=1;i.pathname=f.join("/")}a=d>=0?t[d]:"/"}let u=Sje(i,a),l=o&&o!=="/"&&o.endsWith("/"),c=(s||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(l||c)&&(u.pathname+="/"),u}var lp=e=>e.join("/").replace(/\/\/+/g,"/"),Ije=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Rje=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Dje=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Pje(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var age=["POST","PUT","PATCH","DELETE"];new Set(age);var Nje=["GET",...age];new Set(Nje);var jw=D.createContext(null);jw.displayName="DataRouter";var Y4=D.createContext(null);Y4.displayName="DataRouterState";var uge=D.createContext({isTransitioning:!1});uge.displayName="ViewTransition";var Oje=D.createContext(new Map);Oje.displayName="Fetchers";var $je=D.createContext(null);$je.displayName="Await";var xd=D.createContext(null);xd.displayName="Navigation";var ZC=D.createContext(null);ZC.displayName="Location";var dc=D.createContext({outlet:null,matches:[],isDataRoute:!1});dc.displayName="Route";var KV=D.createContext(null);KV.displayName="RouteError";function XV(e,{relative:t}={}){hi(zw(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=D.useContext(xd),{hash:i,pathname:s,search:o}=eS(e,{relative:t}),a=s;return n!=="/"&&(a=s==="/"?n:lp([n,s])),r.createHref({pathname:a,search:o,hash:i})}function zw(){return D.useContext(ZC)!=null}function fc(){return hi(zw(),"useLocation() may be used only in the context of a <Router> component."),D.useContext(ZC).location}var lge="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function cge(e){D.useContext(xd).static||D.useLayoutEffect(e)}function Cl(){let{isDataRoute:e}=D.useContext(dc);return e?Kje():Mje()}function Mje(){hi(zw(),"useNavigate() may be used only in the context of a <Router> component.");let e=D.useContext(jw),{basename:t,navigator:n}=D.useContext(xd),{matches:r}=D.useContext(dc),{pathname:i}=fc(),s=JSON.stringify(GV(r)),o=D.useRef(!1);return cge(()=>{o.current=!0}),D.useCallback((u,l={})=>{if(ec(o.current,lge),!o.current)return;if(typeof u=="number"){n.go(u);return}let c=YV(u,JSON.parse(s),i,l.relative==="path");e==null&&t!=="/"&&(c.pathname=c.pathname==="/"?t:lp([t,c.pathname])),(l.replace?n.replace:n.push)(c,l.state,l)},[t,n,s,i,e])}var Lje=D.createContext(null);function Fje(e){let t=D.useContext(dc).outlet;return t&&D.createElement(Lje.Provider,{value:e},t)}function Va(){let{matches:e}=D.useContext(dc),t=e[e.length-1];return t?t.params:{}}function eS(e,{relative:t}={}){let{matches:n}=D.useContext(dc),{pathname:r}=fc(),i=JSON.stringify(GV(n));return D.useMemo(()=>YV(e,JSON.parse(i),r,t==="path"),[e,i,r,t])}function dge(e,t){return fge(e,t)}function fge(e,t,n,r){var v;hi(zw(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=D.useContext(xd),{matches:s}=D.useContext(dc),o=s[s.length-1],a=o?o.params:{},u=o?o.pathname:"/",l=o?o.pathnameBase:"/",c=o&&o.route;{let b=c&&c.path||"";hge(u,!c||b.endsWith("*")||b.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${b}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${b}"> to <Route path="${b==="/"?"*":`${b}/*`}">.`)}let d=fc(),f;if(t){let b=typeof t=="string"?Bw(t):t;hi(l==="/"||((v=b.pathname)==null?void 0:v.startsWith(l)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${l}" but pathname "${b.pathname}" was given in the \`location\` prop.`),f=b}else f=d;let h=f.pathname||"/",p=h;if(l!=="/"){let b=l.replace(/^\//,"").split("/");p="/"+h.replace(/^\//,"").split("/").slice(b.length).join("/")}let m=ige(e,{pathname:p});ec(c||m!=null,`No routes matched location "${f.pathname}${f.search}${f.hash}" `),ec(m==null||m[m.length-1].route.element!==void 0||m[m.length-1].route.Component!==void 0||m[m.length-1].route.lazy!==void 0,`Matched leaf route at location "${f.pathname}${f.search}${f.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let y=Vje(m&&m.map(b=>Object.assign({},b,{params:Object.assign({},a,b.params),pathname:lp([l,i.encodeLocation?i.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?l:lp([l,i.encodeLocation?i.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),s,n,r);return t&&y?D.createElement(ZC.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...f},navigationType:"POP"}},y):y}function Bje(){let e=Yje(),t=Pje(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=D.createElement(D.Fragment,null,D.createElement("p",null," Hey developer "),D.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",D.createElement("code",{style:s},"ErrorBoundary")," or"," ",D.createElement("code",{style:s},"errorElement")," prop on your route.")),D.createElement(D.Fragment,null,D.createElement("h2",null,"Unexpected Application Error!"),D.createElement("h3",{style:{fontStyle:"italic"}},t),n?D.createElement("pre",{style:i},n):null,o)}var jje=D.createElement(Bje,null),zje=class extends D.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?D.createElement(dc.Provider,{value:this.props.routeContext},D.createElement(KV.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Uje({routeContext:e,match:t,children:n}){let r=D.useContext(jw);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),D.createElement(dc.Provider,{value:e},n)}function Vje(e,t=[],n=null,r=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let i=e,s=n==null?void 0:n.errors;if(s!=null){let u=i.findIndex(l=>l.route.id&&(s==null?void 0:s[l.route.id])!==void 0);hi(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),i=i.slice(0,Math.min(i.length,u+1))}let o=!1,a=-1;if(n)for(let u=0;u<i.length;u++){let l=i[u];if((l.route.HydrateFallback||l.route.hydrateFallbackElement)&&(a=u),l.route.id){let{loaderData:c,errors:d}=n,f=l.route.loader&&!c.hasOwnProperty(l.route.id)&&(!d||d[l.route.id]===void 0);if(l.route.lazy||f){o=!0,a>=0?i=i.slice(0,a+1):i=[i[0]];break}}}return i.reduceRight((u,l,c)=>{let d,f=!1,h=null,p=null;n&&(d=s&&l.route.id?s[l.route.id]:void 0,h=l.route.errorElement||jje,o&&(a<0&&c===0?(hge("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),f=!0,p=null):a===c&&(f=!0,p=l.route.hydrateFallbackElement||null)));let m=t.concat(i.slice(0,c+1)),y=()=>{let v;return d?v=h:f?v=p:l.route.Component?v=D.createElement(l.route.Component,null):l.route.element?v=l.route.element:v=u,D.createElement(Uje,{match:l,routeContext:{outlet:u,matches:m,isDataRoute:n!=null},children:v})};return n&&(l.route.ErrorBoundary||l.route.errorElement||c===0)?D.createElement(zje,{location:n.location,revalidation:n.revalidation,component:h,error:d,children:y(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):y()},null)}function QV(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Hje(e){let t=D.useContext(jw);return hi(t,QV(e)),t}function qje(e){let t=D.useContext(Y4);return hi(t,QV(e)),t}function Wje(e){let t=D.useContext(dc);return hi(t,QV(e)),t}function JV(e){let t=Wje(e),n=t.matches[t.matches.length-1];return hi(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function Gje(){return JV("useRouteId")}function Yje(){var r;let e=D.useContext(KV),t=qje("useRouteError"),n=JV("useRouteError");return e!==void 0?e:(r=t.errors)==null?void 0:r[n]}function Kje(){let{router:e}=Hje("useNavigate"),t=JV("useNavigate"),n=D.useRef(!1);return cge(()=>{n.current=!0}),D.useCallback(async(i,s={})=>{ec(n.current,lge),n.current&&(typeof i=="number"?e.navigate(i):await e.navigate(i,{fromRouteId:t,...s}))},[e,t])}var Ote={};function hge(e,t,n){!t&&!Ote[e]&&(Ote[e]=!0,ec(!1,n))}D.memo(Xje);function Xje({routes:e,future:t,state:n}){return fge(e,void 0,n,t)}function ZV({to:e,replace:t,state:n,relative:r}){hi(zw(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=D.useContext(xd);ec(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=D.useContext(dc),{pathname:o}=fc(),a=Cl(),u=YV(e,GV(s),o,r==="path"),l=JSON.stringify(u);return D.useEffect(()=>{a(JSON.parse(l),{replace:t,state:n,relative:r})},[a,l,r,t,n]),null}function Qje(e){return Fje(e.context)}function oy(e){hi(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Jje({basename:e="/",children:t=null,location:n,navigationType:r="POP",navigator:i,static:s=!1}){hi(!zw(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=e.replace(/^\/*/,"/"),a=D.useMemo(()=>({basename:o,navigator:i,static:s,future:{}}),[o,i,s]);typeof n=="string"&&(n=Bw(n));let{pathname:u="/",search:l="",hash:c="",state:d=null,key:f="default"}=n,h=D.useMemo(()=>{let p=_0(u,o);return p==null?null:{location:{pathname:p,search:l,hash:c,state:d,key:f},navigationType:r}},[o,u,l,c,d,f,r]);return ec(h!=null,`<Router basename="${o}"> is not able to match the URL "${u}${l}${c}" because it does not start with the basename, so the <Router> won't render anything.`),h==null?null:D.createElement(xd.Provider,{value:a},D.createElement(ZC.Provider,{children:t,value:h}))}function Zje({children:e,location:t}){return dge(Y9(e),t)}function Y9(e,t=[]){let n=[];return D.Children.forEach(e,(r,i)=>{if(!D.isValidElement(r))return;let s=[...t,i];if(r.type===D.Fragment){n.push.apply(n,Y9(r.props.children,s));return}hi(r.type===oy,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),hi(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Y9(r.props.children,s)),n.push(o)}),n}var HR="get",qR="application/x-www-form-urlencoded";function K4(e){return e!=null&&typeof e.tagName=="string"}function e7e(e){return K4(e)&&e.tagName.toLowerCase()==="button"}function t7e(e){return K4(e)&&e.tagName.toLowerCase()==="form"}function n7e(e){return K4(e)&&e.tagName.toLowerCase()==="input"}function r7e(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function i7e(e,t){return e.button===0&&(!t||t==="_self")&&!r7e(e)}function K9(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function s7e(e,t){let n=K9(e);return t&&t.forEach((r,i)=>{n.has(i)||t.getAll(i).forEach(s=>{n.append(i,s)})}),n}var $k=null;function o7e(){if($k===null)try{new FormData(document.createElement("form"),0),$k=!1}catch{$k=!0}return $k}var a7e=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function f8(e){return e!=null&&!a7e.has(e)?(ec(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${qR}"`),null):e}function u7e(e,t){let n,r,i,s,o;if(t7e(e)){let a=e.getAttribute("action");r=a?_0(a,t):null,n=e.getAttribute("method")||HR,i=f8(e.getAttribute("enctype"))||qR,s=new FormData(e)}else if(e7e(e)||n7e(e)&&(e.type==="submit"||e.type==="image")){let a=e.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=e.getAttribute("formaction")||a.getAttribute("action");if(r=u?_0(u,t):null,n=e.getAttribute("formmethod")||a.getAttribute("method")||HR,i=f8(e.getAttribute("formenctype"))||f8(a.getAttribute("enctype"))||qR,s=new FormData(a,e),!o7e()){let{name:l,type:c,value:d}=e;if(c==="image"){let f=l?`${l}.`:"";s.append(`${f}x`,"0"),s.append(`${f}y`,"0")}else l&&s.append(l,d)}}else{if(K4(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=HR,r=null,i=qR,o=e}return s&&i==="text/plain"&&(o=s,s=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:s,body:o}}function eH(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}async function l7e(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function c7e(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function d7e(e,t,n){let r=await Promise.all(e.map(async i=>{let s=t.routes[i.route.id];if(s){let o=await l7e(s,n);return o.links?o.links():[]}return[]}));return m7e(r.flat(1).filter(c7e).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function $te(e,t,n,r,i,s){let o=(u,l)=>n[l]?u.route.id!==n[l].route.id:!0,a=(u,l)=>{var c;return n[l].pathname!==u.pathname||((c=n[l].route.path)==null?void 0:c.endsWith("*"))&&n[l].params["*"]!==u.params["*"]};return s==="assets"?t.filter((u,l)=>o(u,l)||a(u,l)):s==="data"?t.filter((u,l)=>{var d;let c=r.routes[u.route.id];if(!c||!c.hasLoader)return!1;if(o(u,l)||a(u,l))return!0;if(u.route.shouldRevalidate){let f=u.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((d=n[0])==null?void 0:d.params)||{},nextUrl:new URL(e,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function f7e(e,t){return h7e(e.map(n=>{let r=t.routes[n.route.id];if(!r)return[];let i=[r.module];return r.imports&&(i=i.concat(r.imports)),i}).flat(1))}function h7e(e){return[...new Set(e)]}function p7e(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}function m7e(e,t){let n=new Set;return new Set(t),e.reduce((r,i)=>{let s=JSON.stringify(p7e(i));return n.has(s)||(n.add(s),r.push({key:s,link:i})),r},[])}function g7e(e){let t=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return t.pathname==="/"?t.pathname="_root.data":t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function y7e(){let e=D.useContext(jw);return eH(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function b7e(){let e=D.useContext(Y4);return eH(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var tH=D.createContext(void 0);tH.displayName="FrameworkContext";function pge(){let e=D.useContext(tH);return eH(e,"You must render this element inside a <HydratedRouter> element"),e}function v7e(e,t){let n=D.useContext(tH),[r,i]=D.useState(!1),[s,o]=D.useState(!1),{onFocus:a,onBlur:u,onMouseEnter:l,onMouseLeave:c,onTouchStart:d}=t,f=D.useRef(null);D.useEffect(()=>{if(e==="render"&&o(!0),e==="viewport"){let m=v=>{v.forEach(b=>{o(b.isIntersecting)})},y=new IntersectionObserver(m,{threshold:.5});return f.current&&y.observe(f.current),()=>{y.disconnect()}}},[e]),D.useEffect(()=>{if(r){let m=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(m)}}},[r]);let h=()=>{i(!0)},p=()=>{i(!1),o(!1)};return n?e!=="intent"?[s,f,{}]:[s,f,{onFocus:c_(a,h),onBlur:c_(u,p),onMouseEnter:c_(l,h),onMouseLeave:c_(c,p),onTouchStart:c_(d,h)}]:[!1,f,{}]}function c_(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function x7e({page:e,...t}){let{router:n}=y7e(),r=D.useMemo(()=>ige(n.routes,e,n.basename),[n.routes,e,n.basename]);return r?D.createElement(E7e,{page:e,matches:r,...t}):null}function w7e(e){let{manifest:t,routeModules:n}=pge(),[r,i]=D.useState([]);return D.useEffect(()=>{let s=!1;return d7e(e,t,n).then(o=>{s||i(o)}),()=>{s=!0}},[e,t,n]),r}function E7e({page:e,matches:t,...n}){let r=fc(),{manifest:i,routeModules:s}=pge(),{loaderData:o,matches:a}=b7e(),u=D.useMemo(()=>$te(e,t,a,i,r,"data"),[e,t,a,i,r]),l=D.useMemo(()=>$te(e,t,a,i,r,"assets"),[e,t,a,i,r]),c=D.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let h=new Set,p=!1;if(t.forEach(y=>{var b;let v=i.routes[y.route.id];!v||!v.hasLoader||(!u.some(w=>w.route.id===y.route.id)&&y.route.id in o&&((b=s[y.route.id])!=null&&b.shouldRevalidate)||v.hasClientLoader?p=!0:h.add(y.route.id))}),h.size===0)return[];let m=g7e(e);return p&&h.size>0&&m.searchParams.set("_routes",t.filter(y=>h.has(y.route.id)).map(y=>y.route.id).join(",")),[m.pathname+m.search]},[o,r,i,u,t,e,s]),d=D.useMemo(()=>f7e(l,i),[l,i]),f=w7e(l);return D.createElement(D.Fragment,null,c.map(h=>D.createElement("link",{key:h,rel:"prefetch",as:"fetch",href:h,...n})),d.map(h=>D.createElement("link",{key:h,rel:"modulepreload",href:h,...n})),f.map(({key:h,link:p})=>D.createElement("link",{key:h,...p})))}function _7e(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var mge=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{mge&&(window.__reactRouterVersion="7.1.3")}catch{}function T7e({basename:e,children:t,window:n}){let r=D.useRef();r.current==null&&(r.current=cje({window:n,v5Compat:!0}));let i=r.current,[s,o]=D.useState({action:i.action,location:i.location}),a=D.useCallback(u=>{D.startTransition(()=>o(u))},[o]);return D.useLayoutEffect(()=>i.listen(a),[i,a]),D.createElement(Jje,{basename:e,children:t,location:s.location,navigationType:s.action,navigator:i})}var gge=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,yge=D.forwardRef(function({onClick:t,discover:n="render",prefetch:r="none",relative:i,reloadDocument:s,replace:o,state:a,target:u,to:l,preventScrollReset:c,viewTransition:d,...f},h){let{basename:p}=D.useContext(xd),m=typeof l=="string"&&gge.test(l),y,v=!1;if(typeof l=="string"&&m&&(y=l,mge))try{let R=new URL(window.location.href),N=l.startsWith("//")?new URL(R.protocol+l):new URL(l),O=_0(N.pathname,p);N.origin===R.origin&&O!=null?l=O+N.search+N.hash:v=!0}catch{ec(!1,`<Link to="${l}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let b=XV(l,{relative:i}),[w,E,_]=v7e(r,f),C=k7e(l,{replace:o,state:a,target:u,preventScrollReset:c,relative:i,viewTransition:d});function S(R){t&&t(R),R.defaultPrevented||C(R)}let k=D.createElement("a",{...f,..._,href:y||b,onClick:v||s?t:S,ref:_7e(h,E),target:u,"data-discover":!m&&n==="render"?"true":void 0});return w&&!m?D.createElement(D.Fragment,null,k,D.createElement(x7e,{page:b})):k});yge.displayName="Link";var C7e=D.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:r="",end:i=!1,style:s,to:o,viewTransition:a,children:u,...l},c){let d=eS(o,{relative:l.relative}),f=fc(),h=D.useContext(Y4),{navigator:p,basename:m}=D.useContext(xd),y=h!=null&&N7e(d)&&a===!0,v=p.encodeLocation?p.encodeLocation(d).pathname:d.pathname,b=f.pathname,w=h&&h.navigation&&h.navigation.location?h.navigation.location.pathname:null;n||(b=b.toLowerCase(),w=w?w.toLowerCase():null,v=v.toLowerCase()),w&&m&&(w=_0(w,m)||w);const E=v!=="/"&&v.endsWith("/")?v.length-1:v.length;let _=b===v||!i&&b.startsWith(v)&&b.charAt(E)==="/",C=w!=null&&(w===v||!i&&w.startsWith(v)&&w.charAt(v.length)==="/"),S={isActive:_,isPending:C,isTransitioning:y},k=_?t:void 0,R;typeof r=="function"?R=r(S):R=[r,_?"active":null,C?"pending":null,y?"transitioning":null].filter(Boolean).join(" ");let N=typeof s=="function"?s(S):s;return D.createElement(yge,{...l,"aria-current":k,className:R,ref:c,style:N,to:o,viewTransition:a},typeof u=="function"?u(S):u)});C7e.displayName="NavLink";var S7e=D.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:r,replace:i,state:s,method:o=HR,action:a,onSubmit:u,relative:l,preventScrollReset:c,viewTransition:d,...f},h)=>{let p=D7e(),m=P7e(a,{relative:l}),y=o.toLowerCase()==="get"?"get":"post",v=typeof a=="string"&&gge.test(a),b=w=>{if(u&&u(w),w.defaultPrevented)return;w.preventDefault();let E=w.nativeEvent.submitter,_=(E==null?void 0:E.getAttribute("formmethod"))||o;p(E||w.currentTarget,{fetcherKey:t,method:_,navigate:n,replace:i,state:s,relative:l,preventScrollReset:c,viewTransition:d})};return D.createElement("form",{ref:h,method:y,action:m,onSubmit:r?u:b,...f,"data-discover":!v&&e==="render"?"true":void 0})});S7e.displayName="Form";function A7e(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function bge(e){let t=D.useContext(jw);return hi(t,A7e(e)),t}function k7e(e,{target:t,replace:n,state:r,preventScrollReset:i,relative:s,viewTransition:o}={}){let a=Cl(),u=fc(),l=eS(e,{relative:s});return D.useCallback(c=>{if(i7e(c,t)){c.preventDefault();let d=n!==void 0?n:I2(u)===I2(l);a(e,{replace:d,state:r,preventScrollReset:i,relative:s,viewTransition:o})}},[u,a,l,n,r,t,e,i,s,o])}function Zf(e){ec(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=D.useRef(K9(e)),n=D.useRef(!1),r=fc(),i=D.useMemo(()=>s7e(r.search,n.current?null:t.current),[r.search]),s=Cl(),o=D.useCallback((a,u)=>{const l=K9(typeof a=="function"?a(i):a);n.current=!0,s("?"+l,u)},[s,i]);return[i,o]}var I7e=0,R7e=()=>`__${String(++I7e)}__`;function D7e(){let{router:e}=bge("useSubmit"),{basename:t}=D.useContext(xd),n=Gje();return D.useCallback(async(r,i={})=>{let{action:s,method:o,encType:a,formData:u,body:l}=u7e(r,t);if(i.navigate===!1){let c=i.fetcherKey||R7e();await e.fetch(c,n,i.action||s,{preventScrollReset:i.preventScrollReset,formData:u,body:l,formMethod:i.method||o,formEncType:i.encType||a,flushSync:i.flushSync})}else await e.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:u,body:l,formMethod:i.method||o,formEncType:i.encType||a,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[e,t,n])}function P7e(e,{relative:t}={}){let{basename:n}=D.useContext(xd),r=D.useContext(dc);hi(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),s={...eS(e||".",{relative:t})},o=fc();if(e==null){s.search=o.search;let a=new URLSearchParams(s.search),u=a.getAll("index");if(u.some(c=>c==="")){a.delete("index"),u.filter(d=>d).forEach(d=>a.append("index",d));let c=a.toString();s.search=c?`?${c}`:""}}return(!e||e===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(s.pathname=s.pathname==="/"?n:lp([n,s.pathname])),I2(s)}function N7e(e,t={}){let n=D.useContext(uge);hi(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=bge("useViewTransitionState"),i=eS(e,{relative:t.relative});if(!n.isTransitioning)return!1;let s=_0(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=_0(n.nextLocation.pathname,r)||n.nextLocation.pathname;return MP(i.pathname,o)!=null||MP(i.pathname,s)!=null}new TextEncoder;const nH=D.createContext(null);nH.displayName="@mantine/modals/ModalsContext";function O7e(){const e=D.useContext(nH);if(!e)throw new Error("[@mantine/modals] useModals hook was called outside of context, wrap your app with ModalsProvider component");return e}function $7e({id:e,cancelProps:t,confirmProps:n,labels:r={cancel:"",confirm:""},closeOnConfirm:i=!0,closeOnCancel:s=!0,groupProps:o,onCancel:a,onConfirm:u,children:l}){const{cancel:c,confirm:d}=r,f=O7e(),h=m=>{typeof(t==null?void 0:t.onClick)=="function"&&(t==null||t.onClick(m)),typeof a=="function"&&a(),s&&f.closeModal(e)},p=m=>{typeof(n==null?void 0:n.onClick)=="function"&&(n==null||n.onClick(m)),typeof u=="function"&&u(),i&&f.closeModal(e)};return T.jsxs(T.Fragment,{children:[l&&T.jsx(Se,{mb:"md",children:l}),T.jsxs(Ti,{mt:l?0:"md",justify:"flex-end",...o,children:[T.jsx(tn,{variant:"default",...t,onClick:h,children:(t==null?void 0:t.children)||c}),T.jsx(tn,{...n,onClick:p,children:(n==null?void 0:n.children)||d})]})]})}const[M7e,rH]=FOe("mantine-modals"),Mte=e=>{const t=e.modalId||Gv();return rH("openConfirmModal")({...e,modalId:t}),t};rH("closeModal");rH("closeAllModals");function Lte(e,t){var n,r,i,s;t&&e.type==="confirm"&&((r=(n=e.props).onCancel)==null||r.call(n)),(s=(i=e.props).onClose)==null||s.call(i)}function L7e(e,t){var n;switch(t.type){case"OPEN":return{current:t.modal,modals:[...e.modals,t.modal]};case"CLOSE":{const r=e.modals.find(s=>s.id===t.modalId);if(!r)return e;Lte(r,t.canceled);const i=e.modals.filter(s=>s.id!==t.modalId);return{current:i[i.length-1]||e.current,modals:i}}case"CLOSE_ALL":return e.modals.length?(e.modals.concat().reverse().forEach(r=>{Lte(r,t.canceled)}),{current:e.current,modals:[]}):e;case"UPDATE":{const{modalId:r,newProps:i}=t,s=e.modals.map(a=>a.id!==r?a:a.type==="content"||a.type==="confirm"?{...a,props:{...a.props,...i}}:a.type==="context"?{...a,props:{...a.props,...i,innerProps:{...a.props.innerProps,...i.innerProps}}}:a),o=((n=e.current)==null?void 0:n.id)===r&&s.find(a=>a.id===r)||e.current;return{...e,modals:s,current:o}}default:return e}}function F7e(e){if(!e)return{confirmProps:{},modalProps:{}};const{id:t,children:n,onCancel:r,onConfirm:i,closeOnConfirm:s,closeOnCancel:o,cancelProps:a,confirmProps:u,groupProps:l,labels:c,...d}=e;return{confirmProps:{id:t,children:n,onCancel:r,onConfirm:i,closeOnConfirm:s,closeOnCancel:o,cancelProps:a,confirmProps:u,groupProps:l,labels:c},modalProps:{id:t,...d}}}function B7e({children:e,modalProps:t,labels:n,modals:r}){const[i,s]=D.useReducer(L7e,{modals:[],current:null}),o=D.useRef(i);o.current=i;const a=D.useCallback(b=>{s({type:"CLOSE_ALL",canceled:b})},[o,s]),u=D.useCallback(({modalId:b,...w})=>{const E=b||Gv();return s({type:"OPEN",modal:{id:E,type:"content",props:w}}),E},[s]),l=D.useCallback(({modalId:b,...w})=>{const E=b||Gv();return s({type:"OPEN",modal:{id:E,type:"confirm",props:w}}),E},[s]),c=D.useCallback((b,{modalId:w,...E})=>{const _=w||Gv();return s({type:"OPEN",modal:{id:_,type:"context",props:E,ctx:b}}),_},[s]),d=D.useCallback((b,w)=>{s({type:"CLOSE",modalId:b,canceled:w})},[o,s]),f=D.useCallback(({modalId:b,...w})=>{s({type:"UPDATE",modalId:b,newProps:w})},[s]),h=D.useCallback(({modalId:b,...w})=>{s({type:"UPDATE",modalId:b,newProps:w})},[s]);M7e({openModal:u,openConfirmModal:l,openContextModal:({modal:b,...w})=>c(b,w),closeModal:d,closeContextModal:d,closeAllModals:a,updateModal:f,updateContextModal:h});const p={modalProps:t||{},modals:i.modals,openModal:u,openConfirmModal:l,openContextModal:c,closeModal:d,closeContextModal:d,closeAll:a,updateModal:f,updateContextModal:h},m=()=>{const b=o.current.current;switch(b==null?void 0:b.type){case"context":{const{innerProps:w,...E}=b.props,_=r[b.ctx];return{modalProps:E,content:T.jsx(_,{innerProps:w,context:p,id:b.id})}}case"confirm":{const{modalProps:w,confirmProps:E}=F7e(b.props);return{modalProps:w,content:T.jsx($7e,{...E,id:b.id,labels:b.props.labels||n})}}case"content":{const{children:w,...E}=b.props;return{modalProps:E,content:w}}default:return{modalProps:{},content:null}}},{modalProps:y,content:v}=m();return T.jsxs(nH.Provider,{value:p,children:[T.jsx(Ei,{zIndex:so("modal")+1,...t,...y,opened:i.modals.length>0,onClose:()=>{var b;return d((b=i.current)==null?void 0:b.id)},children:v}),e]})}/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var j7e={outline:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},filled:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",stroke:"none"}};/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const gn=(e,t,n,r)=>{const i=D.forwardRef(({color:s="currentColor",size:o=24,stroke:a=2,title:u,className:l,children:c,...d},f)=>D.createElement("svg",{ref:f,...j7e[e],width:o,height:o,className:["tabler-icon",`tabler-icon-${t}`,l].join(" "),...e==="filled"?{fill:s}:{strokeWidth:a,stroke:s},...d},[u&&D.createElement("title",{key:"svg-title"},u),...r.map(([h,p])=>D.createElement(h,p)),...Array.isArray(c)?c:[c]]));return i.displayName=`${n}`,i};/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var z7e=gn("outline","adjustments-horizontal","IconAdjustmentsHorizontal",[["path",{d:"M14 6m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-0"}],["path",{d:"M4 6l8 0",key:"svg-1"}],["path",{d:"M16 6l4 0",key:"svg-2"}],["path",{d:"M8 12m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-3"}],["path",{d:"M4 12l2 0",key:"svg-4"}],["path",{d:"M10 12l10 0",key:"svg-5"}],["path",{d:"M17 18m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-6"}],["path",{d:"M4 18l11 0",key:"svg-7"}],["path",{d:"M19 18l1 0",key:"svg-8"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var U7e=gn("outline","alert-circle","IconAlertCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 8v4",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var zT=gn("outline","alert-triangle","IconAlertTriangle",[["path",{d:"M12 9v4",key:"svg-0"}],["path",{d:"M10.363 3.591l-8.106 13.534a1.914 1.914 0 0 0 1.636 2.871h16.214a1.914 1.914 0 0 0 1.636 -2.87l-8.106 -13.536a1.914 1.914 0 0 0 -3.274 0z",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Fte=gn("outline","arrow-left","IconArrowLeft",[["path",{d:"M5 12l14 0",key:"svg-0"}],["path",{d:"M5 12l6 6",key:"svg-1"}],["path",{d:"M5 12l6 -6",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Bte=gn("outline","arrow-right","IconArrowRight",[["path",{d:"M5 12l14 0",key:"svg-0"}],["path",{d:"M13 18l6 -6",key:"svg-1"}],["path",{d:"M13 6l6 6",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var V7e=gn("outline","arrows-shuffle","IconArrowsShuffle",[["path",{d:"M18 4l3 3l-3 3",key:"svg-0"}],["path",{d:"M18 20l3 -3l-3 -3",key:"svg-1"}],["path",{d:"M3 7h3a5 5 0 0 1 5 5a5 5 0 0 0 5 5h5",key:"svg-2"}],["path",{d:"M21 7h-5a4.978 4.978 0 0 0 -3 1m-4 8a4.984 4.984 0 0 1 -3 1h-3",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var H7e=gn("outline","at","IconAt",[["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-0"}],["path",{d:"M16 12v1.5a2.5 2.5 0 0 0 5 0v-1.5a9 9 0 1 0 -5.5 8.28",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var q7e=gn("outline","brain","IconBrain",[["path",{d:"M15.5 13a3.5 3.5 0 0 0 -3.5 3.5v1a3.5 3.5 0 0 0 7 0v-1.8",key:"svg-0"}],["path",{d:"M8.5 13a3.5 3.5 0 0 1 3.5 3.5v1a3.5 3.5 0 0 1 -7 0v-1.8",key:"svg-1"}],["path",{d:"M17.5 16a3.5 3.5 0 0 0 0 -7h-.5",key:"svg-2"}],["path",{d:"M19 9.3v-2.8a3.5 3.5 0 0 0 -7 0",key:"svg-3"}],["path",{d:"M6.5 16a3.5 3.5 0 0 1 0 -7h.5",key:"svg-4"}],["path",{d:"M5 9.3v-2.8a3.5 3.5 0 0 1 7 0v10",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var W7e=gn("outline","brand-python","IconBrandPython",[["path",{d:"M12 9h-7a2 2 0 0 0 -2 2v4a2 2 0 0 0 2 2h3",key:"svg-0"}],["path",{d:"M12 15h7a2 2 0 0 0 2 -2v-4a2 2 0 0 0 -2 -2h-3",key:"svg-1"}],["path",{d:"M8 9v-4a2 2 0 0 1 2 -2h4a2 2 0 0 1 2 2v5a2 2 0 0 1 -2 2h-4a2 2 0 0 0 -2 2v5a2 2 0 0 0 2 2h4a2 2 0 0 0 2 -2v-4",key:"svg-2"}],["path",{d:"M11 6l0 .01",key:"svg-3"}],["path",{d:"M13 18l0 .01",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var G7e=gn("outline","bubble-text","IconBubbleText",[["path",{d:"M7 10h10",key:"svg-0"}],["path",{d:"M9 14h5",key:"svg-1"}],["path",{d:"M12.4 3a5.34 5.34 0 0 1 4.906 3.239a5.333 5.333 0 0 1 -1.195 10.6a4.26 4.26 0 0 1 -5.28 1.863l-3.831 2.298v-3.134a2.668 2.668 0 0 1 -1.795 -3.773a4.8 4.8 0 0 1 2.908 -8.933a5.33 5.33 0 0 1 4.287 -2.16",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Y7e=gn("outline","chart-donut-2","IconChartDonut2",[["path",{d:"M12 3v5m4 4h5",key:"svg-0"}],["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-1"}],["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var vge=gn("outline","chart-histogram","IconChartHistogram",[["path",{d:"M3 3v18h18",key:"svg-0"}],["path",{d:"M20 18v3",key:"svg-1"}],["path",{d:"M16 16v5",key:"svg-2"}],["path",{d:"M12 13v8",key:"svg-3"}],["path",{d:"M8 16v5",key:"svg-4"}],["path",{d:"M3 11c6 0 5 -5 9 -5s3 5 9 5",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var tS=gn("outline","check","IconCheck",[["path",{d:"M5 12l5 5l10 -10",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var K7e=gn("outline","chevron-down","IconChevronDown",[["path",{d:"M6 9l6 6l6 -6",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var X7e=gn("outline","code-plus","IconCodePlus",[["path",{d:"M9 12h6",key:"svg-0"}],["path",{d:"M12 9v6",key:"svg-1"}],["path",{d:"M6 19a2 2 0 0 1 -2 -2v-4l-1 -1l1 -1v-4a2 2 0 0 1 2 -2",key:"svg-2"}],["path",{d:"M18 19a2 2 0 0 0 2 -2v-4l1 -1l-1 -1v-4a2 2 0 0 0 -2 -2",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Q7e=gn("outline","database-export","IconDatabaseExport",[["path",{d:"M4 6c0 1.657 3.582 3 8 3s8 -1.343 8 -3s-3.582 -3 -8 -3s-8 1.343 -8 3",key:"svg-0"}],["path",{d:"M4 6v6c0 1.657 3.582 3 8 3c1.118 0 2.183 -.086 3.15 -.241",key:"svg-1"}],["path",{d:"M20 12v-6",key:"svg-2"}],["path",{d:"M4 12v6c0 1.657 3.582 3 8 3c.157 0 .312 -.002 .466 -.005",key:"svg-3"}],["path",{d:"M16 19h6",key:"svg-4"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var J7e=gn("outline","dots-vertical","IconDotsVertical",[["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M12 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Z7e=gn("outline","dots","IconDots",[["path",{d:"M5 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M19 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var xge=gn("outline","external-link","IconExternalLink",[["path",{d:"M12 6h-6a2 2 0 0 0 -2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-6",key:"svg-0"}],["path",{d:"M11 13l9 -9",key:"svg-1"}],["path",{d:"M15 4h5v5",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var eze=gn("outline","hourglass-empty","IconHourglassEmpty",[["path",{d:"M6 20v-2a6 6 0 1 1 12 0v2a1 1 0 0 1 -1 1h-10a1 1 0 0 1 -1 -1z",key:"svg-0"}],["path",{d:"M6 4v2a6 6 0 1 0 12 0v-2a1 1 0 0 0 -1 -1h-10a1 1 0 0 0 -1 1z",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var tze=gn("outline","html","IconHtml",[["path",{d:"M13 16v-8l2 5l2 -5v8",key:"svg-0"}],["path",{d:"M1 16v-8",key:"svg-1"}],["path",{d:"M5 8v8",key:"svg-2"}],["path",{d:"M1 12h4",key:"svg-3"}],["path",{d:"M7 8h4",key:"svg-4"}],["path",{d:"M9 8v8",key:"svg-5"}],["path",{d:"M20 8v8h3",key:"svg-6"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var iH=gn("outline","info-circle","IconInfoCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 9h.01",key:"svg-1"}],["path",{d:"M11 12h1v4h1",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var nze=gn("outline","layout-columns","IconLayoutColumns",[["path",{d:"M4 4m0 2a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M12 4l0 16",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var wge=gn("outline","list-check","IconListCheck",[["path",{d:"M3.5 5.5l1.5 1.5l2.5 -2.5",key:"svg-0"}],["path",{d:"M3.5 11.5l1.5 1.5l2.5 -2.5",key:"svg-1"}],["path",{d:"M3.5 17.5l1.5 1.5l2.5 -2.5",key:"svg-2"}],["path",{d:"M11 6l9 0",key:"svg-3"}],["path",{d:"M11 12l9 0",key:"svg-4"}],["path",{d:"M11 18l9 0",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var rze=gn("outline","mail","IconMail",[["path",{d:"M3 7a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-10z",key:"svg-0"}],["path",{d:"M3 7l9 6l9 -6",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ize=gn("outline","number-123","IconNumber123",[["path",{d:"M3 10l2 -2v8",key:"svg-0"}],["path",{d:"M9 8h3a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 0 -1 1v2a1 1 0 0 0 1 1h3",key:"svg-1"}],["path",{d:"M17 8h2.5a1.5 1.5 0 0 1 1.5 1.5v1a1.5 1.5 0 0 1 -1.5 1.5h-1.5h1.5a1.5 1.5 0 0 1 1.5 1.5v1a1.5 1.5 0 0 1 -1.5 1.5h-2.5",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var sze=gn("outline","package-import","IconPackageImport",[["path",{d:"M12 21l-8 -4.5v-9l8 -4.5l8 4.5v4.5",key:"svg-0"}],["path",{d:"M12 12l8 -4.5",key:"svg-1"}],["path",{d:"M12 12v9",key:"svg-2"}],["path",{d:"M12 12l-8 -4.5",key:"svg-3"}],["path",{d:"M22 18h-7",key:"svg-4"}],["path",{d:"M18 15l-3 3l3 3",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var oze=gn("outline","pencil","IconPencil",[["path",{d:"M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4",key:"svg-0"}],["path",{d:"M13.5 6.5l4 4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var aze=gn("outline","player-play","IconPlayerPlay",[["path",{d:"M7 4v16l13 -8z",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ege=gn("outline","progress","IconProgress",[["path",{d:"M10 20.777a8.942 8.942 0 0 1 -2.48 -.969",key:"svg-0"}],["path",{d:"M14 3.223a9.003 9.003 0 0 1 0 17.554",key:"svg-1"}],["path",{d:"M4.579 17.093a8.961 8.961 0 0 1 -1.227 -2.592",key:"svg-2"}],["path",{d:"M3.124 10.5c.16 -.95 .468 -1.85 .9 -2.675l.169 -.305",key:"svg-3"}],["path",{d:"M6.907 4.579a8.954 8.954 0 0 1 3.093 -1.356",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var uze=gn("outline","radio","IconRadio",[["path",{d:"M14 3l-9.371 3.749a1 1 0 0 0 -.629 .928v11.323a1 1 0 0 0 1 1h14a1 1 0 0 0 1 -1v-11a1 1 0 0 0 -1 -1h-14.5",key:"svg-0"}],["path",{d:"M4 12h16",key:"svg-1"}],["path",{d:"M7 12v-2",key:"svg-2"}],["path",{d:"M17 16v.01",key:"svg-3"}],["path",{d:"M13 16v.01",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var lze=gn("outline","refresh","IconRefresh",[["path",{d:"M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4",key:"svg-0"}],["path",{d:"M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var cze=gn("outline","schema","IconSchema",[["path",{d:"M5 2h5v4h-5z",key:"svg-0"}],["path",{d:"M15 10h5v4h-5z",key:"svg-1"}],["path",{d:"M5 18h5v4h-5z",key:"svg-2"}],["path",{d:"M5 10h5v4h-5z",key:"svg-3"}],["path",{d:"M10 12h5",key:"svg-4"}],["path",{d:"M7.5 6v4",key:"svg-5"}],["path",{d:"M7.5 14v4",key:"svg-6"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var dze=gn("outline","search","IconSearch",[["path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0",key:"svg-0"}],["path",{d:"M21 21l-6 -6",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var fze=gn("outline","select","IconSelect",[["path",{d:"M3 3m0 2a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M9 11l3 3l3 -3",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var _ge=gn("outline","settings","IconSettings",[["path",{d:"M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z",key:"svg-0"}],["path",{d:"M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var hze=gn("outline","squares","IconSquares",[["path",{d:"M8 10a2 2 0 0 1 2 -2h9a2 2 0 0 1 2 2v9a2 2 0 0 1 -2 2h-9a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M16 8v-3a2 2 0 0 0 -2 -2h-9a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h3",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Tge=gn("outline","table-export","IconTableExport",[["path",{d:"M12.5 21h-7.5a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v7.5",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}],["path",{d:"M16 19h6",key:"svg-3"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var pze=gn("outline","table","IconTable",[["path",{d:"M3 5a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-14z",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Cge=gn("outline","trash-x","IconTrashX",[["path",{d:"M4 7h16",key:"svg-0"}],["path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12",key:"svg-1"}],["path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3",key:"svg-2"}],["path",{d:"M10 12l4 4m0 -4l-4 4",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var sH=gn("outline","user-plus","IconUserPlus",[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M16 19h6",key:"svg-1"}],["path",{d:"M19 16v6",key:"svg-2"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var jte=gn("outline","user","IconUser",[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Uw=gn("outline","x","IconX",[["path",{d:"M18 6l-12 12",key:"svg-0"}],["path",{d:"M6 6l12 12",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var mze=gn("filled","brand-google-filled","IconBrandGoogleFilled",[["path",{d:"M12 2a9.96 9.96 0 0 1 6.29 2.226a1 1 0 0 1 .04 1.52l-1.51 1.362a1 1 0 0 1 -1.265 .06a6 6 0 1 0 2.103 6.836l.001 -.004h-3.66a1 1 0 0 1 -.992 -.883l-.007 -.117v-2a1 1 0 0 1 1 -1h6.945a1 1 0 0 1 .994 .89c.04 .367 .061 .737 .061 1.11c0 5.523 -4.477 10 -10 10s-10 -4.477 -10 -10s4.477 -10 10 -10z",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var gze=gn("filled","player-pause-filled","IconPlayerPauseFilled",[["path",{d:"M9 4h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h2a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2z",key:"svg-0"}],["path",{d:"M17 4h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h2a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2z",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var yze=gn("filled","player-play-filled","IconPlayerPlayFilled",[["path",{d:"M6 4v16a1 1 0 0 0 1.524 .852l13 -8a1 1 0 0 0 0 -1.704l-13 -8a1 1 0 0 0 -1.524 .852z",key:"svg-0"}]]);function Sge(e){const t=e.split("/")||[];return t[t.length-1].replace(/\.[^\.]+$/,"").replace(".","_").replace(" ","_").replace("/","_")}const rs="/revisit/";function zte(e){const t=[],n=String(e||"");let r=n.indexOf(","),i=0,s=!1;for(;!s;){r===-1&&(r=n.length,s=!0);const o=n.slice(i,r).trim();(o||!s)&&t.push(o),i=r+1,r=n.indexOf(",",i)}return t}function Age(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const bze=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,vze=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,xze={};function Ute(e,t){return(xze.jsx?vze:bze).test(e)}const wze=/[ \t\n\f\r]/g;function Eze(e){return typeof e=="object"?e.type==="text"?Vte(e.value):!1:Vte(e)}function Vte(e){return e.replace(wze,"")===""}class nS{constructor(t,n,r){this.property=t,this.normal=n,r&&(this.space=r)}}nS.prototype.property={};nS.prototype.normal={};nS.prototype.space=null;function kge(e,t){const n={},r={};let i=-1;for(;++i<e.length;)Object.assign(n,e[i].property),Object.assign(r,e[i].normal);return new nS(n,r,t)}function R2(e){return e.toLowerCase()}let hc=class{constructor(t,n){this.property=t,this.attribute=n}};hc.prototype.space=null;hc.prototype.boolean=!1;hc.prototype.booleanish=!1;hc.prototype.overloadedBoolean=!1;hc.prototype.number=!1;hc.prototype.commaSeparated=!1;hc.prototype.spaceSeparated=!1;hc.prototype.commaOrSpaceSeparated=!1;hc.prototype.mustUseProperty=!1;hc.prototype.defined=!1;let _ze=0;const Tn=q1(),es=q1(),Ige=q1(),yt=q1(),Kr=q1(),Qv=q1(),Ku=q1();function q1(){return 2**++_ze}const X9=Object.freeze(Object.defineProperty({__proto__:null,boolean:Tn,booleanish:es,commaOrSpaceSeparated:Ku,commaSeparated:Qv,number:yt,overloadedBoolean:Ige,spaceSeparated:Kr},Symbol.toStringTag,{value:"Module"})),h8=Object.keys(X9);class oH extends hc{constructor(t,n,r,i){let s=-1;if(super(t,n),Hte(this,"space",i),typeof r=="number")for(;++s<h8.length;){const o=h8[s];Hte(this,h8[s],(r&X9[o])===X9[o])}}}oH.prototype.defined=!0;function Hte(e,t,n){n&&(e[t]=n)}const Tze={}.hasOwnProperty;function Vw(e){const t={},n={};let r;for(r in e.properties)if(Tze.call(e.properties,r)){const i=e.properties[r],s=new oH(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),t[r]=s,n[R2(r)]=r,n[R2(s.attribute)]=r}return new nS(t,n,e.space)}const Rge=Vw({space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),Dge=Vw({space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function Pge(e,t){return t in e?e[t]:t}function Nge(e,t){return Pge(e,t.toLowerCase())}const Oge=Vw({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:Nge,properties:{xmlns:null,xmlnsXLink:null}}),$ge=Vw({transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:es,ariaAutoComplete:null,ariaBusy:es,ariaChecked:es,ariaColCount:yt,ariaColIndex:yt,ariaColSpan:yt,ariaControls:Kr,ariaCurrent:null,ariaDescribedBy:Kr,ariaDetails:null,ariaDisabled:es,ariaDropEffect:Kr,ariaErrorMessage:null,ariaExpanded:es,ariaFlowTo:Kr,ariaGrabbed:es,ariaHasPopup:null,ariaHidden:es,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Kr,ariaLevel:yt,ariaLive:null,ariaModal:es,ariaMultiLine:es,ariaMultiSelectable:es,ariaOrientation:null,ariaOwns:Kr,ariaPlaceholder:null,ariaPosInSet:yt,ariaPressed:es,ariaReadOnly:es,ariaRelevant:null,ariaRequired:es,ariaRoleDescription:Kr,ariaRowCount:yt,ariaRowIndex:yt,ariaRowSpan:yt,ariaSelected:es,ariaSetSize:yt,ariaSort:null,ariaValueMax:yt,ariaValueMin:yt,ariaValueNow:yt,ariaValueText:null,role:null}}),Cze=Vw({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:Nge,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Qv,acceptCharset:Kr,accessKey:Kr,action:null,allow:null,allowFullScreen:Tn,allowPaymentRequest:Tn,allowUserMedia:Tn,alt:null,as:null,async:Tn,autoCapitalize:null,autoComplete:Kr,autoFocus:Tn,autoPlay:Tn,blocking:Kr,capture:null,charSet:null,checked:Tn,cite:null,className:Kr,cols:yt,colSpan:null,content:null,contentEditable:es,controls:Tn,controlsList:Kr,coords:yt|Qv,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Tn,defer:Tn,dir:null,dirName:null,disabled:Tn,download:Ige,draggable:es,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Tn,formTarget:null,headers:Kr,height:yt,hidden:Tn,high:yt,href:null,hrefLang:null,htmlFor:Kr,httpEquiv:Kr,id:null,imageSizes:null,imageSrcSet:null,inert:Tn,inputMode:null,integrity:null,is:null,isMap:Tn,itemId:null,itemProp:Kr,itemRef:Kr,itemScope:Tn,itemType:Kr,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Tn,low:yt,manifest:null,max:null,maxLength:yt,media:null,method:null,min:null,minLength:yt,multiple:Tn,muted:Tn,name:null,nonce:null,noModule:Tn,noValidate:Tn,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Tn,optimum:yt,pattern:null,ping:Kr,placeholder:null,playsInline:Tn,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Tn,referrerPolicy:null,rel:Kr,required:Tn,reversed:Tn,rows:yt,rowSpan:yt,sandbox:Kr,scope:null,scoped:Tn,seamless:Tn,selected:Tn,shadowRootClonable:Tn,shadowRootDelegatesFocus:Tn,shadowRootMode:null,shape:null,size:yt,sizes:null,slot:null,span:yt,spellCheck:es,src:null,srcDoc:null,srcLang:null,srcSet:null,start:yt,step:null,style:null,tabIndex:yt,target:null,title:null,translate:null,type:null,typeMustMatch:Tn,useMap:null,value:es,width:yt,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Kr,axis:null,background:null,bgColor:null,border:yt,borderColor:null,bottomMargin:yt,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Tn,declare:Tn,event:null,face:null,frame:null,frameBorder:null,hSpace:yt,leftMargin:yt,link:null,longDesc:null,lowSrc:null,marginHeight:yt,marginWidth:yt,noResize:Tn,noHref:Tn,noShade:Tn,noWrap:Tn,object:null,profile:null,prompt:null,rev:null,rightMargin:yt,rules:null,scheme:null,scrolling:es,standby:null,summary:null,text:null,topMargin:yt,valueType:null,version:null,vAlign:null,vLink:null,vSpace:yt,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Tn,disableRemotePlayback:Tn,prefix:null,property:null,results:yt,security:null,unselectable:null}}),Sze=Vw({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:Pge,properties:{about:Ku,accentHeight:yt,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:yt,amplitude:yt,arabicForm:null,ascent:yt,attributeName:null,attributeType:null,azimuth:yt,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:yt,by:null,calcMode:null,capHeight:yt,className:Kr,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:yt,diffuseConstant:yt,direction:null,display:null,dur:null,divisor:yt,dominantBaseline:null,download:Tn,dx:null,dy:null,edgeMode:null,editable:null,elevation:yt,enableBackground:null,end:null,event:null,exponent:yt,externalResourcesRequired:null,fill:null,fillOpacity:yt,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Qv,g2:Qv,glyphName:Qv,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:yt,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:yt,horizOriginX:yt,horizOriginY:yt,id:null,ideographic:yt,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:yt,k:yt,k1:yt,k2:yt,k3:yt,k4:yt,kernelMatrix:Ku,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:yt,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:yt,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:yt,overlineThickness:yt,paintOrder:null,panose1:null,path:null,pathLength:yt,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Kr,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:yt,pointsAtY:yt,pointsAtZ:yt,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Ku,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Ku,rev:Ku,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Ku,requiredFeatures:Ku,requiredFonts:Ku,requiredFormats:Ku,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:yt,specularExponent:yt,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:yt,strikethroughThickness:yt,string:null,stroke:null,strokeDashArray:Ku,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:yt,strokeOpacity:yt,strokeWidth:null,style:null,surfaceScale:yt,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Ku,tabIndex:yt,tableValues:null,target:null,targetX:yt,targetY:yt,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Ku,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:yt,underlineThickness:yt,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:yt,values:null,vAlphabetic:yt,vMathematical:yt,vectorEffect:null,vHanging:yt,vIdeographic:yt,version:null,vertAdvY:yt,vertOriginX:yt,vertOriginY:yt,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:yt,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),Aze=/^data[-\w.:]+$/i,qte=/-[a-z]/g,kze=/[A-Z]/g;function X4(e,t){const n=R2(t);let r=t,i=hc;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&Aze.test(t)){if(t.charAt(4)==="-"){const s=t.slice(5).replace(qte,Rze);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=t.slice(4);if(!qte.test(s)){let o=s.replace(kze,Ize);o.charAt(0)!=="-"&&(o="-"+o),t="data"+o}}i=oH}return new i(r,t)}function Ize(e){return"-"+e.toLowerCase()}function Rze(e){return e.charAt(1).toUpperCase()}const Dze={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},rS=kge([Dge,Rge,Oge,$ge,Cze],"html"),ig=kge([Dge,Rge,Oge,$ge,Sze],"svg");function Wte(e){const t=String(e||"").trim();return t?t.split(/[ \t\n\r\f]+/g):[]}function Mge(e){return e.join(" ").trim()}var d_={},p8,Gte;function Pze(){if(Gte)return p8;Gte=1;var e=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,t=/\n/g,n=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,i=/^:\s*/,s=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,o=/^[;\s]*/,a=/^\s+|\s+$/g,u=`
`,l="/",c="*",d="",f="comment",h="declaration";p8=function(m,y){if(typeof m!="string")throw new TypeError("First argument must be a string");if(!m)return[];y=y||{};var v=1,b=1;function w($){var z=$.match(t);z&&(v+=z.length);var q=$.lastIndexOf(u);b=~q?$.length-q:b+$.length}function E(){var $={line:v,column:b};return function(z){return z.position=new _($),k(),z}}function _($){this.start=$,this.end={line:v,column:b},this.source=y.source}_.prototype.content=m;function C($){var z=new Error(y.source+":"+v+":"+b+": "+$);if(z.reason=$,z.filename=y.source,z.line=v,z.column=b,z.source=m,!y.silent)throw z}function S($){var z=$.exec(m);if(z){var q=z[0];return w(q),m=m.slice(q.length),z}}function k(){S(n)}function R($){var z;for($=$||[];z=N();)z!==!1&&$.push(z);return $}function N(){var $=E();if(!(l!=m.charAt(0)||c!=m.charAt(1))){for(var z=2;d!=m.charAt(z)&&(c!=m.charAt(z)||l!=m.charAt(z+1));)++z;if(z+=2,d===m.charAt(z-1))return C("End of comment missing");var q=m.slice(2,z-2);return b+=2,w(q),m=m.slice(z),b+=2,$({type:f,comment:q})}}function O(){var $=E(),z=S(r);if(z){if(N(),!S(i))return C("property missing ':'");var q=S(s),W=$({type:h,property:p(z[0].replace(e,d)),value:q?p(q[0].replace(e,d)):d});return S(o),W}}function F(){var $=[];R($);for(var z;z=O();)z!==!1&&($.push(z),R($));return $}return k(),F()};function p(m){return m?m.replace(a,d):d}return p8}var Yte;function Nze(){if(Yte)return d_;Yte=1;var e=d_.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(d_,"__esModule",{value:!0});var t=e(Pze());function n(r,i){var s=null;if(!r||typeof r!="string")return s;var o=(0,t.default)(r),a=typeof i=="function";return o.forEach(function(u){if(u.type==="declaration"){var l=u.property,c=u.value;a?i(l,c,u):c&&(s=s||{},s[l]=c)}}),s}return d_.default=n,d_}var Oze=Nze();const Kte=Tl(Oze),$ze=Kte.default||Kte,Q4=Lge("end"),eh=Lge("start");function Lge(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function Mze(e){const t=eh(e),n=Q4(e);if(t&&n)return{start:t,end:n}}function UT(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?Xte(e.position):"start"in e||"end"in e?Xte(e):"line"in e||"column"in e?Q9(e):""}function Q9(e){return Qte(e&&e.line)+":"+Qte(e&&e.column)}function Xte(e){return Q9(e&&e.start)+"-"+Q9(e&&e.end)}function Qte(e){return e&&typeof e=="number"?e:1}class ba extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",s={},o=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof t=="string"?i=t:!s.cause&&t&&(o=!0,i=t.message,s.cause=t),!s.ruleId&&!s.source&&typeof r=="string"){const u=r.indexOf(":");u===-1?s.ruleId=r:(s.source=r.slice(0,u),s.ruleId=r.slice(u+1))}if(!s.place&&s.ancestors&&s.ancestors){const u=s.ancestors[s.ancestors.length-1];u&&(s.place=u.position)}const a=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file,this.message=i,this.line=a?a.line:void 0,this.name=UT(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual,this.expected,this.note,this.url}}ba.prototype.file="";ba.prototype.name="";ba.prototype.reason="";ba.prototype.message="";ba.prototype.stack="";ba.prototype.column=void 0;ba.prototype.line=void 0;ba.prototype.ancestors=void 0;ba.prototype.cause=void 0;ba.prototype.fatal=void 0;ba.prototype.place=void 0;ba.prototype.ruleId=void 0;ba.prototype.source=void 0;const aH={}.hasOwnProperty,Lze=new Map,Fze=/[A-Z]/g,Bze=/-([a-z])/g,jze=new Set(["table","tbody","thead","tfoot","tr"]),zze=new Set(["td","th"]),Fge="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function Uze(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=Xze(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=Kze(n,t.jsx,t.jsxs)}const i={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?ig:rS,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},s=Bge(i,e,void 0);return s&&typeof s!="string"?s:i.create(e,i.Fragment,{children:s||void 0},void 0)}function Bge(e,t,n){if(t.type==="element")return Vze(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return Hze(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return Wze(e,t,n);if(t.type==="mdxjsEsm")return qze(e,t);if(t.type==="root")return Gze(e,t,n);if(t.type==="text")return Yze(e,t)}function Vze(e,t,n){const r=e.schema;let i=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=ig,e.schema=i),e.ancestors.push(t);const s=zge(e,t.tagName,!1),o=Qze(e,t);let a=lH(e,t);return jze.has(t.tagName)&&(a=a.filter(function(u){return typeof u=="string"?!Eze(u):!0})),jge(e,o,s,t),uH(o,a),e.ancestors.pop(),e.schema=r,e.create(t,s,o,n)}function Hze(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}D2(e,t.position)}function qze(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);D2(e,t.position)}function Wze(e,t,n){const r=e.schema;let i=r;t.name==="svg"&&r.space==="html"&&(i=ig,e.schema=i),e.ancestors.push(t);const s=t.name===null?e.Fragment:zge(e,t.name,!0),o=Jze(e,t),a=lH(e,t);return jge(e,o,s,t),uH(o,a),e.ancestors.pop(),e.schema=r,e.create(t,s,o,n)}function Gze(e,t,n){const r={};return uH(r,lH(e,t)),e.create(t,e.Fragment,r,n)}function Yze(e,t){return t.value}function jge(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function uH(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function Kze(e,t,n){return r;function r(i,s,o,a){const l=Array.isArray(o.children)?n:t;return a?l(s,o,a):l(s,o)}}function Xze(e,t){return n;function n(r,i,s,o){const a=Array.isArray(s.children),u=eh(r);return t(i,s,o,a,{columnNumber:u?u.column-1:void 0,fileName:e,lineNumber:u?u.line:void 0},void 0)}}function Qze(e,t){const n={};let r,i;for(i in t.properties)if(i!=="children"&&aH.call(t.properties,i)){const s=Zze(e,i,t.properties[i]);if(s){const[o,a]=s;e.tableCellAlignToStyle&&o==="align"&&typeof a=="string"&&zze.has(t.tagName)?r=a:n[o]=a}}if(r){const s=n.style||(n.style={});s[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function Jze(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const s=r.data.estree.body[0];s.type;const o=s.expression;o.type;const a=o.properties[0];a.type,Object.assign(n,e.evaluater.evaluateExpression(a.argument))}else D2(e,t.position);else{const i=r.name;let s;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const a=r.value.data.estree.body[0];a.type,s=e.evaluater.evaluateExpression(a.expression)}else D2(e,t.position);else s=r.value===null?!0:r.value;n[i]=s}return n}function lH(e,t){const n=[];let r=-1;const i=e.passKeys?new Map:Lze;for(;++r<t.children.length;){const s=t.children[r];let o;if(e.passKeys){const u=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(u){const l=i.get(u)||0;o=u+"-"+l,i.set(u,l+1)}}const a=Bge(e,s,o);a!==void 0&&n.push(a)}return n}function Zze(e,t,n){const r=X4(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?Age(n):Mge(n)),r.property==="style"){let i=typeof n=="object"?n:eUe(e,String(n));return e.stylePropertyNameCase==="css"&&(i=tUe(i)),["style",i]}return[e.elementAttributeNameCase==="react"&&r.space?Dze[r.property]||r.property:r.attribute,n]}}function eUe(e,t){const n={};try{$ze(t,r)}catch(i){if(!e.ignoreInvalidStyle){const s=i,o=new ba("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:s,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw o.file=e.filePath||void 0,o.url=Fge+"#cannot-parse-style-attribute",o}}return n;function r(i,s){let o=i;o.slice(0,2)!=="--"&&(o.slice(0,4)==="-ms-"&&(o="ms-"+o.slice(4)),o=o.replace(Bze,rUe)),n[o]=s}}function zge(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const i=t.split(".");let s=-1,o;for(;++s<i.length;){const a=Ute(i[s])?{type:"Identifier",name:i[s]}:{type:"Literal",value:i[s]};o=o?{type:"MemberExpression",object:o,property:a,computed:!!(s&&a.type==="Literal"),optional:!1}:a}r=o}else r=Ute(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const i=r.value;return aH.call(e.components,i)?e.components[i]:i}if(e.evaluater)return e.evaluater.evaluateExpression(r);D2(e)}function D2(e,t){const n=new ba("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=Fge+"#cannot-handle-mdx-estrees-without-createevaluater",n}function tUe(e){const t={};let n;for(n in e)aH.call(e,n)&&(t[nUe(n)]=e[n]);return t}function nUe(e){let t=e.replace(Fze,iUe);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function rUe(e,t){return t.toUpperCase()}function iUe(e){return"-"+e.toLowerCase()}const m8={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},sUe={};function oUe(e,t){const n=sUe,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return Uge(e,r,i)}function Uge(e,t,n){if(aUe(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return Jte(e.children,t,n)}return Array.isArray(e)?Jte(e,t,n):""}function Jte(e,t,n){const r=[];let i=-1;for(;++i<e.length;)r[i]=Uge(e[i],t,n);return r.join("")}function aUe(e){return!!(e&&typeof e=="object")}const Zte=document.createElement("i");function cH(e){const t="&"+e+";";Zte.innerHTML=t;const n=Zte.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function P2(e,t,n,r){const i=e.length;let s=0,o;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(t,n),e.splice(...o);else for(n&&e.splice(t,n);s<r.length;)o=r.slice(s,s+1e4),o.unshift(t,0),e.splice(...o),s+=1e4,t+=1e4}function uUe(e,t){return e.length>0?(P2(e,e.length,0,t),e):t}function lUe(e,t,n,r){const i=e.length;let s=0,o;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(t,n),e.splice(...o);else for(n&&e.splice(t,n);s<r.length;)o=r.slice(s,s+1e4),o.unshift(t,0),e.splice(...o),s+=1e4,t+=1e4}const ene={}.hasOwnProperty;function cUe(e){const t={};let n=-1;for(;++n<e.length;)dUe(t,e[n]);return t}function dUe(e,t){let n;for(n in t){const i=(ene.call(e,n)?e[n]:void 0)||(e[n]={}),s=t[n];let o;if(s)for(o in s){ene.call(i,o)||(i[o]=[]);const a=s[o];fUe(i[o],Array.isArray(a)?a:a?[a]:[])}}}function fUe(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);lUe(e,0,0,r)}function dH(e){return e!==null&&e<-2}function tne(e){return e===-2||e===-1||e===32}function fH(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(u){return tne(u)?(e.enter(n),a(u)):t(u)}function a(u){return tne(u)&&s++<i?(e.consume(u),a):(e.exit(n),t(u))}}const hUe={tokenize:pUe};function pUe(e){const t=e.attempt(this.parser.constructs.contentInitial,r,i);let n;return t;function r(a){if(a===null){e.consume(a);return}return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),fH(e,t,"linePrefix")}function i(a){return e.enter("paragraph"),s(a)}function s(a){const u=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=u),n=u,o(a)}function o(a){if(a===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(a);return}return dH(a)?(e.consume(a),e.exit("chunkText"),s):(e.consume(a),o)}}const mUe={tokenize:gUe},nne={tokenize:yUe};function gUe(e){const t=this,n=[];let r=0,i,s,o;return a;function a(w){if(r<n.length){const E=n[r];return t.containerState=E[1],e.attempt(E[0].continuation,u,l)(w)}return l(w)}function u(w){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&b();const E=t.events.length;let _=E,C;for(;_--;)if(t.events[_][0]==="exit"&&t.events[_][1].type==="chunkFlow"){C=t.events[_][1].end;break}v(r);let S=E;for(;S<t.events.length;)t.events[S][1].end=Object.assign({},C),S++;return P2(t.events,_+1,0,t.events.slice(E)),t.events.length=S,l(w)}return a(w)}function l(w){if(r===n.length){if(!i)return f(w);if(i.currentConstruct&&i.currentConstruct.concrete)return p(w);t.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(nne,c,d)(w)}function c(w){return i&&b(),v(r),f(w)}function d(w){return t.parser.lazy[t.now().line]=r!==n.length,o=t.now().offset,p(w)}function f(w){return t.containerState={},e.attempt(nne,h,p)(w)}function h(w){return r++,n.push([t.currentConstruct,t.containerState]),f(w)}function p(w){if(w===null){i&&b(),v(0),e.consume(w);return}return i=i||t.parser.flow(t.now()),e.enter("chunkFlow",{contentType:"flow",previous:s,_tokenizer:i}),m(w)}function m(w){if(w===null){y(e.exit("chunkFlow"),!0),v(0),e.consume(w);return}return dH(w)?(e.consume(w),y(e.exit("chunkFlow")),r=0,t.interrupt=void 0,a):(e.consume(w),m)}function y(w,E){const _=t.sliceStream(w);if(E&&_.push(null),w.previous=s,s&&(s.next=w),s=w,i.defineSkip(w.start),i.write(_),t.parser.lazy[w.start.line]){let C=i.events.length;for(;C--;)if(i.events[C][1].start.offset<o&&(!i.events[C][1].end||i.events[C][1].end.offset>o))return;const S=t.events.length;let k=S,R,N;for(;k--;)if(t.events[k][0]==="exit"&&t.events[k][1].type==="chunkFlow"){if(R){N=t.events[k][1].end;break}R=!0}for(v(r),C=S;C<t.events.length;)t.events[C][1].end=Object.assign({},N),C++;P2(t.events,k+1,0,t.events.slice(S)),t.events.length=C}}function v(w){let E=n.length;for(;E-- >w;){const _=n[E];t.containerState=_[1],_[0].exit.call(t,e)}n.length=w}function b(){i.write([null]),s=void 0,i=void 0,t.containerState._closeFlow=void 0}}function yUe(e,t,n){return fH(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function iS(e,t,n,r){const i=e.length;let s=0,o;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(t,n),e.splice(...o);else for(n&&e.splice(t,n);s<r.length;)o=r.slice(s,s+1e4),o.unshift(t,0),e.splice(...o),s+=1e4,t+=1e4}function jc(e,t){return e.length>0?(iS(e,e.length,0,t),e):t}function bUe(e){return e!==null&&(e<0||e===32)}const vUe=Vge(new RegExp("\\p{P}|\\p{S}","u")),xUe=Vge(/\s/);function Vge(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function rne(e){if(e===null||bUe(e)||xUe(e))return 1;if(vUe(e))return 2}function Hge(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const s=e[i].resolveAll;s&&!r.includes(s)&&(t=s(t,n),r.push(s))}return t}const J9={name:"attention",tokenize:EUe,resolveAll:wUe};function wUe(e,t){let n=-1,r,i,s,o,a,u,l,c;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;u=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const d=Object.assign({},e[r][1].end),f=Object.assign({},e[n][1].start);ine(d,-u),ine(f,u),o={type:u>1?"strongSequence":"emphasisSequence",start:d,end:Object.assign({},e[r][1].end)},a={type:u>1?"strongSequence":"emphasisSequence",start:Object.assign({},e[n][1].start),end:f},s={type:u>1?"strongText":"emphasisText",start:Object.assign({},e[r][1].end),end:Object.assign({},e[n][1].start)},i={type:u>1?"strong":"emphasis",start:Object.assign({},o.start),end:Object.assign({},a.end)},e[r][1].end=Object.assign({},o.start),e[n][1].start=Object.assign({},a.end),l=[],e[r][1].end.offset-e[r][1].start.offset&&(l=jc(l,[["enter",e[r][1],t],["exit",e[r][1],t]])),l=jc(l,[["enter",i,t],["enter",o,t],["exit",o,t],["enter",s,t]]),l=jc(l,Hge(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),l=jc(l,[["exit",s,t],["enter",a,t],["exit",a,t],["exit",i,t]]),e[n][1].end.offset-e[n][1].start.offset?(c=2,l=jc(l,[["enter",e[n][1],t],["exit",e[n][1],t]])):c=0,iS(e,r-1,n-r+3,l),n=r+l.length-c-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function EUe(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=rne(r);let s;return o;function o(u){return s=u,e.enter("attentionSequence"),a(u)}function a(u){if(u===s)return e.consume(u),a;const l=e.exit("attentionSequence"),c=rne(u),d=!c||c===2&&i||n.includes(u),f=!i||i===2&&c||n.includes(r);return l._open=!!(s===42?d:d&&(i||!f)),l._close=!!(s===42?f:f&&(c||!d)),t(u)}}function ine(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const of=Hw(/[A-Za-z]/),Xc=Hw(/[\dA-Za-z]/),_Ue=Hw(/[#-'*+\--9=?A-Z^-~]/);function TUe(e){return e!==null&&(e<32||e===127)}const Z9=Hw(/\d/),CUe=Hw(/[\dA-Fa-f]/),SUe=Hw(/[!-/:-@[-`{-~]/);function Nn(e){return e!==null&&e<-2}function Ql(e){return e!==null&&(e<0||e===32)}function kr(e){return e===-2||e===-1||e===32}function Hw(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}const AUe={name:"autolink",tokenize:kUe};function kUe(e,t,n){let r=0;return i;function i(h){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),s}function s(h){return of(h)?(e.consume(h),o):h===64?n(h):l(h)}function o(h){return h===43||h===45||h===46||Xc(h)?(r=1,a(h)):l(h)}function a(h){return h===58?(e.consume(h),r=0,u):(h===43||h===45||h===46||Xc(h))&&r++<32?(e.consume(h),a):(r=0,l(h))}function u(h){return h===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):h===null||h===32||h===60||TUe(h)?n(h):(e.consume(h),u)}function l(h){return h===64?(e.consume(h),c):_Ue(h)?(e.consume(h),l):n(h)}function c(h){return Xc(h)?d(h):n(h)}function d(h){return h===46?(e.consume(h),r=0,c):h===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):f(h)}function f(h){if((h===45||Xc(h))&&r++<63){const p=h===45?f:d;return e.consume(h),p}return n(h)}}function Vi(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(u){return kr(u)?(e.enter(n),a(u)):t(u)}function a(u){return kr(u)&&s++<i?(e.consume(u),a):(e.exit(n),t(u))}}const J4={tokenize:IUe,partial:!0};function IUe(e,t,n){return r;function r(s){return kr(s)?Vi(e,i,"linePrefix")(s):i(s)}function i(s){return s===null||Nn(s)?t(s):n(s)}}const qge={name:"blockQuote",tokenize:RUe,continuation:{tokenize:DUe},exit:PUe};function RUe(e,t,n){const r=this;return i;function i(o){if(o===62){const a=r.containerState;return a.open||(e.enter("blockQuote",{_container:!0}),a.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(o),e.exit("blockQuoteMarker"),s}return n(o)}function s(o){return kr(o)?(e.enter("blockQuotePrefixWhitespace"),e.consume(o),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(o))}}function DUe(e,t,n){const r=this;return i;function i(o){return kr(o)?Vi(e,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return e.attempt(qge,t,n)(o)}}function PUe(e){e.exit("blockQuote")}const Wge={name:"characterEscape",tokenize:NUe};function NUe(e,t,n){return r;function r(s){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(s),e.exit("escapeMarker"),i}function i(s){return SUe(s)?(e.enter("characterEscapeValue"),e.consume(s),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(s)}}const Gge={name:"characterReference",tokenize:OUe};function OUe(e,t,n){const r=this;let i=0,s,o;return a;function a(d){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(d),e.exit("characterReferenceMarker"),u}function u(d){return d===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(d),e.exit("characterReferenceMarkerNumeric"),l):(e.enter("characterReferenceValue"),s=31,o=Xc,c(d))}function l(d){return d===88||d===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(d),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),s=6,o=CUe,c):(e.enter("characterReferenceValue"),s=7,o=Z9,c(d))}function c(d){if(d===59&&i){const f=e.exit("characterReferenceValue");return o===Xc&&!cH(r.sliceSerialize(f))?n(d):(e.enter("characterReferenceMarker"),e.consume(d),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return o(d)&&i++<s?(e.consume(d),c):n(d)}}const sne={tokenize:MUe,partial:!0},one={name:"codeFenced",tokenize:$Ue,concrete:!0};function $Ue(e,t,n){const r=this,i={tokenize:_,partial:!0};let s=0,o=0,a;return u;function u(C){return l(C)}function l(C){const S=r.events[r.events.length-1];return s=S&&S[1].type==="linePrefix"?S[2].sliceSerialize(S[1],!0).length:0,a=C,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),c(C)}function c(C){return C===a?(o++,e.consume(C),c):o<3?n(C):(e.exit("codeFencedFenceSequence"),kr(C)?Vi(e,d,"whitespace")(C):d(C))}function d(C){return C===null||Nn(C)?(e.exit("codeFencedFence"),r.interrupt?t(C):e.check(sne,m,E)(C)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),f(C))}function f(C){return C===null||Nn(C)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),d(C)):kr(C)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),Vi(e,h,"whitespace")(C)):C===96&&C===a?n(C):(e.consume(C),f)}function h(C){return C===null||Nn(C)?d(C):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),p(C))}function p(C){return C===null||Nn(C)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),d(C)):C===96&&C===a?n(C):(e.consume(C),p)}function m(C){return e.attempt(i,E,y)(C)}function y(C){return e.enter("lineEnding"),e.consume(C),e.exit("lineEnding"),v}function v(C){return s>0&&kr(C)?Vi(e,b,"linePrefix",s+1)(C):b(C)}function b(C){return C===null||Nn(C)?e.check(sne,m,E)(C):(e.enter("codeFlowValue"),w(C))}function w(C){return C===null||Nn(C)?(e.exit("codeFlowValue"),b(C)):(e.consume(C),w)}function E(C){return e.exit("codeFenced"),t(C)}function _(C,S,k){let R=0;return N;function N(q){return C.enter("lineEnding"),C.consume(q),C.exit("lineEnding"),O}function O(q){return C.enter("codeFencedFence"),kr(q)?Vi(C,F,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(q):F(q)}function F(q){return q===a?(C.enter("codeFencedFenceSequence"),$(q)):k(q)}function $(q){return q===a?(R++,C.consume(q),$):R>=o?(C.exit("codeFencedFenceSequence"),kr(q)?Vi(C,z,"whitespace")(q):z(q)):k(q)}function z(q){return q===null||Nn(q)?(C.exit("codeFencedFence"),S(q)):k(q)}}}function MUe(e,t,n){const r=this;return i;function i(o){return o===null?n(o):(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}const g8={name:"codeIndented",tokenize:FUe},LUe={tokenize:BUe,partial:!0};function FUe(e,t,n){const r=this;return i;function i(l){return e.enter("codeIndented"),Vi(e,s,"linePrefix",5)(l)}function s(l){const c=r.events[r.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?o(l):n(l)}function o(l){return l===null?u(l):Nn(l)?e.attempt(LUe,o,u)(l):(e.enter("codeFlowValue"),a(l))}function a(l){return l===null||Nn(l)?(e.exit("codeFlowValue"),o(l)):(e.consume(l),a)}function u(l){return e.exit("codeIndented"),t(l)}}function BUe(e,t,n){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?n(o):Nn(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),i):Vi(e,s,"linePrefix",5)(o)}function s(o){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):Nn(o)?i(o):n(o)}}const jUe={name:"codeText",tokenize:VUe,resolve:zUe,previous:UUe};function zUe(e){let t=e.length-4,n=3,r,i;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)i===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(i=r):(r===t||e[r][1].type==="lineEnding")&&(e[i][1].type="codeTextData",r!==i+2&&(e[i][1].end=e[r-1][1].end,e.splice(i+2,r-i-2),t-=r-i-2,r=i+2),i=void 0);return e}function UUe(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function VUe(e,t,n){let r=0,i,s;return o;function o(d){return e.enter("codeText"),e.enter("codeTextSequence"),a(d)}function a(d){return d===96?(e.consume(d),r++,a):(e.exit("codeTextSequence"),u(d))}function u(d){return d===null?n(d):d===32?(e.enter("space"),e.consume(d),e.exit("space"),u):d===96?(s=e.enter("codeTextSequence"),i=0,c(d)):Nn(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),u):(e.enter("codeTextData"),l(d))}function l(d){return d===null||d===32||d===96||Nn(d)?(e.exit("codeTextData"),u(d)):(e.consume(d),l)}function c(d){return d===96?(e.consume(d),i++,c):i===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(d)):(s.type="codeTextData",l(d))}}let HUe=class{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const i=n||0;this.setCursor(Math.trunc(t));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&f_(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),f_(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),f_(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);f_(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);f_(this.left,n.reverse())}}};function f_(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function qUe(e){const t={};let n=-1,r,i,s,o,a,u,l;const c=new HUe(e);for(;++n<c.length;){for(;n in t;)n=t[n];if(r=c.get(n),n&&r[1].type==="chunkFlow"&&c.get(n-1)[1].type==="listItemPrefix"&&(u=r[1]._tokenizer.events,s=0,s<u.length&&u[s][1].type==="lineEndingBlank"&&(s+=2),s<u.length&&u[s][1].type==="content"))for(;++s<u.length&&u[s][1].type!=="content";)u[s][1].type==="chunkText"&&(u[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,WUe(c,n)),n=t[n],l=!0);else if(r[1]._container){for(s=n,i=void 0;s--&&(o=c.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank");)o[0]==="enter"&&(i&&(c.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);i&&(r[1].end=Object.assign({},c.get(i)[1].start),a=c.slice(i,n),a.unshift(r),c.splice(i,n-i+1,a))}}return iS(e,0,Number.POSITIVE_INFINITY,c.slice(0)),!l}function WUe(e,t){const n=e.get(t)[1],r=e.get(t)[2];let i=t-1;const s=[],o=n._tokenizer||r.parser[n.contentType](n.start),a=o.events,u=[],l={};let c,d,f=-1,h=n,p=0,m=0;const y=[m];for(;h;){for(;e.get(++i)[1]!==h;);s.push(i),h._tokenizer||(c=r.sliceStream(h),h.next||c.push(null),d&&o.defineSkip(h.start),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(c),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),d=h,h=h.next}for(h=n;++f<a.length;)a[f][0]==="exit"&&a[f-1][0]==="enter"&&a[f][1].type===a[f-1][1].type&&a[f][1].start.line!==a[f][1].end.line&&(m=f+1,y.push(m),h._tokenizer=void 0,h.previous=void 0,h=h.next);for(o.events=[],h?(h._tokenizer=void 0,h.previous=void 0):y.pop(),f=y.length;f--;){const v=a.slice(y[f],y[f+1]),b=s.pop();u.push([b,b+v.length-1]),e.splice(b,2,v)}for(u.reverse(),f=-1;++f<u.length;)l[p+u[f][0]]=p+u[f][1],p+=u[f][1]-u[f][0]-1;return l}const GUe={tokenize:XUe,resolve:KUe},YUe={tokenize:QUe,partial:!0};function KUe(e){return qUe(e),e}function XUe(e,t){let n;return r;function r(a){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?s(a):Nn(a)?e.check(YUe,o,s)(a):(e.consume(a),i)}function s(a){return e.exit("chunkContent"),e.exit("content"),t(a)}function o(a){return e.consume(a),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function QUe(e,t,n){const r=this;return i;function i(o){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),Vi(e,s,"linePrefix")}function s(o){if(o===null||Nn(o))return n(o);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):e.interrupt(r.parser.constructs.flow,n,t)(o)}}function ane(e){return e!==null&&(e<32||e===127)}function JUe(e){return e!==null&&e<-2}function ZUe(e){return e!==null&&(e<0||e===32)}function Yge(e,t,n,r,i,s,o,a,u){const l=u||Number.POSITIVE_INFINITY;let c=0;return d;function d(v){return v===60?(e.enter(r),e.enter(i),e.enter(s),e.consume(v),e.exit(s),f):v===null||v===32||v===41||ane(v)?n(v):(e.enter(r),e.enter(o),e.enter(a),e.enter("chunkString",{contentType:"string"}),m(v))}function f(v){return v===62?(e.enter(s),e.consume(v),e.exit(s),e.exit(i),e.exit(r),t):(e.enter(a),e.enter("chunkString",{contentType:"string"}),h(v))}function h(v){return v===62?(e.exit("chunkString"),e.exit(a),f(v)):v===null||v===60||JUe(v)?n(v):(e.consume(v),v===92?p:h)}function p(v){return v===60||v===62||v===92?(e.consume(v),h):h(v)}function m(v){return!c&&(v===null||v===41||ZUe(v))?(e.exit("chunkString"),e.exit(a),e.exit(o),e.exit(r),t(v)):c<l&&v===40?(e.consume(v),c++,m):v===41?(e.consume(v),c--,m):v===null||v===32||v===40||ane(v)?n(v):(e.consume(v),v===92?y:m)}function y(v){return v===40||v===41||v===92?(e.consume(v),m):m(v)}}function une(e){return e!==null&&e<-2}function eVe(e){return e===-2||e===-1||e===32}function Kge(e,t,n,r,i,s){const o=this;let a=0,u;return l;function l(h){return e.enter(r),e.enter(i),e.consume(h),e.exit(i),e.enter(s),c}function c(h){return a>999||h===null||h===91||h===93&&!u||h===94&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs?n(h):h===93?(e.exit(s),e.enter(i),e.consume(h),e.exit(i),e.exit(r),t):une(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),c):(e.enter("chunkString",{contentType:"string"}),d(h))}function d(h){return h===null||h===91||h===93||une(h)||a++>999?(e.exit("chunkString"),c(h)):(e.consume(h),u||(u=!eVe(h)),h===92?f:d)}function f(h){return h===91||h===92||h===93?(e.consume(h),a++,d):d(h)}}function lne(e){return e!==null&&e<-2}function cne(e){return e===-2||e===-1||e===32}function tVe(e,t,n,r){const i=Number.POSITIVE_INFINITY;let s=0;return o;function o(u){return cne(u)?(e.enter(n),a(u)):t(u)}function a(u){return cne(u)&&s++<i?(e.consume(u),a):(e.exit(n),t(u))}}function Xge(e,t,n,r,i,s){let o;return a;function a(f){return f===34||f===39||f===40?(e.enter(r),e.enter(i),e.consume(f),e.exit(i),o=f===40?41:f,u):n(f)}function u(f){return f===o?(e.enter(i),e.consume(f),e.exit(i),e.exit(r),t):(e.enter(s),l(f))}function l(f){return f===o?(e.exit(s),u(o)):f===null?n(f):lne(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),tVe(e,l,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),c(f))}function c(f){return f===o||f===null||lne(f)?(e.exit("chunkString"),l(f)):(e.consume(f),f===92?d:c)}function d(f){return f===o||f===92?(e.consume(f),c):c(f)}}function nVe(e){return e!==null&&e<-2}function eB(e){return e===-2||e===-1||e===32}function rVe(e,t,n,r){const i=Number.POSITIVE_INFINITY;let s=0;return o;function o(u){return eB(u)?(e.enter(n),a(u)):t(u)}function a(u){return eB(u)&&s++<i?(e.consume(u),a):(e.exit(n),t(u))}}function VT(e,t){let n;return r;function r(i){return nVe(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r):eB(i)?rVe(e,r,n?"linePrefix":"lineSuffix")(i):t(i)}}function hH(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const iVe={name:"definition",tokenize:oVe},sVe={tokenize:aVe,partial:!0};function oVe(e,t,n){const r=this;let i;return s;function s(h){return e.enter("definition"),o(h)}function o(h){return Kge.call(r,e,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(h)}function a(h){return i=hH(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),h===58?(e.enter("definitionMarker"),e.consume(h),e.exit("definitionMarker"),u):n(h)}function u(h){return Ql(h)?VT(e,l)(h):l(h)}function l(h){return Yge(e,c,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(h)}function c(h){return e.attempt(sVe,d,d)(h)}function d(h){return kr(h)?Vi(e,f,"whitespace")(h):f(h)}function f(h){return h===null||Nn(h)?(e.exit("definition"),r.parser.defined.push(i),t(h)):n(h)}}function aVe(e,t,n){return r;function r(a){return Ql(a)?VT(e,i)(a):n(a)}function i(a){return Xge(e,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function s(a){return kr(a)?Vi(e,o,"whitespace")(a):o(a)}function o(a){return a===null||Nn(a)?t(a):n(a)}}const uVe={name:"hardBreakEscape",tokenize:lVe};function lVe(e,t,n){return r;function r(s){return e.enter("hardBreakEscape"),e.consume(s),i}function i(s){return Nn(s)?(e.exit("hardBreakEscape"),t(s)):n(s)}}const cVe={name:"headingAtx",tokenize:fVe,resolve:dVe};function dVe(e,t){let n=e.length-2,r=3,i,s;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},s={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},iS(e,r,n-r+1,[["enter",i,t],["enter",s,t],["exit",s,t],["exit",i,t]])),e}function fVe(e,t,n){let r=0;return i;function i(c){return e.enter("atxHeading"),s(c)}function s(c){return e.enter("atxHeadingSequence"),o(c)}function o(c){return c===35&&r++<6?(e.consume(c),o):c===null||Ql(c)?(e.exit("atxHeadingSequence"),a(c)):n(c)}function a(c){return c===35?(e.enter("atxHeadingSequence"),u(c)):c===null||Nn(c)?(e.exit("atxHeading"),t(c)):kr(c)?Vi(e,a,"whitespace")(c):(e.enter("atxHeadingText"),l(c))}function u(c){return c===35?(e.consume(c),u):(e.exit("atxHeadingSequence"),a(c))}function l(c){return c===null||c===35||Ql(c)?(e.exit("atxHeadingText"),a(c)):(e.consume(c),l)}}const hVe=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],dne=["pre","script","style","textarea"],pVe={name:"htmlFlow",tokenize:bVe,resolveTo:yVe,concrete:!0},mVe={tokenize:xVe,partial:!0},gVe={tokenize:vVe,partial:!0};function yVe(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function bVe(e,t,n){const r=this;let i,s,o,a,u;return l;function l(j){return c(j)}function c(j){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(j),d}function d(j){return j===33?(e.consume(j),f):j===47?(e.consume(j),s=!0,m):j===63?(e.consume(j),i=3,r.interrupt?t:U):of(j)?(e.consume(j),o=String.fromCharCode(j),y):n(j)}function f(j){return j===45?(e.consume(j),i=2,h):j===91?(e.consume(j),i=5,a=0,p):of(j)?(e.consume(j),i=4,r.interrupt?t:U):n(j)}function h(j){return j===45?(e.consume(j),r.interrupt?t:U):n(j)}function p(j){const G="CDATA[";return j===G.charCodeAt(a++)?(e.consume(j),a===G.length?r.interrupt?t:F:p):n(j)}function m(j){return of(j)?(e.consume(j),o=String.fromCharCode(j),y):n(j)}function y(j){if(j===null||j===47||j===62||Ql(j)){const G=j===47,X=o.toLowerCase();return!G&&!s&&dne.includes(X)?(i=1,r.interrupt?t(j):F(j)):hVe.includes(o.toLowerCase())?(i=6,G?(e.consume(j),v):r.interrupt?t(j):F(j)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(j):s?b(j):w(j))}return j===45||Xc(j)?(e.consume(j),o+=String.fromCharCode(j),y):n(j)}function v(j){return j===62?(e.consume(j),r.interrupt?t:F):n(j)}function b(j){return kr(j)?(e.consume(j),b):N(j)}function w(j){return j===47?(e.consume(j),N):j===58||j===95||of(j)?(e.consume(j),E):kr(j)?(e.consume(j),w):N(j)}function E(j){return j===45||j===46||j===58||j===95||Xc(j)?(e.consume(j),E):_(j)}function _(j){return j===61?(e.consume(j),C):kr(j)?(e.consume(j),_):w(j)}function C(j){return j===null||j===60||j===61||j===62||j===96?n(j):j===34||j===39?(e.consume(j),u=j,S):kr(j)?(e.consume(j),C):k(j)}function S(j){return j===u?(e.consume(j),u=null,R):j===null||Nn(j)?n(j):(e.consume(j),S)}function k(j){return j===null||j===34||j===39||j===47||j===60||j===61||j===62||j===96||Ql(j)?_(j):(e.consume(j),k)}function R(j){return j===47||j===62||kr(j)?w(j):n(j)}function N(j){return j===62?(e.consume(j),O):n(j)}function O(j){return j===null||Nn(j)?F(j):kr(j)?(e.consume(j),O):n(j)}function F(j){return j===45&&i===2?(e.consume(j),W):j===60&&i===1?(e.consume(j),J):j===62&&i===4?(e.consume(j),L):j===63&&i===3?(e.consume(j),U):j===93&&i===5?(e.consume(j),Z):Nn(j)&&(i===6||i===7)?(e.exit("htmlFlowData"),e.check(mVe,Y,$)(j)):j===null||Nn(j)?(e.exit("htmlFlowData"),$(j)):(e.consume(j),F)}function $(j){return e.check(gVe,z,Y)(j)}function z(j){return e.enter("lineEnding"),e.consume(j),e.exit("lineEnding"),q}function q(j){return j===null||Nn(j)?$(j):(e.enter("htmlFlowData"),F(j))}function W(j){return j===45?(e.consume(j),U):F(j)}function J(j){return j===47?(e.consume(j),o="",K):F(j)}function K(j){if(j===62){const G=o.toLowerCase();return dne.includes(G)?(e.consume(j),L):F(j)}return of(j)&&o.length<8?(e.consume(j),o+=String.fromCharCode(j),K):F(j)}function Z(j){return j===93?(e.consume(j),U):F(j)}function U(j){return j===62?(e.consume(j),L):j===45&&i===2?(e.consume(j),U):F(j)}function L(j){return j===null||Nn(j)?(e.exit("htmlFlowData"),Y(j)):(e.consume(j),L)}function Y(j){return e.exit("htmlFlow"),t(j)}}function vVe(e,t,n){const r=this;return i;function i(o){return Nn(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s):n(o)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}function xVe(e,t,n){return r;function r(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),e.attempt(J4,t,n)}}const wVe={name:"htmlText",tokenize:EVe};function EVe(e,t,n){const r=this;let i,s,o;return a;function a(U){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(U),u}function u(U){return U===33?(e.consume(U),l):U===47?(e.consume(U),_):U===63?(e.consume(U),w):of(U)?(e.consume(U),k):n(U)}function l(U){return U===45?(e.consume(U),c):U===91?(e.consume(U),s=0,p):of(U)?(e.consume(U),b):n(U)}function c(U){return U===45?(e.consume(U),h):n(U)}function d(U){return U===null?n(U):U===45?(e.consume(U),f):Nn(U)?(o=d,J(U)):(e.consume(U),d)}function f(U){return U===45?(e.consume(U),h):d(U)}function h(U){return U===62?W(U):U===45?f(U):d(U)}function p(U){const L="CDATA[";return U===L.charCodeAt(s++)?(e.consume(U),s===L.length?m:p):n(U)}function m(U){return U===null?n(U):U===93?(e.consume(U),y):Nn(U)?(o=m,J(U)):(e.consume(U),m)}function y(U){return U===93?(e.consume(U),v):m(U)}function v(U){return U===62?W(U):U===93?(e.consume(U),v):m(U)}function b(U){return U===null||U===62?W(U):Nn(U)?(o=b,J(U)):(e.consume(U),b)}function w(U){return U===null?n(U):U===63?(e.consume(U),E):Nn(U)?(o=w,J(U)):(e.consume(U),w)}function E(U){return U===62?W(U):w(U)}function _(U){return of(U)?(e.consume(U),C):n(U)}function C(U){return U===45||Xc(U)?(e.consume(U),C):S(U)}function S(U){return Nn(U)?(o=S,J(U)):kr(U)?(e.consume(U),S):W(U)}function k(U){return U===45||Xc(U)?(e.consume(U),k):U===47||U===62||Ql(U)?R(U):n(U)}function R(U){return U===47?(e.consume(U),W):U===58||U===95||of(U)?(e.consume(U),N):Nn(U)?(o=R,J(U)):kr(U)?(e.consume(U),R):W(U)}function N(U){return U===45||U===46||U===58||U===95||Xc(U)?(e.consume(U),N):O(U)}function O(U){return U===61?(e.consume(U),F):Nn(U)?(o=O,J(U)):kr(U)?(e.consume(U),O):R(U)}function F(U){return U===null||U===60||U===61||U===62||U===96?n(U):U===34||U===39?(e.consume(U),i=U,$):Nn(U)?(o=F,J(U)):kr(U)?(e.consume(U),F):(e.consume(U),z)}function $(U){return U===i?(e.consume(U),i=void 0,q):U===null?n(U):Nn(U)?(o=$,J(U)):(e.consume(U),$)}function z(U){return U===null||U===34||U===39||U===60||U===61||U===96?n(U):U===47||U===62||Ql(U)?R(U):(e.consume(U),z)}function q(U){return U===47||U===62||Ql(U)?R(U):n(U)}function W(U){return U===62?(e.consume(U),e.exit("htmlTextData"),e.exit("htmlText"),t):n(U)}function J(U){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(U),e.exit("lineEnding"),K}function K(U){return kr(U)?Vi(e,Z,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(U):Z(U)}function Z(U){return e.enter("htmlTextData"),o(U)}}const pH={name:"labelEnd",tokenize:kVe,resolveTo:AVe,resolveAll:SVe},_Ve={tokenize:IVe},TVe={tokenize:RVe},CVe={tokenize:DVe};function SVe(e){let t=-1;for(;++t<e.length;){const n=e[t][1];(n.type==="labelImage"||n.type==="labelLink"||n.type==="labelEnd")&&(e.splice(t+1,n.type==="labelImage"?4:2),n.type="data",t++)}return e}function AVe(e,t){let n=e.length,r=0,i,s,o,a;for(;n--;)if(i=e[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(e[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=n);const u={type:e[s][1].type==="labelLink"?"link":"image",start:Object.assign({},e[s][1].start),end:Object.assign({},e[e.length-1][1].end)},l={type:"label",start:Object.assign({},e[s][1].start),end:Object.assign({},e[o][1].end)},c={type:"labelText",start:Object.assign({},e[s+r+2][1].end),end:Object.assign({},e[o-2][1].start)};return a=[["enter",u,t],["enter",l,t]],a=jc(a,e.slice(s+1,s+r+3)),a=jc(a,[["enter",c,t]]),a=jc(a,Hge(t.parser.constructs.insideSpan.null,e.slice(s+r+4,o-3),t)),a=jc(a,[["exit",c,t],e[o-2],e[o-1],["exit",l,t]]),a=jc(a,e.slice(o+1)),a=jc(a,[["exit",u,t]]),iS(e,s,e.length,a),e}function kVe(e,t,n){const r=this;let i=r.events.length,s,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return a;function a(f){return s?s._inactive?d(f):(o=r.parser.defined.includes(hH(r.sliceSerialize({start:s.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(f),e.exit("labelMarker"),e.exit("labelEnd"),u):n(f)}function u(f){return f===40?e.attempt(_Ve,c,o?c:d)(f):f===91?e.attempt(TVe,c,o?l:d)(f):o?c(f):d(f)}function l(f){return e.attempt(CVe,c,d)(f)}function c(f){return t(f)}function d(f){return s._balanced=!0,n(f)}}function IVe(e,t,n){return r;function r(d){return e.enter("resource"),e.enter("resourceMarker"),e.consume(d),e.exit("resourceMarker"),i}function i(d){return Ql(d)?VT(e,s)(d):s(d)}function s(d){return d===41?c(d):Yge(e,o,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(d)}function o(d){return Ql(d)?VT(e,u)(d):c(d)}function a(d){return n(d)}function u(d){return d===34||d===39||d===40?Xge(e,l,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(d):c(d)}function l(d){return Ql(d)?VT(e,c)(d):c(d)}function c(d){return d===41?(e.enter("resourceMarker"),e.consume(d),e.exit("resourceMarker"),e.exit("resource"),t):n(d)}}function RVe(e,t,n){const r=this;return i;function i(a){return Kge.call(r,e,s,o,"reference","referenceMarker","referenceString")(a)}function s(a){return r.parser.defined.includes(hH(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(a):n(a)}function o(a){return n(a)}}function DVe(e,t,n){return r;function r(s){return e.enter("reference"),e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),i}function i(s){return s===93?(e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),e.exit("reference"),t):n(s)}}const PVe={name:"labelStartImage",tokenize:NVe,resolveAll:pH.resolveAll};function NVe(e,t,n){const r=this;return i;function i(a){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(a),e.exit("labelImageMarker"),s}function s(a){return a===91?(e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelImage"),o):n(a)}function o(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):t(a)}}const OVe={name:"labelStartLink",tokenize:$Ve,resolveAll:pH.resolveAll};function $Ve(e,t,n){const r=this;return i;function i(o){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):t(o)}}const y8={name:"lineEnding",tokenize:MVe};function MVe(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),Vi(e,t,"linePrefix")}}const WR={name:"thematicBreak",tokenize:LVe};function LVe(e,t,n){let r=0,i;return s;function s(l){return e.enter("thematicBreak"),o(l)}function o(l){return i=l,a(l)}function a(l){return l===i?(e.enter("thematicBreakSequence"),u(l)):r>=3&&(l===null||Nn(l))?(e.exit("thematicBreak"),t(l)):n(l)}function u(l){return l===i?(e.consume(l),r++,u):(e.exit("thematicBreakSequence"),kr(l)?Vi(e,a,"whitespace")(l):a(l))}}const lu={name:"list",tokenize:jVe,continuation:{tokenize:zVe},exit:VVe},FVe={tokenize:HVe,partial:!0},BVe={tokenize:UVe,partial:!0};function jVe(e,t,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return a;function a(h){const p=r.containerState.type||(h===42||h===43||h===45?"listUnordered":"listOrdered");if(p==="listUnordered"?!r.containerState.marker||h===r.containerState.marker:Z9(h)){if(r.containerState.type||(r.containerState.type=p,e.enter(p,{_container:!0})),p==="listUnordered")return e.enter("listItemPrefix"),h===42||h===45?e.check(WR,n,l)(h):l(h);if(!r.interrupt||h===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),u(h)}return n(h)}function u(h){return Z9(h)&&++o<10?(e.consume(h),u):(!r.interrupt||o<2)&&(r.containerState.marker?h===r.containerState.marker:h===41||h===46)?(e.exit("listItemValue"),l(h)):n(h)}function l(h){return e.enter("listItemMarker"),e.consume(h),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||h,e.check(J4,r.interrupt?n:c,e.attempt(FVe,f,d))}function c(h){return r.containerState.initialBlankLine=!0,s++,f(h)}function d(h){return kr(h)?(e.enter("listItemPrefixWhitespace"),e.consume(h),e.exit("listItemPrefixWhitespace"),f):n(h)}function f(h){return r.containerState.size=s+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(h)}}function zVe(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(J4,i,s);function i(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,Vi(e,t,"listItemIndent",r.containerState.size+1)(a)}function s(a){return r.containerState.furtherBlankLines||!kr(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(BVe,t,o)(a))}function o(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,Vi(e,e.attempt(lu,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function UVe(e,t,n){const r=this;return Vi(e,i,"listItemIndent",r.containerState.size+1);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?t(s):n(s)}}function VVe(e){e.exit(this.containerState.type)}function HVe(e,t,n){const r=this;return Vi(e,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const o=r.events[r.events.length-1];return!kr(s)&&o&&o[1].type==="listItemPrefixWhitespace"?t(s):n(s)}}const fne={name:"setextUnderline",tokenize:WVe,resolveTo:qVe};function qVe(e,t){let n=e.length,r,i,s;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(i=n)}else e[n][1].type==="content"&&e.splice(n,1),!s&&e[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:Object.assign({},e[i][1].start),end:Object.assign({},e[e.length-1][1].end)};return e[i][1].type="setextHeadingText",s?(e.splice(i,0,["enter",o,t]),e.splice(s+1,0,["exit",e[r][1],t]),e[r][1].end=Object.assign({},e[s][1].end)):e[r][1]=o,e.push(["exit",o,t]),e}function WVe(e,t,n){const r=this;let i;return s;function s(l){let c=r.events.length,d;for(;c--;)if(r.events[c][1].type!=="lineEnding"&&r.events[c][1].type!=="linePrefix"&&r.events[c][1].type!=="content"){d=r.events[c][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||d)?(e.enter("setextHeadingLine"),i=l,o(l)):n(l)}function o(l){return e.enter("setextHeadingLineSequence"),a(l)}function a(l){return l===i?(e.consume(l),a):(e.exit("setextHeadingLineSequence"),kr(l)?Vi(e,u,"lineSuffix")(l):u(l))}function u(l){return l===null||Nn(l)?(e.exit("setextHeadingLine"),t(l)):n(l)}}const GVe={tokenize:YVe};function YVe(e){const t=this,n=e.attempt(J4,r,e.attempt(this.parser.constructs.flowInitial,i,fH(e,e.attempt(this.parser.constructs.flow,i,e.attempt(GUe,i)),"linePrefix")));return n;function r(s){if(s===null){e.consume(s);return}return e.enter("lineEndingBlank"),e.consume(s),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function i(s){if(s===null){e.consume(s);return}return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const KVe={resolveAll:Jge()},XVe=Qge("string"),QVe=Qge("text");function Qge(e){return{tokenize:t,resolveAll:Jge(e==="text"?JVe:void 0)};function t(n){const r=this,i=this.parser.constructs[e],s=n.attempt(i,o,a);return o;function o(c){return l(c)?s(c):a(c)}function a(c){if(c===null){n.consume(c);return}return n.enter("data"),n.consume(c),u}function u(c){return l(c)?(n.exit("data"),s(c)):(n.consume(c),u)}function l(c){if(c===null)return!0;const d=i[c];let f=-1;if(d)for(;++f<d.length;){const h=d[f];if(!h.previous||h.previous.call(r,r.previous))return!0}return!1}}}function Jge(e){return t;function t(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return e?e(n,r):n}}function JVe(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],i=t.sliceStream(r);let s=i.length,o=-1,a=0,u;for(;s--;){const l=i[s];if(typeof l=="string"){for(o=l.length;l.charCodeAt(o-1)===32;)a++,o--;if(o)break;o=-1}else if(l===-2)u=!0,a++;else if(l!==-1){s++;break}}if(a){const l={type:n===e.length||u||a<2?"lineSuffix":"hardBreakTrailing",start:{line:r.end.line,column:r.end.column-a,offset:r.end.offset-a,_index:r.start._index+s,_bufferIndex:s?o:r.start._bufferIndex+o},end:Object.assign({},r.end)};r.end=Object.assign({},l.start),r.start.offset===r.end.offset?Object.assign(r,l):(e.splice(n,0,["enter",l,t],["exit",l,t]),n+=2)}n++}return e}function ZVe(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const s=e[i].resolveAll;s&&!r.includes(s)&&(t=s(t,n),r.push(s))}return t}function eHe(e,t,n){let r=Object.assign(n?Object.assign({},n):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const i={},s=[];let o=[],a=[];const u={consume:b,enter:w,exit:E,attempt:S(_),check:S(C),interrupt:S(C,{interrupt:!0})},l={previous:null,code:null,containerState:{},events:[],parser:e,sliceStream:h,sliceSerialize:f,now:p,defineSkip:m,write:d};let c=t.tokenize.call(l,u);return t.resolveAll&&s.push(t),l;function d(O){return o=uUe(o,O),y(),o[o.length-1]!==null?[]:(k(t,0),l.events=ZVe(s,l.events,l),l.events)}function f(O,F){return nHe(h(O),F)}function h(O){return tHe(o,O)}function p(){const{line:O,column:F,offset:$,_index:z,_bufferIndex:q}=r;return{line:O,column:F,offset:$,_index:z,_bufferIndex:q}}function m(O){i[O.line]=O.column,N()}function y(){let O;for(;r._index<o.length;){const F=o[r._index];if(typeof F=="string")for(O=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===O&&r._bufferIndex<F.length;)v(F.charCodeAt(r._bufferIndex));else v(F)}}function v(O){c=c(O)}function b(O){dH(O)?(r.line++,r.column=1,r.offset+=O===-3?2:1,N()):O!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),l.previous=O}function w(O,F){const $=F||{};return $.type=O,$.start=p(),l.events.push(["enter",$,l]),a.push($),$}function E(O){const F=a.pop();return F.end=p(),l.events.push(["exit",F,l]),F}function _(O,F){k(O,F.from)}function C(O,F){F.restore()}function S(O,F){return $;function $(z,q,W){let J,K,Z,U;return Array.isArray(z)?Y(z):"tokenize"in z?Y([z]):L(z);function L(ne){return pe;function pe(de){const xe=de!==null&&ne[de],Ce=de!==null&&ne.null,ue=[...Array.isArray(xe)?xe:xe?[xe]:[],...Array.isArray(Ce)?Ce:Ce?[Ce]:[]];return Y(ue)(de)}}function Y(ne){return J=ne,K=0,ne.length===0?W:j(ne[K])}function j(ne){return pe;function pe(de){return U=R(),Z=ne,ne.partial||(l.currentConstruct=ne),ne.name&&l.parser.constructs.disable.null.includes(ne.name)?X():ne.tokenize.call(F?Object.assign(Object.create(l),F):l,u,G,X)(de)}}function G(ne){return O(Z,U),q}function X(ne){return U.restore(),++K<J.length?j(J[K]):W}}}function k(O,F){O.resolveAll&&!s.includes(O)&&s.push(O),O.resolve&&P2(l.events,F,l.events.length-F,O.resolve(l.events.slice(F),l)),O.resolveTo&&(l.events=O.resolveTo(l.events,l))}function R(){const O=p(),F=l.previous,$=l.currentConstruct,z=l.events.length,q=Array.from(a);return{restore:W,from:z};function W(){r=O,l.previous=F,l.currentConstruct=$,l.events.length=z,a=q,N()}}function N(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function tHe(e,t){const n=t.start._index,r=t.start._bufferIndex,i=t.end._index,s=t.end._bufferIndex;let o;if(n===i)o=[e[n].slice(r,s)];else{if(o=e.slice(n,i),r>-1){const a=o[0];typeof a=="string"?o[0]=a.slice(r):o.shift()}s>0&&o.push(e[i].slice(0,s))}return o}function nHe(e,t){let n=-1;const r=[];let i;for(;++n<e.length;){const s=e[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=t?" ":"	";break}case-1:{if(!t&&i)continue;o=" ";break}default:o=String.fromCharCode(s)}i=s===-2,r.push(o)}return r.join("")}const rHe={42:lu,43:lu,45:lu,48:lu,49:lu,50:lu,51:lu,52:lu,53:lu,54:lu,55:lu,56:lu,57:lu,62:qge},iHe={91:iVe},sHe={[-2]:g8,[-1]:g8,32:g8},oHe={35:cVe,42:WR,45:[fne,WR],60:pVe,61:fne,95:WR,96:one,126:one},aHe={38:Gge,92:Wge},uHe={[-5]:y8,[-4]:y8,[-3]:y8,33:PVe,38:Gge,42:J9,60:[AUe,wVe],91:OVe,92:[uVe,Wge],93:pH,95:J9,96:jUe},lHe={null:[J9,KVe]},cHe={null:[42,95]},dHe={null:[]},fHe=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:cHe,contentInitial:iHe,disable:dHe,document:rHe,flow:oHe,flowInitial:sHe,insideSpan:lHe,string:aHe,text:uHe},Symbol.toStringTag,{value:"Module"}));function hHe(e){const n=cUe([fHe,...(e||{}).extensions||[]]),r={defined:[],lazy:{},constructs:n,content:i(hUe),document:i(mUe),flow:i(GVe),string:i(XVe),text:i(QVe)};return r;function i(s){return o;function o(a){return eHe(r,s,a)}}}class pHe{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const i=n||0;this.setCursor(Math.trunc(t));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&h_(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),h_(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),h_(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);h_(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);h_(this.left,n.reverse())}}}function h_(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function mHe(e){const t={};let n=-1,r,i,s,o,a,u,l;const c=new pHe(e);for(;++n<c.length;){for(;n in t;)n=t[n];if(r=c.get(n),n&&r[1].type==="chunkFlow"&&c.get(n-1)[1].type==="listItemPrefix"&&(u=r[1]._tokenizer.events,s=0,s<u.length&&u[s][1].type==="lineEndingBlank"&&(s+=2),s<u.length&&u[s][1].type==="content"))for(;++s<u.length&&u[s][1].type!=="content";)u[s][1].type==="chunkText"&&(u[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,gHe(c,n)),n=t[n],l=!0);else if(r[1]._container){for(s=n,i=void 0;s--&&(o=c.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank");)o[0]==="enter"&&(i&&(c.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);i&&(r[1].end=Object.assign({},c.get(i)[1].start),a=c.slice(i,n),a.unshift(r),c.splice(i,n-i+1,a))}}return P2(e,0,Number.POSITIVE_INFINITY,c.slice(0)),!l}function gHe(e,t){const n=e.get(t)[1],r=e.get(t)[2];let i=t-1;const s=[],o=n._tokenizer||r.parser[n.contentType](n.start),a=o.events,u=[],l={};let c,d,f=-1,h=n,p=0,m=0;const y=[m];for(;h;){for(;e.get(++i)[1]!==h;);s.push(i),h._tokenizer||(c=r.sliceStream(h),h.next||c.push(null),d&&o.defineSkip(h.start),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(c),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),d=h,h=h.next}for(h=n;++f<a.length;)a[f][0]==="exit"&&a[f-1][0]==="enter"&&a[f][1].type===a[f-1][1].type&&a[f][1].start.line!==a[f][1].end.line&&(m=f+1,y.push(m),h._tokenizer=void 0,h.previous=void 0,h=h.next);for(o.events=[],h?(h._tokenizer=void 0,h.previous=void 0):y.pop(),f=y.length;f--;){const v=a.slice(y[f],y[f+1]),b=s.pop();u.push([b,b+v.length-1]),e.splice(b,2,v)}for(u.reverse(),f=-1;++f<u.length;)l[p+u[f][0]]=p+u[f][1],p+=u[f][1]-u[f][0]-1;return l}function yHe(e){for(;!mHe(e););return e}const hne=/[\0\t\n\r]/g;function bHe(){let e=1,t="",n=!0,r;return i;function i(s,o,a){const u=[];let l,c,d,f,h;for(s=t+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),d=0,t="",n&&(s.charCodeAt(0)===65279&&d++,n=void 0);d<s.length;){if(hne.lastIndex=d,l=hne.exec(s),f=l&&l.index!==void 0?l.index:s.length,h=s.charCodeAt(f),!l){t=s.slice(d);break}if(h===10&&d===f&&r)u.push(-3),r=void 0;else switch(r&&(u.push(-5),r=void 0),d<f&&(u.push(s.slice(d,f)),e+=f-d),h){case 0:{u.push(65533),e++;break}case 9:{for(c=Math.ceil(e/4)*4,u.push(-2);e++<c;)u.push(-1);break}case 10:{u.push(-4),e=1;break}default:r=!0,e=1}d=f+1}return a&&(r&&u.push(-5),t&&u.push(t),u.push(null)),u}}function vHe(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function xHe(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}const wHe=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function EHe(e){return e.replace(wHe,_He)}function _He(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return xHe(n.slice(s?2:1),s?16:10)}return cH(n)||e}function b8(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Zge={}.hasOwnProperty;function THe(e,t,n){return typeof t!="string"&&(n=t,t=void 0),CHe(n)(yHe(hHe(n).document().write(bHe()(e,t,!0))))}function CHe(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(Ke),autolinkProtocol:R,autolinkEmail:R,atxHeading:s(Le),blockQuote:s(Ce),characterEscape:R,characterReference:R,codeFenced:s(ue),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(ue,o),codeText:s(se,o),codeTextData:R,data:R,codeFlowValue:R,definition:s(me),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(be),hardBreakEscape:s(Ue),hardBreakTrailing:s(Ue),htmlFlow:s(Ne,o),htmlFlowData:R,htmlText:s(Ne,o),htmlTextData:R,image:s(je),label:o,link:s(Ke),listItem:s(pt),listItemValue:f,listOrdered:s(ut,d),listUnordered:s(ut),paragraph:s(xt),reference:j,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(Le),strong:s(De),thematicBreak:s(Kt)},exit:{atxHeading:u(),atxHeadingSequence:_,autolink:u(),autolinkEmail:xe,autolinkProtocol:de,blockQuote:u(),characterEscapeValue:N,characterReferenceMarkerHexadecimal:X,characterReferenceMarkerNumeric:X,characterReferenceValue:ne,characterReference:pe,codeFenced:u(y),codeFencedFence:m,codeFencedFenceInfo:h,codeFencedFenceMeta:p,codeFlowValue:N,codeIndented:u(v),codeText:u(q),codeTextData:N,data:N,definition:u(),definitionDestinationString:E,definitionLabelString:b,definitionTitleString:w,emphasis:u(),hardBreakEscape:u(F),hardBreakTrailing:u(F),htmlFlow:u($),htmlFlowData:N,htmlText:u(z),htmlTextData:N,image:u(J),label:Z,labelText:K,lineEnding:O,link:u(W),listItem:u(),listOrdered:u(),listUnordered:u(),paragraph:u(),referenceString:G,resourceDestinationString:U,resourceTitleString:L,resource:Y,setextHeading:u(k),setextHeadingLineSequence:S,setextHeadingText:C,strong:u(),thematicBreak:u()}};eye(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(Te){let Oe={type:"root",children:[]};const lt={stack:[Oe],tokenStack:[],config:t,enter:a,exit:l,buffer:o,resume:c,data:n},_t=[];let St=-1;for(;++St<Te.length;)if(Te[St][1].type==="listOrdered"||Te[St][1].type==="listUnordered")if(Te[St][0]==="enter")_t.push(St);else{const en=_t.pop();St=i(Te,en,St)}for(St=-1;++St<Te.length;){const en=t[Te[St][0]];Zge.call(en,Te[St][1].type)&&en[Te[St][1].type].call(Object.assign({sliceSerialize:Te[St][2].sliceSerialize},lt),Te[St][1])}if(lt.tokenStack.length>0){const en=lt.tokenStack[lt.tokenStack.length-1];(en[1]||pne).call(lt,void 0,en[0])}for(Oe.position={start:Sm(Te.length>0?Te[0][1].start:{line:1,column:1,offset:0}),end:Sm(Te.length>0?Te[Te.length-2][1].end:{line:1,column:1,offset:0})},St=-1;++St<t.transforms.length;)Oe=t.transforms[St](Oe)||Oe;return Oe}function i(Te,Oe,lt){let _t=Oe-1,St=-1,en=!1,En,sr,Jr,wn;for(;++_t<=lt;){const An=Te[_t];switch(An[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{An[0]==="enter"?St++:St--,wn=void 0;break}case"lineEndingBlank":{An[0]==="enter"&&(En&&!wn&&!St&&!Jr&&(Jr=_t),wn=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:wn=void 0}if(!St&&An[0]==="enter"&&An[1].type==="listItemPrefix"||St===-1&&An[0]==="exit"&&(An[1].type==="listUnordered"||An[1].type==="listOrdered")){if(En){let Hr=_t;for(sr=void 0;Hr--;){const Ln=Te[Hr];if(Ln[1].type==="lineEnding"||Ln[1].type==="lineEndingBlank"){if(Ln[0]==="exit")continue;sr&&(Te[sr][1].type="lineEndingBlank",en=!0),Ln[1].type="lineEnding",sr=Hr}else if(!(Ln[1].type==="linePrefix"||Ln[1].type==="blockQuotePrefix"||Ln[1].type==="blockQuotePrefixWhitespace"||Ln[1].type==="blockQuoteMarker"||Ln[1].type==="listItemIndent"))break}Jr&&(!sr||Jr<sr)&&(En._spread=!0),En.end=Object.assign({},sr?Te[sr][1].start:An[1].end),Te.splice(sr||_t,0,["exit",En,An[2]]),_t++,lt++}if(An[1].type==="listItemPrefix"){const Hr={type:"listItem",_spread:!1,start:Object.assign({},An[1].start),end:void 0};En=Hr,Te.splice(_t,0,["enter",Hr,An[2]]),_t++,lt++,Jr=void 0,wn=!0}}}return Te[Oe][1]._spread=en,lt}function s(Te,Oe){return lt;function lt(_t){a.call(this,Te(_t),_t),Oe&&Oe.call(this,_t)}}function o(){this.stack.push({type:"fragment",children:[]})}function a(Te,Oe,lt){this.stack[this.stack.length-1].children.push(Te),this.stack.push(Te),this.tokenStack.push([Oe,lt]),Te.position={start:Sm(Oe.start),end:void 0}}function u(Te){return Oe;function Oe(lt){Te&&Te.call(this,lt),l.call(this,lt)}}function l(Te,Oe){const lt=this.stack.pop(),_t=this.tokenStack.pop();if(_t)_t[0].type!==Te.type&&(Oe?Oe.call(this,Te,_t[0]):(_t[1]||pne).call(this,Te,_t[0]));else throw new Error("Cannot close `"+Te.type+"` ("+UT({start:Te.start,end:Te.end})+"): its not open");lt.position.end=Sm(Te.end)}function c(){return oUe(this.stack.pop())}function d(){this.data.expectingFirstListItemValue=!0}function f(Te){if(this.data.expectingFirstListItemValue){const Oe=this.stack[this.stack.length-2];Oe.start=Number.parseInt(this.sliceSerialize(Te),10),this.data.expectingFirstListItemValue=void 0}}function h(){const Te=this.resume(),Oe=this.stack[this.stack.length-1];Oe.lang=Te}function p(){const Te=this.resume(),Oe=this.stack[this.stack.length-1];Oe.meta=Te}function m(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function y(){const Te=this.resume(),Oe=this.stack[this.stack.length-1];Oe.value=Te.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function v(){const Te=this.resume(),Oe=this.stack[this.stack.length-1];Oe.value=Te.replace(/(\r?\n|\r)$/g,"")}function b(Te){const Oe=this.resume(),lt=this.stack[this.stack.length-1];lt.label=Oe,lt.identifier=b8(this.sliceSerialize(Te)).toLowerCase()}function w(){const Te=this.resume(),Oe=this.stack[this.stack.length-1];Oe.title=Te}function E(){const Te=this.resume(),Oe=this.stack[this.stack.length-1];Oe.url=Te}function _(Te){const Oe=this.stack[this.stack.length-1];if(!Oe.depth){const lt=this.sliceSerialize(Te).length;Oe.depth=lt}}function C(){this.data.setextHeadingSlurpLineEnding=!0}function S(Te){const Oe=this.stack[this.stack.length-1];Oe.depth=this.sliceSerialize(Te).codePointAt(0)===61?1:2}function k(){this.data.setextHeadingSlurpLineEnding=void 0}function R(Te){const lt=this.stack[this.stack.length-1].children;let _t=lt[lt.length-1];(!_t||_t.type!=="text")&&(_t=wt(),_t.position={start:Sm(Te.start),end:void 0},lt.push(_t)),this.stack.push(_t)}function N(Te){const Oe=this.stack.pop();Oe.value+=this.sliceSerialize(Te),Oe.position.end=Sm(Te.end)}function O(Te){const Oe=this.stack[this.stack.length-1];if(this.data.atHardBreak){const lt=Oe.children[Oe.children.length-1];lt.position.end=Sm(Te.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(Oe.type)&&(R.call(this,Te),N.call(this,Te))}function F(){this.data.atHardBreak=!0}function $(){const Te=this.resume(),Oe=this.stack[this.stack.length-1];Oe.value=Te}function z(){const Te=this.resume(),Oe=this.stack[this.stack.length-1];Oe.value=Te}function q(){const Te=this.resume(),Oe=this.stack[this.stack.length-1];Oe.value=Te}function W(){const Te=this.stack[this.stack.length-1];if(this.data.inReference){const Oe=this.data.referenceType||"shortcut";Te.type+="Reference",Te.referenceType=Oe,delete Te.url,delete Te.title}else delete Te.identifier,delete Te.label;this.data.referenceType=void 0}function J(){const Te=this.stack[this.stack.length-1];if(this.data.inReference){const Oe=this.data.referenceType||"shortcut";Te.type+="Reference",Te.referenceType=Oe,delete Te.url,delete Te.title}else delete Te.identifier,delete Te.label;this.data.referenceType=void 0}function K(Te){const Oe=this.sliceSerialize(Te),lt=this.stack[this.stack.length-2];lt.label=EHe(Oe),lt.identifier=b8(Oe).toLowerCase()}function Z(){const Te=this.stack[this.stack.length-1],Oe=this.resume(),lt=this.stack[this.stack.length-1];if(this.data.inReference=!0,lt.type==="link"){const _t=Te.children;lt.children=_t}else lt.alt=Oe}function U(){const Te=this.resume(),Oe=this.stack[this.stack.length-1];Oe.url=Te}function L(){const Te=this.resume(),Oe=this.stack[this.stack.length-1];Oe.title=Te}function Y(){this.data.inReference=void 0}function j(){this.data.referenceType="collapsed"}function G(Te){const Oe=this.resume(),lt=this.stack[this.stack.length-1];lt.label=Oe,lt.identifier=b8(this.sliceSerialize(Te)).toLowerCase(),this.data.referenceType="full"}function X(Te){this.data.characterReferenceType=Te.type}function ne(Te){const Oe=this.sliceSerialize(Te),lt=this.data.characterReferenceType;let _t;lt?(_t=vHe(Oe,lt==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):_t=cH(Oe);const St=this.stack[this.stack.length-1];St.value+=_t}function pe(Te){const Oe=this.stack.pop();Oe.position.end=Sm(Te.end)}function de(Te){N.call(this,Te);const Oe=this.stack[this.stack.length-1];Oe.url=this.sliceSerialize(Te)}function xe(Te){N.call(this,Te);const Oe=this.stack[this.stack.length-1];Oe.url="mailto:"+this.sliceSerialize(Te)}function Ce(){return{type:"blockquote",children:[]}}function ue(){return{type:"code",lang:null,meta:null,value:""}}function se(){return{type:"inlineCode",value:""}}function me(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function be(){return{type:"emphasis",children:[]}}function Le(){return{type:"heading",depth:0,children:[]}}function Ue(){return{type:"break"}}function Ne(){return{type:"html",value:""}}function je(){return{type:"image",title:null,url:"",alt:null}}function Ke(){return{type:"link",title:null,url:"",children:[]}}function ut(Te){return{type:"list",ordered:Te.type==="listOrdered",start:null,spread:Te._spread,children:[]}}function pt(Te){return{type:"listItem",spread:Te._spread,checked:null,children:[]}}function xt(){return{type:"paragraph",children:[]}}function De(){return{type:"strong",children:[]}}function wt(){return{type:"text",value:""}}function Kt(){return{type:"thematicBreak"}}}function Sm(e){return{line:e.line,column:e.column,offset:e.offset}}function eye(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?eye(e,r):SHe(e,r)}}function SHe(e,t){let n;for(n in t)if(Zge.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function pne(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+UT({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+UT({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+UT({start:t.start,end:t.end})+") is still open")}function AHe(e){const t=this;t.parser=n;function n(r){return THe(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function kHe(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function IHe(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function RHe(e,t){const n=t.value?t.value+`
`:"",r={};t.lang&&(r.className=["language-"+t.lang]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(i.data={meta:t.meta}),e.patch(t,i),i=e.applyData(t,i),i={type:"element",tagName:"pre",properties:{},children:[i]},e.patch(t,i),i}function DHe(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function PHe(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const mne=NHe(/[\dA-Za-z]/);function NHe(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function qw(e){const t=[];let n=-1,r=0,i=0;for(;++n<e.length;){const s=e.charCodeAt(n);let o="";if(s===37&&mne(e.charCodeAt(n+1))&&mne(e.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const a=e.charCodeAt(n+1);s<56320&&a>56319&&a<57344?(o=String.fromCharCode(s,a),i=1):o=""}else o=String.fromCharCode(s);o&&(t.push(e.slice(r,n),encodeURIComponent(o)),r=n+i+1,o=""),i&&(n+=i,i=0)}return t.join("")+e.slice(r)}function OHe(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),i=qw(r.toLowerCase()),s=e.footnoteOrder.indexOf(r);let o,a=e.footnoteCounts.get(r);a===void 0?(a=0,e.footnoteOrder.push(r),o=e.footnoteOrder.length):o=s+1,a+=1,e.footnoteCounts.set(r,a);const u={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};e.patch(t,u);const l={type:"element",tagName:"sup",properties:{},children:[u]};return e.patch(t,l),e.applyData(t,l)}function $He(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function MHe(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function tye(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const i=e.all(t),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift({type:"text",value:"["});const o=i[i.length-1];return o&&o.type==="text"?o.value+=r:i.push({type:"text",value:r}),i}function LHe(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return tye(e,t);const i={src:qw(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"img",properties:i,children:[]};return e.patch(t,s),e.applyData(t,s)}function FHe(e,t){const n={src:qw(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function BHe(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function jHe(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return tye(e,t);const i={href:qw(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"a",properties:i,children:e.all(t)};return e.patch(t,s),e.applyData(t,s)}function zHe(e,t){const n={href:qw(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function UHe(e,t,n){const r=e.all(t),i=n?VHe(n):nye(t),s={},o=[];if(typeof t.checked=="boolean"){const c=r[0];let d;c&&c.type==="element"&&c.tagName==="p"?d=c:(d={type:"element",tagName:"p",properties:{},children:[]},r.unshift(d)),d.children.length>0&&d.children.unshift({type:"text",value:" "}),d.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const c=r[a];(i||a!==0||c.type!=="element"||c.tagName!=="p")&&o.push({type:"text",value:`
`}),c.type==="element"&&c.tagName==="p"&&!i?o.push(...c.children):o.push(c)}const u=r[r.length-1];u&&(i||u.type!=="element"||u.tagName!=="p")&&o.push({type:"text",value:`
`});const l={type:"element",tagName:"li",properties:s,children:o};return e.patch(t,l),e.applyData(t,l)}function VHe(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=nye(n[r])}return t}function nye(e){const t=e.spread;return t??e.children.length>1}function HHe(e,t){const n={},r=e.all(t);let i=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++i<r.length;){const o=r[i];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,s),e.applyData(t,s)}function qHe(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function WHe(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function GHe(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function YHe(e,t){const n=e.all(t),r=n.shift(),i=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],o),i.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},a=eh(t.children[1]),u=Q4(t.children[t.children.length-1]);a&&u&&(o.position={start:a,end:u}),i.push(o)}const s={type:"element",tagName:"table",properties:{},children:e.wrap(i,!0)};return e.patch(t,s),e.applyData(t,s)}function KHe(e,t,n){const r=n?n.children:void 0,s=(r?r.indexOf(t):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,a=o?o.length:t.children.length;let u=-1;const l=[];for(;++u<a;){const d=t.children[u],f={},h=o?o[u]:void 0;h&&(f.align=h);let p={type:"element",tagName:s,properties:f,children:[]};d&&(p.children=e.all(d),e.patch(d,p),p=e.applyData(d,p)),l.push(p)}const c={type:"element",tagName:"tr",properties:{},children:e.wrap(l,!0)};return e.patch(t,c),e.applyData(t,c)}function XHe(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const gne=9,yne=32;function QHe(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),i=0;const s=[];for(;r;)s.push(bne(t.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(t);return s.push(bne(t.slice(i),i>0,!1)),s.join("")}function bne(e,t,n){let r=0,i=e.length;if(t){let s=e.codePointAt(r);for(;s===gne||s===yne;)r++,s=e.codePointAt(r)}if(n){let s=e.codePointAt(i-1);for(;s===gne||s===yne;)i--,s=e.codePointAt(i-1)}return i>r?e.slice(r,i):""}function JHe(e,t){const n={type:"text",value:QHe(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function ZHe(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const eqe={blockquote:kHe,break:IHe,code:RHe,delete:DHe,emphasis:PHe,footnoteReference:OHe,heading:$He,html:MHe,imageReference:LHe,image:FHe,inlineCode:BHe,linkReference:jHe,link:zHe,listItem:UHe,list:HHe,paragraph:qHe,root:WHe,strong:GHe,table:YHe,tableCell:XHe,tableRow:KHe,text:JHe,thematicBreak:ZHe,toml:Mk,yaml:Mk,definition:Mk,footnoteDefinition:Mk};function Mk(){}const rye=-1,Z4=0,LP=1,FP=2,mH=3,gH=4,yH=5,bH=6,iye=7,sye=8,vne=typeof self=="object"?self:globalThis,tqe=(e,t)=>{const n=(i,s)=>(e.set(s,i),i),r=i=>{if(e.has(i))return e.get(i);const[s,o]=t[i];switch(s){case Z4:case rye:return n(o,i);case LP:{const a=n([],i);for(const u of o)a.push(r(u));return a}case FP:{const a=n({},i);for(const[u,l]of o)a[r(u)]=r(l);return a}case mH:return n(new Date(o),i);case gH:{const{source:a,flags:u}=o;return n(new RegExp(a,u),i)}case yH:{const a=n(new Map,i);for(const[u,l]of o)a.set(r(u),r(l));return a}case bH:{const a=n(new Set,i);for(const u of o)a.add(r(u));return a}case iye:{const{name:a,message:u}=o;return n(new vne[a](u),i)}case sye:return n(BigInt(o),i);case"BigInt":return n(Object(BigInt(o)),i)}return n(new vne[s](o),i)};return r},xne=e=>tqe(new Map,e)(0),rv="",{toString:nqe}={},{keys:rqe}=Object,p_=e=>{const t=typeof e;if(t!=="object"||!e)return[Z4,t];const n=nqe.call(e).slice(8,-1);switch(n){case"Array":return[LP,rv];case"Object":return[FP,rv];case"Date":return[mH,rv];case"RegExp":return[gH,rv];case"Map":return[yH,rv];case"Set":return[bH,rv]}return n.includes("Array")?[LP,n]:n.includes("Error")?[iye,n]:[FP,n]},Lk=([e,t])=>e===Z4&&(t==="function"||t==="symbol"),iqe=(e,t,n,r)=>{const i=(o,a)=>{const u=r.push(o)-1;return n.set(a,u),u},s=o=>{if(n.has(o))return n.get(o);let[a,u]=p_(o);switch(a){case Z4:{let c=o;switch(u){case"bigint":a=sye,c=o.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+u);c=null;break;case"undefined":return i([rye],o)}return i([a,c],o)}case LP:{if(u)return i([u,[...o]],o);const c=[],d=i([a,c],o);for(const f of o)c.push(s(f));return d}case FP:{if(u)switch(u){case"BigInt":return i([u,o.toString()],o);case"Boolean":case"Number":case"String":return i([u,o.valueOf()],o)}if(t&&"toJSON"in o)return s(o.toJSON());const c=[],d=i([a,c],o);for(const f of rqe(o))(e||!Lk(p_(o[f])))&&c.push([s(f),s(o[f])]);return d}case mH:return i([a,o.toISOString()],o);case gH:{const{source:c,flags:d}=o;return i([a,{source:c,flags:d}],o)}case yH:{const c=[],d=i([a,c],o);for(const[f,h]of o)(e||!(Lk(p_(f))||Lk(p_(h))))&&c.push([s(f),s(h)]);return d}case bH:{const c=[],d=i([a,c],o);for(const f of o)(e||!Lk(p_(f)))&&c.push(s(f));return d}}const{message:l}=o;return i([a,{name:u,message:l}],o)};return s},wne=(e,{json:t,lossy:n}={})=>{const r=[];return iqe(!(t||n),!!t,new Map,r)(e),r},Ax=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?xne(wne(e,t)):structuredClone(e):(e,t)=>xne(wne(e,t));function sqe(e,t){const n=[{type:"text",value:""}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function oqe(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function aqe(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||sqe,r=e.options.footnoteBackLabel||oqe,i=e.options.footnoteLabel||"Footnotes",s=e.options.footnoteLabelTagName||"h2",o=e.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let u=-1;for(;++u<e.footnoteOrder.length;){const l=e.footnoteById.get(e.footnoteOrder[u]);if(!l)continue;const c=e.all(l),d=String(l.identifier).toUpperCase(),f=qw(d.toLowerCase());let h=0;const p=[],m=e.footnoteCounts.get(d);for(;m!==void 0&&++h<=m;){p.length>0&&p.push({type:"text",value:" "});let b=typeof n=="string"?n:n(u,h);typeof b=="string"&&(b={type:"text",value:b}),p.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+f+(h>1?"-"+h:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(u,h),className:["data-footnote-backref"]},children:Array.isArray(b)?b:[b]})}const y=c[c.length-1];if(y&&y.type==="element"&&y.tagName==="p"){const b=y.children[y.children.length-1];b&&b.type==="text"?b.value+=" ":y.children.push({type:"text",value:" "}),y.children.push(...p)}else c.push(...p);const v={type:"element",tagName:"li",properties:{id:t+"fn-"+f},children:e.wrap(c,!0)};e.patch(l,v),a.push(v)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...Ax(o),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(a,!0)},{type:"text",value:`
`}]}}const oye=function(e){if(e==null)return dqe;if(typeof e=="function")return eO(e);if(typeof e=="object")return Array.isArray(e)?uqe(e):lqe(e);if(typeof e=="string")return cqe(e);throw new Error("Expected function, string, or object as test")};function uqe(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=oye(e[n]);return eO(r);function r(...i){let s=-1;for(;++s<t.length;)if(t[s].apply(this,i))return!0;return!1}}function lqe(e){const t=e;return eO(n);function n(r){const i=r;let s;for(s in e)if(i[s]!==t[s])return!1;return!0}}function cqe(e){return eO(t);function t(n){return n&&n.type===e}}function eO(e){return t;function t(n,r,i){return!!(fqe(n)&&e.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function dqe(){return!0}function fqe(e){return e!==null&&typeof e=="object"&&"type"in e}const aye=[],hqe=!0,Ene=!1,pqe="skip";function mqe(e,t,n,r){let i;typeof t=="function"&&typeof n!="function"?(r=n,n=t):i=t;const s=oye(i),o=r?-1:1;a(e,void 0,[])();function a(u,l,c){const d=u&&typeof u=="object"?u:{};if(typeof d.type=="string"){const h=typeof d.tagName=="string"?d.tagName:typeof d.name=="string"?d.name:void 0;Object.defineProperty(f,"name",{value:"node ("+(u.type+(h?"<"+h+">":""))+")"})}return f;function f(){let h=aye,p,m,y;if((!t||s(u,l,c[c.length-1]||void 0))&&(h=gqe(n(u,c)),h[0]===Ene))return h;if("children"in u&&u.children){const v=u;if(v.children&&h[0]!==pqe)for(m=(r?v.children.length:-1)+o,y=c.concat(v);m>-1&&m<v.children.length;){const b=v.children[m];if(p=a(b,m,y)(),p[0]===Ene)return p;m=typeof p[1]=="number"?p[1]:m+o}}return h}}}function gqe(e){return Array.isArray(e)?e:typeof e=="number"?[hqe,e]:e==null?aye:[e]}function vH(e,t,n,r){let i,s,o;typeof t=="function"&&typeof n!="function"?(s=void 0,o=t,i=n):(s=t,o=n,i=r),mqe(e,s,a,i);function a(u,l){const c=l[l.length-1],d=c?c.children.indexOf(u):void 0;return o(u,d,c)}}const tB={}.hasOwnProperty,yqe={};function bqe(e,t){const n=t||yqe,r=new Map,i=new Map,s=new Map,o={...eqe,...n.handlers},a={all:l,applyData:xqe,definitionById:r,footnoteById:i,footnoteCounts:s,footnoteOrder:[],handlers:o,one:u,options:n,patch:vqe,wrap:Eqe};return vH(e,function(c){if(c.type==="definition"||c.type==="footnoteDefinition"){const d=c.type==="definition"?r:i,f=String(c.identifier).toUpperCase();d.has(f)||d.set(f,c)}}),a;function u(c,d){const f=c.type,h=a.handlers[f];if(tB.call(a.handlers,f)&&h)return h(a,c,d);if(a.options.passThrough&&a.options.passThrough.includes(f)){if("children"in c){const{children:m,...y}=c,v=Ax(y);return v.children=a.all(c),v}return Ax(c)}return(a.options.unknownHandler||wqe)(a,c,d)}function l(c){const d=[];if("children"in c){const f=c.children;let h=-1;for(;++h<f.length;){const p=a.one(f[h],c);if(p){if(h&&f[h-1].type==="break"&&(!Array.isArray(p)&&p.type==="text"&&(p.value=_ne(p.value)),!Array.isArray(p)&&p.type==="element")){const m=p.children[0];m&&m.type==="text"&&(m.value=_ne(m.value))}Array.isArray(p)?d.push(...p):d.push(p)}}}return d}}function vqe(e,t){e.position&&(t.position=Mze(e))}function xqe(e,t){let n=t;if(e&&e.data){const r=e.data.hName,i=e.data.hChildren,s=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const o="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:o}}n.type==="element"&&s&&Object.assign(n.properties,Ax(s)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function wqe(e,t){const n=t.data||{},r="value"in t&&!(tB.call(n,"hProperties")||tB.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function Eqe(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function _ne(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function Tne(e,t){const n=bqe(e,t),r=n.one(e,void 0),i=aqe(n),s=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&s.children.push({type:"text",value:`
`},i),s}function _qe(e,t){return e&&"run"in e?async function(n,r){const i=Tne(n,{file:r,...t});await e.run(i,r)}:function(n,r){return Tne(n,{file:r,...t||e})}}function Cne(e){if(e)throw e}var v8,Sne;function Tqe(){if(Sne)return v8;Sne=1;var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=function(l){return typeof Array.isArray=="function"?Array.isArray(l):t.call(l)==="[object Array]"},s=function(l){if(!l||t.call(l)!=="[object Object]")return!1;var c=e.call(l,"constructor"),d=l.constructor&&l.constructor.prototype&&e.call(l.constructor.prototype,"isPrototypeOf");if(l.constructor&&!c&&!d)return!1;var f;for(f in l);return typeof f>"u"||e.call(l,f)},o=function(l,c){n&&c.name==="__proto__"?n(l,c.name,{enumerable:!0,configurable:!0,value:c.newValue,writable:!0}):l[c.name]=c.newValue},a=function(l,c){if(c==="__proto__")if(e.call(l,c)){if(r)return r(l,c).value}else return;return l[c]};return v8=function u(){var l,c,d,f,h,p,m=arguments[0],y=1,v=arguments.length,b=!1;for(typeof m=="boolean"&&(b=m,m=arguments[1]||{},y=2),(m==null||typeof m!="object"&&typeof m!="function")&&(m={});y<v;++y)if(l=arguments[y],l!=null)for(c in l)d=a(m,c),f=a(l,c),m!==f&&(b&&f&&(s(f)||(h=i(f)))?(h?(h=!1,p=d&&i(d)?d:[]):p=d&&s(d)?d:{},o(m,{name:c,newValue:u(b,p,f)})):typeof f<"u"&&o(m,{name:c,newValue:f}));return m},v8}var Cqe=Tqe();const x8=Tl(Cqe);function nB(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function Sqe(){const e=[],t={run:n,use:r};return t;function n(...i){let s=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);a(null,...i);function a(u,...l){const c=e[++s];let d=-1;if(u){o(u);return}for(;++d<i.length;)(l[d]===null||l[d]===void 0)&&(l[d]=i[d]);i=l,c?Aqe(c,a)(...l):o(null,...l)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),t}}function Aqe(e,t){let n;return r;function r(...o){const a=e.length>o.length;let u;a&&o.push(i);try{u=e.apply(this,o)}catch(l){const c=l;if(a&&n)throw c;return i(c)}a||(u&&u.then&&typeof u.then=="function"?u.then(s,i):u instanceof Error?i(u):s(u))}function i(o,...a){n||(n=!0,t(o,...a))}function s(o){i(null,o)}}const Qd={basename:kqe,dirname:Iqe,extname:Rqe,join:Dqe,sep:"/"};function kqe(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');sS(e);let n=0,r=-1,i=e.length,s;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let o=-1,a=t.length-1;for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),a>-1&&(e.codePointAt(i)===t.codePointAt(a--)?a<0&&(r=i):(a=-1,r=o));return n===r?r=o:r<0&&(r=e.length),e.slice(n,r)}function Iqe(e){if(sS(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function Rqe(e){sS(e);let t=e.length,n=-1,r=0,i=-1,s=0,o;for(;t--;){const a=e.codePointAt(t);if(a===47){if(o){r=t+1;break}continue}n<0&&(o=!0,n=t+1),a===46?i<0?i=t:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":e.slice(i,n)}function Dqe(...e){let t=-1,n;for(;++t<e.length;)sS(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":Pqe(n)}function Pqe(e){sS(e);const t=e.codePointAt(0)===47;let n=Nqe(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function Nqe(e,t){let n="",r=0,i=-1,s=0,o=-1,a,u;for(;++o<=e.length;){if(o<e.length)a=e.codePointAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(u=n.lastIndexOf("/"),u!==n.length-1){u<0?(n="",r=0):(n=n.slice(0,u),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",r=0,i=o,s=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(i+1,o):n=e.slice(i+1,o),r=o-i-1;i=o,s=0}else a===46&&s>-1?s++:s=-1}return n}function sS(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const Oqe={cwd:$qe};function $qe(){return"/"}function rB(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function Mqe(e){if(typeof e=="string")e=new URL(e);else if(!rB(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return Lqe(e)}function Lqe(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const w8=["history","path","basename","stem","extname","dirname"];class uye{constructor(t){let n;t?rB(t)?n={path:t}:typeof t=="string"||Fqe(t)?n={value:t}:n=t:n={},this.cwd=Oqe.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<w8.length;){const s=w8[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)w8.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?Qd.basename(this.path):void 0}set basename(t){_8(t,"basename"),E8(t,"basename"),this.path=Qd.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?Qd.dirname(this.path):void 0}set dirname(t){Ane(this.basename,"dirname"),this.path=Qd.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?Qd.extname(this.path):void 0}set extname(t){if(E8(t,"extname"),Ane(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Qd.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){rB(t)&&(t=Mqe(t)),_8(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?Qd.basename(this.path,this.extname):void 0}set stem(t){_8(t,"stem"),E8(t,"stem"),this.path=Qd.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const i=this.message(t,n,r);throw i.fatal=!0,i}info(t,n,r){const i=this.message(t,n,r);return i.fatal=void 0,i}message(t,n,r){const i=new ba(t,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function E8(e,t){if(e&&e.includes(Qd.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+Qd.sep+"`")}function _8(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function Ane(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function Fqe(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const Bqe=function(e){const r=this.constructor.prototype,i=r[e],s=function(){return i.apply(s,arguments)};Object.setPrototypeOf(s,r);const o=Object.getOwnPropertyNames(i);for(const a of o){const u=Object.getOwnPropertyDescriptor(i,a);u&&Object.defineProperty(s,a,u)}return s},jqe={}.hasOwnProperty;class xH extends Bqe{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=Sqe()}copy(){const t=new xH;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(x8(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(S8("data",this.frozen),this.namespace[t]=n,this):jqe.call(this.namespace,t)&&this.namespace[t]||void 0:t?(S8("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(t,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=Fk(t),r=this.parser||this.Parser;return T8("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),T8("process",this.parser||this.Parser),C8("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(s,o){const a=Fk(t),u=r.parse(a);r.run(u,a,function(c,d,f){if(c||!d||!f)return l(c);const h=d,p=r.stringify(h,f);Vqe(p)?f.value=p:f.result=p,l(c,f)});function l(c,d){c||!d?o(c):s?s(d):n(void 0,d)}}}processSync(t){let n=!1,r;return this.freeze(),T8("processSync",this.parser||this.Parser),C8("processSync",this.compiler||this.Compiler),this.process(t,i),Ine("processSync","process",n),r;function i(s,o){n=!0,Cne(s),r=o}}run(t,n,r){kne(t),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?s(void 0,r):new Promise(s);function s(o,a){const u=Fk(n);i.run(t,u,l);function l(c,d,f){const h=d||t;c?a(c):o?o(h):r(void 0,h,f)}}}runSync(t,n){let r=!1,i;return this.run(t,n,s),Ine("runSync","run",r),i;function s(o,a){Cne(o),i=a,r=!0}}stringify(t,n){this.freeze();const r=Fk(n),i=this.compiler||this.Compiler;return C8("stringify",i),kne(t),i(t,r)}use(t,...n){const r=this.attachers,i=this.namespace;if(S8("use",this.frozen),t!=null)if(typeof t=="function")u(t,n);else if(typeof t=="object")Array.isArray(t)?a(t):o(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function s(l){if(typeof l=="function")u(l,[]);else if(typeof l=="object")if(Array.isArray(l)){const[c,...d]=l;u(c,d)}else o(l);else throw new TypeError("Expected usable value, not `"+l+"`")}function o(l){if(!("plugins"in l)&&!("settings"in l))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(l.plugins),l.settings&&(i.settings=x8(!0,i.settings,l.settings))}function a(l){let c=-1;if(l!=null)if(Array.isArray(l))for(;++c<l.length;){const d=l[c];s(d)}else throw new TypeError("Expected a list of plugins, not `"+l+"`")}function u(l,c){let d=-1,f=-1;for(;++d<r.length;)if(r[d][0]===l){f=d;break}if(f===-1)r.push([l,...c]);else if(c.length>0){let[h,...p]=c;const m=r[f][1];nB(m)&&nB(h)&&(h=x8(!0,m,h)),r[f]=[l,h,...p]}}}}const zqe=new xH().freeze();function T8(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function C8(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function S8(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function kne(e){if(!nB(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function Ine(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function Fk(e){return Uqe(e)?e:new uye(e)}function Uqe(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function Vqe(e){return typeof e=="string"||Hqe(e)}function Hqe(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const qqe="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",Rne=[],Dne={allowDangerousHtml:!0},Wqe=/^(https?|ircs?|mailto|xmpp)$/i,Gqe=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function Yqe(e){const t=e.allowedElements,n=e.allowElement,r=e.children||"",i=e.className,s=e.components,o=e.disallowedElements,a=e.rehypePlugins||Rne,u=e.remarkPlugins||Rne,l=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...Dne}:Dne,c=e.skipHtml,d=e.unwrapDisallowed,f=e.urlTransform||Kqe,h=zqe().use(AHe).use(u).use(_qe,l).use(a),p=new uye;typeof r=="string"&&(p.value=r);for(const b of Gqe)Object.hasOwn(e,b.from)&&(""+b.from+(b.to?"use `"+b.to+"` instead":"remove it")+qqe+b.id,void 0);const m=h.parse(p);let y=h.runSync(m,p);return i&&(y={type:"element",tagName:"div",properties:{className:i},children:y.type==="root"?y.children:[y]}),vH(y,v),Uze(y,{Fragment:T.Fragment,components:s,ignoreInvalidStyle:!0,jsx:T.jsx,jsxs:T.jsxs,passKeys:!0,passNode:!0});function v(b,w,E){if(b.type==="raw"&&E&&typeof w=="number")return c?E.children.splice(w,1):E.children[w]={type:"text",value:b.value},w;if(b.type==="element"){let _;for(_ in m8)if(Object.hasOwn(m8,_)&&Object.hasOwn(b.properties,_)){const C=b.properties[_],S=m8[_];(S===null||S.includes(b.tagName))&&(b.properties[_]=f(String(C||""),_,b))}}if(b.type==="element"){let _=t?!t.includes(b.tagName):o?o.includes(b.tagName):!1;if(!_&&n&&typeof w=="number"&&(_=!n(b,w,E)),_&&E&&typeof w=="number")return d&&b.children?E.children.splice(w,1,...b.children):E.children.splice(w,1),w}}}function Kqe(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),i=e.indexOf("/");return t===-1||i!==-1&&t>i||n!==-1&&t>n||r!==-1&&t>r||Wqe.test(e.slice(0,t))?e:""}const Pne=/[#.]/g;function Xqe(e,t){const n=e||"",r={};let i=0,s,o;for(;i<n.length;){Pne.lastIndex=i;const a=Pne.exec(n),u=n.slice(i,a?a.index:n.length);u&&(s?s==="#"?r.id=u:Array.isArray(r.className)?r.className.push(u):r.className=[u]:o=u,i+=u.length),a&&(s=a[0],i++)}return{type:"element",tagName:o||t||"div",properties:r,children:[]}}const Qqe=new Set(["button","menu","reset","submit"]),iB={}.hasOwnProperty;function lye(e,t,n){const r=n&&tWe(n);function i(s,o,...a){let u=-1,l;if(s==null){l={type:"root",children:[]};const c=o;a.unshift(c)}else if(l=Xqe(s,t),l.tagName=l.tagName.toLowerCase(),r&&iB.call(r,l.tagName)&&(l.tagName=r[l.tagName]),Jqe(o,l.tagName)){let c;for(c in o)iB.call(o,c)&&Zqe(e,l.properties,c,o[c])}else a.unshift(o);for(;++u<a.length;)sB(l.children,a[u]);return l.type==="element"&&l.tagName==="template"&&(l.content={type:"root",children:l.children},l.children=[]),l}return i}function Jqe(e,t){return e==null||typeof e!="object"||Array.isArray(e)?!1:t==="input"||!e.type||typeof e.type!="string"?!0:"children"in e&&Array.isArray(e.children)?!1:t==="button"?Qqe.has(e.type.toLowerCase()):!("value"in e)}function Zqe(e,t,n,r){const i=X4(e,n);let s=-1,o;if(r!=null){if(typeof r=="number"){if(Number.isNaN(r))return;o=r}else typeof r=="boolean"?o=r:typeof r=="string"?i.spaceSeparated?o=Wte(r):i.commaSeparated?o=zte(r):i.commaOrSpaceSeparated?o=Wte(zte(r).join(" ")):o=Nne(i,i.property,r):Array.isArray(r)?o=r.concat():o=i.property==="style"?eWe(r):String(r);if(Array.isArray(o)){const a=[];for(;++s<o.length;){const u=Nne(i,i.property,o[s]);a[s]=u}o=a}if(i.property==="className"&&Array.isArray(t.className)){const a=o;o=t.className.concat(a)}t[i.property]=o}}function sB(e,t){let n=-1;if(t!=null)if(typeof t=="string"||typeof t=="number")e.push({type:"text",value:String(t)});else if(Array.isArray(t))for(;++n<t.length;)sB(e,t[n]);else if(typeof t=="object"&&"type"in t)t.type==="root"?sB(e,t.children):e.push(t);else throw new Error("Expected node, nodes, or string, got `"+t+"`")}function Nne(e,t,n){if(typeof n=="string"){if(e.number&&n&&!Number.isNaN(Number(n)))return Number(n);if((e.boolean||e.overloadedBoolean)&&(n===""||R2(n)===R2(t)))return!0}return n}function eWe(e){const t=[];let n;for(n in e)iB.call(e,n)&&t.push([n,e[n]].join(": "));return t.join("; ")}function tWe(e){const t={};let n=-1;for(;++n<e.length;)t[e[n].toLowerCase()]=e[n];return t}const nWe=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],rWe=lye(rS,"div"),iWe=lye(ig,"g",nWe),A8=/\r?\n|\r/g;function sWe(e){const t=String(e),n=[];for(A8.lastIndex=0;A8.test(t);)n.push(A8.lastIndex);return n.push(t.length+1),{toPoint:r,toOffset:i};function r(s){let o=-1;if(typeof s=="number"&&s>-1&&s<n[n.length-1]){for(;++o<n.length;)if(n[o]>s)return{line:o+1,column:s-(o>0?n[o-1]:0)+1,offset:s}}}function i(s){const o=s&&s.line,a=s&&s.column;if(typeof o=="number"&&typeof a=="number"&&!Number.isNaN(o)&&!Number.isNaN(a)&&o-1 in n){const u=(n[o-2]||0)+a-1||0;if(u>-1&&u<n[n.length-1])return u}}}const Sy={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},cye={}.hasOwnProperty,oWe=Object.prototype;function aWe(e,t){const n=t;return wH({file:n.file||void 0,location:!1,schema:n.space==="svg"?ig:rS,verbose:n.verbose||!1},e)}function wH(e,t){let n;switch(t.nodeName){case"#comment":{const r=t;return n={type:"comment",value:r.data},GR(e,r,n),n}case"#document":case"#document-fragment":{const r=t,i="mode"in r?r.mode==="quirks"||r.mode==="limited-quirks":!1;if(n={type:"root",children:dye(e,t.childNodes),data:{quirksMode:i}},e.file&&e.location){const s=String(e.file),o=sWe(s),a=o.toPoint(0),u=o.toPoint(s.length);n.position={start:a,end:u}}return n}case"#documentType":{const r=t;return n={type:"doctype"},GR(e,r,n),n}case"#text":{const r=t;return n={type:"text",value:r.value},GR(e,r,n),n}default:return n=uWe(e,t),n}}function dye(e,t){let n=-1;const r=[];for(;++n<t.length;){const i=wH(e,t[n]);r.push(i)}return r}function uWe(e,t){const n=e.schema;e.schema=t.namespaceURI===Sy.svg?ig:rS;let r=-1;const i={};for(;++r<t.attrs.length;){const a=t.attrs[r],u=(a.prefix?a.prefix+":":"")+a.name;cye.call(oWe,u)||(i[u]=a.value)}const o=(e.schema.space==="svg"?iWe:rWe)(t.tagName,i,dye(e,t.childNodes));if(GR(e,t,o),o.tagName==="template"){const a=t,u=a.sourceCodeLocation,l=u&&u.startTag&&$v(u.startTag),c=u&&u.endTag&&$v(u.endTag),d=wH(e,a.content);l&&c&&e.file&&(d.position={start:l.end,end:c.start}),o.content=d}return e.schema=n,o}function GR(e,t,n){if("sourceCodeLocation"in t&&t.sourceCodeLocation&&e.file){const r=lWe(e,n,t.sourceCodeLocation);r&&(e.location=!0,n.position=r)}}function lWe(e,t,n){const r=$v(n);if(t.type==="element"){const i=t.children[t.children.length-1];if(r&&!n.endTag&&i&&i.position&&i.position.end&&(r.end=Object.assign({},i.position.end)),e.verbose){const s={};let o;if(n.attrs)for(o in n.attrs)cye.call(n.attrs,o)&&(s[X4(e.schema,o).property]=$v(n.attrs[o]));n.startTag;const a=$v(n.startTag),u=n.endTag?$v(n.endTag):void 0,l={opening:a};u&&(l.closing=u),l.properties=s,t.data={position:l}}}return r}function $v(e){const t=One({line:e.startLine,column:e.startCol,offset:e.startOffset}),n=One({line:e.endLine,column:e.endCol,offset:e.endOffset});return t||n?{start:t,end:n}:void 0}function One(e){return e.line&&e.column?e:void 0}const $ne={}.hasOwnProperty;function fye(e,t){const n=t||{};function r(i,...s){let o=r.invalid;const a=r.handlers;if(i&&$ne.call(i,e)){const u=String(i[e]);o=$ne.call(a,u)?a[u]:r.unknown}if(o)return o.call(this,i,...s)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}const cWe={}.hasOwnProperty,hye=fye("type",{handlers:{root:fWe,element:yWe,text:mWe,comment:gWe,doctype:pWe}});function dWe(e,t){const r=t.space;return hye(e,r==="svg"?ig:rS)}function fWe(e,t){const n={nodeName:"#document",mode:(e.data||{}).quirksMode?"quirks":"no-quirks",childNodes:[]};return n.childNodes=EH(e.children,n,t),Ww(e,n),n}function hWe(e,t){const n={nodeName:"#document-fragment",childNodes:[]};return n.childNodes=EH(e.children,n,t),Ww(e,n),n}function pWe(e){const t={nodeName:"#documentType",name:"html",publicId:"",systemId:"",parentNode:null};return Ww(e,t),t}function mWe(e){const t={nodeName:"#text",value:e.value,parentNode:null};return Ww(e,t),t}function gWe(e){const t={nodeName:"#comment",data:e.value,parentNode:null};return Ww(e,t),t}function yWe(e,t){const n=t;let r=n;e.type==="element"&&e.tagName.toLowerCase()==="svg"&&n.space==="html"&&(r=ig);const i=[];let s;if(e.properties){for(s in e.properties)if(s!=="children"&&cWe.call(e.properties,s)){const u=bWe(r,s,e.properties[s]);u&&i.push(u)}}const o=r.space,a={nodeName:e.tagName,tagName:e.tagName,attrs:i,namespaceURI:Sy[o],childNodes:[],parentNode:null};return a.childNodes=EH(e.children,a,r),Ww(e,a),e.tagName==="template"&&e.content&&(a.content=hWe(e.content,r)),a}function bWe(e,t,n){const r=X4(e,t);if(n===!1||n===null||n===void 0||typeof n=="number"&&Number.isNaN(n)||!n&&r.boolean)return;Array.isArray(n)&&(n=r.commaSeparated?Age(n):Mge(n));const i={name:r.attribute,value:n===!0?"":String(n)};if(r.space&&r.space!=="html"&&r.space!=="svg"){const s=i.name.indexOf(":");s<0?i.prefix="":(i.name=i.name.slice(s+1),i.prefix=r.attribute.slice(0,s)),i.namespace=Sy[r.space]}return i}function EH(e,t,n){let r=-1;const i=[];if(e)for(;++r<e.length;){const s=hye(e[r],n);s.parentNode=t,i.push(s)}return i}function Ww(e,t){const n=e.position;n&&n.start&&n.end&&(n.start.offset,n.end.offset,t.sourceCodeLocation={startLine:n.start.line,startCol:n.start.column,startOffset:n.start.offset,endLine:n.end.line,endCol:n.end.column,endOffset:n.end.offset})}const vWe=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],xWe=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),li="";var re;(function(e){e[e.EOF=-1]="EOF",e[e.NULL=0]="NULL",e[e.TABULATION=9]="TABULATION",e[e.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",e[e.LINE_FEED=10]="LINE_FEED",e[e.FORM_FEED=12]="FORM_FEED",e[e.SPACE=32]="SPACE",e[e.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",e[e.QUOTATION_MARK=34]="QUOTATION_MARK",e[e.NUMBER_SIGN=35]="NUMBER_SIGN",e[e.AMPERSAND=38]="AMPERSAND",e[e.APOSTROPHE=39]="APOSTROPHE",e[e.HYPHEN_MINUS=45]="HYPHEN_MINUS",e[e.SOLIDUS=47]="SOLIDUS",e[e.DIGIT_0=48]="DIGIT_0",e[e.DIGIT_9=57]="DIGIT_9",e[e.SEMICOLON=59]="SEMICOLON",e[e.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",e[e.EQUALS_SIGN=61]="EQUALS_SIGN",e[e.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",e[e.QUESTION_MARK=63]="QUESTION_MARK",e[e.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",e[e.LATIN_CAPITAL_F=70]="LATIN_CAPITAL_F",e[e.LATIN_CAPITAL_X=88]="LATIN_CAPITAL_X",e[e.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",e[e.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",e[e.GRAVE_ACCENT=96]="GRAVE_ACCENT",e[e.LATIN_SMALL_A=97]="LATIN_SMALL_A",e[e.LATIN_SMALL_F=102]="LATIN_SMALL_F",e[e.LATIN_SMALL_X=120]="LATIN_SMALL_X",e[e.LATIN_SMALL_Z=122]="LATIN_SMALL_Z",e[e.REPLACEMENT_CHARACTER=65533]="REPLACEMENT_CHARACTER"})(re=re||(re={}));const au={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function pye(e){return e>=55296&&e<=57343}function wWe(e){return e>=56320&&e<=57343}function EWe(e,t){return(e-55296)*1024+9216+t}function mye(e){return e!==32&&e!==10&&e!==13&&e!==9&&e!==12&&e>=1&&e<=31||e>=127&&e<=159}function gye(e){return e>=64976&&e<=65007||xWe.has(e)}var ze;(function(e){e.controlCharacterInInputStream="control-character-in-input-stream",e.noncharacterInInputStream="noncharacter-in-input-stream",e.surrogateInInputStream="surrogate-in-input-stream",e.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",e.endTagWithAttributes="end-tag-with-attributes",e.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",e.unexpectedSolidusInTag="unexpected-solidus-in-tag",e.unexpectedNullCharacter="unexpected-null-character",e.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",e.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",e.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",e.missingEndTagName="missing-end-tag-name",e.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",e.unknownNamedCharacterReference="unknown-named-character-reference",e.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",e.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",e.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",e.eofBeforeTagName="eof-before-tag-name",e.eofInTag="eof-in-tag",e.missingAttributeValue="missing-attribute-value",e.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",e.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",e.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",e.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",e.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",e.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",e.missingDoctypePublicIdentifier="missing-doctype-public-identifier",e.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",e.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",e.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",e.cdataInHtmlContent="cdata-in-html-content",e.incorrectlyOpenedComment="incorrectly-opened-comment",e.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",e.eofInDoctype="eof-in-doctype",e.nestedComment="nested-comment",e.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",e.eofInComment="eof-in-comment",e.incorrectlyClosedComment="incorrectly-closed-comment",e.eofInCdata="eof-in-cdata",e.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",e.nullCharacterReference="null-character-reference",e.surrogateCharacterReference="surrogate-character-reference",e.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",e.controlCharacterReference="control-character-reference",e.noncharacterCharacterReference="noncharacter-character-reference",e.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",e.missingDoctypeName="missing-doctype-name",e.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",e.duplicateAttribute="duplicate-attribute",e.nonConformingDoctype="non-conforming-doctype",e.missingDoctype="missing-doctype",e.misplacedDoctype="misplaced-doctype",e.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",e.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",e.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",e.openElementsLeftAfterEof="open-elements-left-after-eof",e.abandonedHeadElementChild="abandoned-head-element-child",e.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",e.nestedNoscriptInHead="nested-noscript-in-head",e.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"})(ze=ze||(ze={}));const _We=65536;class TWe{constructor(t){this.handler=t,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=_We,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(t){const{line:n,col:r,offset:i}=this;return{code:t,startLine:n,endLine:n,startCol:r,endCol:r,startOffset:i,endOffset:i}}_err(t){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(t)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(t){if(this.pos!==this.html.length-1){const n=this.html.charCodeAt(this.pos+1);if(wWe(n))return this.pos++,this._addGap(),EWe(t,n)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,re.EOF;return this._err(ze.surrogateInInputStream),t}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(t,n){this.html.length>0?this.html+=t:this.html=t,this.endOfChunkHit=!1,this.lastChunkWritten=n}insertHtmlAtCurrentPos(t){this.html=this.html.substring(0,this.pos+1)+t+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(t,n){if(this.pos+t.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(n)return this.html.startsWith(t,this.pos);for(let r=0;r<t.length;r++)if((this.html.charCodeAt(this.pos+r)|32)!==t.charCodeAt(r))return!1;return!0}peek(t){const n=this.pos+t;if(n>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,re.EOF;const r=this.html.charCodeAt(n);return r===re.CARRIAGE_RETURN?re.LINE_FEED:r}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,re.EOF;let t=this.html.charCodeAt(this.pos);return t===re.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,re.LINE_FEED):t===re.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,pye(t)&&(t=this._processSurrogate(t)),this.handler.onParseError===null||t>31&&t<127||t===re.LINE_FEED||t===re.CARRIAGE_RETURN||t>159&&t<64976||this._checkForProblematicCharacters(t),t)}_checkForProblematicCharacters(t){mye(t)?this._err(ze.controlCharacterInInputStream):gye(t)&&this._err(ze.noncharacterInInputStream)}retreat(t){for(this.pos-=t;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var Rn;(function(e){e[e.CHARACTER=0]="CHARACTER",e[e.NULL_CHARACTER=1]="NULL_CHARACTER",e[e.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",e[e.START_TAG=3]="START_TAG",e[e.END_TAG=4]="END_TAG",e[e.COMMENT=5]="COMMENT",e[e.DOCTYPE=6]="DOCTYPE",e[e.EOF=7]="EOF",e[e.HIBERNATION=8]="HIBERNATION"})(Rn=Rn||(Rn={}));function yye(e,t){for(let n=e.attrs.length-1;n>=0;n--)if(e.attrs[n].name===t)return e.attrs[n].value;return null}const Rm=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(e=>e.charCodeAt(0))),CWe=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(e=>e.charCodeAt(0)));var k8;const SWe=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),AWe=(k8=String.fromCodePoint)!==null&&k8!==void 0?k8:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|e&1023),t+=String.fromCharCode(e),t};function kWe(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=SWe.get(e))!==null&&t!==void 0?t:e}var Ys;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(Ys||(Ys={}));const IWe=32;var hf;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(hf||(hf={}));function oB(e){return e>=Ys.ZERO&&e<=Ys.NINE}function RWe(e){return e>=Ys.UPPER_A&&e<=Ys.UPPER_F||e>=Ys.LOWER_A&&e<=Ys.LOWER_F}function DWe(e){return e>=Ys.UPPER_A&&e<=Ys.UPPER_Z||e>=Ys.LOWER_A&&e<=Ys.LOWER_Z||oB(e)}function PWe(e){return e===Ys.EQUALS||DWe(e)}var Us;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(Us||(Us={}));var yy;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(yy||(yy={}));class NWe{constructor(t,n,r){this.decodeTree=t,this.emitCodePoint=n,this.errors=r,this.state=Us.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=yy.Strict}startEntity(t){this.decodeMode=t,this.state=Us.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,n){switch(this.state){case Us.EntityStart:return t.charCodeAt(n)===Ys.NUM?(this.state=Us.NumericStart,this.consumed+=1,this.stateNumericStart(t,n+1)):(this.state=Us.NamedEntity,this.stateNamedEntity(t,n));case Us.NumericStart:return this.stateNumericStart(t,n);case Us.NumericDecimal:return this.stateNumericDecimal(t,n);case Us.NumericHex:return this.stateNumericHex(t,n);case Us.NamedEntity:return this.stateNamedEntity(t,n)}}stateNumericStart(t,n){return n>=t.length?-1:(t.charCodeAt(n)|IWe)===Ys.LOWER_X?(this.state=Us.NumericHex,this.consumed+=1,this.stateNumericHex(t,n+1)):(this.state=Us.NumericDecimal,this.stateNumericDecimal(t,n))}addToNumericResult(t,n,r,i){if(n!==r){const s=r-n;this.result=this.result*Math.pow(i,s)+parseInt(t.substr(n,s),i),this.consumed+=s}}stateNumericHex(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(oB(i)||RWe(i))n+=1;else return this.addToNumericResult(t,r,n,16),this.emitNumericEntity(i,3)}return this.addToNumericResult(t,r,n,16),-1}stateNumericDecimal(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(oB(i))n+=1;else return this.addToNumericResult(t,r,n,10),this.emitNumericEntity(i,2)}return this.addToNumericResult(t,r,n,10),-1}emitNumericEntity(t,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===Ys.SEMI)this.consumed+=1;else if(this.decodeMode===yy.Strict)return 0;return this.emitCodePoint(kWe(this.result),this.consumed),this.errors&&(t!==Ys.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,n){const{decodeTree:r}=this;let i=r[this.treeIndex],s=(i&hf.VALUE_LENGTH)>>14;for(;n<t.length;n++,this.excess++){const o=t.charCodeAt(n);if(this.treeIndex=vye(r,i,this.treeIndex+Math.max(1,s),o),this.treeIndex<0)return this.result===0||this.decodeMode===yy.Attribute&&(s===0||PWe(o))?0:this.emitNotTerminatedNamedEntity();if(i=r[this.treeIndex],s=(i&hf.VALUE_LENGTH)>>14,s!==0){if(o===Ys.SEMI)return this.emitNamedEntityData(this.treeIndex,s,this.consumed+this.excess);this.decodeMode!==yy.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:n,decodeTree:r}=this,i=(r[n]&hf.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,i,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,n,r){const{decodeTree:i}=this;return this.emitCodePoint(n===1?i[t]&~hf.VALUE_LENGTH:i[t+1],r),n===3&&this.emitCodePoint(i[t+2],r),r}end(){var t;switch(this.state){case Us.NamedEntity:return this.result!==0&&(this.decodeMode!==yy.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case Us.NumericDecimal:return this.emitNumericEntity(0,2);case Us.NumericHex:return this.emitNumericEntity(0,3);case Us.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case Us.EntityStart:return 0}}}function bye(e){let t="";const n=new NWe(e,r=>t+=AWe(r));return function(i,s){let o=0,a=0;for(;(a=i.indexOf("&",a))>=0;){t+=i.slice(o,a),n.startEntity(s);const l=n.write(i,a+1);if(l<0){o=a+n.end();break}o=a+l,a=l===0?o+1:o}const u=t+i.slice(o);return t="",u}}function vye(e,t,n,r){const i=(t&hf.BRANCH_LENGTH)>>7,s=t&hf.JUMP_TABLE;if(i===0)return s!==0&&r===s?n:-1;if(s){const u=r-s;return u<0||u>=i?-1:e[n+u]-1}let o=n,a=o+i-1;for(;o<=a;){const u=o+a>>>1,l=e[u];if(l<r)o=u+1;else if(l>r)a=u-1;else return e[u+i]}return-1}bye(Rm);bye(CWe);var Xe;(function(e){e.HTML="http://www.w3.org/1999/xhtml",e.MATHML="http://www.w3.org/1998/Math/MathML",e.SVG="http://www.w3.org/2000/svg",e.XLINK="http://www.w3.org/1999/xlink",e.XML="http://www.w3.org/XML/1998/namespace",e.XMLNS="http://www.w3.org/2000/xmlns/"})(Xe=Xe||(Xe={}));var u0;(function(e){e.TYPE="type",e.ACTION="action",e.ENCODING="encoding",e.PROMPT="prompt",e.NAME="name",e.COLOR="color",e.FACE="face",e.SIZE="size"})(u0=u0||(u0={}));var Zu;(function(e){e.NO_QUIRKS="no-quirks",e.QUIRKS="quirks",e.LIMITED_QUIRKS="limited-quirks"})(Zu=Zu||(Zu={}));var Re;(function(e){e.A="a",e.ADDRESS="address",e.ANNOTATION_XML="annotation-xml",e.APPLET="applet",e.AREA="area",e.ARTICLE="article",e.ASIDE="aside",e.B="b",e.BASE="base",e.BASEFONT="basefont",e.BGSOUND="bgsound",e.BIG="big",e.BLOCKQUOTE="blockquote",e.BODY="body",e.BR="br",e.BUTTON="button",e.CAPTION="caption",e.CENTER="center",e.CODE="code",e.COL="col",e.COLGROUP="colgroup",e.DD="dd",e.DESC="desc",e.DETAILS="details",e.DIALOG="dialog",e.DIR="dir",e.DIV="div",e.DL="dl",e.DT="dt",e.EM="em",e.EMBED="embed",e.FIELDSET="fieldset",e.FIGCAPTION="figcaption",e.FIGURE="figure",e.FONT="font",e.FOOTER="footer",e.FOREIGN_OBJECT="foreignObject",e.FORM="form",e.FRAME="frame",e.FRAMESET="frameset",e.H1="h1",e.H2="h2",e.H3="h3",e.H4="h4",e.H5="h5",e.H6="h6",e.HEAD="head",e.HEADER="header",e.HGROUP="hgroup",e.HR="hr",e.HTML="html",e.I="i",e.IMG="img",e.IMAGE="image",e.INPUT="input",e.IFRAME="iframe",e.KEYGEN="keygen",e.LABEL="label",e.LI="li",e.LINK="link",e.LISTING="listing",e.MAIN="main",e.MALIGNMARK="malignmark",e.MARQUEE="marquee",e.MATH="math",e.MENU="menu",e.META="meta",e.MGLYPH="mglyph",e.MI="mi",e.MO="mo",e.MN="mn",e.MS="ms",e.MTEXT="mtext",e.NAV="nav",e.NOBR="nobr",e.NOFRAMES="noframes",e.NOEMBED="noembed",e.NOSCRIPT="noscript",e.OBJECT="object",e.OL="ol",e.OPTGROUP="optgroup",e.OPTION="option",e.P="p",e.PARAM="param",e.PLAINTEXT="plaintext",e.PRE="pre",e.RB="rb",e.RP="rp",e.RT="rt",e.RTC="rtc",e.RUBY="ruby",e.S="s",e.SCRIPT="script",e.SECTION="section",e.SELECT="select",e.SOURCE="source",e.SMALL="small",e.SPAN="span",e.STRIKE="strike",e.STRONG="strong",e.STYLE="style",e.SUB="sub",e.SUMMARY="summary",e.SUP="sup",e.TABLE="table",e.TBODY="tbody",e.TEMPLATE="template",e.TEXTAREA="textarea",e.TFOOT="tfoot",e.TD="td",e.TH="th",e.THEAD="thead",e.TITLE="title",e.TR="tr",e.TRACK="track",e.TT="tt",e.U="u",e.UL="ul",e.SVG="svg",e.VAR="var",e.WBR="wbr",e.XMP="xmp"})(Re=Re||(Re={}));var M;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.A=1]="A",e[e.ADDRESS=2]="ADDRESS",e[e.ANNOTATION_XML=3]="ANNOTATION_XML",e[e.APPLET=4]="APPLET",e[e.AREA=5]="AREA",e[e.ARTICLE=6]="ARTICLE",e[e.ASIDE=7]="ASIDE",e[e.B=8]="B",e[e.BASE=9]="BASE",e[e.BASEFONT=10]="BASEFONT",e[e.BGSOUND=11]="BGSOUND",e[e.BIG=12]="BIG",e[e.BLOCKQUOTE=13]="BLOCKQUOTE",e[e.BODY=14]="BODY",e[e.BR=15]="BR",e[e.BUTTON=16]="BUTTON",e[e.CAPTION=17]="CAPTION",e[e.CENTER=18]="CENTER",e[e.CODE=19]="CODE",e[e.COL=20]="COL",e[e.COLGROUP=21]="COLGROUP",e[e.DD=22]="DD",e[e.DESC=23]="DESC",e[e.DETAILS=24]="DETAILS",e[e.DIALOG=25]="DIALOG",e[e.DIR=26]="DIR",e[e.DIV=27]="DIV",e[e.DL=28]="DL",e[e.DT=29]="DT",e[e.EM=30]="EM",e[e.EMBED=31]="EMBED",e[e.FIELDSET=32]="FIELDSET",e[e.FIGCAPTION=33]="FIGCAPTION",e[e.FIGURE=34]="FIGURE",e[e.FONT=35]="FONT",e[e.FOOTER=36]="FOOTER",e[e.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",e[e.FORM=38]="FORM",e[e.FRAME=39]="FRAME",e[e.FRAMESET=40]="FRAMESET",e[e.H1=41]="H1",e[e.H2=42]="H2",e[e.H3=43]="H3",e[e.H4=44]="H4",e[e.H5=45]="H5",e[e.H6=46]="H6",e[e.HEAD=47]="HEAD",e[e.HEADER=48]="HEADER",e[e.HGROUP=49]="HGROUP",e[e.HR=50]="HR",e[e.HTML=51]="HTML",e[e.I=52]="I",e[e.IMG=53]="IMG",e[e.IMAGE=54]="IMAGE",e[e.INPUT=55]="INPUT",e[e.IFRAME=56]="IFRAME",e[e.KEYGEN=57]="KEYGEN",e[e.LABEL=58]="LABEL",e[e.LI=59]="LI",e[e.LINK=60]="LINK",e[e.LISTING=61]="LISTING",e[e.MAIN=62]="MAIN",e[e.MALIGNMARK=63]="MALIGNMARK",e[e.MARQUEE=64]="MARQUEE",e[e.MATH=65]="MATH",e[e.MENU=66]="MENU",e[e.META=67]="META",e[e.MGLYPH=68]="MGLYPH",e[e.MI=69]="MI",e[e.MO=70]="MO",e[e.MN=71]="MN",e[e.MS=72]="MS",e[e.MTEXT=73]="MTEXT",e[e.NAV=74]="NAV",e[e.NOBR=75]="NOBR",e[e.NOFRAMES=76]="NOFRAMES",e[e.NOEMBED=77]="NOEMBED",e[e.NOSCRIPT=78]="NOSCRIPT",e[e.OBJECT=79]="OBJECT",e[e.OL=80]="OL",e[e.OPTGROUP=81]="OPTGROUP",e[e.OPTION=82]="OPTION",e[e.P=83]="P",e[e.PARAM=84]="PARAM",e[e.PLAINTEXT=85]="PLAINTEXT",e[e.PRE=86]="PRE",e[e.RB=87]="RB",e[e.RP=88]="RP",e[e.RT=89]="RT",e[e.RTC=90]="RTC",e[e.RUBY=91]="RUBY",e[e.S=92]="S",e[e.SCRIPT=93]="SCRIPT",e[e.SECTION=94]="SECTION",e[e.SELECT=95]="SELECT",e[e.SOURCE=96]="SOURCE",e[e.SMALL=97]="SMALL",e[e.SPAN=98]="SPAN",e[e.STRIKE=99]="STRIKE",e[e.STRONG=100]="STRONG",e[e.STYLE=101]="STYLE",e[e.SUB=102]="SUB",e[e.SUMMARY=103]="SUMMARY",e[e.SUP=104]="SUP",e[e.TABLE=105]="TABLE",e[e.TBODY=106]="TBODY",e[e.TEMPLATE=107]="TEMPLATE",e[e.TEXTAREA=108]="TEXTAREA",e[e.TFOOT=109]="TFOOT",e[e.TD=110]="TD",e[e.TH=111]="TH",e[e.THEAD=112]="THEAD",e[e.TITLE=113]="TITLE",e[e.TR=114]="TR",e[e.TRACK=115]="TRACK",e[e.TT=116]="TT",e[e.U=117]="U",e[e.UL=118]="UL",e[e.SVG=119]="SVG",e[e.VAR=120]="VAR",e[e.WBR=121]="WBR",e[e.XMP=122]="XMP"})(M=M||(M={}));const OWe=new Map([[Re.A,M.A],[Re.ADDRESS,M.ADDRESS],[Re.ANNOTATION_XML,M.ANNOTATION_XML],[Re.APPLET,M.APPLET],[Re.AREA,M.AREA],[Re.ARTICLE,M.ARTICLE],[Re.ASIDE,M.ASIDE],[Re.B,M.B],[Re.BASE,M.BASE],[Re.BASEFONT,M.BASEFONT],[Re.BGSOUND,M.BGSOUND],[Re.BIG,M.BIG],[Re.BLOCKQUOTE,M.BLOCKQUOTE],[Re.BODY,M.BODY],[Re.BR,M.BR],[Re.BUTTON,M.BUTTON],[Re.CAPTION,M.CAPTION],[Re.CENTER,M.CENTER],[Re.CODE,M.CODE],[Re.COL,M.COL],[Re.COLGROUP,M.COLGROUP],[Re.DD,M.DD],[Re.DESC,M.DESC],[Re.DETAILS,M.DETAILS],[Re.DIALOG,M.DIALOG],[Re.DIR,M.DIR],[Re.DIV,M.DIV],[Re.DL,M.DL],[Re.DT,M.DT],[Re.EM,M.EM],[Re.EMBED,M.EMBED],[Re.FIELDSET,M.FIELDSET],[Re.FIGCAPTION,M.FIGCAPTION],[Re.FIGURE,M.FIGURE],[Re.FONT,M.FONT],[Re.FOOTER,M.FOOTER],[Re.FOREIGN_OBJECT,M.FOREIGN_OBJECT],[Re.FORM,M.FORM],[Re.FRAME,M.FRAME],[Re.FRAMESET,M.FRAMESET],[Re.H1,M.H1],[Re.H2,M.H2],[Re.H3,M.H3],[Re.H4,M.H4],[Re.H5,M.H5],[Re.H6,M.H6],[Re.HEAD,M.HEAD],[Re.HEADER,M.HEADER],[Re.HGROUP,M.HGROUP],[Re.HR,M.HR],[Re.HTML,M.HTML],[Re.I,M.I],[Re.IMG,M.IMG],[Re.IMAGE,M.IMAGE],[Re.INPUT,M.INPUT],[Re.IFRAME,M.IFRAME],[Re.KEYGEN,M.KEYGEN],[Re.LABEL,M.LABEL],[Re.LI,M.LI],[Re.LINK,M.LINK],[Re.LISTING,M.LISTING],[Re.MAIN,M.MAIN],[Re.MALIGNMARK,M.MALIGNMARK],[Re.MARQUEE,M.MARQUEE],[Re.MATH,M.MATH],[Re.MENU,M.MENU],[Re.META,M.META],[Re.MGLYPH,M.MGLYPH],[Re.MI,M.MI],[Re.MO,M.MO],[Re.MN,M.MN],[Re.MS,M.MS],[Re.MTEXT,M.MTEXT],[Re.NAV,M.NAV],[Re.NOBR,M.NOBR],[Re.NOFRAMES,M.NOFRAMES],[Re.NOEMBED,M.NOEMBED],[Re.NOSCRIPT,M.NOSCRIPT],[Re.OBJECT,M.OBJECT],[Re.OL,M.OL],[Re.OPTGROUP,M.OPTGROUP],[Re.OPTION,M.OPTION],[Re.P,M.P],[Re.PARAM,M.PARAM],[Re.PLAINTEXT,M.PLAINTEXT],[Re.PRE,M.PRE],[Re.RB,M.RB],[Re.RP,M.RP],[Re.RT,M.RT],[Re.RTC,M.RTC],[Re.RUBY,M.RUBY],[Re.S,M.S],[Re.SCRIPT,M.SCRIPT],[Re.SECTION,M.SECTION],[Re.SELECT,M.SELECT],[Re.SOURCE,M.SOURCE],[Re.SMALL,M.SMALL],[Re.SPAN,M.SPAN],[Re.STRIKE,M.STRIKE],[Re.STRONG,M.STRONG],[Re.STYLE,M.STYLE],[Re.SUB,M.SUB],[Re.SUMMARY,M.SUMMARY],[Re.SUP,M.SUP],[Re.TABLE,M.TABLE],[Re.TBODY,M.TBODY],[Re.TEMPLATE,M.TEMPLATE],[Re.TEXTAREA,M.TEXTAREA],[Re.TFOOT,M.TFOOT],[Re.TD,M.TD],[Re.TH,M.TH],[Re.THEAD,M.THEAD],[Re.TITLE,M.TITLE],[Re.TR,M.TR],[Re.TRACK,M.TRACK],[Re.TT,M.TT],[Re.U,M.U],[Re.UL,M.UL],[Re.SVG,M.SVG],[Re.VAR,M.VAR],[Re.WBR,M.WBR],[Re.XMP,M.XMP]]);function Gw(e){var t;return(t=OWe.get(e))!==null&&t!==void 0?t:M.UNKNOWN}const ft=M,$We={[Xe.HTML]:new Set([ft.ADDRESS,ft.APPLET,ft.AREA,ft.ARTICLE,ft.ASIDE,ft.BASE,ft.BASEFONT,ft.BGSOUND,ft.BLOCKQUOTE,ft.BODY,ft.BR,ft.BUTTON,ft.CAPTION,ft.CENTER,ft.COL,ft.COLGROUP,ft.DD,ft.DETAILS,ft.DIR,ft.DIV,ft.DL,ft.DT,ft.EMBED,ft.FIELDSET,ft.FIGCAPTION,ft.FIGURE,ft.FOOTER,ft.FORM,ft.FRAME,ft.FRAMESET,ft.H1,ft.H2,ft.H3,ft.H4,ft.H5,ft.H6,ft.HEAD,ft.HEADER,ft.HGROUP,ft.HR,ft.HTML,ft.IFRAME,ft.IMG,ft.INPUT,ft.LI,ft.LINK,ft.LISTING,ft.MAIN,ft.MARQUEE,ft.MENU,ft.META,ft.NAV,ft.NOEMBED,ft.NOFRAMES,ft.NOSCRIPT,ft.OBJECT,ft.OL,ft.P,ft.PARAM,ft.PLAINTEXT,ft.PRE,ft.SCRIPT,ft.SECTION,ft.SELECT,ft.SOURCE,ft.STYLE,ft.SUMMARY,ft.TABLE,ft.TBODY,ft.TD,ft.TEMPLATE,ft.TEXTAREA,ft.TFOOT,ft.TH,ft.THEAD,ft.TITLE,ft.TR,ft.TRACK,ft.UL,ft.WBR,ft.XMP]),[Xe.MATHML]:new Set([ft.MI,ft.MO,ft.MN,ft.MS,ft.MTEXT,ft.ANNOTATION_XML]),[Xe.SVG]:new Set([ft.TITLE,ft.FOREIGN_OBJECT,ft.DESC]),[Xe.XLINK]:new Set,[Xe.XML]:new Set,[Xe.XMLNS]:new Set};function xye(e){return e===ft.H1||e===ft.H2||e===ft.H3||e===ft.H4||e===ft.H5||e===ft.H6}Re.STYLE,Re.SCRIPT,Re.XMP,Re.IFRAME,Re.NOEMBED,Re.NOFRAMES,Re.PLAINTEXT;const MWe=new Map([[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);var oe;(function(e){e[e.DATA=0]="DATA",e[e.RCDATA=1]="RCDATA",e[e.RAWTEXT=2]="RAWTEXT",e[e.SCRIPT_DATA=3]="SCRIPT_DATA",e[e.PLAINTEXT=4]="PLAINTEXT",e[e.TAG_OPEN=5]="TAG_OPEN",e[e.END_TAG_OPEN=6]="END_TAG_OPEN",e[e.TAG_NAME=7]="TAG_NAME",e[e.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",e[e.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",e[e.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",e[e.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",e[e.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",e[e.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",e[e.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",e[e.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",e[e.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",e[e.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",e[e.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",e[e.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",e[e.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",e[e.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",e[e.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",e[e.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",e[e.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",e[e.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",e[e.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",e[e.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",e[e.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",e[e.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",e[e.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",e[e.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",e[e.BOGUS_COMMENT=40]="BOGUS_COMMENT",e[e.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",e[e.COMMENT_START=42]="COMMENT_START",e[e.COMMENT_START_DASH=43]="COMMENT_START_DASH",e[e.COMMENT=44]="COMMENT",e[e.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",e[e.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",e[e.COMMENT_END_DASH=49]="COMMENT_END_DASH",e[e.COMMENT_END=50]="COMMENT_END",e[e.COMMENT_END_BANG=51]="COMMENT_END_BANG",e[e.DOCTYPE=52]="DOCTYPE",e[e.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",e[e.DOCTYPE_NAME=54]="DOCTYPE_NAME",e[e.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",e[e.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",e[e.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",e[e.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",e[e.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",e[e.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",e[e.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",e[e.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",e[e.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",e[e.CDATA_SECTION=68]="CDATA_SECTION",e[e.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",e[e.CDATA_SECTION_END=70]="CDATA_SECTION_END",e[e.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",e[e.NAMED_CHARACTER_REFERENCE=72]="NAMED_CHARACTER_REFERENCE",e[e.AMBIGUOUS_AMPERSAND=73]="AMBIGUOUS_AMPERSAND",e[e.NUMERIC_CHARACTER_REFERENCE=74]="NUMERIC_CHARACTER_REFERENCE",e[e.HEXADEMICAL_CHARACTER_REFERENCE_START=75]="HEXADEMICAL_CHARACTER_REFERENCE_START",e[e.HEXADEMICAL_CHARACTER_REFERENCE=76]="HEXADEMICAL_CHARACTER_REFERENCE",e[e.DECIMAL_CHARACTER_REFERENCE=77]="DECIMAL_CHARACTER_REFERENCE",e[e.NUMERIC_CHARACTER_REFERENCE_END=78]="NUMERIC_CHARACTER_REFERENCE_END"})(oe||(oe={}));const Hi={DATA:oe.DATA,RCDATA:oe.RCDATA,RAWTEXT:oe.RAWTEXT,SCRIPT_DATA:oe.SCRIPT_DATA,PLAINTEXT:oe.PLAINTEXT,CDATA_SECTION:oe.CDATA_SECTION};function HT(e){return e>=re.DIGIT_0&&e<=re.DIGIT_9}function nT(e){return e>=re.LATIN_CAPITAL_A&&e<=re.LATIN_CAPITAL_Z}function LWe(e){return e>=re.LATIN_SMALL_A&&e<=re.LATIN_SMALL_Z}function Dm(e){return LWe(e)||nT(e)}function aB(e){return Dm(e)||HT(e)}function wye(e){return e>=re.LATIN_CAPITAL_A&&e<=re.LATIN_CAPITAL_F}function Eye(e){return e>=re.LATIN_SMALL_A&&e<=re.LATIN_SMALL_F}function FWe(e){return HT(e)||wye(e)||Eye(e)}function Bk(e){return e+32}function _ye(e){return e===re.SPACE||e===re.LINE_FEED||e===re.TABULATION||e===re.FORM_FEED}function BWe(e){return e===re.EQUALS_SIGN||aB(e)}function Mne(e){return _ye(e)||e===re.SOLIDUS||e===re.GREATER_THAN_SIGN}class jWe{constructor(t,n){this.options=t,this.handler=n,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=oe.DATA,this.returnState=oe.DATA,this.charRefCode=-1,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new TWe(n),this.currentLocation=this.getCurrentLocation(-1)}_err(t){var n,r;(r=(n=this.handler).onParseError)===null||r===void 0||r.call(n,this.preprocessor.getError(t))}getCurrentLocation(t){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-t,startOffset:this.preprocessor.offset-t,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const t=this._consume();this._ensureHibernation()||this._callState(t)}this.inLoop=!1}}pause(){this.paused=!0}resume(t){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||t==null||t())}write(t,n,r){this.active=!0,this.preprocessor.write(t,n),this._runParsingLoop(),this.paused||r==null||r()}insertHtmlAtCurrentPos(t){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(t),this._runParsingLoop()}_ensureHibernation(){return this.preprocessor.endOfChunkHit?(this._unconsume(this.consumedAfterSnapshot),this.active=!1,!0):!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_unconsume(t){this.consumedAfterSnapshot-=t,this.preprocessor.retreat(t)}_reconsumeInState(t,n){this.state=t,this._callState(n)}_advanceBy(t){this.consumedAfterSnapshot+=t;for(let n=0;n<t;n++)this.preprocessor.advance()}_consumeSequenceIfMatch(t,n){return this.preprocessor.startsWith(t,n)?(this._advanceBy(t.length-1),!0):!1}_createStartTagToken(){this.currentToken={type:Rn.START_TAG,tagName:"",tagID:M.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:Rn.END_TAG,tagName:"",tagID:M.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(t){this.currentToken={type:Rn.COMMENT,data:"",location:this.getCurrentLocation(t)}}_createDoctypeToken(t){this.currentToken={type:Rn.DOCTYPE,name:t,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(t,n){this.currentCharacterToken={type:t,chars:n,location:this.currentLocation}}_createAttr(t){this.currentAttr={name:t,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var t,n;const r=this.currentToken;if(yye(r,this.currentAttr.name)===null){if(r.attrs.push(this.currentAttr),r.location&&this.currentLocation){const i=(t=(n=r.location).attrs)!==null&&t!==void 0?t:n.attrs=Object.create(null);i[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(ze.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(t){this._emitCurrentCharacterToken(t.location),this.currentToken=null,t.location&&(t.location.endLine=this.preprocessor.line,t.location.endCol=this.preprocessor.col+1,t.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const t=this.currentToken;this.prepareToken(t),t.tagID=Gw(t.tagName),t.type===Rn.START_TAG?(this.lastStartTagName=t.tagName,this.handler.onStartTag(t)):(t.attrs.length>0&&this._err(ze.endTagWithAttributes),t.selfClosing&&this._err(ze.endTagWithTrailingSolidus),this.handler.onEndTag(t)),this.preprocessor.dropParsedChunk()}emitCurrentComment(t){this.prepareToken(t),this.handler.onComment(t),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(t){this.prepareToken(t),this.handler.onDoctype(t),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(t){if(this.currentCharacterToken){switch(t&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=t.startLine,this.currentCharacterToken.location.endCol=t.startCol,this.currentCharacterToken.location.endOffset=t.startOffset),this.currentCharacterToken.type){case Rn.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case Rn.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case Rn.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}_emitEOFToken(){const t=this.getCurrentLocation(0);t&&(t.endLine=t.startLine,t.endCol=t.startCol,t.endOffset=t.startOffset),this._emitCurrentCharacterToken(t),this.handler.onEof({type:Rn.EOF,location:t}),this.active=!1}_appendCharToCurrentCharacterToken(t,n){if(this.currentCharacterToken)if(this.currentCharacterToken.type!==t)this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();else{this.currentCharacterToken.chars+=n;return}this._createCharacterToken(t,n)}_emitCodePoint(t){const n=_ye(t)?Rn.WHITESPACE_CHARACTER:t===re.NULL?Rn.NULL_CHARACTER:Rn.CHARACTER;this._appendCharToCurrentCharacterToken(n,String.fromCodePoint(t))}_emitChars(t){this._appendCharToCurrentCharacterToken(Rn.CHARACTER,t)}_matchNamedCharacterReference(t){let n=null,r=0,i=!1;for(let s=0,o=Rm[0];s>=0&&(s=vye(Rm,o,s+1,t),!(s<0));t=this._consume()){r+=1,o=Rm[s];const a=o&hf.VALUE_LENGTH;if(a){const u=(a>>14)-1;if(t!==re.SEMICOLON&&this._isCharacterReferenceInAttribute()&&BWe(this.preprocessor.peek(1))?(n=[re.AMPERSAND],s+=u):(n=u===0?[Rm[s]&~hf.VALUE_LENGTH]:u===1?[Rm[++s]]:[Rm[++s],Rm[++s]],r=0,i=t!==re.SEMICOLON),u===0){this._consume();break}}}return this._unconsume(r),i&&!this.preprocessor.endOfChunkHit&&this._err(ze.missingSemicolonAfterCharacterReference),this._unconsume(1),n}_isCharacterReferenceInAttribute(){return this.returnState===oe.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===oe.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===oe.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(t){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(t):this._emitCodePoint(t)}_callState(t){switch(this.state){case oe.DATA:{this._stateData(t);break}case oe.RCDATA:{this._stateRcdata(t);break}case oe.RAWTEXT:{this._stateRawtext(t);break}case oe.SCRIPT_DATA:{this._stateScriptData(t);break}case oe.PLAINTEXT:{this._statePlaintext(t);break}case oe.TAG_OPEN:{this._stateTagOpen(t);break}case oe.END_TAG_OPEN:{this._stateEndTagOpen(t);break}case oe.TAG_NAME:{this._stateTagName(t);break}case oe.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(t);break}case oe.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(t);break}case oe.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(t);break}case oe.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(t);break}case oe.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(t);break}case oe.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(t);break}case oe.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(t);break}case oe.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(t);break}case oe.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(t);break}case oe.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(t);break}case oe.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(t);break}case oe.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(t);break}case oe.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(t);break}case oe.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(t);break}case oe.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(t);break}case oe.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(t);break}case oe.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(t);break}case oe.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(t);break}case oe.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(t);break}case oe.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(t);break}case oe.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(t);break}case oe.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(t);break}case oe.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(t);break}case oe.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(t);break}case oe.ATTRIBUTE_NAME:{this._stateAttributeName(t);break}case oe.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(t);break}case oe.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(t);break}case oe.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(t);break}case oe.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(t);break}case oe.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(t);break}case oe.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(t);break}case oe.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(t);break}case oe.BOGUS_COMMENT:{this._stateBogusComment(t);break}case oe.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(t);break}case oe.COMMENT_START:{this._stateCommentStart(t);break}case oe.COMMENT_START_DASH:{this._stateCommentStartDash(t);break}case oe.COMMENT:{this._stateComment(t);break}case oe.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(t);break}case oe.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(t);break}case oe.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(t);break}case oe.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(t);break}case oe.COMMENT_END_DASH:{this._stateCommentEndDash(t);break}case oe.COMMENT_END:{this._stateCommentEnd(t);break}case oe.COMMENT_END_BANG:{this._stateCommentEndBang(t);break}case oe.DOCTYPE:{this._stateDoctype(t);break}case oe.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(t);break}case oe.DOCTYPE_NAME:{this._stateDoctypeName(t);break}case oe.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(t);break}case oe.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(t);break}case oe.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(t);break}case oe.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(t);break}case oe.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(t);break}case oe.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(t);break}case oe.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(t);break}case oe.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(t);break}case oe.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(t);break}case oe.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(t);break}case oe.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(t);break}case oe.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(t);break}case oe.BOGUS_DOCTYPE:{this._stateBogusDoctype(t);break}case oe.CDATA_SECTION:{this._stateCdataSection(t);break}case oe.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(t);break}case oe.CDATA_SECTION_END:{this._stateCdataSectionEnd(t);break}case oe.CHARACTER_REFERENCE:{this._stateCharacterReference(t);break}case oe.NAMED_CHARACTER_REFERENCE:{this._stateNamedCharacterReference(t);break}case oe.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(t);break}case oe.NUMERIC_CHARACTER_REFERENCE:{this._stateNumericCharacterReference(t);break}case oe.HEXADEMICAL_CHARACTER_REFERENCE_START:{this._stateHexademicalCharacterReferenceStart(t);break}case oe.HEXADEMICAL_CHARACTER_REFERENCE:{this._stateHexademicalCharacterReference(t);break}case oe.DECIMAL_CHARACTER_REFERENCE:{this._stateDecimalCharacterReference(t);break}case oe.NUMERIC_CHARACTER_REFERENCE_END:{this._stateNumericCharacterReferenceEnd(t);break}default:throw new Error("Unknown state")}}_stateData(t){switch(t){case re.LESS_THAN_SIGN:{this.state=oe.TAG_OPEN;break}case re.AMPERSAND:{this.returnState=oe.DATA,this.state=oe.CHARACTER_REFERENCE;break}case re.NULL:{this._err(ze.unexpectedNullCharacter),this._emitCodePoint(t);break}case re.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRcdata(t){switch(t){case re.AMPERSAND:{this.returnState=oe.RCDATA,this.state=oe.CHARACTER_REFERENCE;break}case re.LESS_THAN_SIGN:{this.state=oe.RCDATA_LESS_THAN_SIGN;break}case re.NULL:{this._err(ze.unexpectedNullCharacter),this._emitChars(li);break}case re.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRawtext(t){switch(t){case re.LESS_THAN_SIGN:{this.state=oe.RAWTEXT_LESS_THAN_SIGN;break}case re.NULL:{this._err(ze.unexpectedNullCharacter),this._emitChars(li);break}case re.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptData(t){switch(t){case re.LESS_THAN_SIGN:{this.state=oe.SCRIPT_DATA_LESS_THAN_SIGN;break}case re.NULL:{this._err(ze.unexpectedNullCharacter),this._emitChars(li);break}case re.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_statePlaintext(t){switch(t){case re.NULL:{this._err(ze.unexpectedNullCharacter),this._emitChars(li);break}case re.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateTagOpen(t){if(Dm(t))this._createStartTagToken(),this.state=oe.TAG_NAME,this._stateTagName(t);else switch(t){case re.EXCLAMATION_MARK:{this.state=oe.MARKUP_DECLARATION_OPEN;break}case re.SOLIDUS:{this.state=oe.END_TAG_OPEN;break}case re.QUESTION_MARK:{this._err(ze.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=oe.BOGUS_COMMENT,this._stateBogusComment(t);break}case re.EOF:{this._err(ze.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(ze.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=oe.DATA,this._stateData(t)}}_stateEndTagOpen(t){if(Dm(t))this._createEndTagToken(),this.state=oe.TAG_NAME,this._stateTagName(t);else switch(t){case re.GREATER_THAN_SIGN:{this._err(ze.missingEndTagName),this.state=oe.DATA;break}case re.EOF:{this._err(ze.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(ze.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=oe.BOGUS_COMMENT,this._stateBogusComment(t)}}_stateTagName(t){const n=this.currentToken;switch(t){case re.SPACE:case re.LINE_FEED:case re.TABULATION:case re.FORM_FEED:{this.state=oe.BEFORE_ATTRIBUTE_NAME;break}case re.SOLIDUS:{this.state=oe.SELF_CLOSING_START_TAG;break}case re.GREATER_THAN_SIGN:{this.state=oe.DATA,this.emitCurrentTagToken();break}case re.NULL:{this._err(ze.unexpectedNullCharacter),n.tagName+=li;break}case re.EOF:{this._err(ze.eofInTag),this._emitEOFToken();break}default:n.tagName+=String.fromCodePoint(nT(t)?Bk(t):t)}}_stateRcdataLessThanSign(t){t===re.SOLIDUS?this.state=oe.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=oe.RCDATA,this._stateRcdata(t))}_stateRcdataEndTagOpen(t){Dm(t)?(this.state=oe.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(t)):(this._emitChars("</"),this.state=oe.RCDATA,this._stateRcdata(t))}handleSpecialEndTag(t){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const n=this.currentToken;switch(n.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case re.SPACE:case re.LINE_FEED:case re.TABULATION:case re.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=oe.BEFORE_ATTRIBUTE_NAME,!1;case re.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=oe.SELF_CLOSING_START_TAG,!1;case re.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=oe.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=oe.RCDATA,this._stateRcdata(t))}_stateRawtextLessThanSign(t){t===re.SOLIDUS?this.state=oe.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=oe.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagOpen(t){Dm(t)?(this.state=oe.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(t)):(this._emitChars("</"),this.state=oe.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=oe.RAWTEXT,this._stateRawtext(t))}_stateScriptDataLessThanSign(t){switch(t){case re.SOLIDUS:{this.state=oe.SCRIPT_DATA_END_TAG_OPEN;break}case re.EXCLAMATION_MARK:{this.state=oe.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=oe.SCRIPT_DATA,this._stateScriptData(t)}}_stateScriptDataEndTagOpen(t){Dm(t)?(this.state=oe.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(t)):(this._emitChars("</"),this.state=oe.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=oe.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStart(t){t===re.HYPHEN_MINUS?(this.state=oe.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=oe.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStartDash(t){t===re.HYPHEN_MINUS?(this.state=oe.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=oe.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscaped(t){switch(t){case re.HYPHEN_MINUS:{this.state=oe.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case re.LESS_THAN_SIGN:{this.state=oe.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case re.NULL:{this._err(ze.unexpectedNullCharacter),this._emitChars(li);break}case re.EOF:{this._err(ze.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataEscapedDash(t){switch(t){case re.HYPHEN_MINUS:{this.state=oe.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case re.LESS_THAN_SIGN:{this.state=oe.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case re.NULL:{this._err(ze.unexpectedNullCharacter),this.state=oe.SCRIPT_DATA_ESCAPED,this._emitChars(li);break}case re.EOF:{this._err(ze.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=oe.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedDashDash(t){switch(t){case re.HYPHEN_MINUS:{this._emitChars("-");break}case re.LESS_THAN_SIGN:{this.state=oe.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case re.GREATER_THAN_SIGN:{this.state=oe.SCRIPT_DATA,this._emitChars(">");break}case re.NULL:{this._err(ze.unexpectedNullCharacter),this.state=oe.SCRIPT_DATA_ESCAPED,this._emitChars(li);break}case re.EOF:{this._err(ze.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=oe.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedLessThanSign(t){t===re.SOLIDUS?this.state=oe.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:Dm(t)?(this._emitChars("<"),this.state=oe.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(t)):(this._emitChars("<"),this.state=oe.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagOpen(t){Dm(t)?(this.state=oe.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(t)):(this._emitChars("</"),this.state=oe.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=oe.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscapeStart(t){if(this.preprocessor.startsWith(au.SCRIPT,!1)&&Mne(this.preprocessor.peek(au.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<au.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=oe.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=oe.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscaped(t){switch(t){case re.HYPHEN_MINUS:{this.state=oe.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case re.LESS_THAN_SIGN:{this.state=oe.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case re.NULL:{this._err(ze.unexpectedNullCharacter),this._emitChars(li);break}case re.EOF:{this._err(ze.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDash(t){switch(t){case re.HYPHEN_MINUS:{this.state=oe.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case re.LESS_THAN_SIGN:{this.state=oe.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case re.NULL:{this._err(ze.unexpectedNullCharacter),this.state=oe.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(li);break}case re.EOF:{this._err(ze.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=oe.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDashDash(t){switch(t){case re.HYPHEN_MINUS:{this._emitChars("-");break}case re.LESS_THAN_SIGN:{this.state=oe.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case re.GREATER_THAN_SIGN:{this.state=oe.SCRIPT_DATA,this._emitChars(">");break}case re.NULL:{this._err(ze.unexpectedNullCharacter),this.state=oe.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(li);break}case re.EOF:{this._err(ze.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=oe.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedLessThanSign(t){t===re.SOLIDUS?(this.state=oe.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=oe.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateScriptDataDoubleEscapeEnd(t){if(this.preprocessor.startsWith(au.SCRIPT,!1)&&Mne(this.preprocessor.peek(au.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<au.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=oe.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=oe.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateBeforeAttributeName(t){switch(t){case re.SPACE:case re.LINE_FEED:case re.TABULATION:case re.FORM_FEED:break;case re.SOLIDUS:case re.GREATER_THAN_SIGN:case re.EOF:{this.state=oe.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case re.EQUALS_SIGN:{this._err(ze.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=oe.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=oe.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateAttributeName(t){switch(t){case re.SPACE:case re.LINE_FEED:case re.TABULATION:case re.FORM_FEED:case re.SOLIDUS:case re.GREATER_THAN_SIGN:case re.EOF:{this._leaveAttrName(),this.state=oe.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case re.EQUALS_SIGN:{this._leaveAttrName(),this.state=oe.BEFORE_ATTRIBUTE_VALUE;break}case re.QUOTATION_MARK:case re.APOSTROPHE:case re.LESS_THAN_SIGN:{this._err(ze.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(t);break}case re.NULL:{this._err(ze.unexpectedNullCharacter),this.currentAttr.name+=li;break}default:this.currentAttr.name+=String.fromCodePoint(nT(t)?Bk(t):t)}}_stateAfterAttributeName(t){switch(t){case re.SPACE:case re.LINE_FEED:case re.TABULATION:case re.FORM_FEED:break;case re.SOLIDUS:{this.state=oe.SELF_CLOSING_START_TAG;break}case re.EQUALS_SIGN:{this.state=oe.BEFORE_ATTRIBUTE_VALUE;break}case re.GREATER_THAN_SIGN:{this.state=oe.DATA,this.emitCurrentTagToken();break}case re.EOF:{this._err(ze.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=oe.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateBeforeAttributeValue(t){switch(t){case re.SPACE:case re.LINE_FEED:case re.TABULATION:case re.FORM_FEED:break;case re.QUOTATION_MARK:{this.state=oe.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case re.APOSTROPHE:{this.state=oe.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case re.GREATER_THAN_SIGN:{this._err(ze.missingAttributeValue),this.state=oe.DATA,this.emitCurrentTagToken();break}default:this.state=oe.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(t)}}_stateAttributeValueDoubleQuoted(t){switch(t){case re.QUOTATION_MARK:{this.state=oe.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case re.AMPERSAND:{this.returnState=oe.ATTRIBUTE_VALUE_DOUBLE_QUOTED,this.state=oe.CHARACTER_REFERENCE;break}case re.NULL:{this._err(ze.unexpectedNullCharacter),this.currentAttr.value+=li;break}case re.EOF:{this._err(ze.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueSingleQuoted(t){switch(t){case re.APOSTROPHE:{this.state=oe.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case re.AMPERSAND:{this.returnState=oe.ATTRIBUTE_VALUE_SINGLE_QUOTED,this.state=oe.CHARACTER_REFERENCE;break}case re.NULL:{this._err(ze.unexpectedNullCharacter),this.currentAttr.value+=li;break}case re.EOF:{this._err(ze.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueUnquoted(t){switch(t){case re.SPACE:case re.LINE_FEED:case re.TABULATION:case re.FORM_FEED:{this._leaveAttrValue(),this.state=oe.BEFORE_ATTRIBUTE_NAME;break}case re.AMPERSAND:{this.returnState=oe.ATTRIBUTE_VALUE_UNQUOTED,this.state=oe.CHARACTER_REFERENCE;break}case re.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=oe.DATA,this.emitCurrentTagToken();break}case re.NULL:{this._err(ze.unexpectedNullCharacter),this.currentAttr.value+=li;break}case re.QUOTATION_MARK:case re.APOSTROPHE:case re.LESS_THAN_SIGN:case re.EQUALS_SIGN:case re.GRAVE_ACCENT:{this._err(ze.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(t);break}case re.EOF:{this._err(ze.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAfterAttributeValueQuoted(t){switch(t){case re.SPACE:case re.LINE_FEED:case re.TABULATION:case re.FORM_FEED:{this._leaveAttrValue(),this.state=oe.BEFORE_ATTRIBUTE_NAME;break}case re.SOLIDUS:{this._leaveAttrValue(),this.state=oe.SELF_CLOSING_START_TAG;break}case re.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=oe.DATA,this.emitCurrentTagToken();break}case re.EOF:{this._err(ze.eofInTag),this._emitEOFToken();break}default:this._err(ze.missingWhitespaceBetweenAttributes),this.state=oe.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateSelfClosingStartTag(t){switch(t){case re.GREATER_THAN_SIGN:{const n=this.currentToken;n.selfClosing=!0,this.state=oe.DATA,this.emitCurrentTagToken();break}case re.EOF:{this._err(ze.eofInTag),this._emitEOFToken();break}default:this._err(ze.unexpectedSolidusInTag),this.state=oe.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateBogusComment(t){const n=this.currentToken;switch(t){case re.GREATER_THAN_SIGN:{this.state=oe.DATA,this.emitCurrentComment(n);break}case re.EOF:{this.emitCurrentComment(n),this._emitEOFToken();break}case re.NULL:{this._err(ze.unexpectedNullCharacter),n.data+=li;break}default:n.data+=String.fromCodePoint(t)}}_stateMarkupDeclarationOpen(t){this._consumeSequenceIfMatch(au.DASH_DASH,!0)?(this._createCommentToken(au.DASH_DASH.length+1),this.state=oe.COMMENT_START):this._consumeSequenceIfMatch(au.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(au.DOCTYPE.length+1),this.state=oe.DOCTYPE):this._consumeSequenceIfMatch(au.CDATA_START,!0)?this.inForeignNode?this.state=oe.CDATA_SECTION:(this._err(ze.cdataInHtmlContent),this._createCommentToken(au.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=oe.BOGUS_COMMENT):this._ensureHibernation()||(this._err(ze.incorrectlyOpenedComment),this._createCommentToken(2),this.state=oe.BOGUS_COMMENT,this._stateBogusComment(t))}_stateCommentStart(t){switch(t){case re.HYPHEN_MINUS:{this.state=oe.COMMENT_START_DASH;break}case re.GREATER_THAN_SIGN:{this._err(ze.abruptClosingOfEmptyComment),this.state=oe.DATA;const n=this.currentToken;this.emitCurrentComment(n);break}default:this.state=oe.COMMENT,this._stateComment(t)}}_stateCommentStartDash(t){const n=this.currentToken;switch(t){case re.HYPHEN_MINUS:{this.state=oe.COMMENT_END;break}case re.GREATER_THAN_SIGN:{this._err(ze.abruptClosingOfEmptyComment),this.state=oe.DATA,this.emitCurrentComment(n);break}case re.EOF:{this._err(ze.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=oe.COMMENT,this._stateComment(t)}}_stateComment(t){const n=this.currentToken;switch(t){case re.HYPHEN_MINUS:{this.state=oe.COMMENT_END_DASH;break}case re.LESS_THAN_SIGN:{n.data+="<",this.state=oe.COMMENT_LESS_THAN_SIGN;break}case re.NULL:{this._err(ze.unexpectedNullCharacter),n.data+=li;break}case re.EOF:{this._err(ze.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+=String.fromCodePoint(t)}}_stateCommentLessThanSign(t){const n=this.currentToken;switch(t){case re.EXCLAMATION_MARK:{n.data+="!",this.state=oe.COMMENT_LESS_THAN_SIGN_BANG;break}case re.LESS_THAN_SIGN:{n.data+="<";break}default:this.state=oe.COMMENT,this._stateComment(t)}}_stateCommentLessThanSignBang(t){t===re.HYPHEN_MINUS?this.state=oe.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=oe.COMMENT,this._stateComment(t))}_stateCommentLessThanSignBangDash(t){t===re.HYPHEN_MINUS?this.state=oe.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=oe.COMMENT_END_DASH,this._stateCommentEndDash(t))}_stateCommentLessThanSignBangDashDash(t){t!==re.GREATER_THAN_SIGN&&t!==re.EOF&&this._err(ze.nestedComment),this.state=oe.COMMENT_END,this._stateCommentEnd(t)}_stateCommentEndDash(t){const n=this.currentToken;switch(t){case re.HYPHEN_MINUS:{this.state=oe.COMMENT_END;break}case re.EOF:{this._err(ze.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=oe.COMMENT,this._stateComment(t)}}_stateCommentEnd(t){const n=this.currentToken;switch(t){case re.GREATER_THAN_SIGN:{this.state=oe.DATA,this.emitCurrentComment(n);break}case re.EXCLAMATION_MARK:{this.state=oe.COMMENT_END_BANG;break}case re.HYPHEN_MINUS:{n.data+="-";break}case re.EOF:{this._err(ze.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--",this.state=oe.COMMENT,this._stateComment(t)}}_stateCommentEndBang(t){const n=this.currentToken;switch(t){case re.HYPHEN_MINUS:{n.data+="--!",this.state=oe.COMMENT_END_DASH;break}case re.GREATER_THAN_SIGN:{this._err(ze.incorrectlyClosedComment),this.state=oe.DATA,this.emitCurrentComment(n);break}case re.EOF:{this._err(ze.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--!",this.state=oe.COMMENT,this._stateComment(t)}}_stateDoctype(t){switch(t){case re.SPACE:case re.LINE_FEED:case re.TABULATION:case re.FORM_FEED:{this.state=oe.BEFORE_DOCTYPE_NAME;break}case re.GREATER_THAN_SIGN:{this.state=oe.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t);break}case re.EOF:{this._err(ze.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ze.missingWhitespaceBeforeDoctypeName),this.state=oe.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t)}}_stateBeforeDoctypeName(t){if(nT(t))this._createDoctypeToken(String.fromCharCode(Bk(t))),this.state=oe.DOCTYPE_NAME;else switch(t){case re.SPACE:case re.LINE_FEED:case re.TABULATION:case re.FORM_FEED:break;case re.NULL:{this._err(ze.unexpectedNullCharacter),this._createDoctypeToken(li),this.state=oe.DOCTYPE_NAME;break}case re.GREATER_THAN_SIGN:{this._err(ze.missingDoctypeName),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=oe.DATA;break}case re.EOF:{this._err(ze.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(t)),this.state=oe.DOCTYPE_NAME}}_stateDoctypeName(t){const n=this.currentToken;switch(t){case re.SPACE:case re.LINE_FEED:case re.TABULATION:case re.FORM_FEED:{this.state=oe.AFTER_DOCTYPE_NAME;break}case re.GREATER_THAN_SIGN:{this.state=oe.DATA,this.emitCurrentDoctype(n);break}case re.NULL:{this._err(ze.unexpectedNullCharacter),n.name+=li;break}case re.EOF:{this._err(ze.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.name+=String.fromCodePoint(nT(t)?Bk(t):t)}}_stateAfterDoctypeName(t){const n=this.currentToken;switch(t){case re.SPACE:case re.LINE_FEED:case re.TABULATION:case re.FORM_FEED:break;case re.GREATER_THAN_SIGN:{this.state=oe.DATA,this.emitCurrentDoctype(n);break}case re.EOF:{this._err(ze.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(au.PUBLIC,!1)?this.state=oe.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(au.SYSTEM,!1)?this.state=oe.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(ze.invalidCharacterSequenceAfterDoctypeName),n.forceQuirks=!0,this.state=oe.BOGUS_DOCTYPE,this._stateBogusDoctype(t))}}_stateAfterDoctypePublicKeyword(t){const n=this.currentToken;switch(t){case re.SPACE:case re.LINE_FEED:case re.TABULATION:case re.FORM_FEED:{this.state=oe.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case re.QUOTATION_MARK:{this._err(ze.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=oe.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case re.APOSTROPHE:{this._err(ze.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=oe.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case re.GREATER_THAN_SIGN:{this._err(ze.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=oe.DATA,this.emitCurrentDoctype(n);break}case re.EOF:{this._err(ze.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ze.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=oe.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case re.SPACE:case re.LINE_FEED:case re.TABULATION:case re.FORM_FEED:break;case re.QUOTATION_MARK:{n.publicId="",this.state=oe.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case re.APOSTROPHE:{n.publicId="",this.state=oe.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case re.GREATER_THAN_SIGN:{this._err(ze.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=oe.DATA,this.emitCurrentDoctype(n);break}case re.EOF:{this._err(ze.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ze.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=oe.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypePublicIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case re.QUOTATION_MARK:{this.state=oe.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case re.NULL:{this._err(ze.unexpectedNullCharacter),n.publicId+=li;break}case re.GREATER_THAN_SIGN:{this._err(ze.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=oe.DATA;break}case re.EOF:{this._err(ze.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateDoctypePublicIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case re.APOSTROPHE:{this.state=oe.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case re.NULL:{this._err(ze.unexpectedNullCharacter),n.publicId+=li;break}case re.GREATER_THAN_SIGN:{this._err(ze.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=oe.DATA;break}case re.EOF:{this._err(ze.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateAfterDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case re.SPACE:case re.LINE_FEED:case re.TABULATION:case re.FORM_FEED:{this.state=oe.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case re.GREATER_THAN_SIGN:{this.state=oe.DATA,this.emitCurrentDoctype(n);break}case re.QUOTATION_MARK:{this._err(ze.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=oe.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case re.APOSTROPHE:{this._err(ze.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=oe.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case re.EOF:{this._err(ze.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ze.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=oe.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBetweenDoctypePublicAndSystemIdentifiers(t){const n=this.currentToken;switch(t){case re.SPACE:case re.LINE_FEED:case re.TABULATION:case re.FORM_FEED:break;case re.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=oe.DATA;break}case re.QUOTATION_MARK:{n.systemId="",this.state=oe.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case re.APOSTROPHE:{n.systemId="",this.state=oe.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case re.EOF:{this._err(ze.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ze.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=oe.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateAfterDoctypeSystemKeyword(t){const n=this.currentToken;switch(t){case re.SPACE:case re.LINE_FEED:case re.TABULATION:case re.FORM_FEED:{this.state=oe.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case re.QUOTATION_MARK:{this._err(ze.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=oe.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case re.APOSTROPHE:{this._err(ze.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=oe.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case re.GREATER_THAN_SIGN:{this._err(ze.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=oe.DATA,this.emitCurrentDoctype(n);break}case re.EOF:{this._err(ze.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ze.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=oe.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case re.SPACE:case re.LINE_FEED:case re.TABULATION:case re.FORM_FEED:break;case re.QUOTATION_MARK:{n.systemId="",this.state=oe.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case re.APOSTROPHE:{n.systemId="",this.state=oe.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case re.GREATER_THAN_SIGN:{this._err(ze.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=oe.DATA,this.emitCurrentDoctype(n);break}case re.EOF:{this._err(ze.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ze.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=oe.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypeSystemIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case re.QUOTATION_MARK:{this.state=oe.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case re.NULL:{this._err(ze.unexpectedNullCharacter),n.systemId+=li;break}case re.GREATER_THAN_SIGN:{this._err(ze.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=oe.DATA;break}case re.EOF:{this._err(ze.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateDoctypeSystemIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case re.APOSTROPHE:{this.state=oe.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case re.NULL:{this._err(ze.unexpectedNullCharacter),n.systemId+=li;break}case re.GREATER_THAN_SIGN:{this._err(ze.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=oe.DATA;break}case re.EOF:{this._err(ze.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateAfterDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case re.SPACE:case re.LINE_FEED:case re.TABULATION:case re.FORM_FEED:break;case re.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=oe.DATA;break}case re.EOF:{this._err(ze.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ze.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=oe.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBogusDoctype(t){const n=this.currentToken;switch(t){case re.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=oe.DATA;break}case re.NULL:{this._err(ze.unexpectedNullCharacter);break}case re.EOF:{this.emitCurrentDoctype(n),this._emitEOFToken();break}}}_stateCdataSection(t){switch(t){case re.RIGHT_SQUARE_BRACKET:{this.state=oe.CDATA_SECTION_BRACKET;break}case re.EOF:{this._err(ze.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateCdataSectionBracket(t){t===re.RIGHT_SQUARE_BRACKET?this.state=oe.CDATA_SECTION_END:(this._emitChars("]"),this.state=oe.CDATA_SECTION,this._stateCdataSection(t))}_stateCdataSectionEnd(t){switch(t){case re.GREATER_THAN_SIGN:{this.state=oe.DATA;break}case re.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=oe.CDATA_SECTION,this._stateCdataSection(t)}}_stateCharacterReference(t){t===re.NUMBER_SIGN?this.state=oe.NUMERIC_CHARACTER_REFERENCE:aB(t)?(this.state=oe.NAMED_CHARACTER_REFERENCE,this._stateNamedCharacterReference(t)):(this._flushCodePointConsumedAsCharacterReference(re.AMPERSAND),this._reconsumeInState(this.returnState,t))}_stateNamedCharacterReference(t){const n=this._matchNamedCharacterReference(t);if(!this._ensureHibernation())if(n){for(let r=0;r<n.length;r++)this._flushCodePointConsumedAsCharacterReference(n[r]);this.state=this.returnState}else this._flushCodePointConsumedAsCharacterReference(re.AMPERSAND),this.state=oe.AMBIGUOUS_AMPERSAND}_stateAmbiguousAmpersand(t){aB(t)?this._flushCodePointConsumedAsCharacterReference(t):(t===re.SEMICOLON&&this._err(ze.unknownNamedCharacterReference),this._reconsumeInState(this.returnState,t))}_stateNumericCharacterReference(t){this.charRefCode=0,t===re.LATIN_SMALL_X||t===re.LATIN_CAPITAL_X?this.state=oe.HEXADEMICAL_CHARACTER_REFERENCE_START:HT(t)?(this.state=oe.DECIMAL_CHARACTER_REFERENCE,this._stateDecimalCharacterReference(t)):(this._err(ze.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(re.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(re.NUMBER_SIGN),this._reconsumeInState(this.returnState,t))}_stateHexademicalCharacterReferenceStart(t){FWe(t)?(this.state=oe.HEXADEMICAL_CHARACTER_REFERENCE,this._stateHexademicalCharacterReference(t)):(this._err(ze.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(re.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(re.NUMBER_SIGN),this._unconsume(2),this.state=this.returnState)}_stateHexademicalCharacterReference(t){wye(t)?this.charRefCode=this.charRefCode*16+t-55:Eye(t)?this.charRefCode=this.charRefCode*16+t-87:HT(t)?this.charRefCode=this.charRefCode*16+t-48:t===re.SEMICOLON?this.state=oe.NUMERIC_CHARACTER_REFERENCE_END:(this._err(ze.missingSemicolonAfterCharacterReference),this.state=oe.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateDecimalCharacterReference(t){HT(t)?this.charRefCode=this.charRefCode*10+t-48:t===re.SEMICOLON?this.state=oe.NUMERIC_CHARACTER_REFERENCE_END:(this._err(ze.missingSemicolonAfterCharacterReference),this.state=oe.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateNumericCharacterReferenceEnd(t){if(this.charRefCode===re.NULL)this._err(ze.nullCharacterReference),this.charRefCode=re.REPLACEMENT_CHARACTER;else if(this.charRefCode>1114111)this._err(ze.characterReferenceOutsideUnicodeRange),this.charRefCode=re.REPLACEMENT_CHARACTER;else if(pye(this.charRefCode))this._err(ze.surrogateCharacterReference),this.charRefCode=re.REPLACEMENT_CHARACTER;else if(gye(this.charRefCode))this._err(ze.noncharacterCharacterReference);else if(mye(this.charRefCode)||this.charRefCode===re.CARRIAGE_RETURN){this._err(ze.controlCharacterReference);const n=MWe.get(this.charRefCode);n!==void 0&&(this.charRefCode=n)}this._flushCodePointConsumedAsCharacterReference(this.charRefCode),this._reconsumeInState(this.returnState,t)}}const Tye=new Set([M.DD,M.DT,M.LI,M.OPTGROUP,M.OPTION,M.P,M.RB,M.RP,M.RT,M.RTC]),Lne=new Set([...Tye,M.CAPTION,M.COLGROUP,M.TBODY,M.TD,M.TFOOT,M.TH,M.THEAD,M.TR]),jk=new Map([[M.APPLET,Xe.HTML],[M.CAPTION,Xe.HTML],[M.HTML,Xe.HTML],[M.MARQUEE,Xe.HTML],[M.OBJECT,Xe.HTML],[M.TABLE,Xe.HTML],[M.TD,Xe.HTML],[M.TEMPLATE,Xe.HTML],[M.TH,Xe.HTML],[M.ANNOTATION_XML,Xe.MATHML],[M.MI,Xe.MATHML],[M.MN,Xe.MATHML],[M.MO,Xe.MATHML],[M.MS,Xe.MATHML],[M.MTEXT,Xe.MATHML],[M.DESC,Xe.SVG],[M.FOREIGN_OBJECT,Xe.SVG],[M.TITLE,Xe.SVG]]),zWe=[M.H1,M.H2,M.H3,M.H4,M.H5,M.H6],UWe=[M.TR,M.TEMPLATE,M.HTML],VWe=[M.TBODY,M.TFOOT,M.THEAD,M.TEMPLATE,M.HTML],HWe=[M.TABLE,M.TEMPLATE,M.HTML],qWe=[M.TD,M.TH];class WWe{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(t,n,r){this.treeAdapter=n,this.handler=r,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=M.UNKNOWN,this.current=t}_indexOf(t){return this.items.lastIndexOf(t,this.stackTop)}_isInTemplate(){return this.currentTagId===M.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===Xe.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(t,n){this.stackTop++,this.items[this.stackTop]=t,this.current=t,this.tagIDs[this.stackTop]=n,this.currentTagId=n,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(t,n,!0)}pop(){const t=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!0)}replace(t,n){const r=this._indexOf(t);this.items[r]=n,r===this.stackTop&&(this.current=n)}insertAfter(t,n,r){const i=this._indexOf(t)+1;this.items.splice(i,0,n),this.tagIDs.splice(i,0,r),this.stackTop++,i===this.stackTop&&this._updateCurrentElement(),this.handler.onItemPush(this.current,this.currentTagId,i===this.stackTop)}popUntilTagNamePopped(t){let n=this.stackTop+1;do n=this.tagIDs.lastIndexOf(t,n-1);while(n>0&&this.treeAdapter.getNamespaceURI(this.items[n])!==Xe.HTML);this.shortenToLength(n<0?0:n)}shortenToLength(t){for(;this.stackTop>=t;){const n=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(n,this.stackTop<t)}}popUntilElementPopped(t){const n=this._indexOf(t);this.shortenToLength(n<0?0:n)}popUntilPopped(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r<0?0:r)}popUntilNumberedHeaderPopped(){this.popUntilPopped(zWe,Xe.HTML)}popUntilTableCellPopped(){this.popUntilPopped(qWe,Xe.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(t,n){for(let r=this.stackTop;r>=0;r--)if(t.includes(this.tagIDs[r])&&this.treeAdapter.getNamespaceURI(this.items[r])===n)return r;return-1}clearBackTo(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r+1)}clearBackToTableContext(){this.clearBackTo(HWe,Xe.HTML)}clearBackToTableBodyContext(){this.clearBackTo(VWe,Xe.HTML)}clearBackToTableRowContext(){this.clearBackTo(UWe,Xe.HTML)}remove(t){const n=this._indexOf(t);n>=0&&(n===this.stackTop?this.pop():(this.items.splice(n,1),this.tagIDs.splice(n,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===M.BODY?this.items[1]:null}contains(t){return this._indexOf(t)>-1}getCommonAncestor(t){const n=this._indexOf(t)-1;return n>=0?this.items[n]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.tagIDs[0]===M.HTML}hasInScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===Xe.HTML)return!0;if(jk.get(r)===i)return!1}return!0}hasNumberedHeaderInScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t],r=this.treeAdapter.getNamespaceURI(this.items[t]);if(xye(n)&&r===Xe.HTML)return!0;if(jk.get(n)===r)return!1}return!0}hasInListItemScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===Xe.HTML)return!0;if((r===M.UL||r===M.OL)&&i===Xe.HTML||jk.get(r)===i)return!1}return!0}hasInButtonScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===Xe.HTML)return!0;if(r===M.BUTTON&&i===Xe.HTML||jk.get(r)===i)return!1}return!0}hasInTableScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===Xe.HTML){if(r===t)return!0;if(r===M.TABLE||r===M.TEMPLATE||r===M.HTML)return!1}}return!0}hasTableBodyContextInTableScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t];if(this.treeAdapter.getNamespaceURI(this.items[t])===Xe.HTML){if(n===M.TBODY||n===M.THEAD||n===M.TFOOT)return!0;if(n===M.TABLE||n===M.HTML)return!1}}return!0}hasInSelectScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===Xe.HTML){if(r===t)return!0;if(r!==M.OPTION&&r!==M.OPTGROUP)return!1}}return!0}generateImpliedEndTags(){for(;Tye.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;Lne.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(t){for(;this.currentTagId!==t&&Lne.has(this.currentTagId);)this.pop()}}const I8=3;var zc;(function(e){e[e.Marker=0]="Marker",e[e.Element=1]="Element"})(zc=zc||(zc={}));const Fne={type:zc.Marker};class GWe{constructor(t){this.treeAdapter=t,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(t,n){const r=[],i=n.length,s=this.treeAdapter.getTagName(t),o=this.treeAdapter.getNamespaceURI(t);for(let a=0;a<this.entries.length;a++){const u=this.entries[a];if(u.type===zc.Marker)break;const{element:l}=u;if(this.treeAdapter.getTagName(l)===s&&this.treeAdapter.getNamespaceURI(l)===o){const c=this.treeAdapter.getAttrList(l);c.length===i&&r.push({idx:a,attrs:c})}}return r}_ensureNoahArkCondition(t){if(this.entries.length<I8)return;const n=this.treeAdapter.getAttrList(t),r=this._getNoahArkConditionCandidates(t,n);if(r.length<I8)return;const i=new Map(n.map(o=>[o.name,o.value]));let s=0;for(let o=0;o<r.length;o++){const a=r[o];a.attrs.every(u=>i.get(u.name)===u.value)&&(s+=1,s>=I8&&this.entries.splice(a.idx,1))}}insertMarker(){this.entries.unshift(Fne)}pushElement(t,n){this._ensureNoahArkCondition(t),this.entries.unshift({type:zc.Element,element:t,token:n})}insertElementAfterBookmark(t,n){const r=this.entries.indexOf(this.bookmark);this.entries.splice(r,0,{type:zc.Element,element:t,token:n})}removeEntry(t){const n=this.entries.indexOf(t);n>=0&&this.entries.splice(n,1)}clearToLastMarker(){const t=this.entries.indexOf(Fne);t>=0?this.entries.splice(0,t+1):this.entries.length=0}getElementEntryInScopeWithTagName(t){const n=this.entries.find(r=>r.type===zc.Marker||this.treeAdapter.getTagName(r.element)===t);return n&&n.type===zc.Element?n:null}getElementEntry(t){return this.entries.find(n=>n.type===zc.Element&&n.element===t)}}function Bne(e){return{nodeName:"#text",value:e,parentNode:null}}const Sv={createDocument(){return{nodeName:"#document",mode:Zu.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(e,t,n){return{nodeName:e,tagName:e,attrs:n,namespaceURI:t,childNodes:[],parentNode:null}},createCommentNode(e){return{nodeName:"#comment",data:e,parentNode:null}},appendChild(e,t){e.childNodes.push(t),t.parentNode=e},insertBefore(e,t,n){const r=e.childNodes.indexOf(n);e.childNodes.splice(r,0,t),t.parentNode=e},setTemplateContent(e,t){e.content=t},getTemplateContent(e){return e.content},setDocumentType(e,t,n,r){const i=e.childNodes.find(s=>s.nodeName==="#documentType");if(i)i.name=t,i.publicId=n,i.systemId=r;else{const s={nodeName:"#documentType",name:t,publicId:n,systemId:r,parentNode:null};Sv.appendChild(e,s)}},setDocumentMode(e,t){e.mode=t},getDocumentMode(e){return e.mode},detachNode(e){if(e.parentNode){const t=e.parentNode.childNodes.indexOf(e);e.parentNode.childNodes.splice(t,1),e.parentNode=null}},insertText(e,t){if(e.childNodes.length>0){const n=e.childNodes[e.childNodes.length-1];if(Sv.isTextNode(n)){n.value+=t;return}}Sv.appendChild(e,Bne(t))},insertTextBefore(e,t,n){const r=e.childNodes[e.childNodes.indexOf(n)-1];r&&Sv.isTextNode(r)?r.value+=t:Sv.insertBefore(e,Bne(t),n)},adoptAttributes(e,t){const n=new Set(e.attrs.map(r=>r.name));for(let r=0;r<t.length;r++)n.has(t[r].name)||e.attrs.push(t[r])},getFirstChild(e){return e.childNodes[0]},getChildNodes(e){return e.childNodes},getParentNode(e){return e.parentNode},getAttrList(e){return e.attrs},getTagName(e){return e.tagName},getNamespaceURI(e){return e.namespaceURI},getTextNodeContent(e){return e.value},getCommentNodeContent(e){return e.data},getDocumentTypeNodeName(e){return e.name},getDocumentTypeNodePublicId(e){return e.publicId},getDocumentTypeNodeSystemId(e){return e.systemId},isTextNode(e){return e.nodeName==="#text"},isCommentNode(e){return e.nodeName==="#comment"},isDocumentTypeNode(e){return e.nodeName==="#documentType"},isElementNode(e){return Object.prototype.hasOwnProperty.call(e,"tagName")},setNodeSourceCodeLocation(e,t){e.sourceCodeLocation=t},getNodeSourceCodeLocation(e){return e.sourceCodeLocation},updateNodeSourceCodeLocation(e,t){e.sourceCodeLocation={...e.sourceCodeLocation,...t}}},Cye="html",YWe="about:legacy-compat",KWe="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",Sye=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],XWe=[...Sye,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],QWe=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),Aye=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],JWe=[...Aye,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function jne(e,t){return t.some(n=>e.startsWith(n))}function ZWe(e){return e.name===Cye&&e.publicId===null&&(e.systemId===null||e.systemId===YWe)}function eGe(e){if(e.name!==Cye)return Zu.QUIRKS;const{systemId:t}=e;if(t&&t.toLowerCase()===KWe)return Zu.QUIRKS;let{publicId:n}=e;if(n!==null){if(n=n.toLowerCase(),QWe.has(n))return Zu.QUIRKS;let r=t===null?XWe:Sye;if(jne(n,r))return Zu.QUIRKS;if(r=t===null?Aye:JWe,jne(n,r))return Zu.LIMITED_QUIRKS}return Zu.NO_QUIRKS}const zne={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},tGe="definitionurl",nGe="definitionURL",rGe=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(e=>[e.toLowerCase(),e])),iGe=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:Xe.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:Xe.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:Xe.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:Xe.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:Xe.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:Xe.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:Xe.XLINK}],["xml:base",{prefix:"xml",name:"base",namespace:Xe.XML}],["xml:lang",{prefix:"xml",name:"lang",namespace:Xe.XML}],["xml:space",{prefix:"xml",name:"space",namespace:Xe.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:Xe.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:Xe.XMLNS}]]),sGe=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(e=>[e.toLowerCase(),e])),oGe=new Set([M.B,M.BIG,M.BLOCKQUOTE,M.BODY,M.BR,M.CENTER,M.CODE,M.DD,M.DIV,M.DL,M.DT,M.EM,M.EMBED,M.H1,M.H2,M.H3,M.H4,M.H5,M.H6,M.HEAD,M.HR,M.I,M.IMG,M.LI,M.LISTING,M.MENU,M.META,M.NOBR,M.OL,M.P,M.PRE,M.RUBY,M.S,M.SMALL,M.SPAN,M.STRONG,M.STRIKE,M.SUB,M.SUP,M.TABLE,M.TT,M.U,M.UL,M.VAR]);function aGe(e){const t=e.tagID;return t===M.FONT&&e.attrs.some(({name:r})=>r===u0.COLOR||r===u0.SIZE||r===u0.FACE)||oGe.has(t)}function kye(e){for(let t=0;t<e.attrs.length;t++)if(e.attrs[t].name===tGe){e.attrs[t].name=nGe;break}}function Iye(e){for(let t=0;t<e.attrs.length;t++){const n=rGe.get(e.attrs[t].name);n!=null&&(e.attrs[t].name=n)}}function _H(e){for(let t=0;t<e.attrs.length;t++){const n=iGe.get(e.attrs[t].name);n&&(e.attrs[t].prefix=n.prefix,e.attrs[t].name=n.name,e.attrs[t].namespace=n.namespace)}}function uGe(e){const t=sGe.get(e.tagName);t!=null&&(e.tagName=t,e.tagID=Gw(e.tagName))}function lGe(e,t){return t===Xe.MATHML&&(e===M.MI||e===M.MO||e===M.MN||e===M.MS||e===M.MTEXT)}function cGe(e,t,n){if(t===Xe.MATHML&&e===M.ANNOTATION_XML){for(let r=0;r<n.length;r++)if(n[r].name===u0.ENCODING){const i=n[r].value.toLowerCase();return i===zne.TEXT_HTML||i===zne.APPLICATION_XML}}return t===Xe.SVG&&(e===M.FOREIGN_OBJECT||e===M.DESC||e===M.TITLE)}function dGe(e,t,n,r){return(!r||r===Xe.HTML)&&cGe(e,t,n)||(!r||r===Xe.MATHML)&&lGe(e,t)}const fGe="hidden",hGe=8,pGe=3;var he;(function(e){e[e.INITIAL=0]="INITIAL",e[e.BEFORE_HTML=1]="BEFORE_HTML",e[e.BEFORE_HEAD=2]="BEFORE_HEAD",e[e.IN_HEAD=3]="IN_HEAD",e[e.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",e[e.AFTER_HEAD=5]="AFTER_HEAD",e[e.IN_BODY=6]="IN_BODY",e[e.TEXT=7]="TEXT",e[e.IN_TABLE=8]="IN_TABLE",e[e.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",e[e.IN_CAPTION=10]="IN_CAPTION",e[e.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",e[e.IN_TABLE_BODY=12]="IN_TABLE_BODY",e[e.IN_ROW=13]="IN_ROW",e[e.IN_CELL=14]="IN_CELL",e[e.IN_SELECT=15]="IN_SELECT",e[e.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",e[e.IN_TEMPLATE=17]="IN_TEMPLATE",e[e.AFTER_BODY=18]="AFTER_BODY",e[e.IN_FRAMESET=19]="IN_FRAMESET",e[e.AFTER_FRAMESET=20]="AFTER_FRAMESET",e[e.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",e[e.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(he||(he={}));const mGe={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},Rye=new Set([M.TABLE,M.TBODY,M.TFOOT,M.THEAD,M.TR]),Une={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:Sv,onParseError:null};class Vne{constructor(t,n,r=null,i=null){this.fragmentContext=r,this.scriptHandler=i,this.currentToken=null,this.stopped=!1,this.insertionMode=he.INITIAL,this.originalInsertionMode=he.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...Une,...t},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=n??this.treeAdapter.createDocument(),this.tokenizer=new jWe(this.options,this),this.activeFormattingElements=new GWe(this.treeAdapter),this.fragmentContextID=r?Gw(this.treeAdapter.getTagName(r)):M.UNKNOWN,this._setContextModes(r??this.document,this.fragmentContextID),this.openElements=new WWe(this.document,this.treeAdapter,this)}static parse(t,n){const r=new this(n);return r.tokenizer.write(t,!0),r.document}static getFragmentParser(t,n){const r={...Une,...n};t??(t=r.treeAdapter.createElement(Re.TEMPLATE,Xe.HTML,[]));const i=r.treeAdapter.createElement("documentmock",Xe.HTML,[]),s=new this(r,i,t);return s.fragmentContextID===M.TEMPLATE&&s.tmplInsertionModeStack.unshift(he.IN_TEMPLATE),s._initTokenizerForFragmentParsing(),s._insertFakeRootElement(),s._resetInsertionMode(),s._findFormInFragmentContext(),s}getFragment(){const t=this.treeAdapter.getFirstChild(this.document),n=this.treeAdapter.createDocumentFragment();return this._adoptNodes(t,n),n}_err(t,n,r){var i;if(!this.onParseError)return;const s=(i=t.location)!==null&&i!==void 0?i:mGe,o={code:n,startLine:s.startLine,startCol:s.startCol,startOffset:s.startOffset,endLine:r?s.startLine:s.endLine,endCol:r?s.startCol:s.endCol,endOffset:r?s.startOffset:s.endOffset};this.onParseError(o)}onItemPush(t,n,r){var i,s;(s=(i=this.treeAdapter).onItemPush)===null||s===void 0||s.call(i,t),r&&this.openElements.stackTop>0&&this._setContextModes(t,n)}onItemPop(t,n){var r,i;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(t,this.currentToken),(i=(r=this.treeAdapter).onItemPop)===null||i===void 0||i.call(r,t,this.openElements.current),n){let s,o;this.openElements.stackTop===0&&this.fragmentContext?(s=this.fragmentContext,o=this.fragmentContextID):{current:s,currentTagId:o}=this.openElements,this._setContextModes(s,o)}}_setContextModes(t,n){const r=t===this.document||this.treeAdapter.getNamespaceURI(t)===Xe.HTML;this.currentNotInHTML=!r,this.tokenizer.inForeignNode=!r&&!this._isIntegrationPoint(n,t)}_switchToTextParsing(t,n){this._insertElement(t,Xe.HTML),this.tokenizer.state=n,this.originalInsertionMode=this.insertionMode,this.insertionMode=he.TEXT}switchToPlaintextParsing(){this.insertionMode=he.TEXT,this.originalInsertionMode=he.IN_BODY,this.tokenizer.state=Hi.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let t=this.fragmentContext;for(;t;){if(this.treeAdapter.getTagName(t)===Re.FORM){this.formElement=t;break}t=this.treeAdapter.getParentNode(t)}}_initTokenizerForFragmentParsing(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==Xe.HTML))switch(this.fragmentContextID){case M.TITLE:case M.TEXTAREA:{this.tokenizer.state=Hi.RCDATA;break}case M.STYLE:case M.XMP:case M.IFRAME:case M.NOEMBED:case M.NOFRAMES:case M.NOSCRIPT:{this.tokenizer.state=Hi.RAWTEXT;break}case M.SCRIPT:{this.tokenizer.state=Hi.SCRIPT_DATA;break}case M.PLAINTEXT:{this.tokenizer.state=Hi.PLAINTEXT;break}}}_setDocumentType(t){const n=t.name||"",r=t.publicId||"",i=t.systemId||"";if(this.treeAdapter.setDocumentType(this.document,n,r,i),t.location){const o=this.treeAdapter.getChildNodes(this.document).find(a=>this.treeAdapter.isDocumentTypeNode(a));o&&this.treeAdapter.setNodeSourceCodeLocation(o,t.location)}}_attachElementToTree(t,n){if(this.options.sourceCodeLocationInfo){const r=n&&{...n,startTag:n};this.treeAdapter.setNodeSourceCodeLocation(t,r)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(t);else{const r=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(r,t)}}_appendElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location)}_insertElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location),this.openElements.push(r,t.tagID)}_insertFakeElement(t,n){const r=this.treeAdapter.createElement(t,Xe.HTML,[]);this._attachElementToTree(r,null),this.openElements.push(r,n)}_insertTemplate(t){const n=this.treeAdapter.createElement(t.tagName,Xe.HTML,t.attrs),r=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(n,r),this._attachElementToTree(n,t.location),this.openElements.push(n,t.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,null)}_insertFakeRootElement(){const t=this.treeAdapter.createElement(Re.HTML,Xe.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(t,null),this.treeAdapter.appendChild(this.openElements.current,t),this.openElements.push(t,M.HTML)}_appendCommentNode(t,n){const r=this.treeAdapter.createCommentNode(t.data);this.treeAdapter.appendChild(n,r),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,t.location)}_insertCharacters(t){let n,r;if(this._shouldFosterParentOnInsertion()?({parent:n,beforeElement:r}=this._findFosterParentingLocation(),r?this.treeAdapter.insertTextBefore(n,t.chars,r):this.treeAdapter.insertText(n,t.chars)):(n=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(n,t.chars)),!t.location)return;const i=this.treeAdapter.getChildNodes(n),s=r?i.lastIndexOf(r):i.length,o=i[s-1];if(this.treeAdapter.getNodeSourceCodeLocation(o)){const{endLine:u,endCol:l,endOffset:c}=t.location;this.treeAdapter.updateNodeSourceCodeLocation(o,{endLine:u,endCol:l,endOffset:c})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(o,t.location)}_adoptNodes(t,n){for(let r=this.treeAdapter.getFirstChild(t);r;r=this.treeAdapter.getFirstChild(t))this.treeAdapter.detachNode(r),this.treeAdapter.appendChild(n,r)}_setEndLocation(t,n){if(this.treeAdapter.getNodeSourceCodeLocation(t)&&n.location){const r=n.location,i=this.treeAdapter.getTagName(t),s=n.type===Rn.END_TAG&&i===n.tagName?{endTag:{...r},endLine:r.endLine,endCol:r.endCol,endOffset:r.endOffset}:{endLine:r.startLine,endCol:r.startCol,endOffset:r.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(t,s)}}shouldProcessStartTagTokenInForeignContent(t){if(!this.currentNotInHTML)return!1;let n,r;return this.openElements.stackTop===0&&this.fragmentContext?(n=this.fragmentContext,r=this.fragmentContextID):{current:n,currentTagId:r}=this.openElements,t.tagID===M.SVG&&this.treeAdapter.getTagName(n)===Re.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(n)===Xe.MATHML?!1:this.tokenizer.inForeignNode||(t.tagID===M.MGLYPH||t.tagID===M.MALIGNMARK)&&!this._isIntegrationPoint(r,n,Xe.HTML)}_processToken(t){switch(t.type){case Rn.CHARACTER:{this.onCharacter(t);break}case Rn.NULL_CHARACTER:{this.onNullCharacter(t);break}case Rn.COMMENT:{this.onComment(t);break}case Rn.DOCTYPE:{this.onDoctype(t);break}case Rn.START_TAG:{this._processStartTag(t);break}case Rn.END_TAG:{this.onEndTag(t);break}case Rn.EOF:{this.onEof(t);break}case Rn.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(t);break}}}_isIntegrationPoint(t,n,r){const i=this.treeAdapter.getNamespaceURI(n),s=this.treeAdapter.getAttrList(n);return dGe(t,i,s,r)}_reconstructActiveFormattingElements(){const t=this.activeFormattingElements.entries.length;if(t){const n=this.activeFormattingElements.entries.findIndex(i=>i.type===zc.Marker||this.openElements.contains(i.element)),r=n<0?t-1:n-1;for(let i=r;i>=0;i--){const s=this.activeFormattingElements.entries[i];this._insertElement(s.token,this.treeAdapter.getNamespaceURI(s.element)),s.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=he.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(M.P),this.openElements.popUntilTagNamePopped(M.P)}_resetInsertionMode(){for(let t=this.openElements.stackTop;t>=0;t--)switch(t===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[t]){case M.TR:{this.insertionMode=he.IN_ROW;return}case M.TBODY:case M.THEAD:case M.TFOOT:{this.insertionMode=he.IN_TABLE_BODY;return}case M.CAPTION:{this.insertionMode=he.IN_CAPTION;return}case M.COLGROUP:{this.insertionMode=he.IN_COLUMN_GROUP;return}case M.TABLE:{this.insertionMode=he.IN_TABLE;return}case M.BODY:{this.insertionMode=he.IN_BODY;return}case M.FRAMESET:{this.insertionMode=he.IN_FRAMESET;return}case M.SELECT:{this._resetInsertionModeForSelect(t);return}case M.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case M.HTML:{this.insertionMode=this.headElement?he.AFTER_HEAD:he.BEFORE_HEAD;return}case M.TD:case M.TH:{if(t>0){this.insertionMode=he.IN_CELL;return}break}case M.HEAD:{if(t>0){this.insertionMode=he.IN_HEAD;return}break}}this.insertionMode=he.IN_BODY}_resetInsertionModeForSelect(t){if(t>0)for(let n=t-1;n>0;n--){const r=this.openElements.tagIDs[n];if(r===M.TEMPLATE)break;if(r===M.TABLE){this.insertionMode=he.IN_SELECT_IN_TABLE;return}}this.insertionMode=he.IN_SELECT}_isElementCausesFosterParenting(t){return Rye.has(t)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let t=this.openElements.stackTop;t>=0;t--){const n=this.openElements.items[t];switch(this.openElements.tagIDs[t]){case M.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(n)===Xe.HTML)return{parent:this.treeAdapter.getTemplateContent(n),beforeElement:null};break}case M.TABLE:{const r=this.treeAdapter.getParentNode(n);return r?{parent:r,beforeElement:n}:{parent:this.openElements.items[t-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(t){const n=this._findFosterParentingLocation();n.beforeElement?this.treeAdapter.insertBefore(n.parent,t,n.beforeElement):this.treeAdapter.appendChild(n.parent,t)}_isSpecialElement(t,n){const r=this.treeAdapter.getNamespaceURI(t);return $We[r].has(n)}onCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){qYe(this,t);return}switch(this.insertionMode){case he.INITIAL:{m_(this,t);break}case he.BEFORE_HTML:{qT(this,t);break}case he.BEFORE_HEAD:{WT(this,t);break}case he.IN_HEAD:{GT(this,t);break}case he.IN_HEAD_NO_SCRIPT:{YT(this,t);break}case he.AFTER_HEAD:{KT(this,t);break}case he.IN_BODY:case he.IN_CAPTION:case he.IN_CELL:case he.IN_TEMPLATE:{Pye(this,t);break}case he.TEXT:case he.IN_SELECT:case he.IN_SELECT_IN_TABLE:{this._insertCharacters(t);break}case he.IN_TABLE:case he.IN_TABLE_BODY:case he.IN_ROW:{R8(this,t);break}case he.IN_TABLE_TEXT:{Fye(this,t);break}case he.IN_COLUMN_GROUP:{BP(this,t);break}case he.AFTER_BODY:{jP(this,t);break}case he.AFTER_AFTER_BODY:{YR(this,t);break}}}onNullCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){HYe(this,t);return}switch(this.insertionMode){case he.INITIAL:{m_(this,t);break}case he.BEFORE_HTML:{qT(this,t);break}case he.BEFORE_HEAD:{WT(this,t);break}case he.IN_HEAD:{GT(this,t);break}case he.IN_HEAD_NO_SCRIPT:{YT(this,t);break}case he.AFTER_HEAD:{KT(this,t);break}case he.TEXT:{this._insertCharacters(t);break}case he.IN_TABLE:case he.IN_TABLE_BODY:case he.IN_ROW:{R8(this,t);break}case he.IN_COLUMN_GROUP:{BP(this,t);break}case he.AFTER_BODY:{jP(this,t);break}case he.AFTER_AFTER_BODY:{YR(this,t);break}}}onComment(t){if(this.skipNextNewLine=!1,this.currentNotInHTML){uB(this,t);return}switch(this.insertionMode){case he.INITIAL:case he.BEFORE_HTML:case he.BEFORE_HEAD:case he.IN_HEAD:case he.IN_HEAD_NO_SCRIPT:case he.AFTER_HEAD:case he.IN_BODY:case he.IN_TABLE:case he.IN_CAPTION:case he.IN_COLUMN_GROUP:case he.IN_TABLE_BODY:case he.IN_ROW:case he.IN_CELL:case he.IN_SELECT:case he.IN_SELECT_IN_TABLE:case he.IN_TEMPLATE:case he.IN_FRAMESET:case he.AFTER_FRAMESET:{uB(this,t);break}case he.IN_TABLE_TEXT:{g_(this,t);break}case he.AFTER_BODY:{EGe(this,t);break}case he.AFTER_AFTER_BODY:case he.AFTER_AFTER_FRAMESET:{_Ge(this,t);break}}}onDoctype(t){switch(this.skipNextNewLine=!1,this.insertionMode){case he.INITIAL:{TGe(this,t);break}case he.BEFORE_HEAD:case he.IN_HEAD:case he.IN_HEAD_NO_SCRIPT:case he.AFTER_HEAD:{this._err(t,ze.misplacedDoctype);break}case he.IN_TABLE_TEXT:{g_(this,t);break}}}onStartTag(t){this.skipNextNewLine=!1,this.currentToken=t,this._processStartTag(t),t.selfClosing&&!t.ackSelfClosing&&this._err(t,ze.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(t){this.shouldProcessStartTagTokenInForeignContent(t)?WYe(this,t):this._startTagOutsideForeignContent(t)}_startTagOutsideForeignContent(t){switch(this.insertionMode){case he.INITIAL:{m_(this,t);break}case he.BEFORE_HTML:{CGe(this,t);break}case he.BEFORE_HEAD:{AGe(this,t);break}case he.IN_HEAD:{wd(this,t);break}case he.IN_HEAD_NO_SCRIPT:{RGe(this,t);break}case he.AFTER_HEAD:{PGe(this,t);break}case he.IN_BODY:{va(this,t);break}case he.IN_TABLE:{kx(this,t);break}case he.IN_TABLE_TEXT:{g_(this,t);break}case he.IN_CAPTION:{kYe(this,t);break}case he.IN_COLUMN_GROUP:{SH(this,t);break}case he.IN_TABLE_BODY:{rO(this,t);break}case he.IN_ROW:{iO(this,t);break}case he.IN_CELL:{DYe(this,t);break}case he.IN_SELECT:{zye(this,t);break}case he.IN_SELECT_IN_TABLE:{NYe(this,t);break}case he.IN_TEMPLATE:{$Ye(this,t);break}case he.AFTER_BODY:{LYe(this,t);break}case he.IN_FRAMESET:{FYe(this,t);break}case he.AFTER_FRAMESET:{jYe(this,t);break}case he.AFTER_AFTER_BODY:{UYe(this,t);break}case he.AFTER_AFTER_FRAMESET:{VYe(this,t);break}}}onEndTag(t){this.skipNextNewLine=!1,this.currentToken=t,this.currentNotInHTML?GYe(this,t):this._endTagOutsideForeignContent(t)}_endTagOutsideForeignContent(t){switch(this.insertionMode){case he.INITIAL:{m_(this,t);break}case he.BEFORE_HTML:{SGe(this,t);break}case he.BEFORE_HEAD:{kGe(this,t);break}case he.IN_HEAD:{IGe(this,t);break}case he.IN_HEAD_NO_SCRIPT:{DGe(this,t);break}case he.AFTER_HEAD:{NGe(this,t);break}case he.IN_BODY:{nO(this,t);break}case he.TEXT:{bYe(this,t);break}case he.IN_TABLE:{N2(this,t);break}case he.IN_TABLE_TEXT:{g_(this,t);break}case he.IN_CAPTION:{IYe(this,t);break}case he.IN_COLUMN_GROUP:{RYe(this,t);break}case he.IN_TABLE_BODY:{lB(this,t);break}case he.IN_ROW:{jye(this,t);break}case he.IN_CELL:{PYe(this,t);break}case he.IN_SELECT:{Uye(this,t);break}case he.IN_SELECT_IN_TABLE:{OYe(this,t);break}case he.IN_TEMPLATE:{MYe(this,t);break}case he.AFTER_BODY:{Hye(this,t);break}case he.IN_FRAMESET:{BYe(this,t);break}case he.AFTER_FRAMESET:{zYe(this,t);break}case he.AFTER_AFTER_BODY:{YR(this,t);break}}}onEof(t){switch(this.insertionMode){case he.INITIAL:{m_(this,t);break}case he.BEFORE_HTML:{qT(this,t);break}case he.BEFORE_HEAD:{WT(this,t);break}case he.IN_HEAD:{GT(this,t);break}case he.IN_HEAD_NO_SCRIPT:{YT(this,t);break}case he.AFTER_HEAD:{KT(this,t);break}case he.IN_BODY:case he.IN_TABLE:case he.IN_CAPTION:case he.IN_COLUMN_GROUP:case he.IN_TABLE_BODY:case he.IN_ROW:case he.IN_CELL:case he.IN_SELECT:case he.IN_SELECT_IN_TABLE:{Mye(this,t);break}case he.TEXT:{vYe(this,t);break}case he.IN_TABLE_TEXT:{g_(this,t);break}case he.IN_TEMPLATE:{Vye(this,t);break}case he.AFTER_BODY:case he.IN_FRAMESET:case he.AFTER_FRAMESET:case he.AFTER_AFTER_BODY:case he.AFTER_AFTER_FRAMESET:{CH(this,t);break}}}onWhitespaceCharacter(t){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,t.chars.charCodeAt(0)===re.LINE_FEED)){if(t.chars.length===1)return;t.chars=t.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(t);return}switch(this.insertionMode){case he.IN_HEAD:case he.IN_HEAD_NO_SCRIPT:case he.AFTER_HEAD:case he.TEXT:case he.IN_COLUMN_GROUP:case he.IN_SELECT:case he.IN_SELECT_IN_TABLE:case he.IN_FRAMESET:case he.AFTER_FRAMESET:{this._insertCharacters(t);break}case he.IN_BODY:case he.IN_CAPTION:case he.IN_CELL:case he.IN_TEMPLATE:case he.AFTER_BODY:case he.AFTER_AFTER_BODY:case he.AFTER_AFTER_FRAMESET:{Dye(this,t);break}case he.IN_TABLE:case he.IN_TABLE_BODY:case he.IN_ROW:{R8(this,t);break}case he.IN_TABLE_TEXT:{Lye(this,t);break}}}}function gGe(e,t){let n=e.activeFormattingElements.getElementEntryInScopeWithTagName(t.tagName);return n?e.openElements.contains(n.element)?e.openElements.hasInScope(t.tagID)||(n=null):(e.activeFormattingElements.removeEntry(n),n=null):$ye(e,t),n}function yGe(e,t){let n=null,r=e.openElements.stackTop;for(;r>=0;r--){const i=e.openElements.items[r];if(i===t.element)break;e._isSpecialElement(i,e.openElements.tagIDs[r])&&(n=i)}return n||(e.openElements.shortenToLength(r<0?0:r),e.activeFormattingElements.removeEntry(t)),n}function bGe(e,t,n){let r=t,i=e.openElements.getCommonAncestor(t);for(let s=0,o=i;o!==n;s++,o=i){i=e.openElements.getCommonAncestor(o);const a=e.activeFormattingElements.getElementEntry(o),u=a&&s>=pGe;!a||u?(u&&e.activeFormattingElements.removeEntry(a),e.openElements.remove(o)):(o=vGe(e,a),r===t&&(e.activeFormattingElements.bookmark=a),e.treeAdapter.detachNode(r),e.treeAdapter.appendChild(o,r),r=o)}return r}function vGe(e,t){const n=e.treeAdapter.getNamespaceURI(t.element),r=e.treeAdapter.createElement(t.token.tagName,n,t.token.attrs);return e.openElements.replace(t.element,r),t.element=r,r}function xGe(e,t,n){const r=e.treeAdapter.getTagName(t),i=Gw(r);if(e._isElementCausesFosterParenting(i))e._fosterParentElement(n);else{const s=e.treeAdapter.getNamespaceURI(t);i===M.TEMPLATE&&s===Xe.HTML&&(t=e.treeAdapter.getTemplateContent(t)),e.treeAdapter.appendChild(t,n)}}function wGe(e,t,n){const r=e.treeAdapter.getNamespaceURI(n.element),{token:i}=n,s=e.treeAdapter.createElement(i.tagName,r,i.attrs);e._adoptNodes(t,s),e.treeAdapter.appendChild(t,s),e.activeFormattingElements.insertElementAfterBookmark(s,i),e.activeFormattingElements.removeEntry(n),e.openElements.remove(n.element),e.openElements.insertAfter(t,s,i.tagID)}function TH(e,t){for(let n=0;n<hGe;n++){const r=gGe(e,t);if(!r)break;const i=yGe(e,r);if(!i)break;e.activeFormattingElements.bookmark=r;const s=bGe(e,i,r.element),o=e.openElements.getCommonAncestor(r.element);e.treeAdapter.detachNode(s),o&&xGe(e,o,s),wGe(e,i,r)}}function uB(e,t){e._appendCommentNode(t,e.openElements.currentTmplContentOrNode)}function EGe(e,t){e._appendCommentNode(t,e.openElements.items[0])}function _Ge(e,t){e._appendCommentNode(t,e.document)}function CH(e,t){if(e.stopped=!0,t.location){const n=e.fragmentContext?0:2;for(let r=e.openElements.stackTop;r>=n;r--)e._setEndLocation(e.openElements.items[r],t);if(!e.fragmentContext&&e.openElements.stackTop>=0){const r=e.openElements.items[0],i=e.treeAdapter.getNodeSourceCodeLocation(r);if(i&&!i.endTag&&(e._setEndLocation(r,t),e.openElements.stackTop>=1)){const s=e.openElements.items[1],o=e.treeAdapter.getNodeSourceCodeLocation(s);o&&!o.endTag&&e._setEndLocation(s,t)}}}}function TGe(e,t){e._setDocumentType(t);const n=t.forceQuirks?Zu.QUIRKS:eGe(t);ZWe(t)||e._err(t,ze.nonConformingDoctype),e.treeAdapter.setDocumentMode(e.document,n),e.insertionMode=he.BEFORE_HTML}function m_(e,t){e._err(t,ze.missingDoctype,!0),e.treeAdapter.setDocumentMode(e.document,Zu.QUIRKS),e.insertionMode=he.BEFORE_HTML,e._processToken(t)}function CGe(e,t){t.tagID===M.HTML?(e._insertElement(t,Xe.HTML),e.insertionMode=he.BEFORE_HEAD):qT(e,t)}function SGe(e,t){const n=t.tagID;(n===M.HTML||n===M.HEAD||n===M.BODY||n===M.BR)&&qT(e,t)}function qT(e,t){e._insertFakeRootElement(),e.insertionMode=he.BEFORE_HEAD,e._processToken(t)}function AGe(e,t){switch(t.tagID){case M.HTML:{va(e,t);break}case M.HEAD:{e._insertElement(t,Xe.HTML),e.headElement=e.openElements.current,e.insertionMode=he.IN_HEAD;break}default:WT(e,t)}}function kGe(e,t){const n=t.tagID;n===M.HEAD||n===M.BODY||n===M.HTML||n===M.BR?WT(e,t):e._err(t,ze.endTagWithoutMatchingOpenElement)}function WT(e,t){e._insertFakeElement(Re.HEAD,M.HEAD),e.headElement=e.openElements.current,e.insertionMode=he.IN_HEAD,e._processToken(t)}function wd(e,t){switch(t.tagID){case M.HTML:{va(e,t);break}case M.BASE:case M.BASEFONT:case M.BGSOUND:case M.LINK:case M.META:{e._appendElement(t,Xe.HTML),t.ackSelfClosing=!0;break}case M.TITLE:{e._switchToTextParsing(t,Hi.RCDATA);break}case M.NOSCRIPT:{e.options.scriptingEnabled?e._switchToTextParsing(t,Hi.RAWTEXT):(e._insertElement(t,Xe.HTML),e.insertionMode=he.IN_HEAD_NO_SCRIPT);break}case M.NOFRAMES:case M.STYLE:{e._switchToTextParsing(t,Hi.RAWTEXT);break}case M.SCRIPT:{e._switchToTextParsing(t,Hi.SCRIPT_DATA);break}case M.TEMPLATE:{e._insertTemplate(t),e.activeFormattingElements.insertMarker(),e.framesetOk=!1,e.insertionMode=he.IN_TEMPLATE,e.tmplInsertionModeStack.unshift(he.IN_TEMPLATE);break}case M.HEAD:{e._err(t,ze.misplacedStartTagForHeadElement);break}default:GT(e,t)}}function IGe(e,t){switch(t.tagID){case M.HEAD:{e.openElements.pop(),e.insertionMode=he.AFTER_HEAD;break}case M.BODY:case M.BR:case M.HTML:{GT(e,t);break}case M.TEMPLATE:{W1(e,t);break}default:e._err(t,ze.endTagWithoutMatchingOpenElement)}}function W1(e,t){e.openElements.tmplCount>0?(e.openElements.generateImpliedEndTagsThoroughly(),e.openElements.currentTagId!==M.TEMPLATE&&e._err(t,ze.closingOfElementWithOpenChildElements),e.openElements.popUntilTagNamePopped(M.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode()):e._err(t,ze.endTagWithoutMatchingOpenElement)}function GT(e,t){e.openElements.pop(),e.insertionMode=he.AFTER_HEAD,e._processToken(t)}function RGe(e,t){switch(t.tagID){case M.HTML:{va(e,t);break}case M.BASEFONT:case M.BGSOUND:case M.HEAD:case M.LINK:case M.META:case M.NOFRAMES:case M.STYLE:{wd(e,t);break}case M.NOSCRIPT:{e._err(t,ze.nestedNoscriptInHead);break}default:YT(e,t)}}function DGe(e,t){switch(t.tagID){case M.NOSCRIPT:{e.openElements.pop(),e.insertionMode=he.IN_HEAD;break}case M.BR:{YT(e,t);break}default:e._err(t,ze.endTagWithoutMatchingOpenElement)}}function YT(e,t){const n=t.type===Rn.EOF?ze.openElementsLeftAfterEof:ze.disallowedContentInNoscriptInHead;e._err(t,n),e.openElements.pop(),e.insertionMode=he.IN_HEAD,e._processToken(t)}function PGe(e,t){switch(t.tagID){case M.HTML:{va(e,t);break}case M.BODY:{e._insertElement(t,Xe.HTML),e.framesetOk=!1,e.insertionMode=he.IN_BODY;break}case M.FRAMESET:{e._insertElement(t,Xe.HTML),e.insertionMode=he.IN_FRAMESET;break}case M.BASE:case M.BASEFONT:case M.BGSOUND:case M.LINK:case M.META:case M.NOFRAMES:case M.SCRIPT:case M.STYLE:case M.TEMPLATE:case M.TITLE:{e._err(t,ze.abandonedHeadElementChild),e.openElements.push(e.headElement,M.HEAD),wd(e,t),e.openElements.remove(e.headElement);break}case M.HEAD:{e._err(t,ze.misplacedStartTagForHeadElement);break}default:KT(e,t)}}function NGe(e,t){switch(t.tagID){case M.BODY:case M.HTML:case M.BR:{KT(e,t);break}case M.TEMPLATE:{W1(e,t);break}default:e._err(t,ze.endTagWithoutMatchingOpenElement)}}function KT(e,t){e._insertFakeElement(Re.BODY,M.BODY),e.insertionMode=he.IN_BODY,tO(e,t)}function tO(e,t){switch(t.type){case Rn.CHARACTER:{Pye(e,t);break}case Rn.WHITESPACE_CHARACTER:{Dye(e,t);break}case Rn.COMMENT:{uB(e,t);break}case Rn.START_TAG:{va(e,t);break}case Rn.END_TAG:{nO(e,t);break}case Rn.EOF:{Mye(e,t);break}}}function Dye(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t)}function Pye(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t),e.framesetOk=!1}function OGe(e,t){e.openElements.tmplCount===0&&e.treeAdapter.adoptAttributes(e.openElements.items[0],t.attrs)}function $Ge(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e.openElements.tmplCount===0&&(e.framesetOk=!1,e.treeAdapter.adoptAttributes(n,t.attrs))}function MGe(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();e.framesetOk&&n&&(e.treeAdapter.detachNode(n),e.openElements.popAllUpToHtmlElement(),e._insertElement(t,Xe.HTML),e.insertionMode=he.IN_FRAMESET)}function LGe(e,t){e.openElements.hasInButtonScope(M.P)&&e._closePElement(),e._insertElement(t,Xe.HTML)}function FGe(e,t){e.openElements.hasInButtonScope(M.P)&&e._closePElement(),xye(e.openElements.currentTagId)&&e.openElements.pop(),e._insertElement(t,Xe.HTML)}function BGe(e,t){e.openElements.hasInButtonScope(M.P)&&e._closePElement(),e._insertElement(t,Xe.HTML),e.skipNextNewLine=!0,e.framesetOk=!1}function jGe(e,t){const n=e.openElements.tmplCount>0;(!e.formElement||n)&&(e.openElements.hasInButtonScope(M.P)&&e._closePElement(),e._insertElement(t,Xe.HTML),n||(e.formElement=e.openElements.current))}function zGe(e,t){e.framesetOk=!1;const n=t.tagID;for(let r=e.openElements.stackTop;r>=0;r--){const i=e.openElements.tagIDs[r];if(n===M.LI&&i===M.LI||(n===M.DD||n===M.DT)&&(i===M.DD||i===M.DT)){e.openElements.generateImpliedEndTagsWithExclusion(i),e.openElements.popUntilTagNamePopped(i);break}if(i!==M.ADDRESS&&i!==M.DIV&&i!==M.P&&e._isSpecialElement(e.openElements.items[r],i))break}e.openElements.hasInButtonScope(M.P)&&e._closePElement(),e._insertElement(t,Xe.HTML)}function UGe(e,t){e.openElements.hasInButtonScope(M.P)&&e._closePElement(),e._insertElement(t,Xe.HTML),e.tokenizer.state=Hi.PLAINTEXT}function VGe(e,t){e.openElements.hasInScope(M.BUTTON)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(M.BUTTON)),e._reconstructActiveFormattingElements(),e._insertElement(t,Xe.HTML),e.framesetOk=!1}function HGe(e,t){const n=e.activeFormattingElements.getElementEntryInScopeWithTagName(Re.A);n&&(TH(e,t),e.openElements.remove(n.element),e.activeFormattingElements.removeEntry(n)),e._reconstructActiveFormattingElements(),e._insertElement(t,Xe.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function qGe(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Xe.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function WGe(e,t){e._reconstructActiveFormattingElements(),e.openElements.hasInScope(M.NOBR)&&(TH(e,t),e._reconstructActiveFormattingElements()),e._insertElement(t,Xe.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function GGe(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Xe.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1}function YGe(e,t){e.treeAdapter.getDocumentMode(e.document)!==Zu.QUIRKS&&e.openElements.hasInButtonScope(M.P)&&e._closePElement(),e._insertElement(t,Xe.HTML),e.framesetOk=!1,e.insertionMode=he.IN_TABLE}function Nye(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,Xe.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function Oye(e){const t=yye(e,u0.TYPE);return t!=null&&t.toLowerCase()===fGe}function KGe(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,Xe.HTML),Oye(t)||(e.framesetOk=!1),t.ackSelfClosing=!0}function XGe(e,t){e._appendElement(t,Xe.HTML),t.ackSelfClosing=!0}function QGe(e,t){e.openElements.hasInButtonScope(M.P)&&e._closePElement(),e._appendElement(t,Xe.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function JGe(e,t){t.tagName=Re.IMG,t.tagID=M.IMG,Nye(e,t)}function ZGe(e,t){e._insertElement(t,Xe.HTML),e.skipNextNewLine=!0,e.tokenizer.state=Hi.RCDATA,e.originalInsertionMode=e.insertionMode,e.framesetOk=!1,e.insertionMode=he.TEXT}function eYe(e,t){e.openElements.hasInButtonScope(M.P)&&e._closePElement(),e._reconstructActiveFormattingElements(),e.framesetOk=!1,e._switchToTextParsing(t,Hi.RAWTEXT)}function tYe(e,t){e.framesetOk=!1,e._switchToTextParsing(t,Hi.RAWTEXT)}function Hne(e,t){e._switchToTextParsing(t,Hi.RAWTEXT)}function nYe(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Xe.HTML),e.framesetOk=!1,e.insertionMode=e.insertionMode===he.IN_TABLE||e.insertionMode===he.IN_CAPTION||e.insertionMode===he.IN_TABLE_BODY||e.insertionMode===he.IN_ROW||e.insertionMode===he.IN_CELL?he.IN_SELECT_IN_TABLE:he.IN_SELECT}function rYe(e,t){e.openElements.currentTagId===M.OPTION&&e.openElements.pop(),e._reconstructActiveFormattingElements(),e._insertElement(t,Xe.HTML)}function iYe(e,t){e.openElements.hasInScope(M.RUBY)&&e.openElements.generateImpliedEndTags(),e._insertElement(t,Xe.HTML)}function sYe(e,t){e.openElements.hasInScope(M.RUBY)&&e.openElements.generateImpliedEndTagsWithExclusion(M.RTC),e._insertElement(t,Xe.HTML)}function oYe(e,t){e._reconstructActiveFormattingElements(),kye(t),_H(t),t.selfClosing?e._appendElement(t,Xe.MATHML):e._insertElement(t,Xe.MATHML),t.ackSelfClosing=!0}function aYe(e,t){e._reconstructActiveFormattingElements(),Iye(t),_H(t),t.selfClosing?e._appendElement(t,Xe.SVG):e._insertElement(t,Xe.SVG),t.ackSelfClosing=!0}function qne(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Xe.HTML)}function va(e,t){switch(t.tagID){case M.I:case M.S:case M.B:case M.U:case M.EM:case M.TT:case M.BIG:case M.CODE:case M.FONT:case M.SMALL:case M.STRIKE:case M.STRONG:{qGe(e,t);break}case M.A:{HGe(e,t);break}case M.H1:case M.H2:case M.H3:case M.H4:case M.H5:case M.H6:{FGe(e,t);break}case M.P:case M.DL:case M.OL:case M.UL:case M.DIV:case M.DIR:case M.NAV:case M.MAIN:case M.MENU:case M.ASIDE:case M.CENTER:case M.FIGURE:case M.FOOTER:case M.HEADER:case M.HGROUP:case M.DIALOG:case M.DETAILS:case M.ADDRESS:case M.ARTICLE:case M.SECTION:case M.SUMMARY:case M.FIELDSET:case M.BLOCKQUOTE:case M.FIGCAPTION:{LGe(e,t);break}case M.LI:case M.DD:case M.DT:{zGe(e,t);break}case M.BR:case M.IMG:case M.WBR:case M.AREA:case M.EMBED:case M.KEYGEN:{Nye(e,t);break}case M.HR:{QGe(e,t);break}case M.RB:case M.RTC:{iYe(e,t);break}case M.RT:case M.RP:{sYe(e,t);break}case M.PRE:case M.LISTING:{BGe(e,t);break}case M.XMP:{eYe(e,t);break}case M.SVG:{aYe(e,t);break}case M.HTML:{OGe(e,t);break}case M.BASE:case M.LINK:case M.META:case M.STYLE:case M.TITLE:case M.SCRIPT:case M.BGSOUND:case M.BASEFONT:case M.TEMPLATE:{wd(e,t);break}case M.BODY:{$Ge(e,t);break}case M.FORM:{jGe(e,t);break}case M.NOBR:{WGe(e,t);break}case M.MATH:{oYe(e,t);break}case M.TABLE:{YGe(e,t);break}case M.INPUT:{KGe(e,t);break}case M.PARAM:case M.TRACK:case M.SOURCE:{XGe(e,t);break}case M.IMAGE:{JGe(e,t);break}case M.BUTTON:{VGe(e,t);break}case M.APPLET:case M.OBJECT:case M.MARQUEE:{GGe(e,t);break}case M.IFRAME:{tYe(e,t);break}case M.SELECT:{nYe(e,t);break}case M.OPTION:case M.OPTGROUP:{rYe(e,t);break}case M.NOEMBED:{Hne(e,t);break}case M.FRAMESET:{MGe(e,t);break}case M.TEXTAREA:{ZGe(e,t);break}case M.NOSCRIPT:{e.options.scriptingEnabled?Hne(e,t):qne(e,t);break}case M.PLAINTEXT:{UGe(e,t);break}case M.COL:case M.TH:case M.TD:case M.TR:case M.HEAD:case M.FRAME:case M.TBODY:case M.TFOOT:case M.THEAD:case M.CAPTION:case M.COLGROUP:break;default:qne(e,t)}}function uYe(e,t){if(e.openElements.hasInScope(M.BODY)&&(e.insertionMode=he.AFTER_BODY,e.options.sourceCodeLocationInfo)){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e._setEndLocation(n,t)}}function lYe(e,t){e.openElements.hasInScope(M.BODY)&&(e.insertionMode=he.AFTER_BODY,Hye(e,t))}function cYe(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n))}function dYe(e){const t=e.openElements.tmplCount>0,{formElement:n}=e;t||(e.formElement=null),(n||t)&&e.openElements.hasInScope(M.FORM)&&(e.openElements.generateImpliedEndTags(),t?e.openElements.popUntilTagNamePopped(M.FORM):n&&e.openElements.remove(n))}function fYe(e){e.openElements.hasInButtonScope(M.P)||e._insertFakeElement(Re.P,M.P),e._closePElement()}function hYe(e){e.openElements.hasInListItemScope(M.LI)&&(e.openElements.generateImpliedEndTagsWithExclusion(M.LI),e.openElements.popUntilTagNamePopped(M.LI))}function pYe(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.popUntilTagNamePopped(n))}function mYe(e){e.openElements.hasNumberedHeaderInScope()&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilNumberedHeaderPopped())}function gYe(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker())}function yYe(e){e._reconstructActiveFormattingElements(),e._insertFakeElement(Re.BR,M.BR),e.openElements.pop(),e.framesetOk=!1}function $ye(e,t){const n=t.tagName,r=t.tagID;for(let i=e.openElements.stackTop;i>0;i--){const s=e.openElements.items[i],o=e.openElements.tagIDs[i];if(r===o&&(r!==M.UNKNOWN||e.treeAdapter.getTagName(s)===n)){e.openElements.generateImpliedEndTagsWithExclusion(r),e.openElements.stackTop>=i&&e.openElements.shortenToLength(i);break}if(e._isSpecialElement(s,o))break}}function nO(e,t){switch(t.tagID){case M.A:case M.B:case M.I:case M.S:case M.U:case M.EM:case M.TT:case M.BIG:case M.CODE:case M.FONT:case M.NOBR:case M.SMALL:case M.STRIKE:case M.STRONG:{TH(e,t);break}case M.P:{fYe(e);break}case M.DL:case M.UL:case M.OL:case M.DIR:case M.DIV:case M.NAV:case M.PRE:case M.MAIN:case M.MENU:case M.ASIDE:case M.BUTTON:case M.CENTER:case M.FIGURE:case M.FOOTER:case M.HEADER:case M.HGROUP:case M.DIALOG:case M.ADDRESS:case M.ARTICLE:case M.DETAILS:case M.SECTION:case M.SUMMARY:case M.LISTING:case M.FIELDSET:case M.BLOCKQUOTE:case M.FIGCAPTION:{cYe(e,t);break}case M.LI:{hYe(e);break}case M.DD:case M.DT:{pYe(e,t);break}case M.H1:case M.H2:case M.H3:case M.H4:case M.H5:case M.H6:{mYe(e);break}case M.BR:{yYe(e);break}case M.BODY:{uYe(e,t);break}case M.HTML:{lYe(e,t);break}case M.FORM:{dYe(e);break}case M.APPLET:case M.OBJECT:case M.MARQUEE:{gYe(e,t);break}case M.TEMPLATE:{W1(e,t);break}default:$ye(e,t)}}function Mye(e,t){e.tmplInsertionModeStack.length>0?Vye(e,t):CH(e,t)}function bYe(e,t){var n;t.tagID===M.SCRIPT&&((n=e.scriptHandler)===null||n===void 0||n.call(e,e.openElements.current)),e.openElements.pop(),e.insertionMode=e.originalInsertionMode}function vYe(e,t){e._err(t,ze.eofInElementThatCanContainOnlyText),e.openElements.pop(),e.insertionMode=e.originalInsertionMode,e.onEof(t)}function R8(e,t){if(Rye.has(e.openElements.currentTagId))switch(e.pendingCharacterTokens.length=0,e.hasNonWhitespacePendingCharacterToken=!1,e.originalInsertionMode=e.insertionMode,e.insertionMode=he.IN_TABLE_TEXT,t.type){case Rn.CHARACTER:{Fye(e,t);break}case Rn.WHITESPACE_CHARACTER:{Lye(e,t);break}}else oS(e,t)}function xYe(e,t){e.openElements.clearBackToTableContext(),e.activeFormattingElements.insertMarker(),e._insertElement(t,Xe.HTML),e.insertionMode=he.IN_CAPTION}function wYe(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,Xe.HTML),e.insertionMode=he.IN_COLUMN_GROUP}function EYe(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(Re.COLGROUP,M.COLGROUP),e.insertionMode=he.IN_COLUMN_GROUP,SH(e,t)}function _Ye(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,Xe.HTML),e.insertionMode=he.IN_TABLE_BODY}function TYe(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(Re.TBODY,M.TBODY),e.insertionMode=he.IN_TABLE_BODY,rO(e,t)}function CYe(e,t){e.openElements.hasInTableScope(M.TABLE)&&(e.openElements.popUntilTagNamePopped(M.TABLE),e._resetInsertionMode(),e._processStartTag(t))}function SYe(e,t){Oye(t)?e._appendElement(t,Xe.HTML):oS(e,t),t.ackSelfClosing=!0}function AYe(e,t){!e.formElement&&e.openElements.tmplCount===0&&(e._insertElement(t,Xe.HTML),e.formElement=e.openElements.current,e.openElements.pop())}function kx(e,t){switch(t.tagID){case M.TD:case M.TH:case M.TR:{TYe(e,t);break}case M.STYLE:case M.SCRIPT:case M.TEMPLATE:{wd(e,t);break}case M.COL:{EYe(e,t);break}case M.FORM:{AYe(e,t);break}case M.TABLE:{CYe(e,t);break}case M.TBODY:case M.TFOOT:case M.THEAD:{_Ye(e,t);break}case M.INPUT:{SYe(e,t);break}case M.CAPTION:{xYe(e,t);break}case M.COLGROUP:{wYe(e,t);break}default:oS(e,t)}}function N2(e,t){switch(t.tagID){case M.TABLE:{e.openElements.hasInTableScope(M.TABLE)&&(e.openElements.popUntilTagNamePopped(M.TABLE),e._resetInsertionMode());break}case M.TEMPLATE:{W1(e,t);break}case M.BODY:case M.CAPTION:case M.COL:case M.COLGROUP:case M.HTML:case M.TBODY:case M.TD:case M.TFOOT:case M.TH:case M.THEAD:case M.TR:break;default:oS(e,t)}}function oS(e,t){const n=e.fosterParentingEnabled;e.fosterParentingEnabled=!0,tO(e,t),e.fosterParentingEnabled=n}function Lye(e,t){e.pendingCharacterTokens.push(t)}function Fye(e,t){e.pendingCharacterTokens.push(t),e.hasNonWhitespacePendingCharacterToken=!0}function g_(e,t){let n=0;if(e.hasNonWhitespacePendingCharacterToken)for(;n<e.pendingCharacterTokens.length;n++)oS(e,e.pendingCharacterTokens[n]);else for(;n<e.pendingCharacterTokens.length;n++)e._insertCharacters(e.pendingCharacterTokens[n]);e.insertionMode=e.originalInsertionMode,e._processToken(t)}const Bye=new Set([M.CAPTION,M.COL,M.COLGROUP,M.TBODY,M.TD,M.TFOOT,M.TH,M.THEAD,M.TR]);function kYe(e,t){const n=t.tagID;Bye.has(n)?e.openElements.hasInTableScope(M.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(M.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=he.IN_TABLE,kx(e,t)):va(e,t)}function IYe(e,t){const n=t.tagID;switch(n){case M.CAPTION:case M.TABLE:{e.openElements.hasInTableScope(M.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(M.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=he.IN_TABLE,n===M.TABLE&&N2(e,t));break}case M.BODY:case M.COL:case M.COLGROUP:case M.HTML:case M.TBODY:case M.TD:case M.TFOOT:case M.TH:case M.THEAD:case M.TR:break;default:nO(e,t)}}function SH(e,t){switch(t.tagID){case M.HTML:{va(e,t);break}case M.COL:{e._appendElement(t,Xe.HTML),t.ackSelfClosing=!0;break}case M.TEMPLATE:{wd(e,t);break}default:BP(e,t)}}function RYe(e,t){switch(t.tagID){case M.COLGROUP:{e.openElements.currentTagId===M.COLGROUP&&(e.openElements.pop(),e.insertionMode=he.IN_TABLE);break}case M.TEMPLATE:{W1(e,t);break}case M.COL:break;default:BP(e,t)}}function BP(e,t){e.openElements.currentTagId===M.COLGROUP&&(e.openElements.pop(),e.insertionMode=he.IN_TABLE,e._processToken(t))}function rO(e,t){switch(t.tagID){case M.TR:{e.openElements.clearBackToTableBodyContext(),e._insertElement(t,Xe.HTML),e.insertionMode=he.IN_ROW;break}case M.TH:case M.TD:{e.openElements.clearBackToTableBodyContext(),e._insertFakeElement(Re.TR,M.TR),e.insertionMode=he.IN_ROW,iO(e,t);break}case M.CAPTION:case M.COL:case M.COLGROUP:case M.TBODY:case M.TFOOT:case M.THEAD:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=he.IN_TABLE,kx(e,t));break}default:kx(e,t)}}function lB(e,t){const n=t.tagID;switch(t.tagID){case M.TBODY:case M.TFOOT:case M.THEAD:{e.openElements.hasInTableScope(n)&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=he.IN_TABLE);break}case M.TABLE:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=he.IN_TABLE,N2(e,t));break}case M.BODY:case M.CAPTION:case M.COL:case M.COLGROUP:case M.HTML:case M.TD:case M.TH:case M.TR:break;default:N2(e,t)}}function iO(e,t){switch(t.tagID){case M.TH:case M.TD:{e.openElements.clearBackToTableRowContext(),e._insertElement(t,Xe.HTML),e.insertionMode=he.IN_CELL,e.activeFormattingElements.insertMarker();break}case M.CAPTION:case M.COL:case M.COLGROUP:case M.TBODY:case M.TFOOT:case M.THEAD:case M.TR:{e.openElements.hasInTableScope(M.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=he.IN_TABLE_BODY,rO(e,t));break}default:kx(e,t)}}function jye(e,t){switch(t.tagID){case M.TR:{e.openElements.hasInTableScope(M.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=he.IN_TABLE_BODY);break}case M.TABLE:{e.openElements.hasInTableScope(M.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=he.IN_TABLE_BODY,lB(e,t));break}case M.TBODY:case M.TFOOT:case M.THEAD:{(e.openElements.hasInTableScope(t.tagID)||e.openElements.hasInTableScope(M.TR))&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=he.IN_TABLE_BODY,lB(e,t));break}case M.BODY:case M.CAPTION:case M.COL:case M.COLGROUP:case M.HTML:case M.TD:case M.TH:break;default:N2(e,t)}}function DYe(e,t){const n=t.tagID;Bye.has(n)?(e.openElements.hasInTableScope(M.TD)||e.openElements.hasInTableScope(M.TH))&&(e._closeTableCell(),iO(e,t)):va(e,t)}function PYe(e,t){const n=t.tagID;switch(n){case M.TD:case M.TH:{e.openElements.hasInTableScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=he.IN_ROW);break}case M.TABLE:case M.TBODY:case M.TFOOT:case M.THEAD:case M.TR:{e.openElements.hasInTableScope(n)&&(e._closeTableCell(),jye(e,t));break}case M.BODY:case M.CAPTION:case M.COL:case M.COLGROUP:case M.HTML:break;default:nO(e,t)}}function zye(e,t){switch(t.tagID){case M.HTML:{va(e,t);break}case M.OPTION:{e.openElements.currentTagId===M.OPTION&&e.openElements.pop(),e._insertElement(t,Xe.HTML);break}case M.OPTGROUP:{e.openElements.currentTagId===M.OPTION&&e.openElements.pop(),e.openElements.currentTagId===M.OPTGROUP&&e.openElements.pop(),e._insertElement(t,Xe.HTML);break}case M.INPUT:case M.KEYGEN:case M.TEXTAREA:case M.SELECT:{e.openElements.hasInSelectScope(M.SELECT)&&(e.openElements.popUntilTagNamePopped(M.SELECT),e._resetInsertionMode(),t.tagID!==M.SELECT&&e._processStartTag(t));break}case M.SCRIPT:case M.TEMPLATE:{wd(e,t);break}}}function Uye(e,t){switch(t.tagID){case M.OPTGROUP:{e.openElements.stackTop>0&&e.openElements.currentTagId===M.OPTION&&e.openElements.tagIDs[e.openElements.stackTop-1]===M.OPTGROUP&&e.openElements.pop(),e.openElements.currentTagId===M.OPTGROUP&&e.openElements.pop();break}case M.OPTION:{e.openElements.currentTagId===M.OPTION&&e.openElements.pop();break}case M.SELECT:{e.openElements.hasInSelectScope(M.SELECT)&&(e.openElements.popUntilTagNamePopped(M.SELECT),e._resetInsertionMode());break}case M.TEMPLATE:{W1(e,t);break}}}function NYe(e,t){const n=t.tagID;n===M.CAPTION||n===M.TABLE||n===M.TBODY||n===M.TFOOT||n===M.THEAD||n===M.TR||n===M.TD||n===M.TH?(e.openElements.popUntilTagNamePopped(M.SELECT),e._resetInsertionMode(),e._processStartTag(t)):zye(e,t)}function OYe(e,t){const n=t.tagID;n===M.CAPTION||n===M.TABLE||n===M.TBODY||n===M.TFOOT||n===M.THEAD||n===M.TR||n===M.TD||n===M.TH?e.openElements.hasInTableScope(n)&&(e.openElements.popUntilTagNamePopped(M.SELECT),e._resetInsertionMode(),e.onEndTag(t)):Uye(e,t)}function $Ye(e,t){switch(t.tagID){case M.BASE:case M.BASEFONT:case M.BGSOUND:case M.LINK:case M.META:case M.NOFRAMES:case M.SCRIPT:case M.STYLE:case M.TEMPLATE:case M.TITLE:{wd(e,t);break}case M.CAPTION:case M.COLGROUP:case M.TBODY:case M.TFOOT:case M.THEAD:{e.tmplInsertionModeStack[0]=he.IN_TABLE,e.insertionMode=he.IN_TABLE,kx(e,t);break}case M.COL:{e.tmplInsertionModeStack[0]=he.IN_COLUMN_GROUP,e.insertionMode=he.IN_COLUMN_GROUP,SH(e,t);break}case M.TR:{e.tmplInsertionModeStack[0]=he.IN_TABLE_BODY,e.insertionMode=he.IN_TABLE_BODY,rO(e,t);break}case M.TD:case M.TH:{e.tmplInsertionModeStack[0]=he.IN_ROW,e.insertionMode=he.IN_ROW,iO(e,t);break}default:e.tmplInsertionModeStack[0]=he.IN_BODY,e.insertionMode=he.IN_BODY,va(e,t)}}function MYe(e,t){t.tagID===M.TEMPLATE&&W1(e,t)}function Vye(e,t){e.openElements.tmplCount>0?(e.openElements.popUntilTagNamePopped(M.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode(),e.onEof(t)):CH(e,t)}function LYe(e,t){t.tagID===M.HTML?va(e,t):jP(e,t)}function Hye(e,t){var n;if(t.tagID===M.HTML){if(e.fragmentContext||(e.insertionMode=he.AFTER_AFTER_BODY),e.options.sourceCodeLocationInfo&&e.openElements.tagIDs[0]===M.HTML){e._setEndLocation(e.openElements.items[0],t);const r=e.openElements.items[1];r&&!(!((n=e.treeAdapter.getNodeSourceCodeLocation(r))===null||n===void 0)&&n.endTag)&&e._setEndLocation(r,t)}}else jP(e,t)}function jP(e,t){e.insertionMode=he.IN_BODY,tO(e,t)}function FYe(e,t){switch(t.tagID){case M.HTML:{va(e,t);break}case M.FRAMESET:{e._insertElement(t,Xe.HTML);break}case M.FRAME:{e._appendElement(t,Xe.HTML),t.ackSelfClosing=!0;break}case M.NOFRAMES:{wd(e,t);break}}}function BYe(e,t){t.tagID===M.FRAMESET&&!e.openElements.isRootHtmlElementCurrent()&&(e.openElements.pop(),!e.fragmentContext&&e.openElements.currentTagId!==M.FRAMESET&&(e.insertionMode=he.AFTER_FRAMESET))}function jYe(e,t){switch(t.tagID){case M.HTML:{va(e,t);break}case M.NOFRAMES:{wd(e,t);break}}}function zYe(e,t){t.tagID===M.HTML&&(e.insertionMode=he.AFTER_AFTER_FRAMESET)}function UYe(e,t){t.tagID===M.HTML?va(e,t):YR(e,t)}function YR(e,t){e.insertionMode=he.IN_BODY,tO(e,t)}function VYe(e,t){switch(t.tagID){case M.HTML:{va(e,t);break}case M.NOFRAMES:{wd(e,t);break}}}function HYe(e,t){t.chars=li,e._insertCharacters(t)}function qYe(e,t){e._insertCharacters(t),e.framesetOk=!1}function qye(e){for(;e.treeAdapter.getNamespaceURI(e.openElements.current)!==Xe.HTML&&!e._isIntegrationPoint(e.openElements.currentTagId,e.openElements.current);)e.openElements.pop()}function WYe(e,t){if(aGe(t))qye(e),e._startTagOutsideForeignContent(t);else{const n=e._getAdjustedCurrentElement(),r=e.treeAdapter.getNamespaceURI(n);r===Xe.MATHML?kye(t):r===Xe.SVG&&(uGe(t),Iye(t)),_H(t),t.selfClosing?e._appendElement(t,r):e._insertElement(t,r),t.ackSelfClosing=!0}}function GYe(e,t){if(t.tagID===M.P||t.tagID===M.BR){qye(e),e._endTagOutsideForeignContent(t);return}for(let n=e.openElements.stackTop;n>0;n--){const r=e.openElements.items[n];if(e.treeAdapter.getNamespaceURI(r)===Xe.HTML){e._endTagOutsideForeignContent(t);break}const i=e.treeAdapter.getTagName(r);if(i.toLowerCase()===t.tagName){t.tagName=i,e.openElements.shortenToLength(n);break}}}Re.AREA,Re.BASE,Re.BASEFONT,Re.BGSOUND,Re.BR,Re.COL,Re.EMBED,Re.FRAME,Re.HR,Re.IMG,Re.INPUT,Re.KEYGEN,Re.LINK,Re.META,Re.PARAM,Re.SOURCE,Re.TRACK,Re.WBR;const YYe=new Set(["mdxFlowExpression","mdxJsxFlowElement","mdxJsxTextElement","mdxTextExpression","mdxjsEsm"]),Wne={sourceCodeLocationInfo:!0,scriptingEnabled:!1};function Wye(e,t){const n=iKe(e),r=fye("type",{handlers:{root:KYe,element:XYe,text:QYe,comment:Yye,doctype:JYe,raw:eKe},unknown:tKe}),i={parser:n?new Vne(Wne):Vne.getFragmentParser(void 0,Wne),handle(a){r(a,i)},stitches:!1,options:t||{}};r(e,i),Yw(i,eh());const s=n?i.parser.document:i.parser.getFragment(),o=aWe(s,{file:i.options.file});return i.stitches&&vH(o,"comment",function(a,u,l){const c=a;if(c.value.stitch&&l&&u!==void 0){const d=l.children;return d[u]=c.value.stitch,u}}),o.type==="root"&&o.children.length===1&&o.children[0].type===e.type?o.children[0]:o}function Gye(e,t){let n=-1;if(e)for(;++n<e.length;)t.handle(e[n])}function KYe(e,t){Gye(e.children,t)}function XYe(e,t){nKe(e,t),Gye(e.children,t),rKe(e,t)}function QYe(e,t){const n={type:Rn.CHARACTER,chars:e.value,location:aS(e)};Yw(t,eh(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function JYe(e,t){const n={type:Rn.DOCTYPE,name:"html",forceQuirks:!1,publicId:"",systemId:"",location:aS(e)};Yw(t,eh(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function ZYe(e,t){t.stitches=!0;const n=sKe(e);if("children"in e&&"children"in n){const r=Wye({type:"root",children:e.children},t.options);n.children=r.children}Yye({type:"comment",value:{stitch:n}},t)}function Yye(e,t){const n=e.value,r={type:Rn.COMMENT,data:n,location:aS(e)};Yw(t,eh(e)),t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken)}function eKe(e,t){if(t.parser.tokenizer.preprocessor.html="",t.parser.tokenizer.preprocessor.pos=-1,t.parser.tokenizer.preprocessor.lastGapPos=-2,t.parser.tokenizer.preprocessor.gapStack=[],t.parser.tokenizer.preprocessor.skipNextNewLine=!1,t.parser.tokenizer.preprocessor.lastChunkWritten=!1,t.parser.tokenizer.preprocessor.endOfChunkHit=!1,t.parser.tokenizer.preprocessor.isEol=!1,Kye(t,eh(e)),t.parser.tokenizer.write(e.value,!1),t.parser.tokenizer._runParsingLoop(),t.parser.tokenizer.state===72||t.parser.tokenizer.state===78){t.parser.tokenizer.preprocessor.lastChunkWritten=!0;const n=t.parser.tokenizer._consume();t.parser.tokenizer._callState(n)}}function tKe(e,t){const n=e;if(t.options.passThrough&&t.options.passThrough.includes(n.type))ZYe(n,t);else{let r="";throw YYe.has(n.type)&&(r=". It looks like you are using MDX nodes with `hast-util-raw` (or `rehype-raw`). If you use this because you are using remark or rehype plugins that inject `'html'` nodes, then please raise an issue with that plugin, as its a bad and slow idea. If you use this because you are using markdown syntax, then you have to configure this utility (or plugin) to pass through these nodes (see `passThrough` in docs), but you can also migrate to use the MDX syntax"),new Error("Cannot compile `"+n.type+"` node"+r)}}function Yw(e,t){Kye(e,t);const n=e.parser.tokenizer.currentCharacterToken;n&&n.location&&(n.location.endLine=e.parser.tokenizer.preprocessor.line,n.location.endCol=e.parser.tokenizer.preprocessor.col+1,n.location.endOffset=e.parser.tokenizer.preprocessor.offset+1,e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken)),e.parser.tokenizer.paused=!1,e.parser.tokenizer.inLoop=!1,e.parser.tokenizer.active=!1,e.parser.tokenizer.returnState=Hi.DATA,e.parser.tokenizer.charRefCode=-1,e.parser.tokenizer.consumedAfterSnapshot=-1,e.parser.tokenizer.currentLocation=null,e.parser.tokenizer.currentCharacterToken=null,e.parser.tokenizer.currentToken=null,e.parser.tokenizer.currentAttr={name:"",value:""}}function Kye(e,t){if(t&&t.offset!==void 0){const n={startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:-1,endCol:-1,endOffset:-1};e.parser.tokenizer.preprocessor.lineStartPos=-t.column+1,e.parser.tokenizer.preprocessor.droppedBufferSize=t.offset,e.parser.tokenizer.preprocessor.line=t.line,e.parser.tokenizer.currentLocation=n}}function nKe(e,t){const n=e.tagName.toLowerCase();if(t.parser.tokenizer.state===Hi.PLAINTEXT)return;Yw(t,eh(e));const r=t.parser.openElements.current;let i="namespaceURI"in r?r.namespaceURI:Sy.html;i===Sy.html&&n==="svg"&&(i=Sy.svg);const s=dWe({...e,children:[]},{space:i===Sy.svg?"svg":"html"}),o={type:Rn.START_TAG,tagName:n,tagID:Gw(n),selfClosing:!1,ackSelfClosing:!1,attrs:"attrs"in s?s.attrs:[],location:aS(e)};t.parser.currentToken=o,t.parser._processToken(t.parser.currentToken),t.parser.tokenizer.lastStartTagName=n}function rKe(e,t){const n=e.tagName.toLowerCase();if(!t.parser.tokenizer.inForeignNode&&vWe.includes(n)||t.parser.tokenizer.state===Hi.PLAINTEXT)return;Yw(t,Q4(e));const r={type:Rn.END_TAG,tagName:n,tagID:Gw(n),selfClosing:!1,ackSelfClosing:!1,attrs:[],location:aS(e)};t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken),n===t.parser.tokenizer.lastStartTagName&&(t.parser.tokenizer.state===Hi.RCDATA||t.parser.tokenizer.state===Hi.RAWTEXT||t.parser.tokenizer.state===Hi.SCRIPT_DATA)&&(t.parser.tokenizer.state=Hi.DATA)}function iKe(e){const t=e.type==="root"?e.children[0]:e;return!!(t&&(t.type==="doctype"||t.type==="element"&&t.tagName.toLowerCase()==="html"))}function aS(e){const t=eh(e)||{line:void 0,column:void 0,offset:void 0},n=Q4(e)||{line:void 0,column:void 0,offset:void 0};return{startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:n.line,endCol:n.column,endOffset:n.offset}}function sKe(e){return"children"in e?Ax({...e,children:[]}):Ax(e)}function oKe(e){return function(t,n){return Wye(t,{...e,file:n})}}function $o({text:e,required:t}){const n={img({node:i,width:s,height:o,...a}){return T.jsx(rg,{...a,h:o,w:s,ref:void 0})},p({node:i,...s}){return T.jsx(Je,{...s,pb:8,fw:"inherit",ref:void 0})},h1({node:i,...s}){return T.jsx(Pi,{...s,order:1,...s,pb:12})},h2({node:i,...s}){return T.jsx(Pi,{...s,order:2,...s,pb:12})},h3({node:i,...s}){return T.jsx(Pi,{...s,order:3,...s,pb:12})},h4({node:i,...s}){return T.jsx(Pi,{...s,order:4,...s,pb:12})},h5({node:i,...s}){return T.jsx(Pi,{...s,order:5,...s,pb:12})},h6({node:i,...s}){return T.jsx(Pi,{...s,order:6,...s,pb:12})},a({node:i,...s}){return T.jsx(B1,{...s,ref:void 0})},ul({node:i,...s}){return T.jsx(nd,{withPadding:!0,...s,pb:8})},ol({node:i,type:s,...o}){return T.jsx(nd,{type:"ordered",withPadding:!0,...o,pb:8})}};return T.jsx(Yqe,{components:n,rehypePlugins:[oKe],children:e+(t?'<span style="color: #fa5252; margin-left: 4px">*</span>':"")})}function KR({issues:e,type:t}){const n=`
    ${t==="error"?"There was an issue loading the study config. Please check the following issues:":"There were some warnings while loading the study config. Please check the following warnings:"}

    ${e.map(r=>`- You have ${t==="error"?"an error":"a warning"} at ${r.instancePath||"root"}: ${r.message} - ${JSON.stringify(r.params)}  `).join(`
`)}
  `.replace(/\n\s+/g,`
`);return T.jsx($o,{text:n})}const iv=14;function aKe({completed:e,inProgress:t,rejected:n}){return T.jsxs(Ft,{ml:4,gap:4,children:[T.jsx(jr,{label:"Completed",children:T.jsx(td,{variant:"light",color:"green",leftSection:T.jsx(tS,{width:iv,height:iv,style:{paddingTop:1}}),pb:1,children:e})}),T.jsx(jr,{label:"In Progress",children:T.jsx(td,{variant:"light",color:"orange",leftSection:T.jsx(Ege,{width:iv,height:iv,style:{paddingTop:1}}),pb:1,children:t})}),T.jsx(jr,{label:"Rejected",children:T.jsx(td,{variant:"light",color:"red",leftSection:T.jsx(Uw,{width:iv,height:iv,style:{paddingTop:1}}),pb:1,children:n})})]})}const uKe={},lKe=Object.freeze(Object.defineProperty({__proto__:null,default:uKe},Symbol.toStringTag,{value:"Module"})),Xye=u4e(lKe);var D8,Gne;function sO(){if(Gne)return D8;Gne=1;var e=Xye;function t(o,a){var u,l="",c=0,d=!0,f=0,h;function p(){return h=o.charAt(f),f++,h}for(p(),h==="-"&&(l="-",p());h>="0"&&h<="9";)d&&(h=="0"?c++:d=!1),l+=h,p();if(d&&c--,h===".")for(l+=".";p()&&h>="0"&&h<="9";)l+=h;if(h==="e"||h==="E")for(l+=h,p(),(h==="-"||h==="+")&&(l+=h,p());h>="0"&&h<="9";)l+=h,p();for(;h&&h<=" ";)p();if(a&&(h===","||h==="}"||h==="]"||h==="#"||h==="/"&&(o[f]==="/"||o[f]==="*"))&&(h=0),u=+l,!(h||c||!isFinite(u)))return u}function n(o,a){return Object.defineProperty&&Object.defineProperty(o,"__COMMENTS__",{enumerable:!1,writable:!0}),o.__COMMENTS__=a||{}}function r(o){Object.defineProperty(o,"__COMMENTS__",{value:void 0})}function i(o){return o.__COMMENTS__}function s(o){if(!o)return"";var a=o.split(`
`),u,l,c,d;for(c=0;c<a.length;c++)for(u=a[c],d=u.length,l=0;l<d;l++){var f=u[l];if(f==="#")break;if(f==="/"&&(u[l+1]==="/"||u[l+1]==="*")){u[l+1]==="*"&&(c=a.length);break}else if(f>" "){a[c]="# "+u;break}}return a.join(`
`)}return D8={EOL:e.EOL||`
`,tryParseNumber:t,createComment:n,removeComment:r,getComment:i,forceComment:s},D8}var P8,Yne;function cKe(){return Yne||(Yne=1,P8="3.2.1"),P8}var N8,Kne;function AH(){if(Kne)return N8;Kne=1;function e(a,u){if(Object.prototype.toString.apply(a)!=="[object Array]"){if(a)throw new Error("dsf option must contain an array!");return n}else if(a.length===0)return n;var l=[];function c(d){return{}.toString.call(d)==="[object Function]"}return a.forEach(function(d){if(!d.name||!c(d.parse)||!c(d.stringify))throw new Error("extension does not match the DSF interface");l.push(function(){try{if(u=="parse")return d.parse.apply(null,arguments);if(u=="stringify"){var f=d.stringify.apply(null,arguments);if(f!==void 0&&(typeof f!="string"||f.length===0||f[0]==='"'||[].some.call(f,function(h){return r(h)})))throw new Error("value may not be empty, start with a quote or contain a punctuator character except colon: "+f);return f}else throw new Error("Invalid type")}catch(h){throw new Error("DSF-"+d.name+" failed; "+h.message)}})}),t.bind(null,l)}function t(a,u){if(a)for(var l=0;l<a.length;l++){var c=a[l](u);if(c!==void 0)return c}}function n(){}function r(a){return a==="{"||a==="}"||a==="["||a==="]"||a===","}function i(){return{name:"math",parse:function(a){switch(a){case"+inf":case"inf":case"+Inf":case"Inf":return 1/0;case"-inf":case"-Inf":return-1/0;case"nan":case"NaN":return NaN}},stringify:function(a){if(typeof a=="number"){if(1/a===-1/0)return"-0";if(a===1/0)return"Inf";if(a===-1/0)return"-Inf";if(isNaN(a))return"NaN"}}}}i.description="support for Inf/inf, -Inf/-inf, Nan/naN and -0";function s(a){var u=a&&a.out;return{name:"hex",parse:function(l){if(/^0x[0-9A-Fa-f]+$/.test(l))return parseInt(l,16)},stringify:function(l){if(u&&Number.isInteger(l))return"0x"+l.toString(16)}}}s.description="parse hexadecimal numbers prefixed with 0x";function o(){return{name:"date",parse:function(a){if(/^\d{4}-\d{2}-\d{2}$/.test(a)||/^\d{4}-\d{2}-\d{2}T\d{2}\:\d{2}\:\d{2}(?:.\d+)(?:Z|[+-]\d{2}:\d{2})$/.test(a)){var u=Date.parse(a);if(!isNaN(u))return new Date(u)}},stringify:function(a){if(Object.prototype.toString.call(a)==="[object Date]"){var u=a.toISOString();return u.indexOf("T00:00:00.000Z",u.length-14)!==-1?u.substr(0,10):u}}}}return o.description="support ISO dates",N8={loadDsf:e,std:{math:i,hex:s,date:o}},N8}var O8,Xne;function dKe(){return Xne||(Xne=1,O8=function(e,t){var n=sO(),r=AH(),i,s,o,a={'"':'"',"'":"'","\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},u,l;function c(){s=0,o=" "}function d(z){return z==="{"||z==="}"||z==="["||z==="]"||z===","||z===":"}function f(z){var q,W=0,J=1;for(q=s-1;q>0&&i[q]!==`
`;q--,W++);for(;q>0;q--)i[q]===`
`&&J++;throw new Error(z+" at line "+J+","+W+" >>>"+i.substr(s-W,20)+" ...")}function h(){return o=i.charAt(s),s++,o}function p(z){return i.charAt(s+z)}function m(z){for(var q="",W=o;h();){if(o===W)return h(),z&&W==="'"&&o==="'"&&q.length===0?(h(),y()):q;if(o==="\\")if(h(),o==="u"){for(var J=0,K=0;K<4;K++){h();var Z=o.charCodeAt(0),U;o>="0"&&o<="9"?U=Z-48:o>="a"&&o<="f"?U=Z-97+10:o>="A"&&o<="F"?U=Z-65+10:f("Bad \\u char "+o),J=J*16+U}q+=String.fromCharCode(J)}else if(typeof a[o]=="string")q+=a[o];else break;else o===`
`||o==="\r"?f("Bad string containing newline"):q+=o}f("Bad string")}function y(){for(var z="",q=0,W=0;;){var J=p(-W-5);if(!J||J===`
`)break;W++}function K(){for(var Z=W;o&&o<=" "&&o!==`
`&&Z-- >0;)h()}for(;o&&o<=" "&&o!==`
`;)h();for(o===`
`&&(h(),K());;){if(!o)f("Bad multiline string");else if(o==="'"){if(q++,h(),q===3)return z.slice(-1)===`
`&&(z=z.slice(0,-1)),z;continue}else for(;q>0;)z+="'",q--;o===`
`?(z+=`
`,h(),K()):(o!=="\r"&&(z+=o),h())}}function v(){if(o==='"'||o==="'")return m(!1);for(var z="",q=s,W=-1;;){if(o===":")return z?W>=0&&W!==z.length&&(s=q+W,f("Found whitespace in your key name (use quotes to include)")):f("Found ':' but no key name (for an empty key name use quotes)"),z;o<=" "?o?W<0&&(W=z.length):f("Found EOF while looking for a key name (check your syntax)"):d(o)?f("Found '"+o+"' where a key name was expected (check your syntax or use quotes if the key name includes {}[],: or whitespace)"):z+=o,h()}}function b(){for(;o;){for(;o&&o<=" ";)h();if(o==="#"||o==="/"&&p(0)==="/")for(;o&&o!==`
`;)h();else if(o==="/"&&p(0)==="*"){for(h(),h();o&&!(o==="*"&&p(0)==="/");)h();o&&(h(),h())}else break}}function w(){var z=o;for(d(o)&&f("Found a punctuator character '"+o+"' when expecting a quoteless string (check your syntax)");;){h();var q=o==="\r"||o===`
`||o==="";if(q||o===","||o==="}"||o==="]"||o==="#"||o==="/"&&(p(0)==="/"||p(0)==="*")){var W=z[0];switch(W){case"f":if(z.trim()==="false")return!1;break;case"n":if(z.trim()==="null")return null;break;case"t":if(z.trim()==="true")return!0;break;default:if(W==="-"||W>="0"&&W<="9"){var J=n.tryParseNumber(z);if(J!==void 0)return J}}if(q){z=z.trim();var K=l(z);return K!==void 0?K:z}}z+=o}}function E(z,q){var W;for(z--,W=s-2;W>z&&i[W]<=" "&&i[W]!==`
`;W--);i[W]===`
`&&W--,i[W]==="\r"&&W--;var J=i.substr(z,W-z+1);for(W=0;W<J.length;W++)if(J[W]>" "){var K=J.indexOf(`
`);if(K>=0){var Z=[J.substr(0,K),J.substr(K+1)];return q&&Z[0].trim().length===0&&Z.shift(),Z}else return[J]}return[]}function _(z){function q(J,K){var Z,U,L,Y;switch(typeof J){case"string":J.indexOf(K)>=0&&(Y=J);break;case"object":if(Object.prototype.toString.apply(J)==="[object Array]")for(Z=0,L=J.length;Z<L;Z++)Y=q(J[Z],K)||Y;else for(U in J)Object.prototype.hasOwnProperty.call(J,U)&&(Y=q(J[U],K)||Y)}return Y}function W(J){var K=q(z,J);return K?"found '"+J+`' in a string value, your mistake could be with:
  > `+K+`
  (unquoted strings contain everything up to the next line!)`:""}return W("}")||W("]")}function C(){var z=[],q,W,J;try{if(u&&(q=n.createComment(z,{a:[]})),h(),W=s,b(),q&&(J=E(W,!0).join(`
`)),o==="]")return h(),q&&(q.e=[J]),z;for(;o;){if(z.push(k()),W=s,b(),o===","&&(h(),W=s,b()),q){var K=E(W);q.a.push([J||"",K[0]||""]),J=K[1]}if(o==="]")return h(),q&&(q.a[q.a.length-1][1]+=J||""),z;b()}f("End of input while parsing an array (missing ']')")}catch(Z){throw Z.hint=Z.hint||_(z),Z}}function S(z){var q="",W={},J,K,Z;try{if(u&&(J=n.createComment(W,{c:{},o:[]})),z?K=1:(h(),K=s),b(),J&&(Z=E(K,!0).join(`
`)),o==="}"&&!z)return J&&(J.e=[Z]),h(),W;for(;o;){if(q=v(),b(),o!==":"&&f("Expected ':' instead of '"+o+"'"),h(),W[q]=k(),K=s,b(),o===","&&(h(),K=s,b()),J){var U=E(K);J.c[q]=[Z||"",U[0]||""],Z=U[1],J.o.push(q)}if(o==="}"&&!z)return h(),J&&(J.c[q][1]+=Z||""),W;b()}if(z)return W;f("End of input while parsing an object (missing '}')")}catch(L){throw L.hint=L.hint||_(W),L}}function k(){switch(b(),o){case"{":return S();case"[":return C();case"'":case'"':return m(!0);default:return w()}}function R(z,q){var W=s;if(b(),o&&f("Syntax error, found trailing characters"),u){var J=q.join(`
`),K=E(W).join(`
`);if(K||J){var Z=n.createComment(z,n.getComment(z));Z.r=[J,K]}}return z}function N(){b();var z=u?E(1):null;switch(o){case"{":return R(S(),z);case"[":return R(C(),z);default:return R(k(),z)}}function O(){b();var z=u?E(1):null;switch(o){case"{":return R(S(),z);case"[":return R(C(),z)}try{return R(S(!0),z)}catch(q){c();try{return R(k(),z)}catch{throw q}}}if(typeof e!="string")throw new Error("source is not a string");var F=null,$=!0;return t&&typeof t=="object"&&(u=t.keepWsc,F=t.dsf,$=t.legacyRoot!==!1),l=r.loadDsf(F,"parse"),i=e,c(),$?O():N()}),O8}var $8,Qne;function fKe(){return Qne||(Qne=1,$8=function(e,t){var n=sO(),r=AH(),i={obj:["{","}"],arr:["[","]"],key:["",""],qkey:['"','"'],col:[":",""],com:[",",""],str:["",""],qstr:['"','"'],mstr:["'''","'''"],num:["",""],lit:["",""],dsf:["",""],esc:["\\",""],uni:["\\u",""],rem:["",""]},s=n.EOL,o="  ",a=!1,u=!1,l=!1,c=!1,d=0,f=1,h="",p=null,m=!1,y=i;if(t&&typeof t=="object"){t.quotes=t.quotes==="always"?"strings":t.quotes,(t.eol===`
`||t.eol===`\r
`)&&(s=t.eol),a=t.keepWsc,d=t.condense||0,u=t.bracesSameLine,l=t.quotes==="all"||t.quotes==="keys",c=t.quotes==="all"||t.quotes==="strings"||t.separator===!0,c||t.multiline=="off"?f=0:f=t.multiline=="no-tabs"?2:1,h=t.separator===!0?y.com[0]:"",p=t.dsf,m=t.sortProps,typeof t.space=="number"?o=new Array(t.space+1).join(" "):typeof t.space=="string"&&(o=t.space),t.colors===!0&&(y={obj:["\x1B[37m{\x1B[0m","\x1B[37m}\x1B[0m"],arr:["\x1B[37m[\x1B[0m","\x1B[37m]\x1B[0m"],key:["\x1B[33m","\x1B[0m"],qkey:['\x1B[33m"','"\x1B[0m'],col:["\x1B[37m:\x1B[0m",""],com:["\x1B[37m,\x1B[0m",""],str:["\x1B[37;1m","\x1B[0m"],qstr:['\x1B[37;1m"','"\x1B[0m'],mstr:["\x1B[37;1m'''","'''\x1B[0m"],num:["\x1B[36;1m","\x1B[0m"],lit:["\x1B[36m","\x1B[0m"],dsf:["\x1B[37m","\x1B[0m"],esc:["\x1B[31m\\","\x1B[0m"],uni:["\x1B[31m\\u","\x1B[0m"],rem:["\x1B[35m","\x1B[0m"]});var v,b=Object.keys(i);for(v=b.length-1;v>=0;v--){var w=b[v];y[w].push(i[w][0].length,i[w][1].length)}}var E,_="---\u2028--\uFEFF-",C=new RegExp('[\\\\\\"\0-'+_+"]","g"),S=new RegExp(`^\\s|^"|^'|^#|^\\/\\*|^\\/\\/|^\\{|^\\}|^\\[|^\\]|^:|^,|\\s$|[\0-`+_+"]","g"),k=new RegExp("'''|^[\\s]+$|[\0-"+(f===2?"	":"\b")+"\v\f-"+_+"]","g"),R=new RegExp("^(true|false|null)\\s*((,|\\]|\\}|#|//|/\\*).*)?$"),N={"\b":"b","	":"t","\n":"n","\f":"f","\r":"r",'"':'"',"\\":"\\"},O=/[,\{\[\}\]\s:#"']|\/\/|\/\*/,F="",$=0;function z(Y,j){return $+=Y[0].length+Y[1].length-Y[2]-Y[3],Y[0]+j+Y[1]}function q(Y){return Y.replace(C,function(j){var G=N[j];return typeof G=="string"?z(y.esc,G):z(y.uni,("0000"+j.charCodeAt(0).toString(16)).slice(-4))})}function W(Y,j,G,X){return Y?(S.lastIndex=0,R.lastIndex=0,c||G||S.test(Y)||n.tryParseNumber(Y,!0)!==void 0||R.test(Y)?(C.lastIndex=0,k.lastIndex=0,C.test(Y)?!k.test(Y)&&!X&&f?J(Y,j):z(y.qstr,q(Y)):z(y.qstr,Y)):z(y.str,Y)):z(y.qstr,"")}function J(Y,j){var G,X=Y.replace(/\r/g,"").split(`
`);if(j+=o,X.length===1)return z(y.mstr,X[0]);var ne=s+j+y.mstr[0];for(G=0;G<X.length;G++)ne+=s,X[G]&&(ne+=j+X[G]);return ne+s+j+y.mstr[1]}function K(Y){return Y?l||O.test(Y)?(C.lastIndex=0,z(y.qkey,C.test(Y)?q(Y):Y)):z(y.key,Y):'""'}function Z(Y,j,G,X){function ne(wn){return wn&&wn[wn[0]==="\r"?1:0]===`
`}function pe(wn){return wn&&!ne(wn)}function de(wn,An,Hr){if(!wn)return"";wn=n.forceComment(wn);var Ln,Ns=wn.length;for(Ln=0;Ln<Ns&&wn[Ln]<=" ";Ln++);return Hr&&Ln>0&&(wn=wn.substr(Ln)),Ln<Ns?An+z(y.rem,wn):wn}var xe=E(Y);if(xe!==void 0)return z(y.dsf,xe);switch(typeof Y){case"string":return W(Y,F,j,X);case"number":return isFinite(Y)?z(y.num,String(Y)):z(y.lit,"null");case"boolean":return z(y.lit,String(Y));case"object":if(!Y)return z(y.lit,"null");var Ce;a&&(Ce=n.getComment(Y));var ue=Object.prototype.toString.apply(Y)==="[object Array]",se=F;F+=o;var me=s+se,be=s+F,Le=G||u?"":me,Ue=[],Ne,je=d?[]:null,Ke=c,ut=f,pt=h?"":y.com[0],xt=0,De,wt,Kt,Te,Oe,lt,_t,St,en;if(ue){for(De=0,wt=Y.length;De<wt;De++){if(Ne=De<wt-1,Ce?(lt=Ce.a[De]||[],_t=pe(lt[1]),Ue.push(de(lt[0],`
`)+be),je&&(lt[0]||lt[1]||_t)&&(je=null)):Ue.push(be),$=0,Te=Y[De],Ue.push(Z(Te,Ce?_t:!1,!0)+(Ne?h:"")),je){switch(typeof Te){case"string":$=0,c=!0,f=0,je.push(Z(Te,!1,!0)+(Ne?y.com[0]:"")),c=Ke,f=ut;break;case"object":if(Te){je=null;break}default:je.push(Ue[Ue.length-1]+(Ne?pt:""));break}Ne&&($+=y.com[0].length-y.com[2]),xt+=$}Ce&&lt[1]&&Ue.push(de(lt[1],_t?" ":`
`,_t))}wt===0?Ce&&Ce.e&&Ue.push(de(Ce.e[0],`
`)+me):Ue.push(me),Ue.length===0?St=z(y.arr,""):(St=Le+z(y.arr,Ue.join("")),je&&(en=je.join(" "),en.length-xt<=d&&(St=z(y.arr,en))))}else{var En=Ce?Ce.o.slice():[],sr=[];for(Kt in Y)Object.prototype.hasOwnProperty.call(Y,Kt)&&En.indexOf(Kt)<0&&sr.push(Kt);m&&sr.sort();var Jr=En.concat(sr);for(De=0,wt=Jr.length;De<wt;De++)if(Ne=De<wt-1,Kt=Jr[De],Ce?(lt=Ce.c[Kt]||[],_t=pe(lt[1]),Ue.push(de(lt[0],`
`)+be),je&&(lt[0]||lt[1]||_t)&&(je=null)):Ue.push(be),$=0,Te=Y[Kt],Oe=Z(Te,Ce&&_t),Ue.push(K(Kt)+y.col[0]+(ne(Oe)?"":" ")+Oe+(Ne?h:"")),Ce&&lt[1]&&Ue.push(de(lt[1],_t?" ":`
`,_t)),je){switch(typeof Te){case"string":$=0,c=!0,f=0,Oe=Z(Te,!1),c=Ke,f=ut,je.push(K(Kt)+y.col[0]+" "+Oe+(Ne?y.com[0]:""));break;case"object":if(Te){je=null;break}default:je.push(Ue[Ue.length-1]+(Ne?pt:""));break}$+=y.col[0].length-y.col[2],Ne&&($+=y.com[0].length-y.com[2]),xt+=$}wt===0?Ce&&Ce.e&&Ue.push(de(Ce.e[0],`
`)+me):Ue.push(me),Ue.length===0?St=z(y.obj,""):(St=Le+z(y.obj,Ue.join("")),je&&(en=je.join(" "),en.length-xt<=d&&(St=z(y.obj,en))))}return F=se,St}}E=r.loadDsf(p,"stringify");var U="",L=a?L=(n.getComment(e)||{}).r:null;return L&&L[0]&&(U=L[0]+`
`),U+=Z(e,null,!0,!0),L&&(U+=L[1]||""),U}),$8}var M8,Jne;function hKe(){if(Jne)return M8;Jne=1;var e=sO();function t(c,d,f){var h;return c&&(h={b:c}),d&&((h=h||{}).a=d),f&&((h=h||{}).x=f),h}function n(c,d){if(!(c===null||typeof c!="object")){var f=e.getComment(c);f&&e.removeComment(c);var h,p,m,y;if(Object.prototype.toString.apply(c)==="[object Array]"){for(y={a:{}},h=0,p=c.length;h<p;h++)s(y.a,h,f.a[h],n(c[h]))&&(m=!0);!m&&f.e&&(y.e=t(f.e[0],f.e[1]),m=!0)}else{y={s:{}};var v,b=Object.keys(c);for(f&&f.o?(v=[],f.o.concat(b).forEach(function(E){Object.prototype.hasOwnProperty.call(c,E)&&v.indexOf(E)<0&&v.push(E)})):v=b,y.o=v,h=0,p=v.length;h<p;h++){var w=v[h];s(y.s,w,f.c[w],n(c[w]))&&(m=!0)}!m&&f.e&&(y.e=t(f.e[0],f.e[1]),m=!0)}return d&&f&&f.r&&(y.r=t(f.r[0],f.r[1])),m?y:void 0}}function r(){var c="";return[].forEach.call(arguments,function(d){d&&d.trim()!==""&&(c&&(c+="; "),c+=d.trim())}),c}function i(c,d){var f=[];if(u(c,d,f,[]),f.length>0){var h=l(d,null,1);h+=`
# Orphaned comments:
`,f.forEach(function(p){h+=("# "+p.path.join("/")+": "+r(p.b,p.a,p.e)).replace(`
`,"\\n ")+`
`}),l(d,h,1)}}function s(c,d,f,h){var p=t(f?f[0]:void 0,f?f[1]:void 0,h);return p&&(c[d]=p),p}function o(c,d){var f=t(d.b,d.a);return f.path=c,f}function a(c,d,f){if(c){var h,p;if(c.a)for(h=0,p=c.a.length;h<p;h++){var m=f.slice().concat([h]),y=c.a[h];y&&(d.push(o(m,y)),a(y.x,d,m))}else c.o&&c.o.forEach(function(v){var b=f.slice().concat([v]),w=c.s[v];w&&(d.push(o(b,w)),a(w.x,d,b))});c.e&&d.push(o(f,c.e))}}function u(c,d,f,h){if(c){if(d===null||typeof d!="object"){a(c,f,h);return}var p,m=e.createComment(d);if(h.length===0&&c.r&&(m.r=[c.r.b,c.r.a]),Object.prototype.toString.apply(d)==="[object Array]"){m.a=[];var y=c.a||{};for(var v in y)if(y.hasOwnProperty(v)){p=parseInt(v);var b=c.a[v];if(b){var w=h.slice().concat([p]);p<d.length?(m.a[p]=[b.b,b.a],u(b.x,d[p],f,w)):(f.push(o(w,b)),a(b.x,f,w))}}p===0&&c.e&&(m.e=[c.e.b,c.e.a])}else m.c={},m.o=[],(c.o||[]).forEach(function(E){var _=h.slice().concat([E]),C=c.s[E];Object.prototype.hasOwnProperty.call(d,E)?(m.o.push(E),C&&(m.c[E]=[C.b,C.a],u(C.x,d[E],f,_))):C&&(f.push(o(_,C)),a(C.x,f,_))}),c.e&&(m.e=[c.e.b,c.e.a])}}function l(c,d,f){var h=e.createComment(c,e.getComment(c));return h.r||(h.r=["",""]),(d||d==="")&&(h.r[f]=e.forceComment(d)),h.r[f]||""}return M8={extract:function(c){return n(c,!0)},merge:i,header:function(c,d){return l(c,d,0)},footer:function(c,d){return l(c,d,1)}},M8}/*!
 * Hjson v3.2.1
 * https://hjson.github.io
 *
 * Copyright 2014-2017 Christian Zangl, MIT license
 * Details and documentation:
 * https://github.com/hjson/hjson-js
 *
 * This code is based on the the JSON version by Douglas Crockford:
 * https://github.com/douglascrockford/JSON-js (json_parse.js, json2.js)
 */var L8,Zne;function pKe(){if(Zne)return L8;Zne=1;var e=sO(),t=cKe(),n=dKe(),r=fKe(),i=hKe(),s=AH();return L8={parse:n,stringify:r,endOfLine:function(){return e.EOL},setEndOfLine:function(o){(o===`
`||o===`\r
`)&&(e.EOL=o)},version:t,rt:{parse:function(o,a){return(a=a||{}).keepWsc=!0,n(o,a)},stringify:function(o,a){return(a=a||{}).keepWsc=!0,r(o,a)}},comments:i,dsf:s.std},L8}var mKe=pKe(),ere={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qye=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},gKe=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=e[n++],o=e[n++],a=e[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;t[r++]=String.fromCharCode(55296+(u>>10)),t[r++]=String.fromCharCode(56320+(u&1023))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return t.join("")},kH={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const s=e[i],o=i+1<e.length,a=o?e[i+1]:0,u=i+2<e.length,l=u?e[i+2]:0,c=s>>2,d=(s&3)<<4|a>>4;let f=(a&15)<<2|l>>6,h=l&63;u||(h=64,o||(f=64)),r.push(n[c],n[d],n[f],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Qye(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):gKe(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const s=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0;++i;const l=i<e.length?n[e.charAt(i)]:64;++i;const d=i<e.length?n[e.charAt(i)]:64;if(++i,s==null||a==null||l==null||d==null)throw new yKe;const f=s<<2|a>>4;if(r.push(f),l!==64){const h=a<<4&240|l>>2;if(r.push(h),d!==64){const p=l<<6&192|d;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class yKe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const bKe=function(e){const t=Qye(e);return kH.encodeByteArray(t,!0)},zP=function(e){return bKe(e).replace(/\./g,"")},Jye=function(e){try{return kH.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zye(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vKe=()=>Zye().__FIREBASE_DEFAULTS__,xKe=()=>{if(typeof process>"u"||typeof ere>"u")return;const e=ere.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},wKe=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&Jye(e[1]);return t&&JSON.parse(t)},oO=()=>{try{return vKe()||xKe()||wKe()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},e1e=e=>{var t,n;return(n=(t=oO())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},EKe=e=>{const t=e1e(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},t1e=()=>{var e;return(e=oO())===null||e===void 0?void 0:e.config},n1e=e=>{var t;return(t=oO())===null||t===void 0?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O2{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _Ke(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",i=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[zP(JSON.stringify(n)),zP(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ma(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function TKe(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ma())}function CKe(){var e;const t=(e=oO())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function SKe(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function AKe(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function kKe(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function IKe(){const e=ma();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function RKe(){return!CKe()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function IH(){try{return typeof indexedDB=="object"}catch{return!1}}function DKe(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;t(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PKe="FirebaseError";class th extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=PKe,Object.setPrototypeOf(this,th.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Kw.prototype.create)}}class Kw{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},i=`${this.service}/${t}`,s=this.errors[t],o=s?NKe(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new th(i,a,r)}}function NKe(e,t){return e.replace(OKe,(n,r)=>{const i=t[r];return i!=null?String(i):`<${r}?>`})}const OKe=/\{\$([^}]+)}/g;function $Ke(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function $2(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const s=e[i],o=t[i];if(tre(s)&&tre(o)){if(!$2(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function tre(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uS(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(i=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function MKe(e,t){const n=new LKe(e,t);return n.subscribe.bind(n)}class LKe{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,r){let i;if(t===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");FKe(t,["next","error","complete"])?i=t:i={next:t,error:n,complete:r},i.next===void 0&&(i.next=F8),i.error===void 0&&(i.error=F8),i.complete===void 0&&(i.complete=F8);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function FKe(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function F8(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BKe=1e3,jKe=2,zKe=4*60*60*1e3,UKe=.5;function VKe(e,t=BKe,n=jKe){const r=t*Math.pow(n,e),i=Math.round(UKe*r*(Math.random()-.5)*2);return Math.min(zKe,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xr(e){return e&&e._delegate?e._delegate:e}class Mf{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ay="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let HKe=class{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new O2;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(WKe(t))try{this.getOrInitializeService({instanceIdentifier:ay})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(t=ay){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=ay){return this.instances.has(t)}getOptions(t=ay){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(t,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(t),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&t(o,i),()=>{s.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:qKe(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=ay){return this.component?this.component.multipleInstances?t:ay:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function qKe(e){return e===ay?void 0:e}function WKe(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GKe{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new HKe(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bn;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Bn||(Bn={}));const YKe={debug:Bn.DEBUG,verbose:Bn.VERBOSE,info:Bn.INFO,warn:Bn.WARN,error:Bn.ERROR,silent:Bn.SILENT},KKe=Bn.INFO,XKe={[Bn.DEBUG]:"log",[Bn.VERBOSE]:"log",[Bn.INFO]:"info",[Bn.WARN]:"warn",[Bn.ERROR]:"error"},QKe=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),i=XKe[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class aO{constructor(t){this.name=t,this._logLevel=KKe,this._logHandler=QKe,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Bn))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?YKe[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Bn.DEBUG,...t),this._logHandler(this,Bn.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Bn.VERBOSE,...t),this._logHandler(this,Bn.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Bn.INFO,...t),this._logHandler(this,Bn.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Bn.WARN,...t),this._logHandler(this,Bn.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Bn.ERROR,...t),this._logHandler(this,Bn.ERROR,...t)}}const JKe=(e,t)=>t.some(n=>e instanceof n);let nre,rre;function ZKe(){return nre||(nre=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function eXe(){return rre||(rre=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const r1e=new WeakMap,cB=new WeakMap,i1e=new WeakMap,B8=new WeakMap,RH=new WeakMap;function tXe(e){const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("success",s),e.removeEventListener("error",o)},s=()=>{n(l0(e.result)),i()},o=()=>{r(e.error),i()};e.addEventListener("success",s),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&r1e.set(n,e)}).catch(()=>{}),RH.set(t,e),t}function nXe(e){if(cB.has(e))return;const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",o),e.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",s),e.addEventListener("error",o),e.addEventListener("abort",o)});cB.set(e,t)}let dB={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return cB.get(e);if(t==="objectStoreNames")return e.objectStoreNames||i1e.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return l0(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function rXe(e){dB=e(dB)}function iXe(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(j8(this),t,...n);return i1e.set(r,t.sort?t.sort():[t]),l0(r)}:eXe().includes(e)?function(...t){return e.apply(j8(this),t),l0(r1e.get(this))}:function(...t){return l0(e.apply(j8(this),t))}}function sXe(e){return typeof e=="function"?iXe(e):(e instanceof IDBTransaction&&nXe(e),JKe(e,ZKe())?new Proxy(e,dB):e)}function l0(e){if(e instanceof IDBRequest)return tXe(e);if(B8.has(e))return B8.get(e);const t=sXe(e);return t!==e&&(B8.set(e,t),RH.set(t,e)),t}const j8=e=>RH.get(e);function oXe(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(e,t),a=l0(o);return r&&o.addEventListener("upgradeneeded",u=>{r(l0(o.result),u.oldVersion,u.newVersion,l0(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}const aXe=["get","getKey","getAll","getAllKeys","count"],uXe=["put","add","delete","clear"],z8=new Map;function ire(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(z8.get(t))return z8.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=uXe.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||aXe.includes(n)))return;const s=async function(o,...a){const u=this.transaction(o,i?"readwrite":"readonly");let l=u.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),i&&u.done]))[0]};return z8.set(t,s),s}rXe(e=>({...e,get:(t,n,r)=>ire(t,n)||e.get(t,n,r),has:(t,n)=>!!ire(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lXe{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(cXe(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function cXe(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const fB="@firebase/app",sre="0.10.18";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tp=new aO("@firebase/app"),dXe="@firebase/app-compat",fXe="@firebase/analytics-compat",hXe="@firebase/analytics",pXe="@firebase/app-check-compat",mXe="@firebase/app-check",gXe="@firebase/auth",yXe="@firebase/auth-compat",bXe="@firebase/database",vXe="@firebase/data-connect",xXe="@firebase/database-compat",wXe="@firebase/functions",EXe="@firebase/functions-compat",_Xe="@firebase/installations",TXe="@firebase/installations-compat",CXe="@firebase/messaging",SXe="@firebase/messaging-compat",AXe="@firebase/performance",kXe="@firebase/performance-compat",IXe="@firebase/remote-config",RXe="@firebase/remote-config-compat",DXe="@firebase/storage",PXe="@firebase/storage-compat",NXe="@firebase/firestore",OXe="@firebase/vertexai",$Xe="@firebase/firestore-compat",MXe="firebase",LXe="11.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hB="[DEFAULT]",FXe={[fB]:"fire-core",[dXe]:"fire-core-compat",[hXe]:"fire-analytics",[fXe]:"fire-analytics-compat",[mXe]:"fire-app-check",[pXe]:"fire-app-check-compat",[gXe]:"fire-auth",[yXe]:"fire-auth-compat",[bXe]:"fire-rtdb",[vXe]:"fire-data-connect",[xXe]:"fire-rtdb-compat",[wXe]:"fire-fn",[EXe]:"fire-fn-compat",[_Xe]:"fire-iid",[TXe]:"fire-iid-compat",[CXe]:"fire-fcm",[SXe]:"fire-fcm-compat",[AXe]:"fire-perf",[kXe]:"fire-perf-compat",[IXe]:"fire-rc",[RXe]:"fire-rc-compat",[DXe]:"fire-gcs",[PXe]:"fire-gcs-compat",[NXe]:"fire-fst",[$Xe]:"fire-fst-compat",[OXe]:"fire-vertex","fire-js":"fire-js",[MXe]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UP=new Map,BXe=new Map,pB=new Map;function ore(e,t){try{e.container.addComponent(t)}catch(n){Tp.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Cp(e){const t=e.name;if(pB.has(t))return Tp.debug(`There were multiple attempts to register component ${t}.`),!1;pB.set(t,e);for(const n of UP.values())ore(n,e);for(const n of BXe.values())ore(n,e);return!0}function Xw(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function pf(e){return e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jXe={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},c0=new Kw("app","Firebase",jXe);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zXe{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Mf("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw c0.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G1=LXe;function s1e(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:hB,automaticDataCollectionEnabled:!1},t),i=r.name;if(typeof i!="string"||!i)throw c0.create("bad-app-name",{appName:String(i)});if(n||(n=t1e()),!n)throw c0.create("no-options");const s=UP.get(i);if(s){if($2(n,s.options)&&$2(r,s.config))return s;throw c0.create("duplicate-app",{appName:i})}const o=new GKe(i);for(const u of pB.values())o.addComponent(u);const a=new zXe(n,r,o);return UP.set(i,a),a}function DH(e=hB){const t=UP.get(e);if(!t&&e===hB&&t1e())return s1e();if(!t)throw c0.create("no-app",{appName:e});return t}function rd(e,t,n){var r;let i=(r=FXe[e])!==null&&r!==void 0?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${t}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Tp.warn(a.join(" "));return}Cp(new Mf(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UXe="firebase-heartbeat-database",VXe=1,M2="firebase-heartbeat-store";let U8=null;function o1e(){return U8||(U8=oXe(UXe,VXe,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(M2)}catch(n){console.warn(n)}}}}).catch(e=>{throw c0.create("idb-open",{originalErrorMessage:e.message})})),U8}async function HXe(e){try{const n=(await o1e()).transaction(M2),r=await n.objectStore(M2).get(a1e(e));return await n.done,r}catch(t){if(t instanceof th)Tp.warn(t.message);else{const n=c0.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});Tp.warn(n.message)}}}async function are(e,t){try{const r=(await o1e()).transaction(M2,"readwrite");await r.objectStore(M2).put(t,a1e(e)),await r.done}catch(n){if(n instanceof th)Tp.warn(n.message);else{const r=c0.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Tp.warn(r.message)}}}function a1e(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qXe=1024,WXe=30*24*60*60*1e3;class GXe{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new KXe(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=ure();return((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=WXe}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Tp.warn(r)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=ure(),{heartbeatsToSend:r,unsentEntries:i}=YXe(this._heartbeatsCache.heartbeats),s=zP(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Tp.warn(n),""}}}function ure(){return new Date().toISOString().substring(0,10)}function YXe(e,t=qXe){const n=[];let r=e.slice();for(const i of e){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),lre(n)>t){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),lre(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class KXe{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return IH()?DKe().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await HXe(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return are(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return are(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function lre(e){return zP(JSON.stringify({version:2,heartbeats:e})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XXe(e){Cp(new Mf("platform-logger",t=>new lXe(t),"PRIVATE")),Cp(new Mf("heartbeat",t=>new GXe(t),"PRIVATE")),rd(fB,sre,e),rd(fB,sre,"esm2017"),rd("fire-js","")}XXe("");var QXe="firebase",JXe="11.2.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */rd(QXe,JXe,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u1e="firebasestorage.googleapis.com",l1e="storageBucket",ZXe=2*60*1e3,eQe=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li extends th{constructor(t,n,r=0){super(V8(t),`Firebase Storage: ${n} (${V8(t)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Li.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return V8(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var $i;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})($i||($i={}));function V8(e){return"storage/"+e}function PH(){const e="An unknown error occurred, please check the error payload for server response.";return new Li($i.UNKNOWN,e)}function tQe(e){return new Li($i.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function nQe(e){return new Li($i.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function rQe(){const e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Li($i.UNAUTHENTICATED,e)}function iQe(){return new Li($i.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function sQe(e){return new Li($i.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function oQe(){return new Li($i.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function aQe(){return new Li($i.CANCELED,"User canceled the upload/download.")}function uQe(e){return new Li($i.INVALID_URL,"Invalid URL '"+e+"'.")}function lQe(e){return new Li($i.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function cQe(){return new Li($i.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+l1e+"' property when initializing the app?")}function dQe(){return new Li($i.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function fQe(){return new Li($i.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function hQe(e){return new Li($i.UNSUPPORTED_ENVIRONMENT,`${e} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function mB(e){return new Li($i.INVALID_ARGUMENT,e)}function c1e(){return new Li($i.APP_DELETED,"The Firebase app was deleted.")}function pQe(e){return new Li($i.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function XT(e,t){return new Li($i.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function y_(e){throw new Li($i.INTERNAL_ERROR,"Internal error: "+e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La{constructor(t,n){this.bucket=t,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,n){let r;try{r=La.makeFromUrl(t,n)}catch{return new La(t,"")}if(r.path==="")return r;throw lQe(t)}static makeFromUrl(t,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(E){E.path.charAt(E.path.length-1)==="/"&&(E.path_=E.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),u={bucket:1,path:3};function l(E){E.path_=decodeURIComponent(E.path)}const c="v[A-Za-z0-9_]+",d=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",h=new RegExp(`^https?://${d}/${c}/b/${i}/o${f}`,"i"),p={bucket:1,path:3},m=n===u1e?"(?:storage.googleapis.com|storage.cloud.google.com)":n,y="([^?#]*)",v=new RegExp(`^https?://${m}/${i}/${y}`,"i"),w=[{regex:a,indices:u,postModify:s},{regex:h,indices:p,postModify:l},{regex:v,indices:{bucket:1,path:2},postModify:l}];for(let E=0;E<w.length;E++){const _=w[E],C=_.regex.exec(t);if(C){const S=C[_.indices.bucket];let k=C[_.indices.path];k||(k=""),r=new La(S,k),_.postModify(r);break}}if(r==null)throw uQe(t);return r}}class mQe{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gQe(e,t,n){let r=1,i=null,s=null,o=!1,a=0;function u(){return a===2}let l=!1;function c(...y){l||(l=!0,t.apply(null,y))}function d(y){i=setTimeout(()=>{i=null,e(h,u())},y)}function f(){s&&clearTimeout(s)}function h(y,...v){if(l){f();return}if(y){f(),c.call(null,y,...v);return}if(u()||o){f(),c.call(null,y,...v);return}r<64&&(r*=2);let w;a===1?(a=2,w=0):w=(r+Math.random())*1e3,d(w)}let p=!1;function m(y){p||(p=!0,f(),!l&&(i!==null?(y||(a=2),clearTimeout(i),d(0)):y||(a=1)))}return d(0),s=setTimeout(()=>{o=!0,m(!0)},n),m}function yQe(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bQe(e){return e!==void 0}function vQe(e){return typeof e=="object"&&!Array.isArray(e)}function NH(e){return typeof e=="string"||e instanceof String}function cre(e){return OH()&&e instanceof Blob}function OH(){return typeof Blob<"u"}function gB(e,t,n,r){if(r<t)throw mB(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw mB(`Invalid value for '${e}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lS(e,t,n){let r=t;return n==null&&(r=`https://${t}`),`${n}://${r}/v0${e}`}function d1e(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){const i=t(r)+"="+t(e[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var Fy;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(Fy||(Fy={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xQe(e,t){const n=e>=500&&e<600,i=[408,429].indexOf(e)!==-1,s=t.indexOf(e)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wQe{constructor(t,n,r,i,s,o,a,u,l,c,d,f=!0){this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=u,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=d,this.retry=f,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((h,p)=>{this.resolve_=h,this.reject_=p,this.start_()})}start_(){const t=(r,i)=>{if(i){r(!1,new zk(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const u=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,l)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===Fy.NO_ERROR,u=s.getStatus();if(!a||xQe(u,this.additionalRetryCodes_)&&this.retry){const c=s.getErrorCode()===Fy.ABORT;r(!1,new zk(!1,null,c));return}const l=this.successCodes_.indexOf(u)!==-1;r(!0,new zk(l,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(a,a.getResponse());bQe(u)?s(u):s()}catch(u){o(u)}else if(a!==null){const u=PH();u.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,u)):o(u)}else if(i.canceled){const u=this.appDelete_?c1e():aQe();o(u)}else{const u=oQe();o(u)}};this.canceled_?n(!1,new zk(!1,null,!0)):this.backoffId_=gQe(t,n,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&yQe(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class zk{constructor(t,n,r){this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}}function EQe(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function _Qe(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function TQe(e,t){t&&(e["X-Firebase-GMPID"]=t)}function CQe(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function SQe(e,t,n,r,i,s,o=!0){const a=d1e(e.urlParams),u=e.url+a,l=Object.assign({},e.headers);return TQe(l,t),EQe(l,n),_Qe(l,s),CQe(l,r),new wQe(u,e.method,l,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AQe(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function kQe(...e){const t=AQe();if(t!==void 0){const n=new t;for(let r=0;r<e.length;r++)n.append(e[r]);return n.getBlob()}else{if(OH())return new Blob(e);throw new Li($i.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function IQe(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RQe(e){if(typeof atob>"u")throw hQe("base-64");return atob(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mf={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class H8{constructor(t,n){this.data=t,this.contentType=n||null}}function DQe(e,t){switch(e){case mf.RAW:return new H8(f1e(t));case mf.BASE64:case mf.BASE64URL:return new H8(h1e(e,t));case mf.DATA_URL:return new H8(NQe(t),OQe(t))}throw PH()}function f1e(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<e.length-1&&(e.charCodeAt(n+1)&64512)===56320))t.push(239,191,189);else{const s=r,o=e.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(t)}function PQe(e){let t;try{t=decodeURIComponent(e)}catch{throw XT(mf.DATA_URL,"Malformed data URL.")}return f1e(t)}function h1e(e,t){switch(e){case mf.BASE64:{const i=t.indexOf("-")!==-1,s=t.indexOf("_")!==-1;if(i||s)throw XT(e,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case mf.BASE64URL:{const i=t.indexOf("+")!==-1,s=t.indexOf("/")!==-1;if(i||s)throw XT(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=RQe(t)}catch(i){throw i.message.includes("polyfill")?i:XT(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class p1e{constructor(t){this.base64=!1,this.contentType=null;const n=t.match(/^data:([^,]+)?,/);if(n===null)throw XT(mf.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=$Qe(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=t.substring(t.indexOf(",")+1)}}function NQe(e){const t=new p1e(e);return t.base64?h1e(mf.BASE64,t.rest):PQe(t.rest)}function OQe(e){return new p1e(e).contentType}function $Qe(e,t){return e.length>=t.length?e.substring(e.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hm{constructor(t,n){let r=0,i="";cre(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(t,n){if(cre(this.data_)){const r=this.data_,i=IQe(r,t,n);return i===null?null:new Hm(i)}else{const r=new Uint8Array(this.data_.buffer,t,n-t);return new Hm(r,!0)}}static getBlob(...t){if(OH()){const n=t.map(r=>r instanceof Hm?r.data_:r);return new Hm(kQe.apply(null,n))}else{const n=t.map(o=>NH(o)?DQe(mf.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new Hm(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $H(e){let t;try{t=JSON.parse(e)}catch{return null}return vQe(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MQe(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function LQe(e,t){const n=t.split("/").filter(r=>r.length>0).join("/");return e.length===0?n:e+"/"+n}function m1e(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FQe(e,t){return t}class Sa{constructor(t,n,r,i){this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||FQe}}let Uk=null;function BQe(e){return!NH(e)||e.length<2?e:m1e(e)}function g1e(){if(Uk)return Uk;const e=[];e.push(new Sa("bucket")),e.push(new Sa("generation")),e.push(new Sa("metageneration")),e.push(new Sa("name","fullPath",!0));function t(s,o){return BQe(o)}const n=new Sa("name");n.xform=t,e.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new Sa("size");return i.xform=r,e.push(i),e.push(new Sa("timeCreated")),e.push(new Sa("updated")),e.push(new Sa("md5Hash",null,!0)),e.push(new Sa("cacheControl",null,!0)),e.push(new Sa("contentDisposition",null,!0)),e.push(new Sa("contentEncoding",null,!0)),e.push(new Sa("contentLanguage",null,!0)),e.push(new Sa("contentType",null,!0)),e.push(new Sa("metadata","customMetadata",!0)),Uk=e,Uk}function jQe(e,t){function n(){const r=e.bucket,i=e.fullPath,s=new La(r,i);return t._makeStorageReference(s)}Object.defineProperty(e,"ref",{get:n})}function zQe(e,t,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,t[o.server])}return jQe(r,e),r}function y1e(e,t,n){const r=$H(t);return r===null?null:zQe(e,r,n)}function UQe(e,t,n,r){const i=$H(t);if(i===null||!NH(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(l=>{const c=e.bucket,d=e.fullPath,f="/b/"+o(c)+"/o/"+o(d),h=lS(f,n,r),p=d1e({alt:"media",token:l});return h+p})[0]}function VQe(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const s=t[i];s.writable&&(n[s.server]=e[s.local])}return JSON.stringify(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dre="prefixes",fre="items";function HQe(e,t,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[dre])for(const i of n[dre]){const s=i.replace(/\/$/,""),o=e._makeStorageReference(new La(t,s));r.prefixes.push(o)}if(n[fre])for(const i of n[fre]){const s=e._makeStorageReference(new La(t,i.name));r.items.push(s)}return r}function qQe(e,t,n){const r=$H(n);return r===null?null:HQe(e,t,r)}class uO{constructor(t,n,r,i){this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MH(e){if(!e)throw PH()}function WQe(e,t){function n(r,i){const s=y1e(e,i,t);return MH(s!==null),s}return n}function GQe(e,t){function n(r,i){const s=qQe(e,t,i);return MH(s!==null),s}return n}function YQe(e,t){function n(r,i){const s=y1e(e,i,t);return MH(s!==null),UQe(s,i,e.host,e._protocol)}return n}function LH(e){function t(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=iQe():i=rQe():n.getStatus()===402?i=nQe(e.bucket):n.getStatus()===403?i=sQe(e.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return t}function b1e(e){const t=LH(e);function n(r,i){let s=t(r,i);return r.getStatus()===404&&(s=tQe(e.path)),s.serverResponse=i.serverResponse,s}return n}function KQe(e,t,n,r,i){const s={};t.isRoot?s.prefix="":s.prefix=t.path+"/",n.length>0&&(s.delimiter=n),r&&(s.pageToken=r),i&&(s.maxResults=i);const o=t.bucketOnlyServerUrl(),a=lS(o,e.host,e._protocol),u="GET",l=e.maxOperationRetryTime,c=new uO(a,u,GQe(e,t.bucket),l);return c.urlParams=s,c.errorHandler=LH(t),c}function XQe(e,t,n){const r=t.fullServerUrl(),i=lS(r,e.host,e._protocol),s="GET",o=e.maxOperationRetryTime,a=new uO(i,s,YQe(e,n),o);return a.errorHandler=b1e(t),a}function QQe(e,t){const n=t.fullServerUrl(),r=lS(n,e.host,e._protocol),i="DELETE",s=e.maxOperationRetryTime;function o(u,l){}const a=new uO(r,i,o,s);return a.successCodes=[200,204],a.errorHandler=b1e(t),a}function JQe(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function ZQe(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=JQe(null,t)),r}function eJe(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let w="";for(let E=0;E<2;E++)w=w+Math.random().toString().slice(2);return w}const u=a();o["Content-Type"]="multipart/related; boundary="+u;const l=ZQe(t,r,i),c=VQe(l,n),d="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+c+`\r
--`+u+`\r
Content-Type: `+l.contentType+`\r
\r
`,f=`\r
--`+u+"--",h=Hm.getBlob(d,r,f);if(h===null)throw dQe();const p={name:l.fullPath},m=lS(s,e.host,e._protocol),y="POST",v=e.maxUploadRetryTime,b=new uO(m,y,WQe(e,n),v);return b.urlParams=p,b.headers=o,b.body=h.uploadData(),b.errorHandler=LH(t),b}class tJe{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Fy.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Fy.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Fy.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,n,r,i){if(this.sent_)throw y_("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,t,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw y_("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw y_("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw y_("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw y_("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class nJe extends tJe{initXhr(){this.xhr_.responseType="text"}}function lO(){return new nJe}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qy{constructor(t,n){this._service=t,n instanceof La?this._location=n:this._location=La.makeFromUrl(n,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,n){return new Qy(t,n)}get root(){const t=new La(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return m1e(this._location.path)}get storage(){return this._service}get parent(){const t=MQe(this._location.path);if(t===null)return null;const n=new La(this._location.bucket,t);return new Qy(this._service,n)}_throwIfRoot(t){if(this._location.path==="")throw pQe(t)}}function rJe(e,t,n){e._throwIfRoot("uploadBytes");const r=eJe(e.storage,e._location,g1e(),new Hm(t,!0),n);return e.storage.makeRequestWithTokens(r,lO).then(i=>({metadata:i,ref:e}))}function iJe(e){const t={prefixes:[],items:[]};return v1e(e,t).then(()=>t)}async function v1e(e,t,n){const i=await sJe(e,{pageToken:n});t.prefixes.push(...i.prefixes),t.items.push(...i.items),i.nextPageToken!=null&&await v1e(e,t,i.nextPageToken)}function sJe(e,t){t!=null&&typeof t.maxResults=="number"&&gB("options.maxResults",1,1e3,t.maxResults);const n=t,r=KQe(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,lO)}function oJe(e){e._throwIfRoot("getDownloadURL");const t=XQe(e.storage,e._location,g1e());return e.storage.makeRequestWithTokens(t,lO).then(n=>{if(n===null)throw fQe();return n})}function aJe(e){e._throwIfRoot("deleteObject");const t=QQe(e.storage,e._location);return e.storage.makeRequestWithTokens(t,lO)}function uJe(e,t){const n=LQe(e._location.path,t),r=new La(e._location.bucket,n);return new Qy(e.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lJe(e){return/^[A-Za-z]+:\/\//.test(e)}function cJe(e,t){return new Qy(e,t)}function x1e(e,t){if(e instanceof FH){const n=e;if(n._bucket==null)throw cQe();const r=new Qy(n,n._bucket);return t!=null?x1e(r,t):r}else return t!==void 0?uJe(e,t):e}function dJe(e,t){if(t&&lJe(t)){if(e instanceof FH)return cJe(e,t);throw mB("To use ref(service, url), the first argument must be a Storage instance.")}else return x1e(e,t)}function hre(e,t){const n=t==null?void 0:t[l1e];return n==null?null:La.makeFromBucketSpec(n,e)}function fJe(e,t,n,r={}){e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken=typeof i=="string"?i:_Ke(i,e.app.options.projectId))}class FH{constructor(t,n,r,i,s){this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=u1e,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=ZXe,this._maxUploadRetryTime=eQe,this._requests=new Set,i!=null?this._bucket=La.makeFromBucketSpec(i,this._host):this._bucket=hre(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=La.makeFromBucketSpec(this._url,t):this._bucket=hre(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){gB("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){gB("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const n=await t.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new Qy(this,t)}_makeRequest(t,n,r,i,s=!0){if(this._deleted)return new mQe(c1e());{const o=SQe(t,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(t,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,n,r,i).getPromise()}}const pre="@firebase/storage",mre="0.13.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w1e="storage";function Vk(e,t,n){return e=Xr(e),rJe(e,t,n)}function b_(e){return e=Xr(e),iJe(e)}function Hk(e){return e=Xr(e),oJe(e)}function gre(e){return e=Xr(e),aJe(e)}function Gu(e,t){return e=Xr(e),dJe(e,t)}function yre(e=DH(),t){e=Xr(e);const r=Xw(e,w1e).getImmediate({identifier:t}),i=EKe("storage");return i&&hJe(r,...i),r}function hJe(e,t,n,r={}){fJe(e,t,n,r)}function pJe(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return new FH(n,r,i,t,G1)}function mJe(){Cp(new Mf(w1e,pJe,"PUBLIC").setMultipleInstances(!0)),rd(pre,mre,""),rd(pre,mre,"esm2017")}mJe();var bre=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var d0,E1e;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(S,k){function R(){}R.prototype=k.prototype,S.D=k.prototype,S.prototype=new R,S.prototype.constructor=S,S.C=function(N,O,F){for(var $=Array(arguments.length-2),z=2;z<arguments.length;z++)$[z-2]=arguments[z];return k.prototype[O].apply(N,$)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(S,k,R){R||(R=0);var N=Array(16);if(typeof k=="string")for(var O=0;16>O;++O)N[O]=k.charCodeAt(R++)|k.charCodeAt(R++)<<8|k.charCodeAt(R++)<<16|k.charCodeAt(R++)<<24;else for(O=0;16>O;++O)N[O]=k[R++]|k[R++]<<8|k[R++]<<16|k[R++]<<24;k=S.g[0],R=S.g[1],O=S.g[2];var F=S.g[3],$=k+(F^R&(O^F))+N[0]+3614090360&4294967295;k=R+($<<7&4294967295|$>>>25),$=F+(O^k&(R^O))+N[1]+3905402710&4294967295,F=k+($<<12&4294967295|$>>>20),$=O+(R^F&(k^R))+N[2]+606105819&4294967295,O=F+($<<17&4294967295|$>>>15),$=R+(k^O&(F^k))+N[3]+3250441966&4294967295,R=O+($<<22&4294967295|$>>>10),$=k+(F^R&(O^F))+N[4]+4118548399&4294967295,k=R+($<<7&4294967295|$>>>25),$=F+(O^k&(R^O))+N[5]+1200080426&4294967295,F=k+($<<12&4294967295|$>>>20),$=O+(R^F&(k^R))+N[6]+2821735955&4294967295,O=F+($<<17&4294967295|$>>>15),$=R+(k^O&(F^k))+N[7]+4249261313&4294967295,R=O+($<<22&4294967295|$>>>10),$=k+(F^R&(O^F))+N[8]+1770035416&4294967295,k=R+($<<7&4294967295|$>>>25),$=F+(O^k&(R^O))+N[9]+2336552879&4294967295,F=k+($<<12&4294967295|$>>>20),$=O+(R^F&(k^R))+N[10]+4294925233&4294967295,O=F+($<<17&4294967295|$>>>15),$=R+(k^O&(F^k))+N[11]+2304563134&4294967295,R=O+($<<22&4294967295|$>>>10),$=k+(F^R&(O^F))+N[12]+1804603682&4294967295,k=R+($<<7&4294967295|$>>>25),$=F+(O^k&(R^O))+N[13]+4254626195&4294967295,F=k+($<<12&4294967295|$>>>20),$=O+(R^F&(k^R))+N[14]+2792965006&4294967295,O=F+($<<17&4294967295|$>>>15),$=R+(k^O&(F^k))+N[15]+1236535329&4294967295,R=O+($<<22&4294967295|$>>>10),$=k+(O^F&(R^O))+N[1]+4129170786&4294967295,k=R+($<<5&4294967295|$>>>27),$=F+(R^O&(k^R))+N[6]+3225465664&4294967295,F=k+($<<9&4294967295|$>>>23),$=O+(k^R&(F^k))+N[11]+643717713&4294967295,O=F+($<<14&4294967295|$>>>18),$=R+(F^k&(O^F))+N[0]+3921069994&4294967295,R=O+($<<20&4294967295|$>>>12),$=k+(O^F&(R^O))+N[5]+3593408605&4294967295,k=R+($<<5&4294967295|$>>>27),$=F+(R^O&(k^R))+N[10]+38016083&4294967295,F=k+($<<9&4294967295|$>>>23),$=O+(k^R&(F^k))+N[15]+3634488961&4294967295,O=F+($<<14&4294967295|$>>>18),$=R+(F^k&(O^F))+N[4]+3889429448&4294967295,R=O+($<<20&4294967295|$>>>12),$=k+(O^F&(R^O))+N[9]+568446438&4294967295,k=R+($<<5&4294967295|$>>>27),$=F+(R^O&(k^R))+N[14]+3275163606&4294967295,F=k+($<<9&4294967295|$>>>23),$=O+(k^R&(F^k))+N[3]+4107603335&4294967295,O=F+($<<14&4294967295|$>>>18),$=R+(F^k&(O^F))+N[8]+1163531501&4294967295,R=O+($<<20&4294967295|$>>>12),$=k+(O^F&(R^O))+N[13]+2850285829&4294967295,k=R+($<<5&4294967295|$>>>27),$=F+(R^O&(k^R))+N[2]+4243563512&4294967295,F=k+($<<9&4294967295|$>>>23),$=O+(k^R&(F^k))+N[7]+1735328473&4294967295,O=F+($<<14&4294967295|$>>>18),$=R+(F^k&(O^F))+N[12]+2368359562&4294967295,R=O+($<<20&4294967295|$>>>12),$=k+(R^O^F)+N[5]+4294588738&4294967295,k=R+($<<4&4294967295|$>>>28),$=F+(k^R^O)+N[8]+2272392833&4294967295,F=k+($<<11&4294967295|$>>>21),$=O+(F^k^R)+N[11]+1839030562&4294967295,O=F+($<<16&4294967295|$>>>16),$=R+(O^F^k)+N[14]+4259657740&4294967295,R=O+($<<23&4294967295|$>>>9),$=k+(R^O^F)+N[1]+2763975236&4294967295,k=R+($<<4&4294967295|$>>>28),$=F+(k^R^O)+N[4]+1272893353&4294967295,F=k+($<<11&4294967295|$>>>21),$=O+(F^k^R)+N[7]+4139469664&4294967295,O=F+($<<16&4294967295|$>>>16),$=R+(O^F^k)+N[10]+3200236656&4294967295,R=O+($<<23&4294967295|$>>>9),$=k+(R^O^F)+N[13]+681279174&4294967295,k=R+($<<4&4294967295|$>>>28),$=F+(k^R^O)+N[0]+3936430074&4294967295,F=k+($<<11&4294967295|$>>>21),$=O+(F^k^R)+N[3]+3572445317&4294967295,O=F+($<<16&4294967295|$>>>16),$=R+(O^F^k)+N[6]+76029189&4294967295,R=O+($<<23&4294967295|$>>>9),$=k+(R^O^F)+N[9]+3654602809&4294967295,k=R+($<<4&4294967295|$>>>28),$=F+(k^R^O)+N[12]+3873151461&4294967295,F=k+($<<11&4294967295|$>>>21),$=O+(F^k^R)+N[15]+530742520&4294967295,O=F+($<<16&4294967295|$>>>16),$=R+(O^F^k)+N[2]+3299628645&4294967295,R=O+($<<23&4294967295|$>>>9),$=k+(O^(R|~F))+N[0]+4096336452&4294967295,k=R+($<<6&4294967295|$>>>26),$=F+(R^(k|~O))+N[7]+1126891415&4294967295,F=k+($<<10&4294967295|$>>>22),$=O+(k^(F|~R))+N[14]+2878612391&4294967295,O=F+($<<15&4294967295|$>>>17),$=R+(F^(O|~k))+N[5]+4237533241&4294967295,R=O+($<<21&4294967295|$>>>11),$=k+(O^(R|~F))+N[12]+1700485571&4294967295,k=R+($<<6&4294967295|$>>>26),$=F+(R^(k|~O))+N[3]+2399980690&4294967295,F=k+($<<10&4294967295|$>>>22),$=O+(k^(F|~R))+N[10]+4293915773&4294967295,O=F+($<<15&4294967295|$>>>17),$=R+(F^(O|~k))+N[1]+2240044497&4294967295,R=O+($<<21&4294967295|$>>>11),$=k+(O^(R|~F))+N[8]+1873313359&4294967295,k=R+($<<6&4294967295|$>>>26),$=F+(R^(k|~O))+N[15]+4264355552&4294967295,F=k+($<<10&4294967295|$>>>22),$=O+(k^(F|~R))+N[6]+2734768916&4294967295,O=F+($<<15&4294967295|$>>>17),$=R+(F^(O|~k))+N[13]+1309151649&4294967295,R=O+($<<21&4294967295|$>>>11),$=k+(O^(R|~F))+N[4]+4149444226&4294967295,k=R+($<<6&4294967295|$>>>26),$=F+(R^(k|~O))+N[11]+3174756917&4294967295,F=k+($<<10&4294967295|$>>>22),$=O+(k^(F|~R))+N[2]+718787259&4294967295,O=F+($<<15&4294967295|$>>>17),$=R+(F^(O|~k))+N[9]+3951481745&4294967295,S.g[0]=S.g[0]+k&4294967295,S.g[1]=S.g[1]+(O+($<<21&4294967295|$>>>11))&4294967295,S.g[2]=S.g[2]+O&4294967295,S.g[3]=S.g[3]+F&4294967295}r.prototype.u=function(S,k){k===void 0&&(k=S.length);for(var R=k-this.blockSize,N=this.B,O=this.h,F=0;F<k;){if(O==0)for(;F<=R;)i(this,S,F),F+=this.blockSize;if(typeof S=="string"){for(;F<k;)if(N[O++]=S.charCodeAt(F++),O==this.blockSize){i(this,N),O=0;break}}else for(;F<k;)if(N[O++]=S[F++],O==this.blockSize){i(this,N),O=0;break}}this.h=O,this.o+=k},r.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var k=1;k<S.length-8;++k)S[k]=0;var R=8*this.o;for(k=S.length-8;k<S.length;++k)S[k]=R&255,R/=256;for(this.u(S),S=Array(16),k=R=0;4>k;++k)for(var N=0;32>N;N+=8)S[R++]=this.g[k]>>>N&255;return S};function s(S,k){var R=a;return Object.prototype.hasOwnProperty.call(R,S)?R[S]:R[S]=k(S)}function o(S,k){this.h=k;for(var R=[],N=!0,O=S.length-1;0<=O;O--){var F=S[O]|0;N&&F==k||(R[O]=F,N=!1)}this.g=R}var a={};function u(S){return-128<=S&&128>S?s(S,function(k){return new o([k|0],0>k?-1:0)}):new o([S|0],0>S?-1:0)}function l(S){if(isNaN(S)||!isFinite(S))return d;if(0>S)return y(l(-S));for(var k=[],R=1,N=0;S>=R;N++)k[N]=S/R|0,R*=4294967296;return new o(k,0)}function c(S,k){if(S.length==0)throw Error("number format error: empty string");if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(S.charAt(0)=="-")return y(c(S.substring(1),k));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=l(Math.pow(k,8)),N=d,O=0;O<S.length;O+=8){var F=Math.min(8,S.length-O),$=parseInt(S.substring(O,O+F),k);8>F?(F=l(Math.pow(k,F)),N=N.j(F).add(l($))):(N=N.j(R),N=N.add(l($)))}return N}var d=u(0),f=u(1),h=u(16777216);e=o.prototype,e.m=function(){if(m(this))return-y(this).m();for(var S=0,k=1,R=0;R<this.g.length;R++){var N=this.i(R);S+=(0<=N?N:4294967296+N)*k,k*=4294967296}return S},e.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(p(this))return"0";if(m(this))return"-"+y(this).toString(S);for(var k=l(Math.pow(S,6)),R=this,N="";;){var O=E(R,k).g;R=v(R,O.j(k));var F=((0<R.g.length?R.g[0]:R.h)>>>0).toString(S);if(R=O,p(R))return F+N;for(;6>F.length;)F="0"+F;N=F+N}},e.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function p(S){if(S.h!=0)return!1;for(var k=0;k<S.g.length;k++)if(S.g[k]!=0)return!1;return!0}function m(S){return S.h==-1}e.l=function(S){return S=v(this,S),m(S)?-1:p(S)?0:1};function y(S){for(var k=S.g.length,R=[],N=0;N<k;N++)R[N]=~S.g[N];return new o(R,~S.h).add(f)}e.abs=function(){return m(this)?y(this):this},e.add=function(S){for(var k=Math.max(this.g.length,S.g.length),R=[],N=0,O=0;O<=k;O++){var F=N+(this.i(O)&65535)+(S.i(O)&65535),$=(F>>>16)+(this.i(O)>>>16)+(S.i(O)>>>16);N=$>>>16,F&=65535,$&=65535,R[O]=$<<16|F}return new o(R,R[R.length-1]&-2147483648?-1:0)};function v(S,k){return S.add(y(k))}e.j=function(S){if(p(this)||p(S))return d;if(m(this))return m(S)?y(this).j(y(S)):y(y(this).j(S));if(m(S))return y(this.j(y(S)));if(0>this.l(h)&&0>S.l(h))return l(this.m()*S.m());for(var k=this.g.length+S.g.length,R=[],N=0;N<2*k;N++)R[N]=0;for(N=0;N<this.g.length;N++)for(var O=0;O<S.g.length;O++){var F=this.i(N)>>>16,$=this.i(N)&65535,z=S.i(O)>>>16,q=S.i(O)&65535;R[2*N+2*O]+=$*q,b(R,2*N+2*O),R[2*N+2*O+1]+=F*q,b(R,2*N+2*O+1),R[2*N+2*O+1]+=$*z,b(R,2*N+2*O+1),R[2*N+2*O+2]+=F*z,b(R,2*N+2*O+2)}for(N=0;N<k;N++)R[N]=R[2*N+1]<<16|R[2*N];for(N=k;N<2*k;N++)R[N]=0;return new o(R,0)};function b(S,k){for(;(S[k]&65535)!=S[k];)S[k+1]+=S[k]>>>16,S[k]&=65535,k++}function w(S,k){this.g=S,this.h=k}function E(S,k){if(p(k))throw Error("division by zero");if(p(S))return new w(d,d);if(m(S))return k=E(y(S),k),new w(y(k.g),y(k.h));if(m(k))return k=E(S,y(k)),new w(y(k.g),k.h);if(30<S.g.length){if(m(S)||m(k))throw Error("slowDivide_ only works with positive integers.");for(var R=f,N=k;0>=N.l(S);)R=_(R),N=_(N);var O=C(R,1),F=C(N,1);for(N=C(N,2),R=C(R,2);!p(N);){var $=F.add(N);0>=$.l(S)&&(O=O.add(R),F=$),N=C(N,1),R=C(R,1)}return k=v(S,O.j(k)),new w(O,k)}for(O=d;0<=S.l(k);){for(R=Math.max(1,Math.floor(S.m()/k.m())),N=Math.ceil(Math.log(R)/Math.LN2),N=48>=N?1:Math.pow(2,N-48),F=l(R),$=F.j(k);m($)||0<$.l(S);)R-=N,F=l(R),$=F.j(k);p(F)&&(F=f),O=O.add(F),S=v(S,$)}return new w(O,S)}e.A=function(S){return E(this,S).h},e.and=function(S){for(var k=Math.max(this.g.length,S.g.length),R=[],N=0;N<k;N++)R[N]=this.i(N)&S.i(N);return new o(R,this.h&S.h)},e.or=function(S){for(var k=Math.max(this.g.length,S.g.length),R=[],N=0;N<k;N++)R[N]=this.i(N)|S.i(N);return new o(R,this.h|S.h)},e.xor=function(S){for(var k=Math.max(this.g.length,S.g.length),R=[],N=0;N<k;N++)R[N]=this.i(N)^S.i(N);return new o(R,this.h^S.h)};function _(S){for(var k=S.g.length+1,R=[],N=0;N<k;N++)R[N]=S.i(N)<<1|S.i(N-1)>>>31;return new o(R,S.h)}function C(S,k){var R=k>>5;k%=32;for(var N=S.g.length-R,O=[],F=0;F<N;F++)O[F]=0<k?S.i(F+R)>>>k|S.i(F+R+1)<<32-k:S.i(F+R);return new o(O,S.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,E1e=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=c,d0=o}).apply(typeof bre<"u"?bre:typeof self<"u"?self:typeof window<"u"?window:{});var qk=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var _1e,rT,T1e,XR,yB,C1e,S1e,A1e;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(I,V,Q){return I==Array.prototype||I==Object.prototype||(I[V]=Q.value),I};function n(I){I=[typeof globalThis=="object"&&globalThis,I,typeof window=="object"&&window,typeof self=="object"&&self,typeof qk=="object"&&qk];for(var V=0;V<I.length;++V){var Q=I[V];if(Q&&Q.Math==Math)return Q}throw Error("Cannot find global object")}var r=n(this);function i(I,V){if(V)e:{var Q=r;I=I.split(".");for(var ie=0;ie<I.length-1;ie++){var ke=I[ie];if(!(ke in Q))break e;Q=Q[ke]}I=I[I.length-1],ie=Q[I],V=V(ie),V!=ie&&V!=null&&t(Q,I,{configurable:!0,writable:!0,value:V})}}function s(I,V){I instanceof String&&(I+="");var Q=0,ie=!1,ke={next:function(){if(!ie&&Q<I.length){var Ve=Q++;return{value:V(Ve,I[Ve]),done:!1}}return ie=!0,{done:!0,value:void 0}}};return ke[Symbol.iterator]=function(){return ke},ke}i("Array.prototype.values",function(I){return I||function(){return s(this,function(V,Q){return Q})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function u(I){var V=typeof I;return V=V!="object"?V:I?Array.isArray(I)?"array":V:"null",V=="array"||V=="object"&&typeof I.length=="number"}function l(I){var V=typeof I;return V=="object"&&I!=null||V=="function"}function c(I,V,Q){return I.call.apply(I.bind,arguments)}function d(I,V,Q){if(!I)throw Error();if(2<arguments.length){var ie=Array.prototype.slice.call(arguments,2);return function(){var ke=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ke,ie),I.apply(V,ke)}}return function(){return I.apply(V,arguments)}}function f(I,V,Q){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?c:d,f.apply(null,arguments)}function h(I,V){var Q=Array.prototype.slice.call(arguments,1);return function(){var ie=Q.slice();return ie.push.apply(ie,arguments),I.apply(this,ie)}}function p(I,V){function Q(){}Q.prototype=V.prototype,I.aa=V.prototype,I.prototype=new Q,I.prototype.constructor=I,I.Qb=function(ie,ke,Ve){for(var Tt=Array(arguments.length-2),Cr=2;Cr<arguments.length;Cr++)Tt[Cr-2]=arguments[Cr];return V.prototype[ke].apply(ie,Tt)}}function m(I){const V=I.length;if(0<V){const Q=Array(V);for(let ie=0;ie<V;ie++)Q[ie]=I[ie];return Q}return[]}function y(I,V){for(let Q=1;Q<arguments.length;Q++){const ie=arguments[Q];if(u(ie)){const ke=I.length||0,Ve=ie.length||0;I.length=ke+Ve;for(let Tt=0;Tt<Ve;Tt++)I[ke+Tt]=ie[Tt]}else I.push(ie)}}class v{constructor(V,Q){this.i=V,this.j=Q,this.h=0,this.g=null}get(){let V;return 0<this.h?(this.h--,V=this.g,this.g=V.next,V.next=null):V=this.i(),V}}function b(I){return/^[\s\xa0]*$/.test(I)}function w(){var I=a.navigator;return I&&(I=I.userAgent)?I:""}function E(I){return E[" "](I),I}E[" "]=function(){};var _=w().indexOf("Gecko")!=-1&&!(w().toLowerCase().indexOf("webkit")!=-1&&w().indexOf("Edge")==-1)&&!(w().indexOf("Trident")!=-1||w().indexOf("MSIE")!=-1)&&w().indexOf("Edge")==-1;function C(I,V,Q){for(const ie in I)V.call(Q,I[ie],ie,I)}function S(I,V){for(const Q in I)V.call(void 0,I[Q],Q,I)}function k(I){const V={};for(const Q in I)V[Q]=I[Q];return V}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function N(I,V){let Q,ie;for(let ke=1;ke<arguments.length;ke++){ie=arguments[ke];for(Q in ie)I[Q]=ie[Q];for(let Ve=0;Ve<R.length;Ve++)Q=R[Ve],Object.prototype.hasOwnProperty.call(ie,Q)&&(I[Q]=ie[Q])}}function O(I){var V=1;I=I.split(":");const Q=[];for(;0<V&&I.length;)Q.push(I.shift()),V--;return I.length&&Q.push(I.join(":")),Q}function F(I){a.setTimeout(()=>{throw I},0)}function $(){var I=Z;let V=null;return I.g&&(V=I.g,I.g=I.g.next,I.g||(I.h=null),V.next=null),V}class z{constructor(){this.h=this.g=null}add(V,Q){const ie=q.get();ie.set(V,Q),this.h?this.h.next=ie:this.g=ie,this.h=ie}}var q=new v(()=>new W,I=>I.reset());class W{constructor(){this.next=this.g=this.h=null}set(V,Q){this.h=V,this.g=Q,this.next=null}reset(){this.next=this.g=this.h=null}}let J,K=!1,Z=new z,U=()=>{const I=a.Promise.resolve(void 0);J=()=>{I.then(L)}};var L=()=>{for(var I;I=$();){try{I.h.call(I.g)}catch(Q){F(Q)}var V=q;V.j(I),100>V.h&&(V.h++,I.next=V.g,V.g=I)}K=!1};function Y(){this.s=this.s,this.C=this.C}Y.prototype.s=!1,Y.prototype.ma=function(){this.s||(this.s=!0,this.N())},Y.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function j(I,V){this.type=I,this.g=this.target=V,this.defaultPrevented=!1}j.prototype.h=function(){this.defaultPrevented=!0};var G=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var I=!1,V=Object.defineProperty({},"passive",{get:function(){I=!0}});try{const Q=()=>{};a.addEventListener("test",Q,V),a.removeEventListener("test",Q,V)}catch{}return I}();function X(I,V){if(j.call(this,I?I.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,I){var Q=this.type=I.type,ie=I.changedTouches&&I.changedTouches.length?I.changedTouches[0]:null;if(this.target=I.target||I.srcElement,this.g=V,V=I.relatedTarget){if(_){e:{try{E(V.nodeName);var ke=!0;break e}catch{}ke=!1}ke||(V=null)}}else Q=="mouseover"?V=I.fromElement:Q=="mouseout"&&(V=I.toElement);this.relatedTarget=V,ie?(this.clientX=ie.clientX!==void 0?ie.clientX:ie.pageX,this.clientY=ie.clientY!==void 0?ie.clientY:ie.pageY,this.screenX=ie.screenX||0,this.screenY=ie.screenY||0):(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0),this.button=I.button,this.key=I.key||"",this.ctrlKey=I.ctrlKey,this.altKey=I.altKey,this.shiftKey=I.shiftKey,this.metaKey=I.metaKey,this.pointerId=I.pointerId||0,this.pointerType=typeof I.pointerType=="string"?I.pointerType:ne[I.pointerType]||"",this.state=I.state,this.i=I,I.defaultPrevented&&X.aa.h.call(this)}}p(X,j);var ne={2:"touch",3:"pen",4:"mouse"};X.prototype.h=function(){X.aa.h.call(this);var I=this.i;I.preventDefault?I.preventDefault():I.returnValue=!1};var pe="closure_listenable_"+(1e6*Math.random()|0),de=0;function xe(I,V,Q,ie,ke){this.listener=I,this.proxy=null,this.src=V,this.type=Q,this.capture=!!ie,this.ha=ke,this.key=++de,this.da=this.fa=!1}function Ce(I){I.da=!0,I.listener=null,I.proxy=null,I.src=null,I.ha=null}function ue(I){this.src=I,this.g={},this.h=0}ue.prototype.add=function(I,V,Q,ie,ke){var Ve=I.toString();I=this.g[Ve],I||(I=this.g[Ve]=[],this.h++);var Tt=me(I,V,ie,ke);return-1<Tt?(V=I[Tt],Q||(V.fa=!1)):(V=new xe(V,this.src,Ve,!!ie,ke),V.fa=Q,I.push(V)),V};function se(I,V){var Q=V.type;if(Q in I.g){var ie=I.g[Q],ke=Array.prototype.indexOf.call(ie,V,void 0),Ve;(Ve=0<=ke)&&Array.prototype.splice.call(ie,ke,1),Ve&&(Ce(V),I.g[Q].length==0&&(delete I.g[Q],I.h--))}}function me(I,V,Q,ie){for(var ke=0;ke<I.length;++ke){var Ve=I[ke];if(!Ve.da&&Ve.listener==V&&Ve.capture==!!Q&&Ve.ha==ie)return ke}return-1}var be="closure_lm_"+(1e6*Math.random()|0),Le={};function Ue(I,V,Q,ie,ke){if(Array.isArray(V)){for(var Ve=0;Ve<V.length;Ve++)Ue(I,V[Ve],Q,ie,ke);return null}return Q=Kt(Q),I&&I[pe]?I.K(V,Q,l(ie)?!!ie.capture:!1,ke):Ne(I,V,Q,!1,ie,ke)}function Ne(I,V,Q,ie,ke,Ve){if(!V)throw Error("Invalid event type");var Tt=l(ke)?!!ke.capture:!!ke,Cr=De(I);if(Cr||(I[be]=Cr=new ue(I)),Q=Cr.add(V,Q,ie,Tt,Ve),Q.proxy)return Q;if(ie=je(),Q.proxy=ie,ie.src=I,ie.listener=Q,I.addEventListener)G||(ke=Tt),ke===void 0&&(ke=!1),I.addEventListener(V.toString(),ie,ke);else if(I.attachEvent)I.attachEvent(pt(V.toString()),ie);else if(I.addListener&&I.removeListener)I.addListener(ie);else throw Error("addEventListener and attachEvent are unavailable.");return Q}function je(){function I(Q){return V.call(I.src,I.listener,Q)}const V=xt;return I}function Ke(I,V,Q,ie,ke){if(Array.isArray(V))for(var Ve=0;Ve<V.length;Ve++)Ke(I,V[Ve],Q,ie,ke);else ie=l(ie)?!!ie.capture:!!ie,Q=Kt(Q),I&&I[pe]?(I=I.i,V=String(V).toString(),V in I.g&&(Ve=I.g[V],Q=me(Ve,Q,ie,ke),-1<Q&&(Ce(Ve[Q]),Array.prototype.splice.call(Ve,Q,1),Ve.length==0&&(delete I.g[V],I.h--)))):I&&(I=De(I))&&(V=I.g[V.toString()],I=-1,V&&(I=me(V,Q,ie,ke)),(Q=-1<I?V[I]:null)&&ut(Q))}function ut(I){if(typeof I!="number"&&I&&!I.da){var V=I.src;if(V&&V[pe])se(V.i,I);else{var Q=I.type,ie=I.proxy;V.removeEventListener?V.removeEventListener(Q,ie,I.capture):V.detachEvent?V.detachEvent(pt(Q),ie):V.addListener&&V.removeListener&&V.removeListener(ie),(Q=De(V))?(se(Q,I),Q.h==0&&(Q.src=null,V[be]=null)):Ce(I)}}}function pt(I){return I in Le?Le[I]:Le[I]="on"+I}function xt(I,V){if(I.da)I=!0;else{V=new X(V,this);var Q=I.listener,ie=I.ha||I.src;I.fa&&ut(I),I=Q.call(ie,V)}return I}function De(I){return I=I[be],I instanceof ue?I:null}var wt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Kt(I){return typeof I=="function"?I:(I[wt]||(I[wt]=function(V){return I.handleEvent(V)}),I[wt])}function Te(){Y.call(this),this.i=new ue(this),this.M=this,this.F=null}p(Te,Y),Te.prototype[pe]=!0,Te.prototype.removeEventListener=function(I,V,Q,ie){Ke(this,I,V,Q,ie)};function Oe(I,V){var Q,ie=I.F;if(ie)for(Q=[];ie;ie=ie.F)Q.push(ie);if(I=I.M,ie=V.type||V,typeof V=="string")V=new j(V,I);else if(V instanceof j)V.target=V.target||I;else{var ke=V;V=new j(ie,I),N(V,ke)}if(ke=!0,Q)for(var Ve=Q.length-1;0<=Ve;Ve--){var Tt=V.g=Q[Ve];ke=lt(Tt,ie,!0,V)&&ke}if(Tt=V.g=I,ke=lt(Tt,ie,!0,V)&&ke,ke=lt(Tt,ie,!1,V)&&ke,Q)for(Ve=0;Ve<Q.length;Ve++)Tt=V.g=Q[Ve],ke=lt(Tt,ie,!1,V)&&ke}Te.prototype.N=function(){if(Te.aa.N.call(this),this.i){var I=this.i,V;for(V in I.g){for(var Q=I.g[V],ie=0;ie<Q.length;ie++)Ce(Q[ie]);delete I.g[V],I.h--}}this.F=null},Te.prototype.K=function(I,V,Q,ie){return this.i.add(String(I),V,!1,Q,ie)},Te.prototype.L=function(I,V,Q,ie){return this.i.add(String(I),V,!0,Q,ie)};function lt(I,V,Q,ie){if(V=I.i.g[String(V)],!V)return!0;V=V.concat();for(var ke=!0,Ve=0;Ve<V.length;++Ve){var Tt=V[Ve];if(Tt&&!Tt.da&&Tt.capture==Q){var Cr=Tt.listener,ps=Tt.ha||Tt.src;Tt.fa&&se(I.i,Tt),ke=Cr.call(ps,ie)!==!1&&ke}}return ke&&!ie.defaultPrevented}function _t(I,V,Q){if(typeof I=="function")Q&&(I=f(I,Q));else if(I&&typeof I.handleEvent=="function")I=f(I.handleEvent,I);else throw Error("Invalid listener argument");return 2147483647<Number(V)?-1:a.setTimeout(I,V||0)}function St(I){I.g=_t(()=>{I.g=null,I.i&&(I.i=!1,St(I))},I.l);const V=I.h;I.h=null,I.m.apply(null,V)}class en extends Y{constructor(V,Q){super(),this.m=V,this.l=Q,this.h=null,this.i=!1,this.g=null}j(V){this.h=arguments,this.g?this.i=!0:St(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function En(I){Y.call(this),this.h=I,this.g={}}p(En,Y);var sr=[];function Jr(I){C(I.g,function(V,Q){this.g.hasOwnProperty(Q)&&ut(V)},I),I.g={}}En.prototype.N=function(){En.aa.N.call(this),Jr(this)},En.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var wn=a.JSON.stringify,An=a.JSON.parse,Hr=class{stringify(I){return a.JSON.stringify(I,void 0)}parse(I){return a.JSON.parse(I,void 0)}};function Ln(){}Ln.prototype.h=null;function Ns(I){return I.h||(I.h=I.i())}function Zr(){}var qr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ai(){j.call(this,"d")}p(ai,j);function or(){j.call(this,"c")}p(or,j);var Os={},Al=null;function zo(){return Al=Al||new Te}Os.La="serverreachability";function Bu(I){j.call(this,Os.La,I)}p(Bu,j);function ar(I){const V=zo();Oe(V,new Bu(V))}Os.STAT_EVENT="statevent";function Wr(I,V){j.call(this,Os.STAT_EVENT,I),this.stat=V}p(Wr,j);function br(I){const V=zo();Oe(V,new Wr(V,I))}Os.Ma="timingevent";function $s(I,V){j.call(this,Os.Ma,I),this.size=V}p($s,j);function Zn(I,V){if(typeof I!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){I()},V)}function mi(){this.g=!0}mi.prototype.xa=function(){this.g=!1};function Ms(I,V,Q,ie,ke,Ve){I.info(function(){if(I.g)if(Ve)for(var Tt="",Cr=Ve.split("&"),ps=0;ps<Cr.length;ps++){var Xn=Cr[ps].split("=");if(1<Xn.length){var Fs=Xn[0];Xn=Xn[1];var Qi=Fs.split("_");Tt=2<=Qi.length&&Qi[1]=="type"?Tt+(Fs+"="+Xn+"&"):Tt+(Fs+"=redacted&")}}else Tt=null;else Tt=Ve;return"XMLHTTP REQ ("+ie+") [attempt "+ke+"]: "+V+`
`+Q+`
`+Tt})}function as(I,V,Q,ie,ke,Ve,Tt){I.info(function(){return"XMLHTTP RESP ("+ie+") [ attempt "+ke+"]: "+V+`
`+Q+`
`+Ve+" "+Tt})}function lo(I,V,Q,ie){I.info(function(){return"XMLHTTP TEXT ("+V+"): "+gh(I,Q)+(ie?" "+ie:"")})}function ju(I,V){I.info(function(){return"TIMEOUT: "+V})}mi.prototype.info=function(){};function gh(I,V){if(!I.g)return V;if(!V)return null;try{var Q=JSON.parse(V);if(Q){for(I=0;I<Q.length;I++)if(Array.isArray(Q[I])){var ie=Q[I];if(!(2>ie.length)){var ke=ie[1];if(Array.isArray(ke)&&!(1>ke.length)){var Ve=ke[0];if(Ve!="noop"&&Ve!="stop"&&Ve!="close")for(var Tt=1;Tt<ke.length;Tt++)ke[Tt]=""}}}}return wn(Q)}catch{return V}}var Yn={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},kl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},gi;function Xa(){}p(Xa,Ln),Xa.prototype.g=function(){return new XMLHttpRequest},Xa.prototype.i=function(){return{}},gi=new Xa;function co(I,V,Q,ie){this.j=I,this.i=V,this.l=Q,this.R=ie||1,this.U=new En(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new sm}function sm(){this.i=null,this.g="",this.h=!1}var yh={},Od={};function $d(I,V,Q){I.L=1,I.v=kn(rt(V)),I.m=Q,I.P=!0,vc(I,null)}function vc(I,V){I.F=Date.now(),Fn(I),I.A=rt(I.v);var Q=I.A,ie=I.R;Array.isArray(ie)||(ie=[String(ie)]),Ld(Q.i,"t",ie),I.C=0,Q=I.j.J,I.h=new sm,I.g=PA(I.j,Q?V:null,!I.m),0<I.O&&(I.M=new en(f(I.Y,I,I.g),I.O)),V=I.U,Q=I.g,ie=I.ca;var ke="readystatechange";Array.isArray(ke)||(ke&&(sr[0]=ke.toString()),ke=sr);for(var Ve=0;Ve<ke.length;Ve++){var Tt=Ue(Q,ke[Ve],ie||V.handleEvent,!1,V.h||V);if(!Tt)break;V.g[Tt.key]=Tt}V=I.H?k(I.H):{},I.m?(I.u||(I.u="POST"),V["Content-Type"]="application/x-www-form-urlencoded",I.g.ea(I.A,I.u,I.m,V)):(I.u="GET",I.g.ea(I.A,I.u,null,V)),ar(),Ms(I.i,I.u,I.A,I.l,I.R,I.m)}co.prototype.ca=function(I){I=I.target;const V=this.M;V&&Gr(I)==3?V.j():this.Y(I)},co.prototype.Y=function(I){try{if(I==this.g)e:{const Qi=Gr(this.g);var V=this.g.Ba();const Nl=this.g.Z();if(!(3>Qi)&&(Qi!=3||this.g&&(this.h.h||this.g.oa()||hs(this.g)))){this.J||Qi!=4||V==7||(V==8||0>=Nl?ar(3):ar(2)),us(this);var Q=this.g.Z();this.X=Q;t:if(om(this)){var ie=hs(this.g);I="";var ke=ie.length,Ve=Gr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ls(this),zu(this);var Tt="";break t}this.h.i=new a.TextDecoder}for(V=0;V<ke;V++)this.h.h=!0,I+=this.h.i.decode(ie[V],{stream:!(Ve&&V==ke-1)});ie.length=0,this.h.g+=I,this.C=0,Tt=this.h.g}else Tt=this.g.oa();if(this.o=Q==200,as(this.i,this.u,this.A,this.l,this.R,Qi,Q),this.o){if(this.T&&!this.K){t:{if(this.g){var Cr,ps=this.g;if((Cr=ps.g?ps.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!b(Cr)){var Xn=Cr;break t}}Xn=null}if(Q=Xn)lo(this.i,this.l,Q,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,wc(this,Q);else{this.o=!1,this.s=3,br(12),ls(this),zu(this);break e}}if(this.P){Q=!0;let Vu;for(;!this.J&&this.C<Tt.length;)if(Vu=xc(this,Tt),Vu==Od){Qi==4&&(this.s=4,br(14),Q=!1),lo(this.i,this.l,null,"[Incomplete Response]");break}else if(Vu==yh){this.s=4,br(15),lo(this.i,this.l,Tt,"[Invalid Chunk]"),Q=!1;break}else lo(this.i,this.l,Vu,null),wc(this,Vu);if(om(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Qi!=4||Tt.length!=0||this.h.h||(this.s=1,br(16),Q=!1),this.o=this.o&&Q,!Q)lo(this.i,this.l,Tt,"[Invalid Chunked Response]"),ls(this),zu(this);else if(0<Tt.length&&!this.W){this.W=!0;var Fs=this.j;Fs.g==this&&Fs.ba&&!Fs.M&&(Fs.j.info("Great, no buffering proxy detected. Bytes received: "+Tt.length),NE(Fs),Fs.M=!0,br(11))}}else lo(this.i,this.l,Tt,null),wc(this,Tt);Qi==4&&ls(this),this.o&&!this.J&&(Qi==4?kb(this.j,this):(this.o=!1,Fn(this)))}else Pl(this.g),Q==400&&0<Tt.indexOf("Unknown SID")?(this.s=3,br(12)):(this.s=0,br(13)),ls(this),zu(this)}}}catch{}finally{}};function om(I){return I.g?I.u=="GET"&&I.L!=2&&I.j.Ca:!1}function xc(I,V){var Q=I.C,ie=V.indexOf(`
`,Q);return ie==-1?Od:(Q=Number(V.substring(Q,ie)),isNaN(Q)?yh:(ie+=1,ie+Q>V.length?Od:(V=V.slice(ie,ie+Q),I.C=ie+Q,V)))}co.prototype.cancel=function(){this.J=!0,ls(this)};function Fn(I){I.S=Date.now()+I.I,bh(I,I.I)}function bh(I,V){if(I.B!=null)throw Error("WatchDog timer not null");I.B=Zn(f(I.ba,I),V)}function us(I){I.B&&(a.clearTimeout(I.B),I.B=null)}co.prototype.ba=function(){this.B=null;const I=Date.now();0<=I-this.S?(ju(this.i,this.A),this.L!=2&&(ar(),br(17)),ls(this),this.s=2,zu(this)):bh(this,this.S-I)};function zu(I){I.j.G==0||I.J||kb(I.j,I)}function ls(I){us(I);var V=I.M;V&&typeof V.ma=="function"&&V.ma(),I.M=null,Jr(I.U),I.g&&(V=I.g,I.g=null,V.abort(),V.ma())}function wc(I,V){try{var Q=I.j;if(Q.G!=0&&(Q.g==I||ds(Q.h,I))){if(!I.K&&ds(Q.h,I)&&Q.G==3){try{var ie=Q.Da.g.parse(V)}catch{ie=null}if(Array.isArray(ie)&&ie.length==3){var ke=ie;if(ke[0]==0){e:if(!Q.u){if(Q.g)if(Q.g.F+3e3<I.F)Ab(Q),Tc(Q);else break e;Sb(Q),br(18)}}else Q.za=ke[1],0<Q.za-Q.T&&37500>ke[2]&&Q.F&&Q.v==0&&!Q.C&&(Q.C=Zn(f(Q.Za,Q),6e3));if(1>=um(Q.h)&&Q.ca){try{Q.ca()}catch{}Q.ca=void 0}}else wh(Q,11)}else if((I.K||Q.g==I)&&Ab(Q),!b(V))for(ke=Q.Da.g.parse(V),V=0;V<ke.length;V++){let Xn=ke[V];if(Q.T=Xn[0],Xn=Xn[1],Q.G==2)if(Xn[0]=="c"){Q.K=Xn[1],Q.ia=Xn[2];const Fs=Xn[3];Fs!=null&&(Q.la=Fs,Q.j.info("VER="+Q.la));const Qi=Xn[4];Qi!=null&&(Q.Aa=Qi,Q.j.info("SVER="+Q.Aa));const Nl=Xn[5];Nl!=null&&typeof Nl=="number"&&0<Nl&&(ie=1.5*Nl,Q.L=ie,Q.j.info("backChannelRequestTimeoutMs_="+ie)),ie=Q;const Vu=I.g;if(Vu){const Ig=Vu.g?Vu.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ig){var Ve=ie.h;Ve.g||Ig.indexOf("spdy")==-1&&Ig.indexOf("quic")==-1&&Ig.indexOf("h2")==-1||(Ve.j=Ve.l,Ve.g=new Set,Ve.h&&(te(Ve,Ve.h),Ve.h=null))}if(ie.D){const Rb=Vu.g?Vu.g.getResponseHeader("X-HTTP-Session-Id"):null;Rb&&(ie.ya=Rb,Gt(ie.I,ie.D,Rb))}}Q.G=3,Q.l&&Q.l.ua(),Q.ba&&(Q.R=Date.now()-I.F,Q.j.info("Handshake RTT: "+Q.R+"ms")),ie=Q;var Tt=I;if(ie.qa=DA(ie,ie.J?ie.ia:null,ie.W),Tt.K){ge(ie.h,Tt);var Cr=Tt,ps=ie.L;ps&&(Cr.I=ps),Cr.B&&(us(Cr),Fn(Cr)),ie.g=Tt}else kg(ie);0<Q.i.length&&Bd(Q)}else Xn[0]!="stop"&&Xn[0]!="close"||wh(Q,7);else Q.G==3&&(Xn[0]=="stop"||Xn[0]=="close"?Xn[0]=="stop"?wh(Q,7):Xi(Q):Xn[0]!="noop"&&Q.l&&Q.l.ta(Xn),Q.v=0)}}ar(4)}catch{}}var am=class{constructor(I,V){this.g=I,this.map=V}};function Il(I){this.l=I||10,a.PerformanceNavigationTiming?(I=a.performance.getEntriesByType("navigation"),I=0<I.length&&(I[0].nextHopProtocol=="hq"||I[0].nextHopProtocol=="h2")):I=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=I?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function cs(I){return I.h?!0:I.g?I.g.size>=I.j:!1}function um(I){return I.h?1:I.g?I.g.size:0}function ds(I,V){return I.h?I.h==V:I.g?I.g.has(V):!1}function te(I,V){I.g?I.g.add(V):I.h=V}function ge(I,V){I.h&&I.h==V?I.h=null:I.g&&I.g.has(V)&&I.g.delete(V)}Il.prototype.cancel=function(){if(this.i=ae(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const I of this.g.values())I.cancel();this.g.clear()}};function ae(I){if(I.h!=null)return I.i.concat(I.h.D);if(I.g!=null&&I.g.size!==0){let V=I.i;for(const Q of I.g.values())V=V.concat(Q.D);return V}return m(I.i)}function Ee(I){if(I.V&&typeof I.V=="function")return I.V();if(typeof Map<"u"&&I instanceof Map||typeof Set<"u"&&I instanceof Set)return Array.from(I.values());if(typeof I=="string")return I.split("");if(u(I)){for(var V=[],Q=I.length,ie=0;ie<Q;ie++)V.push(I[ie]);return V}V=[],Q=0;for(ie in I)V[Q++]=I[ie];return V}function Ae(I){if(I.na&&typeof I.na=="function")return I.na();if(!I.V||typeof I.V!="function"){if(typeof Map<"u"&&I instanceof Map)return Array.from(I.keys());if(!(typeof Set<"u"&&I instanceof Set)){if(u(I)||typeof I=="string"){var V=[];I=I.length;for(var Q=0;Q<I;Q++)V.push(Q);return V}V=[],Q=0;for(const ie in I)V[Q++]=ie;return V}}}function we(I,V){if(I.forEach&&typeof I.forEach=="function")I.forEach(V,void 0);else if(u(I)||typeof I=="string")Array.prototype.forEach.call(I,V,void 0);else for(var Q=Ae(I),ie=Ee(I),ke=ie.length,Ve=0;Ve<ke;Ve++)V.call(void 0,ie[Ve],Q&&Q[Ve],I)}var qe=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function nt(I,V){if(I){I=I.split("&");for(var Q=0;Q<I.length;Q++){var ie=I[Q].indexOf("="),ke=null;if(0<=ie){var Ve=I[Q].substring(0,ie);ke=I[Q].substring(ie+1)}else Ve=I[Q];V(Ve,ke?decodeURIComponent(ke.replace(/\+/g," ")):"")}}}function it(I){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,I instanceof it){this.h=I.h,mt(this,I.j),this.o=I.o,this.g=I.g,Pt(this,I.s),this.l=I.l;var V=I.i,Q=new fo;Q.i=V.i,V.g&&(Q.g=new Map(V.g),Q.h=V.h),un(this,Q),this.m=I.m}else I&&(V=String(I).match(qe))?(this.h=!1,mt(this,V[1]||"",!0),this.o=Xt(V[2]||""),this.g=Xt(V[3]||"",!0),Pt(this,V[4]),this.l=Xt(V[5]||"",!0),un(this,V[6]||"",!0),this.m=Xt(V[7]||"")):(this.h=!1,this.i=new fo(null,this.h))}it.prototype.toString=function(){var I=[],V=this.j;V&&I.push(ur(V,Qa,!0),":");var Q=this.g;return(Q||V=="file")&&(I.push("//"),(V=this.o)&&I.push(ur(V,Qa,!0),"@"),I.push(encodeURIComponent(String(Q)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),Q=this.s,Q!=null&&I.push(":",String(Q))),(Q=this.l)&&(this.g&&Q.charAt(0)!="/"&&I.push("/"),I.push(ur(Q,Q.charAt(0)=="/"?lm:Rl,!0))),(Q=this.i.toString())&&I.push("?",Q),(Q=this.m)&&I.push("#",ur(Q,cm)),I.join("")};function rt(I){return new it(I)}function mt(I,V,Q){I.j=Q?Xt(V,!0):V,I.j&&(I.j=I.j.replace(/:$/,""))}function Pt(I,V){if(V){if(V=Number(V),isNaN(V)||0>V)throw Error("Bad port number "+V);I.s=V}else I.s=null}function un(I,V,Q){V instanceof fo?(I.i=V,Ja(I.i,I.h)):(Q||(V=ur(V,Md)),I.i=new fo(V,I.h))}function Gt(I,V,Q){I.i.set(V,Q)}function kn(I){return Gt(I,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),I}function Xt(I,V){return I?V?decodeURI(I.replace(/%25/g,"%2525")):decodeURIComponent(I):""}function ur(I,V,Q){return typeof I=="string"?(I=encodeURI(I).replace(V,fs),Q&&(I=I.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),I):null}function fs(I){return I=I.charCodeAt(0),"%"+(I>>4&15).toString(16)+(I&15).toString(16)}var Qa=/[#\/\?@]/g,Rl=/[#\?:]/g,lm=/[#\?]/g,Md=/[#\?@]/g,cm=/#/g;function fo(I,V){this.h=this.g=null,this.i=I||null,this.j=!!V}function yi(I){I.g||(I.g=new Map,I.h=0,I.i&&nt(I.i,function(V,Q){I.add(decodeURIComponent(V.replace(/\+/g," ")),Q)}))}e=fo.prototype,e.add=function(I,V){yi(this),this.i=null,I=wa(this,I);var Q=this.g.get(I);return Q||this.g.set(I,Q=[]),Q.push(V),this.h+=1,this};function Ls(I,V){yi(I),V=wa(I,V),I.g.has(V)&&(I.i=null,I.h-=I.g.get(V).length,I.g.delete(V))}function xa(I,V){return yi(I),V=wa(I,V),I.g.has(V)}e.forEach=function(I,V){yi(this),this.g.forEach(function(Q,ie){Q.forEach(function(ke){I.call(V,ke,ie,this)},this)},this)},e.na=function(){yi(this);const I=Array.from(this.g.values()),V=Array.from(this.g.keys()),Q=[];for(let ie=0;ie<V.length;ie++){const ke=I[ie];for(let Ve=0;Ve<ke.length;Ve++)Q.push(V[ie])}return Q},e.V=function(I){yi(this);let V=[];if(typeof I=="string")xa(this,I)&&(V=V.concat(this.g.get(wa(this,I))));else{I=Array.from(this.g.values());for(let Q=0;Q<I.length;Q++)V=V.concat(I[Q])}return V},e.set=function(I,V){return yi(this),this.i=null,I=wa(this,I),xa(this,I)&&(this.h-=this.g.get(I).length),this.g.set(I,[V]),this.h+=1,this},e.get=function(I,V){return I?(I=this.V(I),0<I.length?String(I[0]):V):V};function Ld(I,V,Q){Ls(I,V),0<Q.length&&(I.i=null,I.g.set(wa(I,V),m(Q)),I.h+=Q.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const I=[],V=Array.from(this.g.keys());for(var Q=0;Q<V.length;Q++){var ie=V[Q];const Ve=encodeURIComponent(String(ie)),Tt=this.V(ie);for(ie=0;ie<Tt.length;ie++){var ke=Ve;Tt[ie]!==""&&(ke+="="+encodeURIComponent(String(Tt[ie]))),I.push(ke)}}return this.i=I.join("&")};function wa(I,V){return V=String(V),I.j&&(V=V.toLowerCase()),V}function Ja(I,V){V&&!I.j&&(yi(I),I.i=null,I.g.forEach(function(Q,ie){var ke=ie.toLowerCase();ie!=ke&&(Ls(this,ie),Ld(this,ke,Q))},I)),I.j=V}function Eb(I,V){const Q=new mi;if(a.Image){const ie=new Image;ie.onload=h(Ki,Q,"TestLoadImage: loaded",!0,V,ie),ie.onerror=h(Ki,Q,"TestLoadImage: error",!1,V,ie),ie.onabort=h(Ki,Q,"TestLoadImage: abort",!1,V,ie),ie.ontimeout=h(Ki,Q,"TestLoadImage: timeout",!1,V,ie),a.setTimeout(function(){ie.ontimeout&&ie.ontimeout()},1e4),ie.src=I}else V(!1)}function Dl(I,V){const Q=new mi,ie=new AbortController,ke=setTimeout(()=>{ie.abort(),Ki(Q,"TestPingServer: timeout",!1,V)},1e4);fetch(I,{signal:ie.signal}).then(Ve=>{clearTimeout(ke),Ve.ok?Ki(Q,"TestPingServer: ok",!0,V):Ki(Q,"TestPingServer: server error",!1,V)}).catch(()=>{clearTimeout(ke),Ki(Q,"TestPingServer: error",!1,V)})}function Ki(I,V,Q,ie,ke){try{ke&&(ke.onload=null,ke.onerror=null,ke.onabort=null,ke.ontimeout=null),ie(Q)}catch{}}function PE(){this.g=new Hr}function Ag(I,V,Q){const ie=Q||"";try{we(I,function(ke,Ve){let Tt=ke;l(ke)&&(Tt=wn(ke)),V.push(ie+Ve+"="+encodeURIComponent(Tt))})}catch(ke){throw V.push(ie+"type="+encodeURIComponent("_badmap")),ke}}function Ec(I){this.l=I.Ub||null,this.j=I.eb||!1}p(Ec,Ln),Ec.prototype.g=function(){return new Fd(this.l,this.j)},Ec.prototype.i=function(I){return function(){return I}}({});function Fd(I,V){Te.call(this),this.D=I,this.o=V,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}p(Fd,Te),e=Fd.prototype,e.open=function(I,V){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=I,this.A=V,this.readyState=1,Za(this)},e.send=function(I){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const V={headers:this.u,method:this.B,credentials:this.m,cache:void 0};I&&(V.body=I),(this.D||a).fetch(new Request(this.A,V)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Uu(this)),this.readyState=0},e.Sa=function(I){if(this.g&&(this.l=I,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=I.headers,this.readyState=2,Za(this)),this.g&&(this.readyState=3,Za(this),this.g)))if(this.responseType==="arraybuffer")I.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in I){if(this.j=I.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;_b(this)}else I.text().then(this.Ra.bind(this),this.ga.bind(this))};function _b(I){I.j.read().then(I.Pa.bind(I)).catch(I.ga.bind(I))}e.Pa=function(I){if(this.g){if(this.o&&I.value)this.response.push(I.value);else if(!this.o){var V=I.value?I.value:new Uint8Array(0);(V=this.v.decode(V,{stream:!I.done}))&&(this.response=this.responseText+=V)}I.done?Uu(this):Za(this),this.readyState==3&&_b(this)}},e.Ra=function(I){this.g&&(this.response=this.responseText=I,Uu(this))},e.Qa=function(I){this.g&&(this.response=I,Uu(this))},e.ga=function(){this.g&&Uu(this)};function Uu(I){I.readyState=4,I.l=null,I.j=null,I.v=null,Za(I)}e.setRequestHeader=function(I,V){this.u.append(I,V)},e.getResponseHeader=function(I){return this.h&&this.h.get(I.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const I=[],V=this.h.entries();for(var Q=V.next();!Q.done;)Q=Q.value,I.push(Q[0]+": "+Q[1]),Q=V.next();return I.join(`\r
`)};function Za(I){I.onreadystatechange&&I.onreadystatechange.call(I)}Object.defineProperty(Fd.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(I){this.m=I?"include":"same-origin"}});function _c(I){let V="";return C(I,function(Q,ie){V+=ie,V+=":",V+=Q,V+=`\r
`}),V}function le(I,V,Q){e:{for(ie in Q){var ie=!1;break e}ie=!0}ie||(Q=_c(Q),typeof I=="string"?Q!=null&&encodeURIComponent(String(Q)):Gt(I,V,Q))}function ye(I){Te.call(this),this.headers=new Map,this.o=I||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}p(ye,Te);var Be=/^https?$/i,Bt=["POST","PUT"];e=ye.prototype,e.Ha=function(I){this.J=I},e.ea=function(I,V,Q,ie){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+I);V=V?V.toUpperCase():"GET",this.D=I,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():gi.g(),this.v=this.o?Ns(this.o):Ns(gi),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(V,String(I),!0),this.B=!1}catch(Ve){_n(this,Ve);return}if(I=Q||"",Q=new Map(this.headers),ie)if(Object.getPrototypeOf(ie)===Object.prototype)for(var ke in ie)Q.set(ke,ie[ke]);else if(typeof ie.keys=="function"&&typeof ie.get=="function")for(const Ve of ie.keys())Q.set(Ve,ie.get(Ve));else throw Error("Unknown input type for opt_headers: "+String(ie));ie=Array.from(Q.keys()).find(Ve=>Ve.toLowerCase()=="content-type"),ke=a.FormData&&I instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Bt,V,void 0))||ie||ke||Q.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Ve,Tt]of Q)this.g.setRequestHeader(Ve,Tt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{vr(this),this.u=!0,this.g.send(I),this.u=!1}catch(Ve){_n(this,Ve)}};function _n(I,V){I.h=!1,I.g&&(I.j=!0,I.g.abort(),I.j=!1),I.l=V,I.m=5,Kn(I),yn(I)}function Kn(I){I.A||(I.A=!0,Oe(I,"complete"),Oe(I,"error"))}e.abort=function(I){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=I||7,Oe(this,"complete"),Oe(this,"abort"),yn(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),yn(this,!0)),ye.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?wr(this):this.bb())},e.bb=function(){wr(this)};function wr(I){if(I.h&&typeof o<"u"&&(!I.v[1]||Gr(I)!=4||I.Z()!=2)){if(I.u&&Gr(I)==4)_t(I.Ea,0,I);else if(Oe(I,"readystatechange"),Gr(I)==4){I.h=!1;try{const Tt=I.Z();e:switch(Tt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var V=!0;break e;default:V=!1}var Q;if(!(Q=V)){var ie;if(ie=Tt===0){var ke=String(I.D).match(qe)[1]||null;!ke&&a.self&&a.self.location&&(ke=a.self.location.protocol.slice(0,-1)),ie=!Be.test(ke?ke.toLowerCase():"")}Q=ie}if(Q)Oe(I,"complete"),Oe(I,"success");else{I.m=6;try{var Ve=2<Gr(I)?I.g.statusText:""}catch{Ve=""}I.l=Ve+" ["+I.Z()+"]",Kn(I)}}finally{yn(I)}}}}function yn(I,V){if(I.g){vr(I);const Q=I.g,ie=I.v[0]?()=>{}:null;I.g=null,I.v=null,V||Oe(I,"ready");try{Q.onreadystatechange=ie}catch{}}}function vr(I){I.I&&(a.clearTimeout(I.I),I.I=null)}e.isActive=function(){return!!this.g};function Gr(I){return I.g?I.g.readyState:0}e.Z=function(){try{return 2<Gr(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(I){if(this.g){var V=this.g.responseText;return I&&V.indexOf(I)==0&&(V=V.substring(I.length)),An(V)}};function hs(I){try{if(!I.g)return null;if("response"in I.g)return I.g.response;switch(I.H){case"":case"text":return I.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in I.g)return I.g.mozResponseArrayBuffer}return null}catch{return null}}function Pl(I){const V={};I=(I.g&&2<=Gr(I)&&I.g.getAllResponseHeaders()||"").split(`\r
`);for(let ie=0;ie<I.length;ie++){if(b(I[ie]))continue;var Q=O(I[ie]);const ke=Q[0];if(Q=Q[1],typeof Q!="string")continue;Q=Q.trim();const Ve=V[ke]||[];V[ke]=Ve,Ve.push(Q)}S(V,function(ie){return ie.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function eu(I,V,Q){return Q&&Q.internalChannelParams&&Q.internalChannelParams[I]||V}function vh(I){this.Aa=0,this.i=[],this.j=new mi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=eu("failFast",!1,I),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=eu("baseRetryDelayMs",5e3,I),this.cb=eu("retryDelaySeedMs",1e4,I),this.Wa=eu("forwardChannelMaxRetries",2,I),this.wa=eu("forwardChannelRequestTimeoutMs",2e4,I),this.pa=I&&I.xmlHttpFactory||void 0,this.Xa=I&&I.Tb||void 0,this.Ca=I&&I.useFetchStreams||!1,this.L=void 0,this.J=I&&I.supportsCrossDomainXhr||!1,this.K="",this.h=new Il(I&&I.concurrentRequestLimit),this.Da=new PE,this.P=I&&I.fastHandshake||!1,this.O=I&&I.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=I&&I.Rb||!1,I&&I.xa&&this.j.xa(),I&&I.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&I&&I.detectBufferingProxy||!1,this.ja=void 0,I&&I.longPollingTimeout&&0<I.longPollingTimeout&&(this.ja=I.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=vh.prototype,e.la=8,e.G=1,e.connect=function(I,V,Q,ie){br(0),this.W=I,this.H=V||{},Q&&ie!==void 0&&(this.H.OSID=Q,this.H.OAID=ie),this.F=this.X,this.I=DA(this,null,this.W),Bd(this)};function Xi(I){if(Tb(I),I.G==3){var V=I.U++,Q=rt(I.I);if(Gt(Q,"SID",I.K),Gt(Q,"RID",V),Gt(Q,"TYPE","terminate"),xh(I,Q),V=new co(I,I.j,V),V.L=2,V.v=kn(rt(Q)),Q=!1,a.navigator&&a.navigator.sendBeacon)try{Q=a.navigator.sendBeacon(V.v.toString(),"")}catch{}!Q&&a.Image&&(new Image().src=V.v,Q=!0),Q||(V.g=PA(V.j,null),V.g.ea(V.v)),V.F=Date.now(),Fn(V)}RA(I)}function Tc(I){I.g&&(NE(I),I.g.cancel(),I.g=null)}function Tb(I){Tc(I),I.u&&(a.clearTimeout(I.u),I.u=null),Ab(I),I.h.cancel(),I.s&&(typeof I.s=="number"&&a.clearTimeout(I.s),I.s=null)}function Bd(I){if(!cs(I.h)&&!I.s){I.s=!0;var V=I.Ga;J||U(),K||(J(),K=!0),Z.add(V,I),I.B=0}}function h5(I,V){return um(I.h)>=I.h.j-(I.s?1:0)?!1:I.s?(I.i=V.D.concat(I.i),!0):I.G==1||I.G==2||I.B>=(I.Va?0:I.Wa)?!1:(I.s=Zn(f(I.Ga,I,V),IA(I,I.B)),I.B++,!0)}e.Ga=function(I){if(this.s)if(this.s=null,this.G==1){if(!I){this.U=Math.floor(1e5*Math.random()),I=this.U++;const ke=new co(this,this.j,I);let Ve=this.o;if(this.S&&(Ve?(Ve=k(Ve),N(Ve,this.S)):Ve=this.S),this.m!==null||this.O||(ke.H=Ve,Ve=null),this.P)e:{for(var V=0,Q=0;Q<this.i.length;Q++){t:{var ie=this.i[Q];if("__data__"in ie.map&&(ie=ie.map.__data__,typeof ie=="string")){ie=ie.length;break t}ie=void 0}if(ie===void 0)break;if(V+=ie,4096<V){V=Q;break e}if(V===4096||Q===this.i.length-1){V=Q+1;break e}}V=1e3}else V=1e3;V=dm(this,ke,V),Q=rt(this.I),Gt(Q,"RID",I),Gt(Q,"CVER",22),this.D&&Gt(Q,"X-HTTP-Session-Id",this.D),xh(this,Q),Ve&&(this.O?V="headers="+encodeURIComponent(String(_c(Ve)))+"&"+V:this.m&&le(Q,this.m,Ve)),te(this.h,ke),this.Ua&&Gt(Q,"TYPE","init"),this.P?(Gt(Q,"$req",V),Gt(Q,"SID","null"),ke.T=!0,$d(ke,Q,null)):$d(ke,Q,V),this.G=2}}else this.G==3&&(I?Cb(this,I):this.i.length==0||cs(this.h)||Cb(this))};function Cb(I,V){var Q;V?Q=V.l:Q=I.U++;const ie=rt(I.I);Gt(ie,"SID",I.K),Gt(ie,"RID",Q),Gt(ie,"AID",I.T),xh(I,ie),I.m&&I.o&&le(ie,I.m,I.o),Q=new co(I,I.j,Q,I.B+1),I.m===null&&(Q.H=I.o),V&&(I.i=V.D.concat(I.i)),V=dm(I,Q,1e3),Q.I=Math.round(.5*I.wa)+Math.round(.5*I.wa*Math.random()),te(I.h,Q),$d(Q,ie,V)}function xh(I,V){I.H&&C(I.H,function(Q,ie){Gt(V,ie,Q)}),I.l&&we({},function(Q,ie){Gt(V,ie,Q)})}function dm(I,V,Q){Q=Math.min(I.i.length,Q);var ie=I.l?f(I.l.Na,I.l,I):null;e:{var ke=I.i;let Ve=-1;for(;;){const Tt=["count="+Q];Ve==-1?0<Q?(Ve=ke[0].g,Tt.push("ofs="+Ve)):Ve=0:Tt.push("ofs="+Ve);let Cr=!0;for(let ps=0;ps<Q;ps++){let Xn=ke[ps].g;const Fs=ke[ps].map;if(Xn-=Ve,0>Xn)Ve=Math.max(0,ke[ps].g-100),Cr=!1;else try{Ag(Fs,Tt,"req"+Xn+"_")}catch{ie&&ie(Fs)}}if(Cr){ie=Tt.join("&");break e}}}return I=I.i.splice(0,Q),V.D=I,ie}function kg(I){if(!I.g&&!I.u){I.Y=1;var V=I.Fa;J||U(),K||(J(),K=!0),Z.add(V,I),I.v=0}}function Sb(I){return I.g||I.u||3<=I.v?!1:(I.Y++,I.u=Zn(f(I.Fa,I),IA(I,I.v)),I.v++,!0)}e.Fa=function(){if(this.u=null,kA(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var I=2*this.R;this.j.info("BP detection timer enabled: "+I),this.A=Zn(f(this.ab,this),I)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,br(10),Tc(this),kA(this))};function NE(I){I.A!=null&&(a.clearTimeout(I.A),I.A=null)}function kA(I){I.g=new co(I,I.j,"rpc",I.Y),I.m===null&&(I.g.H=I.o),I.g.O=0;var V=rt(I.qa);Gt(V,"RID","rpc"),Gt(V,"SID",I.K),Gt(V,"AID",I.T),Gt(V,"CI",I.F?"0":"1"),!I.F&&I.ja&&Gt(V,"TO",I.ja),Gt(V,"TYPE","xmlhttp"),xh(I,V),I.m&&I.o&&le(V,I.m,I.o),I.L&&(I.g.I=I.L);var Q=I.g;I=I.ia,Q.L=1,Q.v=kn(rt(V)),Q.m=null,Q.P=!0,vc(Q,I)}e.Za=function(){this.C!=null&&(this.C=null,Tc(this),Sb(this),br(19))};function Ab(I){I.C!=null&&(a.clearTimeout(I.C),I.C=null)}function kb(I,V){var Q=null;if(I.g==V){Ab(I),NE(I),I.g=null;var ie=2}else if(ds(I.h,V))Q=V.D,ge(I.h,V),ie=1;else return;if(I.G!=0){if(V.o)if(ie==1){Q=V.m?V.m.length:0,V=Date.now()-V.F;var ke=I.B;ie=zo(),Oe(ie,new $s(ie,Q)),Bd(I)}else kg(I);else if(ke=V.s,ke==3||ke==0&&0<V.X||!(ie==1&&h5(I,V)||ie==2&&Sb(I)))switch(Q&&0<Q.length&&(V=I.h,V.i=V.i.concat(Q)),ke){case 1:wh(I,5);break;case 4:wh(I,10);break;case 3:wh(I,6);break;default:wh(I,2)}}}function IA(I,V){let Q=I.Ta+Math.floor(Math.random()*I.cb);return I.isActive()||(Q*=2),Q*V}function wh(I,V){if(I.j.info("Error code "+V),V==2){var Q=f(I.fb,I),ie=I.Xa;const ke=!ie;ie=new it(ie||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||mt(ie,"https"),kn(ie),ke?Eb(ie.toString(),Q):Dl(ie.toString(),Q)}else br(2);I.G=0,I.l&&I.l.sa(V),RA(I),Tb(I)}e.fb=function(I){I?(this.j.info("Successfully pinged google.com"),br(2)):(this.j.info("Failed to ping google.com"),br(1))};function RA(I){if(I.G=0,I.ka=[],I.l){const V=ae(I.h);(V.length!=0||I.i.length!=0)&&(y(I.ka,V),y(I.ka,I.i),I.h.i.length=0,m(I.i),I.i.length=0),I.l.ra()}}function DA(I,V,Q){var ie=Q instanceof it?rt(Q):new it(Q);if(ie.g!="")V&&(ie.g=V+"."+ie.g),Pt(ie,ie.s);else{var ke=a.location;ie=ke.protocol,V=V?V+"."+ke.hostname:ke.hostname,ke=+ke.port;var Ve=new it(null);ie&&mt(Ve,ie),V&&(Ve.g=V),ke&&Pt(Ve,ke),Q&&(Ve.l=Q),ie=Ve}return Q=I.D,V=I.ya,Q&&V&&Gt(ie,Q,V),Gt(ie,"VER",I.la),xh(I,ie),ie}function PA(I,V,Q){if(V&&!I.J)throw Error("Can't create secondary domain capable XhrIo object.");return V=I.Ca&&!I.pa?new ye(new Ec({eb:Q})):new ye(I.pa),V.Ha(I.J),V}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function OE(){}e=OE.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function Ib(){}Ib.prototype.g=function(I,V){return new Ea(I,V)};function Ea(I,V){Te.call(this),this.g=new vh(V),this.l=I,this.h=V&&V.messageUrlParams||null,I=V&&V.messageHeaders||null,V&&V.clientProtocolHeaderRequired&&(I?I["X-Client-Protocol"]="webchannel":I={"X-Client-Protocol":"webchannel"}),this.g.o=I,I=V&&V.initMessageHeaders||null,V&&V.messageContentType&&(I?I["X-WebChannel-Content-Type"]=V.messageContentType:I={"X-WebChannel-Content-Type":V.messageContentType}),V&&V.va&&(I?I["X-WebChannel-Client-Profile"]=V.va:I={"X-WebChannel-Client-Profile":V.va}),this.g.S=I,(I=V&&V.Sb)&&!b(I)&&(this.g.m=I),this.v=V&&V.supportsCrossDomainXhr||!1,this.u=V&&V.sendRawJson||!1,(V=V&&V.httpSessionIdParam)&&!b(V)&&(this.g.D=V,I=this.h,I!==null&&V in I&&(I=this.h,V in I&&delete I[V])),this.j=new jd(this)}p(Ea,Te),Ea.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ea.prototype.close=function(){Xi(this.g)},Ea.prototype.o=function(I){var V=this.g;if(typeof I=="string"){var Q={};Q.__data__=I,I=Q}else this.u&&(Q={},Q.__data__=wn(I),I=Q);V.i.push(new am(V.Ya++,I)),V.G==3&&Bd(V)},Ea.prototype.N=function(){this.g.l=null,delete this.j,Xi(this.g),delete this.g,Ea.aa.N.call(this)};function NA(I){ai.call(this),I.__headers__&&(this.headers=I.__headers__,this.statusCode=I.__status__,delete I.__headers__,delete I.__status__);var V=I.__sm__;if(V){e:{for(const Q in V){I=Q;break e}I=void 0}(this.i=I)&&(I=this.i,V=V!==null&&I in V?V[I]:void 0),this.data=V}else this.data=I}p(NA,ai);function OA(){or.call(this),this.status=1}p(OA,or);function jd(I){this.g=I}p(jd,OE),jd.prototype.ua=function(){Oe(this.g,"a")},jd.prototype.ta=function(I){Oe(this.g,new NA(I))},jd.prototype.sa=function(I){Oe(this.g,new OA)},jd.prototype.ra=function(){Oe(this.g,"b")},Ib.prototype.createWebChannel=Ib.prototype.g,Ea.prototype.send=Ea.prototype.o,Ea.prototype.open=Ea.prototype.m,Ea.prototype.close=Ea.prototype.close,A1e=function(){return new Ib},S1e=function(){return zo()},C1e=Os,yB={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Yn.NO_ERROR=0,Yn.TIMEOUT=8,Yn.HTTP_ERROR=6,XR=Yn,kl.COMPLETE="complete",T1e=kl,Zr.EventType=qr,qr.OPEN="a",qr.CLOSE="b",qr.ERROR="c",qr.MESSAGE="d",Te.prototype.listen=Te.prototype.K,rT=Zr,ye.prototype.listenOnce=ye.prototype.L,ye.prototype.getLastError=ye.prototype.Ka,ye.prototype.getLastErrorCode=ye.prototype.Ba,ye.prototype.getStatus=ye.prototype.Z,ye.prototype.getResponseJson=ye.prototype.Oa,ye.prototype.getResponseText=ye.prototype.oa,ye.prototype.send=ye.prototype.ea,ye.prototype.setWithCredentials=ye.prototype.Ha,_1e=ye}).apply(typeof qk<"u"?qk:typeof self<"u"?self:typeof window<"u"?window:{});const vre="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}fu.UNAUTHENTICATED=new fu(null),fu.GOOGLE_CREDENTIALS=new fu("google-credentials-uid"),fu.FIRST_PARTY=new fu("first-party-uid"),fu.MOCK_USER=new fu("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qw="11.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jy=new aO("@firebase/firestore");function Av(){return Jy.logLevel}function Lt(e,...t){if(Jy.logLevel<=Bn.DEBUG){const n=t.map(BH);Jy.debug(`Firestore (${Qw}): ${e}`,...n)}}function Sp(e,...t){if(Jy.logLevel<=Bn.ERROR){const n=t.map(BH);Jy.error(`Firestore (${Qw}): ${e}`,...n)}}function L2(e,...t){if(Jy.logLevel<=Bn.WARN){const n=t.map(BH);Jy.warn(`Firestore (${Qw}): ${e}`,...n)}}function BH(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fn(e="Unexpected state"){const t=`FIRESTORE (${Qw}) INTERNAL ASSERTION FAILED: `+e;throw Sp(t),new Error(t)}function Tr(e,t){e||fn()}function xn(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ze={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Nt extends th{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cp{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gJe{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class yJe{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(fu.UNAUTHENTICATED))}shutdown(){}}class bJe{constructor(t){this.t=t,this.currentUser=fu.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){Tr(this.o===void 0);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new cp;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new cp,t.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;t.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},a=u=>{Lt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(Lt("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new cp)}},0),o()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==t?(Lt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Tr(typeof r.accessToken=="string"),new gJe(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Tr(t===null||typeof t=="string"),new fu(t)}}class vJe{constructor(t,n,r){this.l=t,this.h=n,this.P=r,this.type="FirstParty",this.user=fu.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const t=this.I();return t&&this.T.set("Authorization",t),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class xJe{constructor(t,n,r){this.l=t,this.h=n,this.P=r}getToken(){return Promise.resolve(new vJe(this.l,this.h,this.P))}start(t,n){t.enqueueRetryable(()=>n(fu.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class wJe{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class EJe{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,n){Tr(this.o===void 0);const r=s=>{s.error!=null&&Lt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,Lt("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>r(s))};const i=s=>{Lt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):Lt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(Tr(typeof n.token=="string"),this.R=n.token,new wJe(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _Je(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k1e{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/t.length)*t.length;let r="";for(;r.length<20;){const i=_Je(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=t.charAt(i[s]%t.length))}return r}}function Vn(e,t){return e<t?-1:e>t?1:0}function Ix(e,t,n){return e.length===t.length&&e.every((r,i)=>n(r,t[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs{static now(){return Cs.fromMillis(Date.now())}static fromDate(t){return Cs.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor(1e6*(t-1e3*n));return new Cs(n,r)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new Nt(Ze.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Nt(Ze.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new Nt(Ze.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Nt(Ze.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?Vn(this.nanoseconds,t.nanoseconds):Vn(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{static fromTimestamp(t){return new vn(t)}static min(){return new vn(new Cs(0,0))}static max(){return new vn(new Cs(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zd{constructor(t,n,r){n===void 0?n=0:n>t.length&&fn(),r===void 0?r=t.length-n:r>t.length-n&&fn(),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return Zd.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof Zd?t.forEach(r=>{n.push(r)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let i=0;i<r;i++){const s=Zd.compareSegments(t.get(i),n.get(i));if(s!==0)return s}return Math.sign(t.length-n.length)}static compareSegments(t,n){const r=Zd.isNumericId(t),i=Zd.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?Zd.extractNumericId(t).compare(Zd.extractNumericId(n)):t<n?-1:t>n?1:0}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return d0.fromString(t.substring(4,t.length-2))}}class ri extends Zd{construct(t,n,r){return new ri(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new Nt(Ze.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new ri(n)}static emptyPath(){return new ri([])}}const TJe=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class To extends Zd{construct(t,n,r){return new To(t,n,r)}static isValidIdentifier(t){return TJe.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),To.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new To(["__name__"])}static fromServerFormat(t){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new Nt(Ze.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<t.length;){const a=t[i];if(a==="\\"){if(i+1===t.length)throw new Nt(Ze.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const u=t[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Nt(Ze.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new Nt(Ze.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new To(n)}static emptyPath(){return new To([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(t){this.path=t}static fromPath(t){return new nn(ri.fromString(t))}static fromName(t){return new nn(ri.fromString(t).popFirst(5))}static empty(){return new nn(ri.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&ri.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return ri.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new nn(new ri(t.slice()))}}function CJe(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=vn.fromTimestamp(r===1e9?new Cs(n+1,0):new Cs(n,r));return new T0(i,nn.empty(),t)}function SJe(e){return new T0(e.readTime,e.key,-1)}class T0{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new T0(vn.min(),nn.empty(),-1)}static max(){return new T0(vn.max(),nn.empty(),-1)}}function AJe(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=nn.comparator(e.documentKey,t.documentKey),n!==0?n:Vn(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kJe="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class IJe{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jw(e){if(e.code!==Ze.FAILED_PRECONDITION||e.message!==kJe)throw e;Lt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&fn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new et((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof et?n:et.resolve(n)}catch(n){return et.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):et.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):et.reject(n)}static resolve(t){return new et((n,r)=>{n(t)})}static reject(t){return new et((n,r)=>{r(t)})}static waitFor(t){return new et((n,r)=>{let i=0,s=0,o=!1;t.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(t){let n=et.resolve(!1);for(const r of t)n=n.next(i=>i?et.resolve(i):r());return n}static forEach(t,n){const r=[];return t.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(t,n){return new et((r,i)=>{const s=t.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const l=u;n(t[l]).next(c=>{o[l]=c,++a,a===s&&r(o)},c=>i(c))}})}static doWhile(t,n){return new et((r,i)=>{const s=()=>{t()===!0?n().next(()=>{s()},i):r()};s()})}}function RJe(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Zw(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cO{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}cO.oe=-1;function dO(e){return e==null}function VP(e){return e===0&&1/e==-1/0}function DJe(e){return typeof e=="number"&&Number.isInteger(e)&&!VP(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PJe(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=xre(t)),t=NJe(e.get(n),t);return xre(t)}function NJe(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const s=e.charAt(i);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function xre(e){return e+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wre(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function sg(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function I1e(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{constructor(t,n){this.comparator=t,this.root=n||xo.EMPTY}insert(t,n){return new Ci(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,xo.BLACK,null,null))}remove(t){return new Ci(this.comparator,this.root.remove(t,this.comparator).copy(null,null,xo.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(t,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,r)=>(t(n,r),!1))}toString(){const t=[];return this.inorderTraversal((n,r)=>(t.push(`${n}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Wk(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Wk(this.root,t,this.comparator,!1)}getReverseIterator(){return new Wk(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Wk(this.root,t,this.comparator,!0)}}class Wk{constructor(t,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=n?r(t.key,n):1,n&&i&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class xo{constructor(t,n,r,i,s){this.key=t,this.value=n,this.color=r??xo.RED,this.left=i??xo.EMPTY,this.right=s??xo.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,i,s){return new xo(t??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let i=this;const s=r(t,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(t,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(t,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return xo.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(t,i.key)===0){if(i.right.isEmpty())return xo.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,xo.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,xo.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw fn();const t=this.left.check();if(t!==this.right.check())throw fn();return t+(this.isRed()?0:1)}}xo.EMPTY=null,xo.RED=!0,xo.BLACK=!1;xo.EMPTY=new class{constructor(){this.size=0}get key(){throw fn()}get value(){throw fn()}get color(){throw fn()}get left(){throw fn()}get right(){throw fn()}copy(t,n,r,i,s){return this}insert(t,n,r){return new xo(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(t){this.comparator=t,this.data=new Ci(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,r)=>(t(n),!1))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,t[1])>=0)return;n(i.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new Ere(this.data.getIterator())}getIteratorFrom(t){return new Ere(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(r=>{n=n.add(r)}),n}isEqual(t){if(!(t instanceof Ss)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new Ss(this.comparator);return n.data=t,n}}class Ere{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl{constructor(t){this.fields=t,t.sort(To.comparator)}static empty(){return new rl([])}unionWith(t){let n=new Ss(To.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new rl(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return Ix(this.fields,t.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R1e extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new R1e("Invalid base64 string: "+s):s}}(t);return new Mo(n)}static fromUint8Array(t){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(t);return new Mo(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Vn(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Mo.EMPTY_BYTE_STRING=new Mo("");const OJe=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function C0(e){if(Tr(!!e),typeof e=="string"){let t=0;const n=OJe.exec(e);if(Tr(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),t=Number(i)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Ui(e.seconds),nanos:Ui(e.nanos)}}function Ui(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function S0(e){return typeof e=="string"?Mo.fromBase64String(e):Mo.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jH(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function fO(e){const t=e.mapValue.fields.__previous_value__;return jH(t)?fO(t):t}function F2(e){const t=C0(e.mapValue.fields.__local_write_time__.timestampValue);return new Cs(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $Je{constructor(t,n,r,i,s,o,a,u,l){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}}class B2{constructor(t,n){this.projectId=t,this.database=n||"(default)"}static empty(){return new B2("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof B2&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gk={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function A0(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?jH(e)?4:LJe(e)?9007199254740991:MJe(e)?10:11:fn()}function Lf(e,t){if(e===t)return!0;const n=A0(e);if(n!==A0(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return F2(e).isEqual(F2(t));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=C0(i.timestampValue),a=C0(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(i,s){return S0(i.bytesValue).isEqual(S0(s.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(i,s){return Ui(i.geoPointValue.latitude)===Ui(s.geoPointValue.latitude)&&Ui(i.geoPointValue.longitude)===Ui(s.geoPointValue.longitude)}(e,t);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Ui(i.integerValue)===Ui(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Ui(i.doubleValue),a=Ui(s.doubleValue);return o===a?VP(o)===VP(a):isNaN(o)&&isNaN(a)}return!1}(e,t);case 9:return Ix(e.arrayValue.values||[],t.arrayValue.values||[],Lf);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(wre(o)!==wre(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!Lf(o[u],a[u])))return!1;return!0}(e,t);default:return fn()}}function j2(e,t){return(e.values||[]).find(n=>Lf(n,t))!==void 0}function Rx(e,t){if(e===t)return 0;const n=A0(e),r=A0(t);if(n!==r)return Vn(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Vn(e.booleanValue,t.booleanValue);case 2:return function(s,o){const a=Ui(s.integerValue||s.doubleValue),u=Ui(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(e,t);case 3:return _re(e.timestampValue,t.timestampValue);case 4:return _re(F2(e),F2(t));case 5:return Vn(e.stringValue,t.stringValue);case 6:return function(s,o){const a=S0(s),u=S0(o);return a.compareTo(u)}(e.bytesValue,t.bytesValue);case 7:return function(s,o){const a=s.split("/"),u=o.split("/");for(let l=0;l<a.length&&l<u.length;l++){const c=Vn(a[l],u[l]);if(c!==0)return c}return Vn(a.length,u.length)}(e.referenceValue,t.referenceValue);case 8:return function(s,o){const a=Vn(Ui(s.latitude),Ui(o.latitude));return a!==0?a:Vn(Ui(s.longitude),Ui(o.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Tre(e.arrayValue,t.arrayValue);case 10:return function(s,o){var a,u,l,c;const d=s.fields||{},f=o.fields||{},h=(a=d.value)===null||a===void 0?void 0:a.arrayValue,p=(u=f.value)===null||u===void 0?void 0:u.arrayValue,m=Vn(((l=h==null?void 0:h.values)===null||l===void 0?void 0:l.length)||0,((c=p==null?void 0:p.values)===null||c===void 0?void 0:c.length)||0);return m!==0?m:Tre(h,p)}(e.mapValue,t.mapValue);case 11:return function(s,o){if(s===Gk.mapValue&&o===Gk.mapValue)return 0;if(s===Gk.mapValue)return 1;if(o===Gk.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),l=o.fields||{},c=Object.keys(l);u.sort(),c.sort();for(let d=0;d<u.length&&d<c.length;++d){const f=Vn(u[d],c[d]);if(f!==0)return f;const h=Rx(a[u[d]],l[c[d]]);if(h!==0)return h}return Vn(u.length,c.length)}(e.mapValue,t.mapValue);default:throw fn()}}function _re(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return Vn(e,t);const n=C0(e),r=C0(t),i=Vn(n.seconds,r.seconds);return i!==0?i:Vn(n.nanos,r.nanos)}function Tre(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Rx(n[i],r[i]);if(s)return s}return Vn(n.length,r.length)}function Dx(e){return bB(e)}function bB(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const r=C0(n);return`time(${r.seconds},${r.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return S0(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return nn.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=bB(s);return r+"]"}(e.arrayValue):"mapValue"in e?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${bB(n.fields[o])}`;return i+"}"}(e.mapValue):fn()}function QR(e){switch(A0(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=fO(e);return t?16+QR(t):16;case 5:return 2*e.stringValue.length;case 6:return S0(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+QR(s),0)}(e.arrayValue);case 10:case 11:return function(r){let i=0;return sg(r.fields,(s,o)=>{i+=s.length+QR(o)}),i}(e.mapValue);default:throw fn()}}function Cre(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function vB(e){return!!e&&"integerValue"in e}function zH(e){return!!e&&"arrayValue"in e}function Sre(e){return!!e&&"nullValue"in e}function Are(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function JR(e){return!!e&&"mapValue"in e}function MJe(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function QT(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return sg(e.mapValue.fields,(n,r)=>t.mapValue.fields[n]=QT(r)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=QT(e.arrayValue.values[n]);return t}return Object.assign({},e)}function LJe(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{constructor(t){this.value=t}static empty(){return new bu({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!JR(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=QT(n)}setAll(t){let n=To.emptyPath(),r={},i=[];t.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=QT(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(t){const n=this.field(t.popLast());JR(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Lf(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let i=n.mapValue.fields[t.get(r)];JR(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(t,n,r){sg(n,(i,s)=>t[i]=s);for(const i of r)delete t[i]}clone(){return new bu(QT(this.value))}}function D1e(e){const t=[];return sg(e.fields,(n,r)=>{const i=new To([n]);if(JR(r)){const s=D1e(r.mapValue).fields;if(s.length===0)t.push(i);else for(const o of s)t.push(i.child(o))}else t.push(i)}),new rl(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(t,n,r,i,s,o,a){this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(t){return new ia(t,0,vn.min(),vn.min(),vn.min(),bu.empty(),0)}static newFoundDocument(t,n,r,i){return new ia(t,1,n,vn.min(),r,i,0)}static newNoDocument(t,n){return new ia(t,2,n,vn.min(),vn.min(),bu.empty(),0)}static newUnknownDocument(t,n){return new ia(t,3,n,vn.min(),vn.min(),bu.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(vn.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=bu.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=bu.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=vn.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof ia&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new ia(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let HP=class{constructor(t,n){this.position=t,this.inclusive=n}};function kre(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(s.field.isKeyField()?r=nn.comparator(nn.fromName(o.referenceValue),n.key):r=Rx(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Ire(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Lf(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z2{constructor(t,n="asc"){this.field=t,this.dir=n}}function FJe(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let P1e=class{};class ts extends P1e{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new jJe(t,n,r):n==="array-contains"?new VJe(t,r):n==="in"?new HJe(t,r):n==="not-in"?new qJe(t,r):n==="array-contains-any"?new WJe(t,r):new ts(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new zJe(t,r):new UJe(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Rx(n,this.value)):n!==null&&A0(this.value)===A0(n)&&this.matchesComparison(Rx(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return fn()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class cd extends P1e{constructor(t,n){super(),this.filters=t,this.op=n,this.ae=null}static create(t,n){return new cd(t,n)}matches(t){return N1e(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function N1e(e){return e.op==="and"}function O1e(e){return BJe(e)&&N1e(e)}function BJe(e){for(const t of e.filters)if(t instanceof cd)return!1;return!0}function xB(e){if(e instanceof ts)return e.field.canonicalString()+e.op.toString()+Dx(e.value);if(O1e(e))return e.filters.map(t=>xB(t)).join(",");{const t=e.filters.map(n=>xB(n)).join(",");return`${e.op}(${t})`}}function $1e(e,t){return e instanceof ts?function(r,i){return i instanceof ts&&r.op===i.op&&r.field.isEqual(i.field)&&Lf(r.value,i.value)}(e,t):e instanceof cd?function(r,i){return i instanceof cd&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&$1e(o,i.filters[a]),!0):!1}(e,t):void fn()}function M1e(e){return e instanceof ts?function(n){return`${n.field.canonicalString()} ${n.op} ${Dx(n.value)}`}(e):e instanceof cd?function(n){return n.op.toString()+" {"+n.getFilters().map(M1e).join(" ,")+"}"}(e):"Filter"}class jJe extends ts{constructor(t,n,r){super(t,n,r),this.key=nn.fromName(r.referenceValue)}matches(t){const n=nn.comparator(t.key,this.key);return this.matchesComparison(n)}}class zJe extends ts{constructor(t,n){super(t,"in",n),this.keys=L1e("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class UJe extends ts{constructor(t,n){super(t,"not-in",n),this.keys=L1e("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function L1e(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>nn.fromName(r.referenceValue))}class VJe extends ts{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return zH(n)&&j2(n.arrayValue,this.value)}}class HJe extends ts{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&j2(this.value.arrayValue,n)}}class qJe extends ts{constructor(t,n){super(t,"not-in",n)}matches(t){if(j2(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&!j2(this.value.arrayValue,n)}}class WJe extends ts{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!zH(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>j2(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GJe{constructor(t,n=null,r=[],i=[],s=null,o=null,a=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function Rre(e,t=null,n=[],r=[],i=null,s=null,o=null){return new GJe(e,t,n,r,i,s,o)}function UH(e){const t=xn(e);if(t.ue===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(r=>xB(r)).join(","),n+="|ob:",n+=t.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),dO(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>Dx(r)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>Dx(r)).join(",")),t.ue=n}return t.ue}function VH(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!FJe(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!$1e(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Ire(e.startAt,t.startAt)&&Ire(e.endAt,t.endAt)}function wB(e){return nn.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eE{constructor(t,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function YJe(e,t,n,r,i,s,o,a){return new eE(e,t,n,r,i,s,o,a)}function HH(e){return new eE(e)}function Dre(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function F1e(e){return e.collectionGroup!==null}function JT(e){const t=xn(e);if(t.ce===null){t.ce=[];const n=new Set;for(const s of t.explicitOrderBy)t.ce.push(s),n.add(s.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Ss(To.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(t).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||t.ce.push(new z2(s,r))}),n.has(To.keyField().canonicalString())||t.ce.push(new z2(To.keyField(),r))}return t.ce}function vf(e){const t=xn(e);return t.le||(t.le=KJe(t,JT(e))),t.le}function KJe(e,t){if(e.limitType==="F")return Rre(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new z2(i.field,s)});const n=e.endAt?new HP(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new HP(e.startAt.position,e.startAt.inclusive):null;return Rre(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function EB(e,t){const n=e.filters.concat([t]);return new eE(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function _B(e,t,n){return new eE(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function hO(e,t){return VH(vf(e),vf(t))&&e.limitType===t.limitType}function B1e(e){return`${UH(vf(e))}|lt:${e.limitType}`}function kv(e){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>M1e(i)).join(", ")}]`),dO(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Dx(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Dx(i)).join(",")),`Target(${r})`}(vf(e))}; limitType=${e.limitType})`}function pO(e,t){return t.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):nn.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(e,t)&&function(r,i){for(const s of JT(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(e,t)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(e,t)&&function(r,i){return!(r.startAt&&!function(o,a,u){const l=kre(o,a,u);return o.inclusive?l<=0:l<0}(r.startAt,JT(r),i)||r.endAt&&!function(o,a,u){const l=kre(o,a,u);return o.inclusive?l>=0:l>0}(r.endAt,JT(r),i))}(e,t)}function XJe(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function j1e(e){return(t,n)=>{let r=!1;for(const i of JT(e)){const s=QJe(i,t,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function QJe(e,t,n){const r=e.field.isKeyField()?nn.comparator(t.key,n.key):function(s,o,a){const u=o.data.field(s),l=a.data.field(s);return u!==null&&l!==null?Rx(u,l):fn()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return fn()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y1{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,t))return s}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),i=this.inner[r];if(i===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return void(i[s]=[t,n]);i.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(t){sg(this.inner,(n,r)=>{for(const[i,s]of r)t(i,s)})}isEmpty(){return I1e(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JJe=new Ci(nn.comparator);function Ap(){return JJe}const z1e=new Ci(nn.comparator);function iT(...e){let t=z1e;for(const n of e)t=t.insert(n.key,n);return t}function U1e(e){let t=z1e;return e.forEach((n,r)=>t=t.insert(n,r.overlayedDocument)),t}function Ay(){return ZT()}function V1e(){return ZT()}function ZT(){return new Y1(e=>e.toString(),(e,t)=>e.isEqual(t))}const ZJe=new Ci(nn.comparator),eZe=new Ss(nn.comparator);function jn(...e){let t=eZe;for(const n of e)t=t.add(n);return t}const tZe=new Ss(Vn);function nZe(){return tZe}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qH(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:VP(t)?"-0":t}}function H1e(e){return{integerValue:""+e}}function rZe(e,t){return DJe(t)?H1e(t):qH(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mO{constructor(){this._=void 0}}function iZe(e,t,n){return e instanceof U2?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&jH(s)&&(s=fO(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,t):e instanceof V2?W1e(e,t):e instanceof H2?G1e(e,t):function(i,s){const o=q1e(i,s),a=Pre(o)+Pre(i.Pe);return vB(o)&&vB(i.Pe)?H1e(a):qH(i.serializer,a)}(e,t)}function sZe(e,t,n){return e instanceof V2?W1e(e,t):e instanceof H2?G1e(e,t):n}function q1e(e,t){return e instanceof qP?function(r){return vB(r)||function(s){return!!s&&"doubleValue"in s}(r)}(t)?t:{integerValue:0}:null}class U2 extends mO{}class V2 extends mO{constructor(t){super(),this.elements=t}}function W1e(e,t){const n=Y1e(t);for(const r of e.elements)n.some(i=>Lf(i,r))||n.push(r);return{arrayValue:{values:n}}}class H2 extends mO{constructor(t){super(),this.elements=t}}function G1e(e,t){let n=Y1e(t);for(const r of e.elements)n=n.filter(i=>!Lf(i,r));return{arrayValue:{values:n}}}class qP extends mO{constructor(t,n){super(),this.serializer=t,this.Pe=n}}function Pre(e){return Ui(e.integerValue||e.doubleValue)}function Y1e(e){return zH(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oZe{constructor(t,n){this.field=t,this.transform=n}}function aZe(e,t){return e.field.isEqual(t.field)&&function(r,i){return r instanceof V2&&i instanceof V2||r instanceof H2&&i instanceof H2?Ix(r.elements,i.elements,Lf):r instanceof qP&&i instanceof qP?Lf(r.Pe,i.Pe):r instanceof U2&&i instanceof U2}(e.transform,t.transform)}class uZe{constructor(t,n){this.version=t,this.transformResults=n}}class ul{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new ul}static exists(t){return new ul(void 0,t)}static updateTime(t){return new ul(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function ZR(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class gO{}function K1e(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new WH(e.key,ul.none()):new cS(e.key,e.data,ul.none());{const n=e.data,r=bu.empty();let i=new Ss(To.comparator);for(let s of t.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new og(e.key,r,new rl(i.toArray()),ul.none())}}function lZe(e,t,n){e instanceof cS?function(i,s,o){const a=i.value.clone(),u=Ore(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(e,t,n):e instanceof og?function(i,s,o){if(!ZR(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=Ore(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(X1e(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(e,t,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,n)}function e2(e,t,n,r){return e instanceof cS?function(s,o,a,u){if(!ZR(s.precondition,o))return a;const l=s.value.clone(),c=$re(s.fieldTransforms,u,o);return l.setAll(c),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(e,t,n,r):e instanceof og?function(s,o,a,u){if(!ZR(s.precondition,o))return a;const l=$re(s.fieldTransforms,u,o),c=o.data;return c.setAll(X1e(s)),c.setAll(l),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(e,t,n,r):function(s,o,a){return ZR(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(e,t,n)}function cZe(e,t){let n=null;for(const r of e.fieldTransforms){const i=t.data.field(r.field),s=q1e(r.transform,i||null);s!=null&&(n===null&&(n=bu.empty()),n.set(r.field,s))}return n||null}function Nre(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ix(r,i,(s,o)=>aZe(s,o))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class cS extends gO{constructor(t,n,r,i=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class og extends gO{constructor(t,n,r,i,s=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function X1e(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Ore(e,t,n){const r=new Map;Tr(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,sZe(o,a,n[i]))}return r}function $re(e,t,n){const r=new Map;for(const i of e){const s=i.transform,o=n.data.field(i.field);r.set(i.field,iZe(s,o,t))}return r}class WH extends gO{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class dZe extends gO{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fZe{constructor(t,n,r,i){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(t.key)&&lZe(s,t,r[i])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=e2(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=e2(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=V1e();return this.mutations.forEach(i=>{const s=t.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const u=K1e(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(vn.min())}),r}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),jn())}isEqual(t){return this.batchId===t.batchId&&Ix(this.mutations,t.mutations,(n,r)=>Nre(n,r))&&Ix(this.baseMutations,t.baseMutations,(n,r)=>Nre(n,r))}}class GH{constructor(t,n,r,i){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(t,n,r){Tr(t.mutations.length===r.length);let i=function(){return ZJe}();const s=t.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new GH(t,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hZe{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pZe{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Zi,Qn;function mZe(e){switch(e){default:return fn();case Ze.CANCELLED:case Ze.UNKNOWN:case Ze.DEADLINE_EXCEEDED:case Ze.RESOURCE_EXHAUSTED:case Ze.INTERNAL:case Ze.UNAVAILABLE:case Ze.UNAUTHENTICATED:return!1;case Ze.INVALID_ARGUMENT:case Ze.NOT_FOUND:case Ze.ALREADY_EXISTS:case Ze.PERMISSION_DENIED:case Ze.FAILED_PRECONDITION:case Ze.ABORTED:case Ze.OUT_OF_RANGE:case Ze.UNIMPLEMENTED:case Ze.DATA_LOSS:return!0}}function Q1e(e){if(e===void 0)return Sp("GRPC error has no .code"),Ze.UNKNOWN;switch(e){case Zi.OK:return Ze.OK;case Zi.CANCELLED:return Ze.CANCELLED;case Zi.UNKNOWN:return Ze.UNKNOWN;case Zi.DEADLINE_EXCEEDED:return Ze.DEADLINE_EXCEEDED;case Zi.RESOURCE_EXHAUSTED:return Ze.RESOURCE_EXHAUSTED;case Zi.INTERNAL:return Ze.INTERNAL;case Zi.UNAVAILABLE:return Ze.UNAVAILABLE;case Zi.UNAUTHENTICATED:return Ze.UNAUTHENTICATED;case Zi.INVALID_ARGUMENT:return Ze.INVALID_ARGUMENT;case Zi.NOT_FOUND:return Ze.NOT_FOUND;case Zi.ALREADY_EXISTS:return Ze.ALREADY_EXISTS;case Zi.PERMISSION_DENIED:return Ze.PERMISSION_DENIED;case Zi.FAILED_PRECONDITION:return Ze.FAILED_PRECONDITION;case Zi.ABORTED:return Ze.ABORTED;case Zi.OUT_OF_RANGE:return Ze.OUT_OF_RANGE;case Zi.UNIMPLEMENTED:return Ze.UNIMPLEMENTED;case Zi.DATA_LOSS:return Ze.DATA_LOSS;default:return fn()}}(Qn=Zi||(Zi={}))[Qn.OK=0]="OK",Qn[Qn.CANCELLED=1]="CANCELLED",Qn[Qn.UNKNOWN=2]="UNKNOWN",Qn[Qn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qn[Qn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qn[Qn.NOT_FOUND=5]="NOT_FOUND",Qn[Qn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qn[Qn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qn[Qn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qn[Qn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qn[Qn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qn[Qn.ABORTED=10]="ABORTED",Qn[Qn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qn[Qn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qn[Qn.INTERNAL=13]="INTERNAL",Qn[Qn.UNAVAILABLE=14]="UNAVAILABLE",Qn[Qn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gZe(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yZe=new d0([4294967295,4294967295],0);function Mre(e){const t=gZe().encode(e),n=new E1e;return n.update(t),new Uint8Array(n.digest())}function Lre(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new d0([n,r],0),new d0([i,s],0)]}class YH{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new sT(`Invalid padding: ${n}`);if(r<0)throw new sT(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new sT(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new sT(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*t.length-n,this.Ie=d0.fromNumber(this.Te)}de(t,n,r){let i=t.add(n.multiply(d0.fromNumber(r)));return i.compare(yZe)===1&&(i=new d0([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ie).toNumber()}Ee(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Te===0)return!1;const n=Mre(t),[r,i]=Lre(n);for(let s=0;s<this.hashCount;s++){const o=this.de(r,i,s);if(!this.Ee(o))return!1}return!0}static create(t,n,r){const i=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),o=new YH(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(t){if(this.Te===0)return;const n=Mre(t),[r,i]=Lre(n);for(let s=0;s<this.hashCount;s++){const o=this.de(r,i,s);this.Ae(o)}}Ae(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class sT extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yO{constructor(t,n,r,i,s){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const i=new Map;return i.set(t,dS.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new yO(vn.min(),i,new Ci(Vn),Ap(),jn())}}class dS{constructor(t,n,r,i,s){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new dS(r,n,jn(),jn(),jn())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eD{constructor(t,n,r,i){this.Re=t,this.removedTargetIds=n,this.key=r,this.Ve=i}}class J1e{constructor(t,n){this.targetId=t,this.me=n}}class Z1e{constructor(t,n,r=Mo.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Fre{constructor(){this.fe=0,this.ge=Bre(),this.pe=Mo.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}ve(){let t=jn(),n=jn(),r=jn();return this.ge.forEach((i,s)=>{switch(s){case 0:t=t.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:fn()}}),new dS(this.pe,this.ye,t,n,r)}Ce(){this.we=!1,this.ge=Bre()}Fe(t,n){this.we=!0,this.ge=this.ge.insert(t,n)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,Tr(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class bZe{constructor(t){this.Be=t,this.Le=new Map,this.ke=Ap(),this.qe=Yk(),this.Qe=Yk(),this.Ke=new Ci(Vn)}$e(t){for(const n of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.Ue(n,t.Ve):this.We(n,t.key,t.Ve);for(const n of t.removedTargetIds)this.We(n,t.key,t.Ve)}Ge(t){this.forEachTarget(t,n=>{const r=this.ze(n);switch(t.state){case 0:this.je(n)&&r.De(t.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(t.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.je(n)&&(r.Ne(),r.De(t.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.De(t.resumeToken));break;default:fn()}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.Le.forEach((r,i)=>{this.je(i)&&n(i)})}Je(t){const n=t.targetId,r=t.me.count,i=this.Ye(n);if(i){const s=i.target;if(wB(s))if(r===0){const o=new nn(s.path);this.We(n,o,ia.newNoDocument(o,vn.min()))}else Tr(r===1);else{const o=this.Ze(n);if(o!==r){const a=this.Xe(t),u=a?this.et(a,t,o):1;if(u!==0){this.He(n);const l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,l)}}}}}Xe(t){const n=t.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=S0(r).toUint8Array()}catch(u){if(u instanceof R1e)return L2("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new YH(o,i,s)}catch(u){return L2(u instanceof sT?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Te===0?null:a}et(t,n,r){return n.me.count===r-this.rt(t,n.targetId)?0:2}rt(t,n){const r=this.Be.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Be.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;t.mightContain(a)||(this.We(n,s,null),i++)}),i}it(t){const n=new Map;this.Le.forEach((s,o)=>{const a=this.Ye(o);if(a){if(s.current&&wB(a.target)){const u=new nn(a.target.path);this.st(u).has(o)||this.ot(o,u)||this.We(o,u,ia.newNoDocument(u,t))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=jn();this.Qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const l=this.Ye(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(t));const i=new yO(t,n,this.Ke,this.ke,r);return this.ke=Ap(),this.qe=Yk(),this.Qe=Yk(),this.Ke=new Ci(Vn),i}Ue(t,n){if(!this.je(t))return;const r=this.ot(t,n.key)?2:0;this.ze(t).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(t)),this.Qe=this.Qe.insert(n.key,this._t(n.key).add(t))}We(t,n,r){if(!this.je(t))return;const i=this.ze(t);this.ot(t,n)?i.Fe(n,1):i.Me(n),this.Qe=this.Qe.insert(n,this._t(n).delete(t)),this.Qe=this.Qe.insert(n,this._t(n).add(t)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(t){this.Le.delete(t)}Ze(t){const n=this.ze(t).ve();return this.Be.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}xe(t){this.ze(t).xe()}ze(t){let n=this.Le.get(t);return n||(n=new Fre,this.Le.set(t,n)),n}_t(t){let n=this.Qe.get(t);return n||(n=new Ss(Vn),this.Qe=this.Qe.insert(t,n)),n}st(t){let n=this.qe.get(t);return n||(n=new Ss(Vn),this.qe=this.qe.insert(t,n)),n}je(t){const n=this.Ye(t)!==null;return n||Lt("WatchChangeAggregator","Detected inactive target",t),n}Ye(t){const n=this.Le.get(t);return n&&n.Se?null:this.Be.ut(t)}He(t){this.Le.set(t,new Fre),this.Be.getRemoteKeysForTarget(t).forEach(n=>{this.We(t,n,null)})}ot(t,n){return this.Be.getRemoteKeysForTarget(t).has(n)}}function Yk(){return new Ci(nn.comparator)}function Bre(){return new Ci(nn.comparator)}const vZe={asc:"ASCENDING",desc:"DESCENDING"},xZe={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},wZe={and:"AND",or:"OR"};class EZe{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function TB(e,t){return e.useProto3Json||dO(t)?t:{value:t}}function WP(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function ebe(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function _Ze(e,t){return WP(e,t.toTimestamp())}function xf(e){return Tr(!!e),vn.fromTimestamp(function(n){const r=C0(n);return new Cs(r.seconds,r.nanos)}(e))}function KH(e,t){return CB(e,t).canonicalString()}function CB(e,t){const n=function(i){return new ri(["projects",i.projectId,"databases",i.database])}(e).child("documents");return t===void 0?n:n.child(t)}function tbe(e){const t=ri.fromString(e);return Tr(obe(t)),t}function SB(e,t){return KH(e.databaseId,t.path)}function q8(e,t){const n=tbe(t);if(n.get(1)!==e.databaseId.projectId)throw new Nt(Ze.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Nt(Ze.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new nn(rbe(n))}function nbe(e,t){return KH(e.databaseId,t)}function TZe(e){const t=tbe(e);return t.length===4?ri.emptyPath():rbe(t)}function AB(e){return new ri(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function rbe(e){return Tr(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function jre(e,t,n){return{name:SB(e,t),fields:n.value.mapValue.fields}}function CZe(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:fn()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(l,c){return l.useProto3Json?(Tr(c===void 0||typeof c=="string"),Mo.fromBase64String(c||"")):(Tr(c===void 0||c instanceof Buffer||c instanceof Uint8Array),Mo.fromUint8Array(c||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(l){const c=l.code===void 0?Ze.UNKNOWN:Q1e(l.code);return new Nt(c,l.message||"")}(o);n=new Z1e(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=q8(e,r.document.name),s=xf(r.document.updateTime),o=r.document.createTime?xf(r.document.createTime):vn.min(),a=new bu({mapValue:{fields:r.document.fields}}),u=ia.newFoundDocument(i,s,o,a),l=r.targetIds||[],c=r.removedTargetIds||[];n=new eD(l,c,u.key,u)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=q8(e,r.document),s=r.readTime?xf(r.readTime):vn.min(),o=ia.newNoDocument(i,s),a=r.removedTargetIds||[];n=new eD([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=q8(e,r.document),s=r.removedTargetIds||[];n=new eD([],s,i,null)}else{if(!("filter"in t))return fn();{t.filter;const r=t.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new pZe(i,s),a=r.targetId;n=new J1e(a,o)}}return n}function SZe(e,t){let n;if(t instanceof cS)n={update:jre(e,t.key,t.value)};else if(t instanceof WH)n={delete:SB(e,t.key)};else if(t instanceof og)n={update:jre(e,t.key,t.data),updateMask:$Ze(t.fieldMask)};else{if(!(t instanceof dZe))return fn();n={verify:SB(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof U2)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof V2)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof H2)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof qP)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw fn()}(0,r))),t.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:_Ze(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:fn()}(e,t.precondition)),n}function AZe(e,t){return e&&e.length>0?(Tr(t!==void 0),e.map(n=>function(i,s){let o=i.updateTime?xf(i.updateTime):xf(s);return o.isEqual(vn.min())&&(o=xf(s)),new uZe(o,i.transformResults||[])}(n,t))):[]}function kZe(e,t){return{documents:[nbe(e,t.path)]}}function IZe(e,t){const n={structuredQuery:{}},r=t.path;let i;t.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=nbe(e,i);const s=function(l){if(l.length!==0)return sbe(cd.create(l,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(l){if(l.length!==0)return l.map(c=>function(f){return{field:Iv(f.field),direction:PZe(f.dir)}}(c))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=TB(e,t.limit);return a!==null&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(t.endAt)),{ct:n,parent:i}}function RZe(e){let t=TZe(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Tr(r===1);const c=n.from[0];c.allDescendants?i=c.collectionId:t=t.child(c.collectionId)}let s=[];n.where&&(s=function(d){const f=ibe(d);return f instanceof cd&&O1e(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(f=>function(p){return new z2(Rv(p.field),function(y){switch(y){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(d){let f;return f=typeof d=="object"?d.value:d,dO(f)?null:f}(n.limit));let u=null;n.startAt&&(u=function(d){const f=!!d.before,h=d.values||[];return new HP(h,f)}(n.startAt));let l=null;return n.endAt&&(l=function(d){const f=!d.before,h=d.values||[];return new HP(h,f)}(n.endAt)),YJe(t,i,o,s,a,"F",u,l)}function DZe(e,t){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return fn()}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function ibe(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Rv(n.unaryFilter.field);return ts.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Rv(n.unaryFilter.field);return ts.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Rv(n.unaryFilter.field);return ts.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Rv(n.unaryFilter.field);return ts.create(o,"!=",{nullValue:"NULL_VALUE"});default:return fn()}}(e):e.fieldFilter!==void 0?function(n){return ts.create(Rv(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return fn()}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return cd.create(n.compositeFilter.filters.map(r=>ibe(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return fn()}}(n.compositeFilter.op))}(e):fn()}function PZe(e){return vZe[e]}function NZe(e){return xZe[e]}function OZe(e){return wZe[e]}function Iv(e){return{fieldPath:e.canonicalString()}}function Rv(e){return To.fromServerFormat(e.fieldPath)}function sbe(e){return e instanceof ts?function(n){if(n.op==="=="){if(Are(n.value))return{unaryFilter:{field:Iv(n.field),op:"IS_NAN"}};if(Sre(n.value))return{unaryFilter:{field:Iv(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Are(n.value))return{unaryFilter:{field:Iv(n.field),op:"IS_NOT_NAN"}};if(Sre(n.value))return{unaryFilter:{field:Iv(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Iv(n.field),op:NZe(n.op),value:n.value}}}(e):e instanceof cd?function(n){const r=n.getFilters().map(i=>sbe(i));return r.length===1?r[0]:{compositeFilter:{op:OZe(n.op),filters:r}}}(e):fn()}function $Ze(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function obe(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm{constructor(t,n,r,i,s=vn.min(),o=vn.min(),a=Mo.EMPTY_BYTE_STRING,u=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(t){return new Qm(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Qm(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Qm(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Qm(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MZe{constructor(t){this.ht=t}}function LZe(e){const t=RZe({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?_B(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FZe{constructor(){this.ln=new BZe}addToCollectionParentIndex(t,n){return this.ln.add(n),et.resolve()}getCollectionParents(t,n){return et.resolve(this.ln.getEntries(n))}addFieldIndex(t,n){return et.resolve()}deleteFieldIndex(t,n){return et.resolve()}deleteAllFieldIndexes(t){return et.resolve()}createTargetIndexes(t,n){return et.resolve()}getDocumentsMatchingTarget(t,n){return et.resolve(null)}getIndexType(t,n){return et.resolve(0)}getFieldIndexes(t,n){return et.resolve([])}getNextCollectionGroupToUpdate(t){return et.resolve(null)}getMinOffset(t,n){return et.resolve(T0.min())}getMinOffsetFromCollectionGroup(t,n){return et.resolve(T0.min())}updateCollectionGroup(t,n,r){return et.resolve()}updateIndexEntries(t,n){return et.resolve()}}class BZe{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n]||new Ss(ri.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(t){return(this.index[t]||new Ss(ri.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zre={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class hu{static withCacheSize(t){return new hu(t,hu.DEFAULT_COLLECTION_PERCENTILE,hu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */hu.DEFAULT_COLLECTION_PERCENTILE=10,hu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,hu.DEFAULT=new hu(41943040,hu.DEFAULT_COLLECTION_PERCENTILE,hu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),hu.DISABLED=new hu(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Px{constructor(t){this.kn=t}next(){return this.kn+=2,this.kn}static qn(){return new Px(0)}static Qn(){return new Px(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ure([e,t],[n,r]){const i=Vn(e,n);return i===0?Vn(t,r):i}class jZe{constructor(t){this.Gn=t,this.buffer=new Ss(Ure),this.zn=0}jn(){return++this.zn}Hn(t){const n=[t,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Ure(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class zZe{constructor(t,n,r){this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(t){Lt("LruGarbageCollector",`Garbage collection scheduled in ${t}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Zw(n)?Lt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await Jw(n)}await this.Yn(3e5)})}}class UZe{constructor(t,n){this.Zn=t,this.params=n}calculateTargetCount(t,n){return this.Zn.Xn(t).next(r=>Math.floor(n/100*r))}nthSequenceNumber(t,n){if(n===0)return et.resolve(cO.oe);const r=new jZe(n);return this.Zn.forEachTarget(t,i=>r.Hn(i.sequenceNumber)).next(()=>this.Zn.er(t,i=>r.Hn(i))).next(()=>r.maxValue)}removeTargets(t,n,r){return this.Zn.removeTargets(t,n,r)}removeOrphanedDocuments(t,n){return this.Zn.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(Lt("LruGarbageCollector","Garbage collection skipped; disabled"),et.resolve(zre)):this.getCacheSize(t).next(r=>r<this.params.cacheSizeCollectionThreshold?(Lt("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),zre):this.tr(t,n))}getCacheSize(t){return this.Zn.getCacheSize(t)}tr(t,n){let r,i,s,o,a,u,l;const c=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(Lt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),i=this.params.maximumSequenceNumbersToCollect):i=d,o=Date.now(),this.nthSequenceNumber(t,i))).next(d=>(r=d,a=Date.now(),this.removeTargets(t,r,n))).next(d=>(s=d,u=Date.now(),this.removeOrphanedDocuments(t,r))).next(d=>(l=Date.now(),Av()<=Bn.DEBUG&&Lt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-c}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(u-a)+`ms
	Removed ${d} documents in `+(l-u)+`ms
Total Duration: ${l-c}ms`),et.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:d})))}}function VZe(e,t){return new UZe(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HZe{constructor(){this.changes=new Y1(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,ia.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?et.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qZe{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WZe{constructor(t,n,r,i){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(t,n))).next(i=>(r!==null&&e2(r.mutation,i,rl.empty(),Cs.now()),i))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.getLocalViewOfDocuments(t,r,jn()).next(()=>r))}getLocalViewOfDocuments(t,n,r=jn()){const i=Ay();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,r).next(s=>{let o=iT();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(t,n){const r=Ay();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,jn()))}populateOverlays(t,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(t,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(t,n,r,i){let s=Ap();const o=ZT(),a=function(){return ZT()}();return n.forEach((u,l)=>{const c=r.get(l.key);i.has(l.key)&&(c===void 0||c.mutation instanceof og)?s=s.insert(l.key,l):c!==void 0?(o.set(l.key,c.mutation.getFieldMask()),e2(c.mutation,l,c.mutation.getFieldMask(),Cs.now())):o.set(l.key,rl.empty())}),this.recalculateAndSaveOverlays(t,s).next(u=>(u.forEach((l,c)=>o.set(l,c)),n.forEach((l,c)=>{var d;return a.set(l,new qZe(c,(d=o.get(l))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(t,n){const r=ZT();let i=new Ci((o,a)=>o-a),s=jn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const l=n.get(u);if(l===null)return;let c=r.get(u)||rl.empty();c=a.applyToLocalView(l,c),r.set(u,c);const d=(i.get(a.batchId)||jn()).add(u);i=i.insert(a.batchId,d)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),l=u.key,c=u.value,d=V1e();c.forEach(f=>{if(!s.has(f)){const h=K1e(n.get(f),r.get(f));h!==null&&d.set(f,h),s=s.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(t,l,d))}return et.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,n,r,i){return function(o){return nn.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):F1e(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,i):this.getDocumentsMatchingCollectionQuery(t,n,r,i)}getNextDocuments(t,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,i-s.size):et.resolve(Ay());let a=-1,u=s;return o.next(l=>et.forEach(l,(c,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(c)?et.resolve():this.remoteDocumentCache.getEntry(t,c).next(f=>{u=u.insert(c,f)}))).next(()=>this.populateOverlays(t,l,s)).next(()=>this.computeViews(t,u,l,jn())).next(c=>({batchId:a,changes:U1e(c)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new nn(n)).next(r=>{let i=iT();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(t,n,r,i){const s=n.collectionGroup;let o=iT();return this.indexManager.getCollectionParents(t,s).next(a=>et.forEach(a,u=>{const l=function(d,f){return new eE(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(t,l,r,i).next(c=>{c.forEach((d,f)=>{o=o.insert(d,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,s,i))).next(o=>{s.forEach((u,l)=>{const c=l.getKey();o.get(c)===null&&(o=o.insert(c,ia.newInvalidDocument(c)))});let a=iT();return o.forEach((u,l)=>{const c=s.get(u);c!==void 0&&e2(c.mutation,l,rl.empty(),Cs.now()),pO(n,l)&&(a=a.insert(u,l))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GZe{constructor(t){this.serializer=t,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(t,n){return et.resolve(this.Tr.get(n))}saveBundleMetadata(t,n){return this.Tr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:xf(i.createTime)}}(n)),et.resolve()}getNamedQuery(t,n){return et.resolve(this.Ir.get(n))}saveNamedQuery(t,n){return this.Ir.set(n.name,function(i){return{name:i.name,query:LZe(i.bundledQuery),readTime:xf(i.readTime)}}(n)),et.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YZe{constructor(){this.overlays=new Ci(nn.comparator),this.dr=new Map}getOverlay(t,n){return et.resolve(this.overlays.get(n))}getOverlays(t,n){const r=Ay();return et.forEach(n,i=>this.getOverlay(t,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(t,n,r){return r.forEach((i,s)=>{this.Tt(t,n,s)}),et.resolve()}removeOverlaysForBatchId(t,n,r){const i=this.dr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.dr.delete(r)),et.resolve()}getOverlaysForCollection(t,n,r){const i=Ay(),s=n.length+1,o=new nn(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return et.resolve(i)}getOverlaysForCollectionGroup(t,n,r,i){let s=new Ci((l,c)=>l-c);const o=this.overlays.getIterator();for(;o.hasNext();){const l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let c=s.get(l.largestBatchId);c===null&&(c=Ay(),s=s.insert(l.largestBatchId,c)),c.set(l.getKey(),l)}}const a=Ay(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,c)=>a.set(l,c)),!(a.size()>=i)););return et.resolve(a)}Tt(t,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.dr.get(i.largestBatchId).delete(r.key);this.dr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new hZe(n,r));let s=this.dr.get(n);s===void 0&&(s=jn(),this.dr.set(n,s)),this.dr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KZe{constructor(){this.sessionToken=Mo.EMPTY_BYTE_STRING}getSessionToken(t){return et.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,et.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XH{constructor(){this.Er=new Ss(qs.Ar),this.Rr=new Ss(qs.Vr)}isEmpty(){return this.Er.isEmpty()}addReference(t,n){const r=new qs(t,n);this.Er=this.Er.add(r),this.Rr=this.Rr.add(r)}mr(t,n){t.forEach(r=>this.addReference(r,n))}removeReference(t,n){this.gr(new qs(t,n))}pr(t,n){t.forEach(r=>this.removeReference(r,n))}yr(t){const n=new nn(new ri([])),r=new qs(n,t),i=new qs(n,t+1),s=[];return this.Rr.forEachInRange([r,i],o=>{this.gr(o),s.push(o.key)}),s}wr(){this.Er.forEach(t=>this.gr(t))}gr(t){this.Er=this.Er.delete(t),this.Rr=this.Rr.delete(t)}Sr(t){const n=new nn(new ri([])),r=new qs(n,t),i=new qs(n,t+1);let s=jn();return this.Rr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(t){const n=new qs(t,0),r=this.Er.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class qs{constructor(t,n){this.key=t,this.br=n}static Ar(t,n){return nn.comparator(t.key,n.key)||Vn(t.br,n.br)}static Vr(t,n){return Vn(t.br,n.br)||nn.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XZe{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.Dr=1,this.vr=new Ss(qs.Ar)}checkEmpty(t){return et.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,i){const s=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new fZe(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.vr=this.vr.add(new qs(a.key,s)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return et.resolve(o)}lookupMutationBatch(t,n){return et.resolve(this.Cr(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,i=this.Fr(r),s=i<0?0:i;return et.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return et.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(t){return et.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new qs(n,0),i=new qs(n,Number.POSITIVE_INFINITY),s=[];return this.vr.forEachInRange([r,i],o=>{const a=this.Cr(o.br);s.push(a)}),et.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new Ss(Vn);return n.forEach(i=>{const s=new qs(i,0),o=new qs(i,Number.POSITIVE_INFINITY);this.vr.forEachInRange([s,o],a=>{r=r.add(a.br)})}),et.resolve(this.Mr(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,i=r.length+1;let s=r;nn.isDocumentKey(s)||(s=s.child(""));const o=new qs(new nn(s),0);let a=new Ss(Vn);return this.vr.forEachWhile(u=>{const l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.br)),!0)},o),et.resolve(this.Mr(a))}Mr(t){const n=[];return t.forEach(r=>{const i=this.Cr(r);i!==null&&n.push(i)}),n}removeMutationBatch(t,n){Tr(this.Or(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.vr;return et.forEach(n.mutations,i=>{const s=new qs(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.vr=r})}Bn(t){}containsKey(t,n){const r=new qs(n,0),i=this.vr.firstAfterOrEqual(r);return et.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,et.resolve()}Or(t,n){return this.Fr(t)}Fr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Cr(t){const n=this.Fr(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QZe{constructor(t){this.Nr=t,this.docs=function(){return new Ci(nn.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Nr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return et.resolve(r?r.document.mutableCopy():ia.newInvalidDocument(n))}getEntries(t,n){let r=Ap();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():ia.newInvalidDocument(i))}),et.resolve(r)}getDocumentsMatchingQuery(t,n,r,i){let s=Ap();const o=n.path,a=new nn(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:l,value:{document:c}}=u.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||AJe(SJe(c),r)<=0||(i.has(c.key)||pO(n,c))&&(s=s.insert(c.key,c.mutableCopy()))}return et.resolve(s)}getAllFromCollectionGroup(t,n,r,i){fn()}Br(t,n){return et.forEach(this.docs,r=>n(r))}newChangeBuffer(t){return new JZe(this)}getSize(t){return et.resolve(this.size)}}class JZe extends HZe{constructor(t){super(),this.hr=t}applyChanges(t){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.hr.addEntry(t,i)):this.hr.removeEntry(r)}),et.waitFor(n)}getFromCache(t,n){return this.hr.getEntry(t,n)}getAllFromCache(t,n){return this.hr.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZZe{constructor(t){this.persistence=t,this.Lr=new Y1(n=>UH(n),VH),this.lastRemoteSnapshotVersion=vn.min(),this.highestTargetId=0,this.kr=0,this.qr=new XH,this.targetCount=0,this.Qr=Px.qn()}forEachTarget(t,n){return this.Lr.forEach((r,i)=>n(i)),et.resolve()}getLastRemoteSnapshotVersion(t){return et.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return et.resolve(this.kr)}allocateTargetId(t){return this.highestTargetId=this.Qr.next(),et.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.kr&&(this.kr=n),et.resolve()}Un(t){this.Lr.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.Qr=new Px(n),this.highestTargetId=n),t.sequenceNumber>this.kr&&(this.kr=t.sequenceNumber)}addTargetData(t,n){return this.Un(n),this.targetCount+=1,et.resolve()}updateTargetData(t,n){return this.Un(n),et.resolve()}removeTargetData(t,n){return this.Lr.delete(n.target),this.qr.yr(n.targetId),this.targetCount-=1,et.resolve()}removeTargets(t,n,r){let i=0;const s=[];return this.Lr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Lr.delete(o),s.push(this.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),et.waitFor(s).next(()=>i)}getTargetCount(t){return et.resolve(this.targetCount)}getTargetData(t,n){const r=this.Lr.get(n)||null;return et.resolve(r)}addMatchingKeys(t,n,r){return this.qr.mr(n,r),et.resolve()}removeMatchingKeys(t,n,r){this.qr.pr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(t,o))}),et.waitFor(s)}removeMatchingKeysForTargetId(t,n){return this.qr.yr(n),et.resolve()}getMatchingKeysForTargetId(t,n){const r=this.qr.Sr(n);return et.resolve(r)}containsKey(t,n){return et.resolve(this.qr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class abe{constructor(t,n){this.Kr={},this.overlays={},this.$r=new cO(0),this.Ur=!1,this.Ur=!0,this.Wr=new KZe,this.referenceDelegate=t(this),this.Gr=new ZZe(this),this.indexManager=new FZe,this.remoteDocumentCache=function(i){return new QZe(i)}(r=>this.referenceDelegate.zr(r)),this.serializer=new MZe(n),this.jr=new GZe(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new YZe,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.Kr[t.toKey()];return r||(r=new XZe(n,this.referenceDelegate),this.Kr[t.toKey()]=r),r}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(t,n,r){Lt("MemoryPersistence","Starting transaction:",t);const i=new eet(this.$r.next());return this.referenceDelegate.Hr(),r(i).next(s=>this.referenceDelegate.Jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Yr(t,n){return et.or(Object.values(this.Kr).map(r=>()=>r.containsKey(t,n)))}}class eet extends IJe{constructor(t){super(),this.currentSequenceNumber=t}}class QH{constructor(t){this.persistence=t,this.Zr=new XH,this.Xr=null}static ei(t){return new QH(t)}get ti(){if(this.Xr)return this.Xr;throw fn()}addReference(t,n,r){return this.Zr.addReference(r,n),this.ti.delete(r.toString()),et.resolve()}removeReference(t,n,r){return this.Zr.removeReference(r,n),this.ti.add(r.toString()),et.resolve()}markPotentiallyOrphaned(t,n){return this.ti.add(n.toString()),et.resolve()}removeTarget(t,n){this.Zr.yr(n.targetId).forEach(i=>this.ti.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next(i=>{i.forEach(s=>this.ti.add(s.toString()))}).next(()=>r.removeTargetData(t,n))}Hr(){this.Xr=new Set}Jr(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return et.forEach(this.ti,r=>{const i=nn.fromPath(r);return this.ni(t,i).next(s=>{s||n.removeEntry(i,vn.min())})}).next(()=>(this.Xr=null,n.apply(t)))}updateLimboDocument(t,n){return this.ni(t,n).next(r=>{r?this.ti.delete(n.toString()):this.ti.add(n.toString())})}zr(t){return 0}ni(t,n){return et.or([()=>et.resolve(this.Zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Yr(t,n)])}}class GP{constructor(t,n){this.persistence=t,this.ri=new Y1(r=>PJe(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=VZe(this,n)}static ei(t,n){return new GP(t,n)}Hr(){}Jr(t){return et.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}Xn(t){const n=this.nr(t);return this.persistence.getTargetCache().getTargetCount(t).next(r=>n.next(i=>r+i))}nr(t){let n=0;return this.er(t,r=>{n++}).next(()=>n)}er(t,n){return et.forEach(this.ri,(r,i)=>this.ir(t,r,i).next(s=>s?et.resolve():n(i)))}removeTargets(t,n,r){return this.persistence.getTargetCache().removeTargets(t,n,r)}removeOrphanedDocuments(t,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.Br(t,o=>this.ir(t,o,n).next(a=>{a||(r++,s.removeEntry(o,vn.min()))})).next(()=>s.apply(t)).next(()=>r)}markPotentiallyOrphaned(t,n){return this.ri.set(n,t.currentSequenceNumber),et.resolve()}removeTarget(t,n){const r=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,r)}addReference(t,n,r){return this.ri.set(r,t.currentSequenceNumber),et.resolve()}removeReference(t,n,r){return this.ri.set(r,t.currentSequenceNumber),et.resolve()}updateLimboDocument(t,n){return this.ri.set(n,t.currentSequenceNumber),et.resolve()}zr(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=QR(t.data.value)),n}ir(t,n,r){return et.or([()=>this.persistence.Yr(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const i=this.ri.get(n);return et.resolve(i!==void 0&&i>r)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JH{constructor(t,n,r,i){this.targetId=t,this.fromCache=n,this.Wi=r,this.Gi=i}static zi(t,n){let r=jn(),i=jn();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new JH(t,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tet{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class net{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return RKe()?8:RJe(ma())>0?6:4}()}initialize(t,n){this.Zi=t,this.indexManager=n,this.ji=!0}getDocumentsMatchingQuery(t,n,r,i){const s={result:null};return this.Xi(t,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.es(t,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new tet;return this.ts(t,n,o).next(a=>{if(s.result=a,this.Hi)return this.ns(t,n,o,a.size)})}).next(()=>s.result)}ns(t,n,r,i){return r.documentReadCount<this.Ji?(Av()<=Bn.DEBUG&&Lt("QueryEngine","SDK will not create cache indexes for query:",kv(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),et.resolve()):(Av()<=Bn.DEBUG&&Lt("QueryEngine","Query:",kv(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Yi*i?(Av()<=Bn.DEBUG&&Lt("QueryEngine","The SDK decides to create cache indexes for query:",kv(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,vf(n))):et.resolve())}Xi(t,n){if(Dre(n))return et.resolve(null);let r=vf(n);return this.indexManager.getIndexType(t,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=_B(n,null,"F"),r=vf(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next(s=>{const o=jn(...s);return this.Zi.getDocuments(t,o).next(a=>this.indexManager.getMinOffset(t,r).next(u=>{const l=this.rs(n,a);return this.ss(n,l,o,u.readTime)?this.Xi(t,_B(n,null,"F")):this.os(t,l,n,u)}))})))}es(t,n,r,i){return Dre(n)||i.isEqual(vn.min())?et.resolve(null):this.Zi.getDocuments(t,r).next(s=>{const o=this.rs(n,s);return this.ss(n,o,r,i)?et.resolve(null):(Av()<=Bn.DEBUG&&Lt("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),kv(n)),this.os(t,o,n,CJe(i,-1)).next(a=>a))})}rs(t,n){let r=new Ss(j1e(t));return n.forEach((i,s)=>{pO(t,s)&&(r=r.add(s))}),r}ss(t,n,r,i){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const s=t.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}ts(t,n,r){return Av()<=Bn.DEBUG&&Lt("QueryEngine","Using full collection scan to execute query:",kv(n)),this.Zi.getDocumentsMatchingQuery(t,n,T0.min(),r)}os(t,n,r,i){return this.Zi.getDocumentsMatchingQuery(t,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ret{constructor(t,n,r,i){this.persistence=t,this._s=n,this.serializer=i,this.us=new Ci(Vn),this.cs=new Y1(s=>UH(s),VH),this.ls=new Map,this.hs=t.getRemoteDocumentCache(),this.Gr=t.getTargetCache(),this.jr=t.getBundleCache(),this.Ps(r)}Ps(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new WZe(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.us))}}function iet(e,t,n,r){return new ret(e,t,n,r)}async function ube(e,t){const n=xn(e);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Ps(t),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=jn();for(const l of i){o.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}for(const l of s){a.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}return n.localDocuments.getDocuments(r,u).next(l=>({Ts:l,removedBatchIds:o,addedBatchIds:a}))})})}function set(e,t){const n=xn(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=t.batch.keys(),s=n.hs.newChangeBuffer({trackRemovals:!0});return function(a,u,l,c){const d=l.batch,f=d.keys();let h=et.resolve();return f.forEach(p=>{h=h.next(()=>c.getEntry(u,p)).next(m=>{const y=l.docVersions.get(p);Tr(y!==null),m.version.compareTo(y)<0&&(d.applyToRemoteDocument(m,l),m.isValidDocument()&&(m.setReadTime(l.commitVersion),c.addEntry(m)))})}),h.next(()=>a.mutationQueue.removeMutationBatch(u,d))}(n,r,t,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=jn();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(t))).next(()=>n.localDocuments.getDocuments(r,i))})}function lbe(e){const t=xn(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Gr.getLastRemoteSnapshotVersion(n))}function oet(e,t){const n=xn(e),r=t.snapshotVersion;let i=n.us;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.hs.newChangeBuffer({trackRemovals:!0});i=n.us;const a=[];t.targetChanges.forEach((c,d)=>{const f=i.get(d);if(!f)return;a.push(n.Gr.removeMatchingKeys(s,c.removedDocuments,d).next(()=>n.Gr.addMatchingKeys(s,c.addedDocuments,d)));let h=f.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(d)!==null?h=h.withResumeToken(Mo.EMPTY_BYTE_STRING,vn.min()).withLastLimboFreeSnapshotVersion(vn.min()):c.resumeToken.approximateByteSize()>0&&(h=h.withResumeToken(c.resumeToken,r)),i=i.insert(d,h),function(m,y,v){return m.resumeToken.approximateByteSize()===0||y.snapshotVersion.toMicroseconds()-m.snapshotVersion.toMicroseconds()>=3e8?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(f,h,c)&&a.push(n.Gr.updateTargetData(s,h))});let u=Ap(),l=jn();if(t.documentUpdates.forEach(c=>{t.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,c))}),a.push(aet(s,o,t.documentUpdates).next(c=>{u=c.Is,l=c.ds})),!r.isEqual(vn.min())){const c=n.Gr.getLastRemoteSnapshotVersion(s).next(d=>n.Gr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(c)}return et.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,l)).next(()=>u)}).then(s=>(n.us=i,s))}function aet(e,t,n){let r=jn(),i=jn();return n.forEach(s=>r=r.add(s)),t.getEntries(e,r).next(s=>{let o=Ap();return n.forEach((a,u)=>{const l=s.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(vn.min())?(t.removeEntry(a,u.readTime),o=o.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(t.addEntry(u),o=o.insert(a,u)):Lt("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Is:o,ds:i}})}function uet(e,t){const n=xn(e);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function cet(e,t){const n=xn(e);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Gr.getTargetData(r,t).next(s=>s?(i=s,et.resolve(i)):n.Gr.allocateTargetId(r).next(o=>(i=new Qm(t,o,"TargetPurposeListen",r.currentSequenceNumber),n.Gr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.us.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.us=n.us.insert(r.targetId,r),n.cs.set(t,r.targetId)),r})}async function kB(e,t,n){const r=xn(e),i=r.us.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Zw(o))throw o;Lt("LocalStore",`Failed to update sequence numbers for target ${t}: ${o}`)}r.us=r.us.remove(t),r.cs.delete(i.target)}function Vre(e,t,n){const r=xn(e);let i=vn.min(),s=jn();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,l,c){const d=xn(u),f=d.cs.get(c);return f!==void 0?et.resolve(d.us.get(f)):d.Gr.getTargetData(l,c)}(r,o,vf(t)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Gr.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r._s.getDocumentsMatchingQuery(o,t,n?i:vn.min(),n?s:jn())).next(a=>(det(r,XJe(t),a),{documents:a,Es:s})))}function det(e,t,n){let r=e.ls.get(t)||vn.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),e.ls.set(t,r)}class Hre{constructor(){this.activeTargetIds=nZe()}ps(t){this.activeTargetIds=this.activeTargetIds.add(t)}ys(t){this.activeTargetIds=this.activeTargetIds.delete(t)}gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class fet{constructor(){this._o=new Hre,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t,n=!0){return n&&this._o.ps(t),this.ao[t]||"not-current"}updateQueryState(t,n,r){this.ao[t]=n}removeLocalQueryTarget(t){this._o.ys(t)}isLocalQueryTarget(t){return this._o.activeTargetIds.has(t)}clearQueryState(t){delete this.ao[t]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(t){return this._o.activeTargetIds.has(t)}start(){return this._o=new Hre,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class het{uo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qre{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(t){this.To.push(t)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){Lt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.To)t(0)}Po(){Lt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.To)t(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kk=null;function W8(){return Kk===null?Kk=function(){return 268435456+Math.round(2147483648*Math.random())}():Kk++,"0x"+Kk.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pet={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class met{constructor(t){this.Eo=t.Eo,this.Ao=t.Ao}Ro(t){this.Vo=t}mo(t){this.fo=t}po(t){this.yo=t}onMessage(t){this.wo=t}close(){this.Ao()}send(t){this.Eo(t)}So(){this.Vo()}bo(){this.fo()}Do(t){this.yo(t)}vo(t){this.wo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Go="WebChannelConnection";class get extends class{get Co(){return!1}constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Fo=r+"://"+n.host,this.Mo=`projects/${i}/databases/${s}`,this.xo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Oo(n,r,i,s,o){const a=W8(),u=this.No(n,r.toUriEncodedString());Lt("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);const l={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Bo(l,s,o),this.Lo(n,u,l,i).then(c=>(Lt("RestConnection",`Received RPC '${n}' ${a}: `,c),c),c=>{throw L2("RestConnection",`RPC '${n}' ${a} failed with error: `,c,"url: ",u,"request:",i),c})}ko(n,r,i,s,o,a){return this.Oo(n,r,i,s,o)}Bo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Qw}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}No(n,r){const i=pet[n];return`${this.Fo}/v1/${r}:${i}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Lo(t,n,r,i){const s=W8();return new Promise((o,a)=>{const u=new _1e;u.setWithCredentials(!0),u.listenOnce(T1e.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case XR.NO_ERROR:const c=u.getResponseJson();Lt(Go,`XHR for RPC '${t}' ${s} received:`,JSON.stringify(c)),o(c);break;case XR.TIMEOUT:Lt(Go,`RPC '${t}' ${s} timed out`),a(new Nt(Ze.DEADLINE_EXCEEDED,"Request time out"));break;case XR.HTTP_ERROR:const d=u.getStatus();if(Lt(Go,`RPC '${t}' ${s} failed with status:`,d,"response text:",u.getResponseText()),d>0){let f=u.getResponseJson();Array.isArray(f)&&(f=f[0]);const h=f==null?void 0:f.error;if(h&&h.status&&h.message){const p=function(y){const v=y.toLowerCase().replace(/_/g,"-");return Object.values(Ze).indexOf(v)>=0?v:Ze.UNKNOWN}(h.status);a(new Nt(p,h.message))}else a(new Nt(Ze.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new Nt(Ze.UNAVAILABLE,"Connection failed."));break;default:fn()}}finally{Lt(Go,`RPC '${t}' ${s} completed.`)}});const l=JSON.stringify(i);Lt(Go,`RPC '${t}' ${s} sending request:`,i),u.send(n,"POST",l,r,15)})}qo(t,n,r){const i=W8(),s=[this.Fo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=A1e(),a=S1e(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Bo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const c=s.join("");Lt(Go,`Creating RPC '${t}' stream ${i}: ${c}`,u);const d=o.createWebChannel(c,u);let f=!1,h=!1;const p=new met({Eo:y=>{h?Lt(Go,`Not sending because RPC '${t}' stream ${i} is closed:`,y):(f||(Lt(Go,`Opening RPC '${t}' stream ${i} transport.`),d.open(),f=!0),Lt(Go,`RPC '${t}' stream ${i} sending:`,y),d.send(y))},Ao:()=>d.close()}),m=(y,v,b)=>{y.listen(v,w=>{try{b(w)}catch(E){setTimeout(()=>{throw E},0)}})};return m(d,rT.EventType.OPEN,()=>{h||(Lt(Go,`RPC '${t}' stream ${i} transport opened.`),p.So())}),m(d,rT.EventType.CLOSE,()=>{h||(h=!0,Lt(Go,`RPC '${t}' stream ${i} transport closed`),p.Do())}),m(d,rT.EventType.ERROR,y=>{h||(h=!0,L2(Go,`RPC '${t}' stream ${i} transport errored:`,y),p.Do(new Nt(Ze.UNAVAILABLE,"The operation could not be completed")))}),m(d,rT.EventType.MESSAGE,y=>{var v;if(!h){const b=y.data[0];Tr(!!b);const w=b,E=(w==null?void 0:w.error)||((v=w[0])===null||v===void 0?void 0:v.error);if(E){Lt(Go,`RPC '${t}' stream ${i} received error:`,E);const _=E.status;let C=function(R){const N=Zi[R];if(N!==void 0)return Q1e(N)}(_),S=E.message;C===void 0&&(C=Ze.INTERNAL,S="Unknown error status: "+_+" with message "+E.message),h=!0,p.Do(new Nt(C,S)),d.close()}else Lt(Go,`RPC '${t}' stream ${i} received:`,b),p.vo(b)}}),m(a,C1e.STAT_EVENT,y=>{y.stat===yB.PROXY?Lt(Go,`RPC '${t}' stream ${i} detected buffering proxy`):y.stat===yB.NOPROXY&&Lt(Go,`RPC '${t}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{p.bo()},0),p}}function G8(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bO(e){return new EZe(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cbe{constructor(t,n,r=1e3,i=1.5,s=6e4){this.li=t,this.timerId=n,this.Qo=r,this.Ko=i,this.$o=s,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(t){this.cancel();const n=Math.floor(this.Uo+this.Ho()),r=Math.max(0,Date.now()-this.Go),i=Math.max(0,n-r);i>0&&Lt("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Uo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,i,()=>(this.Go=Date.now(),t())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dbe{constructor(t,n,r,i,s,o,a,u){this.li=t,this.Yo=r,this.Zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new cbe(t,n)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}async stop(){this.i_()&&await this.close(0)}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(t){this.l_(),this.stream.send(t)}async u_(){if(this.s_())return this.close(0)}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}async close(t,n){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,t!==4?this.r_.reset():n&&n.code===Ze.RESOURCE_EXHAUSTED?(Sp(n.toString()),Sp("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):n&&n.code===Ze.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.po(n)}P_(){}auth(){this.state=1;const t=this.T_(this.Xo),n=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Xo===n&&this.I_(r,i)},r=>{t(()=>{const i=new Nt(Ze.UNKNOWN,"Fetching auth token failed: "+r.message);return this.d_(i)})})}I_(t,n){const r=this.T_(this.Xo);this.stream=this.E_(t,n),this.stream.Ro(()=>{r(()=>this.listener.Ro())}),this.stream.mo(()=>{r(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(i=>{r(()=>this.d_(i))}),this.stream.onMessage(i=>{r(()=>++this.n_==1?this.A_(i):this.onNext(i))})}o_(){this.state=5,this.r_.jo(async()=>{this.state=0,this.start()})}d_(t){return Lt("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}T_(t){return n=>{this.li.enqueueAndForget(()=>this.Xo===t?n():(Lt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class yet extends dbe{constructor(t,n,r,i,s,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}E_(t,n){return this.connection.qo("Listen",t,n)}A_(t){return this.onNext(t)}onNext(t){this.r_.reset();const n=CZe(this.serializer,t),r=function(s){if(!("targetChange"in s))return vn.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?vn.min():o.readTime?xf(o.readTime):vn.min()}(t);return this.listener.R_(n,r)}V_(t){const n={};n.database=AB(this.serializer),n.addTarget=function(s,o){let a;const u=o.target;if(a=wB(u)?{documents:kZe(s,u)}:{query:IZe(s,u).ct},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=ebe(s,o.resumeToken);const l=TB(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(vn.min())>0){a.readTime=WP(s,o.snapshotVersion.toTimestamp());const l=TB(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,t);const r=DZe(this.serializer,t);r&&(n.labels=r),this.c_(n)}m_(t){const n={};n.database=AB(this.serializer),n.removeTarget=t,this.c_(n)}}class bet extends dbe{constructor(t,n,r,i,s,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}E_(t,n){return this.connection.qo("Write",t,n)}A_(t){return Tr(!!t.streamToken),this.lastStreamToken=t.streamToken,Tr(!t.writeResults||t.writeResults.length===0),this.listener.p_()}onNext(t){Tr(!!t.streamToken),this.lastStreamToken=t.streamToken,this.r_.reset();const n=AZe(t.writeResults,t.commitTime),r=xf(t.commitTime);return this.listener.y_(r,n)}w_(){const t={};t.database=AB(this.serializer),this.c_(t)}g_(t){const n={streamToken:this.lastStreamToken,writes:t.map(r=>SZe(this.serializer,r))};this.c_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vet extends class{}{constructor(t,n,r,i){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.S_=!1}b_(){if(this.S_)throw new Nt(Ze.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(t,n,r,i){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Oo(t,CB(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Ze.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Nt(Ze.UNKNOWN,s.toString())})}ko(t,n,r,i,s){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.ko(t,CB(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Ze.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Nt(Ze.UNKNOWN,o.toString())})}terminate(){this.S_=!0,this.connection.terminate()}}class xet{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(t){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.M_("Offline")))}set(t){this.N_(),this.D_=0,t==="Online"&&(this.C_=!1),this.M_(t)}M_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}x_(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(Sp(n),this.C_=!1):Lt("OnlineStateTracker",n)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wet{constructor(t,n,r,i,s){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.B_=[],this.L_=new Map,this.k_=new Set,this.q_=[],this.Q_=s,this.Q_.uo(o=>{r.enqueueAndForget(async()=>{K1(this)&&(Lt("RemoteStore","Restarting streams for network reachability change."),await async function(u){const l=xn(u);l.k_.add(4),await hS(l),l.K_.set("Unknown"),l.k_.delete(4),await fS(l)}(this))})}),this.K_=new xet(r,i)}}async function fS(e){if(K1(e))for(const t of e.q_)await t(!0)}async function hS(e){for(const t of e.q_)await t(!1)}function fbe(e,t){const n=xn(e);n.L_.has(t.targetId)||(n.L_.set(t.targetId,t),nq(n)?tq(n):tE(n).s_()&&eq(n,t))}function ZH(e,t){const n=xn(e),r=tE(n);n.L_.delete(t),r.s_()&&hbe(n,t),n.L_.size===0&&(r.s_()?r.a_():K1(n)&&n.K_.set("Unknown"))}function eq(e,t){if(e.U_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(vn.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}tE(e).V_(t)}function hbe(e,t){e.U_.xe(t),tE(e).m_(t)}function tq(e){e.U_=new bZe({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ut:t=>e.L_.get(t)||null,nt:()=>e.datastore.serializer.databaseId}),tE(e).start(),e.K_.F_()}function nq(e){return K1(e)&&!tE(e).i_()&&e.L_.size>0}function K1(e){return xn(e).k_.size===0}function pbe(e){e.U_=void 0}async function Eet(e){e.K_.set("Online")}async function _et(e){e.L_.forEach((t,n)=>{eq(e,t)})}async function Tet(e,t){pbe(e),nq(e)?(e.K_.O_(t),tq(e)):e.K_.set("Unknown")}async function Cet(e,t,n){if(e.K_.set("Online"),t instanceof Z1e&&t.state===2&&t.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.L_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.L_.delete(a),i.U_.removeTarget(a))}(e,t)}catch(r){Lt("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),await YP(e,r)}else if(t instanceof eD?e.U_.$e(t):t instanceof J1e?e.U_.Je(t):e.U_.Ge(t),!n.isEqual(vn.min()))try{const r=await lbe(e.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.U_.it(o);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){const c=s.L_.get(l);c&&s.L_.set(l,c.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,l)=>{const c=s.L_.get(u);if(!c)return;s.L_.set(u,c.withResumeToken(Mo.EMPTY_BYTE_STRING,c.snapshotVersion)),hbe(s,u);const d=new Qm(c.target,u,l,c.sequenceNumber);eq(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(e,n)}catch(r){Lt("RemoteStore","Failed to raise snapshot:",r),await YP(e,r)}}async function YP(e,t,n){if(!Zw(t))throw t;e.k_.add(1),await hS(e),e.K_.set("Offline"),n||(n=()=>lbe(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{Lt("RemoteStore","Retrying IndexedDB access"),await n(),e.k_.delete(1),await fS(e)})}function mbe(e,t){return t().catch(n=>YP(e,n,t))}async function vO(e){const t=xn(e),n=k0(t);let r=t.B_.length>0?t.B_[t.B_.length-1].batchId:-1;for(;Aet(t);)try{const i=await uet(t.localStore,r);if(i===null){t.B_.length===0&&n.a_();break}r=i.batchId,ket(t,i)}catch(i){await YP(t,i)}gbe(t)&&ybe(t)}function Aet(e){return K1(e)&&e.B_.length<10}function ket(e,t){e.B_.push(t);const n=k0(e);n.s_()&&n.f_&&n.g_(t.mutations)}function gbe(e){return K1(e)&&!k0(e).i_()&&e.B_.length>0}function ybe(e){k0(e).start()}async function Iet(e){k0(e).w_()}async function Ret(e){const t=k0(e);for(const n of e.B_)t.g_(n.mutations)}async function Det(e,t,n){const r=e.B_.shift(),i=GH.from(r,t,n);await mbe(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await vO(e)}async function Pet(e,t){t&&k0(e).f_&&await async function(r,i){if(function(o){return mZe(o)&&o!==Ze.ABORTED}(i.code)){const s=r.B_.shift();k0(r).__(),await mbe(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await vO(r)}}(e,t),gbe(e)&&ybe(e)}async function Wre(e,t){const n=xn(e);n.asyncQueue.verifyOperationInProgress(),Lt("RemoteStore","RemoteStore received new credentials");const r=K1(n);n.k_.add(3),await hS(n),r&&n.K_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.k_.delete(3),await fS(n)}async function Net(e,t){const n=xn(e);t?(n.k_.delete(2),await fS(n)):t||(n.k_.add(2),await hS(n),n.K_.set("Unknown"))}function tE(e){return e.W_||(e.W_=function(n,r,i){const s=xn(n);return s.b_(),new yet(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{Ro:Eet.bind(null,e),mo:_et.bind(null,e),po:Tet.bind(null,e),R_:Cet.bind(null,e)}),e.q_.push(async t=>{t?(e.W_.__(),nq(e)?tq(e):e.K_.set("Unknown")):(await e.W_.stop(),pbe(e))})),e.W_}function k0(e){return e.G_||(e.G_=function(n,r,i){const s=xn(n);return s.b_(),new bet(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{Ro:()=>Promise.resolve(),mo:Iet.bind(null,e),po:Pet.bind(null,e),p_:Ret.bind(null,e),y_:Det.bind(null,e)}),e.q_.push(async t=>{t?(e.G_.__(),await vO(e)):(await e.G_.stop(),e.B_.length>0&&(Lt("RemoteStore",`Stopping write stream with ${e.B_.length} pending writes`),e.B_=[]))})),e.G_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rq{constructor(t,n,r,i,s){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new cp,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,i,s){const o=Date.now()+r,a=new rq(t,n,o,i,s);return a.start(r),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Nt(Ze.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function iq(e,t){if(Sp("AsyncQueue",`${t}: ${e}`),Zw(e))return new Nt(Ze.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jv{static emptySet(t){return new Jv(t.comparator)}constructor(t){this.comparator=t?(n,r)=>t(n,r)||nn.comparator(n.key,r.key):(n,r)=>nn.comparator(n.key,r.key),this.keyedMap=iT(),this.sortedSet=new Ci(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,r)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof Jv)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new Jv;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gre{constructor(){this.z_=new Ci(nn.comparator)}track(t){const n=t.doc.key,r=this.z_.get(n);r?t.type!==0&&r.type===3?this.z_=this.z_.insert(n,t):t.type===3&&r.type!==1?this.z_=this.z_.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.z_=this.z_.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.z_=this.z_.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.z_=this.z_.remove(n):t.type===1&&r.type===2?this.z_=this.z_.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.z_=this.z_.insert(n,{type:2,doc:t.doc}):fn():this.z_=this.z_.insert(n,t)}j_(){const t=[];return this.z_.inorderTraversal((n,r)=>{t.push(r)}),t}}class Nx{constructor(t,n,r,i,s,o,a,u,l){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(t,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Nx(t,n,Jv.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&hO(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oet{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(t=>t.Z_())}}class $et{constructor(){this.queries=Yre(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(n,r){const i=xn(n),s=i.queries;i.queries=Yre(),s.forEach((o,a)=>{for(const u of a.J_)u.onError(r)})})(this,new Nt(Ze.ABORTED,"Firestore shutting down"))}}function Yre(){return new Y1(e=>B1e(e),hO)}async function bbe(e,t){const n=xn(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.Y_()&&t.Z_()&&(r=2):(s=new Oet,r=t.Z_()?0:1);try{switch(r){case 0:s.H_=await n.onListen(i,!0);break;case 1:s.H_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=iq(o,`Initialization of query '${kv(t.query)}' failed`);return void t.onError(a)}n.queries.set(i,s),s.J_.push(t),t.ea(n.onlineState),s.H_&&t.ta(s.H_)&&sq(n)}async function vbe(e,t){const n=xn(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const o=s.J_.indexOf(t);o>=0&&(s.J_.splice(o,1),s.J_.length===0?i=t.Z_()?0:1:!s.Y_()&&t.Z_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Met(e,t){const n=xn(e);let r=!1;for(const i of t){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.J_)a.ta(i)&&(r=!0);o.H_=i}}r&&sq(n)}function Let(e,t,n){const r=xn(e),i=r.queries.get(t);if(i)for(const s of i.J_)s.onError(n);r.queries.delete(t)}function sq(e){e.X_.forEach(t=>{t.next()})}var IB,Kre;(Kre=IB||(IB={})).na="default",Kre.Cache="cache";class xbe{constructor(t,n,r){this.query=t,this.ra=n,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=r||{}}ta(t){if(!this.options.includeMetadataChanges){const r=[];for(const i of t.docChanges)i.type!==3&&r.push(i);t=new Nx(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.ia?this.oa(t)&&(this.ra.next(t),n=!0):this._a(t,this.onlineState)&&(this.aa(t),n=!0),this.sa=t,n}onError(t){this.ra.error(t)}ea(t){this.onlineState=t;let n=!1;return this.sa&&!this.ia&&this._a(this.sa,t)&&(this.aa(this.sa),n=!0),n}_a(t,n){if(!t.fromCache||!this.Z_())return!0;const r=n!=="Offline";return(!this.options.ua||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}oa(t){if(t.docChanges.length>0)return!0;const n=this.sa&&this.sa.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}aa(t){t=Nx.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.ia=!0,this.ra.next(t)}Z_(){return this.options.source!==IB.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wbe{constructor(t){this.key=t}}class Ebe{constructor(t){this.key=t}}class Fet{constructor(t,n){this.query=t,this.Ea=n,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=jn(),this.mutatedKeys=jn(),this.Va=j1e(t),this.ma=new Jv(this.Va)}get fa(){return this.Ea}ga(t,n){const r=n?n.pa:new Gre,i=n?n.ma:this.ma;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((c,d)=>{const f=i.get(c),h=pO(this.query,d)?d:null,p=!!f&&this.mutatedKeys.has(f.key),m=!!h&&(h.hasLocalMutations||this.mutatedKeys.has(h.key)&&h.hasCommittedMutations);let y=!1;f&&h?f.data.isEqual(h.data)?p!==m&&(r.track({type:3,doc:h}),y=!0):this.ya(f,h)||(r.track({type:2,doc:h}),y=!0,(u&&this.Va(h,u)>0||l&&this.Va(h,l)<0)&&(a=!0)):!f&&h?(r.track({type:0,doc:h}),y=!0):f&&!h&&(r.track({type:1,doc:f}),y=!0,(u||l)&&(a=!0)),y&&(h?(o=o.add(h),s=m?s.add(c):s.delete(c)):(o=o.delete(c),s=s.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),s=s.delete(c.key),r.track({type:1,doc:c})}return{ma:o,pa:r,ss:a,mutatedKeys:s}}ya(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,i){const s=this.ma;this.ma=t.ma,this.mutatedKeys=t.mutatedKeys;const o=t.pa.j_();o.sort((c,d)=>function(h,p){const m=y=>{switch(y){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return fn()}};return m(h)-m(p)}(c.type,d.type)||this.Va(c.doc,d.doc)),this.wa(r),i=i!=null&&i;const a=n&&!i?this.Sa():[],u=this.Ra.size===0&&this.current&&!i?1:0,l=u!==this.Aa;return this.Aa=u,o.length!==0||l?{snapshot:new Nx(this.query,t.ma,s,o,t.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),ba:a}:{ba:a}}ea(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new Gre,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(t){return!this.Ea.has(t)&&!!this.ma.has(t)&&!this.ma.get(t).hasLocalMutations}wa(t){t&&(t.addedDocuments.forEach(n=>this.Ea=this.Ea.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.Ea=this.Ea.delete(n)),this.current=t.current)}Sa(){if(!this.current)return[];const t=this.Ra;this.Ra=jn(),this.ma.forEach(r=>{this.Da(r.key)&&(this.Ra=this.Ra.add(r.key))});const n=[];return t.forEach(r=>{this.Ra.has(r)||n.push(new Ebe(r))}),this.Ra.forEach(r=>{t.has(r)||n.push(new wbe(r))}),n}va(t){this.Ea=t.Es,this.Ra=jn();const n=this.ga(t.documents);return this.applyChanges(n,!0)}Ca(){return Nx.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}}class Bet{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class jet{constructor(t){this.key=t,this.Fa=!1}}class zet{constructor(t,n,r,i,s,o){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ma={},this.xa=new Y1(a=>B1e(a),hO),this.Oa=new Map,this.Na=new Set,this.Ba=new Ci(nn.comparator),this.La=new Map,this.ka=new XH,this.qa={},this.Qa=new Map,this.Ka=Px.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}}async function Uet(e,t,n=!0){const r=kbe(e);let i;const s=r.xa.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Ca()):i=await _be(r,t,n,!0),i}async function Vet(e,t){const n=kbe(e);await _be(n,t,!0,!1)}async function _be(e,t,n,r){const i=await cet(e.localStore,vf(t)),s=i.targetId,o=e.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await Het(e,t,s,o==="current",i.resumeToken)),e.isPrimaryClient&&n&&fbe(e.remoteStore,i),a}async function Het(e,t,n,r,i){e.Ua=(d,f,h)=>async function(m,y,v,b){let w=y.view.ga(v);w.ss&&(w=await Vre(m.localStore,y.query,!1).then(({documents:S})=>y.view.ga(S,w)));const E=b&&b.targetChanges.get(y.targetId),_=b&&b.targetMismatches.get(y.targetId)!=null,C=y.view.applyChanges(w,m.isPrimaryClient,E,_);return Qre(m,y.targetId,C.ba),C.snapshot}(e,d,f,h);const s=await Vre(e.localStore,t,!0),o=new Fet(t,s.Es),a=o.ga(s.documents),u=dS.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",i),l=o.applyChanges(a,e.isPrimaryClient,u);Qre(e,n,l.ba);const c=new Bet(t,n,o);return e.xa.set(t,c),e.Oa.has(n)?e.Oa.get(n).push(t):e.Oa.set(n,[t]),l.snapshot}async function qet(e,t,n){const r=xn(e),i=r.xa.get(t),s=r.Oa.get(i.targetId);if(s.length>1)return r.Oa.set(i.targetId,s.filter(o=>!hO(o,t))),void r.xa.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await kB(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&ZH(r.remoteStore,i.targetId),RB(r,i.targetId)}).catch(Jw)):(RB(r,i.targetId),await kB(r.localStore,i.targetId,!0))}async function Wet(e,t){const n=xn(e),r=n.xa.get(t),i=n.Oa.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),ZH(n.remoteStore,r.targetId))}async function Get(e,t,n){const r=ett(e);try{const i=await function(o,a){const u=xn(o),l=Cs.now(),c=a.reduce((h,p)=>h.add(p.key),jn());let d,f;return u.persistence.runTransaction("Locally write mutations","readwrite",h=>{let p=Ap(),m=jn();return u.hs.getEntries(h,c).next(y=>{p=y,p.forEach((v,b)=>{b.isValidDocument()||(m=m.add(v))})}).next(()=>u.localDocuments.getOverlayedDocuments(h,p)).next(y=>{d=y;const v=[];for(const b of a){const w=cZe(b,d.get(b.key).overlayedDocument);w!=null&&v.push(new og(b.key,w,D1e(w.value.mapValue),ul.exists(!0)))}return u.mutationQueue.addMutationBatch(h,l,v,a)}).next(y=>{f=y;const v=y.applyToLocalDocumentSet(d,m);return u.documentOverlayCache.saveOverlays(h,y.batchId,v)})}).then(()=>({batchId:f.batchId,changes:U1e(d)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let l=o.qa[o.currentUser.toKey()];l||(l=new Ci(Vn)),l=l.insert(a,u),o.qa[o.currentUser.toKey()]=l}(r,i.batchId,n),await pS(r,i.changes),await vO(r.remoteStore)}catch(i){const s=iq(i,"Failed to persist write");n.reject(s)}}async function Tbe(e,t){const n=xn(e);try{const r=await oet(n.localStore,t);t.targetChanges.forEach((i,s)=>{const o=n.La.get(s);o&&(Tr(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.Fa=!0:i.modifiedDocuments.size>0?Tr(o.Fa):i.removedDocuments.size>0&&(Tr(o.Fa),o.Fa=!1))}),await pS(n,r,t)}catch(r){await Jw(r)}}function Xre(e,t,n){const r=xn(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.xa.forEach((s,o)=>{const a=o.view.ea(t);a.snapshot&&i.push(a.snapshot)}),function(o,a){const u=xn(o);u.onlineState=a;let l=!1;u.queries.forEach((c,d)=>{for(const f of d.J_)f.ea(a)&&(l=!0)}),l&&sq(u)}(r.eventManager,t),i.length&&r.Ma.R_(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Yet(e,t,n){const r=xn(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.La.get(t),s=i&&i.key;if(s){let o=new Ci(nn.comparator);o=o.insert(s,ia.newNoDocument(s,vn.min()));const a=jn().add(s),u=new yO(vn.min(),new Map,new Ci(Vn),o,a);await Tbe(r,u),r.Ba=r.Ba.remove(s),r.La.delete(t),oq(r)}else await kB(r.localStore,t,!1).then(()=>RB(r,t,n)).catch(Jw)}async function Ket(e,t){const n=xn(e),r=t.batch.batchId;try{const i=await set(n.localStore,t);Sbe(n,r,null),Cbe(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await pS(n,i)}catch(i){await Jw(i)}}async function Xet(e,t,n){const r=xn(e);try{const i=await function(o,a){const u=xn(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let c;return u.mutationQueue.lookupMutationBatch(l,a).next(d=>(Tr(d!==null),c=d.keys(),u.mutationQueue.removeMutationBatch(l,d))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,c,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,c)).next(()=>u.localDocuments.getDocuments(l,c))})}(r.localStore,t);Sbe(r,t,n),Cbe(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await pS(r,i)}catch(i){await Jw(i)}}function Cbe(e,t){(e.Qa.get(t)||[]).forEach(n=>{n.resolve()}),e.Qa.delete(t)}function Sbe(e,t,n){const r=xn(e);let i=r.qa[r.currentUser.toKey()];if(i){const s=i.get(t);s&&(n?s.reject(n):s.resolve(),i=i.remove(t)),r.qa[r.currentUser.toKey()]=i}}function RB(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Oa.get(t))e.xa.delete(r),n&&e.Ma.Wa(r,n);e.Oa.delete(t),e.isPrimaryClient&&e.ka.yr(t).forEach(r=>{e.ka.containsKey(r)||Abe(e,r)})}function Abe(e,t){e.Na.delete(t.path.canonicalString());const n=e.Ba.get(t);n!==null&&(ZH(e.remoteStore,n),e.Ba=e.Ba.remove(t),e.La.delete(n),oq(e))}function Qre(e,t,n){for(const r of n)r instanceof wbe?(e.ka.addReference(r.key,t),Qet(e,r)):r instanceof Ebe?(Lt("SyncEngine","Document no longer in limbo: "+r.key),e.ka.removeReference(r.key,t),e.ka.containsKey(r.key)||Abe(e,r.key)):fn()}function Qet(e,t){const n=t.key,r=n.path.canonicalString();e.Ba.get(n)||e.Na.has(r)||(Lt("SyncEngine","New document in limbo: "+n),e.Na.add(r),oq(e))}function oq(e){for(;e.Na.size>0&&e.Ba.size<e.maxConcurrentLimboResolutions;){const t=e.Na.values().next().value;e.Na.delete(t);const n=new nn(ri.fromString(t)),r=e.Ka.next();e.La.set(r,new jet(n)),e.Ba=e.Ba.insert(n,r),fbe(e.remoteStore,new Qm(vf(HH(n.path)),r,"TargetPurposeLimboResolution",cO.oe))}}async function pS(e,t,n){const r=xn(e),i=[],s=[],o=[];r.xa.isEmpty()||(r.xa.forEach((a,u)=>{o.push(r.Ua(u,t,n).then(l=>{var c;if((l||n)&&r.isPrimaryClient){const d=l?!l.fromCache:(c=n==null?void 0:n.targetChanges.get(u.targetId))===null||c===void 0?void 0:c.current;r.sharedClientState.updateQueryState(u.targetId,d?"current":"not-current")}if(l){i.push(l);const d=JH.zi(u.targetId,l);s.push(d)}}))}),await Promise.all(o),r.Ma.R_(i),await async function(u,l){const c=xn(u);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>et.forEach(l,f=>et.forEach(f.Wi,h=>c.persistence.referenceDelegate.addReference(d,f.targetId,h)).next(()=>et.forEach(f.Gi,h=>c.persistence.referenceDelegate.removeReference(d,f.targetId,h)))))}catch(d){if(!Zw(d))throw d;Lt("LocalStore","Failed to update sequence numbers: "+d)}for(const d of l){const f=d.targetId;if(!d.fromCache){const h=c.us.get(f),p=h.snapshotVersion,m=h.withLastLimboFreeSnapshotVersion(p);c.us=c.us.insert(f,m)}}}(r.localStore,s))}async function Jet(e,t){const n=xn(e);if(!n.currentUser.isEqual(t)){Lt("SyncEngine","User change. New user:",t.toKey());const r=await ube(n.localStore,t);n.currentUser=t,function(s,o){s.Qa.forEach(a=>{a.forEach(u=>{u.reject(new Nt(Ze.CANCELLED,o))})}),s.Qa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await pS(n,r.Ts)}}function Zet(e,t){const n=xn(e),r=n.La.get(t);if(r&&r.Fa)return jn().add(r.key);{let i=jn();const s=n.Oa.get(t);if(!s)return i;for(const o of s){const a=n.xa.get(o);i=i.unionWith(a.view.fa)}return i}}function kbe(e){const t=xn(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Tbe.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Zet.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Yet.bind(null,t),t.Ma.R_=Met.bind(null,t.eventManager),t.Ma.Wa=Let.bind(null,t.eventManager),t}function ett(e){const t=xn(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Ket.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Xet.bind(null,t),t}class KP{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=bO(t.databaseInfo.databaseId),this.sharedClientState=this.za(t),this.persistence=this.ja(t),await this.persistence.start(),this.localStore=this.Ha(t),this.gcScheduler=this.Ja(t,this.localStore),this.indexBackfillerScheduler=this.Ya(t,this.localStore)}Ja(t,n){return null}Ya(t,n){return null}Ha(t){return iet(this.persistence,new net,t.initialUser,this.serializer)}ja(t){return new abe(QH.ei,this.serializer)}za(t){return new fet}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}KP.provider={build:()=>new KP};class ttt extends KP{constructor(t){super(),this.cacheSizeBytes=t}Ja(t,n){Tr(this.persistence.referenceDelegate instanceof GP);const r=this.persistence.referenceDelegate.garbageCollector;return new zZe(r,t.asyncQueue,n)}ja(t){const n=this.cacheSizeBytes!==void 0?hu.withCacheSize(this.cacheSizeBytes):hu.DEFAULT;return new abe(r=>GP.ei(r,n),this.serializer)}}class DB{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Xre(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Jet.bind(null,this.syncEngine),await Net(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new $et}()}createDatastore(t){const n=bO(t.databaseInfo.databaseId),r=function(s){return new get(s)}(t.databaseInfo);return function(s,o,a,u){return new vet(s,o,a,u)}(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return function(r,i,s,o,a){return new wet(r,i,s,o,a)}(this.localStore,this.datastore,t.asyncQueue,n=>Xre(this.syncEngine,n,0),function(){return qre.p()?new qre:new het}())}createSyncEngine(t,n){return function(i,s,o,a,u,l,c){const d=new zet(i,s,o,a,u,l);return c&&(d.$a=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await async function(i){const s=xn(i);Lt("RemoteStore","RemoteStore shutting down."),s.k_.add(5),await hS(s),s.Q_.shutdown(),s.K_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}DB.provider={build:()=>new DB};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ibe{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Xa(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Xa(this.observer.error,t):Sp("Uncaught Error in snapshot listener:",t.toString()))}eu(){this.muted=!0}Xa(t,n){setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ntt{constructor(t,n,r,i,s){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=fu.UNAUTHENTICATED,this.clientId=k1e.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{Lt("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(Lt("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new cp;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=iq(n,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function Y8(e,t){e.asyncQueue.verifyOperationInProgress(),Lt("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async i=>{r.isEqual(i)||(await ube(t.localStore,i),r=i)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function Jre(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Rbe(e);Lt("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(r=>Wre(t.remoteStore,r)),e.setAppCheckTokenChangeListener((r,i)=>Wre(t.remoteStore,i)),e._onlineComponents=t}async function Rbe(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Lt("FirestoreClient","Using user provided OfflineComponentProvider");try{await Y8(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(i){return i.name==="FirebaseError"?i.code===Ze.FAILED_PRECONDITION||i.code===Ze.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;L2("Error using user provided cache. Falling back to memory cache: "+n),await Y8(e,new KP)}}else Lt("FirestoreClient","Using default OfflineComponentProvider"),await Y8(e,new ttt(void 0));return e._offlineComponents}async function aq(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Lt("FirestoreClient","Using user provided OnlineComponentProvider"),await Jre(e,e._uninitializedComponentsProvider._online)):(Lt("FirestoreClient","Using default OnlineComponentProvider"),await Jre(e,new DB))),e._onlineComponents}function rtt(e){return Rbe(e).then(t=>t.persistence)}function itt(e){return aq(e).then(t=>t.remoteStore)}function stt(e){return aq(e).then(t=>t.syncEngine)}async function Dbe(e){const t=await aq(e),n=t.eventManager;return n.onListen=Uet.bind(null,t.syncEngine),n.onUnlisten=qet.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=Vet.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=Wet.bind(null,t.syncEngine),n}function ott(e){return e.asyncQueue.enqueue(async()=>{const t=await rtt(e),n=await itt(e);return t.setNetworkEnabled(!0),function(i){const s=xn(i);return s.k_.delete(0),fS(s)}(n)})}function att(e,t,n={}){const r=new cp;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,l){const c=new Ibe({next:f=>{c.eu(),o.enqueueAndForget(()=>vbe(s,d));const h=f.docs.has(a);!h&&f.fromCache?l.reject(new Nt(Ze.UNAVAILABLE,"Failed to get document because the client is offline.")):h&&f.fromCache&&u&&u.source==="server"?l.reject(new Nt(Ze.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(f)},error:f=>l.reject(f)}),d=new xbe(HH(a.path),c,{includeMetadataChanges:!0,ua:!0});return bbe(s,d)}(await Dbe(e),e.asyncQueue,t,n,r)),r.promise}function utt(e,t,n={}){const r=new cp;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,l){const c=new Ibe({next:f=>{c.eu(),o.enqueueAndForget(()=>vbe(s,d)),f.fromCache&&u.source==="server"?l.reject(new Nt(Ze.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(f)},error:f=>l.reject(f)}),d=new xbe(a,c,{includeMetadataChanges:!0,ua:!0});return bbe(s,d)}(await Dbe(e),e.asyncQueue,t,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pbe(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zre=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nbe(e,t,n){if(!n)throw new Nt(Ze.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function ltt(e,t,n,r){if(t===!0&&r===!0)throw new Nt(Ze.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function eie(e){if(!nn.isDocumentKey(e))throw new Nt(Ze.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function tie(e){if(nn.isDocumentKey(e))throw new Nt(Ze.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function xO(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":fn()}function Ff(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Nt(Ze.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=xO(e);throw new Nt(Ze.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nie{constructor(t){var n,r;if(t.host===void 0){if(t.ssl!==void 0)throw new Nt(Ze.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(n=t.ssl)===null||n===void 0||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new Nt(Ze.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}ltt("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Pbe((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Nt(Ze.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Nt(Ze.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Nt(Ze.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class uq{constructor(t,n,r,i){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new nie({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Nt(Ze.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Nt(Ze.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new nie(t),t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new yJe;switch(r.type){case"firstParty":return new xJe(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Nt(Ze.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Zre.get(n);r&&(Lt("ComponentProvider","Removing Datastore"),Zre.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new X1(this.firestore,t,this._query)}}class ja{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new f0(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new ja(this.firestore,t,this._key)}}class f0 extends X1{constructor(t,n,r){super(t,n,HH(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new ja(this.firestore,null,new nn(t))}withConverter(t){return new f0(this.firestore,t,this._path)}}function uu(e,t,...n){if(e=Xr(e),Nbe("collection","path",t),e instanceof uq){const r=ri.fromString(t,...n);return tie(r),new f0(e,null,r)}{if(!(e instanceof ja||e instanceof f0))throw new Nt(Ze.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(ri.fromString(t,...n));return tie(r),new f0(e.firestore,null,r)}}function ni(e,t,...n){if(e=Xr(e),arguments.length===1&&(t=k1e.newId()),Nbe("doc","path",t),e instanceof uq){const r=ri.fromString(t,...n);return eie(r),new ja(e,null,new nn(r))}{if(!(e instanceof ja||e instanceof f0))throw new Nt(Ze.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(ri.fromString(t,...n));return eie(r),new ja(e.firestore,e instanceof f0?e.converter:null,new nn(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rie{constructor(t=Promise.resolve()){this.Iu=[],this.du=!1,this.Eu=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new cbe(this,"async_queue_retry"),this.fu=()=>{const r=G8();r&&Lt("AsyncQueue","Visibility state changed to "+r.visibilityState),this.r_.Jo()},this.gu=t;const n=G8();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.du}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.pu(),this.yu(t)}enterRestrictedMode(t){if(!this.du){this.du=!0,this.Vu=t||!1;const n=G8();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.fu)}}enqueue(t){if(this.pu(),this.du)return new Promise(()=>{});const n=new cp;return this.yu(()=>this.du&&this.Vu?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Iu.push(t),this.wu()))}async wu(){if(this.Iu.length!==0){try{await this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(t){if(!Zw(t))throw t;Lt("AsyncQueue","Operation failed with retryable error: "+t)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}}yu(t){const n=this.gu.then(()=>(this.Ru=!0,t().catch(r=>{this.Au=r,this.Ru=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Sp("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Ru=!1,r))));return this.gu=n,n}enqueueAfterDelay(t,n,r){this.pu(),this.mu.indexOf(t)>-1&&(n=0);const i=rq.createAndSchedule(this,t,n,r,s=>this.Su(s));return this.Eu.push(i),i}pu(){this.Au&&fn()}verifyOperationInProgress(){}async bu(){let t;do t=this.gu,await t;while(t!==this.gu)}Du(t){for(const n of this.Eu)if(n.timerId===t)return!0;return!1}vu(t){return this.bu().then(()=>{this.Eu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Eu)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.bu()})}Cu(t){this.mu.push(t)}Su(t){const n=this.Eu.indexOf(t);this.Eu.splice(n,1)}}class Q1 extends uq{constructor(t,n,r,i){super(t,n,r,i),this.type="firestore",this._queue=new rie,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new rie(t),this._firestoreClient=void 0,await t}}}function ctt(e,t,n){n||(n="(default)");const r=Xw(e,"firestore");if(r.isInitialized(n)){const i=r.getImmediate({identifier:n}),s=r.getOptions(n);if($2(s,t))return i;throw new Nt(Ze.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(t.cacheSizeBytes!==void 0&&t.localCache!==void 0)throw new Nt(Ze.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(t.cacheSizeBytes!==void 0&&t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new Nt(Ze.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:t,instanceIdentifier:n})}function mS(e){if(e._terminated)throw new Nt(Ze.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||dtt(e),e._firestoreClient}function dtt(e){var t,n,r;const i=e._freezeSettings(),s=function(a,u,l,c){return new $Je(a,u,l,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,Pbe(c.experimentalLongPollingOptions),c.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,i);e._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new ntt(e._authCredentials,e._appCheckCredentials,e._queue,s,e._componentsProvider&&function(a){const u=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(u),_online:u}}(e._componentsProvider))}function ftt(e){return ott(mS(e=Ff(e,Q1)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ox{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Ox(Mo.fromBase64String(t))}catch(n){throw new Nt(Ze.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new Ox(Mo.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gS{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new Nt(Ze.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new To(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wO{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lq=class{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new Nt(Ze.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Nt(Ze.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Vn(this._lat,t._lat)||Vn(this._long,t._long)}};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cq{constructor(t){this._values=(t||[]).map(n=>n)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const htt=/^__.*__$/;class ptt{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new og(t,this.data,this.fieldMask,n,this.fieldTransforms):new cS(t,this.data,n,this.fieldTransforms)}}class Obe{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return new og(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function $be(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw fn()}}class dq{constructor(t,n,r,i,s,o){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Fu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(t){return new dq(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.xu({path:r,Nu:!1});return i.Bu(t),i}Lu(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.xu({path:r,Nu:!1});return i.Fu(),i}ku(t){return this.xu({path:void 0,Nu:!0})}qu(t){return XP(t,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Fu(){if(this.path)for(let t=0;t<this.path.length;t++)this.Bu(this.path.get(t))}Bu(t){if(t.length===0)throw this.qu("Document fields must not be empty");if($be(this.Mu)&&htt.test(t))throw this.qu('Document fields cannot begin and end with "__"')}}class mtt{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||bO(t)}$u(t,n,r,i=!1){return new dq({Mu:t,methodName:n,Ku:r,path:To.emptyPath(),Nu:!1,Qu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function EO(e){const t=e._freezeSettings(),n=bO(e._databaseId);return new mtt(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Mbe(e,t,n,r,i,s={}){const o=e.$u(s.merge||s.mergeFields?2:0,t,n,i);hq("Data must be an object, but it was:",o,r);const a=Bbe(r,o);let u,l;if(s.merge)u=new rl(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const c=[];for(const d of s.mergeFields){const f=PB(t,d,n);if(!o.contains(f))throw new Nt(Ze.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);zbe(c,f)||c.push(f)}u=new rl(c),l=o.fieldTransforms.filter(d=>u.covers(d.field))}else u=null,l=o.fieldTransforms;return new ptt(new bu(a),u,l)}class _O extends wO{_toFieldTransform(t){if(t.Mu!==2)throw t.Mu===1?t.qu(`${this._methodName}() can only appear at the top level of your update data`):t.qu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof _O}}class fq extends wO{_toFieldTransform(t){return new oZe(t.path,new U2)}isEqual(t){return t instanceof fq}}function Lbe(e,t,n,r){const i=e.$u(1,t,n);hq("Data must be an object, but it was:",i,r);const s=[],o=bu.empty();sg(r,(u,l)=>{const c=pq(t,u,n);l=Xr(l);const d=i.Lu(c);if(l instanceof _O)s.push(c);else{const f=yS(l,d);f!=null&&(s.push(c),o.set(c,f))}});const a=new rl(s);return new Obe(o,a,i.fieldTransforms)}function Fbe(e,t,n,r,i,s){const o=e.$u(1,t,n),a=[PB(t,r,n)],u=[i];if(s.length%2!=0)throw new Nt(Ze.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<s.length;f+=2)a.push(PB(t,s[f])),u.push(s[f+1]);const l=[],c=bu.empty();for(let f=a.length-1;f>=0;--f)if(!zbe(l,a[f])){const h=a[f];let p=u[f];p=Xr(p);const m=o.Lu(h);if(p instanceof _O)l.push(h);else{const y=yS(p,m);y!=null&&(l.push(h),c.set(h,y))}}const d=new rl(l);return new Obe(c,d,o.fieldTransforms)}function gtt(e,t,n,r=!1){return yS(n,e.$u(r?4:3,t))}function yS(e,t){if(jbe(e=Xr(e)))return hq("Unsupported field value:",t,e),Bbe(e,t);if(e instanceof wO)return function(r,i){if(!$be(i.Mu))throw i.qu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.qu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Nu&&t.Mu!==4)throw t.qu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let u=yS(a,i.ku(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(e,t)}return function(r,i){if((r=Xr(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return rZe(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Cs.fromDate(r);return{timestampValue:WP(i.serializer,s)}}if(r instanceof Cs){const s=new Cs(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:WP(i.serializer,s)}}if(r instanceof lq)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ox)return{bytesValue:ebe(i.serializer,r._byteString)};if(r instanceof ja){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.qu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:KH(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof cq)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw a.qu("VectorValues must only contain numeric values.");return qH(a.serializer,u)})}}}}}}(r,i);throw i.qu(`Unsupported field value: ${xO(r)}`)}(e,t)}function Bbe(e,t){const n={};return I1e(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):sg(e,(r,i)=>{const s=yS(i,t.Ou(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function jbe(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof Cs||e instanceof lq||e instanceof Ox||e instanceof ja||e instanceof wO||e instanceof cq)}function hq(e,t,n){if(!jbe(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=xO(n);throw r==="an object"?t.qu(e+" a custom object"):t.qu(e+" "+r)}}function PB(e,t,n){if((t=Xr(t))instanceof gS)return t._internalPath;if(typeof t=="string")return pq(e,t);throw XP("Field path arguments must be of type string or ",e,!1,void 0,n)}const ytt=new RegExp("[~\\*/\\[\\]]");function pq(e,t,n){if(t.search(ytt)>=0)throw XP(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new gS(...t.split("."))._internalPath}catch{throw XP(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function XP(e,t,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new Nt(Ze.INVALID_ARGUMENT,a+e+u)}function zbe(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ube{constructor(t,n,r,i,s){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new ja(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new btt(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(TO("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class btt extends Ube{data(){return super.data()}}function TO(e,t){return typeof t=="string"?pq(e,t):t instanceof gS?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vtt(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new Nt(Ze.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class mq{}class Vbe extends mq{}function K8(e,t,...n){let r=[];t instanceof mq&&r.push(t),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof gq).length,a=s.filter(u=>u instanceof CO).length;if(o>1||o>0&&a>0)throw new Nt(Ze.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)e=i._apply(e);return e}class CO extends Vbe{constructor(t,n,r){super(),this._field=t,this._op=n,this._value=r,this.type="where"}static _create(t,n,r){return new CO(t,n,r)}_apply(t){const n=this._parse(t);return Hbe(t._query,n),new X1(t.firestore,t.converter,EB(t._query,n))}_parse(t){const n=EO(t.firestore);return function(s,o,a,u,l,c,d){let f;if(l.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new Nt(Ze.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){aie(d,c);const h=[];for(const p of d)h.push(oie(u,s,p));f={arrayValue:{values:h}}}else f=oie(u,s,d)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||aie(d,c),f=gtt(a,o,d,c==="in"||c==="not-in");return ts.create(l,c,f)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function iie(e,t,n){const r=t,i=TO("where",e);return CO._create(i,r,n)}class gq extends mq{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new gq(t,n)}_parse(t){const n=this._queryConstraints.map(r=>r._parse(t)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:cd.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const u of a)Hbe(o,u),o=EB(o,u)}(t._query,n),new X1(t.firestore,t.converter,EB(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class yq extends Vbe{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new yq(t,n)}_apply(t){const n=function(i,s,o){if(i.startAt!==null)throw new Nt(Ze.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Nt(Ze.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new z2(s,o)}(t._query,this._field,this._direction);return new X1(t.firestore,t.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new eE(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(t._query,n))}}function sie(e,t="asc"){const n=t,r=TO("orderBy",e);return yq._create(r,n)}function oie(e,t,n){if(typeof(n=Xr(n))=="string"){if(n==="")throw new Nt(Ze.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!F1e(t)&&n.indexOf("/")!==-1)throw new Nt(Ze.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(ri.fromString(n));if(!nn.isDocumentKey(r))throw new Nt(Ze.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Cre(e,new nn(r))}if(n instanceof ja)return Cre(e,n._key);throw new Nt(Ze.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${xO(n)}.`)}function aie(e,t){if(!Array.isArray(e)||e.length===0)throw new Nt(Ze.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function Hbe(e,t){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(e.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new Nt(Ze.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Nt(Ze.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class xtt{convertValue(t,n="none"){switch(A0(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Ui(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(S0(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw fn()}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return sg(t,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(t){var n,r,i;const s=(i=(r=(n=t.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Ui(o.doubleValue));return new cq(s)}convertGeoPoint(t){return new lq(Ui(t.latitude),Ui(t.longitude))}convertArray(t,n){return(t.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(t,n){switch(n){case"previous":const r=fO(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(F2(t));default:return null}}convertTimestamp(t){const n=C0(t);return new Cs(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=ri.fromString(t);Tr(obe(r));const i=new B2(r.get(1),r.get(3)),s=new nn(r.popFirst(5));return i.isEqual(n)||Sp(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qbe(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oT{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Wbe extends Ube{constructor(t,n,r,i,s,o){super(t,n,r,i,o),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new tD(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(TO("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class tD extends Wbe{data(t={}){return super.data(t)}}class wtt{constructor(t,n,r,i){this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new oT(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(r=>{t.call(n,new tD(this._firestore,this._userDataWriter,r.key,r,new oT(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Nt(Ze.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const u=new tD(i._firestore,i._userDataWriter,a.doc.key,a.doc,new oT(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const u=new tD(i._firestore,i._userDataWriter,a.doc.key,a.doc,new oT(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,c=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),c=o.indexOf(a.doc.key)),{type:Ett(a.type),doc:u,oldIndex:l,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function Ett(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return fn()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xk(e){e=Ff(e,ja);const t=Ff(e.firestore,Q1);return att(mS(t),e._key).then(n=>_tt(t,e,n))}class Gbe extends xtt{constructor(t){super(),this.firestore=t}convertBytes(t){return new Ox(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new ja(this.firestore,null,n)}}function sv(e){e=Ff(e,X1);const t=Ff(e.firestore,Q1),n=mS(t),r=new Gbe(t);return vtt(e._query),utt(n,e._query).then(i=>new wtt(t,r,e,i))}function Yo(e,t,n){e=Ff(e,ja);const r=Ff(e.firestore,Q1),i=qbe(e.converter,t,n);return bq(r,[Mbe(EO(r),"setDoc",e._key,i,e.converter!==null,n).toMutation(e._key,ul.none())])}function uie(e,t,n,...r){e=Ff(e,ja);const i=Ff(e.firestore,Q1),s=EO(i);let o;return o=typeof(t=Xr(t))=="string"||t instanceof gS?Fbe(s,"updateDoc",e._key,t,n,r):Lbe(s,"updateDoc",e._key,t),bq(i,[o.toMutation(e._key,ul.exists(!0))])}function bq(e,t){return function(r,i){const s=new cp;return r.asyncQueue.enqueueAndForget(async()=>Get(await stt(r),i,s)),s.promise}(mS(e),t)}function _tt(e,t,n){const r=n.docs.get(t._key),i=new Gbe(e);return new Wbe(e,i,t._key,r,new oT(n.hasPendingWrites,n.fromCache),t.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ttt{constructor(t,n){this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=EO(t)}set(t,n,r){this._verifyNotCommitted();const i=X8(t,this._firestore),s=qbe(i.converter,n,r),o=Mbe(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,ul.none())),this}update(t,n,r,...i){this._verifyNotCommitted();const s=X8(t,this._firestore);let o;return o=typeof(n=Xr(n))=="string"||n instanceof gS?Fbe(this._dataReader,"WriteBatch.update",s._key,n,r,i):Lbe(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,ul.exists(!0))),this}delete(t){this._verifyNotCommitted();const n=X8(t,this._firestore);return this._mutations=this._mutations.concat(new WH(n._key,ul.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Nt(Ze.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function X8(e,t){if((e=Xr(e)).firestore!==t)throw new Nt(Ze.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function Qk(){return new fq("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lie(e){return mS(e=Ff(e,Q1)),new Ttt(e,t=>bq(e,t))}(function(t,n=!0){(function(i){Qw=i})(G1),Cp(new Mf("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Q1(new bJe(r.getProvider("auth-internal")),new EJe(r.getProvider("app-check-internal")),function(l,c){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new Nt(Ze.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new B2(l.options.projectId,c)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),rd(vre,"4.7.6",t),rd(vre,"4.7.6","esm2017")})();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NB=new Map,Ybe={activated:!1,tokenObservers:[]},Ctt={initialized:!1,enabled:!1};function As(e){return NB.get(e)||Object.assign({},Ybe)}function Stt(e,t){return NB.set(e,t),NB.get(e)}function SO(){return Ctt}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kbe="https://content-firebaseappcheck.googleapis.com/v1",Att="exchangeRecaptchaV3Token",ktt="exchangeDebugToken",cie={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},Itt=24*60*60*1e3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rtt{constructor(t,n,r,i,s){if(this.operation=t,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(t){this.stop();try{this.pending=new O2,this.pending.promise.catch(n=>{}),await Dtt(this.getNextRun(t)),this.pending.resolve(),await this.pending.promise,this.pending=new O2,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function Dtt(e){return new Promise(t=>{setTimeout(t,e)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ptt={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Eu=new Kw("appCheck","AppCheck",Ptt);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function die(e=!1){var t;return e?(t=self.grecaptcha)===null||t===void 0?void 0:t.enterprise:self.grecaptcha}function vq(e){if(!As(e).activated)throw Eu.create("use-before-activation",{appName:e.name})}function Xbe(e){const t=Math.round(e/1e3),n=Math.floor(t/(3600*24)),r=Math.floor((t-n*3600*24)/3600),i=Math.floor((t-n*3600*24-r*3600)/60),s=t-n*3600*24-r*3600-i*60;let o="";return n&&(o+=Jk(n)+"d:"),r&&(o+=Jk(r)+"h:"),o+=Jk(i)+"m:"+Jk(s)+"s",o}function Jk(e){return e===0?"00":e>=10?e.toString():"0"+e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xq({url:e,body:t},n){const r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});if(i){const d=await i.getHeartbeatsHeader();d&&(r["X-Firebase-Client"]=d)}const s={method:"POST",body:JSON.stringify(t),headers:r};let o;try{o=await fetch(e,s)}catch(d){throw Eu.create("fetch-network-error",{originalErrorMessage:d==null?void 0:d.message})}if(o.status!==200)throw Eu.create("fetch-status-error",{httpStatus:o.status});let a;try{a=await o.json()}catch(d){throw Eu.create("fetch-parse-error",{originalErrorMessage:d==null?void 0:d.message})}const u=a.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw Eu.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const l=Number(u[1])*1e3,c=Date.now();return{token:a.token,expireTimeMillis:c+l,issuedAtTimeMillis:c}}function Ntt(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${Kbe}/projects/${n}/apps/${r}:${Att}?key=${i}`,body:{recaptcha_v3_token:t}}}function Qbe(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${Kbe}/projects/${n}/apps/${r}:${ktt}?key=${i}`,body:{debug_token:t}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ott="firebase-app-check-database",$tt=1,q2="firebase-app-check-store",Jbe="debug-token";let Zk=null;function Zbe(){return Zk||(Zk=new Promise((e,t)=>{try{const n=indexedDB.open(Ott,$tt);n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{var i;t(Eu.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{const i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(q2,{keyPath:"compositeKey"})}}}catch(n){t(Eu.create("storage-open",{originalErrorMessage:n==null?void 0:n.message}))}}),Zk)}function Mtt(e){return tve(nve(e))}function Ltt(e,t){return eve(nve(e),t)}function Ftt(e){return eve(Jbe,e)}function Btt(){return tve(Jbe)}async function eve(e,t){const r=(await Zbe()).transaction(q2,"readwrite"),s=r.objectStore(q2).put({compositeKey:e,value:t});return new Promise((o,a)=>{s.onsuccess=u=>{o()},r.onerror=u=>{var l;a(Eu.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})}async function tve(e){const n=(await Zbe()).transaction(q2,"readonly"),i=n.objectStore(q2).get(e);return new Promise((s,o)=>{i.onsuccess=a=>{const u=a.target.result;s(u?u.value:void 0)},n.onerror=a=>{var u;o(Eu.create("storage-get",{originalErrorMessage:(u=a.target.error)===null||u===void 0?void 0:u.message}))}})}function nve(e){return`${e.options.appId}-${e.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W2=new aO("@firebase/app-check");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jtt(e){if(IH()){let t;try{t=await Mtt(e)}catch(n){W2.warn(`Failed to read token from IndexedDB. Error: ${n}`)}return t}}function Q8(e,t){return IH()?Ltt(e,t).catch(n=>{W2.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}async function ztt(){let e;try{e=await Btt()}catch{}if(e)return e;{const t=crypto.randomUUID();return Ftt(t).catch(n=>W2.warn(`Failed to persist debug token to IndexedDB. Error: ${n}`)),t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wq(){return SO().enabled}async function Eq(){const e=SO();if(e.enabled&&e.token)return e.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}function Utt(){const e=Zye(),t=SO();if(t.initialized=!0,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN!="string"&&e.FIREBASE_APPCHECK_DEBUG_TOKEN!==!0)return;t.enabled=!0;const n=new O2;t.token=n,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN=="string"?n.resolve(e.FIREBASE_APPCHECK_DEBUG_TOKEN):n.resolve(ztt())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vtt={error:"UNKNOWN_ERROR"};function Htt(e){return kH.encodeString(JSON.stringify(e),!1)}async function OB(e,t=!1){const n=e.app;vq(n);const r=As(n);let i=r.token,s;if(i&&!Mv(i)&&(r.token=void 0,i=void 0),!i){const u=await r.cachedTokenPromise;u&&(Mv(u)?i=u:await Q8(n,void 0))}if(!t&&i&&Mv(i))return{token:i.token};let o=!1;if(wq()){r.exchangeTokenPromise||(r.exchangeTokenPromise=xq(Qbe(n,await Eq()),e.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),o=!0);const u=await r.exchangeTokenPromise;return await Q8(n,u),r.token=u,{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=await As(n).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"?W2.warn(u.message):W2.error(u),s=u}let a;return i?s?Mv(i)?a={token:i.token,internalError:s}:a=hie(s):(a={token:i.token},r.token=i,await Q8(n,i)):a=hie(s),o&&sve(n,a),a}async function qtt(e){const t=e.app;vq(t);const{provider:n}=As(t);if(wq()){const r=await Eq(),{token:i}=await xq(Qbe(t,r),e.heartbeatServiceProvider);return{token:i}}else{const{token:r}=await n.getToken();return{token:r}}}function rve(e,t,n,r){const{app:i}=e,s=As(i),o={next:n,error:r,type:t};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&Mv(s.token)){const a=s.token;Promise.resolve().then(()=>{n({token:a.token}),fie(e)}).catch(()=>{})}s.cachedTokenPromise.then(()=>fie(e))}function ive(e,t){const n=As(e),r=n.tokenObservers.filter(i=>i.next!==t);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function fie(e){const{app:t}=e,n=As(t);let r=n.tokenRefresher;r||(r=Wtt(e),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function Wtt(e){const{app:t}=e;return new Rtt(async()=>{const n=As(t);let r;if(n.token?r=await OB(e,!0):r=await OB(e),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{const n=As(t);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},cie.RETRIAL_MIN_WAIT,cie.RETRIAL_MAX_WAIT)}function sve(e,t){const n=As(e).tokenObservers;for(const r of n)try{r.type==="EXTERNAL"&&t.error!=null?r.error(t.error):r.next(t)}catch{}}function Mv(e){return e.expireTimeMillis-Date.now()>0}function hie(e){return{token:Htt(Vtt),error:e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gtt{constructor(t,n){this.app=t,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:t}=As(this.app);for(const n of t)ive(this.app,n.next);return Promise.resolve()}}function Ytt(e,t){return new Gtt(e,t)}function Ktt(e){return{getToken:t=>OB(e,t),getLimitedUseToken:()=>qtt(e),addTokenListener:t=>rve(e,"INTERNAL",t),removeTokenListener:t=>ive(e.app,t)}}const Xtt="@firebase/app-check",Qtt="0.8.11";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jtt="https://www.google.com/recaptcha/api.js";function Ztt(e,t){const n=new O2,r=As(e);r.reCAPTCHAState={initialized:n};const i=ent(e),s=die(!1);return s?pie(e,t,s,i,n):rnt(()=>{const o=die(!1);if(!o)throw new Error("no recaptcha");pie(e,t,o,i,n)}),n.promise}function pie(e,t,n,r,i){n.ready(()=>{nnt(e,t,n,r),i.resolve(n)})}function ent(e){const t=`fire_app_check_${e.name}`,n=document.createElement("div");return n.id=t,n.style.display="none",document.body.appendChild(n),t}async function tnt(e){vq(e);const n=await As(e).reCAPTCHAState.initialized.promise;return new Promise((r,i)=>{const s=As(e).reCAPTCHAState;n.ready(()=>{r(n.execute(s.widgetId,{action:"fire_app_check"}))})})}function nnt(e,t,n,r){const i=n.render(r,{sitekey:t,size:"invisible",callback:()=>{As(e).reCAPTCHAState.succeeded=!0},"error-callback":()=>{As(e).reCAPTCHAState.succeeded=!1}}),s=As(e);s.reCAPTCHAState=Object.assign(Object.assign({},s.reCAPTCHAState),{widgetId:i})}function rnt(e){const t=document.createElement("script");t.src=Jtt,t.onload=e,document.head.appendChild(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _q{constructor(t){this._siteKey=t,this._throttleData=null}async getToken(){var t,n,r;snt(this._throttleData);const i=await tnt(this._app).catch(o=>{throw Eu.create("recaptcha-error")});if(!(!((t=As(this._app).reCAPTCHAState)===null||t===void 0)&&t.succeeded))throw Eu.create("recaptcha-error");let s;try{s=await xq(Ntt(this._app,i),this._heartbeatServiceProvider)}catch(o){throw!((n=o.code)===null||n===void 0)&&n.includes("fetch-status-error")?(this._throttleData=int(Number((r=o.customData)===null||r===void 0?void 0:r.httpStatus),this._throttleData),Eu.create("throttled",{time:Xbe(this._throttleData.allowRequestsAfter-Date.now()),httpStatus:this._throttleData.httpStatus})):o}return this._throttleData=null,s}initialize(t){this._app=t,this._heartbeatServiceProvider=Xw(t,"heartbeat"),Ztt(t,this._siteKey).catch(()=>{})}isEqual(t){return t instanceof _q?this._siteKey===t._siteKey:!1}}function int(e,t){if(e===404||e===403)return{backoffCount:1,allowRequestsAfter:Date.now()+Itt,httpStatus:e};{const n=t?t.backoffCount:0,r=VKe(n,1e3,2);return{backoffCount:n+1,allowRequestsAfter:Date.now()+r,httpStatus:e}}}function snt(e){if(e&&Date.now()-e.allowRequestsAfter<=0)throw Eu.create("throttled",{time:Xbe(e.allowRequestsAfter-Date.now()),httpStatus:e.httpStatus})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ont(e=DH(),t){e=Xr(e);const n=Xw(e,"app-check");if(SO().initialized||Utt(),wq()&&Eq().then(i=>console.log(`App Check debug token: ${i}. You will need to add it to your app's App Check settings in the Firebase console for it to work.`)),n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(s.isTokenAutoRefreshEnabled===t.isTokenAutoRefreshEnabled&&s.provider.isEqual(t.provider))return i;throw Eu.create("already-initialized",{appName:e.name})}const r=n.initialize({options:t});return ant(e,t.provider,t.isTokenAutoRefreshEnabled),As(e).isTokenAutoRefreshEnabled&&rve(r,"INTERNAL",()=>{}),r}function ant(e,t,n){const r=Stt(e,Object.assign({},Ybe));r.activated=!0,r.provider=t,r.cachedTokenPromise=jtt(e).then(i=>(i&&Mv(i)&&(r.token=i,sve(e,{token:i.token})),i)),r.isTokenAutoRefreshEnabled=n===void 0?e.automaticDataCollectionEnabled:n,r.provider.initialize(e)}const unt="app-check",mie="app-check-internal";function lnt(){Cp(new Mf(unt,e=>{const t=e.getProvider("app").getImmediate(),n=e.getProvider("heartbeat");return Ytt(t,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider(mie).initialize()})),Cp(new Mf(mie,e=>{const t=e.getProvider("app-check").getImmediate();return Ktt(t)},"PUBLIC").setInstantiationMode("EXPLICIT")),rd(Xtt,Qtt)}lnt();function ove(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const cnt=ove,ave=new Kw("auth","Firebase",ove());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QP=new aO("@firebase/auth");function dnt(e,...t){QP.logLevel<=Bn.WARN&&QP.warn(`Auth (${G1}): ${e}`,...t)}function nD(e,...t){QP.logLevel<=Bn.ERROR&&QP.error(`Auth (${G1}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bf(e,...t){throw Cq(e,...t)}function id(e,...t){return Cq(e,...t)}function Tq(e,t,n){const r=Object.assign(Object.assign({},cnt()),{[t]:n});return new Kw("auth","Firebase",r).create(t,{appName:e.name})}function h0(e){return Tq(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function fnt(e,t,n){const r=n;if(!(t instanceof r))throw r.name!==t.constructor.name&&Bf(e,"argument-error"),Tq(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Cq(e,...t){if(typeof e!="string"){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return ave.create(e,...t)}function pn(e,t,...n){if(!e)throw Cq(t,...n)}function Qh(e){const t="INTERNAL ASSERTION FAILED: "+e;throw nD(t),new Error(t)}function kp(e,t){e||Qh(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $B(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.href)||""}function hnt(){return gie()==="http:"||gie()==="https:"}function gie(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pnt(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(hnt()||AKe()||"connection"in navigator)?navigator.onLine:!0}function mnt(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bS{constructor(t,n){this.shortDelay=t,this.longDelay=n,kp(n>t,"Short delay should be less than long delay!"),this.isMobile=TKe()||kKe()}get(){return pnt()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sq(e,t){kp(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uve{static initialize(t,n,r){this.fetchImpl=t,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Qh("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Qh("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Qh("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gnt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ynt=new bS(3e4,6e4);function AO(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function nE(e,t,n,r,i={}){return lve(e,i,async()=>{let s={},o={};r&&(t==="GET"?o=r:s={body:JSON.stringify(r)});const a=uS(Object.assign({key:e.config.apiKey},o)).slice(1),u=await e._getAdditionalHeaders();u["Content-Type"]="application/json",e.languageCode&&(u["X-Firebase-Locale"]=e.languageCode);const l=Object.assign({method:t,headers:u},s);return SKe()||(l.referrerPolicy="no-referrer"),uve.fetch()(dve(e,e.config.apiHost,n,a),l)})}async function lve(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},gnt),t);try{const i=new bnt(e),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw eI(e,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw eI(e,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw eI(e,"email-already-in-use",o);if(u==="USER_DISABLED")throw eI(e,"user-disabled",o);const c=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw Tq(e,c,l);Bf(e,c)}}catch(i){if(i instanceof th)throw i;Bf(e,"network-request-failed",{message:String(i)})}}async function cve(e,t,n,r,i={}){const s=await nE(e,t,n,r,i);return"mfaPendingCredential"in s&&Bf(e,"multi-factor-auth-required",{_serverResponse:s}),s}function dve(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?Sq(e.config,i):`${e.config.apiScheme}://${i}`}class bnt{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(id(this.auth,"network-request-failed")),ynt.get())})}}function eI(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=id(e,t,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vnt(e,t){return nE(e,"POST","/v1/accounts:delete",t)}async function fve(e,t){return nE(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t2(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function xnt(e,t=!1){const n=Xr(e),r=await n.getIdToken(t),i=Aq(r);pn(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:t2(J8(i.auth_time)),issuedAtTime:t2(J8(i.iat)),expirationTime:t2(J8(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function J8(e){return Number(e)*1e3}function Aq(e){const[t,n,r]=e.split(".");if(t===void 0||n===void 0||r===void 0)return nD("JWT malformed, contained fewer than 3 sections"),null;try{const i=Jye(n);return i?JSON.parse(i):(nD("Failed to decode base64 JWT payload"),null)}catch(i){return nD("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function yie(e){const t=Aq(e);return pn(t,"internal-error"),pn(typeof t.exp<"u","internal-error"),pn(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G2(e,t,n=!1){if(n)return t;try{return await t}catch(r){throw r instanceof th&&wnt(r)&&e.auth.currentUser===e&&await e.auth.signOut(),r}}function wnt({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ent{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MB{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=t2(this.lastLoginAt),this.creationTime=t2(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JP(e){var t;const n=e.auth,r=await e.getIdToken(),i=await G2(e,fve(n,{idToken:r}));pn(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=!((t=s.providerUserInfo)===null||t===void 0)&&t.length?hve(s.providerUserInfo):[],a=Tnt(e.providerData,o),u=e.isAnonymous,l=!(e.email&&s.passwordHash)&&!(a!=null&&a.length),c=u?l:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new MB(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(e,d)}async function _nt(e){const t=Xr(e);await JP(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function Tnt(e,t){return[...e.filter(r=>!t.some(i=>i.providerId===r.providerId)),...t]}function hve(e){return e.map(t=>{var{providerId:n}=t,r=zC(t,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cnt(e,t){const n=await lve(e,{},async()=>{const r=uS({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:s}=e.config,o=dve(e,i,"/v1/token",`key=${s}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",uve.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Snt(e,t){return nE(e,"POST","/v2/accounts:revokeToken",AO(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zv{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){pn(t.idToken,"internal-error"),pn(typeof t.idToken<"u","internal-error"),pn(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):yie(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){pn(t.length!==0,"internal-error");const n=yie(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(pn(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await Cnt(t,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(t,n,r){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Zv;return r&&(pn(typeof r=="string","internal-error",{appName:t}),o.refreshToken=r),i&&(pn(typeof i=="string","internal-error",{appName:t}),o.accessToken=i),s&&(pn(typeof s=="number","internal-error",{appName:t}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Zv,this.toJSON())}_performRefresh(){return Qh("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Am(e,t){pn(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class Jh{constructor(t){var{uid:n,auth:r,stsTokenManager:i}=t,s=zC(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ent(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new MB(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(t){const n=await G2(this,this.stsTokenManager.getToken(this.auth,t));return pn(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return xnt(this,t)}reload(){return _nt(this)}_assign(t){this!==t&&(pn(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new Jh(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){pn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),n&&await JP(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(pf(this.auth.app))return Promise.reject(h0(this.auth));const t=await this.getIdToken();return await G2(this,vnt(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var r,i,s,o,a,u,l,c;const d=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(i=n.email)!==null&&i!==void 0?i:void 0,h=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,m=(a=n.tenantId)!==null&&a!==void 0?a:void 0,y=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,v=(l=n.createdAt)!==null&&l!==void 0?l:void 0,b=(c=n.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:w,emailVerified:E,isAnonymous:_,providerData:C,stsTokenManager:S}=n;pn(w&&S,t,"internal-error");const k=Zv.fromJSON(this.name,S);pn(typeof w=="string",t,"internal-error"),Am(d,t.name),Am(f,t.name),pn(typeof E=="boolean",t,"internal-error"),pn(typeof _=="boolean",t,"internal-error"),Am(h,t.name),Am(p,t.name),Am(m,t.name),Am(y,t.name),Am(v,t.name),Am(b,t.name);const R=new Jh({uid:w,auth:t,email:f,emailVerified:E,displayName:d,isAnonymous:_,photoURL:p,phoneNumber:h,tenantId:m,stsTokenManager:k,createdAt:v,lastLoginAt:b});return C&&Array.isArray(C)&&(R.providerData=C.map(N=>Object.assign({},N))),y&&(R._redirectEventId=y),R}static async _fromIdTokenResponse(t,n,r=!1){const i=new Zv;i.updateFromServerResponse(n);const s=new Jh({uid:n.localId,auth:t,stsTokenManager:i,isAnonymous:r});return await JP(s),s}static async _fromGetAccountInfoResponse(t,n,r){const i=n.users[0];pn(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?hve(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new Zv;a.updateFromIdToken(r);const u=new Jh({uid:i.localId,auth:t,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new MB(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,l),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bie=new Map;function Zh(e){kp(e instanceof Function,"Expected a class definition");let t=bie.get(e);return t?(kp(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,bie.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pve{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}pve.type="NONE";const vie=pve;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rD(e,t,n){return`firebase:${e}:${t}:${n}`}class ex{constructor(t,n,r){this.persistence=t,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=rD(this.userKey,i.apiKey,s),this.fullPersistenceKey=rD("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?Jh._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,r="authUser"){if(!n.length)return new ex(Zh(vie),t,r);const i=(await Promise.all(n.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l);let s=i[0]||Zh(vie);const o=rD(r,t.config.apiKey,t.name);let a=null;for(const l of n)try{const c=await l._get(o);if(c){const d=Jh._fromJSON(t,c);l!==s&&(a=d),s=l;break}}catch{}const u=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new ex(s,t,r):(s=u[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async l=>{if(l!==s)try{await l._remove(o)}catch{}})),new ex(s,t,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xie(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(bve(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(mve(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(xve(t))return"Blackberry";if(wve(t))return"Webos";if(gve(t))return"Safari";if((t.includes("chrome/")||yve(t))&&!t.includes("edge/"))return"Chrome";if(vve(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=e.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function mve(e=ma()){return/firefox\//i.test(e)}function gve(e=ma()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function yve(e=ma()){return/crios\//i.test(e)}function bve(e=ma()){return/iemobile/i.test(e)}function vve(e=ma()){return/android/i.test(e)}function xve(e=ma()){return/blackberry/i.test(e)}function wve(e=ma()){return/webos/i.test(e)}function kq(e=ma()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Ant(e=ma()){var t;return kq(e)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function knt(){return IKe()&&document.documentMode===10}function Eve(e=ma()){return kq(e)||vve(e)||wve(e)||xve(e)||/windows phone/i.test(e)||bve(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _ve(e,t=[]){let n;switch(e){case"Browser":n=xie(ma());break;case"Worker":n=`${xie(ma())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${G1}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Int{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const r=s=>new Promise((o,a)=>{try{const u=t(s);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const r of this.queue)await r(t),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rnt(e,t={}){return nE(e,"GET","/v2/passwordPolicy",AO(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dnt=6;class Pnt{constructor(t){var n,r,i,s;const o=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:Dnt,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=t.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=t.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var n,r,i,s,o,a;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,u),this.validatePasswordCharacterOptions(t,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(t,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=t.length>=r),i&&(n.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<t.length;i++)r=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nnt{constructor(t,n,r,i){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new wie(this),this.idTokenSubscription=new wie(this),this.beforeStateQueue=new Int(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ave,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=Zh(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await ex.create(this,t),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await fve(this,{idToken:t}),r=await Jh._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var n;if(pf(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(t);(!o||o===a)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return pn(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await JP(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=mnt()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(pf(this.app))return Promise.reject(h0(this));const n=t?Xr(t):null;return n&&pn(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&pn(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return pf(this.app)?Promise.reject(h0(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return pf(this.app)?Promise.reject(h0(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Zh(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await Rnt(this),n=new Pnt(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new Kw("auth","Firebase",t())}onAuthStateChanged(t,n,r){return this.registerStateListener(this.authStateSubscription,t,n,r)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,r){return this.registerStateListener(this.idTokenSubscription,t,n,r)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await Snt(this,r)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,n){const r=await this.getOrInitRedirectPersistenceManager(n);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&Zh(t)||this._popupRedirectResolver;pn(n,this,"argument-error"),this.redirectPersistenceManager=await ex.create(this,[Zh(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(pn(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const u=t.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=t.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return pn(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=_ve(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var t;const n=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return n!=null&&n.error&&dnt(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function vS(e){return Xr(e)}class wie{constructor(t){this.auth=t,this.observer=null,this.addObserver=MKe(n=>this.observer=n)}get next(){return pn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Iq={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Ont(e){Iq=e}function $nt(e){return Iq.loadJS(e)}function Mnt(){return Iq.gapiScript}function Lnt(e){return`__${e}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fnt(e,t){const n=Xw(e,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if($2(s,t??{}))return i;Bf(i,"already-initialized")}return n.initialize({options:t})}function Bnt(e,t){const n=(t==null?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Zh);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t==null?void 0:t.popupRedirectResolver)}function jnt(e,t,n){const r=vS(e);pn(r._canInitEmulator,r,"emulator-config-failed"),pn(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!1,s=Tve(t),{host:o,port:a}=znt(t),u=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),Unt()}function Tve(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function znt(e){const t=Tve(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:Eie(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:Eie(o)}}}function Eie(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function Unt(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cve{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return Qh("not implemented")}_getIdTokenResponse(t){return Qh("not implemented")}_linkToIdToken(t,n){return Qh("not implemented")}_getReauthenticationResolver(t){return Qh("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tx(e,t){return cve(e,"POST","/v1/accounts:signInWithIdp",AO(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vnt="http://localhost";class Zy extends Cve{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new Zy(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):Bf("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:i}=n,s=zC(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Zy(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(t){const n=this.buildRequest();return tx(t,n)}_linkToIdToken(t,n){const r=this.buildRequest();return r.idToken=n,tx(t,r)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,tx(t,n)}buildRequest(){const t={requestUri:Vnt,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=uS(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rq{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xS extends Rq{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qm extends xS{constructor(){super("facebook.com")}static credential(t){return Zy._fromParams({providerId:qm.PROVIDER_ID,signInMethod:qm.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return qm.credentialFromTaggedObject(t)}static credentialFromError(t){return qm.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return qm.credential(t.oauthAccessToken)}catch{return null}}}qm.FACEBOOK_SIGN_IN_METHOD="facebook.com";qm.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wh extends xS{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return Zy._fromParams({providerId:Wh.PROVIDER_ID,signInMethod:Wh.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return Wh.credentialFromTaggedObject(t)}static credentialFromError(t){return Wh.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Wh.credential(n,r)}catch{return null}}}Wh.GOOGLE_SIGN_IN_METHOD="google.com";Wh.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm extends xS{constructor(){super("github.com")}static credential(t){return Zy._fromParams({providerId:Wm.PROVIDER_ID,signInMethod:Wm.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Wm.credentialFromTaggedObject(t)}static credentialFromError(t){return Wm.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Wm.credential(t.oauthAccessToken)}catch{return null}}}Wm.GITHUB_SIGN_IN_METHOD="github.com";Wm.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm extends xS{constructor(){super("twitter.com")}static credential(t,n){return Zy._fromParams({providerId:Gm.PROVIDER_ID,signInMethod:Gm.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return Gm.credentialFromTaggedObject(t)}static credentialFromError(t){return Gm.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Gm.credential(n,r)}catch{return null}}}Gm.TWITTER_SIGN_IN_METHOD="twitter.com";Gm.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hnt(e,t){return cve(e,"POST","/v1/accounts:signUp",AO(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I0{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,r,i=!1){const s=await Jh._fromIdTokenResponse(t,r,i),o=_ie(r);return new I0({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(t,n,r){await t._updateTokensIfNecessary(r,!0);const i=_ie(r);return new I0({user:t,providerId:i,_tokenResponse:r,operationType:n})}}function _ie(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qnt(e){var t;if(pf(e.app))return Promise.reject(h0(e));const n=vS(e);if(await n._initializationPromise,!((t=n.currentUser)===null||t===void 0)&&t.isAnonymous)return new I0({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await Hnt(n,{returnSecureToken:!0}),i=await I0._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZP extends th{constructor(t,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,ZP.prototype),this.customData={appName:t.name,tenantId:(s=t.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,i){return new ZP(t,n,r,i)}}function Sve(e,t,n,r){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?ZP._fromErrorAndOperation(e,s,t,r):s})}async function Wnt(e,t,n=!1){const r=await G2(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return I0._forOperation(e,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gnt(e,t,n=!1){const{auth:r}=e;if(pf(r.app))return Promise.reject(h0(r));const i="reauthenticate";try{const s=await G2(e,Sve(r,i,t,e),n);pn(s.idToken,r,"internal-error");const o=Aq(s.idToken);pn(o,r,"internal-error");const{sub:a}=o;return pn(e.uid===a,r,"user-mismatch"),I0._forOperation(e,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Bf(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ynt(e,t,n=!1){if(pf(e.app))return Promise.reject(h0(e));const r="signIn",i=await Sve(e,r,t),s=await I0._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}function Knt(e,t,n,r){return Xr(e).onIdTokenChanged(t,n,r)}function Xnt(e,t,n){return Xr(e).beforeAuthStateChanged(t,n)}function Qnt(e,t,n,r){return Xr(e).onAuthStateChanged(t,n,r)}function Jnt(e){return Xr(e).signOut()}const e3="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ave{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(e3,"1"),this.storage.removeItem(e3),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Znt=1e3,ert=10;class kve extends Ave{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Eve(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&t(n,i,r)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((o,a,u)=>{this.notifyListeners(o,u)});return}const r=t.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);knt()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,ert):i()}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)})},Znt)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}kve.type="LOCAL";const trt=kve;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ive extends Ave{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}Ive.type="SESSION";const Rve=Ive;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nrt(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kO{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(i=>i.isListeningto(t));if(n)return n;const r=new kO(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async l=>l(n.origin,s)),u=await nrt(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}kO.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dq(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rrt{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,u)=>{const l=Dq("",20);i.port1.start();const c=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(d){const f=d;if(f.data.eventId===l)switch(f.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(f.data.response);break;default:clearTimeout(c),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wf(){return window}function irt(e){wf().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dve(){return typeof wf().WorkerGlobalScope<"u"&&typeof wf().importScripts=="function"}async function srt(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function ort(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)===null||e===void 0?void 0:e.controller)||null}function art(){return Dve()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pve="firebaseLocalStorageDb",urt=1,t3="firebaseLocalStorage",Nve="fbase_key";class wS{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function IO(e,t){return e.transaction([t3],t?"readwrite":"readonly").objectStore(t3)}function lrt(){const e=indexedDB.deleteDatabase(Pve);return new wS(e).toPromise()}function LB(){const e=indexedDB.open(Pve,urt);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const r=e.result;try{r.createObjectStore(t3,{keyPath:Nve})}catch(i){n(i)}}),e.addEventListener("success",async()=>{const r=e.result;r.objectStoreNames.contains(t3)?t(r):(r.close(),await lrt(),t(await LB()))})})}async function Tie(e,t,n){const r=IO(e,!0).put({[Nve]:t,value:n});return new wS(r).toPromise()}async function crt(e,t){const n=IO(e,!1).get(t),r=await new wS(n).toPromise();return r===void 0?null:r.value}function Cie(e,t){const n=IO(e,!0).delete(t);return new wS(n).toPromise()}const drt=800,frt=3;class Ove{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await LB(),this.db)}async _withRetries(t){let n=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(n++>frt)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Dve()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=kO._getInstance(art()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await srt(),!this.activeServiceWorker)return;this.sender=new rrt(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||ort()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await LB();return await Tie(t,e3,"1"),await Cie(t,e3),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Tie(r,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(r=>crt(r,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Cie(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(i=>{const s=IO(i,!1).getAll();return new wS(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(t.length!==0)for(const{fbase_key:i,value:s}of t)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),drt)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Ove.type="LOCAL";const hrt=Ove;new bS(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $ve(e,t){return t?Zh(t):(pn(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pq extends Cve{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return tx(t,this._buildIdpRequest())}_linkToIdToken(t,n){return tx(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return tx(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function prt(e){return Ynt(e.auth,new Pq(e),e.bypassAuthState)}function mrt(e){const{auth:t,user:n}=e;return pn(n,t,"internal-error"),Gnt(n,new Pq(e),e.bypassAuthState)}async function grt(e){const{auth:t,user:n}=e;return pn(n,t,"internal-error"),Wnt(n,new Pq(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mve{constructor(t,n,r,i,s=!1){this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=t;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(l){this.reject(l)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return prt;case"linkViaPopup":case"linkViaRedirect":return grt;case"reauthViaPopup":case"reauthViaRedirect":return mrt;default:Bf(this.auth,"internal-error")}}resolve(t){kp(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){kp(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yrt=new bS(2e3,1e4);async function brt(e,t,n){if(pf(e.app))return Promise.reject(id(e,"operation-not-supported-in-this-environment"));const r=vS(e);fnt(e,t,Rq);const i=$ve(r,n);return new ky(r,"signInViaPopup",t,i).executeNotNull()}class ky extends Mve{constructor(t,n,r,i,s){super(t,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,ky.currentPopupAction&&ky.currentPopupAction.cancel(),ky.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return pn(t,this.auth,"internal-error"),t}async onExecution(){kp(this.filter.length===1,"Popup operations only handle one event");const t=Dq();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(id(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(id(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ky.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(id(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,yrt.get())};t()}}ky.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vrt="pendingRedirect",iD=new Map;class xrt extends Mve{constructor(t,n,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let t=iD.get(this.auth._key());if(!t){try{const r=await wrt(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(n){t=()=>Promise.reject(n)}iD.set(this.auth._key(),t)}return this.bypassAuthState||iD.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function wrt(e,t){const n=Trt(t),r=_rt(e);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function Ert(e,t){iD.set(e._key(),t)}function _rt(e){return Zh(e._redirectPersistence)}function Trt(e){return rD(vrt,e.config.apiKey,e.name)}async function Crt(e,t,n=!1){if(pf(e.app))return Promise.reject(h0(e));const r=vS(e),i=$ve(r,t),o=await new xrt(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Srt=10*60*1e3;class Art{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(n=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!krt(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var r;if(t.error&&!Lve(t)){const i=((r=t.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(id(this.auth,i))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const r=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=Srt&&this.cachedEventUids.clear(),this.cachedEventUids.has(Sie(t))}saveEventToCache(t){this.cachedEventUids.add(Sie(t)),this.lastProcessedEventTime=Date.now()}}function Sie(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function Lve({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function krt(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Lve(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Irt(e,t={}){return nE(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rrt=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Drt=/^https?/;async function Prt(e){if(e.config.emulator)return;const{authorizedDomains:t}=await Irt(e);for(const n of t)try{if(Nrt(n))return}catch{}Bf(e,"unauthorized-domain")}function Nrt(e){const t=$B(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const o=new URL(e);return o.hostname===""&&r===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!Drt.test(n))return!1;if(Rrt.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ort=new bS(3e4,6e4);function Aie(){const e=wf().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function $rt(e){return new Promise((t,n)=>{var r,i,s;function o(){Aie(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Aie(),n(id(e,"network-request-failed"))},timeout:Ort.get()})}if(!((i=(r=wf().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)t(gapi.iframes.getContext());else if(!((s=wf().gapi)===null||s===void 0)&&s.load)o();else{const a=Lnt("iframefcb");return wf()[a]=()=>{gapi.load?o():n(id(e,"network-request-failed"))},$nt(`${Mnt()}?onload=${a}`).catch(u=>n(u))}}).catch(t=>{throw sD=null,t})}let sD=null;function Mrt(e){return sD=sD||$rt(e),sD}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lrt=new bS(5e3,15e3),Frt="__/auth/iframe",Brt="emulator/auth/iframe",jrt={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},zrt=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Urt(e){const t=e.config;pn(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Sq(t,Brt):`https://${e.config.authDomain}/${Frt}`,r={apiKey:t.apiKey,appName:e.name,v:G1},i=zrt.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${uS(r).slice(1)}`}async function Vrt(e){const t=await Mrt(e),n=wf().gapi;return pn(n,e,"internal-error"),t.open({where:document.body,url:Urt(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:jrt,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=id(e,"network-request-failed"),a=wf().setTimeout(()=>{s(o)},Lrt.get());function u(){wf().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hrt={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},qrt=500,Wrt=600,Grt="_blank",Yrt="http://localhost";class kie{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Krt(e,t,n,r=qrt,i=Wrt){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u=Object.assign(Object.assign({},Hrt),{width:r.toString(),height:i.toString(),top:s,left:o}),l=ma().toLowerCase();n&&(a=yve(l)?Grt:n),mve(l)&&(t=t||Yrt,u.scrollbars="yes");const c=Object.entries(u).reduce((f,[h,p])=>`${f}${h}=${p},`,"");if(Ant(l)&&a!=="_self")return Xrt(t||"",a),new kie(null);const d=window.open(t||"",a,c);pn(d,e,"popup-blocked");try{d.focus()}catch{}return new kie(d)}function Xrt(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qrt="__/auth/handler",Jrt="emulator/auth/handler",Zrt=encodeURIComponent("fac");async function Iie(e,t,n,r,i,s){pn(e.config.authDomain,e,"auth-domain-config-required"),pn(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:G1,eventId:i};if(t instanceof Rq){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",$Ke(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[c,d]of Object.entries({}))o[c]=d}if(t instanceof xS){const c=t.getScopes().filter(d=>d!=="");c.length>0&&(o.scopes=c.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const c of Object.keys(a))a[c]===void 0&&delete a[c];const u=await e._getAppCheckToken(),l=u?`#${Zrt}=${encodeURIComponent(u)}`:"";return`${eit(e)}?${uS(a).slice(1)}${l}`}function eit({config:e}){return e.emulator?Sq(e,Jrt):`https://${e.authDomain}/${Qrt}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z8="webStorageSupport";class tit{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Rve,this._completeRedirectFn=Crt,this._overrideRedirectResult=Ert}async _openPopup(t,n,r,i){var s;kp((s=this.eventManagers[t._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await Iie(t,n,r,$B(),i);return Krt(t,o,Dq())}async _openRedirect(t,n,r,i){await this._originValidation(t);const s=await Iie(t,n,r,$B(),i);return irt(s),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(kp(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(t);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(t){const n=await Vrt(t),r=new Art(t);return n.register("authEvent",i=>(pn(i==null?void 0:i.authEvent,t,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,r}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(Z8,{type:Z8},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Z8];o!==void 0&&n(!!o),Bf(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Prt(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return Eve()||gve()||kq()}}const Fve=tit;var Rie="@firebase/auth",Die="1.8.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nit{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(r=>{t((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){pn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rit(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function iit(e){Cp(new Mf("auth",(t,{options:n})=>{const r=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;pn(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:a,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_ve(e)},l=new Nnt(r,i,s,u);return Bnt(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,r)=>{t.getProvider("auth-internal").initialize()})),Cp(new Mf("auth-internal",t=>{const n=vS(t.getProvider("auth").getImmediate());return(r=>new nit(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),rd(Rie,Die,rit(e)),rd(Rie,Die,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sit=5*60,oit=n1e("authIdTokenMaxAge")||sit;let Pie=null;const ait=e=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>oit)return;const i=n==null?void 0:n.token;Pie!==i&&(Pie=i,await fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function n3(e=DH()){const t=Xw(e,"auth");if(t.isInitialized())return t.getImmediate();const n=Fnt(e,{popupRedirectResolver:Fve,persistence:[hrt,trt,Rve]}),r=n1e("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=ait(s.toString());Xnt(n,o,()=>o(n.currentUser)),Knt(n,a=>o(a))}}const i=e1e("auth");return i&&jnt(n,`http://${i}`),n}function uit(){var e,t;return(t=(e=document.getElementsByTagName("head"))===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:document}Ont({loadJS(e){return new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=i=>{const s=id("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",uit().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});iit("Browser");function aT(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var eL={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/var Nie;function lit(){return Nie||(Nie=1,function(e,t){(function(n){e.exports=n()})(function(){return function n(r,i,s){function o(l,c){if(!i[l]){if(!r[l]){var d=typeof aT=="function"&&aT;if(!c&&d)return d(l,!0);if(a)return a(l,!0);var f=new Error("Cannot find module '"+l+"'");throw f.code="MODULE_NOT_FOUND",f}var h=i[l]={exports:{}};r[l][0].call(h.exports,function(p){var m=r[l][1][p];return o(m||p)},h,h.exports,n,r,i,s)}return i[l].exports}for(var a=typeof aT=="function"&&aT,u=0;u<s.length;u++)o(s[u]);return o}({1:[function(n,r,i){(function(s){var o=s.MutationObserver||s.WebKitMutationObserver,a;if(o){var u=0,l=new o(p),c=s.document.createTextNode("");l.observe(c,{characterData:!0}),a=function(){c.data=u=++u%2}}else if(!s.setImmediate&&typeof s.MessageChannel<"u"){var d=new s.MessageChannel;d.port1.onmessage=p,a=function(){d.port2.postMessage(0)}}else"document"in s&&"onreadystatechange"in s.document.createElement("script")?a=function(){var y=s.document.createElement("script");y.onreadystatechange=function(){p(),y.onreadystatechange=null,y.parentNode.removeChild(y),y=null},s.document.documentElement.appendChild(y)}:a=function(){setTimeout(p,0)};var f,h=[];function p(){f=!0;for(var y,v,b=h.length;b;){for(v=h,h=[],y=-1;++y<b;)v[y]();b=h.length}f=!1}r.exports=m;function m(y){h.push(y)===1&&!f&&a()}}).call(this,typeof ws<"u"?ws:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(n,r,i){var s=n(1);function o(){}var a={},u=["REJECTED"],l=["FULFILLED"],c=["PENDING"];r.exports=d;function d(_){if(typeof _!="function")throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,_!==o&&m(this,_)}d.prototype.catch=function(_){return this.then(null,_)},d.prototype.then=function(_,C){if(typeof _!="function"&&this.state===l||typeof C!="function"&&this.state===u)return this;var S=new this.constructor(o);if(this.state!==c){var k=this.state===l?_:C;h(S,k,this.outcome)}else this.queue.push(new f(S,_,C));return S};function f(_,C,S){this.promise=_,typeof C=="function"&&(this.onFulfilled=C,this.callFulfilled=this.otherCallFulfilled),typeof S=="function"&&(this.onRejected=S,this.callRejected=this.otherCallRejected)}f.prototype.callFulfilled=function(_){a.resolve(this.promise,_)},f.prototype.otherCallFulfilled=function(_){h(this.promise,this.onFulfilled,_)},f.prototype.callRejected=function(_){a.reject(this.promise,_)},f.prototype.otherCallRejected=function(_){h(this.promise,this.onRejected,_)};function h(_,C,S){s(function(){var k;try{k=C(S)}catch(R){return a.reject(_,R)}k===_?a.reject(_,new TypeError("Cannot resolve promise with itself")):a.resolve(_,k)})}a.resolve=function(_,C){var S=y(p,C);if(S.status==="error")return a.reject(_,S.value);var k=S.value;if(k)m(_,k);else{_.state=l,_.outcome=C;for(var R=-1,N=_.queue.length;++R<N;)_.queue[R].callFulfilled(C)}return _},a.reject=function(_,C){_.state=u,_.outcome=C;for(var S=-1,k=_.queue.length;++S<k;)_.queue[S].callRejected(C);return _};function p(_){var C=_&&_.then;if(_&&(typeof _=="object"||typeof _=="function")&&typeof C=="function")return function(){C.apply(_,arguments)}}function m(_,C){var S=!1;function k(F){S||(S=!0,a.reject(_,F))}function R(F){S||(S=!0,a.resolve(_,F))}function N(){C(R,k)}var O=y(N);O.status==="error"&&k(O.value)}function y(_,C){var S={};try{S.value=_(C),S.status="success"}catch(k){S.status="error",S.value=k}return S}d.resolve=v;function v(_){return _ instanceof this?_:a.resolve(new this(o),_)}d.reject=b;function b(_){var C=new this(o);return a.reject(C,_)}d.all=w;function w(_){var C=this;if(Object.prototype.toString.call(_)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=_.length,k=!1;if(!S)return this.resolve([]);for(var R=new Array(S),N=0,O=-1,F=new this(o);++O<S;)$(_[O],O);return F;function $(z,q){C.resolve(z).then(W,function(J){k||(k=!0,a.reject(F,J))});function W(J){R[q]=J,++N===S&&!k&&(k=!0,a.resolve(F,R))}}}d.race=E;function E(_){var C=this;if(Object.prototype.toString.call(_)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=_.length,k=!1;if(!S)return this.resolve([]);for(var R=-1,N=new this(o);++R<S;)O(_[R]);return N;function O(F){C.resolve(F).then(function($){k||(k=!0,a.resolve(N,$))},function($){k||(k=!0,a.reject(N,$))})}}},{1:1}],3:[function(n,r,i){(function(s){typeof s.Promise!="function"&&(s.Promise=n(2))}).call(this,typeof ws<"u"?ws:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(n,r,i){var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(te){return typeof te}:function(te){return te&&typeof Symbol=="function"&&te.constructor===Symbol&&te!==Symbol.prototype?"symbol":typeof te};function o(te,ge){if(!(te instanceof ge))throw new TypeError("Cannot call a class as a function")}function a(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var u=a();function l(){try{if(!u||!u.open)return!1;var te=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),ge=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!te||ge)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function c(te,ge){te=te||[],ge=ge||{};try{return new Blob(te,ge)}catch(we){if(we.name!=="TypeError")throw we;for(var ae=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,Ee=new ae,Ae=0;Ae<te.length;Ae+=1)Ee.append(te[Ae]);return Ee.getBlob(ge.type)}}typeof Promise>"u"&&n(3);var d=Promise;function f(te,ge){ge&&te.then(function(ae){ge(null,ae)},function(ae){ge(ae)})}function h(te,ge,ae){typeof ge=="function"&&te.then(ge),typeof ae=="function"&&te.catch(ae)}function p(te){return typeof te!="string"&&(console.warn(te+" used as a key, but it is not a string."),te=String(te)),te}function m(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var y="local-forage-detect-blob-support",v=void 0,b={},w=Object.prototype.toString,E="readonly",_="readwrite";function C(te){for(var ge=te.length,ae=new ArrayBuffer(ge),Ee=new Uint8Array(ae),Ae=0;Ae<ge;Ae++)Ee[Ae]=te.charCodeAt(Ae);return ae}function S(te){return new d(function(ge){var ae=te.transaction(y,_),Ee=c([""]);ae.objectStore(y).put(Ee,"key"),ae.onabort=function(Ae){Ae.preventDefault(),Ae.stopPropagation(),ge(!1)},ae.oncomplete=function(){var Ae=navigator.userAgent.match(/Chrome\/(\d+)/),we=navigator.userAgent.match(/Edge\//);ge(we||!Ae||parseInt(Ae[1],10)>=43)}}).catch(function(){return!1})}function k(te){return typeof v=="boolean"?d.resolve(v):S(te).then(function(ge){return v=ge,v})}function R(te){var ge=b[te.name],ae={};ae.promise=new d(function(Ee,Ae){ae.resolve=Ee,ae.reject=Ae}),ge.deferredOperations.push(ae),ge.dbReady?ge.dbReady=ge.dbReady.then(function(){return ae.promise}):ge.dbReady=ae.promise}function N(te){var ge=b[te.name],ae=ge.deferredOperations.pop();if(ae)return ae.resolve(),ae.promise}function O(te,ge){var ae=b[te.name],Ee=ae.deferredOperations.pop();if(Ee)return Ee.reject(ge),Ee.promise}function F(te,ge){return new d(function(ae,Ee){if(b[te.name]=b[te.name]||Y(),te.db)if(ge)R(te),te.db.close();else return ae(te.db);var Ae=[te.name];ge&&Ae.push(te.version);var we=u.open.apply(u,Ae);ge&&(we.onupgradeneeded=function(qe){var nt=we.result;try{nt.createObjectStore(te.storeName),qe.oldVersion<=1&&nt.createObjectStore(y)}catch(it){if(it.name==="ConstraintError")console.warn('The database "'+te.name+'" has been upgraded from version '+qe.oldVersion+" to version "+qe.newVersion+', but the storage "'+te.storeName+'" already exists.');else throw it}}),we.onerror=function(qe){qe.preventDefault(),Ee(we.error)},we.onsuccess=function(){var qe=we.result;qe.onversionchange=function(nt){nt.target.close()},ae(qe),N(te)}})}function $(te){return F(te,!1)}function z(te){return F(te,!0)}function q(te,ge){if(!te.db)return!0;var ae=!te.db.objectStoreNames.contains(te.storeName),Ee=te.version<te.db.version,Ae=te.version>te.db.version;if(Ee&&(te.version!==ge&&console.warn('The database "'+te.name+`" can't be downgraded from version `+te.db.version+" to version "+te.version+"."),te.version=te.db.version),Ae||ae){if(ae){var we=te.db.version+1;we>te.version&&(te.version=we)}return!0}return!1}function W(te){return new d(function(ge,ae){var Ee=new FileReader;Ee.onerror=ae,Ee.onloadend=function(Ae){var we=btoa(Ae.target.result||"");ge({__local_forage_encoded_blob:!0,data:we,type:te.type})},Ee.readAsBinaryString(te)})}function J(te){var ge=C(atob(te.data));return c([ge],{type:te.type})}function K(te){return te&&te.__local_forage_encoded_blob}function Z(te){var ge=this,ae=ge._initReady().then(function(){var Ee=b[ge._dbInfo.name];if(Ee&&Ee.dbReady)return Ee.dbReady});return h(ae,te,te),ae}function U(te){R(te);for(var ge=b[te.name],ae=ge.forages,Ee=0;Ee<ae.length;Ee++){var Ae=ae[Ee];Ae._dbInfo.db&&(Ae._dbInfo.db.close(),Ae._dbInfo.db=null)}return te.db=null,$(te).then(function(we){return te.db=we,q(te)?z(te):we}).then(function(we){te.db=ge.db=we;for(var qe=0;qe<ae.length;qe++)ae[qe]._dbInfo.db=we}).catch(function(we){throw O(te,we),we})}function L(te,ge,ae,Ee){Ee===void 0&&(Ee=1);try{var Ae=te.db.transaction(te.storeName,ge);ae(null,Ae)}catch(we){if(Ee>0&&(!te.db||we.name==="InvalidStateError"||we.name==="NotFoundError"))return d.resolve().then(function(){if(!te.db||we.name==="NotFoundError"&&!te.db.objectStoreNames.contains(te.storeName)&&te.version<=te.db.version)return te.db&&(te.version=te.db.version+1),z(te)}).then(function(){return U(te).then(function(){L(te,ge,ae,Ee-1)})}).catch(ae);ae(we)}}function Y(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function j(te){var ge=this,ae={db:null};if(te)for(var Ee in te)ae[Ee]=te[Ee];var Ae=b[ae.name];Ae||(Ae=Y(),b[ae.name]=Ae),Ae.forages.push(ge),ge._initReady||(ge._initReady=ge.ready,ge.ready=Z);var we=[];function qe(){return d.resolve()}for(var nt=0;nt<Ae.forages.length;nt++){var it=Ae.forages[nt];it!==ge&&we.push(it._initReady().catch(qe))}var rt=Ae.forages.slice(0);return d.all(we).then(function(){return ae.db=Ae.db,$(ae)}).then(function(mt){return ae.db=mt,q(ae,ge._defaultConfig.version)?z(ae):mt}).then(function(mt){ae.db=Ae.db=mt,ge._dbInfo=ae;for(var Pt=0;Pt<rt.length;Pt++){var un=rt[Pt];un!==ge&&(un._dbInfo.db=ae.db,un._dbInfo.version=ae.version)}})}function G(te,ge){var ae=this;te=p(te);var Ee=new d(function(Ae,we){ae.ready().then(function(){L(ae._dbInfo,E,function(qe,nt){if(qe)return we(qe);try{var it=nt.objectStore(ae._dbInfo.storeName),rt=it.get(te);rt.onsuccess=function(){var mt=rt.result;mt===void 0&&(mt=null),K(mt)&&(mt=J(mt)),Ae(mt)},rt.onerror=function(){we(rt.error)}}catch(mt){we(mt)}})}).catch(we)});return f(Ee,ge),Ee}function X(te,ge){var ae=this,Ee=new d(function(Ae,we){ae.ready().then(function(){L(ae._dbInfo,E,function(qe,nt){if(qe)return we(qe);try{var it=nt.objectStore(ae._dbInfo.storeName),rt=it.openCursor(),mt=1;rt.onsuccess=function(){var Pt=rt.result;if(Pt){var un=Pt.value;K(un)&&(un=J(un));var Gt=te(un,Pt.key,mt++);Gt!==void 0?Ae(Gt):Pt.continue()}else Ae()},rt.onerror=function(){we(rt.error)}}catch(Pt){we(Pt)}})}).catch(we)});return f(Ee,ge),Ee}function ne(te,ge,ae){var Ee=this;te=p(te);var Ae=new d(function(we,qe){var nt;Ee.ready().then(function(){return nt=Ee._dbInfo,w.call(ge)==="[object Blob]"?k(nt.db).then(function(it){return it?ge:W(ge)}):ge}).then(function(it){L(Ee._dbInfo,_,function(rt,mt){if(rt)return qe(rt);try{var Pt=mt.objectStore(Ee._dbInfo.storeName);it===null&&(it=void 0);var un=Pt.put(it,te);mt.oncomplete=function(){it===void 0&&(it=null),we(it)},mt.onabort=mt.onerror=function(){var Gt=un.error?un.error:un.transaction.error;qe(Gt)}}catch(Gt){qe(Gt)}})}).catch(qe)});return f(Ae,ae),Ae}function pe(te,ge){var ae=this;te=p(te);var Ee=new d(function(Ae,we){ae.ready().then(function(){L(ae._dbInfo,_,function(qe,nt){if(qe)return we(qe);try{var it=nt.objectStore(ae._dbInfo.storeName),rt=it.delete(te);nt.oncomplete=function(){Ae()},nt.onerror=function(){we(rt.error)},nt.onabort=function(){var mt=rt.error?rt.error:rt.transaction.error;we(mt)}}catch(mt){we(mt)}})}).catch(we)});return f(Ee,ge),Ee}function de(te){var ge=this,ae=new d(function(Ee,Ae){ge.ready().then(function(){L(ge._dbInfo,_,function(we,qe){if(we)return Ae(we);try{var nt=qe.objectStore(ge._dbInfo.storeName),it=nt.clear();qe.oncomplete=function(){Ee()},qe.onabort=qe.onerror=function(){var rt=it.error?it.error:it.transaction.error;Ae(rt)}}catch(rt){Ae(rt)}})}).catch(Ae)});return f(ae,te),ae}function xe(te){var ge=this,ae=new d(function(Ee,Ae){ge.ready().then(function(){L(ge._dbInfo,E,function(we,qe){if(we)return Ae(we);try{var nt=qe.objectStore(ge._dbInfo.storeName),it=nt.count();it.onsuccess=function(){Ee(it.result)},it.onerror=function(){Ae(it.error)}}catch(rt){Ae(rt)}})}).catch(Ae)});return f(ae,te),ae}function Ce(te,ge){var ae=this,Ee=new d(function(Ae,we){if(te<0){Ae(null);return}ae.ready().then(function(){L(ae._dbInfo,E,function(qe,nt){if(qe)return we(qe);try{var it=nt.objectStore(ae._dbInfo.storeName),rt=!1,mt=it.openKeyCursor();mt.onsuccess=function(){var Pt=mt.result;if(!Pt){Ae(null);return}te===0||rt?Ae(Pt.key):(rt=!0,Pt.advance(te))},mt.onerror=function(){we(mt.error)}}catch(Pt){we(Pt)}})}).catch(we)});return f(Ee,ge),Ee}function ue(te){var ge=this,ae=new d(function(Ee,Ae){ge.ready().then(function(){L(ge._dbInfo,E,function(we,qe){if(we)return Ae(we);try{var nt=qe.objectStore(ge._dbInfo.storeName),it=nt.openKeyCursor(),rt=[];it.onsuccess=function(){var mt=it.result;if(!mt){Ee(rt);return}rt.push(mt.key),mt.continue()},it.onerror=function(){Ae(it.error)}}catch(mt){Ae(mt)}})}).catch(Ae)});return f(ae,te),ae}function se(te,ge){ge=m.apply(this,arguments);var ae=this.config();te=typeof te!="function"&&te||{},te.name||(te.name=te.name||ae.name,te.storeName=te.storeName||ae.storeName);var Ee=this,Ae;if(!te.name)Ae=d.reject("Invalid arguments");else{var we=te.name===ae.name&&Ee._dbInfo.db,qe=we?d.resolve(Ee._dbInfo.db):$(te).then(function(nt){var it=b[te.name],rt=it.forages;it.db=nt;for(var mt=0;mt<rt.length;mt++)rt[mt]._dbInfo.db=nt;return nt});te.storeName?Ae=qe.then(function(nt){if(nt.objectStoreNames.contains(te.storeName)){var it=nt.version+1;R(te);var rt=b[te.name],mt=rt.forages;nt.close();for(var Pt=0;Pt<mt.length;Pt++){var un=mt[Pt];un._dbInfo.db=null,un._dbInfo.version=it}var Gt=new d(function(kn,Xt){var ur=u.open(te.name,it);ur.onerror=function(fs){var Qa=ur.result;Qa.close(),Xt(fs)},ur.onupgradeneeded=function(){var fs=ur.result;fs.deleteObjectStore(te.storeName)},ur.onsuccess=function(){var fs=ur.result;fs.close(),kn(fs)}});return Gt.then(function(kn){rt.db=kn;for(var Xt=0;Xt<mt.length;Xt++){var ur=mt[Xt];ur._dbInfo.db=kn,N(ur._dbInfo)}}).catch(function(kn){throw(O(te,kn)||d.resolve()).catch(function(){}),kn})}}):Ae=qe.then(function(nt){R(te);var it=b[te.name],rt=it.forages;nt.close();for(var mt=0;mt<rt.length;mt++){var Pt=rt[mt];Pt._dbInfo.db=null}var un=new d(function(Gt,kn){var Xt=u.deleteDatabase(te.name);Xt.onerror=function(){var ur=Xt.result;ur&&ur.close(),kn(Xt.error)},Xt.onblocked=function(){console.warn('dropInstance blocked for database "'+te.name+'" until all open connections are closed')},Xt.onsuccess=function(){var ur=Xt.result;ur&&ur.close(),Gt(ur)}});return un.then(function(Gt){it.db=Gt;for(var kn=0;kn<rt.length;kn++){var Xt=rt[kn];N(Xt._dbInfo)}}).catch(function(Gt){throw(O(te,Gt)||d.resolve()).catch(function(){}),Gt})})}return f(Ae,ge),Ae}var me={_driver:"asyncStorage",_initStorage:j,_support:l(),iterate:X,getItem:G,setItem:ne,removeItem:pe,clear:de,length:xe,key:Ce,keys:ue,dropInstance:se};function be(){return typeof openDatabase=="function"}var Le="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ue="~~local_forage_type~",Ne=/^~~local_forage_type~([^~]+)~/,je="__lfsc__:",Ke=je.length,ut="arbf",pt="blob",xt="si08",De="ui08",wt="uic8",Kt="si16",Te="si32",Oe="ur16",lt="ui32",_t="fl32",St="fl64",en=Ke+ut.length,En=Object.prototype.toString;function sr(te){var ge=te.length*.75,ae=te.length,Ee,Ae=0,we,qe,nt,it;te[te.length-1]==="="&&(ge--,te[te.length-2]==="="&&ge--);var rt=new ArrayBuffer(ge),mt=new Uint8Array(rt);for(Ee=0;Ee<ae;Ee+=4)we=Le.indexOf(te[Ee]),qe=Le.indexOf(te[Ee+1]),nt=Le.indexOf(te[Ee+2]),it=Le.indexOf(te[Ee+3]),mt[Ae++]=we<<2|qe>>4,mt[Ae++]=(qe&15)<<4|nt>>2,mt[Ae++]=(nt&3)<<6|it&63;return rt}function Jr(te){var ge=new Uint8Array(te),ae="",Ee;for(Ee=0;Ee<ge.length;Ee+=3)ae+=Le[ge[Ee]>>2],ae+=Le[(ge[Ee]&3)<<4|ge[Ee+1]>>4],ae+=Le[(ge[Ee+1]&15)<<2|ge[Ee+2]>>6],ae+=Le[ge[Ee+2]&63];return ge.length%3===2?ae=ae.substring(0,ae.length-1)+"=":ge.length%3===1&&(ae=ae.substring(0,ae.length-2)+"=="),ae}function wn(te,ge){var ae="";if(te&&(ae=En.call(te)),te&&(ae==="[object ArrayBuffer]"||te.buffer&&En.call(te.buffer)==="[object ArrayBuffer]")){var Ee,Ae=je;te instanceof ArrayBuffer?(Ee=te,Ae+=ut):(Ee=te.buffer,ae==="[object Int8Array]"?Ae+=xt:ae==="[object Uint8Array]"?Ae+=De:ae==="[object Uint8ClampedArray]"?Ae+=wt:ae==="[object Int16Array]"?Ae+=Kt:ae==="[object Uint16Array]"?Ae+=Oe:ae==="[object Int32Array]"?Ae+=Te:ae==="[object Uint32Array]"?Ae+=lt:ae==="[object Float32Array]"?Ae+=_t:ae==="[object Float64Array]"?Ae+=St:ge(new Error("Failed to get type for BinaryArray"))),ge(Ae+Jr(Ee))}else if(ae==="[object Blob]"){var we=new FileReader;we.onload=function(){var qe=Ue+te.type+"~"+Jr(this.result);ge(je+pt+qe)},we.readAsArrayBuffer(te)}else try{ge(JSON.stringify(te))}catch(qe){console.error("Couldn't convert value into a JSON string: ",te),ge(null,qe)}}function An(te){if(te.substring(0,Ke)!==je)return JSON.parse(te);var ge=te.substring(en),ae=te.substring(Ke,en),Ee;if(ae===pt&&Ne.test(ge)){var Ae=ge.match(Ne);Ee=Ae[1],ge=ge.substring(Ae[0].length)}var we=sr(ge);switch(ae){case ut:return we;case pt:return c([we],{type:Ee});case xt:return new Int8Array(we);case De:return new Uint8Array(we);case wt:return new Uint8ClampedArray(we);case Kt:return new Int16Array(we);case Oe:return new Uint16Array(we);case Te:return new Int32Array(we);case lt:return new Uint32Array(we);case _t:return new Float32Array(we);case St:return new Float64Array(we);default:throw new Error("Unkown type: "+ae)}}var Hr={serialize:wn,deserialize:An,stringToBuffer:sr,bufferToString:Jr};function Ln(te,ge,ae,Ee){te.executeSql("CREATE TABLE IF NOT EXISTS "+ge.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],ae,Ee)}function Ns(te){var ge=this,ae={db:null};if(te)for(var Ee in te)ae[Ee]=typeof te[Ee]!="string"?te[Ee].toString():te[Ee];var Ae=new d(function(we,qe){try{ae.db=openDatabase(ae.name,String(ae.version),ae.description,ae.size)}catch(nt){return qe(nt)}ae.db.transaction(function(nt){Ln(nt,ae,function(){ge._dbInfo=ae,we()},function(it,rt){qe(rt)})},qe)});return ae.serializer=Hr,Ae}function Zr(te,ge,ae,Ee,Ae,we){te.executeSql(ae,Ee,Ae,function(qe,nt){nt.code===nt.SYNTAX_ERR?qe.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[ge.storeName],function(it,rt){rt.rows.length?we(it,nt):Ln(it,ge,function(){it.executeSql(ae,Ee,Ae,we)},we)},we):we(qe,nt)},we)}function qr(te,ge){var ae=this;te=p(te);var Ee=new d(function(Ae,we){ae.ready().then(function(){var qe=ae._dbInfo;qe.db.transaction(function(nt){Zr(nt,qe,"SELECT * FROM "+qe.storeName+" WHERE key = ? LIMIT 1",[te],function(it,rt){var mt=rt.rows.length?rt.rows.item(0).value:null;mt&&(mt=qe.serializer.deserialize(mt)),Ae(mt)},function(it,rt){we(rt)})})}).catch(we)});return f(Ee,ge),Ee}function ai(te,ge){var ae=this,Ee=new d(function(Ae,we){ae.ready().then(function(){var qe=ae._dbInfo;qe.db.transaction(function(nt){Zr(nt,qe,"SELECT * FROM "+qe.storeName,[],function(it,rt){for(var mt=rt.rows,Pt=mt.length,un=0;un<Pt;un++){var Gt=mt.item(un),kn=Gt.value;if(kn&&(kn=qe.serializer.deserialize(kn)),kn=te(kn,Gt.key,un+1),kn!==void 0){Ae(kn);return}}Ae()},function(it,rt){we(rt)})})}).catch(we)});return f(Ee,ge),Ee}function or(te,ge,ae,Ee){var Ae=this;te=p(te);var we=new d(function(qe,nt){Ae.ready().then(function(){ge===void 0&&(ge=null);var it=ge,rt=Ae._dbInfo;rt.serializer.serialize(ge,function(mt,Pt){Pt?nt(Pt):rt.db.transaction(function(un){Zr(un,rt,"INSERT OR REPLACE INTO "+rt.storeName+" (key, value) VALUES (?, ?)",[te,mt],function(){qe(it)},function(Gt,kn){nt(kn)})},function(un){if(un.code===un.QUOTA_ERR){if(Ee>0){qe(or.apply(Ae,[te,it,ae,Ee-1]));return}nt(un)}})})}).catch(nt)});return f(we,ae),we}function Os(te,ge,ae){return or.apply(this,[te,ge,ae,1])}function Al(te,ge){var ae=this;te=p(te);var Ee=new d(function(Ae,we){ae.ready().then(function(){var qe=ae._dbInfo;qe.db.transaction(function(nt){Zr(nt,qe,"DELETE FROM "+qe.storeName+" WHERE key = ?",[te],function(){Ae()},function(it,rt){we(rt)})})}).catch(we)});return f(Ee,ge),Ee}function zo(te){var ge=this,ae=new d(function(Ee,Ae){ge.ready().then(function(){var we=ge._dbInfo;we.db.transaction(function(qe){Zr(qe,we,"DELETE FROM "+we.storeName,[],function(){Ee()},function(nt,it){Ae(it)})})}).catch(Ae)});return f(ae,te),ae}function Bu(te){var ge=this,ae=new d(function(Ee,Ae){ge.ready().then(function(){var we=ge._dbInfo;we.db.transaction(function(qe){Zr(qe,we,"SELECT COUNT(key) as c FROM "+we.storeName,[],function(nt,it){var rt=it.rows.item(0).c;Ee(rt)},function(nt,it){Ae(it)})})}).catch(Ae)});return f(ae,te),ae}function ar(te,ge){var ae=this,Ee=new d(function(Ae,we){ae.ready().then(function(){var qe=ae._dbInfo;qe.db.transaction(function(nt){Zr(nt,qe,"SELECT key FROM "+qe.storeName+" WHERE id = ? LIMIT 1",[te+1],function(it,rt){var mt=rt.rows.length?rt.rows.item(0).key:null;Ae(mt)},function(it,rt){we(rt)})})}).catch(we)});return f(Ee,ge),Ee}function Wr(te){var ge=this,ae=new d(function(Ee,Ae){ge.ready().then(function(){var we=ge._dbInfo;we.db.transaction(function(qe){Zr(qe,we,"SELECT key FROM "+we.storeName,[],function(nt,it){for(var rt=[],mt=0;mt<it.rows.length;mt++)rt.push(it.rows.item(mt).key);Ee(rt)},function(nt,it){Ae(it)})})}).catch(Ae)});return f(ae,te),ae}function br(te){return new d(function(ge,ae){te.transaction(function(Ee){Ee.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(Ae,we){for(var qe=[],nt=0;nt<we.rows.length;nt++)qe.push(we.rows.item(nt).name);ge({db:te,storeNames:qe})},function(Ae,we){ae(we)})},function(Ee){ae(Ee)})})}function $s(te,ge){ge=m.apply(this,arguments);var ae=this.config();te=typeof te!="function"&&te||{},te.name||(te.name=te.name||ae.name,te.storeName=te.storeName||ae.storeName);var Ee=this,Ae;return te.name?Ae=new d(function(we){var qe;te.name===ae.name?qe=Ee._dbInfo.db:qe=openDatabase(te.name,"","",0),te.storeName?we({db:qe,storeNames:[te.storeName]}):we(br(qe))}).then(function(we){return new d(function(qe,nt){we.db.transaction(function(it){function rt(Gt){return new d(function(kn,Xt){it.executeSql("DROP TABLE IF EXISTS "+Gt,[],function(){kn()},function(ur,fs){Xt(fs)})})}for(var mt=[],Pt=0,un=we.storeNames.length;Pt<un;Pt++)mt.push(rt(we.storeNames[Pt]));d.all(mt).then(function(){qe()}).catch(function(Gt){nt(Gt)})},function(it){nt(it)})})}):Ae=d.reject("Invalid arguments"),f(Ae,ge),Ae}var Zn={_driver:"webSQLStorage",_initStorage:Ns,_support:be(),iterate:ai,getItem:qr,setItem:Os,removeItem:Al,clear:zo,length:Bu,key:ar,keys:Wr,dropInstance:$s};function mi(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function Ms(te,ge){var ae=te.name+"/";return te.storeName!==ge.storeName&&(ae+=te.storeName+"/"),ae}function as(){var te="_localforage_support_test";try{return localStorage.setItem(te,!0),localStorage.removeItem(te),!1}catch{return!0}}function lo(){return!as()||localStorage.length>0}function ju(te){var ge=this,ae={};if(te)for(var Ee in te)ae[Ee]=te[Ee];return ae.keyPrefix=Ms(te,ge._defaultConfig),lo()?(ge._dbInfo=ae,ae.serializer=Hr,d.resolve()):d.reject()}function gh(te){var ge=this,ae=ge.ready().then(function(){for(var Ee=ge._dbInfo.keyPrefix,Ae=localStorage.length-1;Ae>=0;Ae--){var we=localStorage.key(Ae);we.indexOf(Ee)===0&&localStorage.removeItem(we)}});return f(ae,te),ae}function Yn(te,ge){var ae=this;te=p(te);var Ee=ae.ready().then(function(){var Ae=ae._dbInfo,we=localStorage.getItem(Ae.keyPrefix+te);return we&&(we=Ae.serializer.deserialize(we)),we});return f(Ee,ge),Ee}function kl(te,ge){var ae=this,Ee=ae.ready().then(function(){for(var Ae=ae._dbInfo,we=Ae.keyPrefix,qe=we.length,nt=localStorage.length,it=1,rt=0;rt<nt;rt++){var mt=localStorage.key(rt);if(mt.indexOf(we)===0){var Pt=localStorage.getItem(mt);if(Pt&&(Pt=Ae.serializer.deserialize(Pt)),Pt=te(Pt,mt.substring(qe),it++),Pt!==void 0)return Pt}}});return f(Ee,ge),Ee}function gi(te,ge){var ae=this,Ee=ae.ready().then(function(){var Ae=ae._dbInfo,we;try{we=localStorage.key(te)}catch{we=null}return we&&(we=we.substring(Ae.keyPrefix.length)),we});return f(Ee,ge),Ee}function Xa(te){var ge=this,ae=ge.ready().then(function(){for(var Ee=ge._dbInfo,Ae=localStorage.length,we=[],qe=0;qe<Ae;qe++){var nt=localStorage.key(qe);nt.indexOf(Ee.keyPrefix)===0&&we.push(nt.substring(Ee.keyPrefix.length))}return we});return f(ae,te),ae}function co(te){var ge=this,ae=ge.keys().then(function(Ee){return Ee.length});return f(ae,te),ae}function sm(te,ge){var ae=this;te=p(te);var Ee=ae.ready().then(function(){var Ae=ae._dbInfo;localStorage.removeItem(Ae.keyPrefix+te)});return f(Ee,ge),Ee}function yh(te,ge,ae){var Ee=this;te=p(te);var Ae=Ee.ready().then(function(){ge===void 0&&(ge=null);var we=ge;return new d(function(qe,nt){var it=Ee._dbInfo;it.serializer.serialize(ge,function(rt,mt){if(mt)nt(mt);else try{localStorage.setItem(it.keyPrefix+te,rt),qe(we)}catch(Pt){(Pt.name==="QuotaExceededError"||Pt.name==="NS_ERROR_DOM_QUOTA_REACHED")&&nt(Pt),nt(Pt)}})})});return f(Ae,ae),Ae}function Od(te,ge){if(ge=m.apply(this,arguments),te=typeof te!="function"&&te||{},!te.name){var ae=this.config();te.name=te.name||ae.name,te.storeName=te.storeName||ae.storeName}var Ee=this,Ae;return te.name?Ae=new d(function(we){te.storeName?we(Ms(te,Ee._defaultConfig)):we(te.name+"/")}).then(function(we){for(var qe=localStorage.length-1;qe>=0;qe--){var nt=localStorage.key(qe);nt.indexOf(we)===0&&localStorage.removeItem(nt)}}):Ae=d.reject("Invalid arguments"),f(Ae,ge),Ae}var $d={_driver:"localStorageWrapper",_initStorage:ju,_support:mi(),iterate:kl,getItem:Yn,setItem:yh,removeItem:sm,clear:gh,length:co,key:gi,keys:Xa,dropInstance:Od},vc=function(ge,ae){return ge===ae||typeof ge=="number"&&typeof ae=="number"&&isNaN(ge)&&isNaN(ae)},om=function(ge,ae){for(var Ee=ge.length,Ae=0;Ae<Ee;){if(vc(ge[Ae],ae))return!0;Ae++}return!1},xc=Array.isArray||function(te){return Object.prototype.toString.call(te)==="[object Array]"},Fn={},bh={},us={INDEXEDDB:me,WEBSQL:Zn,LOCALSTORAGE:$d},zu=[us.INDEXEDDB._driver,us.WEBSQL._driver,us.LOCALSTORAGE._driver],ls=["dropInstance"],wc=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(ls),am={description:"",driver:zu.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Il(te,ge){te[ge]=function(){var ae=arguments;return te.ready().then(function(){return te[ge].apply(te,ae)})}}function cs(){for(var te=1;te<arguments.length;te++){var ge=arguments[te];if(ge)for(var ae in ge)ge.hasOwnProperty(ae)&&(xc(ge[ae])?arguments[0][ae]=ge[ae].slice():arguments[0][ae]=ge[ae])}return arguments[0]}var um=function(){function te(ge){o(this,te);for(var ae in us)if(us.hasOwnProperty(ae)){var Ee=us[ae],Ae=Ee._driver;this[ae]=Ae,Fn[Ae]||this.defineDriver(Ee)}this._defaultConfig=cs({},am),this._config=cs({},this._defaultConfig,ge),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return te.prototype.config=function(ae){if((typeof ae>"u"?"undefined":s(ae))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var Ee in ae){if(Ee==="storeName"&&(ae[Ee]=ae[Ee].replace(/\W/g,"_")),Ee==="version"&&typeof ae[Ee]!="number")return new Error("Database version must be a number.");this._config[Ee]=ae[Ee]}return"driver"in ae&&ae.driver?this.setDriver(this._config.driver):!0}else return typeof ae=="string"?this._config[ae]:this._config},te.prototype.defineDriver=function(ae,Ee,Ae){var we=new d(function(qe,nt){try{var it=ae._driver,rt=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!ae._driver){nt(rt);return}for(var mt=wc.concat("_initStorage"),Pt=0,un=mt.length;Pt<un;Pt++){var Gt=mt[Pt],kn=!om(ls,Gt);if((kn||ae[Gt])&&typeof ae[Gt]!="function"){nt(rt);return}}var Xt=function(){for(var Qa=function(fo){return function(){var yi=new Error("Method "+fo+" is not implemented by the current driver"),Ls=d.reject(yi);return f(Ls,arguments[arguments.length-1]),Ls}},Rl=0,lm=ls.length;Rl<lm;Rl++){var Md=ls[Rl];ae[Md]||(ae[Md]=Qa(Md))}};Xt();var ur=function(Qa){Fn[it]&&console.info("Redefining LocalForage driver: "+it),Fn[it]=ae,bh[it]=Qa,qe()};"_support"in ae?ae._support&&typeof ae._support=="function"?ae._support().then(ur,nt):ur(!!ae._support):ur(!0)}catch(fs){nt(fs)}});return h(we,Ee,Ae),we},te.prototype.driver=function(){return this._driver||null},te.prototype.getDriver=function(ae,Ee,Ae){var we=Fn[ae]?d.resolve(Fn[ae]):d.reject(new Error("Driver not found."));return h(we,Ee,Ae),we},te.prototype.getSerializer=function(ae){var Ee=d.resolve(Hr);return h(Ee,ae),Ee},te.prototype.ready=function(ae){var Ee=this,Ae=Ee._driverSet.then(function(){return Ee._ready===null&&(Ee._ready=Ee._initDriver()),Ee._ready});return h(Ae,ae,ae),Ae},te.prototype.setDriver=function(ae,Ee,Ae){var we=this;xc(ae)||(ae=[ae]);var qe=this._getSupportedDrivers(ae);function nt(){we._config.driver=we.driver()}function it(Pt){return we._extend(Pt),nt(),we._ready=we._initStorage(we._config),we._ready}function rt(Pt){return function(){var un=0;function Gt(){for(;un<Pt.length;){var kn=Pt[un];return un++,we._dbInfo=null,we._ready=null,we.getDriver(kn).then(it).catch(Gt)}nt();var Xt=new Error("No available storage method found.");return we._driverSet=d.reject(Xt),we._driverSet}return Gt()}}var mt=this._driverSet!==null?this._driverSet.catch(function(){return d.resolve()}):d.resolve();return this._driverSet=mt.then(function(){var Pt=qe[0];return we._dbInfo=null,we._ready=null,we.getDriver(Pt).then(function(un){we._driver=un._driver,nt(),we._wrapLibraryMethodsWithReady(),we._initDriver=rt(qe)})}).catch(function(){nt();var Pt=new Error("No available storage method found.");return we._driverSet=d.reject(Pt),we._driverSet}),h(this._driverSet,Ee,Ae),this._driverSet},te.prototype.supports=function(ae){return!!bh[ae]},te.prototype._extend=function(ae){cs(this,ae)},te.prototype._getSupportedDrivers=function(ae){for(var Ee=[],Ae=0,we=ae.length;Ae<we;Ae++){var qe=ae[Ae];this.supports(qe)&&Ee.push(qe)}return Ee},te.prototype._wrapLibraryMethodsWithReady=function(){for(var ae=0,Ee=wc.length;ae<Ee;ae++)Il(this,wc[ae])},te.prototype.createInstance=function(ae){return new te(ae)},te}(),ds=new um;r.exports=ds},{3:3}]},{},[4])(4)})}(eL)),eL.exports}var cit=lit();const Dv=Tl(cit),yo=[];for(let e=0;e<256;++e)yo.push((e+256).toString(16).slice(1));function dit(e,t=0){return(yo[e[t+0]]+yo[e[t+1]]+yo[e[t+2]]+yo[e[t+3]]+"-"+yo[e[t+4]]+yo[e[t+5]]+"-"+yo[e[t+6]]+yo[e[t+7]]+"-"+yo[e[t+8]]+yo[e[t+9]]+"-"+yo[e[t+10]]+yo[e[t+11]]+yo[e[t+12]]+yo[e[t+13]]+yo[e[t+14]]+yo[e[t+15]]).toLowerCase()}let tL;const fit=new Uint8Array(16);function hit(){if(!tL){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");tL=crypto.getRandomValues.bind(crypto)}return tL(fit)}const pit=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Oie={randomUUID:pit};function r3(e,t,n){var i;if(Oie.randomUUID&&!e)return Oie.randomUUID();e=e||{};const r=e.random??((i=e.rng)==null?void 0:i.call(e))??hit();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,dit(r)}var nL,$ie;function mit(){if($ie)return nL;$ie=1;var e="Expected a function",t=NaN,n="[object Symbol]",r=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,o=/^0o[0-7]+$/i,a=parseInt,u=typeof ws=="object"&&ws&&ws.Object===Object&&ws,l=typeof self=="object"&&self&&self.Object===Object&&self,c=u||l||Function("return this")(),d=Object.prototype,f=d.toString,h=Math.max,p=Math.min,m=function(){return c.Date.now()};function y(C,S,k){var R,N,O,F,$,z,q=0,W=!1,J=!1,K=!0;if(typeof C!="function")throw new TypeError(e);S=_(S)||0,b(k)&&(W=!!k.leading,J="maxWait"in k,O=J?h(_(k.maxWait)||0,S):O,K="trailing"in k?!!k.trailing:K);function Z(de){var xe=R,Ce=N;return R=N=void 0,q=de,F=C.apply(Ce,xe),F}function U(de){return q=de,$=setTimeout(j,S),W?Z(de):F}function L(de){var xe=de-z,Ce=de-q,ue=S-xe;return J?p(ue,O-Ce):ue}function Y(de){var xe=de-z,Ce=de-q;return z===void 0||xe>=S||xe<0||J&&Ce>=O}function j(){var de=m();if(Y(de))return G(de);$=setTimeout(j,L(de))}function G(de){return $=void 0,K&&R?Z(de):(R=N=void 0,F)}function X(){$!==void 0&&clearTimeout($),q=0,R=z=N=$=void 0}function ne(){return $===void 0?F:G(m())}function pe(){var de=m(),xe=Y(de);if(R=arguments,N=this,z=de,xe){if($===void 0)return U(z);if(J)return $=setTimeout(j,S),Z(z)}return $===void 0&&($=setTimeout(j,S)),F}return pe.cancel=X,pe.flush=ne,pe}function v(C,S,k){var R=!0,N=!0;if(typeof C!="function")throw new TypeError(e);return b(k)&&(R="leading"in k?!!k.leading:R,N="trailing"in k?!!k.trailing:N),y(C,S,{leading:R,maxWait:S,trailing:N})}function b(C){var S=typeof C;return!!C&&(S=="object"||S=="function")}function w(C){return!!C&&typeof C=="object"}function E(C){return typeof C=="symbol"||w(C)&&f.call(C)==n}function _(C){if(typeof C=="number")return C;if(E(C))return t;if(b(C)){var S=typeof C.valueOf=="function"?C.valueOf():C;C=b(S)?S+"":S}if(typeof C!="string")return C===0?C:+C;C=C.replace(r,"");var k=s.test(C);return k||o.test(C)?a(C.slice(2),k?2:8):i.test(C)?t:+C}return nL=v,nL}var git=mit();const yit=Tl(git);class Bve{constructor(t){Wo(this,"engine");Wo(this,"connected",!1);Wo(this,"currentParticipantId",null);this.engine=t}isConnected(){return this.connected}getEngine(){return this.engine}}async function i3(e){const t=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map(s=>s.toString(16).padStart(2,"0")).join("")}function v_(e){return e.participantId!==void 0}class Ul extends Bve{constructor(){super("firebase");Wo(this,"RECAPTCHAV3TOKEN","6LfVLgIrAAAAAJazthDIFoKIOgV_KkpmiOvpNBkq");Wo(this,"firestore");Wo(this,"collectionPrefix","prod-");Wo(this,"studyCollection");Wo(this,"storage");Wo(this,"studyId","");Wo(this,"localForage",Dv.createInstance({name:"currentParticipantId"}));Wo(this,"participantData",null);Wo(this,"throttleSaveAnswers",yit(async()=>{await this._saveAnswers()},3e3));Wo(this,"userManagementData",{});const n=mKe.parse(`
{
  apiKey: "AIzaSyBLIRJ1i1rBytMsDdhhTAr-zFsWX-js-ZA",
  authDomain: "mean-std-matrices.firebaseapp.com",
  projectId: "mean-std-matrices",
  storageBucket: "mean-std-matrices.firebasestorage.app",
  messagingSenderId: "239866566189",
  appId: "1:239866566189:web:03d2ced65a31480662caa4"
}
`),r=s1e(n);this.firestore=ctt(r,{}),this.storage=yre();try{ont(r,{provider:new _q(this.RECAPTCHAV3TOKEN),isTokenAutoRefreshEnabled:!1})}catch{console.warn("Failed to initialize Firebase App Check")}}async connect(){try{await ftt(this.firestore),this.connected=!0}catch{console.warn("Failed to connect to Firebase")}}async initializeStudyDb(n,r){try{const i=n3();if(!i.currentUser&&(await qnt(i),!i.currentUser))throw new Error("Login failed with firebase");this.studyCollection=uu(this.firestore,`${this.collectionPrefix}${n}`),this.studyId=n;const s=await this.getCurrentConfigHash(),o=await i3(JSON.stringify(r));if(await this._pushToFirebaseStorage(`configs/${o}`,"config",r),s&&s!==o){try{await this._deleteFromFirebaseStorage("","sequenceArray")}catch{}await this.clearCurrentParticipantId()}return await this._setCurrentConfigHash(o),Promise.resolve()}catch(i){return console.warn("Failed to connect to Firebase."),Promise.reject(i)}}async initializeParticipantSession(n,r,i,s,o){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(await this.getCurrentParticipantId(o),!this.currentParticipantId)throw new Error("Participant not initialized");const a=await this._getFromFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData"),u=await this.getModes(n);if(v_(a))return this.participantData=a,a;const l=await i3(JSON.stringify(i)),{currentRow:c,creationIndex:d}=await this.getSequence();return this.participantData={participantId:this.currentParticipantId,participantConfigHash:l,sequence:c,participantIndex:d,answers:{},searchParams:r,metadata:s,completed:!1,rejected:!1,participantTags:[]},u.dataCollectionEnabled&&await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData),this.participantData}async getCurrentConfigHash(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=ni(this.studyCollection,"configHash"),r=await Xk(n);return r.exists()?r.data().configHash:null}async _setCurrentConfigHash(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const r=ni(this.studyCollection,"configHash");await Yo(r,{configHash:n})}async getAllConfigsFromHash(n,r){const i=n.map(a=>{const u=Gu(this.storage,`${this.collectionPrefix}${r}/configs/${a}_config`);return this._getFromFirebaseStorageByRef(u,"config")}),s=await Promise.all(i),o={};return n.forEach((a,u)=>o[a]=s[u]),o}async getCurrentParticipantId(n){const r=await this.localForage.getItem("currentParticipantId");if(n)return this.currentParticipantId=n,await this.localForage.setItem("currentParticipantId",n),n;if(r)return this.currentParticipantId=r,r;if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");return this.currentParticipantId=r3(),await this.localForage.setItem("currentParticipantId",this.currentParticipantId),this.currentParticipantId}async clearCurrentParticipantId(){return await this.localForage.removeItem("currentParticipantId")}async saveAudio(n,r){let i=null;const s=async o=>{i||(i=setTimeout(async()=>{this._pushToFirebaseStorage(`/audio/${this.currentParticipantId}`,r,o.data)},500))};n.addEventListener("dataavailable",s),n.requestData()}async saveAnswers(n){if(!this.currentParticipantId||this.participantData===null)throw new Error("Participant not initialized");this.participantData={...this.participantData,answers:n},await this.throttleSaveAnswers(n)}async _saveAnswers(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId||this.participantData===null)throw new Error("Participant not initialized");await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData)}async setSequenceArray(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");await this._pushToFirebaseStorage("","sequenceArray",n)}async getSequenceArray(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=await this._getFromFirebaseStorage("","sequenceArray");return Array.isArray(n)?n:null}async getSequence(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const n=await this.getSequenceArray();if(!n)throw new Error("Latin square not initialized");const r=await this.getModes(this.studyId),i=ni(this.studyCollection,"sequenceAssignment");await Yo(i,{});const s=uu(i,"sequenceAssignment"),o=ni(s,this.currentParticipantId),a=K8(s,iie("rejected","==",!0),iie("claimed","==",!1)),u=await sv(a);if(u.docs.length>0){const v=u.docs[0],b=v.data().timestamp;r.dataCollectionEnabled&&(await Yo(v.ref,{claimed:!0}),await Yo(o,{participantId:this.currentParticipantId,timestamp:b,rejected:!1,claimed:!1,completed:null,createdTime:Qk()}))}else r.dataCollectionEnabled&&await Yo(o,{participantId:this.currentParticipantId,timestamp:Qk(),rejected:!1,claimed:!1,completed:null,createdTime:Qk()});const l=K8(s,sie("timestamp","asc")),d=(await sv(l)).docs.map(v=>v.data()),f=d.filter(v=>!v.rejected).findIndex(v=>v.participantId===this.currentParticipantId)%n.length,h=f===-1?Math.floor(Math.random()*n.length-1):f,p=n[h];if(!p)throw new Error("Latin square is empty");const y=d.sort((v,b)=>v.createdTime-b.createdTime).findIndex(v=>v.participantId===this.currentParticipantId)+1;return{currentRow:p,creationIndex:y}}async getAllParticipantsData(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=Gu(this.storage,`${this.collectionPrefix}${this.studyId}/participants`),r=await b_(n),i=[],s=r.items.map(async o=>{const a=await this._getFromFirebaseStorageByRef(o,"participantData");v_(a)&&i.push(a)});return await Promise.all(s),i}async getAudio(n,r){const i=yre(),s=await Hk(Gu(i,`${this.collectionPrefix}${this.studyId}/audio/${r}_${n}`));return new Promise(a=>{const u=new XMLHttpRequest;u.responseType="blob",u.onload=()=>{const l=u.response,c=URL.createObjectURL(l);a(c)},u.open("GET",s),u.send()})}async getParticipantData(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(this.currentParticipantId===null&&!n)throw new Error("Participant not initialized");const r=await this._getFromFirebaseStorage(`participants/${n||this.currentParticipantId}`,"participantData");return v_(r)?r:null}async getParticipantTags(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=await this.getParticipantData();if(!n)throw new Error("Participant not initialized");return n.participantTags}async addParticipantTags(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const r=await this.getParticipantData();if(!r)throw new Error("Participant not initialized");r.participantTags=[...new Set([...r.participantTags,...n])],await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",r)}async removeParticipantTags(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const r=await this.getParticipantData();if(!r)throw new Error("Participant not initialized");r.participantTags=r.participantTags.filter(i=>!n.includes(i)),await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",r)}async nextParticipant(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=r3();await this.localForage.setItem("currentParticipantId",n)}async verifyCompletion(){var o;if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const n=await this.getParticipantData();if(!n)throw new Error("Participant not initialized");const r=await this.getModes(this.studyId);if(n.completed)return!0;const i=Object.values(n.answers).map(a=>a.endTime).reduce((a,u)=>Math.max(a,u),0),s=Object.values(((o=this.participantData)==null?void 0:o.answers)||{}).map(a=>a.endTime).reduce((a,u)=>Math.max(a,u),0);if(this.participantData&&i===s){this.participantData.completed=!0,r.dataCollectionEnabled&&await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData);const a=ni(this.studyCollection,"sequenceAssignment"),u=uu(a,"sequenceAssignment"),l=ni(u,this.currentParticipantId);return await uie(l,{completed:Qk()}),!0}return!1}async getUserManagementData(n){if(Object.keys(this.userManagementData).length===0){const r=uu(this.firestore,"user-management"),i=await sv(r),s=Object.fromEntries(i.docs.map(o=>[o.id,o.data()]));this.userManagementData=s}return n in this.userManagementData?this.userManagementData[n]:null}async validateUser(n,r=!1){if(r&&(this.userManagementData={}),n!=null&&n.user){const i=await this.getUserManagementData("authentication");if(i!=null&&i.isEnabled){const s=await this.getUserManagementData("adminUsers");if(s&&s.adminUsersList){const o=Object.fromEntries(s.adminUsersList.map(u=>[u.email,u.uid]));if(n.user.email&&(o[n.user.email]===n.user.uid||o[n.user.email]===null)){if(n.user.email&&o[n.user.email]===null){const u=s.adminUsersList.find(l=>l.email===n.user.email);u&&(u.uid=n.user.uid),await Yo(ni(this.firestore,"user-management","adminUsers"),{adminUsersList:s.adminUsersList})}return!0}return!1}}return!0}return!1}async changeAuth(n){await Yo(ni(this.firestore,"user-management","authentication"),{isEnabled:n})}async addAdminUser(n){const r=await this.getUserManagementData("adminUsers");if(r!=null&&r.adminUsersList){const i=r.adminUsersList;i.find(o=>o.email===n.email)||(i.push({email:n.email,uid:n.uid}),await Yo(ni(this.firestore,"user-management","adminUsers"),{adminUsersList:i}))}else await Yo(ni(this.firestore,"user-management","adminUsers"),{adminUsersList:[{email:n.email,uid:n.uid}]})}async removeAdminUser(n){const r=await this.getUserManagementData("adminUsers");r!=null&&r.adminUsersList&&r.adminUsersList.length>1&&r.adminUsersList.find(i=>i.email===n)&&(r.adminUsersList=r==null?void 0:r.adminUsersList.filter(i=>i.email!==n),await Yo(ni(this.firestore,"user-management","adminUsers"),{adminUsersList:r==null?void 0:r.adminUsersList}))}async getAllParticipantsDataByStudy(n){const r=Gu(this.storage,`${this.collectionPrefix}${n}/participants`),i=await b_(r),s=[],o=i.items.map(async a=>{const u=await this._getFromFirebaseStorageByRef(a,"participantData");v_(u)&&s.push(u)});return await Promise.all(o),s}async rejectParticipant(n,r,i){const s=uu(this.firestore,`${this.collectionPrefix}${n}`),o=Gu(this.storage,`${this.collectionPrefix}${n}/participants/${r}_participantData`),a=await this._getFromFirebaseStorageByRef(o,"participantData");try{if(!a||!v_(a)||a.rejected)return;a.rejected={reason:i,timestamp:new Date().getTime()},await this._pushToFirebaseStorageByRef(o,"participantData",a);const u=ni(s,"sequenceAssignment"),l=uu(u,"sequenceAssignment"),c=ni(l,r);await uie(c,{rejected:!0})}catch{console.warn("Failed to reject the participant.")}}async rejectCurrentParticipant(n,r){if(!this.currentParticipantId)throw new Error("Participant not initialized");return await this.rejectParticipant(n,this.currentParticipantId,r)}async setMode(n,r,i){const s=ni(this.firestore,"metadata",`${this.collectionPrefix}${n}`);return await Yo(s,{[r]:i},{merge:!0})}async getModes(n){const r=ni(this.firestore,"metadata",`${this.collectionPrefix}${n}`),i=await Xk(r);if(i.exists())return i.data();const s={dataCollectionEnabled:!0,studyNavigatorEnabled:!0,analyticsInterfacePubliclyAccessible:!0};return await Yo(r,s),s}async getParticipantsStatusCounts(n){const r=uu(this.firestore,`${this.collectionPrefix}${n}`),i=ni(r,"sequenceAssignment"),s=uu(i,"sequenceAssignment"),o=K8(s,sie("timestamp","asc")),u=(await sv(o)).docs.map(p=>p.data()),l=u.filter(p=>p.completed&&!p.rejected).length,c=u.filter(p=>p.rejected).length,d=u.length-l-c,f=u.length>0?u[0].timestamp:null,h=u.length>0?u.at(-1).timestamp:null;return{completed:l,rejected:c,inProgress:d,minTime:f,maxTime:h}}async createSnapshot(n,r){const i=`${this.collectionPrefix}${n}`;if(!await this._directoryExists(i))return console.warn(`Source directory ${i} does not exist.`),{status:"FAILED",error:{message:"There is currently no data in your study. A snapshot could not be created.",title:"Failed to Create Snapshot."}};const s=new Date,o=s.getUTCFullYear(),a=(s.getUTCMonth()+1).toString().padStart(2,"0"),u=s.getUTCDate().toString().padStart(2,"0"),l=s.getUTCHours().toString().padStart(2,"0"),c=s.getUTCMinutes().toString().padStart(2,"0"),d=s.getUTCSeconds().toString().padStart(2,"0"),f=`${o}-${a}-${u}T${l}:${c}:${d}`,h=`${this.collectionPrefix}${n}-snapshot-${f}`;await this._copyDirectory(`${i}/configs`,`${h}/configs`),await this._copyDirectory(`${i}/participants`,`${h}/participants`),await this._copyDirectory(i,h),await this._copyCollection(i,h),await this._addDirectoryNameToMetadata(h);const p=[];if(r){const m=await this.removeSnapshotOrLive(i,!1);m.status==="FAILED"?p.push({title:m.error.title,message:m.error.message,color:"red"}):p.push({title:"Success!",message:"Successfully deleted live data.",color:"green"})}return p.push({message:"Successfully created snapshot",title:"Success!",color:"green"}),{status:"SUCCESS",notifications:p}}async removeSnapshotOrLive(n,r){try{const i=n.startsWith(this.collectionPrefix)?n:`${this.collectionPrefix}${n}`;return await this._deleteDirectory(`${i}/configs`),await this._deleteDirectory(`${i}/participants`),await this._deleteDirectory(i),await this._deleteCollection(i),r&&await this._removeNameFromMetadata(i),{status:"SUCCESS",notifications:[{message:"Successfully deleted snapshot or live data.",title:"Success!",color:"green"}]}}catch{return{status:"FAILED",error:{title:"Failed to delete live data or snapshot",message:"There was an unspecified error when trying to remove a snapshot or live data."}}}}async getSnapshots(n){try{const r=ni(this.firestore,"metadata","collections"),i=await Xk(r);if(i.exists()){const s=i.data();return Object.keys(s).filter(u=>u.startsWith(`${this.collectionPrefix}${n}-snapshot`)).map(u=>{const l=s[u];let c;return typeof l=="boolean"?c=u:l&&typeof l=="object"&&l.enabled===!0?c=l.name:c=null,{originalName:u,alternateName:c}}).filter(u=>u.alternateName!==null).sort((u,l)=>u.originalName.localeCompare(l.originalName)).reverse()}return[]}catch(r){throw console.error("Error listing collections with prefix:",r),r}}async restoreSnapshot(n,r){const i=`${this.collectionPrefix}${n}`,s=[];try{const o=await this.createSnapshot(n,!0);return o.status==="FAILED"?(console.warn("No live data to capture."),s.push({title:o.error.title,message:o.error.message,color:"yellow"})):s.push({title:"Success!",message:"Successfully created snapshot of live data.",color:"green"}),await this._copyDirectory(`${r}/configs`,`${i}/configs`),await this._copyDirectory(`${r}/participants`,`${i}/participants`),await this._copyDirectory(r,i),await this._copyCollection(r,i),s.push({message:"Successfully restored snapshot to live data.",title:"Success!",color:"green"}),{status:"SUCCESS",notifications:s}}catch(o){return console.error("Error trying to delete a snapshot",o),{status:"FAILED",error:{title:"Failed to restore a snapshot fully.",message:"There was an unspecified error when trying to restore this snapshot."}}}}async _addDirectoryNameToMetadata(n){try{const r=ni(this.firestore,"metadata","collections");await Yo(r,{[n]:{enabled:!0,name:n}},{merge:!0})}catch(r){throw console.error("Error adding collection to metadata:",r),r}}async renameSnapshot(n,r){try{const i=ni(this.firestore,"metadata","collections");return await Yo(i,{[n]:{enabled:!0,name:r}},{merge:!0}),{status:"SUCCESS",notifications:[{message:"Successfully renamed snapshot.",title:"Success!",color:"green"}]}}catch(i){return console.error("Error renaming collection in metadata",i),{status:"FAILED",error:{title:"Failed to Rename Snapshot.",message:"There was an error when trying to rename the snapshot."}}}}async _removeNameFromMetadata(n){try{const r=ni(this.firestore,"metadata","collections"),i=await Xk(r);if(i.exists()){const s=i.data();s[n]?(delete s[n],await Yo(r,s)):console.warn(`${n} does not exist in metadata.`)}else console.warn("No metadata found.")}catch(r){throw console.error("Error removing collection from metadata:",r),r}}async _deleteDirectory(n){try{const r=Gu(this.storage,n),s=(await b_(r)).items.map(o=>gre(o));await Promise.all(s)}catch(r){console.error("Error deleting files in directory:",r)}}async _copyDirectory(n,r){try{const i=Gu(this.storage,n),o=(await b_(i)).items.map(a=>{const u=a.fullPath,l=u.replace(n,r);return this._copyFile(u,l)});await Promise.all(o)}catch(i){console.error("Error copying file:",i)}}async _copyFile(n,r){try{const i=Gu(this.storage,n),s=Gu(this.storage,r),o=await Hk(i),u=await(await fetch(o)).blob();await Vk(s,u)}catch(i){console.error("Error copying file:",i)}}async _copyCollection(n,r){const i=uu(this.firestore,n),s=ni(i,"sequenceAssignment"),o=uu(s,"sequenceAssignment"),a=uu(this.firestore,r),u=ni(a,"sequenceAssignment");await Yo(u,{});const l=uu(u,"sequenceAssignment"),c=await sv(o),d=lie(this.firestore);c.docs.forEach(f=>{const h=ni(l,f.id);d.set(h,f.data())}),await d.commit()}async _deleteCollection(n){const r=uu(this.firestore,n),i=ni(r,"sequenceAssignment"),s=uu(i,"sequenceAssignment"),o=await sv(s),a=lie(this.firestore);o.forEach(u=>{const l=ni(s,u.id);a.delete(l)}),a.delete(i),await a.commit()}async _directoryExists(n){try{const r=Gu(this.storage,n);return(await b_(r)).items.length>0}catch(r){if(r.code==="storage/object-not-found")return!1;throw console.error("Error checking if directory exists:",r),r}}_verifyStudyDatabase(n){return n!==void 0}async _getFromFirebaseStorage(n,r){const i=Gu(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);let s={};try{const o=await Hk(i),u=await(await fetch(o)).text();s=JSON.parse(u)}catch{console.warn(`${n} does not have ${r} for ${this.collectionPrefix}${this.studyId}.`)}return s}async _getFromFirebaseStorageByRef(n,r){let i={};try{const s=await Hk(n),a=await(await fetch(s)).text();i=JSON.parse(a)}catch{console.warn(`${n} with type ${r} not found.`)}return i}async _pushToFirebaseStorage(n,r,i){const s=Gu(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);if(i instanceof Blob)await Vk(s,i);else if(Object.keys(i).length>0){const o=new Blob([JSON.stringify(i)],{type:"application/json"});await Vk(s,o)}}async _pushToFirebaseStorageByRef(n,r,i){if(Object.keys(i).length>0){const s=new Blob([JSON.stringify(i)],{type:"application/json"});await Vk(n,s)}}async _deleteFromFirebaseStorage(n,r){const i=Gu(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);await gre(i)}}const jve=D.createContext({user:{user:null,determiningStatus:!1,isAdmin:!1,adminVerification:!1},logout:async()=>{},triggerAuth:()=>{},verifyAdminStatus:()=>Promise.resolve(!1)}),rE=()=>D.useContext(jve);function bit({children:e}){const t={user:null,determiningStatus:!0,isAdmin:!1,adminVerification:!1},n={user:null,determiningStatus:!1,isAdmin:!1,adminVerification:!1},r={user:{name:"fakeName",email:"fakeEmail@fake.com",uid:"fakeUid"},determiningStatus:!1,isAdmin:!0,adminVerification:!0},[i,s]=D.useState(t),[o,a]=D.useState(!1),{storageEngine:u}=Mi(),l=async()=>{const h=n3();try{await Jnt(h)}catch(p){console.error(`There was an issue signing-out the user: ${p.message}`)}finally{s(n)}},c=()=>{a(!0)},d=async h=>u?await u.validateUser(h,!0):!1;D.useEffect(()=>{s(t);let h;if(u instanceof Ul)try{h=n3()}catch{console.warn("No firebase store.")}const p=async v=>{if(s(b=>({user:b.user,isAdmin:b.isAdmin,determiningStatus:!0,adminVerification:!1})),v){const b={user:v,determiningStatus:!1,isAdmin:!1,adminVerification:!0},w=await d(b);b.isAdmin=!!w,s(b)}else l()},y=(async()=>{if(u instanceof Ul){const v=await(u==null?void 0:u.getUserManagementData("authentication"));if(v!=null&&v.isEnabled){const b=Qnt(h,async w=>await p(w));return()=>b()}s(r)}else u&&s(r);return()=>{}})();return()=>{y.then(v=>v())}},[u,o]);const f=D.useMemo(()=>({user:i,triggerAuth:c,logout:l,verifyAdminStatus:d}),[i]);return T.jsx(jve.Provider,{value:f,children:i.determiningStatus?T.jsx(fl,{visible:!0}):e})}function vit({configName:e,config:t,url:n}){const{storageEngine:r}=Mi(),[i,s]=D.useState(null);D.useEffect(()=>{r&&r.getParticipantsStatusCounts(e).then(d=>{s(d)})},[e,r]);const{minTime:o,maxTime:a}=D.useMemo(()=>{if(!i)return{minTime:null,maxTime:null};if(!i.minTime||!i.maxTime)return{minTime:null,maxTime:null};const d=typeof i.minTime=="number"?new Date(i.minTime):i.minTime.toDate(),f=typeof i.maxTime=="number"?new Date(i.maxTime):i.maxTime.toDate();return{minTime:d.toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"long",day:"numeric"}),maxTime:f.toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"long",day:"numeric"})}},[i]),[u,l]=D.useState(null);D.useEffect(()=>{r&&r.getModes(e).then(d=>{l(d)})},[e,r]);const c=D.useMemo(()=>u?u.dataCollectionEnabled?i&&(i.inProgress>0||i.completed>0)?"Collecting Data":"Ready to Collect Data":"Data Collection Disabled":"Unknown",[u,i]);return T.jsx(j1,{shadow:"sm",radius:"md",my:"sm",withBorder:!0,children:t.errors.length>0?T.jsxs(T.Fragment,{children:[T.jsx(Je,{fw:"bold",children:e}),T.jsxs(Ft,{align:"center",direction:"row",children:[T.jsx(zT,{color:"red"}),T.jsx(Je,{fw:"bold",ml:8,color:"red",children:"Errors"})]}),T.jsx(KR,{issues:t.errors,type:"error"}),t.warnings.length>0&&T.jsxs(T.Fragment,{children:[T.jsxs(Ft,{align:"center",direction:"row",children:[T.jsx(zT,{color:"orange"}),T.jsx(Je,{fw:"bold",ml:8,color:"orange",children:"Warnings"})]}),T.jsx(KR,{issues:t.warnings,type:"warning"})]})]}):T.jsxs(T.Fragment,{children:[T.jsx(Ft,{direction:"row",justify:"space-between",children:T.jsx(Je,{fw:"bold",children:t.studyMetadata.title})}),T.jsxs(Je,{c:"dimmed",children:[T.jsx(Je,{span:!0,fw:500,children:"Authors: "}),t.studyMetadata.authors.join(", ")]}),T.jsx(Je,{c:"dimmed",children:t.studyMetadata.description}),T.jsx(Je,{c:"dimmed",ta:"right",style:{paddingRight:5},children:T.jsxs(B1,{target:"_blank",onClick:d=>d.stopPropagation(),href:`undefined${n}`,children:["View source:"," ",n,T.jsx(xge,{style:{width:$e(18),height:$e(18),marginLeft:$e(2),marginBottom:$e(-3)}})]})}),t.warnings.length>0&&T.jsxs(T.Fragment,{children:[T.jsxs(Ft,{align:"center",direction:"row",children:[T.jsx(zT,{color:"orange"}),T.jsx(Je,{fw:"bold",ml:8,color:"orange",children:"Warnings"})]}),T.jsx(KR,{issues:t.warnings,type:"warning"})]}),T.jsx(z1,{my:"md"}),T.jsxs(Ft,{direction:"row",gap:"sm",children:[T.jsxs(Je,{fw:"bold",size:"sm",opacity:.7,children:["Study Status:"," ",c]}),i&&T.jsx(aKe,{completed:i.completed,inProgress:i.inProgress,rejected:i.rejected})]}),o&&a&&T.jsxs(Je,{c:"dimmed",mt:4,children:["Activity:"," ",o," ",""," ",a]}),T.jsxs(Ft,{direction:"row",align:"end",gap:"sm",mt:"md",children:[T.jsx(tn,{leftSection:T.jsx(vge,{}),style:{marginLeft:"auto"},variant:"default",component:"a",href:`${rs}analysis/stats/${n}`,children:"Analyze & Manage Study"}),T.jsx(tn,{leftSection:T.jsx(wge,{}),component:"a",href:`${rs}${n}`,children:"Go to Study"})]})]})},e)}function ov({configNames:e,studyConfigs:t}){return e.map(n=>{const r=t[n];if(!r)return null;const i=Sge(n);return T.jsx(vit,{configName:n,config:r,url:i},n)})}function xit({globalConfig:e,studyConfigs:t}){const{storageEngine:n}=Mi(),{configsList:r}=e,i=r.filter(v=>v.startsWith("demo-")),s=r.filter(v=>v.startsWith("tutorial")),o=r.filter(v=>v.startsWith("example-")),a=r.filter(v=>v.startsWith("test-")),u=r.filter(v=>v.startsWith("library-")),l=D.useMemo(()=>r.filter(v=>!v.startsWith("demo-")&&!v.startsWith("tutorial")&&!v.startsWith("example-")&&!v.startsWith("test-")&&!v.startsWith("library-")),[r]),[c,d]=D.useState({});D.useEffect(()=>{async function v(){const b={};await Promise.all(l.map(async w=>{if(n instanceof Ul){const E=await n.getModes(w);b[w]=E.analyticsInterfacePubliclyAccessible}})),d(b)}v()},[l,n]);const{user:f}=rE(),h=D.useMemo(()=>l.filter(v=>c[v]||f.isAdmin),[l,c,f]),[p]=Zf(),m=D.useMemo(()=>p.get("tab")||(h.length>0?"Others":"Demos"),[h.length,p]),y=Cl();return T.jsx(Or.Main,{children:T.jsxs(_p,{size:"sm",px:0,children:[T.jsx(rg,{maw:150,mx:"auto",mb:"xl",radius:"md",src:`${rs}revisitAssets/revisitLogoSquare.svg`,alt:"reVISit"}),T.jsxs(Un,{variant:"outline",defaultValue:l.length>0?"Others":"Demos",value:m,onChange:v=>y(`/?tab=${v}`),children:[T.jsxs(Un.List,{children:[h.length>0&&T.jsx(Un.Tab,{value:"Others",children:"Your Studies"}),T.jsx(Un.Tab,{value:"Demos",children:"Demo Studies"}),T.jsx(Un.Tab,{value:"Examples",children:"Example Studies"}),T.jsx(Un.Tab,{value:"Tutorials",children:"Tutorials"}),T.jsx(Un.Tab,{value:"Tests",children:"Tests"}),T.jsx(Un.Tab,{value:"Libraries",children:"Libraries"})]}),h.length>0&&T.jsx(Un.Panel,{value:"Others",children:T.jsx(ov,{configNames:h,studyConfigs:t})}),T.jsxs(Un.Panel,{value:"Demos",children:[T.jsx(Je,{c:"dimmed",mt:"sm",children:"These studies show off individual features of the reVISit platform."}),T.jsx(ov,{configNames:i,studyConfigs:t})]}),T.jsxs(Un.Panel,{value:"Examples",children:[T.jsx(Je,{c:"dimmed",mt:"sm",children:"These are full studies that demonstrate the capabilities of the reVISit platform."}),T.jsx(ov,{configNames:o,studyConfigs:t})]}),T.jsxs(Un.Panel,{value:"Tutorials",children:[T.jsx(Je,{c:"dimmed",mt:"sm",children:"These studies are designed to help you learn how to use the reVISit platform."}),T.jsx(ov,{configNames:s,studyConfigs:t})]}),T.jsxs(Un.Panel,{value:"Tests",children:[T.jsx(Je,{c:"dimmed",mt:"sm",children:"These studies exist for testing purposes."}),T.jsx(ov,{configNames:a,studyConfigs:t})]}),T.jsxs(Un.Panel,{value:"Libraries",children:[T.jsx(Je,{c:"dimmed",mt:"sm",children:"Here you can see an example of every library that we publish."}),T.jsx(ov,{configNames:u,studyConfigs:t})]})]})]})})}var rL={exports:{}},iL={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mie;function wit(){if(Mie)return iL;Mie=1;var e=u4();function t(u,l){return u===l&&(u!==0||1/u===1/l)||u!==u&&l!==l}var n=typeof Object.is=="function"?Object.is:t,r=e.useSyncExternalStore,i=e.useRef,s=e.useEffect,o=e.useMemo,a=e.useDebugValue;return iL.useSyncExternalStoreWithSelector=function(u,l,c,d,f){var h=i(null);if(h.current===null){var p={hasValue:!1,value:null};h.current=p}else p=h.current;h=o(function(){function y(_){if(!v){if(v=!0,b=_,_=d(_),f!==void 0&&p.hasValue){var C=p.value;if(f(C,_))return w=C}return w=_}if(C=w,n(b,_))return C;var S=d(_);return f!==void 0&&f(C,S)?(b=_,C):(b=_,w=S)}var v=!1,b,w,E=c===void 0?null:c;return[function(){return y(l())},E===null?void 0:function(){return y(E())}]},[l,c,d,f]);var m=r(u,h[0],h[1]);return s(function(){p.hasValue=!0,p.value=m},[m]),a(m),m},iL}var Lie;function Eit(){return Lie||(Lie=1,rL.exports=wit()),rL.exports}var _it=Eit();function Tit(e){e()}function Cit(){let e=null,t=null;return{clear(){e=null,t=null},notify(){Tit(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=e;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!r||e===null||(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var Fie={notify(){},get:()=>[]};function Sit(e,t){let n,r=Fie,i=0,s=!1;function o(m){c();const y=r.subscribe(m);let v=!1;return()=>{v||(v=!0,y(),d())}}function a(){r.notify()}function u(){p.onStateChange&&p.onStateChange()}function l(){return s}function c(){i++,n||(n=e.subscribe(u),r=Cit())}function d(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=Fie)}function f(){s||(s=!0,c())}function h(){s&&(s=!1,d())}const p={addNestedSub:o,notifyNestedSubs:a,handleChangeWrapper:u,isSubscribed:l,trySubscribe:f,tryUnsubscribe:h,getListeners:()=>r};return p}var Ait=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",kit=Ait(),Iit=()=>typeof navigator<"u"&&navigator.product==="ReactNative",Rit=Iit(),Dit=()=>kit||Rit?D.useLayoutEffect:D.useEffect,Pit=Dit(),sL=Symbol.for("react-redux-context"),oL=typeof globalThis<"u"?globalThis:{};function Nit(){if(!D.createContext)return{};const e=oL[sL]??(oL[sL]=new Map);let t=e.get(D.createContext);return t||(t=D.createContext(null),e.set(D.createContext,t)),t}var R0=Nit();function Oit(e){const{children:t,context:n,serverState:r,store:i}=e,s=D.useMemo(()=>{const u=Sit(i);return{store:i,subscription:u,getServerState:r?()=>r:void 0}},[i,r]),o=D.useMemo(()=>i.getState(),[i]);Pit(()=>{const{subscription:u}=s;return u.onStateChange=u.notifyNestedSubs,u.trySubscribe(),o!==i.getState()&&u.notifyNestedSubs(),()=>{u.tryUnsubscribe(),u.onStateChange=void 0}},[s,o]);const a=n||R0;return D.createElement(a.Provider,{value:s},t)}var $it=Oit;function Nq(e=R0){return function(){return D.useContext(e)}}var zve=Nq();function Uve(e=R0){const t=e===R0?zve:Nq(e),n=()=>{const{store:r}=t();return r};return Object.assign(n,{withTypes:()=>n}),n}var Mit=Uve();function Lit(e=R0){const t=e===R0?Mit:Uve(e),n=()=>t().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var Vve=Lit(),Fit=(e,t)=>e===t;function Bit(e=R0){const t=e===R0?zve:Nq(e),n=(r,i={})=>{const{equalityFn:s=Fit}=typeof i=="function"?{equalityFn:i}:i,o=t(),{store:a,subscription:u,getServerState:l}=o;D.useRef(!0);const c=D.useCallback({[r.name](f){return r(f)}}[r.name],[r]),d=_it.useSyncExternalStoreWithSelector(u.addNestedSub,a.getState,l||a.getState,c,s);return D.useDebugValue(d),d};return Object.assign(n,{withTypes:()=>n}),n}var jit=Bit();function Hc(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function D0(e){return!!e&&!!e[di]}function Ip(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===Kit}(e)||Array.isArray(e)||!!e[qie]||!!(!((t=e.constructor)===null||t===void 0)&&t[qie])||Oq(e)||$q(e))}function e1(e,t,n){n===void 0&&(n=!1),iE(e)===0?(n?Object.keys:rx)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function iE(e){var t=e[di];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:Oq(e)?2:$q(e)?3:0}function nx(e,t){return iE(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function zit(e,t){return iE(e)===2?e.get(t):e[t]}function Hve(e,t,n){var r=iE(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function qve(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function Oq(e){return Git&&e instanceof Map}function $q(e){return Yit&&e instanceof Set}function uy(e){return e.o||e.t}function Mq(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=Gve(e);delete t[di];for(var n=rx(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function Lq(e,t){return t===void 0&&(t=!1),Fq(e)||D0(e)||!Ip(e)||(iE(e)>1&&(e.set=e.add=e.clear=e.delete=Uit),Object.freeze(e),t&&e1(e,function(n,r){return Lq(r,!0)},!0)),e}function Uit(){Hc(2)}function Fq(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function Ef(e){var t=zB[e];return t||Hc(18,e),t}function Vit(e,t){zB[e]||(zB[e]=t)}function FB(){return Y2}function aL(e,t){t&&(Ef("Patches"),e.u=[],e.s=[],e.v=t)}function s3(e){BB(e),e.p.forEach(Hit),e.p=null}function BB(e){e===Y2&&(Y2=e.l)}function Bie(e){return Y2={p:[],l:Y2,h:e,m:!0,_:0}}function Hit(e){var t=e[di];t.i===0||t.i===1?t.j():t.g=!0}function uL(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.O||Ef("ES5").S(t,e,r),r?(n[di].P&&(s3(t),Hc(4)),Ip(e)&&(e=o3(t,e),t.l||a3(t,e)),t.u&&Ef("Patches").M(n[di].t,e,t.u,t.s)):e=o3(t,n,[]),s3(t),t.u&&t.v(t.u,t.s),e!==Wve?e:void 0}function o3(e,t,n){if(Fq(t))return t;var r=t[di];if(!r)return e1(t,function(a,u){return jie(e,r,t,a,u,n)},!0),t;if(r.A!==e)return t;if(!r.P)return a3(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=Mq(r.k):r.o,s=i,o=!1;r.i===3&&(s=new Set(i),i.clear(),o=!0),e1(s,function(a,u){return jie(e,r,i,a,u,n,o)}),a3(e,i,!1),n&&e.u&&Ef("Patches").N(r,n,e.u,e.s)}return r.o}function jie(e,t,n,r,i,s,o){if(D0(i)){var a=o3(e,i,s&&t&&t.i!==3&&!nx(t.R,r)?s.concat(r):void 0);if(Hve(n,r,a),!D0(a))return;e.m=!1}else o&&n.add(i);if(Ip(i)&&!Fq(i)){if(!e.h.D&&e._<1)return;o3(e,i),t&&t.A.l||a3(e,i)}}function a3(e,t,n){n===void 0&&(n=!1),!e.l&&e.h.D&&e.m&&Lq(t,n)}function lL(e,t){var n=e[di];return(n?uy(n):e)[t]}function zie(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function Ym(e){e.P||(e.P=!0,e.l&&Ym(e.l))}function cL(e){e.o||(e.o=Mq(e.t))}function jB(e,t,n){var r=Oq(t)?Ef("MapSet").F(t,n):$q(t)?Ef("MapSet").T(t,n):e.O?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:FB(),P:!1,I:!1,R:{},l:s,t:i,k:null,o:null,j:null,C:!1},u=a,l=K2;o&&(u=[a],l=uT);var c=Proxy.revocable(u,l),d=c.revoke,f=c.proxy;return a.k=f,a.j=d,f}(t,n):Ef("ES5").J(t,n);return(n?n.A:FB()).p.push(r),r}function qit(e){return D0(e)||Hc(22,e),function t(n){if(!Ip(n))return n;var r,i=n[di],s=iE(n);if(i){if(!i.P&&(i.i<4||!Ef("ES5").K(i)))return i.t;i.I=!0,r=Uie(n,s),i.I=!1}else r=Uie(n,s);return e1(r,function(o,a){i&&zit(i.t,o)===a||Hve(r,o,t(a))}),s===3?new Set(r):r}(e)}function Uie(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return Mq(e)}function Wit(){function e(s,o){var a=i[s];return a?a.enumerable=o:i[s]=a={configurable:!0,enumerable:o,get:function(){var u=this[di];return K2.get(u,s)},set:function(u){var l=this[di];K2.set(l,s,u)}},a}function t(s){for(var o=s.length-1;o>=0;o--){var a=s[o][di];if(!a.P)switch(a.i){case 5:r(a)&&Ym(a);break;case 4:n(a)&&Ym(a)}}}function n(s){for(var o=s.t,a=s.k,u=rx(a),l=u.length-1;l>=0;l--){var c=u[l];if(c!==di){var d=o[c];if(d===void 0&&!nx(o,c))return!0;var f=a[c],h=f&&f[di];if(h?h.t!==d:!qve(f,d))return!0}}var p=!!o[di];return u.length!==rx(o).length+(p?0:1)}function r(s){var o=s.k;if(o.length!==s.t.length)return!0;var a=Object.getOwnPropertyDescriptor(o,o.length-1);if(a&&!a.get)return!0;for(var u=0;u<o.length;u++)if(!o.hasOwnProperty(u))return!0;return!1}var i={};Vit("ES5",{J:function(s,o){var a=Array.isArray(s),u=function(c,d){if(c){for(var f=Array(d.length),h=0;h<d.length;h++)Object.defineProperty(f,""+h,e(h,!0));return f}var p=Gve(d);delete p[di];for(var m=rx(p),y=0;y<m.length;y++){var v=m[y];p[v]=e(v,c||!!p[v].enumerable)}return Object.create(Object.getPrototypeOf(d),p)}(a,s),l={i:a?5:4,A:o?o.A:FB(),P:!1,I:!1,R:{},l:o,t:s,k:u,o:null,g:!1,C:!1};return Object.defineProperty(u,di,{value:l,writable:!0}),u},S:function(s,o,a){a?D0(o)&&o[di].A===s&&t(s.p):(s.u&&function u(l){if(l&&typeof l=="object"){var c=l[di];if(c){var d=c.t,f=c.k,h=c.R,p=c.i;if(p===4)e1(f,function(w){w!==di&&(d[w]!==void 0||nx(d,w)?h[w]||u(f[w]):(h[w]=!0,Ym(c)))}),e1(d,function(w){f[w]!==void 0||nx(f,w)||(h[w]=!1,Ym(c))});else if(p===5){if(r(c)&&(Ym(c),h.length=!0),f.length<d.length)for(var m=f.length;m<d.length;m++)h[m]=!1;else for(var y=d.length;y<f.length;y++)h[y]=!0;for(var v=Math.min(f.length,d.length),b=0;b<v;b++)f.hasOwnProperty(b)||(h[b]=!0),h[b]===void 0&&u(f[b])}}}}(s.p[0]),t(s.p))},K:function(s){return s.i===4?n(s):r(s)}})}var Vie,Y2,Bq=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",Git=typeof Map<"u",Yit=typeof Set<"u",Hie=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",Wve=Bq?Symbol.for("immer-nothing"):((Vie={})["immer-nothing"]=!0,Vie),qie=Bq?Symbol.for("immer-draftable"):"__$immer_draftable",di=Bq?Symbol.for("immer-state"):"__$immer_state",Kit=""+Object.prototype.constructor,rx=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,Gve=Object.getOwnPropertyDescriptors||function(e){var t={};return rx(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},zB={},K2={get:function(e,t){if(t===di)return e;var n=uy(e);if(!nx(n,t))return function(i,s,o){var a,u=zie(s,o);return u?"value"in u?u.value:(a=u.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!Ip(r)?r:r===lL(e.t,t)?(cL(e),e.o[t]=jB(e.A.h,r,e)):r},has:function(e,t){return t in uy(e)},ownKeys:function(e){return Reflect.ownKeys(uy(e))},set:function(e,t,n){var r=zie(uy(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=lL(uy(e),t),s=i==null?void 0:i[di];if(s&&s.t===n)return e.o[t]=n,e.R[t]=!1,!0;if(qve(n,i)&&(n!==void 0||nx(e.t,t)))return!0;cL(e),Ym(e)}return e.o[t]===n&&(n!==void 0||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return lL(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,cL(e),Ym(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=uy(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){Hc(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){Hc(12)}},uT={};e1(K2,function(e,t){uT[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),uT.deleteProperty=function(e,t){return uT.set.call(this,e,t,void 0)},uT.set=function(e,t,n){return K2.set.call(this,e[0],t,n,e[0])};var Xit=function(){function e(n){var r=this;this.O=Hie,this.D=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var u=r;return function(m){var y=this;m===void 0&&(m=a);for(var v=arguments.length,b=Array(v>1?v-1:0),w=1;w<v;w++)b[w-1]=arguments[w];return u.produce(m,function(E){var _;return(_=s).call.apply(_,[y,E].concat(b))})}}var l;if(typeof s!="function"&&Hc(6),o!==void 0&&typeof o!="function"&&Hc(7),Ip(i)){var c=Bie(r),d=jB(r,i,void 0),f=!0;try{l=s(d),f=!1}finally{f?s3(c):BB(c)}return typeof Promise<"u"&&l instanceof Promise?l.then(function(m){return aL(c,o),uL(m,c)},function(m){throw s3(c),m}):(aL(c,o),uL(l,c))}if(!i||typeof i!="object"){if((l=s(i))===void 0&&(l=i),l===Wve&&(l=void 0),r.D&&Lq(l,!0),o){var h=[],p=[];Ef("Patches").M(i,l,h,p),o(h,p)}return l}Hc(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(l){for(var c=arguments.length,d=Array(c>1?c-1:0),f=1;f<c;f++)d[f-1]=arguments[f];return r.produceWithPatches(l,function(h){return i.apply(void 0,[h].concat(d))})};var o,a,u=r.produce(i,s,function(l,c){o=l,a=c});return typeof Promise<"u"&&u instanceof Promise?u.then(function(l){return[l,o,a]}):[u,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){Ip(n)||Hc(8),D0(n)&&(n=qit(n));var r=Bie(this),i=jB(this,n,void 0);return i[di].C=!0,BB(r),i},t.finishDraft=function(n,r){var i=n&&n[di],s=i.A;return aL(s,r),uL(void 0,s)},t.setAutoFreeze=function(n){this.D=n},t.setUseProxies=function(n){n&&!Hie&&Hc(20),this.O=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=Ef("Patches").$;return D0(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},e}(),hl=new Xit,Yve=hl.produce;hl.produceWithPatches.bind(hl);hl.setAutoFreeze.bind(hl);hl.setUseProxies.bind(hl);hl.applyPatches.bind(hl);hl.createDraft.bind(hl);hl.finishDraft.bind(hl);function X2(e){"@babel/helpers - typeof";return X2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},X2(e)}function Qit(e,t){if(X2(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(X2(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Jit(e){var t=Qit(e,"string");return X2(t)=="symbol"?t:t+""}function Zit(e,t,n){return(t=Jit(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Wie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Gie(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Wie(Object(n),!0).forEach(function(r){Zit(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wie(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ea(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var Yie=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),dL=function(){return Math.random().toString(36).substring(7).split("").join(".")},u3={INIT:"@@redux/INIT"+dL(),REPLACE:"@@redux/REPLACE"+dL(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+dL()}};function est(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function Kve(e,t,n){var r;if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(ea(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(ea(1));return n(Kve)(e,t)}if(typeof e!="function")throw new Error(ea(2));var i=e,s=t,o=[],a=o,u=!1;function l(){a===o&&(a=o.slice())}function c(){if(u)throw new Error(ea(3));return s}function d(m){if(typeof m!="function")throw new Error(ea(4));if(u)throw new Error(ea(5));var y=!0;return l(),a.push(m),function(){if(y){if(u)throw new Error(ea(6));y=!1,l();var b=a.indexOf(m);a.splice(b,1),o=null}}}function f(m){if(!est(m))throw new Error(ea(7));if(typeof m.type>"u")throw new Error(ea(8));if(u)throw new Error(ea(9));try{u=!0,s=i(s,m)}finally{u=!1}for(var y=o=a,v=0;v<y.length;v++){var b=y[v];b()}return m}function h(m){if(typeof m!="function")throw new Error(ea(10));i=m,f({type:u3.REPLACE})}function p(){var m,y=d;return m={subscribe:function(b){if(typeof b!="object"||b===null)throw new Error(ea(11));function w(){b.next&&b.next(c())}w();var E=y(w);return{unsubscribe:E}}},m[Yie]=function(){return this},m}return f({type:u3.INIT}),r={dispatch:f,subscribe:d,getState:c,replaceReducer:h},r[Yie]=p,r}function tst(e){Object.keys(e).forEach(function(t){var n=e[t],r=n(void 0,{type:u3.INIT});if(typeof r>"u")throw new Error(ea(12));if(typeof n(void 0,{type:u3.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(ea(13))})}function nst(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];typeof e[i]=="function"&&(n[i]=e[i])}var s=Object.keys(n),o;try{tst(n)}catch(a){o=a}return function(u,l){if(u===void 0&&(u={}),o)throw o;for(var c=!1,d={},f=0;f<s.length;f++){var h=s[f],p=n[h],m=u[h],y=p(m,l);if(typeof y>"u")throw l&&l.type,new Error(ea(14));d[h]=y,c=c||y!==m}return c=c||s.length!==Object.keys(u).length,c?d:u}}function l3(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.length===0?function(r){return r}:t.length===1?t[0]:t.reduce(function(r,i){return function(){return r(i.apply(void 0,arguments))}})}function rst(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return function(){var i=r.apply(void 0,arguments),s=function(){throw new Error(ea(15))},o={getState:i.getState,dispatch:function(){return s.apply(void 0,arguments)}},a=t.map(function(u){return u(o)});return s=l3.apply(void 0,a)(i.dispatch),Gie(Gie({},i),{},{dispatch:s})}}}function Xve(e){var t=function(r){var i=r.dispatch,s=r.getState;return function(o){return function(a){return typeof a=="function"?a(i,s,e):o(a)}}};return t}var UB=Xve();UB.withExtraArgument=Xve;var Qve=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),ES=function(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(c){return u([l,c])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,i=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){n.label=l[1];break}if(l[0]===6&&n.label<s[1]){n.label=s[1],s=l;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(l);break}s[2]&&n.ops.pop(),n.trys.pop();continue}l=t.call(e,n)}catch(c){l=[6,c],i=0}finally{r=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},t1=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},ist=Object.defineProperty,sst=Object.defineProperties,ost=Object.getOwnPropertyDescriptors,Kie=Object.getOwnPropertySymbols,ast=Object.prototype.hasOwnProperty,ust=Object.prototype.propertyIsEnumerable,Xie=function(e,t,n){return t in e?ist(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},p0=function(e,t){for(var n in t||(t={}))ast.call(t,n)&&Xie(e,n,t[n]);if(Kie)for(var r=0,i=Kie(t);r<i.length;r++){var n=i[r];ust.call(t,n)&&Xie(e,n,t[n])}return e},fL=function(e,t){return sst(e,ost(t))},_S=function(e,t,n){return new Promise(function(r,i){var s=function(u){try{a(n.next(u))}catch(l){i(l)}},o=function(u){try{a(n.throw(u))}catch(l){i(l)}},a=function(u){return u.done?r(u.value):Promise.resolve(u.value).then(s,o)};a((n=n.apply(e,t)).next())})},lst=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?l3:l3.apply(null,arguments)};function Jve(e){if(typeof e!="object"||e===null)return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(var n=t;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return t===n}var cst=function(e){return e&&typeof e.match=="function"};function _f(e,t){function n(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(t){var s=t.apply(void 0,r);if(!s)throw new Error("prepareAction did not return an object");return p0(p0({type:e,payload:s.payload},"meta"in s&&{meta:s.meta}),"error"in s&&{error:s.error})}return{type:e,payload:r[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(r){return r.type===e},n}function dst(e){return Jve(e)&&"type"in e}var fst=function(e){Qve(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,t1([void 0],n[0].concat(this)))):new(t.bind.apply(t,t1([void 0],n.concat(this))))},t}(Array),hst=function(e){Qve(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,t1([void 0],n[0].concat(this)))):new(t.bind.apply(t,t1([void 0],n.concat(this))))},t}(Array);function VB(e){return Ip(e)?Yve(e,function(){}):e}function pst(e){return typeof e=="boolean"}function mst(){return function(t){return gst(t)}}function gst(e){e===void 0&&(e={});var t=e.thunk,n=t===void 0?!0:t;e.immutableCheck,e.serializableCheck,e.actionCreatorCheck;var r=new fst;return n&&(pst(n)?r.push(UB):r.push(UB.withExtraArgument(n.extraArgument))),r}function yst(e){var t=mst(),n=e,r=n.reducer,i=r===void 0?void 0:r,s=n.middleware,o=s===void 0?t():s,a=n.devTools,u=a===void 0?!0:a,l=n.preloadedState,c=l===void 0?void 0:l,d=n.enhancers,f=d===void 0?void 0:d,h;if(typeof i=="function")h=i;else if(Jve(i))h=nst(i);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var p=o;typeof p=="function"&&(p=p(t));var m=rst.apply(void 0,p),y=l3;u&&(y=lst(p0({trace:!1},typeof u=="object"&&u)));var v=new hst(m),b=v;Array.isArray(f)?b=t1([m],f):typeof f=="function"&&(b=f(v));var w=y.apply(void 0,b);return Kve(h,c,w)}function Zve(e){var t={},n=[],r,i={addCase:function(s,o){var a=typeof s=="string"?s:s.type;if(!a)throw new Error("`builder.addCase` cannot be called with an empty action type");if(a in t)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return t[a]=o,i},addMatcher:function(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase:function(s){return r=s,i}};return e(i),[t,n,r]}function bst(e){return typeof e=="function"}function vst(e,t,n,r){n===void 0&&(n=[]);var i=typeof t=="function"?Zve(t):[t,n,r],s=i[0],o=i[1],a=i[2],u;if(bst(e))u=function(){return VB(e())};else{var l=VB(e);u=function(){return l}}function c(d,f){d===void 0&&(d=u());var h=t1([s[f.type]],o.filter(function(p){var m=p.matcher;return m(f)}).map(function(p){var m=p.reducer;return m}));return h.filter(function(p){return!!p}).length===0&&(h=[a]),h.reduce(function(p,m){if(m)if(D0(p)){var y=p,v=m(y,f);return v===void 0?p:v}else{if(Ip(p))return Yve(p,function(b){return m(b,f)});var v=m(p,f);if(v===void 0){if(p===null)return p;throw Error("A case reducer on a non-draftable value must not return undefined")}return v}return p},d)}return c.getInitialState=u,c}function xst(e,t){return e+"/"+t}function wst(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");var n=typeof e.initialState=="function"?e.initialState:VB(e.initialState),r=e.reducers||{},i=Object.keys(r),s={},o={},a={};i.forEach(function(c){var d=r[c],f=xst(t,c),h,p;"reducer"in d?(h=d.reducer,p=d.prepare):h=d,s[c]=h,o[f]=h,a[c]=p?_f(f,p):_f(f)});function u(){var c=typeof e.extraReducers=="function"?Zve(e.extraReducers):[e.extraReducers],d=c[0],f=d===void 0?{}:d,h=c[1],p=h===void 0?[]:h,m=c[2],y=m===void 0?void 0:m,v=p0(p0({},f),o);return vst(n,function(b){for(var w in v)b.addCase(w,v[w]);for(var E=0,_=p;E<_.length;E++){var C=_[E];b.addMatcher(C.matcher,C.reducer)}y&&b.addDefaultCase(y)})}var l;return{name:t,reducer:function(c,d){return l||(l=u()),l(c,d)},actions:a,caseReducers:s,getInitialState:function(){return l||(l=u()),l.getInitialState()}}}var Est="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",exe=function(e){e===void 0&&(e=21);for(var t="",n=e;n--;)t+=Est[Math.random()*64|0];return t},_st=["name","message","stack","code"],hL=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),Qie=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),Tst=function(e){if(typeof e=="object"&&e!==null){for(var t={},n=0,r=_st;n<r.length;n++){var i=r[n];typeof e[i]=="string"&&(t[i]=e[i])}return t}return{message:String(e)}};(function(){function e(t,n,r){var i=_f(t+"/fulfilled",function(l,c,d,f){return{payload:l,meta:fL(p0({},f||{}),{arg:d,requestId:c,requestStatus:"fulfilled"})}}),s=_f(t+"/pending",function(l,c,d){return{payload:void 0,meta:fL(p0({},d||{}),{arg:c,requestId:l,requestStatus:"pending"})}}),o=_f(t+"/rejected",function(l,c,d,f,h){return{payload:f,error:(r&&r.serializeError||Tst)(l||"Rejected"),meta:fL(p0({},h||{}),{arg:d,requestId:c,rejectedWithValue:!!f,requestStatus:"rejected",aborted:(l==null?void 0:l.name)==="AbortError",condition:(l==null?void 0:l.name)==="ConditionError"})}}),a=typeof AbortController<"u"?AbortController:function(){function l(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return l.prototype.abort=function(){},l}();function u(l){return function(c,d,f){var h=r!=null&&r.idGenerator?r.idGenerator(l):exe(),p=new a,m;function y(b){m=b,p.abort()}var v=function(){return _S(this,null,function(){var b,w,E,_,C,S,k;return ES(this,function(R){switch(R.label){case 0:return R.trys.push([0,4,,5]),_=(b=r==null?void 0:r.condition)==null?void 0:b.call(r,l,{getState:d,extra:f}),Sst(_)?[4,_]:[3,2];case 1:_=R.sent(),R.label=2;case 2:if(_===!1||p.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return C=new Promise(function(N,O){return p.signal.addEventListener("abort",function(){return O({name:"AbortError",message:m||"Aborted"})})}),c(s(h,l,(w=r==null?void 0:r.getPendingMeta)==null?void 0:w.call(r,{requestId:h,arg:l},{getState:d,extra:f}))),[4,Promise.race([C,Promise.resolve(n(l,{dispatch:c,getState:d,extra:f,requestId:h,signal:p.signal,abort:y,rejectWithValue:function(N,O){return new hL(N,O)},fulfillWithValue:function(N,O){return new Qie(N,O)}})).then(function(N){if(N instanceof hL)throw N;return N instanceof Qie?i(N.payload,h,l,N.meta):i(N,h,l)})])];case 3:return E=R.sent(),[3,5];case 4:return S=R.sent(),E=S instanceof hL?o(null,h,l,S.payload,S.meta):o(S,h,l),[3,5];case 5:return k=r&&!r.dispatchConditionRejection&&o.match(E)&&E.meta.condition,k||c(E),[2,E]}})})}();return Object.assign(v,{abort:y,requestId:h,arg:l,unwrap:function(){return v.then(Cst)}})}}return Object.assign(u,{pending:s,rejected:o,fulfilled:i,typePrefix:t})}return e.withTypes=function(){return e},e})();function Cst(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function Sst(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var Ast=function(e,t){return cst(e)?e.match(t):e(t)};function Jie(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(n){return e.some(function(r){return Ast(r,n)})}}var jq=function(e,t){if(typeof e!="function")throw new TypeError(t+" is not a function")},HB=function(){},txe=function(e,t){return t===void 0&&(t=HB),e.catch(t),e},nxe=function(e,t){return e.addEventListener("abort",t,{once:!0}),function(){return e.removeEventListener("abort",t)}},ix=function(e,t){var n=e.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},kst="task",rxe="listener",ixe="completed",zq="cancelled",Ist="task-"+zq,Rst="task-"+ixe,sxe=rxe+"-"+zq,Dst=rxe+"-"+ixe,RO=function(){function e(t){this.code=t,this.name="TaskAbortError",this.message=kst+" "+zq+" (reason: "+t+")"}return e}(),sx=function(e){if(e.aborted)throw new RO(e.reason)};function oxe(e,t){var n=HB;return new Promise(function(r,i){var s=function(){return i(new RO(e.reason))};if(e.aborted){s();return}n=nxe(e,s),t.finally(function(){return n()}).then(r,i)}).finally(function(){n=HB})}var Pst=function(e,t){return _S(void 0,null,function(){var n,r;return ES(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,4,5]),[4,Promise.resolve()];case 1:return i.sent(),[4,e()];case 2:return n=i.sent(),[2,{status:"ok",value:n}];case 3:return r=i.sent(),[2,{status:r instanceof RO?"cancelled":"rejected",error:r}];case 4:return t==null||t(),[7];case 5:return[2]}})})},c3=function(e){return function(t){return txe(oxe(e,t).then(function(n){return sx(e),n}))}},axe=function(e){var t=c3(e);return function(n){return t(new Promise(function(r){return setTimeout(r,n)}))}},Nst=Object.assign,Zie={},TS="listenerMiddleware",Ost=function(e,t){var n=function(r){return nxe(e,function(){return ix(r,e.reason)})};return function(r,i){jq(r,"taskExecutor");var s=new AbortController;n(s);var o=Pst(function(){return _S(void 0,null,function(){var a;return ES(this,function(u){switch(u.label){case 0:return sx(e),sx(s.signal),[4,r({pause:c3(s.signal),delay:axe(s.signal),signal:s.signal})];case 1:return a=u.sent(),sx(s.signal),[2,a]}})})},function(){return ix(s,Rst)});return i!=null&&i.autoJoin&&t.push(o),{result:c3(e)(o),cancel:function(){ix(s,Ist)}}}},$st=function(e,t){var n=function(r,i){return _S(void 0,null,function(){var s,o,a,u;return ES(this,function(l){switch(l.label){case 0:sx(t),s=function(){},o=new Promise(function(c,d){var f=e({predicate:r,effect:function(h,p){p.unsubscribe(),c([h,p.getState(),p.getOriginalState()])}});s=function(){f(),d()}}),a=[o],i!=null&&a.push(new Promise(function(c){return setTimeout(c,i,null)})),l.label=1;case 1:return l.trys.push([1,,3,4]),[4,oxe(t,Promise.race(a))];case 2:return u=l.sent(),sx(t),[2,u];case 3:return s(),[7];case 4:return[2]}})})};return function(r,i){return txe(n(r,i))}},uxe=function(e){var t=e.type,n=e.actionCreator,r=e.matcher,i=e.predicate,s=e.effect;if(t)i=_f(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error("Creating or removing a listener requires one of the known fields for matching an action");return jq(s,"options.listener"),{predicate:i,type:t,effect:s}},Mst=function(e){var t=uxe(e),n=t.type,r=t.predicate,i=t.effect,s=exe(),o={id:s,effect:i,type:n,predicate:r,pending:new Set,unsubscribe:function(){throw new Error("Unsubscribe not initialized")}};return o},qB=function(e){e.pending.forEach(function(t){ix(t,sxe)})},Lst=function(e){return function(){e.forEach(qB),e.clear()}},ese=function(e,t,n){try{e(t,n)}catch(r){setTimeout(function(){throw r},0)}},Fst=_f(TS+"/add"),Bst=_f(TS+"/removeAll"),jst=_f(TS+"/remove"),zst=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.error.apply(console,t1([TS+"/error"],e))};function Ust(e){var t=this;e===void 0&&(e={});var n=new Map,r=e.extra,i=e.onError,s=i===void 0?zst:i;jq(s,"onError");var o=function(h){return h.unsubscribe=function(){return n.delete(h.id)},n.set(h.id,h),function(p){h.unsubscribe(),p!=null&&p.cancelActive&&qB(h)}},a=function(h){for(var p=0,m=Array.from(n.values());p<m.length;p++){var y=m[p];if(h(y))return y}},u=function(h){var p=a(function(m){return m.effect===h.effect});return p||(p=Mst(h)),o(p)},l=function(h){var p=uxe(h),m=p.type,y=p.effect,v=p.predicate,b=a(function(w){var E=typeof m=="string"?w.type===m:w.predicate===v;return E&&w.effect===y});return b&&(b.unsubscribe(),h.cancelActive&&qB(b)),!!b},c=function(h,p,m,y){return _S(t,null,function(){var v,b,w,E;return ES(this,function(_){switch(_.label){case 0:v=new AbortController,b=$st(u,v.signal),w=[],_.label=1;case 1:return _.trys.push([1,3,4,6]),h.pending.add(v),[4,Promise.resolve(h.effect(p,Nst({},m,{getOriginalState:y,condition:function(C,S){return b(C,S).then(Boolean)},take:b,delay:axe(v.signal),pause:c3(v.signal),extra:r,signal:v.signal,fork:Ost(v.signal,w),unsubscribe:h.unsubscribe,subscribe:function(){n.set(h.id,h)},cancelActiveListeners:function(){h.pending.forEach(function(C,S,k){C!==v&&(ix(C,sxe),k.delete(C))})}})))];case 2:return _.sent(),[3,6];case 3:return E=_.sent(),E instanceof RO||ese(s,E,{raisedBy:"effect"}),[3,6];case 4:return[4,Promise.allSettled(w)];case 5:return _.sent(),ix(v,Dst),h.pending.delete(v),[7];case 6:return[2]}})})},d=Lst(n),f=function(h){return function(p){return function(m){if(!dst(m))return p(m);if(Fst.match(m))return u(m.payload);if(Bst.match(m)){d();return}if(jst.match(m))return l(m.payload);var y=h.getState(),v=function(){if(y===Zie)throw new Error(TS+": getOriginalState can only be called synchronously");return y},b;try{if(b=p(m),n.size>0)for(var w=h.getState(),E=Array.from(n.values()),_=0,C=E;_<C.length;_++){var S=C[_],k=!1;try{k=S.predicate(m,w,y)}catch(R){k=!1,ese(s,R,{raisedBy:"predicate"})}k&&c(S,m,h,v)}}finally{y=Zie}return b}}};return{middleware:f,startListening:u,stopListening:l,clearListeners:d}}var tse;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);Wit();function Vst(){const e=new Map;return{listen(t,n){return e.has(t)||e.set(t,[]),e.get(t).push(n),()=>{e.set(t,(e.get(t)||[]).filter(r=>r!==n))}},fire(t,n){const r=e.get(t);r&&r.forEach(i=>i(n))}}}let tI;const Hst=new Uint8Array(16);function qst(){if(!tI&&(tI=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!tI))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return tI(Hst)}const bo=[];for(let e=0;e<256;++e)bo.push((e+256).toString(16).slice(1));function Wst(e,t=0){return(bo[e[t+0]]+bo[e[t+1]]+bo[e[t+2]]+bo[e[t+3]]+"-"+bo[e[t+4]]+bo[e[t+5]]+"-"+bo[e[t+6]]+bo[e[t+7]]+"-"+bo[e[t+8]]+bo[e[t+9]]+"-"+bo[e[t+10]]+bo[e[t+11]]+bo[e[t+12]]+bo[e[t+13]]+bo[e[t+14]]+bo[e[t+15]]).toLowerCase()}const Gst=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),nse={randomUUID:Gst};function rse(e,t,n){if(nse.randomUUID&&!e)return nse.randomUUID();e=e||{};const r=e.random||(e.rng||qst)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,Wst(r)}class Tf{static get(){let t=rse();for(;this.ids.has(t);)t=rse();return this.ids.set(t,!0),t}}Tf.ids=new Map;function sd(e){return"parent"in e}function lxe(e){return!sd(e)}function Yst(e){const{label:t=void 0,state:n,initialArtifact:r,initialMetadata:i}=e,s={annotation:[],bookmark:[]},o=Object.keys(i||{}).reduce((u,l)=>(u[l]=[],i&&i[l]&&u[l].push({type:l,id:Tf.get(),val:i[l],createdOn:Date.now()}),u),s),a=r?[{id:Tf.get(),createdOn:Date.now(),val:r}]:[];return{id:Tf.get(),label:t||"Root",event:"Root",children:[],level:0,createdOn:Date.now(),meta:o,artifacts:a,state:{type:"checkpoint",val:n}}}function Kst({parent:e,state:t,label:n,sideEffects:r={do:[],undo:[]},initialMetadata:i,initialArtifact:s,event:o}){const a={annotation:[],bookmark:[]},u=Object.keys(i||{}).reduce((c,d)=>(c[d]=[],i&&i[d]&&c[d].push({type:d,id:Tf.get(),val:i[d],createdOn:Date.now()}),c),a),l=s?[{id:Tf.get(),createdOn:Date.now(),val:s}]:[];return{id:Tf.get(),label:n,event:o,children:[],parent:e.id,createdOn:Date.now(),meta:u,artifacts:l,sideEffects:r,state:t,level:e.level+1}}function Di(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if({}.NODE_ENV!=="production"){var i=iot[e],s=i?typeof i=="function"?i.apply(null,n):i:"unknown error nr: "+e;throw Error("[Immer] "+s)}throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(o){return"'"+o+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function n1(e){return!!e&&!!e[pl]}function P0(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===sot}(e)||Array.isArray(e)||!!e[n2]||!!(!((t=e.constructor)===null||t===void 0)&&t[n2])||DO(e)||PO(e))}function $x(e,t,n){n===void 0&&(n=!1),N0(e)===0?(n?Object.keys:Gq)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function N0(e){var t=e[pl];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:DO(e)?2:PO(e)?3:0}function Q2(e,t){return N0(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function oD(e,t){return N0(e)===2?e.get(t):e[t]}function cxe(e,t,n){var r=N0(e);r===2?e.set(t,n):r===3?(e.delete(t),e.add(n)):e[t]=n}function Xst(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function DO(e){return not&&e instanceof Map}function PO(e){return rot&&e instanceof Set}function ly(e){return e.o||e.t}function Uq(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=oot(e);delete t[pl];for(var n=Gq(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function Vq(e,t){return t===void 0&&(t=!1),Hq(e)||n1(e)||!P0(e)||(N0(e)>1&&(e.set=e.add=e.clear=e.delete=Qst),Object.freeze(e),t&&$x(e,function(n,r){return Vq(r,!0)},!0)),e}function Qst(){Di(2)}function Hq(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function Cf(e){var t=KB[e];return t||Di(18,e),t}function Jst(e,t){KB[e]||(KB[e]=t)}function ise(){return{}.NODE_ENV==="production"||Mx||Di(0),Mx}function pL(e,t){t&&(Cf("Patches"),e.u=[],e.s=[],e.v=t)}function d3(e){WB(e),e.p.forEach(Zst),e.p=null}function WB(e){e===Mx&&(Mx=e.l)}function sse(e){return Mx={p:[],l:Mx,h:e,m:!0,_:0}}function Zst(e){var t=e[pl];t.i===0||t.i===1?t.j():t.O=!0}function mL(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.g||Cf("ES5").S(t,e,r),r?(n[pl].P&&(d3(t),Di(4)),P0(e)&&(e=f3(t,e),t.l||h3(t,e)),t.u&&Cf("Patches").M(n[pl].t,e,t.u,t.s)):e=f3(t,n,[]),d3(t),t.u&&t.v(t.u,t.s),e!==Wq?e:void 0}function f3(e,t,n){if(Hq(t))return t;var r=t[pl];if(!r)return $x(t,function(s,o){return ose(e,r,t,s,o,n)},!0),t;if(r.A!==e)return t;if(!r.P)return h3(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=Uq(r.k):r.o;$x(r.i===3?new Set(i):i,function(s,o){return ose(e,r,i,s,o,n)}),h3(e,i,!1),n&&e.u&&Cf("Patches").R(r,n,e.u,e.s)}return r.o}function ose(e,t,n,r,i,s){if({}.NODE_ENV!=="production"&&i===n&&Di(5),n1(i)){var o=f3(e,i,s&&t&&t.i!==3&&!Q2(t.D,r)?s.concat(r):void 0);if(cxe(n,r,o),!n1(o))return;e.m=!1}if(P0(i)&&!Hq(i)){if(!e.h.F&&e._<1)return;f3(e,i),t&&t.A.l||h3(e,i)}}function h3(e,t,n){n===void 0&&(n=!1),e.h.F&&e.m&&Vq(t,n)}function gL(e,t){var n=e[pl];return(n?ly(n):e)[t]}function ase(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function GB(e){e.P||(e.P=!0,e.l&&GB(e.l))}function yL(e){e.o||(e.o=Uq(e.t))}function YB(e,t,n){var r=DO(t)?Cf("MapSet").N(t,n):PO(t)?Cf("MapSet").T(t,n):e.g?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:ise(),P:!1,I:!1,D:{},l:s,t:i,k:null,o:null,j:null,C:!1},u=a,l=XB;o&&(u=[a],l=lT);var c=Proxy.revocable(u,l),d=c.revoke,f=c.proxy;return a.k=f,a.j=d,f}(t,n):Cf("ES5").J(t,n);return(n?n.A:ise()).p.push(r),r}function eot(e){return n1(e)||Di(22,e),function t(n){if(!P0(n))return n;var r,i=n[pl],s=N0(n);if(i){if(!i.P&&(i.i<4||!Cf("ES5").K(i)))return i.t;i.I=!0,r=use(n,s),i.I=!1}else r=use(n,s);return $x(r,function(o,a){i&&oD(i.t,o)===a||cxe(r,o,t(a))}),s===3?new Set(r):r}(e)}function use(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return Uq(e)}function tot(){function e(r){if(!P0(r))return r;if(Array.isArray(r))return r.map(e);if(DO(r))return new Map(Array.from(r.entries()).map(function(o){return[o[0],e(o[1])]}));if(PO(r))return new Set(Array.from(r).map(e));var i=Object.create(Object.getPrototypeOf(r));for(var s in r)i[s]=e(r[s]);return Q2(r,n2)&&(i[n2]=r[n2]),i}function t(r){return n1(r)?e(r):r}var n="add";Jst("Patches",{$:function(r,i){return i.forEach(function(s){for(var o=s.path,a=s.op,u=r,l=0;l<o.length-1;l++){var c=N0(u),d=""+o[l];c!==0&&c!==1||d!=="__proto__"&&d!=="constructor"||Di(24),typeof u=="function"&&d==="prototype"&&Di(24),typeof(u=oD(u,d))!="object"&&Di(15,o.join("/"))}var f=N0(u),h=e(s.value),p=o[o.length-1];switch(a){case"replace":switch(f){case 2:return u.set(p,h);case 3:Di(16);default:return u[p]=h}case n:switch(f){case 1:return p==="-"?u.push(h):u.splice(p,0,h);case 2:return u.set(p,h);case 3:return u.add(h);default:return u[p]=h}case"remove":switch(f){case 1:return u.splice(p,1);case 2:return u.delete(p);case 3:return u.delete(s.value);default:return delete u[p]}default:Di(17,a)}}),r},R:function(r,i,s,o){switch(r.i){case 0:case 4:case 2:return function(a,u,l,c){var d=a.t,f=a.o;$x(a.D,function(h,p){var m=oD(d,h),y=oD(f,h),v=p?Q2(d,h)?"replace":n:"remove";if(m!==y||v!=="replace"){var b=u.concat(h);l.push(v==="remove"?{op:v,path:b}:{op:v,path:b,value:y}),c.push(v===n?{op:"remove",path:b}:v==="remove"?{op:n,path:b,value:t(m)}:{op:"replace",path:b,value:t(m)})}})}(r,i,s,o);case 5:case 1:return function(a,u,l,c){var d=a.t,f=a.D,h=a.o;if(h.length<d.length){var p=[h,d];d=p[0],h=p[1];var m=[c,l];l=m[0],c=m[1]}for(var y=0;y<d.length;y++)if(f[y]&&h[y]!==d[y]){var v=u.concat([y]);l.push({op:"replace",path:v,value:t(h[y])}),c.push({op:"replace",path:v,value:t(d[y])})}for(var b=d.length;b<h.length;b++){var w=u.concat([b]);l.push({op:n,path:w,value:t(h[b])})}d.length<h.length&&c.push({op:"replace",path:u.concat(["length"]),value:d.length})}(r,i,s,o);case 3:return function(a,u,l,c){var d=a.t,f=a.o,h=0;d.forEach(function(p){if(!f.has(p)){var m=u.concat([h]);l.push({op:"remove",path:m,value:p}),c.unshift({op:n,path:m,value:p})}h++}),h=0,f.forEach(function(p){if(!d.has(p)){var m=u.concat([h]);l.push({op:n,path:m,value:p}),c.unshift({op:"remove",path:m,value:p})}h++})}(r,i,s,o)}},M:function(r,i,s,o){s.push({op:"replace",path:[],value:i===Wq?void 0:i}),o.push({op:"replace",path:[],value:r})}})}var lse,Mx,qq=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",not=typeof Map<"u",rot=typeof Set<"u",cse=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",Wq=qq?Symbol.for("immer-nothing"):((lse={})["immer-nothing"]=!0,lse),n2=qq?Symbol.for("immer-draftable"):"__$immer_draftable",pl=qq?Symbol.for("immer-state"):"__$immer_state",iot={0:"Illegal state",1:"Immer drafts cannot have computed properties",2:"This object has been frozen and should not be mutated",3:function(e){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+e},4:"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.",5:"Immer forbids circular references",6:"The first or second argument to `produce` must be a function",7:"The third argument to `produce` must be a function or undefined",8:"First argument to `createDraft` must be a plain object, an array, or an immerable object",9:"First argument to `finishDraft` must be a draft returned by `createDraft`",10:"The given draft is already finalized",11:"Object.defineProperty() cannot be used on an Immer draft",12:"Object.setPrototypeOf() cannot be used on an Immer draft",13:"Immer only supports deleting array indices",14:"Immer only supports setting array indices and the 'length' property",15:function(e){return"Cannot apply patch, path doesn't resolve: "+e},16:'Sets cannot have "replace" patches.',17:function(e){return"Unsupported patch operation: "+e},18:function(e){return"The plugin for '"+e+"' has not been loaded into Immer. To enable the plugin, import and call `enable"+e+"()` when initializing your application."},20:"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available",21:function(e){return"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '"+e+"'"},22:function(e){return"'current' expects a draft, got: "+e},23:function(e){return"'original' expects a draft, got: "+e},24:"Patching reserved attributes like __proto__, prototype and constructor is not allowed"},sot=""+Object.prototype.constructor,Gq=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,oot=Object.getOwnPropertyDescriptors||function(e){var t={};return Gq(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},KB={},XB={get:function(e,t){if(t===pl)return e;var n=ly(e);if(!Q2(n,t))return function(i,s,o){var a,u=ase(s,o);return u?"value"in u?u.value:(a=u.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!P0(r)?r:r===gL(e.t,t)?(yL(e),e.o[t]=YB(e.A.h,r,e)):r},has:function(e,t){return t in ly(e)},ownKeys:function(e){return Reflect.ownKeys(ly(e))},set:function(e,t,n){var r=ase(ly(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=gL(ly(e),t),s=i==null?void 0:i[pl];if(s&&s.t===n)return e.o[t]=n,e.D[t]=!1,!0;if(Xst(n,i)&&(n!==void 0||Q2(e.t,t)))return!0;yL(e),GB(e)}return e.o[t]===n&&typeof n!="number"&&(n!==void 0||t in e.o)||(e.o[t]=n,e.D[t]=!0,!0)},deleteProperty:function(e,t){return gL(e.t,t)!==void 0||t in e.t?(e.D[t]=!1,yL(e),GB(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=ly(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){Di(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){Di(12)}},lT={};$x(XB,function(e,t){lT[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),lT.deleteProperty=function(e,t){return{}.NODE_ENV!=="production"&&isNaN(parseInt(t))&&Di(13),lT.set.call(this,e,t,void 0)},lT.set=function(e,t,n){return{}.NODE_ENV!=="production"&&t!=="length"&&isNaN(parseInt(t))&&Di(14),XB.set.call(this,e[0],t,n,e[0])};var aot=function(){function e(n){var r=this;this.g=cse,this.F=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var u=r;return function(m){var y=this;m===void 0&&(m=a);for(var v=arguments.length,b=Array(v>1?v-1:0),w=1;w<v;w++)b[w-1]=arguments[w];return u.produce(m,function(E){var _;return(_=s).call.apply(_,[y,E].concat(b))})}}var l;if(typeof s!="function"&&Di(6),o!==void 0&&typeof o!="function"&&Di(7),P0(i)){var c=sse(r),d=YB(r,i,void 0),f=!0;try{l=s(d),f=!1}finally{f?d3(c):WB(c)}return typeof Promise<"u"&&l instanceof Promise?l.then(function(m){return pL(c,o),mL(m,c)},function(m){throw d3(c),m}):(pL(c,o),mL(l,c))}if(!i||typeof i!="object"){if((l=s(i))===void 0&&(l=i),l===Wq&&(l=void 0),r.F&&Vq(l,!0),o){var h=[],p=[];Cf("Patches").M(i,l,h,p),o(h,p)}return l}Di(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(l){for(var c=arguments.length,d=Array(c>1?c-1:0),f=1;f<c;f++)d[f-1]=arguments[f];return r.produceWithPatches(l,function(h){return i.apply(void 0,[h].concat(d))})};var o,a,u=r.produce(i,s,function(l,c){o=l,a=c});return typeof Promise<"u"&&u instanceof Promise?u.then(function(l){return[l,o,a]}):[u,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){P0(n)||Di(8),n1(n)&&(n=eot(n));var r=sse(this),i=YB(this,n,void 0);return i[pl].C=!0,WB(r),i},t.finishDraft=function(n,r){var i=n&&n[pl];({}).NODE_ENV!=="production"&&(i&&i.C||Di(9),i.I&&Di(10));var s=i.A;return pL(s,r),mL(void 0,s)},t.setAutoFreeze=function(n){this.F=n},t.setUseProxies=function(n){n&&!cse&&Di(20),this.g=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=Cf("Patches").$;return n1(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},e}(),ml=new aot,uot=ml.produce;ml.produceWithPatches.bind(ml);ml.setAutoFreeze.bind(ml);ml.setUseProxies.bind(ml);ml.applyPatches.bind(ml);ml.createDraft.bind(ml);ml.finishDraft.bind(ml);function lot(e,t={}){const{artifact:n=void 0,metadata:r=void 0,rootLabel:i="Root"}=t,s=Yst({state:e,label:i,initialArtifact:n,initialMetadata:r}),o={nodes:{[s.id]:s},root:s.id,current:s.id};return wst({name:"provenance-graph",initialState:o,reducers:{addMetadata(a,u){const{id:l,meta:c}=u.payload,d=a.nodes[l].meta,f=Object.keys(c).reduce((h,p)=>(h[p]||(h[p]=[]),h[p].push({type:p,id:Tf.get(),val:c[p],createdOn:Date.now()}),h),d);a.nodes[u.payload.id].meta=f},addArtifact(a,u){a.nodes[u.payload.id].artifacts.push({id:Tf.get(),createdOn:Date.now(),val:u.payload.artifact})},changeCurrent(a,u){a.current=u.payload},addNode(a,{payload:u}){a.nodes[u.id]=u,a.nodes[u.parent].children.push(u.id),a.current=u.id},load(a,{payload:u}){return u}}})}function cot(e){const t=new Map,{reducer:n,actions:r,getInitialState:i}=lot(e),s=Ust();s.startListening({matcher:Jie(r.changeCurrent,r.addNode),effect:(a,u)=>{u.cancelActiveListeners(),t.forEach(l=>{const c=Jie(r.addNode)(a),{skipOnNew:d}=l.config;d&&c||l.func(c?"new":"traversal")})}});const o=yst({reducer:n,middleware:a=>a().prepend(s.middleware)});return{initialState:i(),get backend(){return o.getState()},get current(){return o.getState().nodes[o.getState().current]},get root(){return o.getState().nodes[o.getState().root]},currentChange(a,u){const l={id:Tf.get(),func:a,config:u};return t.set(l.id,l),()=>t.delete(l.id)},update:o.dispatch,...r}}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var dot=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),fot=Object.prototype.hasOwnProperty;function QB(e,t){return fot.call(e,t)}function JB(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)QB(e,i)&&r.push(i);return r}function _u(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function ZB(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function cy(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function dxe(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function ej(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(ej(e[t]))return!0}else if(typeof e=="object"){for(var r=JB(e),i=r.length,s=0;s<i;s++)if(ej(e[r[s]]))return!0}}return!1}function dse(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var fxe=function(e){dot(t,e);function t(n,r,i,s,o){var a=this.constructor,u=e.call(this,dse(n,{name:r,index:i,operation:s,tree:o}))||this;return u.name=r,u.index=i,u.operation=s,u.tree=o,Object.setPrototypeOf(u,a.prototype),u.message=dse(n,{name:r,index:i,operation:s,tree:o}),u}return t}(Error),Ii=fxe,hot=_u,Lv={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=p3(n,this.path);r&&(r=_u(r));var i=By(n,{op:"remove",path:this.from}).removed;return By(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=p3(n,this.from);return By(n,{op:"add",path:this.path,value:_u(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:J2(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},pot={add:function(e,t,n){return ZB(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:Lv.move,copy:Lv.copy,test:Lv.test,_get:Lv._get};function p3(e,t){if(t=="")return e;var n={op:"_get",path:t};return By(e,n),n.value}function By(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):m3(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=p3(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=J2(e,t.value),o.test===!1)throw new Ii("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new Ii("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{r||(e=_u(e));var a=t.path||"",u=a.split("/"),l=e,c=1,d=u.length,f=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=m3;;){if(h=u[c],h&&h.indexOf("~")!=-1&&(h=dxe(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&u[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&f===void 0&&(l[h]===void 0?f=u.slice(0,c).join("/"):c==d-1&&(f=t.path),f!==void 0&&p(t,0,e,f)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(n&&!ZB(h))throw new Ii("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);ZB(h)&&(h=~~h)}if(c>=d){if(n&&t.op==="add"&&h>l.length)throw new Ii("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=pot[t.op].call(t,l,h,e);if(o.test===!1)throw new Ii("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(c>=d){var o=Lv[t.op].call(t,l,h,e);if(o.test===!1)throw new Ii("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(l=l[h],n&&c<d&&(!l||typeof l!="object"))throw new Ii("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function NO(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new Ii("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=_u(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=By(e,t[o],n,!0,i,o),e=s[o].newDocument;return s.newDocument=e,s}function mot(e,t,n){var r=By(e,t);if(r.test===!1)throw new Ii("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function m3(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new Ii("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(Lv[e.op]){if(typeof e.path!="string")throw new Ii("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new Ii('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new Ii("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new Ii("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&ej(e.value))throw new Ii("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new Ii("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new Ii("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=hxe([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new Ii("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new Ii("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function hxe(e,t,n){try{if(!Array.isArray(e))throw new Ii("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)NO(_u(t),_u(e),n||!0);else{n=n||m3;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof Ii)return i;throw i}}function J2(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,o;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!J2(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!J2(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}const got=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:Ii,_areEquals:J2,applyOperation:By,applyPatch:NO,applyReducer:mot,deepClone:hot,getValueByPointer:p3,validate:hxe,validator:m3},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var Yq=new WeakMap,yot=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),bot=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function vot(e){return Yq.get(e)}function xot(e,t){return e.observers.get(t)}function wot(e,t){e.observers.delete(t.callback)}function Eot(e,t){t.unobserve()}function _ot(e,t){var n=[],r,i=vot(e);if(!i)i=new yot(e),Yq.set(e,i);else{var s=xot(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=_u(e),t){r.callback=t,r.next=null;var o=function(){tj(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){tj(r),clearTimeout(r.next),wot(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new bot(t,r)),r}function tj(e,t){t===void 0&&(t=!1);var n=Yq.get(e.object);Kq(n.value,e.object,e.patches,"",t),e.patches.length&&NO(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function Kq(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=JB(t),o=JB(e),a=!1,u=o.length-1;u>=0;u--){var l=o[u],c=e[l];if(QB(t,l)&&!(t[l]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var d=t[l];typeof c=="object"&&c!=null&&typeof d=="object"&&d!=null&&Array.isArray(c)===Array.isArray(d)?Kq(c,d,n,r+"/"+cy(l),i):c!==d&&(i&&n.push({op:"test",path:r+"/"+cy(l),value:_u(c)}),n.push({op:"replace",path:r+"/"+cy(l),value:_u(d)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+cy(l),value:_u(c)}),n.push({op:"remove",path:r+"/"+cy(l)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&s.length==o.length))for(var u=0;u<s.length;u++){var l=s[u];!QB(e,l)&&t[l]!==void 0&&n.push({op:"add",path:r+"/"+cy(l),value:_u(t[l])})}}}function pxe(e,t,n){n===void 0&&(n=!1);var r=[];return Kq(e,t,r,"",n),r}const Tot=Object.freeze(Object.defineProperty({__proto__:null,compare:pxe,generate:tj,observe:_ot,unobserve:Eot},Symbol.toStringTag,{value:"Module"}));Object.assign({},got,Tot,{JsonPatchError:fxe,deepClone:_u,escapePathComponent:cy,unescapePathComponent:dxe});var cT=(e=>(e.TRAVERSAL_START="Traversal_Start",e.TRAVERSAL_END="Traversal_End",e))(cT||{});function aD(e,t){const n=e.state;if(n.type==="checkpoint")return n.val;const{checkpointRef:r}=n,i=t[r],s=mxe(i,e,t);s.shift();const o=s.map(u=>t[u]).map(u=>u.state.val).reduce((u,l)=>[...u,...l],[]),a=aD(i,t);return NO(a,_u(o),!0,!1).newDocument}function Cot(e,t){const n=Object.keys(e).length;return new Set(t.map(r=>r.path.split("/")[0])).size<n/2?"patch":"checkpoint"}function CS({registry:e,initialState:t}){let n=!1;const r=Vst(),i=cot(t);function s(c){return i.backend.nodes[c]}r.listen(cT.TRAVERSAL_START,()=>{n=!0}),r.listen(cT.TRAVERSAL_END,()=>{n=!1});const o={add(c,d=i.current.id){i.update(i.addMetadata({id:d,meta:c}))},latestOfType(c,d=i.current.id){var f;return(f=i.backend.nodes[d].meta[c])==null?void 0:f.at(-1)},allOfType(c,d=i.current.id){return i.backend.nodes[d].meta[c]},latest(c=i.current.id){const d=i.backend.nodes[c].meta,f=Object.keys(d).reduce((h,p)=>{const m=d[p].at(-1);return m&&(h[p]=m),h},{});return Object.keys(f).length>0?f:void 0},all(c=i.current.id){return i.backend.nodes[c].meta},types(c=i.current.id){return Object.keys(i.backend.nodes[c].meta)}},a={add(c,d=i.current.id){i.update(i.addArtifact({id:d,artifact:c}))},latest(c=i.current.id){return i.backend.nodes[c].artifacts.at(-1)},all(c=i.current.id){return i.backend.nodes[c].artifacts}},u={add(c,d=i.current.id){o.add({annotation:c},d)},latest(c=i.current.id){var d;return(d=o.latestOfType("annotation",c))==null?void 0:d.val},all(c=i.current.id){var d;return(d=o.allOfType("annotation",c))==null?void 0:d.map(f=>f.val)}},l={add(c=i.current.id){o.add({bookmark:!0},c)},remove(c=i.current.id){o.add({bookmark:!1},c)},is(c=i.current.id){var d;return!!((d=o.latestOfType("bookmark",c))!=null&&d.val)},toggle(c=i.current.id){l.is(c)?l.remove(c):l.add(c)}};return{registry:e,get isTraversing(){return n},getState(c=i.current){return aD(c,i.backend.nodes)},graph:i,get current(){return i.current},get root(){return i.root},record({label:c,state:d,sideEffects:f,eventType:h,onlySideEffects:p=!1}){let m=null,y=null;const v=aD(this.current,this.graph.backend.nodes);if(p)y={type:"checkpoint",val:d};else{const b=pxe(v,d);if(Cot(d,b)==="checkpoint")y={type:"checkpoint",val:d};else{const w=this.current.state.type==="checkpoint"?this.current.id:this.current.state.checkpointRef;y={type:"patch",val:b,checkpointRef:w}}}if(!y)throw new Error(`Could not calculate new state. Previous state is: ${JSON.stringify(this.current.state,null,2)}`);if(m=Kst({label:c,state:y,parent:this.current,sideEffects:f,event:h}),!m)throw new Error("State Node creation failed!");i.update(i.addNode(m))},async apply(c,d){const f=e.get(d.type),h=aD(this.current,this.graph.backend.nodes);if(f.config.hasSideEffects){const{do:p=d,undo:m}=f.func(d.payload);this.record({label:c,state:h,sideEffects:{do:[p],undo:[m]},eventType:f.config.eventType})}else{const p=f.func(h,d.payload);this.record({label:c,state:p,sideEffects:{do:[],undo:[]},eventType:f.config.eventType})}},async to(c){r.fire(cT.TRAVERSAL_START);const d=mxe(i.current,i.backend.nodes[c],i.backend.nodes),f=[];for(let h=0;h<d.length-1;++h){const p=s(d[h]),m=s(d[h+1]);Aot(p,m)?sd(p)&&f.push(...p.sideEffects.undo):sd(m)&&f.push(...m.sideEffects.do)}for(const h of f){const p=e.get(h.type).func;await p(h.payload)}i.update(i.changeCurrent(c)),r.fire(cT.TRAVERSAL_END)},undo(){const{current:c}=i;return sd(c)?this.to(c.parent):Promise.resolve(console.warn("Already at root!"))},redo(c="latest"){const{current:d}=i;return d.children.length>0?this.to(d.children[c==="oldest"?0:d.children.length-1]):Promise.resolve(console.warn("Already at latest in this branch!"))},currentChange(c,d=!1){return i.currentChange(c,{skipOnNew:d})},done(){console.log("Setup later for URL sharing.")},tree(){return gxe(i.root,i.backend.nodes)},on(c,d){r.listen(c,d)},export(){return JSON.stringify(i.backend)},exportObject(){return JSON.parse(JSON.stringify(i.backend))},import(c){const d=JSON.parse(c),f=d.current;d.current=d.root,i.update(i.load(d)),this.to(f)},importObject(c){const d=c.current;c.current=c.root,i.update(i.load(c)),this.to(d)},metadata:o,artifact:a,annotations:u,bookmarks:l}}function Sot(e,t,n){let[r,i]=[e,t];r.level>i.level&&([r,i]=[i,r]);let s=i.level-r.level;for(;sd(i)&&s!==0;)i=n[i.parent],s-=1;if(r.id===i.id)return r.id;for(;r.id!==i.id;)sd(r)&&(r=n[r.parent]),sd(i)&&(i=n[i.parent]);return r.id}function mxe(e,t,n){const r=Sot(e,t,n),i=n[r],s=[],o=[];let[a,u]=[e,t];for(;a.id!==i.id;)s.push(a),sd(a)&&(a=n[a.parent]);for(s.push(a);u.id!==i.id;)o.push(u),sd(u)&&(u=n[u.parent]);const l=o.reverse();return[...s,...l].map(c=>c.id)}function Aot(e,t){if(sd(e)&&e.parent===t.id)return!0;if(sd(t)&&t.parent===e.id)return!1;throw new Error("Incorrect use of function. Nodes are not connected to each other.")}function gxe(e,t){return{...e,children:e.children.map(n=>gxe(t[n],t)),name:`${e.label}`}}tot();function kot(e){return e.length===2?uot(e):e}class J1{static create(){return new J1}constructor(){this.registry=new Map}has(t){return this.registry.has(t)}register(t,n,r){const i=n.length===2;if(n.length>2)throw new Error("Incorrect action function signature. Action function can only have two arguments at most!");if(this.has(t))throw new Error(`Already registered: ${t}`);const{label:s=t,eventType:o=t}=r||{};return this.registry.set(t,{func:kot(n),config:{hasSideEffects:!i,label:typeof s=="string"?()=>s:s,eventType:o}}),_f(t)}get(t){const n=this.registry.get(t);if(!n)throw new Error(`Not registered: ${t}`);return n}}function dp(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Iot(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function sE(e){let t,n,r;e.length!==2?(t=dp,n=(a,u)=>dp(e(a),u),r=(a,u)=>e(a)-u):(t=e===dp||e===Iot?e:Rot,n=e,r=e);function i(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const d=l+c>>>1;n(a[d],u)<0?l=d+1:c=d}while(l<c)}return l}function s(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const d=l+c>>>1;n(a[d],u)<=0?l=d+1:c=d}while(l<c)}return l}function o(a,u,l=0,c=a.length){const d=i(a,u,l,c-1);return d>l&&r(a[d-1],u)>-r(a[d],u)?d-1:d}return{left:i,center:o,right:s}}function Rot(){return 0}function yxe(e){return e===null?NaN:+e}function*Dot(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const bxe=sE(dp),O0=bxe.right,Pot=bxe.left;sE(yxe).center;function Not(e,t){let n=0,r,i=0,s=0;if(t===void 0)for(let o of e)o!=null&&(o=+o)>=o&&(r=o-i,i+=r/++n,s+=r*(o-i));else{let o=-1;for(let a of e)(a=t(a,++o,e))!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,s+=r*(a-i))}if(n>1)return s/(n-1)}function Oot(e,t){const n=Not(e,t);return n&&Math.sqrt(n)}function $ot(e,t){let n,r;for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));return[n,r]}class za{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const s=n[i],o=t+s,a=Math.abs(t)<Math.abs(s)?t-(o-s):s-(o-t);a&&(n[r++]=a),t=o}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,s,o=0;if(n>0){for(o=t[--n];n>0&&(r=o,i=t[--n],o=r+i,s=i-(o-r),!s););n>0&&(s<0&&t[n-1]<0||s>0&&t[n-1]>0)&&(i=s*2,r=o+i,i==r-o&&(o=r))}return o}}class fse extends Map{constructor(t,n=wxe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(nj(this,t))}has(t){return super.has(nj(this,t))}set(t,n){return super.set(vxe(this,t),n)}delete(t){return super.delete(xxe(this,t))}}class g3 extends Set{constructor(t,n=wxe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(nj(this,t))}add(t){return super.add(vxe(this,t))}delete(t){return super.delete(xxe(this,t))}}function nj({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function vxe({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function xxe({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function wxe(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Mot(e,t){return Array.from(t,n=>e[n])}function Lot(e=dp){if(e===dp)return Exe;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function Exe(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const Fot=Math.sqrt(50),Bot=Math.sqrt(10),jot=Math.sqrt(2);function y3(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=Fot?10:s>=Bot?5:s>=jot?2:1;let a,u,l;return i<0?(l=Math.pow(10,-i)/o,a=Math.round(e*l),u=Math.round(t*l),a/l<e&&++a,u/l>t&&--u,l=-l):(l=Math.pow(10,i)*o,a=Math.round(e/l),u=Math.round(t/l),a*l<e&&++a,u*l>t&&--u),u<a&&.5<=n&&n<2?y3(e,t,n*2):[a,u,l]}function rj(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,s,o]=r?y3(t,e,n):y3(e,t,n);if(!(s>=i))return[];const a=s-i+1,u=new Array(a);if(r)if(o<0)for(let l=0;l<a;++l)u[l]=(s-l)/-o;else for(let l=0;l<a;++l)u[l]=(s-l)*o;else if(o<0)for(let l=0;l<a;++l)u[l]=(i+l)/-o;else for(let l=0;l<a;++l)u[l]=(i+l)*o;return u}function ij(e,t,n){return t=+t,e=+e,n=+n,y3(e,t,n)[2]}function $0(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?ij(t,e,n):ij(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function jy(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function sj(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function _xe(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?Exe:Lot(i);r>n;){if(r-n>600){const u=r-n+1,l=t-n+1,c=Math.log(u),d=.5*Math.exp(2*c/3),f=.5*Math.sqrt(c*d*(u-d)/u)*(l-u/2<0?-1:1),h=Math.max(n,Math.floor(t-l*d/u+f)),p=Math.min(r,Math.floor(t+(u-l)*d/u+f));_xe(e,t,h,p,i)}const s=e[t];let o=n,a=r;for(x_(e,n,t),i(e[r],s)>0&&x_(e,n,r);o<a;){for(x_(e,o,a),++o,--a;i(e[o],s)<0;)++o;for(;i(e[a],s)>0;)--a}i(e[n],s)===0?x_(e,n,a):(++a,x_(e,a,r)),a<=t&&(n=a+1),t<=a&&(r=a-1)}return e}function x_(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function oj(e,t,n){if(e=Float64Array.from(Dot(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return sj(e);if(t>=1)return jy(e);var r,i=(r-1)*t,s=Math.floor(i),o=jy(_xe(e,s).subarray(0,s+1)),a=sj(e.subarray(s+1));return o+(a-o)*(i-s)}}function Txe(e,t,n=yxe){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,s=Math.floor(i),o=+n(e[s],s,e),a=+n(e[s+1],s+1,e);return o+(a-o)*(i-s)}}function zot(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(s=+s)>=s&&(++n,r+=s)}if(n)return r/n}function Cxe(e,t){return oj(e,.5,t)}function*Uot(e){for(const t of e)yield*t}function Sxe(e){return Array.from(Uot(e))}function Tu(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function Axe(e,t){let n=0;for(let r of e)(r=+r)&&(n+=r);return n}function Vot(e,...t){e=new g3(e),t=t.map(Hot);e:for(const n of e)for(const r of t)if(!r.has(n)){e.delete(n);continue e}return e}function Hot(e){return e instanceof g3?e:new g3(e)}function qot(...e){const t=new g3;for(const n of e)for(const r of n)t.add(r);return t}var Wot={value:()=>{}};function Xq(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new uD(n)}function uD(e){this._=e}function Got(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}uD.prototype=Xq.prototype={constructor:uD,on:function(e,t){var n=this._,r=Got(e+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(e=r[s]).type)&&(i=Yot(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(i=(e=r[s]).type)n[i]=hse(n[i],e.name,t);else if(t==null)for(i in n)n[i]=hse(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new uD(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function Yot(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function hse(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=Wot,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var aj="http://www.w3.org/1999/xhtml";const pse={svg:"http://www.w3.org/2000/svg",xhtml:aj,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function OO(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),pse.hasOwnProperty(t)?{space:pse[t],local:e}:e}function Kot(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===aj&&t.documentElement.namespaceURI===aj?t.createElement(e):t.createElementNS(n,e)}}function Xot(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function kxe(e){var t=OO(e);return(t.local?Xot:Kot)(t)}function Qot(){}function Qq(e){return e==null?Qot:function(){return this.querySelector(e)}}function Jot(e){typeof e!="function"&&(e=Qq(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=new Array(o),u,l,c=0;c<o;++c)(u=s[c])&&(l=e.call(u,u.__data__,c,s))&&("__data__"in u&&(l.__data__=u.__data__),a[c]=l);return new gl(r,this._parents)}function Zot(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function eat(){return[]}function Ixe(e){return e==null?eat:function(){return this.querySelectorAll(e)}}function tat(e){return function(){return Zot(e.apply(this,arguments))}}function nat(e){typeof e=="function"?e=tat(e):e=Ixe(e);for(var t=this._groups,n=t.length,r=[],i=[],s=0;s<n;++s)for(var o=t[s],a=o.length,u,l=0;l<a;++l)(u=o[l])&&(r.push(e.call(u,u.__data__,l,o)),i.push(u));return new gl(r,i)}function Rxe(e){return function(){return this.matches(e)}}function Dxe(e){return function(t){return t.matches(e)}}var rat=Array.prototype.find;function iat(e){return function(){return rat.call(this.children,e)}}function sat(){return this.firstElementChild}function oat(e){return this.select(e==null?sat:iat(typeof e=="function"?e:Dxe(e)))}var aat=Array.prototype.filter;function uat(){return Array.from(this.children)}function lat(e){return function(){return aat.call(this.children,e)}}function cat(e){return this.selectAll(e==null?uat:lat(typeof e=="function"?e:Dxe(e)))}function dat(e){typeof e!="function"&&(e=Rxe(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],u,l=0;l<o;++l)(u=s[l])&&e.call(u,u.__data__,l,s)&&a.push(u);return new gl(r,this._parents)}function Pxe(e){return new Array(e.length)}function fat(){return new gl(this._enter||this._groups.map(Pxe),this._parents)}function b3(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}b3.prototype={constructor:b3,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function hat(e){return function(){return e}}function pat(e,t,n,r,i,s){for(var o=0,a,u=t.length,l=s.length;o<l;++o)(a=t[o])?(a.__data__=s[o],r[o]=a):n[o]=new b3(e,s[o]);for(;o<u;++o)(a=t[o])&&(i[o]=a)}function mat(e,t,n,r,i,s,o){var a,u,l=new Map,c=t.length,d=s.length,f=new Array(c),h;for(a=0;a<c;++a)(u=t[a])&&(f[a]=h=o.call(u,u.__data__,a,t)+"",l.has(h)?i[a]=u:l.set(h,u));for(a=0;a<d;++a)h=o.call(e,s[a],a,s)+"",(u=l.get(h))?(r[a]=u,u.__data__=s[a],l.delete(h)):n[a]=new b3(e,s[a]);for(a=0;a<c;++a)(u=t[a])&&l.get(f[a])===u&&(i[a]=u)}function gat(e){return e.__data__}function yat(e,t){if(!arguments.length)return Array.from(this,gat);var n=t?mat:pat,r=this._parents,i=this._groups;typeof e!="function"&&(e=hat(e));for(var s=i.length,o=new Array(s),a=new Array(s),u=new Array(s),l=0;l<s;++l){var c=r[l],d=i[l],f=d.length,h=bat(e.call(c,c&&c.__data__,l,r)),p=h.length,m=a[l]=new Array(p),y=o[l]=new Array(p),v=u[l]=new Array(f);n(c,d,m,y,v,h,t);for(var b=0,w=0,E,_;b<p;++b)if(E=m[b]){for(b>=w&&(w=b+1);!(_=y[w])&&++w<p;);E._next=_||null}}return o=new gl(o,r),o._enter=a,o._exit=u,o}function bat(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function vat(){return new gl(this._exit||this._groups.map(Pxe),this._parents)}function xat(e,t,n){var r=this.enter(),i=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function wat(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,s=r.length,o=Math.min(i,s),a=new Array(i),u=0;u<o;++u)for(var l=n[u],c=r[u],d=l.length,f=a[u]=new Array(d),h,p=0;p<d;++p)(h=l[p]||c[p])&&(f[p]=h);for(;u<i;++u)a[u]=n[u];return new gl(a,this._parents)}function Eat(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function _at(e){e||(e=Tat);function t(d,f){return d&&f?e(d.__data__,f.__data__):!d-!f}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],a=o.length,u=i[s]=new Array(a),l,c=0;c<a;++c)(l=o[c])&&(u[c]=l);u.sort(t)}return new gl(i,this._parents).order()}function Tat(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Cat(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Sat(){return Array.from(this)}function Aat(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function kat(){let e=0;for(const t of this)++e;return e}function Iat(){return!this.node()}function Rat(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],s=0,o=i.length,a;s<o;++s)(a=i[s])&&e.call(a,a.__data__,s,i);return this}function Dat(e){return function(){this.removeAttribute(e)}}function Pat(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Nat(e,t){return function(){this.setAttribute(e,t)}}function Oat(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function $at(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Mat(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Lat(e,t){var n=OO(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?Pat:Dat:typeof t=="function"?n.local?Mat:$at:n.local?Oat:Nat)(n,t))}function Nxe(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Fat(e){return function(){this.style.removeProperty(e)}}function Bat(e,t,n){return function(){this.style.setProperty(e,t,n)}}function jat(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function zat(e,t,n){return arguments.length>1?this.each((t==null?Fat:typeof t=="function"?jat:Bat)(e,t,n??"")):Lx(this.node(),e)}function Lx(e,t){return e.style.getPropertyValue(t)||Nxe(e).getComputedStyle(e,null).getPropertyValue(t)}function Uat(e){return function(){delete this[e]}}function Vat(e,t){return function(){this[e]=t}}function Hat(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function qat(e,t){return arguments.length>1?this.each((t==null?Uat:typeof t=="function"?Hat:Vat)(e,t)):this.node()[e]}function Oxe(e){return e.trim().split(/^|\s+/)}function Jq(e){return e.classList||new $xe(e)}function $xe(e){this._node=e,this._names=Oxe(e.getAttribute("class")||"")}$xe.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Mxe(e,t){for(var n=Jq(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function Lxe(e,t){for(var n=Jq(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function Wat(e){return function(){Mxe(this,e)}}function Gat(e){return function(){Lxe(this,e)}}function Yat(e,t){return function(){(t.apply(this,arguments)?Mxe:Lxe)(this,e)}}function Kat(e,t){var n=Oxe(e+"");if(arguments.length<2){for(var r=Jq(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?Yat:t?Wat:Gat)(n,t))}function Xat(){this.textContent=""}function Qat(e){return function(){this.textContent=e}}function Jat(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Zat(e){return arguments.length?this.each(e==null?Xat:(typeof e=="function"?Jat:Qat)(e)):this.node().textContent}function eut(){this.innerHTML=""}function tut(e){return function(){this.innerHTML=e}}function nut(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function rut(e){return arguments.length?this.each(e==null?eut:(typeof e=="function"?nut:tut)(e)):this.node().innerHTML}function iut(){this.nextSibling&&this.parentNode.appendChild(this)}function sut(){return this.each(iut)}function out(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function aut(){return this.each(out)}function uut(e){var t=typeof e=="function"?e:kxe(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function lut(){return null}function cut(e,t){var n=typeof e=="function"?e:kxe(e),r=t==null?lut:typeof t=="function"?t:Qq(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function dut(){var e=this.parentNode;e&&e.removeChild(this)}function fut(){return this.each(dut)}function hut(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function put(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function mut(e){return this.select(e?put:hut)}function gut(e){return arguments.length?this.property("__data__",e):this.node().__data__}function yut(e){return function(t){e.call(this,t,this.__data__)}}function but(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function vut(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,s;n<i;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function xut(e,t,n){return function(){var r=this.__on,i,s=yut(t);if(r){for(var o=0,a=r.length;o<a;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=t;return}}this.addEventListener(e.type,s,n),i={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(i):this.__on=[i]}}function wut(e,t,n){var r=but(e+""),i,s=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var u=0,l=a.length,c;u<l;++u)for(i=0,c=a[u];i<s;++i)if((o=r[i]).type===c.type&&o.name===c.name)return c.value}return}for(a=t?xut:vut,i=0;i<s;++i)this.each(a(r[i],t,n));return this}function Fxe(e,t,n){var r=Nxe(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Eut(e,t){return function(){return Fxe(this,e,t)}}function _ut(e,t){return function(){return Fxe(this,e,t.apply(this,arguments))}}function Tut(e,t){return this.each((typeof t=="function"?_ut:Eut)(e,t))}function*Cut(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var Bxe=[null];function gl(e,t){this._groups=e,this._parents=t}function SS(){return new gl([[document.documentElement]],Bxe)}function Sut(){return this}gl.prototype=SS.prototype={constructor:gl,select:Jot,selectAll:nat,selectChild:oat,selectChildren:cat,filter:dat,data:yat,enter:fat,exit:vat,join:xat,merge:wat,selection:Sut,order:Eat,sort:_at,call:Cat,nodes:Sat,node:Aat,size:kat,empty:Iat,each:Rat,attr:Lat,style:zat,property:qat,classed:Kat,text:Zat,html:rut,raise:sut,lower:aut,append:uut,insert:cut,remove:fut,clone:mut,datum:gut,on:wut,dispatch:Tut,[Symbol.iterator]:Cut};function uj(e){return typeof e=="string"?new gl([[document.querySelector(e)]],[document.documentElement]):new gl([[e]],Bxe)}function Aut(e){let t;for(;t=e.sourceEvent;)e=t;return e}function kut(e,t){if(e=Aut(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}function oE(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function AS(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function ag(){}var r1=.7,Fx=1/r1,ox="\\s*([+-]?\\d+)\\s*",Z2="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Sf="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Iut=/^#([0-9a-f]{3,8})$/,Rut=new RegExp(`^rgb\\(${ox},${ox},${ox}\\)$`),Dut=new RegExp(`^rgb\\(${Sf},${Sf},${Sf}\\)$`),Put=new RegExp(`^rgba\\(${ox},${ox},${ox},${Z2}\\)$`),Nut=new RegExp(`^rgba\\(${Sf},${Sf},${Sf},${Z2}\\)$`),Out=new RegExp(`^hsl\\(${Z2},${Sf},${Sf}\\)$`),$ut=new RegExp(`^hsla\\(${Z2},${Sf},${Sf},${Z2}\\)$`),mse={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};oE(ag,i1,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:gse,formatHex:gse,formatHex8:Mut,formatHsl:Lut,formatRgb:yse,toString:yse});function gse(){return this.rgb().formatHex()}function Mut(){return this.rgb().formatHex8()}function Lut(){return jxe(this).formatHsl()}function yse(){return this.rgb().formatRgb()}function i1(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Iut.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?bse(t):n===3?new Ks(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?nI(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?nI(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Rut.exec(e))?new Ks(t[1],t[2],t[3],1):(t=Dut.exec(e))?new Ks(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Put.exec(e))?nI(t[1],t[2],t[3],t[4]):(t=Nut.exec(e))?nI(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Out.exec(e))?wse(t[1],t[2]/100,t[3]/100,1):(t=$ut.exec(e))?wse(t[1],t[2]/100,t[3]/100,t[4]):mse.hasOwnProperty(e)?bse(mse[e]):e==="transparent"?new Ks(NaN,NaN,NaN,0):null}function bse(e){return new Ks(e>>16&255,e>>8&255,e&255,1)}function nI(e,t,n,r){return r<=0&&(e=t=n=NaN),new Ks(e,t,n,r)}function Zq(e){return e instanceof ag||(e=i1(e)),e?(e=e.rgb(),new Ks(e.r,e.g,e.b,e.opacity)):new Ks}function M0(e,t,n,r){return arguments.length===1?Zq(e):new Ks(e,t,n,r??1)}function Ks(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}oE(Ks,M0,AS(ag,{brighter(e){return e=e==null?Fx:Math.pow(Fx,e),new Ks(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?r1:Math.pow(r1,e),new Ks(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ks(zy(this.r),zy(this.g),zy(this.b),v3(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:vse,formatHex:vse,formatHex8:Fut,formatRgb:xse,toString:xse}));function vse(){return`#${Iy(this.r)}${Iy(this.g)}${Iy(this.b)}`}function Fut(){return`#${Iy(this.r)}${Iy(this.g)}${Iy(this.b)}${Iy((isNaN(this.opacity)?1:this.opacity)*255)}`}function xse(){const e=v3(this.opacity);return`${e===1?"rgb(":"rgba("}${zy(this.r)}, ${zy(this.g)}, ${zy(this.b)}${e===1?")":`, ${e})`}`}function v3(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function zy(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Iy(e){return e=zy(e),(e<16?"0":"")+e.toString(16)}function wse(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new qc(e,t,n,r)}function jxe(e){if(e instanceof qc)return new qc(e.h,e.s,e.l,e.opacity);if(e instanceof ag||(e=i1(e)),!e)return new qc;if(e instanceof qc)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),o=NaN,a=s-i,u=(s+i)/2;return a?(t===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-t)/a+2:o=(t-n)/a+4,a/=u<.5?s+i:2-s-i,o*=60):a=u>0&&u<1?0:o,new qc(o,a,u,e.opacity)}function x3(e,t,n,r){return arguments.length===1?jxe(e):new qc(e,t,n,r??1)}function qc(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}oE(qc,x3,AS(ag,{brighter(e){return e=e==null?Fx:Math.pow(Fx,e),new qc(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?r1:Math.pow(r1,e),new qc(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Ks(bL(e>=240?e-240:e+120,i,r),bL(e,i,r),bL(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new qc(Ese(this.h),rI(this.s),rI(this.l),v3(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=v3(this.opacity);return`${e===1?"hsl(":"hsla("}${Ese(this.h)}, ${rI(this.s)*100}%, ${rI(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Ese(e){return e=(e||0)%360,e<0?e+360:e}function rI(e){return Math.max(0,Math.min(1,e||0))}function bL(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const zxe=Math.PI/180,Uxe=180/Math.PI,w3=18,Vxe=.96422,Hxe=1,qxe=.82521,Wxe=4/29,ax=6/29,Gxe=3*ax*ax,But=ax*ax*ax;function Yxe(e){if(e instanceof Af)return new Af(e.l,e.a,e.b,e.opacity);if(e instanceof ep)return Kxe(e);e instanceof Ks||(e=Zq(e));var t=EL(e.r),n=EL(e.g),r=EL(e.b),i=vL((.2225045*t+.7168786*n+.0606169*r)/Hxe),s,o;return t===n&&n===r?s=o=i:(s=vL((.4360747*t+.3850649*n+.1430804*r)/Vxe),o=vL((.0139322*t+.0971045*n+.7141733*r)/qxe)),new Af(116*i-16,500*(s-i),200*(i-o),e.opacity)}function Bx(e,t,n,r){return arguments.length===1?Yxe(e):new Af(e,t,n,r??1)}function Af(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}oE(Af,Bx,AS(ag,{brighter(e){return new Af(this.l+w3*(e??1),this.a,this.b,this.opacity)},darker(e){return new Af(this.l-w3*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=Vxe*xL(t),e=Hxe*xL(e),n=qxe*xL(n),new Ks(wL(3.1338561*t-1.6168667*e-.4906146*n),wL(-.9787684*t+1.9161415*e+.033454*n),wL(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function vL(e){return e>But?Math.pow(e,1/3):e/Gxe+Wxe}function xL(e){return e>ax?e*e*e:Gxe*(e-Wxe)}function wL(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function EL(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function jut(e){if(e instanceof ep)return new ep(e.h,e.c,e.l,e.opacity);if(e instanceof Af||(e=Yxe(e)),e.a===0&&e.b===0)return new ep(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*Uxe;return new ep(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function E3(e,t,n,r){return arguments.length===1?jut(e):new ep(e,t,n,r??1)}function ep(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function Kxe(e){if(isNaN(e.h))return new Af(e.l,0,0,e.opacity);var t=e.h*zxe;return new Af(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}oE(ep,E3,AS(ag,{brighter(e){return new ep(this.h,this.c,this.l+w3*(e??1),this.opacity)},darker(e){return new ep(this.h,this.c,this.l-w3*(e??1),this.opacity)},rgb(){return Kxe(this).rgb()}}));var Xxe=-.14861,eW=1.78277,tW=-.29227,$O=-.90649,eC=1.97294,_se=eC*$O,Tse=eC*eW,Cse=eW*tW-$O*Xxe;function zut(e){if(e instanceof Uy)return new Uy(e.h,e.s,e.l,e.opacity);e instanceof Ks||(e=Zq(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(Cse*r+_se*t-Tse*n)/(Cse+_se-Tse),s=r-i,o=(eC*(n-i)-tW*s)/$O,a=Math.sqrt(o*o+s*s)/(eC*i*(1-i)),u=a?Math.atan2(o,s)*Uxe-120:NaN;return new Uy(u<0?u+360:u,a,i,e.opacity)}function L0(e,t,n,r){return arguments.length===1?zut(e):new Uy(e,t,n,r??1)}function Uy(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}oE(Uy,L0,AS(ag,{brighter(e){return e=e==null?Fx:Math.pow(Fx,e),new Uy(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?r1:Math.pow(r1,e),new Uy(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*zxe,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new Ks(255*(t+n*(Xxe*r+eW*i)),255*(t+n*(tW*r+$O*i)),255*(t+n*(eC*r)),this.opacity)}}));function Qxe(e,t,n,r,i){var s=e*e,o=s*e;return((1-3*e+3*s-o)*t+(4-6*s+3*o)*n+(1+3*e+3*s-3*o)*r+o*i)/6}function Jxe(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],s=e[r+1],o=r>0?e[r-1]:2*i-s,a=r<t-1?e[r+2]:2*s-i;return Qxe((n-r/t)*t,o,i,s,a)}}function Zxe(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],s=e[r%t],o=e[(r+1)%t],a=e[(r+2)%t];return Qxe((n-r/t)*t,i,s,o,a)}}const MO=e=>()=>e;function ewe(e,t){return function(n){return e+n*t}}function Uut(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function LO(e,t){var n=t-e;return n?ewe(e,n>180||n<-180?n-360*Math.round(n/360):n):MO(isNaN(e)?t:e)}function Vut(e){return(e=+e)==1?Xs:function(t,n){return n-t?Uut(t,n,e):MO(isNaN(t)?n:t)}}function Xs(e,t){var n=t-e;return n?ewe(e,n):MO(isNaN(e)?t:e)}const tC=function e(t){var n=Vut(t);function r(i,s){var o=n((i=M0(i)).r,(s=M0(s)).r),a=n(i.g,s.g),u=n(i.b,s.b),l=Xs(i.opacity,s.opacity);return function(c){return i.r=o(c),i.g=a(c),i.b=u(c),i.opacity=l(c),i+""}}return r.gamma=e,r}(1);function twe(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),s=new Array(n),o,a;for(o=0;o<n;++o)a=M0(t[o]),r[o]=a.r||0,i[o]=a.g||0,s[o]=a.b||0;return r=e(r),i=e(i),s=e(s),a.opacity=1,function(u){return a.r=r(u),a.g=i(u),a.b=s(u),a+""}}}var nwe=twe(Jxe),Hut=twe(Zxe);function nW(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function rwe(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function qut(e,t){return(rwe(t)?nW:iwe)(e,t)}function iwe(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=ug(e[o],t[o]);for(;o<n;++o)s[o]=t[o];return function(a){for(o=0;o<r;++o)s[o]=i[o](a);return s}}function swe(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Vl(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function owe(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=ug(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var lj=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,_L=new RegExp(lj.source,"g");function Wut(e){return function(){return e}}function Gut(e){return function(t){return e(t)+""}}function rW(e,t){var n=lj.lastIndex=_L.lastIndex=0,r,i,s,o=-1,a=[],u=[];for(e=e+"",t=t+"";(r=lj.exec(e))&&(i=_L.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,u.push({i:o,x:Vl(r,i)})),n=_L.lastIndex;return n<t.length&&(s=t.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?u[0]?Gut(u[0].x):Wut(t):(t=u.length,function(l){for(var c=0,d;c<t;++c)a[(d=u[c]).i]=d.x(l);return a.join("")})}function ug(e,t){var n=typeof t,r;return t==null||n==="boolean"?MO(t):(n==="number"?Vl:n==="string"?(r=i1(t))?(t=r,tC):rW:t instanceof i1?tC:t instanceof Date?swe:rwe(t)?nW:Array.isArray(t)?iwe:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?owe:Vl)(e,t)}function Yut(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function Kut(e,t){var n=LO(+e,+t);return function(r){var i=n(r);return i-360*Math.floor(i/360)}}function kS(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var Sse=180/Math.PI,cj={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function awe(e,t,n,r,i,s){var o,a,u;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,u/=a),e*r<t*n&&(e=-e,t=-t,u=-u,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*Sse,skewX:Math.atan(u)*Sse,scaleX:o,scaleY:a}}var iI;function Xut(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?cj:awe(t.a,t.b,t.c,t.d,t.e,t.f)}function Qut(e){return e==null||(iI||(iI=document.createElementNS("http://www.w3.org/2000/svg","g")),iI.setAttribute("transform",e),!(e=iI.transform.baseVal.consolidate()))?cj:(e=e.matrix,awe(e.a,e.b,e.c,e.d,e.e,e.f))}function uwe(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function s(l,c,d,f,h,p){if(l!==d||c!==f){var m=h.push("translate(",null,t,null,n);p.push({i:m-4,x:Vl(l,d)},{i:m-2,x:Vl(c,f)})}else(d||f)&&h.push("translate("+d+t+f+n)}function o(l,c,d,f){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),f.push({i:d.push(i(d)+"rotate(",null,r)-2,x:Vl(l,c)})):c&&d.push(i(d)+"rotate("+c+r)}function a(l,c,d,f){l!==c?f.push({i:d.push(i(d)+"skewX(",null,r)-2,x:Vl(l,c)}):c&&d.push(i(d)+"skewX("+c+r)}function u(l,c,d,f,h,p){if(l!==d||c!==f){var m=h.push(i(h)+"scale(",null,",",null,")");p.push({i:m-4,x:Vl(l,d)},{i:m-2,x:Vl(c,f)})}else(d!==1||f!==1)&&h.push(i(h)+"scale("+d+","+f+")")}return function(l,c){var d=[],f=[];return l=e(l),c=e(c),s(l.translateX,l.translateY,c.translateX,c.translateY,d,f),o(l.rotate,c.rotate,d,f),a(l.skewX,c.skewX,d,f),u(l.scaleX,l.scaleY,c.scaleX,c.scaleY,d,f),l=c=null,function(h){for(var p=-1,m=f.length,y;++p<m;)d[(y=f[p]).i]=y.x(h);return d.join("")}}}var lwe=uwe(Xut,"px, ","px)","deg)"),cwe=uwe(Qut,", ",")",")"),Jut=1e-12;function Ase(e){return((e=Math.exp(e))+1/e)/2}function Zut(e){return((e=Math.exp(e))-1/e)/2}function elt(e){return((e=Math.exp(2*e))-1)/(e+1)}const tlt=function e(t,n,r){function i(s,o){var a=s[0],u=s[1],l=s[2],c=o[0],d=o[1],f=o[2],h=c-a,p=d-u,m=h*h+p*p,y,v;if(m<Jut)v=Math.log(f/l)/t,y=function(S){return[a+S*h,u+S*p,l*Math.exp(t*S*v)]};else{var b=Math.sqrt(m),w=(f*f-l*l+r*m)/(2*l*n*b),E=(f*f-l*l-r*m)/(2*f*n*b),_=Math.log(Math.sqrt(w*w+1)-w),C=Math.log(Math.sqrt(E*E+1)-E);v=(C-_)/t,y=function(S){var k=S*v,R=Ase(_),N=l/(n*b)*(R*elt(t*k+_)-Zut(_));return[a+N*h,u+N*p,l*R/Ase(t*k+_)]}}return y.duration=v*1e3*t/Math.SQRT2,y}return i.rho=function(s){var o=Math.max(.001,+s),a=o*o,u=a*a;return e(o,a,u)},i}(Math.SQRT2,2,4);function dwe(e){return function(t,n){var r=e((t=x3(t)).h,(n=x3(n)).h),i=Xs(t.s,n.s),s=Xs(t.l,n.l),o=Xs(t.opacity,n.opacity);return function(a){return t.h=r(a),t.s=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const nlt=dwe(LO);var rlt=dwe(Xs);function ilt(e,t){var n=Xs((e=Bx(e)).l,(t=Bx(t)).l),r=Xs(e.a,t.a),i=Xs(e.b,t.b),s=Xs(e.opacity,t.opacity);return function(o){return e.l=n(o),e.a=r(o),e.b=i(o),e.opacity=s(o),e+""}}function fwe(e){return function(t,n){var r=e((t=E3(t)).h,(n=E3(n)).h),i=Xs(t.c,n.c),s=Xs(t.l,n.l),o=Xs(t.opacity,n.opacity);return function(a){return t.h=r(a),t.c=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const slt=fwe(LO);var olt=fwe(Xs);function hwe(e){return function t(n){n=+n;function r(i,s){var o=e((i=L0(i)).h,(s=L0(s)).h),a=Xs(i.s,s.s),u=Xs(i.l,s.l),l=Xs(i.opacity,s.opacity);return function(c){return i.h=o(c),i.s=a(c),i.l=u(Math.pow(c,n)),i.opacity=l(c),i+""}}return r.gamma=t,r}(1)}const alt=hwe(LO);var iW=hwe(Xs);function sW(e,t){t===void 0&&(t=e,e=ug);for(var n=0,r=t.length-1,i=t[0],s=new Array(r<0?0:r);n<r;)s[n]=e(i,i=t[++n]);return function(o){var a=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return s[a](o-a)}}function ult(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}const llt=Object.freeze(Object.defineProperty({__proto__:null,interpolate:ug,interpolateArray:qut,interpolateBasis:Jxe,interpolateBasisClosed:Zxe,interpolateCubehelix:alt,interpolateCubehelixLong:iW,interpolateDate:swe,interpolateDiscrete:Yut,interpolateHcl:slt,interpolateHclLong:olt,interpolateHsl:nlt,interpolateHslLong:rlt,interpolateHue:Kut,interpolateLab:ilt,interpolateNumber:Vl,interpolateNumberArray:nW,interpolateObject:owe,interpolateRgb:tC,interpolateRgbBasis:nwe,interpolateRgbBasisClosed:Hut,interpolateRound:kS,interpolateString:rW,interpolateTransformCss:lwe,interpolateTransformSvg:cwe,interpolateZoom:tlt,piecewise:sW,quantize:ult},Symbol.toStringTag,{value:"Module"}));var jx=0,dT=0,w_=0,pwe=1e3,_3,fT,T3=0,s1=0,FO=0,nC=typeof performance=="object"&&performance.now?performance:Date,mwe=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function BO(){return s1||(mwe(clt),s1=nC.now()+FO)}function clt(){s1=0}function rC(){this._call=this._time=this._next=null}rC.prototype=oW.prototype={constructor:rC,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?BO():+n)+(t==null?0:+t),!this._next&&fT!==this&&(fT?fT._next=this:_3=this,fT=this),this._call=e,this._time=n,dj()},stop:function(){this._call&&(this._call=null,this._time=1/0,dj())}};function oW(e,t,n){var r=new rC;return r.restart(e,t,n),r}function dlt(){BO(),++jx;for(var e=_3,t;e;)(t=s1-e._time)>=0&&e._call.call(void 0,t),e=e._next;--jx}function kse(){s1=(T3=nC.now())+FO,jx=dT=0;try{dlt()}finally{jx=0,hlt(),s1=0}}function flt(){var e=nC.now(),t=e-T3;t>pwe&&(FO-=t,T3=e)}function hlt(){for(var e,t=_3,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:_3=n);fT=e,dj(r)}function dj(e){if(!jx){dT&&(dT=clearTimeout(dT));var t=e-s1;t>24?(e<1/0&&(dT=setTimeout(kse,e-nC.now()-FO)),w_&&(w_=clearInterval(w_))):(w_||(T3=nC.now(),w_=setInterval(flt,pwe)),jx=1,mwe(kse))}}function Ise(e,t,n){var r=new rC;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}function plt(e,t,n){var r=new rC,i=t;return t==null?(r.restart(e,t,n),r):(r._restart=r.restart,r.restart=function(s,o,a){o=+o,a=a==null?BO():+a,r._restart(function u(l){l+=i,r._restart(u,i+=o,a),s(l)},o,a)},r.restart(e,t,n),r)}var mlt=Xq("start","end","cancel","interrupt"),glt=[],gwe=0,Rse=1,fj=2,lD=3,Dse=4,hj=5,cD=6;function jO(e,t,n,r,i,s){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;ylt(e,n,{name:t,index:r,group:i,on:mlt,tween:glt,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:gwe})}function aW(e,t){var n=Ed(e,t);if(n.state>gwe)throw new Error("too late; already scheduled");return n}function nh(e,t){var n=Ed(e,t);if(n.state>lD)throw new Error("too late; already running");return n}function Ed(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function ylt(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=oW(s,0,n.time);function s(l){n.state=Rse,n.timer.restart(o,n.delay,n.time),n.delay<=l&&o(l-n.delay)}function o(l){var c,d,f,h;if(n.state!==Rse)return u();for(c in r)if(h=r[c],h.name===n.name){if(h.state===lD)return Ise(o);h.state===Dse?(h.state=cD,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[c]):+c<t&&(h.state=cD,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[c])}if(Ise(function(){n.state===lD&&(n.state=Dse,n.timer.restart(a,n.delay,n.time),a(l))}),n.state=fj,n.on.call("start",e,e.__data__,n.index,n.group),n.state===fj){for(n.state=lD,i=new Array(f=n.tween.length),c=0,d=-1;c<f;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++d]=h);i.length=d+1}}function a(l){for(var c=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(u),n.state=hj,1),d=-1,f=i.length;++d<f;)i[d].call(e,c);n.state===hj&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=cD,n.timer.stop(),delete r[t];for(var l in r)return;delete e.__transition}}function blt(e,t){var n=e.__transition,r,i,s=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){s=!1;continue}i=r.state>fj&&r.state<hj,r.state=cD,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}s&&delete e.__transition}}function vlt(e){return this.each(function(){blt(this,e)})}function xlt(e,t){var n,r;return function(){var i=nh(this,e),s=i.tween;if(s!==n){r=n=s;for(var o=0,a=r.length;o<a;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function wlt(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=nh(this,e),o=s.tween;if(o!==r){i=(r=o).slice();for(var a={name:t,value:n},u=0,l=i.length;u<l;++u)if(i[u].name===t){i[u]=a;break}u===l&&i.push(a)}s.tween=i}}function Elt(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Ed(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?xlt:wlt)(n,e,t))}function uW(e,t,n){var r=e._id;return e.each(function(){var i=nh(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return Ed(i,r).value[t]}}function ywe(e,t){var n;return(typeof t=="number"?Vl:t instanceof i1?tC:(n=i1(t))?(t=n,tC):rW)(e,t)}function _lt(e){return function(){this.removeAttribute(e)}}function Tlt(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Clt(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttribute(e);return o===i?null:o===r?s:s=t(r=o,n)}}function Slt(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?s:s=t(r=o,n)}}function Alt(e,t,n){var r,i,s;return function(){var o,a=n(this),u;return a==null?void this.removeAttribute(e):(o=this.getAttribute(e),u=a+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a)))}}function klt(e,t,n){var r,i,s;return function(){var o,a=n(this),u;return a==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),u=a+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a)))}}function Ilt(e,t){var n=OO(e),r=n==="transform"?cwe:ywe;return this.attrTween(e,typeof t=="function"?(n.local?klt:Alt)(n,r,uW(this,"attr."+e,t)):t==null?(n.local?Tlt:_lt)(n):(n.local?Slt:Clt)(n,r,t))}function Rlt(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Dlt(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Plt(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&Dlt(e,s)),n}return i._value=t,i}function Nlt(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&Rlt(e,s)),n}return i._value=t,i}function Olt(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=OO(e);return this.tween(n,(r.local?Plt:Nlt)(r,t))}function $lt(e,t){return function(){aW(this,e).delay=+t.apply(this,arguments)}}function Mlt(e,t){return t=+t,function(){aW(this,e).delay=t}}function Llt(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?$lt:Mlt)(t,e)):Ed(this.node(),t).delay}function Flt(e,t){return function(){nh(this,e).duration=+t.apply(this,arguments)}}function Blt(e,t){return t=+t,function(){nh(this,e).duration=t}}function jlt(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Flt:Blt)(t,e)):Ed(this.node(),t).duration}function zlt(e,t){if(typeof t!="function")throw new Error;return function(){nh(this,e).ease=t}}function Ult(e){var t=this._id;return arguments.length?this.each(zlt(t,e)):Ed(this.node(),t).ease}function Vlt(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;nh(this,e).ease=n}}function Hlt(e){if(typeof e!="function")throw new Error;return this.each(Vlt(this._id,e))}function qlt(e){typeof e!="function"&&(e=Rxe(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],u,l=0;l<o;++l)(u=s[l])&&e.call(u,u.__data__,l,s)&&a.push(u);return new Rp(r,this._parents,this._name,this._id)}function Wlt(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var u=t[a],l=n[a],c=u.length,d=o[a]=new Array(c),f,h=0;h<c;++h)(f=u[h]||l[h])&&(d[h]=f);for(;a<r;++a)o[a]=t[a];return new Rp(o,this._parents,this._name,this._id)}function Glt(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Ylt(e,t,n){var r,i,s=Glt(t)?aW:nh;return function(){var o=s(this,e),a=o.on;a!==r&&(i=(r=a).copy()).on(t,n),o.on=i}}function Klt(e,t){var n=this._id;return arguments.length<2?Ed(this.node(),n).on.on(e):this.each(Ylt(n,e,t))}function Xlt(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Qlt(){return this.on("end.remove",Xlt(this._id))}function Jlt(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Qq(e));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a=r[o],u=a.length,l=s[o]=new Array(u),c,d,f=0;f<u;++f)(c=a[f])&&(d=e.call(c,c.__data__,f,a))&&("__data__"in c&&(d.__data__=c.__data__),l[f]=d,jO(l[f],t,n,f,l,Ed(c,n)));return new Rp(s,this._parents,t,n)}function Zlt(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Ixe(e));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var u=r[a],l=u.length,c,d=0;d<l;++d)if(c=u[d]){for(var f=e.call(c,c.__data__,d,u),h,p=Ed(c,n),m=0,y=f.length;m<y;++m)(h=f[m])&&jO(h,t,n,m,f,p);s.push(f),o.push(c)}return new Rp(s,o,t,n)}var ect=SS.prototype.constructor;function tct(){return new ect(this._groups,this._parents)}function nct(e,t){var n,r,i;return function(){var s=Lx(this,e),o=(this.style.removeProperty(e),Lx(this,e));return s===o?null:s===n&&o===r?i:i=t(n=s,r=o)}}function bwe(e){return function(){this.style.removeProperty(e)}}function rct(e,t,n){var r,i=n+"",s;return function(){var o=Lx(this,e);return o===i?null:o===r?s:s=t(r=o,n)}}function ict(e,t,n){var r,i,s;return function(){var o=Lx(this,e),a=n(this),u=a+"";return a==null&&(u=a=(this.style.removeProperty(e),Lx(this,e))),o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a))}}function sct(e,t){var n,r,i,s="style."+t,o="end."+s,a;return function(){var u=nh(this,e),l=u.on,c=u.value[s]==null?a||(a=bwe(t)):void 0;(l!==n||i!==c)&&(r=(n=l).copy()).on(o,i=c),u.on=r}}function oct(e,t,n){var r=(e+="")=="transform"?lwe:ywe;return t==null?this.styleTween(e,nct(e,r)).on("end.style."+e,bwe(e)):typeof t=="function"?this.styleTween(e,ict(e,r,uW(this,"style."+e,t))).each(sct(this._id,e)):this.styleTween(e,rct(e,r,t),n).on("end.style."+e,null)}function act(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function uct(e,t,n){var r,i;function s(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&act(e,o,n)),r}return s._value=t,s}function lct(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,uct(e,t,n??""))}function cct(e){return function(){this.textContent=e}}function dct(e){return function(){var t=e(this);this.textContent=t??""}}function fct(e){return this.tween("text",typeof e=="function"?dct(uW(this,"text",e)):cct(e==null?"":e+""))}function hct(e){return function(t){this.textContent=e.call(this,t)}}function pct(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&hct(i)),t}return r._value=e,r}function mct(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,pct(e))}function gct(){for(var e=this._name,t=this._id,n=vwe(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,u,l=0;l<a;++l)if(u=o[l]){var c=Ed(u,t);jO(u,e,n,l,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Rp(r,this._parents,e,n)}function yct(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var a={value:o},u={value:function(){--i===0&&s()}};n.each(function(){var l=nh(this,r),c=l.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(u)),l.on=t}),i===0&&s()})}var bct=0;function Rp(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function vwe(){return++bct}var Rh=SS.prototype;Rp.prototype={constructor:Rp,select:Jlt,selectAll:Zlt,selectChild:Rh.selectChild,selectChildren:Rh.selectChildren,filter:qlt,merge:Wlt,selection:tct,transition:gct,call:Rh.call,nodes:Rh.nodes,node:Rh.node,size:Rh.size,empty:Rh.empty,each:Rh.each,on:Klt,attr:Ilt,attrTween:Olt,style:oct,styleTween:lct,text:fct,textTween:mct,remove:Qlt,tween:Elt,delay:Llt,duration:jlt,ease:Ult,easeVarying:Hlt,end:yct,[Symbol.iterator]:Rh[Symbol.iterator]};function vct(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var xct={time:null,delay:0,duration:250,ease:vct};function wct(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Ect(e){var t,n;e instanceof Rp?(t=e._id,e=e._name):(t=vwe(),(n=xct).time=BO(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,u,l=0;l<a;++l)(u=o[l])&&jO(u,e,t,l,o,n||wct(u,t));return new Rp(r,this._parents,e,t)}SS.prototype.interrupt=vlt;SS.prototype.transition=Ect;const pj=Math.PI,mj=2*pj,dy=1e-6,_ct=mj-dy;function xwe(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function Tct(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return xwe;const n=10**t;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let lW=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?xwe:Tct(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,s,o){this._append`C${+t},${+n},${+r},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(t,n,r,i,s){if(t=+t,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,u=r-t,l=i-n,c=o-t,d=a-n,f=c*c+d*d;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(f>dy)if(!(Math.abs(d*u-l*c)>dy)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let h=r-o,p=i-a,m=u*u+l*l,y=h*h+p*p,v=Math.sqrt(m),b=Math.sqrt(f),w=s*Math.tan((pj-Math.acos((m+f-y)/(2*v*b)))/2),E=w/b,_=w/v;Math.abs(E-1)>dy&&this._append`L${t+E*c},${n+E*d}`,this._append`A${s},${s},0,0,${+(d*h>c*p)},${this._x1=t+_*u},${this._y1=n+_*l}`}}arc(t,n,r,i,s,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),u=r*Math.sin(i),l=t+a,c=n+u,d=1^o,f=o?i-s:s-i;this._x1===null?this._append`M${l},${c}`:(Math.abs(this._x1-l)>dy||Math.abs(this._y1-c)>dy)&&this._append`L${l},${c}`,r&&(f<0&&(f=f%mj+mj),f>_ct?this._append`A${r},${r},0,1,${d},${t-a},${n-u}A${r},${r},0,1,${d},${this._x1=l},${this._y1=c}`:f>dy&&this._append`A${r},${r},0,${+(f>=pj)},${d},${this._x1=t+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function zO(){return new lW}zO.prototype=lW.prototype;const fp=11102230246251565e-32,Ko=134217729,Cct=(3+8*fp)*fp;function TL(e,t,n,r,i){let s,o,a,u,l=t[0],c=r[0],d=0,f=0;c>l==c>-l?(s=l,l=t[++d]):(s=c,c=r[++f]);let h=0;if(d<e&&f<n)for(c>l==c>-l?(o=l+s,a=s-(o-l),l=t[++d]):(o=c+s,a=s-(o-c),c=r[++f]),s=o,a!==0&&(i[h++]=a);d<e&&f<n;)c>l==c>-l?(o=s+l,u=o-s,a=s-(o-u)+(l-u),l=t[++d]):(o=s+c,u=o-s,a=s-(o-u)+(c-u),c=r[++f]),s=o,a!==0&&(i[h++]=a);for(;d<e;)o=s+l,u=o-s,a=s-(o-u)+(l-u),l=t[++d],s=o,a!==0&&(i[h++]=a);for(;f<n;)o=s+c,u=o-s,a=s-(o-u)+(c-u),c=r[++f],s=o,a!==0&&(i[h++]=a);return(s!==0||h===0)&&(i[h++]=s),h}function Sct(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}function IS(e){return new Float64Array(e)}const Act=(3+16*fp)*fp,kct=(2+12*fp)*fp,Ict=(9+64*fp)*fp*fp,av=IS(4),Pse=IS(8),Nse=IS(12),Ose=IS(16),Aa=IS(4);function Rct(e,t,n,r,i,s,o){let a,u,l,c,d,f,h,p,m,y,v,b,w,E,_,C,S,k;const R=e-i,N=n-i,O=t-s,F=r-s;E=R*F,f=Ko*R,h=f-(f-R),p=R-h,f=Ko*F,m=f-(f-F),y=F-m,_=p*y-(E-h*m-p*m-h*y),C=O*N,f=Ko*O,h=f-(f-O),p=O-h,f=Ko*N,m=f-(f-N),y=N-m,S=p*y-(C-h*m-p*m-h*y),v=_-S,d=_-v,av[0]=_-(v+d)+(d-S),b=E+v,d=b-E,w=E-(b-d)+(v-d),v=w-C,d=w-v,av[1]=w-(v+d)+(d-C),k=b+v,d=k-b,av[2]=b-(k-d)+(v-d),av[3]=k;let $=Sct(4,av),z=kct*o;if($>=z||-$>=z||(d=e-R,a=e-(R+d)+(d-i),d=n-N,l=n-(N+d)+(d-i),d=t-O,u=t-(O+d)+(d-s),d=r-F,c=r-(F+d)+(d-s),a===0&&u===0&&l===0&&c===0)||(z=Ict*o+Cct*Math.abs($),$+=R*c+F*a-(O*l+N*u),$>=z||-$>=z))return $;E=a*F,f=Ko*a,h=f-(f-a),p=a-h,f=Ko*F,m=f-(f-F),y=F-m,_=p*y-(E-h*m-p*m-h*y),C=u*N,f=Ko*u,h=f-(f-u),p=u-h,f=Ko*N,m=f-(f-N),y=N-m,S=p*y-(C-h*m-p*m-h*y),v=_-S,d=_-v,Aa[0]=_-(v+d)+(d-S),b=E+v,d=b-E,w=E-(b-d)+(v-d),v=w-C,d=w-v,Aa[1]=w-(v+d)+(d-C),k=b+v,d=k-b,Aa[2]=b-(k-d)+(v-d),Aa[3]=k;const q=TL(4,av,4,Aa,Pse);E=R*c,f=Ko*R,h=f-(f-R),p=R-h,f=Ko*c,m=f-(f-c),y=c-m,_=p*y-(E-h*m-p*m-h*y),C=O*l,f=Ko*O,h=f-(f-O),p=O-h,f=Ko*l,m=f-(f-l),y=l-m,S=p*y-(C-h*m-p*m-h*y),v=_-S,d=_-v,Aa[0]=_-(v+d)+(d-S),b=E+v,d=b-E,w=E-(b-d)+(v-d),v=w-C,d=w-v,Aa[1]=w-(v+d)+(d-C),k=b+v,d=k-b,Aa[2]=b-(k-d)+(v-d),Aa[3]=k;const W=TL(q,Pse,4,Aa,Nse);E=a*c,f=Ko*a,h=f-(f-a),p=a-h,f=Ko*c,m=f-(f-c),y=c-m,_=p*y-(E-h*m-p*m-h*y),C=u*l,f=Ko*u,h=f-(f-u),p=u-h,f=Ko*l,m=f-(f-l),y=l-m,S=p*y-(C-h*m-p*m-h*y),v=_-S,d=_-v,Aa[0]=_-(v+d)+(d-S),b=E+v,d=b-E,w=E-(b-d)+(v-d),v=w-C,d=w-v,Aa[1]=w-(v+d)+(d-C),k=b+v,d=k-b,Aa[2]=b-(k-d)+(v-d),Aa[3]=k;const J=TL(W,Nse,4,Aa,Ose);return Ose[J-1]}function sI(e,t,n,r,i,s){const o=(t-s)*(n-i),a=(e-i)*(r-s),u=o-a,l=Math.abs(o+a);return Math.abs(u)>=Act*l?u:-Rct(e,t,n,r,i,s,l)}const $se=Math.pow(2,-52),oI=new Uint32Array(512);class C3{static from(t,n=$ct,r=Mct){const i=t.length,s=new Float64Array(i*2);for(let o=0;o<i;o++){const a=t[o];s[2*o]=n(a),s[2*o+1]=r(a)}return new C3(s)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:s}=this,o=t.length>>1;let a=1/0,u=1/0,l=-1/0,c=-1/0;for(let R=0;R<o;R++){const N=t[2*R],O=t[2*R+1];N<a&&(a=N),O<u&&(u=O),N>l&&(l=N),O>c&&(c=O),this._ids[R]=R}const d=(a+l)/2,f=(u+c)/2;let h,p,m;for(let R=0,N=1/0;R<o;R++){const O=CL(d,f,t[2*R],t[2*R+1]);O<N&&(h=R,N=O)}const y=t[2*h],v=t[2*h+1];for(let R=0,N=1/0;R<o;R++){if(R===h)continue;const O=CL(y,v,t[2*R],t[2*R+1]);O<N&&O>0&&(p=R,N=O)}let b=t[2*p],w=t[2*p+1],E=1/0;for(let R=0;R<o;R++){if(R===h||R===p)continue;const N=Nct(y,v,b,w,t[2*R],t[2*R+1]);N<E&&(m=R,E=N)}let _=t[2*m],C=t[2*m+1];if(E===1/0){for(let O=0;O<o;O++)this._dists[O]=t[2*O]-t[0]||t[2*O+1]-t[1];Fv(this._ids,this._dists,0,o-1);const R=new Uint32Array(o);let N=0;for(let O=0,F=-1/0;O<o;O++){const $=this._ids[O],z=this._dists[$];z>F&&(R[N++]=$,F=z)}this.hull=R.subarray(0,N),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(sI(y,v,b,w,_,C)<0){const R=p,N=b,O=w;p=m,b=_,w=C,m=R,_=N,C=O}const S=Oct(y,v,b,w,_,C);this._cx=S.x,this._cy=S.y;for(let R=0;R<o;R++)this._dists[R]=CL(t[2*R],t[2*R+1],S.x,S.y);Fv(this._ids,this._dists,0,o-1),this._hullStart=h;let k=3;r[h]=n[m]=p,r[p]=n[h]=m,r[m]=n[p]=h,i[h]=0,i[p]=1,i[m]=2,s.fill(-1),s[this._hashKey(y,v)]=h,s[this._hashKey(b,w)]=p,s[this._hashKey(_,C)]=m,this.trianglesLen=0,this._addTriangle(h,p,m,-1,-1,-1);for(let R=0,N,O;R<this._ids.length;R++){const F=this._ids[R],$=t[2*F],z=t[2*F+1];if(R>0&&Math.abs($-N)<=$se&&Math.abs(z-O)<=$se||(N=$,O=z,F===h||F===p||F===m))continue;let q=0;for(let U=0,L=this._hashKey($,z);U<this._hashSize&&(q=s[(L+U)%this._hashSize],!(q!==-1&&q!==r[q]));U++);q=n[q];let W=q,J;for(;J=r[W],sI($,z,t[2*W],t[2*W+1],t[2*J],t[2*J+1])>=0;)if(W=J,W===q){W=-1;break}if(W===-1)continue;let K=this._addTriangle(W,F,r[W],-1,-1,i[W]);i[F]=this._legalize(K+2),i[W]=K,k++;let Z=r[W];for(;J=r[Z],sI($,z,t[2*Z],t[2*Z+1],t[2*J],t[2*J+1])<0;)K=this._addTriangle(Z,F,J,i[F],-1,i[Z]),i[F]=this._legalize(K+2),r[Z]=Z,k--,Z=J;if(W===q)for(;J=n[W],sI($,z,t[2*J],t[2*J+1],t[2*W],t[2*W+1])<0;)K=this._addTriangle(J,F,W,-1,i[W],i[J]),this._legalize(K+2),i[J]=K,r[W]=W,k--,W=J;this._hullStart=n[F]=W,r[W]=n[Z]=F,r[F]=Z,s[this._hashKey($,z)]=F,s[this._hashKey(t[2*W],t[2*W+1])]=W}this.hull=new Uint32Array(k);for(let R=0,N=this._hullStart;R<k;R++)this.hull[R]=N,N=r[N];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(Dct(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:r,coords:i}=this;let s=0,o=0;for(;;){const a=r[t],u=t-t%3;if(o=u+(t+2)%3,a===-1){if(s===0)break;t=oI[--s];continue}const l=a-a%3,c=u+(t+1)%3,d=l+(a+2)%3,f=n[o],h=n[t],p=n[c],m=n[d];if(Pct(i[2*f],i[2*f+1],i[2*h],i[2*h+1],i[2*p],i[2*p+1],i[2*m],i[2*m+1])){n[t]=m,n[a]=f;const v=r[d];if(v===-1){let w=this._hullStart;do{if(this._hullTri[w]===d){this._hullTri[w]=t;break}w=this._hullPrev[w]}while(w!==this._hullStart)}this._link(t,v),this._link(a,r[o]),this._link(o,d);const b=l+(a+1)%3;s<oI.length&&(oI[s++]=b)}else{if(s===0)break;t=oI[--s]}}return o}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,r,i,s,o){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=n,this._triangles[a+2]=r,this._link(a,i),this._link(a+1,s),this._link(a+2,o),this.trianglesLen+=3,a}}function Dct(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function CL(e,t,n,r){const i=e-n,s=t-r;return i*i+s*s}function Pct(e,t,n,r,i,s,o,a){const u=e-o,l=t-a,c=n-o,d=r-a,f=i-o,h=s-a,p=u*u+l*l,m=c*c+d*d,y=f*f+h*h;return u*(d*y-m*h)-l*(c*y-m*f)+p*(c*h-d*f)<0}function Nct(e,t,n,r,i,s){const o=n-e,a=r-t,u=i-e,l=s-t,c=o*o+a*a,d=u*u+l*l,f=.5/(o*l-a*u),h=(l*c-a*d)*f,p=(o*d-u*c)*f;return h*h+p*p}function Oct(e,t,n,r,i,s){const o=n-e,a=r-t,u=i-e,l=s-t,c=o*o+a*a,d=u*u+l*l,f=.5/(o*l-a*u),h=e+(l*c-a*d)*f,p=t+(o*d-u*c)*f;return{x:h,y:p}}function Fv(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const s=e[i],o=t[s];let a=i-1;for(;a>=n&&t[e[a]]>o;)e[a+1]=e[a--];e[a+1]=s}else{const i=n+r>>1;let s=n+1,o=r;E_(e,i,s),t[e[n]]>t[e[r]]&&E_(e,n,r),t[e[s]]>t[e[r]]&&E_(e,s,r),t[e[n]]>t[e[s]]&&E_(e,n,s);const a=e[s],u=t[a];for(;;){do s++;while(t[e[s]]<u);do o--;while(t[e[o]]>u);if(o<s)break;E_(e,s,o)}e[n+1]=e[o],e[o]=a,r-s+1>=o-n?(Fv(e,t,s,r),Fv(e,t,n,o-1)):(Fv(e,t,n,o-1),Fv(e,t,s,r))}}function E_(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function $ct(e){return e[0]}function Mct(e){return e[1]}const Mse=1e-6;class Ry{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,r){t=+t,n=+n,r=+r;const i=t+r,s=n;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${s}`:(Math.abs(this._x1-i)>Mse||Math.abs(this._y1-s)>Mse)&&(this._+="L"+i+","+s),r&&(this._+=`A${r},${r},0,1,1,${t-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=s}`)}rect(t,n,r,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class gj{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let Lct=class{constructor(t,[n,r,i,s]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((s=+s)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=i,this.xmin=n,this.ymax=s,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:r},vectors:i}=this;let s,o;const a=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let m=0,y=0,v=r.length,b,w;m<v;m+=3,y+=2){const E=r[m]*2,_=r[m+1]*2,C=r[m+2]*2,S=t[E],k=t[E+1],R=t[_],N=t[_+1],O=t[C],F=t[C+1],$=R-S,z=N-k,q=O-S,W=F-k,J=($*W-z*q)*2;if(Math.abs(J)<1e-9){if(s===void 0){s=o=0;for(const Z of n)s+=t[Z*2],o+=t[Z*2+1];s/=n.length,o/=n.length}const K=1e9*Math.sign((s-S)*W-(o-k)*q);b=(S+O)/2-K*W,w=(k+F)/2+K*q}else{const K=1/J,Z=$*$+z*z,U=q*q+W*W;b=S+(W*Z-z*U)*K,w=k+($*U-q*Z)*K}a[y]=b,a[y+1]=w}let u=n[n.length-1],l,c=u*4,d,f=t[2*u],h,p=t[2*u+1];i.fill(0);for(let m=0;m<n.length;++m)u=n[m],l=c,d=f,h=p,c=u*4,f=t[2*u],p=t[2*u+1],i[l+2]=i[c]=h-p,i[l+3]=i[c+1]=f-d}render(t){const n=t==null?t=new Ry:void 0,{delaunay:{halfedges:r,inedges:i,hull:s},circumcenters:o,vectors:a}=this;if(s.length<=1)return null;for(let c=0,d=r.length;c<d;++c){const f=r[c];if(f<c)continue;const h=Math.floor(c/3)*2,p=Math.floor(f/3)*2,m=o[h],y=o[h+1],v=o[p],b=o[p+1];this._renderSegment(m,y,v,b,t)}let u,l=s[s.length-1];for(let c=0;c<s.length;++c){u=l,l=s[c];const d=Math.floor(i[l]/3)*2,f=o[d],h=o[d+1],p=u*4,m=this._project(f,h,a[p+2],a[p+3]);m&&this._renderSegment(f,h,m[0],m[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new Ry:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const r=n==null?n=new Ry:void 0,i=this._clip(t);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let s=i.length;for(;i[0]===i[s-2]&&i[1]===i[s-1]&&s>1;)s-=2;for(let o=2;o<s;o+=2)(i[o]!==i[o-2]||i[o+1]!==i[o-1])&&n.lineTo(i[o],i[o+1]);return n.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,r=t.length/2;n<r;++n){const i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(t){const n=new gj;return this.renderCell(t,n),n.value()}_renderSegment(t,n,r,i,s){let o;const a=this._regioncode(t,n),u=this._regioncode(r,i);a===0&&u===0?(s.moveTo(t,n),s.lineTo(r,i)):(o=this._clipSegment(t,n,r,i,a,u))&&(s.moveTo(o[0],o[1]),s.lineTo(o[2],o[3]))}contains(t,n,r){return n=+n,n!==n||(r=+r,r!==r)?!1:this.delaunay._step(t,n,r)===t}*neighbors(t){const n=this._clip(t);if(n)for(const r of this.delaunay.neighbors(t)){const i=this._clip(r);if(i){e:for(let s=0,o=n.length;s<o;s+=2)for(let a=0,u=i.length;a<u;a+=2)if(n[s]===i[a]&&n[s+1]===i[a+1]&&n[(s+2)%o]===i[(a+u-2)%u]&&n[(s+3)%o]===i[(a+u-1)%u]){yield r;break e}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:s}}=this,o=r[t];if(o===-1)return null;const a=[];let u=o;do{const l=Math.floor(u/3);if(a.push(n[l*2],n[l*2+1]),u=u%3===2?u-2:u+1,s[u]!==t)break;u=i[u]}while(u!==o&&u!==-1);return a}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:r}=this,i=t*4;return this._simplify(r[i]||r[i+1]?this._clipInfinite(t,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(t,n))}_clipFinite(t,n){const r=n.length;let i=null,s,o,a=n[r-2],u=n[r-1],l,c=this._regioncode(a,u),d,f=0;for(let h=0;h<r;h+=2)if(s=a,o=u,a=n[h],u=n[h+1],l=c,c=this._regioncode(a,u),l===0&&c===0)d=f,f=0,i?i.push(a,u):i=[a,u];else{let p,m,y,v,b;if(l===0){if((p=this._clipSegment(s,o,a,u,l,c))===null)continue;[m,y,v,b]=p}else{if((p=this._clipSegment(a,u,s,o,c,l))===null)continue;[v,b,m,y]=p,d=f,f=this._edgecode(m,y),d&&f&&this._edge(t,d,f,i,i.length),i?i.push(m,y):i=[m,y]}d=f,f=this._edgecode(v,b),d&&f&&this._edge(t,d,f,i,i.length),i?i.push(v,b):i=[v,b]}if(i)d=f,f=this._edgecode(i[0],i[1]),d&&f&&this._edge(t,d,f,i,i.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(t,n,r,i,s,o){const a=s<o;for(a&&([t,n,r,i,s,o]=[r,i,t,n,o,s]);;){if(s===0&&o===0)return a?[r,i,t,n]:[t,n,r,i];if(s&o)return null;let u,l,c=s||o;c&8?(u=t+(r-t)*(this.ymax-n)/(i-n),l=this.ymax):c&4?(u=t+(r-t)*(this.ymin-n)/(i-n),l=this.ymin):c&2?(l=n+(i-n)*(this.xmax-t)/(r-t),u=this.xmax):(l=n+(i-n)*(this.xmin-t)/(r-t),u=this.xmin),s?(t=u,n=l,s=this._regioncode(t,n)):(r=u,i=l,o=this._regioncode(r,i))}}_clipInfinite(t,n,r,i,s,o){let a=Array.from(n),u;if((u=this._project(a[0],a[1],r,i))&&a.unshift(u[0],u[1]),(u=this._project(a[a.length-2],a[a.length-1],s,o))&&a.push(u[0],u[1]),a=this._clipFinite(t,a))for(let l=0,c=a.length,d,f=this._edgecode(a[c-2],a[c-1]);l<c;l+=2)d=f,f=this._edgecode(a[l],a[l+1]),d&&f&&(l=this._edge(t,d,f,a,l),c=a.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(t,n,r,i,s){for(;n!==r;){let o,a;switch(n){case 5:n=4;continue;case 4:n=6,o=this.xmax,a=this.ymin;break;case 6:n=2;continue;case 2:n=10,o=this.xmax,a=this.ymax;break;case 10:n=8;continue;case 8:n=9,o=this.xmin,a=this.ymax;break;case 9:n=1;continue;case 1:n=5,o=this.xmin,a=this.ymin;break}(i[s]!==o||i[s+1]!==a)&&this.contains(t,o,a)&&(i.splice(s,0,o,a),s+=2)}return s}_project(t,n,r,i){let s=1/0,o,a,u;if(i<0){if(n<=this.ymin)return null;(o=(this.ymin-n)/i)<s&&(u=this.ymin,a=t+(s=o)*r)}else if(i>0){if(n>=this.ymax)return null;(o=(this.ymax-n)/i)<s&&(u=this.ymax,a=t+(s=o)*r)}if(r>0){if(t>=this.xmax)return null;(o=(this.xmax-t)/r)<s&&(a=this.xmax,u=n+(s=o)*i)}else if(r<0){if(t<=this.xmin)return null;(o=(this.xmin-t)/r)<s&&(a=this.xmin,u=n+(s=o)*i)}return[a,u]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const r=(n+2)%t.length,i=(n+4)%t.length;(t[n]===t[r]&&t[r]===t[i]||t[n+1]===t[r+1]&&t[r+1]===t[i+1])&&(t.splice(r,2),n-=2)}t.length||(t=null)}return t}};const Fct=2*Math.PI,uv=Math.pow;function Bct(e){return e[0]}function jct(e){return e[1]}function zct(e){const{triangles:t,coords:n}=e;for(let r=0;r<t.length;r+=3){const i=2*t[r],s=2*t[r+1],o=2*t[r+2];if((n[o]-n[i])*(n[s+1]-n[i+1])-(n[s]-n[i])*(n[o+1]-n[i+1])>1e-10)return!1}return!0}function Uct(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class cW{static from(t,n=Bct,r=jct,i){return new cW("length"in t?Vct(t,n,r,i):Float64Array.from(Hct(t,n,r,i)))}constructor(t){this._delaunator=new C3(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&zct(t)){this.collinear=Int32Array.from({length:n.length/2},(f,h)=>h).sort((f,h)=>n[2*f]-n[2*h]||n[2*f+1]-n[2*h+1]);const u=this.collinear[0],l=this.collinear[this.collinear.length-1],c=[n[2*u],n[2*u+1],n[2*l],n[2*l+1]],d=1e-8*Math.hypot(c[3]-c[1],c[2]-c[0]);for(let f=0,h=n.length/2;f<h;++f){const p=Uct(n[2*f],n[2*f+1],d);n[2*f]=p[0],n[2*f+1]=p[1]}this._delaunator=new C3(n)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,s=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let u=0,l=r.length;u<l;++u){const c=s[u%3===2?u-2:u+1];(r[u]===-1||o[c]===-1)&&(o[c]=u)}for(let u=0,l=i.length;u<l;++u)a[i[u]]=u;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],o[i[0]]=1,i.length===2&&(o[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(t){return new Lct(this,t)}*neighbors(t){const{inedges:n,hull:r,_hullIndex:i,halfedges:s,triangles:o,collinear:a}=this;if(a){const d=a.indexOf(t);d>0&&(yield a[d-1]),d<a.length-1&&(yield a[d+1]);return}const u=n[t];if(u===-1)return;let l=u,c=-1;do{if(yield c=o[l],l=l%3===2?l-2:l+1,o[l]!==t)return;if(l=s[l],l===-1){const d=r[(i[t]+1)%r.length];d!==c&&(yield d);return}}while(l!==u)}find(t,n,r=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const i=r;let s;for(;(s=this._step(r,t,n))>=0&&s!==r&&s!==i;)r=s;return s}_step(t,n,r){const{inedges:i,hull:s,_hullIndex:o,halfedges:a,triangles:u,points:l}=this;if(i[t]===-1||!l.length)return(t+1)%(l.length>>1);let c=t,d=uv(n-l[t*2],2)+uv(r-l[t*2+1],2);const f=i[t];let h=f;do{let p=u[h];const m=uv(n-l[p*2],2)+uv(r-l[p*2+1],2);if(m<d&&(d=m,c=p),h=h%3===2?h-2:h+1,u[h]!==t)break;if(h=a[h],h===-1){if(h=s[(o[t]+1)%s.length],h!==p&&uv(n-l[h*2],2)+uv(r-l[h*2+1],2)<d)return h;break}}while(h!==f);return c}render(t){const n=t==null?t=new Ry:void 0,{points:r,halfedges:i,triangles:s}=this;for(let o=0,a=i.length;o<a;++o){const u=i[o];if(u<o)continue;const l=s[o]*2,c=s[u]*2;t.moveTo(r[l],r[l+1]),t.lineTo(r[c],r[c+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const r=t==null?t=new Ry:void 0,{points:i}=this;for(let s=0,o=i.length;s<o;s+=2){const a=i[s],u=i[s+1];t.moveTo(a+n,u),t.arc(a,u,n,0,Fct)}return r&&r.value()}renderHull(t){const n=t==null?t=new Ry:void 0,{hull:r,points:i}=this,s=r[0]*2,o=r.length;t.moveTo(i[s],i[s+1]);for(let a=1;a<o;++a){const u=2*r[a];t.lineTo(i[u],i[u+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new gj;return this.renderHull(t),t.value()}renderTriangle(t,n){const r=n==null?n=new Ry:void 0,{points:i,triangles:s}=this,o=s[t*=3]*2,a=s[t+1]*2,u=s[t+2]*2;return n.moveTo(i[o],i[o+1]),n.lineTo(i[a],i[a+1]),n.lineTo(i[u],i[u+1]),n.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,r=t.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new gj;return this.renderTriangle(t,n),n.value()}}function Vct(e,t,n,r){const i=e.length,s=new Float64Array(i*2);for(let o=0;o<i;++o){const a=e[o];s[o*2]=t.call(r,a,o,e),s[o*2+1]=n.call(r,a,o,e)}return s}function*Hct(e,t,n,r){let i=0;for(const s of e)yield t.call(r,s,i,e),yield n.call(r,s,i,e),++i}var Lse={},SL={},AL=34,__=10,kL=13;function wwe(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function qct(e,t){var n=wwe(e);return function(r,i){return t(n(r),i,e)}}function Fse(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function du(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function Wct(e){return e<0?"-"+du(-e,6):e>9999?"+"+du(e,6):du(e,4)}function Gct(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":Wct(e.getUTCFullYear())+"-"+du(e.getUTCMonth()+1,2)+"-"+du(e.getUTCDate(),2)+(i?"T"+du(t,2)+":"+du(n,2)+":"+du(r,2)+"."+du(i,3)+"Z":r?"T"+du(t,2)+":"+du(n,2)+":"+du(r,2)+"Z":n||t?"T"+du(t,2)+":"+du(n,2)+"Z":"")}function Yct(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(d,f){var h,p,m=i(d,function(y,v){if(h)return h(y,v-1);p=y,h=f?qct(y,f):wwe(y)});return m.columns=p||[],m}function i(d,f){var h=[],p=d.length,m=0,y=0,v,b=p<=0,w=!1;d.charCodeAt(p-1)===__&&--p,d.charCodeAt(p-1)===kL&&--p;function E(){if(b)return SL;if(w)return w=!1,Lse;var C,S=m,k;if(d.charCodeAt(S)===AL){for(;m++<p&&d.charCodeAt(m)!==AL||d.charCodeAt(++m)===AL;);return(C=m)>=p?b=!0:(k=d.charCodeAt(m++))===__?w=!0:k===kL&&(w=!0,d.charCodeAt(m)===__&&++m),d.slice(S+1,C-1).replace(/""/g,'"')}for(;m<p;){if((k=d.charCodeAt(C=m++))===__)w=!0;else if(k===kL)w=!0,d.charCodeAt(m)===__&&++m;else if(k!==n)continue;return d.slice(S,C)}return b=!0,d.slice(S,p)}for(;(v=E())!==SL;){for(var _=[];v!==Lse&&v!==SL;)_.push(v),v=E();f&&(_=f(_,y++))==null||h.push(_)}return h}function s(d,f){return d.map(function(h){return f.map(function(p){return c(h[p])}).join(e)})}function o(d,f){return f==null&&(f=Fse(d)),[f.map(c).join(e)].concat(s(d,f)).join(`
`)}function a(d,f){return f==null&&(f=Fse(d)),s(d,f).join(`
`)}function u(d){return d.map(l).join(`
`)}function l(d){return d.map(c).join(e)}function c(d){return d==null?"":d instanceof Date?Gct(d):t.test(d+="")?'"'+d.replace(/"/g,'""')+'"':d}return{parse:r,parseRows:i,format:o,formatBody:a,formatRows:u,formatRow:l,formatValue:c}}function Kct(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function i(){var s,o=n.length,a,u=0,l=0;for(s=0;s<o;++s)a=n[s],u+=a.x,l+=a.y;for(u=(u/o-e)*r,l=(l/o-t)*r,s=0;s<o;++s)a=n[s],a.x-=u,a.y-=l}return i.initialize=function(s){n=s},i.x=function(s){return arguments.length?(e=+s,i):e},i.y=function(s){return arguments.length?(t=+s,i):t},i.strength=function(s){return arguments.length?(r=+s,i):r},i}function Xct(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return Ewe(this.cover(t,n),t,n,e)}function Ewe(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,s=e._root,o={data:r},a=e._x0,u=e._y0,l=e._x1,c=e._y1,d,f,h,p,m,y,v,b;if(!s)return e._root=o,e;for(;s.length;)if((m=t>=(d=(a+l)/2))?a=d:l=d,(y=n>=(f=(u+c)/2))?u=f:c=f,i=s,!(s=s[v=y<<1|m]))return i[v]=o,e;if(h=+e._x.call(null,s.data),p=+e._y.call(null,s.data),t===h&&n===p)return o.next=s,i?i[v]=o:e._root=o,e;do i=i?i[v]=new Array(4):e._root=new Array(4),(m=t>=(d=(a+l)/2))?a=d:l=d,(y=n>=(f=(u+c)/2))?u=f:c=f;while((v=y<<1|m)===(b=(p>=f)<<1|h>=d));return i[b]=s,i[v]=o,e}function Qct(e){var t,n,r=e.length,i,s,o=new Array(r),a=new Array(r),u=1/0,l=1/0,c=-1/0,d=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(s=+this._y.call(null,t))||(o[n]=i,a[n]=s,i<u&&(u=i),i>c&&(c=i),s<l&&(l=s),s>d&&(d=s));if(u>c||l>d)return this;for(this.cover(u,l).cover(c,d),n=0;n<r;++n)Ewe(this,o[n],a[n],e[n]);return this}function Jct(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,s=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,s=(r=Math.floor(t))+1;else{for(var o=i-n||1,a=this._root,u,l;n>e||e>=i||r>t||t>=s;)switch(l=(t<r)<<1|e<n,u=new Array(4),u[l]=a,a=u,o*=2,l){case 0:i=n+o,s=r+o;break;case 1:n=i-o,s=r+o;break;case 2:i=n+o,r=s-o;break;case 3:n=i-o,r=s-o;break}this._root&&this._root.length&&(this._root=a)}return this._x0=n,this._y0=r,this._x1=i,this._y1=s,this}function Zct(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function edt(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Ma(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function tdt(e,t,n){var r,i=this._x0,s=this._y0,o,a,u,l,c=this._x1,d=this._y1,f=[],h=this._root,p,m;for(h&&f.push(new Ma(h,i,s,c,d)),n==null?n=1/0:(i=e-n,s=t-n,c=e+n,d=t+n,n*=n);p=f.pop();)if(!(!(h=p.node)||(o=p.x0)>c||(a=p.y0)>d||(u=p.x1)<i||(l=p.y1)<s))if(h.length){var y=(o+u)/2,v=(a+l)/2;f.push(new Ma(h[3],y,v,u,l),new Ma(h[2],o,v,y,l),new Ma(h[1],y,a,u,v),new Ma(h[0],o,a,y,v)),(m=(t>=v)<<1|e>=y)&&(p=f[f.length-1],f[f.length-1]=f[f.length-1-m],f[f.length-1-m]=p)}else{var b=e-+this._x.call(null,h.data),w=t-+this._y.call(null,h.data),E=b*b+w*w;if(E<n){var _=Math.sqrt(n=E);i=e-_,s=t-_,c=e+_,d=t+_,r=h.data}}return r}function ndt(e){if(isNaN(c=+this._x.call(null,e))||isNaN(d=+this._y.call(null,e)))return this;var t,n=this._root,r,i,s,o=this._x0,a=this._y0,u=this._x1,l=this._y1,c,d,f,h,p,m,y,v;if(!n)return this;if(n.length)for(;;){if((p=c>=(f=(o+u)/2))?o=f:u=f,(m=d>=(h=(a+l)/2))?a=h:l=h,t=n,!(n=n[y=m<<1|p]))return this;if(!n.length)break;(t[y+1&3]||t[y+2&3]||t[y+3&3])&&(r=t,v=y)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(s=n.next)&&delete n.next,i?(s?i.next=s:delete i.next,this):t?(s?t[y]=s:delete t[y],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[v]=n:this._root=n),this):(this._root=s,this)}function rdt(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function idt(){return this._root}function sdt(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function odt(e){var t=[],n,r=this._root,i,s,o,a,u;for(r&&t.push(new Ma(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,s=n.x0,o=n.y0,a=n.x1,u=n.y1)&&r.length){var l=(s+a)/2,c=(o+u)/2;(i=r[3])&&t.push(new Ma(i,l,c,a,u)),(i=r[2])&&t.push(new Ma(i,s,c,l,u)),(i=r[1])&&t.push(new Ma(i,l,o,a,c)),(i=r[0])&&t.push(new Ma(i,s,o,l,c))}return this}function adt(e){var t=[],n=[],r;for(this._root&&t.push(new Ma(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var s,o=r.x0,a=r.y0,u=r.x1,l=r.y1,c=(o+u)/2,d=(a+l)/2;(s=i[0])&&t.push(new Ma(s,o,a,c,d)),(s=i[1])&&t.push(new Ma(s,c,a,u,d)),(s=i[2])&&t.push(new Ma(s,o,d,c,l)),(s=i[3])&&t.push(new Ma(s,c,d,u,l))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function udt(e){return e[0]}function ldt(e){return arguments.length?(this._x=e,this):this._x}function cdt(e){return e[1]}function ddt(e){return arguments.length?(this._y=e,this):this._y}function dW(e,t,n){var r=new fW(t??udt,n??cdt,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function fW(e,t,n,r,i,s){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=s,this._root=void 0}function Bse(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var Ya=dW.prototype=fW.prototype;Ya.copy=function(){var e=new fW(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=Bse(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=Bse(r));return e};Ya.add=Xct;Ya.addAll=Qct;Ya.cover=Jct;Ya.data=Zct;Ya.extent=edt;Ya.find=tdt;Ya.remove=ndt;Ya.removeAll=rdt;Ya.root=idt;Ya.size=sdt;Ya.visit=odt;Ya.visitAfter=adt;Ya.x=ldt;Ya.y=ddt;function Fa(e){return function(){return e}}function Jm(e){return(e()-.5)*1e-6}function fdt(e){return e.x+e.vx}function hdt(e){return e.y+e.vy}function pdt(e){var t,n,r,i=1,s=1;typeof e!="function"&&(e=Fa(e==null?1:+e));function o(){for(var l,c=t.length,d,f,h,p,m,y,v=0;v<s;++v)for(d=dW(t,fdt,hdt).visitAfter(a),l=0;l<c;++l)f=t[l],m=n[f.index],y=m*m,h=f.x+f.vx,p=f.y+f.vy,d.visit(b);function b(w,E,_,C,S){var k=w.data,R=w.r,N=m+R;if(k){if(k.index>f.index){var O=h-k.x-k.vx,F=p-k.y-k.vy,$=O*O+F*F;$<N*N&&(O===0&&(O=Jm(r),$+=O*O),F===0&&(F=Jm(r),$+=F*F),$=(N-($=Math.sqrt($)))/$*i,f.vx+=(O*=$)*(N=(R*=R)/(y+R)),f.vy+=(F*=$)*N,k.vx-=O*(N=1-N),k.vy-=F*N)}return}return E>h+N||C<h-N||_>p+N||S<p-N}}function a(l){if(l.data)return l.r=n[l.data.index];for(var c=l.r=0;c<4;++c)l[c]&&l[c].r>l.r&&(l.r=l[c].r)}function u(){if(t){var l,c=t.length,d;for(n=new Array(c),l=0;l<c;++l)d=t[l],n[d.index]=+e(d,l,t)}}return o.initialize=function(l,c){t=l,r=c,u()},o.iterations=function(l){return arguments.length?(s=+l,o):s},o.strength=function(l){return arguments.length?(i=+l,o):i},o.radius=function(l){return arguments.length?(e=typeof l=="function"?l:Fa(+l),u(),o):e},o}function mdt(e){return e.index}function jse(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function gdt(e){var t=mdt,n=d,r,i=Fa(30),s,o,a,u,l,c=1;e==null&&(e=[]);function d(y){return 1/Math.min(a[y.source.index],a[y.target.index])}function f(y){for(var v=0,b=e.length;v<c;++v)for(var w=0,E,_,C,S,k,R,N;w<b;++w)E=e[w],_=E.source,C=E.target,S=C.x+C.vx-_.x-_.vx||Jm(l),k=C.y+C.vy-_.y-_.vy||Jm(l),R=Math.sqrt(S*S+k*k),R=(R-s[w])/R*y*r[w],S*=R,k*=R,C.vx-=S*(N=u[w]),C.vy-=k*N,_.vx+=S*(N=1-N),_.vy+=k*N}function h(){if(o){var y,v=o.length,b=e.length,w=new Map(o.map((_,C)=>[t(_,C,o),_])),E;for(y=0,a=new Array(v);y<b;++y)E=e[y],E.index=y,typeof E.source!="object"&&(E.source=jse(w,E.source)),typeof E.target!="object"&&(E.target=jse(w,E.target)),a[E.source.index]=(a[E.source.index]||0)+1,a[E.target.index]=(a[E.target.index]||0)+1;for(y=0,u=new Array(b);y<b;++y)E=e[y],u[y]=a[E.source.index]/(a[E.source.index]+a[E.target.index]);r=new Array(b),p(),s=new Array(b),m()}}function p(){if(o)for(var y=0,v=e.length;y<v;++y)r[y]=+n(e[y],y,e)}function m(){if(o)for(var y=0,v=e.length;y<v;++y)s[y]=+i(e[y],y,e)}return f.initialize=function(y,v){o=y,l=v,h()},f.links=function(y){return arguments.length?(e=y,h(),f):e},f.id=function(y){return arguments.length?(t=y,f):t},f.iterations=function(y){return arguments.length?(c=+y,f):c},f.strength=function(y){return arguments.length?(n=typeof y=="function"?y:Fa(+y),p(),f):n},f.distance=function(y){return arguments.length?(i=typeof y=="function"?y:Fa(+y),m(),f):i},f}const ydt=1664525,bdt=1013904223,zse=4294967296;function vdt(){let e=1;return()=>(e=(ydt*e+bdt)%zse)/zse}function xdt(e){return e.x}function wdt(e){return e.y}var Edt=10,_dt=Math.PI*(3-Math.sqrt(5));function Tdt(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),s=0,o=.6,a=new Map,u=oW(d),l=Xq("tick","end"),c=vdt();e==null&&(e=[]);function d(){f(),l.call("tick",t),n<r&&(u.stop(),l.call("end",t))}function f(m){var y,v=e.length,b;m===void 0&&(m=1);for(var w=0;w<m;++w)for(n+=(s-n)*i,a.forEach(function(E){E(n)}),y=0;y<v;++y)b=e[y],b.fx==null?b.x+=b.vx*=o:(b.x=b.fx,b.vx=0),b.fy==null?b.y+=b.vy*=o:(b.y=b.fy,b.vy=0);return t}function h(){for(var m=0,y=e.length,v;m<y;++m){if(v=e[m],v.index=m,v.fx!=null&&(v.x=v.fx),v.fy!=null&&(v.y=v.fy),isNaN(v.x)||isNaN(v.y)){var b=Edt*Math.sqrt(.5+m),w=m*_dt;v.x=b*Math.cos(w),v.y=b*Math.sin(w)}(isNaN(v.vx)||isNaN(v.vy))&&(v.vx=v.vy=0)}}function p(m){return m.initialize&&m.initialize(e,c),m}return h(),t={tick:f,restart:function(){return u.restart(d),t},stop:function(){return u.stop(),t},nodes:function(m){return arguments.length?(e=m,h(),a.forEach(p),t):e},alpha:function(m){return arguments.length?(n=+m,t):n},alphaMin:function(m){return arguments.length?(r=+m,t):r},alphaDecay:function(m){return arguments.length?(i=+m,t):+i},alphaTarget:function(m){return arguments.length?(s=+m,t):s},velocityDecay:function(m){return arguments.length?(o=1-m,t):1-o},randomSource:function(m){return arguments.length?(c=m,a.forEach(p),t):c},force:function(m,y){return arguments.length>1?(y==null?a.delete(m):a.set(m,p(y)),t):a.get(m)},find:function(m,y,v){var b=0,w=e.length,E,_,C,S,k;for(v==null?v=1/0:v*=v,b=0;b<w;++b)S=e[b],E=m-S.x,_=y-S.y,C=E*E+_*_,C<v&&(k=S,v=C);return k},on:function(m,y){return arguments.length>1?(l.on(m,y),t):l.on(m)}}}function Cdt(){var e,t,n,r,i=Fa(-30),s,o=1,a=1/0,u=.81;function l(h){var p,m=e.length,y=dW(e,xdt,wdt).visitAfter(d);for(r=h,p=0;p<m;++p)t=e[p],y.visit(f)}function c(){if(e){var h,p=e.length,m;for(s=new Array(p),h=0;h<p;++h)m=e[h],s[m.index]=+i(m,h,e)}}function d(h){var p=0,m,y,v=0,b,w,E;if(h.length){for(b=w=E=0;E<4;++E)(m=h[E])&&(y=Math.abs(m.value))&&(p+=m.value,v+=y,b+=y*m.x,w+=y*m.y);h.x=b/v,h.y=w/v}else{m=h,m.x=m.data.x,m.y=m.data.y;do p+=s[m.data.index];while(m=m.next)}h.value=p}function f(h,p,m,y){if(!h.value)return!0;var v=h.x-t.x,b=h.y-t.y,w=y-p,E=v*v+b*b;if(w*w/u<E)return E<a&&(v===0&&(v=Jm(n),E+=v*v),b===0&&(b=Jm(n),E+=b*b),E<o&&(E=Math.sqrt(o*E)),t.vx+=v*h.value*r/E,t.vy+=b*h.value*r/E),!0;if(h.length||E>=a)return;(h.data!==t||h.next)&&(v===0&&(v=Jm(n),E+=v*v),b===0&&(b=Jm(n),E+=b*b),E<o&&(E=Math.sqrt(o*E)));do h.data!==t&&(w=s[h.data.index]*r/E,t.vx+=v*w,t.vy+=b*w);while(h=h.next)}return l.initialize=function(h,p){e=h,n=p,c()},l.strength=function(h){return arguments.length?(i=typeof h=="function"?h:Fa(+h),c(),l):i},l.distanceMin=function(h){return arguments.length?(o=h*h,l):Math.sqrt(o)},l.distanceMax=function(h){return arguments.length?(a=h*h,l):Math.sqrt(a)},l.theta=function(h){return arguments.length?(u=h*h,l):Math.sqrt(u)},l}function Sdt(e){var t=Fa(.1),n,r,i;typeof e!="function"&&(e=Fa(e==null?0:+e));function s(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vx+=(i[u]-c.x)*r[u]*a}function o(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:Fa(+a),o(),s):t},s.x=function(a){return arguments.length?(e=typeof a=="function"?a:Fa(+a),o(),s):e},s}function Adt(e){var t=Fa(.1),n,r,i;typeof e!="function"&&(e=Fa(e==null?0:+e));function s(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vy+=(i[u]-c.y)*r[u]*a}function o(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:Fa(+a),o(),s):t},s.y=function(a){return arguments.length?(e=typeof a=="function"?a:Fa(+a),o(),s):e},s}function kdt(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function S3(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function zx(e){return e=S3(Math.abs(e)),e?e[1]:NaN}function Idt(e,t){return function(n,r){for(var i=n.length,s=[],o=0,a=e[0],u=0;i>0&&a>0&&(u+a+1>r&&(a=Math.max(1,r-u)),s.push(n.substring(i-=a,i+a)),!((u+=a+1)>r));)a=e[o=(o+1)%e.length];return s.reverse().join(t)}}function Rdt(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var Ddt=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function o1(e){if(!(t=Ddt.exec(e)))throw new Error("invalid format: "+e);var t;return new hW({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}o1.prototype=hW.prototype;function hW(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}hW.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Pdt(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var _we;function Ndt(e,t){var n=S3(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(_we=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+S3(e,Math.max(0,t+s-1))[0]}function Use(e,t){var n=S3(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Vse={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:kdt,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Use(e*100,t),r:Use,s:Ndt,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Hse(e){return e}var qse=Array.prototype.map,Wse=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Twe(e){var t=e.grouping===void 0||e.thousands===void 0?Hse:Idt(qse.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?Hse:Rdt(qse.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function l(d){d=o1(d);var f=d.fill,h=d.align,p=d.sign,m=d.symbol,y=d.zero,v=d.width,b=d.comma,w=d.precision,E=d.trim,_=d.type;_==="n"?(b=!0,_="g"):Vse[_]||(w===void 0&&(w=12),E=!0,_="g"),(y||f==="0"&&h==="=")&&(y=!0,f="0",h="=");var C=m==="$"?n:m==="#"&&/[boxX]/.test(_)?"0"+_.toLowerCase():"",S=m==="$"?r:/[%p]/.test(_)?o:"",k=Vse[_],R=/[defgprs%]/.test(_);w=w===void 0?6:/[gprs]/.test(_)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function N(O){var F=C,$=S,z,q,W;if(_==="c")$=k(O)+$,O="";else{O=+O;var J=O<0||1/O<0;if(O=isNaN(O)?u:k(Math.abs(O),w),E&&(O=Pdt(O)),J&&+O==0&&p!=="+"&&(J=!1),F=(J?p==="("?p:a:p==="-"||p==="("?"":p)+F,$=(_==="s"?Wse[8+_we/3]:"")+$+(J&&p==="("?")":""),R){for(z=-1,q=O.length;++z<q;)if(W=O.charCodeAt(z),48>W||W>57){$=(W===46?i+O.slice(z+1):O.slice(z))+$,O=O.slice(0,z);break}}}b&&!y&&(O=t(O,1/0));var K=F.length+O.length+$.length,Z=K<v?new Array(v-K+1).join(f):"";switch(b&&y&&(O=t(Z+O,Z.length?v-$.length:1/0),Z=""),h){case"<":O=F+O+$+Z;break;case"=":O=F+Z+O+$;break;case"^":O=Z.slice(0,K=Z.length>>1)+F+O+$+Z.slice(K);break;default:O=Z+F+O+$;break}return s(O)}return N.toString=function(){return d+""},N}function c(d,f){var h=l((d=o1(d),d.type="f",d)),p=Math.max(-8,Math.min(8,Math.floor(zx(f)/3)))*3,m=Math.pow(10,-p),y=Wse[8+p/3];return function(v){return h(m*v)+y}}return{format:l,formatPrefix:c}}var aI,UO,pW;Odt({thousands:",",grouping:[3],currency:["$",""]});function Odt(e){return aI=Twe(e),UO=aI.format,pW=aI.formatPrefix,aI}function Cwe(e){return Math.max(0,-zx(Math.abs(e)))}function Swe(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(zx(t)/3)))*3-zx(Math.abs(e)))}function Awe(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,zx(t)-zx(e))+1}var an=1e-6,yj=1e-12,On=Math.PI,Ni=On/2,A3=On/4,Ha=On*2,ji=180/On,Dn=On/180,qn=Math.abs,aE=Math.atan,tc=Math.atan2,rn=Math.cos,uI=Math.ceil,kwe=Math.exp,bj=Math.hypot,k3=Math.log,IL=Math.pow,Zt=Math.sin,Wl=Math.sign||function(e){return e>0?1:e<0?-1:0},qa=Math.sqrt,mW=Math.tan;function Iwe(e){return e>1?0:e<-1?On:Math.acos(e)}function Ru(e){return e>1?Ni:e<-1?-Ni:Math.asin(e)}function ko(){}function I3(e,t){e&&Yse.hasOwnProperty(e.type)&&Yse[e.type](e,t)}var Gse={Feature:function(e,t){I3(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)I3(n[r].geometry,t)}},Yse={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){vj(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)vj(n[r],t,0)},Polygon:function(e,t){Kse(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)Kse(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)I3(n[r],t)}};function vj(e,t,n){var r=-1,i=e.length-n,s;for(t.lineStart();++r<i;)s=e[r],t.point(s[0],s[1],s[2]);t.lineEnd()}function Kse(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)vj(e[n],t,1);t.polygonEnd()}function Gh(e,t){e&&Gse.hasOwnProperty(e.type)?Gse[e.type](e,t):I3(e,t)}var R3=new za,D3=new za,Rwe,Dwe,xj,wj,Ej,jf={point:ko,lineStart:ko,lineEnd:ko,polygonStart:function(){R3=new za,jf.lineStart=$dt,jf.lineEnd=Mdt},polygonEnd:function(){var e=+R3;D3.add(e<0?Ha+e:e),this.lineStart=this.lineEnd=this.point=ko},sphere:function(){D3.add(Ha)}};function $dt(){jf.point=Ldt}function Mdt(){Pwe(Rwe,Dwe)}function Ldt(e,t){jf.point=Pwe,Rwe=e,Dwe=t,e*=Dn,t*=Dn,xj=e,wj=rn(t=t/2+A3),Ej=Zt(t)}function Pwe(e,t){e*=Dn,t*=Dn,t=t/2+A3;var n=e-xj,r=n>=0?1:-1,i=r*n,s=rn(t),o=Zt(t),a=Ej*o,u=wj*s+a*rn(i),l=a*r*Zt(i);R3.add(tc(l,u)),xj=e,wj=s,Ej=o}function Fdt(e){return D3=new za,Gh(e,jf),D3*2}function P3(e){return[tc(e[1],e[0]),Ru(e[2])]}function a1(e){var t=e[0],n=e[1],r=rn(n);return[r*rn(t),r*Zt(t),Zt(n)]}function lI(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Ux(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function RL(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function cI(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function N3(e){var t=qa(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var xi,yu,ki,el,fy,Nwe,Owe,ux,r2,Mm,Dp,zh={point:_j,lineStart:Xse,lineEnd:Qse,polygonStart:function(){zh.point=Mwe,zh.lineStart=Bdt,zh.lineEnd=jdt,r2=new za,jf.polygonStart()},polygonEnd:function(){jf.polygonEnd(),zh.point=_j,zh.lineStart=Xse,zh.lineEnd=Qse,R3<0?(xi=-(ki=180),yu=-(el=90)):r2>an?el=90:r2<-1e-6&&(yu=-90),Dp[0]=xi,Dp[1]=ki},sphere:function(){xi=-(ki=180),yu=-(el=90)}};function _j(e,t){Mm.push(Dp=[xi=e,ki=e]),t<yu&&(yu=t),t>el&&(el=t)}function $we(e,t){var n=a1([e*Dn,t*Dn]);if(ux){var r=Ux(ux,n),i=[r[1],-r[0],0],s=Ux(i,r);N3(s),s=P3(s);var o=e-fy,a=o>0?1:-1,u=s[0]*ji*a,l,c=qn(o)>180;c^(a*fy<u&&u<a*e)?(l=s[1]*ji,l>el&&(el=l)):(u=(u+360)%360-180,c^(a*fy<u&&u<a*e)?(l=-s[1]*ji,l<yu&&(yu=l)):(t<yu&&(yu=t),t>el&&(el=t))),c?e<fy?Ju(xi,e)>Ju(xi,ki)&&(ki=e):Ju(e,ki)>Ju(xi,ki)&&(xi=e):ki>=xi?(e<xi&&(xi=e),e>ki&&(ki=e)):e>fy?Ju(xi,e)>Ju(xi,ki)&&(ki=e):Ju(e,ki)>Ju(xi,ki)&&(xi=e)}else Mm.push(Dp=[xi=e,ki=e]);t<yu&&(yu=t),t>el&&(el=t),ux=n,fy=e}function Xse(){zh.point=$we}function Qse(){Dp[0]=xi,Dp[1]=ki,zh.point=_j,ux=null}function Mwe(e,t){if(ux){var n=e-fy;r2.add(qn(n)>180?n+(n>0?360:-360):n)}else Nwe=e,Owe=t;jf.point(e,t),$we(e,t)}function Bdt(){jf.lineStart()}function jdt(){Mwe(Nwe,Owe),jf.lineEnd(),qn(r2)>an&&(xi=-(ki=180)),Dp[0]=xi,Dp[1]=ki,ux=null}function Ju(e,t){return(t-=e)<0?t+360:t}function zdt(e,t){return e[0]-t[0]}function Jse(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function Udt(e){var t,n,r,i,s,o,a;if(el=ki=-(xi=yu=1/0),Mm=[],Gh(e,zh),n=Mm.length){for(Mm.sort(zdt),t=1,r=Mm[0],s=[r];t<n;++t)i=Mm[t],Jse(r,i[0])||Jse(r,i[1])?(Ju(r[0],i[1])>Ju(r[0],r[1])&&(r[1]=i[1]),Ju(i[0],r[1])>Ju(r[0],r[1])&&(r[0]=i[0])):s.push(r=i);for(o=-1/0,n=s.length-1,t=0,r=s[n];t<=n;r=i,++t)i=s[t],(a=Ju(r[1],i[0]))>o&&(o=a,xi=i[0],ki=r[1])}return Mm=Dp=null,xi===1/0||yu===1/0?[[NaN,NaN],[NaN,NaN]]:[[xi,yu],[ki,el]]}var hT,O3,$3,M3,L3,F3,B3,j3,Tj,Cj,Sj,Lwe,Fwe,Na,Oa,$a,Qc={sphere:ko,point:gW,lineStart:Zse,lineEnd:eoe,polygonStart:function(){Qc.lineStart=qdt,Qc.lineEnd=Wdt},polygonEnd:function(){Qc.lineStart=Zse,Qc.lineEnd=eoe}};function gW(e,t){e*=Dn,t*=Dn;var n=rn(t);RS(n*rn(e),n*Zt(e),Zt(t))}function RS(e,t,n){++hT,$3+=(e-$3)/hT,M3+=(t-M3)/hT,L3+=(n-L3)/hT}function Zse(){Qc.point=Vdt}function Vdt(e,t){e*=Dn,t*=Dn;var n=rn(t);Na=n*rn(e),Oa=n*Zt(e),$a=Zt(t),Qc.point=Hdt,RS(Na,Oa,$a)}function Hdt(e,t){e*=Dn,t*=Dn;var n=rn(t),r=n*rn(e),i=n*Zt(e),s=Zt(t),o=tc(qa((o=Oa*s-$a*i)*o+(o=$a*r-Na*s)*o+(o=Na*i-Oa*r)*o),Na*r+Oa*i+$a*s);O3+=o,F3+=o*(Na+(Na=r)),B3+=o*(Oa+(Oa=i)),j3+=o*($a+($a=s)),RS(Na,Oa,$a)}function eoe(){Qc.point=gW}function qdt(){Qc.point=Gdt}function Wdt(){Bwe(Lwe,Fwe),Qc.point=gW}function Gdt(e,t){Lwe=e,Fwe=t,e*=Dn,t*=Dn,Qc.point=Bwe;var n=rn(t);Na=n*rn(e),Oa=n*Zt(e),$a=Zt(t),RS(Na,Oa,$a)}function Bwe(e,t){e*=Dn,t*=Dn;var n=rn(t),r=n*rn(e),i=n*Zt(e),s=Zt(t),o=Oa*s-$a*i,a=$a*r-Na*s,u=Na*i-Oa*r,l=bj(o,a,u),c=Ru(l),d=l&&-c/l;Tj.add(d*o),Cj.add(d*a),Sj.add(d*u),O3+=c,F3+=c*(Na+(Na=r)),B3+=c*(Oa+(Oa=i)),j3+=c*($a+($a=s)),RS(Na,Oa,$a)}function Ydt(e){hT=O3=$3=M3=L3=F3=B3=j3=0,Tj=new za,Cj=new za,Sj=new za,Gh(e,Qc);var t=+Tj,n=+Cj,r=+Sj,i=bj(t,n,r);return i<yj&&(t=F3,n=B3,r=j3,O3<an&&(t=$3,n=M3,r=L3),i=bj(t,n,r),i<yj)?[NaN,NaN]:[tc(n,t)*ji,Ru(r/i)*ji]}function Aj(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function kj(e,t){return qn(e)>On&&(e-=Math.round(e/Ha)*Ha),[e,t]}kj.invert=kj;function jwe(e,t,n){return(e%=Ha)?t||n?Aj(noe(e),roe(t,n)):noe(e):t||n?roe(t,n):kj}function toe(e){return function(t,n){return t+=e,qn(t)>On&&(t-=Math.round(t/Ha)*Ha),[t,n]}}function noe(e){var t=toe(e);return t.invert=toe(-e),t}function roe(e,t){var n=rn(e),r=Zt(e),i=rn(t),s=Zt(t);function o(a,u){var l=rn(u),c=rn(a)*l,d=Zt(a)*l,f=Zt(u),h=f*n+c*r;return[tc(d*i-h*s,c*n-f*r),Ru(h*i+d*s)]}return o.invert=function(a,u){var l=rn(u),c=rn(a)*l,d=Zt(a)*l,f=Zt(u),h=f*i-d*s;return[tc(d*i+f*s,c*n+h*r),Ru(h*n-c*r)]},o}function Kdt(e){e=jwe(e[0]*Dn,e[1]*Dn,e.length>2?e[2]*Dn:0);function t(n){return n=e(n[0]*Dn,n[1]*Dn),n[0]*=ji,n[1]*=ji,n}return t.invert=function(n){return n=e.invert(n[0]*Dn,n[1]*Dn),n[0]*=ji,n[1]*=ji,n},t}function Xdt(e,t,n,r,i,s){if(n){var o=rn(t),a=Zt(t),u=r*n;i==null?(i=t+r*Ha,s=t-u/2):(i=ioe(o,i),s=ioe(o,s),(r>0?i<s:i>s)&&(i+=r*Ha));for(var l,c=i;r>0?c>s:c<s;c-=u)l=P3([o,-a*rn(c),-a*Zt(c)]),e.point(l[0],l[1])}}function ioe(e,t){t=a1(t),t[0]-=e,N3(t);var n=Iwe(-t[1]);return((-t[2]<0?-n:n)+Ha-an)%Ha}function zwe(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:ko,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function dD(e,t){return qn(e[0]-t[0])<an&&qn(e[1]-t[1])<an}function dI(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Uwe(e,t,n,r,i){var s=[],o=[],a,u;if(e.forEach(function(p){if(!((m=p.length-1)<=0)){var m,y=p[0],v=p[m],b;if(dD(y,v)){if(!y[2]&&!v[2]){for(i.lineStart(),a=0;a<m;++a)i.point((y=p[a])[0],y[1]);i.lineEnd();return}v[0]+=2*an}s.push(b=new dI(y,p,null,!0)),o.push(b.o=new dI(y,null,b,!1)),s.push(b=new dI(v,p,null,!1)),o.push(b.o=new dI(v,null,b,!0))}}),!!s.length){for(o.sort(t),soe(s),soe(o),a=0,u=o.length;a<u;++a)o[a].e=n=!n;for(var l=s[0],c,d;;){for(var f=l,h=!0;f.v;)if((f=f.n)===l)return;c=f.z,i.lineStart();do{if(f.v=f.o.v=!0,f.e){if(h)for(a=0,u=c.length;a<u;++a)i.point((d=c[a])[0],d[1]);else r(f.x,f.n.x,1,i);f=f.n}else{if(h)for(c=f.p.z,a=c.length-1;a>=0;--a)i.point((d=c[a])[0],d[1]);else r(f.x,f.p.x,-1,i);f=f.p}f=f.o,c=f.z,h=!h}while(!f.v);i.lineEnd()}}}function soe(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function DL(e){return qn(e[0])<=On?e[0]:Wl(e[0])*((qn(e[0])+On)%Ha-On)}function Qdt(e,t){var n=DL(t),r=t[1],i=Zt(r),s=[Zt(n),-rn(n),0],o=0,a=0,u=new za;i===1?r=Ni+an:i===-1&&(r=-Ni-an);for(var l=0,c=e.length;l<c;++l)if(f=(d=e[l]).length)for(var d,f,h=d[f-1],p=DL(h),m=h[1]/2+A3,y=Zt(m),v=rn(m),b=0;b<f;++b,p=E,y=C,v=S,h=w){var w=d[b],E=DL(w),_=w[1]/2+A3,C=Zt(_),S=rn(_),k=E-p,R=k>=0?1:-1,N=R*k,O=N>On,F=y*C;if(u.add(tc(F*R*Zt(N),v*S+F*rn(N))),o+=O?k+R*Ha:k,O^p>=n^E>=n){var $=Ux(a1(h),a1(w));N3($);var z=Ux(s,$);N3(z);var q=(O^k>=0?-1:1)*Ru(z[2]);(r>q||r===q&&($[0]||$[1]))&&(a+=O^k>=0?1:-1)}}return(o<-1e-6||o<an&&u<-1e-12)^a&1}function Vwe(e,t,n,r){return function(i){var s=t(i),o=zwe(),a=t(o),u=!1,l,c,d,f={point:h,lineStart:m,lineEnd:y,polygonStart:function(){f.point=v,f.lineStart=b,f.lineEnd=w,c=[],l=[]},polygonEnd:function(){f.point=h,f.lineStart=m,f.lineEnd=y,c=Sxe(c);var E=Qdt(l,r);c.length?(u||(i.polygonStart(),u=!0),Uwe(c,Zdt,E,n,i)):E&&(u||(i.polygonStart(),u=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),u&&(i.polygonEnd(),u=!1),c=l=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(E,_){e(E,_)&&i.point(E,_)}function p(E,_){s.point(E,_)}function m(){f.point=p,s.lineStart()}function y(){f.point=h,s.lineEnd()}function v(E,_){d.push([E,_]),a.point(E,_)}function b(){a.lineStart(),d=[]}function w(){v(d[0][0],d[0][1]),a.lineEnd();var E=a.clean(),_=o.result(),C,S=_.length,k,R,N;if(d.pop(),l.push(d),d=null,!!S){if(E&1){if(R=_[0],(k=R.length-1)>0){for(u||(i.polygonStart(),u=!0),i.lineStart(),C=0;C<k;++C)i.point((N=R[C])[0],N[1]);i.lineEnd()}return}S>1&&E&2&&_.push(_.pop().concat(_.shift())),c.push(_.filter(Jdt))}}return f}}function Jdt(e){return e.length>1}function Zdt(e,t){return((e=e.x)[0]<0?e[1]-Ni-an:Ni-e[1])-((t=t.x)[0]<0?t[1]-Ni-an:Ni-t[1])}const ooe=Vwe(function(){return!0},eft,nft,[-On,-Ni]);function eft(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(s,o){var a=s>0?On:-On,u=qn(s-t);qn(u-On)<an?(e.point(t,n=(n+o)/2>0?Ni:-Ni),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),e.point(s,n),i=0):r!==a&&u>=On&&(qn(t-r)<an&&(t-=r*an),qn(s-a)<an&&(s-=a*an),n=tft(t,n,s,o),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),i=0),e.point(t=s,n=o),r=a},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function tft(e,t,n,r){var i,s,o=Zt(e-n);return qn(o)>an?aE((Zt(t)*(s=rn(r))*Zt(n)-Zt(r)*(i=rn(t))*Zt(e))/(i*s*o)):(t+r)/2}function nft(e,t,n,r){var i;if(e==null)i=n*Ni,r.point(-On,i),r.point(0,i),r.point(On,i),r.point(On,0),r.point(On,-i),r.point(0,-i),r.point(-On,-i),r.point(-On,0),r.point(-On,i);else if(qn(e[0]-t[0])>an){var s=e[0]<t[0]?On:-On;i=n*s/2,r.point(-s,i),r.point(0,i),r.point(s,i)}else r.point(t[0],t[1])}function rft(e){var t=rn(e),n=2*Dn,r=t>0,i=qn(t)>an;function s(c,d,f,h){Xdt(h,e,n,f,c,d)}function o(c,d){return rn(c)*rn(d)>t}function a(c){var d,f,h,p,m;return{lineStart:function(){p=h=!1,m=1},point:function(y,v){var b=[y,v],w,E=o(y,v),_=r?E?0:l(y,v):E?l(y+(y<0?On:-On),v):0;if(!d&&(p=h=E)&&c.lineStart(),E!==h&&(w=u(d,b),(!w||dD(d,w)||dD(b,w))&&(b[2]=1)),E!==h)m=0,E?(c.lineStart(),w=u(b,d),c.point(w[0],w[1])):(w=u(d,b),c.point(w[0],w[1],2),c.lineEnd()),d=w;else if(i&&d&&r^E){var C;!(_&f)&&(C=u(b,d,!0))&&(m=0,r?(c.lineStart(),c.point(C[0][0],C[0][1]),c.point(C[1][0],C[1][1]),c.lineEnd()):(c.point(C[1][0],C[1][1]),c.lineEnd(),c.lineStart(),c.point(C[0][0],C[0][1],3)))}E&&(!d||!dD(d,b))&&c.point(b[0],b[1]),d=b,h=E,f=_},lineEnd:function(){h&&c.lineEnd(),d=null},clean:function(){return m|(p&&h)<<1}}}function u(c,d,f){var h=a1(c),p=a1(d),m=[1,0,0],y=Ux(h,p),v=lI(y,y),b=y[0],w=v-b*b;if(!w)return!f&&c;var E=t*v/w,_=-t*b/w,C=Ux(m,y),S=cI(m,E),k=cI(y,_);RL(S,k);var R=C,N=lI(S,R),O=lI(R,R),F=N*N-O*(lI(S,S)-1);if(!(F<0)){var $=qa(F),z=cI(R,(-N-$)/O);if(RL(z,S),z=P3(z),!f)return z;var q=c[0],W=d[0],J=c[1],K=d[1],Z;W<q&&(Z=q,q=W,W=Z);var U=W-q,L=qn(U-On)<an,Y=L||U<an;if(!L&&K<J&&(Z=J,J=K,K=Z),Y?L?J+K>0^z[1]<(qn(z[0]-q)<an?J:K):J<=z[1]&&z[1]<=K:U>On^(q<=z[0]&&z[0]<=W)){var j=cI(R,(-N+$)/O);return RL(j,S),[z,P3(j)]}}}function l(c,d){var f=r?e:On-e,h=0;return c<-f?h|=1:c>f&&(h|=2),d<-f?h|=4:d>f&&(h|=8),h}return Vwe(o,a,s,r?[0,-e]:[-On,e-On])}function ift(e,t,n,r,i,s){var o=e[0],a=e[1],u=t[0],l=t[1],c=0,d=1,f=u-o,h=l-a,p;if(p=n-o,!(!f&&p>0)){if(p/=f,f<0){if(p<c)return;p<d&&(d=p)}else if(f>0){if(p>d)return;p>c&&(c=p)}if(p=i-o,!(!f&&p<0)){if(p/=f,f<0){if(p>d)return;p>c&&(c=p)}else if(f>0){if(p<c)return;p<d&&(d=p)}if(p=r-a,!(!h&&p>0)){if(p/=h,h<0){if(p<c)return;p<d&&(d=p)}else if(h>0){if(p>d)return;p>c&&(c=p)}if(p=s-a,!(!h&&p<0)){if(p/=h,h<0){if(p>d)return;p>c&&(c=p)}else if(h>0){if(p<c)return;p<d&&(d=p)}return c>0&&(e[0]=o+c*f,e[1]=a+c*h),d<1&&(t[0]=o+d*f,t[1]=a+d*h),!0}}}}}var fI=1e9,hI=-1e9;function Hwe(e,t,n,r){function i(l,c){return e<=l&&l<=n&&t<=c&&c<=r}function s(l,c,d,f){var h=0,p=0;if(l==null||(h=o(l,d))!==(p=o(c,d))||u(l,c)<0^d>0)do f.point(h===0||h===3?e:n,h>1?r:t);while((h=(h+d+4)%4)!==p);else f.point(c[0],c[1])}function o(l,c){return qn(l[0]-e)<an?c>0?0:3:qn(l[0]-n)<an?c>0?2:1:qn(l[1]-t)<an?c>0?1:0:c>0?3:2}function a(l,c){return u(l.x,c.x)}function u(l,c){var d=o(l,1),f=o(c,1);return d!==f?d-f:d===0?c[1]-l[1]:d===1?l[0]-c[0]:d===2?l[1]-c[1]:c[0]-l[0]}return function(l){var c=l,d=zwe(),f,h,p,m,y,v,b,w,E,_,C,S={point:k,lineStart:F,lineEnd:$,polygonStart:N,polygonEnd:O};function k(q,W){i(q,W)&&c.point(q,W)}function R(){for(var q=0,W=0,J=h.length;W<J;++W)for(var K=h[W],Z=1,U=K.length,L=K[0],Y,j,G=L[0],X=L[1];Z<U;++Z)Y=G,j=X,L=K[Z],G=L[0],X=L[1],j<=r?X>r&&(G-Y)*(r-j)>(X-j)*(e-Y)&&++q:X<=r&&(G-Y)*(r-j)<(X-j)*(e-Y)&&--q;return q}function N(){c=d,f=[],h=[],C=!0}function O(){var q=R(),W=C&&q,J=(f=Sxe(f)).length;(W||J)&&(l.polygonStart(),W&&(l.lineStart(),s(null,null,1,l),l.lineEnd()),J&&Uwe(f,a,q,s,l),l.polygonEnd()),c=l,f=h=p=null}function F(){S.point=z,h&&h.push(p=[]),_=!0,E=!1,b=w=NaN}function $(){f&&(z(m,y),v&&E&&d.rejoin(),f.push(d.result())),S.point=k,E&&c.lineEnd()}function z(q,W){var J=i(q,W);if(h&&p.push([q,W]),_)m=q,y=W,v=J,_=!1,J&&(c.lineStart(),c.point(q,W));else if(J&&E)c.point(q,W);else{var K=[b=Math.max(hI,Math.min(fI,b)),w=Math.max(hI,Math.min(fI,w))],Z=[q=Math.max(hI,Math.min(fI,q)),W=Math.max(hI,Math.min(fI,W))];ift(K,Z,e,t,n,r)?(E||(c.lineStart(),c.point(K[0],K[1])),c.point(Z[0],Z[1]),J||c.lineEnd(),C=!1):J&&(c.lineStart(),c.point(q,W),C=!1)}b=q,w=W,E=J}return S}}function aoe(e,t,n){var r=Tu(e,t-an,n).concat(t);return function(i){return r.map(function(s){return[i,s]})}}function uoe(e,t,n){var r=Tu(e,t-an,n).concat(t);return function(i){return r.map(function(s){return[s,i]})}}function sft(){var e,t,n,r,i,s,o,a,u=10,l=u,c=90,d=360,f,h,p,m,y=2.5;function v(){return{type:"MultiLineString",coordinates:b()}}function b(){return Tu(uI(r/c)*c,n,c).map(p).concat(Tu(uI(a/d)*d,o,d).map(m)).concat(Tu(uI(t/u)*u,e,u).filter(function(w){return qn(w%c)>an}).map(f)).concat(Tu(uI(s/l)*l,i,l).filter(function(w){return qn(w%d)>an}).map(h))}return v.lines=function(){return b().map(function(w){return{type:"LineString",coordinates:w}})},v.outline=function(){return{type:"Polygon",coordinates:[p(r).concat(m(o).slice(1),p(n).reverse().slice(1),m(a).reverse().slice(1))]}},v.extent=function(w){return arguments.length?v.extentMajor(w).extentMinor(w):v.extentMinor()},v.extentMajor=function(w){return arguments.length?(r=+w[0][0],n=+w[1][0],a=+w[0][1],o=+w[1][1],r>n&&(w=r,r=n,n=w),a>o&&(w=a,a=o,o=w),v.precision(y)):[[r,a],[n,o]]},v.extentMinor=function(w){return arguments.length?(t=+w[0][0],e=+w[1][0],s=+w[0][1],i=+w[1][1],t>e&&(w=t,t=e,e=w),s>i&&(w=s,s=i,i=w),v.precision(y)):[[t,s],[e,i]]},v.step=function(w){return arguments.length?v.stepMajor(w).stepMinor(w):v.stepMinor()},v.stepMajor=function(w){return arguments.length?(c=+w[0],d=+w[1],v):[c,d]},v.stepMinor=function(w){return arguments.length?(u=+w[0],l=+w[1],v):[u,l]},v.precision=function(w){return arguments.length?(y=+w,f=aoe(s,i,90),h=uoe(t,e,y),p=aoe(a,o,90),m=uoe(r,n,y),v):y},v.extentMajor([[-180,-90+an],[180,90-an]]).extentMinor([[-180,-80-an],[180,80+an]])}const iC=e=>e;var PL=new za,Ij=new za,qwe,Wwe,Rj,Dj,Yh={point:ko,lineStart:ko,lineEnd:ko,polygonStart:function(){Yh.lineStart=oft,Yh.lineEnd=uft},polygonEnd:function(){Yh.lineStart=Yh.lineEnd=Yh.point=ko,PL.add(qn(Ij)),Ij=new za},result:function(){var e=PL/2;return PL=new za,e}};function oft(){Yh.point=aft}function aft(e,t){Yh.point=Gwe,qwe=Rj=e,Wwe=Dj=t}function Gwe(e,t){Ij.add(Dj*e-Rj*t),Rj=e,Dj=t}function uft(){Gwe(qwe,Wwe)}var Vx=1/0,z3=Vx,sC=-Vx,U3=sC,V3={point:lft,lineStart:ko,lineEnd:ko,polygonStart:ko,polygonEnd:ko,result:function(){var e=[[Vx,z3],[sC,U3]];return sC=U3=-(z3=Vx=1/0),e}};function lft(e,t){e<Vx&&(Vx=e),e>sC&&(sC=e),t<z3&&(z3=t),t>U3&&(U3=t)}var Pj=0,Nj=0,pT=0,H3=0,q3=0,Bv=0,Oj=0,$j=0,mT=0,Ywe,Kwe,af,uf,ql={point:u1,lineStart:loe,lineEnd:coe,polygonStart:function(){ql.lineStart=fft,ql.lineEnd=hft},polygonEnd:function(){ql.point=u1,ql.lineStart=loe,ql.lineEnd=coe},result:function(){var e=mT?[Oj/mT,$j/mT]:Bv?[H3/Bv,q3/Bv]:pT?[Pj/pT,Nj/pT]:[NaN,NaN];return Pj=Nj=pT=H3=q3=Bv=Oj=$j=mT=0,e}};function u1(e,t){Pj+=e,Nj+=t,++pT}function loe(){ql.point=cft}function cft(e,t){ql.point=dft,u1(af=e,uf=t)}function dft(e,t){var n=e-af,r=t-uf,i=qa(n*n+r*r);H3+=i*(af+e)/2,q3+=i*(uf+t)/2,Bv+=i,u1(af=e,uf=t)}function coe(){ql.point=u1}function fft(){ql.point=pft}function hft(){Xwe(Ywe,Kwe)}function pft(e,t){ql.point=Xwe,u1(Ywe=af=e,Kwe=uf=t)}function Xwe(e,t){var n=e-af,r=t-uf,i=qa(n*n+r*r);H3+=i*(af+e)/2,q3+=i*(uf+t)/2,Bv+=i,i=uf*e-af*t,Oj+=i*(af+e),$j+=i*(uf+t),mT+=i*3,u1(af=e,uf=t)}function Qwe(e){this._context=e}Qwe.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,Ha);break}}},result:ko};var Mj=new za,NL,Jwe,Zwe,gT,yT,oC={point:ko,lineStart:function(){oC.point=mft},lineEnd:function(){NL&&eEe(Jwe,Zwe),oC.point=ko},polygonStart:function(){NL=!0},polygonEnd:function(){NL=null},result:function(){var e=+Mj;return Mj=new za,e}};function mft(e,t){oC.point=eEe,Jwe=gT=e,Zwe=yT=t}function eEe(e,t){gT-=e,yT-=t,Mj.add(qa(gT*gT+yT*yT)),gT=e,yT=t}let doe,W3,foe,hoe;class poe{constructor(t){this._append=t==null?tEe:gft(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==foe||this._append!==W3){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,foe=r,W3=this._append,hoe=this._,this._=i}this._+=hoe;break}}}result(){const t=this._;return this._="",t.length?t:null}}function tEe(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function gft(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return tEe;if(t!==doe){const n=10**t;doe=t,W3=function(i){let s=1;this._+=i[0];for(const o=i.length;s<o;++s)this._+=Math.round(arguments[s]*n)/n+i[s]}}return W3}function nEe(e,t){let n=3,r=4.5,i,s;function o(a){return a&&(typeof r=="function"&&s.pointRadius(+r.apply(this,arguments)),Gh(a,i(s))),s.result()}return o.area=function(a){return Gh(a,i(Yh)),Yh.result()},o.measure=function(a){return Gh(a,i(oC)),oC.result()},o.bounds=function(a){return Gh(a,i(V3)),V3.result()},o.centroid=function(a){return Gh(a,i(ql)),ql.result()},o.projection=function(a){return arguments.length?(i=a==null?(e=null,iC):(e=a).stream,o):e},o.context=function(a){return arguments.length?(s=a==null?(t=null,new poe(n)):new Qwe(t=a),typeof r!="function"&&s.pointRadius(r),o):t},o.pointRadius=function(a){return arguments.length?(r=typeof a=="function"?a:(s.pointRadius(+a),+a),o):r},o.digits=function(a){if(!arguments.length)return n;if(a==null)n=null;else{const u=Math.floor(a);if(!(u>=0))throw new RangeError(`invalid digits: ${a}`);n=u}return t===null&&(s=new poe(n)),o},o.projection(e).digits(n).context(t)}function VO(e){return function(t){var n=new Lj;for(var r in e)n[r]=e[r];return n.stream=t,n}}function Lj(){}Lj.prototype={constructor:Lj,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function yW(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),Gh(n,e.stream(V3)),t(V3.result()),r!=null&&e.clipExtent(r),e}function HO(e,t,n){return yW(e,function(r){var i=t[1][0]-t[0][0],s=t[1][1]-t[0][1],o=Math.min(i/(r[1][0]-r[0][0]),s/(r[1][1]-r[0][1])),a=+t[0][0]+(i-o*(r[1][0]+r[0][0]))/2,u=+t[0][1]+(s-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([a,u])},n)}function bW(e,t,n){return HO(e,[[0,0],t],n)}function vW(e,t,n){return yW(e,function(r){var i=+t,s=i/(r[1][0]-r[0][0]),o=(i-s*(r[1][0]+r[0][0]))/2,a=-s*r[0][1];e.scale(150*s).translate([o,a])},n)}function xW(e,t,n){return yW(e,function(r){var i=+t,s=i/(r[1][1]-r[0][1]),o=-s*r[0][0],a=(i-s*(r[1][1]+r[0][1]))/2;e.scale(150*s).translate([o,a])},n)}var moe=16,yft=rn(30*Dn);function goe(e,t){return+t?vft(e,t):bft(e)}function bft(e){return VO({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function vft(e,t){function n(r,i,s,o,a,u,l,c,d,f,h,p,m,y){var v=l-r,b=c-i,w=v*v+b*b;if(w>4*t&&m--){var E=o+f,_=a+h,C=u+p,S=qa(E*E+_*_+C*C),k=Ru(C/=S),R=qn(qn(C)-1)<an||qn(s-d)<an?(s+d)/2:tc(_,E),N=e(R,k),O=N[0],F=N[1],$=O-r,z=F-i,q=b*$-v*z;(q*q/w>t||qn((v*$+b*z)/w-.5)>.3||o*f+a*h+u*p<yft)&&(n(r,i,s,o,a,u,O,F,R,E/=S,_/=S,C,m,y),y.point(O,F),n(O,F,R,E,_,C,l,c,d,f,h,p,m,y))}}return function(r){var i,s,o,a,u,l,c,d,f,h,p,m,y={point:v,lineStart:b,lineEnd:E,polygonStart:function(){r.polygonStart(),y.lineStart=_},polygonEnd:function(){r.polygonEnd(),y.lineStart=b}};function v(k,R){k=e(k,R),r.point(k[0],k[1])}function b(){d=NaN,y.point=w,r.lineStart()}function w(k,R){var N=a1([k,R]),O=e(k,R);n(d,f,c,h,p,m,d=O[0],f=O[1],c=k,h=N[0],p=N[1],m=N[2],moe,r),r.point(d,f)}function E(){y.point=v,r.lineEnd()}function _(){b(),y.point=C,y.lineEnd=S}function C(k,R){w(i=k,R),s=d,o=f,a=h,u=p,l=m,y.point=w}function S(){n(d,f,c,h,p,m,s,o,i,a,u,l,moe,r),y.lineEnd=E,E()}return y}}var xft=VO({point:function(e,t){this.stream.point(e*Dn,t*Dn)}});function wft(e){return VO({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function Eft(e,t,n,r,i){function s(o,a){return o*=r,a*=i,[t+e*o,n-e*a]}return s.invert=function(o,a){return[(o-t)/e*r,(n-a)/e*i]},s}function yoe(e,t,n,r,i,s){if(!s)return Eft(e,t,n,r,i);var o=rn(s),a=Zt(s),u=o*e,l=a*e,c=o/e,d=a/e,f=(a*n-o*t)/e,h=(a*t+o*n)/e;function p(m,y){return m*=r,y*=i,[u*m-l*y+t,n-l*m-u*y]}return p.invert=function(m,y){return[r*(c*m-d*y+f),i*(h-d*m-c*y)]},p}function rh(e){return rEe(function(){return e})()}function rEe(e){var t,n=150,r=480,i=250,s=0,o=0,a=0,u=0,l=0,c,d=0,f=1,h=1,p=null,m=ooe,y=null,v,b,w,E=iC,_=.5,C,S,k,R,N;function O(q){return k(q[0]*Dn,q[1]*Dn)}function F(q){return q=k.invert(q[0],q[1]),q&&[q[0]*ji,q[1]*ji]}O.stream=function(q){return R&&N===q?R:R=xft(wft(c)(m(C(E(N=q)))))},O.preclip=function(q){return arguments.length?(m=q,p=void 0,z()):m},O.postclip=function(q){return arguments.length?(E=q,y=v=b=w=null,z()):E},O.clipAngle=function(q){return arguments.length?(m=+q?rft(p=q*Dn):(p=null,ooe),z()):p*ji},O.clipExtent=function(q){return arguments.length?(E=q==null?(y=v=b=w=null,iC):Hwe(y=+q[0][0],v=+q[0][1],b=+q[1][0],w=+q[1][1]),z()):y==null?null:[[y,v],[b,w]]},O.scale=function(q){return arguments.length?(n=+q,$()):n},O.translate=function(q){return arguments.length?(r=+q[0],i=+q[1],$()):[r,i]},O.center=function(q){return arguments.length?(s=q[0]%360*Dn,o=q[1]%360*Dn,$()):[s*ji,o*ji]},O.rotate=function(q){return arguments.length?(a=q[0]%360*Dn,u=q[1]%360*Dn,l=q.length>2?q[2]%360*Dn:0,$()):[a*ji,u*ji,l*ji]},O.angle=function(q){return arguments.length?(d=q%360*Dn,$()):d*ji},O.reflectX=function(q){return arguments.length?(f=q?-1:1,$()):f<0},O.reflectY=function(q){return arguments.length?(h=q?-1:1,$()):h<0},O.precision=function(q){return arguments.length?(C=goe(S,_=q*q),z()):qa(_)},O.fitExtent=function(q,W){return HO(O,q,W)},O.fitSize=function(q,W){return bW(O,q,W)},O.fitWidth=function(q,W){return vW(O,q,W)},O.fitHeight=function(q,W){return xW(O,q,W)};function $(){var q=yoe(n,0,0,f,h,d).apply(null,t(s,o)),W=yoe(n,r-q[0],i-q[1],f,h,d);return c=jwe(a,u,l),S=Aj(t,W),k=Aj(c,S),C=goe(S,_),z()}function z(){return R=N=null,O}return function(){return t=e.apply(this,arguments),O.invert=t.invert&&F,$()}}function wW(e){var t=0,n=On/3,r=rEe(e),i=r(t,n);return i.parallels=function(s){return arguments.length?r(t=s[0]*Dn,n=s[1]*Dn):[t*ji,n*ji]},i}function _ft(e){var t=rn(e);function n(r,i){return[r*t,Zt(i)/t]}return n.invert=function(r,i){return[r/t,Ru(i*t)]},n}function Tft(e,t){var n=Zt(e),r=(n+Zt(t))/2;if(qn(r)<an)return _ft(e);var i=1+n*(2*r-n),s=qa(i)/r;function o(a,u){var l=qa(i-2*r*Zt(u))/r;return[l*Zt(a*=r),s-l*rn(a)]}return o.invert=function(a,u){var l=s-u,c=tc(a,qn(l))*Wl(l);return l*r<0&&(c-=On*Wl(a)*Wl(l)),[c/r,Ru((i-(a*a+l*l)*r*r)/(2*r))]},o}function G3(){return wW(Tft).scale(155.424).center([0,33.6442])}function iEe(){return G3().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Cft(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function Sft(){var e,t,n=iEe(),r,i=G3().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s,o=G3().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,u,l={point:function(f,h){u=[f,h]}};function c(f){var h=f[0],p=f[1];return u=null,r.point(h,p),u||(s.point(h,p),u)||(a.point(h,p),u)}c.invert=function(f){var h=n.scale(),p=n.translate(),m=(f[0]-p[0])/h,y=(f[1]-p[1])/h;return(y>=.12&&y<.234&&m>=-.425&&m<-.214?i:y>=.166&&y<.234&&m>=-.214&&m<-.115?o:n).invert(f)},c.stream=function(f){return e&&t===f?e:e=Cft([n.stream(t=f),i.stream(f),o.stream(f)])},c.precision=function(f){return arguments.length?(n.precision(f),i.precision(f),o.precision(f),d()):n.precision()},c.scale=function(f){return arguments.length?(n.scale(f),i.scale(f*.35),o.scale(f),c.translate(n.translate())):n.scale()},c.translate=function(f){if(!arguments.length)return n.translate();var h=n.scale(),p=+f[0],m=+f[1];return r=n.translate(f).clipExtent([[p-.455*h,m-.238*h],[p+.455*h,m+.238*h]]).stream(l),s=i.translate([p-.307*h,m+.201*h]).clipExtent([[p-.425*h+an,m+.12*h+an],[p-.214*h-an,m+.234*h-an]]).stream(l),a=o.translate([p-.205*h,m+.212*h]).clipExtent([[p-.214*h+an,m+.166*h+an],[p-.115*h-an,m+.234*h-an]]).stream(l),d()},c.fitExtent=function(f,h){return HO(c,f,h)},c.fitSize=function(f,h){return bW(c,f,h)},c.fitWidth=function(f,h){return vW(c,f,h)},c.fitHeight=function(f,h){return xW(c,f,h)};function d(){return e=t=null,c}return c.scale(1070)}function sEe(e){return function(t,n){var r=rn(t),i=rn(n),s=e(r*i);return s===1/0?[2,0]:[s*i*Zt(t),s*Zt(n)]}}function DS(e){return function(t,n){var r=qa(t*t+n*n),i=e(r),s=Zt(i),o=rn(i);return[tc(t*s,r*o),Ru(r&&n*s/r)]}}var oEe=sEe(function(e){return qa(2/(1+e))});oEe.invert=DS(function(e){return 2*Ru(e/2)});function Aft(){return rh(oEe).scale(124.75).clipAngle(180-.001)}var aEe=sEe(function(e){return(e=Iwe(e))&&e/Zt(e)});aEe.invert=DS(function(e){return e});function kft(){return rh(aEe).scale(79.4188).clipAngle(180-.001)}function qO(e,t){return[e,k3(mW((Ni+t)/2))]}qO.invert=function(e,t){return[e,2*aE(kwe(t))-Ni]};function Ift(){return uEe(qO).scale(961/Ha)}function uEe(e){var t=rh(e),n=t.center,r=t.scale,i=t.translate,s=t.clipExtent,o=null,a,u,l;t.scale=function(d){return arguments.length?(r(d),c()):r()},t.translate=function(d){return arguments.length?(i(d),c()):i()},t.center=function(d){return arguments.length?(n(d),c()):n()},t.clipExtent=function(d){return arguments.length?(d==null?o=a=u=l=null:(o=+d[0][0],a=+d[0][1],u=+d[1][0],l=+d[1][1]),c()):o==null?null:[[o,a],[u,l]]};function c(){var d=On*r(),f=t(Kdt(t.rotate()).invert([0,0]));return s(o==null?[[f[0]-d,f[1]-d],[f[0]+d,f[1]+d]]:e===qO?[[Math.max(f[0]-d,o),a],[Math.min(f[0]+d,u),l]]:[[o,Math.max(f[1]-d,a)],[u,Math.min(f[1]+d,l)]])}return c()}function pI(e){return mW((Ni+e)/2)}function Rft(e,t){var n=rn(e),r=e===t?Zt(e):k3(n/rn(t))/k3(pI(t)/pI(e)),i=n*IL(pI(e),r)/r;if(!r)return qO;function s(o,a){i>0?a<-Ni+an&&(a=-Ni+an):a>Ni-an&&(a=Ni-an);var u=i/IL(pI(a),r);return[u*Zt(r*o),i-u*rn(r*o)]}return s.invert=function(o,a){var u=i-a,l=Wl(r)*qa(o*o+u*u),c=tc(o,qn(u))*Wl(u);return u*r<0&&(c-=On*Wl(o)*Wl(u)),[c/r,2*aE(IL(i/l,1/r))-Ni]},s}function Dft(){return wW(Rft).scale(109.5).parallels([30,30])}function Y3(e,t){return[e,t]}Y3.invert=Y3;function Pft(){return rh(Y3).scale(152.63)}function Nft(e,t){var n=rn(e),r=e===t?Zt(e):(n-rn(t))/(t-e),i=n/r+e;if(qn(r)<an)return Y3;function s(o,a){var u=i-a,l=r*o;return[u*Zt(l),i-u*rn(l)]}return s.invert=function(o,a){var u=i-a,l=tc(o,qn(u))*Wl(u);return u*r<0&&(l-=On*Wl(o)*Wl(u)),[l/r,i-Wl(r)*qa(o*o+u*u)]},s}function Oft(){return wW(Nft).scale(131.154).center([0,13.9389])}var i2=1.340264,s2=-.081106,o2=893e-6,a2=.003796,K3=qa(3)/2,$ft=12;function lEe(e,t){var n=Ru(K3*Zt(t)),r=n*n,i=r*r*r;return[e*rn(n)/(K3*(i2+3*s2*r+i*(7*o2+9*a2*r))),n*(i2+s2*r+i*(o2+a2*r))]}lEe.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,s=0,o,a,u;s<$ft&&(a=n*(i2+s2*r+i*(o2+a2*r))-t,u=i2+3*s2*r+i*(7*o2+9*a2*r),n-=o=a/u,r=n*n,i=r*r*r,!(qn(o)<yj));++s);return[K3*e*(i2+3*s2*r+i*(7*o2+9*a2*r))/rn(n),Ru(Zt(n)/K3)]};function Mft(){return rh(lEe).scale(177.158)}function cEe(e,t){var n=rn(t),r=rn(e)*n;return[n*Zt(e)/r,Zt(t)/r]}cEe.invert=DS(aE);function Lft(){return rh(cEe).scale(144.049).clipAngle(60)}function Fft(){var e=1,t=0,n=0,r=1,i=1,s=0,o,a,u=null,l,c,d,f=1,h=1,p=VO({point:function(E,_){var C=w([E,_]);this.stream.point(C[0],C[1])}}),m=iC,y,v;function b(){return f=e*r,h=e*i,y=v=null,w}function w(E){var _=E[0]*f,C=E[1]*h;if(s){var S=C*o-_*a;_=_*o+C*a,C=S}return[_+t,C+n]}return w.invert=function(E){var _=E[0]-t,C=E[1]-n;if(s){var S=C*o+_*a;_=_*o-C*a,C=S}return[_/f,C/h]},w.stream=function(E){return y&&v===E?y:y=p(m(v=E))},w.postclip=function(E){return arguments.length?(m=E,u=l=c=d=null,b()):m},w.clipExtent=function(E){return arguments.length?(m=E==null?(u=l=c=d=null,iC):Hwe(u=+E[0][0],l=+E[0][1],c=+E[1][0],d=+E[1][1]),b()):u==null?null:[[u,l],[c,d]]},w.scale=function(E){return arguments.length?(e=+E,b()):e},w.translate=function(E){return arguments.length?(t=+E[0],n=+E[1],b()):[t,n]},w.angle=function(E){return arguments.length?(s=E%360*Dn,a=Zt(s),o=rn(s),b()):s*ji},w.reflectX=function(E){return arguments.length?(r=E?-1:1,b()):r<0},w.reflectY=function(E){return arguments.length?(i=E?-1:1,b()):i<0},w.fitExtent=function(E,_){return HO(w,E,_)},w.fitSize=function(E,_){return bW(w,E,_)},w.fitWidth=function(E,_){return vW(w,E,_)},w.fitHeight=function(E,_){return xW(w,E,_)},w}function dEe(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}dEe.invert=function(e,t){var n=t,r=25,i;do{var s=n*n,o=s*s;n-=i=(n*(1.007226+s*(.015085+o*(-.044475+.028874*s-.005916*o)))-t)/(1.007226+s*(.015085*3+o*(-.044475*7+.028874*9*s-.005916*11*o)))}while(qn(i)>an&&--r>0);return[e/(.8707+(s=n*n)*(-.131979+s*(-.013791+s*s*s*(.003971-.001529*s)))),n]};function Bft(){return rh(dEe).scale(175.295)}function fEe(e,t){return[rn(t)*Zt(e),Zt(t)]}fEe.invert=DS(Ru);function jft(){return rh(fEe).scale(249.5).clipAngle(90+an)}function hEe(e,t){var n=rn(t),r=1+rn(e)*n;return[n*Zt(e)/r,Zt(t)/r]}hEe.invert=DS(function(e){return 2*aE(e)});function zft(){return rh(hEe).scale(250).clipAngle(142)}function pEe(e,t){return[k3(mW((Ni+t)/2)),-e]}pEe.invert=function(e,t){return[-t,2*aE(kwe(e))-Ni]};function Uft(){var e=uEe(pEe),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}function Vft(e,t){return e.parent===t.parent?1:2}function Hft(e){return e.reduce(qft,0)/e.length}function qft(e,t){return e+t.x}function Wft(e){return 1+e.reduce(Gft,0)}function Gft(e,t){return Math.max(e,t.y)}function Yft(e){for(var t;t=e.children;)e=t[0];return e}function Kft(e){for(var t;t=e.children;)e=t[t.length-1];return e}function Xft(){var e=Vft,t=1,n=1,r=!1;function i(s){var o,a=0;s.eachAfter(function(f){var h=f.children;h?(f.x=Hft(h),f.y=Wft(h)):(f.x=o?a+=e(f,o):0,f.y=0,o=f)});var u=Yft(s),l=Kft(s),c=u.x-e(u,l)/2,d=l.x+e(l,u)/2;return s.eachAfter(r?function(f){f.x=(f.x-s.x)*t,f.y=(s.y-f.y)*n}:function(f){f.x=(f.x-c)/(d-c)*t,f.y=(1-(s.y?f.y/s.y:1))*n})}return i.separation=function(s){return arguments.length?(e=s,i):e},i.size=function(s){return arguments.length?(r=!1,t=+s[0],n=+s[1],i):r?null:[t,n]},i.nodeSize=function(s){return arguments.length?(r=!0,t=+s[0],n=+s[1],i):r?[t,n]:null},i}function Qft(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function Jft(){return this.eachAfter(Qft)}function Zft(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function eht(e,t){for(var n=this,r=[n],i,s,o=-1;n=r.pop();)if(e.call(t,n,++o,this),i=n.children)for(s=i.length-1;s>=0;--s)r.push(i[s]);return this}function tht(e,t){for(var n=this,r=[n],i=[],s,o,a,u=-1;n=r.pop();)if(i.push(n),s=n.children)for(o=0,a=s.length;o<a;++o)r.push(s[o]);for(;n=i.pop();)e.call(t,n,++u,this);return this}function nht(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function rht(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function iht(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function sht(e){for(var t=this,n=oht(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function oht(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function aht(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function uht(){return Array.from(this)}function lht(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function cht(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*dht(){var e=this,t,n=[e],r,i,s;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,s=r.length;i<s;++i)n.push(r[i]);while(n.length)}function EW(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=pht)):t===void 0&&(t=hht);for(var n=new Hx(e),r,i=[n],s,o,a,u;r=i.pop();)if((o=t(r.data))&&(u=(o=Array.from(o)).length))for(r.children=o,a=u-1;a>=0;--a)i.push(s=o[a]=new Hx(o[a])),s.parent=r,s.depth=r.depth+1;return n.eachBefore(mEe)}function fht(){return EW(this).eachBefore(mht)}function hht(e){return e.children}function pht(e){return Array.isArray(e)?e[1]:null}function mht(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function mEe(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function Hx(e){this.data=e,this.depth=this.height=0,this.parent=null}Hx.prototype=EW.prototype={constructor:Hx,count:Jft,each:Zft,eachAfter:tht,eachBefore:eht,find:nht,sum:rht,sort:iht,path:sht,ancestors:aht,descendants:uht,leaves:lht,links:cht,copy:fht,[Symbol.iterator]:dht};function fD(e){return e==null?null:gEe(e)}function gEe(e){if(typeof e!="function")throw new Error;return e}function by(){return 0}function Pv(e){return function(){return e}}const ght=1664525,yht=1013904223,boe=4294967296;function bht(){let e=1;return()=>(e=(ght*e+yht)%boe)/boe}function vht(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function xht(e,t){let n=e.length,r,i;for(;n;)i=t()*n--|0,r=e[n],e[n]=e[i],e[i]=r;return e}function wht(e,t){for(var n=0,r=(e=xht(Array.from(e),t)).length,i=[],s,o;n<r;)s=e[n],o&&yEe(o,s)?++n:(o=_ht(i=Eht(i,s)),n=0);return o}function Eht(e,t){var n,r;if(OL(t,e))return[t];for(n=0;n<e.length;++n)if(mI(t,e[n])&&OL(bT(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(mI(bT(e[n],e[r]),t)&&mI(bT(e[n],t),e[r])&&mI(bT(e[r],t),e[n])&&OL(bEe(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function mI(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function yEe(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function OL(e,t){for(var n=0;n<t.length;++n)if(!yEe(e,t[n]))return!1;return!0}function _ht(e){switch(e.length){case 1:return Tht(e[0]);case 2:return bT(e[0],e[1]);case 3:return bEe(e[0],e[1],e[2])}}function Tht(e){return{x:e.x,y:e.y,r:e.r}}function bT(e,t){var n=e.x,r=e.y,i=e.r,s=t.x,o=t.y,a=t.r,u=s-n,l=o-r,c=a-i,d=Math.sqrt(u*u+l*l);return{x:(n+s+u/d*c)/2,y:(r+o+l/d*c)/2,r:(d+i+a)/2}}function bEe(e,t,n){var r=e.x,i=e.y,s=e.r,o=t.x,a=t.y,u=t.r,l=n.x,c=n.y,d=n.r,f=r-o,h=r-l,p=i-a,m=i-c,y=u-s,v=d-s,b=r*r+i*i-s*s,w=b-o*o-a*a+u*u,E=b-l*l-c*c+d*d,_=h*p-f*m,C=(p*E-m*w)/(_*2)-r,S=(m*y-p*v)/_,k=(h*w-f*E)/(_*2)-i,R=(f*v-h*y)/_,N=S*S+R*R-1,O=2*(s+C*S+k*R),F=C*C+k*k-s*s,$=-(Math.abs(N)>1e-6?(O+Math.sqrt(O*O-4*N*F))/(2*N):F/O);return{x:r+C+S*$,y:i+k+R*$,r:$}}function voe(e,t,n){var r=e.x-t.x,i,s,o=e.y-t.y,a,u,l=r*r+o*o;l?(s=t.r+n.r,s*=s,u=e.r+n.r,u*=u,s>u?(i=(l+u-s)/(2*l),a=Math.sqrt(Math.max(0,u/l-i*i)),n.x=e.x-i*r-a*o,n.y=e.y-i*o+a*r):(i=(l+s-u)/(2*l),a=Math.sqrt(Math.max(0,s/l-i*i)),n.x=t.x+i*r-a*o,n.y=t.y+i*o+a*r)):(n.x=t.x+n.r,n.y=t.y)}function xoe(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function woe(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,s=(t.y*n.r+n.y*t.r)/r;return i*i+s*s}function gI(e){this._=e,this.next=null,this.previous=null}function Cht(e,t){if(!(s=(e=vht(e)).length))return 0;var n,r,i,s,o,a,u,l,c,d,f;if(n=e[0],n.x=0,n.y=0,!(s>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(s>2))return n.r+r.r;voe(r,n,i=e[2]),n=new gI(n),r=new gI(r),i=new gI(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(u=3;u<s;++u){voe(n._,r._,i=e[u]),i=new gI(i),l=r.next,c=n.previous,d=r._.r,f=n._.r;do if(d<=f){if(xoe(l._,i._)){r=l,n.next=r,r.previous=n,--u;continue e}d+=l._.r,l=l.next}else{if(xoe(c._,i._)){n=c,n.next=r,r.previous=n,--u;continue e}f+=c._.r,c=c.previous}while(l!==c.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,o=woe(n);(i=i.next)!==r;)(a=woe(i))<o&&(n=i,o=a);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=wht(n,t),u=0;u<s;++u)n=e[u],n.x-=i.x,n.y-=i.y;return i.r}function Sht(e){return Math.sqrt(e.value)}function Aht(){var e=null,t=1,n=1,r=by;function i(s){const o=bht();return s.x=t/2,s.y=n/2,e?s.eachBefore(Eoe(e)).eachAfter($L(r,.5,o)).eachBefore(_oe(1)):s.eachBefore(Eoe(Sht)).eachAfter($L(by,1,o)).eachAfter($L(r,s.r/Math.min(t,n),o)).eachBefore(_oe(Math.min(t,n)/(2*s.r))),s}return i.radius=function(s){return arguments.length?(e=fD(s),i):e},i.size=function(s){return arguments.length?(t=+s[0],n=+s[1],i):[t,n]},i.padding=function(s){return arguments.length?(r=typeof s=="function"?s:Pv(+s),i):r},i}function Eoe(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function $L(e,t,n){return function(r){if(i=r.children){var i,s,o=i.length,a=e(r)*t||0,u;if(a)for(s=0;s<o;++s)i[s].r+=a;if(u=Cht(i,n),a)for(s=0;s<o;++s)i[s].r-=a;r.r=u+a}}}function _oe(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function vEe(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function PS(e,t,n,r,i){for(var s=e.children,o,a=-1,u=s.length,l=e.value&&(r-t)/e.value;++a<u;)o=s[a],o.y0=n,o.y1=i,o.x0=t,o.x1=t+=o.value*l}function kht(){var e=1,t=1,n=0,r=!1;function i(o){var a=o.height+1;return o.x0=o.y0=n,o.x1=e,o.y1=t/a,o.eachBefore(s(t,a)),r&&o.eachBefore(vEe),o}function s(o,a){return function(u){u.children&&PS(u,u.x0,o*(u.depth+1)/a,u.x1,o*(u.depth+2)/a);var l=u.x0,c=u.y0,d=u.x1-n,f=u.y1-n;d<l&&(l=d=(l+d)/2),f<c&&(c=f=(c+f)/2),u.x0=l,u.y0=c,u.x1=d,u.y1=f}}return i.round=function(o){return arguments.length?(r=!!o,i):r},i.size=function(o){return arguments.length?(e=+o[0],t=+o[1],i):[e,t]},i.padding=function(o){return arguments.length?(n=+o,i):n},i}var Iht={depth:-1},Toe={},ML={};function Rht(e){return e.id}function Dht(e){return e.parentId}function Coe(){var e=Rht,t=Dht,n;function r(i){var s=Array.from(i),o=e,a=t,u,l,c,d,f,h,p,m,y=new Map;if(n!=null){const v=s.map((E,_)=>Pht(n(E,_,i))),b=v.map(Soe),w=new Set(v).add("");for(const E of b)w.has(E)||(w.add(E),v.push(E),b.push(Soe(E)),s.push(ML));o=(E,_)=>v[_],a=(E,_)=>b[_]}for(c=0,u=s.length;c<u;++c)l=s[c],h=s[c]=new Hx(l),(p=o(l,c,i))!=null&&(p+="")&&(m=h.id=p,y.set(m,y.has(m)?Toe:h)),(p=a(l,c,i))!=null&&(p+="")&&(h.parent=p);for(c=0;c<u;++c)if(h=s[c],p=h.parent){if(f=y.get(p),!f)throw new Error("missing: "+p);if(f===Toe)throw new Error("ambiguous: "+p);f.children?f.children.push(h):f.children=[h],h.parent=f}else{if(d)throw new Error("multiple roots");d=h}if(!d)throw new Error("no root");if(n!=null){for(;d.data===ML&&d.children.length===1;)d=d.children[0],--u;for(let v=s.length-1;v>=0&&(h=s[v],h.data===ML);--v)h.data=null}if(d.parent=Iht,d.eachBefore(function(v){v.depth=v.parent.depth+1,--u}).eachBefore(mEe),d.parent=null,u>0)throw new Error("cycle");return d}return r.id=function(i){return arguments.length?(e=fD(i),r):e},r.parentId=function(i){return arguments.length?(t=fD(i),r):t},r.path=function(i){return arguments.length?(n=fD(i),r):n},r}function Pht(e){e=`${e}`;let t=e.length;return Fj(e,t-1)&&!Fj(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function Soe(e){let t=e.length;if(t<2)return"";for(;--t>1&&!Fj(e,t););return e.slice(0,t)}function Fj(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}function Nht(e,t){return e.parent===t.parent?1:2}function LL(e){var t=e.children;return t?t[0]:e.t}function FL(e){var t=e.children;return t?t[t.length-1]:e.t}function Oht(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function $ht(e){for(var t=0,n=0,r=e.children,i=r.length,s;--i>=0;)s=r[i],s.z+=t,s.m+=t,t+=s.s+(n+=s.c)}function Mht(e,t,n){return e.a.parent===t.parent?e.a:n}function hD(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}hD.prototype=Object.create(Hx.prototype);function Lht(e){for(var t=new hD(e,0),n,r=[t],i,s,o,a;n=r.pop();)if(s=n._.children)for(n.children=new Array(a=s.length),o=a-1;o>=0;--o)r.push(i=n.children[o]=new hD(s[o],o)),i.parent=n;return(t.parent=new hD(null,0)).children=[t],t}function Fht(){var e=Nht,t=1,n=1,r=null;function i(l){var c=Lht(l);if(c.eachAfter(s),c.parent.m=-c.z,c.eachBefore(o),r)l.eachBefore(u);else{var d=l,f=l,h=l;l.eachBefore(function(b){b.x<d.x&&(d=b),b.x>f.x&&(f=b),b.depth>h.depth&&(h=b)});var p=d===f?1:e(d,f)/2,m=p-d.x,y=t/(f.x+p+m),v=n/(h.depth||1);l.eachBefore(function(b){b.x=(b.x+m)*y,b.y=b.depth*v})}return l}function s(l){var c=l.children,d=l.parent.children,f=l.i?d[l.i-1]:null;if(c){$ht(l);var h=(c[0].z+c[c.length-1].z)/2;f?(l.z=f.z+e(l._,f._),l.m=l.z-h):l.z=h}else f&&(l.z=f.z+e(l._,f._));l.parent.A=a(l,f,l.parent.A||d[0])}function o(l){l._.x=l.z+l.parent.m,l.m+=l.parent.m}function a(l,c,d){if(c){for(var f=l,h=l,p=c,m=f.parent.children[0],y=f.m,v=h.m,b=p.m,w=m.m,E;p=FL(p),f=LL(f),p&&f;)m=LL(m),h=FL(h),h.a=l,E=p.z+b-f.z-y+e(p._,f._),E>0&&(Oht(Mht(p,l,d),l,E),y+=E,v+=E),b+=p.m,y+=f.m,w+=m.m,v+=h.m;p&&!FL(h)&&(h.t=p,h.m+=b-v),f&&!LL(m)&&(m.t=f,m.m+=y-w,d=l)}return d}function u(l){l.x*=t,l.y=l.depth*n}return i.separation=function(l){return arguments.length?(e=l,i):e},i.size=function(l){return arguments.length?(r=!1,t=+l[0],n=+l[1],i):r?null:[t,n]},i.nodeSize=function(l){return arguments.length?(r=!0,t=+l[0],n=+l[1],i):r?[t,n]:null},i}function WO(e,t,n,r,i){for(var s=e.children,o,a=-1,u=s.length,l=e.value&&(i-n)/e.value;++a<u;)o=s[a],o.x0=t,o.x1=r,o.y0=n,o.y1=n+=o.value*l}var xEe=(1+Math.sqrt(5))/2;function wEe(e,t,n,r,i,s){for(var o=[],a=t.children,u,l,c=0,d=0,f=a.length,h,p,m=t.value,y,v,b,w,E,_,C;c<f;){h=i-n,p=s-r;do y=a[d++].value;while(!y&&d<f);for(v=b=y,_=Math.max(p/h,h/p)/(m*e),C=y*y*_,E=Math.max(b/C,C/v);d<f;++d){if(y+=l=a[d].value,l<v&&(v=l),l>b&&(b=l),C=y*y*_,w=Math.max(b/C,C/v),w>E){y-=l;break}E=w}o.push(u={value:y,dice:h<p,children:a.slice(c,d)}),u.dice?PS(u,n,r,i,m?r+=p*y/m:s):WO(u,n,r,m?n+=h*y/m:i,s),m-=y,c=d}return o}const EEe=function e(t){function n(r,i,s,o,a){wEe(t,r,i,s,o,a)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(xEe);function Bht(){var e=EEe,t=!1,n=1,r=1,i=[0],s=by,o=by,a=by,u=by,l=by;function c(f){return f.x0=f.y0=0,f.x1=n,f.y1=r,f.eachBefore(d),i=[0],t&&f.eachBefore(vEe),f}function d(f){var h=i[f.depth],p=f.x0+h,m=f.y0+h,y=f.x1-h,v=f.y1-h;y<p&&(p=y=(p+y)/2),v<m&&(m=v=(m+v)/2),f.x0=p,f.y0=m,f.x1=y,f.y1=v,f.children&&(h=i[f.depth+1]=s(f)/2,p+=l(f)-h,m+=o(f)-h,y-=a(f)-h,v-=u(f)-h,y<p&&(p=y=(p+y)/2),v<m&&(m=v=(m+v)/2),e(f,p,m,y,v))}return c.round=function(f){return arguments.length?(t=!!f,c):t},c.size=function(f){return arguments.length?(n=+f[0],r=+f[1],c):[n,r]},c.tile=function(f){return arguments.length?(e=gEe(f),c):e},c.padding=function(f){return arguments.length?c.paddingInner(f).paddingOuter(f):c.paddingInner()},c.paddingInner=function(f){return arguments.length?(s=typeof f=="function"?f:Pv(+f),c):s},c.paddingOuter=function(f){return arguments.length?c.paddingTop(f).paddingRight(f).paddingBottom(f).paddingLeft(f):c.paddingTop()},c.paddingTop=function(f){return arguments.length?(o=typeof f=="function"?f:Pv(+f),c):o},c.paddingRight=function(f){return arguments.length?(a=typeof f=="function"?f:Pv(+f),c):a},c.paddingBottom=function(f){return arguments.length?(u=typeof f=="function"?f:Pv(+f),c):u},c.paddingLeft=function(f){return arguments.length?(l=typeof f=="function"?f:Pv(+f),c):l},c}function jht(e,t,n,r,i){var s=e.children,o,a=s.length,u,l=new Array(a+1);for(l[0]=u=o=0;o<a;++o)l[o+1]=u+=s[o].value;c(0,a,e.value,t,n,r,i);function c(d,f,h,p,m,y,v){if(d>=f-1){var b=s[d];b.x0=p,b.y0=m,b.x1=y,b.y1=v;return}for(var w=l[d],E=h/2+w,_=d+1,C=f-1;_<C;){var S=_+C>>>1;l[S]<E?_=S+1:C=S}E-l[_-1]<l[_]-E&&d+1<_&&--_;var k=l[_]-w,R=h-k;if(y-p>v-m){var N=h?(p*R+y*k)/h:y;c(d,_,k,p,m,N,v),c(_,f,R,N,m,y,v)}else{var O=h?(m*R+v*k)/h:v;c(d,_,k,p,m,y,O),c(_,f,R,p,O,y,v)}}}function zht(e,t,n,r,i){(e.depth&1?WO:PS)(e,t,n,r,i)}const Uht=function e(t){function n(r,i,s,o,a){if((u=r._squarify)&&u.ratio===t)for(var u,l,c,d,f=-1,h,p=u.length,m=r.value;++f<p;){for(l=u[f],c=l.children,d=l.value=0,h=c.length;d<h;++d)l.value+=c[d].value;l.dice?PS(l,i,s,o,m?s+=(a-s)*l.value/m:a):WO(l,i,s,m?i+=(o-i)*l.value/m:o,a),m-=l.value}else r._squarify=u=wEe(t,r,i,s,o,a),u.ratio=t}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(xEe);function _d(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function lg(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const Bj=Symbol("implicit");function GO(){var e=new fse,t=[],n=[],r=Bj;function i(s){let o=e.get(s);if(o===void 0){if(r!==Bj)return r;e.set(s,o=t.push(s)-1)}return n[o%n.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new fse;for(const o of s)e.has(o)||e.set(o,t.push(o)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return GO(t,n).unknown(r)},_d.apply(i,arguments),i}function jj(){var e=GO().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,s,o,a=!1,u=0,l=0,c=.5;delete e.unknown;function d(){var f=t().length,h=i<r,p=h?i:r,m=h?r:i;s=(m-p)/Math.max(1,f-u+l*2),a&&(s=Math.floor(s)),p+=(m-p-s*(f-u))*c,o=s*(1-u),a&&(p=Math.round(p),o=Math.round(o));var y=Tu(f).map(function(v){return p+s*v});return n(h?y.reverse():y)}return e.domain=function(f){return arguments.length?(t(f),d()):t()},e.range=function(f){return arguments.length?([r,i]=f,r=+r,i=+i,d()):[r,i]},e.rangeRound=function(f){return[r,i]=f,r=+r,i=+i,a=!0,d()},e.bandwidth=function(){return o},e.step=function(){return s},e.round=function(f){return arguments.length?(a=!!f,d()):a},e.padding=function(f){return arguments.length?(u=Math.min(1,l=+f),d()):u},e.paddingInner=function(f){return arguments.length?(u=Math.min(1,f),d()):u},e.paddingOuter=function(f){return arguments.length?(l=+f,d()):l},e.align=function(f){return arguments.length?(c=Math.max(0,Math.min(1,f)),d()):c},e.copy=function(){return jj(t(),[r,i]).round(a).paddingInner(u).paddingOuter(l).align(c)},_d.apply(d(),arguments)}function Vht(e){return function(){return e}}function zj(e){return+e}var Aoe=[0,1];function Cu(e){return e}function Uj(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Vht(isNaN(t)?NaN:.5)}function Hht(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function qht(e,t,n){var r=e[0],i=e[1],s=t[0],o=t[1];return i<r?(r=Uj(i,r),s=n(o,s)):(r=Uj(r,i),s=n(s,o)),function(a){return s(r(a))}}function Wht(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),s=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=Uj(e[o],e[o+1]),s[o]=n(t[o],t[o+1]);return function(a){var u=O0(e,a,1,r)-1;return s[u](i[u](a))}}function NS(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function YO(){var e=Aoe,t=Aoe,n=ug,r,i,s,o=Cu,a,u,l;function c(){var f=Math.min(e.length,t.length);return o!==Cu&&(o=Hht(e[0],e[f-1])),a=f>2?Wht:qht,u=l=null,d}function d(f){return f==null||isNaN(f=+f)?s:(u||(u=a(e.map(r),t,n)))(r(o(f)))}return d.invert=function(f){return o(i((l||(l=a(t,e.map(r),Vl)))(f)))},d.domain=function(f){return arguments.length?(e=Array.from(f,zj),c()):e.slice()},d.range=function(f){return arguments.length?(t=Array.from(f),c()):t.slice()},d.rangeRound=function(f){return t=Array.from(f),n=kS,c()},d.clamp=function(f){return arguments.length?(o=f?!0:Cu,c()):o!==Cu},d.interpolate=function(f){return arguments.length?(n=f,c()):n},d.unknown=function(f){return arguments.length?(s=f,d):s},function(f,h){return r=f,i=h,c()}}function _Ee(){return YO()(Cu,Cu)}function TEe(e,t,n,r){var i=$0(e,t,n),s;switch(r=o1(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(s=Swe(i,o))&&(r.precision=s),pW(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=Awe(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=Cwe(i))&&(r.precision=s-(r.type==="%")*2);break}}return UO(r)}function Z1(e){var t=e.domain;return e.ticks=function(n){var r=t();return rj(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return TEe(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,s=r.length-1,o=r[i],a=r[s],u,l,c=10;for(a<o&&(l=o,o=a,a=l,l=i,i=s,s=l);c-- >0;){if(l=ij(o,a,n),l===u)return r[i]=o,r[s]=a,t(r);if(l>0)o=Math.floor(o/l)*l,a=Math.ceil(a/l)*l;else if(l<0)o=Math.ceil(o*l)/l,a=Math.floor(a*l)/l;else break;u=l}return e},e}function KO(){var e=_Ee();return e.copy=function(){return NS(e,KO())},_d.apply(e,arguments),Z1(e)}function CEe(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,zj),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return CEe(e).unknown(t)},e=arguments.length?Array.from(e,zj):[0,1],Z1(n)}function SEe(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],s=e[r],o;return s<i&&(o=n,n=r,r=o,o=i,i=s,s=o),e[n]=t.floor(i),e[r]=t.ceil(s),e}function koe(e){return Math.log(e)}function Ioe(e){return Math.exp(e)}function Ght(e){return-Math.log(-e)}function Yht(e){return-Math.exp(-e)}function Kht(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Xht(e){return e===10?Kht:e===Math.E?Math.exp:t=>Math.pow(e,t)}function Qht(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function Roe(e){return(t,n)=>-e(-t,n)}function _W(e){const t=e(koe,Ioe),n=t.domain;let r=10,i,s;function o(){return i=Qht(r),s=Xht(r),n()[0]<0?(i=Roe(i),s=Roe(s),e(Ght,Yht)):e(koe,Ioe),t}return t.base=function(a){return arguments.length?(r=+a,o()):r},t.domain=function(a){return arguments.length?(n(a),o()):n()},t.ticks=a=>{const u=n();let l=u[0],c=u[u.length-1];const d=c<l;d&&([l,c]=[c,l]);let f=i(l),h=i(c),p,m;const y=a==null?10:+a;let v=[];if(!(r%1)&&h-f<y){if(f=Math.floor(f),h=Math.ceil(h),l>0){for(;f<=h;++f)for(p=1;p<r;++p)if(m=f<0?p/s(-f):p*s(f),!(m<l)){if(m>c)break;v.push(m)}}else for(;f<=h;++f)for(p=r-1;p>=1;--p)if(m=f>0?p/s(-f):p*s(f),!(m<l)){if(m>c)break;v.push(m)}v.length*2<y&&(v=rj(l,c,y))}else v=rj(f,h,Math.min(h-f,y)).map(s);return d?v.reverse():v},t.tickFormat=(a,u)=>{if(a==null&&(a=10),u==null&&(u=r===10?"s":","),typeof u!="function"&&(!(r%1)&&(u=o1(u)).precision==null&&(u.trim=!0),u=UO(u)),a===1/0)return u;const l=Math.max(1,r*a/t.ticks().length);return c=>{let d=c/s(Math.round(i(c)));return d*r<r-.5&&(d*=r),d<=l?u(c):""}},t.nice=()=>n(SEe(n(),{floor:a=>s(Math.floor(i(a))),ceil:a=>s(Math.ceil(i(a)))})),t}function AEe(){const e=_W(YO()).domain([1,10]);return e.copy=()=>NS(e,AEe()).base(e.base()),_d.apply(e,arguments),e}function Doe(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function Poe(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function TW(e){var t=1,n=e(Doe(t),Poe(t));return n.constant=function(r){return arguments.length?e(Doe(t=+r),Poe(t)):t},Z1(n)}function kEe(){var e=TW(YO());return e.copy=function(){return NS(e,kEe()).constant(e.constant())},_d.apply(e,arguments)}function Noe(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Jht(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Zht(e){return e<0?-e*e:e*e}function CW(e){var t=e(Cu,Cu),n=1;function r(){return n===1?e(Cu,Cu):n===.5?e(Jht,Zht):e(Noe(n),Noe(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},Z1(t)}function SW(){var e=CW(YO());return e.copy=function(){return NS(e,SW()).exponent(e.exponent())},_d.apply(e,arguments),e}function ept(){return SW.apply(null,arguments).exponent(.5)}function IEe(){var e=[],t=[],n=[],r;function i(){var o=0,a=Math.max(1,t.length);for(n=new Array(a-1);++o<a;)n[o-1]=Txe(e,o/a);return s}function s(o){return o==null||isNaN(o=+o)?r:t[O0(n,o)]}return s.invertExtent=function(o){var a=t.indexOf(o);return a<0?[NaN,NaN]:[a>0?n[a-1]:e[0],a<n.length?n[a]:e[e.length-1]]},s.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let a of o)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(dp),i()},s.range=function(o){return arguments.length?(t=Array.from(o),i()):t.slice()},s.unknown=function(o){return arguments.length?(r=o,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return IEe().domain(e).range(t).unknown(r)},_d.apply(s,arguments)}function u2(){var e=0,t=1,n=1,r=[.5],i=[0,1],s;function o(u){return u!=null&&u<=u?i[O0(r,u,0,n)]:s}function a(){var u=-1;for(r=new Array(n);++u<n;)r[u]=((u+1)*t-(u-n)*e)/(n+1);return o}return o.domain=function(u){return arguments.length?([e,t]=u,e=+e,t=+t,a()):[e,t]},o.range=function(u){return arguments.length?(n=(i=Array.from(u)).length-1,a()):i.slice()},o.invertExtent=function(u){var l=i.indexOf(u);return l<0?[NaN,NaN]:l<1?[e,r[0]]:l>=n?[r[n-1],t]:[r[l-1],r[l]]},o.unknown=function(u){return arguments.length&&(s=u),o},o.thresholds=function(){return r.slice()},o.copy=function(){return u2().domain([e,t]).range(i).unknown(s)},_d.apply(Z1(o),arguments)}function REe(){var e=[.5],t=[0,1],n,r=1;function i(s){return s!=null&&s<=s?t[O0(e,s,0,r)]:n}return i.domain=function(s){return arguments.length?(e=Array.from(s),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(s){return arguments.length?(t=Array.from(s),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(s){var o=t.indexOf(s);return[e[o-1],e[o]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return REe().domain(e).range(t).unknown(n)},_d.apply(i,arguments)}const BL=new Date,jL=new Date;function Ds(e,t,n,r){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(e(s=new Date(+s)),s),i.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),i.round=s=>{const o=i(s),a=i.ceil(s);return s-o<a-s?o:a},i.offset=(s,o)=>(t(s=new Date(+s),o==null?1:Math.floor(o)),s),i.range=(s,o,a)=>{const u=[];if(s=i.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return u;let l;do u.push(l=new Date(+s)),t(s,a),e(s);while(l<s&&s<o);return u},i.filter=s=>Ds(o=>{if(o>=o)for(;e(o),!s(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;t(o,-1),!s(o););else for(;--a>=0;)for(;t(o,1),!s(o););}),n&&(i.count=(s,o)=>(BL.setTime(+s),jL.setTime(+o),e(BL),e(jL),Math.floor(n(BL,jL))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?o=>r(o)%s===0:o=>i.count(0,o)%s===0):i)),i}const qx=Ds(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);qx.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Ds(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):qx);qx.range;const tp=1e3,Gl=tp*60,np=Gl*60,Pp=np*24,AW=Pp*7,Ooe=Pp*30,zL=Pp*365,rp=Ds(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*tp)},(e,t)=>(t-e)/tp,e=>e.getUTCSeconds());rp.range;const XO=Ds(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*tp)},(e,t)=>{e.setTime(+e+t*Gl)},(e,t)=>(t-e)/Gl,e=>e.getMinutes());XO.range;const QO=Ds(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Gl)},(e,t)=>(t-e)/Gl,e=>e.getUTCMinutes());QO.range;const JO=Ds(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*tp-e.getMinutes()*Gl)},(e,t)=>{e.setTime(+e+t*np)},(e,t)=>(t-e)/np,e=>e.getHours());JO.range;const ZO=Ds(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*np)},(e,t)=>(t-e)/np,e=>e.getUTCHours());ZO.range;const hp=Ds(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Gl)/Pp,e=>e.getDate()-1);hp.range;const m0=Ds(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Pp,e=>e.getUTCDate()-1);m0.range;const DEe=Ds(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Pp,e=>Math.floor(e/Pp));DEe.range;function eb(e){return Ds(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Gl)/AW)}const uE=eb(0),X3=eb(1),tpt=eb(2),npt=eb(3),Wx=eb(4),rpt=eb(5),ipt=eb(6);uE.range;X3.range;tpt.range;npt.range;Wx.range;rpt.range;ipt.range;function tb(e){return Ds(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/AW)}const lE=tb(0),Q3=tb(1),spt=tb(2),opt=tb(3),Gx=tb(4),apt=tb(5),upt=tb(6);lE.range;Q3.range;spt.range;opt.range;Gx.range;apt.range;upt.range;const aC=Ds(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());aC.range;const uC=Ds(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());uC.range;const zf=Ds(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());zf.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Ds(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});zf.range;const Uf=Ds(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Uf.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Ds(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Uf.range;function PEe(e,t,n,r,i,s){const o=[[rp,1,tp],[rp,5,5*tp],[rp,15,15*tp],[rp,30,30*tp],[s,1,Gl],[s,5,5*Gl],[s,15,15*Gl],[s,30,30*Gl],[i,1,np],[i,3,3*np],[i,6,6*np],[i,12,12*np],[r,1,Pp],[r,2,2*Pp],[n,1,AW],[t,1,Ooe],[t,3,3*Ooe],[e,1,zL]];function a(l,c,d){const f=c<l;f&&([l,c]=[c,l]);const h=d&&typeof d.range=="function"?d:u(l,c,d),p=h?h.range(l,+c+1):[];return f?p.reverse():p}function u(l,c,d){const f=Math.abs(c-l)/d,h=sE(([,,y])=>y).right(o,f);if(h===o.length)return e.every($0(l/zL,c/zL,d));if(h===0)return qx.every(Math.max($0(l,c,d),1));const[p,m]=o[f/o[h-1][2]<o[h][2]/f?h-1:h];return p.every(m)}return[a,u]}const[lpt,cpt]=PEe(Uf,uC,lE,DEe,ZO,QO),[dpt,fpt]=PEe(zf,aC,uE,hp,JO,XO);function UL(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function VL(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function T_(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function NEe(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,s=e.days,o=e.shortDays,a=e.months,u=e.shortMonths,l=C_(i),c=S_(i),d=C_(s),f=S_(s),h=C_(o),p=S_(o),m=C_(a),y=S_(a),v=C_(u),b=S_(u),w={a:J,A:K,b:Z,B:U,c:null,d:joe,e:joe,f:$pt,g:qpt,G:Gpt,H:Ppt,I:Npt,j:Opt,L:OEe,m:Mpt,M:Lpt,p:L,q:Y,Q:Voe,s:Hoe,S:Fpt,u:Bpt,U:jpt,V:zpt,w:Upt,W:Vpt,x:null,X:null,y:Hpt,Y:Wpt,Z:Ypt,"%":Uoe},E={a:j,A:G,b:X,B:ne,c:null,d:zoe,e:zoe,f:Jpt,g:umt,G:cmt,H:Kpt,I:Xpt,j:Qpt,L:MEe,m:Zpt,M:emt,p:pe,q:de,Q:Voe,s:Hoe,S:tmt,u:nmt,U:rmt,V:imt,w:smt,W:omt,x:null,X:null,y:amt,Y:lmt,Z:dmt,"%":Uoe},_={a:N,A:O,b:F,B:$,c:z,d:Foe,e:Foe,f:kpt,g:Loe,G:Moe,H:Boe,I:Boe,j:Tpt,L:Apt,m:_pt,M:Cpt,p:R,q:Ept,Q:Rpt,s:Dpt,S:Spt,u:ypt,U:bpt,V:vpt,w:gpt,W:xpt,x:q,X:W,y:Loe,Y:Moe,Z:wpt,"%":Ipt};w.x=C(n,w),w.X=C(r,w),w.c=C(t,w),E.x=C(n,E),E.X=C(r,E),E.c=C(t,E);function C(xe,Ce){return function(ue){var se=[],me=-1,be=0,Le=xe.length,Ue,Ne,je;for(ue instanceof Date||(ue=new Date(+ue));++me<Le;)xe.charCodeAt(me)===37&&(se.push(xe.slice(be,me)),(Ne=$oe[Ue=xe.charAt(++me)])!=null?Ue=xe.charAt(++me):Ne=Ue==="e"?" ":"0",(je=Ce[Ue])&&(Ue=je(ue,Ne)),se.push(Ue),be=me+1);return se.push(xe.slice(be,me)),se.join("")}}function S(xe,Ce){return function(ue){var se=T_(1900,void 0,1),me=k(se,xe,ue+="",0),be,Le;if(me!=ue.length)return null;if("Q"in se)return new Date(se.Q);if("s"in se)return new Date(se.s*1e3+("L"in se?se.L:0));if(Ce&&!("Z"in se)&&(se.Z=0),"p"in se&&(se.H=se.H%12+se.p*12),se.m===void 0&&(se.m="q"in se?se.q:0),"V"in se){if(se.V<1||se.V>53)return null;"w"in se||(se.w=1),"Z"in se?(be=VL(T_(se.y,0,1)),Le=be.getUTCDay(),be=Le>4||Le===0?Q3.ceil(be):Q3(be),be=m0.offset(be,(se.V-1)*7),se.y=be.getUTCFullYear(),se.m=be.getUTCMonth(),se.d=be.getUTCDate()+(se.w+6)%7):(be=UL(T_(se.y,0,1)),Le=be.getDay(),be=Le>4||Le===0?X3.ceil(be):X3(be),be=hp.offset(be,(se.V-1)*7),se.y=be.getFullYear(),se.m=be.getMonth(),se.d=be.getDate()+(se.w+6)%7)}else("W"in se||"U"in se)&&("w"in se||(se.w="u"in se?se.u%7:"W"in se?1:0),Le="Z"in se?VL(T_(se.y,0,1)).getUTCDay():UL(T_(se.y,0,1)).getDay(),se.m=0,se.d="W"in se?(se.w+6)%7+se.W*7-(Le+5)%7:se.w+se.U*7-(Le+6)%7);return"Z"in se?(se.H+=se.Z/100|0,se.M+=se.Z%100,VL(se)):UL(se)}}function k(xe,Ce,ue,se){for(var me=0,be=Ce.length,Le=ue.length,Ue,Ne;me<be;){if(se>=Le)return-1;if(Ue=Ce.charCodeAt(me++),Ue===37){if(Ue=Ce.charAt(me++),Ne=_[Ue in $oe?Ce.charAt(me++):Ue],!Ne||(se=Ne(xe,ue,se))<0)return-1}else if(Ue!=ue.charCodeAt(se++))return-1}return se}function R(xe,Ce,ue){var se=l.exec(Ce.slice(ue));return se?(xe.p=c.get(se[0].toLowerCase()),ue+se[0].length):-1}function N(xe,Ce,ue){var se=h.exec(Ce.slice(ue));return se?(xe.w=p.get(se[0].toLowerCase()),ue+se[0].length):-1}function O(xe,Ce,ue){var se=d.exec(Ce.slice(ue));return se?(xe.w=f.get(se[0].toLowerCase()),ue+se[0].length):-1}function F(xe,Ce,ue){var se=v.exec(Ce.slice(ue));return se?(xe.m=b.get(se[0].toLowerCase()),ue+se[0].length):-1}function $(xe,Ce,ue){var se=m.exec(Ce.slice(ue));return se?(xe.m=y.get(se[0].toLowerCase()),ue+se[0].length):-1}function z(xe,Ce,ue){return k(xe,t,Ce,ue)}function q(xe,Ce,ue){return k(xe,n,Ce,ue)}function W(xe,Ce,ue){return k(xe,r,Ce,ue)}function J(xe){return o[xe.getDay()]}function K(xe){return s[xe.getDay()]}function Z(xe){return u[xe.getMonth()]}function U(xe){return a[xe.getMonth()]}function L(xe){return i[+(xe.getHours()>=12)]}function Y(xe){return 1+~~(xe.getMonth()/3)}function j(xe){return o[xe.getUTCDay()]}function G(xe){return s[xe.getUTCDay()]}function X(xe){return u[xe.getUTCMonth()]}function ne(xe){return a[xe.getUTCMonth()]}function pe(xe){return i[+(xe.getUTCHours()>=12)]}function de(xe){return 1+~~(xe.getUTCMonth()/3)}return{format:function(xe){var Ce=C(xe+="",w);return Ce.toString=function(){return xe},Ce},parse:function(xe){var Ce=S(xe+="",!1);return Ce.toString=function(){return xe},Ce},utcFormat:function(xe){var Ce=C(xe+="",E);return Ce.toString=function(){return xe},Ce},utcParse:function(xe){var Ce=S(xe+="",!0);return Ce.toString=function(){return xe},Ce}}}var $oe={"-":"",_:" ",0:"0"},oo=/^\s*\d+/,hpt=/^%/,ppt=/[\\^$*+?|[\]().{}]/g;function hr(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(t)+i:i)}function mpt(e){return e.replace(ppt,"\\$&")}function C_(e){return new RegExp("^(?:"+e.map(mpt).join("|")+")","i")}function S_(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function gpt(e,t,n){var r=oo.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function ypt(e,t,n){var r=oo.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function bpt(e,t,n){var r=oo.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function vpt(e,t,n){var r=oo.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function xpt(e,t,n){var r=oo.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function Moe(e,t,n){var r=oo.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function Loe(e,t,n){var r=oo.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function wpt(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Ept(e,t,n){var r=oo.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function _pt(e,t,n){var r=oo.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function Foe(e,t,n){var r=oo.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function Tpt(e,t,n){var r=oo.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function Boe(e,t,n){var r=oo.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function Cpt(e,t,n){var r=oo.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function Spt(e,t,n){var r=oo.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function Apt(e,t,n){var r=oo.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function kpt(e,t,n){var r=oo.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Ipt(e,t,n){var r=hpt.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function Rpt(e,t,n){var r=oo.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function Dpt(e,t,n){var r=oo.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function joe(e,t){return hr(e.getDate(),t,2)}function Ppt(e,t){return hr(e.getHours(),t,2)}function Npt(e,t){return hr(e.getHours()%12||12,t,2)}function Opt(e,t){return hr(1+hp.count(zf(e),e),t,3)}function OEe(e,t){return hr(e.getMilliseconds(),t,3)}function $pt(e,t){return OEe(e,t)+"000"}function Mpt(e,t){return hr(e.getMonth()+1,t,2)}function Lpt(e,t){return hr(e.getMinutes(),t,2)}function Fpt(e,t){return hr(e.getSeconds(),t,2)}function Bpt(e){var t=e.getDay();return t===0?7:t}function jpt(e,t){return hr(uE.count(zf(e)-1,e),t,2)}function $Ee(e){var t=e.getDay();return t>=4||t===0?Wx(e):Wx.ceil(e)}function zpt(e,t){return e=$Ee(e),hr(Wx.count(zf(e),e)+(zf(e).getDay()===4),t,2)}function Upt(e){return e.getDay()}function Vpt(e,t){return hr(X3.count(zf(e)-1,e),t,2)}function Hpt(e,t){return hr(e.getFullYear()%100,t,2)}function qpt(e,t){return e=$Ee(e),hr(e.getFullYear()%100,t,2)}function Wpt(e,t){return hr(e.getFullYear()%1e4,t,4)}function Gpt(e,t){var n=e.getDay();return e=n>=4||n===0?Wx(e):Wx.ceil(e),hr(e.getFullYear()%1e4,t,4)}function Ypt(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+hr(t/60|0,"0",2)+hr(t%60,"0",2)}function zoe(e,t){return hr(e.getUTCDate(),t,2)}function Kpt(e,t){return hr(e.getUTCHours(),t,2)}function Xpt(e,t){return hr(e.getUTCHours()%12||12,t,2)}function Qpt(e,t){return hr(1+m0.count(Uf(e),e),t,3)}function MEe(e,t){return hr(e.getUTCMilliseconds(),t,3)}function Jpt(e,t){return MEe(e,t)+"000"}function Zpt(e,t){return hr(e.getUTCMonth()+1,t,2)}function emt(e,t){return hr(e.getUTCMinutes(),t,2)}function tmt(e,t){return hr(e.getUTCSeconds(),t,2)}function nmt(e){var t=e.getUTCDay();return t===0?7:t}function rmt(e,t){return hr(lE.count(Uf(e)-1,e),t,2)}function LEe(e){var t=e.getUTCDay();return t>=4||t===0?Gx(e):Gx.ceil(e)}function imt(e,t){return e=LEe(e),hr(Gx.count(Uf(e),e)+(Uf(e).getUTCDay()===4),t,2)}function smt(e){return e.getUTCDay()}function omt(e,t){return hr(Q3.count(Uf(e)-1,e),t,2)}function amt(e,t){return hr(e.getUTCFullYear()%100,t,2)}function umt(e,t){return e=LEe(e),hr(e.getUTCFullYear()%100,t,2)}function lmt(e,t){return hr(e.getUTCFullYear()%1e4,t,4)}function cmt(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Gx(e):Gx.ceil(e),hr(e.getUTCFullYear()%1e4,t,4)}function dmt(){return"+0000"}function Uoe(){return"%"}function Voe(e){return+e}function Hoe(e){return Math.floor(+e/1e3)}var lv,kW,FEe,IW,BEe;fmt({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function fmt(e){return lv=NEe(e),kW=lv.format,FEe=lv.parse,IW=lv.utcFormat,BEe=lv.utcParse,lv}function hmt(e){return new Date(e)}function pmt(e){return e instanceof Date?+e:+new Date(+e)}function RW(e,t,n,r,i,s,o,a,u,l){var c=_Ee(),d=c.invert,f=c.domain,h=l(".%L"),p=l(":%S"),m=l("%I:%M"),y=l("%I %p"),v=l("%a %d"),b=l("%b %d"),w=l("%B"),E=l("%Y");function _(C){return(u(C)<C?h:a(C)<C?p:o(C)<C?m:s(C)<C?y:r(C)<C?i(C)<C?v:b:n(C)<C?w:E)(C)}return c.invert=function(C){return new Date(d(C))},c.domain=function(C){return arguments.length?f(Array.from(C,pmt)):f().map(hmt)},c.ticks=function(C){var S=f();return e(S[0],S[S.length-1],C??10)},c.tickFormat=function(C,S){return S==null?_:l(S)},c.nice=function(C){var S=f();return(!C||typeof C.range!="function")&&(C=t(S[0],S[S.length-1],C??10)),C?f(SEe(S,C)):c},c.copy=function(){return NS(c,RW(e,t,n,r,i,s,o,a,u,l))},c}function mmt(){return _d.apply(RW(dpt,fpt,zf,aC,uE,hp,JO,XO,rp,kW).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function gmt(){return _d.apply(RW(lpt,cpt,Uf,uC,lE,m0,ZO,QO,rp,IW).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function e6(){var e=0,t=1,n,r,i,s,o=Cu,a=!1,u;function l(d){return d==null||isNaN(d=+d)?u:o(i===0?.5:(d=(s(d)-n)*i,a?Math.max(0,Math.min(1,d)):d))}l.domain=function(d){return arguments.length?([e,t]=d,n=s(e=+e),r=s(t=+t),i=n===r?0:1/(r-n),l):[e,t]},l.clamp=function(d){return arguments.length?(a=!!d,l):a},l.interpolator=function(d){return arguments.length?(o=d,l):o};function c(d){return function(f){var h,p;return arguments.length?([h,p]=f,o=d(h,p),l):[o(0),o(1)]}}return l.range=c(ug),l.rangeRound=c(kS),l.unknown=function(d){return arguments.length?(u=d,l):u},function(d){return s=d,n=d(e),r=d(t),i=n===r?0:1/(r-n),l}}function cg(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function DW(){var e=Z1(e6()(Cu));return e.copy=function(){return cg(e,DW())},lg.apply(e,arguments)}function jEe(){var e=_W(e6()).domain([1,10]);return e.copy=function(){return cg(e,jEe()).base(e.base())},lg.apply(e,arguments)}function zEe(){var e=TW(e6());return e.copy=function(){return cg(e,zEe()).constant(e.constant())},lg.apply(e,arguments)}function PW(){var e=CW(e6());return e.copy=function(){return cg(e,PW()).exponent(e.exponent())},lg.apply(e,arguments)}function ymt(){return PW.apply(null,arguments).exponent(.5)}function t6(){var e=0,t=.5,n=1,r=1,i,s,o,a,u,l=Cu,c,d=!1,f;function h(m){return isNaN(m=+m)?f:(m=.5+((m=+c(m))-s)*(r*m<r*s?a:u),l(d?Math.max(0,Math.min(1,m)):m))}h.domain=function(m){return arguments.length?([e,t,n]=m,i=c(e=+e),s=c(t=+t),o=c(n=+n),a=i===s?0:.5/(s-i),u=s===o?0:.5/(o-s),r=s<i?-1:1,h):[e,t,n]},h.clamp=function(m){return arguments.length?(d=!!m,h):d},h.interpolator=function(m){return arguments.length?(l=m,h):l};function p(m){return function(y){var v,b,w;return arguments.length?([v,b,w]=y,l=sW(m,[v,b,w]),h):[l(0),l(.5),l(1)]}}return h.range=p(ug),h.rangeRound=p(kS),h.unknown=function(m){return arguments.length?(f=m,h):f},function(m){return c=m,i=m(e),s=m(t),o=m(n),a=i===s?0:.5/(s-i),u=s===o?0:.5/(o-s),r=s<i?-1:1,h}}function UEe(){var e=Z1(t6()(Cu));return e.copy=function(){return cg(e,UEe())},lg.apply(e,arguments)}function VEe(){var e=_W(t6()).domain([.1,1,10]);return e.copy=function(){return cg(e,VEe()).base(e.base())},lg.apply(e,arguments)}function HEe(){var e=TW(t6());return e.copy=function(){return cg(e,HEe()).constant(e.constant())},lg.apply(e,arguments)}function NW(){var e=CW(t6());return e.copy=function(){return cg(e,NW()).exponent(e.exponent())},lg.apply(e,arguments)}function bmt(){return NW.apply(null,arguments).exponent(.5)}function Fo(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const vmt=Fo("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),xmt=Fo("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),wmt=Fo("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),Emt=Fo("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),_mt=Fo("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),Tmt=Fo("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),Cmt=Fo("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),Smt=Fo("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),Amt=Fo("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),kmt=Fo("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),OW=e=>nwe(e[e.length-1]);var Imt=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(Fo);const Rmt=OW(Imt);var Dmt=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(Fo);const Pmt=OW(Dmt);var Nmt=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(Fo);const Omt=OW(Nmt);function $mt(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-e*(35.34-e*(2381.73-e*(6402.7-e*(7024.72-e*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+e*(170.73+e*(52.82-e*(131.46-e*(176.58-e*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+e*(442.36-e*(2482.43-e*(6167.24-e*(6614.94-e*2475.67)))))))+")"}var Mmt=iW(L0(-100,.75,.35),L0(80,1.5,.8)),Lmt=iW(L0(260,.75,.35),L0(80,1.5,.8));L0();function Fmt(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+e*(1172.33-e*(10793.56-e*(33300.12-e*(38394.49-e*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+e*(557.33+e*(1225.33-e*(3574.96-e*(1073.77+e*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+e*(3211.1-e*(15327.97-e*(27814-e*(22569.18-e*6838.66)))))))+")"}function n6(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}const Bmt=n6(Fo("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));n6(Fo("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf"));var jmt=n6(Fo("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),zmt=n6(Fo("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function Er(e){return function(){return e}}const qoe=Math.abs,Xo=Math.atan2,Ug=Math.cos,Umt=Math.max,HL=Math.min,qd=Math.sin,Dy=Math.sqrt,Jo=1e-12,Yx=Math.PI,J3=Yx/2,qEe=2*Yx;function Vmt(e){return e>1?0:e<-1?Yx:Math.acos(e)}function Woe(e){return e>=1?J3:e<=-1?-J3:Math.asin(e)}function r6(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new lW(t)}function Hmt(e){return e.innerRadius}function qmt(e){return e.outerRadius}function Wmt(e){return e.startAngle}function Gmt(e){return e.endAngle}function Ymt(e){return e&&e.padAngle}function Kmt(e,t,n,r,i,s,o,a){var u=n-e,l=r-t,c=o-i,d=a-s,f=d*u-c*l;if(!(f*f<Jo))return f=(c*(t-s)-d*(e-i))/f,[e+f*u,t+f*l]}function yI(e,t,n,r,i,s,o){var a=e-n,u=t-r,l=(o?s:-s)/Dy(a*a+u*u),c=l*u,d=-l*a,f=e+c,h=t+d,p=n+c,m=r+d,y=(f+p)/2,v=(h+m)/2,b=p-f,w=m-h,E=b*b+w*w,_=i-s,C=f*m-p*h,S=(w<0?-1:1)*Dy(Umt(0,_*_*E-C*C)),k=(C*w-b*S)/E,R=(-C*b-w*S)/E,N=(C*w+b*S)/E,O=(-C*b+w*S)/E,F=k-y,$=R-v,z=N-y,q=O-v;return F*F+$*$>z*z+q*q&&(k=N,R=O),{cx:k,cy:R,x01:-c,y01:-d,x11:k*(i/_-1),y11:R*(i/_-1)}}function Xmt(){var e=Hmt,t=qmt,n=Er(0),r=null,i=Wmt,s=Gmt,o=Ymt,a=null,u=r6(l);function l(){var c,d,f=+e.apply(this,arguments),h=+t.apply(this,arguments),p=i.apply(this,arguments)-J3,m=s.apply(this,arguments)-J3,y=qoe(m-p),v=m>p;if(a||(a=c=u()),h<f&&(d=h,h=f,f=d),!(h>Jo))a.moveTo(0,0);else if(y>qEe-Jo)a.moveTo(h*Ug(p),h*qd(p)),a.arc(0,0,h,p,m,!v),f>Jo&&(a.moveTo(f*Ug(m),f*qd(m)),a.arc(0,0,f,m,p,v));else{var b=p,w=m,E=p,_=m,C=y,S=y,k=o.apply(this,arguments)/2,R=k>Jo&&(r?+r.apply(this,arguments):Dy(f*f+h*h)),N=HL(qoe(h-f)/2,+n.apply(this,arguments)),O=N,F=N,$,z;if(R>Jo){var q=Woe(R/f*qd(k)),W=Woe(R/h*qd(k));(C-=q*2)>Jo?(q*=v?1:-1,E+=q,_-=q):(C=0,E=_=(p+m)/2),(S-=W*2)>Jo?(W*=v?1:-1,b+=W,w-=W):(S=0,b=w=(p+m)/2)}var J=h*Ug(b),K=h*qd(b),Z=f*Ug(_),U=f*qd(_);if(N>Jo){var L=h*Ug(w),Y=h*qd(w),j=f*Ug(E),G=f*qd(E),X;if(y<Yx)if(X=Kmt(J,K,j,G,L,Y,Z,U)){var ne=J-X[0],pe=K-X[1],de=L-X[0],xe=Y-X[1],Ce=1/qd(Vmt((ne*de+pe*xe)/(Dy(ne*ne+pe*pe)*Dy(de*de+xe*xe)))/2),ue=Dy(X[0]*X[0]+X[1]*X[1]);O=HL(N,(f-ue)/(Ce-1)),F=HL(N,(h-ue)/(Ce+1))}else O=F=0}S>Jo?F>Jo?($=yI(j,G,J,K,h,F,v),z=yI(L,Y,Z,U,h,F,v),a.moveTo($.cx+$.x01,$.cy+$.y01),F<N?a.arc($.cx,$.cy,F,Xo($.y01,$.x01),Xo(z.y01,z.x01),!v):(a.arc($.cx,$.cy,F,Xo($.y01,$.x01),Xo($.y11,$.x11),!v),a.arc(0,0,h,Xo($.cy+$.y11,$.cx+$.x11),Xo(z.cy+z.y11,z.cx+z.x11),!v),a.arc(z.cx,z.cy,F,Xo(z.y11,z.x11),Xo(z.y01,z.x01),!v))):(a.moveTo(J,K),a.arc(0,0,h,b,w,!v)):a.moveTo(J,K),!(f>Jo)||!(C>Jo)?a.lineTo(Z,U):O>Jo?($=yI(Z,U,L,Y,f,-O,v),z=yI(J,K,j,G,f,-O,v),a.lineTo($.cx+$.x01,$.cy+$.y01),O<N?a.arc($.cx,$.cy,O,Xo($.y01,$.x01),Xo(z.y01,z.x01),!v):(a.arc($.cx,$.cy,O,Xo($.y01,$.x01),Xo($.y11,$.x11),!v),a.arc(0,0,f,Xo($.cy+$.y11,$.cx+$.x11),Xo(z.cy+z.y11,z.cx+z.x11),v),a.arc(z.cx,z.cy,O,Xo(z.y11,z.x11),Xo(z.y01,z.x01),!v))):a.arc(0,0,f,_,E,v)}if(a.closePath(),c)return a=null,c+""||null}return l.centroid=function(){var c=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,d=(+i.apply(this,arguments)+ +s.apply(this,arguments))/2-Yx/2;return[Ug(d)*c,qd(d)*c]},l.innerRadius=function(c){return arguments.length?(e=typeof c=="function"?c:Er(+c),l):e},l.outerRadius=function(c){return arguments.length?(t=typeof c=="function"?c:Er(+c),l):t},l.cornerRadius=function(c){return arguments.length?(n=typeof c=="function"?c:Er(+c),l):n},l.padRadius=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:Er(+c),l):r},l.startAngle=function(c){return arguments.length?(i=typeof c=="function"?c:Er(+c),l):i},l.endAngle=function(c){return arguments.length?(s=typeof c=="function"?c:Er(+c),l):s},l.padAngle=function(c){return arguments.length?(o=typeof c=="function"?c:Er(+c),l):o},l.context=function(c){return arguments.length?(a=c??null,l):a},l}function WEe(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function GEe(e){this._context=e}GEe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function $W(e){return new GEe(e)}function YEe(e){return e[0]}function KEe(e){return e[1]}function XEe(e,t){var n=Er(!0),r=null,i=$W,s=null,o=r6(a);e=typeof e=="function"?e:e===void 0?YEe:Er(e),t=typeof t=="function"?t:t===void 0?KEe:Er(t);function a(u){var l,c=(u=WEe(u)).length,d,f=!1,h;for(r==null&&(s=i(h=o())),l=0;l<=c;++l)!(l<c&&n(d=u[l],l,u))===f&&((f=!f)?s.lineStart():s.lineEnd()),f&&s.point(+e(d,l,u),+t(d,l,u));if(h)return s=null,h+""||null}return a.x=function(u){return arguments.length?(e=typeof u=="function"?u:Er(+u),a):e},a.y=function(u){return arguments.length?(t=typeof u=="function"?u:Er(+u),a):t},a.defined=function(u){return arguments.length?(n=typeof u=="function"?u:Er(!!u),a):n},a.curve=function(u){return arguments.length?(i=u,r!=null&&(s=i(r)),a):i},a.context=function(u){return arguments.length?(u==null?r=s=null:s=i(r=u),a):r},a}function QEe(e,t,n){var r=null,i=Er(!0),s=null,o=$W,a=null,u=r6(l);e=typeof e=="function"?e:e===void 0?YEe:Er(+e),t=typeof t=="function"?t:Er(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?KEe:Er(+n);function l(d){var f,h,p,m=(d=WEe(d)).length,y,v=!1,b,w=new Array(m),E=new Array(m);for(s==null&&(a=o(b=u())),f=0;f<=m;++f){if(!(f<m&&i(y=d[f],f,d))===v)if(v=!v)h=f,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),p=f-1;p>=h;--p)a.point(w[p],E[p]);a.lineEnd(),a.areaEnd()}v&&(w[f]=+e(y,f,d),E[f]=+t(y,f,d),a.point(r?+r(y,f,d):w[f],n?+n(y,f,d):E[f]))}if(b)return a=null,b+""||null}function c(){return XEe().defined(i).curve(o).context(s)}return l.x=function(d){return arguments.length?(e=typeof d=="function"?d:Er(+d),r=null,l):e},l.x0=function(d){return arguments.length?(e=typeof d=="function"?d:Er(+d),l):e},l.x1=function(d){return arguments.length?(r=d==null?null:typeof d=="function"?d:Er(+d),l):r},l.y=function(d){return arguments.length?(t=typeof d=="function"?d:Er(+d),n=null,l):t},l.y0=function(d){return arguments.length?(t=typeof d=="function"?d:Er(+d),l):t},l.y1=function(d){return arguments.length?(n=d==null?null:typeof d=="function"?d:Er(+d),l):n},l.lineX0=l.lineY0=function(){return c().x(e).y(t)},l.lineY1=function(){return c().x(e).y(n)},l.lineX1=function(){return c().x(r).y(t)},l.defined=function(d){return arguments.length?(i=typeof d=="function"?d:Er(!!d),l):i},l.curve=function(d){return arguments.length?(o=d,s!=null&&(a=o(s)),l):o},l.context=function(d){return arguments.length?(d==null?s=a=null:a=o(s=d),l):s},l}const Qmt={draw(e,t){const n=Dy(t/Yx);e.moveTo(n,0),e.arc(0,0,n,0,qEe)}};function Jmt(e,t){let n=null,r=r6(i);e=typeof e=="function"?e:Er(e||Qmt),t=typeof t=="function"?t:Er(t===void 0?64:+t);function i(){let s;if(n||(n=s=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(e=typeof s=="function"?s:Er(s),i):e},i.size=function(s){return arguments.length?(t=typeof s=="function"?s:Er(+s),i):t},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function F0(){}function Z3(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function i6(e){this._context=e}i6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Z3(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Z3(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Zmt(e){return new i6(e)}function JEe(e){this._context=e}JEe.prototype={areaStart:F0,areaEnd:F0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Z3(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function e0t(e){return new JEe(e)}function ZEe(e){this._context=e}ZEe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Z3(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function t0t(e){return new ZEe(e)}function e_e(e,t){this._basis=new i6(e),this._beta=t}e_e.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],s=e[n]-r,o=t[n]-i,a=-1,u;++a<=n;)u=a/n,this._basis.point(this._beta*e[a]+(1-this._beta)*(r+u*s),this._beta*t[a]+(1-this._beta)*(i+u*o));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const n0t=function e(t){function n(r){return t===1?new i6(r):new e_e(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function eN(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function MW(e,t){this._context=e,this._k=(1-t)/6}MW.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:eN(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:eN(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const r0t=function e(t){function n(r){return new MW(r,t)}return n.tension=function(r){return e(+r)},n}(0);function LW(e,t){this._context=e,this._k=(1-t)/6}LW.prototype={areaStart:F0,areaEnd:F0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:eN(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const i0t=function e(t){function n(r){return new LW(r,t)}return n.tension=function(r){return e(+r)},n}(0);function FW(e,t){this._context=e,this._k=(1-t)/6}FW.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:eN(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const s0t=function e(t){function n(r){return new FW(r,t)}return n.tension=function(r){return e(+r)},n}(0);function BW(e,t,n){var r=e._x1,i=e._y1,s=e._x2,o=e._y2;if(e._l01_a>Jo){var a=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,u=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*a-e._x0*e._l12_2a+e._x2*e._l01_2a)/u,i=(i*a-e._y0*e._l12_2a+e._y2*e._l01_2a)/u}if(e._l23_a>Jo){var l=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);s=(s*l+e._x1*e._l23_2a-t*e._l12_2a)/c,o=(o*l+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(r,i,s,o,e._x2,e._y2)}function t_e(e,t){this._context=e,this._alpha=t}t_e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:BW(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const o0t=function e(t){function n(r){return t?new t_e(r,t):new MW(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function n_e(e,t){this._context=e,this._alpha=t}n_e.prototype={areaStart:F0,areaEnd:F0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:BW(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const a0t=function e(t){function n(r){return t?new n_e(r,t):new LW(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function r_e(e,t){this._context=e,this._alpha=t}r_e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:BW(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const u0t=function e(t){function n(r){return t?new r_e(r,t):new FW(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function i_e(e){this._context=e}i_e.prototype={areaStart:F0,areaEnd:F0,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function l0t(e){return new i_e(e)}function Goe(e){return e<0?-1:1}function Yoe(e,t,n){var r=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(r||i<0&&-0),o=(n-e._y1)/(i||r<0&&-0),a=(s*i+o*r)/(r+i);return(Goe(s)+Goe(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function Koe(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function qL(e,t,n){var r=e._x0,i=e._y0,s=e._x1,o=e._y1,a=(s-r)/3;e._context.bezierCurveTo(r+a,i+a*t,s-a,o-a*n,s,o)}function tN(e){this._context=e}tN.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:qL(this,this._t0,Koe(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,qL(this,Koe(this,n=Yoe(this,e,t)),n);break;default:qL(this,this._t0,n=Yoe(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function s_e(e){this._context=new o_e(e)}(s_e.prototype=Object.create(tN.prototype)).point=function(e,t){tN.prototype.point.call(this,t,e)};function o_e(e){this._context=e}o_e.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,s){this._context.bezierCurveTo(t,e,r,n,s,i)}};function c0t(e){return new tN(e)}function d0t(e){return new s_e(e)}function a_e(e){this._context=e}a_e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=Xoe(e),i=Xoe(t),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function Xoe(e){var t,n=e.length-1,r,i=new Array(n),s=new Array(n),o=new Array(n);for(i[0]=0,s[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,s[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,s[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/s[t-1],s[t]-=r,o[t]-=r*o[t-1];for(i[n-1]=o[n-1]/s[n-1],t=n-2;t>=0;--t)i[t]=(o[t]-i[t+1])/s[t];for(s[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function f0t(e){return new a_e(e)}function s6(e,t){this._context=e,this._t=t}s6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function h0t(e){return new s6(e,.5)}function p0t(e){return new s6(e,0)}function m0t(e){return new s6(e,1)}function vT(e,t,n){this.k=e,this.x=t,this.y=n}vT.prototype={constructor:vT,scale:function(e){return e===1?this:new vT(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new vT(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};vT.prototype;const u_e=D.createContext(null);function l_e({children:e,value:t}){return T.jsx(u_e.Provider,{value:t,children:e})}const pc=()=>{const e=D.useContext(u_e);if(!e)throw new Error("useMatrixContext must be used within a MatrixProvider");return e},c_e=Object.freeze(Object.defineProperty({__proto__:null,MatrixProvider:l_e,useMatrixContext:pc},Symbol.toStringTag,{value:"Module"})),d_e=(e,t)=>{const n=[...new Set(t.filter(s=>s.origin===e).map(s=>s.destination))].sort(),r=[...new Set(t.filter(s=>s.origin!==e).map(s=>s.destination))].filter(s=>!n.includes(s)).sort();return[...n,...r]};function f_e({showLines:e=!0}){const{configProps:t,data:n,originScale:r,destinationScale:i,margin:s,setDestinationHighlight:o,setOriginHighlight:a,orderingNode:u,setOrderingNode:l,orderedOrigins:c,setOrderedDestinations:d,trrack:f,actions:h}=pc(),p=D.useMemo(()=>i.range(),[i]),m=D.useMemo(()=>r.bandwidth()/2,[r]),y=D.useMemo(()=>r.domain().map(w=>({value:w,offset:(r(w)||0)+m})),[r,m]),v=D.useCallback(w=>{o(w),a(w)},[o,a]),b=D.useCallback((w,E)=>{t.nodeOrderingDisabled||(E===w?(l(null),f==null||f.apply("Reset Sort",h==null?void 0:h.setOrderingNode(null))):(l(w),f==null||f.apply("Sort",h==null?void 0:h.setOrderingNode(w))))},[t.nodeOrderingDisabled,f,h,l]);return D.useEffect(()=>{if(t.nodeOrderingDisabled)return;if(u===null){d(c);return}const w=d_e(u,n);d(w)},[t.nodeOrderingDisabled,n,c,d,u]),T.jsxs(T.Fragment,{children:[e?T.jsx("path",{className:"axis-line",d:["M",0,0,"V",p[1]].join(" ")}):null,y.map(({value:w,offset:E})=>T.jsxs("g",{transform:`translate(${E},0 )`,children:[e?T.jsx("line",{className:"axis-line",y2:`${p[1]}`,x2:m,x1:m}):null,T.jsx("foreignObject",{className:"axis-label",y:-m,width:s.top,height:r.bandwidth(),style:{transform:"rotate(-90deg)",cursor:"pointer"},onMouseOver:()=>v(w),onClick:()=>b(w,u),children:T.jsx("div",{className:"label-container",style:{height:r.bandwidth()},children:T.jsx(jr,{transitionProps:{transition:"slide-down",duration:300},label:w,withinPortal:!0,openDelay:200,children:T.jsx(Je,{className:"axis-label",size:"s",children:u===w?`  ${w}`:w})})})})]},`${w}`))]})}const h_e=Object.freeze(Object.defineProperty({__proto__:null,OriginAxis:f_e,getOrder:d_e},Symbol.toStringTag,{value:"Module"}));function p_e({showLines:e=!0}){const{configProps:t,margin:n,destinationScale:r,originScale:i,answerNodes:s,setAnswerNodes:o,orderingNode:a,actions:u,trrack:l,setAnswer:c,setDestinationHighlight:d,setOriginHighlight:f}=pc(),h=D.useMemo(()=>i.range(),[i]),p=D.useMemo(()=>r.bandwidth()/2,[r]),m=D.useMemo(()=>r.domain().map(w=>({value:w,offset:(r(w)||0)+p})),[r,p]),y=D.useCallback((w,E)=>{if(t.destinationSelectionDisabled)return;let _;E.includes(w)?_=E.filter(C=>C!==w):_=[...E,w],o(_),l==null||l.apply("Set Answer",u==null?void 0:u.setAnswerNodes(_)),c({status:!0,provenanceGraph:l==null?void 0:l.graph.backend,answers:{answerNodes:_}})},[o,c,l,u,t]),v=D.useCallback((w,E)=>{d(w),f(E?null:w)},[d,f]),b=Math.round(r.bandwidth());return T.jsxs(T.Fragment,{children:[e?T.jsx("path",{className:"axis-line",d:["M",0,0,"H",h[1]].join(" ")}):null,m.map(({value:w,offset:E})=>T.jsxs("g",{transform:`translate(0, ${E})`,style:{cursor:"pointer"},children:[e?T.jsx("line",{className:"axis-line",x2:`${-(h[0]-h[1])}`,y2:p,y1:p}):null,T.jsx("foreignObject",{x:-n.left,y:-p,width:n.left,height:b,style:{cursor:"pointer"},onClick:()=>c?y(w,s):{},onMouseOver:()=>v(w,a),children:T.jsx("div",{className:"label-container",style:{justifyContent:"flex-end",borderRadius:"5px",background:s.includes(w)?" #ff6e4a":"transparent",height:b},children:T.jsx(jr,{transitionProps:{transition:"slide-right",duration:300},label:w,withinPortal:!0,openDelay:200,children:T.jsx(Je,{className:"axis-label",style:{textAlign:"start"},children:w})})})})]},`${w}`))]})}const m_e=Object.freeze(Object.defineProperty({__proto__:null,DestinationAxis:p_e},Symbol.toStringTag,{value:"Module"}));function Vj(e,t){const n=e.domain(),r=e.range(),i=Math.floor((t-r[0])/e.step());return n[i]}function g_e(){const{size:e,originScale:t,destinationScale:n,setOriginHighlight:r,setDestinationHighlight:i,originHighlight:s,destinationHighlight:o,linkMarks:a,setLinkMarks:u,trrack:l,actions:c}=pc(),{width:d,height:f}=D.useMemo(()=>({width:e,height:e}),[e]),h=D.useCallback(y=>{const[v,b]=kut(y);return{origin:Vj(t,v),destination:Vj(n,b)}},[t,n]),p=D.useCallback(y=>{const{origin:v,destination:b}=h(y);v!==s&&r(v),b!==o&&i(b)},[h,s,r,o,i]),m=D.useCallback(y=>{const{origin:v,destination:b}=h(y),w=a.find(_=>_[0]===v&&_[1]===b);let E;w?E=a.filter(_=>_[0]!==v||_[1]!==b):E=[[v,b],...a],u(E),l==null||l.apply("Set Link Marks",c==null?void 0:c.setLinkMarks(E))},[h,a,u,l,c]);return T.jsx("rect",{width:d,height:f,fill:"transparent",opacity:0,onClick:m,onMouseMove:p})}const y_e=Object.freeze(Object.defineProperty({__proto__:null,Background:g_e,invertScaleBand:Vj},Symbol.toStringTag,{value:"Module"})),cu=3,b_e=Object.freeze(Object.defineProperty({__proto__:null,HIGHLIGHT_STROKE_WIDTH:cu},Symbol.toStringTag,{value:"Module"}));function v_e(){const{margin:e,size:t,cellSize:n,originScale:r,destinationScale:i,originHighlight:s,destinationHighlight:o,orderingNode:a,actions:u,trrack:l}=pc(),{topMargin:c,leftMargin:d}=D.useMemo(()=>({topMargin:e.top,leftMargin:e.left}),[e]),{width:f,height:h}=D.useMemo(()=>({width:t,height:t}),[t]);return D.useEffect(()=>{l==null||l.apply("Highlight",u==null?void 0:u.setOriginHighlight(s))},[s,l,u]),D.useEffect(()=>{l==null||l.apply("Highlight",u==null?void 0:u.setDestinationHighlight(o))},[o,l,u]),T.jsxs(T.Fragment,{children:[s&&T.jsx("rect",{id:"originHighlight",className:"highlight",width:n+cu,height:h+c,y:-c+cu/2,x:r(s)-cu/2,visibility:s?"visible":"hidden",style:{strokeWidth:cu}}),o&&T.jsx("rect",{id:"destinationHighlight",className:"highlight",width:f+d,height:n+cu,x:-d+cu/2,y:i(o)-cu/2,visibility:o?"visible":"hidden",style:{strokeWidth:cu}}),a&&T.jsx("rect",{id:"orderHighlight",className:"highlight",width:n+cu,height:h+c,y:-c+cu/2,x:r(a)-cu/2,style:{strokeWidth:cu}})]})}const x_e=Object.freeze(Object.defineProperty({__proto__:null,Highlighting:v_e},Symbol.toStringTag,{value:"Module"})),lx=e=>e.origin,cx=e=>e.destination,Qoe=5,Ai=e=>+e.mean.toFixed(2),l1=e=>+e.std.toFixed(2),jW=e=>+Math.min(Qoe,e.std===0?Qoe:+(e.mean/e.std).toFixed(2)),w_e=Object.freeze(Object.defineProperty({__proto__:null,destinationAccessor:cx,meanAccessor:Ai,originAccessor:lx,snrAccessor:jW,stdAccessor:l1},Symbol.toStringTag,{value:"Module"}));var nr=(e=>(e.Bivariate="Bivariate",e.MarkSize="Mark Size",e.CellSize="Cell Size",e.BarChart="Bar Chart",e.BarChartColor="Bar Chart + Color Scale",e.MarkAngle45="Mark Angle (0-45)",e.MarkAngle45_90="Mark Angle (45-90)",e.MarkAngle90="Mark Angle (0-90)",e.ColorAngle45="Color+Angle (0-45)",e.ColorAngle90="Color+Angle (0-90)",e.Mean="Just the mean",e))(nr||{}),o6=(e=>(e.None="none",e.Optimal="optimal",e.PCA="pca",e))(o6||{}),a6=(e=>(e.Mean="mean",e.StandardDeviation="std",e.SignalToNoiseRatio="snr",e))(a6||{}),Qu=(e=>(e.Viridis="viridis",e.Cividis="cividis",e.Warm="warm",e.Cool="cool",e.Plasma="plasma",e.Inferno="inferno",e.Turbo="turbo",e.Blues="blues",e.Oranges="oranges",e.Reds="reds",e))(Qu||{}),u6=(e=>(e.ClearNodeSelection="Clear State Selection",e.ClearLinkSelection="Clear Flight Selection",e.ResetOrdering="reset_ordering",e))(u6||{});const E_e=Object.freeze(Object.defineProperty({__proto__:null,ClusteringMode:o6,ClusteringVariable:a6,ColorScheme:Qu,EncodingType:nr,UserActionType:u6},Symbol.toStringTag,{value:"Module"})),g0t=110,WL=80,y0t="Price Ranges:",b0t="Price Deviation Ranges:";function __e(){const{cellRenderer:e,cellSize:t,meanScale:n,devScale:r,configProps:i}=pc(),{encoding:s}=i,o=t,a=D.useRef(null),u=D.useRef(null),l=D.useCallback((h,p)=>h.range().map(m=>{const[y,v]=h.invertExtent(m);return{mean:p?(y+v)/2:0,std:p?0:(y+v)/2,origin:"",destination:""}}),[]),c=D.useCallback((h,p,m,y,v)=>{const b=h.current;if(!b)return;const w=uj(b);w.selectAll("*").remove(),w.selectAll(".cell").data(p,_=>Ai(_)+l1(_)).enter().append("g").attr("class","cell").attr("transform",(_,C)=>`translate(${g0t*C}, 0)`).append("text").attr("transform",`translate(${o/2}, ${o+20})`).attr("text-anchor","middle").text((_,C)=>{const[S,k]=m.invertExtent(m.range()[C]);return C+1===m.range().length?`$${S.toFixed(0)} - ${+k.toFixed(0)}`:`$${S.toFixed(0)} - ${+k.toFixed(0)-.01}`}),e(w.selectAll(".cell"),o,y,v)},[e,o]),d=D.useCallback((h,p)=>{const m=[];return h.range().forEach((y,v)=>{const[b,w]=n.invertExtent(y);p.range().forEach((E,_)=>{const[C,S]=r.invertExtent(E),k={mean:(b+w)/2,std:(C+S)/2,origin:`${v}`,destination:`${_}`};m.push(k)})}),m},[n,r]),f=D.useCallback((h,p,m,y,v,b)=>{const w=h.current;if(!w)return;const E=o+30,_=uj(w);_.selectAll("*").remove(),_.selectAll(".cell").data(p,C=>Ai(C)+l1(C)).join("g").attr("class","cell").attr("transform",C=>`translate(${E*+C.origin}, ${E*+C.destination+WL})`),_.selectAll(".meanLabel").data(m.range()).join("text").attr("transform",(C,S)=>`translate(${E*S+15}, ${WL-5})rotate(-45)`).attr("text-anchor","start").text((C,S)=>{const[k,R]=m.invertExtent(C);return S+1===m.range().length?`$${k.toFixed(0)} - ${+R.toFixed(0)}`:`$${k.toFixed(0)} - ${+R.toFixed(0)-.01}`}),_.selectAll(".devLabel").data(y.range()).join("text").attr("transform",(C,S)=>`translate(${m.range().length*E+5},${E*S+WL+E/2+5})`).attr("text-anchor","start").text((C,S)=>{const[k,R]=y.invertExtent(C);return S+1===y.range().length?`$${k.toFixed(0)} - ${+R.toFixed(0)}`:`$${k.toFixed(0)} - ${+R.toFixed(0)-.01}`}),e(_.selectAll(".cell"),E,v,b)},[o,e]);return D.useEffect(()=>{if(a.current&&s!==nr.Bivariate){const h=l(n,!0);c(a,h,n,!0,!1)}},[n,s,c,l]),D.useEffect(()=>{if(u.current&&s!==nr.Bivariate){const h=l(r,!1);c(u,h,r,!1,!0)}},[r,s,c,l]),D.useEffect(()=>{if(a.current&&s===nr.Bivariate){const h=d(n,r);f(a,h,n,r,!0,!0)}},[s,n,r,f,d]),T.jsxs(Es,{gap:"5vh",children:[T.jsxs("div",{children:[T.jsx(Je,{size:"xl",fw:700,children:y0t}),T.jsx("svg",{height:s!==nr.Bivariate?o:"40vh",style:{overflow:"visible"},children:T.jsx("g",{ref:a})})]}),r.range().length>1&&s!==nr.Bivariate&&T.jsxs("div",{children:[T.jsx(Je,{size:"xl",fw:700,children:b0t}),T.jsx("svg",{height:o,style:{overflow:"visible"},children:T.jsx("g",{ref:u})})]})]})}const T_e=Object.freeze(Object.defineProperty({__proto__:null,Legend:__e},Symbol.toStringTag,{value:"Module"}));function C_e(){const{data:e,cellSize:t,cellRenderer:n,originScale:r,destinationScale:i}=pc(),s=D.useRef(null);return D.useEffect(()=>{if(!s.current)return;const o=uj(s.current).selectAll(".cell").data(e,a=>lx(a)+cx(a)+Ai(a)+l1(a)).join(a=>a.append("g").attr("class","cell").attr("transform",u=>`translate(${r(lx(u))}, ${i(cx(u))})`),a=>(a.selectAll("*").remove(),a.attr("transform",u=>`translate(${r(lx(u))}, ${i(cx(u))})`)),a=>a.remove());n(o,t)},[e,r,i,n,s,t]),T.jsx("g",{ref:s})}const S_e=Object.freeze(Object.defineProperty({__proto__:null,EncodedCells:C_e},Symbol.toStringTag,{value:"Module"})),[Joe,GL]=[300,105];function v0t(e,t,n,r,i,s){switch(s){case"top-right":return{x:e-n,y:t+i};case"bottom-left":return{x:e+i,y:t-r};case"bottom-right":return{x:e-n,y:t-r};default:return{x:e+i,y:t+i}}}function x0t(e,t,n,r){const i=n/2,s=r/2,o=t<s,a=e<i;return o&&a?"top-left":o&&!a?"top-right":!o&&a?"bottom-left":"bottom-right"}function A_e(){const{data:e,originScale:t,destinationScale:n,originHighlight:r,destinationHighlight:i,cellSize:s,size:o}=pc(),[a,u]=D.useState(!1),[l,c]=D.useState({x:0,y:0}),d=D.useRef(null),f=e.find(p=>lx(p)===r&&cx(p)===i),h=!!f&&r!=null&&i!=null;return D.useEffect(()=>{if(!h){d.current&&clearTimeout(d.current),u(!1);return}const p=t(r),m=n(i);if(p==null||m==null)return;const y=x0t(p,m,o,o),{x:v,y:b}=v0t(p,m,Joe,GL,s,y);d.current&&clearTimeout(d.current),u(!1),d.current=setTimeout(()=>{c({x:v,y:b}),u(!0)},200)},[h,t,n,r,i,o,s]),h?T.jsx("foreignObject",{x:l.x,y:l.y,width:Joe,height:GL,style:{pointerEvents:"none"},children:T.jsxs(j1,{shadow:"sm",radius:"md",p:"xs",withBorder:!0,style:{backgroundColor:"white",height:GL,display:"flex",flexDirection:"column",opacity:a?1:0,transform:a?"scale(1)":"scale(0.95)",transition:"opacity 200ms ease, transform 200ms ease"},children:[T.jsxs(Je,{size:"sm",fw:500,children:["Origin:"," ",r]}),T.jsxs(Je,{size:"sm",fw:500,children:["Destination:"," ",i]}),T.jsxs(Je,{size:"sm",c:"blue",children:["Mean:"," ",Ai(f).toFixed(2)]}),T.jsxs(Je,{size:"sm",c:"orange",children:["Deviation: ",l1(f).toFixed(2)]})," "]})}):null}const k_e=Object.freeze(Object.defineProperty({__proto__:null,MatrixTooltip:A_e},Symbol.toStringTag,{value:"Module"})),lf=cu+1;function I_e({marks:e,size:t}){const{originScale:n,destinationScale:r,cellSize:i}=pc();return e==null?void 0:e.map((s,o)=>T.jsxs(T.Fragment,{children:[T.jsx("rect",{x:n(s.origin),y:r(s.destination)-35,width:25,height:30,fill:"white"},o),T.jsx("text",{className:"cluster-label",color:"#ff6e4a",x:n(s.origin),y:r(s.destination)-10,children:s.option}),T.jsx("rect",{className:"mark",x:n(s.origin)-lf/2,y:r(s.destination)-lf/2,width:t*i+lf,height:t*i+lf,strokeWidth:lf},o)]}))}function R_e({marks:e}){const{originScale:t,destinationScale:n,cellSize:r}=pc();return e==null?void 0:e.map((i,s)=>T.jsx("rect",{className:"mark",x:t(i[0])-lf/2,y:n(i[1])-lf/2,width:r+lf,height:r+lf,strokeWidth:lf},s))}const D_e=Object.freeze(Object.defineProperty({__proto__:null,ClusterMarks:I_e,LinkMarks:R_e},Symbol.toStringTag,{value:"Module"})),w0t="#008837",E0t="#7b3294";function _0t(e,t){const{l:n}=Bx(e),r=100-n,i=100-t+r*t/100;return Bx(i,0,0).formatHex()}function P_e(e,t){const n=t/(e+1);return Array.from({length:e},(r,i)=>n*(i+1))}function Fh(e,t=0,n=45){const r=(n-t)/(e-1);return Array.from({length:e},(i,s)=>t+r*s)}function N_e(e,t,n,r,i,s){return D.useCallback((a,u,l=!0,c=!0)=>{const d=n?jW:l1;function f(p="black"){a.append("rect").attr("fill",p).attr("width",u).attr("height",u)}function h(p){const m=r(Ai(p));return _0t(m,t)}switch(e){case nr.BarChart:{let p=function(w=!1){w&&a.append("rect").attr("fill","transparent").attr("width",u).attr("height",u).attr("stroke","black").attr("stroke-width",1.5),a.append("rect").attr("fill",w0t).attr("width",b*y).attr("height",E=>+r(Ai(E))).attr("y",E=>u-+r(Ai(E))).attr("x",(u-b)/2)},m=function(w=!1){w&&a.append("rect").attr("fill","transparent").attr("width",u).attr("height",u).attr("stroke","black").attr("stroke-width",1.5),a.append("rect").attr("fill",E0t).attr("width",b*(1-y)).attr("height",E=>+i(d(E))).attr("x",(u-b)/2+b*y).attr("y",E=>u-+i(d(E)))};const y=.5,b=u*.8;l&&c?(p(),m()):l?p(!0):c&&m(!0);break}case nr.BarChartColor:{let p=function(w=!1){w&&a.append("rect").attr("fill","transparent").attr("width",u).attr("height",u).attr("stroke","black").attr("stroke-width",1.5),a.append("rect").attr("fill",E=>s(Ai(E))).attr("width",b*y).attr("height",E=>+r(Ai(E))).attr("y",E=>u-+r(Ai(E))).attr("x",(u-b)/2)},m=function(w=!1){w&&a.append("rect").attr("fill","transparent").attr("width",u).attr("height",u).attr("stroke","black").attr("stroke-width",1.5),a.append("rect").attr("fill","grey").attr("width",b*(1-y)).attr("height",E=>+i(d(E))).attr("x",(u-b)/2+b*y).attr("y",E=>u-+i(d(E)))};const y=.5,b=u*.8;l&&c?(p(),m()):l?p(!0):c&&m(!0);break}case nr.Bivariate:{a.append("rect").attr("fill","white").attr("width",u).attr("height",u),a.append("rect").attr("width",u).attr("height",u).attr("fill",p=>r(Ai(p))).attr("opacity",p=>i(d(p)));break}case nr.MarkAngle45:case nr.MarkAngle45_90:case nr.MarkAngle90:{let p=function(E="#CCCCCC"){a.append("rect").attr("fill",E).attr("width",m).attr("height",y).attr("x",b).attr("y",w).attr("transform",_=>`rotate(${-i(d(_))}, ${v}, ${v})`)};const m=u*.8,y=u*.2,v=u/2,b=(u-m)/2,w=(u-y)/2;l&&c?(f(E=>r(Ai(E))),p(h)):l?f(E=>r(Ai(E))):c&&(f(),p());break}case nr.ColorAngle45:case nr.ColorAngle90:{let p=function(E="black",_=!1){_&&a.append("rect").attr("fill","transparent").attr("width",u).attr("height",u).attr("stroke","black").attr("stroke-width",1.5),a.append("rect").attr("fill",E).attr("width",m).attr("height",y).attr("x",b).attr("y",w).attr("transform",C=>`rotate(${-i(d(C))}, ${v}, ${v})`)};const m=u*.8,y=u*.6,v=u/2,b=(u-m)/2,w=(u-y)/2;l&&c?p(E=>r(Ai(E))):l?p(E=>r(Ai(E)),!0):c&&p("black",!0);break}case nr.MarkSize:{let p=function(m="#CCCCCC"){a.append("rect").attr("fill",m).attr("width",y=>+i(d(y))).attr("height",y=>+i(d(y))).attr("x",y=>(u-+i(d(y)))/2).attr("y",y=>(u-+i(d(y)))/2)};l&&c?(f(m=>r(Ai(m))),p(h)):l?f(m=>r(Ai(m))):c&&(f(),p());break}case nr.CellSize:{l&&c?a.append("rect").attr("fill",p=>r(Ai(p))).attr("width",p=>i(d(p))).attr("height",p=>i(d(p))).attr("x",p=>(u-+i(d(p)))/2).attr("y",p=>(u-+i(d(p)))/2):l?a.append("rect").attr("fill",p=>r(Ai(p))).attr("width",u).attr("height",u):c&&a.append("rect").attr("fill","black").attr("width",p=>i(d(p))).attr("height",p=>i(d(p))).attr("x",p=>(u-+i(d(p)))/2).attr("y",p=>(u-+i(d(p)))/2);break}default:{a.append("rect").attr("width",u).attr("height",u).attr("fill",p=>r(Ai(p)));break}}},[r,i,n,e,t])}const O_e=Object.freeze(Object.defineProperty({__proto__:null,createLinearScale:Fh,createMarkScale:P_e,useCellRenderer:N_e},Symbol.toStringTag,{value:"Module"}));function T0t(e,t){const n=Fh(t,0,1);let r;switch(e){case Qu.Viridis:r=n.map(i=>Bmt(i)).reverse();break;case Qu.Cividis:r=n.map(i=>$mt(i)).reverse();break;case Qu.Warm:r=n.map(i=>Mmt(i)).reverse();break;case Qu.Cool:r=n.map(i=>Lmt(i)).reverse();break;case Qu.Plasma:r=n.map(i=>zmt(i)).reverse();break;case Qu.Inferno:r=n.map(i=>jmt(i)).reverse();break;case Qu.Turbo:r=n.map(i=>Fmt(i)).reverse();break;case Qu.Blues:r=n.map(i=>Pmt(i));break;case Qu.Oranges:r=n.map(i=>Omt(i));break;default:r=n.map(i=>Rmt(i));break}return r}function $_e(e,t,n,r,i,s,o,a,u,l){const{meanScale:c,alternateScale:d}=D.useMemo(()=>{const h=Fh(u,n*.2,n*.9),p=T0t(t,u),m=e===nr.BarChart||e===nr.BarChartColor?h:p,y=e===nr.BarChart||e===nr.BarChartColor?p:h;return{meanScale:u2().domain([r,i]).range(m),alternateScale:u2().domain([r,i]).range(y)}},[r,i,u,t,e,n]),f=D.useMemo(()=>{let h=[1];switch(e){case nr.BarChartColor:case nr.BarChart:{h=Fh(l,n*.2,n*.9),a&&(h=h.reverse());break}case nr.Bivariate:{h=Fh(l,.2,1).reverse();break}case nr.ColorAngle45:case nr.MarkAngle45:{h=Fh(l);break}case nr.ColorAngle90:case nr.MarkAngle90:{h=Fh(l,0,90);break}case nr.MarkAngle45_90:{h=Fh(l,90,45);break}case nr.MarkSize:{h=P_e(l,n*.8);break}case nr.CellSize:{h=Fh(l,n*.3,n).reverse();break}}return u2().domain([s,o]).range(h)},[s,o,l,e,n,a]);return{meanScale:c,devScale:f,alternateScale:d}}const M_e=Object.freeze(Object.defineProperty({__proto__:null,useCellScales:$_e},Symbol.toStringTag,{value:"Module"}));function Zoe(e,t){e=Math.abs(e),t=Math.abs(t);var n,r;e>t?(n=e,r=t):(n=t,r=e);var i=r/n;return n*Math.sqrt(1+i*i)}function C0t(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function S0t(){function e(t){for(var n=t.length,r=[],i=[],s=[],o=0;o<n;o++)r[o]=[],i[o]=[],s[o]=[];for(var a=!0,u=0;u<n;u++)for(var o=0;o<n;o++)if(t[o][u]!==t[u][o]){a=!1;break}if(a){for(var o=0;o<n;o++)r[o]=t[o].slice();A0t(i,s,r),k0t(i,s,r)}else{for(var l=[],o=0;o<n;o++)l[o]=t[o].slice();I0t(l,r),R0t(i,s,l,r)}for(var c=[],o=0;o<n;o++){for(var d=c[o]=[],u=0;u<n;u++)d[u]=o===u?i[o]:0;c[o][s[o]>0?o+1:o-1]=s[o]}return{D:c,V:r}}return e}function A0t(e,t,n){for(var r=n.length,i=0;i<r;i++)e[i]=n[r-1][i];for(var s=r-1;s>0;s--){for(var o=0,a=0,u=0;u<s;u++)o+=Math.abs(e[u]);if(o===0){t[s]=e[s-1];for(var i=0;i<s;i++)e[i]=n[s-1][i],n[s][i]=0,n[i][s]=0}else{for(var u=0;u<s;u++)e[u]/=o,a+=e[u]*e[u];var l=e[s-1],c=Math.sqrt(a);l>0&&(c=-c),t[s]=o*c,a=a-l*c,e[s-1]=l-c;for(var i=0;i<s;i++)t[i]=0;for(var i=0;i<s;i++){l=e[i],n[i][s]=l,c=t[i]+n[i][i]*l;for(var u=i+1;u<=s-1;u++)c+=n[u][i]*e[u],t[u]+=n[u][i]*l;t[i]=c}l=0;for(var i=0;i<s;i++)t[i]/=a,l+=t[i]*e[i];for(var d=l/(a+a),i=0;i<s;i++)t[i]-=d*e[i];for(var i=0;i<s;i++){l=e[i],c=t[i];for(var u=i;u<=s-1;u++)n[u][i]-=l*t[u]+c*e[u];e[i]=n[s-1][i],n[s][i]=0}}e[s]=a}for(var s=0;s<r-1;s++){n[r-1][s]=n[s][s],n[s][s]=1;var a=e[s+1];if(a!=0){for(var u=0;u<=s;u++)e[u]=n[u][s+1]/a;for(var i=0;i<=s;i++){for(var c=0,u=0;u<=s;u++)c+=n[u][s+1]*n[u][i];for(var u=0;u<=s;u++)n[u][i]-=c*e[u]}}for(var u=0;u<=s;u++)n[u][s+1]=0}for(var i=0;i<r;i++)e[i]=n[r-1][i],n[r-1][i]=0;n[r-1][r-1]=1,t[0]=0}function k0t(e,t,n){for(var r=n.length,i=1;i<r;i++)t[i-1]=t[i];t[r-1]=0;for(var s=0,o=0,a=1e-12,u=0;u<r;u++){o=Math.max(o,Math.abs(e[u])+Math.abs(t[u]));for(var l=u;l<r&&!(Math.abs(t[l])<=a*o);)l++;if(l>u)do{var c=e[u],d=(e[u+1]-c)/(2*t[u]),f=Zoe(d,1);d<0&&(f=-f),e[u]=t[u]/(d+f),e[u+1]=t[u]*(d+f);for(var h=e[u+1],p=c-e[u],i=u+2;i<r;i++)e[i]-=p;s+=p,d=e[l];for(var m=1,y=m,v=m,b=t[u+1],w=0,E=0,i=l-1;i>=u;i--){v=y,y=m,E=w,c=m*t[i],p=m*d,f=Zoe(d,t[i]),t[i+1]=w*f,w=t[i]/f,m=d/f,d=m*e[i]-w*c,e[i+1]=p+w*(m*c+w*e[i]);for(var _=0;_<r;_++)p=n[_][i+1],n[_][i+1]=w*n[_][i]+m*p,n[_][i]=m*n[_][i]-w*p}d=-w*E*v*b*t[u]/h,t[u]=w*d,e[u]=m*d}while(Math.abs(t[u])>a*o);e[u]=e[u]+s,t[u]=0}for(var i=0;i<r-1;i++){for(var _=i,d=e[i],C=i+1;C<r;C++)e[C]<d&&(_=C,d=e[C]);if(_!=i){e[_]=e[i],e[i]=d;for(var C=0;C<r;C++)d=n[C][i],n[C][i]=n[C][_],n[C][_]=d}}}function I0t(e,t){for(var n=e.length,r=[],i=0,s=n-1,o=i+1;o<s;o++){for(var a=0,u=o;u<=s;u++)a+=Math.abs(e[u][o-1]);if(a!==0){for(var l=0,u=s;u>=o;u--)r[u]=e[u][o-1]/a,l+=r[u]*r[u];var c=Math.sqrt(l);r[o]>0&&(c=-c),l=l-r[o]*c,r[o]=r[o]-c;for(var d=o;d<n;d++){for(var f=0,u=s;u>=o;u--)f+=r[u]*e[u][d];f/=l;for(var u=o;u<=s;u++)e[u][d]-=f*r[u]}for(var u=0;u<=s;u++){for(var f=0,d=s;d>=o;d--)f+=r[d]*e[u][d];f/=l;for(var d=o;d<=s;d++)e[u][d]-=f*r[d]}r[o]=a*r[o],e[o][o-1]=a*c}}for(var u=0;u<n;u++)for(var d=0;d<n;d++)t[u][d]=u===d?1:0;for(var o=s-1;o>=i+1;o--)if(e[o][o-1]!==0){for(var u=o+1;u<=s;u++)r[u]=e[u][o-1];for(var d=o;d<=s;d++){for(var c=0,u=o;u<=s;u++)c+=r[u]*t[u][d];c=c/r[o]/e[o][o-1];for(var u=o;u<=s;u++)t[u][d]+=c*r[u]}}}function R0t(e,t,n,r){for(var i=n.length,s=i-1,o=0,a=i-1,u=1e-12,l=0,c=0,d=0,f=0,h=0,p=0,m,y,v,b,w=0,E=0;E<i;E++){(E<o||E>a)&&(e[E]=n[E][E],t[E]=0);for(var _=Math.max(E-1,0);_<i;_++)w+=Math.abs(n[E][_])}for(var C=0;s>=o;){for(var S=s;S>o&&(h=Math.abs(n[S-1][S-1])+Math.abs(n[S][S]),h===0&&(h=w),!(Math.abs(n[S][S-1])<u*h));)S--;if(S===s)n[s][s]=n[s][s]+l,e[s]=n[s][s],t[s]=0,s--,C=0;else if(S===s-1){if(y=n[s][s-1]*n[s-1][s],c=(n[s-1][s-1]-n[s][s])/2,d=c*c+y,p=Math.sqrt(Math.abs(d)),n[s][s]=n[s][s]+l,n[s-1][s-1]=n[s-1][s-1]+l,v=n[s][s],d>=0){p=c+(c>=0?p:-p),e[s-1]=v+p,e[s]=e[s-1],p!==0&&(e[s]=v-y/p),t[s-1]=0,t[s]=0,v=n[s][s-1],h=Math.abs(v)+Math.abs(p),c=v/h,d=p/h,f=Math.sqrt(c*c+d*d),c/=f,d/=f;for(var _=s-1;_<i;_++)p=n[s-1][_],n[s-1][_]=d*p+c*n[s][_],n[s][_]=d*n[s][_]-c*p;for(var E=0;E<=s;E++)p=n[E][s-1],n[E][s-1]=d*p+c*n[E][s],n[E][s]=d*n[E][s]-c*p;for(var E=o;E<=a;E++)p=r[E][s-1],r[E][s-1]=d*p+c*r[E][s],r[E][s]=d*r[E][s]-c*p}else e[s-1]=v+c,e[s]=v+c,t[s-1]=p,t[s]=-p;s=s-2,C=0}else{if(v=n[s][s],b=0,y=0,S<s&&(b=n[s-1][s-1],y=n[s][s-1]*n[s-1][s]),C==10){l+=v;for(var E=o;E<=s;E++)n[E][E]-=v;h=Math.abs(n[s][s-1])+Math.abs(n[s-1][s-2]),v=b=.75*h,y=-.4375*h*h}if(C==30&&(h=(b-v)/2,h=h*h+y,h>0)){h=Math.sqrt(h),b<v&&(h=-h),h=v-y/((b-v)/2+h);for(var E=o;E<=s;E++)n[E][E]-=h;l+=h,v=b=y=.964}C++;for(var k=s-2;k>=S&&(p=n[k][k],f=v-p,h=b-p,c=(f*h-y)/n[k+1][k]+n[k][k+1],d=n[k+1][k+1]-p-f-h,f=n[k+2][k+1],h=Math.abs(c)+Math.abs(d)+Math.abs(f),c=c/h,d=d/h,f=f/h,!(k==S||Math.abs(n[k][k-1])*(Math.abs(d)+Math.abs(f))<u*(Math.abs(c)*(Math.abs(n[k-1][k-1])+Math.abs(p)+Math.abs(n[k+1][k+1])))));)k--;for(var E=k+2;E<=s;E++)n[E][E-2]=0,E>k+2&&(n[E][E-3]=0);for(var R=k;R<=s-1;R++){var N=R!=s-1;if(R!=k&&(c=n[R][R-1],d=n[R+1][R-1],f=N?n[R+2][R-1]:0,v=Math.abs(c)+Math.abs(d)+Math.abs(f),v!=0&&(c/=v,d/=v,f/=v)),v==0)break;if(h=Math.sqrt(c*c+d*d+f*f),c<0&&(h=-h),h!=0){R!=k?n[R][R-1]=-h*v:S!=k&&(n[R][R-1]=-n[R][R-1]),c+=h,v=c/h,b=d/h,p=f/h,d/=c,f/=c;for(var _=R;_<i;_++)c=n[R][_]+d*n[R+1][_],N&&(c=c+f*n[R+2][_],n[R+2][_]=n[R+2][_]-c*p),n[R][_]=n[R][_]-c*v,n[R+1][_]=n[R+1][_]-c*b;for(var E=0;E<=Math.min(s,R+3);E++)c=v*n[E][R]+b*n[E][R+1],N&&(c+=p*n[E][R+2],n[E][R+2]=n[E][R+2]-c*f),n[E][R]=n[E][R]-c,n[E][R+1]=n[E][R+1]-c*d;for(var E=o;E<=a;E++)c=v*r[E][R]+b*r[E][R+1],N&&(c=c+p*r[E][R+2],r[E][R+2]=r[E][R+2]-c*f),r[E][R]=r[E][R]-c,r[E][R+1]=r[E][R+1]-c*d}}}}if(w!=0){for(s=i-1;s>=0;s--)if(c=e[s],d=t[s],d==0){var S=s;n[s][s]=1;for(var E=s-1;E>=0;E--){y=n[E][E]-c,f=0;for(var _=S;_<=s;_++)f=f+n[E][_]*n[_][s];if(t[E]<0)p=y,h=f;else if(S=E,t[E]===0?n[E][s]=-f/(y!==0?y:u*w):(v=n[E][E+1],b=n[E+1][E],d=(e[E]-c)*(e[E]-c)+t[E]*t[E],m=(v*h-p*f)/d,n[E][s]=m,Math.abs(v)>Math.abs(p)?n[E+1][s]=(-f-y*m)/v:n[E+1][s]=(-h-b*m)/p),m=Math.abs(n[E][s]),u*m*m>1)for(var _=E;_<=s;_++)n[_][s]=n[_][s]/m}}else if(d<0){var S=s-1;if(Math.abs(n[s][s-1])>Math.abs(n[s-1][s]))n[s-1][s-1]=d/n[s][s-1],n[s-1][s]=-(n[s][s]-c)/n[s][s-1];else{var O=bI(0,-n[s-1][s],n[s-1][s-1]-c,d);n[s-1][s-1]=O[0],n[s-1][s]=O[1]}n[s][s-1]=0,n[s][s]=1;for(var E=s-2;E>=0;E--){for(var F=0,$=0,z,q,_=S;_<=s;_++)F=F+n[E][_]*n[_][s-1],$=$+n[E][_]*n[_][s];if(y=n[E][E]-c,t[E]<0)p=y,f=F,h=$;else{if(S=E,t[E]==0){var O=bI(-F,-$,y,d);n[E][s-1]=O[0],n[E][s]=O[1]}else{v=n[E][E+1],b=n[E+1][E],z=(e[E]-c)*(e[E]-c)+t[E]*t[E]-d*d,q=(e[E]-c)*2*d,z==0&q==0&&(z=u*w*(Math.abs(y)+Math.abs(d)+Math.abs(v)+Math.abs(b)+Math.abs(p)));var O=bI(v*f-p*F+d*$,v*h-p*$-d*F,z,q);if(n[E][s-1]=O[0],n[E][s]=O[1],Math.abs(v)>Math.abs(p)+Math.abs(d))n[E+1][s-1]=(-F-y*n[E][s-1]+d*n[E][s])/v,n[E+1][s]=(-$-y*n[E][s]-d*n[E][s-1])/v;else{var O=bI(-f-b*n[E][s-1],-h-b*n[E][s],p,d);n[E+1][s-1]=O[0],n[E+1][s]=O[1]}}if(m=Math.max(Math.abs(n[E][s-1]),Math.abs(n[E][s])),u*m*m>1)for(var _=E;_<=s;_++)n[_][s-1]=n[_][s-1]/m,n[_][s]=n[_][s]/m}}}for(var E=0;E<i;E++)if(E<o||E>a)for(var _=E;_<i;_++)r[E][_]=n[E][_];for(var _=i-1;_>=o;_--)for(var E=o;E<=a;E++){p=0;for(var R=o;R<=Math.min(_,a);R++)p+=r[E][R]*n[R][_];r[E][_]=p}}}function bI(e,t,n,r){if(Math.abs(n)>Math.abs(r)){var i=r/n,s=n+i*r;return[(e+i*t)/s,(t-i*e)/s]}else{var i=n/r,s=r+i*n;return[(i*e+t)/s,(i*t-e)/s]}}function D0t(e){var t=e[0].concat(e[1]).concat(e[2]).concat(e[3]);return t[12]*t[9]*t[6]*t[3]-t[8]*t[13]*t[6]*t[3]-t[12]*t[5]*t[10]*t[3]+t[4]*t[13]*t[10]*t[3]+t[8]*t[5]*t[14]*t[3]-t[4]*t[9]*t[14]*t[3]-t[12]*t[9]*t[2]*t[7]+t[8]*t[13]*t[2]*t[7]+t[12]*t[1]*t[10]*t[7]-t[0]*t[13]*t[10]*t[7]-t[8]*t[1]*t[14]*t[7]+t[0]*t[9]*t[14]*t[7]+t[12]*t[5]*t[2]*t[11]-t[4]*t[13]*t[2]*t[11]-t[12]*t[1]*t[6]*t[11]+t[0]*t[13]*t[6]*t[11]+t[4]*t[1]*t[14]*t[11]-t[0]*t[5]*t[14]*t[11]-t[8]*t[5]*t[2]*t[15]+t[4]*t[9]*t[2]*t[15]+t[8]*t[1]*t[6]*t[15]-t[0]*t[9]*t[6]*t[15]-t[4]*t[1]*t[10]*t[15]+t[0]*t[5]*t[10]*t[15]}function L_e(e,t){for(var n=0,r=-1,i=Math.min(e.length,t.length);++r<i;)n+=e[r]*t[r];return n}function F_e(e,t){t||(t=1e-10);for(var n=e.length,r=e[0].length,i=-1,s,o;++i<n;){var a=i;for(s=i;++s<n;)Math.abs(e[s][i])>Math.abs(e[a][i])&&(a=s);var u=e[i];if(e[i]=e[a],e[a]=u,Math.abs(e[i][i])<=t)return!1;for(s=i;++s<n;){var l=e[s][i]/e[i][i];for(o=i-1;++o<r;)e[s][o]-=e[i][o]*l}}for(i=n;--i>=0;){var l=e[i][i];for(s=-1;++s<i;)for(o=r;--o>=i;)e[s][o]-=e[i][o]*e[s][i]/l;for(e[i][i]/=l,o=n-1;++o<r;)e[i][o]/=l}return!0}function P0t(e){var t=e.length,n=-1;if(t===e[0].length){for(e=e.map(function(r,i){for(var s=new Array(t),o=-1;++o<t;)s[o]=i===o?1:0;return r.concat(s)}),F_e(e);++n<t;)e[n]=e[n].slice(t);return e}}function B_e(e){return Math.sqrt(L_e(e,e))}function N0t(e,t){var n=e.length,r=t[0].length,i=t.length,s=-1,o,a;if(i!==e[0].length)throw{error:"columns(a) != rows(b); "+e[0].length+" != "+i};for(var u=new Array(n);++s<n;)for(u[s]=new Array(r),o=-1;++o<r;){var l=0;for(a=-1;++a<i;)l+=e[s][a]*t[a][o];u[s][o]=l}return u}function O0t(e){var t=B_e(e);return e.map(function(n){return n/t})}function $0t(e){for(var t=e.length,n=e[0].length,r=-1,i,s=new Array(n);++r<n;)for(s[r]=new Array(t),i=-1;++i<t;)s[r][i]=e[i][r];return s}function M0t(e,t,n,r,i,s){var o,a;for(o=1;o<s;o++)a=e[o]/t[o-1],t[o]-=a*n[o-1],r[o]-=a*r[o-1];for(i[s-1]=r[s-1]/t[s-1],o=s-2;o>=0;o--)i[o]=(r[o]-n[o]*i[o+1])/t[o]}var L0t=Object.freeze({cross:C0t,decompose:S0t,determinant:D0t,dot:L_e,gaussjordan:F_e,inverse:P0t,length:B_e,multiply:N0t,normalize:O0t,transpose:$0t,tridag:M0t}),F0t=L0t;function B0t(e,t,n=1){arguments.length<2&&(t=e,e=0);const r=[];let i=e;if(n<0)for(;i>t;i+=n)r.push(i);else for(;i<t;i+=n)r.push(i);return r}const j0t=B0t,{dot:z0t,length:U0t,normalize:HVt,transpose:qVt}=F0t;function V0t(e){return j0t(0,e.length).sort((t,n)=>e[t]-e[n])}function H0t(e,t,n){const r=e.length;let i=0;for(let s=0;s<r;s++)i+=e[s][t]*e[s][n];return i}function q0t(e){const t=e[0].length,n=Array(t);for(let r=0;r<t;r++)n[r]=Array(t);for(let r=0;r<t;r++)for(let i=r;i<t;i++)n[r][i]=n[i][r]=H0t(e,r,i);return n}function W0t(e,t){if(!e)throw console.log(t),t}function dg(e,t){return!(isNaN(e)||isNaN(t)||e==1/0||t==1/0)}const mc={};mc.euclidean=function(e,t){let n=0;for(let r=e.length-1;r>=0;r--)if(dg(e[r],t[r])){const i=e[r]-t[r];n+=i*i}return Math.sqrt(n)};mc.manhattan=function(e,t){let n=0;for(let r=e.length-1;r>=0;r--)dg(e[r],t[r])&&(n+=Math.abs(e[r]-t[r]));return n};mc.minkowski=function(e){return(t,n)=>{let r=0;for(let i=t.length-1;i>=0;i--)dg(t[i],n[i])&&(r+=Math.pow(Math.abs(t[i]-n[i]),e));return Math.pow(r,1/e)}};mc.chebyshev=function(e,t){let n=0;for(let r=e.length-1;r>=0;r--)if(dg(e[r],t[r])){const i=Math.abs(e[r]-t[r]);i>n&&(n=i)}return n};mc.hamming=function(e,t){let n=0;for(let r=e.length-1;r>=0;r--)dg(e[r],t[r])&&e[r]!==t[r]&&n++;return n};mc.jaccard=function(e,t){let n=0,r=0;for(let i=e.length-1;i>=0;i--)dg(e[i],t[i])&&(e[i]===t[i]&&r++,n++);return n===0?0:r/n};mc.braycurtis=function(e,t){let n=0,r=0;for(let i=e.length-1;i>=0;i--){const s=e[i],o=t[i];dg(s,o)&&(n+=Math.abs(s-o),r+=Math.abs(s+o))}return r===0?0:n/r};mc.morans=function(e){let t=0;const n=e.length*e[0].length;for(let r=0;r<e.length;r++)for(let i=0;i<e[0].length;i++)t+=e[r][i];return(r,i)=>{let s=0;for(let o=0;o<r.length;o++)dg(r[o],i[o])&&(s+=(r[o]*n-t)*(i[o]*n-t));return-1*s}};function G0t(){let e=mc.euclidean;function t(n){const r=n.length,i=[];for(let s=0;s<r;s++){const o=[];i[s]=o;for(let a=0;a<r;a++)a<s?o.push(i[a][s]):s===a?o.push(0):o.push(e(n[s],n[a]))}return i}return t.distance=function(n){return arguments.length?(e=n,t):e},t}function Y0t(e,t,n){const r=Array(e);if(arguments.length==1)for(;e;)r[--e]=Math.random();else if(arguments.length==2)for(;e;)r[--e]=Math.random()*t;else for(;e;)r[--e]=t+Math.random()*(n-t);return r}function eae(e){const t=U0t(e);let n=e.length;if(t===0||Math.abs(t-1)<1e-9)return 1;for(;n-- >0;)e[n]/=t;return t}function K0t(e,t,n){t||(t=1e-9);const r=e.length;let i,s=Array(r),o=100;for(W0t(r==e[0].length,"poweriteration needs a square matrix"),i=Y0t(r),eae(i);o-- >0;){for(let u=0;u<r;u++){s[u]=0;for(let l=0;l<r;l++)s[u]+=e[u][l]*i[l]}if(eae(s),z0t(s,i)>1-t)break;const a=s;s=i,i=a}return s}function X0t(e,t){let n=t.length;const r=e.slice();for(;n--;)r[n]=e[t[n]];return r}function Q0t(){let e=mc.euclidean,t="single",n=null;function r(i){const s=i.length,o=[],a=[],u=[];let l,c=0;if(n===null){n=[];let f=-1;for(;++f<s;){o[f]=0,n[f]=[];let h=-1;for(;++h<s;)n[f][h]=f===h?1/0:e(i[f],i[h]),n[f][o[f]]>n[f][h]&&(o[f]=h)}}else{if(n.length<s||n[0].length<s)throw{error:`Provided distance matrix length ${n.length} instead of ${s}`};let f=-1;for(;++f<s;){o[f]=0;let h=-1;for(;++h<s;)f===h&&(n[f][h]=1/0),n[f][o[f]]>n[f][h]&&(o[f]=h)}}let d=-1;for(;++d<s;)d!=c&&console.log("i = %d, id = %d",d,c),u[d]={left:null,right:null,dist:0,centroid:i[d],id:c++,size:1,depth:0},a[d]=1;for(let f=0;f<s-1;f++){let h=0;for(d=0;d<s;d++)n[d][o[d]]<n[h][o[h]]&&(h=d);const p=o[h],m=u[h],y=u[p],v={left:m,right:y,dist:n[h][p],centroid:J0t(m.size,m.centroid,y.size,y.centroid),id:c++,size:m.size+y.size,depth:1+Math.max(m.depth,y.depth)};u[h]=v;for(let b=0;b<s;b++)if(!(b===h||b===p))switch(t){case"single":n[h][b]>n[p][b]&&(n[b][h]=n[h][b]=n[p][b]);break;case"complete":n[h][b]<n[p][b]&&(n[b][h]=n[h][b]=n[p][b]);break;case"average":n[b][h]=n[h][b]=(a[h]*n[h][b]+a[p]*n[p][b])/(a[h]+a[p]);break}a[h]+=a[p];for(let b=0;b<s;b++)n[b][p]=n[p][b]=1/0;for(let b=0;b<s;b++){if(t==="single")o[b]===p&&(o[b]=h);else if(o[b]===p||o[b]===h)for(let w=0;w<s;w++)n[b][w]<n[b][o[b]]&&(o[b]=w);n[h][b]<n[h][o[h]]&&(o[h]=b)}l=v}return l}return r.linkage=function(i){return arguments.length?(t=i,r):t},r.distance=function(i){return arguments.length?(e=i,r):e},r.distanceMatrix=function(i){return arguments.length?(n=i.map(s=>s.slice(0)),r):n},r}function J0t(e,t,n,r){const i=[],s=e+n,o=t.length;let a=-1;for(;++a<o;)i[a]=(e*t[a]+n*r[a])/s;return i}function Z0t(e){const t=e.length;if(t===0)return NaN;const n=e[0].length,r=e[0].slice(0);let i=0;for(;++i<t;){const s=e[i];for(let o=0;o<n;o++)r[o]+=(s[o]-r[o])/(i+1)}return r}function egt(){let e=null,t=mc.euclidean,n="complete",r={},i={};function s(d){return d===null?[]:d.id in r?r[d.id]:r[d.id]=o(d)}function o(d){return d===null?[]:d.depth===0?[d.id]:s(d.left).concat(s(d.right))}function a(d,f,h){const p=`k${d.id}-${f}-${h}`;return p in i?i[p]:i[p]=u(d,f,h)}function u(d,f,h){if(d.depth===0)return[0,[d.id]];const p=d.left,m=d.right,y=s(p),v=s(m);let b,w;if(y.includes(f)&&v.includes(h))b=p,w=m;else if(v.includes(f)&&y.includes(h))b=m,w=p;else throw{error:`Node is not common ancestor of ${f}, ${h}`};const E=s(b.left),_=s(b.right);let C=_.includes(f)?E:_;C.length===0&&(C=[f]);const S=s(w.left),k=s(w.right);let R=k.includes(h)?S:k;R.length===0&&(R=[h]);let N=1/0,O=[];for(let F=0;F<C.length;F++){const $=a(b,f,C[F]);for(let z=0;z<R.length;z++){const q=a(w,R[z],h),W=$[0]+e[C[F]][R[z]]+q[0];W<N&&(N=W,O=$[1].concat(q[1]))}}return[N,O]}function l(d){r={},i={};let f=1/0,h=[];const p=s(d.left),m=s(d.right);for(let y=0;y<p.length;y++)for(let v=0;v<m.length;v++){const b=a(d,p[y],m[v]);b[0]<f&&(f=b[0],h=b[1])}return e=null,h}function c(d){e===null&&(e=G0t().distance(t)(d));const f=Q0t().linkage(n).distanceMatrix(e);return l(f(d))}return c.order=l,c.reorder=c,c.distance=function(d){return arguments.length?(t=d,e=null,c):t},c.linkage=function(d){return arguments.length?(n=d,c):n},c.distance_matrix=function(d){return arguments.length?(e=d.map(f=>f.slice(0)),c):e},c.distanceMatrix=c.distance_matrix,c}function tgt(e){const t=e.length;if(t===0)return null;const n=Z0t(e),r=n.length,i=Array(t);for(let s=0;s<t;s++){const o=e[s].slice(0);for(let a=0;a<r;a++)o[a]-=n[a];i[s]=o}return i}function ngt(e,t){if(e.length===0)return null;e=tgt(e);const n=q0t(e);return K0t(n,t)}function rgt(e,t){return V0t(ngt(e,t))}function igt(e,t){let n=Ai;e==="snr"?n=jW:e==="std"&&(n=l1);const r=Array.from(new Set(t.flatMap(({origin:o,destination:a})=>[o,a]))),i=new Map(r.map((o,a)=>[o,a])),s=Array.from({length:r.length},()=>Array(r.length).fill(0));return t.forEach(o=>{const{origin:a,destination:u}=o,l=n(o)||0;s[i.get(a)][i.get(u)]=l}),{matrix:s,nodes:r}}function j_e(e,t,n){const{matrix:r,nodes:i}=igt(t,n);let s,o;return e==="optimal"?(s=egt(),s.distance(mc.euclidean),s.linkage("complete"),o=s(r)):(s=rgt,o=s(r)),X0t(i,o)}function z_e(e,t,n){const[r,i]=D.useState(null),[s,o]=D.useState(null);return D.useLayoutEffect(()=>{if(e.length>1){let a;t==="none"?a=null:a=j_e(t,n,e),i(a),o(a)}},[e,t,n]),{orderedOrigins:r,orderedDestinations:s,setOrderedOrigins:i,setOrderedDestinations:o}}const U_e=Object.freeze(Object.defineProperty({__proto__:null,getClusterOrder:j_e,useOrderingState:z_e},Symbol.toStringTag,{value:"Module"}));function V_e(e){const[t,n]=D.useState([]),[r,i]=D.useState(null),[s,o]=D.useState([]),[a,u]=D.useState(null),[l,c]=D.useState(null);return D.useEffect(()=>{e&&(n(e.answerNodes),i(e.orderingNode),o(e.linkMarks),c(e.originHighlight),u(e.destinationHighlight))},[e]),{destinationHighlight:a,setDestinationHighlight:u,originHighlight:l,setOriginHighlight:c,answerNodes:t,setAnswerNodes:n,orderingNode:r,setOrderingNode:i,linkMarks:s,setLinkMarks:o}}const H_e=Object.freeze(Object.defineProperty({__proto__:null,useReplayState:V_e},Symbol.toStringTag,{value:"Module"})),sgt={showConfigurationPanel:!1,colorScheme:Qu.Viridis,markContrast:25,encoding:nr.Mean,showTooltip:!1,isSnr:!1,clusterMode:o6.None,clusterVar:a6.Mean,nMeans:5,nDevs:5},ogt=(e,t)=>({...t,...Object.fromEntries(Object.entries(e).filter(([n,r])=>r!==void 0))});function q_e(e){const t=ogt(e,sgt),[n,r]=D.useState(t.colorScheme),[i,s]=D.useState(t.markContrast),[o,a]=D.useState(t.encoding),[u,l]=D.useState(t.showTooltip),[c,d]=D.useState(t.isSnr),[f,h]=D.useState(t.clusterMode),[p,m]=D.useState(t.clusterVar),[y,v]=D.useState(t.nMeans),[b,w]=D.useState(t.nDevs);return{...t,colorScheme:n,markContrast:i,encoding:o,showTooltip:u,isSnr:c,clusterMode:f,clusterVar:p,nMeans:y,nDevs:b,setColorScheme:r,setMarkContrast:s,setEncoding:a,setShowTooltip:l,setIsSnr:d,setClusterMode:h,setClusterVar:m,setNMeans:v,setNDevs:w}}const W_e=Object.freeze(Object.defineProperty({__proto__:null,useConfigProps:q_e},Symbol.toStringTag,{value:"Module"}));function agt(){const{setAnswerNodes:e,trrack:t,actions:n,setAnswer:r}=pc();return T.jsx(tn,{size:"s",onClick:()=>{e([]),t==null||t.apply("Set Answer",n==null?void 0:n.setAnswerNodes([])),r({status:!0,provenanceGraph:t==null?void 0:t.graph.backend,answers:{answerNodes:[]}})},children:u6.ClearNodeSelection})}function ugt(){const{setLinkMarks:e}=pc();return T.jsx(Es,{gap:"5vh",children:T.jsx(tn,{size:"s",onClick:()=>{e([])},children:u6.ClearLinkSelection})})}function G_e(){return T.jsxs(Es,{children:[T.jsx(ugt,{}),T.jsx(agt,{})]})}const Y_e=Object.freeze(Object.defineProperty({__proto__:null,InteractionButtons:G_e},Symbol.toStringTag,{value:"Module"})),lgt="modulepreload",cgt=function(e){return"/revisit/"+e},tae={},nae=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(n.map(u=>{if(u=cgt(u),u in tae)return;tae[u]=!0;const l=u.endsWith(".css"),c=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${c}`))return;const d=document.createElement("link");if(d.rel=l?"stylesheet":lgt,l||(d.as="script"),d.crossOrigin="",d.href=u,a&&d.setAttribute("nonce",a),document.head.appendChild(d),l)return new Promise((f,h)=>{d.addEventListener("load",f),d.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return t().catch(s)})},dgt=Object.assign({"/public/matrices/data/tasks_data.txt":()=>nae(()=>import("./tasks_data-DzJatG4n.js"),[]),"/public/matrices/data/training_data.txt":()=>nae(()=>import("./training_data-CWUhbmEg.js"),[])}),fgt=Object.keys(dgt).map(e=>e.replace("/public/matrices/data/",""));function K_e({configProps:e,dataname:t,setDataname:n}){const{showTooltip:r,encoding:i,colorScheme:s,markContrast:o,nMeans:a,nDevs:u,clusterMode:l,clusterVar:c,setShowTooltip:d,setEncoding:f,setColorScheme:h,setMarkContrast:p,setClusterMode:m,setClusterVar:y,setNMeans:v,setNDevs:b,showConfigurationPanel:w}=e,[E,_]=D.useState(!1);return T.jsxs(Se,{style:{position:"absolute",top:80,left:500},children:[!w&&!E&&T.jsx(uV,{opened:E,onClick:()=>_(C=>!C),size:"lg"}),T.jsx(vd,{opened:E,onClose:()=>_(!1),position:"left",size:300,padding:"md",withOverlay:!1,title:"Configuration",children:T.jsxs(Es,{gap:"md",children:[T.jsx(Ao,{label:"Tooltip",checked:r,onChange:C=>d(C.currentTarget.checked)}),T.jsx(my,{label:"Data file:",value:t,onChange:C=>n(C.currentTarget.value),data:fgt}),T.jsx(my,{label:"Encoding:",value:i,onChange:C=>f(C.currentTarget.value),data:Object.values(nr)}),T.jsx(my,{label:"Color scheme:",value:s,onChange:C=>h(C.currentTarget.value),data:Object.values(Qu)}),T.jsxs(Es,{gap:"xs",children:[T.jsxs(Je,{size:"sm",children:["Grey Mark contrast:",o]}),T.jsx(Xv,{min:0,max:100,value:o,onChange:p})]}),T.jsx(my,{label:"Cluster mode:",value:l,onChange:C=>m(C.currentTarget.value),data:Object.values(o6)}),T.jsx(my,{label:"Cluster variable:",value:c,onChange:C=>y(C.currentTarget.value),data:Object.values(a6)}),T.jsxs(Es,{gap:"xs",children:[T.jsxs(Je,{size:"sm",children:["Mean Steps:",a]}),T.jsx(Xv,{min:2,max:5,value:a,onChange:v})]}),T.jsxs(Es,{gap:"xs",children:[T.jsxs(Je,{size:"sm",children:["Deviation Steps:",u]}),T.jsx(Xv,{min:2,max:5,value:u,onChange:b})]})]})})]})}const X_e=Object.freeze(Object.defineProperty({__proto__:null,default:K_e},Symbol.toStringTag,{value:"Module"})),Vg={top:100,left:120,right:5,bottom:5};function Q_e({config:e,data:t,dataname:n,setDataname:r,provenanceState:i,actions:s,trrack:o,setAnswer:a}){const u=q_e(e),l=V_e(i),c=z_e(t,u.clusterMode,u.clusterVar),[d,{width:f,height:h}]=_w(),p=Math.min(f-Vg.left-Vg.right,h-Vg.top-Vg.bottom),m=D.useMemo(()=>c.orderedOrigins||[...new Set(t.map(lx))].sort(),[t,c.orderedOrigins]),y=D.useMemo(()=>c.orderedDestinations||[...new Set(t.map(cx))].sort(),[t,c.orderedDestinations]),v=D.useMemo(()=>jj().domain(m).range([0,p]),[p,m]),b=D.useMemo(()=>jj().domain(y).range([0,p]),[p,y]),w=v.bandwidth(),{meanMin:E,meanMax:_}=D.useMemo(()=>({meanMin:0,meanMax:250}),[t]),{devMin:C,devMax:S}=D.useMemo(()=>({devMin:0,devMax:150}),[t,u.isSnr]),{meanScale:k,devScale:R,alternateScale:N}=$_e(u.encoding,u.colorScheme,w,E,_,C,S,u.isSnr,u.nMeans,u.nDevs),O=N_e(u.encoding,u.markContrast,u.isSnr,k,R,N),F=D.useMemo(()=>({data:t,width:f,height:h,size:p,margin:Vg,cellSize:w,meanMin:E,meanMax:_,devMin:C,devMax:S,meanScale:k,devScale:R,alternateScale:N,originScale:v,destinationScale:b,cellRenderer:O,configProps:u,...l,...c,actions:s,trrack:o,setAnswer:a}),[t,f,h,p,w,E,_,C,S,k,R,v,b,O,u,l,c,s,o,a]),$=!Number.isNaN(p)&&p>0;return T.jsx(l_e,{value:F,children:T.jsxs("div",{className:"container",children:[T.jsx(K_e,{configProps:u,dataname:n,setDataname:r})," ",T.jsx("svg",{ref:d,className:"matrix-svg",children:$&&T.jsxs("g",{transform:`translate(${Vg.left},${Vg.top})`,onMouseLeave:()=>{l.setOriginHighlight(null),l.setDestinationHighlight(null)},children:[T.jsx(C_e,{}),T.jsxs("g",{className:"axes",children:[T.jsx(f_e,{}),T.jsx(p_e,{})]}),T.jsx(v_e,{}),T.jsx(g_e,{}),e.clusterMarks&&T.jsx(I_e,{size:3,marks:e.clusterMarks}),T.jsx(R_e,{marks:l.linkMarks}),u.showTooltip&&T.jsx(A_e,{})]})}),$&&T.jsxs(Es,{gap:"5vh",children:[T.jsx(G_e,{}),T.jsx(__e,{})]})]})})}const J_e=Object.freeze(Object.defineProperty({__proto__:null,Matrix:Q_e},Symbol.toStringTag,{value:"Module"}));function rae({parameters:e,setAnswer:t,provenanceState:n}){const[r,i]=D.useState(null),[s,o]=D.useState(e.dataset??""),a=D.useCallback(async c=>{if(c)try{const d=await fetch(`data/${c}`);if(!d.ok)throw new Error("Failed to fetch file");const p=(await d.text()).split(`
`).filter(m=>m.trim().length>0).map(m=>JSON.parse(m)).filter(m=>m.origin>=m.destination);p.forEach(m=>{if(m.destination!==m.origin){const y={...m};y.origin=m.destination,y.destination=m.origin,p.push(y)}}),i(p)}catch(d){console.error("Error loading JSON:",d)}},[]);D.useEffect(()=>{a(s)},[a,s]);const{actions:u,trrack:l}=D.useMemo(()=>{const c=J1.create(),d=c.register("set-answer-nodes",(v,b)=>{v.answerNodes=b}),f=c.register("set-ordering-node",(v,b)=>{v.orderingNode=b}),h=c.register("set-link-marks",(v,b)=>{v.linkMarks=b}),p=c.register("highlight-origin-node",(v,b)=>{v.originHighlight=b}),m=c.register("highlight-destination-node",(v,b)=>{v.destinationHighlight=b}),y=CS({initialState:{answerNodes:[],orderingNode:null,linkMarks:[],originHighlight:null,destinationHighlight:null},registry:c});return{actions:{setAnswerNodes:d,setOrderingNode:f,setLinkMarks:h,setOriginHighlight:p,setDestinationHighlight:m},trrack:y}},[]);return r?T.jsx(Q_e,{config:e,data:r,dataname:s,setDataname:o,provenanceState:n,actions:u,trrack:l,setAnswer:t}):T.jsx(bd,{})}const Z_e=Object.freeze(Object.defineProperty({__proto__:null,Stimuli:rae,default:rae},Symbol.toStringTag,{value:"Module"})),eTe=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));function vo(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var hgt=typeof Symbol=="function"&&Symbol.observable||"@@observable",iae=hgt,YL=()=>Math.random().toString(36).substring(7).split("").join("."),pgt={INIT:`@@redux/INIT${YL()}`,REPLACE:`@@redux/REPLACE${YL()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${YL()}`},nN=pgt;function zW(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function tTe(e,t,n){if(typeof e!="function")throw new Error(vo(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(vo(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(vo(1));return n(tTe)(e,t)}let r=e,i=t,s=new Map,o=s,a=0,u=!1;function l(){o===s&&(o=new Map,s.forEach((y,v)=>{o.set(v,y)}))}function c(){if(u)throw new Error(vo(3));return i}function d(y){if(typeof y!="function")throw new Error(vo(4));if(u)throw new Error(vo(5));let v=!0;l();const b=a++;return o.set(b,y),function(){if(v){if(u)throw new Error(vo(6));v=!1,l(),o.delete(b),s=null}}}function f(y){if(!zW(y))throw new Error(vo(7));if(typeof y.type>"u")throw new Error(vo(8));if(typeof y.type!="string")throw new Error(vo(17));if(u)throw new Error(vo(9));try{u=!0,i=r(i,y)}finally{u=!1}return(s=o).forEach(b=>{b()}),y}function h(y){if(typeof y!="function")throw new Error(vo(10));r=y,f({type:nN.REPLACE})}function p(){const y=d;return{subscribe(v){if(typeof v!="object"||v===null)throw new Error(vo(11));function b(){const E=v;E.next&&E.next(c())}return b(),{unsubscribe:y(b)}},[iae](){return this}}}return f({type:nN.INIT}),{dispatch:f,subscribe:d,getState:c,replaceReducer:h,[iae]:p}}function mgt(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:nN.INIT})>"u")throw new Error(vo(12));if(typeof n(void 0,{type:nN.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(vo(13))})}function ggt(e){const t=Object.keys(e),n={};for(let s=0;s<t.length;s++){const o=t[s];typeof e[o]=="function"&&(n[o]=e[o])}const r=Object.keys(n);let i;try{mgt(n)}catch(s){i=s}return function(o={},a){if(i)throw i;let u=!1;const l={};for(let c=0;c<r.length;c++){const d=r[c],f=n[d],h=o[d],p=f(h,a);if(typeof p>"u")throw a&&a.type,new Error(vo(14));l[d]=p,u=u||p!==h}return u=u||r.length!==Object.keys(o).length,u?l:o}}function rN(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function ygt(...e){return t=>(n,r)=>{const i=t(n,r);let s=()=>{throw new Error(vo(15))};const o={getState:i.getState,dispatch:(u,...l)=>s(u,...l)},a=e.map(u=>u(o));return s=rN(...a)(i.dispatch),{...i,dispatch:s}}}function bgt(e){return zW(e)&&"type"in e&&typeof e.type=="string"}var nTe=Symbol.for("immer-nothing"),sae=Symbol.for("immer-draftable"),yl=Symbol.for("immer-state");function Wc(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Kx=Object.getPrototypeOf;function c1(e){return!!e&&!!e[yl]}function Np(e){var t;return e?rTe(e)||Array.isArray(e)||!!e[sae]||!!((t=e.constructor)!=null&&t[sae])||c6(e)||d6(e):!1}var vgt=Object.prototype.constructor.toString();function rTe(e){if(!e||typeof e!="object")return!1;const t=Kx(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===vgt}function iN(e,t){l6(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function l6(e){const t=e[yl];return t?t.type_:Array.isArray(e)?1:c6(e)?2:d6(e)?3:0}function Hj(e,t){return l6(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function iTe(e,t,n){const r=l6(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function xgt(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function c6(e){return e instanceof Map}function d6(e){return e instanceof Set}function hy(e){return e.copy_||e.base_}function qj(e,t){if(c6(e))return new Map(e);if(d6(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=rTe(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[yl];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const o=i[s],a=r[o];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(r[o]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[o]})}return Object.create(Kx(e),r)}else{const r=Kx(e);if(r!==null&&n)return{...e};const i=Object.create(r);return Object.assign(i,e)}}function UW(e,t=!1){return f6(e)||c1(e)||!Np(e)||(l6(e)>1&&(e.set=e.add=e.clear=e.delete=wgt),Object.freeze(e),t&&Object.entries(e).forEach(([n,r])=>UW(r,!0))),e}function wgt(){Wc(2)}function f6(e){return Object.isFrozen(e)}var Egt={};function d1(e){const t=Egt[e];return t||Wc(0,e),t}var lC;function sTe(){return lC}function _gt(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function oae(e,t){t&&(d1("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Wj(e){Gj(e),e.drafts_.forEach(Tgt),e.drafts_=null}function Gj(e){e===lC&&(lC=e.parent_)}function aae(e){return lC=_gt(lC,e)}function Tgt(e){const t=e[yl];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function uae(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[yl].modified_&&(Wj(t),Wc(4)),Np(e)&&(e=sN(t,e),t.parent_||oN(t,e)),t.patches_&&d1("Patches").generateReplacementPatches_(n[yl].base_,e,t.patches_,t.inversePatches_)):e=sN(t,n,[]),Wj(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==nTe?e:void 0}function sN(e,t,n){if(f6(t))return t;const r=t[yl];if(!r)return iN(t,(i,s)=>lae(e,r,t,i,s,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return oN(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let s=i,o=!1;r.type_===3&&(s=new Set(i),i.clear(),o=!0),iN(s,(a,u)=>lae(e,r,i,a,u,n,o)),oN(e,i,!1),n&&e.patches_&&d1("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function lae(e,t,n,r,i,s,o){if(c1(i)){const a=s&&t&&t.type_!==3&&!Hj(t.assigned_,r)?s.concat(r):void 0,u=sN(e,i,a);if(iTe(n,r,u),c1(u))e.canAutoFreeze_=!1;else return}else o&&n.add(i);if(Np(i)&&!f6(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;sN(e,i),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&oN(e,i)}}function oN(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&UW(t,n)}function Cgt(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:sTe(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=VW;n&&(i=[r],s=cC);const{revoke:o,proxy:a}=Proxy.revocable(i,s);return r.draft_=a,r.revoke_=o,a}var VW={get(e,t){if(t===yl)return e;const n=hy(e);if(!Hj(n,t))return Sgt(e,n,t);const r=n[t];return e.finalized_||!Np(r)?r:r===KL(e.base_,t)?(XL(e),e.copy_[t]=Kj(r,e)):r},has(e,t){return t in hy(e)},ownKeys(e){return Reflect.ownKeys(hy(e))},set(e,t,n){const r=oTe(hy(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=KL(hy(e),t),s=i==null?void 0:i[yl];if(s&&s.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(xgt(n,i)&&(n!==void 0||Hj(e.base_,t)))return!0;XL(e),Yj(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return KL(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,XL(e),Yj(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=hy(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){Wc(11)},getPrototypeOf(e){return Kx(e.base_)},setPrototypeOf(){Wc(12)}},cC={};iN(VW,(e,t)=>{cC[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});cC.deleteProperty=function(e,t){return cC.set.call(this,e,t,void 0)};cC.set=function(e,t,n){return VW.set.call(this,e[0],t,n,e[0])};function KL(e,t){const n=e[yl];return(n?hy(n):e)[t]}function Sgt(e,t,n){var i;const r=oTe(t,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(e.draft_):void 0}function oTe(e,t){if(!(t in e))return;let n=Kx(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Kx(n)}}function Yj(e){e.modified_||(e.modified_=!0,e.parent_&&Yj(e.parent_))}function XL(e){e.copy_||(e.copy_=qj(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var Agt=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const s=n;n=t;const o=this;return function(u=s,...l){return o.produce(u,c=>n.call(this,c,...l))}}typeof n!="function"&&Wc(6),r!==void 0&&typeof r!="function"&&Wc(7);let i;if(Np(t)){const s=aae(this),o=Kj(t,void 0);let a=!0;try{i=n(o),a=!1}finally{a?Wj(s):Gj(s)}return oae(s,r),uae(i,s)}else if(!t||typeof t!="object"){if(i=n(t),i===void 0&&(i=t),i===nTe&&(i=void 0),this.autoFreeze_&&UW(i,!0),r){const s=[],o=[];d1("Patches").generateReplacementPatches_(t,i,s,o),r(s,o)}return i}else Wc(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(o,...a)=>this.produceWithPatches(o,u=>t(u,...a));let r,i;return[this.produce(t,n,(o,a)=>{r=o,i=a}),r,i]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Np(e)||Wc(8),c1(e)&&(e=kgt(e));const t=aae(this),n=Kj(e,void 0);return n[yl].isManual_=!0,Gj(t),n}finishDraft(e,t){const n=e&&e[yl];(!n||!n.isManual_)&&Wc(9);const{scope_:r}=n;return oae(r,t),uae(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=d1("Patches").applyPatches_;return c1(e)?r(e,t):this.produce(e,i=>r(i,t))}};function Kj(e,t){const n=c6(e)?d1("MapSet").proxyMap_(e,t):d6(e)?d1("MapSet").proxySet_(e,t):Cgt(e,t);return(t?t.scope_:sTe()).drafts_.push(n),n}function kgt(e){return c1(e)||Wc(10,e),aTe(e)}function aTe(e){if(!Np(e)||f6(e))return e;const t=e[yl];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=qj(e,t.scope_.immer_.useStrictShallowCopy_)}else n=qj(e,!0);return iN(n,(r,i)=>{iTe(n,r,aTe(i))}),t&&(t.finalized_=!1),n}var bl=new Agt,uTe=bl.produce;bl.produceWithPatches.bind(bl);bl.setAutoFreeze.bind(bl);bl.setUseStrictShallowCopy.bind(bl);bl.applyPatches.bind(bl);bl.createDraft.bind(bl);bl.finishDraft.bind(bl);function Igt(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function Rgt(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function Dgt(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(n=>typeof n=="function")){const n=e.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${t}[${n}]`)}}var cae=e=>Array.isArray(e)?e:[e];function Pgt(e){const t=Array.isArray(e[0])?e[0]:e;return Dgt(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function Ngt(e,t){const n=[],{length:r}=e;for(let i=0;i<r;i++)n.push(e[i].apply(null,t));return n}var Ogt=class{constructor(e){this.value=e}deref(){return this.value}},$gt=typeof WeakRef<"u"?WeakRef:Ogt,Mgt=0,dae=1;function vI(){return{s:Mgt,v:void 0,o:null,p:null}}function lTe(e,t={}){let n=vI();const{resultEqualityCheck:r}=t;let i,s=0;function o(){var d;let a=n;const{length:u}=arguments;for(let f=0,h=u;f<h;f++){const p=arguments[f];if(typeof p=="function"||typeof p=="object"&&p!==null){let m=a.o;m===null&&(a.o=m=new WeakMap);const y=m.get(p);y===void 0?(a=vI(),m.set(p,a)):a=y}else{let m=a.p;m===null&&(a.p=m=new Map);const y=m.get(p);y===void 0?(a=vI(),m.set(p,a)):a=y}}const l=a;let c;if(a.s===dae)c=a.v;else if(c=e.apply(null,arguments),s++,r){const f=((d=i==null?void 0:i.deref)==null?void 0:d.call(i))??i;f!=null&&r(f,c)&&(c=f,s!==0&&s--),i=typeof c=="object"&&c!==null||typeof c=="function"?new $gt(c):c}return l.s=dae,l.v=c,c}return o.clearCache=()=>{n=vI(),o.resetResultsCount()},o.resultsCount=()=>s,o.resetResultsCount=()=>{s=0},o}function Lgt(e,...t){const n=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,r=(...i)=>{let s=0,o=0,a,u={},l=i.pop();typeof l=="object"&&(u=l,l=i.pop()),Igt(l,`createSelector expects an output function after the inputs, but received: [${typeof l}]`);const c={...n,...u},{memoize:d,memoizeOptions:f=[],argsMemoize:h=lTe,argsMemoizeOptions:p=[],devModeChecks:m={}}=c,y=cae(f),v=cae(p),b=Pgt(i),w=d(function(){return s++,l.apply(null,arguments)},...y),E=h(function(){o++;const C=Ngt(b,arguments);return a=w.apply(null,C),a},...v);return Object.assign(E,{resultFunc:l,memoizedResultFunc:w,dependencies:b,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>a,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:d,argsMemoize:h})};return Object.assign(r,{withTypes:()=>r}),r}var cTe=Lgt(lTe),Fgt=Object.assign((e,t=cTe)=>{Rgt(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const n=Object.keys(e),r=n.map(s=>e[s]);return t(r,(...s)=>s.reduce((o,a,u)=>(o[n[u]]=a,o),{}))},{withTypes:()=>Fgt});function dTe(e){return({dispatch:n,getState:r})=>i=>s=>typeof s=="function"?s(n,r,e):i(s)}var Bgt=dTe(),jgt=dTe,zgt=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?rN:rN.apply(null,arguments)};function fae(e,t){function n(...r){if(t){let i=t(...r);if(!i)throw new Error(pp(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:r[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=r=>bgt(r)&&r.type===e,n}var fTe=class xT extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,xT.prototype)}static get[Symbol.species](){return xT}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new xT(...t[0].concat(this)):new xT(...t.concat(this))}};function hae(e){return Np(e)?uTe(e,()=>{}):e}function pae(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}function Ugt(e){return typeof e=="boolean"}var Vgt=()=>function(t){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=t??{};let o=new fTe;return n&&(Ugt(n)?o.push(Bgt):o.push(jgt(n.extraArgument))),o},Hgt="RTK_autoBatch",mae=e=>t=>{setTimeout(t,e)},qgt=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let i=!0,s=!1,o=!1;const a=new Set,u=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:mae(10):e.type==="callback"?e.queueNotification:mae(e.timeout),l=()=>{o=!1,s&&(s=!1,a.forEach(c=>c()))};return Object.assign({},r,{subscribe(c){const d=()=>i&&c(),f=r.subscribe(d);return a.add(c),()=>{f(),a.delete(c)}},dispatch(c){var d;try{return i=!((d=c==null?void 0:c.meta)!=null&&d[Hgt]),s=!i,s&&(o||(o=!0,u(l))),r.dispatch(c)}finally{i=!0}}})},Wgt=e=>function(n){const{autoBatch:r=!0}=n??{};let i=new fTe(e);return r&&i.push(qgt(typeof r=="object"?r:void 0)),i};function Ggt(e){const t=Vgt(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:s=void 0,enhancers:o=void 0}=e;let a;if(typeof n=="function")a=n;else if(zW(n))a=ggt(n);else throw new Error(pp(1));let u;typeof r=="function"?u=r(t):u=t();let l=rN;i&&(l=zgt({trace:!1,...typeof i=="object"&&i}));const c=ygt(...u),d=Wgt(c);let f=typeof o=="function"?o(d):d();const h=l(...f);return tTe(a,s,h)}function hTe(e){const t={},n=[];let r;const i={addCase(s,o){const a=typeof s=="string"?s:s.type;if(!a)throw new Error(pp(28));if(a in t)throw new Error(pp(29));return t[a]=o,i},addMatcher(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase(s){return r=s,i}};return e(i),[t,n,r]}function Ygt(e){return typeof e=="function"}function Kgt(e,t){let[n,r,i]=hTe(t),s;if(Ygt(e))s=()=>hae(e());else{const a=hae(e);s=()=>a}function o(a=s(),u){let l=[n[u.type],...r.filter(({matcher:c})=>c(u)).map(({reducer:c})=>c)];return l.filter(c=>!!c).length===0&&(l=[i]),l.reduce((c,d)=>{if(d)if(c1(c)){const h=d(c,u);return h===void 0?c:h}else{if(Np(c))return uTe(c,f=>d(f,u));{const f=d(c,u);if(f===void 0){if(c===null)return c;throw Error("A case reducer on a non-draftable value must not return undefined")}return f}}return c},a)}return o.getInitialState=s,o}var Xgt=Symbol.for("rtk-slice-createasyncthunk");function Qgt(e,t){return`${e}/${t}`}function Jgt({creators:e}={}){var n;const t=(n=e==null?void 0:e.asyncThunk)==null?void 0:n[Xgt];return function(i){const{name:s,reducerPath:o=s}=i;if(!s)throw new Error(pp(11));const a=(typeof i.reducers=="function"?i.reducers(tyt()):i.reducers)||{},u=Object.keys(a),l={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},c={addCase(w,E){const _=typeof w=="string"?w:w.type;if(!_)throw new Error(pp(12));if(_ in l.sliceCaseReducersByType)throw new Error(pp(13));return l.sliceCaseReducersByType[_]=E,c},addMatcher(w,E){return l.sliceMatchers.push({matcher:w,reducer:E}),c},exposeAction(w,E){return l.actionCreators[w]=E,c},exposeCaseReducer(w,E){return l.sliceCaseReducersByName[w]=E,c}};u.forEach(w=>{const E=a[w],_={reducerName:w,type:Qgt(s,w),createNotation:typeof i.reducers=="function"};ryt(E)?syt(_,E,c,t):nyt(_,E,c)});function d(){const[w={},E=[],_=void 0]=typeof i.extraReducers=="function"?hTe(i.extraReducers):[i.extraReducers],C={...w,...l.sliceCaseReducersByType};return Kgt(i.initialState,S=>{for(let k in C)S.addCase(k,C[k]);for(let k of l.sliceMatchers)S.addMatcher(k.matcher,k.reducer);for(let k of E)S.addMatcher(k.matcher,k.reducer);_&&S.addDefaultCase(_)})}const f=w=>w,h=new Map;let p;function m(w,E){return p||(p=d()),p(w,E)}function y(){return p||(p=d()),p.getInitialState()}function v(w,E=!1){function _(S){let k=S[w];return typeof k>"u"&&E&&(k=y()),k}function C(S=f){const k=pae(h,E,()=>new WeakMap);return pae(k,S,()=>{const R={};for(const[N,O]of Object.entries(i.selectors??{}))R[N]=Zgt(O,S,y,E);return R})}return{reducerPath:w,getSelectors:C,get selectors(){return C(_)},selectSlice:_}}const b={name:s,reducer:m,actions:l.actionCreators,caseReducers:l.sliceCaseReducersByName,getInitialState:y,...v(o),injectInto(w,{reducerPath:E,..._}={}){const C=E??o;return w.inject({reducerPath:C,reducer:m},_),{...b,...v(C,!0)}}};return b}}function Zgt(e,t,n,r){function i(s,...o){let a=t(s);return typeof a>"u"&&r&&(a=n()),e(a,...o)}return i.unwrapped=e,i}var eyt=Jgt();function tyt(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function nyt({type:e,reducerName:t,createNotation:n},r,i){let s,o;if("reducer"in r){if(n&&!iyt(r))throw new Error(pp(17));s=r.reducer,o=r.prepare}else s=r;i.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,o?fae(e,o):fae(e))}function ryt(e){return e._reducerDefinitionType==="asyncThunk"}function iyt(e){return e._reducerDefinitionType==="reducerWithPrepare"}function syt({type:e,reducerName:t},n,r,i){if(!i)throw new Error(pp(18));const{payloadCreator:s,fulfilled:o,pending:a,rejected:u,settled:l,options:c}=n,d=i(e,s,c);r.exposeAction(t,d),o&&r.addCase(d.fulfilled,o),a&&r.addCase(d.pending,a),u&&r.addCase(d.rejected,u),l&&r.addMatcher(d.settled,l),r.exposeCaseReducer(t,{fulfilled:o||xI,pending:a||xI,rejected:u||xI,settled:l||xI})}function xI(){}function pp(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}function h6(e){return e.baseComponent!==void 0}function vl(e){return e.order==="dynamic"}function Vf(e){return vl(e)?[e.id]:e.components.flatMap(t=>typeof t=="string"?t:Vf(t))}function pTe(e){return vl(e)?[e]:e.components.flatMap(t=>typeof t=="string"?[]:pTe(t))}function gae(e,t){return pTe(t).find(r=>r.id===e)}function mTe(e){var t;return vl(e)?[]:[...e.components.flatMap(n=>typeof n=="string"?n:vl(n)?[]:mTe(n)),...((t=e.interruptions)==null?void 0:t.flatMap(n=>n.components))||[]]}function gTe(e,t,n){let r=0;for(let i=0;i<e.components.length;i+=1){const s=e.components[i];if(typeof s=="string"){if(typeof t=="number"&&t===n+r)return[{currentBlock:e,firstIndex:n,lastIndex:n+Vf(e).length-1}];if(typeof t=="string"&&e.orderPath===t)return[{currentBlock:e,firstIndex:n,lastIndex:n+Vf(e).length-1}];r+=1}else{const o=gTe(s,t,n+r);if(typeof o=="number")r+=o;else{const a={currentBlock:e,firstIndex:n,lastIndex:o[0].lastIndex};return[...o,a]}}}return r}function HW(e,t){const n=gTe(e,t,0);return typeof n=="number"?null:n}function yTe(e,t,n){if(e.id===t)return{found:!0,distance:n};let r=0;for(let i=0;i<e.components.length;i+=1){const s=e.components[i];if(typeof s=="string")r+=1;else{const o=yTe(s,t,n+r);if(o.found)return o;r+=o.distance}}return{found:!1,distance:r}}function oyt(e,t){const n=yTe(e,t,0);return n.found?n.distance:-1}function bTe(e,t="root"){if(vl(e))return[];const n=[],r={};return e.components.forEach((i,s)=>{typeof i=="string"?(n.push({componentName:i,orderPath:t,timesSeenInBlock:r[i]||0}),r[i]=r[i]?r[i]+1:1):n.push(...bTe(i,`${t}-${s}`))}),n}function qW(e,t){return typeof e=="string"?e:vl(e)?{...e,orderPath:t,components:[]}:{...e,orderPath:t,order:e.order,components:e.components.map((n,r)=>qW(n,`${t}-${r}`))}}var wT={exports:{}};wT.exports;var yae;function ayt(){return yae||(yae=1,function(e,t){var n=200,r="__lodash_hash_undefined__",i=800,s=16,o=9007199254740991,a="[object Arguments]",u="[object Array]",l="[object AsyncFunction]",c="[object Boolean]",d="[object Date]",f="[object Error]",h="[object Function]",p="[object GeneratorFunction]",m="[object Map]",y="[object Number]",v="[object Null]",b="[object Object]",w="[object Proxy]",E="[object RegExp]",_="[object Set]",C="[object String]",S="[object Undefined]",k="[object WeakMap]",R="[object ArrayBuffer]",N="[object DataView]",O="[object Float32Array]",F="[object Float64Array]",$="[object Int8Array]",z="[object Int16Array]",q="[object Int32Array]",W="[object Uint8Array]",J="[object Uint8ClampedArray]",K="[object Uint16Array]",Z="[object Uint32Array]",U=/[\\^$.*+?()[\]{}|]/g,L=/^\[object .+?Constructor\]$/,Y=/^(?:0|[1-9]\d*)$/,j={};j[O]=j[F]=j[$]=j[z]=j[q]=j[W]=j[J]=j[K]=j[Z]=!0,j[a]=j[u]=j[R]=j[c]=j[N]=j[d]=j[f]=j[h]=j[m]=j[y]=j[b]=j[E]=j[_]=j[C]=j[k]=!1;var G=typeof ws=="object"&&ws&&ws.Object===Object&&ws,X=typeof self=="object"&&self&&self.Object===Object&&self,ne=G||X||Function("return this")(),pe=t&&!t.nodeType&&t,de=pe&&!0&&e&&!e.nodeType&&e,xe=de&&de.exports===pe,Ce=xe&&G.process,ue=function(){try{var le=de&&de.require&&de.require("util").types;return le||Ce&&Ce.binding&&Ce.binding("util")}catch{}}(),se=ue&&ue.isTypedArray;function me(le,ye,Be){switch(Be.length){case 0:return le.call(ye);case 1:return le.call(ye,Be[0]);case 2:return le.call(ye,Be[0],Be[1]);case 3:return le.call(ye,Be[0],Be[1],Be[2])}return le.apply(ye,Be)}function be(le,ye){for(var Be=-1,Bt=Array(le);++Be<le;)Bt[Be]=ye(Be);return Bt}function Le(le){return function(ye){return le(ye)}}function Ue(le,ye){return le==null?void 0:le[ye]}function Ne(le,ye){return function(Be){return le(ye(Be))}}var je=Array.prototype,Ke=Function.prototype,ut=Object.prototype,pt=ne["__core-js_shared__"],xt=Ke.toString,De=ut.hasOwnProperty,wt=function(){var le=/[^.]+$/.exec(pt&&pt.keys&&pt.keys.IE_PROTO||"");return le?"Symbol(src)_1."+le:""}(),Kt=ut.toString,Te=xt.call(Object),Oe=RegExp("^"+xt.call(De).replace(U,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),lt=xe?ne.Buffer:void 0,_t=ne.Symbol,St=ne.Uint8Array;lt&&lt.allocUnsafe;var en=Ne(Object.getPrototypeOf,Object),En=Object.create,sr=ut.propertyIsEnumerable,Jr=je.splice,wn=_t?_t.toStringTag:void 0,An=function(){try{var le=it(Object,"defineProperty");return le({},"",{}),le}catch{}}(),Hr=lt?lt.isBuffer:void 0,Ln=Math.max,Ns=Date.now,Zr=it(ne,"Map"),qr=it(Object,"create"),ai=function(){function le(){}return function(ye){if(!Dl(ye))return{};if(En)return En(ye);le.prototype=ye;var Be=new le;return le.prototype=void 0,Be}}();function or(le){var ye=-1,Be=le==null?0:le.length;for(this.clear();++ye<Be;){var Bt=le[ye];this.set(Bt[0],Bt[1])}}function Os(){this.__data__=qr?qr(null):{},this.size=0}function Al(le){var ye=this.has(le)&&delete this.__data__[le];return this.size-=ye?1:0,ye}function zo(le){var ye=this.__data__;if(qr){var Be=ye[le];return Be===r?void 0:Be}return De.call(ye,le)?ye[le]:void 0}function Bu(le){var ye=this.__data__;return qr?ye[le]!==void 0:De.call(ye,le)}function ar(le,ye){var Be=this.__data__;return this.size+=this.has(le)?0:1,Be[le]=qr&&ye===void 0?r:ye,this}or.prototype.clear=Os,or.prototype.delete=Al,or.prototype.get=zo,or.prototype.has=Bu,or.prototype.set=ar;function Wr(le){var ye=-1,Be=le==null?0:le.length;for(this.clear();++ye<Be;){var Bt=le[ye];this.set(Bt[0],Bt[1])}}function br(){this.__data__=[],this.size=0}function $s(le){var ye=this.__data__,Be=xc(ye,le);if(Be<0)return!1;var Bt=ye.length-1;return Be==Bt?ye.pop():Jr.call(ye,Be,1),--this.size,!0}function Zn(le){var ye=this.__data__,Be=xc(ye,le);return Be<0?void 0:ye[Be][1]}function mi(le){return xc(this.__data__,le)>-1}function Ms(le,ye){var Be=this.__data__,Bt=xc(Be,le);return Bt<0?(++this.size,Be.push([le,ye])):Be[Bt][1]=ye,this}Wr.prototype.clear=br,Wr.prototype.delete=$s,Wr.prototype.get=Zn,Wr.prototype.has=mi,Wr.prototype.set=Ms;function as(le){var ye=-1,Be=le==null?0:le.length;for(this.clear();++ye<Be;){var Bt=le[ye];this.set(Bt[0],Bt[1])}}function lo(){this.size=0,this.__data__={hash:new or,map:new(Zr||Wr),string:new or}}function ju(le){var ye=nt(this,le).delete(le);return this.size-=ye?1:0,ye}function gh(le){return nt(this,le).get(le)}function Yn(le){return nt(this,le).has(le)}function kl(le,ye){var Be=nt(this,le),Bt=Be.size;return Be.set(le,ye),this.size+=Be.size==Bt?0:1,this}as.prototype.clear=lo,as.prototype.delete=ju,as.prototype.get=gh,as.prototype.has=Yn,as.prototype.set=kl;function gi(le){var ye=this.__data__=new Wr(le);this.size=ye.size}function Xa(){this.__data__=new Wr,this.size=0}function co(le){var ye=this.__data__,Be=ye.delete(le);return this.size=ye.size,Be}function sm(le){return this.__data__.get(le)}function yh(le){return this.__data__.has(le)}function Od(le,ye){var Be=this.__data__;if(Be instanceof Wr){var Bt=Be.__data__;if(!Zr||Bt.length<n-1)return Bt.push([le,ye]),this.size=++Be.size,this;Be=this.__data__=new as(Bt)}return Be.set(le,ye),this.size=Be.size,this}gi.prototype.clear=Xa,gi.prototype.delete=co,gi.prototype.get=sm,gi.prototype.has=yh,gi.prototype.set=Od;function $d(le,ye){var Be=Ls(le),Bt=!Be&&yi(le),_n=!Be&&!Bt&&wa(le),Kn=!Be&&!Bt&&!_n&&Ag(le),wr=Be||Bt||_n||Kn,yn=wr?be(le.length,String):[],vr=yn.length;for(var Gr in le)wr&&(Gr=="length"||_n&&(Gr=="offset"||Gr=="parent")||Kn&&(Gr=="buffer"||Gr=="byteLength"||Gr=="byteOffset")||Pt(Gr,vr))||yn.push(Gr);return yn}function vc(le,ye,Be){(Be!==void 0&&!fo(le[ye],Be)||Be===void 0&&!(ye in le))&&Fn(le,ye,Be)}function om(le,ye,Be){var Bt=le[ye];(!(De.call(le,ye)&&fo(Bt,Be))||Be===void 0&&!(ye in le))&&Fn(le,ye,Be)}function xc(le,ye){for(var Be=le.length;Be--;)if(fo(le[Be][0],ye))return Be;return-1}function Fn(le,ye,Be){ye=="__proto__"&&An?An(le,ye,{configurable:!0,enumerable:!0,value:Be,writable:!0}):le[ye]=Be}var bh=qe();function us(le){return le==null?le===void 0?S:v:wn&&wn in Object(le)?rt(le):fs(le)}function zu(le){return Ki(le)&&us(le)==a}function ls(le){if(!Dl(le)||kn(le))return!1;var ye=Ja(le)?Oe:L;return ye.test(cm(le))}function wc(le){return Ki(le)&&Eb(le.length)&&!!j[us(le)]}function am(le){if(!Dl(le))return ur(le);var ye=Xt(le),Be=[];for(var Bt in le)Bt=="constructor"&&(ye||!De.call(le,Bt))||Be.push(Bt);return Be}function Il(le,ye,Be,Bt,_n){le!==ye&&bh(ye,function(Kn,wr){if(_n||(_n=new gi),Dl(Kn))cs(le,ye,wr,Be,Il,Bt,_n);else{var yn=Bt?Bt(Rl(le,wr),Kn,wr+"",le,ye,_n):void 0;yn===void 0&&(yn=Kn),vc(le,wr,yn)}},Fd)}function cs(le,ye,Be,Bt,_n,Kn,wr){var yn=Rl(le,Be),vr=Rl(ye,Be),Gr=wr.get(vr);if(Gr){vc(le,Be,Gr);return}var hs=Kn?Kn(yn,vr,Be+"",le,ye,wr):void 0,Pl=hs===void 0;if(Pl){var eu=Ls(vr),vh=!eu&&wa(vr),Xi=!eu&&!vh&&Ag(vr);hs=vr,eu||vh||Xi?Ls(yn)?hs=yn:Ld(yn)?hs=Ee(yn):vh?(Pl=!1,hs=te(vr)):Xi?(Pl=!1,hs=ae(vr)):hs=[]:PE(vr)||yi(vr)?(hs=yn,yi(yn)?hs=Ec(yn):(!Dl(yn)||Ja(yn))&&(hs=mt(vr))):Pl=!1}Pl&&(wr.set(vr,hs),_n(hs,vr,Bt,Kn,wr),wr.delete(vr)),vc(le,Be,hs)}function um(le,ye){return lm(Qa(le,ye,Za),le+"")}var ds=An?function(le,ye){return An(le,"toString",{configurable:!0,enumerable:!1,value:Uu(ye),writable:!0})}:Za;function te(le,ye){return le.slice()}function ge(le){var ye=new le.constructor(le.byteLength);return new St(ye).set(new St(le)),ye}function ae(le,ye){var Be=ge(le.buffer);return new le.constructor(Be,le.byteOffset,le.length)}function Ee(le,ye){var Be=-1,Bt=le.length;for(ye||(ye=Array(Bt));++Be<Bt;)ye[Be]=le[Be];return ye}function Ae(le,ye,Be,Bt){var _n=!Be;Be||(Be={});for(var Kn=-1,wr=ye.length;++Kn<wr;){var yn=ye[Kn],vr=void 0;vr===void 0&&(vr=le[yn]),_n?Fn(Be,yn,vr):om(Be,yn,vr)}return Be}function we(le){return um(function(ye,Be){var Bt=-1,_n=Be.length,Kn=_n>1?Be[_n-1]:void 0,wr=_n>2?Be[2]:void 0;for(Kn=le.length>3&&typeof Kn=="function"?(_n--,Kn):void 0,wr&&un(Be[0],Be[1],wr)&&(Kn=_n<3?void 0:Kn,_n=1),ye=Object(ye);++Bt<_n;){var yn=Be[Bt];yn&&le(ye,yn,Bt,Kn)}return ye})}function qe(le){return function(ye,Be,Bt){for(var _n=-1,Kn=Object(ye),wr=Bt(ye),yn=wr.length;yn--;){var vr=wr[++_n];if(Be(Kn[vr],vr,Kn)===!1)break}return ye}}function nt(le,ye){var Be=le.__data__;return Gt(ye)?Be[typeof ye=="string"?"string":"hash"]:Be.map}function it(le,ye){var Be=Ue(le,ye);return ls(Be)?Be:void 0}function rt(le){var ye=De.call(le,wn),Be=le[wn];try{le[wn]=void 0;var Bt=!0}catch{}var _n=Kt.call(le);return Bt&&(ye?le[wn]=Be:delete le[wn]),_n}function mt(le){return typeof le.constructor=="function"&&!Xt(le)?ai(en(le)):{}}function Pt(le,ye){var Be=typeof le;return ye=ye??o,!!ye&&(Be=="number"||Be!="symbol"&&Y.test(le))&&le>-1&&le%1==0&&le<ye}function un(le,ye,Be){if(!Dl(Be))return!1;var Bt=typeof ye;return(Bt=="number"?xa(Be)&&Pt(ye,Be.length):Bt=="string"&&ye in Be)?fo(Be[ye],le):!1}function Gt(le){var ye=typeof le;return ye=="string"||ye=="number"||ye=="symbol"||ye=="boolean"?le!=="__proto__":le===null}function kn(le){return!!wt&&wt in le}function Xt(le){var ye=le&&le.constructor,Be=typeof ye=="function"&&ye.prototype||ut;return le===Be}function ur(le){var ye=[];if(le!=null)for(var Be in Object(le))ye.push(Be);return ye}function fs(le){return Kt.call(le)}function Qa(le,ye,Be){return ye=Ln(ye===void 0?le.length-1:ye,0),function(){for(var Bt=arguments,_n=-1,Kn=Ln(Bt.length-ye,0),wr=Array(Kn);++_n<Kn;)wr[_n]=Bt[ye+_n];_n=-1;for(var yn=Array(ye+1);++_n<ye;)yn[_n]=Bt[_n];return yn[ye]=Be(wr),me(le,this,yn)}}function Rl(le,ye){if(!(ye==="constructor"&&typeof le[ye]=="function")&&ye!="__proto__")return le[ye]}var lm=Md(ds);function Md(le){var ye=0,Be=0;return function(){var Bt=Ns(),_n=s-(Bt-Be);if(Be=Bt,_n>0){if(++ye>=i)return arguments[0]}else ye=0;return le.apply(void 0,arguments)}}function cm(le){if(le!=null){try{return xt.call(le)}catch{}try{return le+""}catch{}}return""}function fo(le,ye){return le===ye||le!==le&&ye!==ye}var yi=zu(function(){return arguments}())?zu:function(le){return Ki(le)&&De.call(le,"callee")&&!sr.call(le,"callee")},Ls=Array.isArray;function xa(le){return le!=null&&Eb(le.length)&&!Ja(le)}function Ld(le){return Ki(le)&&xa(le)}var wa=Hr||_c;function Ja(le){if(!Dl(le))return!1;var ye=us(le);return ye==h||ye==p||ye==l||ye==w}function Eb(le){return typeof le=="number"&&le>-1&&le%1==0&&le<=o}function Dl(le){var ye=typeof le;return le!=null&&(ye=="object"||ye=="function")}function Ki(le){return le!=null&&typeof le=="object"}function PE(le){if(!Ki(le)||us(le)!=b)return!1;var ye=en(le);if(ye===null)return!0;var Be=De.call(ye,"constructor")&&ye.constructor;return typeof Be=="function"&&Be instanceof Be&&xt.call(Be)==Te}var Ag=se?Le(se):wc;function Ec(le){return Ae(le,Fd(le))}function Fd(le){return xa(le)?$d(le):am(le)}var _b=we(function(le,ye,Be){Il(le,ye,Be)});function Uu(le){return function(){return le}}function Za(le){return le}function _c(){return!1}e.exports=_b}(wT,wT.exports)),wT.exports}var uyt=ayt();const vTe=Tl(uyt);function kf(e,t){var n;return h6(e)&&t.baseComponents?vTe({},(n=t.baseComponents)==null?void 0:n[e.baseComponent],e):e}function bae(e,t){return t.components[e]===void 0?null:kf(t.components[e],t)}async function lyt(e,t,n,r,i,s,o){const a=Vf(n),u=Object.fromEntries(a.filter(p=>p!=="end").map((p,m)=>{const y=kf(t.components[p]||{},t);return t.components[p]?[`${p}_${m}`,{answer:{},trialOrder:`${m}`,componentName:p,incorrectAnswers:{},startTime:0,endTime:-1,provenanceGraph:{aboveStimulus:void 0,belowStimulus:void 0,stimulus:void 0,sidebar:void 0},windowEvents:[],timedOut:!1,helpButtonClickedCount:0,parameters:Object.hasOwn(y,"parameters")?y.parameters:{},correctAnswer:Object.hasOwn(y,"correctAnswer")?y.correctAnswer:[]}]:null}).filter(p=>p!==null)),l=Object.assign({},...a.map((p,m)=>{const y=kf(t.components[p]||{response:[]},t);return{[`${p}_${m}`]:{aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}},stimulus:{valid:!y.response.some(v=>v.type==="reactive"&&v.required!==!1),values:{}},provenanceGraph:{aboveStimulus:void 0,belowStimulus:void 0,stimulus:void 0,sidebar:void 0}}}})),c=Object.assign({},...a.map((p,m)=>({[`${p}_${m}`]:{aboveStimulus:!0,belowStimulus:!0,sidebar:!0,stimulus:!0,provenanceGraph:{aboveStimulus:void 0,belowStimulus:void 0,stimulus:void 0,sidebar:void 0}}}))),d={studyId:e,isRecording:!1,answers:Object.keys(i).length>0?i:u,sequence:n,config:t,showStudyBrowser:!0,showHelpText:!1,alertModal:{show:!1,message:""},trialValidation:Object.keys(i).length>0?c:l,reactiveAnswers:{},metadata:r,analysisProvState:{aboveStimulus:void 0,belowStimulus:void 0,stimulus:void 0,sidebar:void 0},analysisIsPlaying:!1,analysisHasAudio:!1,analysisHasProvenance:!1,modes:s,matrixAnswers:{},participantId:o,funcSequence:{}},f=eyt({name:"storeSlice",initialState:d,reducers:{setConfig(p,{payload:m}){p.config=m},setIsRecording(p,{payload:m}){p.isRecording=m},pushToFuncSequence(p,{payload:m}){if(p.funcSequence[m.funcName]||(p.funcSequence[m.funcName]=[]),p.funcSequence[m.funcName].length>m.funcIndex)return;const y=kf(p.config.components[m.component]||{response:[]},t),v=`${m.funcName}_${m.index}_${m.component}_${m.funcIndex}`;p.funcSequence[m.funcName].push(m.component),p.answers[v]={answer:{},incorrectAnswers:{},componentName:m.component,trialOrder:`${m.index}_${m.funcIndex}`,startTime:0,endTime:-1,provenanceGraph:{aboveStimulus:void 0,belowStimulus:void 0,stimulus:void 0,sidebar:void 0},windowEvents:[],timedOut:!1,helpButtonClickedCount:0,parameters:m.parameters||("parameters"in y?y.parameters:{})||{},correctAnswer:m.correctAnswer||y.correctAnswer||[]},p.trialValidation[v]={aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},stimulus:{valid:y.response.every(b=>b.type!=="reactive"),values:{}},sidebar:{valid:!1,values:{}},provenanceGraph:{aboveStimulus:void 0,belowStimulus:void 0,stimulus:void 0,sidebar:void 0}}},toggleStudyBrowser:p=>{p.showStudyBrowser=!p.showStudyBrowser},toggleShowHelpText:p=>{p.showHelpText=!p.showHelpText},setAlertModal:(p,m)=>{p.alertModal=m.payload},setReactiveAnswers:(p,m)=>{p.reactiveAnswers=m.payload},saveAnalysisState(p,{payload:m}){p.analysisProvState[m.location]=m.prov},setAnalysisIsPlaying(p,{payload:m}){p.analysisIsPlaying=m},setAnalysisHasAudio(p,{payload:m}){p.analysisHasAudio=m},setAnalysisHasProvenance(p,{payload:m}){p.analysisHasProvenance=m},setMatrixAnswersRadio:(p,m)=>{if(m.payload){const{responseId:y,questionKey:v,val:b}=m.payload;p.matrixAnswers={...p.matrixAnswers,[y]:{...p.matrixAnswers[y],[v]:b}}}else p.matrixAnswers={}},setMatrixAnswersCheckbox:(p,m)=>{var y;if(m.payload){const{responseId:v,questionKey:b,value:w,isChecked:E,choiceOptions:_}=m.payload,C=((y=p.matrixAnswers[v])==null?void 0:y[b])??"";let S="";E?C.length>0?S=[...C.split("|"),w].sort((k,R)=>_.map(N=>N.value).indexOf(k)-_.map(N=>N.value).indexOf(R)).join("|"):S=`${w}`:S=C.split("|").filter(k=>k!==w).join("|"),p.matrixAnswers={...p.matrixAnswers,[v]:{...p.matrixAnswers[v],[b]:S}}}else p.matrixAnswers={}},updateResponseBlockValidation:(p,{payload:m})=>{var v,b;if(!p.trialValidation[m.identifier])return;const y=(b=(v=p.trialValidation[m.identifier])==null?void 0:v[m.location])==null?void 0:b.values;Object.keys(m.values).length>0?p.trialValidation[m.identifier][m.location]={valid:m.status,values:{...y,...m.values}}:p.trialValidation[m.identifier][m.location]={valid:m.status,values:y||{}},m.provenanceGraph&&(p.trialValidation[m.identifier].provenanceGraph[m.location]=m.provenanceGraph)},saveTrialAnswer(p,{payload:m}){p.answers[m.identifier]={...m}},incrementHelpCounter(p,{payload:m}){p.answers[m.identifier].helpButtonClickedCount+=1},saveIncorrectAnswer(p,{payload:m}){const{identifier:y,answer:v,question:b}=m;p.answers[b].incorrectAnswers||(p.answers[b].incorrectAnswers={}),p.answers[b].incorrectAnswers[y]||(p.answers[b].incorrectAnswers[y]={id:y,value:[]}),p.answers[b].incorrectAnswers[y].value.push(v)}}});return{store:Ggt({reducer:f.reducer,preloadedState:d}),actions:f.actions}}const xTe=D.createContext(null);function ro(){return D.useContext(xTe).actions}const Bo=Vve,ir=jit;function cyt(e){return ir(t=>{if(e.includes("reviewer-"))return!0;const n=t.trialValidation[e]?Object.values(t.trialValidation[e]).every(r=>typeof r=="object"&&"valid"in r?r.valid:!0):!0;return n?Object.values(n).every(r=>r):!1})}const dyt=cTe(e=>e.sequence,e=>Vf(e));function nb(){return ir(dyt)}var pD={exports:{}},mD={exports:{}},fyt=mD.exports,vae;function Gn(){return vae||(vae=1,function(e,t){(function(n,r){e.exports=r()})(fyt,function(){var n=n||function(r,i){var s;if(typeof window<"u"&&window.crypto&&(s=window.crypto),typeof self<"u"&&self.crypto&&(s=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(s=globalThis.crypto),!s&&typeof window<"u"&&window.msCrypto&&(s=window.msCrypto),!s&&typeof ws<"u"&&ws.crypto&&(s=ws.crypto),!s&&typeof aT=="function")try{s=Xye}catch{}var o=function(){if(s){if(typeof s.getRandomValues=="function")try{return s.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof s.randomBytes=="function")try{return s.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},a=Object.create||function(){function b(){}return function(w){var E;return b.prototype=w,E=new b,b.prototype=null,E}}(),u={},l=u.lib={},c=l.Base=function(){return{extend:function(b){var w=a(this);return b&&w.mixIn(b),(!w.hasOwnProperty("init")||this.init===w.init)&&(w.init=function(){w.$super.init.apply(this,arguments)}),w.init.prototype=w,w.$super=this,w},create:function(){var b=this.extend();return b.init.apply(b,arguments),b},init:function(){},mixIn:function(b){for(var w in b)b.hasOwnProperty(w)&&(this[w]=b[w]);b.hasOwnProperty("toString")&&(this.toString=b.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),d=l.WordArray=c.extend({init:function(b,w){b=this.words=b||[],w!=i?this.sigBytes=w:this.sigBytes=b.length*4},toString:function(b){return(b||h).stringify(this)},concat:function(b){var w=this.words,E=b.words,_=this.sigBytes,C=b.sigBytes;if(this.clamp(),_%4)for(var S=0;S<C;S++){var k=E[S>>>2]>>>24-S%4*8&255;w[_+S>>>2]|=k<<24-(_+S)%4*8}else for(var R=0;R<C;R+=4)w[_+R>>>2]=E[R>>>2];return this.sigBytes+=C,this},clamp:function(){var b=this.words,w=this.sigBytes;b[w>>>2]&=4294967295<<32-w%4*8,b.length=r.ceil(w/4)},clone:function(){var b=c.clone.call(this);return b.words=this.words.slice(0),b},random:function(b){for(var w=[],E=0;E<b;E+=4)w.push(o());return new d.init(w,b)}}),f=u.enc={},h=f.Hex={stringify:function(b){for(var w=b.words,E=b.sigBytes,_=[],C=0;C<E;C++){var S=w[C>>>2]>>>24-C%4*8&255;_.push((S>>>4).toString(16)),_.push((S&15).toString(16))}return _.join("")},parse:function(b){for(var w=b.length,E=[],_=0;_<w;_+=2)E[_>>>3]|=parseInt(b.substr(_,2),16)<<24-_%8*4;return new d.init(E,w/2)}},p=f.Latin1={stringify:function(b){for(var w=b.words,E=b.sigBytes,_=[],C=0;C<E;C++){var S=w[C>>>2]>>>24-C%4*8&255;_.push(String.fromCharCode(S))}return _.join("")},parse:function(b){for(var w=b.length,E=[],_=0;_<w;_++)E[_>>>2]|=(b.charCodeAt(_)&255)<<24-_%4*8;return new d.init(E,w)}},m=f.Utf8={stringify:function(b){try{return decodeURIComponent(escape(p.stringify(b)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(b){return p.parse(unescape(encodeURIComponent(b)))}},y=l.BufferedBlockAlgorithm=c.extend({reset:function(){this._data=new d.init,this._nDataBytes=0},_append:function(b){typeof b=="string"&&(b=m.parse(b)),this._data.concat(b),this._nDataBytes+=b.sigBytes},_process:function(b){var w,E=this._data,_=E.words,C=E.sigBytes,S=this.blockSize,k=S*4,R=C/k;b?R=r.ceil(R):R=r.max((R|0)-this._minBufferSize,0);var N=R*S,O=r.min(N*4,C);if(N){for(var F=0;F<N;F+=S)this._doProcessBlock(_,F);w=_.splice(0,N),E.sigBytes-=O}return new d.init(w,O)},clone:function(){var b=c.clone.call(this);return b._data=this._data.clone(),b},_minBufferSize:0});l.Hasher=y.extend({cfg:c.extend(),init:function(b){this.cfg=this.cfg.extend(b),this.reset()},reset:function(){y.reset.call(this),this._doReset()},update:function(b){return this._append(b),this._process(),this},finalize:function(b){b&&this._append(b);var w=this._doFinalize();return w},blockSize:16,_createHelper:function(b){return function(w,E){return new b.init(E).finalize(w)}},_createHmacHelper:function(b){return function(w,E){return new v.HMAC.init(b,E).finalize(w)}}});var v=u.algo={};return u}(Math);return n})}(mD)),mD.exports}var gD={exports:{}},hyt=gD.exports,xae;function p6(){return xae||(xae=1,function(e,t){(function(n,r){e.exports=r(Gn())})(hyt,function(n){return function(r){var i=n,s=i.lib,o=s.Base,a=s.WordArray,u=i.x64={};u.Word=o.extend({init:function(l,c){this.high=l,this.low=c}}),u.WordArray=o.extend({init:function(l,c){l=this.words=l||[],c!=r?this.sigBytes=c:this.sigBytes=l.length*8},toX32:function(){for(var l=this.words,c=l.length,d=[],f=0;f<c;f++){var h=l[f];d.push(h.high),d.push(h.low)}return a.create(d,this.sigBytes)},clone:function(){for(var l=o.clone.call(this),c=l.words=this.words.slice(0),d=c.length,f=0;f<d;f++)c[f]=c[f].clone();return l}})}(),n})}(gD)),gD.exports}var yD={exports:{}},pyt=yD.exports,wae;function myt(){return wae||(wae=1,function(e,t){(function(n,r){e.exports=r(Gn())})(pyt,function(n){return function(){if(typeof ArrayBuffer=="function"){var r=n,i=r.lib,s=i.WordArray,o=s.init,a=s.init=function(u){if(u instanceof ArrayBuffer&&(u=new Uint8Array(u)),(u instanceof Int8Array||typeof Uint8ClampedArray<"u"&&u instanceof Uint8ClampedArray||u instanceof Int16Array||u instanceof Uint16Array||u instanceof Int32Array||u instanceof Uint32Array||u instanceof Float32Array||u instanceof Float64Array)&&(u=new Uint8Array(u.buffer,u.byteOffset,u.byteLength)),u instanceof Uint8Array){for(var l=u.byteLength,c=[],d=0;d<l;d++)c[d>>>2]|=u[d]<<24-d%4*8;o.call(this,c,l)}else o.apply(this,arguments)};a.prototype=s}}(),n.lib.WordArray})}(yD)),yD.exports}var bD={exports:{}},gyt=bD.exports,Eae;function yyt(){return Eae||(Eae=1,function(e,t){(function(n,r){e.exports=r(Gn())})(gyt,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=r.enc;o.Utf16=o.Utf16BE={stringify:function(u){for(var l=u.words,c=u.sigBytes,d=[],f=0;f<c;f+=2){var h=l[f>>>2]>>>16-f%4*8&65535;d.push(String.fromCharCode(h))}return d.join("")},parse:function(u){for(var l=u.length,c=[],d=0;d<l;d++)c[d>>>1]|=u.charCodeAt(d)<<16-d%2*16;return s.create(c,l*2)}},o.Utf16LE={stringify:function(u){for(var l=u.words,c=u.sigBytes,d=[],f=0;f<c;f+=2){var h=a(l[f>>>2]>>>16-f%4*8&65535);d.push(String.fromCharCode(h))}return d.join("")},parse:function(u){for(var l=u.length,c=[],d=0;d<l;d++)c[d>>>1]|=a(u.charCodeAt(d)<<16-d%2*16);return s.create(c,l*2)}};function a(u){return u<<8&4278255360|u>>>8&16711935}}(),n.enc.Utf16})}(bD)),bD.exports}var vD={exports:{}},byt=vD.exports,_ae;function rb(){return _ae||(_ae=1,function(e,t){(function(n,r){e.exports=r(Gn())})(byt,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=r.enc;o.Base64={stringify:function(u){var l=u.words,c=u.sigBytes,d=this._map;u.clamp();for(var f=[],h=0;h<c;h+=3)for(var p=l[h>>>2]>>>24-h%4*8&255,m=l[h+1>>>2]>>>24-(h+1)%4*8&255,y=l[h+2>>>2]>>>24-(h+2)%4*8&255,v=p<<16|m<<8|y,b=0;b<4&&h+b*.75<c;b++)f.push(d.charAt(v>>>6*(3-b)&63));var w=d.charAt(64);if(w)for(;f.length%4;)f.push(w);return f.join("")},parse:function(u){var l=u.length,c=this._map,d=this._reverseMap;if(!d){d=this._reverseMap=[];for(var f=0;f<c.length;f++)d[c.charCodeAt(f)]=f}var h=c.charAt(64);if(h){var p=u.indexOf(h);p!==-1&&(l=p)}return a(u,l,d)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function a(u,l,c){for(var d=[],f=0,h=0;h<l;h++)if(h%4){var p=c[u.charCodeAt(h-1)]<<h%4*2,m=c[u.charCodeAt(h)]>>>6-h%4*2,y=p|m;d[f>>>2]|=y<<24-f%4*8,f++}return s.create(d,f)}}(),n.enc.Base64})}(vD)),vD.exports}var xD={exports:{}},vyt=xD.exports,Tae;function xyt(){return Tae||(Tae=1,function(e,t){(function(n,r){e.exports=r(Gn())})(vyt,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=r.enc;o.Base64url={stringify:function(u,l){l===void 0&&(l=!0);var c=u.words,d=u.sigBytes,f=l?this._safe_map:this._map;u.clamp();for(var h=[],p=0;p<d;p+=3)for(var m=c[p>>>2]>>>24-p%4*8&255,y=c[p+1>>>2]>>>24-(p+1)%4*8&255,v=c[p+2>>>2]>>>24-(p+2)%4*8&255,b=m<<16|y<<8|v,w=0;w<4&&p+w*.75<d;w++)h.push(f.charAt(b>>>6*(3-w)&63));var E=f.charAt(64);if(E)for(;h.length%4;)h.push(E);return h.join("")},parse:function(u,l){l===void 0&&(l=!0);var c=u.length,d=l?this._safe_map:this._map,f=this._reverseMap;if(!f){f=this._reverseMap=[];for(var h=0;h<d.length;h++)f[d.charCodeAt(h)]=h}var p=d.charAt(64);if(p){var m=u.indexOf(p);m!==-1&&(c=m)}return a(u,c,f)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function a(u,l,c){for(var d=[],f=0,h=0;h<l;h++)if(h%4){var p=c[u.charCodeAt(h-1)]<<h%4*2,m=c[u.charCodeAt(h)]>>>6-h%4*2,y=p|m;d[f>>>2]|=y<<24-f%4*8,f++}return s.create(d,f)}}(),n.enc.Base64url})}(xD)),xD.exports}var wD={exports:{}},wyt=wD.exports,Cae;function ib(){return Cae||(Cae=1,function(e,t){(function(n,r){e.exports=r(Gn())})(wyt,function(n){return function(r){var i=n,s=i.lib,o=s.WordArray,a=s.Hasher,u=i.algo,l=[];(function(){for(var m=0;m<64;m++)l[m]=r.abs(r.sin(m+1))*4294967296|0})();var c=u.MD5=a.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(m,y){for(var v=0;v<16;v++){var b=y+v,w=m[b];m[b]=(w<<8|w>>>24)&16711935|(w<<24|w>>>8)&4278255360}var E=this._hash.words,_=m[y+0],C=m[y+1],S=m[y+2],k=m[y+3],R=m[y+4],N=m[y+5],O=m[y+6],F=m[y+7],$=m[y+8],z=m[y+9],q=m[y+10],W=m[y+11],J=m[y+12],K=m[y+13],Z=m[y+14],U=m[y+15],L=E[0],Y=E[1],j=E[2],G=E[3];L=d(L,Y,j,G,_,7,l[0]),G=d(G,L,Y,j,C,12,l[1]),j=d(j,G,L,Y,S,17,l[2]),Y=d(Y,j,G,L,k,22,l[3]),L=d(L,Y,j,G,R,7,l[4]),G=d(G,L,Y,j,N,12,l[5]),j=d(j,G,L,Y,O,17,l[6]),Y=d(Y,j,G,L,F,22,l[7]),L=d(L,Y,j,G,$,7,l[8]),G=d(G,L,Y,j,z,12,l[9]),j=d(j,G,L,Y,q,17,l[10]),Y=d(Y,j,G,L,W,22,l[11]),L=d(L,Y,j,G,J,7,l[12]),G=d(G,L,Y,j,K,12,l[13]),j=d(j,G,L,Y,Z,17,l[14]),Y=d(Y,j,G,L,U,22,l[15]),L=f(L,Y,j,G,C,5,l[16]),G=f(G,L,Y,j,O,9,l[17]),j=f(j,G,L,Y,W,14,l[18]),Y=f(Y,j,G,L,_,20,l[19]),L=f(L,Y,j,G,N,5,l[20]),G=f(G,L,Y,j,q,9,l[21]),j=f(j,G,L,Y,U,14,l[22]),Y=f(Y,j,G,L,R,20,l[23]),L=f(L,Y,j,G,z,5,l[24]),G=f(G,L,Y,j,Z,9,l[25]),j=f(j,G,L,Y,k,14,l[26]),Y=f(Y,j,G,L,$,20,l[27]),L=f(L,Y,j,G,K,5,l[28]),G=f(G,L,Y,j,S,9,l[29]),j=f(j,G,L,Y,F,14,l[30]),Y=f(Y,j,G,L,J,20,l[31]),L=h(L,Y,j,G,N,4,l[32]),G=h(G,L,Y,j,$,11,l[33]),j=h(j,G,L,Y,W,16,l[34]),Y=h(Y,j,G,L,Z,23,l[35]),L=h(L,Y,j,G,C,4,l[36]),G=h(G,L,Y,j,R,11,l[37]),j=h(j,G,L,Y,F,16,l[38]),Y=h(Y,j,G,L,q,23,l[39]),L=h(L,Y,j,G,K,4,l[40]),G=h(G,L,Y,j,_,11,l[41]),j=h(j,G,L,Y,k,16,l[42]),Y=h(Y,j,G,L,O,23,l[43]),L=h(L,Y,j,G,z,4,l[44]),G=h(G,L,Y,j,J,11,l[45]),j=h(j,G,L,Y,U,16,l[46]),Y=h(Y,j,G,L,S,23,l[47]),L=p(L,Y,j,G,_,6,l[48]),G=p(G,L,Y,j,F,10,l[49]),j=p(j,G,L,Y,Z,15,l[50]),Y=p(Y,j,G,L,N,21,l[51]),L=p(L,Y,j,G,J,6,l[52]),G=p(G,L,Y,j,k,10,l[53]),j=p(j,G,L,Y,q,15,l[54]),Y=p(Y,j,G,L,C,21,l[55]),L=p(L,Y,j,G,$,6,l[56]),G=p(G,L,Y,j,U,10,l[57]),j=p(j,G,L,Y,O,15,l[58]),Y=p(Y,j,G,L,K,21,l[59]),L=p(L,Y,j,G,R,6,l[60]),G=p(G,L,Y,j,W,10,l[61]),j=p(j,G,L,Y,S,15,l[62]),Y=p(Y,j,G,L,z,21,l[63]),E[0]=E[0]+L|0,E[1]=E[1]+Y|0,E[2]=E[2]+j|0,E[3]=E[3]+G|0},_doFinalize:function(){var m=this._data,y=m.words,v=this._nDataBytes*8,b=m.sigBytes*8;y[b>>>5]|=128<<24-b%32;var w=r.floor(v/4294967296),E=v;y[(b+64>>>9<<4)+15]=(w<<8|w>>>24)&16711935|(w<<24|w>>>8)&4278255360,y[(b+64>>>9<<4)+14]=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360,m.sigBytes=(y.length+1)*4,this._process();for(var _=this._hash,C=_.words,S=0;S<4;S++){var k=C[S];C[S]=(k<<8|k>>>24)&16711935|(k<<24|k>>>8)&4278255360}return _},clone:function(){var m=a.clone.call(this);return m._hash=this._hash.clone(),m}});function d(m,y,v,b,w,E,_){var C=m+(y&v|~y&b)+w+_;return(C<<E|C>>>32-E)+y}function f(m,y,v,b,w,E,_){var C=m+(y&b|v&~b)+w+_;return(C<<E|C>>>32-E)+y}function h(m,y,v,b,w,E,_){var C=m+(y^v^b)+w+_;return(C<<E|C>>>32-E)+y}function p(m,y,v,b,w,E,_){var C=m+(v^(y|~b))+w+_;return(C<<E|C>>>32-E)+y}i.MD5=a._createHelper(c),i.HmacMD5=a._createHmacHelper(c)}(Math),n.MD5})}(wD)),wD.exports}var ED={exports:{}},Eyt=ED.exports,Sae;function wTe(){return Sae||(Sae=1,function(e,t){(function(n,r){e.exports=r(Gn())})(Eyt,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=i.Hasher,a=r.algo,u=[],l=a.SHA1=o.extend({_doReset:function(){this._hash=new s.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(c,d){for(var f=this._hash.words,h=f[0],p=f[1],m=f[2],y=f[3],v=f[4],b=0;b<80;b++){if(b<16)u[b]=c[d+b]|0;else{var w=u[b-3]^u[b-8]^u[b-14]^u[b-16];u[b]=w<<1|w>>>31}var E=(h<<5|h>>>27)+v+u[b];b<20?E+=(p&m|~p&y)+1518500249:b<40?E+=(p^m^y)+1859775393:b<60?E+=(p&m|p&y|m&y)-1894007588:E+=(p^m^y)-899497514,v=y,y=m,m=p<<30|p>>>2,p=h,h=E}f[0]=f[0]+h|0,f[1]=f[1]+p|0,f[2]=f[2]+m|0,f[3]=f[3]+y|0,f[4]=f[4]+v|0},_doFinalize:function(){var c=this._data,d=c.words,f=this._nDataBytes*8,h=c.sigBytes*8;return d[h>>>5]|=128<<24-h%32,d[(h+64>>>9<<4)+14]=Math.floor(f/4294967296),d[(h+64>>>9<<4)+15]=f,c.sigBytes=d.length*4,this._process(),this._hash},clone:function(){var c=o.clone.call(this);return c._hash=this._hash.clone(),c}});r.SHA1=o._createHelper(l),r.HmacSHA1=o._createHmacHelper(l)}(),n.SHA1})}(ED)),ED.exports}var _D={exports:{}},_yt=_D.exports,Aae;function WW(){return Aae||(Aae=1,function(e,t){(function(n,r){e.exports=r(Gn())})(_yt,function(n){return function(r){var i=n,s=i.lib,o=s.WordArray,a=s.Hasher,u=i.algo,l=[],c=[];(function(){function h(v){for(var b=r.sqrt(v),w=2;w<=b;w++)if(!(v%w))return!1;return!0}function p(v){return(v-(v|0))*4294967296|0}for(var m=2,y=0;y<64;)h(m)&&(y<8&&(l[y]=p(r.pow(m,1/2))),c[y]=p(r.pow(m,1/3)),y++),m++})();var d=[],f=u.SHA256=a.extend({_doReset:function(){this._hash=new o.init(l.slice(0))},_doProcessBlock:function(h,p){for(var m=this._hash.words,y=m[0],v=m[1],b=m[2],w=m[3],E=m[4],_=m[5],C=m[6],S=m[7],k=0;k<64;k++){if(k<16)d[k]=h[p+k]|0;else{var R=d[k-15],N=(R<<25|R>>>7)^(R<<14|R>>>18)^R>>>3,O=d[k-2],F=(O<<15|O>>>17)^(O<<13|O>>>19)^O>>>10;d[k]=N+d[k-7]+F+d[k-16]}var $=E&_^~E&C,z=y&v^y&b^v&b,q=(y<<30|y>>>2)^(y<<19|y>>>13)^(y<<10|y>>>22),W=(E<<26|E>>>6)^(E<<21|E>>>11)^(E<<7|E>>>25),J=S+W+$+c[k]+d[k],K=q+z;S=C,C=_,_=E,E=w+J|0,w=b,b=v,v=y,y=J+K|0}m[0]=m[0]+y|0,m[1]=m[1]+v|0,m[2]=m[2]+b|0,m[3]=m[3]+w|0,m[4]=m[4]+E|0,m[5]=m[5]+_|0,m[6]=m[6]+C|0,m[7]=m[7]+S|0},_doFinalize:function(){var h=this._data,p=h.words,m=this._nDataBytes*8,y=h.sigBytes*8;return p[y>>>5]|=128<<24-y%32,p[(y+64>>>9<<4)+14]=r.floor(m/4294967296),p[(y+64>>>9<<4)+15]=m,h.sigBytes=p.length*4,this._process(),this._hash},clone:function(){var h=a.clone.call(this);return h._hash=this._hash.clone(),h}});i.SHA256=a._createHelper(f),i.HmacSHA256=a._createHmacHelper(f)}(Math),n.SHA256})}(_D)),_D.exports}var TD={exports:{}},Tyt=TD.exports,kae;function Cyt(){return kae||(kae=1,function(e,t){(function(n,r,i){e.exports=r(Gn(),WW())})(Tyt,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=r.algo,a=o.SHA256,u=o.SHA224=a.extend({_doReset:function(){this._hash=new s.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var l=a._doFinalize.call(this);return l.sigBytes-=4,l}});r.SHA224=a._createHelper(u),r.HmacSHA224=a._createHmacHelper(u)}(),n.SHA224})}(TD)),TD.exports}var CD={exports:{}},Syt=CD.exports,Iae;function ETe(){return Iae||(Iae=1,function(e,t){(function(n,r,i){e.exports=r(Gn(),p6())})(Syt,function(n){return function(){var r=n,i=r.lib,s=i.Hasher,o=r.x64,a=o.Word,u=o.WordArray,l=r.algo;function c(){return a.create.apply(a,arguments)}var d=[c(1116352408,3609767458),c(1899447441,602891725),c(3049323471,3964484399),c(3921009573,2173295548),c(961987163,4081628472),c(1508970993,3053834265),c(2453635748,2937671579),c(2870763221,3664609560),c(3624381080,2734883394),c(310598401,1164996542),c(607225278,1323610764),c(1426881987,3590304994),c(1925078388,4068182383),c(2162078206,991336113),c(2614888103,633803317),c(3248222580,3479774868),c(3835390401,2666613458),c(4022224774,944711139),c(264347078,2341262773),c(604807628,2007800933),c(770255983,1495990901),c(1249150122,1856431235),c(1555081692,3175218132),c(1996064986,2198950837),c(2554220882,3999719339),c(2821834349,766784016),c(2952996808,2566594879),c(3210313671,3203337956),c(3336571891,1034457026),c(3584528711,2466948901),c(113926993,3758326383),c(338241895,168717936),c(666307205,1188179964),c(773529912,1546045734),c(1294757372,1522805485),c(1396182291,2643833823),c(1695183700,2343527390),c(1986661051,1014477480),c(2177026350,1206759142),c(2456956037,344077627),c(2730485921,1290863460),c(2820302411,3158454273),c(3259730800,3505952657),c(3345764771,106217008),c(3516065817,3606008344),c(3600352804,1432725776),c(4094571909,1467031594),c(275423344,851169720),c(430227734,3100823752),c(506948616,1363258195),c(659060556,3750685593),c(883997877,3785050280),c(958139571,3318307427),c(1322822218,3812723403),c(1537002063,2003034995),c(1747873779,3602036899),c(1955562222,1575990012),c(2024104815,1125592928),c(2227730452,2716904306),c(2361852424,442776044),c(2428436474,593698344),c(2756734187,3733110249),c(3204031479,2999351573),c(3329325298,3815920427),c(3391569614,3928383900),c(3515267271,566280711),c(3940187606,3454069534),c(4118630271,4000239992),c(116418474,1914138554),c(174292421,2731055270),c(289380356,3203993006),c(460393269,320620315),c(685471733,587496836),c(852142971,1086792851),c(1017036298,365543100),c(1126000580,2618297676),c(1288033470,3409855158),c(1501505948,4234509866),c(1607167915,987167468),c(1816402316,1246189591)],f=[];(function(){for(var p=0;p<80;p++)f[p]=c()})();var h=l.SHA512=s.extend({_doReset:function(){this._hash=new u.init([new a.init(1779033703,4089235720),new a.init(3144134277,2227873595),new a.init(1013904242,4271175723),new a.init(2773480762,1595750129),new a.init(1359893119,2917565137),new a.init(2600822924,725511199),new a.init(528734635,4215389547),new a.init(1541459225,327033209)])},_doProcessBlock:function(p,m){for(var y=this._hash.words,v=y[0],b=y[1],w=y[2],E=y[3],_=y[4],C=y[5],S=y[6],k=y[7],R=v.high,N=v.low,O=b.high,F=b.low,$=w.high,z=w.low,q=E.high,W=E.low,J=_.high,K=_.low,Z=C.high,U=C.low,L=S.high,Y=S.low,j=k.high,G=k.low,X=R,ne=N,pe=O,de=F,xe=$,Ce=z,ue=q,se=W,me=J,be=K,Le=Z,Ue=U,Ne=L,je=Y,Ke=j,ut=G,pt=0;pt<80;pt++){var xt,De,wt=f[pt];if(pt<16)De=wt.high=p[m+pt*2]|0,xt=wt.low=p[m+pt*2+1]|0;else{var Kt=f[pt-15],Te=Kt.high,Oe=Kt.low,lt=(Te>>>1|Oe<<31)^(Te>>>8|Oe<<24)^Te>>>7,_t=(Oe>>>1|Te<<31)^(Oe>>>8|Te<<24)^(Oe>>>7|Te<<25),St=f[pt-2],en=St.high,En=St.low,sr=(en>>>19|En<<13)^(en<<3|En>>>29)^en>>>6,Jr=(En>>>19|en<<13)^(En<<3|en>>>29)^(En>>>6|en<<26),wn=f[pt-7],An=wn.high,Hr=wn.low,Ln=f[pt-16],Ns=Ln.high,Zr=Ln.low;xt=_t+Hr,De=lt+An+(xt>>>0<_t>>>0?1:0),xt=xt+Jr,De=De+sr+(xt>>>0<Jr>>>0?1:0),xt=xt+Zr,De=De+Ns+(xt>>>0<Zr>>>0?1:0),wt.high=De,wt.low=xt}var qr=me&Le^~me&Ne,ai=be&Ue^~be&je,or=X&pe^X&xe^pe&xe,Os=ne&de^ne&Ce^de&Ce,Al=(X>>>28|ne<<4)^(X<<30|ne>>>2)^(X<<25|ne>>>7),zo=(ne>>>28|X<<4)^(ne<<30|X>>>2)^(ne<<25|X>>>7),Bu=(me>>>14|be<<18)^(me>>>18|be<<14)^(me<<23|be>>>9),ar=(be>>>14|me<<18)^(be>>>18|me<<14)^(be<<23|me>>>9),Wr=d[pt],br=Wr.high,$s=Wr.low,Zn=ut+ar,mi=Ke+Bu+(Zn>>>0<ut>>>0?1:0),Zn=Zn+ai,mi=mi+qr+(Zn>>>0<ai>>>0?1:0),Zn=Zn+$s,mi=mi+br+(Zn>>>0<$s>>>0?1:0),Zn=Zn+xt,mi=mi+De+(Zn>>>0<xt>>>0?1:0),Ms=zo+Os,as=Al+or+(Ms>>>0<zo>>>0?1:0);Ke=Ne,ut=je,Ne=Le,je=Ue,Le=me,Ue=be,be=se+Zn|0,me=ue+mi+(be>>>0<se>>>0?1:0)|0,ue=xe,se=Ce,xe=pe,Ce=de,pe=X,de=ne,ne=Zn+Ms|0,X=mi+as+(ne>>>0<Zn>>>0?1:0)|0}N=v.low=N+ne,v.high=R+X+(N>>>0<ne>>>0?1:0),F=b.low=F+de,b.high=O+pe+(F>>>0<de>>>0?1:0),z=w.low=z+Ce,w.high=$+xe+(z>>>0<Ce>>>0?1:0),W=E.low=W+se,E.high=q+ue+(W>>>0<se>>>0?1:0),K=_.low=K+be,_.high=J+me+(K>>>0<be>>>0?1:0),U=C.low=U+Ue,C.high=Z+Le+(U>>>0<Ue>>>0?1:0),Y=S.low=Y+je,S.high=L+Ne+(Y>>>0<je>>>0?1:0),G=k.low=G+ut,k.high=j+Ke+(G>>>0<ut>>>0?1:0)},_doFinalize:function(){var p=this._data,m=p.words,y=this._nDataBytes*8,v=p.sigBytes*8;m[v>>>5]|=128<<24-v%32,m[(v+128>>>10<<5)+30]=Math.floor(y/4294967296),m[(v+128>>>10<<5)+31]=y,p.sigBytes=m.length*4,this._process();var b=this._hash.toX32();return b},clone:function(){var p=s.clone.call(this);return p._hash=this._hash.clone(),p},blockSize:1024/32});r.SHA512=s._createHelper(h),r.HmacSHA512=s._createHmacHelper(h)}(),n.SHA512})}(CD)),CD.exports}var SD={exports:{}},Ayt=SD.exports,Rae;function kyt(){return Rae||(Rae=1,function(e,t){(function(n,r,i){e.exports=r(Gn(),p6(),ETe())})(Ayt,function(n){return function(){var r=n,i=r.x64,s=i.Word,o=i.WordArray,a=r.algo,u=a.SHA512,l=a.SHA384=u.extend({_doReset:function(){this._hash=new o.init([new s.init(3418070365,3238371032),new s.init(1654270250,914150663),new s.init(2438529370,812702999),new s.init(355462360,4144912697),new s.init(1731405415,4290775857),new s.init(2394180231,1750603025),new s.init(3675008525,1694076839),new s.init(1203062813,3204075428)])},_doFinalize:function(){var c=u._doFinalize.call(this);return c.sigBytes-=16,c}});r.SHA384=u._createHelper(l),r.HmacSHA384=u._createHmacHelper(l)}(),n.SHA384})}(SD)),SD.exports}var AD={exports:{}},Iyt=AD.exports,Dae;function Ryt(){return Dae||(Dae=1,function(e,t){(function(n,r,i){e.exports=r(Gn(),p6())})(Iyt,function(n){return function(r){var i=n,s=i.lib,o=s.WordArray,a=s.Hasher,u=i.x64,l=u.Word,c=i.algo,d=[],f=[],h=[];(function(){for(var y=1,v=0,b=0;b<24;b++){d[y+5*v]=(b+1)*(b+2)/2%64;var w=v%5,E=(2*y+3*v)%5;y=w,v=E}for(var y=0;y<5;y++)for(var v=0;v<5;v++)f[y+5*v]=v+(2*y+3*v)%5*5;for(var _=1,C=0;C<24;C++){for(var S=0,k=0,R=0;R<7;R++){if(_&1){var N=(1<<R)-1;N<32?k^=1<<N:S^=1<<N-32}_&128?_=_<<1^113:_<<=1}h[C]=l.create(S,k)}})();var p=[];(function(){for(var y=0;y<25;y++)p[y]=l.create()})();var m=c.SHA3=a.extend({cfg:a.cfg.extend({outputLength:512}),_doReset:function(){for(var y=this._state=[],v=0;v<25;v++)y[v]=new l.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(y,v){for(var b=this._state,w=this.blockSize/2,E=0;E<w;E++){var _=y[v+2*E],C=y[v+2*E+1];_=(_<<8|_>>>24)&16711935|(_<<24|_>>>8)&4278255360,C=(C<<8|C>>>24)&16711935|(C<<24|C>>>8)&4278255360;var S=b[E];S.high^=C,S.low^=_}for(var k=0;k<24;k++){for(var R=0;R<5;R++){for(var N=0,O=0,F=0;F<5;F++){var S=b[R+5*F];N^=S.high,O^=S.low}var $=p[R];$.high=N,$.low=O}for(var R=0;R<5;R++)for(var z=p[(R+4)%5],q=p[(R+1)%5],W=q.high,J=q.low,N=z.high^(W<<1|J>>>31),O=z.low^(J<<1|W>>>31),F=0;F<5;F++){var S=b[R+5*F];S.high^=N,S.low^=O}for(var K=1;K<25;K++){var N,O,S=b[K],Z=S.high,U=S.low,L=d[K];L<32?(N=Z<<L|U>>>32-L,O=U<<L|Z>>>32-L):(N=U<<L-32|Z>>>64-L,O=Z<<L-32|U>>>64-L);var Y=p[f[K]];Y.high=N,Y.low=O}var j=p[0],G=b[0];j.high=G.high,j.low=G.low;for(var R=0;R<5;R++)for(var F=0;F<5;F++){var K=R+5*F,S=b[K],X=p[K],ne=p[(R+1)%5+5*F],pe=p[(R+2)%5+5*F];S.high=X.high^~ne.high&pe.high,S.low=X.low^~ne.low&pe.low}var S=b[0],de=h[k];S.high^=de.high,S.low^=de.low}},_doFinalize:function(){var y=this._data,v=y.words;this._nDataBytes*8;var b=y.sigBytes*8,w=this.blockSize*32;v[b>>>5]|=1<<24-b%32,v[(r.ceil((b+1)/w)*w>>>5)-1]|=128,y.sigBytes=v.length*4,this._process();for(var E=this._state,_=this.cfg.outputLength/8,C=_/8,S=[],k=0;k<C;k++){var R=E[k],N=R.high,O=R.low;N=(N<<8|N>>>24)&16711935|(N<<24|N>>>8)&4278255360,O=(O<<8|O>>>24)&16711935|(O<<24|O>>>8)&4278255360,S.push(O),S.push(N)}return new o.init(S,_)},clone:function(){for(var y=a.clone.call(this),v=y._state=this._state.slice(0),b=0;b<25;b++)v[b]=v[b].clone();return y}});i.SHA3=a._createHelper(m),i.HmacSHA3=a._createHmacHelper(m)}(Math),n.SHA3})}(AD)),AD.exports}var kD={exports:{}},Dyt=kD.exports,Pae;function Pyt(){return Pae||(Pae=1,function(e,t){(function(n,r){e.exports=r(Gn())})(Dyt,function(n){/** @preserve
			(c) 2012 by Cdric Mesnil. All rights reserved.

			Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

			    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
			    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

			THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
			*/return function(r){var i=n,s=i.lib,o=s.WordArray,a=s.Hasher,u=i.algo,l=o.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),c=o.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),d=o.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),f=o.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),h=o.create([0,1518500249,1859775393,2400959708,2840853838]),p=o.create([1352829926,1548603684,1836072691,2053994217,0]),m=u.RIPEMD160=a.extend({_doReset:function(){this._hash=o.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(C,S){for(var k=0;k<16;k++){var R=S+k,N=C[R];C[R]=(N<<8|N>>>24)&16711935|(N<<24|N>>>8)&4278255360}var O=this._hash.words,F=h.words,$=p.words,z=l.words,q=c.words,W=d.words,J=f.words,K,Z,U,L,Y,j,G,X,ne,pe;j=K=O[0],G=Z=O[1],X=U=O[2],ne=L=O[3],pe=Y=O[4];for(var de,k=0;k<80;k+=1)de=K+C[S+z[k]]|0,k<16?de+=y(Z,U,L)+F[0]:k<32?de+=v(Z,U,L)+F[1]:k<48?de+=b(Z,U,L)+F[2]:k<64?de+=w(Z,U,L)+F[3]:de+=E(Z,U,L)+F[4],de=de|0,de=_(de,W[k]),de=de+Y|0,K=Y,Y=L,L=_(U,10),U=Z,Z=de,de=j+C[S+q[k]]|0,k<16?de+=E(G,X,ne)+$[0]:k<32?de+=w(G,X,ne)+$[1]:k<48?de+=b(G,X,ne)+$[2]:k<64?de+=v(G,X,ne)+$[3]:de+=y(G,X,ne)+$[4],de=de|0,de=_(de,J[k]),de=de+pe|0,j=pe,pe=ne,ne=_(X,10),X=G,G=de;de=O[1]+U+ne|0,O[1]=O[2]+L+pe|0,O[2]=O[3]+Y+j|0,O[3]=O[4]+K+G|0,O[4]=O[0]+Z+X|0,O[0]=de},_doFinalize:function(){var C=this._data,S=C.words,k=this._nDataBytes*8,R=C.sigBytes*8;S[R>>>5]|=128<<24-R%32,S[(R+64>>>9<<4)+14]=(k<<8|k>>>24)&16711935|(k<<24|k>>>8)&4278255360,C.sigBytes=(S.length+1)*4,this._process();for(var N=this._hash,O=N.words,F=0;F<5;F++){var $=O[F];O[F]=($<<8|$>>>24)&16711935|($<<24|$>>>8)&4278255360}return N},clone:function(){var C=a.clone.call(this);return C._hash=this._hash.clone(),C}});function y(C,S,k){return C^S^k}function v(C,S,k){return C&S|~C&k}function b(C,S,k){return(C|~S)^k}function w(C,S,k){return C&k|S&~k}function E(C,S,k){return C^(S|~k)}function _(C,S){return C<<S|C>>>32-S}i.RIPEMD160=a._createHelper(m),i.HmacRIPEMD160=a._createHmacHelper(m)}(),n.RIPEMD160})}(kD)),kD.exports}var ID={exports:{}},Nyt=ID.exports,Nae;function GW(){return Nae||(Nae=1,function(e,t){(function(n,r){e.exports=r(Gn())})(Nyt,function(n){(function(){var r=n,i=r.lib,s=i.Base,o=r.enc,a=o.Utf8,u=r.algo;u.HMAC=s.extend({init:function(l,c){l=this._hasher=new l.init,typeof c=="string"&&(c=a.parse(c));var d=l.blockSize,f=d*4;c.sigBytes>f&&(c=l.finalize(c)),c.clamp();for(var h=this._oKey=c.clone(),p=this._iKey=c.clone(),m=h.words,y=p.words,v=0;v<d;v++)m[v]^=1549556828,y[v]^=909522486;h.sigBytes=p.sigBytes=f,this.reset()},reset:function(){var l=this._hasher;l.reset(),l.update(this._iKey)},update:function(l){return this._hasher.update(l),this},finalize:function(l){var c=this._hasher,d=c.finalize(l);c.reset();var f=c.finalize(this._oKey.clone().concat(d));return f}})})()})}(ID)),ID.exports}var RD={exports:{}},Oyt=RD.exports,Oae;function $yt(){return Oae||(Oae=1,function(e,t){(function(n,r,i){e.exports=r(Gn(),WW(),GW())})(Oyt,function(n){return function(){var r=n,i=r.lib,s=i.Base,o=i.WordArray,a=r.algo,u=a.SHA256,l=a.HMAC,c=a.PBKDF2=s.extend({cfg:s.extend({keySize:128/32,hasher:u,iterations:25e4}),init:function(d){this.cfg=this.cfg.extend(d)},compute:function(d,f){for(var h=this.cfg,p=l.create(h.hasher,d),m=o.create(),y=o.create([1]),v=m.words,b=y.words,w=h.keySize,E=h.iterations;v.length<w;){var _=p.update(f).finalize(y);p.reset();for(var C=_.words,S=C.length,k=_,R=1;R<E;R++){k=p.finalize(k),p.reset();for(var N=k.words,O=0;O<S;O++)C[O]^=N[O]}m.concat(_),b[0]++}return m.sigBytes=w*4,m}});r.PBKDF2=function(d,f,h){return c.create(h).compute(d,f)}}(),n.PBKDF2})}(RD)),RD.exports}var DD={exports:{}},Myt=DD.exports,$ae;function fg(){return $ae||($ae=1,function(e,t){(function(n,r,i){e.exports=r(Gn(),wTe(),GW())})(Myt,function(n){return function(){var r=n,i=r.lib,s=i.Base,o=i.WordArray,a=r.algo,u=a.MD5,l=a.EvpKDF=s.extend({cfg:s.extend({keySize:128/32,hasher:u,iterations:1}),init:function(c){this.cfg=this.cfg.extend(c)},compute:function(c,d){for(var f,h=this.cfg,p=h.hasher.create(),m=o.create(),y=m.words,v=h.keySize,b=h.iterations;y.length<v;){f&&p.update(f),f=p.update(c).finalize(d),p.reset();for(var w=1;w<b;w++)f=p.finalize(f),p.reset();m.concat(f)}return m.sigBytes=v*4,m}});r.EvpKDF=function(c,d,f){return l.create(f).compute(c,d)}}(),n.EvpKDF})}(DD)),DD.exports}var PD={exports:{}},Lyt=PD.exports,Mae;function ao(){return Mae||(Mae=1,function(e,t){(function(n,r,i){e.exports=r(Gn(),fg())})(Lyt,function(n){n.lib.Cipher||function(r){var i=n,s=i.lib,o=s.Base,a=s.WordArray,u=s.BufferedBlockAlgorithm,l=i.enc;l.Utf8;var c=l.Base64,d=i.algo,f=d.EvpKDF,h=s.Cipher=u.extend({cfg:o.extend(),createEncryptor:function(N,O){return this.create(this._ENC_XFORM_MODE,N,O)},createDecryptor:function(N,O){return this.create(this._DEC_XFORM_MODE,N,O)},init:function(N,O,F){this.cfg=this.cfg.extend(F),this._xformMode=N,this._key=O,this.reset()},reset:function(){u.reset.call(this),this._doReset()},process:function(N){return this._append(N),this._process()},finalize:function(N){N&&this._append(N);var O=this._doFinalize();return O},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function N(O){return typeof O=="string"?R:C}return function(O){return{encrypt:function(F,$,z){return N($).encrypt(O,F,$,z)},decrypt:function(F,$,z){return N($).decrypt(O,F,$,z)}}}}()});s.StreamCipher=h.extend({_doFinalize:function(){var N=this._process(!0);return N},blockSize:1});var p=i.mode={},m=s.BlockCipherMode=o.extend({createEncryptor:function(N,O){return this.Encryptor.create(N,O)},createDecryptor:function(N,O){return this.Decryptor.create(N,O)},init:function(N,O){this._cipher=N,this._iv=O}}),y=p.CBC=function(){var N=m.extend();N.Encryptor=N.extend({processBlock:function(F,$){var z=this._cipher,q=z.blockSize;O.call(this,F,$,q),z.encryptBlock(F,$),this._prevBlock=F.slice($,$+q)}}),N.Decryptor=N.extend({processBlock:function(F,$){var z=this._cipher,q=z.blockSize,W=F.slice($,$+q);z.decryptBlock(F,$),O.call(this,F,$,q),this._prevBlock=W}});function O(F,$,z){var q,W=this._iv;W?(q=W,this._iv=r):q=this._prevBlock;for(var J=0;J<z;J++)F[$+J]^=q[J]}return N}(),v=i.pad={},b=v.Pkcs7={pad:function(N,O){for(var F=O*4,$=F-N.sigBytes%F,z=$<<24|$<<16|$<<8|$,q=[],W=0;W<$;W+=4)q.push(z);var J=a.create(q,$);N.concat(J)},unpad:function(N){var O=N.words[N.sigBytes-1>>>2]&255;N.sigBytes-=O}};s.BlockCipher=h.extend({cfg:h.cfg.extend({mode:y,padding:b}),reset:function(){var N;h.reset.call(this);var O=this.cfg,F=O.iv,$=O.mode;this._xformMode==this._ENC_XFORM_MODE?N=$.createEncryptor:(N=$.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==N?this._mode.init(this,F&&F.words):(this._mode=N.call($,this,F&&F.words),this._mode.__creator=N)},_doProcessBlock:function(N,O){this._mode.processBlock(N,O)},_doFinalize:function(){var N,O=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(O.pad(this._data,this.blockSize),N=this._process(!0)):(N=this._process(!0),O.unpad(N)),N},blockSize:128/32});var w=s.CipherParams=o.extend({init:function(N){this.mixIn(N)},toString:function(N){return(N||this.formatter).stringify(this)}}),E=i.format={},_=E.OpenSSL={stringify:function(N){var O,F=N.ciphertext,$=N.salt;return $?O=a.create([1398893684,1701076831]).concat($).concat(F):O=F,O.toString(c)},parse:function(N){var O,F=c.parse(N),$=F.words;return $[0]==1398893684&&$[1]==1701076831&&(O=a.create($.slice(2,4)),$.splice(0,4),F.sigBytes-=16),w.create({ciphertext:F,salt:O})}},C=s.SerializableCipher=o.extend({cfg:o.extend({format:_}),encrypt:function(N,O,F,$){$=this.cfg.extend($);var z=N.createEncryptor(F,$),q=z.finalize(O),W=z.cfg;return w.create({ciphertext:q,key:F,iv:W.iv,algorithm:N,mode:W.mode,padding:W.padding,blockSize:N.blockSize,formatter:$.format})},decrypt:function(N,O,F,$){$=this.cfg.extend($),O=this._parse(O,$.format);var z=N.createDecryptor(F,$).finalize(O.ciphertext);return z},_parse:function(N,O){return typeof N=="string"?O.parse(N,this):N}}),S=i.kdf={},k=S.OpenSSL={execute:function(N,O,F,$,z){if($||($=a.random(64/8)),z)var q=f.create({keySize:O+F,hasher:z}).compute(N,$);else var q=f.create({keySize:O+F}).compute(N,$);var W=a.create(q.words.slice(O),F*4);return q.sigBytes=O*4,w.create({key:q,iv:W,salt:$})}},R=s.PasswordBasedCipher=C.extend({cfg:C.cfg.extend({kdf:k}),encrypt:function(N,O,F,$){$=this.cfg.extend($);var z=$.kdf.execute(F,N.keySize,N.ivSize,$.salt,$.hasher);$.iv=z.iv;var q=C.encrypt.call(this,N,O,z.key,$);return q.mixIn(z),q},decrypt:function(N,O,F,$){$=this.cfg.extend($),O=this._parse(O,$.format);var z=$.kdf.execute(F,N.keySize,N.ivSize,O.salt,$.hasher);$.iv=z.iv;var q=C.decrypt.call(this,N,O,z.key,$);return q}})}()})}(PD)),PD.exports}var ND={exports:{}},Fyt=ND.exports,Lae;function Byt(){return Lae||(Lae=1,function(e,t){(function(n,r,i){e.exports=r(Gn(),ao())})(Fyt,function(n){return n.mode.CFB=function(){var r=n.lib.BlockCipherMode.extend();r.Encryptor=r.extend({processBlock:function(s,o){var a=this._cipher,u=a.blockSize;i.call(this,s,o,u,a),this._prevBlock=s.slice(o,o+u)}}),r.Decryptor=r.extend({processBlock:function(s,o){var a=this._cipher,u=a.blockSize,l=s.slice(o,o+u);i.call(this,s,o,u,a),this._prevBlock=l}});function i(s,o,a,u){var l,c=this._iv;c?(l=c.slice(0),this._iv=void 0):l=this._prevBlock,u.encryptBlock(l,0);for(var d=0;d<a;d++)s[o+d]^=l[d]}return r}(),n.mode.CFB})}(ND)),ND.exports}var OD={exports:{}},jyt=OD.exports,Fae;function zyt(){return Fae||(Fae=1,function(e,t){(function(n,r,i){e.exports=r(Gn(),ao())})(jyt,function(n){return n.mode.CTR=function(){var r=n.lib.BlockCipherMode.extend(),i=r.Encryptor=r.extend({processBlock:function(s,o){var a=this._cipher,u=a.blockSize,l=this._iv,c=this._counter;l&&(c=this._counter=l.slice(0),this._iv=void 0);var d=c.slice(0);a.encryptBlock(d,0),c[u-1]=c[u-1]+1|0;for(var f=0;f<u;f++)s[o+f]^=d[f]}});return r.Decryptor=i,r}(),n.mode.CTR})}(OD)),OD.exports}var $D={exports:{}},Uyt=$D.exports,Bae;function Vyt(){return Bae||(Bae=1,function(e,t){(function(n,r,i){e.exports=r(Gn(),ao())})(Uyt,function(n){/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */return n.mode.CTRGladman=function(){var r=n.lib.BlockCipherMode.extend();function i(a){if((a>>24&255)===255){var u=a>>16&255,l=a>>8&255,c=a&255;u===255?(u=0,l===255?(l=0,c===255?c=0:++c):++l):++u,a=0,a+=u<<16,a+=l<<8,a+=c}else a+=1<<24;return a}function s(a){return(a[0]=i(a[0]))===0&&(a[1]=i(a[1])),a}var o=r.Encryptor=r.extend({processBlock:function(a,u){var l=this._cipher,c=l.blockSize,d=this._iv,f=this._counter;d&&(f=this._counter=d.slice(0),this._iv=void 0),s(f);var h=f.slice(0);l.encryptBlock(h,0);for(var p=0;p<c;p++)a[u+p]^=h[p]}});return r.Decryptor=o,r}(),n.mode.CTRGladman})}($D)),$D.exports}var MD={exports:{}},Hyt=MD.exports,jae;function qyt(){return jae||(jae=1,function(e,t){(function(n,r,i){e.exports=r(Gn(),ao())})(Hyt,function(n){return n.mode.OFB=function(){var r=n.lib.BlockCipherMode.extend(),i=r.Encryptor=r.extend({processBlock:function(s,o){var a=this._cipher,u=a.blockSize,l=this._iv,c=this._keystream;l&&(c=this._keystream=l.slice(0),this._iv=void 0),a.encryptBlock(c,0);for(var d=0;d<u;d++)s[o+d]^=c[d]}});return r.Decryptor=i,r}(),n.mode.OFB})}(MD)),MD.exports}var LD={exports:{}},Wyt=LD.exports,zae;function Gyt(){return zae||(zae=1,function(e,t){(function(n,r,i){e.exports=r(Gn(),ao())})(Wyt,function(n){return n.mode.ECB=function(){var r=n.lib.BlockCipherMode.extend();return r.Encryptor=r.extend({processBlock:function(i,s){this._cipher.encryptBlock(i,s)}}),r.Decryptor=r.extend({processBlock:function(i,s){this._cipher.decryptBlock(i,s)}}),r}(),n.mode.ECB})}(LD)),LD.exports}var FD={exports:{}},Yyt=FD.exports,Uae;function Kyt(){return Uae||(Uae=1,function(e,t){(function(n,r,i){e.exports=r(Gn(),ao())})(Yyt,function(n){return n.pad.AnsiX923={pad:function(r,i){var s=r.sigBytes,o=i*4,a=o-s%o,u=s+a-1;r.clamp(),r.words[u>>>2]|=a<<24-u%4*8,r.sigBytes+=a},unpad:function(r){var i=r.words[r.sigBytes-1>>>2]&255;r.sigBytes-=i}},n.pad.Ansix923})}(FD)),FD.exports}var BD={exports:{}},Xyt=BD.exports,Vae;function Qyt(){return Vae||(Vae=1,function(e,t){(function(n,r,i){e.exports=r(Gn(),ao())})(Xyt,function(n){return n.pad.Iso10126={pad:function(r,i){var s=i*4,o=s-r.sigBytes%s;r.concat(n.lib.WordArray.random(o-1)).concat(n.lib.WordArray.create([o<<24],1))},unpad:function(r){var i=r.words[r.sigBytes-1>>>2]&255;r.sigBytes-=i}},n.pad.Iso10126})}(BD)),BD.exports}var jD={exports:{}},Jyt=jD.exports,Hae;function Zyt(){return Hae||(Hae=1,function(e,t){(function(n,r,i){e.exports=r(Gn(),ao())})(Jyt,function(n){return n.pad.Iso97971={pad:function(r,i){r.concat(n.lib.WordArray.create([2147483648],1)),n.pad.ZeroPadding.pad(r,i)},unpad:function(r){n.pad.ZeroPadding.unpad(r),r.sigBytes--}},n.pad.Iso97971})}(jD)),jD.exports}var zD={exports:{}},e1t=zD.exports,qae;function t1t(){return qae||(qae=1,function(e,t){(function(n,r,i){e.exports=r(Gn(),ao())})(e1t,function(n){return n.pad.ZeroPadding={pad:function(r,i){var s=i*4;r.clamp(),r.sigBytes+=s-(r.sigBytes%s||s)},unpad:function(r){for(var i=r.words,s=r.sigBytes-1,s=r.sigBytes-1;s>=0;s--)if(i[s>>>2]>>>24-s%4*8&255){r.sigBytes=s+1;break}}},n.pad.ZeroPadding})}(zD)),zD.exports}var UD={exports:{}},n1t=UD.exports,Wae;function r1t(){return Wae||(Wae=1,function(e,t){(function(n,r,i){e.exports=r(Gn(),ao())})(n1t,function(n){return n.pad.NoPadding={pad:function(){},unpad:function(){}},n.pad.NoPadding})}(UD)),UD.exports}var VD={exports:{}},i1t=VD.exports,Gae;function s1t(){return Gae||(Gae=1,function(e,t){(function(n,r,i){e.exports=r(Gn(),ao())})(i1t,function(n){return function(r){var i=n,s=i.lib,o=s.CipherParams,a=i.enc,u=a.Hex,l=i.format;l.Hex={stringify:function(c){return c.ciphertext.toString(u)},parse:function(c){var d=u.parse(c);return o.create({ciphertext:d})}}}(),n.format.Hex})}(VD)),VD.exports}var HD={exports:{}},o1t=HD.exports,Yae;function a1t(){return Yae||(Yae=1,function(e,t){(function(n,r,i){e.exports=r(Gn(),rb(),ib(),fg(),ao())})(o1t,function(n){return function(){var r=n,i=r.lib,s=i.BlockCipher,o=r.algo,a=[],u=[],l=[],c=[],d=[],f=[],h=[],p=[],m=[],y=[];(function(){for(var w=[],E=0;E<256;E++)E<128?w[E]=E<<1:w[E]=E<<1^283;for(var _=0,C=0,E=0;E<256;E++){var S=C^C<<1^C<<2^C<<3^C<<4;S=S>>>8^S&255^99,a[_]=S,u[S]=_;var k=w[_],R=w[k],N=w[R],O=w[S]*257^S*16843008;l[_]=O<<24|O>>>8,c[_]=O<<16|O>>>16,d[_]=O<<8|O>>>24,f[_]=O;var O=N*16843009^R*65537^k*257^_*16843008;h[S]=O<<24|O>>>8,p[S]=O<<16|O>>>16,m[S]=O<<8|O>>>24,y[S]=O,_?(_=k^w[w[w[N^k]]],C^=w[w[C]]):_=C=1}})();var v=[0,1,2,4,8,16,32,64,128,27,54],b=o.AES=s.extend({_doReset:function(){var w;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var E=this._keyPriorReset=this._key,_=E.words,C=E.sigBytes/4,S=this._nRounds=C+6,k=(S+1)*4,R=this._keySchedule=[],N=0;N<k;N++)N<C?R[N]=_[N]:(w=R[N-1],N%C?C>6&&N%C==4&&(w=a[w>>>24]<<24|a[w>>>16&255]<<16|a[w>>>8&255]<<8|a[w&255]):(w=w<<8|w>>>24,w=a[w>>>24]<<24|a[w>>>16&255]<<16|a[w>>>8&255]<<8|a[w&255],w^=v[N/C|0]<<24),R[N]=R[N-C]^w);for(var O=this._invKeySchedule=[],F=0;F<k;F++){var N=k-F;if(F%4)var w=R[N];else var w=R[N-4];F<4||N<=4?O[F]=w:O[F]=h[a[w>>>24]]^p[a[w>>>16&255]]^m[a[w>>>8&255]]^y[a[w&255]]}}},encryptBlock:function(w,E){this._doCryptBlock(w,E,this._keySchedule,l,c,d,f,a)},decryptBlock:function(w,E){var _=w[E+1];w[E+1]=w[E+3],w[E+3]=_,this._doCryptBlock(w,E,this._invKeySchedule,h,p,m,y,u);var _=w[E+1];w[E+1]=w[E+3],w[E+3]=_},_doCryptBlock:function(w,E,_,C,S,k,R,N){for(var O=this._nRounds,F=w[E]^_[0],$=w[E+1]^_[1],z=w[E+2]^_[2],q=w[E+3]^_[3],W=4,J=1;J<O;J++){var K=C[F>>>24]^S[$>>>16&255]^k[z>>>8&255]^R[q&255]^_[W++],Z=C[$>>>24]^S[z>>>16&255]^k[q>>>8&255]^R[F&255]^_[W++],U=C[z>>>24]^S[q>>>16&255]^k[F>>>8&255]^R[$&255]^_[W++],L=C[q>>>24]^S[F>>>16&255]^k[$>>>8&255]^R[z&255]^_[W++];F=K,$=Z,z=U,q=L}var K=(N[F>>>24]<<24|N[$>>>16&255]<<16|N[z>>>8&255]<<8|N[q&255])^_[W++],Z=(N[$>>>24]<<24|N[z>>>16&255]<<16|N[q>>>8&255]<<8|N[F&255])^_[W++],U=(N[z>>>24]<<24|N[q>>>16&255]<<16|N[F>>>8&255]<<8|N[$&255])^_[W++],L=(N[q>>>24]<<24|N[F>>>16&255]<<16|N[$>>>8&255]<<8|N[z&255])^_[W++];w[E]=K,w[E+1]=Z,w[E+2]=U,w[E+3]=L},keySize:256/32});r.AES=s._createHelper(b)}(),n.AES})}(HD)),HD.exports}var qD={exports:{}},u1t=qD.exports,Kae;function l1t(){return Kae||(Kae=1,function(e,t){(function(n,r,i){e.exports=r(Gn(),rb(),ib(),fg(),ao())})(u1t,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=i.BlockCipher,a=r.algo,u=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],l=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],c=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],d=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],f=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],h=a.DES=o.extend({_doReset:function(){for(var v=this._key,b=v.words,w=[],E=0;E<56;E++){var _=u[E]-1;w[E]=b[_>>>5]>>>31-_%32&1}for(var C=this._subKeys=[],S=0;S<16;S++){for(var k=C[S]=[],R=c[S],E=0;E<24;E++)k[E/6|0]|=w[(l[E]-1+R)%28]<<31-E%6,k[4+(E/6|0)]|=w[28+(l[E+24]-1+R)%28]<<31-E%6;k[0]=k[0]<<1|k[0]>>>31;for(var E=1;E<7;E++)k[E]=k[E]>>>(E-1)*4+3;k[7]=k[7]<<5|k[7]>>>27}for(var N=this._invSubKeys=[],E=0;E<16;E++)N[E]=C[15-E]},encryptBlock:function(v,b){this._doCryptBlock(v,b,this._subKeys)},decryptBlock:function(v,b){this._doCryptBlock(v,b,this._invSubKeys)},_doCryptBlock:function(v,b,w){this._lBlock=v[b],this._rBlock=v[b+1],p.call(this,4,252645135),p.call(this,16,65535),m.call(this,2,858993459),m.call(this,8,16711935),p.call(this,1,1431655765);for(var E=0;E<16;E++){for(var _=w[E],C=this._lBlock,S=this._rBlock,k=0,R=0;R<8;R++)k|=d[R][((S^_[R])&f[R])>>>0];this._lBlock=S,this._rBlock=C^k}var N=this._lBlock;this._lBlock=this._rBlock,this._rBlock=N,p.call(this,1,1431655765),m.call(this,8,16711935),m.call(this,2,858993459),p.call(this,16,65535),p.call(this,4,252645135),v[b]=this._lBlock,v[b+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function p(v,b){var w=(this._lBlock>>>v^this._rBlock)&b;this._rBlock^=w,this._lBlock^=w<<v}function m(v,b){var w=(this._rBlock>>>v^this._lBlock)&b;this._lBlock^=w,this._rBlock^=w<<v}r.DES=o._createHelper(h);var y=a.TripleDES=o.extend({_doReset:function(){var v=this._key,b=v.words;if(b.length!==2&&b.length!==4&&b.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var w=b.slice(0,2),E=b.length<4?b.slice(0,2):b.slice(2,4),_=b.length<6?b.slice(0,2):b.slice(4,6);this._des1=h.createEncryptor(s.create(w)),this._des2=h.createEncryptor(s.create(E)),this._des3=h.createEncryptor(s.create(_))},encryptBlock:function(v,b){this._des1.encryptBlock(v,b),this._des2.decryptBlock(v,b),this._des3.encryptBlock(v,b)},decryptBlock:function(v,b){this._des3.decryptBlock(v,b),this._des2.encryptBlock(v,b),this._des1.decryptBlock(v,b)},keySize:192/32,ivSize:64/32,blockSize:64/32});r.TripleDES=o._createHelper(y)}(),n.TripleDES})}(qD)),qD.exports}var WD={exports:{}},c1t=WD.exports,Xae;function d1t(){return Xae||(Xae=1,function(e,t){(function(n,r,i){e.exports=r(Gn(),rb(),ib(),fg(),ao())})(c1t,function(n){return function(){var r=n,i=r.lib,s=i.StreamCipher,o=r.algo,a=o.RC4=s.extend({_doReset:function(){for(var c=this._key,d=c.words,f=c.sigBytes,h=this._S=[],p=0;p<256;p++)h[p]=p;for(var p=0,m=0;p<256;p++){var y=p%f,v=d[y>>>2]>>>24-y%4*8&255;m=(m+h[p]+v)%256;var b=h[p];h[p]=h[m],h[m]=b}this._i=this._j=0},_doProcessBlock:function(c,d){c[d]^=u.call(this)},keySize:256/32,ivSize:0});function u(){for(var c=this._S,d=this._i,f=this._j,h=0,p=0;p<4;p++){d=(d+1)%256,f=(f+c[d])%256;var m=c[d];c[d]=c[f],c[f]=m,h|=c[(c[d]+c[f])%256]<<24-p*8}return this._i=d,this._j=f,h}r.RC4=s._createHelper(a);var l=o.RC4Drop=a.extend({cfg:a.cfg.extend({drop:192}),_doReset:function(){a._doReset.call(this);for(var c=this.cfg.drop;c>0;c--)u.call(this)}});r.RC4Drop=s._createHelper(l)}(),n.RC4})}(WD)),WD.exports}var GD={exports:{}},f1t=GD.exports,Qae;function h1t(){return Qae||(Qae=1,function(e,t){(function(n,r,i){e.exports=r(Gn(),rb(),ib(),fg(),ao())})(f1t,function(n){return function(){var r=n,i=r.lib,s=i.StreamCipher,o=r.algo,a=[],u=[],l=[],c=o.Rabbit=s.extend({_doReset:function(){for(var f=this._key.words,h=this.cfg.iv,p=0;p<4;p++)f[p]=(f[p]<<8|f[p]>>>24)&16711935|(f[p]<<24|f[p]>>>8)&4278255360;var m=this._X=[f[0],f[3]<<16|f[2]>>>16,f[1],f[0]<<16|f[3]>>>16,f[2],f[1]<<16|f[0]>>>16,f[3],f[2]<<16|f[1]>>>16],y=this._C=[f[2]<<16|f[2]>>>16,f[0]&4294901760|f[1]&65535,f[3]<<16|f[3]>>>16,f[1]&4294901760|f[2]&65535,f[0]<<16|f[0]>>>16,f[2]&4294901760|f[3]&65535,f[1]<<16|f[1]>>>16,f[3]&4294901760|f[0]&65535];this._b=0;for(var p=0;p<4;p++)d.call(this);for(var p=0;p<8;p++)y[p]^=m[p+4&7];if(h){var v=h.words,b=v[0],w=v[1],E=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,_=(w<<8|w>>>24)&16711935|(w<<24|w>>>8)&4278255360,C=E>>>16|_&4294901760,S=_<<16|E&65535;y[0]^=E,y[1]^=C,y[2]^=_,y[3]^=S,y[4]^=E,y[5]^=C,y[6]^=_,y[7]^=S;for(var p=0;p<4;p++)d.call(this)}},_doProcessBlock:function(f,h){var p=this._X;d.call(this),a[0]=p[0]^p[5]>>>16^p[3]<<16,a[1]=p[2]^p[7]>>>16^p[5]<<16,a[2]=p[4]^p[1]>>>16^p[7]<<16,a[3]=p[6]^p[3]>>>16^p[1]<<16;for(var m=0;m<4;m++)a[m]=(a[m]<<8|a[m]>>>24)&16711935|(a[m]<<24|a[m]>>>8)&4278255360,f[h+m]^=a[m]},blockSize:128/32,ivSize:64/32});function d(){for(var f=this._X,h=this._C,p=0;p<8;p++)u[p]=h[p];h[0]=h[0]+1295307597+this._b|0,h[1]=h[1]+3545052371+(h[0]>>>0<u[0]>>>0?1:0)|0,h[2]=h[2]+886263092+(h[1]>>>0<u[1]>>>0?1:0)|0,h[3]=h[3]+1295307597+(h[2]>>>0<u[2]>>>0?1:0)|0,h[4]=h[4]+3545052371+(h[3]>>>0<u[3]>>>0?1:0)|0,h[5]=h[5]+886263092+(h[4]>>>0<u[4]>>>0?1:0)|0,h[6]=h[6]+1295307597+(h[5]>>>0<u[5]>>>0?1:0)|0,h[7]=h[7]+3545052371+(h[6]>>>0<u[6]>>>0?1:0)|0,this._b=h[7]>>>0<u[7]>>>0?1:0;for(var p=0;p<8;p++){var m=f[p]+h[p],y=m&65535,v=m>>>16,b=((y*y>>>17)+y*v>>>15)+v*v,w=((m&4294901760)*m|0)+((m&65535)*m|0);l[p]=b^w}f[0]=l[0]+(l[7]<<16|l[7]>>>16)+(l[6]<<16|l[6]>>>16)|0,f[1]=l[1]+(l[0]<<8|l[0]>>>24)+l[7]|0,f[2]=l[2]+(l[1]<<16|l[1]>>>16)+(l[0]<<16|l[0]>>>16)|0,f[3]=l[3]+(l[2]<<8|l[2]>>>24)+l[1]|0,f[4]=l[4]+(l[3]<<16|l[3]>>>16)+(l[2]<<16|l[2]>>>16)|0,f[5]=l[5]+(l[4]<<8|l[4]>>>24)+l[3]|0,f[6]=l[6]+(l[5]<<16|l[5]>>>16)+(l[4]<<16|l[4]>>>16)|0,f[7]=l[7]+(l[6]<<8|l[6]>>>24)+l[5]|0}r.Rabbit=s._createHelper(c)}(),n.Rabbit})}(GD)),GD.exports}var YD={exports:{}},p1t=YD.exports,Jae;function m1t(){return Jae||(Jae=1,function(e,t){(function(n,r,i){e.exports=r(Gn(),rb(),ib(),fg(),ao())})(p1t,function(n){return function(){var r=n,i=r.lib,s=i.StreamCipher,o=r.algo,a=[],u=[],l=[],c=o.RabbitLegacy=s.extend({_doReset:function(){var f=this._key.words,h=this.cfg.iv,p=this._X=[f[0],f[3]<<16|f[2]>>>16,f[1],f[0]<<16|f[3]>>>16,f[2],f[1]<<16|f[0]>>>16,f[3],f[2]<<16|f[1]>>>16],m=this._C=[f[2]<<16|f[2]>>>16,f[0]&4294901760|f[1]&65535,f[3]<<16|f[3]>>>16,f[1]&4294901760|f[2]&65535,f[0]<<16|f[0]>>>16,f[2]&4294901760|f[3]&65535,f[1]<<16|f[1]>>>16,f[3]&4294901760|f[0]&65535];this._b=0;for(var y=0;y<4;y++)d.call(this);for(var y=0;y<8;y++)m[y]^=p[y+4&7];if(h){var v=h.words,b=v[0],w=v[1],E=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,_=(w<<8|w>>>24)&16711935|(w<<24|w>>>8)&4278255360,C=E>>>16|_&4294901760,S=_<<16|E&65535;m[0]^=E,m[1]^=C,m[2]^=_,m[3]^=S,m[4]^=E,m[5]^=C,m[6]^=_,m[7]^=S;for(var y=0;y<4;y++)d.call(this)}},_doProcessBlock:function(f,h){var p=this._X;d.call(this),a[0]=p[0]^p[5]>>>16^p[3]<<16,a[1]=p[2]^p[7]>>>16^p[5]<<16,a[2]=p[4]^p[1]>>>16^p[7]<<16,a[3]=p[6]^p[3]>>>16^p[1]<<16;for(var m=0;m<4;m++)a[m]=(a[m]<<8|a[m]>>>24)&16711935|(a[m]<<24|a[m]>>>8)&4278255360,f[h+m]^=a[m]},blockSize:128/32,ivSize:64/32});function d(){for(var f=this._X,h=this._C,p=0;p<8;p++)u[p]=h[p];h[0]=h[0]+1295307597+this._b|0,h[1]=h[1]+3545052371+(h[0]>>>0<u[0]>>>0?1:0)|0,h[2]=h[2]+886263092+(h[1]>>>0<u[1]>>>0?1:0)|0,h[3]=h[3]+1295307597+(h[2]>>>0<u[2]>>>0?1:0)|0,h[4]=h[4]+3545052371+(h[3]>>>0<u[3]>>>0?1:0)|0,h[5]=h[5]+886263092+(h[4]>>>0<u[4]>>>0?1:0)|0,h[6]=h[6]+1295307597+(h[5]>>>0<u[5]>>>0?1:0)|0,h[7]=h[7]+3545052371+(h[6]>>>0<u[6]>>>0?1:0)|0,this._b=h[7]>>>0<u[7]>>>0?1:0;for(var p=0;p<8;p++){var m=f[p]+h[p],y=m&65535,v=m>>>16,b=((y*y>>>17)+y*v>>>15)+v*v,w=((m&4294901760)*m|0)+((m&65535)*m|0);l[p]=b^w}f[0]=l[0]+(l[7]<<16|l[7]>>>16)+(l[6]<<16|l[6]>>>16)|0,f[1]=l[1]+(l[0]<<8|l[0]>>>24)+l[7]|0,f[2]=l[2]+(l[1]<<16|l[1]>>>16)+(l[0]<<16|l[0]>>>16)|0,f[3]=l[3]+(l[2]<<8|l[2]>>>24)+l[1]|0,f[4]=l[4]+(l[3]<<16|l[3]>>>16)+(l[2]<<16|l[2]>>>16)|0,f[5]=l[5]+(l[4]<<8|l[4]>>>24)+l[3]|0,f[6]=l[6]+(l[5]<<16|l[5]>>>16)+(l[4]<<16|l[4]>>>16)|0,f[7]=l[7]+(l[6]<<8|l[6]>>>24)+l[5]|0}r.RabbitLegacy=s._createHelper(c)}(),n.RabbitLegacy})}(YD)),YD.exports}var KD={exports:{}},g1t=KD.exports,Zae;function y1t(){return Zae||(Zae=1,function(e,t){(function(n,r,i){e.exports=r(Gn(),rb(),ib(),fg(),ao())})(g1t,function(n){return function(){var r=n,i=r.lib,s=i.BlockCipher,o=r.algo;const a=16,u=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],l=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var c={pbox:[],sbox:[]};function d(y,v){let b=v>>24&255,w=v>>16&255,E=v>>8&255,_=v&255,C=y.sbox[0][b]+y.sbox[1][w];return C=C^y.sbox[2][E],C=C+y.sbox[3][_],C}function f(y,v,b){let w=v,E=b,_;for(let C=0;C<a;++C)w=w^y.pbox[C],E=d(y,w)^E,_=w,w=E,E=_;return _=w,w=E,E=_,E=E^y.pbox[a],w=w^y.pbox[a+1],{left:w,right:E}}function h(y,v,b){let w=v,E=b,_;for(let C=a+1;C>1;--C)w=w^y.pbox[C],E=d(y,w)^E,_=w,w=E,E=_;return _=w,w=E,E=_,E=E^y.pbox[1],w=w^y.pbox[0],{left:w,right:E}}function p(y,v,b){for(let S=0;S<4;S++){y.sbox[S]=[];for(let k=0;k<256;k++)y.sbox[S][k]=l[S][k]}let w=0;for(let S=0;S<a+2;S++)y.pbox[S]=u[S]^v[w],w++,w>=b&&(w=0);let E=0,_=0,C=0;for(let S=0;S<a+2;S+=2)C=f(y,E,_),E=C.left,_=C.right,y.pbox[S]=E,y.pbox[S+1]=_;for(let S=0;S<4;S++)for(let k=0;k<256;k+=2)C=f(y,E,_),E=C.left,_=C.right,y.sbox[S][k]=E,y.sbox[S][k+1]=_;return!0}var m=o.Blowfish=s.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var y=this._keyPriorReset=this._key,v=y.words,b=y.sigBytes/4;p(c,v,b)}},encryptBlock:function(y,v){var b=f(c,y[v],y[v+1]);y[v]=b.left,y[v+1]=b.right},decryptBlock:function(y,v){var b=h(c,y[v],y[v+1]);y[v]=b.left,y[v+1]=b.right},blockSize:64/32,keySize:128/32,ivSize:64/32});r.Blowfish=s._createHelper(m)}(),n.Blowfish})}(KD)),KD.exports}var b1t=pD.exports,eue;function v1t(){return eue||(eue=1,function(e,t){(function(n,r,i){e.exports=r(Gn(),p6(),myt(),yyt(),rb(),xyt(),ib(),wTe(),WW(),Cyt(),ETe(),kyt(),Ryt(),Pyt(),GW(),$yt(),fg(),ao(),Byt(),zyt(),Vyt(),qyt(),Gyt(),Kyt(),Qyt(),Zyt(),t1t(),r1t(),s1t(),a1t(),l1t(),d1t(),h1t(),m1t(),y1t())})(b1t,function(n){return n})}(pD)),pD.exports}var dx=v1t();const _Te=dx.enc.Hex.parse("000102030405060708090a0b0c0d0e0f101112131415161718191a1b1c1d1e1f");function vs(e){const t=dx.AES.encrypt(e.toString(),_Te,{mode:dx.mode.ECB}).toString();return btoa(t)}function f1(e){const t=dx.AES.decrypt(atob(e),_Te,{mode:dx.mode.ECB}).toString(dx.enc.Utf8);return parseInt(t,10)}function Hf(){return ir(e=>e.config)}function Kp(){const{studyId:e}=Va();return`${e}`}function Sl(){const{index:e}=Va();return e===void 0?0:e.startsWith("reviewer-")||e.startsWith("__")?e:f1(e)}const tue=Object.assign({"../public/matrices/Stimuli.tsx":Z_e,"../public/matrices/components/Background.tsx":y_e,"../public/matrices/components/ControlPanel.tsx":X_e,"../public/matrices/components/EncodedCells.tsx":S_e,"../public/matrices/components/Highlighting.tsx":x_e,"../public/matrices/components/InteractionButtons.tsx":Y_e,"../public/matrices/components/Legend.tsx":T_e,"../public/matrices/components/Marks.tsx":D_e,"../public/matrices/components/Matrix.tsx":J_e,"../public/matrices/components/Tooltip.tsx":k_e,"../public/matrices/components/axis/DestinationAxis.tsx":m_e,"../public/matrices/components/axis/OriginAxis.tsx":h_e,"../public/matrices/hooks/useCellScales.tsx":M_e,"../public/matrices/hooks/useConfig.tsx":W_e,"../public/matrices/hooks/useOrdering.tsx":U_e,"../public/matrices/hooks/useRenderEncodeCells.tsx":O_e,"../public/matrices/hooks/useReplay.tsx":H_e,"../public/matrices/utils/Accessors.tsx":w_e,"../public/matrices/utils/Constants.ts":b_e,"../public/matrices/utils/Enums.ts":E_e,"../public/matrices/utils/Interfaces.tsx":eTe,"../public/matrices/utils/MatrixContext.tsx":c_e});function ih(){const{funcIndex:e}=Va(),t=ir(m=>m.answers),n=Hf(),r=Sl(),i=nb(),s=Cl(),o=Kp(),a=Bo(),{pushToFuncSequence:u}=ro(),[l,c]=D.useState(null),d=D.useMemo(()=>typeof r=="number"?bae(i[r],n):r.includes("reviewer-")?r:null,[r,i,n]),[f,h]=D.useState("__dynamicLoading"),p=D.useMemo(()=>{if(typeof r=="number"&&!d){const m=gae(i[r],n.sequence);if(!m)return null;const y=`../public/${m.functionPath}`;return y in tue?tue[y].default:null}return null},[d,r,i,n.sequence]);return D.useEffect(()=>{!e&&p&&typeof r=="number"&&s(`/${o}/${vs(r)}/${vs(0)}${window.location.search}`)},[r,e,s,p,o]),D.useEffect(()=>{var m;if(typeof r=="number"){const y=bae(i[r],n),v=i[r],b=e?f1(e):0,w=Object.entries(t).find(([_,C])=>_.startsWith(`${v}_${r}_`)&&_.endsWith(`${b}`)),E=w?w[1].componentName:null;if(E!==null){h(E),c(b);return}if(!y&&p!==null){const{component:_,parameters:C,correctAnswer:S}=p({components:[],answers:t,sequenceSoFar:[],customParameters:(m=gae(i[r],n.sequence))==null?void 0:m.parameters});_!==null?e&&(h(_),c(b),a(u({component:_,funcName:v,index:r,funcIndex:b,parameters:C||void 0,correctAnswer:S||void 0}))):(h("__dynamicLoading"),c(null),s(`/${o}/${vs(r+1)}${window.location.search}`))}}},[t,r,i,e,s,p,u,a,n,o]),typeof r=="number"&&i[r]==="end"?"end":d?typeof r=="number"?i[r]:r.replace("reviewer-",""):l!==null&&e&&f1(e)===l?f:"__dynamicLoading"}function sb(){const e=Sl(),t=nb(),n=ih(),{funcIndex:r}=Va();return D.useMemo(()=>r&&typeof e=="number"?`${t[e]}_${e}_${n}_${f1(r)}`:`${n}_${e}`,[n,e,r,t])}function YW(){const{funcIndex:e}=Va(),t=nb(),n=Sl(),r=ih(),i=e&&typeof n=="number"?`${t[n]}_${n}_${r}_${f1(e)}`:`${r}_${n}`;return ir(o=>o.answers[i])}const TTe=D.createContext(null);function x1t(){const e=D.useContext(TTe);if(!e)throw new Error("useWindowEvents must be used within a WindowEventsProvider");return e}function cE(){const[e]=Zf();return!!e.get("participantId")}function nue(e,t,n,r){const i=t.slice(0,t.lastIndexOf("_")),s=Object.entries(r.components).find(([a])=>a===i),o=s?s[1]:null;if(!o)throw new Error(`Component ${i} could not be found in the study components.`);return o.correctAnswer?o.correctAnswer.every(a=>e[a.id]===a.answer):!0}function w1t(){const e=Sl(),t=nb(),n=ir(R=>R.trialValidation),r=ir(R=>R.sequence),i=ir(R=>R.answers),s=ir(R=>R.modes),o=Hf(),{funcIndex:a}=Va(),u=sb(),l=Bo(),{saveTrialAnswer:c,setReactiveAnswers:d,setMatrixAnswersRadio:f,setMatrixAnswersCheckbox:h}=ro(),{storageEngine:p}=Mi(),m=Kp(),y=D.useMemo(()=>s.dataCollectionEnabled,[s]),v=cyt(u),b=cE(),w=typeof e!="number"||b||!v,E=YW(),_=Cl(),C=D.useMemo(()=>Date.now(),[a,e]),S=x1t(),k=D.useCallback((R=!0)=>{if(typeof e!="number")return;const N=structuredClone(n[u]),O=Object.values(N).reduce((U,L)=>Object.hasOwn(L,"values")?{...U,...L.values}:U,{}),{provenanceGraph:F}=N,$=Date.now(),{componentName:z}=E,q=S&&"current"in S&&S.current?S.current.splice(0,S.current.length):[];if(y&&E.endTime===-1){const U={...E,answer:R?O:{},startTime:C,endTime:$,provenanceGraph:F,windowEvents:q,timedOut:!R};l(c({identifier:u,...U})),p&&p.saveAnswers({...i,[u]:U}),l(d({})),l(h(null)),l(f(null))}let W=e+1;const J=HW(r,e),K=J!==null&&J.some(U=>Object.hasOwn(U.currentBlock,"skip")&&U.currentBlock.skip!==void 0),Z={...i,[u]:{answer:O,startTime:C,endTime:$,provenanceGraph:F,windowEvents:q}};K&&[...J.flatMap(L=>L.currentBlock.skip?L.currentBlock.skip.map(Y=>({...Y,firstIndex:L.firstIndex,lastIndex:L.lastIndex})):[])].some(L=>{let Y=!1;const j=Object.fromEntries(Object.entries(Z).filter(([X])=>{const ne=parseInt(X.slice(X.lastIndexOf("_")+1),10);return ne>=L.firstIndex&&ne<=e})),G=L.check!=="block"?Object.entries(j).filter(([X])=>X.slice(0,X.lastIndexOf("_"))===L.name):Object.entries(j);if(G.length===0)return!1;if(G.some(([X,ne])=>!ne))throw new Error(`There are components with missing response objects for the skip condition: ${JSON.stringify(L,null,2)}`);if(L.check==="response"||L.check==="responses"){const[X,ne]=G[0];L.check==="response"?Y=L.comparison==="equal"?L.value===ne.answer[L.responseId]:L.value!==ne.answer[L.responseId]:Y=!nue(ne.answer,X,o.components[X.slice(0,X.lastIndexOf("_"))],o)}else if(L.check==="block"||L.check==="repeatedComponent"){if(G.length<L.value)return!1;const X=G.map(([de,xe])=>nue(xe.answer,de,o.components[z.slice(0,z.lastIndexOf("_"))],o)),ne=X.filter(de=>de).length,pe=X.length-ne;Y=L.condition==="numCorrect"&&ne===L.value||L.condition==="numIncorrect"&&pe===L.value}if(Y){const X=t.indexOf(L.to),ne=X===-1?oyt(r,L.to):-1;return W=X===-1?ne:X,!0}return!1}),_(a?`/${m}/${vs(e)}/${vs(f1(a)+1)}${window.location.search}`:`/${m}/${vs(W)}${window.location.search}`)},[e,n,u,E,S,y,r,i,C,a,_,m,l,c,p,d,h,f,o,t]);return{isNextDisabled:w,goToNextStep:k}}function E1t({label:e="Next",disabled:t=!1,onClick:n,configInUse:r}){const{isNextDisabled:i,goToNextStep:s}=w1t(),o=Hf(),a=Cl(),u=D.useCallback(()=>{n&&n(),s()},[s,n]),l=r==null?void 0:r.nextButtonDisableTime,c=(r==null?void 0:r.nextButtonEnableTime)||0,[d,f]=D.useState(void 0);D.useEffect(()=>{let p=0;const m=setInterval(()=>{p+=100,f(p)},100);return()=>{clearInterval(m)}},[]),D.useEffect(()=>{d&&l&&d>=l&&o.uiConfig.timeoutReject&&a("./../__timedOut")},[l,d,a,o.uiConfig.timeoutReject]);const h=D.useMemo(()=>{const p=l&&d?d<=l:!0,m=d?d>=c:!0;return p&&m},[l,c,d]);return D.useEffect(()=>{const p=m=>{m.key==="Enter"&&!t&&!i&&h&&s()};return o.uiConfig.nextOnEnter?(window.addEventListener("keydown",p),()=>{window.removeEventListener("keydown",p)}):()=>{}},[t,i,h,s,o.uiConfig.nextOnEnter]),T.jsxs(T.Fragment,{children:[T.jsx(tn,{type:"submit",disabled:t||i||!h,onClick:u,children:e}),c>0&&d&&d<c&&T.jsxs(up,{mt:"md",title:"Please wait",color:"blue",icon:T.jsx(iH,{}),children:["The next button will be enabled in"," ",Math.ceil((c-d)/1e3)," ","seconds."]}),l&&d&&l-d<1e4&&(l-d>0?T.jsxs(up,{mt:"md",title:"Next button disables soon",color:"yellow",icon:T.jsx(zT,{}),children:["The next button disables in"," ",Math.ceil((l-d)/1e3)," ","seconds."]}):!o.uiConfig.timeoutReject&&T.jsxs(up,{mt:"md",title:"Next button disabled",color:"red",icon:T.jsx(zT,{}),children:["The next button has timed out and is now disabled.",T.jsx(Ti,{justify:"right",mt:"sm",children:T.jsx(tn,{onClick:()=>s(!1),variant:"link",color:"red",children:"Proceed"})})]}))]})}function _1t(e){if(!/^[0-9a-zA-Z-]+$/.test(e))throw new Error(`[@mantine/use-form] Form name "${e}" is invalid, it should contain only letters, numbers and dashes`)}const T1t=typeof window<"u"?D.useLayoutEffect:D.useEffect;function mo(e,t){T1t(()=>{if(e)return window.addEventListener(e,t),()=>window.removeEventListener(e,t)},[e])}function C1t(e,t){e&&_1t(e),mo(`mantine-form:${e}:set-field-value`,n=>t.setFieldValue(n.detail.path,n.detail.value)),mo(`mantine-form:${e}:set-values`,n=>t.setValues(n.detail)),mo(`mantine-form:${e}:set-initial-values`,n=>t.setInitialValues(n.detail)),mo(`mantine-form:${e}:set-errors`,n=>t.setErrors(n.detail)),mo(`mantine-form:${e}:set-field-error`,n=>t.setFieldError(n.detail.path,n.detail.error)),mo(`mantine-form:${e}:clear-field-error`,n=>t.clearFieldError(n.detail)),mo(`mantine-form:${e}:clear-errors`,t.clearErrors),mo(`mantine-form:${e}:reset`,t.reset),mo(`mantine-form:${e}:validate`,t.validate),mo(`mantine-form:${e}:validate-field`,n=>t.validateField(n.detail)),mo(`mantine-form:${e}:reorder-list-item`,n=>t.reorderListItem(n.detail.path,n.detail.payload)),mo(`mantine-form:${e}:remove-list-item`,n=>t.removeListItem(n.detail.path,n.detail.index)),mo(`mantine-form:${e}:insert-list-item`,n=>t.insertListItem(n.detail.path,n.detail.item,n.detail.index)),mo(`mantine-form:${e}:set-dirty`,n=>t.setDirty(n.detail)),mo(`mantine-form:${e}:set-touched`,n=>t.setTouched(n.detail)),mo(`mantine-form:${e}:reset-dirty`,n=>t.resetDirty(n.detail)),mo(`mantine-form:${e}:reset-touched`,t.resetTouched)}function S1t(e){return t=>{if(!t)e(t);else if(typeof t=="function")e(t);else if(typeof t=="object"&&"nativeEvent"in t){const{currentTarget:n}=t;n instanceof HTMLInputElement?n.type==="checkbox"?e(n.checked):e(n.value):(n instanceof HTMLTextAreaElement||n instanceof HTMLSelectElement)&&e(n.value)}else e(t)}}function Xj(e){return e===null||typeof e!="object"?{}:Object.keys(e).reduce((t,n)=>{const r=e[n];return r!=null&&r!==!1&&(t[n]=r),t},{})}function A1t(e){const[t,n]=D.useState(Xj(e)),r=D.useRef(t),i=D.useCallback(u=>{n(l=>{const c=Xj(typeof u=="function"?u(l):u);return r.current=c,c})},[]),s=D.useCallback(()=>i({}),[]),o=D.useCallback(u=>{r.current[u]!==void 0&&i(l=>{const c={...l};return delete c[u],c})},[t]),a=D.useCallback((u,l)=>{l==null||l===!1?o(u):r.current[u]!==l&&i(c=>({...c,[u]:l}))},[t]);return{errorsState:t,setErrors:i,clearErrors:s,setFieldError:a,clearFieldError:o}}function Qj(e,t){if(t===null||typeof t!="object")return{};const n={...t};return Object.keys(t).forEach(r=>{r.includes(`${String(e)}.`)&&delete n[r]}),n}function rue(e,t){const n=e.substring(t.length+1).split(".")[0];return parseInt(n,10)}function iue(e,t,n,r){if(t===void 0)return n;const i=`${String(e)}`;let s=n;r===-1&&(s=Qj(`${i}.${t}`,s));const o={...s},a=new Set;return Object.entries(s).filter(([u])=>{if(!u.startsWith(`${i}.`))return!1;const l=rue(u,i);return Number.isNaN(l)?!1:l>=t}).forEach(([u,l])=>{const c=rue(u,i),d=u.replace(`${i}.${c}`,`${i}.${c+r}`);o[d]=l,a.add(d),a.has(u)||delete o[u]}),o}function k1t(e,{from:t,to:n},r){const i=`${e}.${t}`,s=`${e}.${n}`,o={...r};return Object.keys(r).every(a=>{let u,l;if(a.startsWith(i)&&(u=a,l=a.replace(i,s)),a.startsWith(s)&&(u=a.replace(s,i),l=a),u&&l){const c=o[u],d=o[l];return d===void 0?delete o[u]:o[u]=d,c===void 0?delete o[l]:o[l]=c,!1}return!0}),o}function sue(e,t,n){typeof n.value=="object"&&(n.value=jv(n.value)),!n.enumerable||n.get||n.set||!n.configurable||!n.writable||t==="__proto__"?Object.defineProperty(e,t,n):e[t]=n.value}function jv(e){if(typeof e!="object")return e;var t=0,n,r,i,s=Object.prototype.toString.call(e);if(s==="[object Object]"?i=Object.create(e.__proto__||null):s==="[object Array]"?i=Array(e.length):s==="[object Set]"?(i=new Set,e.forEach(function(o){i.add(jv(o))})):s==="[object Map]"?(i=new Map,e.forEach(function(o,a){i.set(jv(a),jv(o))})):s==="[object Date]"?i=new Date(+e):s==="[object RegExp]"?i=new RegExp(e.source,e.flags):s==="[object DataView]"?i=new e.constructor(jv(e.buffer)):s==="[object ArrayBuffer]"?i=e.slice(0):s.slice(-6)==="Array]"&&(i=new e.constructor(e)),i){for(r=Object.getOwnPropertySymbols(e);t<r.length;t++)sue(i,r[t],Object.getOwnPropertyDescriptor(e,r[t]));for(t=0,r=Object.getOwnPropertyNames(e);t<r.length;t++)Object.hasOwnProperty.call(i,n=r[t])&&i[n]===e[n]||sue(i,n,Object.getOwnPropertyDescriptor(e,n))}return i||e}function CTe(e){return typeof e!="string"?[]:e.split(".")}function Co(e,t){const n=CTe(e);if(n.length===0||typeof t!="object"||t===null)return;let r=t[n[0]];for(let i=1;i<n.length&&r!=null;i+=1)r=r[n[i]];return r}function OS(e,t,n){const r=CTe(e);if(r.length===0)return n;const i=jv(n);if(r.length===1)return i[r[0]]=t,i;let s=i[r[0]];for(let o=1;o<r.length-1;o+=1){if(s===void 0)return i;s=s[r[o]]}return s[r[r.length-1]]=t,i}function I1t(e,{from:t,to:n},r){const i=Co(e,r);if(!Array.isArray(i))return r;const s=[...i],o=i[t];return s.splice(t,1),s.splice(n,0,o),OS(e,s,r)}function R1t(e,t,n,r){const i=Co(e,r);if(!Array.isArray(i))return r;const s=[...i];return s.splice(typeof n=="number"?n:s.length,0,t),OS(e,s,r)}function D1t(e,t,n){const r=Co(e,n);return Array.isArray(r)?OS(e,r.filter((i,s)=>s!==t),n):n}function P1t(e,t,n,r){const i=Co(e,r);if(!Array.isArray(i)||i.length<=n)return r;const s=[...i];return s[n]=t,OS(e,s,r)}function N1t({$values:e,$errors:t,$status:n}){const r=D.useCallback((a,u)=>{n.clearFieldDirty(a),t.setErrors(l=>k1t(a,u,l)),e.setValues({values:I1t(a,u,e.refValues.current),updateState:!0})},[]),i=D.useCallback((a,u)=>{n.clearFieldDirty(a),t.setErrors(l=>iue(a,u,l,-1)),e.setValues({values:D1t(a,u,e.refValues.current),updateState:!0})},[]),s=D.useCallback((a,u,l)=>{n.clearFieldDirty(a),t.setErrors(c=>iue(a,l,c,1)),e.setValues({values:R1t(a,u,l,e.refValues.current),updateState:!0})},[]),o=D.useCallback((a,u,l)=>{n.clearFieldDirty(a),e.setValues({values:P1t(a,l,u,e.refValues.current),updateState:!0})},[]);return{reorderListItem:r,removeListItem:i,insertListItem:s,replaceListItem:o}}var QL,oue;function KW(){return oue||(oue=1,QL=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(s=Object.keys(t),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var o=s[i];if(!e(t[o],n[o]))return!1}return!0}return t!==t&&n!==n}),QL}var O1t=KW();const ET=Tl(O1t);function A_(e,t){const n=Object.keys(e);if(typeof t=="string"){const r=n.filter(i=>i.startsWith(`${t}.`));return e[t]||r.some(i=>e[i])||!1}return n.some(r=>e[r])}function $1t({initialDirty:e,initialTouched:t,mode:n,$values:r}){const[i,s]=D.useState(t),[o,a]=D.useState(e),u=D.useRef(t),l=D.useRef(e),c=D.useCallback(C=>{const S=typeof C=="function"?C(u.current):C;u.current=S,n==="controlled"&&s(S)},[]),d=D.useCallback((C,S=!1)=>{const k=typeof C=="function"?C(l.current):C;l.current=k,(n==="controlled"||S)&&a(k)},[]),f=D.useCallback(()=>c({}),[]),h=D.useCallback(C=>{const S=C?{...C,...r.refValues.current}:r.refValues.current;r.setValuesSnapshot(S),d({})},[]),p=D.useCallback((C,S)=>{c(k=>A_(k,C)===S?k:{...k,[C]:S})},[]),m=D.useCallback((C,S,k)=>{d(R=>A_(R,C)===S?R:{...R,[C]:S},k)},[]),y=D.useCallback((C,S)=>{const k=A_(l.current,C),R=!ET(Co(C,r.getValuesSnapshot()),S),N=Qj(C,l.current);N[C]=R,d(N,k!==R)},[]),v=D.useCallback(C=>A_(u.current,C),[]),b=D.useCallback(C=>d(S=>{if(typeof C!="string")return S;const k=Qj(C,S);return delete k[C],ET(k,S)?S:k}),[]),w=D.useCallback(C=>{if(C){const k=Co(C,l.current);if(typeof k=="boolean")return k;const R=Co(C,r.refValues.current),N=Co(C,r.valuesSnapshot.current);return!ET(R,N)}return Object.keys(l.current).length>0?A_(l.current):!ET(r.refValues.current,r.valuesSnapshot.current)},[]),E=D.useCallback(()=>l.current,[]),_=D.useCallback(()=>u.current,[]);return{touchedState:i,dirtyState:o,touchedRef:u,dirtyRef:l,setTouched:c,setDirty:d,resetDirty:h,resetTouched:f,isTouched:v,setFieldTouched:p,setFieldDirty:m,setTouchedState:s,setDirtyState:a,clearFieldDirty:b,isDirty:w,getDirty:E,getTouched:_,setCalculatedFieldDirty:y}}function M1t({initialValues:e,onValuesChange:t,mode:n}){const r=D.useRef(!1),[i,s]=D.useState(e||{}),o=D.useRef(i),a=D.useRef(i),u=D.useCallback(({values:m,subscribers:y,updateState:v=!0,mergeWithPreviousValues:b=!0})=>{const w=o.current,E=m instanceof Function?m(o.current):m,_=b?{...w,...E}:E;o.current=_,v&&s(_),t==null||t(_,w),y==null||y.filter(Boolean).forEach(C=>C({updatedValues:_,previousValues:w}))},[t]),l=D.useCallback(m=>{var b;const y=Co(m.path,o.current),v=m.value instanceof Function?m.value(y):m.value;if(y!==v){const w=o.current,E=OS(m.path,v,o.current);u({values:E,updateState:m.updateState}),(b=m.subscribers)==null||b.filter(Boolean).forEach(_=>_({path:m.path,updatedValues:E,previousValues:w}))}},[u]),c=D.useCallback(m=>{a.current=m},[]),d=D.useCallback((m,y)=>{r.current||(r.current=!0,u({values:m,updateState:n==="controlled"}),c(m),y())},[u]),f=D.useCallback(()=>{u({values:a.current,updateState:!0,mergeWithPreviousValues:!1})},[u]),h=D.useCallback(()=>o.current,[]),p=D.useCallback(()=>a.current,[]);return{initialized:r,stateValues:i,refValues:o,valuesSnapshot:a,setValues:u,setFieldValue:l,resetValues:f,setValuesSnapshot:c,initialize:d,getValues:h,getValuesSnapshot:p}}function L1t({$status:e}){const t=D.useRef({}),n=D.useCallback((i,s)=>{D.useEffect(()=>(t.current[i]=t.current[i]||[],t.current[i].push(s),()=>{t.current[i]=t.current[i].filter(o=>o!==s)}),[s])},[]),r=D.useCallback(i=>t.current[i]?t.current[i].map(s=>o=>s({previousValue:Co(i,o.previousValues),value:Co(i,o.updatedValues),touched:e.isTouched(i),dirty:e.isDirty(i)})):[],[]);return{subscribers:t,watch:n,getFieldSubscribers:r}}function aue(e,t){return e?`${e}-${t.toString()}`:t.toString()}function uue(e){const t=Xj(e);return{hasErrors:Object.keys(t).length>0,errors:t}}function Jj(e,t,n="",r={}){return typeof e!="object"||e===null?r:Object.keys(e).reduce((i,s)=>{const o=e[s],a=`${n===""?"":`${n}.`}${s}`,u=Co(a,t);let l=!1;return typeof o=="function"&&(i[a]=o(u,t,a)),typeof o=="object"&&Array.isArray(u)&&(l=!0,u.forEach((c,d)=>Jj(o,t,`${a}.${d}`,i))),typeof o=="object"&&typeof u=="object"&&u!==null&&(l||Jj(o,t,a,i)),i},r)}function Zj(e,t){return uue(typeof e=="function"?e(t):Jj(e,t))}function wI(e,t,n){if(typeof e!="string")return{hasError:!1,error:null};const r=Zj(t,n),i=Object.keys(r.errors).find(s=>e.split(".").every((o,a)=>o===s.split(".")[a]));return{hasError:!!i,error:i?r.errors[i]:null}}const F1t="__MANTINE_FORM_INDEX__";function lue(e,t){return t?typeof t=="boolean"?t:Array.isArray(t)?t.includes(e.replace(/[.][0-9]+/g,`.${F1t}`)):!1:!1}function STe({name:e,mode:t="controlled",initialValues:n,initialErrors:r={},initialDirty:i={},initialTouched:s={},clearInputErrorOnChange:o=!0,validateInputOnChange:a=!1,validateInputOnBlur:u=!1,onValuesChange:l,transformValues:c=m=>m,enhanceGetInputProps:d,validate:f,onSubmitPreventDefault:h="always",touchTrigger:p="change"}={}){const m=A1t(r),y=M1t({initialValues:n,onValuesChange:l,mode:t}),v=$1t({initialDirty:i,initialTouched:s,$values:y,mode:t}),b=N1t({$values:y,$errors:m,$status:v}),w=L1t({$status:v}),[E,_]=D.useState(0),[C,S]=D.useState({}),[k,R]=D.useState(!1),N=D.useCallback(()=>{y.resetValues(),m.clearErrors(),v.resetDirty(),v.resetTouched(),t==="uncontrolled"&&_(X=>X+1)},[]),O=D.useCallback(X=>{o&&m.clearErrors(),t==="uncontrolled"&&_(ne=>ne+1),Object.keys(w.subscribers.current).forEach(ne=>{const pe=Co(ne,y.refValues.current),de=Co(ne,X);pe!==de&&w.getFieldSubscribers(ne).forEach(xe=>xe({previousValues:X,updatedValues:y.refValues.current}))})},[o]),F=D.useCallback(X=>{const ne=y.refValues.current;y.initialize(X,()=>t==="uncontrolled"&&_(pe=>pe+1)),O(ne)},[O]),$=D.useCallback((X,ne,pe)=>{const de=lue(X,a),xe=ne instanceof Function?ne(Co(X,y.refValues.current)):ne;v.setCalculatedFieldDirty(X,xe),p==="change"&&v.setFieldTouched(X,!0),!de&&o&&m.clearFieldError(X),y.setFieldValue({path:X,value:ne,updateState:t==="controlled",subscribers:[...w.getFieldSubscribers(X),de?Ce=>{const ue=wI(X,f,Ce.updatedValues);ue.hasError?m.setFieldError(X,ue.error):m.clearFieldError(X)}:null,(pe==null?void 0:pe.forceUpdate)!==!1&&t!=="controlled"?()=>S(Ce=>({...Ce,[X]:(Ce[X]||0)+1})):null]})},[l,f]),z=D.useCallback(X=>{const ne=y.refValues.current;y.setValues({values:X,updateState:t==="controlled"}),O(ne)},[l,O]),q=D.useCallback(()=>{const X=Zj(f,y.refValues.current);return m.setErrors(X.errors),X},[f]),W=D.useCallback(X=>{const ne=wI(X,f,y.refValues.current);return ne.hasError?m.setFieldError(X,ne.error):m.clearFieldError(X),ne},[f]),J=(X,{type:ne="input",withError:pe=!0,withFocus:de=!0,...xe}={})=>{const ue={onChange:S1t(se=>$(X,se,{forceUpdate:!1})),"data-path":aue(e,X)};return pe&&(ue.error=m.errorsState[X]),ne==="checkbox"?ue[t==="controlled"?"checked":"defaultChecked"]=Co(X,y.refValues.current):ue[t==="controlled"?"value":"defaultValue"]=Co(X,y.refValues.current),de&&(ue.onFocus=()=>v.setFieldTouched(X,!0),ue.onBlur=()=>{if(lue(X,u)){const se=wI(X,f,y.refValues.current);se.hasError?m.setFieldError(X,se.error):m.clearFieldError(X)}}),Object.assign(ue,d==null?void 0:d({inputProps:ue,field:X,options:{type:ne,withError:pe,withFocus:de,...xe},form:G}))},K=(X,ne)=>pe=>{h==="always"&&(pe==null||pe.preventDefault());const de=q();if(de.hasErrors)h==="validation-failed"&&(pe==null||pe.preventDefault()),ne==null||ne(de.errors,y.refValues.current,pe);else{const xe=X==null?void 0:X(c(y.refValues.current),pe);xe instanceof Promise&&(R(!0),xe.finally(()=>R(!1)))}},Z=X=>c(X||y.refValues.current),U=D.useCallback(X=>{X.preventDefault(),N()},[]),L=D.useCallback(X=>X?!wI(X,f,y.refValues.current).hasError:!Zj(f,y.refValues.current).hasErrors,[f]),Y=X=>`${E}-${X}-${C[X]||0}`,j=D.useCallback(X=>document.querySelector(`[data-path="${aue(e,X)}"]`),[]),G={watch:w.watch,initialized:y.initialized.current,values:y.stateValues,getValues:y.getValues,setInitialValues:y.setValuesSnapshot,initialize:F,setValues:z,setFieldValue:$,submitting:k,setSubmitting:R,errors:m.errorsState,setErrors:m.setErrors,setFieldError:m.setFieldError,clearFieldError:m.clearFieldError,clearErrors:m.clearErrors,resetDirty:v.resetDirty,setTouched:v.setTouched,setDirty:v.setDirty,isTouched:v.isTouched,resetTouched:v.resetTouched,isDirty:v.isDirty,getTouched:v.getTouched,getDirty:v.getDirty,reorderListItem:b.reorderListItem,insertListItem:b.insertListItem,removeListItem:b.removeListItem,replaceListItem:b.replaceListItem,reset:N,validate:q,validateField:W,getInputProps:J,onSubmit:K,onReset:U,isValid:L,getTransformedValues:Z,key:Y,getInputNode:j};return C1t(e,G),G}function B1t(e,t){const n=t||!0;return r=>typeof r!="string"?n:e.test(r)?null:n}function j1t(e){return B1t(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,e)}function ATe(e,t){if(e.type==="checkbox"){const n=e,r=n.minSelections&&t.length<n.minSelections,i=n.maxSelections&&t.length>n.maxSelections;if(r&&i)return`Please select between ${n.minSelections} and ${n.maxSelections} options`;if(r)return`Please select at least ${n.minSelections} options`;if(i)return`Please select at most ${n.maxSelections} options`}return null}const z1t=new URLSearchParams(window.location.search),U1t=(e,t)=>{let n={};return e.forEach(r=>{const i=t[r.id],s=t[`${r.id}-dontKnow`]!==void 0?t[`${r.id}-dontKnow`]:!1,o=r.withDontKnow?{[`${r.id}-dontKnow`]:s}:{},a=t[`${r.id}-other`]!==void 0?t[`${r.id}-other`]:"",u=r.withOther?{[`${r.id}-other`]:a}:{};if(i)n={...n,[r.id]:i,...o,...u};else{let l="";r.paramCapture?l=z1t.get(r.paramCapture):r.type==="reactive"?l=[]:r.type==="matrix-radio"||r.type==="matrix-checkbox"?l=Object.fromEntries(r.questionOptions.map(c=>[c,""])):r.type==="slider"&&r.startingValue&&(l=r.startingValue.toString()),n={...n,[r.id]:l,...o,...u}}}),{...n}},V1t=e=>{let t={};return e.forEach(n=>{n.required&&(t={...t,[n.id]:(r,i)=>{if(typeof r=="object"&&!Array.isArray(r)&&r!==null)return Object.values(r).every(s=>s!=="")?null:"Empty Input";if(Array.isArray(r)){if(n.requiredValue!=null&&!Array.isArray(n.requiredValue))return"Incorrect required value. Contact study administrator.";if(n.requiredValue!=null&&Array.isArray(n.requiredValue)){if(n.requiredValue.length!==r.length)return"Incorrect input";const s=[...n.requiredValue].sort(),o=[...r].sort();return s.every((a,u)=>a===o[u])?null:"Incorrect input"}return n.type==="checkbox"?ATe(n,r):r.length===0?"Empty input":null}return n.required&&n.requiredValue!=null&&r!=null?r.toString()!==n.requiredValue.toString()?"Incorrect input":null:n.required?(r==null||r==="")&&!i[`${n.id}-dontKnow`]?"Empty input":null:r===null?"Empty input":null}})}),t};function H1t(e,t,n){const[r,i]=D.useState(null),s=STe({initialValues:U1t(e,n),validate:V1t(e)});return D.useEffect(()=>{r!==t&&(i(t),s.reset())},[r,s,t]),s}function hg(e,t,n){var o;const{requiredValue:r,requiredLabel:i}=e;let s="";return t.checked&&Array.isArray(r)?s=r&&[...r].sort().toString()!==[...t.checked].sort().toString()?`Please ${n?"select":"enter"} ${i||r.toString()} to continue.`:null:t.checked&&e.required?s=ATe(e,t.checked):s=t.value&&r&&r.toString()!==t.value.toString()?`Please ${n?"select":"enter"} ${i||(n?(o=n.find(a=>a.value===r))==null?void 0:o.label:r.toString())} to continue.`:null,s}function kTe({horizontal:e,children:t,style:n}){return e?T.jsx(Ti,{mt:$e(4),gap:"lg",style:n,children:t}):T.jsx(Es,{gap:"md",style:n,children:t})}const q1t="_fixDisabled_1k5ri_1",W1t="_fixDisabledIcon_1k5ri_16",G1t="_fixDisabledLabel_1k5ri_20",Uc={fixDisabled:q1t,fixDisabledIcon:W1t,fixDisabledLabel:G1t},Y1t="_fixDisabled_d4mus_1",B0={fixDisabled:Y1t};function K1t({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i,otherValue:s}){const{prompt:o,required:a,options:u,secondaryText:l,horizontal:c,withOther:d}=e,f=u.map(y=>typeof y=="string"?{value:y,label:y}:y),[h,p]=D.useState(!1),m=D.useMemo(()=>hg(e,n,f),[e,n,f]);return T.jsxs(Ao.Group,{label:T.jsxs(Ft,{direction:"row",wrap:"nowrap",gap:4,children:[i&&T.jsx(Se,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${r}. `}),T.jsx(Se,{style:{display:"block"},className:"no-last-child-bottom-padding",children:T.jsx($o,{text:o,required:a})})]}),description:l,...n,error:m,style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:[T.jsx(Se,{mt:"xs",children:T.jsxs(kTe,{horizontal:!!c,style:{flexGrow:1},children:[f.map(y=>T.jsx(Ao,{disabled:t,value:y.value,label:y.label,classNames:{input:Uc.fixDisabled,label:Uc.fixDisabledLabel,icon:Uc.fixDisabledIcon}},y.value)),d&&T.jsx(Ao,{disabled:t,value:"__other",checked:h,onClick:y=>p(y.currentTarget.checked),label:c?"Other":T.jsx(Fr,{mt:-8,placeholder:"Other",disabled:!h,...s,classNames:{input:B0.fixDisabled}}),classNames:{input:Uc.fixDisabled,label:Uc.fixDisabledLabel,icon:Uc.fixDisabledIcon}},"__other")]})}),c&&d&&T.jsx(Fr,{mt:"sm",placeholder:"Other",disabled:!h,...s,w:216,classNames:{input:B0.fixDisabled}})]})}function X1t({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,options:u,secondaryText:l}=e,c=u.map(d=>typeof d=="string"?{value:d,label:d}:d);return T.jsx(Lw,{disabled:t,label:T.jsxs(Ft,{direction:"row",wrap:"nowrap",gap:4,children:[i&&T.jsx(Se,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${r}. `}),T.jsx(Se,{style:{display:"block"},className:"no-last-child-bottom-padding",children:T.jsx($o,{text:o,required:a})})]}),description:l,placeholder:s,data:c,radius:"md",size:"md",...n,value:n.value===""?null:n.value,error:hg(e,n,c),classNames:{input:B0.fixDisabled}})}function Q1t({response:e,answer:t,index:n,enumerateQuestions:r}){const{prompt:i,required:s,secondaryText:o}=e;return T.jsx(Fr.Wrapper,{label:T.jsxs(Ft,{direction:"row",wrap:"nowrap",gap:4,children:[r&&T.jsx(Se,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${n}. `}),T.jsx(Se,{style:{display:"block"},className:"no-last-child-bottom-padding",children:T.jsx($o,{text:i,required:s})})]}),description:o,size:"md",children:t.value&&T.jsx(nd,{children:Array.isArray(t.value)?t.value.map(a=>T.jsx(nd.Item,{children:a},a)):T.jsx(nd.Item,{children:t.value})})})}const J1t="_fixDisabled_14ab8_1",Z1t="_fixDisabledIcon_14ab8_16",ebt="_fixDisabledLabel_14ab8_20",Lm={fixDisabled:J1t,fixDisabledIcon:Z1t,fixDisabledLabel:ebt};function ITe({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i,stretch:s,otherValue:o}){const{prompt:a,required:u,options:l,leftLabel:c,rightLabel:d,secondaryText:f,horizontal:h,withOther:p}=e,m=l.map(b=>typeof b=="string"?{value:b,label:b}:b),[y,v]=D.useState(!1);return T.jsxs(Xl.Group,{name:`radioInput${e.id}`,label:T.jsxs(Ft,{direction:"row",wrap:"nowrap",gap:4,children:[i&&T.jsx(Se,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${r}. `}),T.jsx(Se,{style:{display:"block"},className:"no-last-child-bottom-padding",children:T.jsx($o,{text:a,required:u})})]}),description:f,...n,error:hg(e,n,m),style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:[T.jsxs(Ti,{gap:"lg",align:"flex-end",mt:h?0:"sm",children:[c?T.jsx(Je,{children:c}):null,T.jsxs(kTe,{horizontal:!!h,style:{flexGrow:1},children:[m.map(b=>T.jsxs("div",{style:{display:"flex",flexDirection:h?"column":"row",gap:h?"unset":$e(12),flex:s?1:"unset",alignItems:"center"},children:[h&&T.jsx(Je,{size:"sm",children:b.label}),T.jsx(Xl,{disabled:t,value:b.value,label:b.label,styles:{label:{display:h?"none":"initial"}},onChange:()=>v(!1),classNames:{radio:Lm.fixDisabled,label:Lm.fixDisabledLabel,icon:Lm.fixDisabledIcon}})]},`${b.value}-${e.id}`)),p&&T.jsxs("div",{style:{display:"flex",flexDirection:h?"column":"row",gap:h?"unset":$e(12),flex:s?1:"unset",alignItems:"center"},children:[h&&T.jsx(Je,{size:"sm",children:"Other"}),T.jsx(Xl,{disabled:t,value:"other",checked:y,onClick:b=>v(b.currentTarget.checked),label:!h&&T.jsx(Fr,{mt:-8,placeholder:"Other",disabled:!y,...o,classNames:{input:B0.fixDisabled}}),mt:0,classNames:{radio:Lm.fixDisabled,label:Lm.fixDisabledLabel,icon:Lm.fixDisabledIcon}})]})]}),T.jsx(Je,{children:d})]}),h&&p&&T.jsx(Fr,{mt:"sm",placeholder:"Other",disabled:!y,...o,w:216,classNames:{input:B0.fixDisabled}})]},e.id)}function tbt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{numItems:s}=e,o=[];for(let u=1;u<=+s;u+=1)o.push({label:`${u}`,value:`${u}`});const a={...e,type:"radio",options:o,horizontal:!0};return T.jsx(ITe,{disabled:t,response:a,answer:n,index:r,enumerateQuestions:i,stretch:!0})}function nbt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,min:a,max:u,placeholder:l,secondaryText:c}=e;return T.jsx(RV,{disabled:t,placeholder:l,label:T.jsxs(Ft,{direction:"row",wrap:"nowrap",gap:4,children:[i&&T.jsx(Se,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${r}. `}),T.jsx(Se,{style:{display:"block"},className:"no-last-child-bottom-padding",children:T.jsx($o,{text:s,required:o})})]}),description:c,radius:"md",size:"md",min:a,max:u,...n,error:hg(e,n),classNames:{input:B0.fixDisabled}})}const rbt="_track_w59g7_1",ibt="_fixDisabled_w59g7_11",cue={track:rbt,fixDisabled:ibt};function sbt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,options:a,secondaryText:u,snap:l,step:c,withBar:d,tlxStyle:f}=e,[h,p]=D.useMemo(()=>[Math.min(...a.map(v=>v.value)),Math.max(...a.map(v=>v.value))],[a]),m=a.some(v=>v.label!==""),y=hg(e,n);return T.jsx(Fr.Wrapper,{label:T.jsxs(Ft,{direction:"row",wrap:"nowrap",gap:4,children:[i&&T.jsx(Se,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${r}. `}),T.jsx(Se,{style:{display:"block"},className:"no-last-child-bottom-padding",children:T.jsx($o,{text:s,required:o})})]}),description:u,error:y,style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:T.jsx(Xv,{disabled:t,marks:a,min:h,max:p,step:c??(l?.001:(p-h)/100),h:m?40:void 0,...n,classNames:{track:f?cue.track:"",bar:cue.fixDisabled},restrictToMarks:l,label:v=>l?null:v,styles:v=>({mark:{...f?{height:20,width:1,marginTop:-6,marginLeft:2,borderRadius:0}:{},...d===!1?{borderColor:"var(--mantine-color-gray-2)"}:{}},bar:d===!1||f?{display:"none"}:{},markLabel:{fontSize:v.fontSizes.sm,color:v.colors.gray[7],transform:"translate(calc((var(--mark-offset) * -1) + (var(--slider-size) / 2)), calc(var(--mantine-spacing-xs) / 2)"},thumb:{...f?{borderColor:"var(--mantine-color-red-6)",width:1,borderWidth:1,height:22,borderRadius:0,backgroundColor:"var(--mantine-color-red-6)",transform:"translate(-50%, -62%)"}:{}}}),flex:1,mt:f?"sm":"xs"})})}function obt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,secondaryText:u}=e;return T.jsx(Xh,{disabled:t,placeholder:s,label:T.jsxs(Ft,{direction:"row",wrap:"nowrap",gap:4,children:[i&&T.jsx(Se,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${r}. `}),T.jsx(Se,{style:{display:"block"},className:"no-last-child-bottom-padding",children:T.jsx($o,{text:o,required:a})})]}),description:u,radius:"md",size:"md",...n,value:n.value||"",error:hg(e,n),classNames:{input:B0.fixDisabled}})}function abt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,secondaryText:u}=e;return T.jsx(gV,{disabled:t,placeholder:s,label:T.jsxs(Ft,{direction:"row",wrap:"nowrap",gap:4,children:[i&&T.jsx(Se,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${r}. `}),T.jsx(Se,{style:{display:"block"},className:"no-last-child-bottom-padding",children:T.jsx($o,{text:o,required:a})})]}),description:u,radius:"md",size:"md",...n,value:n.value||"",error:hg(e,n),classNames:{input:B0.fixDisabled}})}function ubt({_choices:e,_n:t,idx:n,question:r,answer:i,onChange:s,disabled:o}){return T.jsx("div",{style:{flex:1,display:"grid",gridTemplateColumns:`repeat(${t}, 1fr)`,justifyItems:"center"},children:e.map(a=>T.jsx(Ao,{disabled:o,checked:i.value[r.label].split("|").includes(a.value),onChange:u=>s(u,r.label,a),value:a.value,classNames:{input:Uc.fixDisabled,icon:Uc.fixDisabledIcon}},`${a.label}-${n}`))})}function lbt({_choices:e,_n:t,idx:n,question:r,response:i,answer:s,onChange:o,disabled:a}){return T.jsx(Xl.Group,{name:`radioInput${i.id}-${n}`,style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))",flex:1},onChange:u=>o(u,r.label),value:s.value[r.label],children:T.jsx("div",{style:{flex:1,display:"grid",gridTemplateColumns:`repeat(${t}, 1fr)`,justifyItems:"center"},children:e.map(u=>T.jsx(Xl,{disabled:a,value:u.value,classNames:{radio:Lm.fixDisabled,icon:Lm.fixDisabledIcon}},`${u.label}-${n}`))})},`${i.id}-${n}`)}function cbt({response:e,answer:t,index:n,disabled:r,enumerateQuestions:i}){const{setMatrixAnswersRadio:s,setMatrixAnswersCheckbox:o}=ro(),a=Bo(),{answerOptions:u,questionOptions:l,prompt:c,secondaryText:d,required:f}=e,p=typeof u=="string"?{likely5:["Highly Unlikely","Unlikely","Neutral","Likely","Highly Likely"],likely7:["Highly Unlikely","Unlikely","Slightly Unlikely","Neutral","Slightly Likely","Likely","Highly Likely"],satisfaction5:["Highly Unsatisfied","Unsatisfied","Neutral","Satisfied","Highly Satisfied"],satisfaction7:["Highly Unsatisfied","Unsatisfied","Slightly Unsatisfied","Neutral","Slightly Satisfied","Satisfied","Highly Satisfied"]}[u].map(E=>({value:E,label:E})):u.map(E=>typeof E=="string"?{value:E,label:E}:E),m=l.map(E=>typeof E=="string"?{value:E,label:E}:E),y=(E,_)=>{const C={type:"radio",questionKey:_,val:E,responseId:e.id};a(s(C))},v=(E,_,C)=>{const S=E.target.checked,k={questionKey:_,responseId:e.id,value:C.value,label:C.label,isChecked:S,choiceOptions:p};a(o(k))},b=p.length,w=m.length;return T.jsxs(T.Fragment,{children:[T.jsxs(Ft,{direction:"row",wrap:"nowrap",gap:4,children:[i&&T.jsx(Se,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${n}. `}),T.jsx(Se,{style:{display:"block"},className:"no-last-child-bottom-padding",children:T.jsx($o,{text:c,required:f})})]}),T.jsx(Je,{c:"dimmed",size:"sm",mt:0,children:d}),T.jsxs(Se,{style:{display:"grid",gridTemplateColumns:"auto 1fr",gridTemplateRows:"auto 1fr"},m:"md",mt:"xs",children:[T.jsx("div",{style:{borderBottom:"1px solid var(--mantine-color-dark-0)",borderRight:"1px solid var(--mantine-color-dark-0)"}}),T.jsx("div",{style:{height:"100%",display:"grid",gridTemplateColumns:`repeat(${b}, 1fr)`,alignItems:"center",justifyItems:"center",borderBottom:"1px solid var(--mantine-color-dark-0)"},children:p.map((E,_)=>T.jsx(Je,{style:{fontWeight:"bold",textAlign:"center",fontSize:"0.8em"},mb:"sm",ml:"xs",mr:"xs",children:E.label},`choice-${_}-label`))}),T.jsx("div",{style:{height:"100%",display:"grid",gridTemplateRows:`repeat(${w}, 1fr)`},children:m.map((E,_)=>T.jsx(Je,{style:{height:"80px",width:"100%",display:"flex",alignItems:"safe center",justifyContent:"end",borderRight:"1px solid var(--mantine-color-dark-0)",backgroundColor:`${(_+1)%2===0?"var(--mantine-color-gray-2)":"white"}`,overflowY:"auto"},ta:"right",p:"sm",miw:140,maw:400,children:E.label},`question-${_}-label`))}),T.jsx("div",{style:{height:"100%",display:"grid",gridTemplateRows:`repeat(${w},1fr)`},children:m.map((E,_)=>T.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",backgroundColor:`${(_+1)%2===0?"var(--mantine-color-gray-2)":"white"}`},children:e.type==="matrix-radio"?T.jsx(lbt,{disabled:r,idx:_,question:E,answer:t,_choices:p,_n:b,onChange:y,response:e}):T.jsx(ubt,{disabled:r,idx:_,question:E,answer:t,_choices:p,_n:b,onChange:v})},`question-${_}`))})]})]})}const dbt="_root_152zr_1",fbt={root:dbt};function hbt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,options:a,secondaryText:u}=e,l=a.map(c=>typeof c=="string"?{value:c,label:c}:c);return T.jsx(HC,{children:T.jsx(Xl.Group,{name:`radioInput${e.id}`,label:T.jsxs(Ft,{direction:"row",wrap:"nowrap",gap:4,children:[i&&T.jsx(Se,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${r}. `}),T.jsx(Se,{style:{display:"block"},className:"no-last-child-bottom-padding",children:T.jsx($o,{text:s,required:o})})]}),description:u,...n,error:hg(e,n,l),style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:T.jsx(Ft,{justify:"space-between",align:"center",gap:"xl",mt:"xs",children:l.map(c=>T.jsx(Xl.Card,{value:c.value,disabled:t,ta:"center",className:fbt.root,p:"xs",children:T.jsx(Je,{children:c.label})},c.value))})},e.id)})}function pbt({response:e,answer:t,storedAnswer:n,index:r,configInUse:i,dontKnowCheckbox:s,otherInput:o}){const a=(Object.keys(n||{}).length>0?{value:n[e.id]}:t)||{value:void 0},u=(Object.keys(n||{}).length>0?{checked:n[`${e.id}-dontKnow`]}:s)||{checked:void 0},l=(Object.keys(n||{}).length>0?{value:n[`${e.id}-other`]}:o)||{value:void 0},c=Object.keys(n||{}).length>0,[d]=Zf(),h=Hf().uiConfig.enumerateQuestions??!1,p=D.useMemo(()=>{if(e.paramCapture){const y=d.get(e.paramCapture);return c||!!y}return c},[c,e.paramCapture,d]),m=D.useMemo(()=>e.paramCapture?d.get(e.paramCapture)||"":e.type==="reactive"||e.type==="checkbox"?[]:e.type==="matrix-radio"||e.type==="matrix-checkbox"?Object.fromEntries(e.questionOptions.map(y=>[y,""])):e.type==="slider"&&e.startingValue?e.startingValue.toString():"",[e.paramCapture,e.questionOptions,e.startingValue,e.type,d]);return T.jsxs(Se,{mb:e.withDivider||i.responseDividers?"xl":"lg",children:[e.type==="numerical"&&T.jsx(nbt,{response:e,disabled:p||(s==null?void 0:s.checked),answer:a,index:r,enumerateQuestions:h}),e.type==="shortText"&&T.jsx(obt,{response:e,disabled:p||(s==null?void 0:s.checked),answer:a,index:r,enumerateQuestions:h}),e.type==="longText"&&T.jsx(abt,{response:e,disabled:p||(s==null?void 0:s.checked),answer:a,index:r,enumerateQuestions:h}),e.type==="likert"&&T.jsx(tbt,{response:e,disabled:p||(s==null?void 0:s.checked),answer:a,index:r,enumerateQuestions:h}),e.type==="dropdown"&&T.jsx(X1t,{response:e,disabled:p||(s==null?void 0:s.checked),answer:a,index:r,enumerateQuestions:h}),e.type==="slider"&&T.jsx(sbt,{response:e,disabled:p||(s==null?void 0:s.checked),answer:a,index:r,enumerateQuestions:h}),e.type==="radio"&&T.jsx(ITe,{response:e,disabled:p||(s==null?void 0:s.checked),answer:a,index:r,enumerateQuestions:h,otherValue:l}),e.type==="checkbox"&&T.jsx(K1t,{response:e,disabled:p||(s==null?void 0:s.checked),answer:a,index:r,enumerateQuestions:h,otherValue:l}),e.type==="reactive"&&T.jsx(Q1t,{response:e,answer:a,index:r,enumerateQuestions:h}),(e.type==="matrix-radio"||e.type==="matrix-checkbox")&&T.jsx(cbt,{disabled:p||(s==null?void 0:s.checked),response:e,answer:a,index:r,enumerateQuestions:h}),e.type==="buttons"&&T.jsx(hbt,{response:e,disabled:p||(s==null?void 0:s.checked),answer:a,index:r,enumerateQuestions:h}),e.withDontKnow&&T.jsx(Ao,{mt:"xs",disabled:p,label:"I don't know",classNames:{input:Uc.fixDisabled,label:Uc.fixDisabledLabel,icon:Uc.fixDisabledIcon},...s,checked:u.checked,onChange:y=>{s==null||s.onChange(y.currentTarget.checked),t.onChange(m)}}),(e.withDivider||i.responseDividers)&&T.jsx(z1,{mt:"xl",mb:"xs"})]})}function mbt(e,t){const n=[];for(const r of e)t.includes(r)&&n.push(r);return n}function aN({config:e,location:t,status:n,style:r}){var U;const{storageEngine:i}=Mi(),s=Bo(),{updateResponseBlockValidation:o,toggleShowHelpText:a,saveIncorrectAnswer:u,incrementHelpCounter:l}=ro(),c=Sl(),d=ir(L=>L.analysisProvState[t]),f=D.useMemo(()=>(d==null?void 0:d.form)||(n==null?void 0:n.answer),[d,n]),h=Kp(),p=Cl(),m=e,y=D.useMemo(()=>{var L;return((L=m==null?void 0:m.response)==null?void 0:L.filter(Y=>Y.location?Y.location===t:t==="belowStimulus"))||[]},[m==null?void 0:m.response,t]),v=D.useMemo(()=>y.map(L=>({...L,required:L.required===void 0?!0:L.required})),[y]),b=H1t(v,c,f||{}),{actions:w,trrack:E}=D.useMemo(()=>{const L=J1.create(),Y=L.register("update",(G,X)=>(G.form=X,G)),j=CS({registry:L,initialState:{form:null}});return{actions:{updateFormAction:Y},trrack:j}},[]),_=ir(L=>L.reactiveAnswers),C=ir(L=>L.matrixAnswers),S=(m==null?void 0:m.provideFeedback)&&(((U=m==null?void 0:m.correctAnswer)==null?void 0:U.length)||0)>0,k=(m==null?void 0:m.allowFailedTraining)===void 0?!0:m.allowFailedTraining,[R,N]=D.useState(0),O=(m==null?void 0:m.trainingAttempts)||2,[F,$]=D.useState(!1),z=sb(),q=t===((m==null?void 0:m.nextButtonLocation)||"belowStimulus");D.useEffect(()=>{const L=v.find(Y=>Y.type==="reactive");if(_&&L){const Y=L.id;b.setValues({...b.values,[Y]:_[Y]})}},[_]),D.useEffect(()=>{const L=v.filter(Y=>Y.type==="matrix-radio"||Y.type==="matrix-checkbox");if(C&&L.length>0){const Y={...b.values};L.forEach(j=>{const{id:G}=j;Y[G]={...b.getInputProps(G).value,...C[G]}}),b.setValues(Y)}},[C]),D.useEffect(()=>{E.apply("update",w.updateFormAction(structuredClone(b.values))),s(o({location:t,identifier:z,status:b.isValid(),values:structuredClone(b.values),provenanceGraph:E.graph.backend}))},[b.values,z,t,s,o]);const[W,J]=D.useState(Object.fromEntries(v.map(L=>[L.id,{visible:!1,title:"Correct Answer",message:"The correct answer is: ",color:"green"}]))),K=(L,Y,j,G,X)=>{J(ne=>({...ne,[L]:{visible:Y,title:j,message:G,color:X}}))},Z=()=>{const L=R+1;N(L);const Y=Object.fromEntries(v.map(j=>{var ne,pe;const G=(pe=(ne=m.correctAnswer)==null?void 0:ne.find(de=>de.id===j.id))==null?void 0:pe.answer,X=b.values[j.id];return[j.id,Array.isArray(X)?typeof G=="string"?X.length===1&&G===X[0]:X.length===G.length&&X.every(de=>G.includes(de)):G===X]}));S&&(v.forEach(j=>{var G,X,ne;if(Y[j.id]&&!((G=W[j.id])!=null&&G.message.includes("You've failed to answer this question correctly")))K(j.id,!0,"Correct Answer","You have answered the question correctly.","green");else{s(u({question:z,identifier:j.id,answer:b.values[j.id]}));let pe="";if(O===-1?pe="Please try again.":L>=O?(pe=`You didn't answer this question correctly after ${O} attempts. ${k?"You can continue to the next question.":"Unfortunately you have not met the criteria for continuing this study."}`,!k&&i&&i.rejectCurrentParticipant(h,"Failed training").then(()=>{setTimeout(()=>{p("./../__trainingFailed")},5e3)}).catch(()=>{console.error("Failed to reject participant who failed training"),setTimeout(()=>{p("./../__trainingFailed")},5e3)})):O-L===1?pe="Please try again. You have 1 attempt left.":pe=`Please try again. You have ${O-L} attempts left.`,j.type==="checkbox"){const de=(ne=(X=m.correctAnswer)==null?void 0:X.find(se=>se.id===j.id))==null?void 0:ne.answer,xe=b.values[j.id],Ce=mbt(xe,de),ue=de.length===Ce.length&&xe.length>de.length?"However, you have selected too many boxes. ":"";pe=`You have successfully checked ${Ce.length}/${de.length} correct boxes. ${ue}${pe}`}K(j.id,!0,"Incorrect Answer",pe,"red")}}),$(k&&L>=O||Object.values(Y).every(j=>j)&&L<=O))};return T.jsxs("div",{style:r,children:[v.map((L,Y)=>{var G,X,ne;const j=(X=(G=m.correctAnswer)==null?void 0:G.find(pe=>pe.id===L.id))==null?void 0:X.answer;return T.jsx(rr.Fragment,{children:L.hidden?"":T.jsxs(T.Fragment,{children:[T.jsx(pbt,{storedAnswer:f,answer:{...b.getInputProps(L.id,{type:L.type==="checkbox"?"checkbox":"input"})},dontKnowCheckbox:{...b.getInputProps(`${L.id}-dontKnow`,{type:"checkbox"})},otherInput:{...b.getInputProps(`${L.id}-other`)},response:L,index:Y+1,configInUse:m}),((ne=W[L.id])==null?void 0:ne.visible)&&T.jsxs(up,{mb:"md",title:W[L.id].title,color:W[L.id].color,children:[W[L.id].message,W[L.id].message.includes("Please try again")&&T.jsxs(T.Fragment,{children:[T.jsx("br",{}),T.jsx("br",{}),"If you're unsure"," ",T.jsx(B1,{style:{fontSize:14},onClick:()=>{s(a()),s(l({identifier:z}))},children:"review the help text."})," "]}),T.jsx("br",{}),T.jsx("br",{}),R>=O&&O>=0&&j&&` The correct answer was: ${j}.`]})]})},`${L.id}-${c}`)}),T.jsxs(Ti,{justify:"right",gap:"xs",children:[S&&q&&T.jsx(tn,{onClick:()=>Z(),disabled:!b.isValid()||R>=O&&O>=0,children:"Check Answer"}),q&&T.jsx(E1t,{disabled:S&&!F||!b.isValid(),label:m.nextButtonText||"Next",configInUse:m})]})]})}const k_="@REVISIT_COMMS",gbt={width:"100%",border:0};function ybt({currentConfig:e,provState:t,answers:n}){const{setReactiveAnswers:r,updateResponseBlockValidation:i}=ro(),s=Bo(),o=Vve(),a=sb(),[u,l]=D.useState(800),c=D.useRef(null),d=D.useMemo(()=>crypto.randomUUID?crypto.randomUUID():`testID-${Date.now()}`,[]),f=ih(),h=D.useCallback((p,m)=>{var y,v;(v=(y=c.current)==null?void 0:y.contentWindow)==null||v.postMessage({error:!1,type:`${k_}/${p}`,iframeId:d,message:m},"*")},[c,d]);return D.useEffect(()=>{t&&h("PROVENANCE",t)},[t,h]),D.useEffect(()=>{n&&h("ANSWERS",n)},[n,h]),D.useEffect(()=>{const p=m=>{const{data:y}=m;if(typeof y=="object"&&d===y.iframeId)switch(y.type){case`${k_}/WINDOW_READY`:e.parameters&&h("STUDY_DATA",e.parameters);break;case`${k_}/READY`:if(c.current){const v=document.getElementById(y.iframeId);v&&v.contentWindow&&(c.current.style.height=`${v.contentWindow.document.body.scrollHeight.toString()}px`)}break;case`${k_}/ANSWERS`:s(r(y.message)),s(i({location:"stimulus",identifier:a,status:!0,values:y.message}));break;case`${k_}/PROVENANCE`:s(i({location:"stimulus",identifier:a,values:{},status:!0,provenanceGraph:y.message}));break}};return window.addEventListener("message",p),()=>window.removeEventListener("message",p)},[s,o,d,e,h,r,i,a]),T.jsx("iframe",{ref:c,id:d,src:e.path.startsWith("http")?e.path:`${rs}${e.path}?trialid=${f}&id=${d}`,style:{...gbt,height:u},onLoad:()=>{var p,m;return l((((m=(p=c.current)==null?void 0:p.contentWindow)==null?void 0:m.document.body.scrollHeight)||750)+20)}})}async function m6(e){const n=await(await fetch(e)).text();if(!n.includes("<title>ReVISit</title>"))return n}async function bbt(e){const t=await fetch(`${rs}${e}`);let n;try{n=await t.json()}catch(r){console.error("Invalid JSON:",r)}return n}function Op({email:e,path:t}){const n=fc();return T.jsxs(_p,{fluid:!0,my:50,maw:800,mx:"auto",children:[T.jsx(Pi,{order:2,children:T.jsx(Je,{span:!0,c:"orange",children:"404"})}),T.jsxs(Je,{children:[T.jsx(Je,{span:!0,fw:700,children:t||n.pathname})," ","not Found."]}),T.jsx(al,{h:"lg"}),T.jsxs(nd,{children:[T.jsx(nd.Item,{children:T.jsx(Je,{children:"If you're trying to access your study please check the URL and verify that the global config file is correctly configured. Then try again."})}),T.jsx(nd.Item,{children:T.jsxs(Je,{children:["If you're a participant, please contact the study administrator"," ",e&&T.jsxs(T.Fragment,{children:["at"," ",T.jsxs(B1,{c:"blue",href:`mailto:${e}`,children:[e," "]})]}),"."]})})]})]})}const vbt={maxWidth:"100%"};function xbt({currentConfig:e}){const t={...vbt,...e.style},n=D.useMemo(()=>e.path.startsWith("http")?e.path:`${rs}${e.path}`,[e.path]),[r,i]=D.useState(!0),[s,o]=D.useState(!1);return D.useEffect(()=>{async function a(){let u=await m6(n);u=u!=null&&u.includes("File not found")?void 0:u,o(!!u),i(!1)}a()},[n]),r||s?T.jsx(rg,{mx:"auto",src:n,style:t}):T.jsx(Op,{path:e.path})}class wbt extends rr.Component{constructor(t){super(t),this.state={hasError:!1,error:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}render(){return this.state.hasError?T.jsx(Je,{children:this.state.error.toString()}):this.props.children}}const due=Object.assign({"../public/matrices/Stimuli.tsx":Z_e,"../public/matrices/components/Background.tsx":y_e,"../public/matrices/components/ControlPanel.tsx":X_e,"../public/matrices/components/EncodedCells.tsx":S_e,"../public/matrices/components/Highlighting.tsx":x_e,"../public/matrices/components/InteractionButtons.tsx":Y_e,"../public/matrices/components/Legend.tsx":T_e,"../public/matrices/components/Marks.tsx":D_e,"../public/matrices/components/Matrix.tsx":J_e,"../public/matrices/components/Tooltip.tsx":k_e,"../public/matrices/components/axis/DestinationAxis.tsx":m_e,"../public/matrices/components/axis/OriginAxis.tsx":h_e,"../public/matrices/hooks/useCellScales.tsx":M_e,"../public/matrices/hooks/useConfig.tsx":W_e,"../public/matrices/hooks/useOrdering.tsx":U_e,"../public/matrices/hooks/useRenderEncodeCells.tsx":O_e,"../public/matrices/hooks/useReplay.tsx":H_e,"../public/matrices/utils/Accessors.tsx":w_e,"../public/matrices/utils/Constants.ts":b_e,"../public/matrices/utils/Enums.ts":E_e,"../public/matrices/utils/Interfaces.tsx":eTe,"../public/matrices/utils/MatrixContext.tsx":c_e});function Ebt({currentConfig:e,provState:t,answers:n}){const r=`../public/${e.path}`,i=r in due?due[r].default:null,s=sb(),o=Bo(),{updateResponseBlockValidation:a,setReactiveAnswers:u}=ro(),l=D.useCallback(({status:c,provenanceGraph:d,answers:f})=>{o(a({location:"stimulus",identifier:s,status:c,values:f,provenanceGraph:d})),o(u(f))},[u,o,a,s]);return T.jsx(D.Suspense,{fallback:T.jsx("div",{children:"Loading..."}),children:i?T.jsx(wbt,{children:T.jsx(i,{parameters:e.parameters,setAnswer:l,answers:n,provenanceState:t})}):T.jsx(Op,{path:e.path})})}function _bt({currentConfig:e}){const[t,n]=D.useState(""),[r,i]=D.useState(!0);return D.useEffect(()=>{async function s(){const o=await m6(`${rs}${e.path}`);o!==void 0&&n(o),i(!1)}s()},[e.path]),r||t?T.jsx($o,{text:t}):T.jsx(Op,{path:e.path})}function RTe(){const e=Sl(),{setAlertModal:t}=ro(),n=Bo();D.useEffect(()=>{window.history.pushState(null,"",window.location.href),window.onpopstate=()=>{window.history.pushState(null,"",window.location.href),n(t({show:!0,message:"Using the browser's back button is prohibited during the study."}))}},[e,t,n])}var fue=Object.prototype.hasOwnProperty;function hue(e,t,n){for(n of e.keys())if(l2(n,t))return n}function l2(e,t){var n,r,i;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((r=e.length)===t.length)for(;r--&&l2(e[r],t[r]););return r===-1}if(n===Set){if(e.size!==t.size)return!1;for(r of e)if(i=r,i&&typeof i=="object"&&(i=hue(t,i),!i)||!t.has(i))return!1;return!0}if(n===Map){if(e.size!==t.size)return!1;for(r of e)if(i=r[0],i&&typeof i=="object"&&(i=hue(t,i),!i)||!l2(r[1],t.get(i)))return!1;return!0}if(n===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(n===DataView){if((r=e.byteLength)===t.byteLength)for(;r--&&e.getInt8(r)===t.getInt8(r););return r===-1}if(ArrayBuffer.isView(e)){if((r=e.byteLength)===t.byteLength)for(;r--&&e[r]===t[r];);return r===-1}if(!n||typeof e=="object"){r=0;for(n in e)if(fue.call(e,n)&&++r&&!fue.call(t,n)||!(n in t)||!l2(e[n],t[n]))return!1;return Object.keys(t).length===r}}return e!==e&&t!==t}function Tbt(e){var t=D.useRef(e),n=D.useRef(0);return l2(e,t.current)||(t.current=e,n.current+=1),D.useMemo(function(){return t.current},[n.current])}function Cbt(e,t){return D.useEffect(e,Tbt(t))}const uN=(e,t=null)=>{const[n,r]=D.useState("idle"),[i,s]=D.useState(null),[o,a]=D.useState(null),u=D.useRef(null),l=D.useRef(!1);D.useEffect(()=>(l.current=!0,()=>{l.current=!1}),[]);const c=D.useCallback((...d)=>{r("pending"),a(null);const f=Promise.resolve(e(...d)).then(h=>(l.current&&f===u.current&&(s(h),r("success")),h)).catch(h=>{throw l.current&&f===u.current&&(s(null),a(h),r("error")),h});return u.current=f,f},[e]);return Cbt(()=>{if(t)try{c(...t)}catch{}},[c,t]),{execute:c,status:n,value:i,error:o}};function DTe(e){const t=e.endTime===-1?void 0:e.endTime-e.startTime,n=(e.windowEvents||[]).filter(o=>o!==void 0).filter(([o,a,u])=>a==="visibility");let r=0,i=0;for(;i<n.length-1;){if(n[i][2]==="hidden"){for(let o=i+1;o<n.length;o+=1)if(n[o][2]==="visible"){r+=n[o][0]-n[i][0],i=o;break}}i+=1}return t?t-r:void 0}const Sbt="_root_1spq0_1",Abt="_description_1spq0_9",kbt="_title_1spq0_10",Ibt="_closeButton_1spq0_14",Rbt={root:Sbt,description:Abt,title:kbt,closeButton:Ibt},dC=e=>{const{title:t,message:n,color:r}=e;H1.show({title:t,message:n,position:"top-center",classNames:Rbt,color:r||"blue",autoClose:r==="red"||r==="yellow"?!1:5e3})},pue=["status","rejectReason","rejectTime","percentComplete","description","instruction","responsePrompt","answer","correctAnswer","responseMin","responseMax","startTime","endTime","duration","cleanedDuration","meta","configHash"],PTe=["participantId","trialId","trialOrder","responseId"];function XW(e,t){const n=`data:text/json;charset=utf-8,${encodeURIComponent(e)}`,r=document.createElement("a");r.setAttribute("href",n),r.setAttribute("download",t),document.body.appendChild(r),r.click(),r.remove()}function Dbt(e,t,n){const r=(Object.entries(e.answers).filter(([s,o])=>o.endTime!==-1).length/Object.entries(e.answers).length*100).toFixed(2),i=new Set;return[[{participantId:e.participantId,trialId:"participantTags",trialOrder:null,responseId:"participantTags",answer:JSON.stringify(e.participantTags)},...Object.values(e.answers).map(s=>{const o=s.componentName,{trialOrder:a}=s,u=n.components[o],l=kf(u,n),c=s.endTime===-1?void 0:s.endTime-s.startTime,d=DTe(s),f=Object.keys(s.answer).length===0?{"":void 0}:s.answer;return Object.entries(f).map(([p,m])=>{var b,w,E;const y={participantId:e.participantId,trialId:o,trialOrder:a,responseId:p};Object.entries(s.parameters).forEach(([_,C])=>{y[`parameters_${_}`]=C,i.add(`parameters_${_}`)});const v=l.response.find(_=>_.id===p);if(t.includes("status")&&(y.status=e.rejected?"rejected":e.completed?"completed":"in progress"),t.includes("rejectReason")&&(y.rejectReason=e.rejected?e.rejected.reason:void 0),t.includes("rejectTime")&&(y.rejectTime=e.rejected?new Date(e.rejected.timestamp).toISOString():void 0),t.includes("configHash")&&(y.configHash=e.participantConfigHash),t.includes("percentComplete")&&(y.percentComplete=r),t.includes("description")&&(y.description=l.description),t.includes("instruction")&&(y.instruction=l.instruction),t.includes("responsePrompt")&&(y.responsePrompt=v==null?void 0:v.prompt),t.includes("answer")&&(y.answer=m),t.includes("correctAnswer")){const _=(w=(b=l.correctAnswer)==null?void 0:b.find(k=>k.id===p))==null?void 0:w.answer,S=((E=s.correctAnswer.find(k=>k.id===p))==null?void 0:E.answer)||_;y.correctAnswer=typeof S=="object"?JSON.stringify(S):S}return t.includes("responseMin")&&(y.responseMin=(v==null?void 0:v.type)==="numerical"?v.min:void 0),t.includes("responseMax")&&(y.responseMax=(v==null?void 0:v.type)==="numerical"?v.max:void 0),t.includes("startTime")&&(y.startTime=new Date(s.startTime).toISOString()),t.includes("endTime")&&(y.endTime=new Date(s.endTime).toISOString()),t.includes("duration")&&(y.duration=c),t.includes("cleanedDuration")&&(y.cleanedDuration=d),t.includes("meta")&&(y.meta=JSON.stringify(l.meta,null,2)),y}).flat()}).flat()],Array.from(i)]}async function Pbt(e,t,n,r){if(!n)return{header:[],rows:[]};const i=[...PTe,...e],s=[...new Set(t.map(f=>f.participantConfigHash))],o=await n.getAllConfigsFromHash(s,r),a=i,u=await Promise.all(t.map(async f=>await Dbt(f,i,o[f.participantConfigHash]))),l=u.map(f=>f[0]),c=new Set(u.map(f=>f[1]).flat()),d=l.flat().sort((f,h)=>f!==h?f.participantId.localeCompare(h.participantId):f.trialOrder-h.trialOrder);return{header:[...a,...c],rows:d}}function Nbt({opened:e,close:t,filename:n,data:r,studyId:i}){const[s,o]=D.useState([...pue].filter(p=>p!=="meta")),a=Mi(),{value:u,status:l,error:c}=uN(Pbt,[s,r,a.storageEngine,i]),d=D.useCallback(()=>{if(!u)return;const p=[u.header.join(","),...u.rows.map(m=>u.header.map(y=>`"${`${m[y]}`.replace(/"/g,'""')}"`).join(","))].join(`
`);XW(p,n)},[n,u]),f=D.useCallback(()=>{u&&(window.parent.postMessage({type:"revisitWidget/PYTHON_EXPORT_TIDY",payload:u},"*"),dC({title:"Success",message:"Data sent to python notebook",color:"green"}))},[u]),h=D.useMemo(()=>{if(!u)return"";const p=u.rows.length>5?5:u.rows.length,m=p===1?"":"s";return`This is a preview of the first ${m?p:""} row${m} of the CSV. The full CSV contains ${u.rows.length} row${m}.`},[u]);return T.jsxs(Ei,{opened:e,size:"90%",onClose:t,title:"Tidy CSV Exporter",centered:!0,withCloseButton:!1,children:[T.jsx(SV,{searchable:!0,nothingFoundMessage:"Property not found",data:[...pue],value:s,onChange:p=>o(p),label:"Included optional columns:",leftSection:T.jsx(nze,{}),variant:"filled"}),T.jsx(al,{h:"md"}),T.jsxs(Se,{mih:300,style:{width:"100%",overflow:"scroll"},children:[l==="success"&&u?T.jsxs(Vt,{striped:!0,captionSide:"bottom",withTableBorder:!0,children:[T.jsx(Vt.Thead,{children:T.jsx(Vt.Tr,{children:u.header.map(p=>T.jsx(Vt.Th,{style:{whiteSpace:"nowrap",minWidth:["description","instruction","participantId"].includes(p)?200:void 0},children:T.jsxs(Ft,{direction:"row",justify:"space-between",align:"center",children:[p,!PTe.includes(p)&&T.jsx(eg,{onClick:()=>o(s.filter(m=>m!==p)),style:{marginBottom:-3,marginLeft:8},variant:"subtle",color:"gray",children:T.jsx(Uw,{size:16})})]})},p))})}),T.jsx(Vt.Tbody,{children:u.rows.slice(0,5).map((p,m)=>T.jsx(Vt.Tr,{children:u.header.map(y=>T.jsx(Vt.Td,{style:{whiteSpace:["description","instruction","participantId"].includes(y)?"normal":"nowrap"},children:p[y]},`${m}-${y}`))},m))})]}):l==="error"&&c?T.jsx(up,{variant:"light",children:c.message}):null,T.jsx(fl,{visible:l==="pending"||l==="idle"})]}),T.jsx(al,{h:"sm"}),T.jsx(Ft,{justify:"center",fz:"sm",c:"dimmed",children:T.jsx(Je,{children:h})}),T.jsx(al,{h:"md"}),T.jsxs(Ti,{justify:"right",children:[T.jsx(tn,{onClick:t,color:"dark",variant:"subtle",children:"Close"}),T.jsx(tn,{leftSection:T.jsx(Tge,{}),onClick:d,"data-autofocus":!0,children:"Download"}),i==="__revisit-widget"&&T.jsx(tn,{onClick:f,children:T.jsx(W7e,{})})]})]})}function Obt(){const e=Hf(),{storageEngine:t}=Mi(),n=ir(w=>w.answers),r=cE(),[i,s]=D.useState(!1);D.useEffect(()=>{if(r){s(!0);return}const w=setInterval(async()=>{await t.verifyCompletion(n)&&(s(!0),clearInterval(w))},1e3)},[]),RTe();const[o,a]=D.useState(),[u,l]=D.useState(""),c=e.studyMetadata.title.replace(" ","_");D.useEffect(()=>{async function w(){if(t){const E=await t.getCurrentParticipantId(),_=await t.getParticipantData();l(E),a(_)}}w()},[t]);const d=D.useCallback(async()=>{XW(JSON.stringify(o,null,2),`${c}_${u}.json`)},[c,o,u]),f=e.uiConfig.autoDownloadStudy||!1,h=f&&e.uiConfig.autoDownloadTime||-1,[p,m]=D.useState(Math.floor(h/1e3));D.useEffect(()=>{if(i){const w=setInterval(()=>{m(E=>E-1)},1e3);return p<=0?(f&&d(),clearInterval(w),()=>clearInterval(w)):()=>clearInterval(w)}return()=>{}},[f,i,p,d]);const y=Kp(),[v,b]=D.useState(!1);return D.useEffect(()=>{(async()=>{if(t){const E=await t.getModes(y);b(E.dataCollectionEnabled)}})()},[t,y]),T.jsx(Ep,{style:{height:"100%"},children:T.jsx(Ft,{direction:"column",children:i||!v?e.uiConfig.studyEndMsg?T.jsx($o,{text:e.uiConfig.studyEndMsg}):T.jsx(Je,{size:"xl",display:"block",children:"Thank you for completing the study. You may close this window now."}):T.jsxs(T.Fragment,{children:[T.jsx(Je,{size:"xl",display:"block",children:"Please wait while your answers are uploaded."}),T.jsx(al,{h:"lg"}),T.jsx(Ep,{children:T.jsx(bd,{color:"blue"})})]})})})}function $bt(){return T.jsx(Je,{children:"Thank you for participating. Unfortunately you have didn't answer the training correctly, which means you are not eligible to participate in the study. You may close this window now."})}function Mbt(){return T.jsx(Je,{children:"Thank you for participating. Unfortunately, you have not answered the questions within the given time limit. Because of this, you are no longer eligible to participate in the study. You may close this window now."})}const mue={};function e7(e,t){e===void 0&&(e=mue),t===void 0&&(t=mue);const n=Object.keys(e),r=Object.keys(t);return e===t||n.length===r.length&&n.every(i=>e[i]===t[i])}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var Lbt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Fbt=Object.prototype.hasOwnProperty;function t7(e,t){return Fbt.call(e,t)}function n7(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)t7(e,i)&&r.push(i);return r}function il(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function r7(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function py(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function NTe(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function i7(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(i7(e[t]))return!0}else if(typeof e=="object"){for(var r=n7(e),i=r.length,s=0;s<i;s++)if(i7(e[r[s]]))return!0}}return!1}function gue(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var OTe=function(e){Lbt(t,e);function t(n,r,i,s,o){var a=this.constructor,u=e.call(this,gue(n,{name:r,index:i,operation:s,tree:o}))||this;return u.name=r,u.index=i,u.operation=s,u.tree=o,Object.setPrototypeOf(u,a.prototype),u.message=gue(n,{name:r,index:i,operation:s,tree:o}),u}return t}(Error),Ri=OTe,Bbt=il,zv={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=lN(n,this.path);r&&(r=il(r));var i=Vy(n,{op:"remove",path:this.from}).removed;return Vy(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=lN(n,this.from);return Vy(n,{op:"add",path:this.path,value:il(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:fC(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},jbt={add:function(e,t,n){return r7(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:zv.move,copy:zv.copy,test:zv.test,_get:zv._get};function lN(e,t){if(t=="")return e;var n={op:"_get",path:t};return Vy(e,n),n.value}function Vy(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):cN(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=lN(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=fC(e,t.value),o.test===!1)throw new Ri("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new Ri("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{r||(e=il(e));var a=t.path||"",u=a.split("/"),l=e,c=1,d=u.length,f=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=cN;;){if(h=u[c],h&&h.indexOf("~")!=-1&&(h=NTe(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&u[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&f===void 0&&(l[h]===void 0?f=u.slice(0,c).join("/"):c==d-1&&(f=t.path),f!==void 0&&p(t,0,e,f)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(n&&!r7(h))throw new Ri("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);r7(h)&&(h=~~h)}if(c>=d){if(n&&t.op==="add"&&h>l.length)throw new Ri("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=jbt[t.op].call(t,l,h,e);if(o.test===!1)throw new Ri("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(c>=d){var o=zv[t.op].call(t,l,h,e);if(o.test===!1)throw new Ri("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(l=l[h],n&&c<d&&(!l||typeof l!="object"))throw new Ri("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function g6(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new Ri("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=il(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=Vy(e,t[o],n,!0,i,o),e=s[o].newDocument;return s.newDocument=e,s}function zbt(e,t,n){var r=Vy(e,t);if(r.test===!1)throw new Ri("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function cN(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new Ri("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(zv[e.op]){if(typeof e.path!="string")throw new Ri("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new Ri('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new Ri("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new Ri("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&i7(e.value))throw new Ri("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new Ri("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new Ri("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=$Te([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new Ri("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new Ri("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function $Te(e,t,n){try{if(!Array.isArray(e))throw new Ri("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)g6(il(t),il(e),n||!0);else{n=n||cN;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof Ri)return i;throw i}}function fC(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,o;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!fC(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!fC(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}const Ubt=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:Ri,_areEquals:fC,applyOperation:Vy,applyPatch:g6,applyReducer:zbt,deepClone:Bbt,getValueByPointer:lN,validate:$Te,validator:cN},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var QW=new WeakMap,Vbt=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),Hbt=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function qbt(e){return QW.get(e)}function Wbt(e,t){return e.observers.get(t)}function Gbt(e,t){e.observers.delete(t.callback)}function Ybt(e,t){t.unobserve()}function Kbt(e,t){var n=[],r,i=qbt(e);if(!i)i=new Vbt(e),QW.set(e,i);else{var s=Wbt(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=il(e),t){r.callback=t,r.next=null;var o=function(){s7(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){s7(r),clearTimeout(r.next),Gbt(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new Hbt(t,r)),r}function s7(e,t){t===void 0&&(t=!1);var n=QW.get(e.object);JW(n.value,e.object,e.patches,"",t),e.patches.length&&g6(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function JW(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=n7(t),o=n7(e),a=!1,u=o.length-1;u>=0;u--){var l=o[u],c=e[l];if(t7(t,l)&&!(t[l]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var d=t[l];typeof c=="object"&&c!=null&&typeof d=="object"&&d!=null&&Array.isArray(c)===Array.isArray(d)?JW(c,d,n,r+"/"+py(l),i):c!==d&&(i&&n.push({op:"test",path:r+"/"+py(l),value:il(c)}),n.push({op:"replace",path:r+"/"+py(l),value:il(d)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+py(l),value:il(c)}),n.push({op:"remove",path:r+"/"+py(l)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&s.length==o.length))for(var u=0;u<s.length;u++){var l=s[u];!t7(e,l)&&t[l]!==void 0&&n.push({op:"add",path:r+"/"+py(l),value:il(t[l])})}}}function Xbt(e,t,n){n===void 0&&(n=!1);var r=[];return JW(e,t,r,"",n),r}const Qbt=Object.freeze(Object.defineProperty({__proto__:null,compare:Xbt,generate:s7,observe:Kbt,unobserve:Ybt},Symbol.toStringTag,{value:"Module"}));Object.assign({},Ubt,Qbt,{JsonPatchError:OTe,deepClone:il,escapePathComponent:py,unescapePathComponent:NTe});var JL,yue;function Jbt(){if(yue)return JL;yue=1;var e=/("(?:[^\\"]|\\.)*")|[:,]/g;return JL=function(n,r){var i,s,o;return r=r||{},i=JSON.stringify([1],void 0,r.indent===void 0?2:r.indent).slice(2,-3),s=i===""?1/0:r.maxLength===void 0?80:r.maxLength,o=r.replacer,function a(u,l,c){var d,f,h,p,m,y,v,b,w,E,_,C;if(u&&typeof u.toJSON=="function"&&(u=u.toJSON()),_=JSON.stringify(u,o),_===void 0)return _;if(v=s-l.length-c,_.length<=v&&(w=_.replace(e,function(S,k){return k||S+" "}),w.length<=v))return w;if(o!=null&&(u=JSON.parse(_),o=void 0),typeof u=="object"&&u!==null){if(b=l+i,h=[],f=0,Array.isArray(u))for(E="[",d="]",v=u.length;f<v;f++)h.push(a(u[f],b,f===v-1?0:1)||"null");else for(E="{",d="}",y=Object.keys(u),v=y.length;f<v;f++)p=y[f],m=JSON.stringify(p)+": ",C=a(u[p],b,m.length+(f===v-1?0:1)),C!==void 0&&h.push(m+C);if(h.length>0)return[E,i+h.join(`,
`+b),d].join(`
`+l)}return _}(n,"",0)},JL}var Zbt=Jbt();const ZL=Tl(Zbt);function Lu(e,t,n){return e.fields=t||[],e.fname=n,e}function Oi(e){return e==null?null:e.fname}function la(e){return e==null?null:e.fields}function MTe(e){return e.length===1?evt(e[0]):tvt(e)}const evt=e=>function(t){return t[e]},tvt=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function Ye(e){throw Error(e)}function sh(e){const t=[],n=e.length;let r=null,i=0,s="",o,a,u;e=e+"";function l(){t.push(s+e.substring(o,a)),s="",o=a+1}for(o=a=0;a<n;++a)if(u=e[a],u==="\\")s+=e.substring(o,a++),o=a;else if(u===r)l(),r=null,i=-1;else{if(r)continue;o===i&&u==='"'||o===i&&u==="'"?(o=a+1,r=u):u==="."&&!i?a>o?l():o=a+1:u==="["?(a>o&&l(),i=o=a+1):u==="]"&&(i||Ye("Access path missing open bracket: "+e),i>0&&l(),i=0,o=a+1)}return i&&Ye("Access path missing closing bracket: "+e),r&&Ye("Access path missing closing quote: "+e),a>o&&(a++,l()),t}function nc(e,t,n){const r=sh(e);return e=r.length===1?r[0]:e,Lu((n&&n.get||MTe)(r),[e],t||e)}const $S=nc("id"),ga=Lu(e=>e,[],"identity"),Km=Lu(()=>0,[],"zero"),dE=Lu(()=>1,[],"one"),rc=Lu(()=>!0,[],"true"),Pm=Lu(()=>!1,[],"false");function nvt(e,t,n){const r=[t].concat([].slice.call(n));console[e].apply(console,r)}const LTe=0,ZW=1,eG=2,FTe=3,BTe=4;function tG(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:nvt,r=e||LTe;return{level(i){return arguments.length?(r=+i,this):r},error(){return r>=ZW&&n(t||"error","ERROR",arguments),this},warn(){return r>=eG&&n(t||"warn","WARN",arguments),this},info(){return r>=FTe&&n(t||"log","INFO",arguments),this},debug(){return r>=BTe&&n(t||"log","DEBUG",arguments),this}}}var Qe=Array.isArray;function kt(e){return e===Object(e)}const bue=e=>e!=="__proto__";function fE(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((r,i)=>{for(const s in i)if(s==="signals")r.signals=rvt(r.signals,i.signals);else{const o=s==="legend"?{layout:1}:s==="style"?!0:null;hE(r,s,i[s],o)}return r},{})}function hE(e,t,n,r){if(!bue(t))return;let i,s;if(kt(n)&&!Qe(n)){s=kt(e[t])?e[t]:e[t]={};for(i in n)r&&(r===!0||r[i])?hE(s,i,n[i]):bue(i)&&(s[i]=n[i])}else e[t]=n}function rvt(e,t){if(e==null)return t;const n={},r=[];function i(s){n[s.name]||(n[s.name]=1,r.push(s))}return t.forEach(i),e.forEach(i),r}function Wn(e){return e[e.length-1]}function aa(e){return e==null||e===""?null:+e}const jTe=e=>t=>e*Math.exp(t),zTe=e=>t=>Math.log(e*t),UTe=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),VTe=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,dN=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function y6(e,t,n,r){const i=n(e[0]),s=n(Wn(e)),o=(s-i)*t;return[r(i-o),r(s-o)]}function HTe(e,t){return y6(e,t,aa,ga)}function qTe(e,t){var n=Math.sign(e[0]);return y6(e,t,zTe(n),jTe(n))}function WTe(e,t,n){return y6(e,t,dN(n),dN(1/n))}function GTe(e,t,n){return y6(e,t,UTe(n),VTe(n))}function b6(e,t,n,r,i){const s=r(e[0]),o=r(Wn(e)),a=t!=null?r(t):(s+o)/2;return[i(a+(s-a)*n),i(a+(o-a)*n)]}function nG(e,t,n){return b6(e,t,n,aa,ga)}function rG(e,t,n){const r=Math.sign(e[0]);return b6(e,t,n,zTe(r),jTe(r))}function fN(e,t,n,r){return b6(e,t,n,dN(r),dN(1/r))}function iG(e,t,n,r){return b6(e,t,n,UTe(r),VTe(r))}function YTe(e){return 1+~~(new Date(e).getMonth()/3)}function KTe(e){return 1+~~(new Date(e).getUTCMonth()/3)}function Rt(e){return e!=null?Qe(e)?e:[e]:[]}function XTe(e,t,n){let r=e[0],i=e[1],s;return i<r&&(s=i,i=r,r=s),s=i-r,s>=n-t?[t,n]:[r=Math.min(Math.max(r,t),n-s),r+s]}function Sn(e){return typeof e=="function"}const ivt="descending";function sG(e,t,n){n=n||{},t=Rt(t)||[];const r=[],i=[],s={},o=n.comparator||svt;return Rt(e).forEach((a,u)=>{a!=null&&(r.push(t[u]===ivt?-1:1),i.push(a=Sn(a)?a:nc(a,null,n)),(la(a)||[]).forEach(l=>s[l]=1))}),i.length===0?null:Lu(o(i,r),Object.keys(s))}const MS=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),svt=(e,t)=>e.length===1?ovt(e[0],t[0]):avt(e,t,e.length),ovt=(e,t)=>function(n,r){return MS(e(n),e(r))*t},avt=(e,t,n)=>(t.push(0),function(r,i){let s,o=0,a=-1;for(;o===0&&++a<n;)s=e[a],o=MS(s(r),s(i));return o*t[a]});function ya(e){return Sn(e)?e:()=>e}function oG(e,t){let n;return r=>{n&&clearTimeout(n),n=setTimeout(()=>(t(r),n=null),e)}}function Cn(e){for(let t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e}function qf(e,t){let n=0,r,i,s,o;if(e&&(r=e.length))if(t==null){for(i=e[n];n<r&&(i==null||i!==i);i=e[++n]);for(s=o=i;n<r;++n)i=e[n],i!=null&&(i<s&&(s=i),i>o&&(o=i))}else{for(i=t(e[n]);n<r&&(i==null||i!==i);i=t(e[++n]));for(s=o=i;n<r;++n)i=t(e[n]),i!=null&&(i<s&&(s=i),i>o&&(o=i))}return[s,o]}function QTe(e,t){const n=e.length;let r=-1,i,s,o,a,u;if(t==null){for(;++r<n;)if(s=e[r],s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)s=e[r],s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,u=r))}else{for(;++r<n;)if(s=t(e[r],r,e),s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)s=t(e[r],r,e),s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,u=r))}return[a,u]}function Ot(e,t){return Object.hasOwn(e,t)}const EI={};function pE(e){let t={},n;function r(s){return Ot(t,s)&&t[s]!==EI}const i={size:0,empty:0,object:t,has:r,get(s){return r(s)?t[s]:void 0},set(s,o){return r(s)||(++i.size,t[s]===EI&&--i.empty),t[s]=o,this},delete(s){return r(s)&&(--i.size,++i.empty,t[s]=EI),this},clear(){i.size=i.empty=0,i.object=t={}},test(s){return arguments.length?(n=s,i):n},clean(){const s={};let o=0;for(const a in t){const u=t[a];u!==EI&&(!n||!n(u))&&(s[a]=u,++o)}i.size=o,i.empty=0,i.object=t=s}};return e&&Object.keys(e).forEach(s=>{i.set(s,e[s])}),i}function JTe(e,t,n,r,i,s){if(!n&&n!==0)return s;const o=+n;let a=e[0],u=Wn(e),l;u<a&&(l=a,a=u,u=l),l=Math.abs(t-a);const c=Math.abs(u-t);return l<c&&l<=o?r:c<=o?i:s}function Et(e,t,n){const r=e.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),Cn(r,n)}function Uv(e,t,n,r){let i=t[0],s=t[t.length-1],o;return i>s&&(o=i,i=s,s=o),n=n===void 0||n,r=r===void 0||r,(n?i<=e:i<e)&&(r?e<=s:e<s)}function pg(e){return typeof e=="boolean"}function g0(e){return Object.prototype.toString.call(e)==="[object Date]"}function ZTe(e){return e&&Sn(e[Symbol.iterator])}function pr(e){return typeof e=="number"}function aG(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function It(e){return typeof e=="string"}function uG(e,t,n){e&&(e=t?Rt(e).map(a=>a.replace(/\\(.)/g,"$1")):Rt(e));const r=e&&e.length,i=n&&n.get||MTe,s=a=>i(t?[a]:sh(a));let o;if(!r)o=function(){return""};else if(r===1){const a=s(e[0]);o=function(u){return""+a(u)}}else{const a=e.map(s);o=function(u){let l=""+a[0](u),c=0;for(;++c<r;)l+="|"+a[c](u);return l}}return Lu(o,e,"key")}function e2e(e,t){const n=e[0],r=Wn(e),i=+t;return i?i===1?r:n+i*(r-n):n}const uvt=1e4;function t2e(e){e=+e||uvt;let t,n,r;const i=()=>{t={},n={},r=0},s=(o,a)=>(++r>e&&(n=t,t={},r=1),t[o]=a);return i(),{clear:i,has:o=>Ot(t,o)||Ot(n,o),get:o=>Ot(t,o)?t[o]:Ot(n,o)?s(o,n[o]):void 0,set:(o,a)=>Ot(t,o)?t[o]=a:s(o,a)}}function n2e(e,t,n,r){const i=t.length,s=n.length;if(!s)return t;if(!i)return n;const o=r||new t.constructor(i+s);let a=0,u=0,l=0;for(;a<i&&u<s;++l)o[l]=e(t[a],n[u])>0?n[u++]:t[a++];for(;a<i;++a,++l)o[l]=t[a];for(;u<s;++u,++l)o[l]=n[u];return o}function _T(e,t){let n="";for(;--t>=0;)n+=e;return n}function r2e(e,t,n,r){const i=n||" ",s=e+"",o=t-s.length;return o<=0?s:r==="left"?_T(i,o)+s:r==="center"?_T(i,~~(o/2))+s+_T(i,Math.ceil(o/2)):s+_T(i,o)}function LS(e){return e&&Wn(e)-e[0]||0}function bt(e){return Qe(e)?"["+e.map(bt)+"]":kt(e)||It(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function lG(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const lvt=e=>pr(e)||g0(e)?e:Date.parse(e);function cG(e,t){return t=t||lvt,e==null||e===""?null:t(e)}function dG(e){return e==null||e===""?null:e+""}function dd(e){const t={},n=e.length;for(let r=0;r<n;++r)t[e[r]]=!0;return t}function i2e(e,t,n,r){const i=r??"",s=e+"",o=s.length,a=Math.max(0,t-i.length);return o<=t?s:n==="left"?i+s.slice(o-a):n==="center"?s.slice(0,Math.ceil(a/2))+i+s.slice(o-~~(a/2)):s.slice(0,a)+i}function Fm(e,t,n){if(e)if(t){const r=e.length;for(let i=0;i<r;++i){const s=t(e[i]);s&&n(s,i,e)}}else e.forEach(n)}function cvt(e){return e}function dvt(e){if(e==null)return cvt;var t,n,r=e.scale[0],i=e.scale[1],s=e.translate[0],o=e.translate[1];return function(a,u){u||(t=n=0);var l=2,c=a.length,d=new Array(c);for(d[0]=(t+=a[0])*r+s,d[1]=(n+=a[1])*i+o;l<c;)d[l]=a[l],++l;return d}}function fvt(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function hvt(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return vue(e,n)})}:vue(e,t)}function vue(e,t){var n=t.id,r=t.bbox,i=t.properties==null?{}:t.properties,s=s2e(e,t);return n==null&&r==null?{type:"Feature",properties:i,geometry:s}:r==null?{type:"Feature",id:n,properties:i,geometry:s}:{type:"Feature",id:n,bbox:r,properties:i,geometry:s}}function s2e(e,t){var n=dvt(e.transform),r=e.arcs;function i(c,d){d.length&&d.pop();for(var f=r[c<0?~c:c],h=0,p=f.length;h<p;++h)d.push(n(f[h],h));c<0&&fvt(d,p)}function s(c){return n(c)}function o(c){for(var d=[],f=0,h=c.length;f<h;++f)i(c[f],d);return d.length<2&&d.push(d[0]),d}function a(c){for(var d=o(c);d.length<4;)d.push(d[0]);return d}function u(c){return c.map(a)}function l(c){var d=c.type,f;switch(d){case"GeometryCollection":return{type:d,geometries:c.geometries.map(l)};case"Point":f=s(c.coordinates);break;case"MultiPoint":f=c.coordinates.map(s);break;case"LineString":f=o(c.arcs);break;case"MultiLineString":f=c.arcs.map(o);break;case"Polygon":f=u(c.arcs);break;case"MultiPolygon":f=c.arcs.map(u);break;default:return null}return{type:d,coordinates:f}}return l(t)}function pvt(e,t){var n={},r={},i={},s=[],o=-1;t.forEach(function(l,c){var d=e.arcs[l<0?~l:l],f;d.length<3&&!d[1][0]&&!d[1][1]&&(f=t[++o],t[o]=l,t[c]=f)}),t.forEach(function(l){var c=a(l),d=c[0],f=c[1],h,p;if(h=i[d])if(delete i[h.end],h.push(l),h.end=f,p=r[f]){delete r[p.start];var m=p===h?h:h.concat(p);r[m.start=h.start]=i[m.end=p.end]=m}else r[h.start]=i[h.end]=h;else if(h=r[f])if(delete r[h.start],h.unshift(l),h.start=d,p=i[d]){delete i[p.end];var y=p===h?h:p.concat(h);r[y.start=p.start]=i[y.end=h.end]=y}else r[h.start]=i[h.end]=h;else h=[l],r[h.start=d]=i[h.end=f]=h});function a(l){var c=e.arcs[l<0?~l:l],d=c[0],f;return e.transform?(f=[0,0],c.forEach(function(h){f[0]+=h[0],f[1]+=h[1]})):f=c[c.length-1],l<0?[f,d]:[d,f]}function u(l,c){for(var d in l){var f=l[d];delete c[f.start],delete f.start,delete f.end,f.forEach(function(h){n[h<0?~h:h]=1}),s.push(f)}}return u(i,r),u(r,i),t.forEach(function(l){n[l<0?~l:l]||s.push([l])}),s}function mvt(e){return s2e(e,gvt.apply(this,arguments))}function gvt(e,t,n){var r,i,s;if(arguments.length>1)r=yvt(e,t,n);else for(i=0,r=new Array(s=e.arcs.length);i<s;++i)r[i]=i;return{type:"MultiLineString",arcs:pvt(e,r)}}function yvt(e,t,n){var r=[],i=[],s;function o(d){var f=d<0?~d:d;(i[f]||(i[f]=[])).push({i:d,g:s})}function a(d){d.forEach(o)}function u(d){d.forEach(a)}function l(d){d.forEach(u)}function c(d){switch(s=d,d.type){case"GeometryCollection":d.geometries.forEach(c);break;case"LineString":a(d.arcs);break;case"MultiLineString":case"Polygon":u(d.arcs);break;case"MultiPolygon":l(d.arcs);break}}return c(t),i.forEach(n==null?function(d){r.push(d[0].i)}:function(d){n(d[0].g,d[d.length-1].g)&&r.push(d[0].i)}),r}const No="year",Du="quarter",ca="month",_s="week",Pu="date",sa="day",Wf="dayofyear",xl="hours",wl="minutes",ic="seconds",fd="milliseconds",fG=[No,Du,ca,_s,Pu,sa,Wf,xl,wl,ic,fd],eF=fG.reduce((e,t,n)=>(e[t]=1+n,e),{});function hG(e){const t=Rt(e).slice(),n={};return t.length||Ye("Missing time unit."),t.forEach(i=>{Ot(eF,i)?n[i]=1:Ye(`Invalid time unit: ${i}.`)}),(n[_s]||n[sa]?1:0)+(n[Du]||n[ca]||n[Pu]?1:0)+(n[Wf]?1:0)>1&&Ye(`Incompatible time units: ${e}`),t.sort((i,s)=>eF[i]-eF[s]),t}const bvt={[No]:"%Y ",[Du]:"Q%q ",[ca]:"%b ",[Pu]:"%d ",[_s]:"W%U ",[sa]:"%a ",[Wf]:"%j ",[xl]:"%H:00",[wl]:"00:%M",[ic]:":%S",[fd]:".%L",[`${No}-${ca}`]:"%Y-%m ",[`${No}-${ca}-${Pu}`]:"%Y-%m-%d ",[`${xl}-${wl}`]:"%H:%M"};function o2e(e,t){const n=Cn({},bvt,t),r=hG(e),i=r.length;let s="",o=0,a,u;for(o=0;o<i;)for(a=r.length;a>o;--a)if(u=r.slice(o,a).join("-"),n[u]!=null){s+=n[u],o=a;break}return s.trim()}const vy=new Date;function pG(e){return vy.setFullYear(e),vy.setMonth(0),vy.setDate(1),vy.setHours(0,0,0,0),vy}function a2e(e){return l2e(new Date(e))}function u2e(e){return o7(new Date(e))}function l2e(e){return hp.count(pG(e.getFullYear())-1,e)}function o7(e){return uE.count(pG(e.getFullYear())-1,e)}function a7(e){return pG(e).getDay()}function vvt(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(-1,t,n,r,i,s,o);return a.setFullYear(e),a}return new Date(e,t,n,r,i,s,o)}function c2e(e){return f2e(new Date(e))}function d2e(e){return u7(new Date(e))}function f2e(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return m0.count(t-1,e)}function u7(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return lE.count(t-1,e)}function l7(e){return vy.setTime(Date.UTC(e,0,1)),vy.getUTCDay()}function xvt(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(Date.UTC(-1,t,n,r,i,s,o));return a.setUTCFullYear(n.y),a}return new Date(Date.UTC(e,t,n,r,i,s,o))}function h2e(e,t,n,r,i){const s=t||1,o=Wn(e),a=(v,b,w)=>(w=w||v,wvt(n[w],r[w],v===o&&s,b)),u=new Date,l=dd(e),c=l[No]?a(No):ya(2012),d=l[ca]?a(ca):l[Du]?a(Du):Km,f=l[_s]&&l[sa]?a(sa,1,_s+sa):l[_s]?a(_s,1):l[sa]?a(sa,1):l[Pu]?a(Pu,1):l[Wf]?a(Wf,1):dE,h=l[xl]?a(xl):Km,p=l[wl]?a(wl):Km,m=l[ic]?a(ic):Km,y=l[fd]?a(fd):Km;return function(v){u.setTime(+v);const b=c(u);return i(b,d(u),f(u,b),h(u),p(u),m(u),y(u))}}function wvt(e,t,n,r){const i=n<=1?e:r?(s,o)=>r+n*Math.floor((e(s,o)-r)/n):(s,o)=>n*Math.floor(e(s,o)/n);return t?(s,o)=>t(i(s,o),o):i}function Xx(e,t,n){return t+e*7-(n+6)%7}const Evt={[No]:e=>e.getFullYear(),[Du]:e=>Math.floor(e.getMonth()/3),[ca]:e=>e.getMonth(),[Pu]:e=>e.getDate(),[xl]:e=>e.getHours(),[wl]:e=>e.getMinutes(),[ic]:e=>e.getSeconds(),[fd]:e=>e.getMilliseconds(),[Wf]:e=>l2e(e),[_s]:e=>o7(e),[_s+sa]:(e,t)=>Xx(o7(e),e.getDay(),a7(t)),[sa]:(e,t)=>Xx(1,e.getDay(),a7(t))},_vt={[Du]:e=>3*e,[_s]:(e,t)=>Xx(e,0,a7(t))};function p2e(e,t){return h2e(e,t||1,Evt,_vt,vvt)}const Tvt={[No]:e=>e.getUTCFullYear(),[Du]:e=>Math.floor(e.getUTCMonth()/3),[ca]:e=>e.getUTCMonth(),[Pu]:e=>e.getUTCDate(),[xl]:e=>e.getUTCHours(),[wl]:e=>e.getUTCMinutes(),[ic]:e=>e.getUTCSeconds(),[fd]:e=>e.getUTCMilliseconds(),[Wf]:e=>f2e(e),[_s]:e=>u7(e),[sa]:(e,t)=>Xx(1,e.getUTCDay(),l7(t)),[_s+sa]:(e,t)=>Xx(u7(e),e.getUTCDay(),l7(t))},Cvt={[Du]:e=>3*e,[_s]:(e,t)=>Xx(e,0,l7(t))};function m2e(e,t){return h2e(e,t||1,Tvt,Cvt,xvt)}const Svt={[No]:zf,[Du]:aC.every(3),[ca]:aC,[_s]:uE,[Pu]:hp,[sa]:hp,[Wf]:hp,[xl]:JO,[wl]:XO,[ic]:rp,[fd]:qx},Avt={[No]:Uf,[Du]:uC.every(3),[ca]:uC,[_s]:lE,[Pu]:m0,[sa]:m0,[Wf]:m0,[xl]:ZO,[wl]:QO,[ic]:rp,[fd]:qx};function mE(e){return Svt[e]}function gE(e){return Avt[e]}function g2e(e,t,n){return e?e.offset(t,n):void 0}function y2e(e,t,n){return g2e(mE(e),t,n)}function b2e(e,t,n){return g2e(gE(e),t,n)}function v2e(e,t,n,r){return e?e.range(t,n,r):void 0}function x2e(e,t,n,r){return v2e(mE(e),t,n,r)}function w2e(e,t,n,r){return v2e(gE(e),t,n,r)}const TT=1e3,CT=TT*60,ST=CT*60,v6=ST*24,kvt=v6*7,xue=v6*30,c7=v6*365,E2e=[No,ca,Pu,xl,wl,ic,fd],AT=E2e.slice(0,-1),kT=AT.slice(0,-1),IT=kT.slice(0,-1),Ivt=IT.slice(0,-1),Rvt=[No,_s],wue=[No,ca],_2e=[No],I_=[[AT,1,TT],[AT,5,5*TT],[AT,15,15*TT],[AT,30,30*TT],[kT,1,CT],[kT,5,5*CT],[kT,15,15*CT],[kT,30,30*CT],[IT,1,ST],[IT,3,3*ST],[IT,6,6*ST],[IT,12,12*ST],[Ivt,1,v6],[Rvt,1,kvt],[wue,1,xue],[wue,3,3*xue],[_2e,1,c7]];function T2e(e){const t=e.extent,n=e.maxbins||40,r=Math.abs(LS(t))/n;let i=sE(a=>a[2]).right(I_,r),s,o;return i===I_.length?(s=_2e,o=$0(t[0]/c7,t[1]/c7,n)):i?(i=I_[r/I_[i-1][2]<I_[i][2]/r?i-1:i],s=i[0],o=i[1]):(s=E2e,o=Math.max($0(t[0],t[1],n),1)),{units:s,step:o}}function RT(e){const t={};return n=>t[n]||(t[n]=e(n))}function Dvt(e,t){return n=>{const r=e(n),i=r.indexOf(t);if(i<0)return r;let s=Pvt(r,i);const o=s<r.length?r.slice(s):"";for(;--s>i;)if(r[s]!=="0"){++s;break}return r.slice(0,s)+o}}function Pvt(e,t){let n=e.lastIndexOf("e"),r;if(n>0)return n;for(n=e.length;--n>t;)if(r=e.charCodeAt(n),r>=48&&r<=57)return n+1}function C2e(e){const t=RT(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(r){const i=o1(r||",");if(i.precision==null){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1;break}return Dvt(t(i),t(".1f")(1)[1])}else return t(i)},formatSpan(r,i,s,o){o=o1(o??",f");const a=$0(r,i,s),u=Math.max(Math.abs(r),Math.abs(i));let l;if(o.precision==null)switch(o.type){case"s":return isNaN(l=Swe(a,u))||(o.precision=l),n(o,u);case"":case"e":case"g":case"p":case"r":{isNaN(l=Awe(a,u))||(o.precision=l-(o.type==="e"));break}case"f":case"%":{isNaN(l=Cwe(a))||(o.precision=l-(o.type==="%")*2);break}}return t(o)}}}let d7;S2e();function S2e(){return d7=C2e({format:UO,formatPrefix:pW})}function A2e(e){return C2e(Twe(e))}function hN(e){return arguments.length?d7=A2e(e):d7}function Eue(e,t,n){n=n||{},kt(n)||Ye(`Invalid time multi-format specifier: ${n}`);const r=t(ic),i=t(wl),s=t(xl),o=t(Pu),a=t(_s),u=t(ca),l=t(Du),c=t(No),d=e(n[fd]||".%L"),f=e(n[ic]||":%S"),h=e(n[wl]||"%I:%M"),p=e(n[xl]||"%I %p"),m=e(n[Pu]||n[sa]||"%a %d"),y=e(n[_s]||"%b %d"),v=e(n[ca]||"%B"),b=e(n[Du]||"%B"),w=e(n[No]||"%Y");return E=>(r(E)<E?d:i(E)<E?f:s(E)<E?h:o(E)<E?p:u(E)<E?a(E)<E?m:y:c(E)<E?l(E)<E?v:b:w)(E)}function k2e(e){const t=RT(e.format),n=RT(e.utcFormat);return{timeFormat:r=>It(r)?t(r):Eue(t,mE,r),utcFormat:r=>It(r)?n(r):Eue(n,gE,r),timeParse:RT(e.parse),utcParse:RT(e.utcParse)}}let f7;I2e();function I2e(){return f7=k2e({format:kW,parse:FEe,utcFormat:IW,utcParse:BEe})}function R2e(e){return k2e(NEe(e))}function hC(e){return arguments.length?f7=R2e(e):f7}const h7=(e,t)=>Cn({},e,t);function D2e(e,t){const n=e?A2e(e):hN(),r=t?R2e(t):hC();return h7(n,r)}function mG(e,t){const n=arguments.length;return n&&n!==2&&Ye("defaultLocale expects either zero or two arguments."),n?h7(hN(e),hC(t)):h7(hN(),hC())}function Nvt(){return S2e(),I2e(),mG()}const Ovt=/^(data:|([A-Za-z]+:)?\/\/)/,$vt=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,Mvt=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,_ue="file://";function Lvt(e,t){return n=>({options:n||{},sanitize:Bvt,load:Fvt,fileAccess:!1,file:jvt(t),http:Uvt(e)})}async function Fvt(e,t){const n=await this.sanitize(e,t),r=n.href;return n.localFile?this.file(r):this.http(r,t)}async function Bvt(e,t){t=Cn({},this.options,t);const n=this.fileAccess,r={href:null};let i,s,o;const a=$vt.test(e.replace(Mvt,""));(e==null||typeof e!="string"||!a)&&Ye("Sanitize failure, invalid URI: "+bt(e));const u=Ovt.test(e);return(o=t.baseURL)&&!u&&(!e.startsWith("/")&&!o.endsWith("/")&&(e="/"+e),e=o+e),s=(i=e.startsWith(_ue))||t.mode==="file"||t.mode!=="http"&&!u&&n,i?e=e.slice(_ue.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),s=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(r,"localFile",{value:!!s}),r.href=e,t.target&&(r.target=t.target+""),t.rel&&(r.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(r.crossOrigin=t.crossOrigin+""),r}function jvt(e){return e?t=>new Promise((n,r)=>{e.readFile(t,(i,s)=>{i?r(i):n(s)})}):zvt}async function zvt(){Ye("No file system access.")}function Uvt(e){return e?async function(t,n){const r=Cn({},this.options.http,n),i=n&&n.response,s=await e(t,r);return s.ok?Sn(s[i])?s[i]():s.text():Ye(s.status+""+s.statusText)}:Vvt}async function Vvt(){Ye("No HTTP fetch method available.")}const Hvt=e=>e!=null&&e===e,qvt=e=>e==="true"||e==="false"||e===!0||e===!1,Wvt=e=>!Number.isNaN(Date.parse(e)),P2e=e=>!Number.isNaN(+e)&&!(e instanceof Date),Gvt=e=>P2e(e)&&Number.isInteger(+e),p7={boolean:lG,integer:aa,number:aa,date:cG,string:dG,unknown:ga},_I=[qvt,Gvt,P2e,Wvt],Yvt=["boolean","integer","number","date"];function N2e(e,t){if(!e||!e.length)return"unknown";const n=e.length,r=_I.length,i=_I.map((s,o)=>o+1);for(let s=0,o=0,a,u;s<n;++s)for(u=t?e[s][t]:e[s],a=0;a<r;++a)if(i[a]&&Hvt(u)&&!_I[a](u)&&(i[a]=0,++o,o===_I.length))return"string";return Yvt[i.reduce((s,o)=>s===0?o:s,0)-1]}function O2e(e,t){return t.reduce((n,r)=>(n[r]=N2e(e,r),n),{})}function Tue(e){const t=function(n,r){const i={delimiter:e};return gG(n,r?Cn(r,i):i)};return t.responseType="text",t}function gG(e,t){return t.header&&(e=t.header.map(bt).join(t.delimiter)+`
`+e),Yct(t.delimiter).parse(e+"")}gG.responseType="text";function Kvt(e){return typeof Buffer=="function"&&Sn(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function yG(e,t){const n=t&&t.property?nc(t.property):ga;return kt(e)&&!Kvt(e)?Xvt(n(e),t):n(JSON.parse(e))}yG.responseType="json";function Xvt(e,t){return!Qe(e)&&ZTe(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const Qvt={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function $2e(e,t){let n,r,i,s;return e=yG(e,t),t&&t.feature?(n=hvt,i=t.feature):t&&t.mesh?(n=mvt,i=t.mesh,s=Qvt[t.filter]):Ye("Missing TopoJSON feature or mesh parameter."),r=(r=e.objects[i])?n(e,r,s):Ye("Invalid TopoJSON object: "+i),r&&r.features||[r]}$2e.responseType="json";const XD={dsv:gG,csv:Tue(","),tsv:Tue("	"),json:yG,topojson:$2e};function bG(e,t){return arguments.length>1?(XD[e]=t,this):Ot(XD,e)?XD[e]:null}function M2e(e){const t=bG(e);return t&&t.responseType||"text"}function L2e(e,t,n,r){t=t||{};const i=bG(t.type||"json");return i||Ye("Unknown data format type: "+t.type),e=i(e,t),t.parse&&Jvt(e,t.parse,n,r),Ot(e,"columns")&&delete e.columns,e}function Jvt(e,t,n,r){if(!e.length)return;const i=hC();n=n||i.timeParse,r=r||i.utcParse;let s=e.columns||Object.keys(e[0]),o,a,u,l,c,d;t==="auto"&&(t=O2e(e,s)),s=Object.keys(t);const f=s.map(h=>{const p=t[h];let m,y;if(p&&(p.startsWith("date:")||p.startsWith("utc:")))return m=p.split(/:(.+)?/,2),y=m[1],(y[0]==="'"&&y[y.length-1]==="'"||y[0]==='"'&&y[y.length-1]==='"')&&(y=y.slice(1,-1)),(m[0]==="utc"?r:n)(y);if(!p7[p])throw Error("Illegal format pattern: "+h+":"+p);return p7[p]});for(u=0,c=e.length,d=s.length;u<c;++u)for(o=e[u],l=0;l<d;++l)a=s[l],o[a]=f[l](o[a])}const x6=Lvt(typeof fetch<"u"&&fetch,null);function w6(e){const t=e||ga,n=[],r={};return n.add=i=>{const s=t(i);return r[s]||(r[s]=1,n.push(i)),n},n.remove=i=>{const s=t(i);if(r[s]){r[s]=0;const o=n.indexOf(i);o>=0&&n.splice(o,1)}return n},n}async function QD(e,t){try{await t(e)}catch(n){e.error(n)}}const F2e=Symbol("vega_id");let Zvt=1;function E6(e){return!!(e&&Jt(e))}function Jt(e){return e[F2e]}function B2e(e,t){return e[F2e]=t,e}function xr(e){const t=e===Object(e)?e:{data:e};return Jt(t)?t:B2e(t,Zvt++)}function vG(e){return _6(e,xr({}))}function _6(e,t){for(const n in e)t[n]=e[n];return t}function j2e(e,t){return B2e(t,Jt(e))}function ob(e,t){return e?t?(n,r)=>e(n,r)||Jt(t(n))-Jt(t(r)):(n,r)=>e(n,r)||Jt(n)-Jt(r):null}function z2e(e){return e&&e.constructor===ab}function ab(){const e=[],t=[],n=[],r=[],i=[];let s=null,o=!1;return{constructor:ab,insert(a){const u=Rt(a),l=u.length;for(let c=0;c<l;++c)e.push(u[c]);return this},remove(a){const u=Sn(a)?r:t,l=Rt(a),c=l.length;for(let d=0;d<c;++d)u.push(l[d]);return this},modify(a,u,l){const c={field:u,value:ya(l)};return Sn(a)?(c.filter=a,i.push(c)):(c.tuple=a,n.push(c)),this},encode(a,u){return Sn(a)?i.push({filter:a,field:u}):n.push({tuple:a,field:u}),this},clean(a){return s=a,this},reflow(){return o=!0,this},pulse(a,u){const l={},c={};let d,f,h,p,m,y;for(d=0,f=u.length;d<f;++d)l[Jt(u[d])]=1;for(d=0,f=t.length;d<f;++d)m=t[d],l[Jt(m)]=-1;for(d=0,f=r.length;d<f;++d)p=r[d],u.forEach(b=>{p(b)&&(l[Jt(b)]=-1)});for(d=0,f=e.length;d<f;++d)m=e[d],y=Jt(m),l[y]?l[y]=1:a.add.push(xr(e[d]));for(d=0,f=u.length;d<f;++d)m=u[d],l[Jt(m)]<0&&a.rem.push(m);function v(b,w,E){E?b[w]=E(b):a.encode=w,o||(c[Jt(b)]=b)}for(d=0,f=n.length;d<f;++d)h=n[d],m=h.tuple,p=h.field,y=l[Jt(m)],y>0&&(v(m,p,h.value),a.modifies(p));for(d=0,f=i.length;d<f;++d)h=i[d],p=h.filter,u.forEach(b=>{p(b)&&l[Jt(b)]>0&&v(b,h.field,h.value)}),a.modifies(h.field);if(o)a.mod=t.length||r.length?u.filter(b=>l[Jt(b)]>0):u.slice();else for(y in c)a.mod.push(c[y]);return(s||s==null&&(t.length||r.length))&&a.clean(!0),a}}}const JD="_:mod:_";function T6(){Object.defineProperty(this,JD,{writable:!0,value:{}})}T6.prototype={set(e,t,n,r){const i=this,s=i[e],o=i[JD];return t!=null&&t>=0?(s[t]!==n||r)&&(s[t]=n,o[t+":"+e]=-1,o[e]=-1):(s!==n||r)&&(i[e]=n,o[e]=Qe(n)?1+n.length:-1),i},modified(e,t){const n=this[JD];if(arguments.length){if(Qe(e)){for(let r=0;r<e.length;++r)if(n[e[r]])return!0;return!1}}else{for(const r in n)if(n[r])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[JD]={},this}};let ext=0;const txt="pulse",nxt=new T6,rxt=1,ixt=2;function zr(e,t,n,r){this.id=++ext,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function Cue(e){return function(t){const n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}zr.prototype={targets(){return this._targets||(this._targets=w6($S))},set(e){return this.value!==e?(this.value=e,1):0},skip:Cue(rxt),modified:Cue(ixt),parameters(e,t,n){t=t!==!1;const r=this._argval=this._argval||new T6,i=this._argops=this._argops||[],s=[];let o,a,u,l;const c=(d,f,h)=>{h instanceof zr?(h!==this&&(t&&h.targets().add(this),s.push(h)),i.push({op:h,name:d,index:f})):r.set(d,f,h)};for(o in e)if(a=e[o],o===txt)Rt(a).forEach(d=>{d instanceof zr?d!==this&&(d.targets().add(this),s.push(d)):Ye("Pulse parameters must be operator instances.")}),this.source=a;else if(Qe(a))for(r.set(o,-1,Array(u=a.length)),l=0;l<u;++l)c(o,l,a[l]);else c(o,-1,a);return this.marshall().clear(),n&&(i.initonly=!0),s},marshall(e){const t=this._argval||nxt,n=this._argops;let r,i,s,o;if(n){const a=n.length;for(i=0;i<a;++i)r=n[i],s=r.op,o=s.modified()&&s.stamp===e,t.set(r.name,r.index,s.value,o);if(n.initonly){for(i=0;i<a;++i)r=n[i],r.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,r,i;if(e)for(t=0,n=e.length;t<n;++t)r=e[t],i=r.op,i._targets&&i._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),r=t.call(this,n,e);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function sxt(e,t,n,r){let i=1,s;return e instanceof zr?s=e:e&&e.prototype instanceof zr?s=new e:Sn(e)?s=new zr(null,e):(i=0,s=new zr(e,t)),this.rank(s),i&&(r=n,n=t),n&&this.connect(s,s.parameters(n,r)),this.touch(s),s}function oxt(e,t){const n=e.rank,r=t.length;for(let i=0;i<r;++i)if(n<t[i].rank){this.rerank(e);return}}let axt=0;function C6(e,t,n){this.id=++axt,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function Nm(e,t,n){return new C6(e,t,n)}C6.prototype={_filter:rc,_apply:ga,targets(){return this._targets||(this._targets=w6($S))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,r=n?n.length:0;for(let i=0;i<r;++i)n[i].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=Nm(e);return this.targets().add(t),t},apply(e){const t=Nm(null,e);return this.targets().add(t),t},merge(){const e=Nm();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=Nm();return this.targets().add(Nm(null,null,oG(e,n=>{const r=n.dataflow;t.receive(n),r&&r.run&&r.run()}))),t},between(e,t){let n=!1;return e.targets().add(Nm(null,null,()=>n=!0)),t.targets().add(Nm(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=rc,this._targets=null}};function uxt(e,t,n,r){const i=this,s=Nm(n,r),o=function(l){l.dataflow=i;try{s.receive(l)}catch(c){i.error(c)}finally{i.run()}};let a;typeof e=="string"&&typeof document<"u"?a=document.querySelectorAll(e):a=Rt(e);const u=a.length;for(let l=0;l<u;++l)a[l].addEventListener(t,o);return s}function lxt(e,t){const n=this.locale();return L2e(e,t,n.timeParse,n.utcParse)}function cxt(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}async function dxt(e,t){const n=this;let r=0,i;try{i=await n.loader().load(e,{context:"dataflow",response:M2e(t&&t.type)});try{i=n.parse(i,t)}catch(s){r=-2,n.warn("Data ingestion failed",e,s)}}catch(s){r=-1,n.warn("Loading failed",e,s)}return{data:i,status:r}}async function fxt(e,t,n){const r=this,i=r._pending||hxt(r);i.requests+=1;const s=await r.request(t,n);return r.pulse(e,r.changeset().remove(rc).insert(s.data||[])),i.done(),s}function hxt(e){let t;const n=new Promise(r=>t=r);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}const pxt={skip:!0};function mxt(e,t,n,r,i){return(e instanceof zr?yxt:gxt)(this,e,t,n,r,i),this}function gxt(e,t,n,r,i,s){const o=Cn({},s,pxt);let a,u;Sn(n)||(n=ya(n)),r===void 0?a=l=>e.touch(n(l)):Sn(r)?(u=new zr(null,r,i,!1),a=l=>{u.evaluate(l);const c=n(l),d=u.value;z2e(d)?e.pulse(c,d,s):e.update(c,d,o)}):a=l=>e.update(n(l),r,o),t.apply(a)}function yxt(e,t,n,r,i,s){if(r===void 0)t.targets().add(n);else{const o=s||{},a=new zr(null,bxt(n,r),i,!1);a.modified(o.force),a.rank=t.rank,t.targets().add(a),n&&(a.skip(!0),a.value=n.value,a.targets().add(n),e.connect(n,[a]))}}function bxt(e,t){return t=Sn(t)?t:ya(t),e?function(n,r){const i=t(n,r);return e.skip()||(e.skip(i!==this.value).value=i),i}:t}function vxt(e){e.rank=++this._rank}function xxt(e){const t=[e];let n,r,i;for(;t.length;)if(this.rank(n=t.pop()),r=n._targets)for(i=r.length;--i>=0;)t.push(n=r[i]),n===e&&Ye("Cycle detected in dataflow graph.")}const pN={},ef=1,Bm=2,Bh=4,wxt=ef|Bm,Sue=ef|Bh,cv=ef|Bm|Bh,Aue=8,R_=16,kue=32,Iue=64;function y0(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function tF(e,t){const n=[];return Fm(e,t,r=>n.push(r)),n}function Rue(e,t){const n={};return e.visit(t,r=>{n[Jt(r)]=1}),r=>n[Jt(r)]?null:r}function TI(e,t){return e?(n,r)=>e(n,r)&&t(n,r):t}y0.prototype={StopPropagation:pN,ADD:ef,REM:Bm,MOD:Bh,ADD_REM:wxt,ADD_MOD:Sue,ALL:cv,REFLOW:Aue,SOURCE:R_,NO_SOURCE:kue,NO_FIELDS:Iue,fork(e){return new y0(this.dataflow).init(this,e)},clone(){const e=this.fork(cv);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(cv|R_)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new y0(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&Iue)&&(n.fields=e.fields),t&ef?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&Bm?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&Bh?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&kue?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||cv;return t&ef&&this.add.length||t&Bm&&this.rem.length||t&Bh&&this.mod.length},reflow(e){if(e)return this.fork(cv).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(Bh,Rue(this,ef))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return Qe(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return(t||this.mod.length)&&n?arguments.length?Qe(e)?e.some(r=>n[r]):n[e]:!!n:!1},filter(e,t){const n=this;return e&ef&&(n.addF=TI(n.addF,t)),e&Bm&&(n.remF=TI(n.remF,t)),e&Bh&&(n.modF=TI(n.modF,t)),e&R_&&(n.srcF=TI(n.srcF,t)),n},materialize(e){e=e||cv;const t=this;return e&ef&&t.addF&&(t.add=tF(t.add,t.addF),t.addF=null),e&Bm&&t.remF&&(t.rem=tF(t.rem,t.remF),t.remF=null),e&Bh&&t.modF&&(t.mod=tF(t.mod,t.modF),t.modF=null),e&R_&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,r=t;if(e&R_)return Fm(n.source,n.srcF,r),n;e&ef&&Fm(n.add,n.addF,r),e&Bm&&Fm(n.rem,n.remF,r),e&Bh&&Fm(n.mod,n.modF,r);const i=n.source;if(e&Aue&&i){const s=n.add.length+n.mod.length;s===i.length||(s?Fm(i,Rue(n,Sue),r):Fm(i,n.srcF,r))}return n}};function xG(e,t,n,r){const i=this;let s=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n;for(const o of n)if(o.stamp===t){if(o.fields){const a=i.fields||(i.fields={});for(const u in o.fields)a[u]=1}o.changed(i.ADD)&&(s|=i.ADD),o.changed(i.REM)&&(s|=i.REM),o.changed(i.MOD)&&(s|=i.MOD)}this.changes=s}Et(xG,y0,{fork(e){const t=new y0(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?Qe(e)?e.some(r=>n[r]):n[e]:0},filter(){Ye("MultiPulse does not support filtering.")},materialize(){Ye("MultiPulse does not support materialization.")},visit(e,t){const n=this,r=n.pulses,i=r.length;let s=0;if(e&n.SOURCE)for(;s<i;++s)r[s].visit(e,t);else for(;s<i;++s)r[s].stamp===n.stamp&&r[s].visit(e,t);return n}});async function Ext(e,t,n){const r=this,i=[];if(r._pulse)return U2e(r);if(r._pending&&await r._pending,t&&await QD(r,t),!r._touched.length)return r.debug("Dataflow invoked, but nothing to do."),r;const s=++r._clock;r._pulse=new y0(r,s,e),r._touched.forEach(c=>r._enqueue(c,!0)),r._touched=w6($S);let o=0,a,u,l;try{for(;r._heap.size()>0;){if(a=r._heap.pop(),a.rank!==a.qrank){r._enqueue(a,!0);continue}u=a.run(r._getPulse(a,e)),u.then?u=await u:u.async&&(i.push(u.async),u=pN),u!==pN&&a._targets&&a._targets.forEach(c=>r._enqueue(c)),++o}}catch(c){r._heap.clear(),l=c}if(r._input={},r._pulse=null,r.debug(`Pulse ${s}: ${o} operators`),l&&(r._postrun=[],r.error(l)),r._postrun.length){const c=r._postrun.sort((d,f)=>f.priority-d.priority);r._postrun=[];for(let d=0;d<c.length;++d)await QD(r,c[d].callback)}return n&&await QD(r,n),i.length&&Promise.all(i).then(c=>r.runAsync(null,()=>{c.forEach(d=>{try{d(r)}catch(f){r.error(f)}})})),r}async function _xt(e,t,n){for(;this._running;)await this._running;const r=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(r,r),this._running}function Txt(e,t,n){return this._pulse?U2e(this):(this.evaluate(e,t,n),this)}function Cxt(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(r){this.error(r)}}function U2e(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function Sxt(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function Axt(e,t){const n=e.source,r=this._clock;return n&&Qe(n)?new xG(this,r,n.map(i=>i.pulse),t):this._input[e.id]||kxt(this._pulse,n&&n.pulse)}function kxt(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==pN&&(e.source=t.source),e)}const wG={skip:!1,force:!1};function Ixt(e,t){const n=t||wG;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function Rxt(e,t,n){const r=n||wG;return(e.set(t)||r.force)&&this.touch(e,r),this}function Dxt(e,t,n){this.touch(e,n||wG);const r=new y0(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._input[e.id]=t.pulse(r,i),this}function Pxt(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),V2e(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let r;return t.length?(r=t[0],t[0]=n,Nxt(t,0,e)):r=n,r}}}function V2e(e,t,n,r){let i,s;const o=e[n];for(;n>t;){if(s=n-1>>1,i=e[s],r(o,i)<0){e[n]=i,n=s;continue}break}return e[n]=o}function Nxt(e,t,n){const r=t,i=e.length,s=e[t];let o=(t<<1)+1,a;for(;o<i;)a=o+1,a<i&&n(e[o],e[a])>=0&&(o=a),e[t]=e[o],t=o,o=(t<<1)+1;return e[t]=s,V2e(e,r,t,n)}function fx(){this.logger(tG()),this.logLevel(ZW),this._clock=0,this._rank=0,this._locale=mG();try{this._loader=x6()}catch{}this._touched=w6($S),this._input={},this._pulse=null,this._heap=Pxt((e,t)=>e.qrank-t.qrank),this._postrun=[]}function D_(e){return function(){return this._log[e].apply(this,arguments)}}fx.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:D_("error"),warn:D_("warn"),info:D_("info"),debug:D_("debug"),logLevel:D_("level"),cleanThreshold:1e4,add:sxt,connect:oxt,rank:vxt,rerank:xxt,pulse:Dxt,touch:Ixt,update:Rxt,changeset:ab,ingest:cxt,parse:lxt,preload:fxt,request:dxt,events:uxt,on:mxt,evaluate:Ext,run:Txt,runAsync:_xt,runAfter:Cxt,_enqueue:Sxt,_getPulse:Axt};function He(e,t){zr.call(this,e,null,t)}Et(He,zr,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const Qx={};function H2e(e){const t=q2e(e);return t&&t.Definition||null}function q2e(e){return e=e&&e.toLowerCase(),Ot(Qx,e)?Qx[e]:null}function*W2e(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)r=t(r,++n,e),r!=null&&r!==""&&(r=+r)>=r&&(yield r)}}function EG(e,t,n){const r=Float64Array.from(W2e(e,n));return r.sort(dp),t.map(i=>Txe(r,i))}function _G(e,t){return EG(e,[.25,.5,.75],t)}function TG(e,t){const n=e.length,r=Oot(e,t),i=_G(e,t),s=(i[2]-i[0])/1.34;return 1.06*(Math.min(r,s)||r||Math.abs(i[0])||1)*Math.pow(n,-.2)}function G2e(e){const t=e.maxbins||20,n=e.base||10,r=Math.log(n),i=e.divide||[5,2];let s=e.extent[0],o=e.extent[1],a,u,l,c,d,f;const h=e.span||o-s||Math.abs(s)||1;if(e.step)a=e.step;else if(e.steps){for(c=h/t,d=0,f=e.steps.length;d<f&&e.steps[d]<c;++d);a=e.steps[Math.max(0,d-1)]}else{for(u=Math.ceil(Math.log(t)/r),l=e.minstep||0,a=Math.max(l,Math.pow(n,Math.round(Math.log(h)/r)-u));Math.ceil(h/a)>t;)a*=n;for(d=0,f=i.length;d<f;++d)c=a/i[d],c>=l&&h/c<=t&&(a=c)}c=Math.log(a);const p=c>=0?0:~~(-c/r)+1,m=Math.pow(n,-p-1);return(e.nice||e.nice===void 0)&&(c=Math.floor(s/a+m)*a,s=s<c?c-a:c,o=Math.ceil(o/a)*a),{start:s,stop:o===s?s+a:o,step:a}}var sc=Math.random;function Oxt(e){sc=e}function Y2e(e,t,n,r){if(!e.length)return[void 0,void 0];const i=Float64Array.from(W2e(e,r)),s=i.length,o=t;let a,u,l,c;for(l=0,c=Array(o);l<o;++l){for(a=0,u=0;u<s;++u)a+=i[~~(sc()*s)];c[l]=a/s}return c.sort(dp),[oj(c,n/2),oj(c,1-n/2)]}function K2e(e,t,n,r){r=r||(f=>f);const i=e.length,s=new Float64Array(i);let o=0,a=1,u=r(e[0]),l=u,c=u+t,d;for(;a<i;++a){if(d=r(e[a]),d>=c){for(l=(u+l)/2;o<a;++o)s[o]=l;c=d+t,u=d}l=d}for(l=(u+l)/2;o<a;++o)s[o]=l;return n?$xt(s,t+t/4):s}function $xt(e,t){const n=e.length;let r=0,i=1,s,o;for(;e[r]===e[i];)++i;for(;i<n;){for(s=i+1;e[i]===e[s];)++s;if(e[i]-e[i-1]<t){for(o=i+(r+s-i-i>>1);o<i;)e[o++]=e[i];for(;o>i;)e[o--]=e[r]}r=i,i=s}return e}function Mxt(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function Lxt(e,t){t==null&&(t=e,e=0);let n,r,i;const s={min(o){return arguments.length?(n=o||0,i=r-n,s):n},max(o){return arguments.length?(r=o||0,i=r-n,s):r},sample(){return n+Math.floor(i*sc())},pdf(o){return o===Math.floor(o)&&o>=n&&o<r?1/i:0},cdf(o){const a=Math.floor(o);return a<n?0:a>=r?1:(a-n+1)/i},icdf(o){return o>=0&&o<=1?n-1+Math.floor(o*i):NaN}};return s.min(e).max(t)}const X2e=Math.sqrt(2*Math.PI),Fxt=Math.SQRT2;let P_=NaN;function S6(e,t){e=e||0,t=t??1;let n=0,r=0,i,s;if(P_===P_)n=P_,P_=NaN;else{do n=sc()*2-1,r=sc()*2-1,i=n*n+r*r;while(i===0||i>1);s=Math.sqrt(-2*Math.log(i)/i),n*=s,P_=r*s}return e+n*t}function CG(e,t,n){n=n??1;const r=(e-(t||0))/n;return Math.exp(-.5*r*r)/(n*X2e)}function A6(e,t,n){t=t||0,n=n??1;const r=(e-t)/n,i=Math.abs(r);let s;if(i>37)s=0;else{const o=Math.exp(-i*i/2);let a;i<7.07106781186547?(a=.0352624965998911*i+.700383064443688,a=a*i+6.37396220353165,a=a*i+33.912866078383,a=a*i+112.079291497871,a=a*i+221.213596169931,a=a*i+220.206867912376,s=o*a,a=.0883883476483184*i+1.75566716318264,a=a*i+16.064177579207,a=a*i+86.7807322029461,a=a*i+296.564248779674,a=a*i+637.333633378831,a=a*i+793.826512519948,a=a*i+440.413735824752,s=s/a):(a=i+.65,a=i+4/a,a=i+3/a,a=i+2/a,a=i+1/a,s=o/a/2.506628274631)}return r>0?1-s:s}function k6(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*Fxt*Bxt(2*e-1)}function Bxt(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function SG(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>S6(n,r),pdf:s=>CG(s,n,r),cdf:s=>A6(s,n,r),icdf:s=>k6(s,n,r)};return i.mean(e).stdev(t)}function AG(e,t){const n=SG();let r=0;const i={data(s){return arguments.length?(e=s,r=s?s.length:0,i.bandwidth(t)):e},bandwidth(s){return arguments.length?(t=s,!t&&e&&(t=TG(e)),i):t},sample(){return e[~~(sc()*r)]+t*n.sample()},pdf(s){let o=0,a=0;for(;a<r;++a)o+=n.pdf((s-e[a])/t);return o/t/r},cdf(s){let o=0,a=0;for(;a<r;++a)o+=n.cdf((s-e[a])/t);return o/r},icdf(){throw Error("KDE icdf not supported.")}};return i.data(e)}function kG(e,t){return e=e||0,t=t??1,Math.exp(e+S6()*t)}function IG(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;const r=(Math.log(e)-t)/n;return Math.exp(-.5*r*r)/(n*X2e*e)}function RG(e,t,n){return A6(Math.log(e),t,n)}function DG(e,t,n){return Math.exp(k6(e,t,n))}function Q2e(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>kG(n,r),pdf:s=>IG(s,n,r),cdf:s=>RG(s,n,r),icdf:s=>DG(s,n,r)};return i.mean(e).stdev(t)}function J2e(e,t){let n=0,r;function i(o){const a=[];let u=0,l;for(l=0;l<n;++l)u+=a[l]=o[l]==null?1:+o[l];for(l=0;l<n;++l)a[l]/=u;return a}const s={weights(o){return arguments.length?(r=i(t=o||[]),s):t},distributions(o){return arguments.length?(o?(n=o.length,e=o):(n=0,e=[]),s.weights(t)):e},sample(){const o=sc();let a=e[n-1],u=r[0],l=0;for(;l<n-1;u+=r[++l])if(o<u){a=e[l];break}return a.sample()},pdf(o){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].pdf(o);return a},cdf(o){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].cdf(o);return a},icdf(){throw Error("Mixture icdf not supported.")}};return s.distributions(e).weights(t)}function PG(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*sc()}function NG(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function OG(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function $G(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function Z2e(e,t){let n,r;const i={min(s){return arguments.length?(n=s||0,i):n},max(s){return arguments.length?(r=s??1,i):r},sample:()=>PG(n,r),pdf:s=>NG(s,n,r),cdf:s=>OG(s,n,r),icdf:s=>$G(s,n,r)};return t==null&&(t=e??1,e=0),i.min(e).max(t)}function MG(e,t,n){let r=0,i=0;for(const s of e){const o=n(s);t(s)==null||o==null||isNaN(o)||(r+=(o-r)/++i)}return{coef:[r],predict:()=>r,rSquared:0}}function FS(e,t,n,r){const i=r-e*e,s=Math.abs(i)<1e-24?0:(n-e*t)/i;return[t-s*e,s]}function I6(e,t,n,r){e=e.filter(h=>{let p=t(h),m=n(h);return p!=null&&(p=+p)>=p&&m!=null&&(m=+m)>=m}),r&&e.sort((h,p)=>t(h)-t(p));const i=e.length,s=new Float64Array(i),o=new Float64Array(i);let a=0,u=0,l=0,c,d,f;for(f of e)s[a]=c=+t(f),o[a]=d=+n(f),++a,u+=(c-u)/a,l+=(d-l)/a;for(a=0;a<i;++a)s[a]-=u,o[a]-=l;return[s,o,u,l]}function BS(e,t,n,r){let i=-1,s,o;for(const a of e)s=t(a),o=n(a),s!=null&&(s=+s)>=s&&o!=null&&(o=+o)>=o&&r(s,o,++i)}function yE(e,t,n,r,i){let s=0,o=0;return BS(e,t,n,(a,u)=>{const l=u-i(a),c=u-r;s+=l*l,o+=c*c}),1-s/o}function LG(e,t,n){let r=0,i=0,s=0,o=0,a=0;BS(e,t,n,(c,d)=>{++a,r+=(c-r)/a,i+=(d-i)/a,s+=(c*d-s)/a,o+=(c*c-o)/a});const u=FS(r,i,s,o),l=c=>u[0]+u[1]*c;return{coef:u,predict:l,rSquared:yE(e,t,n,i,l)}}function eCe(e,t,n){let r=0,i=0,s=0,o=0,a=0;BS(e,t,n,(c,d)=>{++a,c=Math.log(c),r+=(c-r)/a,i+=(d-i)/a,s+=(c*d-s)/a,o+=(c*c-o)/a});const u=FS(r,i,s,o),l=c=>u[0]+u[1]*Math.log(c);return{coef:u,predict:l,rSquared:yE(e,t,n,i,l)}}function tCe(e,t,n){const[r,i,s,o]=I6(e,t,n);let a=0,u=0,l=0,c=0,d=0,f,h,p;BS(e,t,n,(b,w)=>{f=r[d++],h=Math.log(w),p=f*w,a+=(w*h-a)/d,u+=(p-u)/d,l+=(p*h-l)/d,c+=(f*p-c)/d});const[m,y]=FS(u/o,a/o,l/o,c/o),v=b=>Math.exp(m+y*(b-s));return{coef:[Math.exp(m-y*s),y],predict:v,rSquared:yE(e,t,n,o,v)}}function nCe(e,t,n){let r=0,i=0,s=0,o=0,a=0,u=0;BS(e,t,n,(d,f)=>{const h=Math.log(d),p=Math.log(f);++u,r+=(h-r)/u,i+=(p-i)/u,s+=(h*p-s)/u,o+=(h*h-o)/u,a+=(f-a)/u});const l=FS(r,i,s,o),c=d=>l[0]*Math.pow(d,l[1]);return l[0]=Math.exp(l[0]),{coef:l,predict:c,rSquared:yE(e,t,n,a,c)}}function FG(e,t,n){const[r,i,s,o]=I6(e,t,n),a=r.length;let u=0,l=0,c=0,d=0,f=0,h,p,m,y;for(h=0;h<a;)p=r[h],m=i[h++],y=p*p,u+=(y-u)/h,l+=(y*p-l)/h,c+=(y*y-c)/h,d+=(p*m-d)/h,f+=(y*m-f)/h;const v=c-u*u,b=u*v-l*l,w=(f*u-d*l)/b,E=(d*v-f*l)/b,_=-w*u,C=S=>(S=S-s,w*S*S+E*S+_+o);return{coef:[_-E*s+w*s*s+o,E-2*w*s,w],predict:C,rSquared:yE(e,t,n,o,C)}}function rCe(e,t,n,r){if(r===0)return MG(e,t,n);if(r===1)return LG(e,t,n);if(r===2)return FG(e,t,n);const[i,s,o,a]=I6(e,t,n),u=i.length,l=[],c=[],d=r+1;let f,h,p,m,y;for(f=0;f<d;++f){for(p=0,m=0;p<u;++p)m+=Math.pow(i[p],f)*s[p];for(l.push(m),y=new Float64Array(d),h=0;h<d;++h){for(p=0,m=0;p<u;++p)m+=Math.pow(i[p],f+h);y[h]=m}c.push(y)}c.push(l);const v=zxt(c),b=w=>{w-=o;let E=a+v[0]+v[1]*w+v[2]*w*w;for(f=3;f<d;++f)E+=v[f]*Math.pow(w,f);return E};return{coef:jxt(d,v,-o,a),predict:b,rSquared:yE(e,t,n,a,b)}}function jxt(e,t,n,r){const i=Array(e);let s,o,a,u;for(s=0;s<e;++s)i[s]=0;for(s=e-1;s>=0;--s)for(a=t[s],u=1,i[s]+=a,o=1;o<=s;++o)u*=(s+1-o)/o,i[s-o]+=a*Math.pow(n,o)*u;return i[0]+=r,i}function zxt(e){const t=e.length-1,n=[];let r,i,s,o,a;for(r=0;r<t;++r){for(o=r,i=r+1;i<t;++i)Math.abs(e[r][i])>Math.abs(e[r][o])&&(o=i);for(s=r;s<t+1;++s)a=e[s][r],e[s][r]=e[s][o],e[s][o]=a;for(i=r+1;i<t;++i)for(s=t;s>=r;s--)e[s][i]-=e[s][r]*e[r][i]/e[r][r]}for(i=t-1;i>=0;--i){for(a=0,s=i+1;s<t;++s)a+=e[s][i]*n[s];n[i]=(e[t][i]-a)/e[i][i]}return n}const Due=2,Pue=1e-12;function iCe(e,t,n,r){const[i,s,o,a]=I6(e,t,n,!0),u=i.length,l=Math.max(2,~~(r*u)),c=new Float64Array(u),d=new Float64Array(u),f=new Float64Array(u).fill(1);for(let h=-1;++h<=Due;){const p=[0,l-1];for(let y=0;y<u;++y){const v=i[y],b=p[0],w=p[1],E=v-i[b]>i[w]-v?b:w;let _=0,C=0,S=0,k=0,R=0;const N=1/Math.abs(i[E]-v||1);for(let $=b;$<=w;++$){const z=i[$],q=s[$],W=Uxt(Math.abs(v-z)*N)*f[$],J=z*W;_+=W,C+=J,S+=q*W,k+=q*J,R+=z*J}const[O,F]=FS(C/_,S/_,k/_,R/_);c[y]=O+F*v,d[y]=Math.abs(s[y]-c[y]),Vxt(i,y+1,p)}if(h===Due)break;const m=Cxe(d);if(Math.abs(m)<Pue)break;for(let y=0,v,b;y<u;++y)v=d[y]/(6*m),f[y]=v>=1?Pue:(b=1-v*v)*b}return Hxt(i,c,o,a)}function Uxt(e){return(e=1-e*e*e)*e*e}function Vxt(e,t,n){const r=e[t];let i=n[0],s=n[1]+1;if(!(s>=e.length))for(;t>i&&e[s]-r<=r-e[i];)n[0]=++i,n[1]=s,++s}function Hxt(e,t,n,r){const i=e.length,s=[];let o=0,a=0,u=[],l;for(;o<i;++o)l=e[o]+n,u[0]===l?u[1]+=(t[o]-u[1])/++a:(a=0,u[1]+=r,u=[l,t[o]],s.push(u));return u[1]+=r,s}const qxt=.5*Math.PI/180;function R6(e,t,n,r){n=n||25,r=Math.max(n,r||200);const i=m=>[m,e(m)],s=t[0],o=t[1],a=o-s,u=a/r,l=[i(s)],c=[];if(n===r){for(let m=1;m<r;++m)l.push(i(s+m/n*a));return l.push(i(o)),l}else{c.push(i(o));for(let m=n;--m>0;)c.push(i(s+m/n*a))}let d=l[0],f=c[c.length-1];const h=1/a,p=Wxt(d[1],c);for(;f;){const m=i((d[0]+f[0])/2);m[0]-d[0]>=u&&Gxt(d,m,f,h,p)>qxt?c.push(m):(d=f,l.push(f),c.pop()),f=c[c.length-1]}return l}function Wxt(e,t){let n=e,r=e;const i=t.length;for(let s=0;s<i;++s){const o=t[s][1];o<n&&(n=o),o>r&&(r=o)}return 1/(r-n)}function Gxt(e,t,n,r,i){const s=Math.atan2(i*(n[1]-e[1]),r*(n[0]-e[0])),o=Math.atan2(i*(t[1]-e[1]),r*(t[0]-e[0]));return Math.abs(s-o)}function Yxt(e){return t=>{const n=e.length;let r=1,i=String(e[0](t));for(;r<n;++r)i+="|"+e[r](t);return i}}function m7(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:Yxt(e)}function sCe(e,t,n){return n||e+(t?"_"+t:"")}const nF=()=>{},Kxt={init:nF,add:nF,rem:nF,idx:0},pC={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},jS=Object.keys(pC).filter(e=>e!=="__count__");function Xxt(e,t){return(n,r)=>Cn({name:e,aggregate_param:r,out:n||e},Kxt,t)}[...jS,"__count__"].forEach(e=>{pC[e]=Xxt(e,pC[e])});function oCe(e,t,n){return pC[e](n,t)}function aCe(e,t){return e.idx-t.idx}function Qxt(e){const t={};e.forEach(r=>t[r.name]=r);const n=r=>{r.req&&r.req.forEach(i=>{t[i]||n(t[i]=pC[i]())})};return e.forEach(n),Object.values(t).sort(aCe)}function Jxt(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.aggregate_param==null?e.init(this):e.init(this,e.aggregate_param))}function Zxt(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function ewt(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function twt(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function uCe(e,t){const n=t||ga,r=Qxt(e),i=e.slice().sort(aCe);function s(o){this._ops=r,this._out=i,this.cell=o,this.init()}return s.prototype.init=Jxt,s.prototype.add=Zxt,s.prototype.rem=ewt,s.prototype.set=twt,s.prototype.get=n,s.fields=e.map(o=>o.out),s}function BG(e){this._key=e?nc(e):Jt,this.reset()}const jo=BG.prototype;jo.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};jo.add=function(e){this._add.push(e)};jo.rem=function(e){this._rem.push(e)};jo.values=function(){if(this._get=null,this._rem.length===0)return this._add;const e=this._add,t=this._rem,n=this._key,r=e.length,i=t.length,s=Array(r-i),o={};let a,u,l;for(a=0;a<i;++a)o[n(t[a])]=1;for(a=0,u=0;a<r;++a)o[n(l=e[a])]?o[n(l)]=0:s[u++]=l;return this._rem=[],this._add=s};jo.distinct=function(e){const t=this.values(),n={};let r=t.length,i=0,s;for(;--r>=0;)s=e(t[r])+"",Ot(n,s)||(n[s]=1,++i);return i};jo.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=QTe(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};jo.argmin=function(e){return this.extent(e)[0]||{}};jo.argmax=function(e){return this.extent(e)[1]||{}};jo.min=function(e){const t=this.extent(e)[0];return t!=null?e(t):void 0};jo.max=function(e){const t=this.extent(e)[1];return t!=null?e(t):void 0};jo.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=_G(this.values(),e),this._get=e),this._q};jo.q1=function(e){return this.quartile(e)[0]};jo.q2=function(e){return this.quartile(e)[1]};jo.q3=function(e){return this.quartile(e)[2]};jo.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=Y2e(this.values(),1e3,.05,e),this._get=e),this._ci};jo.ci0=function(e){return this.ci(e)[0]};jo.ci1=function(e){return this.ci(e)[1]};function j0(e){He.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}j0.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:jS},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};Et(j0,He,{transform(e,t){const n=this,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.modified();return n.stamp=r.stamp,n.value&&(i||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(e):Object.create(null),t.visit(t.SOURCE,s=>n.add(s))):(n.value=n.value||n.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),r.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&r.clean(!0).runAfter(()=>this.clean()),n.changes(r)},cross(){const e=this,t=e.value,n=e._dnames,r=n.map(()=>({})),i=n.length;function s(a){let u,l,c,d;for(u in a)for(c=a[u].tuple,l=0;l<i;++l)r[l][d=c[n[l]]]=d}s(e._prev),s(t);function o(a,u,l){const c=n[l],d=r[l++];for(const f in d){const h=a?a+"|"+f:f;u[c]=d[f],l<i?o(h,u,l):t[h]||e.cell(h,u)}}o("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],r={};function i(b){const w=Rt(la(b)),E=w.length;let _=0,C;for(;_<E;++_)r[C=w[_]]||(r[C]=1,t.push(C))}this._dims=Rt(e.groupby),this._dnames=this._dims.map(b=>{const w=Oi(b);return i(b),n.push(w),w}),this.cellkey=e.key?e.key:m7(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const s=e.fields||[null],o=e.ops||["count"],a=e.aggregate_params||[null],u=e.as||[],l=s.length,c={};let d,f,h,p,m,y,v;for(l!==o.length&&Ye("Unmatched number of fields and aggregate ops."),v=0;v<l;++v){if(d=s[v],f=o[v],h=a[v]||null,d==null&&f!=="count"&&Ye("Null aggregate field specified."),m=Oi(d),y=sCe(f,m,u[v]),n.push(y),f==="count"){this._counts.push(y);continue}p=c[m],p||(i(d),p=c[m]=[],p.field=d,this._measures.push(p)),f!=="count"&&(this._countOnly=!1),p.push(oCe(f,h,y))}return this._measures=this._measures.map(b=>uCe(b,b.field)),Object.create(null)},cellkey:m7(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const r=this._measures,i=r.length;n.agg=Array(i);for(let s=0;s<i;++s)n.agg[s]=new r[s](n)}return n.store&&(n.data=new BG),n},newtuple(e,t){const n=this._dnames,r=this._dims,i=r.length,s={};for(let o=0;o<i;++o)s[n[o]]=r[o](e);return t?j2e(t.tuple,s):xr(s)},clean(){const e=this.value;for(const t in e)e[t].num===0&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].add(r[i].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].rem(r[i].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let r=0,i=n.length;r<i;++r)t[n[r]]=e.num;if(!this._countOnly){const r=e.agg;for(let i=0,s=r.length;i<s;++i)r[i].set(t)}return t},changes(e){const t=this._adds,n=this._mods,r=this._prev,i=this._drop,s=e.add,o=e.rem,a=e.mod;let u,l,c,d;if(r)for(l in r)u=r[l],(!i||u.num)&&o.push(u.tuple);for(c=0,d=this._alen;c<d;++c)s.push(this.celltuple(t[c])),t[c]=null;for(c=0,d=this._mlen;c<d;++c)u=n[c],(u.num===0&&i?o:a).push(this.celltuple(u)),n[c]=null;return this._alen=this._mlen=0,this._prev=null,e}});const nwt=1e-14;function jG(e){He.call(this,null,e)}jG.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};Et(jG,He,{transform(e,t){const n=e.interval!==!1,r=this._bins(e),i=r.start,s=r.step,o=e.as||["bin0","bin1"],a=o[0],u=o[1];let l;return e.modified()?(t=t.reflow(!0),l=t.SOURCE):l=t.modified(la(e.field))?t.ADD_MOD:t.ADD,t.visit(l,n?c=>{const d=r(c);c[a]=d,c[u]=d==null?null:i+s*(1+(d-i)/s)}:c=>c[a]=r(c)),t.modifies(n?o:a)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=G2e(e),r=n.step;let i=n.start,s=i+Math.ceil((n.stop-i)/r)*r,o,a;(o=e.anchor)!=null&&(a=o-(i+r*Math.floor((o-i)/r)),i+=a,s+=a);const u=function(l){let c=aa(t(l));return c==null?null:c<i?-1/0:c>s?1/0:(c=Math.max(i,Math.min(c,s-r)),i+r*Math.floor(nwt+(c-i)/r))};return u.start=i,u.stop=n.stop,u.step=r,this.value=Lu(u,la(t),e.name||"bin_"+Oi(t))}});function lCe(e,t,n){const r=e;let i=t||[],s=n||[],o={},a=0;return{add:u=>s.push(u),remove:u=>o[r(u)]=++a,size:()=>i.length,data:(u,l)=>(a&&(i=i.filter(c=>!o[r(c)]),o={},a=0),l&&u&&i.sort(u),s.length&&(i=u?n2e(u,i,s.sort(u)):i.concat(s),s=[]),i)}}function zG(e){He.call(this,[],e)}zG.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};Et(zG,He,{transform(e,t){const n=t.fork(t.ALL),r=lCe(Jt,this.value,n.materialize(n.ADD).add),i=e.sort,s=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(s),this.value=n.source=r.data(ob(i),s),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function cCe(e){zr.call(this,null,rwt,e)}Et(cCe,zr);function rwt(e){return this.value&&!e.modified()?this.value:sG(e.fields,e.orders)}function UG(e){He.call(this,null,e)}UG.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function iwt(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}Et(UG,He,{transform(e,t){const n=d=>f=>{for(var h=iwt(a(f),e.case,s)||[],p,m=0,y=h.length;m<y;++m)o.test(p=h[m])||d(p)},r=this._parameterCheck(e,t),i=this._counts,s=this._match,o=this._stop,a=e.field,u=e.as||["text","count"],l=n(d=>i[d]=1+(i[d]||0)),c=n(d=>i[d]-=1);return r?t.visit(t.SOURCE,l):(t.visit(t.ADD,l),t.visit(t.REM,c)),this._finish(t,u)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,r=this._tuples||(this._tuples={}),i=t[0],s=t[1],o=e.fork(e.NO_SOURCE|e.NO_FIELDS);let a,u,l;for(a in n)u=r[a],l=n[a]||0,!u&&l?(r[a]=u=xr({}),u[i]=a,u[s]=l,o.add.push(u)):l===0?(u&&o.rem.push(u),n[a]=null,r[a]=null):u[s]!==l&&(u[s]=l,o.mod.push(u));return o.modifies(t)}});function VG(e){He.call(this,null,e)}VG.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};Et(VG,He,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.as||["a","b"],i=r[0],s=r[1],o=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let a=this.value;return o?(a&&(n.rem=a),a=t.materialize(t.SOURCE).source,n.add=this.value=swt(a,i,s,e.filter||rc)):n.mod=a,n.source=this.value,n.modifies(r)}});function swt(e,t,n,r){for(var i=[],s={},o=e.length,a=0,u,l;a<o;++a)for(s[t]=l=e[a],u=0;u<o;++u)s[n]=e[u],r(s)&&(i.push(xr(s)),s={},s[t]=l);return i}const Nue={kde:AG,mixture:J2e,normal:SG,lognormal:Q2e,uniform:Z2e},owt="distributions",Oue="function",awt="field";function dCe(e,t){const n=e[Oue];Ot(Nue,n)||Ye("Unknown distribution function: "+n);const r=Nue[n]();for(const i in e)i===awt?r.data((e.from||t()).map(e[i])):i===owt?r[i](e[i].map(s=>dCe(s,t))):typeof r[i]===Oue&&r[i](e[i]);return r}function HG(e){He.call(this,null,e)}const fCe=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],uwt={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:fCe},{name:"weights",type:"number",array:!0}]};HG.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:fCe.concat(uwt)},{name:"as",type:"string",array:!0,default:["value","density"]}]};Et(HG,He,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=dCe(e.distribution,lwt(t)),i=e.steps||e.minsteps||25,s=e.steps||e.maxsteps||200;let o=e.method||"pdf";o!=="pdf"&&o!=="cdf"&&Ye("Invalid density method: "+o),!e.extent&&!r.data&&Ye("Missing density extent parameter."),o=r[o];const a=e.as||["value","density"],u=e.extent||qf(r.data()),l=R6(o,u,i,s).map(c=>{const d={};return d[a[0]]=c[0],d[a[1]]=c[1],xr(d)});this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function lwt(e){return()=>e.materialize(e.SOURCE).source}function hCe(e,t){return e?e.map((n,r)=>t[r]||Oi(n)):null}function qG(e,t,n){const r=[],i=d=>d(u);let s,o,a,u,l,c;if(t==null)r.push(e.map(n));else for(s={},o=0,a=e.length;o<a;++o)u=e[o],l=t.map(i),c=s[l],c||(s[l]=c=[],c.dims=l,r.push(c)),c.push(n(u));return r}const pCe="bin";function WG(e){He.call(this,null,e)}WG.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:pCe}]};const cwt=(e,t)=>LS(qf(e,t))/30;Et(WG,He,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;const n=t.materialize(t.SOURCE).source,r=qG(t.source,e.groupby,ga),i=e.smooth||!1,s=e.field,o=e.step||cwt(n,s),a=ob((p,m)=>s(p)-s(m)),u=e.as||pCe,l=r.length;let c=1/0,d=-1/0,f=0,h;for(;f<l;++f){const p=r[f].sort(a);h=-1;for(const m of K2e(p,o,i,s))m<c&&(c=m),m>d&&(d=m),p[++h][u]=m}return this.value={start:c,stop:d,step:o},t.reflow(!0).modifies(u)}});function mCe(e){zr.call(this,null,dwt,e),this.modified(!0)}Et(mCe,zr);function dwt(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:Lu(n=>t(n,e),la(t),Oi(t))}function GG(e){He.call(this,[void 0,void 0],e)}GG.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};Et(GG,He,{transform(e,t){const n=this.value,r=e.field,i=t.changed()||t.modified(r.fields)||e.modified("field");let s=n[0],o=n[1];if((i||s==null)&&(s=1/0,o=-1/0),t.visit(i?t.SOURCE:t.ADD,a=>{const u=aa(r(a));u!=null&&(u<s&&(s=u),u>o&&(o=u))}),!Number.isFinite(s)||!Number.isFinite(o)){let a=Oi(r);a&&(a=` for field "${a}"`),t.dataflow.warn(`Infinite extent${a}: [${s}, ${o}]`),s=o=void 0}this.value=[s,o]}});function YG(e,t){zr.call(this,e),this.parent=t,this.count=0}Et(YG,zr,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function D6(e){He.call(this,{},e),this._keys=pE();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let r=0,i=t.active;r<i;++r)n(t[r],r,t)}}Et(D6,He,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,r){const i=this.value;let s=Ot(i,e)&&i[e],o,a;return s?s.value.stamp<n.stamp&&(s.init(n),this.activate(s)):(a=r||(a=this._group[e])&&a.tuple,o=n.dataflow,s=new YG(n.fork(n.NO_SOURCE),this),o.add(s).connect(t(o,e,a)),i[e]=s,this.activate(s)),s},clean(){const e=this.value;let t=0;for(const n in e)if(e[n].count===0){const r=e[n].detachSubflow;r&&r(),delete e[n],++t}if(t){const n=this._targets.filter(r=>r&&r.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,r=e?e.length:0;let i=0;for(;i<r;++i)t[i]=e[i];for(;i<n&&t[i]!=null;++i)t[i]=null;t.active=r},transform(e,t){const n=t.dataflow,r=e.key,i=e.subflow,s=this._keys,o=e.modified("key"),a=u=>this.subflow(u,i,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,u=>{const l=Jt(u),c=s.get(l);c!==void 0&&(s.delete(l),a(c).rem(u))}),t.visit(t.ADD,u=>{const l=r(u);s.set(Jt(u),l),a(l).add(u)}),o||t.modified(r.fields)?t.visit(t.MOD,u=>{const l=Jt(u),c=s.get(l),d=r(u);c===d?a(d).mod(u):(s.set(l,d),a(c).rem(u),a(d).add(u))}):t.changed(t.MOD)&&t.visit(t.MOD,u=>{a(s.get(Jt(u))).mod(u)}),o&&t.visit(t.REFLOW,u=>{const l=Jt(u),c=s.get(l),d=r(u);c!==d&&(s.set(l,d),a(c).rem(u),a(d).add(u))}),t.clean()?n.runAfter(()=>{this.clean(),s.clean()}):s.empty>n.cleanThreshold&&n.runAfter(s.clean),t}});function gCe(e){zr.call(this,null,fwt,e)}Et(gCe,zr);function fwt(e){return this.value&&!e.modified()?this.value:Qe(e.name)?Rt(e.name).map(t=>nc(t)):nc(e.name,e.as)}function KG(e){He.call(this,pE(),e)}KG.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};Et(KG,He,{transform(e,t){const n=t.dataflow,r=this.value,i=t.fork(),s=i.add,o=i.rem,a=i.mod,u=e.expr;let l=!0;t.visit(t.REM,d=>{const f=Jt(d);r.has(f)?r.delete(f):o.push(d)}),t.visit(t.ADD,d=>{u(d,e)?s.push(d):r.set(Jt(d),1)});function c(d){const f=Jt(d),h=u(d,e),p=r.get(f);h&&p?(r.delete(f),s.push(d)):!h&&!p?(r.set(f,1),o.push(d)):l&&h&&!p&&a.push(d)}return t.visit(t.MOD,c),e.modified()&&(l=!1,t.visit(t.REFLOW,c)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i}});function XG(e){He.call(this,[],e)}XG.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};Et(XG,He,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=hCe(r,e.as||[]),s=e.index||null,o=i.length;return n.rem=this.value,t.visit(t.SOURCE,a=>{const u=r.map(p=>p(a)),l=u.reduce((p,m)=>Math.max(p,m.length),0);let c=0,d,f,h;for(;c<l;++c){for(f=vG(a),d=0;d<o;++d)f[i[d]]=(h=u[d][c])==null?null:h;s&&(f[s]=c),n.add.push(f)}}),this.value=n.source=n.add,s&&n.modifies(s),n.modifies(i)}});function QG(e){He.call(this,[],e)}QG.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};Et(QG,He,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=r.map(Oi),s=e.as||["key","value"],o=s[0],a=s[1],u=r.length;return n.rem=this.value,t.visit(t.SOURCE,l=>{for(let c=0,d;c<u;++c)d=vG(l),d[o]=i[c],d[a]=r[c](l),n.add.push(d)}),this.value=n.source=n.add,n.modifies(s)}});function JG(e){He.call(this,null,e)}JG.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};Et(JG,He,{transform(e,t){const n=e.expr,r=e.as,i=e.modified(),s=e.initonly?t.ADD:i?t.SOURCE:t.modified(n.fields)||t.modified(r)?t.ADD_MOD:t.ADD;return i&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(s,o=>o[r]=n(o,e))}});function yCe(e){He.call(this,[],e)}Et(yCe,He,{transform(e,t){const n=t.fork(t.ALL),r=e.generator;let i=this.value,s=e.size-i.length,o,a,u;if(s>0){for(o=[];--s>=0;)o.push(u=xr(r(e))),i.push(u);n.add=n.add.length?n.materialize(n.ADD).add.concat(o):o}else a=i.slice(0,-s),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(a):a,i=i.slice(-s);return n.source=this.value=i,n}});const CI={value:"value",median:Cxe,mean:zot,min:sj,max:jy},hwt=[];function ZG(e){He.call(this,[],e)}ZG.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function pwt(e){var t=e.method||CI.value,n;if(CI[t]==null)Ye("Unrecognized imputation method: "+t);else return t===CI.value?(n=e.value!==void 0?e.value:0,()=>n):CI[t]}function mwt(e){const t=e.field;return n=>n?t(n):NaN}Et(ZG,He,{transform(e,t){var n=t.fork(t.ALL),r=pwt(e),i=mwt(e),s=Oi(e.field),o=Oi(e.key),a=(e.groupby||[]).map(Oi),u=gwt(t.source,e.groupby,e.key,e.keyvals),l=[],c=this.value,d=u.domain.length,f,h,p,m,y,v,b,w,E,_;for(y=0,w=u.length;y<w;++y)for(f=u[y],p=f.values,h=NaN,b=0;b<d;++b)if(f[b]==null){for(m=u.domain[b],_={_impute:!0},v=0,E=p.length;v<E;++v)_[a[v]]=p[v];_[o]=m,_[s]=Number.isNaN(h)?h=r(f,i):h,l.push(xr(_))}return l.length&&(n.add=n.materialize(n.ADD).add.concat(l)),c.length&&(n.rem=n.materialize(n.REM).rem.concat(c)),this.value=l,n}});function gwt(e,t,n,r){var i=v=>v(y),s=[],o=r?r.slice():[],a={},u={},l,c,d,f,h,p,m,y;for(o.forEach((v,b)=>a[v]=b+1),f=0,m=e.length;f<m;++f)y=e[f],p=n(y),h=a[p]||(a[p]=o.push(p)),c=(l=t?t.map(i):hwt)+"",(d=u[c])||(d=u[c]=[],s.push(d),d.values=l),d[h-1]=y;return s.domain=o,s}function eY(e){j0.call(this,e)}eY.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:jS},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};Et(eY,j0,{transform(e,t){const n=this,r=e.modified();let i;return n.value&&(r||t.modified(n._inputs,!0))?(i=n.value=r?n.init(e):{},t.visit(t.SOURCE,s=>n.add(s))):(i=n.value=n.value||this.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),n.changes(),t.visit(t.SOURCE,s=>{Cn(s,i[n.cellkey(s)].tuple)}),t.reflow(r).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,r;for(n=0,r=this._alen;n<r;++n)this.celltuple(e[n]),e[n]=null;for(n=0,r=this._mlen;n<r;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function tY(e){He.call(this,null,e)}tY.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};Et(tY,He,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=qG(r,e.groupby,e.field),s=(e.groupby||[]).map(Oi),o=e.bandwidth,a=e.cumulative?"cdf":"pdf",u=e.as||["value","density"],l=[];let c=e.extent,d=e.steps||e.minsteps||25,f=e.steps||e.maxsteps||200;a!=="pdf"&&a!=="cdf"&&Ye("Invalid density method: "+a),e.resolve==="shared"&&(c||(c=qf(r,e.field)),d=f=e.steps||f),i.forEach(h=>{const p=AG(h,o)[a],m=e.counts?h.length:1,y=c||qf(h);R6(p,y,d,f).forEach(v=>{const b={};for(let w=0;w<s.length;++w)b[s[w]]=h.dims[w];b[u[0]]=v[0],b[u[1]]=v[1]*m,l.push(xr(b))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function bCe(e){zr.call(this,null,ywt,e)}Et(bCe,zr);function ywt(e){return this.value&&!e.modified()?this.value:uG(e.fields,e.flat)}function vCe(e){He.call(this,[],e),this._pending=null}Et(vCe,He,{transform(e,t){const n=t.dataflow;return this._pending?rF(this,t,this._pending):bwt(e)?t.StopPropagation:e.values?rF(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(i=>(this._pending=Rt(i.data),s=>s.touch(this)))}:n.request(e.url,e.format).then(r=>rF(this,t,Rt(r.data)))}});function bwt(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function rF(e,t,n){n.forEach(xr);const r=t.fork(t.NO_FIELDS&t.NO_SOURCE);return r.rem=e.value,e.value=r.source=r.add=n,e._pending=null,r.rem.length&&r.clean(!0),r}function nY(e){He.call(this,{},e)}nY.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};Et(nY,He,{transform(e,t){const n=e.fields,r=e.index,i=e.values,s=e.default==null?null:e.default,o=e.modified(),a=n.length;let u=o?t.SOURCE:t.ADD,l=t,c=e.as,d,f,h;return i?(f=i.length,a>1&&!c&&Ye('Multi-field lookup requires explicit "as" parameter.'),c&&c.length!==a*f&&Ye('The "as" parameter has too few output field names.'),c=c||i.map(Oi),d=function(p){for(var m=0,y=0,v,b;m<a;++m)if(b=r.get(n[m](p)),b==null)for(v=0;v<f;++v,++y)p[c[y]]=s;else for(v=0;v<f;++v,++y)p[c[y]]=i[v](b)}):(c||Ye("Missing output field names."),d=function(p){for(var m=0,y;m<a;++m)y=r.get(n[m](p)),p[c[m]]=y??s}),o?l=t.reflow(!0):(h=n.some(p=>t.modified(p.fields)),u|=h?t.MOD:0),t.visit(u,d),l.modifies(c)}});function xCe(e){zr.call(this,null,vwt,e)}Et(xCe,zr);function vwt(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let r=1/0,i=-1/0,s,o;for(s=0;s<n;++s)o=t[s],o[0]<r&&(r=o[0]),o[1]>i&&(i=o[1]);return[r,i]}function wCe(e){zr.call(this,null,xwt,e)}Et(wCe,zr);function xwt(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function ECe(e){He.call(this,null,e)}Et(ECe,He,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function rY(e){j0.call(this,e)}rY.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:jS,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};Et(rY,j0,{_transform:j0.prototype.transform,transform(e,t){return this._transform(wwt(e,t),t)}});function wwt(e,t){const n=e.field,r=e.value,i=(e.op==="count"?"__count__":e.op)||"sum",s=la(n).concat(la(r)),o=_wt(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:o.map(()=>i),fields:o.map(a=>Ewt(a,n,r,s)),as:o.map(a=>a+""),modified:e.modified.bind(e)}}function Ewt(e,t,n,r){return Lu(i=>t(i)===e?n(i):NaN,r,e+"")}function _wt(e,t,n){const r={},i=[];return n.visit(n.SOURCE,s=>{const o=e(s);r[o]||(r[o]=1,i.push(o))}),i.sort(MS),t?i.slice(0,t):i}function _Ce(e){D6.call(this,e)}Et(_Ce,D6,{transform(e,t){const n=e.subflow,r=e.field,i=s=>this.subflow(Jt(s),n,t,s);return(e.modified("field")||r&&t.modified(la(r)))&&Ye("PreFacet does not support field modification."),this.initTargets(),r?(t.visit(t.MOD,s=>{const o=i(s);r(s).forEach(a=>o.mod(a))}),t.visit(t.ADD,s=>{const o=i(s);r(s).forEach(a=>o.add(xr(a)))}),t.visit(t.REM,s=>{const o=i(s);r(s).forEach(a=>o.rem(a))})):(t.visit(t.MOD,s=>i(s).mod(s)),t.visit(t.ADD,s=>i(s).add(s)),t.visit(t.REM,s=>i(s).rem(s))),t.clean()&&t.runAfter(()=>this.clean()),t}});function iY(e){He.call(this,null,e)}iY.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};Et(iY,He,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=hCe(e.fields,e.as||[]),s=r?(a,u)=>Twt(a,u,r,i):_6;let o;return this.value?o=this.value:(t=t.addAll(),o=this.value={}),t.visit(t.REM,a=>{const u=Jt(a);n.rem.push(o[u]),o[u]=null}),t.visit(t.ADD,a=>{const u=s(a,xr({}));o[Jt(a)]=u,n.add.push(u)}),t.visit(t.MOD,a=>{n.mod.push(s(a,o[Jt(a)]))}),n}});function Twt(e,t,n,r){for(let i=0,s=n.length;i<s;++i)t[r[i]]=n[i](e);return t}function TCe(e){He.call(this,null,e)}Et(TCe,He,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function sY(e){He.call(this,null,e)}sY.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const Cwt=1e-14;Et(sY,He,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const i=t.materialize(t.SOURCE).source,s=qG(i,e.groupby,e.field),o=(e.groupby||[]).map(Oi),a=[],u=e.step||.01,l=e.probs||Tu(u/2,1-Cwt,u),c=l.length;return s.forEach(d=>{const f=EG(d,l);for(let h=0;h<c;++h){const p={};for(let m=0;m<o.length;++m)p[o[m]]=d.dims[m];p[r[0]]=l[h],p[r[1]]=f[h],a.push(xr(p))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=a,n}});function CCe(e){He.call(this,null,e)}Et(CCe,He,{transform(e,t){let n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,i=>{const s=Jt(i);n.rem.push(r[s]),r[s]=null}),t.visit(t.ADD,i=>{const s=vG(i);r[Jt(i)]=s,n.add.push(s)}),t.visit(t.MOD,i=>{const s=r[Jt(i)];for(const o in i)s[o]=i[o],n.modifies(o);n.mod.push(s)})),n}});function oY(e){He.call(this,[],e),this.count=0}oY.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};Et(oY,He,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.modified("size"),i=e.size,s=this.value.reduce((c,d)=>(c[Jt(d)]=1,c),{});let o=this.value,a=this.count,u=0;function l(c){let d,f;o.length<i?o.push(c):(f=~~((a+1)*sc()),f<o.length&&f>=u&&(d=o[f],s[Jt(d)]&&n.rem.push(d),o[f]=c)),++a}if(t.rem.length&&(t.visit(t.REM,c=>{const d=Jt(c);s[d]&&(s[d]=-1,n.rem.push(c)),--a}),o=o.filter(c=>s[Jt(c)]!==-1)),(t.rem.length||r)&&o.length<i&&t.source&&(u=a=o.length,t.visit(t.SOURCE,c=>{s[Jt(c)]||l(c)}),u=-1),r&&o.length>i){const c=o.length-i;for(let d=0;d<c;++d)s[Jt(o[d])]=-1,n.rem.push(o[d]);o=o.slice(c)}return t.mod.length&&t.visit(t.MOD,c=>{s[Jt(c)]&&n.mod.push(c)}),t.add.length&&t.visit(t.ADD,l),(t.add.length||u<0)&&(n.add=o.filter(c=>!s[Jt(c)])),this.count=a,this.value=n.source=o,n}});function aY(e){He.call(this,null,e)}aY.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};Et(aY,He,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),r=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=Tu(e.start,e.stop,e.step||1).map(i=>{const s={};return s[r]=i,xr(s)}),n.add=t.add.concat(this.value),n}});function SCe(e){He.call(this,null,e),this.modified(!0)}Et(SCe,He,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function uY(e){He.call(this,null,e)}const ACe=["unit0","unit1"];uY.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:fG,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:ACe}]};Et(uY,He,{transform(e,t){const n=e.field,r=e.interval!==!1,i=e.timezone==="utc",s=this._floor(e,t),o=(i?gE:mE)(s.unit).offset,a=e.as||ACe,u=a[0],l=a[1],c=s.step;let d=s.start||1/0,f=s.stop||-1/0,h=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(la(n)))&&(t=t.reflow(!0),h=t.SOURCE,d=1/0,f=-1/0),t.visit(h,p=>{const m=n(p);let y,v;m==null?(p[u]=null,r&&(p[l]=null)):(p[u]=y=v=s(m),r&&(p[l]=v=o(y,c)),y<d&&(d=y),v>f&&(f=v))}),s.start=d,s.stop=f,t.modifies(r?a:u)},_floor(e,t){const n=e.timezone==="utc",{units:r,step:i}=e.units?{units:e.units,step:e.step||1}:T2e({extent:e.extent||qf(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),s=hG(r),o=this.value||{},a=(n?m2e:p2e)(s,i);return a.unit=Wn(s),a.units=s,a.step=i,a.start=o.start,a.stop=o.stop,this.value=a}});function kCe(e){He.call(this,pE(),e)}Et(kCe,He,{transform(e,t){const n=t.dataflow,r=e.field,i=this.value,s=a=>i.set(r(a),a);let o=!0;return e.modified("field")||t.modified(r.fields)?(i.clear(),t.visit(t.SOURCE,s)):t.changed()?(t.visit(t.REM,a=>i.delete(r(a))),t.visit(t.ADD,s)):o=!1,this.modified(o),i.empty>n.cleanThreshold&&n.runAfter(i.clean),t.fork()}});function ICe(e){He.call(this,null,e)}Et(ICe,He,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(ob(e.sort)):t.source).map(e.field))}});function Swt(e,t,n,r){const i=mC[e](t,n);return{init:i.init||Km,update:function(s,o){o[r]=i.next(s)}}}const mC={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){const e=mC.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,r=t.compare;let i=t.index;if(e<i){for(;i+1<n.length&&!r(n[i],n[i+1]);)++i;e=i}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||Ye("ntile num must be greater than zero.");const n=mC.cume_dist(),r=n.next;return{init:n.init,next:i=>Math.ceil(t*r(i))}},lag:function(e,t){return t=+t||1,{next:n=>{const r=n.index-t;return r>=0?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||Ye("nth_value nth must be greater than zero."),{next:n=>{const r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const r=e(n.data[n.index]);return r!=null?t=r:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:r=>{const i=r.data;return r.index<=n?t:(n=Awt(e,i,r.index))<0?(n=i.length,t=null):t=e(i[n])}}}};function Awt(e,t,n){for(let r=t.length;n<r;++n)if(e(t[n])!=null)return n;return-1}const kwt=Object.keys(mC);function RCe(e){const t=Rt(e.ops),n=Rt(e.fields),r=Rt(e.params),i=Rt(e.aggregate_params),s=Rt(e.as),o=this.outputs=[],a=this.windows=[],u={},l={},c=[],d=[];let f=!0;function h(p){Rt(la(p)).forEach(m=>u[m]=1)}h(e.sort),t.forEach((p,m)=>{const y=n[m],v=r[m],b=i[m]||null,w=Oi(y),E=sCe(p,w,s[m]);if(h(y),o.push(E),Ot(mC,p))a.push(Swt(p,y,v,E));else{if(y==null&&p!=="count"&&Ye("Null aggregate field specified."),p==="count"){c.push(E);return}f=!1;let _=l[w];_||(_=l[w]=[],_.field=y,d.push(_)),_.push(oCe(p,b,E))}}),(c.length||d.length)&&(this.cell=Iwt(d,c,f)),this.inputs=Object.keys(u)}const DCe=RCe.prototype;DCe.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};DCe.update=function(e,t){const n=this.cell,r=this.windows,i=e.data,s=r&&r.length;let o;if(n){for(o=e.p0;o<e.i0;++o)n.rem(i[o]);for(o=e.p1;o<e.i1;++o)n.add(i[o]);n.set(t)}for(o=0;o<s;++o)r[o].update(e,t)};function Iwt(e,t,n){e=e.map(u=>uCe(u,u.field));const r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,s=r.agg=Array(i),o=0;o<i;++o)s[o]=new e[o](r);if(r.store)var a=r.data=new BG;return r.add=function(u){if(r.num+=1,!n){a&&a.add(u);for(let l=0;l<i;++l)s[l].add(s[l].get(u),u)}},r.rem=function(u){if(r.num-=1,!n){a&&a.rem(u);for(let l=0;l<i;++l)s[l].rem(s[l].get(u),u)}},r.set=function(u){let l,c;for(a&&a.values(),l=0,c=t.length;l<c;++l)u[t[l]]=r.num;if(!n)for(l=0,c=s.length;l<c;++l)s[l].set(u)},r.init=function(){r.num=0,a&&a.reset();for(let u=0;u<i;++u)s[u].init()},r}function lY(e){He.call(this,{},e),this._mlen=0,this._mods=[]}lY.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:kwt.concat(jS)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};Et(lY,He,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),r=ob(e.sort),i=m7(e.groupby),s=a=>this.group(i(a));let o=this.state;(!o||n)&&(o=this.state=new RCe(e)),n||t.modified(o.inputs)?(this.value={},t.visit(t.SOURCE,a=>s(a).add(a))):(t.visit(t.REM,a=>s(a).remove(a)),t.visit(t.ADD,a=>s(a).add(a)));for(let a=0,u=this._mlen;a<u;++a)Rwt(this._mods[a],o,r,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(o.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=lCe(Jt),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function Rwt(e,t,n,r){const i=r.sort,s=i&&!r.ignorePeers,o=r.frame||[null,0],a=e.data(n),u=a.length,l=s?sE(i):null,c={i0:0,i1:0,p0:0,p1:0,index:0,data:a,compare:i||ya(-1)};t.init();for(let d=0;d<u;++d)Dwt(c,o,d,u),s&&Pwt(c,l),t.update(c,a[d])}function Dwt(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function Pwt(e,t){const n=e.i0,r=e.i1-1,i=e.compare,s=e.data,o=s.length-1;n>0&&!i(s[n],s[n-1])&&(e.i0=t.left(s,s[n])),r<o&&!i(s[r],s[r+1])&&(e.i1=t.right(s,s[r]))}const Nwt=Object.freeze(Object.defineProperty({__proto__:null,aggregate:j0,bin:jG,collect:zG,compare:cCe,countpattern:UG,cross:VG,density:HG,dotbin:WG,expression:mCe,extent:GG,facet:D6,field:gCe,filter:KG,flatten:XG,fold:QG,formula:JG,generate:yCe,impute:ZG,joinaggregate:eY,kde:tY,key:bCe,load:vCe,lookup:nY,multiextent:xCe,multivalues:wCe,params:ECe,pivot:rY,prefacet:_Ce,project:iY,proxy:TCe,quantile:sY,relay:CCe,sample:oY,sequence:aY,sieve:SCe,subflow:YG,timeunit:uY,tupleindex:kCe,values:ICe,window:lY},Symbol.toStringTag,{value:"Module"}));function b0(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const Owt=()=>typeof Image<"u"?Image:null;function cY(e,t,n){const r=e-t+n*2;return e?r>0?r:1:0}const $wt="identity",Jx="linear",$p="log",zS="pow",US="sqrt",P6="symlog",h1="time",p1="utc",If="sequential",bE="diverging",Zx="quantile",N6="quantize",O6="threshold",dY="ordinal",g7="point",PCe="band",fY="bin-ordinal",Ps="continuous",VS="discrete",HS="discretizing",gc="interpolating",hY="temporal";function Mwt(e){return function(t){let n=t[0],r=t[1],i;return r<n&&(i=n,n=r,r=i),[e.invert(n),e.invert(r)]}}function Lwt(e){return function(t){const n=e.range();let r=t[0],i=t[1],s=-1,o,a,u,l;for(i<r&&(a=r,r=i,i=a),u=0,l=n.length;u<l;++u)n[u]>=r&&n[u]<=i&&(s<0&&(s=u),o=u);if(!(s<0))return r=e.invertExtent(n[s]),i=e.invertExtent(n[o]),[r[0]===void 0?r[1]:r[0],i[1]===void 0?i[0]:i[1]]}}function pY(){const e=GO().unknown(void 0),t=e.domain,n=e.range;let r=[0,1],i,s,o=!1,a=0,u=0,l=.5;delete e.unknown;function c(){const d=t().length,f=r[1]<r[0],h=r[1-f],p=cY(d,a,u);let m=r[f-0];i=(h-m)/(p||1),o&&(i=Math.floor(i)),m+=(h-m-i*(d-a))*l,s=i*(1-a),o&&(m=Math.round(m),s=Math.round(s));const y=Tu(d).map(v=>m+i*v);return n(f?y.reverse():y)}return e.domain=function(d){return arguments.length?(t(d),c()):t()},e.range=function(d){return arguments.length?(r=[+d[0],+d[1]],c()):r.slice()},e.rangeRound=function(d){return r=[+d[0],+d[1]],o=!0,c()},e.bandwidth=function(){return s},e.step=function(){return i},e.round=function(d){return arguments.length?(o=!!d,c()):o},e.padding=function(d){return arguments.length?(u=Math.max(0,Math.min(1,d)),a=u,c()):a},e.paddingInner=function(d){return arguments.length?(a=Math.max(0,Math.min(1,d)),c()):a},e.paddingOuter=function(d){return arguments.length?(u=Math.max(0,Math.min(1,d)),c()):u},e.align=function(d){return arguments.length?(l=Math.max(0,Math.min(1,d)),c()):l},e.invertRange=function(d){if(d[0]==null||d[1]==null)return;const f=r[1]<r[0],h=f?n().reverse():n(),p=h.length-1;let m=+d[0],y=+d[1],v,b,w;if(!(m!==m||y!==y)&&(y<m&&(w=m,m=y,y=w),!(y<h[0]||m>r[1-f])))return v=Math.max(0,O0(h,m)-1),b=m===y?v:O0(h,y)-1,m-h[v]>s+1e-10&&++v,f&&(w=v,v=p-b,b=p-w),v>b?void 0:t().slice(v,b+1)},e.invert=function(d){const f=e.invertRange([d,d]);return f&&f[0]},e.copy=function(){return pY().domain(t()).range(r).round(o).paddingInner(a).paddingOuter(u).align(l)},c()}function NCe(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return NCe(t())},e}function Fwt(){return NCe(pY().paddingInner(1))}var Bwt=Array.prototype.map;function jwt(e){return Bwt.call(e,aa)}const zwt=Array.prototype.slice;function OCe(){let e=[],t=[];function n(r){return r==null||r!==r?void 0:t[(O0(e,r)-1)%t.length]}return n.domain=function(r){return arguments.length?(e=jwt(r),n):e.slice()},n.range=function(r){return arguments.length?(t=zwt.call(r),n):t.slice()},n.tickFormat=function(r,i){return TEe(e[0],Wn(e),r??10,i)},n.copy=function(){return OCe().domain(n.domain()).range(n.range())},n}const mN=new Map,$Ce=Symbol("vega_scale");function MCe(e){return e[$Ce]=!0,e}function $ue(e){return e&&e[$Ce]===!0}function Uwt(e,t,n){const r=function(){const s=t();return s.invertRange||(s.invertRange=s.invert?Mwt(s):s.invertExtent?Lwt(s):void 0),s.type=e,MCe(s)};return r.metadata=dd(Rt(n)),r}function mr(e,t,n){return arguments.length>1?(mN.set(e,Uwt(e,t,n)),this):LCe(e)?mN.get(e):void 0}mr($wt,CEe);mr(Jx,KO,Ps);mr($p,AEe,[Ps,$p]);mr(zS,SW,Ps);mr(US,ept,Ps);mr(P6,kEe,Ps);mr(h1,mmt,[Ps,hY]);mr(p1,gmt,[Ps,hY]);mr(If,DW,[Ps,gc]);mr(`${If}-${Jx}`,DW,[Ps,gc]);mr(`${If}-${$p}`,jEe,[Ps,gc,$p]);mr(`${If}-${zS}`,PW,[Ps,gc]);mr(`${If}-${US}`,ymt,[Ps,gc]);mr(`${If}-${P6}`,zEe,[Ps,gc]);mr(`${bE}-${Jx}`,UEe,[Ps,gc]);mr(`${bE}-${$p}`,VEe,[Ps,gc,$p]);mr(`${bE}-${zS}`,NW,[Ps,gc]);mr(`${bE}-${US}`,bmt,[Ps,gc]);mr(`${bE}-${P6}`,HEe,[Ps,gc]);mr(Zx,IEe,[HS,Zx]);mr(N6,u2,HS);mr(O6,REe,HS);mr(fY,OCe,[VS,HS]);mr(dY,GO,VS);mr(PCe,pY,VS);mr(g7,Fwt,VS);function LCe(e){return mN.has(e)}function ub(e,t){const n=mN.get(e);return n&&n.metadata[t]}function mY(e){return ub(e,Ps)}function ew(e){return ub(e,VS)}function y7(e){return ub(e,HS)}function FCe(e){return ub(e,$p)}function Vwt(e){return ub(e,hY)}function BCe(e){return ub(e,gc)}function jCe(e){return ub(e,Zx)}const Hwt=["clamp","base","constant","exponent"];function zCe(e,t){const n=t[0],r=Wn(t)-n;return function(i){return e(n+i*r)}}function $6(e,t,n){return sW(gY(t||"rgb",n),e)}function UCe(e,t){const n=new Array(t),r=t+1;for(let i=0;i<t;)n[i]=e(++i/r);return n}function VCe(e,t,n){const r=n-t;let i,s,o;return!r||!Number.isFinite(r)?ya(.5):(i=(s=e.type).indexOf("-"),s=i<0?s:s.slice(i+1),o=mr(s)().domain([t,n]).range([0,1]),Hwt.forEach(a=>e[a]?o[a](e[a]()):0),o)}function gY(e,t){const n=llt[qwt(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function qwt(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const Wwt={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},Gwt={accent:xmt,category10:vmt,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:wmt,observable10:Emt,paired:_mt,pastel1:Tmt,pastel2:Cmt,set1:Smt,set2:Amt,set3:kmt,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"};function HCe(e){if(Qe(e))return e;const t=e.length/6|0,n=new Array(t);for(let r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}function qCe(e,t){for(const n in e)yY(n,t(e[n]))}const Mue={};qCe(Gwt,HCe);qCe(Wwt,e=>$6(HCe(e)));function yY(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(Mue[e]=t,this):Mue[e]}const ZD="symbol",Ywt="discrete",Kwt="gradient",Xwt=e=>Qe(e)?e.map(t=>String(t)):String(e),Qwt=(e,t)=>e[1]-t[1],Jwt=(e,t)=>t[1]-e[1];function bY(e,t,n){let r;return pr(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(LS(e.domain())/n||1)+1))),kt(t)&&(r=t.step,t=t.interval),It(t)&&(t=e.type===h1?mE(t):e.type==p1?gE(t):Ye("Only time and utc scales accept interval strings."),r&&(t=t.every(r))),t}function WCe(e,t,n){let r=e.range(),i=r[0],s=Wn(r),o=Qwt;if(i>s&&(r=s,s=i,i=r,o=Jwt),i=Math.floor(i),s=Math.ceil(s),t=t.map(a=>[a,e(a)]).filter(a=>i<=a[1]&&a[1]<=s).sort(o).map(a=>a[0]),n>0&&t.length>1){const a=[t[0],Wn(t)];for(;t.length>n&&t.length>=3;)t=t.filter((u,l)=>!(l%2));t.length<3&&(t=a)}return t}function vY(e,t){return e.bins?WCe(e,e.bins,t):e.ticks?e.ticks(t):e.domain()}function GCe(e,t,n,r,i,s){const o=t.type;let a=Xwt;if(o===h1||i===h1)a=e.timeFormat(r);else if(o===p1||i===p1)a=e.utcFormat(r);else if(FCe(o)){const u=e.formatFloat(r);if(s||t.bins)a=u;else{const l=YCe(t,n,!1);a=c=>l(c)?u(c):""}}else if(t.tickFormat){const u=t.domain();a=e.formatSpan(u[0],u[u.length-1],n,r)}else r&&(a=e.format(r));return a}function YCe(e,t,n){const r=vY(e,t),i=e.base(),s=Math.log(i),o=Math.max(1,i*t/r.length),a=u=>{let l=u/Math.pow(i,Math.round(Math.log(u)/s));return l*i<i-.5&&(l*=i),l<=o};return n?r.filter(a):a}const b7={[Zx]:"quantiles",[N6]:"thresholds",[O6]:"domain"},KCe={[Zx]:"quantiles",[N6]:"domain"};function XCe(e,t){return e.bins?tEt(e.bins):e.type===$p?YCe(e,t,!0):b7[e.type]?eEt(e[b7[e.type]]()):vY(e,t)}function Zwt(e,t,n){const r=t[KCe[t.type]](),i=r.length;let s=i>1?r[1]-r[0]:r[0],o;for(o=1;o<i;++o)s=Math.min(s,r[o]-r[o-1]);return e.formatSpan(0,s,3*10,n)}function eEt(e){const t=[-1/0].concat(e);return t.max=1/0,t}function tEt(e){const t=e.slice(0,-1);return t.max=Wn(e),t}const nEt=e=>b7[e.type]||e.bins;function QCe(e,t,n,r,i,s,o){const a=KCe[t.type]&&s!==h1&&s!==p1?Zwt(e,t,i):GCe(e,t,n,i,s,o);return r===ZD&&nEt(t)?rEt(a):r===Ywt?iEt(a):sEt(a)}const rEt=e=>(t,n,r)=>{const i=Lue(r[n+1],Lue(r.max,1/0)),s=Fue(t,e),o=Fue(i,e);return s&&o?s+"  "+o:o?"< "+o:" "+s},Lue=(e,t)=>e??t,iEt=e=>(t,n)=>n?e(t):null,sEt=e=>t=>e(t),Fue=(e,t)=>Number.isFinite(e)?t(e):null;function oEt(e){const t=e.domain(),n=t.length-1;let r=+t[0],i=+Wn(t),s=i-r;if(e.type===O6){const o=n?s/n:.1;r-=o,i+=o,s=i-r}return o=>(o-r)/s}function aEt(e,t,n,r){const i=r||t.type;return It(n)&&Vwt(i)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&i===h1?e.timeFormat("%A, %d %B %Y, %X"):!n&&i===p1?e.utcFormat("%A, %d %B %Y, %X UTC"):QCe(e,t,5,null,n,r,!0)}function JCe(e,t,n){n=n||{};const r=Math.max(3,n.maxlen||7),i=aEt(e,t,n.format,n.formatType);if(y7(t.type)){const s=XCe(t).slice(1).map(i),o=s.length;return`${o} boundar${o===1?"y":"ies"}: ${s.join(", ")}`}else if(ew(t.type)){const s=t.domain(),o=s.length,a=o>r?s.slice(0,r-2).map(i).join(", ")+", ending with "+s.slice(-1).map(i):s.map(i).join(", ");return`${o} value${o===1?"":"s"}: ${a}`}else{const s=t.domain();return`values from ${i(s[0])} to ${i(Wn(s))}`}}let ZCe=0;function uEt(){ZCe=0}const gN="p_";function xY(e){return e&&e.gradient}function eSe(e,t,n){const r=e.gradient;let i=e.id,s=r==="radial"?gN:"";return i||(i=e.id="gradient_"+ZCe++,r==="radial"?(e.x1=Wd(e.x1,.5),e.y1=Wd(e.y1,.5),e.r1=Wd(e.r1,0),e.x2=Wd(e.x2,.5),e.y2=Wd(e.y2,.5),e.r2=Wd(e.r2,.5),s=gN):(e.x1=Wd(e.x1,0),e.y1=Wd(e.y1,0),e.x2=Wd(e.x2,1),e.y2=Wd(e.y2,0))),t[i]=e,"url("+(n||"")+"#"+s+i+")"}function Wd(e,t){return e??t}function tSe(e,t){var n=[],r;return r={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(i,s){return n.push({offset:i,color:s}),r}}}const Bue={basis:{curve:Zmt},"basis-closed":{curve:e0t},"basis-open":{curve:t0t},bundle:{curve:n0t,tension:"beta",value:.85},cardinal:{curve:r0t,tension:"tension",value:0},"cardinal-open":{curve:s0t,tension:"tension",value:0},"cardinal-closed":{curve:i0t,tension:"tension",value:0},"catmull-rom":{curve:o0t,tension:"alpha",value:.5},"catmull-rom-closed":{curve:a0t,tension:"alpha",value:.5},"catmull-rom-open":{curve:u0t,tension:"alpha",value:.5},linear:{curve:$W},"linear-closed":{curve:l0t},monotone:{horizontal:d0t,vertical:c0t},natural:{curve:f0t},step:{curve:h0t},"step-after":{curve:m0t},"step-before":{curve:p0t}};function wY(e,t,n){var r=Ot(Bue,e)&&Bue[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&n!=null&&(i=i[r.tension](n))),i}const lEt={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},cEt=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,dEt=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,fEt=/^((\s+,?\s*)|(,\s*))/,hEt=/^[01]/;function tw(e){const t=[];return(e.match(cEt)||[]).forEach(r=>{let i=r[0];const s=i.toLowerCase(),o=lEt[s],a=pEt(s,o,r.slice(1).trim()),u=a.length;if(u<o||u&&u%o!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([i,...a.slice(0,o)]),u!==o){s==="m"&&(i=i==="M"?"L":"l");for(let l=o;l<u;l+=o)t.push([i,...a.slice(l,l+o)])}}),t}function pEt(e,t,n){const r=[];for(let i=0;t&&i<n.length;)for(let s=0;s<t;++s){const o=e==="a"&&(s===3||s===4)?hEt:dEt,a=n.slice(i).match(o);if(a===null)throw Error("Invalid SVG path, incorrect parameter type");i+=a[0].length,r.push(+a[0]);const u=n.slice(i).match(fEt);u!==null&&(i+=u[0].length)}return r}const z0=Math.PI/180,mEt=1e-14,xy=Math.PI/2,cf=Math.PI*2,dv=Math.sqrt(3)/2;var iF={},sF={},nSe=[].join;function gEt(e,t,n,r,i,s,o,a,u){const l=nSe.call(arguments);if(iF[l])return iF[l];const c=o*z0,d=Math.sin(c),f=Math.cos(c);n=Math.abs(n),r=Math.abs(r);const h=f*(a-e)*.5+d*(u-t)*.5,p=f*(u-t)*.5-d*(a-e)*.5;let m=h*h/(n*n)+p*p/(r*r);m>1&&(m=Math.sqrt(m),n*=m,r*=m);const y=f/n,v=d/n,b=-d/r,w=f/r,E=y*a+v*u,_=b*a+w*u,C=y*e+v*t,S=b*e+w*t;let R=1/((C-E)*(C-E)+(S-_)*(S-_))-.25;R<0&&(R=0);let N=Math.sqrt(R);s==i&&(N=-N);const O=.5*(E+C)-N*(S-_),F=.5*(_+S)+N*(C-E),$=Math.atan2(_-F,E-O);let q=Math.atan2(S-F,C-O)-$;q<0&&s===1?q+=cf:q>0&&s===0&&(q-=cf);const W=Math.ceil(Math.abs(q/(xy+.001))),J=[];for(let K=0;K<W;++K){const Z=$+K*q/W,U=$+(K+1)*q/W;J[K]=[O,F,Z,U,n,r,d,f]}return iF[l]=J}function yEt(e){const t=nSe.call(e);if(sF[t])return sF[t];var n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],u=e[6],l=e[7];const c=l*o,d=-u*a,f=u*o,h=l*a,p=Math.cos(i),m=Math.sin(i),y=Math.cos(s),v=Math.sin(s),b=.5*(s-i),w=Math.sin(b*.5),E=8/3*w*w/Math.sin(b),_=n+p-E*m,C=r+m+E*p,S=n+y,k=r+v,R=S+E*v,N=k-E*y;return sF[t]=[c*_+d*C,f*_+h*C,c*R+d*N,f*R+h*N,c*S+d*k,f*S+h*k]}const jl=["l",0,0,0,0,0,0,0];function bEt(e,t,n){const r=jl[0]=e[0];if(r==="a"||r==="A")jl[1]=t*e[1],jl[2]=n*e[2],jl[3]=e[3],jl[4]=e[4],jl[5]=e[5],jl[6]=t*e[6],jl[7]=n*e[7];else if(r==="h"||r==="H")jl[1]=t*e[1];else if(r==="v"||r==="V")jl[1]=n*e[1];else for(var i=1,s=e.length;i<s;++i)jl[i]=(i%2==1?t:n)*e[i];return jl}function gC(e,t,n,r,i,s){var o,a=null,u=0,l=0,c=0,d=0,f,h,p,m,y=0,v=0;n==null&&(n=0),r==null&&(r=0),i==null&&(i=1),s==null&&(s=i),e.beginPath&&e.beginPath();for(var b=0,w=t.length;b<w;++b){switch(o=t[b],(i!==1||s!==1)&&(o=bEt(o,i,s)),o[0]){case"l":u+=o[1],l+=o[2],e.lineTo(u+n,l+r);break;case"L":u=o[1],l=o[2],e.lineTo(u+n,l+r);break;case"h":u+=o[1],e.lineTo(u+n,l+r);break;case"H":u=o[1],e.lineTo(u+n,l+r);break;case"v":l+=o[1],e.lineTo(u+n,l+r);break;case"V":l=o[1],e.lineTo(u+n,l+r);break;case"m":u+=o[1],l+=o[2],y=u,v=l,e.moveTo(u+n,l+r);break;case"M":u=o[1],l=o[2],y=u,v=l,e.moveTo(u+n,l+r);break;case"c":f=u+o[5],h=l+o[6],c=u+o[3],d=l+o[4],e.bezierCurveTo(u+o[1]+n,l+o[2]+r,c+n,d+r,f+n,h+r),u=f,l=h;break;case"C":u=o[5],l=o[6],c=o[3],d=o[4],e.bezierCurveTo(o[1]+n,o[2]+r,c+n,d+r,u+n,l+r);break;case"s":f=u+o[3],h=l+o[4],c=2*u-c,d=2*l-d,e.bezierCurveTo(c+n,d+r,u+o[1]+n,l+o[2]+r,f+n,h+r),c=u+o[1],d=l+o[2],u=f,l=h;break;case"S":f=o[3],h=o[4],c=2*u-c,d=2*l-d,e.bezierCurveTo(c+n,d+r,o[1]+n,o[2]+r,f+n,h+r),u=f,l=h,c=o[1],d=o[2];break;case"q":f=u+o[3],h=l+o[4],c=u+o[1],d=l+o[2],e.quadraticCurveTo(c+n,d+r,f+n,h+r),u=f,l=h;break;case"Q":f=o[3],h=o[4],e.quadraticCurveTo(o[1]+n,o[2]+r,f+n,h+r),u=f,l=h,c=o[1],d=o[2];break;case"t":f=u+o[1],h=l+o[2],a[0].match(/[QqTt]/)===null?(c=u,d=l):a[0]==="t"?(c=2*u-p,d=2*l-m):a[0]==="q"&&(c=2*u-c,d=2*l-d),p=c,m=d,e.quadraticCurveTo(c+n,d+r,f+n,h+r),u=f,l=h,c=u+o[1],d=l+o[2];break;case"T":f=o[1],h=o[2],c=2*u-c,d=2*l-d,e.quadraticCurveTo(c+n,d+r,f+n,h+r),u=f,l=h;break;case"a":jue(e,u+n,l+r,[o[1],o[2],o[3],o[4],o[5],o[6]+u+n,o[7]+l+r]),u+=o[6],l+=o[7];break;case"A":jue(e,u+n,l+r,[o[1],o[2],o[3],o[4],o[5],o[6]+n,o[7]+r]),u=o[6],l=o[7];break;case"z":case"Z":u=y,l=v,e.closePath();break}a=o}}function jue(e,t,n,r){const i=gEt(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n);for(let s=0;s<i.length;++s){const o=yEt(i[s]);e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5])}}const zue=.5773502691896257,Uue={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,cf)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,i=n/2.5,s=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-s),e.lineTo(i,-s),e.lineTo(0,-n),e.lineTo(-i,-s),e.lineTo(-r,-s),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=dv*n,i=r-n*zue,s=n/4;e.moveTo(0,-r-i),e.lineTo(-s,r-i),e.lineTo(s,r-i),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=dv*n,i=r-n*zue;e.moveTo(0,-r-i),e.lineTo(-n,r-i),e.lineTo(n,r-i),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=dv*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=dv*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=dv*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=dv*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function rSe(e){return Ot(Uue,e)?Uue[e]:vEt(e)}var oF={};function vEt(e){if(!Ot(oF,e)){const t=tw(e);oF[e]={draw:function(n,r){gC(n,t,0,0,Math.sqrt(r)/2)}}}return oF[e]}const km=.448084975506;function xEt(e){return e.x}function wEt(e){return e.y}function EEt(e){return e.width}function _Et(e){return e.height}function Dh(e){return typeof e=="function"?e:()=>+e}function SI(e,t,n){return Math.max(t,Math.min(e,n))}function iSe(){var e=xEt,t=wEt,n=EEt,r=_Et,i=Dh(0),s=i,o=i,a=i,u=null;function l(c,d,f){var h,p=d??+e.call(this,c),m=f??+t.call(this,c),y=+n.call(this,c),v=+r.call(this,c),b=Math.min(y,v)/2,w=SI(+i.call(this,c),0,b),E=SI(+s.call(this,c),0,b),_=SI(+o.call(this,c),0,b),C=SI(+a.call(this,c),0,b);if(u||(u=h=zO()),w<=0&&E<=0&&_<=0&&C<=0)u.rect(p,m,y,v);else{var S=p+y,k=m+v;u.moveTo(p+w,m),u.lineTo(S-E,m),u.bezierCurveTo(S-km*E,m,S,m+km*E,S,m+E),u.lineTo(S,k-C),u.bezierCurveTo(S,k-km*C,S-km*C,k,S-C,k),u.lineTo(p+_,k),u.bezierCurveTo(p+km*_,k,p,k-km*_,p,k-_),u.lineTo(p,m+w),u.bezierCurveTo(p,m+km*w,p+km*w,m,p+w,m),u.closePath()}if(h)return u=null,h+""||null}return l.x=function(c){return arguments.length?(e=Dh(c),l):e},l.y=function(c){return arguments.length?(t=Dh(c),l):t},l.width=function(c){return arguments.length?(n=Dh(c),l):n},l.height=function(c){return arguments.length?(r=Dh(c),l):r},l.cornerRadius=function(c,d,f,h){return arguments.length?(i=Dh(c),s=d!=null?Dh(d):i,a=f!=null?Dh(f):i,o=h!=null?Dh(h):s,l):i},l.context=function(c){return arguments.length?(u=c??null,l):u},l}function sSe(){var e,t,n,r,i=null,s,o,a,u;function l(d,f,h){const p=h/2;if(s){var m=a-f,y=d-o;if(m||y){var v=Math.hypot(m,y),b=(m/=v)*u,w=(y/=v)*u,E=Math.atan2(y,m);i.moveTo(o-b,a-w),i.lineTo(d-m*p,f-y*p),i.arc(d,f,p,E-Math.PI,E),i.lineTo(o+b,a+w),i.arc(o,a,u,E,E+Math.PI)}else i.arc(d,f,p,0,cf);i.closePath()}else s=1;o=d,a=f,u=p}function c(d){var f,h=d.length,p,m=!1,y;for(i==null&&(i=y=zO()),f=0;f<=h;++f)!(f<h&&r(p=d[f],f,d))===m&&(m=!m)&&(s=0),m&&l(+e(p,f,d),+t(p,f,d),+n(p,f,d));if(y)return i=null,y+""||null}return c.x=function(d){return arguments.length?(e=d,c):e},c.y=function(d){return arguments.length?(t=d,c):t},c.size=function(d){return arguments.length?(n=d,c):n},c.defined=function(d){return arguments.length?(r=d,c):r},c.context=function(d){return arguments.length?(d==null?i=null:i=d,c):i},c}function qS(e,t){return e??t}const WS=e=>e.x||0,GS=e=>e.y||0,TEt=e=>e.width||0,CEt=e=>e.height||0,SEt=e=>(e.x||0)+(e.width||0),AEt=e=>(e.y||0)+(e.height||0),kEt=e=>e.startAngle||0,IEt=e=>e.endAngle||0,REt=e=>e.padAngle||0,DEt=e=>e.innerRadius||0,PEt=e=>e.outerRadius||0,NEt=e=>e.cornerRadius||0,OEt=e=>qS(e.cornerRadiusTopLeft,e.cornerRadius)||0,$Et=e=>qS(e.cornerRadiusTopRight,e.cornerRadius)||0,MEt=e=>qS(e.cornerRadiusBottomRight,e.cornerRadius)||0,LEt=e=>qS(e.cornerRadiusBottomLeft,e.cornerRadius)||0,FEt=e=>qS(e.size,64),BEt=e=>e.size||1,M6=e=>e.defined!==!1,jEt=e=>rSe(e.shape||"circle"),zEt=Xmt().startAngle(kEt).endAngle(IEt).padAngle(REt).innerRadius(DEt).outerRadius(PEt).cornerRadius(NEt),UEt=QEe().x(WS).y1(GS).y0(AEt).defined(M6),VEt=QEe().y(GS).x1(WS).x0(SEt).defined(M6),HEt=XEe().x(WS).y(GS).defined(M6),qEt=iSe().x(WS).y(GS).width(TEt).height(CEt).cornerRadius(OEt,$Et,MEt,LEt),WEt=Jmt().type(jEt).size(FEt),GEt=sSe().x(WS).y(GS).defined(M6).size(BEt);function EY(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function YEt(e,t){return zEt.context(e)(t)}function KEt(e,t){const n=t[0],r=n.interpolate||"linear";return(n.orient==="horizontal"?VEt:UEt).curve(wY(r,n.orient,n.tension)).context(e)(t)}function XEt(e,t){const n=t[0],r=n.interpolate||"linear";return HEt.curve(wY(r,n.orient,n.tension)).context(e)(t)}function vE(e,t,n,r){return qEt.context(e)(t,n,r)}function QEt(e,t){return(t.mark.shape||t.shape).context(e)(t)}function JEt(e,t){return WEt.context(e)(t)}function ZEt(e,t){return GEt.context(e)(t)}var oSe=1;function aSe(){oSe=1}function _Y(e,t,n){var r=t.clip,i=e._defs,s=t.clip_id||(t.clip_id="clip"+oSe++),o=i.clipping[s]||(i.clipping[s]={id:s});return Sn(r)?o.path=r(null):EY(n)?o.path=vE(null,n,0,0):(o.width=n.width||0,o.height=n.height||0),"url(#"+s+")"}function is(e){this.clear(),e&&this.union(e)}is.prototype={clone(){return new is(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints(e,t,n){var{x1:r,y1:i,x2:s,y2:o}=this,a=Math.cos(e),u=Math.sin(e),l=t-t*a+n*u,c=n-t*u-n*a;return[a*r-u*i+l,u*r+a*i+c,a*r-u*o+l,u*r+a*o+c,a*s-u*i+l,u*s+a*i+c,a*s-u*o+l,u*s+a*o+c]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function L6(e){this.mark=e,this.bounds=this.bounds||new is}function F6(e){L6.call(this,e),this.items=this.items||[]}Et(F6,L6);class uSe{constructor(t){this._pending=0,this._loader=t||x6()}pending(){return this._pending}sanitizeURL(t){const n=this;return Vue(n),n._loader.sanitize(t,{context:"href"}).then(r=>(N_(n),r)).catch(()=>(N_(n),null))}loadImage(t){const n=this,r=Owt();return Vue(n),n._loader.sanitize(t,{context:"image"}).then(i=>{const s=i.href;if(!s||!r)throw{url:s};const o=new r,a=Ot(i,"crossOrigin")?i.crossOrigin:"anonymous";return a!=null&&(o.crossOrigin=a),o.onload=()=>N_(n),o.onerror=()=>N_(n),o.src=s,o}).catch(i=>(N_(n),{complete:!1,width:0,height:0,src:i&&i.url||""}))}ready(){const t=this;return new Promise(n=>{function r(i){t.pending()?setTimeout(()=>{r(!0)},10):n(i)}r(!1)})}}function Vue(e){e._pending+=1}function N_(e){e._pending-=1}function Xp(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const r=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(r+(n?e_t(t,r):0))}return e}function e_t(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const t_t=cf-1e-8;let B6,eP,tP,Py,v7,nP,x7,w7;const Zm=(e,t)=>B6.add(e,t),rP=(e,t)=>Zm(eP=e,tP=t),Hue=e=>Zm(e,B6.y1),que=e=>Zm(B6.x1,e),wy=(e,t)=>v7*e+x7*t,Ey=(e,t)=>nP*e+w7*t,aF=(e,t)=>Zm(wy(e,t),Ey(e,t)),uF=(e,t)=>rP(wy(e,t),Ey(e,t));function YS(e,t){return B6=e,t?(Py=t*z0,v7=w7=Math.cos(Py),nP=Math.sin(Py),x7=-nP):(v7=w7=1,Py=nP=x7=0),n_t}const n_t={beginPath(){},closePath(){},moveTo:uF,lineTo:uF,rect(e,t,n,r){Py?(aF(e+n,t),aF(e+n,t+r),aF(e,t+r),uF(e,t)):(Zm(e+n,t+r),rP(e,t))},quadraticCurveTo(e,t,n,r){const i=wy(e,t),s=Ey(e,t),o=wy(n,r),a=Ey(n,r);Wue(eP,i,o,Hue),Wue(tP,s,a,que),rP(o,a)},bezierCurveTo(e,t,n,r,i,s){const o=wy(e,t),a=Ey(e,t),u=wy(n,r),l=Ey(n,r),c=wy(i,s),d=Ey(i,s);Gue(eP,o,u,c,Hue),Gue(tP,a,l,d,que),rP(c,d)},arc(e,t,n,r,i,s){if(r+=Py,i+=Py,eP=n*Math.cos(i)+e,tP=n*Math.sin(i)+t,Math.abs(i-r)>t_t)Zm(e-n,t-n),Zm(e+n,t+n);else{const o=l=>Zm(n*Math.cos(l)+e,n*Math.sin(l)+t);let a,u;if(o(r),o(i),i!==r)if(r=r%cf,r<0&&(r+=cf),i=i%cf,i<0&&(i+=cf),i<r&&(s=!s,a=r,r=i,i=a),s)for(i-=cf,a=r-r%xy,u=0;u<4&&a>i;++u,a-=xy)o(a);else for(a=r-r%xy+xy,u=0;u<4&&a<i;++u,a=a+xy)o(a)}}};function Wue(e,t,n,r){const i=(e-t)/(e+n-2*t);0<i&&i<1&&r(e+(t-e)*i)}function Gue(e,t,n,r,i){const s=r-e+3*t-3*n,o=e+n-2*t,a=e-t;let u=0,l=0,c;Math.abs(s)>mEt?(c=o*o+a*s,c>=0&&(c=Math.sqrt(c),u=(-o+c)/s,l=(-o-c)/s)):u=.5*a/o,0<u&&u<1&&i(Yue(u,e,t,n,r)),0<l&&l<1&&i(Yue(l,e,t,n,r))}function Yue(e,t,n,r,i){const s=1-e,o=s*s,a=e*e;return o*s*t+3*o*e*n+3*s*a*r+a*e*i}var v0=(v0=b0(1,1))?v0.getContext("2d"):null;const E7=new is;function TY(e){return function(t,n){if(!v0)return!0;e(v0,t),E7.clear().union(t.bounds).intersect(n).round();const{x1:r,y1:i,x2:s,y2:o}=E7;for(let a=i;a<=o;++a)for(let u=r;u<=s;++u)if(v0.isPointInPath(u,a))return!0;return!1}}function CY(e,t){return t.contains(e.x||0,e.y||0)}function lSe(e,t){const n=e.x||0,r=e.y||0,i=e.width||0,s=e.height||0;return t.intersects(E7.set(n,r,n+i,r+s))}function cSe(e,t){const n=e.x||0,r=e.y||0,i=e.x2!=null?e.x2:n,s=e.y2!=null?e.y2:r;return Vv(t,n,r,i,s)}function Vv(e,t,n,r,i){const{x1:s,y1:o,x2:a,y2:u}=e,l=r-t,c=i-n;let d=0,f=1,h,p,m,y;for(y=0;y<4;++y){if(y===0&&(h=-l,p=-(s-t)),y===1&&(h=l,p=a-t),y===2&&(h=-c,p=-(o-n)),y===3&&(h=c,p=u-n),Math.abs(h)<1e-10&&p<0)return!1;if(m=p/h,h<0){if(m>f)return!1;m>d&&(d=m)}else if(h>0){if(m<d)return!1;m<f&&(f=m)}}return!0}function nw(e,t){e.globalCompositeOperation=t.blend||"source-over"}function Nc(e,t){return e??t}function Kue(e,t){const n=t.length;for(let r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}function r_t(e,t,n){const r=n.width(),i=n.height();let s;if(t.gradient==="radial")s=e.createRadialGradient(n.x1+Nc(t.x1,.5)*r,n.y1+Nc(t.y1,.5)*i,Math.max(r,i)*Nc(t.r1,0),n.x1+Nc(t.x2,.5)*r,n.y1+Nc(t.y2,.5)*i,Math.max(r,i)*Nc(t.r2,.5));else{const o=Nc(t.x1,0),a=Nc(t.y1,0),u=Nc(t.x2,1),l=Nc(t.y2,0);if(o===u||a===l||r===i)s=e.createLinearGradient(n.x1+o*r,n.y1+a*i,n.x1+u*r,n.y1+l*i);else{const c=b0(Math.ceil(r),Math.ceil(i)),d=c.getContext("2d");return d.scale(r,i),d.fillStyle=Kue(d.createLinearGradient(o,a,u,l),t.stops),d.fillRect(0,0,r,i),e.createPattern(c,"no-repeat")}}return Kue(s,t.stops)}function dSe(e,t,n){return xY(n)?r_t(e,n,t.bounds):n}function yN(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=dSe(e,t,t.fill),!0):!1}var i_t=[];function rw(e,t,n){var r=(r=t.strokeWidth)!=null?r:1;return r<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=dSe(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||i_t),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function s_t(e,t){return e.zindex-t.zindex||e.index-t.index}function SY(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],r,i,s;for(i=0,s=t.length;i<s;++i)r=t[i],r.index=i,r.zindex&&n.push(r);return e.zdirty=!1,e.zitems=n.sort(s_t)}function hd(e,t){var n=e.items,r,i;if(!n||!n.length)return;const s=SY(e);if(s&&s.length){for(r=0,i=n.length;r<i;++r)n[r].zindex||t(n[r]);n=s}for(r=0,i=n.length;r<i;++r)t(n[r])}function bN(e,t){var n=e.items,r,i;if(!n||!n.length)return null;const s=SY(e);for(s&&s.length&&(n=s),i=n.length;--i>=0;)if(r=t(n[i]))return r;if(n===s){for(n=e.items,i=n.length;--i>=0;)if(!n[i].zindex&&(r=t(n[i])))return r}return null}function AY(e){return function(t,n,r){hd(n,i=>{(!r||r.intersects(i.bounds))&&fSe(e,t,i,i)})}}function o_t(e){return function(t,n,r){n.items.length&&(!r||r.intersects(n.bounds))&&fSe(e,t,n.items[0],n.items)}}function fSe(e,t,n,r){var i=n.opacity==null?1:n.opacity;i!==0&&(e(t,r)||(nw(t,n),n.fill&&yN(t,n,i)&&t.fill(),n.stroke&&rw(t,n,i)&&t.stroke()))}function j6(e){return e=e||rc,function(t,n,r,i,s,o){return r*=t.pixelRatio,i*=t.pixelRatio,bN(n,a=>{const u=a.bounds;if(!(u&&!u.contains(s,o)||!u)&&e(t,a,r,i,s,o))return a})}}function KS(e,t){return function(n,r,i,s){var o=Array.isArray(r)?r[0]:r,a=t??o.fill,u=o.stroke&&n.isPointInStroke,l,c;return u&&(l=o.strokeWidth,c=o.strokeCap,n.lineWidth=l??1,n.lineCap=c??"butt"),e(n,r)?!1:a&&n.isPointInPath(i,s)||u&&n.isPointInStroke(i,s)}}function kY(e){return j6(KS(e))}function Hy(e,t){return"translate("+e+","+t+")"}function IY(e){return"rotate("+e+")"}function a_t(e,t){return"scale("+e+","+t+")"}function hSe(e){return Hy(e.x||0,e.y||0)}function u_t(e){return Hy(e.x||0,e.y||0)+(e.angle?" "+IY(e.angle):"")}function l_t(e){return Hy(e.x||0,e.y||0)+(e.angle?" "+IY(e.angle):"")+(e.scaleX||e.scaleY?" "+a_t(e.scaleX||1,e.scaleY||1):"")}function RY(e,t,n){function r(o,a){o("transform",u_t(a)),o("d",t(null,a))}function i(o,a){return t(YS(o,a.angle),a),Xp(o,a).translate(a.x||0,a.y||0)}function s(o,a){var u=a.x||0,l=a.y||0,c=a.angle||0;o.translate(u,l),c&&o.rotate(c*=z0),o.beginPath(),t(o,a),c&&o.rotate(-c),o.translate(-u,-l)}return{type:e,tag:"path",nested:!1,attr:r,bound:i,draw:AY(s),pick:kY(s),isect:n||TY(s)}}var c_t=RY("arc",YEt);function d_t(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],r=e[0].orient==="horizontal"?"y":"x",i=e.length,s=1/0,o,a;--i>=0;)e[i].defined!==!1&&(a=Math.abs(e[i][r]-n),a<s&&(s=a,o=e[i]));return o}function f_t(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),r=e.length,i,s,o;--r>=0;)if(e[r].defined!==!1&&(i=e[r].x-t[0],s=e[r].y-t[1],o=i*i+s*s,o<n))return e[r];return null}function h_t(e,t){for(var n=e.length,r,i,s;--n>=0;)if(e[n].defined!==!1&&(r=e[n].x-t[0],i=e[n].y-t[1],s=r*r+i*i,r=e[n].size||1,s<r*r))return e[n];return null}function DY(e,t,n){function r(u,l){var c=l.mark.items;c.length&&u("d",t(null,c))}function i(u,l){var c=l.items;return c.length===0?u:(t(YS(u),c),Xp(u,c[0]))}function s(u,l){u.beginPath(),t(u,l)}const o=KS(s);function a(u,l,c,d,f,h){var p=l.items,m=l.bounds;return!p||!p.length||m&&!m.contains(f,h)?null:(c*=u.pixelRatio,d*=u.pixelRatio,o(u,p,c,d)?p[0]:null)}return{type:e,tag:"path",nested:!0,attr:r,bound:i,draw:o_t(s),pick:a,isect:CY,tip:n}}var p_t=DY("area",KEt,d_t);function m_t(e,t){var n=t.clip;e.save(),Sn(n)?(e.beginPath(),n(e),e.clip()):pSe(e,t.group)}function pSe(e,t){e.beginPath(),EY(t)?vE(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function mSe(e){const t=Nc(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function g_t(e,t){e("transform",hSe(t))}function gSe(e,t){const n=mSe(t);e("d",vE(null,t,n,n))}function y_t(e,t){e("class","background"),e("aria-hidden",!0),gSe(e,t)}function b_t(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?gSe(e,t):e("d","")}function v_t(e,t,n){const r=t.clip?_Y(n,t,t):null;e("clip-path",r)}function x_t(e,t){if(!t.clip&&t.items){const n=t.items,r=n.length;for(let i=0;i<r;++i)e.union(n[i].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),Xp(e,t),e.translate(t.x||0,t.y||0)}function yC(e,t,n,r){const i=mSe(t);e.beginPath(),vE(e,t,(n||0)+i,(r||0)+i)}const w_t=KS(yC),E_t=KS(yC,!1),__t=KS(yC,!0);function T_t(e,t,n,r){hd(t,i=>{const s=i.x||0,o=i.y||0,a=i.strokeForeground,u=i.opacity==null?1:i.opacity;(i.stroke||i.fill)&&u&&(yC(e,i,s,o),nw(e,i),i.fill&&yN(e,i,u)&&e.fill(),i.stroke&&!a&&rw(e,i,u)&&e.stroke()),e.save(),e.translate(s,o),i.clip&&pSe(e,i),n&&n.translate(-s,-o),hd(i,l=>{(l.marktype==="group"||r==null||r.includes(l.marktype))&&this.draw(e,l,n,r)}),n&&n.translate(s,o),e.restore(),a&&i.stroke&&u&&(yC(e,i,s,o),nw(e,i),rw(e,i,u)&&e.stroke())})}function C_t(e,t,n,r,i,s){if(t.bounds&&!t.bounds.contains(i,s)||!t.items)return null;const o=n*e.pixelRatio,a=r*e.pixelRatio;return bN(t,u=>{let l,c,d;const f=u.bounds;if(f&&!f.contains(i,s))return;c=u.x||0,d=u.y||0;const h=c+(u.width||0),p=d+(u.height||0),m=u.clip;if(m&&(i<c||i>h||s<d||s>p))return;if(e.save(),e.translate(c,d),c=i-c,d=s-d,m&&EY(u)&&!__t(e,u,o,a))return e.restore(),null;const y=u.strokeForeground,v=t.interactive!==!1;return v&&y&&u.stroke&&E_t(e,u,o,a)?(e.restore(),u):(l=bN(u,b=>S_t(b,c,d)?this.pick(b,n,r,c,d):null),!l&&v&&(u.fill||!y&&u.stroke)&&w_t(e,u,o,a)&&(l=u),e.restore(),l||null)})}function S_t(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var A_t={type:"group",tag:"g",nested:!1,attr:g_t,bound:x_t,draw:T_t,pick:C_t,isect:lSe,content:v_t,background:y_t,foreground:b_t},bC={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function PY(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(r=>{e.image=r,e.image.url=e.url})),n}function NY(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function OY(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function z6(e,t){return e==="center"?t/2:e==="right"?t:0}function U6(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function k_t(e,t,n){const r=PY(t,n),i=NY(t,r),s=OY(t,r),o=(t.x||0)-z6(t.align,i),a=(t.y||0)-U6(t.baseline,s),u=!r.src&&r.toDataURL?r.toDataURL():r.src||"";e("href",u,bC["xmlns:xlink"],"xlink:href"),e("transform",Hy(o,a)),e("width",i),e("height",s),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function I_t(e,t){const n=t.image,r=NY(t,n),i=OY(t,n),s=(t.x||0)-z6(t.align,r),o=(t.y||0)-U6(t.baseline,i);return e.set(s,o,s+r,o+i)}function R_t(e,t,n){hd(t,r=>{if(n&&!n.intersects(r.bounds))return;const i=PY(r,this);let s=NY(r,i),o=OY(r,i);if(s===0||o===0)return;let a=(r.x||0)-z6(r.align,s),u=(r.y||0)-U6(r.baseline,o),l,c,d,f;r.aspect!==!1&&(c=i.width/i.height,d=r.width/r.height,c===c&&d===d&&c!==d&&(d<c?(f=s/c,u+=(o-f)/2,o=f):(f=o*c,a+=(s-f)/2,s=f))),(i.complete||i.toDataURL)&&(nw(e,r),e.globalAlpha=(l=r.opacity)!=null?l:1,e.imageSmoothingEnabled=r.smooth!==!1,e.drawImage(i,a,u,s,o))})}var D_t={type:"image",tag:"image",nested:!1,attr:k_t,bound:I_t,draw:R_t,pick:j6(),isect:rc,get:PY,xOffset:z6,yOffset:U6},P_t=DY("line",XEt,f_t);function N_t(e,t){var n=t.scaleX||1,r=t.scaleY||1;(n!==1||r!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",l_t(t)),e("d",t.path)}function iP(e,t){var n=t.path;if(n==null)return!0;var r=t.x||0,i=t.y||0,s=t.scaleX||1,o=t.scaleY||1,a=(t.angle||0)*z0,u=t.pathCache;(!u||u.path!==n)&&((t.pathCache=u=tw(n)).path=n),a&&e.rotate&&e.translate?(e.translate(r,i),e.rotate(a),gC(e,u,0,0,s,o),e.rotate(-a),e.translate(-r,-i)):gC(e,u,r,i,s,o)}function O_t(e,t){return iP(YS(e,t.angle),t)?e.set(0,0,0,0):Xp(e,t,!0)}var $_t={type:"path",tag:"path",nested:!1,attr:N_t,bound:O_t,draw:AY(iP),pick:kY(iP),isect:TY(iP)};function M_t(e,t){e("d",vE(null,t))}function L_t(e,t){var n,r;return Xp(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)}function Xue(e,t){e.beginPath(),vE(e,t)}var F_t={type:"rect",tag:"path",nested:!1,attr:M_t,bound:L_t,draw:AY(Xue),pick:kY(Xue),isect:lSe};function B_t(e,t){e("transform",hSe(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function j_t(e,t){var n,r;return Xp(e.set(n=t.x||0,r=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:r),t)}function ySe(e,t,n){var r,i,s,o;return t.stroke&&rw(e,t,n)?(r=t.x||0,i=t.y||0,s=t.x2!=null?t.x2:r,o=t.y2!=null?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(s,o),!0):!1}function z_t(e,t,n){hd(t,r=>{if(!(n&&!n.intersects(r.bounds))){var i=r.opacity==null?1:r.opacity;i&&ySe(e,r,i)&&(nw(e,r),e.stroke())}})}function U_t(e,t,n,r){return e.isPointInStroke?ySe(e,t,1)&&e.isPointInStroke(n,r):!1}var V_t={type:"rule",tag:"line",nested:!1,attr:B_t,bound:j_t,draw:z_t,pick:j6(U_t),isect:cSe},H_t=RY("shape",QEt),q_t=RY("symbol",JEt,CY);const Que=t2e();var ll={height:oh,measureWidth:$Y,estimateWidth:vN,width:vN,canvas:bSe};bSe(!0);function bSe(e){ll.width=e&&v0?$Y:vN}function vN(e,t){return vSe(V0(e,t),oh(e))}function vSe(e,t){return~~(.8*e.length*t)}function $Y(e,t){return oh(e)<=0||!(t=V0(e,t))?0:xSe(t,V6(e))}function xSe(e,t){const n=`(${t}) ${e}`;let r=Que.get(n);return r===void 0&&(v0.font=t,r=v0.measureText(e).width,Que.set(n,r)),r}function oh(e){return e.fontSize!=null?+e.fontSize||0:11}function U0(e){return e.lineHeight!=null?e.lineHeight:oh(e)+2}function W_t(e){return Qe(e)?e.length>1?e:e[0]:e}function XS(e){return W_t(e.lineBreak&&e.text&&!Qe(e.text)?e.text.split(e.lineBreak):e.text)}function MY(e){const t=XS(e);return(Qe(t)?t.length-1:0)*U0(e)}function V0(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?Y_t(e,n):n}function G_t(e){if(ll.width===$Y){const t=V6(e);return n=>xSe(n,t)}else if(ll.width===vN){const t=oh(e);return n=>vSe(n,t)}else return t=>ll.width(e,t)}function Y_t(e,t){var n=+e.limit,r=G_t(e);if(r(t)<n)return t;var i=e.ellipsis||"",s=e.dir==="rtl",o=0,a=t.length,u;if(n-=r(i),s){for(;o<a;)u=o+a>>>1,r(t.slice(u))>n?o=u+1:a=u;return i+t.slice(o)}else{for(;o<a;)u=1+(o+a>>>1),r(t.slice(0,u))<n?o=u:a=u-1;return t.slice(0,o)+i}}function QS(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function V6(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+oh(e)+"px "+QS(e,t)}function LY(e){var t=e.baseline,n=oh(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*U0(e):t==="line-bottom"?.29*n-.5*U0(e):0)}const K_t={left:"start",center:"middle",right:"end"},c2=new is;function H6(e){var t=e.x||0,n=e.y||0,r=e.radius||0,i;return r&&(i=(e.theta||0)-xy,t+=r*Math.cos(i),n+=r*Math.sin(i)),c2.x1=t,c2.y1=n,c2}function X_t(e,t){var n=t.dx||0,r=(t.dy||0)+LY(t),i=H6(t),s=i.x1,o=i.y1,a=t.angle||0,u;e("text-anchor",K_t[t.align]||"start"),a?(u=Hy(s,o)+" "+IY(a),(n||r)&&(u+=" "+Hy(n,r))):u=Hy(s+n,o+r),e("transform",u)}function FY(e,t,n){var r=ll.height(t),i=t.align,s=H6(t),o=s.x1,a=s.y1,u=t.dx||0,l=(t.dy||0)+LY(t)-Math.round(.8*r),c=XS(t),d;if(Qe(c)?(r+=U0(t)*(c.length-1),d=c.reduce((f,h)=>Math.max(f,ll.width(t,h)),0)):d=ll.width(t,c),i==="center"?u-=d/2:i==="right"&&(u-=d),e.set(u+=o,l+=a,u+d,l+r),t.angle&&!n)e.rotate(t.angle*z0,o,a);else if(n===2)return e.rotatedPoints(t.angle*z0,o,a);return e}function Q_t(e,t,n){hd(t,r=>{var i=r.opacity==null?1:r.opacity,s,o,a,u,l,c,d;if(!(n&&!n.intersects(r.bounds)||i===0||r.fontSize<=0||r.text==null||r.text.length===0)){if(e.font=V6(r),e.textAlign=r.align||"left",s=H6(r),o=s.x1,a=s.y1,r.angle&&(e.save(),e.translate(o,a),e.rotate(r.angle*z0),o=a=0),o+=r.dx||0,a+=(r.dy||0)+LY(r),c=XS(r),nw(e,r),Qe(c))for(l=U0(r),u=0;u<c.length;++u)d=V0(r,c[u]),r.fill&&yN(e,r,i)&&e.fillText(d,o,a),r.stroke&&rw(e,r,i)&&e.strokeText(d,o,a),a+=l;else d=V0(r,c),r.fill&&yN(e,r,i)&&e.fillText(d,o,a),r.stroke&&rw(e,r,i)&&e.strokeText(d,o,a);r.angle&&e.restore()}})}function J_t(e,t,n,r,i,s){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var o=H6(t),a=o.x1,u=o.y1,l=FY(c2,t,1),c=-t.angle*z0,d=Math.cos(c),f=Math.sin(c),h=d*i-f*s+(a-d*a+f*u),p=f*i+d*s+(u-f*a-d*u);return l.contains(h,p)}function Z_t(e,t){const n=FY(c2,e,2);return Vv(t,n[0],n[1],n[2],n[3])||Vv(t,n[0],n[1],n[4],n[5])||Vv(t,n[4],n[5],n[6],n[7])||Vv(t,n[2],n[3],n[6],n[7])}var eTt={type:"text",tag:"text",nested:!1,attr:X_t,bound:FY,draw:Q_t,pick:j6(J_t),isect:Z_t},tTt=DY("trail",ZEt,h_t),El={arc:c_t,area:p_t,group:A_t,image:D_t,line:P_t,path:$_t,rect:F_t,rule:V_t,shape:H_t,symbol:q_t,text:eTt,trail:tTt};function _7(e,t,n){var r=El[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new is),e,n)}var Jue={mark:null};function wSe(e,t,n){var r=El[e.marktype],i=r.bound,s=e.items,o=s&&s.length,a,u,l,c;if(r.nested)return o?l=s[0]:(Jue.mark=e,l=Jue),c=_7(l,i,n),t=t&&t.union(c)||c,t;if(t=t||e.bounds&&e.bounds.clear()||new is,o)for(a=0,u=s.length;a<u;++a)t.union(_7(s[a],i,n));return e.bounds=t}const nTt=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function ESe(e,t){return JSON.stringify(e,nTt,t)}function _Se(e){const t=typeof e=="string"?JSON.parse(e):e;return TSe(t)}function TSe(e){var t=e.marktype,n=e.items,r,i,s;if(n)for(i=0,s=n.length;i<s;++i)r=t?"mark":"group",n[i][r]=e,n[i].zindex&&(n[i][r].zdirty=!0),(t||r)==="group"&&TSe(n[i]);return t&&wSe(e),e}class CSe{constructor(t){arguments.length?this.root=_Se(t):(this.root=Zue({marktype:"group",name:"root",role:"frame"}),this.root.items=[new F6(this.root)])}toJSON(t){return ESe(this.root,t||0)}mark(t,n,r){n=n||this.root.items[0];const i=Zue(t,n);return n.items[r]=i,i.zindex&&(i.group.zdirty=!0),i}}function Zue(e,t){const n={bounds:new is,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function e0(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function BY(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function xs(e,t,n,r){var i=e.childNodes[t],s;return(!i||i.tagName.toLowerCase()!==n.toLowerCase())&&(s=i||null,i=e0(e.ownerDocument,n,r),e.insertBefore(i,s)),i}function Hl(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function SSe(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function q6(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function rTt(e,t,n,r){var i=e&&e.mark,s,o;if(i&&(s=El[i.marktype]).tip){for(o=q6(t,n),o[0]-=r[0],o[1]-=r[1];e=e.mark.group;)o[0]-=e.x||0,o[1]-=e.y||0;e=s.tip(i.items,o)}return e}let jY=class{constructor(t,n){this._active=null,this._handlers={},this._loader=t||x6(),this._tooltip=n||iTt}initialize(t,n,r){return this._el=t,this._obj=r||null,this.origin(n)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}origin(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()}scene(t){return arguments.length?(this._scene=t,this):this._scene}on(){}off(){}_handlerIndex(t,n,r){for(let i=t?t.length:0;--i>=0;)if(t[i].type===n&&(!r||t[i].handler===r))return i;return-1}handlers(t){const n=this._handlers,r=[];if(t)r.push(...n[this.eventName(t)]);else for(const i in n)r.push(...n[i]);return r}eventName(t){const n=t.indexOf(".");return n<0?t:t.slice(0,n)}handleHref(t,n,r){this._loader.sanitize(r,{context:"href"}).then(i=>{const s=new MouseEvent(t.type,t),o=e0(null,"a");for(const a in i)o.setAttribute(a,i[a]);o.dispatchEvent(s)}).catch(()=>{})}handleTooltip(t,n,r){if(n&&n.tooltip!=null){n=rTt(n,t,this.canvas(),this._origin);const i=r&&n&&n.tooltip||null;this._tooltip.call(this._obj,this,t,n,i)}}getItemBoundingClientRect(t){const n=this.canvas();if(!n)return;const r=n.getBoundingClientRect(),i=this._origin,s=t.bounds,o=s.width(),a=s.height();let u=s.x1+i[0]+r.left,l=s.y1+i[1]+r.top;for(;t.mark&&(t=t.mark.group);)u+=t.x||0,l+=t.y||0;return{x:u,y:l,width:o,height:a,left:u,top:l,right:u+o,bottom:l+a}}};function iTt(e,t,n,r){e.element().setAttribute("title",r||"")}class JS{constructor(t){this._el=null,this._bgcolor=null,this._loader=new uSe(t)}initialize(t,n,r,i,s){return this._el=t,this.resize(n,r,i,s)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}background(t){return arguments.length===0?this._bgcolor:(this._bgcolor=t,this)}resize(t,n,r,i){return this._width=t,this._height=n,this._origin=r||[0,0],this._scale=i||1,this}dirty(){}render(t,n){const r=this;return r._call=function(){r._render(t,n)},r._call(),r._call=null,r}_render(){}renderAsync(t,n){const r=this.render(t,n);return this._ready?this._ready.then(()=>r):Promise.resolve(r)}_load(t,n){var r=this,i=r._loader[t](n);if(!r._ready){const s=r._call;r._ready=r._loader.ready().then(o=>{o&&s(),r._ready=null})}return i}sanitizeURL(t){return this._load("sanitizeURL",t)}loadImage(t){return this._load("loadImage",t)}}const sTt="keydown",oTt="keypress",aTt="keyup",ASe="dragenter",sP="dragleave",kSe="dragover",T7="pointerdown",uTt="pointerup",xN="pointermove",oP="pointerout",ISe="pointerover",C7="mousedown",lTt="mouseup",RSe="mousemove",wN="mouseout",DSe="mouseover",EN="click",cTt="dblclick",dTt="wheel",PSe="mousewheel",_N="touchstart",TN="touchmove",CN="touchend",fTt=[sTt,oTt,aTt,ASe,sP,kSe,T7,uTt,xN,oP,ISe,C7,lTt,RSe,wN,DSe,EN,cTt,dTt,PSe,_N,TN,CN],S7=xN,d2=wN,A7=EN;class ZS extends jY{constructor(t,n){super(t,n),this._down=null,this._touch=null,this._first=!0,this._events={},this.events=fTt,this.pointermove=tle([xN,RSe],[ISe,DSe],[oP,wN]),this.dragover=tle([kSe],[ASe],[sP]),this.pointerout=nle([oP,wN]),this.dragleave=nle([sP])}initialize(t,n,r){return this._canvas=t&&BY(t,"canvas"),[EN,C7,T7,xN,oP,sP].forEach(i=>ele(this,i)),super.initialize(t,n,r)}canvas(){return this._canvas}context(){return this._canvas.getContext("2d")}DOMMouseScroll(t){this.fire(PSe,t)}pointerdown(t){this._down=this._active,this.fire(T7,t)}mousedown(t){this._down=this._active,this.fire(C7,t)}click(t){this._down===this._active&&(this.fire(EN,t),this._down=null)}touchstart(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(_N,t,!0)}touchmove(t){this.fire(TN,t,!0)}touchend(t){this.fire(CN,t,!0),this._touch=null}fire(t,n,r){const i=r?this._touch:this._active,s=this._handlers[t];if(n.vegaType=t,t===A7&&i&&i.href?this.handleHref(n,i,i.href):(t===S7||t===d2)&&this.handleTooltip(n,i,t!==d2),s)for(let o=0,a=s.length;o<a;++o)s[o].handler.call(this._obj,n,i)}on(t,n){const r=this.eventName(t),i=this._handlers;return this._handlerIndex(i[r],t,n)<0&&(ele(this,t),(i[r]||(i[r]=[])).push({type:t,handler:n})),this}off(t,n){const r=this.eventName(t),i=this._handlers[r],s=this._handlerIndex(i,t,n);return s>=0&&i.splice(s,1),this}pickEvent(t){const n=q6(t,this._canvas),r=this._origin;return this.pick(this._scene,n[0],n[1],n[0]-r[0],n[1]-r[1])}pick(t,n,r,i,s){const o=this.context();return El[t.marktype].pick.call(this,o,t,n,r,i,s)}}const hTt=e=>e===_N||e===TN||e===CN?[_N,TN,CN]:[e];function ele(e,t){hTt(t).forEach(n=>pTt(e,n))}function pTt(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?r=>e[t](r):r=>e.fire(t,r)))}function DT(e,t,n){t.forEach(r=>e.fire(r,n))}function tle(e,t,n){return function(r){const i=this._active,s=this.pickEvent(r);s===i?DT(this,e,r):((!i||!i.exit)&&DT(this,n,r),this._active=s,DT(this,t,r),DT(this,e,r))}}function nle(e){return function(t){DT(this,e,t),this._active=null}}function mTt(){return typeof window<"u"&&window.devicePixelRatio||1}function gTt(e,t,n,r,i,s){const o=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,a=e.getContext("2d"),u=o?mTt():i;e.width=t*u,e.height=n*u;for(const l in s)a[l]=s[l];return o&&u!==1&&(e.style.width=t+"px",e.style.height=n+"px"),a.pixelRatio=u,a.setTransform(u,0,0,u,u*r[0],u*r[1]),e}class SN extends JS{constructor(t){super(t),this._options={},this._redraw=!1,this._dirty=new is,this._tempb=new is}initialize(t,n,r,i,s,o){return this._options=o||{},this._canvas=this._options.externalContext?null:b0(1,1,this._options.type),t&&this._canvas&&(Hl(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),super.initialize(t,n,r,i,s)}resize(t,n,r,i){if(super.resize(t,n,r,i),this._canvas)gTt(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const s=this._options.externalContext;s||Ye("CanvasRenderer is missing a valid canvas or context"),s.scale(this._scale,this._scale),s.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this}canvas(){return this._canvas}context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)}dirty(t){const n=this._tempb.clear().union(t.bounds);let r=t.mark.group;for(;r;)n.translate(r.x||0,r.y||0),r=r.mark.group;this._dirty.union(n)}_render(t,n){const r=this.context(),i=this._origin,s=this._width,o=this._height,a=this._dirty,u=yTt(i,s,o);r.save();const l=this._redraw||a.empty()?(this._redraw=!1,u.expand(1)):bTt(r,u.intersect(a),i);return this.clear(-i[0],-i[1],s,o),this.draw(r,t,l,n),r.restore(),a.clear(),this}draw(t,n,r,i){if(n.marktype!=="group"&&i!=null&&!i.includes(n.marktype))return;const s=El[n.marktype];n.clip&&m_t(t,n),s.draw.call(this,t,n,r,i),n.clip&&t.restore()}clear(t,n,r,i){const s=this._options,o=this.context();s.type!=="pdf"&&!s.externalContext&&o.clearRect(t,n,r,i),this._bgcolor!=null&&(o.fillStyle=this._bgcolor,o.fillRect(t,n,r,i))}}const yTt=(e,t,n)=>new is().set(0,0,t,n).translate(-e[0],-e[1]);function bTt(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}class NSe extends jY{constructor(t,n){super(t,n);const r=this;r._hrefHandler=lF(r,(i,s)=>{s&&s.href&&r.handleHref(i,s,s.href)}),r._tooltipHandler=lF(r,(i,s)=>{r.handleTooltip(i,s,i.type!==d2)})}initialize(t,n,r){let i=this._svg;return i&&(i.removeEventListener(A7,this._hrefHandler),i.removeEventListener(S7,this._tooltipHandler),i.removeEventListener(d2,this._tooltipHandler)),this._svg=i=t&&BY(t,"svg"),i&&(i.addEventListener(A7,this._hrefHandler),i.addEventListener(S7,this._tooltipHandler),i.addEventListener(d2,this._tooltipHandler)),super.initialize(t,n,r)}canvas(){return this._svg}on(t,n){const r=this.eventName(t),i=this._handlers;if(this._handlerIndex(i[r],t,n)<0){const o={type:t,handler:n,listener:lF(this,n)};(i[r]||(i[r]=[])).push(o),this._svg&&this._svg.addEventListener(r,o.listener)}return this}off(t,n){const r=this.eventName(t),i=this._handlers[r],s=this._handlerIndex(i,t,n);return s>=0&&(this._svg&&this._svg.removeEventListener(r,i[s].listener),i.splice(s,1)),this}}const lF=(e,t)=>n=>{let r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,t.call(e._obj,n,r)},OSe="aria-hidden",zY="aria-label",UY="role",VY="aria-roledescription",$Se="graphics-object",HY="graphics-symbol",MSe=(e,t,n)=>({[UY]:e,[VY]:t,[zY]:n||void 0}),vTt=dd(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),rle={axis:{desc:"axis",caption:ETt},legend:{desc:"legend",caption:_Tt},"title-text":{desc:"title",caption:e=>`Title text '${sle(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${sle(e)}'`}},ile={ariaRole:UY,ariaRoleDescription:VY,description:zY};function LSe(e,t){const n=t.aria===!1;if(e(OSe,n||void 0),n||t.description==null)for(const r in ile)e(ile[r],void 0);else{const r=t.mark.marktype;e(zY,t.description),e(UY,t.ariaRole||(r==="group"?$Se:HY)),e(VY,t.ariaRoleDescription||`${r} mark`)}}function FSe(e){return e.aria===!1?{[OSe]:!0}:vTt[e.role]?null:rle[e.role]?wTt(e,rle[e.role]):xTt(e)}function xTt(e){const t=e.marktype,n=t==="group"||t==="text"||e.items.some(r=>r.description!=null&&r.aria!==!1);return MSe(n?$Se:HY,`${t} mark container`,e.description)}function wTt(e,t){try{const n=e.items[0],r=t.caption||(()=>"");return MSe(t.role||HY,t.desc,n.description||r(n))}catch{return null}}function sle(e){return Rt(e.text).join(" ")}function ETt(e){const t=e.datum,n=e.orient,r=t.title?BSe(e):null,i=e.context,s=i.scales[t.scale].value,o=i.dataflow.locale(),a=s.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(r?` titled '${r}'`:"")+` for a ${ew(a)?"discrete":a} scale with ${JCe(o,s,e)}`}function _Tt(e){const t=e.datum,n=t.title?BSe(e):null,r=`${t.type||""} legend`.trim(),i=t.scales,s=Object.keys(i),o=e.context,a=o.scales[i[s[0]]].value,u=o.dataflow.locale();return CTt(r)+(n?` titled '${n}'`:"")+` for ${TTt(s)} with ${JCe(u,a,e)}`}function BSe(e){try{return Rt(Wn(e.items).items[0].text).join(" ")}catch{return null}}function TTt(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+Wn(e)}function CTt(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const jSe=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),STt=e=>jSe(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function qY(){let e="",t="",n="";const r=[],i=()=>t=n="",s=u=>{t&&(e+=`${t}>${n}`,i()),r.push(u)},o=(u,l)=>(l!=null&&(t+=` ${u}="${STt(l)}"`),a),a={open(u){s(u),t="<"+u;for(var l=arguments.length,c=new Array(l>1?l-1:0),d=1;d<l;d++)c[d-1]=arguments[d];for(const f of c)for(const h in f)o(h,f[h]);return a},close(){const u=r.pop();return t?e+=t+(n?`>${n}</${u}>`:"/>"):e+=`</${u}>`,i(),a},attr:o,text:u=>(n+=jSe(u),a),toString:()=>e};return a}const zSe=e=>USe(qY(),e)+"";function USe(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,r=n.length;for(let i=0;i<r;++i)e.attr(n[i].name,n[i].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const r of n)r.nodeType===3?e.text(r.nodeValue):USe(e,r)}return e.close()}const AN={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},kN={blend:"mix-blend-mode"},VSe={fill:"none","stroke-miterlimit":10},O_=0,ole="http://www.w3.org/2000/xmlns/",bs=bC.xmlns;class WY extends JS{constructor(t){super(t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}initialize(t,n,r,i,s){return this._defs={},this._clearDefs(),t&&(this._svg=xs(t,0,"svg",bs),this._svg.setAttributeNS(ole,"xmlns",bs),this._svg.setAttributeNS(ole,"xmlns:xlink",bC["xmlns:xlink"]),this._svg.setAttribute("version",bC.version),this._svg.setAttribute("class","marks"),Hl(t,1),this._root=xs(this._svg,O_,"g",bs),t0(this._root,VSe),Hl(this._svg,O_+1)),this.background(this._bgcolor),super.initialize(t,n,r,i,s)}background(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),super.background(...arguments)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svg&&(t0(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this}canvas(){return this._svg}svg(){const t=this._svg,n=this._bgcolor;if(!t)return null;let r;n&&(t.removeAttribute("style"),r=xs(t,O_,"rect",bs),t0(r,{width:this._width,height:this._height,fill:n}));const i=zSe(t);return n&&(t.removeChild(r),this._svg.style.setProperty("background-color",n)),i}_render(t,n){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t,void 0,n),Hl(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this}dirty(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))}isDirty(t){return this._dirtyAll||!t._svg||!t._svg.ownerSVGElement||t.dirty===this._dirtyID}_dirtyCheck(){this._dirtyAll=!0;const t=this._dirty;if(!t.length||!this._dirtyID)return!0;const n=++this._dirtyID;let r,i,s,o,a,u,l;for(a=0,u=t.length;a<u;++a)if(r=t[a],i=r.mark,i.marktype!==s&&(s=i.marktype,o=El[s]),i.zdirty&&i.dirty!==n&&(this._dirtyAll=!1,ale(r,n),i.items.forEach(c=>{c.dirty=n})),!i.zdirty){if(r.exit){o.nested&&i.items.length?(l=i.items[0],l._svg&&this._update(o,l._svg,l)):r._svg&&(l=r._svg.parentNode,l&&l.removeChild(r._svg)),r._svg=null;continue}r=o.nested?i.items[0]:r,r._update!==n&&(!r._svg||!r._svg.ownerSVGElement?(this._dirtyAll=!1,ale(r,n)):this._update(o,r._svg,r),r._update=n)}return!this._dirtyAll}mark(t,n,r,i){if(!this.isDirty(n))return n._svg;const s=this._svg,o=n.marktype,a=El[o],u=n.interactive===!1?"none":null,l=a.tag==="g",c=ule(n,t,r,"g",s);if(o!=="group"&&i!=null&&!i.includes(o))return Hl(c,0),n._svg;c.setAttribute("class",SSe(n));const d=FSe(n);for(const m in d)Ra(c,m,d[m]);l||Ra(c,"pointer-events",u),Ra(c,"clip-path",n.clip?_Y(this,n,n.group):null);let f=null,h=0;const p=m=>{const y=this.isDirty(m),v=ule(m,c,f,a.tag,s);y&&(this._update(a,v,m),l&&ITt(this,v,m,i)),f=v,++h};return a.nested?n.items.length&&p(n.items[0]):hd(n,p),Hl(c,h),c}_update(t,n,r){ip=n,ta=n.__values__,LSe(f2,r),t.attr(f2,r,this);const i=DTt[t.type];i&&i.call(this,t,n,r),ip&&this.style(ip,r)}style(t,n){if(n!=null){for(const r in AN){let i=r==="font"?QS(n):n[r];if(i===ta[r])continue;const s=AN[r];i==null?t.removeAttribute(s):(xY(i)&&(i=eSe(i,this._defs.gradient,HSe())),t.setAttribute(s,i+"")),ta[r]=i}for(const r in kN)aP(t,kN[r],n[r])}}defs(){const t=this._svg,n=this._defs;let r=n.el,i=0;for(const s in n.gradient)r||(n.el=r=xs(t,O_+1,"defs",bs)),i=ATt(r,n.gradient[s],i);for(const s in n.clipping)r||(n.el=r=xs(t,O_+1,"defs",bs)),i=kTt(r,n.clipping[s],i);r&&(i===0?(t.removeChild(r),n.el=null):Hl(r,i))}_clearDefs(){const t=this._defs;t.gradient={},t.clipping={}}}function ale(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function ATt(e,t,n){let r,i,s;if(t.gradient==="radial"){let o=xs(e,n++,"pattern",bs);t0(o,{id:gN+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),o=xs(o,0,"rect",bs),t0(o,{width:1,height:1,fill:`url(${HSe()}#${t.id})`}),e=xs(e,n++,"radialGradient",bs),t0(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=xs(e,n++,"linearGradient",bs),t0(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(r=0,i=t.stops.length;r<i;++r)s=xs(e,r,"stop",bs),s.setAttribute("offset",t.stops[r].offset),s.setAttribute("stop-color",t.stops[r].color);return Hl(e,r),n}function kTt(e,t,n){let r;return e=xs(e,n,"clipPath",bs),e.setAttribute("id",t.id),t.path?(r=xs(e,0,"path",bs),r.setAttribute("d",t.path)):(r=xs(e,0,"rect",bs),t0(r,{x:0,y:0,width:t.width,height:t.height})),Hl(e,1),n+1}function ITt(e,t,n,r){t=t.lastChild.previousSibling;let i,s=0;hd(n,o=>{i=e.mark(t,o,i,r),++s}),Hl(t,1+s)}function ule(e,t,n,r,i){let s=e._svg,o;if(!s&&(o=t.ownerDocument,s=e0(o,r,bs),e._svg=s,e.mark&&(s.__data__=e,s.__values__={fill:"default"},r==="g"))){const a=e0(o,"path",bs);s.appendChild(a),a.__data__=e;const u=e0(o,"g",bs);s.appendChild(u),u.__data__=e;const l=e0(o,"path",bs);s.appendChild(l),l.__data__=e,l.__values__={fill:"default"}}return(s.ownerSVGElement!==i||RTt(s,n))&&t.insertBefore(s,n?n.nextSibling:t.firstChild),s}function RTt(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}let ip=null,ta=null;const DTt={group(e,t,n){const r=ip=t.childNodes[2];ta=r.__values__,e.foreground(f2,n,this),ta=t.__values__,ip=t.childNodes[1],e.content(f2,n,this);const i=ip=t.childNodes[0];e.background(f2,n,this);const s=n.mark.interactive===!1?"none":null;if(s!==ta.events&&(Ra(r,"pointer-events",s),Ra(i,"pointer-events",s),ta.events=s),n.strokeForeground&&n.stroke){const o=n.fill;Ra(r,"display",null),this.style(i,n),Ra(i,"stroke",null),o&&(n.fill=null),ta=r.__values__,this.style(r,n),o&&(n.fill=o),ip=null}else Ra(r,"display","none")},image(e,t,n){n.smooth===!1?(aP(t,"image-rendering","optimizeSpeed"),aP(t,"image-rendering","pixelated")):aP(t,"image-rendering",null)},text(e,t,n){const r=XS(n);let i,s,o,a;Qe(r)?(s=r.map(u=>V0(n,u)),i=s.join(`
`),i!==ta.text&&(Hl(t,0),o=t.ownerDocument,a=U0(n),s.forEach((u,l)=>{const c=e0(o,"tspan",bs);c.__data__=n,c.textContent=u,l&&(c.setAttribute("x",0),c.setAttribute("dy",a)),t.appendChild(c)}),ta.text=i)):(s=V0(n,r),s!==ta.text&&(t.textContent=s,ta.text=s)),Ra(t,"font-family",QS(n)),Ra(t,"font-size",oh(n)+"px"),Ra(t,"font-style",n.fontStyle),Ra(t,"font-variant",n.fontVariant),Ra(t,"font-weight",n.fontWeight)}};function f2(e,t,n){t!==ta[e]&&(n?PTt(ip,e,t,n):Ra(ip,e,t),ta[e]=t)}function aP(e,t,n){n!==ta[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),ta[t]=n)}function t0(e,t){for(const n in t)Ra(e,n,t[n])}function Ra(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function PTt(e,t,n,r){n!=null?e.setAttributeNS(r,t,n):e.removeAttributeNS(r,t)}function HSe(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}class qSe extends JS{constructor(t){super(t),this._text=null,this._defs={gradient:{},clipping:{}}}svg(){return this._text}_render(t){const n=qY();n.open("svg",Cn({},bC,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const r=this._bgcolor;return r&&r!=="transparent"&&r!=="none"&&n.open("rect",{width:this._width,height:this._height,fill:r}).close(),n.open("g",VSe,{transform:"translate("+this._origin+")"}),this.mark(n,t),n.close(),this.defs(n),this._text=n.close()+"",this}mark(t,n){const r=El[n.marktype],i=r.tag,s=[LSe,r.attr];t.open("g",{class:SSe(n),"clip-path":n.clip?_Y(this,n,n.group):null},FSe(n),{"pointer-events":i!=="g"&&n.interactive===!1?"none":null});const o=a=>{const u=this.href(a);if(u&&t.open("a",u),t.open(i,this.attr(n,a,s,i!=="g"?i:null)),i==="text"){const l=XS(a);if(Qe(l)){const c={x:0,dy:U0(a)};for(let d=0;d<l.length;++d)t.open("tspan",d?c:null).text(V0(a,l[d])).close()}else t.text(V0(a,l))}else if(i==="g"){const l=a.strokeForeground,c=a.fill,d=a.stroke;l&&d&&(a.stroke=null),t.open("path",this.attr(n,a,r.background,"bgrect")).close(),t.open("g",this.attr(n,a,r.content)),hd(a,f=>this.mark(t,f)),t.close(),l&&d?(c&&(a.fill=null),a.stroke=d,t.open("path",this.attr(n,a,r.foreground,"bgrect")).close(),c&&(a.fill=c)):t.open("path",this.attr(n,a,r.foreground,"bgfore")).close()}t.close(),u&&t.close()};return r.nested?n.items&&n.items.length&&o(n.items[0]):hd(n,o),t.close()}href(t){const n=t.href;let r;if(n){if(r=this._hrefs&&this._hrefs[n])return r;this.sanitizeURL(n).then(i=>{i["xlink:href"]=i.href,i.href=null,(this._hrefs||(this._hrefs={}))[n]=i})}return null}attr(t,n,r,i){const s={},o=(a,u,l,c)=>{s[c||a]=u};return Array.isArray(r)?r.forEach(a=>a(o,n,this)):r(o,n,this),i&&NTt(s,n,t,i,this._defs),s}defs(t){const n=this._defs.gradient,r=this._defs.clipping;if(Object.keys(n).length+Object.keys(r).length!==0){t.open("defs");for(const s in n){const o=n[s],a=o.stops;o.gradient==="radial"?(t.open("pattern",{id:gN+s,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+s+")"}).close(),t.close(),t.open("radialGradient",{id:s,fx:o.x1,fy:o.y1,fr:o.r1,cx:o.x2,cy:o.y2,r:o.r2})):t.open("linearGradient",{id:s,x1:o.x1,x2:o.x2,y1:o.y1,y2:o.y2});for(let u=0;u<a.length;++u)t.open("stop",{offset:a[u].offset,"stop-color":a[u].color}).close();t.close()}for(const s in r){const o=r[s];t.open("clipPath",{id:s}),o.path?t.open("path",{d:o.path}).close():t.open("rect",{x:0,y:0,width:o.width,height:o.height}).close(),t.close()}t.close()}}}function NTt(e,t,n,r,i){let s;if(t==null||(r==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),r==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;r==="image"&&t.smooth===!1&&(s=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),r==="text"&&(e["font-family"]=QS(t),e["font-size"]=oh(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const o in AN){let a=t[o];const u=AN[o];a==="transparent"&&(u==="fill"||u==="stroke")||a!=null&&(xY(a)&&(a=eSe(a,i.gradient,"")),e[u]=a)}for(const o in kN){const a=t[o];a!=null&&(s=s||[],s.push(`${kN[o]}: ${a};`))}return s&&(e.style=s.join(" ")),e}const Fc={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function OTt(e){Fc.svgMarkTypes=e.svgMarkTypes??["text"],Fc.svgOnTop=e.svgOnTop??!0,Fc.debug=e.debug??!1}class k7 extends JS{constructor(t){super(t),this._svgRenderer=new WY(t),this._canvasRenderer=new SN(t)}initialize(t,n,r,i,s){this._root_el=xs(t,0,"div");const o=xs(this._root_el,0,"div"),a=xs(this._root_el,1,"div");return this._root_el.style.position="relative",Fc.debug||(o.style.height="100%",a.style.position="absolute",a.style.top="0",a.style.left="0",a.style.height="100%",a.style.width="100%"),this._svgEl=Fc.svgOnTop?a:o,this._canvasEl=Fc.svgOnTop?o:a,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,n,r,i,s),this._svgRenderer.initialize(this._svgEl,n,r,i,s),super.initialize(t,n,r,i,s)}dirty(t){return Fc.svgMarkTypes.includes(t.mark.marktype)?this._svgRenderer.dirty(t):this._canvasRenderer.dirty(t),this}_render(t,n){const i=(n??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(s=>!Fc.svgMarkTypes.includes(s));this._svgRenderer.render(t,Fc.svgMarkTypes),this._canvasRenderer.render(t,i)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svgRenderer.resize(t,n,r,i),this._canvasRenderer.resize(t,n,r,i),this}background(t){return Fc.svgOnTop?this._canvasRenderer.background(t):this._svgRenderer.background(t),this}}class WSe extends ZS{constructor(t,n){super(t,n)}initialize(t,n,r){const i=xs(xs(t,0,"div"),Fc.svgOnTop?0:1,"div");return super.initialize(i,n,r)}}const GSe="canvas",YSe="hybrid",KSe="png",XSe="svg",QSe="none",n0={Canvas:GSe,PNG:KSe,SVG:XSe,Hybrid:YSe,None:QSe},m1={};m1[GSe]=m1[KSe]={renderer:SN,headless:SN,handler:ZS};m1[XSe]={renderer:WY,headless:qSe,handler:NSe};m1[YSe]={renderer:k7,headless:k7,handler:WSe};m1[QSe]={};function W6(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(m1[e]=t,this):m1[e]}function JSe(e,t,n){const r=[],i=new is().union(t),s=e.marktype;return s?ZSe(e,i,n,r):s==="group"?eAe(e,i,n,r):Ye("Intersect scene must be mark node or group item.")}function ZSe(e,t,n,r){if($Tt(e,t,n)){const i=e.items,s=e.marktype,o=i.length;let a=0;if(s==="group")for(;a<o;++a)eAe(i[a],t,n,r);else for(const u=El[s].isect;a<o;++a){const l=i[a];tAe(l,t,u)&&r.push(l)}}return r}function $Tt(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function eAe(e,t,n,r){n&&n(e.mark)&&tAe(e,t,El.group.isect)&&r.push(e);const i=e.items,s=i&&i.length;if(s){const o=e.x||0,a=e.y||0;t.translate(-o,-a);for(let u=0;u<s;++u)ZSe(i[u],t,n,r);t.translate(o,a)}return r}function tAe(e,t,n){const r=e.bounds;return t.encloses(r)||t.intersects(r)&&n(e,t)}const cF=new is;function nAe(e){const t=e.clip;if(Sn(t))t(YS(cF.clear()));else if(t)cF.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(cF)}const MTt=1e-9;function GY(e,t,n){return e===t?!0:n==="path"?rAe(e,t):e instanceof Date&&t instanceof Date?+e==+t:pr(e)&&pr(t)?Math.abs(e-t)<=MTt:!e||!t||!kt(e)&&!kt(t)?e==t:LTt(e,t)}function rAe(e,t){return GY(tw(e),tw(t))}function LTt(e,t){var n=Object.keys(e),r=Object.keys(t),i,s;if(n.length!==r.length)return!1;for(n.sort(),r.sort(),s=n.length-1;s>=0;s--)if(n[s]!=r[s])return!1;for(s=n.length-1;s>=0;s--)if(i=n[s],!GY(e[i],t[i],i))return!1;return typeof e==typeof t}function FTt(){aSe(),uEt()}const iw="top",Gc="left",Jc="right",H0="bottom",BTt="top-left",jTt="top-right",zTt="bottom-left",UTt="bottom-right",YY="start",I7="middle",Pa="end",VTt="x",HTt="y",G6="group",KY="axis",XY="title",qTt="frame",WTt="scope",QY="legend",iAe="row-header",sAe="row-footer",oAe="row-title",aAe="column-header",uAe="column-footer",lAe="column-title",GTt="padding",YTt="symbol",cAe="fit",dAe="fit-x",fAe="fit-y",KTt="pad",JY="none",AI="all",R7="each",ZY="flush",r0="column",i0="row";function hAe(e){He.call(this,null,e)}Et(hAe,He,{transform(e,t){const n=t.dataflow,r=e.mark,i=r.marktype,s=El[i],o=s.bound;let a=r.bounds,u;if(s.nested)r.items.length&&n.dirty(r.items[0]),a=kI(r,o),r.items.forEach(l=>{l.bounds.clear().union(a)});else if(i===G6||e.modified())switch(t.visit(t.MOD,l=>n.dirty(l)),a.clear(),r.items.forEach(l=>a.union(kI(l,o))),r.role){case KY:case QY:case XY:t.reflow()}else u=t.changed(t.REM),t.visit(t.ADD,l=>{a.union(kI(l,o))}),t.visit(t.MOD,l=>{u=u||a.alignsWith(l.bounds),n.dirty(l),a.union(kI(l,o))}),u&&(a.clear(),r.items.forEach(l=>a.union(l.bounds)));return nAe(r),t.modifies("bounds")}});function kI(e,t,n){return t(e.bounds.clear(),e,n)}const lle=":vega_identifier:";function eK(e){He.call(this,0,e)}eK.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};Et(eK,He,{transform(e,t){const n=XTt(t.dataflow),r=e.as;let i=n.value;return t.visit(t.ADD,s=>s[r]=s[r]||++i),n.set(this.value=i),t}});function XTt(e){return e._signals[lle]||(e._signals[lle]=e.add(0))}function pAe(e){He.call(this,null,e)}Et(pAe,He,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,QTt(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const r=n.marktype===G6?F6:L6;return t.visit(t.ADD,i=>r.call(i,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function QTt(e){const t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function mAe(e){He.call(this,null,e)}const cle={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((r,i)=>!i||!gAe(n.bounds,r.bounds,t)?(n=r,1):r.opacity=0)}},gAe=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),dle=(e,t)=>{for(var n=1,r=e.length,i=e[0].bounds,s;n<r;i=s,++n)if(gAe(i,s=e[n].bounds,t))return!0},JTt=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},ZTt=(e,t,n)=>{var r=e.range(),i=new is;return t===iw||t===H0?i.set(r[0],-1/0,r[1],1/0):i.set(-1/0,r[0],1/0,r[1]),i.expand(n||1),s=>i.encloses(s.bounds)},fle=e=>(e.forEach(t=>t.opacity=1),e),hle=(e,t)=>e.reflow(t.modified()).modifies("opacity");Et(mAe,He,{transform(e,t){const n=cle[e.method]||cle.parity,r=e.separation||0;let i=t.materialize(t.SOURCE).source,s,o;if(!i||!i.length)return;if(!e.method)return e.modified("method")&&(fle(i),t=hle(t,e)),t;if(i=i.filter(JTt),!i.length)return;if(e.sort&&(i=i.slice().sort(e.sort)),s=fle(i),t=hle(t,e),s.length>=3&&dle(s,r)){do s=n(s,r);while(s.length>=3&&dle(s,r));s.length<3&&!Wn(i).opacity&&(s.length>1&&(Wn(s).opacity=0),Wn(i).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(o=ZTt(e.boundScale,e.boundOrient,+e.boundTolerance),i.forEach(u=>{o(u)||(u.opacity=0)}));const a=s[0].mark.bounds.clear();return i.forEach(u=>{u.opacity&&a.union(u.bounds)}),t}});function yAe(e){He.call(this,null,e)}Et(yAe,He,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,r=>n.dirty(r)),t.fields&&t.fields.zindex){const r=t.source&&t.source[0];r&&(r.mark.zdirty=!0)}}});const Zo=new is;function Hv(e,t,n){return e[t]===n?0:(e[t]=n,1)}function e2t(e){var t=e.items[0].orient;return t===Gc||t===Jc}function t2t(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function n2t(e,t,n,r){var i=t.items[0],s=i.datum,o=i.translate!=null?i.translate:.5,a=i.orient,u=t2t(s),l=i.range,c=i.offset,d=i.position,f=i.minExtent,h=i.maxExtent,p=s.title&&i.items[u[2]].items[0],m=i.titlePadding,y=i.bounds,v=p&&MY(p),b=0,w=0,E,_;switch(Zo.clear().union(y),y.clear(),(E=u[0])>-1&&y.union(i.items[E].bounds),(E=u[1])>-1&&y.union(i.items[E].bounds),a){case iw:b=d||0,w=-c,_=Math.max(f,Math.min(h,-y.y1)),y.add(0,-_).add(l,0),p&&II(e,p,_,m,v,0,-1,y);break;case Gc:b=-c,w=d||0,_=Math.max(f,Math.min(h,-y.x1)),y.add(-_,0).add(0,l),p&&II(e,p,_,m,v,1,-1,y);break;case Jc:b=n+c,w=d||0,_=Math.max(f,Math.min(h,y.x2)),y.add(0,0).add(_,l),p&&II(e,p,_,m,v,1,1,y);break;case H0:b=d||0,w=r+c,_=Math.max(f,Math.min(h,y.y2)),y.add(0,0).add(l,_),p&&II(e,p,_,m,0,0,1,y);break;default:b=i.x,w=i.y}return Xp(y.translate(b,w),i),Hv(i,"x",b+o)|Hv(i,"y",w+o)&&(i.bounds=Zo,e.dirty(i),i.bounds=y,e.dirty(i)),i.mark.bounds.clear().union(y)}function II(e,t,n,r,i,s,o,a){const u=t.bounds;if(t.auto){const l=o*(n+i+r);let c=0,d=0;e.dirty(t),s?c=(t.x||0)-(t.x=l):d=(t.y||0)-(t.y=l),t.mark.bounds.clear().union(u.translate(-c,-d)),e.dirty(t)}a.union(u)}const ple=(e,t)=>Math.floor(Math.min(e,t)),mle=(e,t)=>Math.ceil(Math.max(e,t));function r2t(e){var t=e.items,n=t.length,r=0,i,s;const o={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;r<n;++r)if(i=t[r],s=i.items,i.marktype===G6)switch(i.role){case KY:case QY:case XY:break;case iAe:o.rowheaders.push(...s);break;case sAe:o.rowfooters.push(...s);break;case aAe:o.colheaders.push(...s);break;case uAe:o.colfooters.push(...s);break;case oAe:o.rowtitle=s[0];break;case lAe:o.coltitle=s[0];break;default:o.marks.push(...s)}return o}function i2t(e){return new is().set(0,0,e.width||0,e.height||0)}function s2t(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function ci(e,t,n){const r=kt(e)?e[t]:e;return r??(n!==void 0?n:0)}function gle(e){return e<0?Math.ceil(-e):0}function bAe(e,t,n){var r=!n.nodirty,i=n.bounds===ZY?i2t:s2t,s=Zo.set(0,0,0,0),o=ci(n.align,r0),a=ci(n.align,i0),u=ci(n.padding,r0),l=ci(n.padding,i0),c=n.columns||t.length,d=c<=0?1:Math.ceil(t.length/c),f=t.length,h=Array(f),p=Array(c),m=0,y=Array(f),v=Array(d),b=0,w=Array(f),E=Array(f),_=Array(f),C,S,k,R,N,O,F,$,z,q,W;for(S=0;S<c;++S)p[S]=0;for(S=0;S<d;++S)v[S]=0;for(S=0;S<f;++S)O=t[S],N=_[S]=i(O),O.x=O.x||0,w[S]=0,O.y=O.y||0,E[S]=0,k=S%c,R=~~(S/c),m=Math.max(m,F=Math.ceil(N.x2)),b=Math.max(b,$=Math.ceil(N.y2)),p[k]=Math.max(p[k],F),v[R]=Math.max(v[R],$),h[S]=u+gle(N.x1),y[S]=l+gle(N.y1),r&&e.dirty(t[S]);for(S=0;S<f;++S)S%c===0&&(h[S]=0),S<c&&(y[S]=0);if(o===R7)for(k=1;k<c;++k){for(W=0,S=k;S<f;S+=c)W<h[S]&&(W=h[S]);for(S=k;S<f;S+=c)h[S]=W+p[k-1]}else if(o===AI){for(W=0,S=0;S<f;++S)S%c&&W<h[S]&&(W=h[S]);for(S=0;S<f;++S)S%c&&(h[S]=W+m)}else for(o=!1,k=1;k<c;++k)for(S=k;S<f;S+=c)h[S]+=p[k-1];if(a===R7)for(R=1;R<d;++R){for(W=0,S=R*c,C=S+c;S<C;++S)W<y[S]&&(W=y[S]);for(S=R*c;S<C;++S)y[S]=W+v[R-1]}else if(a===AI){for(W=0,S=c;S<f;++S)W<y[S]&&(W=y[S]);for(S=c;S<f;++S)y[S]=W+b}else for(a=!1,R=1;R<d;++R)for(S=R*c,C=S+c;S<C;++S)y[S]+=v[R-1];for(z=0,S=0;S<f;++S)z=h[S]+(S%c?z:0),w[S]+=z-t[S].x;for(k=0;k<c;++k)for(q=0,S=k;S<f;S+=c)q+=y[S],E[S]+=q-t[S].y;if(o&&ci(n.center,r0)&&d>1)for(S=0;S<f;++S)N=o===AI?m:p[S%c],z=N-_[S].x2-t[S].x-w[S],z>0&&(w[S]+=z/2);if(a&&ci(n.center,i0)&&c!==1)for(S=0;S<f;++S)N=a===AI?b:v[~~(S/c)],q=N-_[S].y2-t[S].y-E[S],q>0&&(E[S]+=q/2);for(S=0;S<f;++S)s.union(_[S].translate(w[S],E[S]));switch(z=ci(n.anchor,VTt),q=ci(n.anchor,HTt),ci(n.anchor,r0)){case Pa:z-=s.width();break;case I7:z-=s.width()/2}switch(ci(n.anchor,i0)){case Pa:q-=s.height();break;case I7:q-=s.height()/2}for(z=Math.round(z),q=Math.round(q),s.clear(),S=0;S<f;++S)t[S].mark.bounds.clear();for(S=0;S<f;++S)O=t[S],O.x+=w[S]+=z,O.y+=E[S]+=q,s.union(O.mark.bounds.union(O.bounds.translate(w[S],E[S]))),r&&e.dirty(O);return s}function o2t(e,t,n){var r=r2t(t),i=r.marks,s=n.bounds===ZY?a2t:u2t,o=n.offset,a=n.columns||i.length,u=a<=0?1:Math.ceil(i.length/a),l=u*a,c,d,f,h,p,m,y;const v=bAe(e,i,n);v.empty()&&v.set(0,0,0,0),r.rowheaders&&(m=ci(n.headerBand,i0,null),c=RI(e,r.rowheaders,i,a,u,-ci(o,"rowHeader"),ple,0,s,"x1",0,a,1,m)),r.colheaders&&(m=ci(n.headerBand,r0,null),d=RI(e,r.colheaders,i,a,a,-ci(o,"columnHeader"),ple,1,s,"y1",0,1,a,m)),r.rowfooters&&(m=ci(n.footerBand,i0,null),f=RI(e,r.rowfooters,i,a,u,ci(o,"rowFooter"),mle,0,s,"x2",a-1,a,1,m)),r.colfooters&&(m=ci(n.footerBand,r0,null),h=RI(e,r.colfooters,i,a,a,ci(o,"columnFooter"),mle,1,s,"y2",l-a,1,a,m)),r.rowtitle&&(p=ci(n.titleAnchor,i0),y=ci(o,"rowTitle"),y=p===Pa?f+y:c-y,m=ci(n.titleBand,i0,.5),yle(e,r.rowtitle,y,0,v,m)),r.coltitle&&(p=ci(n.titleAnchor,r0),y=ci(o,"columnTitle"),y=p===Pa?h+y:d-y,m=ci(n.titleBand,r0,.5),yle(e,r.coltitle,y,1,v,m))}function a2t(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function u2t(e,t){return e.bounds[t]}function RI(e,t,n,r,i,s,o,a,u,l,c,d,f,h){var p=n.length,m=0,y=0,v,b,w,E,_,C,S,k,R;if(!p)return m;for(v=c;v<p;v+=d)n[v]&&(m=o(m,u(n[v],l)));if(!t.length)return m;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),m+=s,b=0,E=t.length;b<E;++b)e.dirty(t[b]),t[b].mark.bounds.clear();for(v=c,b=0,E=t.length;b<E;++b,v+=d){for(C=t[b],_=C.mark.bounds,w=v;w>=0&&(S=n[w])==null;w-=f);a?(k=h==null?S.x:Math.round(S.bounds.x1+h*S.bounds.width()),R=m):(k=m,R=h==null?S.y:Math.round(S.bounds.y1+h*S.bounds.height())),_.union(C.bounds.translate(k-(C.x||0),R-(C.y||0))),C.x=k,C.y=R,e.dirty(C),y=o(y,_[l])}return y}function yle(e,t,n,r,i,s){if(t){e.dirty(t);var o=n,a=n;r?o=Math.round(i.x1+s*i.width()):a=Math.round(i.y1+s*i.height()),t.bounds.translate(o-(t.x||0),a-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=o,t.y=a,e.dirty(t)}}function l2t(e,t){const n=e[t]||{};return(r,i)=>n[r]!=null?n[r]:e[r]!=null?e[r]:i}function c2t(e,t){let n=-1/0;return e.forEach(r=>{r.offset!=null&&(n=Math.max(n,r.offset))}),n>-1/0?n:t}function d2t(e,t,n,r,i,s,o){const a=l2t(n,t),u=c2t(e,a("offset",0)),l=a("anchor",YY),c=l===Pa?1:l===I7?.5:0,d={align:R7,bounds:a("bounds",ZY),columns:a("direction")==="vertical"?1:e.length,padding:a("margin",8),center:a("center"),nodirty:!0};switch(t){case Gc:d.anchor={x:Math.floor(r.x1)-u,column:Pa,y:c*(o||r.height()+2*r.y1),row:l};break;case Jc:d.anchor={x:Math.ceil(r.x2)+u,y:c*(o||r.height()+2*r.y1),row:l};break;case iw:d.anchor={y:Math.floor(i.y1)-u,row:Pa,x:c*(s||i.width()+2*i.x1),column:l};break;case H0:d.anchor={y:Math.ceil(i.y2)+u,x:c*(s||i.width()+2*i.x1),column:l};break;case BTt:d.anchor={x:u,y:u};break;case jTt:d.anchor={x:s-u,y:u,column:Pa};break;case zTt:d.anchor={x:u,y:o-u,row:Pa};break;case UTt:d.anchor={x:s-u,y:o-u,column:Pa,row:Pa};break}return d}function f2t(e,t){var n=t.items[0],r=n.datum,i=n.orient,s=n.bounds,o=n.x,a=n.y,u,l;return n._bounds?n._bounds.clear().union(s):n._bounds=s.clone(),s.clear(),p2t(e,n,n.items[0].items[0]),s=h2t(n,s),u=2*n.padding,l=2*n.padding,s.empty()||(u=Math.ceil(s.width()+u),l=Math.ceil(s.height()+l)),r.type===YTt&&m2t(n.items[0].items[0].items[0].items),i!==JY&&(n.x=o=0,n.y=a=0),n.width=u,n.height=l,Xp(s.set(o,a,o+u,a+l),n),n.mark.bounds.clear().union(s),n}function h2t(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function p2t(e,t,n){var r=t.padding,i=r-n.x,s=r-n.y;if(!t.datum.title)(i||s)&&$_(e,n,i,s);else{var o=t.items[1].items[0],a=o.anchor,u=t.titlePadding||0,l=r-o.x,c=r-o.y;switch(o.orient){case Gc:i+=Math.ceil(o.bounds.width())+u;break;case Jc:case H0:break;default:s+=o.bounds.height()+u}switch((i||s)&&$_(e,n,i,s),o.orient){case Gc:c+=fv(t,n,o,a,1,1);break;case Jc:l+=fv(t,n,o,Pa,0,0)+u,c+=fv(t,n,o,a,1,1);break;case H0:l+=fv(t,n,o,a,0,0),c+=fv(t,n,o,Pa,-1,0,1)+u;break;default:l+=fv(t,n,o,a,0,0)}(l||c)&&$_(e,o,l,c),(l=Math.round(o.bounds.x1-r))<0&&($_(e,n,-l,0),$_(e,o,-l,0))}}function fv(e,t,n,r,i,s,o){const a=e.datum.type!=="symbol",u=n.datum.vgrad,l=a&&(s||!u)&&!o?t.items[0]:t,c=l.bounds[i?"y2":"x2"]-e.padding,d=u&&s?c:0,f=u&&s?0:c,h=i<=0?0:MY(n);return Math.round(r===YY?d:r===Pa?f-h:.5*(c-h))}function $_(e,t,n,r){t.x+=n,t.y+=r,t.bounds.translate(n,r),t.mark.bounds.translate(n,r),e.dirty(t)}function m2t(e){const t=e.reduce((n,r)=>(n[r.column]=Math.max(r.bounds.x2-r.x,n[r.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function g2t(e,t,n,r,i){var s=t.items[0],o=s.frame,a=s.orient,u=s.anchor,l=s.offset,c=s.padding,d=s.items[0].items[0],f=s.items[1]&&s.items[1].items[0],h=a===Gc||a===Jc?r:n,p=0,m=0,y=0,v=0,b=0,w;if(o!==G6?a===Gc?(p=i.y2,h=i.y1):a===Jc?(p=i.y1,h=i.y2):(p=i.x1,h=i.x2):a===Gc&&(p=r,h=0),w=u===YY?p:u===Pa?h:(p+h)/2,f&&f.text){switch(a){case iw:case H0:b=d.bounds.height()+c;break;case Gc:v=d.bounds.width()+c;break;case Jc:v=-d.bounds.width()-c;break}Zo.clear().union(f.bounds),Zo.translate(v-(f.x||0),b-(f.y||0)),Hv(f,"x",v)|Hv(f,"y",b)&&(e.dirty(f),f.bounds.clear().union(Zo),f.mark.bounds.clear().union(Zo),e.dirty(f)),Zo.clear().union(f.bounds)}else Zo.clear();switch(Zo.union(d.bounds),a){case iw:m=w,y=i.y1-Zo.height()-l;break;case Gc:m=i.x1-Zo.width()-l,y=w;break;case Jc:m=i.x2+Zo.width()+l,y=w;break;case H0:m=w,y=i.y2+l;break;default:m=s.x,y=s.y}return Hv(s,"x",m)|Hv(s,"y",y)&&(Zo.translate(m,y),e.dirty(s),s.bounds.clear().union(Zo),t.bounds.clear().union(Zo),e.dirty(s)),s.bounds}function vAe(e){He.call(this,null,e)}Et(vAe,He,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(r=>{e.layout&&o2t(n,r,e.layout),b2t(n,r,e)}),y2t(e.mark.group)?t.reflow():t}});function y2t(e){return e&&e.mark.role!=="legend-entry"}function b2t(e,t,n){var r=t.items,i=Math.max(0,t.width||0),s=Math.max(0,t.height||0),o=new is().set(0,0,i,s),a=o.clone(),u=o.clone(),l=[],c,d,f,h,p,m;for(p=0,m=r.length;p<m;++p)switch(d=r[p],d.role){case KY:h=e2t(d)?a:u,h.union(n2t(e,d,i,s));break;case XY:c=d;break;case QY:l.push(f2t(e,d));break;case qTt:case WTt:case iAe:case sAe:case oAe:case aAe:case uAe:case lAe:a.union(d.bounds),u.union(d.bounds);break;default:o.union(d.bounds)}if(l.length){const y={};l.forEach(v=>{f=v.orient||Jc,f!==JY&&(y[f]||(y[f]=[])).push(v)});for(const v in y){const b=y[v];bAe(e,b,d2t(b,v,n.legends,a,u,i,s))}l.forEach(v=>{const b=v.bounds;if(b.equals(v._bounds)||(v.bounds=v._bounds,e.dirty(v),v.bounds=b,e.dirty(v)),n.autosize&&(n.autosize.type===cAe||n.autosize.type===dAe||n.autosize.type===fAe))switch(v.orient){case Gc:case Jc:o.add(b.x1,0).add(b.x2,0);break;case iw:case H0:o.add(0,b.y1).add(0,b.y2)}else o.union(b)})}o.union(a).union(u),c&&o.union(g2t(e,c,i,s,o)),t.clip&&o.set(0,0,t.width||0,t.height||0),v2t(e,t,o,n)}function v2t(e,t,n,r){const i=r.autosize||{},s=i.type;if(e._autosize<1||!s)return;let o=e._width,a=e._height,u=Math.max(0,t.width||0),l=Math.max(0,Math.ceil(-n.x1)),c=Math.max(0,t.height||0),d=Math.max(0,Math.ceil(-n.y1));const f=Math.max(0,Math.ceil(n.x2-u)),h=Math.max(0,Math.ceil(n.y2-c));if(i.contains===GTt){const p=e.padding();o-=p.left+p.right,a-=p.top+p.bottom}s===JY?(l=0,d=0,u=o,c=a):s===cAe?(u=Math.max(0,o-l-f),c=Math.max(0,a-d-h)):s===dAe?(u=Math.max(0,o-l-f),a=c+d+h):s===fAe?(o=u+l+f,c=Math.max(0,a-d-h)):s===KTt&&(o=u+l+f,a=c+d+h),e._resizeView(o,a,u,c,[l,d],i.resize)}const x2t=Object.freeze(Object.defineProperty({__proto__:null,bound:hAe,identifier:eK,mark:pAe,overlap:mAe,render:yAe,viewlayout:vAe},Symbol.toStringTag,{value:"Module"}));function xAe(e){He.call(this,null,e)}Et(xAe,He,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.scale,o=e.count==null?e.values?e.values.length:10:e.count,a=bY(s,o,e.minstep),u=e.format||GCe(n,s,a,e.formatSpecifier,e.formatType,!!e.values),l=e.values?WCe(s,e.values,a):vY(s,a);return i&&(r.rem=i),i=l.map((c,d)=>xr({index:d/(l.length-1||1),value:c,label:u(c)})),e.extra&&i.length&&i.push(xr({index:-1,extra:{value:i[0].value},label:""})),r.source=i,r.add=i,this.value=i,r}});function wAe(e){He.call(this,null,e)}function w2t(){return xr({})}function E2t(e){const t=pE().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}Et(wAe,He,{transform(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||w2t,s=e.key||Jt,o=this.value;return Qe(r.encode)&&(r.encode=null),o&&(e.modified("key")||t.modified(s))&&Ye("DataJoin does not support modified key function or fields."),o||(t=t.addAll(),this.value=o=E2t(s)),t.visit(t.ADD,a=>{const u=s(a);let l=o.get(u);l?l.exit?(o.empty--,r.add.push(l)):r.mod.push(l):(l=i(a),o.set(u,l),r.add.push(l)),l.datum=a,l.exit=!1}),t.visit(t.MOD,a=>{const u=s(a),l=o.get(u);l&&(l.datum=a,r.mod.push(l))}),t.visit(t.REM,a=>{const u=s(a),l=o.get(u);a===l.datum&&!l.exit&&(r.rem.push(l),l.exit=!0,++o.empty)}),t.changed(t.ADD_MOD)&&r.modifies("datum"),(t.clean()||e.clean&&o.empty>n.cleanThreshold)&&n.runAfter(o.clean),r}});function EAe(e){He.call(this,null,e)}Et(EAe,He,{transform(e,t){var n=t.fork(t.ADD_REM),r=e.mod||!1,i=e.encoders,s=t.encode;if(Qe(s))if(n.changed()||s.every(d=>i[d]))s=s[0],n.encode=null;else return t.StopPropagation;var o=s==="enter",a=i.update||Pm,u=i.enter||Pm,l=i.exit||Pm,c=(s&&!o?i[s]:a)||Pm;if(t.changed(t.ADD)&&(t.visit(t.ADD,d=>{u(d,e),a(d,e)}),n.modifies(u.output),n.modifies(a.output),c!==Pm&&c!==a&&(t.visit(t.ADD,d=>{c(d,e)}),n.modifies(c.output))),t.changed(t.REM)&&l!==Pm&&(t.visit(t.REM,d=>{l(d,e)}),n.modifies(l.output)),o||c!==Pm){const d=t.MOD|(e.modified()?t.REFLOW:0);o?(t.visit(d,f=>{const h=u(f,e)||r;(c(f,e)||h)&&n.mod.push(f)}),n.mod.length&&n.modifies(u.output)):t.visit(d,f=>{(c(f,e)||r)&&n.mod.push(f)}),n.mod.length&&n.modifies(c.output)}return n.changed()?n:t.StopPropagation}});function _Ae(e){He.call(this,[],e)}Et(_Ae,He,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.type||ZD,o=e.scale,a=+e.limit,u=bY(o,e.count==null?5:e.count,e.minstep),l=!!e.values||s===ZD,c=e.format||QCe(n,o,u,s,e.formatSpecifier,e.formatType,l),d=e.values||XCe(o,u),f,h,p,m,y;return i&&(r.rem=i),s===ZD?(a&&d.length>a?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),i=d.slice(0,a-1),y=!0):i=d,Sn(p=e.size)?(!e.values&&o(i[0])===0&&(i=i.slice(1)),m=i.reduce((v,b)=>Math.max(v,p(b,e)),0)):p=ya(m=p||8),i=i.map((v,b)=>xr({index:b,label:c(v,b,i),value:v,offset:m,size:p(v,e)})),y&&(y=d[i.length],i.push(xr({index:i.length,label:`${d.length-i.length} entries`,value:y,offset:m,size:p(y,e)})))):s===Kwt?(f=o.domain(),h=VCe(o,f[0],Wn(f)),d.length<3&&!e.values&&f[0]!==Wn(f)&&(d=[f[0],Wn(f)]),i=d.map((v,b)=>xr({index:b,label:c(v,b,d),value:v,perc:h(v)}))):(p=d.length-1,h=oEt(o),i=d.map((v,b)=>xr({index:b,label:c(v,b,d),value:v,perc:b?h(v):0,perc2:b===p?1:h(d[b+1])}))),r.source=i,r.add=i,this.value=i,r}});const _2t=e=>e.source.x,T2t=e=>e.source.y,C2t=e=>e.target.x,S2t=e=>e.target.y;function tK(e){He.call(this,{},e)}tK.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};Et(tK,He,{transform(e,t){var n=e.sourceX||_2t,r=e.sourceY||T2t,i=e.targetX||C2t,s=e.targetY||S2t,o=e.as||"path",a=e.orient||"vertical",u=e.shape||"line",l=ble.get(u+"-"+a)||ble.get(u);return l||Ye("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,c=>{c[o]=l(n(c),r(c),i(c),s(c))}),t.reflow(e.modified()).modifies(o)}});const TAe=(e,t,n,r)=>"M"+e+","+t+"L"+n+","+r,A2t=(e,t,n,r)=>TAe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),CAe=(e,t,n,r)=>{var i=n-e,s=r-t,o=Math.hypot(i,s)/2,a=180*Math.atan2(s,i)/Math.PI;return"M"+e+","+t+"A"+o+","+o+" "+a+" 0 1 "+n+","+r},k2t=(e,t,n,r)=>CAe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),SAe=(e,t,n,r)=>{const i=n-e,s=r-t,o=.2*(i+s),a=.2*(s-i);return"M"+e+","+t+"C"+(e+o)+","+(t+a)+" "+(n+a)+","+(r-o)+" "+n+","+r},I2t=(e,t,n,r)=>SAe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),R2t=(e,t,n,r)=>"M"+e+","+t+"V"+r+"H"+n,D2t=(e,t,n,r)=>"M"+e+","+t+"H"+n+"V"+r,P2t=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),u=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*i+","+t*s+"A"+t+","+t+" 0 0,"+(u?1:0)+" "+t*o+","+t*a+"L"+r*o+","+r*a},N2t=(e,t,n,r)=>{const i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r},O2t=(e,t,n,r)=>{const i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r},$2t=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),u=(t+r)/2;return"M"+t*i+","+t*s+"C"+u*i+","+u*s+" "+u*o+","+u*a+" "+r*o+","+r*a},ble=pE({line:TAe,"line-radial":A2t,arc:CAe,"arc-radial":k2t,curve:SAe,"curve-radial":I2t,"orthogonal-horizontal":R2t,"orthogonal-vertical":D2t,"orthogonal-radial":P2t,"diagonal-horizontal":N2t,"diagonal-vertical":O2t,"diagonal-radial":$2t});function nK(e){He.call(this,null,e)}nK.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};Et(nK,He,{transform(e,t){var n=e.as||["startAngle","endAngle"],r=n[0],i=n[1],s=e.field||dE,o=e.startAngle||0,a=e.endAngle!=null?e.endAngle:2*Math.PI,u=t.source,l=u.map(s),c=l.length,d=o,f=(a-o)/Axe(l),h=Tu(c),p,m,y;for(e.sort&&h.sort((v,b)=>l[v]-l[b]),p=0;p<c;++p)y=l[h[p]],m=u[h[p]],m[r]=d,m[i]=d+=y*f;return this.value=l,t.reflow(e.modified()).modifies(n)}});const M2t=5;function L2t(e){const t=e.type;return!e.bins&&(t===Jx||t===zS||t===US)}function AAe(e){return mY(e)&&e!==If}const F2t=dd(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function kAe(e){He.call(this,null,e),this.modified(!0)}Et(kAe,He,{transform(e,t){var n=t.dataflow,r=this.value,i=B2t(e);(!r||i!==r.type)&&(this.value=r=mr(i)());for(i in e)if(!F2t[i]){if(i==="padding"&&AAe(r.type))continue;Sn(r[i])?r[i](e[i]):n.warn("Unsupported scale property: "+i)}return q2t(r,e,H2t(r,e,z2t(r,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function B2t(e){var t=e.type,n="",r;return t===If?If+"-"+Jx:(j2t(e)&&(r=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=r===2?If+"-":r===3?bE+"-":""),(n+t||Jx).toLowerCase())}function j2t(e){const t=e.type;return mY(t)&&t!==h1&&t!==p1&&(e.scheme||e.range&&e.range.length&&e.range.every(It))}function z2t(e,t,n){const r=U2t(e,t.domainRaw,n);if(r>-1)return r;var i=t.domain,s=e.type,o=t.zero||t.zero===void 0&&L2t(e),a,u;if(!i)return 0;if((o||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(a=(i=i.slice()).length-1||1,o&&(i[0]>0&&(i[0]=0),i[a]<0&&(i[a]=0)),t.domainMin!=null&&(i[0]=t.domainMin),t.domainMax!=null&&(i[a]=t.domainMax),t.domainMid!=null)){u=t.domainMid;const l=u>i[a]?a+1:u<i[0]?0:a;l!==a&&n.warn("Scale domainMid exceeds domain min or max.",u),i.splice(l,0,u)}return AAe(s)&&t.padding&&i[0]!==Wn(i)&&(i=V2t(s,i,t.range,t.padding,t.exponent,t.constant)),e.domain(IAe(s,i,n)),s===dY&&e.unknown(t.domainImplicit?Bj:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&bY(e,t.nice)||null),i.length}function U2t(e,t,n){return t?(e.domain(IAe(e.type,t,n)),t.length):-1}function V2t(e,t,n,r,i,s){var o=Math.abs(Wn(n)-n[0]),a=o/(o-2*r),u=e===$p?rG(t,null,a):e===US?fN(t,null,a,.5):e===zS?fN(t,null,a,i||1):e===P6?iG(t,null,a,s||1):nG(t,null,a);return t=t.slice(),t[0]=u[0],t[t.length-1]=u[1],t}function IAe(e,t,n){if(FCe(e)){var r=Math.abs(t.reduce((i,s)=>i+(s<0?-1:s>0?1:0),0));r!==t.length&&n.warn("Log scale domain includes zero: "+bt(t))}return t}function H2t(e,t,n){let r=t.bins;if(r&&!Qe(r)){const i=e.domain(),s=i[0],o=Wn(i),a=r.step;let u=r.start==null?s:r.start,l=r.stop==null?o:r.stop;a||Ye("Scale bins parameter missing step property."),u<s&&(u=a*Math.ceil(s/a)),l>o&&(l=a*Math.floor(o/a)),r=Tu(u,l+a/2,a)}return r?e.bins=r:e.bins&&delete e.bins,e.type===fY&&(r?!t.domain&&!t.domainRaw&&(e.domain(r),n=r.length):e.bins=e.domain()),n}function q2t(e,t,n){var r=e.type,i=t.round||!1,s=t.range;if(t.rangeStep!=null)s=W2t(r,t,n);else if(t.scheme&&(s=G2t(r,t,n),Sn(s))){if(e.interpolator)return e.interpolator(s);Ye(`Scale type ${r} does not support interpolating color schemes.`)}if(s&&BCe(r))return e.interpolator($6(D7(s,t.reverse),t.interpolate,t.interpolateGamma));s&&t.interpolate&&e.interpolate?e.interpolate(gY(t.interpolate,t.interpolateGamma)):Sn(e.round)?e.round(i):Sn(e.rangeRound)&&e.interpolate(i?kS:ug),s&&e.range(D7(s,t.reverse))}function W2t(e,t,n){e!==PCe&&e!==g7&&Ye("Only band and point scales support rangeStep.");var r=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,i=e===g7?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*cY(n,i,r)]}function G2t(e,t,n){var r=t.schemeExtent,i,s;return Qe(t.scheme)?s=$6(t.scheme,t.interpolate,t.interpolateGamma):(i=t.scheme.toLowerCase(),s=yY(i),s||Ye(`Unrecognized scheme name: ${t.scheme}`)),n=e===O6?n+1:e===fY?n-1:e===Zx||e===N6?+t.schemeCount||M2t:n,BCe(e)?vle(s,r,t.reverse):Sn(s)?UCe(vle(s,r),n):e===dY?s:s.slice(0,n)}function vle(e,t,n){return Sn(e)&&(t||n)?zCe(e,D7(t||[0,1],n)):e}function D7(e,t){return t?e.slice().reverse():e}function RAe(e){He.call(this,null,e)}Et(RAe,He,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(ob(e.sort)),this.modified(n),t}});const xle="zero",DAe="center",PAe="normalize",NAe=["y0","y1"];function rK(e){He.call(this,null,e)}rK.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:xle,values:[xle,DAe,PAe]},{name:"as",type:"string",array:!0,length:2,default:NAe}]};Et(rK,He,{transform(e,t){var n=e.as||NAe,r=n[0],i=n[1],s=ob(e.sort),o=e.field||dE,a=e.offset===DAe?Y2t:e.offset===PAe?K2t:X2t,u,l,c,d;for(u=Q2t(t.source,e.groupby,s,o),l=0,c=u.length,d=u.max;l<c;++l)a(u[l],d,o,r,i);return t.reflow(e.modified()).modifies(n)}});function Y2t(e,t,n,r,i){for(var s=(t-e.sum)/2,o=e.length,a=0,u;a<o;++a)u=e[a],u[r]=s,u[i]=s+=Math.abs(n(u))}function K2t(e,t,n,r,i){for(var s=1/e.sum,o=0,a=e.length,u=0,l=0,c;u<a;++u)c=e[u],c[r]=o,c[i]=o=s*(l+=Math.abs(n(c)))}function X2t(e,t,n,r,i){for(var s=0,o=0,a=e.length,u=0,l,c;u<a;++u)c=e[u],l=+n(c),l<0?(c[r]=o,c[i]=o+=l):(c[r]=s,c[i]=s+=l)}function Q2t(e,t,n,r){var i=[],s=m=>m(c),o,a,u,l,c,d,f,h,p;if(t==null)i.push(e.slice());else for(o={},a=0,u=e.length;a<u;++a)c=e[a],d=t.map(s),f=o[d],f||(o[d]=f=[],i.push(f)),f.push(c);for(d=0,p=0,l=i.length;d<l;++d){for(f=i[d],a=0,h=0,u=f.length;a<u;++a)h+=Math.abs(r(f[a]));f.sum=h,h>p&&(p=h),n&&f.sort(n)}return i.max=p,i}const J2t=Object.freeze(Object.defineProperty({__proto__:null,axisticks:xAe,datajoin:wAe,encode:EAe,legendentries:_Ae,linkpath:tK,pie:nK,scale:kAe,sortitems:RAe,stack:rK},Symbol.toStringTag,{value:"Module"}));var Z2t=Math.abs,P7=Math.cos,IN=Math.sin,eCt=1e-6,OAe=Math.PI,N7=OAe/2,wle=tCt(2);function Ele(e){return e>1?N7:e<-1?-N7:Math.asin(e)}function tCt(e){return e>0?Math.sqrt(e):0}function nCt(e,t){var n=e*IN(t),r=30,i;do t-=i=(t+IN(t)-n)/(1+P7(t));while(Z2t(i)>eCt&&--r>0);return t/2}function rCt(e,t,n){function r(i,s){return[e*i*P7(s=nCt(n,s)),t*IN(s)]}return r.invert=function(i,s){return s=Ele(s/t),[i/(e*P7(s)),Ele((2*s+IN(2*s))/n)]},r}var iCt=rCt(wle/N7,wle,OAe);function sCt(){return rh(iCt).scale(169.529)}const oCt=nEe(),O7=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function aCt(e,t){return function n(){const r=t();return r.type=e,r.path=nEe().projection(r),r.copy=r.copy||function(){const i=n();return O7.forEach(s=>{r[s]&&i[s](r[s]())}),i.path.pointRadius(r.path.pointRadius()),i},MCe(r)}}function iK(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(RN[e]=aCt(e,t),this):RN[e]||null}function $Ae(e){return e&&e.path||oCt}const RN={albers:iEe,albersusa:Sft,azimuthalequalarea:Aft,azimuthalequidistant:kft,conicconformal:Dft,conicequalarea:G3,conicequidistant:Oft,equalEarth:Mft,equirectangular:Pft,gnomonic:Lft,identity:Fft,mercator:Ift,mollweide:sCt,naturalEarth1:Bft,orthographic:jft,stereographic:zft,transversemercator:Uft};for(const e in RN)iK(e,RN[e]);function uCt(){}const Ph=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function MAe(){var e=1,t=1,n=a;function r(u,l){return l.map(c=>i(u,c))}function i(u,l){var c=[],d=[];return s(u,l,f=>{n(f,u,l),lCt(f)>0?c.push([f]):d.push(f)}),d.forEach(f=>{for(var h=0,p=c.length,m;h<p;++h)if(cCt((m=c[h])[0],f)!==-1){m.push(f);return}}),{type:"MultiPolygon",value:l,coordinates:c}}function s(u,l,c){var d=[],f=[],h,p,m,y,v,b;for(h=p=-1,y=u[0]>=l,Ph[y<<1].forEach(w);++h<e-1;)m=y,y=u[h+1]>=l,Ph[m|y<<1].forEach(w);for(Ph[y<<0].forEach(w);++p<t-1;){for(h=-1,y=u[p*e+e]>=l,v=u[p*e]>=l,Ph[y<<1|v<<2].forEach(w);++h<e-1;)m=y,y=u[p*e+e+h+1]>=l,b=v,v=u[p*e+h+1]>=l,Ph[m|y<<1|v<<2|b<<3].forEach(w);Ph[y|v<<3].forEach(w)}for(h=-1,v=u[p*e]>=l,Ph[v<<2].forEach(w);++h<e-1;)b=v,v=u[p*e+h+1]>=l,Ph[v<<2|b<<3].forEach(w);Ph[v<<3].forEach(w);function w(E){var _=[E[0][0]+h,E[0][1]+p],C=[E[1][0]+h,E[1][1]+p],S=o(_),k=o(C),R,N;(R=f[S])?(N=d[k])?(delete f[R.end],delete d[N.start],R===N?(R.ring.push(C),c(R.ring)):d[R.start]=f[N.end]={start:R.start,end:N.end,ring:R.ring.concat(N.ring)}):(delete f[R.end],R.ring.push(C),f[R.end=k]=R):(R=d[k])?(N=f[S])?(delete d[R.start],delete f[N.end],R===N?(R.ring.push(C),c(R.ring)):d[N.start]=f[R.end]={start:N.start,end:R.end,ring:N.ring.concat(R.ring)}):(delete d[R.start],R.ring.unshift(_),d[R.start=S]=R):d[S]=f[k]={start:S,end:k,ring:[_,C]}}}function o(u){return u[0]*2+u[1]*(e+1)*4}function a(u,l,c){u.forEach(d=>{var f=d[0],h=d[1],p=f|0,m=h|0,y,v=l[m*e+p];f>0&&f<e&&p===f&&(y=l[m*e+p-1],d[0]=f+(c-y)/(v-y)-.5),h>0&&h<t&&m===h&&(y=l[(m-1)*e+p],d[1]=h+(c-y)/(v-y)-.5)})}return r.contour=i,r.size=function(u){if(!arguments.length)return[e,t];var l=Math.floor(u[0]),c=Math.floor(u[1]);return l>=0&&c>=0||Ye("invalid size"),e=l,t=c,r},r.smooth=function(u){return arguments.length?(n=u?a:uCt,r):n===a},r}function lCt(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}function cCt(e,t){for(var n=-1,r=t.length,i;++n<r;)if(i=dCt(e,t[n]))return i;return 0}function dCt(e,t){for(var n=t[0],r=t[1],i=-1,s=0,o=e.length,a=o-1;s<o;a=s++){var u=e[s],l=u[0],c=u[1],d=e[a],f=d[0],h=d[1];if(fCt(u,d,t))return 0;c>r!=h>r&&n<(f-l)*(r-c)/(h-c)+l&&(i=-i)}return i}function fCt(e,t,n){var r;return hCt(e,t,n)&&pCt(e[r=+(e[0]===t[0])],n[r],t[r])}function hCt(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function pCt(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function LAe(e,t,n){return function(r){var i=qf(r),s=n?Math.min(i[0],0):i[0],o=i[1],a=o-s,u=t?$0(s,o,e):a/(e+1);return Tu(s+u,o,u)}}function sK(e){He.call(this,null,e)}sK.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};Et(sK,He,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=e.field||ga,s=MAe().smooth(e.smooth!==!1),o=e.thresholds||mCt(r,i,e),a=e.as===null?null:e.as||"contour",u=[];return r.forEach(l=>{const c=i(l),d=s.size([c.width,c.height])(c.values,Qe(o)?o:o(c.values));gCt(d,c,l,e),d.forEach(f=>{u.push(_6(l,xr(a!=null?{[a]:f}:f)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function mCt(e,t,n){const r=LAe(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?r:r(e.map(i=>jy(t(i).values)))}function gCt(e,t,n,r){let i=r.scale||t.scale,s=r.translate||t.translate;if(Sn(i)&&(i=i(n,r)),Sn(s)&&(s=s(n,r)),(i===1||i==null)&&!s)return;const o=(pr(i)?i:i[0])||1,a=(pr(i)?i:i[1])||1,u=s&&s[0]||0,l=s&&s[1]||0;e.forEach(FAe(t,o,a,u,l))}function FAe(e,t,n,r,i){const s=e.x1||0,o=e.y1||0,a=t*n<0;function u(d){d.forEach(l)}function l(d){a&&d.reverse(),d.forEach(c)}function c(d){d[0]=(d[0]-s)*t+r,d[1]=(d[1]-o)*n+i}return function(d){return d.coordinates.forEach(u),d}}function _le(e,t,n){const r=e>=0?e:TG(t,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function dF(e){return Sn(e)?e:ya(+e)}function BAe(){var e=u=>u[0],t=u=>u[1],n=dE,r=[-1,-1],i=960,s=500,o=2;function a(u,l){const c=_le(r[0],u,e)>>o,d=_le(r[1],u,t)>>o,f=c?c+2:0,h=d?d+2:0,p=2*f+(i>>o),m=2*h+(s>>o),y=new Float32Array(p*m),v=new Float32Array(p*m);let b=y;u.forEach(E=>{const _=f+(+e(E)>>o),C=h+(+t(E)>>o);_>=0&&_<p&&C>=0&&C<m&&(y[_+C*p]+=+n(E))}),c>0&&d>0?(hv(p,m,y,v,c),pv(p,m,v,y,d),hv(p,m,y,v,c),pv(p,m,v,y,d),hv(p,m,y,v,c),pv(p,m,v,y,d)):c>0?(hv(p,m,y,v,c),hv(p,m,v,y,c),hv(p,m,y,v,c),b=v):d>0&&(pv(p,m,y,v,d),pv(p,m,v,y,d),pv(p,m,y,v,d),b=v);const w=l?Math.pow(2,-2*o):1/Axe(b);for(let E=0,_=p*m;E<_;++E)b[E]*=w;return{values:b,scale:1<<o,width:p,height:m,x1:f,y1:h,x2:f+(i>>o),y2:h+(s>>o)}}return a.x=function(u){return arguments.length?(e=dF(u),a):e},a.y=function(u){return arguments.length?(t=dF(u),a):t},a.weight=function(u){return arguments.length?(n=dF(u),a):n},a.size=function(u){if(!arguments.length)return[i,s];var l=+u[0],c=+u[1];return l>=0&&c>=0||Ye("invalid size"),i=l,s=c,a},a.cellSize=function(u){return arguments.length?((u=+u)>=1||Ye("invalid cell size"),o=Math.floor(Math.log(u)/Math.LN2),a):1<<o},a.bandwidth=function(u){return arguments.length?(u=Rt(u),u.length===1&&(u=[+u[0],+u[0]]),u.length!==2&&Ye("invalid bandwidth"),r=u,a):r},a}function hv(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<t;++o)for(let a=0,u=0;a<e+i;++a)a<e&&(u+=n[a+o*e]),a>=i&&(a>=s&&(u-=n[a-s+o*e]),r[a-i+o*e]=u/Math.min(a+1,e-1+s-a,s))}function pv(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<e;++o)for(let a=0,u=0;a<t+i;++a)a<t&&(u+=n[o+a*e]),a>=i&&(a>=s&&(u-=n[o+(a-s)*e]),r[o+(a-i)*e]=u/Math.min(a+1,t-1+s-a,s))}function oK(e){He.call(this,null,e)}oK.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const yCt=["x","y","weight","size","cellSize","bandwidth"];function jAe(e,t){return yCt.forEach(n=>t[n]!=null?e[n](t[n]):0),e}Et(oK,He,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=bCt(r,e.groupby),s=(e.groupby||[]).map(Oi),o=jAe(BAe(),e),a=e.as||"grid",u=[];function l(c,d){for(let f=0;f<s.length;++f)c[s[f]]=d[f];return c}return u=i.map(c=>xr(l({[a]:o(c,e.counts)},c.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function bCt(e,t){var n=[],r=c=>c(a),i,s,o,a,u,l;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function aK(e){He.call(this,null,e)}aK.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};Et(aK,He,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=MAe().smooth(e.smooth!==!1),i=e.values,s=e.thresholds||LAe(e.count||10,e.nice,!!i),o=e.size,a,u;return i||(i=t.materialize(t.SOURCE).source,a=jAe(BAe(),e)(i,!0),u=FAe(a,a.scale||1,a.scale||1,0,0),o=[a.width,a.height],i=a.values),s=Qe(s)?s:s(i),i=r.size(o)(i,s),u&&i.forEach(u),this.value&&(n.rem=this.value),this.value=n.source=n.add=(i||[]).map(xr),n}});const $7="Feature",uK="FeatureCollection",vCt="MultiPoint";function lK(e){He.call(this,null,e)}lK.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};Et(lK,He,{transform(e,t){var n=this._features,r=this._points,i=e.fields,s=i&&i[0],o=i&&i[1],a=e.geojson||!i&&ga,u=t.ADD,l;l=e.modified()||t.changed(t.REM)||t.modified(la(a))||s&&t.modified(la(s))||o&&t.modified(la(o)),(!this.value||l)&&(u=t.SOURCE,this._features=n=[],this._points=r=[]),a&&t.visit(u,c=>n.push(a(c))),s&&o&&(t.visit(u,c=>{var d=s(c),f=o(c);d!=null&&f!=null&&(d=+d)===d&&(f=+f)===f&&r.push([d,f])}),n=n.concat({type:$7,geometry:{type:vCt,coordinates:r}})),this.value={type:uK,features:n}}});function cK(e){He.call(this,null,e)}cK.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};Et(cK,He,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||ga,s=e.as||"path",o=n.SOURCE;!r||e.modified()?(this.value=r=$Ae(e.projection),n.materialize().reflow()):o=i===ga||t.modified(i.fields)?n.ADD_MOD:n.ADD;const a=xCt(r,e.pointRadius);return n.visit(o,u=>u[s]=r(i(u))),r.pointRadius(a),n.modifies(s)}});function xCt(e,t){const n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function dK(e){He.call(this,null,e)}dK.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};Et(dK,He,{transform(e,t){var n=e.projection,r=e.fields[0],i=e.fields[1],s=e.as||["x","y"],o=s[0],a=s[1],u;function l(c){const d=n([r(c),i(c)]);d?(c[o]=d[0],c[a]=d[1]):(c[o]=void 0,c[a]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,l):(u=t.modified(r.fields)||t.modified(i.fields),t.visit(u?t.ADD_MOD:t.ADD,l)),t.modifies(s)}});function fK(e){He.call(this,null,e)}fK.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};Et(fK,He,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.as||"shape",s=n.ADD;return(!r||e.modified())&&(this.value=r=wCt($Ae(e.projection),e.field||nc("datum"),e.pointRadius),n.materialize().reflow(),s=n.SOURCE),n.visit(s,o=>o[i]=r),n.modifies(i)}});function wCt(e,t,n){const r=n==null?i=>e(t(i)):i=>{var s=e.pointRadius(),o=e.pointRadius(n)(t(i));return e.pointRadius(s),o};return r.context=i=>(e.context(i),r),r}function hK(e){He.call(this,[],e),this.generator=sft()}hK.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};Et(hK,He,{transform(e,t){var n=this.value,r=this.generator,i;if(!n.length||e.modified())for(const s in e)Sn(r[s])&&r[s](e[s]);return i=r(),n.length?t.mod.push(j2e(n[0],i)):t.add.push(xr(i)),n[0]=i,t}});function pK(e){He.call(this,null,e)}pK.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};Et(pK,He,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,r=e.resolve==="shared",i=e.field||ga,s=_Ct(e.opacity,e),o=ECt(e.color,e),a=e.as||"image",u={$x:0,$y:0,$value:0,$max:r?jy(n.map(l=>jy(i(l).values))):0};return n.forEach(l=>{const c=i(l),d=Cn({},l,u);r||(d.$max=jy(c.values||[])),l[a]=TCt(c,d,o.dep?o:ya(o(d)),s.dep?s:ya(s(d)))}),t.reflow(!0).modifies(a)}});function ECt(e,t){let n;return Sn(e)?(n=r=>M0(e(r,t)),n.dep=zAe(e)):n=ya(M0(e||"#888")),n}function _Ct(e,t){let n;return Sn(e)?(n=r=>e(r,t),n.dep=zAe(e)):e?n=ya(e):(n=r=>r.$value/r.$max||0,n.dep=!0),n}function zAe(e){if(!Sn(e))return!1;const t=dd(la(e));return t.$x||t.$y||t.$value||t.$max}function TCt(e,t,n,r){const i=e.width,s=e.height,o=e.x1||0,a=e.y1||0,u=e.x2||i,l=e.y2||s,c=e.values,d=c?y=>c[y]:Km,f=b0(u-o,l-a),h=f.getContext("2d"),p=h.getImageData(0,0,u-o,l-a),m=p.data;for(let y=a,v=0;y<l;++y){t.$y=y-a;for(let b=o,w=y*i;b<u;++b,v+=4){t.$x=b-o,t.$value=d(b+w);const E=n(t);m[v+0]=E.r,m[v+1]=E.g,m[v+2]=E.b,m[v+3]=~~(255*r(t))}}return h.putImageData(p,0,0),f}function UAe(e){He.call(this,null,e),this.modified(!0)}Et(UAe,He,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=SCt(e.type),O7.forEach(r=>{e[r]!=null&&Tle(n,r,e[r])})):O7.forEach(r=>{e.modified(r)&&Tle(n,r,e[r])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&CCt(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function CCt(e,t){const n=ACt(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function SCt(e){const t=iK((e||"mercator").toLowerCase());return t||Ye("Unrecognized projection type: "+e),t()}function Tle(e,t,n){Sn(e[t])&&e[t](n)}function ACt(e){return e=Rt(e),e.length===1?e[0]:{type:uK,features:e.reduce((t,n)=>t.concat(kCt(n)),[])}}function kCt(e){return e.type===uK?e.features:Rt(e).filter(t=>t!=null).map(t=>t.type===$7?t:{type:$7,geometry:t})}const ICt=Object.freeze(Object.defineProperty({__proto__:null,contour:aK,geojson:lK,geopath:cK,geopoint:dK,geoshape:fK,graticule:hK,heatmap:pK,isocontour:sK,kde2d:oK,projection:UAe},Symbol.toStringTag,{value:"Module"})),Cle={center:Kct,collide:pdt,nbody:Cdt,link:gdt,x:Sdt,y:Adt},PT="forces",M7=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],RCt=["static","iterations"],VAe=["x","y","vx","vy"];function mK(e){He.call(this,null,e)}mK.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:VAe}]};Et(mK,He,{transform(e,t){var n=this.value,r=t.changed(t.ADD_REM),i=e.modified(M7),s=e.iterations||300;if(n?(r&&(t.modifies("index"),n.nodes(t.source)),(i||t.changed(t.MOD))&&HAe(n,e,0,t)):(this.value=n=PCt(t.source,e),n.on("tick",DCt(t.dataflow,this)),e.static||(r=!0,n.tick()),t.modifies("index")),i||r||e.modified(RCt)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/s)),e.static)for(n.stop();--s>=0;)n.tick();else if(n.stopped()&&n.restart(),!r)return t.StopPropagation}return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let a=this._argops,u=0,l=a.length,c;u<l;++u)if(c=a[u],!(c.name!==PT||c.op._argval.force!=="link")){for(var r=c.op._argops,i=0,s=r.length,o;i<s;++i)if(r[i].name==="links"&&(o=r[i].op.source)){n.pulse(o,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(VAe)}});function DCt(e,t){return()=>e.touch(t).run()}function PCt(e,t){const n=Tdt(e),r=n.stop,i=n.restart;let s=!1;return n.stopped=()=>s,n.restart=()=>(s=!1,i()),n.stop=()=>(s=!0,r()),HAe(n,t,!0).on("end",()=>s=!0)}function HAe(e,t,n,r){var i=Rt(t.forces),s,o,a,u;for(s=0,o=M7.length;s<o;++s)a=M7[s],a!==PT&&t.modified(a)&&e[a](t[a]);for(s=0,o=i.length;s<o;++s)u=PT+s,a=n||t.modified(PT,s)?OCt(i[s]):r&&NCt(i[s],r)?e.force(u):null,a&&e.force(u,a);for(o=e.numForces||0;s<o;++s)e.force(PT+s,null);return e.numForces=i.length,e}function NCt(e,t){var n,r;for(n in e)if(Sn(r=e[n])&&t.modified(la(r)))return 1;return 0}function OCt(e){var t,n;Ot(Cle,e.force)||Ye("Unrecognized force: "+e.force),t=Cle[e.force]();for(n in e)Sn(t[n])&&$Ct(t[n],e[n],e);return t}function $Ct(e,t,n){e(Sn(t)?r=>t(r,n):t)}const MCt=Object.freeze(Object.defineProperty({__proto__:null,force:mK},Symbol.toStringTag,{value:"Module"}));function L7(e,t,n){const r={};return e.each(i=>{const s=i.data;n(s)&&(r[t(s)]=i)}),e.lookup=r,e}function gK(e){He.call(this,null,e)}gK.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const LCt=e=>e.values;Et(gK,He,{transform(e,t){t.source||Ye("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),i=t.clone(),s=this.value;return(!s||r||t.changed())&&(s&&s.each(o=>{o.children&&E6(o.data)&&i.rem.push(o.data)}),this.value=s=EW({values:Rt(e.keys).reduce((o,a)=>(o.key(a),o),FCt()).entries(i.source)},LCt),n&&s.each(o=>{o.children&&(o=xr(o.data),i.add.push(o),i.source.push(o))}),L7(s,Jt,Jt)),i.source.root=s,i}});function FCt(){const e=[],t={entries:i=>r(n(i,0),0),key:i=>(e.push(i),t)};function n(i,s){if(s>=e.length)return i;const o=i.length,a=e[s++],u={},l={};let c=-1,d,f,h;for(;++c<o;)d=a(f=i[c])+"",(h=u[d])?h.push(f):u[d]=[f];for(d in u)l[d]=n(u[d],s);return l}function r(i,s){if(++s>e.length)return i;const o=[];for(const a in i)o.push({key:a,values:r(i[a],s)});return o}return t}function Qp(e){He.call(this,null,e)}const BCt=(e,t)=>e.parent===t.parent?1:2;Et(Qp,He,{transform(e,t){(!t.source||!t.source.root)&&Ye(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),r=this.fields,i=t.source.root,s=e.as||r;e.field?i.sum(e.field):i.count(),e.sort&&i.sort(ob(e.sort,o=>o.data)),jCt(n,this.params,e),n.separation&&n.separation(e.separation!==!1?BCt:dE);try{this.value=n(i)}catch(o){Ye(o)}return i.each(o=>zCt(o,r,s)),t.reflow(e.modified()).modifies(s).modifies("leaf")}});function jCt(e,t,n){for(let r,i=0,s=t.length;i<s;++i)r=t[i],r in n&&e[r](n[r])}function zCt(e,t,n){const r=e.data,i=t.length-1;for(let s=0;s<i;++s)r[n[s]]=e[t[s]];r[n[i]]=e.children?e.children.length:0}const F7=["x","y","r","depth","children"];function yK(e){Qp.call(this,e)}yK.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:F7.length,default:F7}]};Et(yK,Qp,{layout:Aht,params:["radius","size","padding"],fields:F7});const B7=["x0","y0","x1","y1","depth","children"];function bK(e){Qp.call(this,e)}bK.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:B7.length,default:B7}]};Et(bK,Qp,{layout:kht,params:["size","round","padding"],fields:B7});function vK(e){He.call(this,null,e)}vK.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};Et(vK,He,{transform(e,t){t.source||Ye("Stratify transform requires an upstream data source.");let n=this.value;const r=e.modified(),i=t.fork(t.ALL).materialize(t.SOURCE),s=!n||r||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return i.source=i.source.slice(),s&&(n=i.source.length?L7(Coe().id(e.key).parentId(e.parentKey)(i.source),e.key,rc):L7(Coe()([{}]),e.key,e.key)),i.source.root=this.value=n,i}});const Sle={tidy:Fht,cluster:Xft},j7=["x","y","depth","children"];function xK(e){Qp.call(this,e)}xK.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:j7.length,default:j7}]};Et(xK,Qp,{layout(e){const t=e||"tidy";if(Ot(Sle,t))return Sle[t]();Ye("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:j7});function wK(e){He.call(this,[],e)}wK.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};Et(wK,He,{transform(e,t){const n=this.value,r=t.source&&t.source.root,i=t.fork(t.NO_SOURCE),s={};return r||Ye("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(i.rem=n,t.visit(t.SOURCE,o=>s[Jt(o)]=1),r.each(o=>{const a=o.data,u=o.parent&&o.parent.data;u&&s[Jt(a)]&&s[Jt(u)]&&i.add.push(xr({source:u,target:a}))}),this.value=i.add):t.changed(t.MOD)&&(t.visit(t.MOD,o=>s[Jt(o)]=1),n.forEach(o=>{(s[Jt(o.source)]||s[Jt(o.target)])&&i.mod.push(o)})),i}});const Ale={binary:jht,dice:PS,slice:WO,slicedice:zht,squarify:EEe,resquarify:Uht},z7=["x0","y0","x1","y1","depth","children"];function EK(e){Qp.call(this,e)}EK.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:z7.length,default:z7}]};Et(EK,Qp,{layout(){const e=Bht();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{Ot(Ale,t)?e.tile(Ale[t]):Ye("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:z7});const UCt=Object.freeze(Object.defineProperty({__proto__:null,nest:gK,pack:yK,partition:bK,stratify:vK,tree:xK,treelinks:wK,treemap:EK},Symbol.toStringTag,{value:"Module"})),fF=4278190080;function VCt(e,t){const n=e.bitmap();return(t||[]).forEach(r=>n.set(e(r.boundary[0]),e(r.boundary[3]))),[n,void 0]}function HCt(e,t,n,r,i){const s=e.width,o=e.height,a=r||i,u=b0(s,o).getContext("2d"),l=b0(s,o).getContext("2d"),c=a&&b0(s,o).getContext("2d");n.forEach(k=>uP(u,k,!1)),uP(l,t,!1),a&&uP(c,t,!0);const d=hF(u,s,o),f=hF(l,s,o),h=a&&hF(c,s,o),p=e.bitmap(),m=a&&e.bitmap();let y,v,b,w,E,_,C,S;for(v=0;v<o;++v)for(y=0;y<s;++y)E=v*s+y,_=d[E]&fF,S=f[E]&fF,C=a&&h[E]&fF,(_||C||S)&&(b=e(y),w=e(v),!i&&(_||S)&&p.set(b,w),a&&(_||C)&&m.set(b,w));return[p,m]}function hF(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function uP(e,t,n){if(!t.length)return;const r=t[0].mark.marktype;r==="group"?t.forEach(i=>{i.items.forEach(s=>uP(e,s.items,n))}):El[r].draw(e,{items:n?t.map(qCt):t})}function qCt(e){const t=_6(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const Nh=5,ka=31,vC=32,jm=new Uint32Array(vC+1),Vc=new Uint32Array(vC+1);Vc[0]=0;jm[0]=~Vc[0];for(let e=1;e<=vC;++e)Vc[e]=Vc[e-1]<<1|1,jm[e]=~Vc[e];function WCt(e,t){const n=new Uint32Array(~~((e*t+vC)/vC));function r(s,o){n[s]|=o}function i(s,o){n[s]&=o}return{array:n,get:(s,o)=>{const a=o*e+s;return n[a>>>Nh]&1<<(a&ka)},set:(s,o)=>{const a=o*e+s;r(a>>>Nh,1<<(a&ka))},clear:(s,o)=>{const a=o*e+s;i(a>>>Nh,~(1<<(a&ka)))},getRange:(s,o,a,u)=>{let l=u,c,d,f,h;for(;l>=o;--l)if(c=l*e+s,d=l*e+a,f=c>>>Nh,h=d>>>Nh,f===h){if(n[f]&jm[c&ka]&Vc[(d&ka)+1])return!0}else{if(n[f]&jm[c&ka]||n[h]&Vc[(d&ka)+1])return!0;for(let p=f+1;p<h;++p)if(n[p])return!0}return!1},setRange:(s,o,a,u)=>{let l,c,d,f,h;for(;o<=u;++o)if(l=o*e+s,c=o*e+a,d=l>>>Nh,f=c>>>Nh,d===f)r(d,jm[l&ka]&Vc[(c&ka)+1]);else for(r(d,jm[l&ka]),r(f,Vc[(c&ka)+1]),h=d+1;h<f;++h)r(h,4294967295)},clearRange:(s,o,a,u)=>{let l,c,d,f,h;for(;o<=u;++o)if(l=o*e+s,c=o*e+a,d=l>>>Nh,f=c>>>Nh,d===f)i(d,Vc[l&ka]|jm[(c&ka)+1]);else for(i(d,Vc[l&ka]),i(f,jm[(c&ka)+1]),h=d+1;h<f;++h)i(h,0)},outOfBounds:(s,o,a,u)=>s<0||o<0||u>=t||a>=e}}function GCt(e,t,n){const r=Math.max(1,Math.sqrt(e*t/1e6)),i=~~((e+2*n+r)/r),s=~~((t+2*n+r)/r),o=a=>~~((a+n)/r);return o.invert=a=>a*r-n,o.bitmap=()=>WCt(i,s),o.ratio=r,o.padding=n,o.width=e,o.height=t,o}function YCt(e,t,n,r){const i=e.width,s=e.height;return function(o){const a=o.datum.datum.items[r].items,u=a.length,l=o.datum.fontSize,c=ll.width(o.datum,o.datum.text);let d=0,f,h,p,m,y,v,b;for(let w=0;w<u;++w)f=a[w].x,p=a[w].y,h=a[w].x2===void 0?f:a[w].x2,m=a[w].y2===void 0?p:a[w].y2,y=(f+h)/2,v=(p+m)/2,b=Math.abs(h-f+m-p),b>=d&&(d=b,o.x=y,o.y=v);return y=c/2,v=l/2,f=o.x-y,h=o.x+y,p=o.y-v,m=o.y+v,o.align="center",f<0&&h<=i?o.align="left":0<=f&&i<h&&(o.align="right"),o.baseline="middle",p<0&&m<=s?o.baseline="top":0<=p&&s<m&&(o.baseline="bottom"),!0}}function DN(e,t,n,r,i,s){let o=n/2;return e-o<0||e+o>i||t-(o=r/2)<0||t+o>s}function s0(e,t,n,r,i,s,o,a){const u=i*s/(r*2),l=e(t-u),c=e(t+u),d=e(n-(s=s/2)),f=e(n+s);return o.outOfBounds(l,d,c,f)||o.getRange(l,d,c,f)||a&&a.getRange(l,d,c,f)}function KCt(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1];function u(l,c,d,f,h){const p=e.invert(l),m=e.invert(c);let y=d,v=s,b;if(!DN(p,m,f,h,i,s)&&!s0(e,p,m,h,f,y,o,a)&&!s0(e,p,m,h,f,h,o,null)){for(;v-y>=1;)b=(y+v)/2,s0(e,p,m,h,f,b,o,a)?v=b:y=b;if(y>d)return[p,m,y,!0]}}return function(l){const c=l.datum.datum.items[r].items,d=c.length,f=l.datum.fontSize,h=ll.width(l.datum,l.datum.text);let p=n?f:0,m=!1,y=!1,v=0,b,w,E,_,C,S,k,R,N,O,F,$,z,q,W,J,K;for(let Z=0;Z<d;++Z){for(b=c[Z].x,E=c[Z].y,w=c[Z].x2===void 0?b:c[Z].x2,_=c[Z].y2===void 0?E:c[Z].y2,b>w&&(K=b,b=w,w=K),E>_&&(K=E,E=_,_=K),N=e(b),F=e(w),O=~~((N+F)/2),$=e(E),q=e(_),z=~~(($+q)/2),k=O;k>=N;--k)for(R=z;R>=$;--R)J=u(k,R,p,h,f),J&&([l.x,l.y,p,m]=J);for(k=O;k<=F;++k)for(R=z;R<=q;++R)J=u(k,R,p,h,f),J&&([l.x,l.y,p,m]=J);!m&&!n&&(W=Math.abs(w-b+_-E),C=(b+w)/2,S=(E+_)/2,W>=v&&!DN(C,S,h,f,i,s)&&!s0(e,C,S,f,h,f,o,null)&&(v=W,l.x=C,l.y=S,y=!0))}return m||y?(C=h/2,S=f/2,o.setRange(e(l.x-C),e(l.y-S),e(l.x+C),e(l.y+S)),l.align="center",l.baseline="middle",!0):!1}}const XCt=[-1,-1,1,1],QCt=[-1,1,-1,1];function JCt(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],u=e.bitmap();return function(l){const c=l.datum.datum.items[r].items,d=c.length,f=l.datum.fontSize,h=ll.width(l.datum,l.datum.text),p=[];let m=n?f:0,y=!1,v=!1,b=0,w,E,_,C,S,k,R,N,O,F,$,z;for(let q=0;q<d;++q){for(w=c[q].x,_=c[q].y,E=c[q].x2===void 0?w:c[q].x2,C=c[q].y2===void 0?_:c[q].y2,p.push([e((w+E)/2),e((_+C)/2)]);p.length;)if([R,N]=p.pop(),!(o.get(R,N)||a.get(R,N)||u.get(R,N))){u.set(R,N);for(let W=0;W<4;++W)S=R+XCt[W],k=N+QCt[W],u.outOfBounds(S,k,S,k)||p.push([S,k]);if(S=e.invert(R),k=e.invert(N),O=m,F=s,!DN(S,k,h,f,i,s)&&!s0(e,S,k,f,h,O,o,a)&&!s0(e,S,k,f,h,f,o,null)){for(;F-O>=1;)$=(O+F)/2,s0(e,S,k,f,h,$,o,a)?F=$:O=$;O>m&&(l.x=S,l.y=k,m=O,y=!0)}}!y&&!n&&(z=Math.abs(E-w+C-_),S=(w+E)/2,k=(_+C)/2,z>=b&&!DN(S,k,h,f,i,s)&&!s0(e,S,k,f,h,f,o,null)&&(b=z,l.x=S,l.y=k,v=!0))}return y||v?(S=h/2,k=f/2,o.setRange(e(l.x-S),e(l.y-k),e(l.x+S),e(l.y+k)),l.align="center",l.baseline="middle",!0):!1}}const ZCt=["right","center","left"],eSt=["bottom","middle","top"];function tSt(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],u=r.length;return function(l){const c=l.boundary,d=l.datum.fontSize;if(c[2]<0||c[5]<0||c[0]>i||c[3]>s)return!1;let f=l.textWidth??0,h,p,m,y,v,b,w,E,_,C,S,k,R,N,O;for(let F=0;F<u;++F){if(h=(n[F]&3)-1,p=(n[F]>>>2&3)-1,m=h===0&&p===0||r[F]<0,y=h&&p?Math.SQRT1_2:1,v=r[F]<0?-1:1,b=c[1+h]+r[F]*h*y,S=c[4+p]+v*d*p/2+r[F]*p*y,E=S-d/2,_=S+d/2,k=e(b),N=e(E),O=e(_),!f)if(kle(k,k,N,O,o,a,b,b,E,_,c,m))f=ll.width(l.datum,l.datum.text);else continue;if(C=b+v*f*h/2,b=C-f/2,w=C+f/2,k=e(b),R=e(w),kle(k,R,N,O,o,a,b,w,E,_,c,m))return l.x=h?h*v<0?w:b:C,l.y=p?p*v<0?_:E:S,l.align=ZCt[h*v+1],l.baseline=eSt[p*v+1],o.setRange(k,N,R,O),!0}return!1}}function kle(e,t,n,r,i,s,o,a,u,l,c,d){return!(i.outOfBounds(e,n,t,r)||(d&&s||i).getRange(e,n,t,r))}const pF=0,mF=4,gF=8,yF=0,bF=1,vF=2,nSt={"top-left":pF+yF,top:pF+bF,"top-right":pF+vF,left:mF+yF,middle:mF+bF,right:mF+vF,"bottom-left":gF+yF,bottom:gF+bF,"bottom-right":gF+vF},rSt={naive:YCt,"reduced-search":KCt,floodfill:JCt};function iSt(e,t,n,r,i,s,o,a,u,l,c){if(!e.length)return e;const d=Math.max(r.length,i.length),f=sSt(r,d),h=oSt(i,d),p=aSt(e[0].datum),m=p==="group"&&e[0].datum.items[u].marktype,y=m==="area",v=uSt(p,m,a,u),b=l===null||l===1/0,w=y&&c==="naive";let E=-1,_=-1;const C=e.map(N=>{const O=b?ll.width(N,N.text):void 0;return E=Math.max(E,O),_=Math.max(_,N.fontSize),{datum:N,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:v(N),textWidth:O}});l=l===null||l===1/0?Math.max(E,_)+Math.max(...r):l;const S=GCt(t[0],t[1],l);let k;if(!w){n&&C.sort((F,$)=>n(F.datum,$.datum));let N=!1;for(let F=0;F<h.length&&!N;++F)N=h[F]===5||f[F]<0;const O=(p&&o||y)&&e.map(F=>F.datum);k=s.length||O?HCt(S,O||[],s,N,y):VCt(S,o&&C)}const R=y?rSt[c](S,k,o,u):tSt(S,k,h,f);return C.forEach(N=>N.opacity=+R(N)),C}function sSt(e,t){const n=new Float64Array(t),r=e.length;for(let i=0;i<r;++i)n[i]=e[i]||0;for(let i=r;i<t;++i)n[i]=n[r-1];return n}function oSt(e,t){const n=new Int8Array(t),r=e.length;for(let i=0;i<r;++i)n[i]|=nSt[e[i]];for(let i=r;i<t;++i)n[i]=n[r-1];return n}function aSt(e){return e&&e.mark&&e.mark.marktype}function uSt(e,t,n,r){const i=s=>[s.x,s.x,s.x,s.y,s.y,s.y];return e?e==="line"||e==="area"?s=>i(s.datum):t==="line"?s=>{const o=s.datum.items[r].items;return i(o.length?o[n==="start"?0:o.length-1]:{x:NaN,y:NaN})}:s=>{const o=s.datum.bounds;return[o.x1,(o.x1+o.x2)/2,o.x2,o.y1,(o.y1+o.y2)/2,o.y2]}:i}const U7=["x","y","opacity","align","baseline"],qAe=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function _K(e){He.call(this,null,e)}_K.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:qAe},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:U7.length,default:U7}]};Et(_K,He,{transform(e,t){function n(s){const o=e[s];return Sn(o)&&t.modified(o.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&Ye("Size parameter should be specified as a [width, height] array.");const i=e.as||U7;return iSt(t.materialize(t.SOURCE).source||[],e.size,e.sort,Rt(e.offset==null?1:e.offset),Rt(e.anchor||qAe),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(s=>{const o=s.datum;o[i[0]]=s.x,o[i[1]]=s.y,o[i[2]]=s.opacity,o[i[3]]=s.align,o[i[4]]=s.baseline}),t.reflow(r).modifies(i)}});const lSt=Object.freeze(Object.defineProperty({__proto__:null,label:_K},Symbol.toStringTag,{value:"Module"}));function WAe(e,t){var n=[],r=function(c){return c(a)},i,s,o,a,u,l;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function TK(e){He.call(this,null,e)}TK.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};Et(TK,He,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=WAe(r,e.groupby),s=(e.groupby||[]).map(Oi),o=s.length,a=e.as||[Oi(e.x),Oi(e.y)],u=[];i.forEach(l=>{iCe(l,e.x,e.y,e.bandwidth||.3).forEach(c=>{const d={};for(let f=0;f<o;++f)d[s[f]]=l.dims[f];d[a[0]]=c[0],d[a[1]]=c[1],u.push(xr(d))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});const V7={constant:MG,linear:LG,log:eCe,exp:tCe,pow:nCe,quad:FG,poly:rCe},cSt=(e,t)=>e==="poly"?t:e==="quad"?2:1;function CK(e){He.call(this,null,e)}CK.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(V7)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};Et(CK,He,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=WAe(r,e.groupby),s=(e.groupby||[]).map(Oi),o=e.method||"linear",a=e.order==null?3:e.order,u=cSt(o,a),l=e.as||[Oi(e.x),Oi(e.y)],c=V7[o],d=[];let f=e.extent;Ot(V7,o)||Ye("Invalid regression method: "+o),f!=null&&o==="log"&&f[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),f=null),i.forEach(h=>{if(h.length<=u){t.dataflow.warn("Skipping regression with more parameters than data points.");return}const m=c(h,e.x,e.y,a);if(e.params){d.push(xr({keys:h.dims,coef:m.coef,rSquared:m.rSquared}));return}const y=f||qf(h,e.x),v=b=>{const w={};for(let E=0;E<s.length;++E)w[s[E]]=h.dims[E];w[l[0]]=b[0],w[l[1]]=b[1],d.push(xr(w))};o==="linear"||o==="constant"?y.forEach(b=>v([b,m.predict(b)])):R6(m.predict,y,25,200).forEach(v)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=d}return n}});const dSt=Object.freeze(Object.defineProperty({__proto__:null,loess:TK,regression:CK},Symbol.toStringTag,{value:"Module"}));function SK(e){He.call(this,null,e)}SK.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const fSt=[-1e5,-1e5,1e5,1e5];Et(SK,He,{transform(e,t){const n=e.as||"path",r=t.source;if(!r||!r.length)return t;let i=e.size;i=i?[0,0,i[0],i[1]]:(i=e.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:fSt;const s=this.value=cW.from(r,e.x,e.y).voronoi(i);for(let o=0,a=r.length;o<a;++o){const u=s.cellPolygon(o);r[o][n]=u&&!pSt(u)?hSt(u):null}return t.reflow(e.modified()).modifies(n)}});function hSt(e){const t=e[0][0],n=e[0][1];let r=e.length-1;for(;e[r][0]===t&&e[r][1]===n;--r);return"M"+e.slice(0,r+1).join("L")+"Z"}function pSt(e){return e.length===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}const mSt=Object.freeze(Object.defineProperty({__proto__:null,voronoi:SK},Symbol.toStringTag,{value:"Module"}));var xF=Math.PI/180,NT=64,lP=2048;function gSt(){var e=[256,256],t,n,r,i,s,o,a,u=GAe,l=[],c=Math.random,d={};d.layout=function(){for(var p=f(b0()),m=ESt((e[0]>>5)*e[1]),y=null,v=l.length,b=-1,w=[],E=l.map(C=>({text:t(C),font:n(C),style:i(C),weight:s(C),rotate:o(C),size:~~(r(C)+1e-14),padding:a(C),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:C})).sort((C,S)=>S.size-C.size);++b<v;){var _=E[b];_.x=e[0]*(c()+.5)>>1,_.y=e[1]*(c()+.5)>>1,ySt(p,_,E,b),_.hasText&&h(m,_,y)&&(w.push(_),y?vSt(y,_):y=[{x:_.x+_.x0,y:_.y+_.y0},{x:_.x+_.x1,y:_.y+_.y1}],_.x-=e[0]>>1,_.y-=e[1]>>1)}return w};function f(p){p.width=p.height=1;var m=Math.sqrt(p.getContext("2d").getImageData(0,0,1,1).data.length>>2);p.width=(NT<<5)/m,p.height=lP/m;var y=p.getContext("2d");return y.fillStyle=y.strokeStyle="red",y.textAlign="center",{context:y,ratio:m}}function h(p,m,y){for(var v=m.x,b=m.y,w=Math.hypot(e[0],e[1]),E=u(e),_=c()<.5?1:-1,C=-_,S,k,R;(S=E(C+=_))&&(k=~~S[0],R=~~S[1],!(Math.min(Math.abs(k),Math.abs(R))>=w));)if(m.x=v+k,m.y=b+R,!(m.x+m.x0<0||m.y+m.y0<0||m.x+m.x1>e[0]||m.y+m.y1>e[1])&&(!y||!bSt(m,p,e[0]))&&(!y||xSt(m,y))){for(var N=m.sprite,O=m.width>>5,F=e[0]>>5,$=m.x-(O<<4),z=$&127,q=32-z,W=m.y1-m.y0,J=(m.y+m.y0)*F+($>>5),K,Z=0;Z<W;Z++){K=0;for(var U=0;U<=O;U++)p[J+U]|=K<<q|(U<O?(K=N[Z*O+U])>>>z:0);J+=F}return m.sprite=null,!0}return!1}return d.words=function(p){return arguments.length?(l=p,d):l},d.size=function(p){return arguments.length?(e=[+p[0],+p[1]],d):e},d.font=function(p){return arguments.length?(n=Hg(p),d):n},d.fontStyle=function(p){return arguments.length?(i=Hg(p),d):i},d.fontWeight=function(p){return arguments.length?(s=Hg(p),d):s},d.rotate=function(p){return arguments.length?(o=Hg(p),d):o},d.text=function(p){return arguments.length?(t=Hg(p),d):t},d.spiral=function(p){return arguments.length?(u=_St[p]||p,d):u},d.fontSize=function(p){return arguments.length?(r=Hg(p),d):r},d.padding=function(p){return arguments.length?(a=Hg(p),d):a},d.random=function(p){return arguments.length?(c=p,d):c},d}function ySt(e,t,n,r){if(!t.sprite){var i=e.context,s=e.ratio;i.clearRect(0,0,(NT<<5)/s,lP/s);var o=0,a=0,u=0,l=n.length,c,d,f,h,p;for(--r;++r<l;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/s)+"px "+t.font,c=i.measureText(t.text+"m").width*s,f=t.size<<1,t.rotate){var m=Math.sin(t.rotate*xF),y=Math.cos(t.rotate*xF),v=c*y,b=c*m,w=f*y,E=f*m;c=Math.max(Math.abs(v+E),Math.abs(v-E))+31>>5<<5,f=~~Math.max(Math.abs(b+w),Math.abs(b-w))}else c=c+31>>5<<5;if(f>u&&(u=f),o+c>=NT<<5&&(o=0,a+=u,u=0),a+f>=lP)break;i.translate((o+(c>>1))/s,(a+(f>>1))/s),t.rotate&&i.rotate(t.rotate*xF),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=c,t.height=f,t.xoff=o,t.yoff=a,t.x1=c>>1,t.y1=f>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,o+=c}for(var _=i.getImageData(0,0,(NT<<5)/s,lP/s).data,C=[];--r>=0;)if(t=n[r],!!t.hasText){for(c=t.width,d=c>>5,f=t.y1-t.y0,h=0;h<f*d;h++)C[h]=0;if(o=t.xoff,o==null)return;a=t.yoff;var S=0,k=-1;for(p=0;p<f;p++){for(h=0;h<c;h++){var R=d*p+(h>>5),N=_[(a+p)*(NT<<5)+(o+h)<<2]?1<<31-h%32:0;C[R]|=N,S|=N}S?k=p:(t.y0++,f--,p--,a++)}t.y1=t.y0+k,t.sprite=C.slice(0,(t.y1-t.y0)*d)}}}function bSt(e,t,n){n>>=5;for(var r=e.sprite,i=e.width>>5,s=e.x-(i<<4),o=s&127,a=32-o,u=e.y1-e.y0,l=(e.y+e.y0)*n+(s>>5),c,d=0;d<u;d++){c=0;for(var f=0;f<=i;f++)if((c<<a|(f<i?(c=r[d*i+f])>>>o:0))&t[l+f])return!0;l+=n}return!1}function vSt(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function xSt(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function GAe(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function wSt(e){var t=4,n=t*e[0]/e[1],r=0,i=0;return function(s){var o=s<0?-1:1;switch(Math.sqrt(1+4*o*s)-o&3){case 0:r+=n;break;case 1:i+=t;break;case 2:r-=n;break;default:i-=t;break}return[r,i]}}function ESt(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function Hg(e){return typeof e=="function"?e:function(){return e}}var _St={archimedean:GAe,rectangular:wSt};const YAe=["x","y","font","fontSize","fontStyle","fontWeight","angle"],TSt=["text","font","rotate","fontSize","fontStyle","fontWeight"];function AK(e){He.call(this,gSt(),e)}AK.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:YAe}]};Et(AK,He,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&Ye("Wordcloud size dimensions must be non-zero.");function n(p){const m=e[p];return Sn(m)&&t.modified(m.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||TSt.some(n)))return;const i=t.materialize(t.SOURCE).source,s=this.value,o=e.as||YAe;let a=e.fontSize||14,u;if(Sn(a)?u=e.fontSizeRange:a=ya(a),u){const p=a,m=mr("sqrt")().domain(qf(i,p)).range(u);a=y=>m(p(y))}i.forEach(p=>{p[o[0]]=NaN,p[o[1]]=NaN,p[o[3]]=0});const l=s.words(i).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(a).random(sc).layout(),c=s.size(),d=c[0]>>1,f=c[1]>>1,h=l.length;for(let p=0,m,y;p<h;++p)m=l[p],y=m.datum,y[o[0]]=m.x+d,y[o[1]]=m.y+f,y[o[2]]=m.font,y[o[3]]=m.size,y[o[4]]=m.style,y[o[5]]=m.weight,y[o[6]]=m.rotate;return t.reflow(r).modifies(o)}});const CSt=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:AK},Symbol.toStringTag,{value:"Module"})),SSt=e=>new Uint8Array(e),ASt=e=>new Uint16Array(e),h2=e=>new Uint32Array(e);function kSt(){let e=8,t=[],n=h2(0),r=DI(0,e),i=DI(0,e);return{data:()=>t,seen:()=>n=ISt(n,t.length),add(s){for(let o=0,a=t.length,u=s.length,l;o<u;++o)l=s[o],l._index=a++,t.push(l)},remove(s,o){const a=t.length,u=Array(a-s),l=t;let c,d,f;for(d=0;!o[d]&&d<a;++d)u[d]=t[d],l[d]=d;for(f=d;d<a;++d)c=t[d],o[d]?l[d]=-1:(l[d]=f,r[f]=r[d],i[f]=i[d],u[f]=c,c._index=f++),r[d]=0;return t=u,l},size:()=>t.length,curr:()=>r,prev:()=>i,reset:s=>i[s]=r[s],all:()=>e<257?255:e<65537?65535:4294967295,set(s,o){r[s]|=o},clear(s,o){r[s]&=~o},resize(s,o){const a=r.length;(s>a||o>e)&&(e=Math.max(o,e),r=DI(s,e,r),i=DI(s,e))}}}function ISt(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function DI(e,t,n){const r=(t<257?SSt:t<65537?ASt:h2)(e);return n&&r.set(n),r}function Ile(e,t,n){const r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(i,s){const o=this,a=o.bisect(o.range,i.value),u=i.index,l=a[0],c=a[1],d=u.length;let f;for(f=0;f<l;++f)s[u[f]]|=r;for(f=c;f<d;++f)s[u[f]]|=r;return o}}}function Rle(){let e=h2(0),t=[],n=0;function r(a,u,l){if(!u.length)return[];const c=n,d=u.length,f=h2(d);let h=Array(d),p,m,y;for(y=0;y<d;++y)h[y]=a(u[y]),f[y]=y;if(h=RSt(h,f),c)p=t,m=e,t=Array(c+d),e=h2(c+d),DSt(l,p,m,c,h,f,d,t,e);else{if(l>0)for(y=0;y<d;++y)f[y]+=l;t=h,e=f}return n=c+d,{index:f,value:h}}function i(a,u){const l=n;let c,d,f;for(d=0;!u[e[d]]&&d<l;++d);for(f=d;d<l;++d)u[c=e[d]]||(e[f]=c,t[f]=t[d],++f);n=l-a}function s(a){for(let u=0,l=n;u<l;++u)e[u]=a[e[u]]}function o(a,u){let l;return u?l=u.length:(u=t,l=n),[Pot(u,a[0],0,l),O0(u,a[1],0,l)]}return{insert:r,remove:i,bisect:o,reindex:s,index:()=>e,size:()=>n}}function RSt(e,t){return e.sort.call(t,(n,r)=>{const i=e[n],s=e[r];return i<s?-1:i>s?1:0}),Mot(e,t)}function DSt(e,t,n,r,i,s,o,a,u){let l=0,c=0,d;for(d=0;l<r&&c<o;++d)t[l]<i[c]?(a[d]=t[l],u[d]=n[l++]):(a[d]=i[c],u[d]=s[c++]+e);for(;l<r;++l,++d)a[d]=t[l],u[d]=n[l];for(;c<o;++c,++d)a[d]=i[c],u[d]=s[c]+e}function kK(e){He.call(this,kSt(),e),this._indices=null,this._dims=null}kK.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};Et(kK,He,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(r=>t.modified(r.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){const n=e.fields,r=e.query,i=this._indices={},s=this._dims=[],o=r.length;let a=0,u,l;for(;a<o;++a)u=n[a].fname,l=i[u]||(i[u]=Rle()),s.push(Ile(l,a,r[a]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),r=e.fields,i=e.query,s=this._indices,o=this._dims,a=this.value,u=a.curr(),l=a.prev(),c=a.all(),d=n.rem=n.add,f=n.mod,h=i.length,p={};let m,y,v,b,w,E,_,C,S;if(l.set(u),t.rem.length&&(w=this.remove(e,t,n)),t.add.length&&a.add(t.add),t.mod.length)for(E={},b=t.mod,_=0,C=b.length;_<C;++_)E[b[_]._index]=1;for(_=0;_<h;++_)S=r[_],(!o[_]||e.modified("fields",_)||t.modified(S.fields))&&(v=S.fname,(m=p[v])||(s[v]=y=Rle(),p[v]=m=y.insert(S,t.source,0)),o[_]=Ile(y,_,i[_]).onAdd(m,u));for(_=0,C=a.data().length;_<C;++_)w[_]||(l[_]!==u[_]?d.push(_):E[_]&&u[_]!==c&&f.push(_));return a.mask=(1<<h)-1,n},eval(e,t){const n=t.materialize().fork(),r=this._dims.length;let i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},insert(e,t,n){const r=t.add,i=this.value,s=this._dims,o=this._indices,a=e.fields,u={},l=n.add,c=i.size()+r.length,d=s.length;let f=i.size(),h,p,m;i.resize(c,d),i.add(r);const y=i.curr(),v=i.prev(),b=i.all();for(h=0;h<d;++h)p=a[h].fname,m=u[p]||(u[p]=o[p].insert(a[h],r,f)),s[h].onAdd(m,y);for(;f<c;++f)v[f]=b,y[f]!==b&&l.push(f)},modify(e,t){const n=t.mod,r=this.value,i=r.curr(),s=r.all(),o=e.mod;let a,u,l;for(a=0,u=o.length;a<u;++a)l=o[a]._index,i[l]!==s&&n.push(l)},remove(e,t,n){const r=this._indices,i=this.value,s=i.curr(),o=i.prev(),a=i.all(),u={},l=n.rem,c=t.rem;let d,f,h,p;for(d=0,f=c.length;d<f;++d)h=c[d]._index,u[h]=1,o[h]=p=s[h],s[h]=a,p!==a&&l.push(h);for(h in r)r[h].remove(f,u);return this.reindex(t,f,u),u},reindex(e,t,n){const r=this._indices,i=this.value;e.runAfter(()=>{const s=i.remove(t,n);for(const o in r)r[o].reindex(s)})},update(e,t,n){const r=this._dims,i=e.query,s=t.stamp,o=r.length;let a=0,u,l;for(n.filters=0,l=0;l<o;++l)e.modified("query",l)&&(u=l,++a);if(a===1)a=r[u].one,this.incrementOne(r[u],i[u],n.add,n.rem);else for(l=0,a=0;l<o;++l)e.modified("query",l)&&(a|=r[l].one,this.incrementAll(r[l],i[l],s,n.add),n.rem=n.add);return a},incrementAll(e,t,n,r){const i=this.value,s=i.seen(),o=i.curr(),a=i.prev(),u=e.index(),l=e.bisect(e.range),c=e.bisect(t),d=c[0],f=c[1],h=l[0],p=l[1],m=e.one;let y,v,b;if(d<h)for(y=d,v=Math.min(h,f);y<v;++y)b=u[y],s[b]!==n&&(a[b]=o[b],s[b]=n,r.push(b)),o[b]^=m;else if(d>h)for(y=h,v=Math.min(d,p);y<v;++y)b=u[y],s[b]!==n&&(a[b]=o[b],s[b]=n,r.push(b)),o[b]^=m;if(f>p)for(y=Math.max(d,p),v=f;y<v;++y)b=u[y],s[b]!==n&&(a[b]=o[b],s[b]=n,r.push(b)),o[b]^=m;else if(f<p)for(y=Math.max(h,f),v=p;y<v;++y)b=u[y],s[b]!==n&&(a[b]=o[b],s[b]=n,r.push(b)),o[b]^=m;e.range=t.slice()},incrementOne(e,t,n,r){const i=this.value,s=i.curr(),o=e.index(),a=e.bisect(e.range),u=e.bisect(t),l=u[0],c=u[1],d=a[0],f=a[1],h=e.one;let p,m,y;if(l<d)for(p=l,m=Math.min(d,c);p<m;++p)y=o[p],s[y]^=h,n.push(y);else if(l>d)for(p=d,m=Math.min(l,f);p<m;++p)y=o[p],s[y]^=h,r.push(y);if(c>f)for(p=Math.max(l,f),m=c;p<m;++p)y=o[p],s[y]^=h,n.push(y);else if(c<f)for(p=Math.max(d,c),m=f;p<m;++p)y=o[p],s[y]^=h,r.push(y);e.range=t.slice()}});function IK(e){He.call(this,null,e)}IK.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};Et(IK,He,{transform(e,t){const n=~(e.ignore||0),r=e.filter,i=r.mask;if(!(i&n))return t.StopPropagation;const s=t.fork(t.ALL),o=r.data(),a=r.curr(),u=r.prev(),l=c=>a[c]&n?null:o[c];return s.filter(s.MOD,l),i&i-1?(s.filter(s.ADD,c=>{const d=a[c]&n;return!d&&d^u[c]&n?o[c]:null}),s.filter(s.REM,c=>{const d=a[c]&n;return d&&!(d^(d^u[c]&n))?o[c]:null})):(s.filter(s.ADD,l),s.filter(s.REM,c=>(a[c]&n)===i?o[c]:null)),s.filter(s.SOURCE,c=>l(c._index))}});const PSt=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:kK,resolvefilter:IK},Symbol.toStringTag,{value:"Module"})),NSt="RawCode",g1="Literal",OSt="Property",$St="Identifier",MSt="ArrayExpression",LSt="BinaryExpression",KAe="CallExpression",FSt="ConditionalExpression",BSt="LogicalExpression",jSt="MemberExpression",zSt="ObjectExpression",USt="UnaryExpression";function Td(e){this.type=e}Td.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=VSt(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};function VSt(e){switch(e.type){case MSt:return e.elements;case LSt:case BSt:return[e.left,e.right];case KAe:return[e.callee].concat(e.arguments);case FSt:return[e.test,e.consequent,e.alternate];case jSt:return[e.object,e.property];case zSt:return e.properties;case OSt:return[e.key,e.value];case USt:return[e.argument];case $St:case g1:case NSt:default:return[]}}var ah,Ht,We,da,Ir,Y6=1,eA=2,y1=3,mg=4,K6=5,lb=6,pu=7,tA=8,HSt=9;ah={};ah[Y6]="Boolean";ah[eA]="<end>";ah[y1]="Identifier";ah[mg]="Keyword";ah[K6]="Null";ah[lb]="Numeric";ah[pu]="Punctuator";ah[tA]="String";ah[HSt]="RegularExpression";var qSt="ArrayExpression",WSt="BinaryExpression",GSt="CallExpression",YSt="ConditionalExpression",XAe="Identifier",KSt="Literal",XSt="LogicalExpression",QSt="MemberExpression",JSt="ObjectExpression",ZSt="Property",eAt="UnaryExpression",Qs="Unexpected token %0",tAt="Unexpected number",nAt="Unexpected string",rAt="Unexpected identifier",iAt="Unexpected reserved word",sAt="Unexpected end of input",H7="Invalid regular expression",wF="Invalid regular expression: missing /",QAe="Octal literals are not allowed in strict mode.",oAt="Duplicate data property in object literal not allowed in strict mode",Io="ILLEGAL",xC="Disabled.",aAt=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),uAt=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function X6(e,t){if(!e)throw new Error("ASSERT: "+t)}function Uh(e){return e>=48&&e<=57}function RK(e){return"0123456789abcdefABCDEF".includes(e)}function p2(e){return"01234567".includes(e)}function lAt(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(e)}function wC(e){return e===10||e===13||e===8232||e===8233}function nA(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&aAt.test(String.fromCharCode(e))}function PN(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&uAt.test(String.fromCharCode(e))}const cAt={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function JAe(){for(;We<da;){const e=Ht.charCodeAt(We);if(lAt(e)||wC(e))++We;else break}}function q7(e){var t,n,r,i=0;for(n=e==="u"?4:2,t=0;t<n;++t)We<da&&RK(Ht[We])?(r=Ht[We++],i=i*16+"0123456789abcdef".indexOf(r.toLowerCase())):dr({},Qs,Io);return String.fromCharCode(i)}function dAt(){var e,t,n,r;for(e=Ht[We],t=0,e==="}"&&dr({},Qs,Io);We<da&&(e=Ht[We++],!!RK(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&dr({},Qs,Io),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,r=(t-65536&1023)+56320,String.fromCharCode(n,r))}function ZAe(){var e,t;for(e=Ht.charCodeAt(We++),t=String.fromCharCode(e),e===92&&(Ht.charCodeAt(We)!==117&&dr({},Qs,Io),++We,e=q7("u"),(!e||e==="\\"||!nA(e.charCodeAt(0)))&&dr({},Qs,Io),t=e);We<da&&(e=Ht.charCodeAt(We),!!PN(e));)++We,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),Ht.charCodeAt(We)!==117&&dr({},Qs,Io),++We,e=q7("u"),(!e||e==="\\"||!PN(e.charCodeAt(0)))&&dr({},Qs,Io),t+=e);return t}function fAt(){var e,t;for(e=We++;We<da;){if(t=Ht.charCodeAt(We),t===92)return We=e,ZAe();if(PN(t))++We;else break}return Ht.slice(e,We)}function hAt(){var e,t,n;return e=We,t=Ht.charCodeAt(We)===92?ZAe():fAt(),t.length===1?n=y1:cAt.hasOwnProperty(t)?n=mg:t==="null"?n=K6:t==="true"||t==="false"?n=Y6:n=y1,{type:n,value:t,start:e,end:We}}function EF(){var e=We,t=Ht.charCodeAt(We),n,r=Ht[We],i,s,o;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++We,{type:pu,value:String.fromCharCode(t),start:e,end:We};default:if(n=Ht.charCodeAt(We+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return We+=2,{type:pu,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:We};case 33:case 61:return We+=2,Ht.charCodeAt(We)===61&&++We,{type:pu,value:Ht.slice(e,We),start:e,end:We}}}if(o=Ht.substr(We,4),o===">>>=")return We+=4,{type:pu,value:o,start:e,end:We};if(s=o.substr(0,3),s===">>>"||s==="<<="||s===">>=")return We+=3,{type:pu,value:s,start:e,end:We};if(i=s.substr(0,2),r===i[1]&&"+-<>&|".includes(r)||i==="=>")return We+=2,{type:pu,value:i,start:e,end:We};if(i==="//"&&dr({},Qs,Io),"<>=!+-*%&|^/".includes(r))return++We,{type:pu,value:r,start:e,end:We};dr({},Qs,Io)}function pAt(e){let t="";for(;We<da&&RK(Ht[We]);)t+=Ht[We++];return t.length===0&&dr({},Qs,Io),nA(Ht.charCodeAt(We))&&dr({},Qs,Io),{type:lb,value:parseInt("0x"+t,16),start:e,end:We}}function mAt(e){let t="0"+Ht[We++];for(;We<da&&p2(Ht[We]);)t+=Ht[We++];return(nA(Ht.charCodeAt(We))||Uh(Ht.charCodeAt(We)))&&dr({},Qs,Io),{type:lb,value:parseInt(t,8),octal:!0,start:e,end:We}}function Dle(){var e,t,n;if(n=Ht[We],X6(Uh(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=We,e="",n!=="."){if(e=Ht[We++],n=Ht[We],e==="0"){if(n==="x"||n==="X")return++We,pAt(t);if(p2(n))return mAt(t);n&&Uh(n.charCodeAt(0))&&dr({},Qs,Io)}for(;Uh(Ht.charCodeAt(We));)e+=Ht[We++];n=Ht[We]}if(n==="."){for(e+=Ht[We++];Uh(Ht.charCodeAt(We));)e+=Ht[We++];n=Ht[We]}if(n==="e"||n==="E")if(e+=Ht[We++],n=Ht[We],(n==="+"||n==="-")&&(e+=Ht[We++]),Uh(Ht.charCodeAt(We)))for(;Uh(Ht.charCodeAt(We));)e+=Ht[We++];else dr({},Qs,Io);return nA(Ht.charCodeAt(We))&&dr({},Qs,Io),{type:lb,value:parseFloat(e),start:t,end:We}}function gAt(){var e="",t,n,r,i,s=!1;for(t=Ht[We],X6(t==="'"||t==='"',"String literal must starts with a quote"),n=We,++We;We<da;)if(r=Ht[We++],r===t){t="";break}else if(r==="\\")if(r=Ht[We++],!r||!wC(r.charCodeAt(0)))switch(r){case"u":case"x":Ht[We]==="{"?(++We,e+=dAt()):e+=q7(r);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:p2(r)?(i="01234567".indexOf(r),i!==0&&(s=!0),We<da&&p2(Ht[We])&&(s=!0,i=i*8+"01234567".indexOf(Ht[We++]),"0123".includes(r)&&We<da&&p2(Ht[We])&&(i=i*8+"01234567".indexOf(Ht[We++]))),e+=String.fromCharCode(i)):e+=r;break}else r==="\r"&&Ht[We]===`
`&&++We;else{if(wC(r.charCodeAt(0)))break;e+=r}return t!==""&&dr({},Qs,Io),{type:tA,value:e,octal:s,start:n,end:We}}function yAt(e,t){let n=e;t.includes("u")&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(r,i)=>{if(parseInt(i,16)<=1114111)return"x";dr({},H7)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{dr({},H7)}try{return new RegExp(e,t)}catch{return null}}function bAt(){var e,t,n,r,i;for(e=Ht[We],X6(e==="/","Regular expression literal must start with a slash"),t=Ht[We++],n=!1,r=!1;We<da;)if(e=Ht[We++],t+=e,e==="\\")e=Ht[We++],wC(e.charCodeAt(0))&&dr({},wF),t+=e;else if(wC(e.charCodeAt(0)))dr({},wF);else if(n)e==="]"&&(n=!1);else if(e==="/"){r=!0;break}else e==="["&&(n=!0);return r||dr({},wF),i=t.substr(1,t.length-2),{value:i,literal:t}}function vAt(){var e,t,n;for(t="",n="";We<da&&(e=Ht[We],!!PN(e.charCodeAt(0)));)++We,e==="\\"&&We<da?dr({},Qs,Io):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&dr({},H7,n),{value:n,literal:t}}function xAt(){var e,t,n,r;return Ir=null,JAe(),e=We,t=bAt(),n=vAt(),r=yAt(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:We}}function wAt(e){return e.type===y1||e.type===mg||e.type===Y6||e.type===K6}function eke(){if(JAe(),We>=da)return{type:eA,start:We,end:We};const e=Ht.charCodeAt(We);return nA(e)?hAt():e===40||e===41||e===59?EF():e===39||e===34?gAt():e===46?Uh(Ht.charCodeAt(We+1))?Dle():EF():Uh(e)?Dle():EF()}function vu(){const e=Ir;return We=e.end,Ir=eke(),We=e.end,e}function tke(){const e=We;Ir=eke(),We=e}function EAt(e){const t=new Td(qSt);return t.elements=e,t}function Ple(e,t,n){const r=new Td(e==="||"||e==="&&"?XSt:WSt);return r.operator=e,r.left=t,r.right=n,r}function _At(e,t){const n=new Td(GSt);return n.callee=e,n.arguments=t,n}function TAt(e,t,n){const r=new Td(YSt);return r.test=e,r.consequent=t,r.alternate=n,r}function DK(e){const t=new Td(XAe);return t.name=e,t}function OT(e){const t=new Td(KSt);return t.value=e.value,t.raw=Ht.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function Nle(e,t,n){const r=new Td(QSt);return r.computed=e==="[",r.object=t,r.property=n,r.computed||(n.member=!0),r}function CAt(e){const t=new Td(JSt);return t.properties=e,t}function Ole(e,t,n){const r=new Td(ZSt);return r.key=t,r.value=n,r.kind=e,r}function SAt(e,t){const n=new Td(eAt);return n.operator=e,n.argument=t,n.prefix=!0,n}function dr(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,(s,o)=>(X6(o<r.length,"Message reference must be in range"),r[o]));throw n=new Error(i),n.index=We,n.description=i,n}function Q6(e){e.type===eA&&dr(e,sAt),e.type===lb&&dr(e,tAt),e.type===tA&&dr(e,nAt),e.type===y1&&dr(e,rAt),e.type===mg&&dr(e,iAt),dr(e,Qs,e.value)}function fa(e){const t=vu();(t.type!==pu||t.value!==e)&&Q6(t)}function ii(e){return Ir.type===pu&&Ir.value===e}function _F(e){return Ir.type===mg&&Ir.value===e}function AAt(){const e=[];for(We=Ir.start,fa("[");!ii("]");)ii(",")?(vu(),e.push(null)):(e.push(b1()),ii("]")||fa(","));return vu(),EAt(e)}function $le(){We=Ir.start;const e=vu();return e.type===tA||e.type===lb?(e.octal&&dr(e,QAe),OT(e)):DK(e.value)}function kAt(){var e,t,n,r;if(We=Ir.start,e=Ir,e.type===y1)return n=$le(),fa(":"),r=b1(),Ole("init",n,r);if(e.type===eA||e.type===pu)Q6(e);else return t=$le(),fa(":"),r=b1(),Ole("init",t,r)}function IAt(){var e=[],t,n,r,i={},s=String;for(We=Ir.start,fa("{");!ii("}");)t=kAt(),t.key.type===XAe?n=t.key.name:n=s(t.key.value),r="$"+n,Object.prototype.hasOwnProperty.call(i,r)?dr({},oAt):i[r]=!0,e.push(t),ii("}")||fa(",");return fa("}"),CAt(e)}function RAt(){fa("(");const e=PK();return fa(")"),e}const DAt={if:1};function PAt(){var e,t,n;if(ii("("))return RAt();if(ii("["))return AAt();if(ii("{"))return IAt();if(e=Ir.type,We=Ir.start,e===y1||DAt[Ir.value])n=DK(vu().value);else if(e===tA||e===lb)Ir.octal&&dr(Ir,QAe),n=OT(vu());else{if(e===mg)throw new Error(xC);e===Y6?(t=vu(),t.value=t.value==="true",n=OT(t)):e===K6?(t=vu(),t.value=null,n=OT(t)):ii("/")||ii("/=")?(n=OT(xAt()),tke()):Q6(vu())}return n}function NAt(){const e=[];if(fa("("),!ii(")"))for(;We<da&&(e.push(b1()),!ii(")"));)fa(",");return fa(")"),e}function OAt(){We=Ir.start;const e=vu();return wAt(e)||Q6(e),DK(e.value)}function $At(){return fa("."),OAt()}function MAt(){fa("[");const e=PK();return fa("]"),e}function LAt(){var e,t,n;for(e=PAt();;)if(ii("."))n=$At(),e=Nle(".",e,n);else if(ii("("))t=NAt(),e=_At(e,t);else if(ii("["))n=MAt(),e=Nle("[",e,n);else break;return e}function Mle(){const e=LAt();if(Ir.type===pu&&(ii("++")||ii("--")))throw new Error(xC);return e}function cP(){var e,t;if(Ir.type!==pu&&Ir.type!==mg)t=Mle();else{if(ii("++")||ii("--"))throw new Error(xC);if(ii("+")||ii("-")||ii("~")||ii("!"))e=vu(),t=cP(),t=SAt(e.value,t);else{if(_F("delete")||_F("void")||_F("typeof"))throw new Error(xC);t=Mle()}}return t}function Lle(e){let t=0;if(e.type!==pu&&e.type!==mg)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function FAt(){var e,t,n,r,i,s,o,a,u,l;if(e=Ir,u=cP(),r=Ir,i=Lle(r),i===0)return u;for(r.prec=i,vu(),t=[e,Ir],o=cP(),s=[u,r,o];(i=Lle(Ir))>0;){for(;s.length>2&&i<=s[s.length-2].prec;)o=s.pop(),a=s.pop().value,u=s.pop(),t.pop(),n=Ple(a,u,o),s.push(n);r=vu(),r.prec=i,s.push(r),t.push(Ir),n=cP(),s.push(n)}for(l=s.length-1,n=s[l],t.pop();l>1;)t.pop(),n=Ple(s[l-1].value,s[l-2],n),l-=2;return n}function b1(){var e,t,n;return e=FAt(),ii("?")&&(vu(),t=b1(),fa(":"),n=b1(),e=TAt(e,t,n)),e}function PK(){const e=b1();if(ii(","))throw new Error(xC);return e}function nke(e){Ht=e,We=0,da=Ht.length,Ir=null,tke();const t=PK();if(Ir.type!==eA)throw new Error("Unexpect token after expression.");return t}var rke={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function ike(e){function t(o,a,u,l){let c=e(a[0]);return u&&(c=u+"("+c+")",u.lastIndexOf("new ",0)===0&&(c="("+c+")")),c+"."+o+(l<0?"":l===0?"()":"("+a.slice(1).map(e).join(",")+")")}function n(o,a,u){return l=>t(o,l,a,u)}const r="new Date",i="String",s="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(o){o.length<3&&Ye("Missing arguments to clamp function."),o.length>3&&Ye("Too many arguments to clamp function.");const a=o.map(e);return"Math.max("+a[1]+", Math.min("+a[2]+","+a[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),split:n("split",i),trim:n("trim",i,0),btoa:"btoa",atob:"atob",regexp:s,test:n("test",s),if:function(o){o.length<3&&Ye("Missing arguments to if function."),o.length>3&&Ye("Too many arguments to if function.");const a=o.map(e);return"("+a[0]+"?"+a[1]+":"+a[2]+")"}}}function BAt(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function ske(e){e=e||{};const t=e.allowed?dd(e.allowed):{},n=e.forbidden?dd(e.forbidden):{},r=e.constants||rke,i=(e.functions||ike)(d),s=e.globalvar,o=e.fieldvar,a=Sn(s)?s:p=>`${s}["${p}"]`;let u={},l={},c=0;function d(p){if(It(p))return p;const m=f[p.type];return m==null&&Ye("Unsupported type: "+p.type),m(p)}const f={Literal:p=>p.raw,Identifier:p=>{const m=p.name;return c>0?m:Ot(n,m)?Ye("Illegal identifier: "+m):Ot(r,m)?r[m]:Ot(t,m)?m:(u[m]=1,a(m))},MemberExpression:p=>{const m=!p.computed,y=d(p.object);m&&(c+=1);const v=d(p.property);return y===o&&(l[BAt(v)]=1),m&&(c-=1),y+(m?"."+v:"["+v+"]")},CallExpression:p=>{p.callee.type!=="Identifier"&&Ye("Illegal callee type: "+p.callee.type);const m=p.callee.name,y=p.arguments,v=Ot(i,m)&&i[m];return v||Ye("Unrecognized function: "+m),Sn(v)?v(y):v+"("+y.map(d).join(",")+")"},ArrayExpression:p=>"["+p.elements.map(d).join(",")+"]",BinaryExpression:p=>"("+d(p.left)+" "+p.operator+" "+d(p.right)+")",UnaryExpression:p=>"("+p.operator+d(p.argument)+")",ConditionalExpression:p=>"("+d(p.test)+"?"+d(p.consequent)+":"+d(p.alternate)+")",LogicalExpression:p=>"("+d(p.left)+p.operator+d(p.right)+")",ObjectExpression:p=>"{"+p.properties.map(d).join(",")+"}",Property:p=>{c+=1;const m=d(p.key);return c-=1,m+":"+d(p.value)}};function h(p){const m={code:d(p),globals:Object.keys(u),fields:Object.keys(l)};return u={},l={},m}return h.functions=i,h.constants=r,h}const Fle=Symbol("vega_selection_getter");function oke(e){return(!e.getter||!e.getter[Fle])&&(e.getter=nc(e.field),e.getter[Fle]=!0),e.getter}const NK="intersect",Ble="union",jAt="vlMulti",zAt="vlPoint",jle="or",UAt="and",nf="_vgsid_",EC=nc(nf),VAt="E",HAt="R",qAt="R-E",WAt="R-LE",GAt="R-RE",YAt="E-LT",KAt="E-LTE",XAt="E-GT",QAt="E-GTE",JAt="E-VALID",ZAt="E-ONE",NN="index:unit";function zle(e,t){for(var n=t.fields,r=t.values,i=n.length,s=0,o,a;s<i;++s)if(a=n[s],o=oke(a)(e),g0(o)&&(o=aa(o)),g0(r[s])&&(r[s]=aa(r[s])),Qe(r[s])&&g0(r[s][0])&&(r[s]=r[s].map(aa)),a.type===VAt){if(Qe(r[s])?!r[s].includes(o):o!==r[s])return!1}else if(a.type===HAt){if(!Uv(o,r[s]))return!1}else if(a.type===GAt){if(!Uv(o,r[s],!0,!1))return!1}else if(a.type===qAt){if(!Uv(o,r[s],!1,!1))return!1}else if(a.type===WAt){if(!Uv(o,r[s],!1,!0))return!1}else if(a.type===YAt){if(o>=r[s])return!1}else if(a.type===KAt){if(o>r[s])return!1}else if(a.type===XAt){if(o<=r[s])return!1}else if(a.type===QAt){if(o<r[s])return!1}else if(a.type===JAt){if(o===null||isNaN(o))return!1}else if(a.type===ZAt&&r[s].indexOf(o)===-1)return!1;return!0}function ekt(e,t,n){for(var r=this.context.data[e],i=r?r.values.value:[],s=r?r[NN]&&r[NN].value:void 0,o=n===NK,a=i.length,u=0,l,c,d,f,h;u<a;++u)if(l=i[u],s&&o){if(c=c||{},d=c[f=l.unit]||0,d===-1)continue;if(h=zle(t,l),c[f]=h?-1:++d,h&&s.size===1)return!0;if(!h&&d===s.get(f).count)return!1}else if(h=zle(t,l),o^h)return h;return a&&o}const ake=sE(EC),tkt=ake.left,nkt=ake.right;function rkt(e,t,n){const r=this.context.data[e],i=r?r.values.value:[],s=r?r[NN]&&r[NN].value:void 0,o=n===NK,a=EC(t),u=tkt(i,a);if(u===i.length||EC(i[u])!==a)return!1;if(s&&o){if(s.size===1)return!0;if(nkt(i,a)-u<s.size)return!1}return!0}function ikt(e,t){return e.map(n=>Cn(t.fields?{values:t.fields.map(r=>oke(r)(n.datum))}:{[nf]:EC(n.datum)},t))}function skt(e,t,n,r){for(var i=this.context.data[e],s=i?i.values.value:[],o={},a={},u={},l,c,d,f,h,p,m,y,v,b,w=s.length,E=0,_,C;E<w;++E)if(l=s[E],f=l.unit,c=l.fields,d=l.values,c&&d){for(_=0,C=c.length;_<C;++_)h=c[_],m=o[h.field]||(o[h.field]={}),y=m[f]||(m[f]=[]),u[h.field]=v=h.type.charAt(0),b=TF[`${v}_union`],m[f]=b(y,Rt(d[_]));n&&(y=a[f]||(a[f]=[]),y.push(Rt(d).reduce((S,k,R)=>(S[c[R].field]=k,S),{})))}else h=nf,p=EC(l),m=o[h]||(o[h]={}),y=m[f]||(m[f]=[]),y.push(p),n&&(y=a[f]||(a[f]=[]),y.push({[nf]:p}));if(t=t||Ble,o[nf]?o[nf]=TF[`${nf}_${t}`](...Object.values(o[nf])):Object.keys(o).forEach(S=>{o[S]=Object.keys(o[S]).map(k=>o[S][k]).reduce((k,R)=>k===void 0?R:TF[`${u[S]}_${t}`](k,R))}),s=Object.keys(a),n&&s.length){const S=r?zAt:jAt;o[S]=t===Ble?{[jle]:s.reduce((k,R)=>(k.push(...a[R]),k),[])}:{[UAt]:s.map(k=>({[jle]:a[k]}))}}return o}var TF={[`${nf}_union`]:qot,[`${nf}_intersect`]:Vot,E_union:function(e,t){if(!e.length)return t;for(var n=0,r=t.length;n<r;++n)e.includes(t[n])||e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.includes(n)):t},R_union:function(e,t){var n=aa(t[0]),r=aa(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<r&&(e[1]=r),e):[n,r]},R_intersect:function(e,t){var n=aa(t[0]),r=aa(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?r<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>r&&(e[1]=r),e):[n,r]}};const okt=":",akt="@";function OK(e,t,n,r){t[0].type!==g1&&Ye("First argument to selection functions must be a string literal.");const i=t[0].value,s=t.length>=2&&Wn(t).value,o="unit",a=akt+o,u=okt+i;s===NK&&!Ot(r,a)&&(r[a]=n.getData(i).indataRef(n,o)),Ot(r,u)||(r[u]=n.getData(i).tuplesRef())}function uke(e){const t=this.context.data[e];return t?t.values.value:[]}function ukt(e,t,n){const r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i&&i.count}function lkt(e,t){const n=this.context.dataflow,r=this.context.data[e],i=r.input;return n.pulse(i,n.changeset().remove(rc).insert(t)),1}function ckt(e,t,n){if(e){const r=this.context.dataflow,i=e.mark.source;r.pulse(i,r.changeset().encode(e,t))}return n!==void 0?n:e}const rA=e=>function(t,n){const r=this.context.dataflow.locale();return t===null?"null":r[e](n)(t)},dkt=rA("format"),lke=rA("timeFormat"),fkt=rA("utcFormat"),hkt=rA("timeParse"),pkt=rA("utcParse"),PI=new Date(2e3,0,1);function J6(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(PI.setYear(2e3),PI.setMonth(e),PI.setDate(t),lke.call(this,PI,n))}function mkt(e){return J6.call(this,e,1,"%B")}function gkt(e){return J6.call(this,e,1,"%b")}function ykt(e){return J6.call(this,0,2+e,"%A")}function bkt(e){return J6.call(this,0,2+e,"%a")}const vkt=":",xkt="@",W7="%",cke="$";function $K(e,t,n,r){t[0].type!==g1&&Ye("First argument to data functions must be a string literal.");const i=t[0].value,s=vkt+i;if(!Ot(s,r))try{r[s]=n.getData(i).tuplesRef()}catch{}}function wkt(e,t,n,r){t[0].type!==g1&&Ye("First argument to indata must be a string literal."),t[1].type!==g1&&Ye("Second argument to indata must be a string literal.");const i=t[0].value,s=t[1].value,o=xkt+s;Ot(o,r)||(r[o]=n.getData(i).indataRef(n,s))}function Ua(e,t,n,r){if(t[0].type===g1)Ule(n,r,t[0].value);else for(e in n.scales)Ule(n,r,e)}function Ule(e,t,n){const r=W7+n;if(!Ot(t,r))try{t[r]=e.scaleRef(n)}catch{}}function uh(e,t){if(It(e)){const n=t.scales[e];return n&&$ue(n.value)?n.value:void 0}else if(Sn(e))return $ue(e)?e:void 0}function Ekt(e,t,n){t.__bandwidth=i=>i&&i.bandwidth?i.bandwidth():0,n._bandwidth=Ua,n._range=Ua,n._scale=Ua;const r=i=>"_["+(i.type===g1?bt(W7+i.value):bt(W7)+"+"+e(i))+"]";return{_bandwidth:i=>`this.__bandwidth(${r(i[0])})`,_range:i=>`${r(i[0])}.range()`,_scale:i=>`${r(i[0])}(${e(i[1])})`}}function MK(e,t){return function(n,r,i){if(n){const s=uh(n,(i||this).context);return s&&s.path[e](r)}else return t(r)}}const _kt=MK("area",Fdt),Tkt=MK("bounds",Udt),Ckt=MK("centroid",Ydt);function Skt(e,t){const n=uh(e,(t||this).context);return n&&n.scale()}function Akt(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function LK(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(r){e.warn(r)}return n[n.length-1]}function kkt(){return LK(this.context.dataflow,"warn",arguments)}function Ikt(){return LK(this.context.dataflow,"info",arguments)}function Rkt(){return LK(this.context.dataflow,"debug",arguments)}function CF(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function G7(e){const t=M0(e),n=CF(t.r),r=CF(t.g),i=CF(t.b);return .2126*n+.7152*r+.0722*i}function Dkt(e,t){const n=G7(e),r=G7(t),i=Math.max(n,r),s=Math.min(n,r);return(i+.05)/(s+.05)}function Pkt(){const e=[].slice.call(arguments);return e.unshift({}),Cn(...e)}function dke(e,t){return e===t||e!==e&&t!==t?!0:Qe(e)?Qe(t)&&e.length===t.length?Nkt(e,t):!1:kt(e)&&kt(t)?fke(e,t):!1}function Nkt(e,t){for(let n=0,r=e.length;n<r;++n)if(!dke(e[n],t[n]))return!1;return!0}function fke(e,t){for(const n in e)if(!dke(e[n],t[n]))return!1;return!0}function Vle(e){return t=>fke(e,t)}function Okt(e,t,n,r,i,s){const o=this.context.dataflow,a=this.context.data[e],u=a.input,l=o.stamp();let c=a.changes,d,f;if(o._trigger===!1||!(u.value.length||t||r))return 0;if((!c||c.stamp<l)&&(a.changes=c=o.changeset(),c.stamp=l,o.runAfter(()=>{a.modified=!0,o.pulse(u,c).run()},!0,1)),n&&(d=n===!0?rc:Qe(n)||E6(n)?n:Vle(n),c.remove(d)),t&&c.insert(t),r&&(d=Vle(r),u.value.some(d)?c.remove(d):c.insert(r)),i)for(f in s)c.modify(i,f,s[f]);return 1}function $kt(e){const t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.hypot(n,r)}function Mkt(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const Hle={};function Lkt(e,t){const n=Hle[t]||(Hle[t]=nc(t));return Qe(e)?e.map(n):n(e)}function Z6(e){return Qe(e)||ArrayBuffer.isView(e)?e:null}function FK(e){return Z6(e)||(It(e)?e:null)}function Fkt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Z6(e).join(...n)}function Bkt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return FK(e).indexOf(...n)}function jkt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return FK(e).lastIndexOf(...n)}function zkt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return FK(e).slice(...n)}function Ukt(e,t,n){return Sn(n)&&Ye("Function argument passed to replace."),!It(t)&&!aG(t)&&Ye("Please pass a string or RegExp argument to replace."),String(e).replace(t,n)}function Vkt(e){return Z6(e).slice().reverse()}function Hkt(e){return Z6(e).slice().sort(MS)}function qkt(e,t,n){return cY(e||0,t||0,n||0)}function Wkt(e,t){const n=uh(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function Gkt(e,t){const n=uh(e,(t||this).context);return n?n.copy():void 0}function Ykt(e,t){const n=uh(e,(t||this).context);return n?n.domain():[]}function Kkt(e,t,n){const r=uh(e,(n||this).context);return r?Qe(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0}function Xkt(e,t){const n=uh(e,(t||this).context);return n&&n.range?n.range():[]}function Qkt(e,t,n){const r=uh(e,(n||this).context);return r?r(t):void 0}function Jkt(e,t,n,r,i){e=uh(e,(i||this).context);const s=tSe(t,n);let o=e.domain(),a=o[0],u=Wn(o),l=ga;return u-a?l=VCe(e,a,u):e=(e.interpolator?mr("sequential")().interpolator(e.interpolator()):mr("linear")().interpolate(e.interpolate()).range(e.range())).domain([a=0,u=1]),e.ticks&&(o=e.ticks(+r||15),a!==o[0]&&o.unshift(a),u!==Wn(o)&&o.push(u)),o.forEach(c=>s.stop(l(c),e(c))),s}function Zkt(e,t,n){const r=uh(e,(n||this).context);return function(i){return r?r.path.context(i)(t):""}}function eIt(e){let t=null;return function(n){return n?gC(n,t=t||tw(e)):e}}const hke=e=>e.data;function pke(e,t){const n=uke.call(t,e);return n.root&&n.root.lookup||{}}function tIt(e,t,n){const r=pke(e,this),i=r[t],s=r[n];return i&&s?i.path(s).map(hke):void 0}function nIt(e,t){const n=pke(e,this)[t];return n?n.ancestors().map(hke):void 0}const mke=()=>typeof window<"u"&&window||null;function rIt(){const e=mke();return e?e.screen:{}}function iIt(){const e=mke();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function sIt(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function gke(e,t,n){if(!e)return[];const[r,i]=e,s=new is().set(r[0],r[1],i[0],i[1]),o=n||this.context.dataflow.scenegraph().root;return JSe(o,s,oIt(t))}function oIt(e){let t=null;if(e){const n=Rt(e.marktype),r=Rt(e.markname);t=i=>(!n.length||n.some(s=>i.marktype===s))&&(!r.length||r.some(s=>i.name===s))}return t}function aIt(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;e=Rt(e);const i=e[e.length-1];return i===void 0||Math.hypot(i[0]-t,i[1]-n)>r?[...e,[t,n]]:e}function uIt(e){return Rt(e).reduce((t,n,r)=>{let[i,s]=n;return t+=r==0?`M ${i},${s} `:r===e.length-1?" Z":`L ${i},${s} `},"")}function lIt(e,t,n){const{x:r,y:i,mark:s}=n,o=new is().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[u,l]of t)u<o.x1&&(o.x1=u),u>o.x2&&(o.x2=u),l<o.y1&&(o.y1=l),l>o.y2&&(o.y2=l);return o.translate(r,i),gke([[o.x1,o.y1],[o.x2,o.y2]],e,s).filter(u=>cIt(u.x,u.y,t))}function cIt(e,t,n){let r=0;for(let i=0,s=n.length-1;i<n.length;s=i++){const[o,a]=n[s],[u,l]=n[i];l>t!=a>t&&e<(o-u)*(t-l)/(a-l)+u&&r++}return r&1}const _C={random(){return sc()},cumulativeNormal:A6,cumulativeLogNormal:RG,cumulativeUniform:OG,densityNormal:CG,densityLogNormal:IG,densityUniform:NG,quantileNormal:k6,quantileLogNormal:DG,quantileUniform:$G,sampleNormal:S6,sampleLogNormal:kG,sampleUniform:PG,isArray:Qe,isBoolean:pg,isDate:g0,isDefined(e){return e!==void 0},isNumber:pr,isObject:kt,isRegExp:aG,isString:It,isTuple:E6,isValid(e){return e!=null&&e===e},toBoolean:lG,toDate(e){return cG(e)},toNumber:aa,toString:dG,indexof:Bkt,join:Fkt,lastindexof:jkt,replace:Ukt,reverse:Vkt,sort:Hkt,slice:zkt,flush:JTe,lerp:e2e,merge:Pkt,pad:r2e,peek:Wn,pluck:Lkt,span:LS,inrange:Uv,truncate:i2e,rgb:M0,lab:Bx,hcl:E3,hsl:x3,luminance:G7,contrast:Dkt,sequence:Tu,format:dkt,utcFormat:fkt,utcParse:pkt,utcOffset:b2e,utcSequence:w2e,timeFormat:lke,timeParse:hkt,timeOffset:y2e,timeSequence:x2e,timeUnitSpecifier:o2e,monthFormat:mkt,monthAbbrevFormat:gkt,dayFormat:ykt,dayAbbrevFormat:bkt,quarter:YTe,utcquarter:KTe,week:u2e,utcweek:d2e,dayofyear:a2e,utcdayofyear:c2e,warn:kkt,info:Ikt,debug:Rkt,extent(e){return qf(e)},inScope:Akt,intersect:gke,clampRange:XTe,pinchDistance:$kt,pinchAngle:Mkt,screen:rIt,containerSize:sIt,windowSize:iIt,bandspace:qkt,setdata:lkt,pathShape:eIt,panLinear:HTe,panLog:qTe,panPow:WTe,panSymlog:GTe,zoomLinear:nG,zoomLog:rG,zoomPow:fN,zoomSymlog:iG,encode:ckt,modify:Okt,lassoAppend:aIt,lassoPath:uIt,intersectLasso:lIt},dIt=["view","item","group","xy","x","y"],fIt="event.vega.",yke="this.",BK={},bke={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${bt(cke+e)}]`,functions:hIt,constants:rke,visitors:BK},vke=ske(bke);function hIt(e){const t=ike(e);dIt.forEach(n=>t[n]=fIt+n);for(const n in _C)t[n]=yke+n;return Cn(t,Ekt(e,_C,BK)),t}function Yi(e,t,n){return arguments.length===1?_C[e]:(_C[e]=t,n&&(BK[e]=n),vke.functions[e]=yke+e,this)}Yi("bandwidth",Wkt,Ua);Yi("copy",Gkt,Ua);Yi("domain",Ykt,Ua);Yi("range",Xkt,Ua);Yi("invert",Kkt,Ua);Yi("scale",Qkt,Ua);Yi("gradient",Jkt,Ua);Yi("geoArea",_kt,Ua);Yi("geoBounds",Tkt,Ua);Yi("geoCentroid",Ckt,Ua);Yi("geoShape",Zkt,Ua);Yi("geoScale",Skt,Ua);Yi("indata",ukt,wkt);Yi("data",uke,$K);Yi("treePath",tIt,$K);Yi("treeAncestors",nIt,$K);Yi("vlSelectionTest",ekt,OK);Yi("vlSelectionIdTest",rkt,OK);Yi("vlSelectionResolve",skt,OK);Yi("vlSelectionTuples",ikt);function Gf(e,t){const n={};let r;try{e=It(e)?e:bt(e)+"",r=nke(e)}catch{Ye("Expression parse error: "+e)}r.visit(s=>{if(s.type!==KAe)return;const o=s.callee.name,a=bke.visitors[o];a&&a(o,s.arguments,t,n)});const i=vke(r);return i.globals.forEach(s=>{const o=cke+s;!Ot(n,o)&&t.getSignal(s)&&(n[o]=t.signalRef(s))}),{$expr:Cn({code:i.code},t.options.ast?{ast:r}:null),$fields:i.fields,$params:n}}function pIt(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(r=>t.parseOperator(r)),n.forEach(r=>t.parseOperatorParameters(r)),(e.streams||[]).forEach(r=>t.parseStream(r)),(e.updates||[]).forEach(r=>t.parseUpdate(r)),t.resolve()}const mIt=dd(["rule"]),qle=dd(["group","image","rect"]);function gIt(e,t){let n="";return mIt[t]||(e.x2&&(e.x?(qle[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(qle[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function jK(e){return(e+"").toLowerCase()}function yIt(e){return jK(e)==="operator"}function bIt(e){return jK(e)==="collect"}function M_(e,t,n){n.endsWith(";")||(n="return("+n+");");const r=Function(...t.concat(n));return e&&e.functions?r.bind(e.functions):r}function vIt(e,t,n,r){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${r}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${r} : `}var xIt={operator:(e,t)=>M_(e,["_"],t.code),parameter:(e,t)=>M_(e,["datum","_"],t.code),event:(e,t)=>M_(e,["event"],t.code),handler:(e,t)=>{const n=`var datum=event.item&&event.item.datum;return ${t.code};`;return M_(e,["_","event"],n)},encode:(e,t)=>{const{marktype:n,channels:r}=t;let i="var o=item,datum=o.datum,m=0,$;";for(const s in r){const o="o["+bt(s)+"]";i+=`$=${r[s].code};if(${o}!==$)${o}=$,m=1;`}return i+=gIt(r,n),i+="return m;",M_(e,["item","_"],i)},codegen:{get(e){const t=`[${e.map(bt).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n;const r=(s,o)=>{const a=t[o];let u,l;return s.path?(u=`a${s.path}`,l=`b${s.path}`):((n=n||{})["f"+o]=s,u=`this.f${o}(a)`,l=`this.f${o}(b)`),vIt(u,l,-a,a)},i=Function("a","b","var u, v; return "+e.map(r).join("")+"0;");return n?i.bind(n):i}}};function wIt(e){const t=this;yIt(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function EIt(e){const t=this;if(e.params){const n=t.get(e.id);n||Ye("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function _It(e,t){t=t||{};const n=this;for(const r in e){const i=e[r];t[r]=Qe(i)?i.map(s=>Wle(s,n,t)):Wle(i,n,t)}return t}function Wle(e,t,n){if(!e||!kt(e))return e;for(let r=0,i=Gle.length,s;r<i;++r)if(s=Gle[r],Ot(e,s.key))return s.parse(e,t,n);return e}var Gle=[{key:"$ref",parse:TIt},{key:"$key",parse:SIt},{key:"$expr",parse:CIt},{key:"$field",parse:AIt},{key:"$encode",parse:IIt},{key:"$compare",parse:kIt},{key:"$context",parse:RIt},{key:"$subflow",parse:DIt},{key:"$tupleid",parse:PIt}];function TIt(e,t){return t.get(e.$ref)||Ye("Operator not defined: "+e.$ref)}function CIt(e,t,n){e.$params&&t.parseParameters(e.$params,n);const r="e:"+e.$expr.code;return t.fn[r]||(t.fn[r]=Lu(t.parameterExpression(e.$expr),e.$fields))}function SIt(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=uG(e.$key,e.$flat,t.expr.codegen))}function AIt(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=nc(e.$field,e.$name,t.expr.codegen))}function kIt(e,t){const n="c:"+e.$compare+"_"+e.$order,r=Rt(e.$compare).map(i=>i&&i.$tupleid?Jt:i);return t.fn[n]||(t.fn[n]=sG(r,e.$order,t.expr.codegen))}function IIt(e,t){const n=e.$encode,r={};for(const i in n){const s=n[i];r[i]=Lu(t.encodeExpression(s.$expr),s.$fields),r[i].output=s.$output}return r}function RIt(e,t){return t}function DIt(e,t){const n=e.$subflow;return function(r,i,s){const o=t.fork().parse(n),a=o.get(n.operators[0].id),u=o.signals.parent;return u&&u.set(s),a.detachSubflow=()=>t.detach(o),a}}function PIt(){return Jt}function NIt(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,r=e.stream!=null?t.get(e.stream):void 0,i;e.source?r=t.events(e.source,e.type,n):e.merge&&(i=e.merge.map(s=>t.get(s)),r=i[0].merge.apply(i[0],i.slice(1))),e.between&&(i=e.between.map(s=>t.get(s)),r=r.between(i[0],i[1])),e.filter&&(r=r.filter(n)),e.throttle!=null&&(r=r.throttle(+e.throttle)),e.debounce!=null&&(r=r.debounce(+e.debounce)),r==null&&Ye("Invalid stream definition: "+JSON.stringify(e)),e.consume&&r.consume(!0),t.stream(e,r)}function OIt(e){var t=this,n=kt(n=e.source)?n.$ref:n,r=t.get(n),i=null,s=e.update,o=void 0;r||Ye("Source not defined: "+e.source),i=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),s&&s.$expr&&(s.$params&&(o=t.parseParameters(s.$params)),s=t.handlerExpression(s.$expr)),t.update(e,r,i,s,o)}const $It={skip:!0};function MIt(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach(s=>{const o=t.signals[s];e.signals(s,o)&&(r[s]=o.value)})}if(e.data){var i=n.data={};Object.keys(t.data).forEach(s=>{const o=t.data[s];e.data(s,o)&&(i[s]=o.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(s=>s.getState(e))),n}function LIt(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach(s=>{n.update(t.signals[s],i[s],$It)}),Object.keys(r||{}).forEach(s=>{n.pulse(t.data[s].input,n.changeset().remove(rc).insert(r[s]))}),(e.subcontext||[]).forEach((s,o)=>{const a=t.subcontext[o];a&&a.setState(s)})}function xke(e,t,n,r){return new wke(e,t,n,r)}function wke(e,t,n,r){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=r||xIt,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function Yle(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}wke.prototype=Yle.prototype={fork(){const e=new Yle(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,r=n.dataflow,i=e.value;if(n.set(e.id,t),bIt(e.type)&&i&&(i.$ingest?r.ingest(t,i.$ingest,i.$format):i.$request?r.preload(t,i.$request,i.$format):r.pulse(t,r.changeset().insert(i))),e.root&&(n.root=t),e.parent){let s=n.get(e.parent.$ref);s?(r.connect(s,[t]),t.targets().add(s)):(n.unresolved=n.unresolved||[]).push(()=>{s=n.get(e.parent.$ref),r.connect(s,[t]),t.targets().add(s)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const s in e.data){const o=n.data[s]||(n.data[s]={});e.data[s].forEach(a=>o[a]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[jK(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:pIt,parseOperator:wIt,parseOperatorParameters:EIt,parseParameters:_It,parseStream:NIt,parseUpdate:OIt,getState:MIt,setState:LIt};function FIt(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),Eke(t,e.description()))}function Eke(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function BIt(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}const SF="default";function jIt(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:SF,item:null}));e.on(e.events("view","pointermove"),t,(n,r)=>{const i=t.value,s=i?It(i)?i:i.user:SF,o=r.item&&r.item.cursor||null;return i&&s===i.user&&o==i.item?i:{user:s,item:o}}),e.add(null,function(n){let r=n.cursor,i=this.value;return It(r)||(i=r.item,r=r.user),Y7(e,r&&r!==SF?r:i||r),i},{cursor:t})}function Y7(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function ON(e,t){var n=e._runtime.data;return Ot(n,t)||Ye("Unrecognized data set: "+t),n[t]}function zIt(e,t){return arguments.length<2?ON(this,e).values.value:e$.call(this,e,ab().remove(rc).insert(t))}function e$(e,t){z2e(t)||Ye("Second argument to changes must be a changeset.");const n=ON(this,e);return n.modified=!0,this.pulse(n.input,t)}function UIt(e,t){return e$.call(this,e,ab().insert(t))}function VIt(e,t){return e$.call(this,e,ab().remove(t))}function _ke(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function Tke(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function t$(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function HIt(e){var t=t$(e),n=_ke(e),r=Tke(e);e._renderer.background(e.background()),e._renderer.resize(n,r,t),e._handler.origin(t),e._resizeListeners.forEach(i=>{try{i(n,r)}catch(s){e.error(s)}})}function qIt(e,t,n){var r=e._renderer,i=r&&r.canvas(),s,o,a;return i&&(a=t$(e),o=t.changedTouches?t.changedTouches[0]:t,s=q6(o,i),s[0]-=a[0],s[1]-=a[1]),t.dataflow=e,t.item=n,t.vega=WIt(e,n,s),t}function WIt(e,t,n){const r=t?t.mark.marktype==="group"?t:t.mark.group:null;function i(o){var a=r,u;if(o){for(u=t;u;u=u.mark.group)if(u.mark.name===o){a=u;break}}return a&&a.mark&&a.mark.interactive?a:{}}function s(o){if(!o)return n;It(o)&&(o=i(o));const a=n.slice();for(;o;)a[0]-=o.x||0,a[1]-=o.y||0,o=o.mark&&o.mark.group;return a}return{view:ya(e),item:ya(t||{}),group:i,xy:s,x:o=>s(o)[0],y:o=>s(o)[1]}}const Kle="view",GIt="timer",YIt="window",KIt={trap:!1};function XIt(e){const t=Cn({defaults:{}},e),n=(r,i)=>{i.forEach(s=>{Qe(r[s])&&(r[s]=dd(r[s]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function Cke(e,t,n,r){e._eventListeners.push({type:n,sources:Rt(t),handler:r})}function QIt(e,t){var n=e._eventConfig.defaults,r=n.prevent,i=n.allow;return r===!1||i===!0?!1:r===!0||i===!1?!0:r?r[t]:i?!i[t]:e.preventDefault()}function NI(e,t,n){const r=e._eventConfig&&e._eventConfig[t];return r===!1||kt(r)&&!r[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0}function JIt(e,t,n){var r=this,i=new C6(n),s=function(l,c){r.runAsync(null,()=>{e===Kle&&QIt(r,t)&&l.preventDefault(),i.receive(qIt(r,l,c))})},o;if(e===GIt)NI(r,"timer",t)&&r.timer(s,t);else if(e===Kle)NI(r,"view",t)&&r.addEventListener(t,s,KIt);else if(e===YIt?NI(r,"window",t)&&typeof window<"u"&&(o=[window]):typeof document<"u"&&NI(r,"selector",t)&&(o=Array.from(document.querySelectorAll(e))),!o)r.warn("Can not resolve event source: "+e);else{for(var a=0,u=o.length;a<u;++a)o[a].addEventListener(t,s);Cke(r,o,t,s)}return i}function Xle(e){return e.item}function Qle(e){return e.item.mark.source}function Jle(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function ZIt(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","pointerover",Xle),Qle,Jle(e)),this.on(this.events("view","pointerout",Xle),Qle,Jle(t)),this}function eRt(){var e=this._tooltip,t=this._timers,n=this._handler.handlers(),r=this._eventListeners,i,s,o,a,u;for(i=t.length;--i>=0;)t[i].stop();for(i=r.length;--i>=0;)for(o=r[i],s=o.sources.length;--s>=0;)o.sources[s].removeEventListener(o.type,o.handler);for(e&&e.call(this,this._handler,null,null,null),i=n.length;--i>=0;)u=n[i].type,a=n[i].handler,this._handler.off(u,a);return this}function cl(e,t,n){const r=document.createElement(e);for(const i in t)r.setAttribute(i,t[i]);return n!=null&&(r.textContent=n),r}const tRt="vega-bind",nRt="vega-bind-name",rRt="vega-bind-radio";function iRt(e,t,n){if(!t)return;const r=n.param;let i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:o=>{o!=e.signal(r.signal)&&e.runAsync(null,()=>{i.source=!0,e.signal(r.signal,o)})}},r.debounce&&(i.update=oG(r.debounce,i.update))),(r.input==null&&r.element?sRt:aRt)(i,t,r,e),i.active||(e.on(e._signals[r.signal],null,()=>{i.source?i.source=!1:i.set(e.signal(r.signal))}),i.active=!0),i}function sRt(e,t,n,r){const i=n.event||"input",s=()=>e.update(t.value);r.signal(n.signal,t.value),t.addEventListener(i,s),Cke(r,t,i,s),e.set=o=>{t.value=o,t.dispatchEvent(oRt(i))}}function oRt(e){return typeof Event<"u"?new Event(e):{type:e}}function aRt(e,t,n,r){const i=r.signal(n.signal),s=cl("div",{class:tRt}),o=n.input==="radio"?s:s.appendChild(cl("label"));o.appendChild(cl("span",{class:nRt},n.name||n.signal)),t.appendChild(s);let a=uRt;switch(n.input){case"checkbox":a=lRt;break;case"select":a=cRt;break;case"radio":a=dRt;break;case"range":a=fRt;break}a(e,o,n,i)}function uRt(e,t,n,r){const i=cl("input");for(const s in n)s!=="signal"&&s!=="element"&&i.setAttribute(s==="input"?"type":s,n[s]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",()=>e.update(i.value)),e.elements=[i],e.set=s=>i.value=s}function lRt(e,t,n,r){const i={type:"checkbox",name:n.signal};r&&(i.checked=!0);const s=cl("input",i);t.appendChild(s),s.addEventListener("change",()=>e.update(s.checked)),e.elements=[s],e.set=o=>s.checked=!!o||null}function cRt(e,t,n,r){const i=cl("select",{name:n.signal}),s=n.labels||[];n.options.forEach((o,a)=>{const u={value:o};$N(o,r)&&(u.selected=!0),i.appendChild(cl("option",u,(s[a]||o)+""))}),t.appendChild(i),i.addEventListener("change",()=>{e.update(n.options[i.selectedIndex])}),e.elements=[i],e.set=o=>{for(let a=0,u=n.options.length;a<u;++a)if($N(n.options[a],o)){i.selectedIndex=a;return}}}function dRt(e,t,n,r){const i=cl("span",{class:rRt}),s=n.labels||[];t.appendChild(i),e.elements=n.options.map((o,a)=>{const u={type:"radio",name:n.signal,value:o};$N(o,r)&&(u.checked=!0);const l=cl("input",u);l.addEventListener("change",()=>e.update(o));const c=cl("label",{},(s[a]||o)+"");return c.prepend(l),i.appendChild(c),l}),e.set=o=>{const a=e.elements,u=a.length;for(let l=0;l<u;++l)$N(a[l].value,o)&&(a[l].checked=!0)}}function fRt(e,t,n,r){r=r!==void 0?r:(+n.max+ +n.min)/2;const i=n.max!=null?n.max:Math.max(100,+r)||100,s=n.min||Math.min(0,i,+r)||0,o=n.step||$0(s,i,100),a=cl("input",{type:"range",name:n.signal,min:s,max:i,step:o});a.value=r;const u=cl("span",{},+r);t.appendChild(a),t.appendChild(u);const l=()=>{u.textContent=a.value,e.update(+a.value)};a.addEventListener("input",l),a.addEventListener("change",l),e.elements=[a],e.set=c=>{a.value=c,u.textContent=c}}function $N(e,t){return e===t||e+""==t+""}function Ske(e,t,n,r,i,s){return t=t||new r(e.loader()),t.initialize(n,_ke(e),Tke(e),t$(e),i,s).background(e.background())}function zK(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function hRt(e,t,n,r){const i=new r(e.loader(),zK(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,t$(e),e);return t&&t.handlers().forEach(s=>{i.on(s.type,s.handler)}),i}function pRt(e,t){const n=this,r=n._renderType,i=n._eventConfig.bind,s=W6(r);e=n._el=e?AF(n,e,!0):null,FIt(n),s||n.error("Unrecognized renderer type: "+r);const o=s.handler||ZS,a=e?s.renderer:s.headless;return n._renderer=a?Ske(n,n._renderer,e,a):null,n._handler=hRt(n,n._handler,e,o),n._redraw=!0,e&&i!=="none"&&(t=t?n._elBind=AF(n,t,!0):e.appendChild(cl("form",{class:"vega-bindings"})),n._bind.forEach(u=>{u.param.element&&i!=="container"&&(u.element=AF(n,u.param.element,!!u.param.input))}),n._bind.forEach(u=>{iRt(n,u.element||t,u)})),n}function AF(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(r){t=null,e.error(r)}return t}const L_=e=>+e||0,mRt=e=>({top:e,bottom:e,left:e,right:e});function Zle(e){return kt(e)?{top:L_(e.top),bottom:L_(e.bottom),left:L_(e.left),right:L_(e.right)}:mRt(L_(e))}async function UK(e,t,n,r){const i=W6(t),s=i&&i.headless;return s||Ye("Unrecognized renderer type: "+t),await e.runAsync(),Ske(e,null,null,s,n,r).renderAsync(e._scenegraph.root)}async function gRt(e,t){e!==n0.Canvas&&e!==n0.SVG&&e!==n0.PNG&&Ye("Unrecognized image type: "+e);const n=await UK(this,e,t);return e===n0.SVG?yRt(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function yRt(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}async function bRt(e,t){return(await UK(this,n0.Canvas,e,t)).canvas()}async function vRt(e){return(await UK(this,n0.SVG,e)).svg()}function xRt(e,t,n){return xke(e,Qx,_C,n).parse(t)}function wRt(e){var t=this._runtime.scales;return Ot(t,e)||Ye("Unrecognized scale or projection: "+e),t[e].value}var Ake="width",kke="height",VK="padding",ece={skip:!0};function Ike(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===VK?r.left+r.right:0)}function Rke(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===VK?r.top+r.bottom:0)}function ERt(e){var t=e._signals,n=t[Ake],r=t[kke],i=t[VK];function s(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,a=>{e._width=a.size,e._viewWidth=Ike(e,a.size),s()},{size:n}),e._resizeHeight=e.add(null,a=>{e._height=a.size,e._viewHeight=Rke(e,a.size),s()},{size:r});const o=e.add(null,s,{pad:i});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=r.rank+1,o.rank=i.rank+1}function _Rt(e,t,n,r,i,s){this.runAfter(o=>{let a=0;o._autosize=0,o.width()!==n&&(a=1,o.signal(Ake,n,ece),o._resizeWidth.skip(!0)),o.height()!==r&&(a=1,o.signal(kke,r,ece),o._resizeHeight.skip(!0)),o._viewWidth!==e&&(o._resize=1,o._viewWidth=e),o._viewHeight!==t&&(o._resize=1,o._viewHeight=t),(o._origin[0]!==i[0]||o._origin[1]!==i[1])&&(o._resize=1,o._origin=i),a&&o.run("enter"),s&&o.runAfter(u=>u.resize())},!1,1)}function TRt(e){return this._runtime.getState(e||{data:CRt,signals:SRt,recurse:!0})}function CRt(e,t){return t.modified&&Qe(t.input.value)&&!e.startsWith("_:vega:_")}function SRt(e,t){return!(e==="parent"||t instanceof Qx.proxy)}function ARt(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function kRt(e,t){function n(r){e({timestamp:Date.now(),elapsed:r})}this._timers.push(plt(n,t))}function IRt(e,t,n,r){const i=e.element();i&&i.setAttribute("title",RRt(r))}function RRt(e){return e==null?"":Qe(e)?Dke(e):kt(e)&&!g0(e)?DRt(e):e+""}function DRt(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(Qe(n)?Dke(n):Pke(n))}).join(`
`)}function Dke(e){return"["+e.map(Pke).join(", ")+"]"}function Pke(e){return Qe(e)?"[]":kt(e)&&!g0(e)?"{}":e}function PRt(){if(this.renderer()==="canvas"&&this._renderer._canvas){let e=null;const t=()=>{e!=null&&e();const n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",t),e=()=>{n.removeEventListener("change",t)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};t()}}function Nke(e,t){const n=this;if(t=t||{},fx.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){const s=Cn({},e.locale,t.locale);n.locale(D2e(s.number,s.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||n0.Canvas,n._scenegraph=new CSe;const r=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||IRt,n._redraw=!0,n._handler=new ZS().scene(r),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=XIt(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const i=xRt(n,e,t.expr);n._runtime=i,n._signals=i.signals,n._bind=(e.bindings||[]).map(s=>({state:null,param:Cn({},s)})),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=Ike(n,n._width),n._viewHeight=Rke(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,ERt(n),BIt(n),jIt(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind),t.watchPixelRatio&&n._watchPixelRatio()}function OI(e,t){return Ot(e._signals,t)?e._signals[t]:Ye("Unrecognized signal name: "+bt(t))}function Oke(e,t){const n=(e._targets||[]).filter(r=>r._update&&r._update.handler===t);return n.length?n[0]:null}function tce(e,t,n,r){let i=Oke(n,r);return i||(i=zK(e,()=>r(t,n.value)),i.handler=r,e.on(n,null,i)),e}function nce(e,t,n){const r=Oke(t,n);return r&&t._targets.remove(r),e}Et(Nke,fx,{async evaluate(e,t,n){if(await fx.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,HIt(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(r){this.error(r)}return n&&QD(this,n),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=e!=null?e+"":null;return t!==this._desc&&Eke(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const r=OI(this,e);return arguments.length===1?r.value:this.update(r,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",Zle(e)):Zle(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(W6(e)||Ye("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(fx.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(OI(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:_Rt,addEventListener(e,t,n){let r=t;return n&&n.trap===!1||(r=zK(this,t),r.raw=t),this._handler.on(e,r),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),r=n.length,i,s;--r>=0;)if(s=n[r].type,i=n[r].handler,e===s&&(t===i||t===i.raw)){this._handler.off(s,i);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.includes(e)||t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return tce(this,e,OI(this,e),t)},removeSignalListener(e,t){return nce(this,OI(this,e),t)},addDataListener(e,t){return tce(this,e,ON(this,e).values,t)},removeDataListener(e,t){return nce(this,ON(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=Y7(this,null);this._globalCursor=!!e,t&&Y7(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:kRt,events:JIt,finalize:eRt,hover:ZIt,data:zIt,change:e$,insert:UIt,remove:VIt,scale:wRt,initialize:pRt,toImageURL:gRt,toCanvas:bRt,toSVG:vRt,getState:TRt,setState:ARt,_watchPixelRatio:PRt});const NRt="view",MN="[",LN="]",$ke="{",Mke="}",ORt=":",Lke=",",$Rt="@",MRt=">",LRt=/[[\]{}]/,FRt={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let Fke,Bke;function gg(e,t,n){return Fke=t||NRt,Bke=n||FRt,jke(e.trim()).map(K7)}function BRt(e){return Bke[e]}function m2(e,t,n,r,i){const s=e.length;let o=0,a;for(;t<s;++t){if(a=e[t],!o&&a===n)return t;i&&i.indexOf(a)>=0?--o:r&&r.indexOf(a)>=0&&++o}return t}function jke(e){const t=[],n=e.length;let r=0,i=0;for(;i<n;)i=m2(e,i,Lke,MN+$ke,LN+Mke),t.push(e.substring(r,i).trim()),r=++i;if(t.length===0)throw"Empty event selector: "+e;return t}function K7(e){return e[0]==="["?jRt(e):zRt(e)}function jRt(e){const t=e.length;let n=1,r;if(n=m2(e,n,LN,MN,LN),n===t)throw"Empty between selector: "+e;if(r=jke(e.substring(1,n)),r.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==MRt)throw"Expected '>' after between selector: "+e;r=r.map(K7);const i=K7(e.slice(1).trim());return i.between?{between:r,stream:i}:(i.between=r,i)}function zRt(e){const t={source:Fke},n=[];let r=[0,0],i=0,s=0,o=e.length,a=0,u,l;if(e[o-1]===Mke){if(a=e.lastIndexOf($ke),a>=0){try{r=URt(e.substring(a+1,o-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,a).trim(),o=e.length}else throw"Unmatched right brace: "+e;a=0}if(!o)throw e;if(e[0]===$Rt&&(i=++a),u=m2(e,a,ORt),u<o&&(n.push(e.substring(s,u).trim()),s=a=++u),a=m2(e,a,MN),a===o)n.push(e.substring(s,o).trim());else if(n.push(e.substring(s,a).trim()),l=[],s=++a,s===o)throw"Unmatched left bracket: "+e;for(;a<o;){if(a=m2(e,a,LN),a===o)throw"Unmatched left bracket: "+e;if(l.push(e.substring(s,a).trim()),a<o-1&&e[++a]!==MN)throw"Expected left bracket: "+e;s=++a}if(!(o=n.length)||LRt.test(n[o-1]))throw"Invalid event selector: "+e;return o>1?(t.type=n[1],i?t.markname=n[0].slice(1):BRt(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),l!=null&&(t.filter=l),r[0]&&(t.throttle=r[0]),r[1]&&(t.debounce=r[1]),t}function URt(e){const t=e.split(Lke);if(!e.length||t.length>2)throw e;return t.map(n=>{const r=+n;if(r!==r)throw e;return r})}function VRt(e){return kt(e)?e:{type:e||"pad"}}const F_=e=>+e||0,HRt=e=>({top:e,bottom:e,left:e,right:e});function qRt(e){return kt(e)?e.signal?e:{top:F_(e.top),bottom:F_(e.bottom),left:F_(e.left),right:F_(e.right)}:HRt(F_(e))}const Js=e=>kt(e)&&!Qe(e)?Cn({},e):{value:e};function rce(e,t,n,r){return n!=null?(kt(n)&&!Qe(n)||Qe(n)&&n.length&&kt(n[0])?e.update[t]=n:e[r||"enter"][t]={value:n},1):0}function Lo(e,t,n){for(const r in t)rce(e,r,t[r]);for(const r in n)rce(e,r,n[r],"update")}function xE(e,t,n){for(const r in t)n&&Ot(n,r)||(e[r]=Cn(e[r]||{},t[r]));return e}function Nv(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const HK="mark",qK="frame",WK="scope",WRt="axis",GRt="axis-domain",YRt="axis-grid",KRt="axis-label",XRt="axis-tick",QRt="axis-title",JRt="legend",ZRt="legend-band",eDt="legend-entry",tDt="legend-gradient",zke="legend-label",nDt="legend-symbol",rDt="legend-title",iDt="title",sDt="title-text",oDt="title-subtitle";function aDt(e,t,n,r,i){const s={},o={};let a,u,l,c;u="lineBreak",t==="text"&&i[u]!=null&&!Nv(u,e)&&kF(s,u,i[u]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),c=n===qK?i.group:n===HK?Cn({},i.mark,i[t]):null;for(u in c)l=Nv(u,e)||(u==="fill"||u==="stroke")&&(Nv("fill",e)||Nv("stroke",e)),l||kF(s,u,c[u]);Rt(r).forEach(d=>{const f=i.style&&i.style[d];for(const h in f)Nv(h,e)||kF(s,h,f[h])}),e=Cn({},e);for(u in s)c=s[u],c.signal?(a=a||{})[u]=c:o[u]=c;return e.enter=Cn(o,e.enter),a&&(e.update=Cn(a,e.update)),e}function kF(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const Uke=e=>It(e)?bt(e):e.signal?`(${e.signal})`:Vke(e);function n$(e){if(e.gradient!=null)return lDt(e);let t=e.signal?`(${e.signal})`:e.color?uDt(e.color):e.field!=null?Vke(e.field):e.value!==void 0?bt(e.value):void 0;return e.scale!=null&&(t=cDt(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${dP(e.exponent)})`),e.mult!=null&&(t+=`*${dP(e.mult)}`),e.offset!=null&&(t+=`+${dP(e.offset)}`),e.round&&(t=`round(${t})`),t}const $I=(e,t,n,r)=>`(${e}(${[t,n,r].map(n$).join(",")})+'')`;function uDt(e){return e.c?$I("hcl",e.h,e.c,e.l):e.h||e.s?$I("hsl",e.h,e.s,e.l):e.l||e.a?$I("lab",e.l,e.a,e.b):e.r||e.g||e.b?$I("rgb",e.r,e.g,e.b):null}function lDt(e){const t=[e.start,e.stop,e.count].map(n=>n==null?null:bt(n));for(;t.length&&Wn(t)==null;)t.pop();return t.unshift(Uke(e.gradient)),`gradient(${t.join(",")})`}function dP(e){return kt(e)?"("+n$(e)+")":e}function Vke(e){return Hke(kt(e)?e:{datum:e})}function Hke(e){let t,n,r;if(e.signal)t="datum",r=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(r=e.parent,t+=".datum"):r=e.group}else e.datum?(t="datum",r=e.datum):Ye("Invalid field reference: "+bt(e));return e.signal||(r=It(r)?sh(r).map(bt).join("]["):Hke(r)),t+"["+r+"]"}function cDt(e,t){const n=Uke(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+dP(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function dDt(e){let t="";return e.forEach(n=>{const r=n$(n);t+=n.test?`(${n.test})?${r}:`:r}),Wn(t)===":"&&(t+="null"),t}function qke(e,t,n,r,i,s){const o={};s=s||{},s.encoders={$encode:o},e=aDt(e,t,n,r,i.config);for(const a in e)o[a]=fDt(e[a],t,s,i);return s}function fDt(e,t,n,r){const i={},s={};for(const o in e)e[o]!=null&&(i[o]=pDt(hDt(e[o]),r,n,s));return{$expr:{marktype:t,channels:i},$fields:Object.keys(s),$output:Object.keys(e)}}function hDt(e){return Qe(e)?dDt(e):n$(e)}function pDt(e,t,n,r){const i=Gf(e,t);return i.$fields.forEach(s=>r[s]=1),Cn(n,i.$params),i.$expr}const mDt="outer",gDt=["value","update","init","react","bind"];function ice(e,t){Ye(e+' for "outer" push: '+bt(t))}function Wke(e,t){const n=e.name;if(e.push===mDt)t.signals[n]||ice("No prior signal definition",n),gDt.forEach(r=>{e[r]!==void 0&&ice("Invalid property ",r)});else{const r=t.addSignal(n,e.value);e.react===!1&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}}function X7(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function r$(e,t,n,r){return new X7(e,t,n,r)}function FN(e,t){return r$("operator",e,t)}function Qt(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function TC(e,t){return t?{$field:e,$name:t}:{$field:e}}const Q7=TC("key");function sce(e,t){return{$compare:e,$order:t}}function yDt(e,t){const n={$key:e};return t&&(n.$flat=!0),n}const bDt="ascending",vDt="descending";function xDt(e){return kt(e)?(e.order===vDt?"-":"+")+i$(e.op,e.field):""}function i$(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const GK="scope",J7="view";function ks(e){return e&&e.signal}function wDt(e){return e&&e.expr}function fP(e){if(ks(e))return!0;if(kt(e)){for(const t in e)if(fP(e[t]))return!0}return!1}function Bc(e,t){return e??t}function qy(e){return e&&e.signal||e}const oce="timer";function CC(e,t){return(e.merge?_Dt:e.stream?TDt:e.type?CDt:Ye("Invalid stream specification: "+bt(e)))(e,t)}function EDt(e){return e===GK?J7:e||J7}function _Dt(e,t){const n=e.merge.map(i=>CC(i,t)),r=YK({merge:n},e,t);return t.addStream(r).id}function TDt(e,t){const n=CC(e.stream,t),r=YK({stream:n},e,t);return t.addStream(r).id}function CDt(e,t){let n;e.type===oce?(n=t.event(oce,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(EDt(e.source),e.type);const r=YK({stream:n},e,t);return Object.keys(r).length===1?n:t.addStream(r).id}function YK(e,t,n){let r=t.between;return r&&(r.length!==2&&Ye('Stream "between" parameter must have 2 entries: '+bt(t)),e.between=[CC(r[0],n),CC(r[1],n)]),r=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&r.push(SDt(t.marktype,t.markname,t.markrole)),t.source===GK&&r.push("inScope(event.item)"),r.length&&(e.filter=Gf("("+r.join(")&&(")+")",n).$expr),(r=t.throttle)!=null&&(e.throttle=+r),(r=t.debounce)!=null&&(e.debounce=+r),t.consume&&(e.consume=!0),e}function SDt(e,t,n){const r="event.item";return r+(e&&e!=="*"?"&&"+r+".mark.marktype==='"+e+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(t?"&&"+r+".mark.name==='"+t+"'":"")}const ADt={code:"_.$value",ast:{type:"Identifier",value:"value"}};function kDt(e,t,n){const r=e.encode,i={target:n};let s=e.events,o=e.update,a=[];s||Ye("Signal update missing events specification."),It(s)&&(s=gg(s,t.isSubscope()?GK:J7)),s=Rt(s).filter(u=>u.signal||u.scale?(a.push(u),0):1),a.length>1&&(a=[RDt(a)]),s.length&&a.push(s.length>1?{merge:s}:s[0]),r!=null&&(o&&Ye("Signal encode and update are mutually exclusive."),o="encode(item(),"+bt(r)+")"),i.update=It(o)?Gf(o,t):o.expr!=null?Gf(o.expr,t):o.value!=null?o.value:o.signal!=null?{$expr:ADt,$params:{$value:t.signalRef(o.signal)}}:Ye("Invalid signal update specification."),e.force&&(i.options={force:!0}),a.forEach(u=>t.addUpdate(Cn(IDt(u,t),i)))}function IDt(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):CC(e,t)}}function RDt(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function DDt(e,t){const n=t.getSignal(e.name);let r=e.update;e.init&&(r?Ye("Signals can not include both init and update expressions."):(r=e.init,n.initonly=!0)),r&&(r=Gf(r,t),n.update=r.$expr,n.params=r.$params),e.on&&e.on.forEach(i=>kDt(i,t,n.id))}const Br=e=>(t,n,r)=>r$(e,n,t||void 0,r),Gke=Br("aggregate"),PDt=Br("axisticks"),Yke=Br("bound"),Cd=Br("collect"),ace=Br("compare"),NDt=Br("datajoin"),Kke=Br("encode"),ODt=Br("expression"),$Dt=Br("facet"),MDt=Br("field"),LDt=Br("key"),FDt=Br("legendentries"),BDt=Br("load"),jDt=Br("mark"),zDt=Br("multiextent"),UDt=Br("multivalues"),VDt=Br("overlap"),HDt=Br("params"),Xke=Br("prefacet"),qDt=Br("projection"),WDt=Br("proxy"),GDt=Br("relay"),Qke=Br("render"),YDt=Br("scale"),cb=Br("sieve"),KDt=Br("sortitems"),Jke=Br("viewlayout"),XDt=Br("values");let QDt=0;const Zke={min:"min",max:"max",count:"sum"};function JDt(e,t){const n=e.type||"linear";LCe(n)||Ye("Unrecognized scale type: "+bt(n)),t.addScale(e.name,{type:n,domain:void 0})}function ZDt(e,t){const n=t.getScale(e.name).params;let r;n.domain=eIe(e.domain,e,t),e.range!=null&&(n.range=nIe(e,t,n)),e.interpolate!=null&&lPt(e.interpolate,n),e.nice!=null&&(n.nice=uPt(e.nice,t)),e.bins!=null&&(n.bins=aPt(e.bins,t));for(r in e)Ot(n,r)||r==="name"||(n[r]=Yl(e[r],t))}function Yl(e,t){return kt(e)?e.signal?t.signalRef(e.signal):Ye("Unsupported object: "+bt(e)):e}function hP(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>Yl(n,t))}function s$(e){Ye("Can not find data set: "+bt(e))}function eIe(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&Ye("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(Qe(e)?ePt:e.fields?nPt:tPt)(e,t,n)}function ePt(e,t,n){return e.map(r=>Yl(r,n))}function tPt(e,t,n){const r=n.getData(e.data);return r||s$(e.data),ew(t.type)?r.valuesRef(n,e.field,tIe(e.sort,!1)):jCe(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)}function nPt(e,t,n){const r=e.data,i=e.fields.reduce((s,o)=>(o=It(o)?{data:r,field:o}:Qe(o)||o.signal?rPt(o,n):o,s.push(o),s),[]);return(ew(t.type)?iPt:jCe(t.type)?sPt:oPt)(e,n,i)}function rPt(e,t){const n="_:vega:_"+QDt++,r=Cd({});if(Qe(e))r.value={$ingest:e};else if(e.signal){const i="setdata("+bt(n)+","+e.signal+")";r.params.input=t.signalRef(i)}return t.addDataPipeline(n,[r,cb({})]),{data:n,field:"data"}}function iPt(e,t,n){const r=tIe(e.sort,!0);let i,s;const o=n.map(l=>{const c=t.getData(l.data);return c||s$(l.data),c.countsRef(t,l.field,r)}),a={groupby:Q7,pulse:o};r&&(i=r.op||"count",s=r.field?i$(i,r.field):"count",a.ops=[Zke[i]],a.fields=[t.fieldRef(s)],a.as=[s]),i=t.add(Gke(a));const u=t.add(Cd({pulse:Qt(i)}));return s=t.add(XDt({field:Q7,sort:t.sortRef(r),pulse:Qt(u)})),Qt(s)}function tIe(e,t){return e&&(!e.field&&!e.op?kt(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?Ye("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!Zke[e.op]&&Ye("Multiple domain scales can not be sorted using "+e.op)),e}function sPt(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||s$(i.data),s.domainRef(t,i.field)});return Qt(t.add(UDt({values:r})))}function oPt(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||s$(i.data),s.extentRef(t,i.field)});return Qt(t.add(zDt({extents:r})))}function aPt(e,t){return e.signal||Qe(e)?hP(e,t):t.objectProperty(e)}function uPt(e,t){return e.signal?t.signalRef(e.signal):kt(e)?{interval:Yl(e.interval),step:Yl(e.step)}:Yl(e)}function lPt(e,t){t.interpolate=Yl(e.type||e),e.gamma!=null&&(t.interpolateGamma=Yl(e.gamma))}function nIe(e,t,n){const r=t.config.range;let i=e.range;if(i.signal)return t.signalRef(i.signal);if(It(i)){if(r&&Ot(r,i))return e=Cn({},e,{range:r[i]}),nIe(e,t,n);i==="width"?i=[0,{signal:"width"}]:i==="height"?i=ew(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:Ye("Unrecognized scale range value: "+bt(i))}else if(i.scheme){n.scheme=Qe(i.scheme)?hP(i.scheme,t):Yl(i.scheme,t),i.extent&&(n.schemeExtent=hP(i.extent,t)),i.count&&(n.schemeCount=Yl(i.count,t));return}else if(i.step){n.rangeStep=Yl(i.step,t);return}else{if(ew(e.type)&&!Qe(i))return eIe(i,e,t);Qe(i)||Ye("Unsupported range type: "+bt(i))}return i.map(s=>(Qe(s)?hP:Yl)(s,t))}function cPt(e,t){const n=t.config.projection||{},r={};for(const i in e)i!=="name"&&(r[i]=Z7(e[i],i,t));for(const i in n)r[i]==null&&(r[i]=Z7(n[i],i,t));t.addProjection(e.name,r)}function Z7(e,t,n){return Qe(e)?e.map(r=>Z7(r,t,n)):kt(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:Ye("Unsupported parameter object: "+bt(e)):e}const Sd="top",wE="left",EE="right",q0="bottom",rIe="center",dPt="vertical",fPt="start",hPt="middle",pPt="end",ez="index",KK="label",mPt="offset",sw="perc",gPt="perc2",Jl="value",iA="guide-label",XK="guide-title",yPt="group-title",bPt="group-subtitle",uce="symbol",pP="gradient",tz="discrete",nz="size",vPt="shape",xPt="fill",wPt="stroke",EPt="strokeWidth",_Pt="strokeDash",TPt="opacity",QK=[nz,vPt,xPt,wPt,EPt,_Pt,TPt],sA={name:1,style:1,interactive:1},Jn={value:0},Zl={value:1},o$="group",iIe="rect",JK="rule",CPt="symbol",db="text";function SC(e){return e.type=o$,e.interactive=e.interactive||!1,e}function Fu(e,t){const n=(r,i)=>Bc(e[r],Bc(t[r],i));return n.isVertical=r=>dPt===Bc(e.direction,t.direction||(r?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>Bc(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>Bc(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>Bc(e.columns,Bc(t.columns,+n.isVertical(!0))),n}function sIe(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function SPt(e,t,n){const r=t.config.style[n];return r&&r[e]}function a$(e,t,n){return`item.anchor === '${fPt}' ? ${e} : item.anchor === '${pPt}' ? ${t} : ${n}`}const ZK=a$(bt(wE),bt(EE),bt(rIe));function APt(e){const t=e("tickBand");let n=e("tickOffset"),r,i;return t?t.signal?(r={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},i={signal:`(${t.signal}) === 'extent'`},kt(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(r=1,i=!0,n=0):(r=.5,i=!1):(r=e("bandPosition"),i=e("tickExtra")),{extra:i,band:r,offset:n}}function oIe(e,t){return t?e?kt(e)?Object.assign({},e,{offset:oIe(e.offset,t)}):{value:e,offset:t}:t:e}function _l(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=xE(e.encode,t,sA)):e.interactive=!1,e}function kPt(e,t,n,r){const i=Fu(e,n),s=i.isVertical(),o=i.gradientThickness(),a=i.gradientLength();let u,l,c,d,f;s?(l=[0,1],c=[0,0],d=o,f=a):(l=[0,0],c=[1,0],d=a,f=o);const h={enter:u={opacity:Jn,x:Jn,y:Jn,width:Js(d),height:Js(f)},update:Cn({},u,{opacity:Zl,fill:{gradient:t,start:l,stop:c}}),exit:{opacity:Jn}};return Lo(h,{stroke:i("gradientStrokeColor"),strokeWidth:i("gradientStrokeWidth")},{opacity:i("gradientOpacity")}),_l({type:iIe,role:tDt,encode:h},r)}function IPt(e,t,n,r,i){const s=Fu(e,n),o=s.isVertical(),a=s.gradientThickness(),u=s.gradientLength();let l,c,d,f,h="";o?(l="y",d="y2",c="x",f="width",h="1-"):(l="x",d="x2",c="y",f="height");const p={opacity:Jn,fill:{scale:t,field:Jl}};p[l]={signal:h+"datum."+sw,mult:u},p[c]=Jn,p[d]={signal:h+"datum."+gPt,mult:u},p[f]=Js(a);const m={enter:p,update:Cn({},p,{opacity:Zl}),exit:{opacity:Jn}};return Lo(m,{stroke:s("gradientStrokeColor"),strokeWidth:s("gradientStrokeWidth")},{opacity:s("gradientOpacity")}),_l({type:iIe,role:ZRt,key:Jl,from:i,encode:m},r)}const RPt=`datum.${sw}<=0?"${wE}":datum.${sw}>=1?"${EE}":"${rIe}"`,DPt=`datum.${sw}<=0?"${q0}":datum.${sw}>=1?"${Sd}":"${hPt}"`;function lce(e,t,n,r){const i=Fu(e,t),s=i.isVertical(),o=Js(i.gradientThickness()),a=i.gradientLength();let u=i("labelOverlap"),l,c,d,f,h="";const p={enter:l={opacity:Jn},update:c={opacity:Zl,text:{field:KK}},exit:{opacity:Jn}};return Lo(p,{fill:i("labelColor"),fillOpacity:i("labelOpacity"),font:i("labelFont"),fontSize:i("labelFontSize"),fontStyle:i("labelFontStyle"),fontWeight:i("labelFontWeight"),limit:Bc(e.labelLimit,t.gradientLabelLimit)}),s?(l.align={value:"left"},l.baseline=c.baseline={signal:DPt},d="y",f="x",h="1-"):(l.align=c.align={signal:RPt},l.baseline={value:"top"},d="x",f="y"),l[d]=c[d]={signal:h+"datum."+sw,mult:a},l[f]=c[f]=o,o.offset=Bc(e.labelOffset,t.gradientLabelOffset)||0,u=u?{separation:i("labelSeparation"),method:u,order:"datum."+ez}:void 0,_l({type:db,role:zke,style:iA,key:Jl,from:r,encode:p,overlap:u},n)}function PPt(e,t,n,r,i){const s=Fu(e,t),o=n.entries,a=!!(o&&o.interactive),u=o?o.name:void 0,l=s("clipHeight"),c=s("symbolOffset"),d={data:"value"},f=`(${i}) ? datum.${mPt} : datum.${nz}`,h=l?Js(l):{field:nz},p=`datum.${ez}`,m=`max(1, ${i})`;let y,v,b,w,E;h.mult=.5,y={enter:v={opacity:Jn,x:{signal:f,mult:.5,offset:c},y:h},update:b={opacity:Zl,x:v.x,y:v.y},exit:{opacity:Jn}};let _=null,C=null;e.fill||(_=t.symbolBaseFillColor,C=t.symbolBaseStrokeColor),Lo(y,{fill:s("symbolFillColor",_),shape:s("symbolType"),size:s("symbolSize"),stroke:s("symbolStrokeColor",C),strokeDash:s("symbolDash"),strokeDashOffset:s("symbolDashOffset"),strokeWidth:s("symbolStrokeWidth")},{opacity:s("symbolOpacity")}),QK.forEach(N=>{e[N]&&(b[N]=v[N]={scale:e[N],field:Jl})});const S=_l({type:CPt,role:nDt,key:Jl,from:d,clip:l?!0:void 0,encode:y},n.symbols),k=Js(c);k.offset=s("labelOffset"),y={enter:v={opacity:Jn,x:{signal:f,offset:k},y:h},update:b={opacity:Zl,text:{field:KK},x:v.x,y:v.y},exit:{opacity:Jn}},Lo(y,{align:s("labelAlign"),baseline:s("labelBaseline"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontStyle:s("labelFontStyle"),fontWeight:s("labelFontWeight"),limit:s("labelLimit")});const R=_l({type:db,role:zke,style:iA,key:Jl,from:d,encode:y},n.labels);return y={enter:{noBound:{value:!l},width:Jn,height:l?Js(l):Jn,opacity:Jn},exit:{opacity:Jn},update:b={opacity:Zl,row:{signal:null},column:{signal:null}}},s.isVertical(!0)?(w=`ceil(item.mark.items.length / ${m})`,b.row.signal=`${p}%${w}`,b.column.signal=`floor(${p} / ${w})`,E={field:["row",p]}):(b.row.signal=`floor(${p} / ${m})`,b.column.signal=`${p} % ${m}`,E={field:p}),b.column.signal=`(${i})?${b.column.signal}:${p}`,r={facet:{data:r,name:"value",groupby:ez}},SC({role:WK,from:r,encode:xE(y,o,sA),marks:[S,R],name:u,interactive:a,sort:E})}function NPt(e,t){const n=Fu(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const eX='item.orient === "left"',tX='item.orient === "right"',u$=`(${eX} || ${tX})`,OPt=`datum.vgrad && ${u$}`,$Pt=a$('"top"','"bottom"','"middle"'),MPt=a$('"right"','"left"','"center"'),LPt=`datum.vgrad && ${tX} ? (${MPt}) : (${u$} && !(datum.vgrad && ${eX})) ? "left" : ${ZK}`,FPt=`item._anchor || (${u$} ? "middle" : "start")`,BPt=`${OPt} ? (${eX} ? -90 : 90) : 0`,jPt=`${u$} ? (datum.vgrad ? (${tX} ? "bottom" : "top") : ${$Pt}) : "top"`;function zPt(e,t,n,r){const i=Fu(e,t),s={enter:{opacity:Jn},update:{opacity:Zl,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:Jn}};return Lo(s,{orient:i("titleOrient"),_anchor:i("titleAnchor"),anchor:{signal:FPt},angle:{signal:BPt},align:{signal:LPt},baseline:{signal:jPt},text:e.title,fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),baseline:i("titleBaseline")}),_l({type:db,role:rDt,style:XK,from:r,encode:s},n)}function UPt(e,t){let n;return kt(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+cce(e.path)+")":e.sphere&&(n="geoShape("+cce(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function cce(e){return kt(e)&&e.signal?e.signal:bt(e)}function aIe(e){const t=e.role||"";return t.startsWith("axis")||t.startsWith("legend")||t.startsWith("title")?t:e.type===o$?WK:t||HK}function VPt(e){return{marktype:e.type,name:e.name||void 0,role:e.role||aIe(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function HPt(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function nX(e,t){const n=H2e(e.type);n||Ye("Unrecognized transform type: "+bt(e.type));const r=r$(n.type.toLowerCase(),null,uIe(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r}function uIe(e,t,n){const r={},i=e.params.length;for(let s=0;s<i;++s){const o=e.params[s];r[o.name]=qPt(o,t,n)}return r}function qPt(e,t,n){const r=e.type,i=t[e.name];if(r==="index")return WPt(e,t,n);if(i===void 0){e.required&&Ye("Missing required "+bt(t.type)+" parameter: "+bt(e.name));return}else{if(r==="param")return GPt(e,t,n);if(r==="projection")return n.projectionRef(t[e.name])}return e.array&&!ks(i)?i.map(s=>dce(e,s,n)):dce(e,i,n)}function dce(e,t,n){const r=e.type;if(ks(t))return hce(r)?Ye("Expression references can not be signals."):IF(r)?n.fieldRef(t):pce(r)?n.compareRef(t):n.signalRef(t.signal);{const i=e.expr||IF(r);return i&&YPt(t)?n.exprRef(t.expr,t.as):i&&KPt(t)?TC(t.field,t.as):hce(r)?Gf(t,n):XPt(r)?Qt(n.getData(t).values):IF(r)?TC(t):pce(r)?n.compareRef(t):t}}function WPt(e,t,n){return It(t.from)||Ye('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function GPt(e,t,n){const r=t[e.name];return e.array?(Qe(r)||Ye("Expected an array of sub-parameters. Instead: "+bt(r)),r.map(i=>fce(e,i,n))):fce(e,r,n)}function fce(e,t,n){const r=e.params.length;let i;for(let o=0;o<r;++o){i=e.params[o];for(const a in i.key)if(i.key[a]!==t[a]){i=null;break}if(i)break}i||Ye("Unsupported parameter: "+bt(t));const s=Cn(uIe(i,t,n),i.key);return Qt(n.add(HDt(s)))}const YPt=e=>e&&e.expr,KPt=e=>e&&e.field,XPt=e=>e==="data",hce=e=>e==="expr",IF=e=>e==="field",pce=e=>e==="compare";function QPt(e,t,n){let r,i,s,o,a;return e?(r=e.facet)&&(t||Ye("Only group marks can be faceted."),r.field!=null?o=a=mP(r,n):(e.data?a=Qt(n.getData(e.data).aggregate):(s=nX(Cn({type:"aggregate",groupby:Rt(r.groupby)},r.aggregate),n),s.params.key=n.keyRef(r.groupby),s.params.pulse=mP(r,n),o=a=Qt(n.add(s))),i=n.keyRef(r.groupby,!0))):o=Qt(n.add(Cd(null,[{}]))),o||(o=mP(e,n)),{key:i,pulse:o,parent:a}}function mP(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:Qt(t.getData(e.data).output)}function v1(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}v1.fromEntries=function(e,t){const n=t.length,r=t[n-1],i=t[n-2];let s=t[0],o=null,a=1;for(s&&s.type==="load"&&(s=t[1]),e.add(t[0]);a<n;++a)t[a].params.pulse=Qt(t[a-1]),e.add(t[a]),t[a].type==="aggregate"&&(o=t[a]);return new v1(e,s,i,r,o)};function lIe(e){return It(e)?e:null}function mce(e,t,n){const r=i$(n.op,n.field);let i;if(t.ops){for(let s=0,o=t.as.length;s<o;++s)if(t.as[s]===r)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((i=n.op.signal)?e.signalRef(i):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(r))}function B_(e,t,n,r,i,s,o){const a=t[n]||(t[n]={}),u=xDt(s);let l=lIe(i),c,d;if(l!=null&&(e=t.scope,l=l+(u?"|"+u:""),c=a[l]),!c){const f=s?{field:Q7,pulse:t.countsRef(e,i,s)}:{field:e.fieldRef(i),pulse:Qt(t.output)};u&&(f.sort=e.sortRef(s)),d=e.add(r$(r,void 0,f)),o&&(t.index[i]=d),c=Qt(d),l!=null&&(a[l]=c)}return c}v1.prototype={countsRef(e,t,n){const r=this,i=r.counts||(r.counts={}),s=lIe(t);let o,a,u;return s!=null&&(e=r.scope,o=i[s]),o?n&&n.field&&mce(e,o.agg.params,n):(u={groupby:e.fieldRef(t,"key"),pulse:Qt(r.output)},n&&n.field&&mce(e,u,n),a=e.add(Gke(u)),o=e.add(Cd({pulse:Qt(a)})),o={agg:a,ref:Qt(o)},s!=null&&(i[s]=o)),o.ref},tuplesRef(){return Qt(this.values)},extentRef(e,t){return B_(e,this,"extent","extent",t,!1)},domainRef(e,t){return B_(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return B_(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return B_(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return B_(e,this,"indata","tupleindex",t,!0,!0)}};function JPt(e,t,n){const r=e.from.facet,i=r.name,s=mP(r,t);let o;r.name||Ye("Facet must have a name: "+bt(r)),r.data||Ye("Facet must reference a data set: "+bt(r)),r.field?o=t.add(Xke({field:t.fieldRef(r.field),pulse:s})):r.groupby?o=t.add($Dt({key:t.keyRef(r.groupby),group:Qt(t.proxy(n.parent)),pulse:s})):Ye("Facet must specify groupby or field: "+bt(r));const a=t.fork(),u=a.add(Cd()),l=a.add(cb({pulse:Qt(u)}));a.addData(i,new v1(a,u,u,l)),a.addSignal("parent",null),o.params.subflow={$subflow:a.parse(e).toRuntime()}}function ZPt(e,t,n){const r=t.add(Xke({pulse:n.pulse})),i=t.fork();i.add(cb()),i.addSignal("parent",null),r.params.subflow={$subflow:i.parse(e).toRuntime()}}function cIe(e,t,n){const r=e.remove,i=e.insert,s=e.toggle,o=e.modify,a=e.values,u=t.add(FN()),l="if("+e.trigger+',modify("'+n+'",'+[i,r,s,o,a].map(d=>d??"null").join(",")+"),0)",c=Gf(l,t);u.update=c.$expr,u.params=c.$params}function l$(e,t){const n=aIe(e),r=e.type===o$,i=e.from&&e.from.facet,s=e.overlap;let o=e.layout||n===WK||n===qK,a,u,l,c,d,f,h;const p=n===HK||o||i,m=QPt(e.from,r,t);u=t.add(NDt({key:m.key||(e.key?TC(e.key):void 0),pulse:m.pulse,clean:!r}));const y=Qt(u);u=l=t.add(Cd({pulse:y})),u=t.add(jDt({markdef:VPt(e),interactive:HPt(e.interactive,t),clip:UPt(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:Qt(u)}));const v=Qt(u);u=c=t.add(Kke(qke(e.encode,e.type,n,e.style,t,{mod:!1,pulse:v}))),u.params.parent=t.encode(),e.transform&&e.transform.forEach(C=>{const S=nX(C,t),k=S.metadata;(k.generates||k.changes)&&Ye("Mark transforms should not generate new data."),k.nomod||(c.params.mod=!0),S.params.pulse=Qt(u),t.add(u=S)}),e.sort&&(u=t.add(KDt({sort:t.compareRef(e.sort),pulse:Qt(u)})));const b=Qt(u);(i||o)&&(o=t.add(Jke({layout:t.objectProperty(e.layout),legends:t.legends,mark:v,pulse:b})),f=Qt(o));const w=t.add(Yke({mark:v,pulse:f||b}));h=Qt(w),r&&(p&&(a=t.operators,a.pop(),o&&a.pop()),t.pushState(b,f||h,y),i?JPt(e,t,m):p?ZPt(e,t,m):t.parse(e),t.popState(),p&&(o&&a.push(o),a.push(w))),s&&(h=e3t(s,h,t));const E=t.add(Qke({pulse:h})),_=t.add(cb({pulse:Qt(E)},void 0,t.parent()));e.name!=null&&(d=e.name,t.addData(d,new v1(t,l,E,_)),e.on&&e.on.forEach(C=>{(C.insert||C.remove||C.toggle)&&Ye("Marks only support modify triggers."),cIe(C,t,d)}))}function e3t(e,t,n){const r=e.method,i=e.bound,s=e.separation,o={separation:ks(s)?n.signalRef(s.signal):s,method:ks(r)?n.signalRef(r.signal):r,pulse:t};if(e.order&&(o.sort=n.compareRef({field:e.order})),i){const a=i.tolerance;o.boundTolerance=ks(a)?n.signalRef(a.signal):+a,o.boundScale=n.scaleRef(i.scale),o.boundOrient=i.orient}return Qt(n.add(VDt(o)))}function t3t(e,t){const n=t.config.legend,r=e.encode||{},i=Fu(e,n),s=r.legend||{},o=s.name||void 0,a=s.interactive,u=s.style,l={};let c=0,d,f,h;QK.forEach(w=>e[w]?(l[w]=e[w],c=c||e[w]):0),c||Ye("Missing valid scale for legend.");const p=n3t(e,t.scaleType(c)),m={title:e.title!=null,scales:l,type:p,vgrad:p!=="symbol"&&i.isVertical()},y=Qt(t.add(Cd(null,[m]))),v={enter:{x:{value:0},y:{value:0}}},b=Qt(t.add(FDt(f={type:p,scale:t.scaleRef(c),count:t.objectProperty(i("tickCount")),limit:t.property(i("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return p===pP?(h=[kPt(e,c,n,r.gradient),lce(e,n,r.labels,b)],f.count=f.count||t.signalRef(`max(2,2*floor((${qy(i.gradientLength())})/100))`)):p===tz?h=[IPt(e,c,n,r.gradient,b),lce(e,n,r.labels,b)]:(d=NPt(e,n),h=[PPt(e,n,r,b,qy(d.columns))],f.size=s3t(e,t,h[0].marks)),h=[SC({role:eDt,from:y,encode:v,marks:h,layout:d,interactive:a})],m.title&&h.push(zPt(e,n,r.title,y)),l$(SC({role:JRt,from:y,encode:xE(i3t(i,e,n),s,sA),marks:h,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:o,interactive:a,style:u}),t)}function n3t(e,t){let n=e.type||uce;return!e.type&&r3t(e)===1&&(e.fill||e.stroke)&&(n=mY(t)?pP:y7(t)?tz:uce),n!==pP?n:y7(t)?tz:pP}function r3t(e){return QK.reduce((t,n)=>t+(e[n]?1:0),0)}function i3t(e,t,n){const r={enter:{},update:{}};return Lo(r,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),r}function s3t(e,t,n){const r=qy(gce("size",e,n)),i=qy(gce("strokeWidth",e,n)),s=qy(o3t(n[1].encode,t,iA));return Gf(`max(ceil(sqrt(${r})+${i}),${s})`,t)}function gce(e,t,n){return t[e]?`scale("${t[e]}",datum)`:sIe(e,n[0].encode)}function o3t(e,t,n){return sIe("fontSize",e)||SPt("fontSize",t,n)}const a3t=`item.orient==="${wE}"?-90:item.orient==="${EE}"?90:0`;function u3t(e,t){e=It(e)?{text:e}:e;const n=Fu(e,t.config.title),r=e.encode||{},i=r.group||{},s=i.name||void 0,o=i.interactive,a=i.style,u=[],l={},c=Qt(t.add(Cd(null,[l])));return u.push(d3t(e,n,l3t(e),c)),e.subtitle&&u.push(f3t(e,n,r.subtitle,c)),l$(SC({role:iDt,from:c,encode:c3t(n,i),marks:u,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:s,interactive:o,style:a}),t)}function l3t(e){const t=e.encode;return t&&t.title||Cn({name:e.name,interactive:e.interactive,style:e.style},t)}function c3t(e,t){const n={enter:{},update:{}};return Lo(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:ZK},angle:{signal:a3t},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),xE(n,t,sA)}function d3t(e,t,n,r){const i={value:0},s=e.text,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return Lo(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),_l({type:db,role:sDt,style:yPt,from:r,encode:o},n)}function f3t(e,t,n,r){const i={value:0},s=e.subtitle,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return Lo(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),_l({type:db,role:oDt,style:bPt,from:r,encode:o},n)}function h3t(e,t){const n=[];e.transform&&e.transform.forEach(r=>{n.push(nX(r,t))}),e.on&&e.on.forEach(r=>{cIe(r,t,e.name)}),t.addDataPipeline(e.name,p3t(e,t,n))}function p3t(e,t,n){const r=[];let i=null,s=!1,o=!1,a,u,l,c,d;for(e.values?ks(e.values)||fP(e.format)?(r.push(yce(t,e)),r.push(i=qg())):r.push(i=qg({$ingest:e.values,$format:e.format})):e.url?fP(e.url)||fP(e.format)?(r.push(yce(t,e)),r.push(i=qg())):r.push(i=qg({$request:e.url,$format:e.format})):e.source&&(i=a=Rt(e.source).map(f=>Qt(t.getData(f).output)),r.push(null)),u=0,l=n.length;u<l;++u)c=n[u],d=c.metadata,!i&&!d.source&&r.push(i=qg()),r.push(c),d.generates&&(o=!0),d.modifies&&!o&&(s=!0),d.source?i=c:d.changes&&(i=null);return a&&(l=a.length-1,r[0]=GDt({derive:s,pulse:l?a:a[0]}),(s||l)&&r.splice(1,0,qg())),i||r.push(qg()),r.push(cb({})),r}function qg(e){const t=Cd({},e);return t.metadata={source:!0},t}function yce(e,t){return BDt({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const dIe=e=>e===q0||e===Sd,c$=(e,t,n)=>ks(e)?b3t(e.signal,t,n):e===wE||e===Sd?t:n,Zs=(e,t,n)=>ks(e)?g3t(e.signal,t,n):dIe(e)?t:n,od=(e,t,n)=>ks(e)?y3t(e.signal,t,n):dIe(e)?n:t,fIe=(e,t,n)=>ks(e)?v3t(e.signal,t,n):e===Sd?{value:t}:{value:n},m3t=(e,t,n)=>ks(e)?x3t(e.signal,t,n):e===EE?{value:t}:{value:n},g3t=(e,t,n)=>hIe(`${e} === '${Sd}' || ${e} === '${q0}'`,t,n),y3t=(e,t,n)=>hIe(`${e} !== '${Sd}' && ${e} !== '${q0}'`,t,n),b3t=(e,t,n)=>rX(`${e} === '${wE}' || ${e} === '${Sd}'`,t,n),v3t=(e,t,n)=>rX(`${e} === '${Sd}'`,t,n),x3t=(e,t,n)=>rX(`${e} === '${EE}'`,t,n),hIe=(e,t,n)=>(t=t!=null?Js(t):t,n=n!=null?Js(n):n,bce(t)&&bce(n)?(t=t?t.signal||bt(t.value):null,n=n?n.signal||bt(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[Cn({test:e},t)].concat(n||[])),bce=e=>e==null||Object.keys(e).length===1,rX=(e,t,n)=>({signal:`${e} ? (${qv(t)}) : (${qv(n)})`}),w3t=(e,t,n,r,i)=>({signal:(r!=null?`${e} === '${wE}' ? (${qv(r)}) : `:"")+(n!=null?`${e} === '${q0}' ? (${qv(n)}) : `:"")+(i!=null?`${e} === '${EE}' ? (${qv(i)}) : `:"")+(t!=null?`${e} === '${Sd}' ? (${qv(t)}) : `:"")+"(null)"}),qv=e=>ks(e)?e.signal:e==null?null:bt(e),E3t=(e,t)=>t===0?0:ks(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},hx=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function mv(e,t,n,r){let i;if(t&&Ot(t,e))return t[e];if(Ot(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":i="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":i=e[5].toLowerCase()+e.slice(6)}return r[XK][i]}else if(e.startsWith("label")){switch(e){case"labelColor":i="fill";break;case"labelFont":case"labelFontSize":i=e[5].toLowerCase()+e.slice(6)}return r[iA][i]}return null}function vce(e){const t={};for(const n of e)if(n)for(const r in n)t[r]=1;return Object.keys(t)}function _3t(e,t){var n=t.config,r=n.style,i=n.axis,s=t.scaleType(e.scale)==="band"&&n.axisBand,o=e.orient,a,u,l;if(ks(o)){const d=vce([n.axisX,n.axisY]),f=vce([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);a={};for(l of d)a[l]=Zs(o,mv(l,n.axisX,i,r),mv(l,n.axisY,i,r));u={};for(l of f)u[l]=w3t(o.signal,mv(l,n.axisTop,i,r),mv(l,n.axisBottom,i,r),mv(l,n.axisLeft,i,r),mv(l,n.axisRight,i,r))}else a=o===Sd||o===q0?n.axisX:n.axisY,u=n["axis"+o[0].toUpperCase()+o.slice(1)];return a||u||s?Cn({},i,a,u,s):i}function T3t(e,t,n,r){const i=Fu(e,t),s=e.orient;let o,a;const u={enter:o={opacity:Jn},update:a={opacity:Zl},exit:{opacity:Jn}};Lo(u,{stroke:i("domainColor"),strokeCap:i("domainCap"),strokeDash:i("domainDash"),strokeDashOffset:i("domainDashOffset"),strokeWidth:i("domainWidth"),strokeOpacity:i("domainOpacity")});const l=xce(e,0),c=xce(e,1);return o.x=a.x=Zs(s,l,Jn),o.x2=a.x2=Zs(s,c),o.y=a.y=od(s,l,Jn),o.y2=a.y2=od(s,c),_l({type:JK,role:GRt,from:r,encode:u},n)}function xce(e,t){return{scale:e.scale,range:t}}function C3t(e,t,n,r,i){const s=Fu(e,t),o=e.orient,a=e.gridScale,u=c$(o,1,-1),l=S3t(e.offset,u);let c,d,f;const h={enter:c={opacity:Jn},update:f={opacity:Zl},exit:d={opacity:Jn}};Lo(h,{stroke:s("gridColor"),strokeCap:s("gridCap"),strokeDash:s("gridDash"),strokeDashOffset:s("gridDashOffset"),strokeOpacity:s("gridOpacity"),strokeWidth:s("gridWidth")});const p={scale:e.scale,field:Jl,band:i.band,extra:i.extra,offset:i.offset,round:s("tickRound")},m=Zs(o,{signal:"height"},{signal:"width"}),y=a?{scale:a,range:0,mult:u,offset:l}:{value:0,offset:l},v=a?{scale:a,range:1,mult:u,offset:l}:Cn(m,{mult:u,offset:l});return c.x=f.x=Zs(o,p,y),c.y=f.y=od(o,p,y),c.x2=f.x2=od(o,v),c.y2=f.y2=Zs(o,v),d.x=Zs(o,p),d.y=od(o,p),_l({type:JK,role:YRt,key:Jl,from:r,encode:h},n)}function S3t(e,t){if(t!==1)if(!kt(e))e=ks(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=Cn({},e);for(;n.mult!=null;)if(kt(n.mult))n=n.mult=Cn({},n.mult);else return n.mult=ks(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function A3t(e,t,n,r,i,s){const o=Fu(e,t),a=e.orient,u=c$(a,-1,1);let l,c,d;const f={enter:l={opacity:Jn},update:d={opacity:Zl},exit:c={opacity:Jn}};Lo(f,{stroke:o("tickColor"),strokeCap:o("tickCap"),strokeDash:o("tickDash"),strokeDashOffset:o("tickDashOffset"),strokeOpacity:o("tickOpacity"),strokeWidth:o("tickWidth")});const h=Js(i);h.mult=u;const p={scale:e.scale,field:Jl,band:s.band,extra:s.extra,offset:s.offset,round:o("tickRound")};return d.y=l.y=Zs(a,Jn,p),d.y2=l.y2=Zs(a,h),c.x=Zs(a,p),d.x=l.x=od(a,Jn,p),d.x2=l.x2=od(a,h),c.y=od(a,p),_l({type:JK,role:XRt,key:Jl,from:r,encode:f},n)}function RF(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}function k3t(e,t,n,r,i,s){const o=Fu(e,t),a=e.orient,u=e.scale,l=c$(a,-1,1),c=qy(o("labelFlush")),d=qy(o("labelFlushOffset")),f=o("labelAlign"),h=o("labelBaseline");let p=c===0||!!c,m;const y=Js(i);y.mult=l,y.offset=Js(o("labelPadding")||0),y.offset.mult=l;const v={scale:u,field:Jl,band:.5,offset:oIe(s.offset,o("labelOffset"))},b=Zs(a,p?RF(u,c,'"left"','"right"','"center"'):{value:"center"},m3t(a,"left","right")),w=Zs(a,fIe(a,"bottom","top"),p?RF(u,c,'"top"','"bottom"','"middle"'):{value:"middle"}),E=RF(u,c,`-(${d})`,d,0);p=p&&d;const _={opacity:Jn,x:Zs(a,v,y),y:od(a,v,y)},C={enter:_,update:m={opacity:Zl,text:{field:KK},x:_.x,y:_.y,align:b,baseline:w},exit:{opacity:Jn,x:_.x,y:_.y}};Lo(C,{dx:!f&&p?Zs(a,E):null,dy:!h&&p?od(a,E):null}),Lo(C,{angle:o("labelAngle"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontWeight:o("labelFontWeight"),fontStyle:o("labelFontStyle"),limit:o("labelLimit"),lineHeight:o("labelLineHeight")},{align:f,baseline:h});const S=o("labelBound");let k=o("labelOverlap");return k=k||S?{separation:o("labelSeparation"),method:k,order:"datum.index",bound:S?{scale:u,orient:a,tolerance:S}:null}:void 0,m.align!==b&&(m.align=hx(m.align,b)),m.baseline!==w&&(m.baseline=hx(m.baseline,w)),_l({type:db,role:KRt,style:iA,key:Jl,from:r,encode:C,overlap:k},n)}function I3t(e,t,n,r){const i=Fu(e,t),s=e.orient,o=c$(s,-1,1);let a,u;const l={enter:a={opacity:Jn,anchor:Js(i("titleAnchor",null)),align:{signal:ZK}},update:u=Cn({},a,{opacity:Zl,text:Js(e.title)}),exit:{opacity:Jn}},c={signal:`lerp(range("${e.scale}"), ${a$(0,1,.5)})`};return u.x=Zs(s,c),u.y=od(s,c),a.angle=Zs(s,Jn,E3t(o,90)),a.baseline=Zs(s,fIe(s,q0,Sd),{value:q0}),u.angle=a.angle,u.baseline=a.baseline,Lo(l,{fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),angle:i("titleAngle"),baseline:i("titleBaseline")}),R3t(i,s,l,n),l.update.align=hx(l.update.align,a.align),l.update.angle=hx(l.update.angle,a.angle),l.update.baseline=hx(l.update.baseline,a.baseline),_l({type:db,role:QRt,style:XK,from:r,encode:l},n)}function R3t(e,t,n,r){const i=(a,u)=>a!=null?(n.update[u]=hx(Js(a),n.update[u]),!1):!Nv(u,r),s=i(e("titleX"),"x"),o=i(e("titleY"),"y");n.enter.auto=o===s?Js(o):Zs(t,Js(o),Js(s))}function D3t(e,t){const n=_3t(e,t),r=e.encode||{},i=r.axis||{},s=i.name||void 0,o=i.interactive,a=i.style,u=Fu(e,n),l=APt(u),c={scale:e.scale,ticks:!!u("ticks"),labels:!!u("labels"),grid:!!u("grid"),domain:!!u("domain"),title:e.title!=null},d=Qt(t.add(Cd({},[c]))),f=Qt(t.add(PDt({scale:t.scaleRef(e.scale),extra:t.property(l.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),h=[];let p;return c.grid&&h.push(C3t(e,n,r.grid,f,l)),c.ticks&&(p=u("tickSize"),h.push(A3t(e,n,r.ticks,f,p,l))),c.labels&&(p=c.ticks?p:0,h.push(k3t(e,n,r.labels,f,p,l))),c.domain&&h.push(T3t(e,n,r.domain,d)),c.title&&h.push(I3t(e,n,r.title,d)),l$(SC({role:WRt,from:d,encode:xE(P3t(u,e),i,sA),marks:h,aria:u("aria"),description:u("description"),zindex:u("zindex"),name:s,interactive:o,style:a}),t)}function P3t(e,t){const n={enter:{},update:{}};return Lo(n,{orient:e("orient"),offset:e("offset")||0,position:Bc(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function pIe(e,t,n){const r=Rt(e.signals),i=Rt(e.scales);return n||r.forEach(s=>Wke(s,t)),Rt(e.projections).forEach(s=>cPt(s,t)),i.forEach(s=>JDt(s,t)),Rt(e.data).forEach(s=>h3t(s,t)),i.forEach(s=>ZDt(s,t)),(n||r).forEach(s=>DDt(s,t)),Rt(e.axes).forEach(s=>D3t(s,t)),Rt(e.marks).forEach(s=>l$(s,t)),Rt(e.legends).forEach(s=>t3t(s,t)),e.title&&u3t(e.title,t),t.parseLambdas(),t}const N3t=e=>xE({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function O3t(e,t){const n=t.config,r=Qt(t.root=t.add(FN())),i=$3t(e,n);i.forEach(l=>Wke(l,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const s=t.add(Cd()),o=t.add(Kke(qke(N3t(e.encode),o$,qK,e.style,t,{pulse:Qt(s)}))),a=t.add(Jke({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:r,pulse:Qt(o)}));t.operators.pop(),t.pushState(Qt(o),Qt(a),null),pIe(e,t,i),t.operators.push(a);let u=t.add(Yke({mark:r,pulse:Qt(a)}));return u=t.add(Qke({pulse:Qt(u)})),u=t.add(cb({pulse:Qt(u)})),t.addData("root",new v1(t,s,s,u)),t}function j_(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function $3t(e,t){const n=o=>Bc(e[o],t[o]),r=[j_("background",n("background")),j_("autosize",VRt(n("autosize"))),j_("padding",qRt(n("padding"))),j_("width",n("width")||0),j_("height",n("height")||0)],i=r.reduce((o,a)=>(o[a.name]=a,o),{}),s={};return Rt(e.signals).forEach(o=>{Ot(i,o.name)?o=Cn(i[o.name],o):r.push(o),s[o.name]=o}),Rt(t.signals).forEach(o=>{!Ot(s,o.name)&&!Ot(i,o.name)&&r.push(o)}),r}function mIe(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function wce(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}mIe.prototype=wce.prototype={parse(e){return pIe(e,this)},fork(){return new wce(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof X7?Qt(e):e;return this.add(WDt({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(r,i,s){let o,a;r&&(o=r.data||(r.data={}),a=o[i]||(o[i]=[]),a.push(s))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const r in t.index)n(t.index[r],e,"index:"+r)}return this},pushState(e,t,n){this._encode.push(Qt(this.add(cb({pulse:e})))),this._parent.push(t),this._lookup.push(n?Qt(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return Wn(this._parent)},encode(){return Wn(this._encode)},lookup(){return Wn(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(It(e))return TC(e,t);e.signal||Ye("Unsupported field reference: "+bt(e));const n=e.signal;let r=this.field[n];if(!r){const i={name:this.signalRef(n)};t&&(i.as=t),this.field[n]=r=Qt(this.add(MDt(i)))}return r},compareRef(e){let t=!1;const n=s=>ks(s)?(t=!0,this.signalRef(s.signal)):wDt(s)?(t=!0,this.exprRef(s.expr)):s,r=Rt(e.field).map(n),i=Rt(e.order).map(n);return t?Qt(this.add(ace({fields:r,orders:i}))):sce(r,i)},keyRef(e,t){let n=!1;const r=s=>ks(s)?(n=!0,Qt(i[s.signal])):s,i=this.signals;return e=Rt(e).map(r),n?Qt(this.add(LDt({fields:e,flat:t}))):yDt(e,t)},sortRef(e){if(!e)return e;const t=i$(e.op,e.field),n=e.order||bDt;return n.signal?Qt(this.add(ace({fields:t,orders:this.signalRef(n.signal)}))):sce(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},hasOwnSignal(e){return Ot(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&Ye("Duplicate signal name: "+bt(e));const n=t instanceof X7?t:this.add(FN(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||Ye("Unrecognized signal name: "+bt(e)),this.signals[e]},signalRef(e){return this.signals[e]?Qt(this.signals[e]):(Ot(this.lambdas,e)||(this.lambdas[e]=this.add(FN(null))),Qt(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const r=e[t],i=Gf(r,this),s=this.lambdas[r];s.params=i.$params,s.update=i.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!kt(e)?e:this.signalRef(e.signal||iX(e))},exprRef(e,t){const n={expr:Gf(e,this)};return t&&(n.expr.$name=t),Qt(this.add(ODt(n)))},addBinding(e,t){this.bindings||Ye("Nested signals do not support binding: "+bt(e)),this.bindings.push(Cn({signal:e},t))},addScaleProj(e,t){Ot(this.scales,e)&&Ye("Duplicate scale or projection name: "+bt(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,YDt(t))},addProjection(e,t){this.addScaleProj(e,qDt(t))},getScale(e){return this.scales[e]||Ye("Unrecognized scale name: "+bt(e)),this.scales[e]},scaleRef(e){return Qt(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return Ot(this.data,e)&&Ye("Duplicate data set name: "+bt(e)),this.data[e]=t},getData(e){return this.data[e]||Ye("Undefined data set name: "+bt(e)),this.data[e]},addDataPipeline(e,t){return Ot(this.data,e)&&Ye("Duplicate data set name: "+bt(e)),this.addData(e,v1.fromEntries(this,t))}};function iX(e){return(Qe(e)?M3t:L3t)(e)}function M3t(e){const t=e.length;let n="[";for(let r=0;r<t;++r){const i=e[r];n+=(r>0?",":"")+(kt(i)?i.signal||iX(i):bt(i))}return n+"]"}function L3t(e){let t="{",n=0,r,i;for(r in e)i=e[r],t+=(++n>1?",":"")+bt(r)+":"+(kt(i)?i.signal||iX(i):bt(i));return t+"}"}function F3t(){const e="sans-serif",r="#4c78a8",i="#000",s="#888",o="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:r},area:{fill:r},image:null,line:{stroke:r,strokeWidth:2},path:{stroke:r},rect:{fill:r},rule:{stroke:i},shape:{stroke:r},symbol:{fill:r,size:64},text:{fill:i,font:e,fontSize:11},trail:{fill:r,size:2},style:{"guide-label":{fill:i,font:e,fontSize:10},"guide-title":{fill:i,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:i,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:i,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:o},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:s,grid:!1,gridWidth:1,gridColor:o,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:s,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:o,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:s,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function B3t(e,t,n){return kt(e)||Ye("Input Vega specification must be an object."),t=fE(F3t(),t,e.config),O3t(e,new mIe(t,n)).toRuntime()}var j3t="5.33.0";Cn(Qx,Nwt,x2t,J2t,ICt,MCt,lSt,UCt,dSt,mSt,CSt,PSt);const z3t=Object.freeze(Object.defineProperty({__proto__:null,Bounds:is,CanvasHandler:ZS,CanvasRenderer:SN,DATE:Pu,DAY:sa,DAYOFYEAR:Wf,Dataflow:fx,Debug:BTe,Error:ZW,EventStream:C6,Gradient:tSe,GroupItem:F6,HOURS:xl,Handler:jY,HybridHandler:WSe,HybridRenderer:k7,Info:FTe,Item:L6,MILLISECONDS:fd,MINUTES:wl,MONTH:ca,Marks:El,MultiPulse:xG,None:LTe,Operator:zr,Parameters:T6,Pulse:y0,QUARTER:Du,RenderType:n0,Renderer:JS,ResourceLoader:uSe,SECONDS:ic,SVGHandler:NSe,SVGRenderer:WY,SVGStringRenderer:qSe,Scenegraph:CSe,TIME_UNITS:fG,Transform:He,View:Nke,WEEK:_s,Warn:eG,YEAR:No,accessor:Lu,accessorFields:la,accessorName:Oi,array:Rt,ascending:MS,bandwidthNRD:TG,bin:G2e,bootstrapCI:Y2e,boundClip:nAe,boundContext:YS,boundItem:_7,boundMark:wSe,boundStroke:Xp,changeset:ab,clampRange:XTe,codegenExpression:ske,compare:sG,constant:ya,cumulativeLogNormal:RG,cumulativeNormal:A6,cumulativeUniform:OG,dayofyear:a2e,debounce:oG,defaultLocale:mG,definition:H2e,densityLogNormal:IG,densityNormal:CG,densityUniform:NG,domChild:xs,domClear:Hl,domCreate:e0,domFind:BY,dotbin:K2e,error:Ye,expressionFunction:Yi,extend:Cn,extent:qf,extentIndex:QTe,falsy:Pm,fastmap:pE,field:nc,flush:JTe,font:V6,fontFamily:QS,fontSize:oh,format:XD,formatLocale:hN,formats:bG,hasOwnProperty:Ot,id:$S,identity:ga,inferType:N2e,inferTypes:O2e,ingest:xr,inherits:Et,inrange:Uv,interpolate:gY,interpolateColors:$6,interpolateRange:zCe,intersect:JSe,intersectBoxLine:Vv,intersectPath:TY,intersectPoint:CY,intersectRule:cSe,isArray:Qe,isBoolean:pg,isDate:g0,isFunction:Sn,isIterable:ZTe,isNumber:pr,isObject:kt,isRegExp:aG,isString:It,isTuple:E6,key:uG,lerp:e2e,lineHeight:U0,loader:x6,locale:D2e,logger:tG,lruCache:t2e,markup:qY,merge:n2e,mergeConfig:fE,multiLineOffset:MY,one:dE,pad:r2e,panLinear:HTe,panLog:qTe,panPow:WTe,panSymlog:GTe,parse:B3t,parseExpression:nke,parseSelector:gg,path:zO,pathCurves:wY,pathEqual:rAe,pathParse:tw,pathRectangle:iSe,pathRender:gC,pathSymbols:rSe,pathTrail:sSe,peek:Wn,point:q6,projection:iK,quantileLogNormal:DG,quantileNormal:k6,quantileUniform:$G,quantiles:EG,quantizeInterpolator:UCe,quarter:YTe,quartiles:_G,get random(){return sc},randomInteger:Lxt,randomKDE:AG,randomLCG:Mxt,randomLogNormal:Q2e,randomMixture:J2e,randomNormal:SG,randomUniform:Z2e,read:L2e,regressionConstant:MG,regressionExp:tCe,regressionLinear:LG,regressionLoess:iCe,regressionLog:eCe,regressionPoly:rCe,regressionPow:nCe,regressionQuad:FG,renderModule:W6,repeat:_T,resetDefaultLocale:Nvt,resetSVGClipId:aSe,resetSVGDefIds:FTt,responseType:M2e,runtimeContext:xke,sampleCurve:R6,sampleLogNormal:kG,sampleNormal:S6,sampleUniform:PG,scale:mr,sceneEqual:GY,sceneFromJSON:_Se,scenePickVisit:bN,sceneToJSON:ESe,sceneVisit:hd,sceneZOrder:SY,scheme:yY,serializeXML:zSe,setHybridRendererOptions:OTt,setRandom:Oxt,span:LS,splitAccessPath:sh,stringValue:bt,textMetrics:ll,timeBin:T2e,timeFloor:p2e,timeFormatLocale:hC,timeInterval:mE,timeOffset:y2e,timeSequence:x2e,timeUnitSpecifier:o2e,timeUnits:hG,toBoolean:lG,toDate:cG,toNumber:aa,toSet:dd,toString:dG,transform:q2e,transforms:Qx,truncate:i2e,truthy:rc,tupleid:Jt,typeParsers:p7,utcFloor:m2e,utcInterval:gE,utcOffset:b2e,utcSequence:w2e,utcdayofyear:c2e,utcquarter:KTe,utcweek:d2e,version:j3t,visitArray:Fm,week:u2e,writeConfig:hE,zero:Km,zoomLinear:nG,zoomLog:rG,zoomPow:fN,zoomSymlog:iG},Symbol.toStringTag,{value:"Module"}));function U3t(e,t,n){let r;t.x2&&(t.x?(n&&e.x>e.x2&&(r=e.x,e.x=e.x2,e.x2=r),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(r=e.y,e.y=e.y2,e.y2=r),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}var V3t={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},H3t={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},q3t={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const W3t=Array.prototype.slice,Wg=(e,t,n)=>{const r=n?n(t[0]):t[0];return r[e].apply(r,W3t.call(t,1))},G3t=(e,t,n,r,i,s,o)=>new Date(e,t||0,n??1,r||0,i||0,s||0,o||0);var Y3t={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:G3t,date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return Wg("join",arguments)},indexof:function(){return Wg("indexOf",arguments)},lastindexof:function(){return Wg("lastIndexOf",arguments)},slice:function(){return Wg("slice",arguments)},reverse:e=>e.slice().reverse(),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return Wg("substring",arguments,String)},split:function(){return Wg("split",arguments,String)},replace:function(){return Wg("replace",arguments,String)},trim:e=>String(e).trim(),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const K3t=["view","item","group","xy","x","y"],rz=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&rz.add(setImmediate);const X3t={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const n=t.name;return e.memberDepth>0?n:n==="datum"?e.datum:n==="event"?e.event:n==="item"?e.item:V3t[n]||e.params["$"+n]},MemberExpression:(e,t)=>{const n=!t.computed,r=e(t.object);n&&(e.memberDepth+=1);const i=e(t.property);if(n&&(e.memberDepth-=1),rz.has(r[i])){console.error(`Prevented interpretation of member "${i}" which could lead to insecure code execution`);return}return r[i]},CallExpression:(e,t)=>{const n=t.arguments;let r=t.callee.name;return r.startsWith("_")&&(r=r.slice(1)),r==="if"?e(n[0])?e(n[1]):e(n[2]):(e.fn[r]||Y3t[r]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>H3t[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>q3t[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,r)=>{e.memberDepth+=1;const i=e(r.key);return e.memberDepth-=1,rz.has(e(r.value))?console.error(`Prevented interpretation of property "${i}" which could lead to insecure code execution`):n[i]=e(r.value),n},{})};function z_(e,t,n,r,i,s){const o=a=>X3t[a.type](o,a);return o.memberDepth=0,o.fn=Object.create(t),o.params=n,o.datum=r,o.event=i,o.item=s,K3t.forEach(a=>o.fn[a]=function(){return i.vega[a](...arguments)}),o(e)}var Q3t={operator(e,t){const n=t.ast,r=e.functions;return i=>z_(n,r,i)},parameter(e,t){const n=t.ast,r=e.functions;return(i,s)=>z_(n,r,s,i)},event(e,t){const n=t.ast,r=e.functions;return i=>z_(n,r,void 0,void 0,i)},handler(e,t){const n=t.ast,r=e.functions;return(i,s)=>{const o=s.item&&s.item.datum;return z_(n,r,i,o,s)}},encode(e,t){const{marktype:n,channels:r}=t,i=e.functions,s=n==="group"||n==="image"||n==="rect";return(o,a)=>{const u=o.datum;let l=0,c;for(const d in r)c=z_(r[d].ast,i,a,u,void 0,o),o[d]!==c&&(o[d]=c,l=1);return n!=="rule"&&U3t(o,r,s),l}}};const J3t="vega-lite",Z3t='Dominik Moritz, Kanit "Ham" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer',eNt="5.23.0",tNt=["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],nNt="https://vega.github.io/vega-lite/",rNt="Vega-Lite is a concise high-level language for interactive visualization.",iNt=["vega","chart","visualization"],sNt="build/vega-lite.js",oNt="build/vega-lite.min.js",aNt="build/vega-lite.min.js",uNt="build/src/index",lNt="build/src/index.d.ts",cNt={vl2pdf:"./bin/vl2pdf",vl2png:"./bin/vl2png",vl2svg:"./bin/vl2svg",vl2vg:"./bin/vl2vg"},dNt=["bin","build","src","vega-lite*","tsconfig.json"],fNt={changelog:"conventional-changelog -p angular -r 2",prebuild:"yarn clean:build",build:"yarn build:only","build:only":"tsc -p tsconfig.build.json && rollup -c","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"rollup -c site/rollup.config.mjs","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh",clean:"yarn clean:build && del-cli 'site/data/*' 'examples/compiled/*.png' && find site/examples ! -name 'index.md' ! -name 'data' -type f -delete","clean:build":"del-cli 'build/*' !build/vega-lite-schema.json",data:"rsync -r node_modules/vega-datasets/data/* site/data","build-editor-preview":"scripts/build-editor-preview.sh",schema:"mkdir -p build && ts-json-schema-generator -f tsconfig.json -p src/index.ts -t TopLevelSpec --no-type-check --no-ref-encode > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/",renameschema:"scripts/rename-schema.sh",presite:"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh",site:"yarn site:only","site:only":"pushd site && bundle exec jekyll serve -I -l && popd",prettierbase:"prettier '**/*.{md,css,yml}'",format:"eslint . --fix && yarn prettierbase --write",lint:"eslint . && yarn prettierbase --check",test:"yarn jest test/ && yarn lint && yarn schema && yarn jest examples/ && yarn test:runtime","test:cover":"yarn jest --collectCoverage test/","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand test","test:runtime":"TZ=America/Los_Angeles npx jest test-runtime/ --config test-runtime/jest-config.json","test:runtime:generate":"yarn build:only && del-cli test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime",watch:"tsc -p tsconfig.build.json -w","watch:site":"yarn build:site -w","watch:test":"yarn jest --watch test/","watch:test:runtime":"TZ=America/Los_Angeles npx jest --watch test-runtime/ --config test-runtime/jest-config.json",release:"release-it"},hNt={type:"git",url:"https://github.com/vega/vega-lite.git"},pNt="BSD-3-Clause",mNt={url:"https://github.com/vega/vega-lite/issues"},gNt={"@babel/core":"^7.26.0","@babel/preset-env":"^7.26.0","@babel/preset-typescript":"^7.26.0","@release-it/conventional-changelog":"^9.0.3","@rollup/plugin-alias":"^5.1.1","@rollup/plugin-babel":"^6.0.4","@rollup/plugin-commonjs":"^28.0.1","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.3.0","@rollup/plugin-terser":"^0.4.4","@types/d3":"^7.4.3","@types/jest":"^29.5.14","@types/pako":"^2.0.3","@typescript-eslint/eslint-plugin":"^7.17.0","@typescript-eslint/parser":"^7.17.0",ajv:"^8.17.1","ajv-formats":"^3.0.1",cheerio:"^1.0.0","conventional-changelog-cli":"^5.0.0",d3:"^7.9.0","del-cli":"^6.0.0",eslint:"^8.57.0","eslint-config-prettier":"^9.1.0","eslint-plugin-jest":"^27.9.0","eslint-plugin-prettier":"^5.2.1","fast-json-stable-stringify":"~2.1.0","highlight.js":"^11.10.0",jest:"^29.7.0","jest-dev-server":"^10.1.4",mkdirp:"^3.0.1",pako:"^2.1.0",prettier:"^3.3.3",puppeteer:"^15.0.0","release-it":"17.10.0",rollup:"^4.27.3","rollup-plugin-bundle-size":"^1.0.3",serve:"^14.2.4",terser:"^5.36.0","ts-jest":"^29.2.5","ts-json-schema-generator":"^2.3.0",typescript:"~5.7.2","vega-cli":"^5.30.0","vega-datasets":"^2.11.0","vega-embed":"^6.28.0","vega-tooltip":"^0.35.2","yaml-front-matter":"^4.1.1"},yNt={"json-stringify-pretty-compact":"~4.0.0",tslib:"~2.8.1","vega-event-selector":"~3.0.1","vega-expression":"~5.1.1","vega-util":"~1.17.2",yargs:"~17.7.2"},bNt={vega:"^5.24.0"},vNt={node:">=18"},xNt="yarn@1.22.22",wNt={name:J3t,author:Z3t,version:eNt,collaborators:tNt,homepage:nNt,description:rNt,keywords:iNt,main:sNt,unpkg:oNt,jsdelivr:aNt,module:uNt,types:lNt,bin:cNt,files:dNt,scripts:fNt,repository:hNt,license:pNt,bugs:mNt,devDependencies:gNt,dependencies:yNt,peerDependencies:bNt,engines:vNt,packageManager:xNt};function sX(e){return ct(e,"or")}function oX(e){return ct(e,"and")}function aX(e){return ct(e,"not")}function gP(e,t){if(aX(e))gP(e.not,t);else if(oX(e))for(const n of e.and)gP(n,t);else if(sX(e))for(const n of e.or)gP(n,t);else t(e)}function px(e,t){return aX(e)?{not:px(e.not,t)}:oX(e)?{and:e.and.map(n=>px(n,t))}:sX(e)?{or:e.or.map(n=>px(n,t))}:t(e)}const hn=structuredClone;function gIe(e){throw new Error(e)}function ow(e,t){const n={};for(const r of t)Ot(e,r)&&(n[r]=e[r]);return n}function Su(e,t){const n={...e};for(const r of t)delete n[r];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>Lr(e)).join(",")})`};function zn(e){if(pr(e))return e;const t=It(e)?e:Lr(e);if(t.length<250)return t;let n=0;for(let r=0;r<t.length;r++){const i=t.charCodeAt(r);n=(n<<5)-n+i,n=n&n}return n}function iz(e){return e===!1||e===null}function $n(e,t){return e.includes(t)}function aw(e,t){let n=0;for(const[r,i]of e.entries())if(t(i,r,n++))return!0;return!1}function uX(e,t){let n=0;for(const[r,i]of e.entries())if(!t(i,r,n++))return!1;return!0}function yIe(e,...t){for(const n of t)ENt(e,n??{});return e}function ENt(e,t){for(const n of at(t))hE(e,n,t[n],!0)}function gf(e,t){const n=[],r={};let i;for(const s of e)i=t(s),!(i in r)&&(r[i]=1,n.push(s));return n}function _Nt(e,t){const n=at(e),r=at(t);if(n.length!==r.length)return!1;for(const i of n)if(e[i]!==t[i])return!1;return!0}function bIe(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function lX(e,t){for(const n of e)if(t.has(n))return!0;return!1}function sz(e){const t=new Set;for(const n of e){const i=sh(n).map((o,a)=>a===0?o:`[${o}]`),s=i.map((o,a)=>i.slice(0,a+1).join(""));for(const o of s)t.add(o)}return t}function cX(e,t){return e===void 0||t===void 0?!0:lX(sz(e),sz(t))}function Mr(e){return at(e).length===0}const at=Object.keys,Oo=Object.values,W0=Object.entries;function AC(e){return e===!0||e===!1}function fi(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function g2(e,t){return aX(e)?`!(${g2(e.not,t)})`:oX(e)?`(${e.and.map(n=>g2(n,t)).join(") && (")})`:sX(e)?`(${e.or.map(n=>g2(n,t)).join(") || (")})`:t(e)}function BN(e,t){if(t.length===0)return!0;const n=t.shift();return n in e&&BN(e[n],t)&&delete e[n],Mr(e)}function oA(e){return e.charAt(0).toUpperCase()+e.substr(1)}function dX(e,t="datum"){const n=sh(e),r=[];for(let i=1;i<=n.length;i++){const s=`[${n.slice(0,i).map(bt).join("][")}]`;r.push(`${t}${s}`)}return r.join(" && ")}function vIe(e,t="datum"){return`${t}[${bt(sh(e).join("."))}]`}function Ar(e){return`datum['${e.replaceAll("'","\\'")}']`}function TNt(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function oc(e){return`${sh(e).map(TNt).join("\\.")}`}function x1(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function _E(e){return`${sh(e).join(".")}`}function uw(e){return e?sh(e).length:0}function Wi(...e){return e.find(t=>t!==void 0)}let xIe=42;function wIe(e){const t=++xIe;return e?String(e)+t:t}function CNt(){xIe=42}function EIe(e){return _Ie(e)?e:`__${e}`}function _Ie(e){return e.startsWith("__")}function kC(e){if(e!==void 0)return(e%360+360)%360}function d$(e){return pr(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}const Ece=Object.getPrototypeOf(structuredClone({}));function sl(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor.name!==t.constructor.name)return!1;let n,r;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!sl(e[r],t[r]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const s of e.entries())if(!t.has(s[0]))return!1;for(const s of e.entries())if(!sl(s[1],t.get(s[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const s of e.entries())if(!t.has(s[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==Ece.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==Ece.toString)return e.toString()===t.toString();const i=Object.keys(e);if(n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!sl(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function Lr(e){const t=[];return function n(r){if(r&&r.toJSON&&typeof r.toJSON=="function"&&(r=r.toJSON()),r===void 0)return;if(typeof r=="number")return isFinite(r)?""+r:"null";if(typeof r!="object")return JSON.stringify(r);let i,s;if(Array.isArray(r)){for(s="[",i=0;i<r.length;i++)i&&(s+=","),s+=n(r[i])||"null";return s+"]"}if(r===null)return"null";if(t.includes(r))throw new TypeError("Converting circular structure to JSON");const o=t.push(r)-1,a=Object.keys(r).sort();for(s="",i=0;i<a.length;i++){const u=a[i],l=n(r[u]);l&&(s&&(s+=","),s+=JSON.stringify(u)+":"+l)}return t.splice(o,1),`{${s}}`}(e)}function ct(e,t){return kt(e)&&Ot(e,t)&&e[t]!==void 0}const mp="row",gp="column",f$="facet",pi="x",uo="y",Ad="x2",lh="y2",yg="xOffset",TE="yOffset",kd="radius",Jp="radius2",yc="theta",Zp="theta2",Id="latitude",Rd="longitude",Dd="latitude2",ac="longitude2",bg="time",Nu="color",ch="fill",dh="stroke",Ou="shape",em="size",fb="angle",tm="opacity",vg="fillOpacity",xg="strokeOpacity",wg="strokeWidth",Eg="strokeDash",aA="text",lw="order",uA="detail",h$="key",w1="tooltip",p$="href",m$="url",g$="description",SNt={x:1,y:1,x2:1,y2:1},TIe={theta:1,theta2:1,radius:1,radius2:1};function CIe(e){return Ot(TIe,e)}const fX={longitude:1,longitude2:1,latitude:1,latitude2:1};function SIe(e){switch(e){case Id:return"y";case Dd:return"y2";case Rd:return"x";case ac:return"x2"}}function AIe(e){return Ot(fX,e)}const ANt=at(fX),hX={...SNt,...TIe,...fX,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,time:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function mx(e){return e===Nu||e===ch||e===dh}const kIe={row:1,column:1,facet:1},Kl=at(kIe),pX={...hX,...kIe},kNt=at(pX),{order:GVt,detail:YVt,tooltip:KVt,...INt}=pX,{row:XVt,column:QVt,facet:JVt,...RNt}=INt;function DNt(e){return Ot(RNt,e)}function IIe(e){return Ot(pX,e)}const PNt=[Ad,lh,Dd,ac,Zp,Jp];function RIe(e){return hb(e)!==e}function hb(e){switch(e){case Ad:return pi;case lh:return uo;case Dd:return Id;case ac:return Rd;case Zp:return yc;case Jp:return kd}return e}function G0(e){if(CIe(e))switch(e){case yc:return"startAngle";case Zp:return"endAngle";case kd:return"outerRadius";case Jp:return"innerRadius"}return e}function fh(e){switch(e){case pi:return Ad;case uo:return lh;case Id:return Dd;case Rd:return ac;case yc:return Zp;case kd:return Jp}}function $u(e){switch(e){case pi:case Ad:return"width";case uo:case lh:return"height"}}function DIe(e){switch(e){case pi:return"xOffset";case uo:return"yOffset";case Ad:return"x2Offset";case lh:return"y2Offset";case yc:return"thetaOffset";case kd:return"radiusOffset";case Zp:return"theta2Offset";case Jp:return"radius2Offset"}}function mX(e){switch(e){case pi:return"xOffset";case uo:return"yOffset"}}function NNt(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const ONt=at(hX),{x:ZVt,y:eHt,x2:tHt,y2:nHt,xOffset:rHt,yOffset:iHt,latitude:sHt,longitude:oHt,latitude2:aHt,longitude2:uHt,theta:lHt,theta2:cHt,radius:dHt,radius2:fHt,...gX}=hX,$Nt=at(gX),yX={x:1,y:1},nm=at(yX);function Gi(e){return Ot(yX,e)}const bX={theta:1,radius:1},MNt=at(bX);function y$(e){return e==="width"?pi:uo}const PIe={xOffset:1,yOffset:1};function lA(e){return Ot(PIe,e)}const LNt={time:1};function DF(e){return e in LNt}const{text:hHt,tooltip:pHt,href:mHt,url:gHt,description:yHt,detail:bHt,key:vHt,order:xHt,...NIe}=gX,FNt=at(NIe);function BNt(e){return Ot(gX,e)}function jNt(e){switch(e){case Nu:case ch:case dh:case em:case Ou:case tm:case wg:case Eg:return!0;case vg:case xg:case fb:case bg:return!1}}const OIe={...yX,...bX,...PIe,...NIe},vX=at(OIe);function hh(e){return Ot(OIe,e)}function zNt(e,t){return VNt(e)[t]}const $Ie={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:wHt,...UNt}=$Ie;function VNt(e){switch(e){case Nu:case ch:case dh:case g$:case uA:case h$:case w1:case p$:case lw:case tm:case vg:case xg:case wg:case f$:case mp:case gp:return $Ie;case pi:case uo:case yg:case TE:case Id:case Rd:case bg:return UNt;case Ad:case lh:case Dd:case ac:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case em:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case Eg:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case Ou:return{point:"always",geoshape:"always"};case aA:return{text:"always"};case fb:return{point:"always",square:"always",text:"always"};case m$:return{image:"always"};case yc:return{text:"always",arc:"always"};case kd:return{text:"always",arc:"always"};case Zp:case Jp:return{arc:"always"}}}function PF(e){switch(e){case pi:case uo:case yc:case kd:case yg:case TE:case em:case fb:case wg:case tm:case vg:case xg:case bg:case Ad:case lh:case Zp:case Jp:return;case f$:case mp:case gp:case Ou:case Eg:case aA:case w1:case p$:case m$:case g$:return"discrete";case Nu:case ch:case dh:return"flexible";case Id:case Rd:case Dd:case ac:case uA:case h$:case lw:return}}const HNt={argmax:1,argmin:1,average:1,count:1,distinct:1,exponential:1,exponentialb:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},qNt={count:1,min:1,max:1};function Mp(e){return ct(e,"argmin")}function _g(e){return ct(e,"argmax")}function xX(e){return It(e)&&Ot(HNt,e)}const WNt=new Set(["count","valid","missing","distinct"]);function b$(e){return It(e)&&WNt.has(e)}function GNt(e){return It(e)&&$n(["min","max"],e)}const YNt=new Set(["count","sum","distinct","valid","missing"]),KNt=new Set(["mean","average","median","q1","q3","min","max"]);function MIe(e){return pg(e)&&(e=R$(e,void 0)),"bin"+at(e).map(t=>v$(e[t])?fi(`_${t}_${W0(e[t])}`):fi(`_${t}_${e[t]}`)).join("")}function Qr(e){return e===!0||pb(e)&&!e.binned}function wo(e){return e==="binned"||pb(e)&&e.binned===!0}function pb(e){return kt(e)}function v$(e){return ct(e,"param")}function _ce(e){switch(e){case mp:case gp:case em:case Nu:case ch:case dh:case wg:case tm:case vg:case xg:case Ou:return 6;case Eg:return 4;default:return 10}}function cA(e){return ct(e,"expr")}function Eo(e,{level:t}={level:0}){const n=at(e||{}),r={};for(const i of n)r[i]=t===0?tl(e[i]):Eo(e[i],{level:t-1});return r}function LIe(e){const{anchor:t,frame:n,offset:r,orient:i,angle:s,limit:o,color:a,subtitleColor:u,subtitleFont:l,subtitleFontSize:c,subtitleFontStyle:d,subtitleFontWeight:f,subtitleLineHeight:h,subtitlePadding:p,...m}=e,y={...m,...a?{fill:a}:{}},v={...t?{anchor:t}:{},...n?{frame:n}:{},...r?{offset:r}:{},...i?{orient:i}:{},...s!==void 0?{angle:s}:{},...o!==void 0?{limit:o}:{}},b={...u?{subtitleColor:u}:{},...l?{subtitleFont:l}:{},...c?{subtitleFontSize:c}:{},...d?{subtitleFontStyle:d}:{},...f?{subtitleFontWeight:f}:{},...h?{subtitleLineHeight:h}:{},...p?{subtitlePadding:p}:{}},w=ow(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:y,subtitleMarkConfig:w,nonMarkTitleProperties:v,subtitle:b}}function zm(e){return It(e)||Qe(e)&&It(e[0])}function Wt(e){return ct(e,"signal")}function mb(e){return ct(e,"step")}function XNt(e){return Qe(e)?!1:ct(e,"fields")&&!ct(e,"data")}function QNt(e){return Qe(e)?!1:ct(e,"fields")&&ct(e,"data")}function sp(e){return Qe(e)?!1:ct(e,"field")&&ct(e,"data")}const JNt={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},ZNt=at(JNt),e4t={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},oz=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function FIe(e){const t=Qe(e.condition)?e.condition.map(Tce):Tce(e.condition);return{...tl(e),condition:t}}function tl(e){if(cA(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function Tce(e){if(cA(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function si(e){if(cA(e)){const{expr:t,...n}=e;return{signal:t,...n}}return Wt(e)?e:e!==void 0?{value:e}:void 0}function t4t(e){return Wt(e)?e.signal:bt(e)}function Cce(e){return Wt(e)?e.signal:bt(e.value)}function Zc(e){return Wt(e)?e.signal:e==null?null:bt(e)}function n4t(e,t,n){for(const r of n){const i=Yf(r,t.markDef,t.config);i!==void 0&&(e[r]=si(i))}return e}function BIe(e){return[].concat(e.type,e.style??[])}function $r(e,t,n,r={}){const{vgChannel:i,ignoreVgConfig:s}=r;return i&&ct(t,i)?t[i]:t[e]!==void 0?t[e]:s&&(!i||i===e)?void 0:Yf(e,t,n,r)}function Yf(e,t,n,{vgChannel:r}={}){const i=az(e,t,n.style);return Wi(r?i:void 0,i,r?n[t.type][r]:void 0,n[t.type][e],r?n.mark[r]:n.mark[e])}function az(e,t,n){return jIe(e,BIe(t),n)}function jIe(e,t,n){t=Rt(t);let r;for(const i of t){const s=n[i];ct(s,e)&&(r=s[e])}return r}function zIe(e,t){return Rt(e).reduce((n,r)=>(n.field.push(Ct(r,t)),n.order.push(r.sort??"ascending"),n),{field:[],order:[]})}function UIe(e,t){const n=[...e];return t.forEach(r=>{for(const i of n)if(sl(i,r))return;n.push(r)}),n}function VIe(e,t){return sl(e,t)||!t?e:e?[...Rt(e),...Rt(t)].join(", "):t}function HIe(e,t){const n=e.value,r=t.value;if(n==null||r===null)return{explicit:e.explicit,value:null};if((zm(n)||Wt(n))&&(zm(r)||Wt(r)))return{explicit:e.explicit,value:VIe(n,r)};if(zm(n)||Wt(n))return{explicit:e.explicit,value:n};if(zm(r)||Wt(r))return{explicit:e.explicit,value:r};if(!zm(n)&&!Wt(n)&&!zm(r)&&!Wt(r))return{explicit:e.explicit,value:UIe(n,r)};throw new Error("It should never reach here")}function wX(e){return`Invalid specification ${Lr(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const r4t='Autosize "fit" only works for single views and layered views.';function Sce(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function Ace(e){const t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function kce(e){return e?`Dropping "fit-${e}" because spec has discrete ${$u(e)}.`:'Dropping "fit" because spec has discrete size.'}function EX(e){return`Unknown field for ${e}. Cannot calculate view size.`}function Ice(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function i4t(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function s4t(e){return`The "nearest" transform is not supported for ${e} marks.`}function qIe(e){return`Selection not supported for ${e} yet.`}function o4t(e){return`Cannot find a selection named "${e}".`}const a4t="Scale bindings are currently only supported for scales with unbinned, continuous domains.",u4t="Sequntial scales are deprecated. The available quantitative scale type values are linear, log, pow, sqrt, symlog, time and utc",l4t="Legend bindings are only supported for selections over an individual field or encoding channel.";function c4t(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function d4t(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}const f4t="The same selection must be used to override scale domains in a layered view.",h4t='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function p4t(e){return`Unknown repeated value "${e}".`}function Rce(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}const m4t="Multiple timer selections in one unit spec are not supported. Ignoring all but the first.",_X="Animation involving facet, layer, or concat is currently unsupported.";function g4t(e){return`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${bt(e)}.`}function y4t(e,t,n,r){return(e.length?"Multiple ":"No ")+`matching ${bt(t)} encoding found for selection ${bt(n.param)}. Using "field": ${bt(r)}.`}const b4t="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function v4t(e){return`Unrecognized parse "${e}".`}function Dce(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}const x4t="Attempt to add the same child twice.";function w4t(e){return`Ignoring an invalid transform: ${Lr(e)}.`}const E4t='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function Pce(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function _4t(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${Lr(t)} is overridden by a child projection ${Lr(n)}.`}const T4t="Arc marks uses theta channel rather than angle, replacing angle with theta.";function C4t(e){return`${e}Offset dropped because ${e} is continuous`}function S4t(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${Lr(n)}}.`}function WIe(e){return`Invalid field type "${e}".`}function A4t(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function k4t(e){return`Invalid aggregation operator "${e}".`}function GIe(e,t){const{fill:n,stroke:r}=t;return`Dropping color ${e} as the plot also has ${n&&r?"fill and stroke":n?"fill":"stroke"}.`}function I4t(e){return`Position range does not support relative band size for ${e}.`}function uz(e,t){return`Dropping ${Lr(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}const R4t="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function x$(e,t,n){return`${e} dropped as it is incompatible with "${t}".`}function D4t(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function P4t(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function N4t(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function O4t(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function NF(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function $4t(e){return`The ${e} for range marks cannot be an expression`}function M4t(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function L4t(e,t){return`Specified orient "${e}" overridden with "${t}".`}function F4t(e){return`Cannot use the scale property "${e}" with non-color channel.`}function B4t(e){return`Cannot use the relative band size with ${e} scale.`}function j4t(e){return`Using unaggregated domain with raw field has no effect (${Lr(e)}).`}function z4t(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function U4t(e){return`Unaggregated domain is currently unsupported for log scale (${Lr(e)}).`}function V4t(e){return`Cannot apply size to non-oriented mark "${e}".`}function H4t(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function q4t(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function YIe(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function KIe(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function W4t(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${Lr(n)} and ${Lr(r)}). Using ${Lr(n)}.`}function G4t(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${Lr(n)} and ${Lr(r)}). Using the union of the two domains.`}function Y4t(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function K4t(e){return`Dropping sort property ${Lr(e)} as unioned domains only support boolean or op "count", "min", and "max".`}const Nce="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",X4t="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",Q4t="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",J4t="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function Z4t(e){return`Cannot stack "${e}" if there is already "${e}2".`}function eOt(e){return`Stack is applied to a non-linear scale (${e}).`}function tOt(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function jN(e,t){return`Invalid ${e}: ${Lr(t)}.`}function nOt(e){return`Dropping day from datetime ${Lr(e)} as day cannot be combined with other units.`}function rOt(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function iOt(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function sOt(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function Oce(e){return`1D error band does not support ${e}.`}function XIe(e){return`Channel ${e} is required for "binned" bin.`}function oOt(e){return`Channel ${e} should not be used with "binned" bin.`}function aOt(e){return`Domain for ${e} is required for threshold scale.`}const QIe=tG(eG);let E1=QIe;function uOt(e){return E1=e,E1}function lOt(){return E1=QIe,E1}function TX(...e){E1.error(...e)}function ht(...e){E1.warn(...e)}function cOt(...e){E1.debug(...e)}function gb(e){if(e&&kt(e)){for(const t of SX)if(ct(e,t))return!0}return!1}const JIe=["january","february","march","april","may","june","july","august","september","october","november","december"],dOt=JIe.map(e=>e.substr(0,3)),ZIe=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],fOt=ZIe.map(e=>e.substr(0,3));function hOt(e){if(d$(e)&&(e=+e),pr(e))return e>4&&ht(jN("quarter",e)),e-1;throw new Error(jN("quarter",e))}function pOt(e){if(d$(e)&&(e=+e),pr(e))return e-1;{const t=e.toLowerCase(),n=JIe.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=dOt.indexOf(r);if(i!==-1)return i;throw new Error(jN("month",e))}}function mOt(e){if(d$(e)&&(e=+e),pr(e))return e%7;{const t=e.toLowerCase(),n=ZIe.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=fOt.indexOf(r);if(i!==-1)return i;throw new Error(jN("day",e))}}function CX(e,t){const n=[];if(t&&e.day!==void 0&&at(e).length>1&&(ht(nOt(e)),e=hn(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){const r=t?pOt(e.month):e.month;n.push(r)}else if(e.quarter!==void 0){const r=t?hOt(e.quarter):e.quarter;n.push(pr(r)?r*3:`${r}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){const r=t?mOt(e.day):e.day;n.push(pr(r)?r+1:`${r}+1`)}else n.push(1);for(const r of["hours","minutes","seconds","milliseconds"]){const i=e[r];n.push(typeof i>"u"?0:i)}return n}function _1(e){const n=CX(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function gOt(e){const n=CX(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function yOt(e){const t=CX(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}const eRe={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},SX=at(eRe);function bOt(e){return Ot(eRe,e)}function yb(e){return kt(e)?e.binned:tRe(e)}function tRe(e){return e&&e.startsWith("binned")}function AX(e){return e.startsWith("utc")}function vOt(e){return e.substring(3)}const xOt={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function w$(e){return SX.filter(t=>rRe(e,t))}function nRe(e){const t=w$(e);return t[t.length-1]}function rRe(e,t){const n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function wOt(e,t,{end:n}={end:!1}){const r=dX(t),i=AX(e)?"utc":"";function s(u){return u==="quarter"?`(${i}quarter(${r})-1)`:`${i}${u}(${r})`}let o;const a={};for(const u of SX)rRe(e,u)&&(a[u]=s(u),o=u);return n&&(a[o]+="+1"),gOt(a)}function iRe(e){if(!e)return;const t=w$(e);return`timeUnitSpecifier(${Lr(t)}, ${Lr(xOt)})`}function EOt(e,t,n){if(!e)return;const r=iRe(e);return`${n||AX(e)?"utc":"time"}Format(${t}, ${r})`}function to(e){if(!e)return;let t;return It(e)?tRe(e)?t={unit:e.substring(6),binned:!0}:t={unit:e}:kt(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),AX(t.unit)&&(t.utc=!0,t.unit=vOt(t.unit)),t}function _Ot(e){const{utc:t,...n}=to(e);return n.unit?(t?"utc":"")+at(n).map(r=>fi(`${r==="unit"?"":`_${r}_`}${n[r]}`)).join(""):(t?"utc":"")+"timeunit"+at(n).map(r=>fi(`_${r}_${n[r]}`)).join("")}function sRe(e,t=n=>n){const n=to(e),r=nRe(n.unit);if(r&&r!=="day"){const i={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:s,part:o}=oRe(r,n.step),a={...i,[o]:+i[o]+s};return`${t(_1(a))} - ${t(_1(i))}`}}const TOt={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function COt(e){return Ot(TOt,e)}function oRe(e,t=1){if(COt(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:t*3};case"week":return{part:"date",step:t*7}}}function SOt(e){return ct(e,"param")}function kX(e){return!!(e!=null&&e.field)&&e.equal!==void 0}function IX(e){return!!(e!=null&&e.field)&&e.lt!==void 0}function RX(e){return!!(e!=null&&e.field)&&e.lte!==void 0}function DX(e){return!!(e!=null&&e.field)&&e.gt!==void 0}function PX(e){return!!(e!=null&&e.field)&&e.gte!==void 0}function NX(e){if(e!=null&&e.field){if(Qe(e.range)&&e.range.length===2)return!0;if(Wt(e.range))return!0}return!1}function OX(e){return!!(e!=null&&e.field)&&(Qe(e.oneOf)||Qe(e.in))}function AOt(e){return!!(e!=null&&e.field)&&e.valid!==void 0}function aRe(e){return OX(e)||kX(e)||NX(e)||IX(e)||DX(e)||RX(e)||PX(e)}function Yd(e,t){return D$(e,{timeUnit:t,wrapTime:!0})}function kOt(e,t){return e.map(n=>Yd(n,t))}function uRe(e,t=!0){const{field:n}=e,r=to(e.timeUnit),{unit:i,binned:s}=r||{},o=Ct(e,{expr:"datum"}),a=i?`time(${s?o:wOt(i,n)})`:o;if(kX(e))return`${a}===${Yd(e.equal,i)}`;if(IX(e)){const u=e.lt;return`${a}<${Yd(u,i)}`}else if(DX(e)){const u=e.gt;return`${a}>${Yd(u,i)}`}else if(RX(e)){const u=e.lte;return`${a}<=${Yd(u,i)}`}else if(PX(e)){const u=e.gte;return`${a}>=${Yd(u,i)}`}else{if(OX(e))return`indexof([${kOt(e.oneOf,i).join(",")}], ${a}) !== -1`;if(AOt(e))return E$(a,e.valid);if(NX(e)){const{range:u}=Eo(e),l=Wt(u)?{signal:`${u.signal}[0]`}:u[0],c=Wt(u)?{signal:`${u.signal}[1]`}:u[1];if(l!==null&&c!==null&&t)return"inrange("+a+", ["+Yd(l,i)+", "+Yd(c,i)+"])";const d=[];return l!==null&&d.push(`${a} >= ${Yd(l,i)}`),c!==null&&d.push(`${a} <= ${Yd(c,i)}`),d.length>0?d.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${Lr(e)}`)}function E$(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function IOt(e){return aRe(e)&&e.timeUnit?{...e,timeUnit:to(e.timeUnit)}:e}const dA={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function ROt(e){return e==="quantitative"||e==="temporal"}function lRe(e){return e==="ordinal"||e==="nominal"}const T1=dA.quantitative,$X=dA.ordinal,cw=dA.temporal,MX=dA.nominal,CE=dA.geojson;function DOt(e){if(e)switch(e=e.toLowerCase(),e){case"q":case T1:return"quantitative";case"t":case cw:return"temporal";case"o":case $X:return"ordinal";case"n":case MX:return"nominal";case CE:return"geojson"}}const _o={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",IDENTITY:"identity",SEQUENTIAL:"sequential",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",BIN_ORDINAL:"bin-ordinal",ORDINAL:"ordinal",POINT:"point",BAND:"band"},lz={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function POt(e,t){const n=lz[e],r=lz[t];return n===r||n==="ordinal-position"&&r==="time"||r==="ordinal-position"&&n==="time"}const NOt={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function $ce(e){return NOt[e]}const cRe=new Set(["linear","log","pow","sqrt","symlog"]),dRe=new Set([...cRe,"time","utc"]);function fRe(e){return cRe.has(e)}const hRe=new Set(["quantile","quantize","threshold"]),OOt=new Set([...dRe,...hRe,"sequential","identity"]),$Ot=new Set(["ordinal","bin-ordinal","point","band"]);function io(e){return $Ot.has(e)}function pd(e){return OOt.has(e)}function yf(e){return dRe.has(e)}function dw(e){return hRe.has(e)}const MOt={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,tickBandPaddingInner:.25,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:4,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0,framesPerSecond:2,animationDuration:5};function LOt(e){return!It(e)&&ct(e,"name")}function pRe(e){return ct(e,"param")}function FOt(e){return ct(e,"unionWith")}function BOt(e){return kt(e)&&"field"in e}const jOt={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:EHt,domain:_Ht,range:THt,rangeMax:CHt,rangeMin:SHt,scheme:AHt,...zOt}=jOt,UOt=at(zOt);function cz(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return yf(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return yf(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return yf(e);case"nice":return yf(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return pd(e)&&!$n(["log","time","utc","threshold","quantile"],e)}}function mRe(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return mx(e)?void 0:F4t(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function VOt(e,t){return $n([$X,MX],t)?e===void 0||io(e):t===cw?$n([_o.TIME,_o.UTC,void 0],e):t===T1?fRe(e)||dw(e)||e===void 0:!0}function HOt(e,t,n=!1){if(!hh(e))return!1;switch(e){case pi:case uo:case yg:case TE:case yc:case kd:return yf(t)||t==="band"?!0:t==="point"?!n:!1;case bg:return $n(["linear","band"],t);case em:case wg:case tm:case vg:case xg:case fb:return yf(t)||dw(t)||$n(["band","point","ordinal"],t);case Nu:case ch:case dh:return t!=="band";case Eg:case Ou:return t==="ordinal"||dw(t)}}function qOt(e){return kt(e)&&"value"in e}const Ka={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},gRe=Ka.arc,_$=Ka.area,T$=Ka.bar,WOt=Ka.image,C$=Ka.line,S$=Ka.point,GOt=Ka.rect,zN=Ka.rule,yRe=Ka.text,LX=Ka.tick,YOt=Ka.trail,FX=Ka.circle,BX=Ka.square,bRe=Ka.geoshape;function Tg(e){return["line","area","trail"].includes(e)}function IC(e){return["rect","bar","image","arc","tick"].includes(e)}const KOt=new Set(at(Ka));function Kf(e){return ct(e,"type")}const XOt=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],QOt=["fill","fillOpacity"],JOt=[...XOt,...QOt],ZOt={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},Mce=at(ZOt),OF=["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],e6t={area:["line","point"],bar:OF,rect:OF,line:["point"],tick:["bandSize","thickness",...OF]},t6t={color:"#4c78a8",invalid:"break-paths-show-path-domains",timeUnitBandSize:1},n6t={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},vRe=at(n6t);function C1(e){return ct(e,"band")}const r6t={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},i6t=5,jX={binSpacing:0,continuousBandSize:i6t,minBandSize:.25,timeUnitBandPosition:.5},s6t={...jX,binSpacing:1},o6t={...jX,thickness:1};function a6t(e){return Kf(e)?e.type:e}function xRe(e,{isPath:t}){return e===void 0||e==="break-paths-show-path-domains"?t?"break-paths-show-domains":"filter":e===null?"show":e}function zX({markDef:e,config:t,scaleChannel:n,scaleType:r,isCountAggregate:i}){var a,u;if(!r||!pd(r)||i)return"always-valid";const s=xRe($r("invalid",e,t),{isPath:Tg(e.type)});return((u=(a=t.scale)==null?void 0:a.invalid)==null?void 0:u[n])!==void 0?"show":s}function u6t(e){return e==="break-paths-filter-domains"||e==="break-paths-show-domains"}function wRe({scaleName:e,scale:t,mode:n}){const r=`domain('${e}')`;if(!t||!e)return;const i=`${r}[0]`,s=`peek(${r})`,o=t.domainHasZero();return o==="definitely"?{scale:e,value:0}:o==="maybe"?{signal:`scale('${e}', inrange(0, ${r}) ? 0 : ${n==="zeroOrMin"?i:s})`}:{signal:`scale('${e}', ${n==="zeroOrMin"?i:s})`}}function ERe({scaleChannel:e,channelDef:t,scale:n,scaleName:r,markDef:i,config:s}){var c;const o=n==null?void 0:n.get("type"),a=gd(t),u=b$(a==null?void 0:a.aggregate),l=zX({scaleChannel:e,markDef:i,config:s,scaleType:o,isCountAggregate:u});if(a&&l==="show"){const d=((c=s.scale.invalid)==null?void 0:c[e])??"zero-or-min";return{test:E$(Ct(a,{expr:"datum"}),!1),...l6t(d,n,r)}}}function l6t(e,t,n){if(qOt(e)){const{value:r}=e;return Wt(r)?{signal:r.signal}:{value:r}}return wRe({scale:t,scaleName:n,mode:"zeroOrMin"})}function UX(e){const{channel:t,channelDef:n,markDef:r,scale:i,scaleName:s,config:o}=e,a=hb(t),u=VX(e),l=ERe({scaleChannel:a,channelDef:n,scale:i,scaleName:s,markDef:r,config:o});return l!==void 0?[l,u]:u}function c6t(e){const{datum:t}=e;return gb(t)?_1(t):`${Lr(t)}`}function Wy(e,t,n,r){const i={};if(t&&(i.scale=t),ph(e)){const{datum:s}=e;gb(s)?i.signal=_1(s):Wt(s)?i.signal=s.signal:cA(s)?i.signal=s.expr:i.value=s}else i.field=Ct(e,n);if(r){const{offset:s,band:o}=r;s&&(i.offset=s),o&&(i.band=o)}return i}function UN({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:r,startSuffix:i,endSuffix:s="end",bandPosition:o=.5}){const a=!Wt(o)&&0<o&&o<1?"datum":void 0,u=Ct(t,{expr:a,suffix:i}),l=n!==void 0?Ct(n,{expr:a}):Ct(t,{suffix:s,expr:a}),c={};if(o===0||o===1){c.scale=e;const d=o===0?u:l;c.field=d}else{const d=Wt(o)?`(1-${o.signal}) * ${u} + ${o.signal} * ${l}`:`${1-o} * ${u} + ${o} * ${l}`;c.signal=`scale("${e}", ${d})`}return r&&(c.offset=r),c}function d6t({scaleName:e,fieldDef:t}){const n=Ct(t,{expr:"datum"}),r=Ct(t,{expr:"datum",suffix:"end"});return`abs(scale("${e}", ${r}) - scale("${e}", ${n}))`}function VX({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:u,defaultRef:l,bandPosition:c}){if(t){if(bn(t)){const d=o==null?void 0:o.get("type");if(Wa(t)){c??(c=Y0({fieldDef:t,fieldDef2:n,markDef:r,config:i}));const{bin:f,timeUnit:h,type:p}=t;if(Qr(f)||c&&h&&p===cw)return a!=null&&a.impute?Wy(t,s,{binSuffix:"mid"},{offset:u}):c&&!io(d)?UN({scaleName:s,fieldOrDatumDef:t,bandPosition:c,offset:u}):Wy(t,s,gA(t,e)?{binSuffix:"range"}:{},{offset:u});if(wo(f)){if(gt(n))return UN({scaleName:s,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:c,offset:u});ht(XIe(e===pi?Ad:lh))}}return Wy(t,s,io(d)?{binSuffix:"range"}:{},{offset:u,band:d==="band"?c??t.bandPosition??.5:void 0})}else if(md(t)){const d=t.value,f=u?{offset:u}:{};return{...y2(e,d),...f}}}return Sn(l)&&(l=l()),l&&{...l,...u?{offset:u}:{}}}function y2(e,t){return $n(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:$n(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:si(t)}function S1(e){return e&&e!=="number"&&e!=="time"}function _Re(e,t,n){return`${e}(${t}${n?`, ${Lr(n)}`:""})`}const f6t="  ";function HX({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s}){var u,l;if(S1(n))return ed({fieldOrDatumDef:e,format:t,formatType:n,expr:r,config:s});const o=TRe(e,r,i),a=fw(e);if(t===void 0&&n===void 0&&s.customFormatTypes){if(a==="quantitative"){if(i&&s.normalizedNumberFormatType)return ed({fieldOrDatumDef:e,format:s.normalizedNumberFormat,formatType:s.normalizedNumberFormatType,expr:r,config:s});if(s.numberFormatType)return ed({fieldOrDatumDef:e,format:s.numberFormat,formatType:s.numberFormatType,expr:r,config:s})}if(a==="temporal"&&s.timeFormatType&&gt(e)&&e.timeUnit===void 0)return ed({fieldOrDatumDef:e,format:s.timeFormat,formatType:s.timeFormatType,expr:r,config:s})}if(pw(e)){const c=p6t({field:o,timeUnit:gt(e)?(u=to(e.timeUnit))==null?void 0:u.unit:void 0,format:t,formatType:s.timeFormatType,rawTimeFormat:s.timeFormat,isUTCScale:bb(e)&&((l=e.scale)==null?void 0:l.type)===_o.UTC});return c?{signal:c}:void 0}if(t=dz({type:a,specifiedFormat:t,config:s,normalizeStack:i}),gt(e)&&Qr(e.bin)){const c=Ct(e,{expr:r,binSuffix:"end"});return{signal:fA(o,c,t,n,s)}}else return t||fw(e)==="quantitative"?{signal:`${ARe(o,t)}`}:{signal:`isValid(${o}) ? ${o} : ""+${o}`}}function TRe(e,t,n){return gt(e)?n?`${Ct(e,{expr:t,suffix:"end"})}-${Ct(e,{expr:t,suffix:"start"})}`:Ct(e,{expr:t}):c6t(e)}function ed({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s,field:o}){if(o??(o=TRe(e,r,i)),o!=="datum.value"&&gt(e)&&Qr(e.bin)){const a=Ct(e,{expr:r,binSuffix:"end"});return{signal:fA(o,a,t,n,s)}}return{signal:_Re(n,o,t)}}function CRe(e,t,n,r,i,s){var o;if(!(It(r)&&S1(r))&&!(n===void 0&&r===void 0&&i.customFormatTypes&&fw(e)==="quantitative"&&(i.normalizedNumberFormatType&&hw(e)&&e.stack==="normalize"||i.numberFormatType))){if(hw(e)&&e.stack==="normalize"&&i.normalizedNumberFormat)return dz({type:"quantitative",config:i,normalizeStack:!0});if(pw(e)){const a=gt(e)?(o=to(e.timeUnit))==null?void 0:o.unit:void 0;return a===void 0&&i.customFormatTypes&&i.timeFormatType?void 0:h6t({specifiedFormat:n,timeUnit:a,config:i,omitTimeFormatConfig:s})}return dz({type:t,specifiedFormat:n,config:i})}}function SRe(e,t,n){var r;if(e&&(Wt(e)||e==="number"||e==="time"))return e;if(pw(t)&&n!=="time"&&n!=="utc")return gt(t)&&((r=to(t==null?void 0:t.timeUnit))!=null&&r.utc)?"utc":"time"}function dz({type:e,specifiedFormat:t,config:n,normalizeStack:r}){if(It(t))return t;if(e===T1)return r?n.normalizedNumberFormat:n.numberFormat}function h6t({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:r}){return e||(t?{signal:iRe(t)}:r?void 0:n.timeFormat)}function ARe(e,t){return`format(${e}, "${t||""}")`}function Lce(e,t,n,r){return S1(n)?_Re(n,e,t):ARe(e,(It(t)?t:void 0)??r.numberFormat)}function fA(e,t,n,r,i){if(n===void 0&&r===void 0&&i.customFormatTypes&&i.numberFormatType)return fA(e,t,i.numberFormat,i.numberFormatType,i);const s=Lce(e,n,r,i),o=Lce(t,n,r,i);return`${E$(e,!1)} ? "null" : ${s} + "${f6t}" + ${o}`}function p6t({field:e,timeUnit:t,format:n,formatType:r,rawTimeFormat:i,isUTCScale:s}){return!t||n?!t&&r?`${r}(${e}, '${n}')`:(n=It(n)?n:i,`${s?"utc":"time"}Format(${e}, '${n}')`):EOt(t,e,s)}const A$="min",m6t={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function Fce(e){return Ot(m6t,e)}function g6t(e){return ct(e,"encoding")}function yp(e){return e&&(e.op==="count"||ct(e,"field"))}function kRe(e){return e&&Qe(e)}function hA(e){return ct(e,"row")||ct(e,"column")}function qX(e){return ct(e,"header")}function k$(e){return ct(e,"facet")}function y6t(e){return ct(e,"param")}function b6t(e){return!It(e)&&ct(e,"repeat")}function Bce(e){const{field:t,timeUnit:n,bin:r,aggregate:i}=e;return{...n?{timeUnit:n}:{},...r?{bin:r}:{},...i?{aggregate:i}:{},field:t}}function WX(e){return ct(e,"sort")}function Y0({fieldDef:e,fieldDef2:t,markDef:n,config:r}){if(bn(e)&&e.bandPosition!==void 0)return e.bandPosition;if(gt(e)){const{timeUnit:i,bin:s}=e;if(i&&!t)return Yf("timeUnitBandPosition",n,r);if(Qr(s))return .5}}function IRe({channel:e,fieldDef:t,fieldDef2:n,markDef:r,config:i,scaleType:s,useVlSizeChannel:o}){var l,c,d;const a=$u(e),u=$r(o?"size":a,r,i,{vgChannel:a});if(u!==void 0)return u;if(gt(t)){const{timeUnit:f,bin:h}=t;if(f&&!n)return{band:Yf("timeUnitBandSize",r,i)};if(Qr(h)&&!io(s))return{band:1}}if(IC(r.type))return s?io(s)?((l=i[r.type])==null?void 0:l.discreteBandSize)||{band:1}:(c=i[r.type])==null?void 0:c.continuousBandSize:(d=i[r.type])==null?void 0:d.discreteBandSize}function RRe(e,t,n,r){return Qr(e.bin)||e.timeUnit&&Wa(e)&&e.type==="temporal"?Y0({fieldDef:e,fieldDef2:t,markDef:n,config:r})!==void 0:!1}function DRe(e){return ct(e,"sort")&&!ct(e,"field")}function pA(e){return ct(e,"condition")}function I$(e){const t=e==null?void 0:e.condition;return!!t&&!Qe(t)&&gt(t)}function mA(e){const t=e==null?void 0:e.condition;return!!t&&!Qe(t)&&bn(t)}function v6t(e){const t=e==null?void 0:e.condition;return!!t&&(Qe(t)||md(t))}function gt(e){return ct(e,"field")||(e==null?void 0:e.aggregate)==="count"}function fw(e){return e==null?void 0:e.type}function ph(e){return ct(e,"datum")}function o0(e){return Wa(e)&&!HN(e)||VN(e)}function jce(e){return Wa(e)&&e.type==="quantitative"&&!e.bin||VN(e)}function VN(e){return ph(e)&&pr(e.datum)}function bn(e){return gt(e)||ph(e)}function Wa(e){return e&&(ct(e,"field")||e.aggregate==="count")&&ct(e,"type")}function md(e){return ct(e,"value")}function bb(e){return ct(e,"scale")||ct(e,"sort")}function hw(e){return ct(e,"axis")||ct(e,"stack")||ct(e,"impute")}function PRe(e){return ct(e,"legend")}function NRe(e){return ct(e,"format")||ct(e,"formatType")}function x6t(e){return Su(e,["legend","axis","header","scale"])}function w6t(e){return ct(e,"op")}function Ct(e,t={}){let n=e.field;const r=t.prefix;let i=t.suffix,s="";if(_6t(e))n=EIe("count");else{let o;if(!t.nofn)if(w6t(e))o=e.op;else{const{bin:a,aggregate:u,timeUnit:l}=e;Qr(a)?(o=MIe(a),i=(t.binSuffix??"")+(t.suffix??"")):u?_g(u)?(s=`["${n}"]`,n=`argmax_${u.argmax}`):Mp(u)?(s=`["${n}"]`,n=`argmin_${u.argmin}`):o=String(u):l&&!yb(l)&&(o=_Ot(l),i=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}o&&(n=n?`${o}_${n}`:o)}return i&&(n=`${n}_${i}`),r&&(n=`${r}_${n}`),t.forAs?_E(n):t.expr?vIe(n,t.expr)+s:oc(n)+s}function HN(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return gt(e)&&!!e.bin;case"temporal":return!1}throw new Error(WIe(e.type))}function E6t(e){var t;return bb(e)&&dw((t=e.scale)==null?void 0:t.type)}function _6t(e){return e.aggregate==="count"}function T6t(e,t){var o;const{field:n,bin:r,timeUnit:i,aggregate:s}=e;if(s==="count")return t.countTitle;if(Qr(r))return`${n} (binned)`;if(i&&!yb(i)){const a=(o=to(i))==null?void 0:o.unit;if(a)return`${n} (${w$(a).join("-")})`}else if(s)return _g(s)?`${n} for max ${s.argmax}`:Mp(s)?`${n} for min ${s.argmin}`:`${oA(s)} of ${n}`;return n}function C6t(e){const{aggregate:t,bin:n,timeUnit:r,field:i}=e;if(_g(t))return`${i} for argmax(${t.argmax})`;if(Mp(t))return`${i} for argmin(${t.argmin})`;const s=r&&!yb(r)?to(r):void 0,o=t||(s==null?void 0:s.unit)||(s==null?void 0:s.maxbins)&&"timeunit"||Qr(n)&&"bin";return o?`${o.toUpperCase()}(${i})`:i}const ORe=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return C6t(e);default:return T6t(e,t)}};let $Re=ORe;function MRe(e){$Re=e}function S6t(){MRe(ORe)}function gx(e,t,{allowDisabling:n,includeDefault:r=!0}){var a;const i=(a=GX(e))==null?void 0:a.title;if(!gt(e))return i??e.title;const s=e,o=r?YX(s,t):void 0;return n?Wi(i,s.title,o):i??s.title??o}function GX(e){if(hw(e)&&e.axis)return e.axis;if(PRe(e)&&e.legend)return e.legend;if(qX(e)&&e.header)return e.header}function YX(e,t){return $Re(e,t)}function qN(e){if(NRe(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}else{const t=GX(e)??{},{format:n,formatType:r}=t;return{format:n,formatType:r}}}function A6t(e,t){var s;switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(WX(e)&&Qe(e.sort))return"ordinal";const{aggregate:n,bin:r,timeUnit:i}=e;if(i)return"temporal";if(r||n&&!_g(n)&&!Mp(n))return"quantitative";if(bb(e)&&((s=e.scale)!=null&&s.type))switch(lz[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function gd(e){if(gt(e))return e;if(I$(e))return e.condition}function Ts(e){if(bn(e))return e;if(mA(e))return e.condition}function LRe(e,t,n,r={}){if(It(e)||pr(e)||pg(e)){const i=It(e)?"string":pr(e)?"number":"boolean";return ht(S4t(t,i,e)),{value:e}}return bn(e)?WN(e,t,n,r):mA(e)?{...e,condition:WN(e.condition,t,n,r)}:e}function WN(e,t,n,r){if(NRe(e)){const{format:i,formatType:s,...o}=e;if(S1(s)&&!n.customFormatTypes)return ht(Pce(t)),WN(o,t,n,r)}else{const i=hw(e)?"axis":PRe(e)?"legend":qX(e)?"header":null;if(i&&e[i]){const{format:s,formatType:o,...a}=e[i];if(S1(o)&&!n.customFormatTypes)return ht(Pce(t)),WN({...e,[i]:a},t,n,r)}}return gt(e)?KX(e,t,r):k6t(e)}function k6t(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=pr(n)?"quantitative":It(n)?"nominal":gb(n)?"temporal":void 0,{...e,type:t}}function KX(e,t,{compositeMark:n=!1}={}){const{aggregate:r,timeUnit:i,bin:s,field:o}=e,a={...e};if(!n&&r&&!xX(r)&&!_g(r)&&!Mp(r)&&(ht(k4t(r)),delete a.aggregate),i&&(a.timeUnit=to(i)),o&&(a.field=`${o}`),Qr(s)&&(a.bin=R$(s,t)),wo(s)&&!Gi(t)&&ht(oOt(t)),Wa(a)){const{type:u}=a,l=DOt(u);u!==l&&(a.type=l),u!=="quantitative"&&b$(r)&&(ht(A4t(u,r)),a.type="quantitative")}else if(!RIe(t)){const u=A6t(a,t);a.type=u}if(Wa(a)){const{compatible:u,warning:l}=I6t(a,t)||{};u===!1&&ht(l)}if(WX(a)&&It(a.sort)){const{sort:u}=a;if(Fce(u))return{...a,sort:{encoding:u}};const l=u.substring(1);if(u.charAt(0)==="-"&&Fce(l))return{...a,sort:{encoding:l,order:"descending"}}}if(qX(a)){const{header:u}=a;if(u){const{orient:l,...c}=u;if(l)return{...a,header:{...c,labelOrient:u.labelOrient||l,titleOrient:u.titleOrient||l}}}}return a}function R$(e,t){return pg(e)?{maxbins:_ce(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?{...e,maxbins:_ce(t)}:e}const gv={compatible:!0};function I6t(e,t){const n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case mp:case gp:case f$:return HN(e)?gv:{compatible:!1,warning:P4t(t)};case pi:case uo:case yg:case TE:case Nu:case ch:case dh:case aA:case uA:case h$:case w1:case p$:case m$:case fb:case yc:case kd:case g$:return gv;case Rd:case ac:case Id:case Dd:return n!==T1?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:gv;case tm:case vg:case xg:case wg:case em:case Zp:case Jp:case Ad:case lh:case bg:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:gv;case Ou:case Eg:return!HN(e)&&!E6t(e)?{compatible:!1,warning:N4t(t)}:gv;case lw:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:gv}}function pw(e){const{formatType:t}=qN(e);return t==="time"||!t&&R6t(e)}function R6t(e){return e&&(e.type==="temporal"||gt(e)&&!!e.timeUnit)}function D$(e,{timeUnit:t,type:n,wrapTime:r,undefinedIfExprNotRequired:i}){var u;const s=t&&((u=to(t))==null?void 0:u.unit);let o=s||n==="temporal",a;return cA(e)?a=e.expr:Wt(e)?a=e.signal:gb(e)?(o=!0,a=_1(e)):(It(e)||pr(e))&&o&&(a=`datetime(${Lr(e)})`,bOt(s)&&(pr(e)&&e<1e4||It(e)&&isNaN(Date.parse(e)))&&(a=_1({[s]:e}))),a?r&&o?`time(${a})`:a:i?void 0:Lr(e)}function FRe(e,t){const{type:n}=e;return t.map(r=>{const i=gt(e)&&!yb(e.timeUnit)?e.timeUnit:void 0,s=D$(r,{timeUnit:i,type:n,undefinedIfExprNotRequired:!0});return s!==void 0?{signal:s}:r})}function gA(e,t){return Qr(e.bin)?hh(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const zce={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function yA(e){return e==null?void 0:e.condition}const BRe=["domain","grid","labels","ticks","title"],D6t={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},jRe={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},P6t={...jRe,style:1,labelExpr:1,encoding:1};function Uce(e){return Ot(P6t,e)}const N6t={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},zRe=at(N6t);function rm(e){return ct(e,"mark")}class P${constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return rm(t)?a6t(t.mark)===this.name:!1}}function Gy(e,t){const n=e&&e[t];return n?Qe(n)?aw(n,r=>!!r.field):gt(n)||I$(n):!1}function URe(e,t){const n=e&&e[t];return n?Qe(n)?aw(n,r=>!!r.field):gt(n)||ph(n)||mA(n):!1}function VRe(e,t){if(Gi(t)){const n=e[t];if((gt(n)||ph(n))&&(lRe(n.type)||gt(n)&&n.timeUnit)){const r=mX(t);return URe(e,r)}}return!1}function HRe(e){return aw(kNt,t=>{if(Gy(e,t)){const n=e[t];if(Qe(n))return aw(n,r=>!!r.aggregate);{const r=gd(n);return r&&!!r.aggregate}}return!1})}function qRe(e,t){const n=[],r=[],i=[],s=[],o={};return XX(e,(a,u)=>{if(gt(a)){const{field:l,aggregate:c,bin:d,timeUnit:f,...h}=a;if(c||f||d){const p=GX(a),m=p==null?void 0:p.title;let y=Ct(a,{forAs:!0});const v={...m?[]:{title:gx(a,t,{allowDisabling:!0})},...h,field:y};if(c){let b;if(_g(c)?(b="argmax",y=Ct({op:"argmax",field:c.argmax},{forAs:!0}),v.field=`${y}.${l}`):Mp(c)?(b="argmin",y=Ct({op:"argmin",field:c.argmin},{forAs:!0}),v.field=`${y}.${l}`):c!=="boxplot"&&c!=="errorbar"&&c!=="errorband"&&(b=c),b){const w={op:b,as:y};l&&(w.field=l),s.push(w)}}else if(n.push(y),Wa(a)&&Qr(d)){if(r.push({bin:d,field:l,as:y}),n.push(Ct(a,{binSuffix:"end"})),gA(a,u)&&n.push(Ct(a,{binSuffix:"range"})),Gi(u)){const b={field:`${y}_end`};o[`${u}2`]=b}v.bin="binned",RIe(u)||(v.type=T1)}else if(f&&!yb(f)){i.push({timeUnit:f,field:l,as:y});const b=Wa(a)&&a.type!==cw&&"time";b&&(u===aA||u===w1?v.formatType=b:BNt(u)?v.legend={formatType:b,...v.legend}:Gi(u)&&(v.axis={formatType:b,...v.axis}))}o[u]=v}else n.push(l),o[u]=e[u]}else o[u]=e[u]}),{bins:r,timeUnits:i,aggregate:s,groupby:n,encoding:o}}function O6t(e,t,n){const r=zNt(t,n);if(r){if(r==="binned"){const i=e[t===Ad?pi:uo];return!!(gt(i)&&gt(e[t])&&wo(i.bin))}}else return!1;return!0}function $6t(e,t,n,r){const i={};for(const s of at(e))IIe(s)||ht(D4t(s));for(let s of ONt){if(!e[s])continue;const o=e[s];if(lA(s)){const a=NNt(s),u=i[a];if(gt(u)&&ROt(u.type)&&gt(o)&&!u.timeUnit){ht(C4t(a));continue}}if(s==="angle"&&t==="arc"&&!e.theta&&(ht(T4t),s=yc),!O6t(e,s,t)){ht(x$(s,t));continue}if(s===em&&t==="line"){const a=gd(e[s]);if(a!=null&&a.aggregate){ht(R4t);continue}}if(s===Nu&&(n?"fill"in e:"stroke"in e)){ht(GIe("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(s===uA||s===lw&&!Qe(o)&&!md(o)||s===w1&&Qe(o)){if(o){if(s===lw){const a=e[s];if(DRe(a)){i[s]=a;continue}}i[s]=Rt(o).reduce((a,u)=>(gt(u)?a.push(KX(u,s)):ht(uz(u,s)),a),[])}}else{if(s===w1&&o===null)i[s]=null;else if(!gt(o)&&!ph(o)&&!md(o)&&!pA(o)&&!Wt(o)){ht(uz(o,s));continue}i[s]=LRe(o,s,r)}}return i}function N$(e,t){const n={};for(const r of at(e)){const i=LRe(e[r],r,t,{compositeMark:!0});n[r]=i}return n}function M6t(e){const t=[];for(const n of at(e))if(Gy(e,n)){const r=e[n],i=Rt(r);for(const s of i)gt(s)?t.push(s):I$(s)&&t.push(s.condition)}return t}function XX(e,t,n){if(e)for(const r of at(e)){const i=e[r];if(Qe(i))for(const s of i)t.call(n,s,r);else t.call(n,i,r)}}function L6t(e,t,n,r){return e?at(e).reduce((i,s)=>{const o=e[s];return Qe(o)?o.reduce((a,u)=>t.call(r,a,u,s),i):t.call(r,i,o,s)},n):n}function WRe(e,t){return at(t).reduce((n,r)=>{switch(r){case pi:case uo:case p$:case g$:case m$:case Ad:case lh:case yg:case TE:case yc:case Zp:case kd:case Jp:case bg:case Id:case Rd:case Dd:case ac:case aA:case Ou:case fb:case w1:return n;case lw:if(e==="line"||e==="trail")return n;case uA:case h$:{const i=t[r];if(Qe(i)||gt(i))for(const s of Rt(i))s.aggregate||n.push(Ct(s,{}));return n}case em:if(e==="trail")return n;case Nu:case ch:case dh:case tm:case vg:case xg:case Eg:case wg:{const i=gd(t[r]);return i&&!i.aggregate&&n.push(Ct(i,{})),n}}},[])}function F6t(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let r,i;if(Qe(t)){for(const s of t)s.aggregate?(r||(r=[]),r.push(s)):(i||(i=[]),i.push(s));r&&(n.tooltip=r)}else t.aggregate?n.tooltip=t:i=t;return Qe(i)&&i.length===1&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:n}}function fz(e,t,n,r=!0){if("tooltip"in n)return{tooltip:n.tooltip};const i=e.map(({fieldPrefix:o,titlePrefix:a})=>{const u=r?` of ${QX(t)}`:"";return{field:o+t.field,type:t.type,title:Wt(a)?{signal:`${a}"${escape(u)}"`}:a+u}}),s=M6t(n).map(x6t);return{tooltip:[...i,...gf(s,zn)]}}function QX(e){const{title:t,field:n}=e;return Wi(t,n)}function JX(e,t,n,r,i){const{scale:s,axis:o}=n;return({partName:a,mark:u,positionPrefix:l,endPositionPrefix:c=void 0,extraEncoding:d={}})=>{const f=QX(n);return GRe(e,a,i,{mark:u,encoding:{[t]:{field:`${l}_${n.field}`,type:n.type,...f!==void 0?{title:f}:{},...s!==void 0?{scale:s}:{},...o!==void 0?{axis:o}:{}},...It(c)?{[`${t}2`]:{field:`${c}_${n.field}`}}:{},...r,...d}})}}function GRe(e,t,n,r){const{clip:i,color:s,opacity:o}=e,a=e.type;return e[t]||e[t]===void 0&&n[t]?[{...r,mark:{...n[t],...i?{clip:i}:{},...s?{color:s}:{},...o?{opacity:o}:{},...Kf(r.mark)?r.mark:{type:r.mark},style:`${a}-${String(t)}`,...pg(e[t])?{}:e[t]}}]:[]}function YRe(e,t,n){const{encoding:r}=e,i=t==="vertical"?"y":"x",s=r[i],o=r[`${i}2`],a=r[`${i}Error`],u=r[`${i}Error2`];return{continuousAxisChannelDef:MI(s,n),continuousAxisChannelDef2:MI(o,n),continuousAxisChannelDefError:MI(a,n),continuousAxisChannelDefError2:MI(u,n),continuousAxis:i}}function MI(e,t){if(e!=null&&e.aggregate){const{aggregate:n,...r}=e;return n!==t&&ht(sOt(n,t)),r}else return e}function KRe(e,t){const{mark:n,encoding:r}=e,{x:i,y:s}=r;if(Kf(n)&&n.orient)return n.orient;if(o0(i)){if(o0(s)){const o=gt(i)&&i.aggregate,a=gt(s)&&s.aggregate;if(!o&&a===t)return"vertical";if(!a&&o===t)return"horizontal";if(o===t&&a===t)throw new Error("Both x and y cannot have aggregate");return pw(s)&&!pw(i)?"horizontal":"vertical"}return"horizontal"}else{if(o0(s))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}const GN="boxplot",B6t=["box","median","outliers","rule","ticks"],j6t=new P$(GN,QRe);function XRe(e){return pr(e)?"tukey":e}function QRe(e,{config:t}){e={...e,encoding:N$(e.encoding,t)};const{mark:n,encoding:r,params:i,projection:s,...o}=e,a=Kf(n)?n:{type:n};i&&ht(qIe("boxplot"));const u=a.extent??t.boxplot.extent,l=$r("size",a,t),c=a.invalid,d=XRe(u),{bins:f,timeUnits:h,transform:p,continuousAxisChannelDef:m,continuousAxis:y,groupby:v,aggregate:b,encodingWithoutContinuousAxis:w,ticksOrient:E,boxOrient:_,customTooltipWithoutAggregatedField:C}=z6t(e,u,t),S=_E(m.field),{color:k,size:R,...N}=w,O=je=>JX(a,y,m,je,t.boxplot),F=O(N),$=O(w),z=(kt(t.boxplot.box)?t.boxplot.box.color:t.mark.color)||"#4c78a8",q=O({...N,...R?{size:R}:{},color:{condition:{test:`${Ar(`lower_box_${m.field}`)} >= ${Ar(`upper_box_${m.field}`)}`,...k||{value:z}}}}),W=fz([{fieldPrefix:d==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:d==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],m,w),J={type:"tick",color:"black",opacity:1,orient:E,invalid:c,aria:!1},K=d==="min-max"?W:fz([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],m,w),Z=[...F({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:K}),...F({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:K}),...F({partName:"ticks",mark:J,positionPrefix:"lower_whisker",extraEncoding:K}),...F({partName:"ticks",mark:J,positionPrefix:"upper_whisker",extraEncoding:K})],U=[...d!=="tukey"?Z:[],...$({partName:"box",mark:{type:"bar",...l?{size:l}:{},orient:_,invalid:c,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:W}),...q({partName:"median",mark:{type:"tick",invalid:c,...kt(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...l?{size:l}:{},orient:E,aria:!1},positionPrefix:"mid_box",extraEncoding:W})];if(d==="min-max")return{...o,transform:(o.transform??[]).concat(p),layer:U};const L=Ar(`lower_box_${m.field}`),Y=Ar(`upper_box_${m.field}`),j=`(${Y} - ${L})`,G=`${L} - ${u} * ${j}`,X=`${Y} + ${u} * ${j}`,ne=Ar(m.field),pe={joinaggregate:JRe(m.field),groupby:v},de={transform:[{filter:`(${G} <= ${ne}) && (${ne} <= ${X})`},{aggregate:[{op:"min",field:m.field,as:`lower_whisker_${S}`},{op:"max",field:m.field,as:`upper_whisker_${S}`},{op:"min",field:`lower_box_${m.field}`,as:`lower_box_${S}`},{op:"max",field:`upper_box_${m.field}`,as:`upper_box_${S}`},...b],groupby:v}],layer:Z},{tooltip:xe,...Ce}=N,{scale:ue,axis:se}=m,me=QX(m),be=Su(se,["title"]),Le=GRe(a,"outliers",t.boxplot,{transform:[{filter:`(${ne} < ${G}) || (${ne} > ${X})`}],mark:"point",encoding:{[y]:{field:m.field,type:m.type,...me!==void 0?{title:me}:{},...ue!==void 0?{scale:ue}:{},...Mr(be)?{}:{axis:be}},...Ce,...k?{color:k}:{},...C?{tooltip:C}:{}}})[0];let Ue;const Ne=[...f,...h,pe];return Le?Ue={transform:Ne,layer:[Le,de]}:(Ue=de,Ue.transform.unshift(...Ne)),{...o,layer:[Ue,{transform:p,layer:U}]}}function JRe(e){const t=_E(e);return[{op:"q1",field:e,as:`lower_box_${t}`},{op:"q3",field:e,as:`upper_box_${t}`}]}function z6t(e,t,n){const r=KRe(e,GN),{continuousAxisChannelDef:i,continuousAxis:s}=YRe(e,r,GN),o=i.field,a=_E(o),u=XRe(t),l=[...JRe(o),{op:"median",field:o,as:`mid_box_${a}`},{op:"min",field:o,as:(u==="min-max"?"lower_whisker_":"min_")+a},{op:"max",field:o,as:(u==="min-max"?"upper_whisker_":"max_")+a}],c=u==="min-max"||u==="tukey"?[]:[{calculate:`${Ar(`upper_box_${a}`)} - ${Ar(`lower_box_${a}`)}`,as:`iqr_${a}`},{calculate:`min(${Ar(`upper_box_${a}`)} + ${Ar(`iqr_${a}`)} * ${t}, ${Ar(`max_${a}`)})`,as:`upper_whisker_${a}`},{calculate:`max(${Ar(`lower_box_${a}`)} - ${Ar(`iqr_${a}`)} * ${t}, ${Ar(`min_${a}`)})`,as:`lower_whisker_${a}`}],{[s]:d,...f}=e.encoding,{customTooltipWithoutAggregatedField:h,filteredEncoding:p}=F6t(f),{bins:m,timeUnits:y,aggregate:v,groupby:b,encoding:w}=qRe(p,n),E=r==="vertical"?"horizontal":"vertical",_=r,C=[...m,...y,{aggregate:[...v,...l],groupby:b},...c];return{bins:m,timeUnits:y,transform:C,groupby:b,aggregate:v,continuousAxisChannelDef:i,continuousAxis:s,encodingWithoutContinuousAxis:w,ticksOrient:E,boxOrient:_,customTooltipWithoutAggregatedField:h}}const ZX="errorbar",U6t=["ticks","rule"],V6t=new P$(ZX,ZRe);function ZRe(e,{config:t}){e={...e,encoding:N$(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,ticksOrient:o,markDef:a,outerSpec:u,tooltipEncoding:l}=eDe(e,ZX,t);delete s.size;const c=JX(a,i,r,s,t.errorbar),d=a.thickness,f=a.size,h={type:"tick",orient:o,aria:!1,...d!==void 0?{thickness:d}:{},...f!==void 0?{size:f}:{}},p=[...c({partName:"ticks",mark:h,positionPrefix:"lower",extraEncoding:l}),...c({partName:"ticks",mark:h,positionPrefix:"upper",extraEncoding:l}),...c({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...d!==void 0?{size:d}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l})];return{...u,transform:n,...p.length>1?{layer:p}:{...p[0]}}}function H6t(e,t){const{encoding:n}=e;if(q6t(n))return{orient:KRe(e,t),inputType:"raw"};const r=W6t(n),i=G6t(n),s=n.x,o=n.y;if(r){if(i)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const a=n.x2,u=n.y2;if(bn(a)&&bn(u))throw new Error(`${t} cannot have both x2 and y2`);if(bn(a)){if(o0(s))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(bn(u)){if(o0(o))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{const a=n.xError,u=n.xError2,l=n.yError,c=n.yError2;if(bn(u)&&!bn(a))throw new Error(`${t} cannot have xError2 without xError`);if(bn(c)&&!bn(l))throw new Error(`${t} cannot have yError2 without yError`);if(bn(a)&&bn(l))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(bn(a)){if(o0(s))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(bn(l)){if(o0(o))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function q6t(e){return(bn(e.x)||bn(e.y))&&!bn(e.x2)&&!bn(e.y2)&&!bn(e.xError)&&!bn(e.xError2)&&!bn(e.yError)&&!bn(e.yError2)}function W6t(e){return bn(e.x2)||bn(e.y2)}function G6t(e){return bn(e.xError)||bn(e.xError2)||bn(e.yError)||bn(e.yError2)}function eDe(e,t,n){const{mark:r,encoding:i,params:s,projection:o,...a}=e,u=Kf(r)?r:{type:r};s&&ht(qIe(t));const{orient:l,inputType:c}=H6t(e,t),{continuousAxisChannelDef:d,continuousAxisChannelDef2:f,continuousAxisChannelDefError:h,continuousAxisChannelDefError2:p,continuousAxis:m}=YRe(e,l,t),{errorBarSpecificAggregate:y,postAggregateCalculates:v,tooltipSummary:b,tooltipTitleWithFieldName:w}=Y6t(u,d,f,h,p,c,t,n),{[m]:E,[m==="x"?"x2":"y2"]:_,[m==="x"?"xError":"yError"]:C,[m==="x"?"xError2":"yError2"]:S,...k}=i,{bins:R,timeUnits:N,aggregate:O,groupby:F,encoding:$}=qRe(k,n),z=[...O,...y],q=c!=="raw"?[]:F,W=fz(b,d,$,w);return{transform:[...a.transform??[],...R,...N,...z.length===0?[]:[{aggregate:z,groupby:q}],...v],groupby:q,continuousAxisChannelDef:d,continuousAxis:m,encodingWithoutContinuousAxis:$,ticksOrient:l==="vertical"?"horizontal":"vertical",markDef:u,outerSpec:a,tooltipEncoding:W}}function Y6t(e,t,n,r,i,s,o,a){let u=[],l=[];const c=t.field;let d,f=!1;if(s==="raw"){const h=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":a.errorbar.center,p=e.extent?e.extent:h==="mean"?"stderr":"iqr";if(h==="median"!=(p==="iqr")&&ht(iOt(h,p,o)),p==="stderr"||p==="stdev")u=[{op:p,field:c,as:`extent_${c}`},{op:h,field:c,as:`center_${c}`}],l=[{calculate:`${Ar(`center_${c}`)} + ${Ar(`extent_${c}`)}`,as:`upper_${c}`},{calculate:`${Ar(`center_${c}`)} - ${Ar(`extent_${c}`)}`,as:`lower_${c}`}],d=[{fieldPrefix:"center_",titlePrefix:oA(h)},{fieldPrefix:"upper_",titlePrefix:Vce(h,p,"+")},{fieldPrefix:"lower_",titlePrefix:Vce(h,p,"-")}],f=!0;else{let m,y,v;p==="ci"?(m="mean",y="ci0",v="ci1"):(m="median",y="q1",v="q3"),u=[{op:y,field:c,as:`lower_${c}`},{op:v,field:c,as:`upper_${c}`},{op:m,field:c,as:`center_${c}`}],d=[{fieldPrefix:"upper_",titlePrefix:gx({field:c,aggregate:v,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:gx({field:c,aggregate:y,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:gx({field:c,aggregate:m,type:"quantitative"},a,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&ht(rOt(e.center,e.extent)),s==="aggregated-upper-lower"?(d=[],l=[{calculate:Ar(n.field),as:`upper_${c}`},{calculate:Ar(c),as:`lower_${c}`}]):s==="aggregated-error"&&(d=[{fieldPrefix:"",titlePrefix:c}],l=[{calculate:`${Ar(c)} + ${Ar(r.field)}`,as:`upper_${c}`}],i?l.push({calculate:`${Ar(c)} + ${Ar(i.field)}`,as:`lower_${c}`}):l.push({calculate:`${Ar(c)} - ${Ar(r.field)}`,as:`lower_${c}`}));for(const h of l)d.push({fieldPrefix:h.as.substring(0,6),titlePrefix:x1(x1(h.calculate,"datum['",""),"']","")})}return{postAggregateCalculates:l,errorBarSpecificAggregate:u,tooltipSummary:d,tooltipTitleWithFieldName:f}}function Vce(e,t,n){return`${oA(e)} ${n} ${t}`}const eQ="errorband",K6t=["band","borders"],X6t=new P$(eQ,tDe);function tDe(e,{config:t}){e={...e,encoding:N$(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,markDef:o,outerSpec:a,tooltipEncoding:u}=eDe(e,eQ,t),l=o,c=JX(l,i,r,s,t.errorband),d=e.encoding.x!==void 0&&e.encoding.y!==void 0;let f={type:d?"area":"rect"},h={type:d?"line":"rule"};const p={...l.interpolate?{interpolate:l.interpolate}:{},...l.tension&&l.interpolate?{tension:l.tension}:{}};return d?(f={...f,...p,ariaRoleDescription:"errorband"},h={...h,...p,aria:!1}):l.interpolate?ht(Oce("interpolate")):l.tension&&ht(Oce("tension")),{...a,transform:n,layer:[...c({partName:"band",mark:f,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"lower",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"upper",extraEncoding:u})]}}const nDe={};function tQ(e,t,n){const r=new P$(e,t);nDe[e]={normalizer:r,parts:n}}function Q6t(){return at(nDe)}tQ(GN,QRe,B6t);tQ(ZX,ZRe,U6t);tQ(eQ,tDe,K6t);const J6t=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],rDe={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},iDe={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},Z6t=at(rDe),e$t=at(iDe),t$t={header:1,headerRow:1,headerColumn:1,headerFacet:1},sDe=at(t$t),oDe=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],n$t={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},r$t={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},yd="_vgsid_",i$t={point:{on:"click",fields:[yd],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function nQ(e){return e==="legend"||!!(e!=null&&e.legend)}function $F(e){return nQ(e)&&kt(e)}function rQ(e){return!!(e!=null&&e.select)}function aDe(e){const t=[];for(const n of e||[]){if(rQ(n))continue;const{expr:r,bind:i,...s}=n;if(i&&r){const o={...s,bind:i,init:r};t.push(o)}else{const o={...s,...r?{update:r}:{},...i?{bind:i}:{}};t.push(o)}}return t}function s$t(e){return O$(e)||sQ(e)||iQ(e)}function iQ(e){return ct(e,"concat")}function O$(e){return ct(e,"vconcat")}function sQ(e){return ct(e,"hconcat")}function uDe({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function Xf(e){return ct(e,"step")}function Hce(e){return ct(e,"view")||ct(e,"width")||ct(e,"height")}const qce=20,o$t={align:1,bounds:1,center:1,columns:1,spacing:1},a$t=at(o$t);function u$t(e,t,n){const r=n[t],i={},{spacing:s,columns:o}=r;s!==void 0&&(i.spacing=s),o!==void 0&&(k$(e)&&!hA(e.facet)||iQ(e))&&(i.columns=o),O$(e)&&(i.columns=1);for(const a of a$t)if(e[a]!==void 0)if(a==="spacing"){const u=e[a];i[a]=pr(u)?u:{row:u.row??s,column:u.column??s}}else i[a]=e[a];return i}function hz(e,t){return e[t]??e[t==="width"?"continuousWidth":"continuousHeight"]}function pz(e,t){const n=YN(e,t);return Xf(n)?n.step:lDe}function YN(e,t){const n=e[t]??e[t==="width"?"discreteWidth":"discreteHeight"];return Wi(n,{step:e.step})}const lDe=20,l$t={continuousWidth:200,continuousHeight:200,step:lDe},c$t={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:l$t,mark:t6t,arc:{},area:{},bar:s6t,circle:{},geoshape:{},image:{},line:{},point:{},rect:jX,rule:{color:"black"},square:{},text:{color:"black"},tick:o6t,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:MOt,projection:{},legend:n$t,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:i$t,style:{},title:{},facet:{spacing:qce},concat:{spacing:qce},normalizedNumberFormat:".0%"},Oh=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],Wce={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},Gce={blue:Oh[0],orange:Oh[1],red:Oh[2],teal:Oh[3],green:Oh[4],yellow:Oh[5],purple:Oh[6],pink:Oh[7],brown:Oh[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function d$t(e={}){return{signals:[{name:"color",value:kt(e)?{...Gce,...e}:Gce}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function f$t(e){return{signals:[{name:"fontSize",value:kt(e)?{...Wce,...e}:Wce}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function h$t(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function cDe(e){const t=at(e||{}),n={};for(const r of t){const i=e[r];n[r]=yA(i)?FIe(i):tl(i)}return n}function p$t(e){const t=at(e),n={};for(const r of t)n[r]=cDe(e[r]);return n}const m$t=[...vRe,...zRe,...sDe,"background","padding","legend","lineBreak","scale","style","title","view"];function dDe(e={}){const{color:t,font:n,fontSize:r,selection:i,...s}=e,o=fE({},hn(c$t),n?h$t(n):{},t?d$t(t):{},r?f$t(r):{},s||{});i&&hE(o,"selection",i,!0);const a=Su(o,m$t);for(const u of["background","lineBreak","padding"])o[u]&&(a[u]=tl(o[u]));for(const u of vRe)o[u]&&(a[u]=Eo(o[u]));for(const u of zRe)o[u]&&(a[u]=cDe(o[u]));for(const u of sDe)o[u]&&(a[u]=Eo(o[u]));if(o.legend&&(a.legend=Eo(o.legend)),o.scale){const{invalid:u,...l}=o.scale,c=Eo(u,{level:1});a.scale={...Eo(l),...at(c).length>0?{invalid:c}:{}}}return o.style&&(a.style=p$t(o.style)),o.title&&(a.title=Eo(o.title)),o.view&&(a.view=Eo(o.view)),a}const g$t=new Set(["view",...KOt]),y$t=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],b$t={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],...e6t};function v$t(e){e=hn(e);for(const t of y$t)delete e[t];if(e.axis)for(const t in e.axis)yA(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of J6t)delete e.legend[t];if(e.mark){for(const t of Mce)delete e.mark[t];e.mark.tooltip&&kt(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(aDe(e.params)),delete e.params);for(const t of g$t){for(const r of Mce)delete e[t][r];const n=b$t[t];if(n)for(const r of n)delete e[t][r];w$t(e,t)}for(const t of Q6t())delete e[t];x$t(e);for(const t in e)kt(e[t])&&Mr(e[t])&&delete e[t];return Mr(e)?void 0:e}function x$t(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:r}=LIe(e.title);Mr(t)||(e.style["group-title"]={...e.style["group-title"],...t}),Mr(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n}),Mr(r)?delete e.title:e.title=r}function w$t(e,t,n,r){const i=e[t];t==="view"&&(n="cell");const s={...i,...e.style[n??t]};Mr(s)||(e.style[n??t]=s),delete e[t]}function $$(e){return ct(e,"layer")}function E$t(e){return ct(e,"repeat")}function _$t(e){return!Qe(e.repeat)&&ct(e.repeat,"layer")}class oQ{map(t,n){return k$(t)?this.mapFacet(t,n):E$t(t)?this.mapRepeat(t,n):sQ(t)?this.mapHConcat(t,n):O$(t)?this.mapVConcat(t,n):iQ(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if($$(t))return this.mapLayer(t,n);if(rm(t))return this.mapUnit(t,n);throw new Error(wX(t))}mapLayer(t,n){return{...t,layer:t.layer.map(r=>this.mapLayerOrUnit(r,n))}}mapHConcat(t,n){return{...t,hconcat:t.hconcat.map(r=>this.map(r,n))}}mapVConcat(t,n){return{...t,vconcat:t.vconcat.map(r=>this.map(r,n))}}mapConcat(t,n){const{concat:r,...i}=t;return{...i,concat:r.map(s=>this.map(s,n))}}mapFacet(t,n){return{...t,spec:this.map(t.spec,n)}}mapRepeat(t,n){return{...t,spec:this.map(t.spec,n)}}}const T$t={zero:1,center:1,normalize:1};function C$t(e){return Ot(T$t,e)}const S$t=new Set([gRe,T$,_$,zN,S$,FX,BX,C$,yRe,LX]),A$t=new Set([T$,_$,gRe]);function yv(e){return gt(e)&&fw(e)==="quantitative"&&!e.bin}function Yce(e,t,{orient:n,type:r}){const i=t==="x"?"y":"radius",s=t==="x"&&["bar","area"].includes(r),o=e[t],a=e[i];if(gt(o)&&gt(a))if(yv(o)&&yv(a)){if(o.stack)return t;if(a.stack)return i;const u=gt(o)&&!!o.aggregate,l=gt(a)&&!!a.aggregate;if(u!==l)return u?t:i;if(s){if(n==="vertical")return i;if(n==="horizontal")return t}}else{if(yv(o))return t;if(yv(a))return i}else{if(yv(o))return s&&n==="vertical"?void 0:t;if(yv(a))return s&&n==="horizontal"?void 0:i}}function k$t(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function fDe(e,t){var m,y;const n=Kf(e)?e:{type:e},r=n.type;if(!S$t.has(r))return null;const i=Yce(t,"x",n)||Yce(t,"theta",n);if(!i)return null;const s=t[i],o=gt(s)?Ct(s,{}):void 0,a=k$t(i),u=[],l=new Set;if(t[a]){const v=t[a],b=gt(v)?Ct(v,{}):void 0;b&&b!==o&&(u.push(a),l.add(b))}const c=a==="x"?"xOffset":"yOffset",d=t[c],f=gt(d)?Ct(d,{}):void 0;f&&f!==o&&(u.push(c),l.add(f));const h=$Nt.reduce((v,b)=>{if(b!=="tooltip"&&Gy(t,b)){const w=t[b];for(const E of Rt(w)){const _=gd(E);if(_.aggregate)continue;const C=Ct(_,{});(!C||!l.has(C))&&v.push({channel:b,fieldDef:_})}}return v},[]);let p;return s.stack!==void 0?pg(s.stack)?p=s.stack?"zero":null:p=s.stack:A$t.has(r)&&(p="zero"),!p||!C$t(p)||HRe(t)&&h.length===0?null:((m=s==null?void 0:s.scale)!=null&&m.type&&((y=s==null?void 0:s.scale)==null?void 0:y.type)!==_o.LINEAR&&s!=null&&s.stack&&ht(eOt(s.scale.type)),bn(t[fh(i)])?(s.stack!==void 0&&ht(Z4t(i)),null):(gt(s)&&s.aggregate&&!YNt.has(s.aggregate)&&ht(tOt(s.aggregate)),{groupbyChannels:u,groupbyFields:l,fieldChannel:i,impute:s.impute===null?!1:Tg(r),stackBy:h,offset:p}))}function hDe(e,t,n){const r=Eo(e),i=$r("orient",r,n);if(r.orient=P$t(r.type,t,i),i!==void 0&&i!==r.orient&&ht(L4t(r.orient,i)),r.type==="bar"&&r.orient){const u=$r("cornerRadiusEnd",r,n);if(u!==void 0){const l=r.orient==="horizontal"&&t.x2||r.orient==="vertical"&&t.y2?["cornerRadius"]:r6t[r.orient];for(const c of l)r[c]=u;r.cornerRadiusEnd!==void 0&&delete r.cornerRadiusEnd}}const s=$r("opacity",r,n),o=$r("fillOpacity",r,n);return s===void 0&&o===void 0&&(r.opacity=R$t(r.type,t)),$r("cursor",r,n)===void 0&&(r.cursor=I$t(r,t,n)),r}function I$t(e,t,n){return t.href||e.href||$r("href",e,n)?"pointer":e.cursor}function R$t(e,t){if($n([S$,LX,FX,BX],e)&&!HRe(t))return .7}function D$t(e,t,{graticule:n}){if(n)return!1;const r=Yf("filled",e,t),i=e.type;return Wi(r,i!==S$&&i!==C$&&i!==zN)}function P$t(e,t,n){switch(e){case S$:case FX:case BX:case yRe:case GOt:case WOt:return}const{x:r,y:i,x2:s,y2:o}=t;switch(e){case T$:if(gt(r)&&(wo(r.bin)||gt(i)&&i.aggregate&&!r.aggregate))return"vertical";if(gt(i)&&(wo(i.bin)||gt(r)&&r.aggregate&&!i.aggregate))return"horizontal";if(o||s){if(n)return n;if(!s)return(gt(r)&&r.type===T1&&!Qr(r.bin)||VN(r))&&gt(i)&&wo(i.bin)?"horizontal":"vertical";if(!o)return(gt(i)&&i.type===T1&&!Qr(i.bin)||VN(i))&&gt(r)&&wo(r.bin)?"vertical":"horizontal"}case zN:if(s&&!(gt(r)&&wo(r.bin))&&o&&!(gt(i)&&wo(i.bin)))return;case _$:if(o)return gt(i)&&wo(i.bin)?"horizontal":"vertical";if(s)return gt(r)&&wo(r.bin)?"vertical":"horizontal";if(e===zN){if(r&&!i)return"vertical";if(i&&!r)return"horizontal"}case C$:case LX:{const a=jce(r),u=jce(i);if(n)return n;if(a&&!u)return e!=="tick"?"horizontal":"vertical";if(!a&&u)return e!=="tick"?"vertical":"horizontal";if(a&&u)return"vertical";{const l=Wa(r)&&r.type===cw,c=Wa(i)&&i.type===cw;if(l&&!c)return"vertical";if(!l&&c)return"horizontal"}return}}return"vertical"}function N$t(e){const{point:t,line:n,...r}=e;return at(r).length>1?r:r.type}function O$t(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:Su(e[t],["point","line"])});return e}function MF(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?kt(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?kt(t.point)?t.point:{}:void 0}function Kce(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}class $$t{constructor(){this.name="path-overlay"}hasMatchingType(t,n){if(rm(t)){const{mark:r,encoding:i}=t,s=Kf(r)?r:{type:r};switch(s.type){case"line":case"rule":case"trail":return!!MF(s,n[s.type],i);case"area":return!!MF(s,n[s.type],i)||!!Kce(s,n[s.type])}}return!1}run(t,n,r){const{config:i}=n,{params:s,projection:o,mark:a,name:u,encoding:l,...c}=t,d=N$(l,i),f=Kf(a)?a:{type:a},h=MF(f,i[f.type],d),p=f.type==="area"&&Kce(f,i[f.type]),m=[{name:u,...s?{params:s}:{},mark:N$t({...f.type==="area"&&f.opacity===void 0&&f.fillOpacity===void 0?{opacity:.7}:{},...f}),encoding:Su(d,["shape"])}],y=fDe(hDe(f,d,i),d);let v=d;if(y){const{fieldChannel:b,offset:w}=y;v={...d,[b]:{...d[b],...w?{stack:w}:{}}}}return v=Su(v,["y2","x2"]),p&&m.push({...o?{projection:o}:{},mark:{type:"line",...ow(f,["clip","interpolate","tension","tooltip"]),...p},encoding:v}),h&&m.push({...o?{projection:o}:{},mark:{type:"point",opacity:1,filled:!0,...ow(f,["clip","tooltip"]),...h},encoding:v}),r({...c,layer:m},{...n,config:O$t(i)})}}function M$t(e,t){return t?hA(e)?mDe(e,t):pDe(e,t):e}function LF(e,t){return t?mDe(e,t):e}function mz(e,t,n){const r=t[e];if(b6t(r)){if(r.repeat in n)return{...t,[e]:n[r.repeat]};ht(p4t(r.repeat));return}return t}function pDe(e,t){if(e=mz("field",e,t),e!==void 0){if(e===null)return null;if(WX(e)&&yp(e.sort)){const n=mz("field",e.sort,t);e={...e,...n?{sort:n}:{}}}return e}}function Xce(e,t){if(gt(e))return pDe(e,t);{const n=mz("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function Qce(e,t){if(bn(e)){const n=Xce(e,t);if(n)return n;if(pA(e))return{condition:e.condition}}else{if(mA(e)){const n=Xce(e.condition,t);if(n)return{...e,condition:n};{const{condition:r,...i}=e;return i}}return e}}function mDe(e,t){const n={};for(const r in e)if(ct(e,r)){const i=e[r];if(Qe(i))n[r]=i.map(s=>Qce(s,t)).filter(s=>s);else{const s=Qce(i,t);s!==void 0&&(n[r]=s)}}return n}class L$t{constructor(){this.name="RuleForRangedLine"}hasMatchingType(t){if(rm(t)){const{encoding:n,mark:r}=t;if(r==="line"||Kf(r)&&r.type==="line")for(const i of PNt){const s=hb(i),o=n[s];if(n[i]&&(gt(o)&&!wo(o.bin)||ph(o)))return!0}}return!1}run(t,n,r){const{encoding:i,mark:s}=t;return ht(M4t(!!i.x2,!!i.y2)),r({...t,mark:kt(s)?{...s,type:"rule"}:"rule"},n)}}class F$t extends oQ{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[j6t,V6t,X6t,new $$t,new L$t]}map(t,n){if(rm(t)){const r=Gy(t.encoding,mp),i=Gy(t.encoding,gp),s=Gy(t.encoding,f$);if(r||i||s)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){const{parentEncoding:r,parentProjection:i}=n,s=LF(t.encoding,n.repeater),o={...t,...t.name?{name:[n.repeaterPrefix,t.name].filter(u=>u).join("_")}:{},...s?{encoding:s}:{}};if(r||i)return this.mapUnitWithParentEncodingOrProjection(o,n);const a=this.mapLayerOrUnit.bind(this);for(const u of this.nonFacetUnitNormalizers)if(u.hasMatchingType(o,n.config))return u.run(o,n,a);return o}mapRepeat(t,n){return _$t(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){const{repeat:r,spec:i,...s}=t,{row:o,column:a,layer:u}=r,{repeater:l={},repeaterPrefix:c=""}=n;return o||a?this.mapRepeat({...t,repeat:{...o?{row:o}:{},...a?{column:a}:{}},spec:{repeat:{layer:u},spec:i}},n):{...s,layer:u.map(d=>{const f={...l,layer:d},h=`${(i.name?`${i.name}_`:"")+c}child__layer_${fi(d)}`,p=this.mapLayerOrUnit(i,{...n,repeater:f,repeaterPrefix:h});return p.name=h,p})}}mapNonLayerRepeat(t,n){const{repeat:r,spec:i,data:s,...o}=t;!Qe(r)&&t.columns&&(t=Su(t,["columns"]),ht(Rce("repeat")));const a=[],{repeater:u={},repeaterPrefix:l=""}=n,c=!Qe(r)&&r.row||[u?u.row:null],d=!Qe(r)&&r.column||[u?u.column:null],f=Qe(r)&&r||[u?u.repeat:null];for(const p of f)for(const m of c)for(const y of d){const v={repeat:p,row:m,column:y,layer:u.layer},b=(i.name?`${i.name}_`:"")+l+"child__"+(Qe(r)?`${fi(p)}`:(r.row?`row_${fi(m)}`:"")+(r.column?`column_${fi(y)}`:"")),w=this.map(i,{...n,repeater:v,repeaterPrefix:b});w.name=b,a.push(Su(w,["data"]))}const h=Qe(r)?t.columns:r.column?r.column.length:1;return{data:i.data??s,align:"all",...o,columns:h,concat:a}}mapFacet(t,n){const{facet:r}=t;return hA(r)&&t.columns&&(t=Su(t,["columns"]),ht(Rce("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){const{encoding:r,projection:i}=t,{parentEncoding:s,parentProjection:o,config:a}=n,u=Zce({parentProjection:o,projection:i}),l=Jce({parentEncoding:s,encoding:LF(r,n.repeater)});return this.mapUnit({...t,...u?{projection:u}:{},...l?{encoding:l}:{}},{config:a})}mapFacetedUnit(t,n){const{row:r,column:i,facet:s,...o}=t.encoding,{mark:a,width:u,projection:l,height:c,view:d,params:f,encoding:h,...p}=t,{facetMapping:m,layout:y}=this.getFacetMappingAndLayout({row:r,column:i,facet:s},n),v=LF(o,n.repeater);return this.mapFacet({...p,...y,facet:m,spec:{...u?{width:u}:{},...c?{height:c}:{},...d?{view:d}:{},...l?{projection:l}:{},mark:a,encoding:v,...f?{params:f}:{}}},n)}getFacetMappingAndLayout(t,n){const{row:r,column:i,facet:s}=t;if(r||i){s&&ht(O4t([...r?[mp]:[],...i?[gp]:[]]));const o={},a={};for(const u of[mp,gp]){const l=t[u];if(l){const{align:c,center:d,spacing:f,columns:h,...p}=l;o[u]=p;for(const m of["align","center","spacing"])l[m]!==void 0&&(a[m]??(a[m]={}),a[m][u]=l[m])}}return{facetMapping:o,layout:a}}else{const{align:o,center:a,spacing:u,columns:l,...c}=s;return{facetMapping:M$t(c,n.repeater),layout:{...o?{align:o}:{},...a?{center:a}:{},...u?{spacing:u}:{},...l?{columns:l}:{}}}}}mapLayer(t,{parentEncoding:n,parentProjection:r,...i}){const{encoding:s,projection:o,...a}=t,u={...i,parentEncoding:Jce({parentEncoding:n,encoding:s,layer:!0}),parentProjection:Zce({parentProjection:r,projection:o})};return super.mapLayer({...a,...t.name?{name:[u.repeaterPrefix,t.name].filter(l=>l).join("_")}:{}},u)}}function Jce({parentEncoding:e,encoding:t={},layer:n}){let r={};if(e){const i=new Set([...at(e),...at(t)]);for(const s of i){const o=t[s],a=e[s];if(bn(o)){const u={...a,...o};r[s]=u}else mA(o)?r[s]={...o,condition:{...a,...o.condition}}:o||o===null?r[s]=o:(n||md(a)||Wt(a)||bn(a)||Qe(a))&&(r[s]=a)}}else r=t;return!r||Mr(r)?void 0:r}function Zce(e){const{parentProjection:t,projection:n}=e;return t&&n&&ht(_4t({parentProjection:t,projection:n})),n??t}function aQ(e){return ct(e,"filter")}function B$t(e){return ct(e,"stop")}function gDe(e){return ct(e,"lookup")}function j$t(e){return ct(e,"data")}function z$t(e){return ct(e,"param")}function U$t(e){return ct(e,"pivot")}function V$t(e){return ct(e,"density")}function H$t(e){return ct(e,"quantile")}function q$t(e){return ct(e,"regression")}function W$t(e){return ct(e,"loess")}function G$t(e){return ct(e,"sample")}function Y$t(e){return ct(e,"window")}function K$t(e){return ct(e,"joinaggregate")}function X$t(e){return ct(e,"flatten")}function Q$t(e){return ct(e,"calculate")}function yDe(e){return ct(e,"bin")}function J$t(e){return ct(e,"impute")}function Z$t(e){return ct(e,"timeUnit")}function e5t(e){return ct(e,"aggregate")}function t5t(e){return ct(e,"stack")}function n5t(e){return ct(e,"fold")}function r5t(e){return ct(e,"extent")&&!ct(e,"density")&&!ct(e,"regression")}function i5t(e){return e.map(t=>aQ(t)?{filter:px(t.filter,IOt)}:t)}class s5t extends oQ{map(t,n){return n.emptySelections??(n.emptySelections={}),n.selectionPredicates??(n.selectionPredicates={}),t=ede(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=ede(t,n),t.encoding){const r={};for(const[i,s]of W0(t.encoding))r[i]=bDe(s,n);t={...t,encoding:r}}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){const{selection:r,...i}=t;return r?{...i,params:W0(r).map(([s,o])=>{const{init:a,bind:u,empty:l,...c}=o;c.type==="single"?(c.type="point",c.toggle=!1):c.type==="multi"&&(c.type="point"),n.emptySelections[s]=l!=="none";for(const d of Oo(n.selectionPredicates[s]??{}))d.empty=l!=="none";return{name:s,value:a,select:c,bind:u}})}:t}}function ede(e,t){const{transform:n,...r}=e;if(n){const i=n.map(s=>{if(aQ(s))return{filter:gz(s,t)};if(yDe(s)&&pb(s.bin))return{...s,bin:vDe(s.bin)};if(gDe(s)){const{selection:o,...a}=s.from;return o?{...s,from:{param:o,...a}}:s}return s});return{...r,transform:i}}return e}function bDe(e,t){var r,i;const n=hn(e);if(gt(n)&&pb(n.bin)&&(n.bin=vDe(n.bin)),bb(n)&&((i=(r=n.scale)==null?void 0:r.domain)!=null&&i.selection)){const{selection:s,...o}=n.scale.domain;n.scale.domain={...o,...s?{param:s}:{}}}if(pA(n))if(Qe(n.condition))n.condition=n.condition.map(s=>{const{selection:o,param:a,test:u,...l}=s;return a?s:{...l,test:gz(s,t)}});else{const{selection:s,param:o,test:a,...u}=bDe(n.condition,t);n.condition=o?n.condition:{...u,test:gz(n.condition,t)}}return n}function vDe(e){const t=e.extent;if(t!=null&&t.selection){const{selection:n,...r}=t;return{...e,extent:{...r,param:n}}}return e}function gz(e,t){const n=r=>px(r,i=>{var s;const o=t.emptySelections[i]??!0,a={param:i,empty:o};return(s=t.selectionPredicates)[i]??(s[i]=[]),t.selectionPredicates[i].push(a),a});return e.selection?n(e.selection):px(e.test||e.filter,r=>r.selection?n(r.selection):r)}class yz extends oQ{map(t,n){const r=n.selections??[];if(t.params&&!rm(t)){const i=[];for(const s of t.params)rQ(s)?r.push(s):i.push(s);t.params=i}return n.selections=r,super.map(t,n)}mapUnit(t,n){const r=n.selections;if(!r||!r.length)return t;const i=(n.path??[]).concat(t.name),s=[];for(const o of r)if(!o.views||!o.views.length)s.push(o);else for(const a of o.views)(It(a)&&(a===t.name||i.includes(a))||Qe(a)&&a.map(u=>i.indexOf(u)).every((u,l,c)=>u!==-1&&(l===0||u>c[l-1])))&&s.push(o);return s.length&&(t.params=s),t}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=yz.prototype[e];yz.prototype[e]=function(n,r){return t.call(this,n,o5t(n,r))}}function o5t(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function xDe(e,t){t===void 0&&(t=dDe(e.config));const n=c5t(e,t),{width:r,height:i}=e,s=d5t(n,{width:r,height:i,autosize:e.autosize},t);return{...n,...s?{autosize:s}:{}}}const a5t=new F$t,u5t=new s5t,l5t=new yz;function c5t(e,t={}){const n={config:t};return l5t.map(a5t.map(u5t.map(e,n),n),n)}function tde(e){return It(e)?{type:e}:e??{}}function d5t(e,t,n){let{width:r,height:i}=t;const s=rm(e)||$$(e),o={};s?r=="container"&&i=="container"?(o.type="fit",o.contains="padding"):r=="container"?(o.type="fit-x",o.contains="padding"):i=="container"&&(o.type="fit-y",o.contains="padding"):(r=="container"&&(ht(Sce("width")),r=void 0),i=="container"&&(ht(Sce("height")),i=void 0));const a={type:"pad",...o,...n?tde(n.autosize):{},...tde(e.autosize)};if(a.type==="fit"&&!s&&(ht(r4t),a.type="pad"),r=="container"&&!(a.type=="fit"||a.type=="fit-x")&&ht(Ace("width")),i=="container"&&!(a.type=="fit"||a.type=="fit-y")&&ht(Ace("height")),!sl(a,{type:"pad"}))return a}function f5t(e){return["fit","fit-x","fit-y"].includes(e)}function h5t(e){return e?`fit-${y$(e)}`:"fit"}const p5t=["background","padding"];function nde(e,t){const n={};for(const r of p5t)e&&e[r]!==void 0&&(n[r]=tl(e[r]));return t&&(n.params=e.params),n}class im{constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new im(hn(this.explicit),hn(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(t){return Wi(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:r}){n!==void 0&&this.set(t,n,r)}set(t,n,r){return delete this[r?"implicit":"explicit"][t],this[r?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:r}){n[t]!==void 0?this.set(t,n[t],!0):r[t]!==void 0&&this.set(t,r[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(const n of at(t.combine())){const r=t.getWithExplicit(n);this.setWithExplicit(n,r)}}}function tf(e){return{explicit:!0,value:e}}function Xu(e){return{explicit:!1,value:e}}function wDe(e){return(t,n,r,i)=>{const s=e(t.value,n.value);return s>0?t:s<0?n:M$(t,n,r,i)}}function M$(e,t,n,r){return e.explicit&&t.explicit&&ht(W4t(n,r,e.value,t.value)),e}function K0(e,t,n,r,i=M$){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:sl(e.value,t.value)?e:i(e,t,n,r)}class m5t extends im{constructor(t={},n={},r=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=r}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function mw(e){return ct(e,"url")}function RC(e){return ct(e,"values")}function EDe(e){return ct(e,"name")&&!mw(e)&&!RC(e)&&!x0(e)}function x0(e){return e&&(_De(e)||TDe(e)||uQ(e))}function _De(e){return ct(e,"sequence")}function TDe(e){return ct(e,"sphere")}function uQ(e){return ct(e,"graticule")}var _i;(function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup",e[e.PreFilterInvalid=5]="PreFilterInvalid",e[e.PostFilterInvalid=6]="PostFilterInvalid"})(_i||(_i={}));function CDe({invalid:e,isPath:t}){switch(xRe(e,{isPath:t})){case"filter":return{marks:"exclude-invalid-values",scales:"exclude-invalid-values"};case"break-paths-show-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"include-invalid-values"};case"break-paths-filter-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"exclude-invalid-values"};case"show":return{marks:"include-invalid-values",scales:"include-invalid-values"}}}function g5t(e){const{marks:t,scales:n}=CDe(e);return t===n?_i.Main:n==="include-invalid-values"?_i.PreFilterInvalid:_i.PostFilterInvalid}class Pr{constructor(t,n){this.debugName=n,this._children=[],this._parent=null,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){ht(x4t);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const i of this._children)i.parent=t;this._children=[],t.removeChild(this);const r=t.parent.removeChild(t);this._parent=n,n.addChild(this,r),t.parent=this}}class Au extends Pr{clone(){const t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}constructor(t,n,r,i){super(t,n),this.type=r,this.refCounts=i,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${wIe()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}function FF(e){return e.as!==void 0}function rde(e){return`${e}_end`}class Rf extends Pr{clone(){return new Rf(null,hn(this.timeUnits))}constructor(t,n){super(t),this.timeUnits=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{const{field:a,timeUnit:u}=s;if(u){let l;if(yb(u)){if(wi(n)){const{mark:c,markDef:d,config:f}=n,h=Y0({fieldDef:s,markDef:d,config:f});(IC(c)||h)&&(l={timeUnit:to(u),field:a})}}else l={as:Ct(s,{forAs:!0}),field:a,timeUnit:u};if(wi(n)){const{mark:c,markDef:d,config:f}=n,h=Y0({fieldDef:s,markDef:d,config:f});IC(c)&&Gi(o)&&h!==.5&&(l.rectBandPosition=h)}l&&(i[zn(l)]=l)}return i},{});return Mr(r)?null:new Rf(t,r)}static makeFromTransform(t,n){const{timeUnit:r,...i}={...n},s=to(r),o={...i,timeUnit:s};return new Rf(t,{[zn(o)]:o})}merge(t){this.timeUnits={...this.timeUnits};for(const n in t.timeUnits)this.timeUnits[n]||(this.timeUnits[n]=t.timeUnits[n]);for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}removeFormulas(t){const n={};for(const[r,i]of W0(this.timeUnits)){const s=FF(i)?i.as:`${i.field}_end`;t.has(s)||(n[r]=i)}this.timeUnits=n}producedFields(){return new Set(Oo(this.timeUnits).map(t=>FF(t)?t.as:rde(t.field)))}dependentFields(){return new Set(Oo(this.timeUnits).map(t=>t.field))}hash(){return`TimeUnit ${zn(this.timeUnits)}`}assemble(){const t=[];for(const n of Oo(this.timeUnits)){const{rectBandPosition:r}=n,i=to(n.timeUnit);if(FF(n)){const{field:s,as:o}=n,{unit:a,utc:u,...l}=i,c=[o,`${o}_end`];t.push({field:oc(s),type:"timeunit",...a?{units:w$(a)}:{},...u?{timezone:"utc"}:{},...l,as:c}),t.push(...ide(c,r,i))}else if(n){const{field:s}=n,o=s.replaceAll("\\.","."),a=SDe({timeUnit:i,field:o}),u=rde(o);t.push({type:"formula",expr:a,as:u}),t.push(...ide([o,u],r,i))}}return t}}const L$="offsetted_rect_start",F$="offsetted_rect_end";function SDe({timeUnit:e,field:t,reverse:n}){const{unit:r,utc:i}=e,s=nRe(r),{part:o,step:a}=oRe(s,e.step);return`${i?"utcOffset":"timeOffset"}('${o}', ${Ar(t)}, ${n?-a:a})`}function ide([e,t],n,r){if(n!==void 0&&n!==.5){const i=Ar(e),s=Ar(t);return[{type:"formula",expr:sde([SDe({timeUnit:r,field:e,reverse:!0}),i],n+.5),as:`${e}_${L$}`},{type:"formula",expr:sde([i,s],n+.5),as:`${e}_${F$}`}]}return[]}function sde([e,t],n){return`${1-n} * ${e} + ${n} * ${t}`}const bA="_tuple_fields";class y5t{constructor(...t){this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const b5t={defined:()=>!0,parse:(e,t,n)=>{const r=t.name,i=t.project??(t.project=new y5t),s={},o={},a=new Set,u=(p,m)=>{const y=m==="visual"?p.channel:p.field;let v=fi(`${r}_${y}`);for(let b=1;a.has(v);b++)v=fi(`${r}_${y}_${b}`);return a.add(v),{[m]:v}},l=t.type,c=e.config.selection[l],d=n.value!==void 0?Rt(n.value):null;let{fields:f,encodings:h}=kt(n.select)?n.select:{};if(!f&&!h&&d){for(const p of d)if(kt(p))for(const m of at(p))DNt(m)?(h||(h=[])).push(m):l==="interval"?(ht(h4t),h=c.encodings):(f??(f=[])).push(m)}!f&&!h&&(h=c.encodings,"fields"in c&&(f=c.fields));for(const p of h??[]){const m=e.fieldDef(p);if(m){let y=m.field;if(m.aggregate){ht(i4t(p,m.aggregate));continue}else if(!y){ht(Ice(p));continue}if(m.timeUnit&&!yb(m.timeUnit)){y=e.vgField(p);const v={timeUnit:m.timeUnit,as:y,field:m.field};o[zn(v)]=v}if(!s[y]){const v=l==="interval"&&hh(p)&&pd(e.getScaleComponent(p).get("type"))?"R":m.bin?"R-RE":"E",b={field:y,channel:p,type:v,index:i.items.length};b.signals={...u(b,"data"),...u(b,"visual")},i.items.push(s[y]=b),i.hasField[y]=s[y],i.hasSelectionId=i.hasSelectionId||y===yd,AIe(p)?(b.geoChannel=p,b.channel=SIe(p),i.hasChannel[b.channel]=s[y]):i.hasChannel[p]=s[y]}}else ht(Ice(p))}for(const p of f??[]){if(i.hasField[p])continue;const m={type:"E",field:p,index:i.items.length};m.signals={...u(m,"data")},i.items.push(m),i.hasField[p]=m,i.hasSelectionId=i.hasSelectionId||p===yd}d&&(t.init=d.map(p=>i.items.map(m=>kt(p)?p[m.geoChannel||m.channel]!==void 0?p[m.geoChannel||m.channel]:p[m.field]:p))),Mr(o)||(i.timeUnit=new Rf(null,o))},signals:(e,t,n)=>{const r=t.name+bA;return n.filter(s=>s.name===r).length>0||t.project.hasSelectionId?n:n.concat({name:r,value:t.project.items.map(RDe)})}},ADe="_curr",yP="anim_value",Ov="anim_clock",bz="eased_anim_clock",kDe="min_extent",IDe="max_range_extent",BF="last_tick_at",jF="is_playing",v5t=1/60*1e3,x5t=(e,t)=>[{name:bz,update:Ov},{name:`${e}_domain`,init:`domain('${t}')`},{name:kDe,init:`extent(${e}_domain)[0]`},{name:IDe,init:`extent(range('${t}'))[1]`},{name:yP,update:`invert('${t}', ${bz})`}],w5t={defined:e=>e.type==="point",topLevelSignals:(e,t,n)=>(Df(t)&&(n=n.concat([{name:Ov,init:"0",on:[{events:{type:"timer",throttle:v5t},update:`${jF} ? (${Ov} + (now() - ${BF}) > ${IDe} ? 0 : ${Ov} + (now() - ${BF})) : ${Ov}`}]},{name:BF,init:"now()",on:[{events:[{signal:Ov},{signal:jF}],update:"now()"}]},{name:jF,init:"true"}])),n),signals:(e,t,n)=>{const r=t.name,i=r+bA,s=t.project,o="(item().isVoronoi ? datum.datum : datum)",a=Oo(e.component.selection??{}).reduce((c,d)=>d.type==="interval"?c.concat(d.name+yx):c,[]).map(c=>`indexof(item().mark.name, '${c}') < 0`).join(" && "),u=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${a?` && ${a}`:""}`;let l=`unit: ${Yy(e)}, `;if(t.project.hasSelectionId)l+=`${yd}: ${o}[${bt(yd)}]`;else if(Df(t))l+=`fields: ${i}, values: [${yP} ? ${yP} : ${kDe}]`;else{const c=s.items.map(d=>{const f=e.fieldDef(d.channel);return f!=null&&f.bin?`[${o}[${bt(e.vgField(d.channel,{}))}], ${o}[${bt(e.vgField(d.channel,{binSuffix:"end"}))}]]`:`${o}[${bt(d.field)}]`}).join(", ");l+=`fields: ${i}, values: [${c}]`}if(Df(t))return n.concat(x5t(t.name,e.scaleName(bg)),[{name:r+Fp,on:[{events:[{signal:bz},{signal:yP}],update:`{${l}}`,force:!0}]}]);{const c=t.events;return n.concat([{name:r+Fp,on:c?[{events:c,update:`${u} ? {${l}} : null`,force:!0}]:[]}])}}};function RDe(e){const{signals:t,hasLegend:n,index:r,...i}=e;return i.field=oc(i.field),i}function A1(e,t=!0,n=ga){if(Qe(e)){const r=e.map(i=>A1(i,t,n));return t?`[${r.join(", ")}]`:r}else if(gb(e))return n(t?_1(e):yOt(e));return t?n(Lr(e)):e}function E5t(e,t){for(const n of Oo(e.component.selection??{})){const r=n.name;let i=`${r}${Fp}, ${n.resolve==="global"?"true":`{unit: ${Yy(e)}}`}`;for(const s of j$)s.defined(n)&&(s.signals&&(t=s.signals(e,n,t)),s.modifyExpr&&(i=s.modifyExpr(e,n,i)));t.push({name:r+K5t,on:[{events:{signal:n.name+Fp},update:`modify(${bt(n.name+k1)}, ${i})`}]})}return lQ(t)}function _5t(e,t){if(e.component.selection&&at(e.component.selection).length){const n=bt(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:gg("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return lQ(t)}function T5t(e,t){let n=!1;for(const r of Oo(e.component.selection??{})){const i=r.name,s=bt(i+k1);if(t.filter(a=>a.name===i).length===0){const a=r.resolve==="global"?"union":r.resolve,u=r.type==="point"?", true, true)":")";t.push({name:r.name,update:`${GDe}(${s}, ${bt(a)}${u}`})}n=!0;for(const a of j$)a.defined(r)&&a.topLevelSignals&&(t=a.topLevelSignals(e,r,t))}return n&&t.filter(i=>i.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),lQ(t)}function C5t(e,t){const n=[],r=[],i=Yy(e,{escape:!1});for(const s of Oo(e.component.selection??{})){const o={name:s.name+k1};if(s.project.hasSelectionId&&(o.transform=[{type:"collect",sort:{field:yd}}]),s.init){const u=s.project.items.map(RDe);o.values=s.project.hasSelectionId?s.init.map(l=>({unit:i,[yd]:A1(l,!1)[0]})):s.init.map(l=>({unit:i,fields:u,values:A1(l,!1)}))}if([...n,...t].filter(u=>u.name===s.name+k1).length||n.push(o),Df(s)&&t.length){const u=e.lookupDataSource(e.getDataName(_i.Main)),l=t.find(d=>d.name===u),c=l.transform.find(d=>d.type==="filter"&&d.expr.includes("vlSelectionTest"));if(c){l.transform=l.transform.filter(f=>f!==c);const d={name:l.name+ADe,source:l.name,transform:[c]};r.push(d)}}}return n.concat(t,r)}function DDe(e,t){for(const n of Oo(e.component.selection??{}))for(const r of j$)r.defined(n)&&r.marks&&(t=r.marks(e,n,t));return t}function S5t(e,t){for(const n of e.children)wi(n)&&(t=DDe(n,t));return t}function A5t(e,t,n,r){const i=iPe(e,t.param,t);return{signal:pd(n.get("type"))&&Qe(r)&&r[0]>r[1]?`isValid(${i}) && reverse(${i})`:i}}function lQ(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}const bp={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{const n=t.scales=[];for(const r of t.project.items){const i=r.channel;if(!hh(i))continue;const s=e.getScaleComponent(i),o=s?s.get("type"):void 0;if(o=="sequential"&&ht(u4t),!s||!pd(o)){ht(a4t);continue}s.set("selectionExtent",{param:t.name,field:r.field},!0),n.push(r)}},topLevelSignals:(e,t,n)=>{const r=t.scales.filter(o=>n.filter(a=>a.name===o.signals.data).length===0);if(!e.parent||xz(e)||r.length===0)return n;const i=n.find(o=>o.name===t.name);let s=i.update;if(s.includes(GDe))i.update=`{${r.map(o=>`${bt(oc(o.field))}: ${o.signals.data}`).join(", ")}}`;else{for(const o of r){const a=`${bt(oc(o.field))}: ${o.signals.data}`;s.includes(a)||(s=`${s.substring(0,s.length-1)}, ${a}}`)}i.update=s}return n.concat(r.map(o=>({name:o.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!xz(e))for(const r of t.scales){const i=n.find(s=>s.name===r.signals.data);i.push="outer",delete i.value,delete i.update}return n}};function vz(e,t){return`domain(${bt(e.scaleName(t))})`}function xz(e){return e.parent&&RE(e.parent)&&(!e.parent.parent||xz(e.parent.parent))}const yx="_brush",PDe="_scale_trigger",U_="geo_interval_init_tick",NDe="_init",k5t="_center",I5t={defined:e=>e.type==="interval",parse:(e,t,n)=>{var r;if(e.hasProjection){const i={...kt(n.select)?n.select:{}};i.fields=[yd],i.encodings||(i.encodings=n.value?at(n.value):[Rd,Id]),n.select={type:"interval",...i}}if(t.translate&&!bp.defined(t)){const i=`!event.item || event.item.mark.name !== ${bt(t.name+yx)}`;for(const s of t.events){if(!s.between){ht(`${s} is not an ordered event stream for interval selections.`);continue}const o=Rt((r=s.between[0]).filter??(r.filter=[]));o.includes(i)||o.push(i)}}},signals:(e,t,n)=>{const r=t.name,i=r+Fp,s=Oo(t.project.hasChannel).filter(a=>a.channel===pi||a.channel===uo),o=t.init?t.init[0]:null;if(n.push(...s.reduce((a,u)=>a.concat(R5t(e,t,u,o&&o[u.index])),[])),e.hasProjection){const a=bt(e.projectionName()),u=e.projectionName()+k5t,{x:l,y:c}=t.project.hasChannel,d=l&&l.signals.visual,f=c&&c.signals.visual,h=l?o&&o[l.index]:`${u}[0]`,p=c?o&&o[c.index]:`${u}[1]`,m=_=>e.getSizeSignalRef(_).signal,y=`[[${d?d+"[0]":"0"}, ${f?f+"[0]":"0"}],[${d?d+"[1]":m("width")}, ${f?f+"[1]":m("height")}]]`;o&&(n.unshift({name:r+NDe,init:`[scale(${a}, [${l?h[0]:h}, ${c?p[0]:p}]), scale(${a}, [${l?h[1]:h}, ${c?p[1]:p}])]`}),(!l||!c)&&(n.find(C=>C.name===u)||n.unshift({name:u,update:`invert(${a}, [${m("width")}/2, ${m("height")}/2])`})));const v=`intersect(${y}, {markname: ${bt(e.getName("marks"))}}, unit.mark)`,b=`{unit: ${Yy(e)}}`,w=`vlSelectionTuples(${v}, ${b})`,E=s.map(_=>_.signals.visual);return n.concat({name:i,on:[{events:[...E.length?[{signal:E.join(" || ")}]:[],...o?[{signal:U_}]:[]],update:w}]})}else{if(!bp.defined(t)){const l=r+PDe,c=s.map(d=>{const f=d.channel,{data:h,visual:p}=d.signals,m=bt(e.scaleName(f)),y=e.getScaleComponent(f).get("type"),v=pd(y)?"+":"";return`(!isArray(${h}) || (${v}invert(${m}, ${p})[0] === ${v}${h}[0] && ${v}invert(${m}, ${p})[1] === ${v}${h}[1]))`});c.length&&n.push({name:l,value:{},on:[{events:s.map(d=>({scale:e.scaleName(d.channel)})),update:c.join(" && ")+` ? ${l} : {}`}]})}const a=s.map(l=>l.signals.data),u=`unit: ${Yy(e)}, fields: ${r+bA}, values`;return n.concat({name:i,...o?{init:`{${u}: ${A1(o)}}`}:{},...a.length?{on:[{events:[{signal:a.join(" || ")}],update:`${a.join(" && ")} ? {${u}: [${a}]} : null`}]}:{}})}},topLevelSignals:(e,t,n)=>(wi(e)&&e.hasProjection&&t.init&&(n.filter(i=>i.name===U_).length||n.unshift({name:U_,value:null,on:[{events:"timer{1}",update:`${U_} === null ? {} : ${U_}`}]})),n),marks:(e,t,n)=>{const r=t.name,{x:i,y:s}=t.project.hasChannel,o=i==null?void 0:i.signals.visual,a=s==null?void 0:s.signals.visual,u=`data(${bt(t.name+k1)})`;if(bp.defined(t)||!i&&!s)return n;const l={x:i!==void 0?{signal:`${o}[0]`}:{value:0},y:s!==void 0?{signal:`${a}[0]`}:{value:0},x2:i!==void 0?{signal:`${o}[1]`}:{field:{group:"width"}},y2:s!==void 0?{signal:`${a}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const y of at(l))l[y]=[{test:`${u}.length && ${u}[0].unit === ${Yy(e)}`,...l[y]},{value:0}];const{fill:c,fillOpacity:d,cursor:f,...h}=t.mark,p=at(h).reduce((y,v)=>(y[v]=[{test:[i!==void 0&&`${o}[0] !== ${o}[1]`,s!==void 0&&`${a}[0] !== ${a}[1]`].filter(b=>b).join(" && "),value:h[v]},{value:null}],y),{}),m=f??(t.translate?"move":null);return[{name:`${r+yx}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:c},fillOpacity:{value:d}},update:l}},...n,{name:r+yx,type:"rect",clip:!0,encode:{enter:{...m?{cursor:{value:m}}:{},fill:{value:"transparent"}},update:{...l,...p}}}]}};function R5t(e,t,n,r){const i=!e.hasProjection,s=n.channel,o=n.signals.visual,a=bt(i?e.scaleName(s):e.projectionName()),u=f=>`scale(${a}, ${f})`,l=e.getSizeSignalRef(s===pi?"width":"height").signal,c=`${s}(unit)`,d=t.events.reduce((f,h)=>[...f,{events:h.between[0],update:`[${c}, ${c}]`},{events:h,update:`[${o}[0], clamp(${c}, 0, ${l})]`}],[]);if(i){const f=n.signals.data,h=bp.defined(t),p=e.getScaleComponent(s),m=p?p.get("type"):void 0,y=r?{init:A1(r,!0,u)}:{value:[]};return d.push({events:{signal:t.name+PDe},update:pd(m)?`[${u(`${f}[0]`)}, ${u(`${f}[1]`)}]`:"[0, 0]"}),h?[{name:f,on:[]}]:[{name:o,...y,on:d},{name:f,...r?{init:A1(r)}:{},on:[{events:{signal:o},update:`${o}[0] === ${o}[1] ? null : invert(${a}, ${o})`}]}]}else{const f=s===pi?0:1,h=t.name+NDe,p=r?{init:`[${h}[0][${f}], ${h}[1][${f}]]`}:{value:[]};return[{name:o,...p,on:d}]}}function SE({model:e,channelDef:t,vgChannel:n,invalidValueRef:r,mainRefFn:i}){const s=pA(t)&&t.condition;let o=[];s&&(o=Rt(s).map(l=>{const c=i(l);if(y6t(l)){const{param:d,empty:f}=l;return{test:rPe(e,{param:d,empty:f}),...c}}else return{test:JN(e,l.test),...c}})),r!==void 0&&o.push(r);const a=i(t);return a!==void 0&&o.push(a),o.length>1||o.length===1&&o[0].test?{[n]:o}:o.length===1?{[n]:o[0]}:{}}function cQ(e,t="text"){const n=e.encoding[t];return SE({model:e,channelDef:n,vgChannel:t,mainRefFn:r=>B$(r,e.config),invalidValueRef:void 0})}function B$(e,t,n="datum"){if(e){if(md(e))return si(e.value);if(bn(e)){const{format:r,formatType:i}=qN(e);return HX({fieldOrDatumDef:e,format:r,formatType:i,expr:n,config:t})}}}function ODe(e,t={}){const{encoding:n,markDef:r,config:i,stack:s}=e,o=n.tooltip;if(Qe(o))return{tooltip:ode({tooltip:o},s,i,t)};{const a=t.reactiveGeom?"datum.datum":"datum";return SE({model:e,channelDef:o,vgChannel:"tooltip",mainRefFn:l=>{const c=B$(l,i,a);if(c)return c;if(l===null)return;let d=$r("tooltip",r,i);if(d===!0&&(d={content:"encoding"}),It(d))return{value:d};if(kt(d))return Wt(d)?d:d.content==="encoding"?ode(n,s,i,t):{signal:a}},invalidValueRef:void 0})}}function $De(e,t,n,{reactiveGeom:r}={}){const i={...n,...n.tooltipFormat},s=new Set,o=r?"datum.datum":"datum",a=[];function u(c,d){const f=hb(d),h=Wa(c)?c:{...c,type:e[f].type},p=h.title||YX(h,i),m=Rt(p).join(", ").replaceAll(/"/g,'\\"');let y;if(Gi(d)){const v=d==="x"?"x2":"y2",b=gd(e[v]);if(wo(h.bin)&&b){const w=Ct(h,{expr:o}),E=Ct(b,{expr:o}),{format:_,formatType:C}=qN(h);y=fA(w,E,_,C,i),s.add(v)}}if((Gi(d)||d===yc||d===kd)&&t&&t.fieldChannel===d&&t.offset==="normalize"){const{format:v,formatType:b}=qN(h);y=HX({fieldOrDatumDef:h,format:v,formatType:b,expr:o,config:i,normalizeStack:!0}).signal}y??(y=B$(h,i,o).signal),a.push({channel:d,key:m,value:y})}XX(e,(c,d)=>{gt(c)?u(c,d):I$(c)&&u(c.condition,d)});const l={};for(const{channel:c,key:d,value:f}of a)!s.has(c)&&!l[d]&&(l[d]=f);return l}function ode(e,t,n,{reactiveGeom:r}={}){const i=$De(e,t,n,{reactiveGeom:r}),s=W0(i).map(([o,a])=>`"${o}": ${a}`);return s.length>0?{signal:`{${s.join(", ")}}`}:void 0}function D5t(e){const{markDef:t,config:n}=e,r=$r("aria",t,n);return r===!1?{}:{...r?{aria:r}:{},...P5t(e),...N5t(e)}}function P5t(e){const{mark:t,markDef:n,config:r}=e;if(r.aria===!1)return{};const i=$r("ariaRoleDescription",n,r);return i!=null?{ariaRoleDescription:{value:i}}:Ot(e4t,t)?{}:{ariaRoleDescription:{value:t}}}function N5t(e){const{encoding:t,markDef:n,config:r,stack:i}=e,s=t.description;if(s)return SE({model:e,channelDef:s,vgChannel:"description",mainRefFn:u=>B$(u,e.config),invalidValueRef:void 0});const o=$r("description",n,r);if(o!=null)return{description:si(o)};if(r.aria===!1)return{};const a=$De(t,i,r);if(!Mr(a))return{description:{signal:W0(a).map(([u,l],c)=>`"${c>0?"; ":""}${u}: " + (${l})`).join(" + ")}}}function So(e,t,n={}){const{markDef:r,encoding:i,config:s}=t,{vgChannel:o}=n;let{defaultRef:a,defaultValue:u}=n;const l=i[e];a===void 0&&(u??(u=$r(e,r,s,{vgChannel:o,ignoreVgConfig:!pA(l)})),u!==void 0&&(a=si(u)));const c={markDef:r,config:s,scaleName:t.scaleName(e),scale:t.getScaleComponent(e)},d=ERe({...c,scaleChannel:e,channelDef:l});return SE({model:t,channelDef:l,vgChannel:o??e,invalidValueRef:d,mainRefFn:h=>VX({...c,channel:e,channelDef:h,stack:null,defaultRef:a})})}function MDe(e,t={filled:void 0}){const{markDef:n,encoding:r,config:i}=e,{type:s}=n,o=t.filled??$r("filled",n,i),a=$n(["bar","point","circle","square","geoshape"],s)?"transparent":void 0,u=$r(o===!0?"color":void 0,n,i,{vgChannel:"fill"})??i.mark[o===!0&&"color"]??a,l=$r(o===!1?"color":void 0,n,i,{vgChannel:"stroke"})??i.mark[o===!1&&"color"],c=o?"fill":"stroke",d={...u?{fill:si(u)}:{},...l?{stroke:si(l)}:{}};return n.color&&(o?n.fill:n.stroke)&&ht(GIe("property",{fill:"fill"in n,stroke:"stroke"in n})),{...d,...So("color",e,{vgChannel:c,defaultValue:o?u:l}),...So("fill",e,{defaultValue:r.fill?u:void 0}),...So("stroke",e,{defaultValue:r.stroke?l:void 0})}}function O5t(e){const{encoding:t,mark:n}=e,r=t.order;return!Tg(n)&&md(r)?SE({model:e,channelDef:r,vgChannel:"zindex",mainRefFn:i=>si(i.value),invalidValueRef:void 0}):{}}function gw({channel:e,markDef:t,encoding:n={},model:r,bandPosition:i}){const s=`${e}Offset`,o=t[s],a=n[s];if((s==="xOffset"||s==="yOffset")&&a)return{offsetType:"encoding",offset:VX({channel:s,channelDef:a,markDef:t,config:r==null?void 0:r.config,scaleName:r.scaleName(s),scale:r.getScaleComponent(s),stack:null,defaultRef:si(o),bandPosition:i})};const u=t[s];return u?{offsetType:"visual",offset:u}:{}}function Ba(e,t,{defaultPos:n,vgChannel:r}){const{encoding:i,markDef:s,config:o,stack:a}=t,u=i[e],l=i[fh(e)],c=t.scaleName(e),d=t.getScaleComponent(e),{offset:f,offsetType:h}=gw({channel:e,markDef:s,encoding:i,model:t,bandPosition:.5}),p=dQ({model:t,defaultPos:n,channel:e,scaleName:c,scale:d}),m=!u&&Gi(e)&&(i.latitude||i.longitude)?{field:t.getName(e)}:$5t({channel:e,channelDef:u,channel2Def:l,markDef:s,config:o,scaleName:c,scale:d,stack:a,offset:f,defaultRef:p,bandPosition:h==="encoding"?0:void 0});return m?{[r||e]:m}:void 0}function $5t(e){const{channel:t,channelDef:n,scaleName:r,stack:i,offset:s,markDef:o}=e;if(bn(n)&&i&&t===i.fieldChannel){if(gt(n)){let a=n.bandPosition;if(a===void 0&&o.type==="text"&&(t==="radius"||t==="theta")&&(a=.5),a!==void 0)return UN({scaleName:r,fieldOrDatumDef:n,startSuffix:"start",bandPosition:a,offset:s})}return Wy(n,r,{suffix:"end"},{offset:s})}return UX(e)}function dQ({model:e,defaultPos:t,channel:n,scaleName:r,scale:i}){const{markDef:s,config:o}=e;return()=>{const a=hb(n),u=G0(n),l=$r(n,s,o,{vgChannel:u});if(l!==void 0)return y2(n,l);switch(t){case"zeroOrMin":return ade({scaleName:r,scale:i,mode:"zeroOrMin",mainChannel:a,config:o});case"zeroOrMax":return ade({scaleName:r,scale:i,mode:{zeroOrMax:{widthSignal:e.width.signal,heightSignal:e.height.signal}},mainChannel:a,config:o});case"mid":return{...e[$u(n)],mult:.5}}}}function ade({mainChannel:e,config:t,...n}){const r=wRe(n),{mode:i}=n;if(r)return r;switch(e){case"radius":{if(i==="zeroOrMin")return{value:0};const{widthSignal:s,heightSignal:o}=i.zeroOrMax;return{signal:`min(${s},${o})/2`}}case"theta":return i==="zeroOrMin"?{value:0}:{signal:"2*PI"};case"x":return i==="zeroOrMin"?{value:0}:{field:{group:"width"}};case"y":return i==="zeroOrMin"?{field:{group:"height"}}:{value:0}}}const M5t={left:"x",center:"xc",right:"x2"},L5t={top:"y",middle:"yc",bottom:"y2"};function LDe(e,t,n,r="middle"){if(e==="radius"||e==="theta")return G0(e);const i=e==="x"?"align":"baseline",s=$r(i,t,n);let o;return Wt(s)?(ht($4t(i)),o=void 0):o=s,e==="x"?M5t[o||(r==="top"?"left":"center")]:L5t[o||r]}function KN(e,t,{defaultPos:n,defaultPos2:r,range:i}){return i?FDe(e,t,{defaultPos:n,defaultPos2:r}):Ba(e,t,{defaultPos:n})}function FDe(e,t,{defaultPos:n,defaultPos2:r}){const{markDef:i,config:s}=t,o=fh(e),a=$u(e),u=F5t(t,r,o),l=u[a]?LDe(e,i,s):G0(e);return{...Ba(e,t,{defaultPos:n,vgChannel:l}),...u}}function F5t(e,t,n){const{encoding:r,mark:i,markDef:s,stack:o,config:a}=e,u=hb(n),l=$u(n),c=G0(n),d=r[u],f=e.scaleName(u),h=e.getScaleComponent(u),{offset:p}=n in r||n in s?gw({channel:n,markDef:s,encoding:r,model:e}):gw({channel:u,markDef:s,encoding:r,model:e});if(!d&&(n==="x2"||n==="y2")&&(r.latitude||r.longitude)){const y=$u(n),v=e.markDef[y];return v!=null?{[y]:{value:v}}:{[c]:{field:e.getName(n)}}}const m=B5t({channel:n,channelDef:d,channel2Def:r[n],markDef:s,config:a,scaleName:f,scale:h,stack:o,offset:p,defaultRef:void 0});return m!==void 0?{[c]:m}:LI(n,s)||LI(n,{[n]:az(n,s,a.style),[l]:az(l,s,a.style)})||LI(n,a[i])||LI(n,a.mark)||{[c]:dQ({model:e,defaultPos:t,channel:n,scaleName:f,scale:h})()}}function B5t({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:u,defaultRef:l}){return bn(t)&&a&&e.charAt(0)===a.fieldChannel.charAt(0)?Wy(t,s,{suffix:"start"},{offset:u}):UX({channel:e,channelDef:n,scaleName:s,scale:o,stack:a,markDef:r,config:i,offset:u,defaultRef:l})}function LI(e,t){const n=$u(e),r=G0(e);if(t[r]!==void 0)return{[r]:y2(e,t[r])};if(t[e]!==void 0)return{[r]:y2(e,t[e])};if(t[n]){const i=t[n];if(C1(i))ht(I4t(n));else return{[n]:y2(e,i)}}}function Lp(e,t){const{config:n,encoding:r,markDef:i}=e,s=i.type,o=fh(t),a=$u(t),u=r[t],l=r[o],c=e.getScaleComponent(t),d=c?c.get("type"):void 0,f=i.orient,h=r[a]??r.size??$r("size",i,n,{vgChannel:a}),p=DIe(t),m=s==="bar"&&(t==="x"?f==="vertical":f==="horizontal")||s==="tick"&&(t==="y"?f==="vertical":f==="horizontal");return gt(u)&&(Qr(u.bin)||wo(u.bin)||u.timeUnit&&!l)&&!(h&&!C1(h))&&!r[p]&&!io(d)?U5t({fieldDef:u,fieldDef2:l,channel:t,model:e}):(bn(u)&&io(d)||m)&&!l?z5t(u,t,e):FDe(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function j5t(e,t,n,r,i,s,o){if(C1(i))if(n){const u=n.get("type");if(u==="band"){let l=`bandwidth('${t}')`;i.band!==1&&(l=`${i.band} * ${l}`);const c=Yf("minBandSize",{type:o},r);return{signal:c?`max(${Zc(c)}, ${l})`:l}}else i.band!==1&&(ht(B4t(u)),i=void 0)}else return{mult:i.band,field:{group:e}};else{if(Wt(i))return i;if(i)return{value:i}}if(n){const u=n.get("range");if(mb(u)&&pr(u.step))return{value:u.step-2}}if(!s){const{bandPaddingInner:u,barBandPaddingInner:l,rectBandPaddingInner:c,tickBandPaddingInner:d}=r.scale,f=Wi(u,o==="tick"?d:o==="bar"?l:c);if(Wt(f))return{signal:`(1 - (${f.signal})) * ${e}`};if(pr(f))return{signal:`${1-f} * ${e}`}}return{value:pz(r.view,e)-2}}function z5t(e,t,n){var R,N;const{markDef:r,encoding:i,config:s,stack:o}=n,a=r.orient,u=n.scaleName(t),l=n.getScaleComponent(t),c=$u(t),d=fh(t),f=DIe(t),h=n.scaleName(f),p=n.getScaleComponent(mX(t)),m=r.type==="tick"||a==="horizontal"&&t==="y"||a==="vertical"&&t==="x";let y;(i.size||r.size)&&(m?y=So("size",n,{vgChannel:c,defaultRef:si(r.size)}):ht(V4t(r.type)));const v=!!y,b=IRe({channel:t,fieldDef:e,markDef:r,config:s,scaleType:(R=l||p)==null?void 0:R.get("type"),useVlSizeChannel:m});y=y||{[c]:j5t(c,h||u,p||l,s,b,!!e,r.type)};const w=((N=l||p)==null?void 0:N.get("type"))==="band"&&C1(b)&&!v?"top":"middle",E=LDe(t,r,s,w),_=E==="xc"||E==="yc",{offset:C,offsetType:S}=gw({channel:t,markDef:r,encoding:i,model:n,bandPosition:_?.5:0}),k=UX({channel:t,channelDef:e,markDef:r,config:s,scaleName:u,scale:l,stack:o,offset:C,defaultRef:dQ({model:n,defaultPos:"mid",channel:t,scaleName:u,scale:l}),bandPosition:_?S==="encoding"?0:.5:Wt(b)?{signal:`(1-${b})/2`}:C1(b)?(1-b.band)/2:0});if(c)return{[E]:k,...y};{const O=G0(d),F=y[c],$=C?{...F,offset:C}:F;return{[E]:k,[O]:Qe(k)?[k[0],{...k[1],offset:$}]:{...k,offset:$}}}}function ude(e,t,n,r,i,s,o){if(CIe(e))return 0;const a=e==="x"||e==="y2",u=a?-t/2:t/2;if(Wt(n)||Wt(i)||Wt(r)||s){const l=Zc(n),c=Zc(i),d=Zc(r),f=Zc(s),p=s?`(${o} < ${f} ? ${a?"":"-"}0.5 * (${f} - (${o})) : ${u})`:u,m=d?`${d} + `:"",y=l?`(${l} ? -1 : 1) * `:"",v=c?`(${c} + ${p})`:p;return{signal:m+y+v}}else return i=i||0,r+(n?-i-u:+i+u)}function U5t({fieldDef:e,fieldDef2:t,channel:n,model:r}){var N;const{config:i,markDef:s,encoding:o}=r,a=r.getScaleComponent(n),u=r.scaleName(n),l=a?a.get("type"):void 0,c=a.get("reverse"),d=IRe({channel:n,fieldDef:e,markDef:s,config:i,scaleType:l}),f=(N=r.component.axes[n])==null?void 0:N[0],h=(f==null?void 0:f.get("translate"))??.5,p=Gi(n)?$r("binSpacing",s,i)??0:0,m=fh(n),y=G0(n),v=G0(m),b=Yf("minBandSize",s,i),{offset:w}=gw({channel:n,markDef:s,encoding:o,model:r,bandPosition:0}),{offset:E}=gw({channel:m,markDef:s,encoding:o,model:r,bandPosition:0}),_=d6t({fieldDef:e,scaleName:u}),C=ude(n,p,c,h,w,b,_),S=ude(m,p,c,h,E??w,b,_),k=Wt(d)?{signal:`(1-${d.signal})/2`}:C1(d)?(1-d.band)/2:.5,R=Y0({fieldDef:e,fieldDef2:t,markDef:s,config:i});if(Qr(e.bin)||e.timeUnit){const O=e.timeUnit&&R!==.5;return{[v]:lde({fieldDef:e,scaleName:u,bandPosition:k,offset:S,useRectOffsetField:O}),[y]:lde({fieldDef:e,scaleName:u,bandPosition:Wt(k)?{signal:`1-${k.signal}`}:1-k,offset:C,useRectOffsetField:O})}}else if(wo(e.bin)){const O=Wy(e,u,{},{offset:S});if(gt(t))return{[v]:O,[y]:Wy(t,u,{},{offset:C})};if(pb(e.bin)&&e.bin.step)return{[v]:O,[y]:{signal:`scale("${u}", ${Ct(e,{expr:"datum"})} + ${e.bin.step})`,offset:C}}}ht(XIe(m))}function lde({fieldDef:e,scaleName:t,bandPosition:n,offset:r,useRectOffsetField:i}){return UN({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:r,...i?{startSuffix:L$,endSuffix:F$}:{}})}const V5t=new Set(["aria","width","height"]);function bc(e,t){const{fill:n=void 0,stroke:r=void 0}=t.color==="include"?MDe(e):{};return{...H5t(e.markDef,t),...cde("fill",n),...cde("stroke",r),...So("opacity",e),...So("fillOpacity",e),...So("strokeOpacity",e),...So("strokeWidth",e),...So("strokeDash",e),...O5t(e),...ODe(e),...cQ(e,"href"),...D5t(e)}}function cde(e,t){return t?{[e]:t}:{}}function H5t(e,t){return ZNt.reduce((n,r)=>(!V5t.has(r)&&ct(e,r)&&t[r]!=="ignore"&&(n[r]=si(e[r])),n),{})}function fQ(e){const{config:t,markDef:n}=e,r=new Set;if(e.forEachFieldDef((i,s)=>{var l;let o;if(!hh(s)||!(o=e.getScaleType(s)))return;const a=b$(i.aggregate),u=zX({scaleChannel:s,markDef:n,config:t,scaleType:o,isCountAggregate:a});if(u6t(u)){const c=e.vgField(s,{expr:"datum",binSuffix:(l=e.stack)!=null&&l.impute?"mid":void 0});c&&r.add(c)}}),r.size>0)return{defined:{signal:[...r].map(s=>E$(s,!0)).join(" && ")}}}function dde(e,t){if(t!==void 0)return{[e]:si(t)}}const zF="voronoi",BDe={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(zF)},marks:(e,t,n)=>{const{x:r,y:i}=t.project.hasChannel,s=e.mark;if(Tg(s))return ht(s4t(s)),n;const o={name:e.getName(zF),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...ODe(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:r||!i?"datum.datum.x || 0":"0"},y:{expr:i||!r?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let a=0,u=!1;return n.forEach((l,c)=>{const d=l.name??"";d===e.component.mark[0].name?a=c:d.includes(zF)&&(u=!0)}),u||n.splice(a+1,0,o),n}},jDe={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!nQ(e.bind),parse:(e,t,n)=>YDe(t,n),topLevelSignals:(e,t,n)=>{const r=t.name,i=t.project,s=t.bind,o=t.init&&t.init[0],a=BDe.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach((u,l)=>{const c=fi(`${r}_${u.field}`);n.filter(f=>f.name===c).length||n.unshift({name:c,...o?{init:A1(o[l])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${a}[${bt(u.field)}] : null`}]:[],bind:s[u.field]??s[u.channel]??s})}),n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.find(l=>l.name===r+Fp),o=r+bA,a=i.items.map(l=>fi(`${r}_${l.field}`)),u=a.map(l=>`${l} !== null`).join(" && ");return a.length&&(s.update=`${u} ? {fields: ${o}, values: [${a.join(", ")}]} : null`),delete s.value,delete s.on,n}},XN="_toggle",zDe={defined:e=>e.type==="point"&&!Df(e)&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+XN,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+Fp,r=t.name+XN;return`${r} ? null : ${n}, `+(t.resolve==="global"?`${r} ? null : true, `:`${r} ? null : {unit: ${Yy(e)}}, `)+`${r} ? ${n} : null`}},q5t={defined:e=>e.clear!==void 0&&e.clear!==!1&&!Df(e),parse:(e,t)=>{t.clear&&(t.clear=It(t.clear)?gg(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(jDe.defined(t))for(const r of t.project.items){const i=n.findIndex(s=>s.name===fi(`${t.name}_${r.field}`));i!==-1&&n[i].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function r(i,s){i!==-1&&n[i].on&&n[i].on.push({events:t.clear,update:s})}if(t.type==="interval")for(const i of t.project.items){const s=n.findIndex(o=>o.name===i.signals.visual);if(r(s,"[0, 0]"),s===-1){const o=n.findIndex(a=>a.name===i.signals.data);r(o,"null")}}else{let i=n.findIndex(s=>s.name===t.name+Fp);r(i,"null"),zDe.defined(t)&&(i=n.findIndex(s=>s.name===t.name+XN),r(i,"false"))}return n}},UDe={defined:e=>{const t=e.resolve==="global"&&e.bind&&nQ(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==yd;return t&&!n&&ht(l4t),t&&n},parse:(e,t,n)=>{const r=hn(n);if(r.select=It(r.select)?{type:r.select,toggle:t.toggle}:{...r.select,toggle:t.toggle},YDe(t,r),kt(n.select)&&(n.select.on||n.select.clear)){const o='event.item && indexof(event.item.mark.role, "legend") < 0';for(const a of t.events)a.filter=Rt(a.filter??[]),a.filter.includes(o)||a.filter.push(o)}const i=$F(t.bind)?t.bind.legend:"click",s=It(i)?gg(i,"view"):Rt(i);t.bind={legend:{merge:s}}},topLevelSignals:(e,t,n)=>{const r=t.name,i=$F(t.bind)&&t.bind.legend,s=o=>a=>{const u=hn(a);return u.markname=o,u};for(const o of t.project.items){if(!o.hasLegend)continue;const a=`${fi(o.field)}_legend`,u=`${r}_${a}`;if(n.filter(c=>c.name===u).length===0){const c=i.merge.map(s(`${a}_symbols`)).concat(i.merge.map(s(`${a}_labels`))).concat(i.merge.map(s(`${a}_entries`)));n.unshift({name:u,...t.init?{}:{value:null},on:[{events:c,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:`!event.item || !datum ? null : ${u}`,force:!0}]})}}return n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.find(f=>f.name===r+Fp),o=r+bA,a=i.items.filter(f=>f.hasLegend).map(f=>fi(`${r}_${fi(f.field)}_legend`)),l=`${a.map(f=>`${f} !== null`).join(" && ")} ? {fields: ${o}, values: [${a.join(", ")}]} : null`;t.events&&a.length>0?s.on.push({events:a.map(f=>({signal:f})),update:l}):a.length>0&&(s.update=l,delete s.value,delete s.on);const c=n.find(f=>f.name===r+XN),d=$F(t.bind)&&t.bind.legend;return c&&(t.events?c.on.push({...c.on[0],events:d}):c.on[0].events=d),n}};function W5t(e,t,n){var i;const r=(i=e.fieldDef(t))==null?void 0:i.field;for(const s of Oo(e.component.selection??{})){const o=s.project.hasField[r]??s.project.hasChannel[t];if(o&&UDe.defined(s)){const a=n.get("selections")??[];a.push(s.name),n.set("selections",a,!1),o.hasLegend=!0}}}const VDe="_translate_anchor",HDe="_translate_delta",G5t={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{const r=t.name,i=bp.defined(t),s=r+VDe,{x:o,y:a}=t.project.hasChannel;let u=gg(t.translate,"scope");return i||(u=u.map(l=>(l.between[0].markname=r+yx,l))),n.push({name:s,value:{},on:[{events:u.map(l=>l.between[0]),update:"{x: x(unit), y: y(unit)"+(o!==void 0?`, extent_x: ${i?vz(e,pi):`slice(${o.signals.visual})`}`:"")+(a!==void 0?`, extent_y: ${i?vz(e,uo):`slice(${a.signals.visual})`}`:"")+"}"}]},{name:r+HDe,value:{},on:[{events:u,update:`{x: ${s}.x - x(unit), y: ${s}.y - y(unit)}`}]}),o!==void 0&&fde(e,t,o,"width",n),a!==void 0&&fde(e,t,a,"height",n),n}};function fde(e,t,n,r,i){const s=t.name,o=s+VDe,a=s+HDe,u=n.channel,l=bp.defined(t),c=i.find(_=>_.name===n.signals[l?"data":"visual"]),d=e.getSizeSignalRef(r).signal,f=e.getScaleComponent(u),h=f&&f.get("type"),p=f&&f.get("reverse"),m=l?u===pi?p?"":"-":p?"-":"":"",y=`${o}.extent_${u}`,v=`${m}${a}.${u} / ${l?`${d}`:`span(${y})`}`,b=!l||!f?"panLinear":h==="log"?"panLog":h==="symlog"?"panSymlog":h==="pow"?"panPow":"panLinear",w=l?h==="pow"?`, ${f.get("exponent")??1}`:h==="symlog"?`, ${f.get("constant")??1}`:"":"",E=`${b}(${y}, ${v}${w})`;c.on.push({events:{signal:a},update:l?E:`clampRange(${E}, 0, ${d})`})}const qDe="_zoom_anchor",WDe="_zoom_delta",Y5t={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{const r=t.name,i=bp.defined(t),s=r+WDe,{x:o,y:a}=t.project.hasChannel,u=bt(e.scaleName(pi)),l=bt(e.scaleName(uo));let c=gg(t.zoom,"scope");return i||(c=c.map(d=>(d.markname=r+yx,d))),n.push({name:r+qDe,on:[{events:c,update:i?"{"+[u?`x: invert(${u}, x(unit))`:"",l?`y: invert(${l}, y(unit))`:""].filter(d=>d).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:s,on:[{events:c,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),o!==void 0&&hde(e,t,o,"width",n),a!==void 0&&hde(e,t,a,"height",n),n}};function hde(e,t,n,r,i){const s=t.name,o=n.channel,a=bp.defined(t),u=i.find(b=>b.name===n.signals[a?"data":"visual"]),l=e.getSizeSignalRef(r).signal,c=e.getScaleComponent(o),d=c&&c.get("type"),f=a?vz(e,o):u.name,h=s+WDe,p=`${s}${qDe}.${o}`,m=!a||!c?"zoomLinear":d==="log"?"zoomLog":d==="symlog"?"zoomSymlog":d==="pow"?"zoomPow":"zoomLinear",y=a?d==="pow"?`, ${c.get("exponent")??1}`:d==="symlog"?`, ${c.get("constant")??1}`:"":"",v=`${m}(${f}, ${p}, ${h}${y})`;u.on.push({events:{signal:h},update:a?v:`clampRange(${v}, 0, ${l})`})}const k1="_store",Fp="_tuple",K5t="_modify",GDe="vlSelectionResolve",j$=[w5t,I5t,b5t,zDe,jDe,bp,UDe,q5t,G5t,Y5t,BDe];function X5t(e){let t=e.parent;for(;t&&!dl(t);)t=t.parent;return t}function Yy(e,{escape:t}={escape:!0}){let n=t?bt(e.name):e.name;const r=X5t(e);if(r){const{facet:i}=r;for(const s of Kl)i[s]&&(n+=` + '__facet_${s}_' + (facet[${bt(r.vgField(s))}])`)}return n}function hQ(e){return Oo(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1)}function YDe(e,t){(It(t.select)||!t.select.on)&&delete e.events,(It(t.select)||!t.select.clear)&&delete e.clear,(It(t.select)||!t.select.toggle)&&delete e.toggle}function Df(e){var t;return(t=e.events)==null?void 0:t.find(n=>"type"in n&&n.type==="timer")}const Q5t="RawCode",J5t="Literal",Z5t="Property",eMt="Identifier",tMt="ArrayExpression",nMt="BinaryExpression",rMt="CallExpression",iMt="ConditionalExpression",sMt="LogicalExpression",oMt="MemberExpression",aMt="ObjectExpression",uMt="UnaryExpression";function Pd(e){this.type=e}Pd.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=lMt(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};function lMt(e){switch(e.type){case tMt:return e.elements;case nMt:case sMt:return[e.left,e.right];case rMt:return[e.callee].concat(e.arguments);case iMt:return[e.test,e.consequent,e.alternate];case oMt:return[e.object,e.property];case aMt:return e.properties;case Z5t:return[e.key,e.value];case uMt:return[e.argument];case eMt:case J5t:case Q5t:default:return[]}}var mh,qt,Ge,ha,Rr,z$=1,vA=2,I1=3,Cg=4,U$=5,vb=6,mu=7,xA=8,cMt=9;mh={};mh[z$]="Boolean";mh[vA]="<end>";mh[I1]="Identifier";mh[Cg]="Keyword";mh[U$]="Null";mh[vb]="Numeric";mh[mu]="Punctuator";mh[xA]="String";mh[cMt]="RegularExpression";var dMt="ArrayExpression",fMt="BinaryExpression",hMt="CallExpression",pMt="ConditionalExpression",KDe="Identifier",mMt="Literal",gMt="LogicalExpression",yMt="MemberExpression",bMt="ObjectExpression",vMt="Property",xMt="UnaryExpression",eo="Unexpected token %0",wMt="Unexpected number",EMt="Unexpected string",_Mt="Unexpected identifier",TMt="Unexpected reserved word",CMt="Unexpected end of input",wz="Invalid regular expression",UF="Invalid regular expression: missing /",XDe="Octal literals are not allowed in strict mode.",SMt="Duplicate data property in object literal not allowed in strict mode",Ro="ILLEGAL",DC="Disabled.",AMt=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),kMt=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function V$(e,t){if(!e)throw new Error("ASSERT: "+t)}function Vh(e){return e>=48&&e<=57}function pQ(e){return"0123456789abcdefABCDEF".includes(e)}function b2(e){return"01234567".includes(e)}function IMt(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(e)}function PC(e){return e===10||e===13||e===8232||e===8233}function wA(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&AMt.test(String.fromCharCode(e))}function QN(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&kMt.test(String.fromCharCode(e))}const RMt={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function QDe(){for(;Ge<ha;){const e=qt.charCodeAt(Ge);if(IMt(e)||PC(e))++Ge;else break}}function Ez(e){var t,n,r,i=0;for(n=e==="u"?4:2,t=0;t<n;++t)Ge<ha&&pQ(qt[Ge])?(r=qt[Ge++],i=i*16+"0123456789abcdef".indexOf(r.toLowerCase())):fr({},eo,Ro);return String.fromCharCode(i)}function DMt(){var e,t,n,r;for(e=qt[Ge],t=0,e==="}"&&fr({},eo,Ro);Ge<ha&&(e=qt[Ge++],!!pQ(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&fr({},eo,Ro),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,r=(t-65536&1023)+56320,String.fromCharCode(n,r))}function JDe(){var e,t;for(e=qt.charCodeAt(Ge++),t=String.fromCharCode(e),e===92&&(qt.charCodeAt(Ge)!==117&&fr({},eo,Ro),++Ge,e=Ez("u"),(!e||e==="\\"||!wA(e.charCodeAt(0)))&&fr({},eo,Ro),t=e);Ge<ha&&(e=qt.charCodeAt(Ge),!!QN(e));)++Ge,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),qt.charCodeAt(Ge)!==117&&fr({},eo,Ro),++Ge,e=Ez("u"),(!e||e==="\\"||!QN(e.charCodeAt(0)))&&fr({},eo,Ro),t+=e);return t}function PMt(){var e,t;for(e=Ge++;Ge<ha;){if(t=qt.charCodeAt(Ge),t===92)return Ge=e,JDe();if(QN(t))++Ge;else break}return qt.slice(e,Ge)}function NMt(){var e,t,n;return e=Ge,t=qt.charCodeAt(Ge)===92?JDe():PMt(),t.length===1?n=I1:RMt.hasOwnProperty(t)?n=Cg:t==="null"?n=U$:t==="true"||t==="false"?n=z$:n=I1,{type:n,value:t,start:e,end:Ge}}function VF(){var e=Ge,t=qt.charCodeAt(Ge),n,r=qt[Ge],i,s,o;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++Ge,{type:mu,value:String.fromCharCode(t),start:e,end:Ge};default:if(n=qt.charCodeAt(Ge+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return Ge+=2,{type:mu,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:Ge};case 33:case 61:return Ge+=2,qt.charCodeAt(Ge)===61&&++Ge,{type:mu,value:qt.slice(e,Ge),start:e,end:Ge}}}if(o=qt.substr(Ge,4),o===">>>=")return Ge+=4,{type:mu,value:o,start:e,end:Ge};if(s=o.substr(0,3),s===">>>"||s==="<<="||s===">>=")return Ge+=3,{type:mu,value:s,start:e,end:Ge};if(i=s.substr(0,2),r===i[1]&&"+-<>&|".includes(r)||i==="=>")return Ge+=2,{type:mu,value:i,start:e,end:Ge};if(i==="//"&&fr({},eo,Ro),"<>=!+-*%&|^/".includes(r))return++Ge,{type:mu,value:r,start:e,end:Ge};fr({},eo,Ro)}function OMt(e){let t="";for(;Ge<ha&&pQ(qt[Ge]);)t+=qt[Ge++];return t.length===0&&fr({},eo,Ro),wA(qt.charCodeAt(Ge))&&fr({},eo,Ro),{type:vb,value:parseInt("0x"+t,16),start:e,end:Ge}}function $Mt(e){let t="0"+qt[Ge++];for(;Ge<ha&&b2(qt[Ge]);)t+=qt[Ge++];return(wA(qt.charCodeAt(Ge))||Vh(qt.charCodeAt(Ge)))&&fr({},eo,Ro),{type:vb,value:parseInt(t,8),octal:!0,start:e,end:Ge}}function pde(){var e,t,n;if(n=qt[Ge],V$(Vh(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=Ge,e="",n!=="."){if(e=qt[Ge++],n=qt[Ge],e==="0"){if(n==="x"||n==="X")return++Ge,OMt(t);if(b2(n))return $Mt(t);n&&Vh(n.charCodeAt(0))&&fr({},eo,Ro)}for(;Vh(qt.charCodeAt(Ge));)e+=qt[Ge++];n=qt[Ge]}if(n==="."){for(e+=qt[Ge++];Vh(qt.charCodeAt(Ge));)e+=qt[Ge++];n=qt[Ge]}if(n==="e"||n==="E")if(e+=qt[Ge++],n=qt[Ge],(n==="+"||n==="-")&&(e+=qt[Ge++]),Vh(qt.charCodeAt(Ge)))for(;Vh(qt.charCodeAt(Ge));)e+=qt[Ge++];else fr({},eo,Ro);return wA(qt.charCodeAt(Ge))&&fr({},eo,Ro),{type:vb,value:parseFloat(e),start:t,end:Ge}}function MMt(){var e="",t,n,r,i,s=!1;for(t=qt[Ge],V$(t==="'"||t==='"',"String literal must starts with a quote"),n=Ge,++Ge;Ge<ha;)if(r=qt[Ge++],r===t){t="";break}else if(r==="\\")if(r=qt[Ge++],!r||!PC(r.charCodeAt(0)))switch(r){case"u":case"x":qt[Ge]==="{"?(++Ge,e+=DMt()):e+=Ez(r);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:b2(r)?(i="01234567".indexOf(r),i!==0&&(s=!0),Ge<ha&&b2(qt[Ge])&&(s=!0,i=i*8+"01234567".indexOf(qt[Ge++]),"0123".includes(r)&&Ge<ha&&b2(qt[Ge])&&(i=i*8+"01234567".indexOf(qt[Ge++]))),e+=String.fromCharCode(i)):e+=r;break}else r==="\r"&&qt[Ge]===`
`&&++Ge;else{if(PC(r.charCodeAt(0)))break;e+=r}return t!==""&&fr({},eo,Ro),{type:xA,value:e,octal:s,start:n,end:Ge}}function LMt(e,t){let n=e;t.includes("u")&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(r,i)=>{if(parseInt(i,16)<=1114111)return"x";fr({},wz)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{fr({},wz)}try{return new RegExp(e,t)}catch{return null}}function FMt(){var e,t,n,r,i;for(e=qt[Ge],V$(e==="/","Regular expression literal must start with a slash"),t=qt[Ge++],n=!1,r=!1;Ge<ha;)if(e=qt[Ge++],t+=e,e==="\\")e=qt[Ge++],PC(e.charCodeAt(0))&&fr({},UF),t+=e;else if(PC(e.charCodeAt(0)))fr({},UF);else if(n)e==="]"&&(n=!1);else if(e==="/"){r=!0;break}else e==="["&&(n=!0);return r||fr({},UF),i=t.substr(1,t.length-2),{value:i,literal:t}}function BMt(){var e,t,n;for(t="",n="";Ge<ha&&(e=qt[Ge],!!QN(e.charCodeAt(0)));)++Ge,e==="\\"&&Ge<ha?fr({},eo,Ro):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&fr({},wz,n),{value:n,literal:t}}function jMt(){var e,t,n,r;return Rr=null,QDe(),e=Ge,t=FMt(),n=BMt(),r=LMt(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:Ge}}function zMt(e){return e.type===I1||e.type===Cg||e.type===z$||e.type===U$}function ZDe(){if(QDe(),Ge>=ha)return{type:vA,start:Ge,end:Ge};const e=qt.charCodeAt(Ge);return wA(e)?NMt():e===40||e===41||e===59?VF():e===39||e===34?MMt():e===46?Vh(qt.charCodeAt(Ge+1))?pde():VF():Vh(e)?pde():VF()}function xu(){const e=Rr;return Ge=e.end,Rr=ZDe(),Ge=e.end,e}function ePe(){const e=Ge;Rr=ZDe(),Ge=e}function UMt(e){const t=new Pd(dMt);return t.elements=e,t}function mde(e,t,n){const r=new Pd(e==="||"||e==="&&"?gMt:fMt);return r.operator=e,r.left=t,r.right=n,r}function VMt(e,t){const n=new Pd(hMt);return n.callee=e,n.arguments=t,n}function HMt(e,t,n){const r=new Pd(pMt);return r.test=e,r.consequent=t,r.alternate=n,r}function mQ(e){const t=new Pd(KDe);return t.name=e,t}function $T(e){const t=new Pd(mMt);return t.value=e.value,t.raw=qt.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function gde(e,t,n){const r=new Pd(yMt);return r.computed=e==="[",r.object=t,r.property=n,r.computed||(n.member=!0),r}function qMt(e){const t=new Pd(bMt);return t.properties=e,t}function yde(e,t,n){const r=new Pd(vMt);return r.key=t,r.value=n,r.kind=e,r}function WMt(e,t){const n=new Pd(xMt);return n.operator=e,n.argument=t,n.prefix=!0,n}function fr(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,(s,o)=>(V$(o<r.length,"Message reference must be in range"),r[o]));throw n=new Error(i),n.index=Ge,n.description=i,n}function H$(e){e.type===vA&&fr(e,CMt),e.type===vb&&fr(e,wMt),e.type===xA&&fr(e,EMt),e.type===I1&&fr(e,_Mt),e.type===Cg&&fr(e,TMt),fr(e,eo,e.value)}function pa(e){const t=xu();(t.type!==mu||t.value!==e)&&H$(t)}function oi(e){return Rr.type===mu&&Rr.value===e}function HF(e){return Rr.type===Cg&&Rr.value===e}function GMt(){const e=[];for(Ge=Rr.start,pa("[");!oi("]");)oi(",")?(xu(),e.push(null)):(e.push(R1()),oi("]")||pa(","));return xu(),UMt(e)}function bde(){Ge=Rr.start;const e=xu();return e.type===xA||e.type===vb?(e.octal&&fr(e,XDe),$T(e)):mQ(e.value)}function YMt(){var e,t,n,r;if(Ge=Rr.start,e=Rr,e.type===I1)return n=bde(),pa(":"),r=R1(),yde("init",n,r);if(e.type===vA||e.type===mu)H$(e);else return t=bde(),pa(":"),r=R1(),yde("init",t,r)}function KMt(){var e=[],t,n,r,i={},s=String;for(Ge=Rr.start,pa("{");!oi("}");)t=YMt(),t.key.type===KDe?n=t.key.name:n=s(t.key.value),r="$"+n,Object.prototype.hasOwnProperty.call(i,r)?fr({},SMt):i[r]=!0,e.push(t),oi("}")||pa(",");return pa("}"),qMt(e)}function XMt(){pa("(");const e=gQ();return pa(")"),e}const QMt={if:1};function JMt(){var e,t,n;if(oi("("))return XMt();if(oi("["))return GMt();if(oi("{"))return KMt();if(e=Rr.type,Ge=Rr.start,e===I1||QMt[Rr.value])n=mQ(xu().value);else if(e===xA||e===vb)Rr.octal&&fr(Rr,XDe),n=$T(xu());else{if(e===Cg)throw new Error(DC);e===z$?(t=xu(),t.value=t.value==="true",n=$T(t)):e===U$?(t=xu(),t.value=null,n=$T(t)):oi("/")||oi("/=")?(n=$T(jMt()),ePe()):H$(xu())}return n}function ZMt(){const e=[];if(pa("("),!oi(")"))for(;Ge<ha&&(e.push(R1()),!oi(")"));)pa(",");return pa(")"),e}function e8t(){Ge=Rr.start;const e=xu();return zMt(e)||H$(e),mQ(e.value)}function t8t(){return pa("."),e8t()}function n8t(){pa("[");const e=gQ();return pa("]"),e}function r8t(){var e,t,n;for(e=JMt();;)if(oi("."))n=t8t(),e=gde(".",e,n);else if(oi("("))t=ZMt(),e=VMt(e,t);else if(oi("["))n=n8t(),e=gde("[",e,n);else break;return e}function vde(){const e=r8t();if(Rr.type===mu&&(oi("++")||oi("--")))throw new Error(DC);return e}function bP(){var e,t;if(Rr.type!==mu&&Rr.type!==Cg)t=vde();else{if(oi("++")||oi("--"))throw new Error(DC);if(oi("+")||oi("-")||oi("~")||oi("!"))e=xu(),t=bP(),t=WMt(e.value,t);else{if(HF("delete")||HF("void")||HF("typeof"))throw new Error(DC);t=vde()}}return t}function xde(e){let t=0;if(e.type!==mu&&e.type!==Cg)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function i8t(){var e,t,n,r,i,s,o,a,u,l;if(e=Rr,u=bP(),r=Rr,i=xde(r),i===0)return u;for(r.prec=i,xu(),t=[e,Rr],o=bP(),s=[u,r,o];(i=xde(Rr))>0;){for(;s.length>2&&i<=s[s.length-2].prec;)o=s.pop(),a=s.pop().value,u=s.pop(),t.pop(),n=mde(a,u,o),s.push(n);r=xu(),r.prec=i,s.push(r),t.push(Rr),n=bP(),s.push(n)}for(l=s.length-1,n=s[l],t.pop();l>1;)t.pop(),n=mde(s[l-1].value,s[l-2],n),l-=2;return n}function R1(){var e,t,n;return e=i8t(),oi("?")&&(xu(),t=R1(),pa(":"),n=R1(),e=HMt(e,t,n)),e}function gQ(){const e=R1();if(oi(","))throw new Error(DC);return e}function s8t(e){qt=e,Ge=0,ha=qt.length,Rr=null,ePe();const t=gQ();if(Rr.type!==vA)throw new Error("Unexpect token after expression.");return t}function _z(e){const t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(..._z(e.object)),t.push(..._z(e.property))),t)}function tPe(e){return e.object.type==="MemberExpression"?tPe(e.object):e.object.name==="datum"}function nPe(e){const t=s8t(e),n=new Set;return t.visit(r=>{r.type==="MemberExpression"&&tPe(r)&&n.add(_z(r).slice(1).join("."))}),n}class AE extends Pr{clone(){return new AE(null,this.model,hn(this.filter))}constructor(t,n,r){super(t),this.model=n,this.filter=r,this.expr=JN(this.model,this.filter,this),this._dependentFields=nPe(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function o8t(e,t){const n={},r=e.config.selection;if(!t||!t.length)return n;let i=0;for(const s of t){const o=fi(s.name),a=s.select,u=It(a)?a:a.type,l=kt(a)?hn(a):{type:u},c=r[u];for(const h in c)h==="fields"||h==="encodings"||(h==="mark"&&(l.mark={...c.mark,...l.mark}),(l[h]===void 0||l[h]===!0)&&(l[h]=hn(c[h]??l[h])));const d=n[o]={...l,name:o,type:u,init:s.value,bind:s.bind,events:It(l.on)?gg(l.on,"scope"):Rt(hn(l.on))};if(Df(d)&&(i++,i>1)){delete n[o];continue}const f=hn(s);for(const h of j$)h.defined(d)&&h.parse&&h.parse(e,d,f)}return i>1&&ht(m4t),n}function rPe(e,t,n,r="datum"){const i=It(t)?t:t.param,s=fi(i),o=bt(s+k1);let a;try{a=e.getSelectionComponent(s,i)}catch{return`!!${s}`}if(a.project.timeUnit){const f=n??e.component.data.raw,h=a.project.timeUnit.clone();f.parent?h.insertAsParentOf(f):f.parent=h}const u=a.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",l=a.resolve==="global"?")":`, ${bt(a.resolve)})`,c=`${u}${o}, ${r}${l}`,d=`length(data(${o}))`;return t.empty===!1?`${d} && ${c}`:`!${d} || ${c}`}function iPe(e,t,n){const r=fi(t),i=n.encoding;let s=n.field,o;try{o=e.getSelectionComponent(r,t)}catch{return r}if(!i&&!s)s=o.project.items[0].field,o.project.items.length>1&&ht(g4t(s));else if(i&&!s){const a=o.project.items.filter(u=>u.channel===i);!a.length||a.length>1?(s=o.project.items[0].field,ht(y4t(a,i,n,s))):s=a[0].field}return`${o.name}[${bt(oc(s))}]`}function a8t(e,t){for(const[n,r]of W0(e.component.selection??{})){const i=e.getName(`lookup_${n}`);e.component.data.outputNodes[i]=r.materialized=new Au(new AE(t,e,{param:n}),i,_i.Lookup,e.component.data.outputNodeRefCounts)}}function JN(e,t,n){return g2(t,r=>It(r)?r:SOt(r)?rPe(e,r,n):uRe(r))}function u8t(e,t){if(e)return Qe(e)&&!zm(e)?e.map(n=>YX(n,t)).join(", "):e}function qF(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function MT(e,t,n,r={header:!1}){var d,f;const{disable:i,orient:s,scale:o,labelExpr:a,title:u,zindex:l,...c}=e.combine();if(!i){for(const h in c){const p=h,m=D6t[p],y=c[p];if(m&&m!==t&&m!=="both")delete c[p];else if(yA(y)){const{condition:v,...b}=y,w=Rt(v),E=zce[p];if(E){const{vgProp:_,part:C}=E,S=[...w.map(k=>{const{test:R,...N}=k;return{test:JN(null,R),...N}}),b];qF(c,C,_,S),delete c[p]}else if(E===null){const _={signal:w.map(C=>{const{test:S,...k}=C;return`${JN(null,S)} ? ${Cce(k)} : `}).join("")+Cce(b)};c[p]=_}}else if(Wt(y)){const v=zce[p];if(v){const{vgProp:b,part:w}=v;qF(c,w,b,y),delete c[p]}}$n(["labelAlign","labelBaseline"],p)&&c[p]===null&&delete c[p]}if(t==="grid"){if(!c.grid)return;if(c.encode){const{grid:h}=c.encode;c.encode={...h?{grid:h}:{}},Mr(c.encode)&&delete c.encode}return{scale:o,orient:s,...c,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:Wi(l,0)}}else{if(!r.header&&e.mainExtracted)return;if(a!==void 0){let p=a;(f=(d=c.encode)==null?void 0:d.labels)!=null&&f.update&&Wt(c.encode.labels.update.text)&&(p=x1(a,"datum.label",c.encode.labels.update.text.signal)),qF(c,"labels","text",{signal:p})}if(c.labelAlign===null&&delete c.labelAlign,c.encode){for(const p of BRe)e.hasAxisPart(p)||delete c.encode[p];Mr(c.encode)&&delete c.encode}const h=u8t(u,n);return{scale:o,orient:s,grid:!1,...h?{title:h}:{},...c,...n.aria===!1?{aria:!1}:{},zindex:Wi(l,0)}}}}function sPe(e){const{axes:t}=e.component,n=[];for(const r of nm)if(t[r]){for(const i of t[r])if(!i.get("disable")&&!i.get("gridScale")){const s=r==="x"?"height":"width",o=e.getSizeSignalRef(s).signal;s!==o&&n.push({name:s,update:o})}}return n}function l8t(e,t){const{x:n=[],y:r=[]}=e;return[...n.map(i=>MT(i,"grid",t)),...r.map(i=>MT(i,"grid",t)),...n.map(i=>MT(i,"main",t)),...r.map(i=>MT(i,"main",t))].filter(i=>i)}function wde(e,t,n,r){return Object.assign.apply(null,[{},...e.map(i=>{if(i==="axisOrient"){const s=n==="x"?"bottom":"left",o=t[n==="x"?"axisBottom":"axisLeft"]||{},a=t[n==="x"?"axisTop":"axisRight"]||{},u=new Set([...at(o),...at(a)]),l={};for(const c of u.values())l[c]={signal:`${r.signal} === "${s}" ? ${Zc(o[c])} : ${Zc(a[c])}`};return l}return t[i]})])}function c8t(e,t,n,r){const i=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:fRe(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],s=e==="x"?"axisX":"axisY",o=Wt(n)?"axisOrient":`axis${oA(n)}`,a=[...i,...i.map(l=>s+l.substr(4))],u=["axis",o,s];return{vlOnlyAxisConfig:wde(a,r,e,n),vgAxisConfig:wde(u,r,e,n),axisConfigStyle:d8t([...u,...a],r)}}function d8t(e,t){var r;const n=[{}];for(const i of e){let s=(r=t[i])==null?void 0:r.style;if(s){s=Rt(s);for(const o of s)n.push(t.style[o])}}return Object.assign.apply(null,n)}function Tz(e,t,n,r={}){var s;const i=jIe(e,n,t);if(i!==void 0)return{configFrom:"style",configValue:i};for(const o of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(((s=r[o])==null?void 0:s[e])!==void 0)return{configFrom:o,configValue:r[o][e]};return{}}const Ede={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??f8t(n,e),gridScale:({model:e,channel:t})=>h8t(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelAlign||aPe(t,n,r),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelBaseline||oPe(t,n,r),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??m8t(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??g8t(t.type,n,gt(t)&&!!t.timeUnit,gt(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:r,scaleType:i})=>{const s=e==="x"?"width":e==="y"?"height":void 0,o=s?t.getSizeSignalRef(s):void 0;return n.tickCount??b8t({fieldOrDatumDef:r,scaleType:i,size:o,values:n.values})},tickMinStep:v8t,title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;const r=uPe(t,n);if(r!==void 0)return r;const i=t.typedFieldDef(n),s=n==="x"?"x2":"y2",o=t.fieldDef(s);return UIe(i?[Bce(i)]:[],gt(o)?[Bce(o)]:[])},values:({axis:e,fieldOrDatumDef:t})=>x8t(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??w8t(n,t)};function f8t(e,t){return!io(e)&&gt(t)&&!Qr(t==null?void 0:t.bin)&&!wo(t==null?void 0:t.bin)}function h8t(e,t){const n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function p8t(e,t,n,r,i){const s=t==null?void 0:t.labelAngle;if(s!==void 0)return Wt(s)?s:kC(s);{const{configValue:o}=Tz("labelAngle",r,t==null?void 0:t.style,i);return o!==void 0?kC(o):n===pi&&$n([MX,$X],e.type)&&!(gt(e)&&e.timeUnit)?270:void 0}}function Cz(e){return`(((${e.signal} % 360) + 360) % 360)`}function oPe(e,t,n,r){if(e!==void 0)if(n==="x"){if(Wt(e)){const i=Cz(e),s=Wt(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${i} && ${i} < 135) || (225 < ${i} && ${i} < 315) ? "middle" :(${i} <= 45 || 315 <= ${i}) === ${s} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(Wt(t)){const i=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${i} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(Wt(e)){const i=Cz(e),s=Wt(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${i} <= 45 || 315 <= ${i} || (135 <= ${i} && ${i} <= 225) ? ${r?'"middle"':"null"} : (45 <= ${i} && ${i} <= 135) === ${s} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return r?"middle":null;if(Wt(t)){const i=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${i} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function aPe(e,t,n){if(e===void 0)return;const r=n==="x",i=r?0:90,s=r?"bottom":"left";if(Wt(e)){const o=Cz(e),a=Wt(t)?`(${t.signal} === "${s}")`:t===s;return{signal:`(${i?`(${o} + 90)`:o} % 180 === 0) ? ${r?null:'"center"'} :(${i} < ${o} && ${o} < ${180+i}) === ${a} ? "left" : "right"`}}if((e+i)%180===0)return r?null:"center";if(Wt(t)){const o=i<e&&e<180+i?"===":"!==";return{signal:`${`${t.signal} ${o} "${s}"`} ? "left" : "right"`}}return(i<e&&e<180+i)==(t===s)?"left":"right"}function m8t(e,t){if(t==="x"&&$n(["quantitative","temporal"],e))return!0}function g8t(e,t,n,r){if(n&&!kt(r)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function y8t(e){return e==="x"?"bottom":"left"}function b8t({fieldOrDatumDef:e,scaleType:t,size:n,values:r}){var i;if(!r&&!io(t)&&t!=="log"){if(gt(e)){if(Qr(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&$n(["month","hours","day","quarter"],(i=to(e.timeUnit))==null?void 0:i.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function v8t({format:e,fieldOrDatumDef:t}){if(e==="d")return 1;if(gt(t)){const{timeUnit:n}=t;if(n){const r=sRe(n);if(r)return{signal:r}}}}function uPe(e,t){const n=t==="x"?"x2":"y2",r=e.fieldDef(t),i=e.fieldDef(n),s=r?r.title:void 0,o=i?i.title:void 0;if(s&&o)return VIe(s,o);if(s)return s;if(o)return o;if(s!==void 0)return s;if(o!==void 0)return o}function x8t(e,t){const n=e.values;if(Qe(n))return FRe(t,n);if(Wt(n))return n}function w8t(e,t){return e==="rect"&&HN(t)?1:0}class yw extends Pr{clone(){return new yw(null,hn(this.transform))}constructor(t,n){super(t),this.transform=n,this._dependentFields=nPe(this.transform.calculate)}static parseAllForSortIndex(t,n){return n.forEachFieldDef((r,i)=>{if(bb(r)&&kRe(r.sort)){const{field:s,timeUnit:o}=r,a=r.sort,u=a.map((l,c)=>`${uRe({field:s,timeUnit:o,equal:l})} ? ${c} : `).join("")+a.length;t=new yw(t,{calculate:u,as:bw(r,i,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${zn(this.transform)}`}}function bw(e,t,n){return Ct(e,{prefix:t,suffix:"sort_index",...n})}function q$(e,t){return $n(["top","bottom"],t)?"column":$n(["left","right"],t)||e==="row"?"row":"column"}function vw(e,t,n,r){const i=r==="row"?n.headerRow:r==="column"?n.headerColumn:n.headerFacet;return Wi((t||{})[e],i[e],n.header[e])}function W$(e,t,n,r){const i={};for(const s of e){const o=vw(s,t||{},n,r);o!==void 0&&(i[s]=o)}return i}const yQ=["row","column"],bQ=["header","footer"];function E8t(e,t){const n=e.component.layoutHeaders[t].title,r=e.config?e.config:void 0,i=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:s,titleAngle:o,titleOrient:a}=W$(["titleAnchor","titleAngle","titleOrient"],i.header,r,t),u=q$(t,a),l=kC(o);return{name:`${t}-title`,type:"group",role:`${u}-title`,title:{text:n,...t==="row"?{orient:"left"}:{},style:"guide-title",...cPe(l,u),...lPe(u,l,s),...dPe(r,i,t,Z6t,rDe)}}}function lPe(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const r=aPe(t,e==="row"?"left":"top",e==="row"?"y":"x");return r?{align:r}:{}}function cPe(e,t){const n=oPe(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function _8t(e,t){const n=e.component.layoutHeaders[t],r=[];for(const i of bQ)if(n[i])for(const s of n[i]){const o=C8t(e,t,i,n,s);o!=null&&r.push(o)}return r}function T8t(e,t){const{sort:n}=e;return yp(n)?{field:Ct(n,{expr:"datum"}),order:n.order??"ascending"}:Qe(n)?{field:bw(e,t,{expr:"datum"}),order:"ascending"}:{field:Ct(e,{expr:"datum"}),order:n??"ascending"}}function Sz(e,t,n){const{format:r,formatType:i,labelAngle:s,labelAnchor:o,labelOrient:a,labelExpr:u}=W$(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),l=HX({fieldOrDatumDef:e,format:r,formatType:i,expr:"parent",config:n}).signal,c=q$(t,a);return{text:{signal:u?x1(x1(u,"datum.label",l),"datum.value",Ct(e,{expr:"parent"})):l},...t==="row"?{orient:"left"}:{},style:"guide-label",frame:"group",...cPe(s,c),...lPe(c,s,o),...dPe(n,e,t,e$t,iDe)}}function C8t(e,t,n,r,i){if(i){let s=null;const{facetFieldDef:o}=r,a=e.config?e.config:void 0;if(o&&i.labels){const{labelOrient:d}=W$(["labelOrient"],o.header,a,t);(t==="row"&&!$n(["top","bottom"],d)||t==="column"&&!$n(["left","right"],d))&&(s=Sz(o,t,a))}const u=dl(e)&&!hA(e.facet),l=i.axes,c=(l==null?void 0:l.length)>0;if(s||c){const d=t==="row"?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...r.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:T8t(o,t)}:{},...c&&u?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...s?{title:s}:{},...i.sizeSignal?{encode:{update:{[d]:i.sizeSignal}}}:{},...c?{axes:l}:{}}}}return null}const S8t={column:{start:0,end:1},row:{start:1,end:0}};function A8t(e,t){return S8t[t][e]}function k8t(e,t){const n={};for(const r of Kl){const i=e[r];if(i!=null&&i.facetFieldDef){const{titleAnchor:s,titleOrient:o}=W$(["titleAnchor","titleOrient"],i.facetFieldDef.header,t,r),a=q$(r,o),u=A8t(s,a);u!==void 0&&(n[a]=u)}}return Mr(n)?void 0:n}function dPe(e,t,n,r,i){const s={};for(const o of r){if(!i[o])continue;const a=vw(o,t==null?void 0:t.header,e,n);a!==void 0&&(s[i[o]]=a)}return s}function vQ(e){return[...FI(e,"width"),...FI(e,"height"),...FI(e,"childWidth"),...FI(e,"childHeight")]}function FI(e,t){const n=t==="width"?"x":"y",r=e.component.layoutSize.get(t);if(!r||r==="merged")return[];const i=e.getSizeSignalRef(t).signal;if(r==="step"){const s=e.getScaleComponent(n);if(s){const o=s.get("type"),a=s.get("range");if(io(o)&&mb(a)){const u=e.scaleName(n);return dl(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[_de(u,a)]:[_de(u,a),{name:i,update:fPe(u,s,`domain('${u}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(r=="container"){const s=i.endsWith("width"),o=s?"containerSize()[0]":"containerSize()[1]",a=hz(e.config.view,s?"width":"height"),u=`isFinite(${o}) ? ${o} : ${a}`;return[{name:i,init:u,on:[{update:u,events:"window:resize"}]}]}else return[{name:i,value:r}]}function _de(e,t){const n=`${e}_step`;return Wt(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function fPe(e,t,n){const r=t.get("type"),i=t.get("padding"),s=Wi(t.get("paddingOuter"),i);let o=t.get("paddingInner");return o=r==="band"?o!==void 0?o:i:1,`bandspace(${n}, ${Zc(o)}, ${Zc(s)}) * ${e}_step`}function hPe(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function pPe(e,t){return at(e).reduce((n,r)=>({...n,...SE({model:t,channelDef:e[r],vgChannel:r,mainRefFn:i=>si(i.value),invalidValueRef:void 0})}),{})}function mPe(e,t){if(dl(t))return e==="theta"?"independent":"shared";if(RE(t))return"shared";if(SQ(t))return Gi(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function xQ(e,t){const n=e.scale[t],r=Gi(t)?"axis":"legend";return n==="independent"?(e[r][t]==="shared"&&ht(Y4t(t)),"independent"):e[r][t]||"shared"}const I8t={...r$t,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},gPe=at(I8t);class R8t extends im{}const Tde={symbols:D8t,gradient:P8t,labels:N8t,entries:O8t};function D8t(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i,legendType:s}){if(s!=="symbol")return;const{markDef:o,encoding:a,config:u,mark:l}=n,c=o.filled&&l!=="trail";let d={...n4t({},n,JOt),...MDe(n,{filled:c})};const f=i.get("symbolOpacity")??u.legend.symbolOpacity,h=i.get("symbolFillColor")??u.legend.symbolFillColor,p=i.get("symbolStrokeColor")??u.legend.symbolStrokeColor,m=f===void 0?yPe(a.opacity)??o.opacity:void 0;if(d.fill){if(r==="fill"||c&&r===Nu)delete d.fill;else if(ct(d.fill,"field"))h?delete d.fill:(d.fill=si(u.legend.symbolBaseFillColor??"black"),d.fillOpacity=si(m??1));else if(Qe(d.fill)){const y=Az(a.fill??a.color)??o.fill??(c&&o.color);y&&(d.fill=si(y))}}if(d.stroke){if(r==="stroke"||!c&&r===Nu)delete d.stroke;else if(ct(d.stroke,"field")||p)delete d.stroke;else if(Qe(d.stroke)){const y=Wi(Az(a.stroke||a.color),o.stroke,c?o.color:void 0);y&&(d.stroke={value:y})}}if(r!==tm){const y=gt(t)&&vPe(n,i,t);y?d.opacity=[{test:y,...si(m??1)},si(u.legend.unselectedOpacity)]:m&&(d.opacity=si(m))}return d={...d,...e},Mr(d)?void 0:d}function P8t(e,{model:t,legendType:n,legendCmpt:r}){if(n!=="gradient")return;const{config:i,markDef:s,encoding:o}=t;let a={};const l=(r.get("gradientOpacity")??i.legend.gradientOpacity)===void 0?yPe(o.opacity)||s.opacity:void 0;return l&&(a.opacity=si(l)),a={...a,...e},Mr(a)?void 0:a}function N8t(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i}){const s=n.legend(r)||{},o=n.config,a=gt(t)?vPe(n,i,t):void 0,u=a?[{test:a,value:1},{value:o.legend.unselectedOpacity}]:void 0,{format:l,formatType:c}=s;let d;S1(c)?d=ed({fieldOrDatumDef:t,field:"datum.value",format:l,formatType:c,config:o}):l===void 0&&c===void 0&&o.customFormatTypes&&(t.type==="quantitative"&&o.numberFormatType?d=ed({fieldOrDatumDef:t,field:"datum.value",format:o.numberFormat,formatType:o.numberFormatType,config:o}):t.type==="temporal"&&o.timeFormatType&&gt(t)&&t.timeUnit===void 0&&(d=ed({fieldOrDatumDef:t,field:"datum.value",format:o.timeFormat,formatType:o.timeFormatType,config:o})));const f={...u?{opacity:u}:{},...d?{text:d}:{},...e};return Mr(f)?void 0:f}function O8t(e,{legendCmpt:t}){const n=t.get("selections");return n!=null&&n.length?{...e,fill:{value:"transparent"}}:e}function yPe(e){return bPe(e,(t,n)=>Math.max(t,n.value))}function Az(e){return bPe(e,(t,n)=>Wi(t,n.value))}function bPe(e,t){if(v6t(e))return Rt(e.condition).reduce(t,e.value);if(md(e))return e.value}function vPe(e,t,n){const r=t.get("selections");if(!(r!=null&&r.length))return;const i=bt(n.field);return r.map(s=>`(!length(data(${bt(fi(s)+k1)})) || (${s}[${i}] && indexof(${s}[${i}], datum.value) >= 0))`).join(" || ")}const Cde={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:r,formatType:i}=t;return CRe(e,e.type,r,i,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:r}=e;return SRe(r,t,n)},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??z8t(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??U8t(n),symbolType:({legend:e,markDef:t,channel:n,encoding:r})=>e.symbolType??M8t(t.type,n,r.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>gx(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(mx(n)&&yf(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>$8t(t,e)};function $8t(e,t){const n=e.values;if(Qe(n))return FRe(t,n);if(Wt(n))return n}function M8t(e,t,n,r){if(t!=="shape"){const i=Az(n)??r;if(i)return i}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function L8t(e){const{legend:t}=e;return Wi(t.type,F8t(e))}function F8t({channel:e,timeUnit:t,scaleType:n}){if(mx(e)){if($n(["quarter","month","day"],t))return"symbol";if(yf(n))return"gradient"}return"symbol"}function B8t({legendConfig:e,legendType:t,orient:n,legend:r}){return r.direction??e[t?"gradientDirection":"symbolDirection"]??j8t(n,t)}function j8t(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function z8t({legendConfig:e,model:t,direction:n,orient:r,scaleType:i}){const{gradientHorizontalMaxLength:s,gradientHorizontalMinLength:o,gradientVerticalMaxLength:a,gradientVerticalMinLength:u}=e;if(yf(i))return n==="horizontal"?r==="top"||r==="bottom"?Sde(t,"width",o,s):o:Sde(t,"height",u,a)}function Sde(e,t,n,r){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${r})`}}function U8t(e){if($n(["quantile","threshold","log","symlog"],e))return"greedy"}function xPe(e){const t=wi(e)?V8t(e):G8t(e);return e.component.legends=t,t}function V8t(e){const{encoding:t}=e,n={};for(const r of[Nu,...oDe]){const i=Ts(t[r]);!i||!e.getScaleComponent(r)||r===Ou&&gt(i)&&i.type===CE||(n[r]=W8t(e,r))}return n}function H8t(e,t){const n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function q8t(e,t,n,r){switch(t){case"disable":return n!==void 0;case"values":return!!(n!=null&&n.values);case"title":if(t==="title"&&e===(r==null?void 0:r.title))return!0}return e===(n||{})[t]}function W8t(e,t){var E;let n=e.legend(t);const{markDef:r,encoding:i,config:s}=e,o=s.legend,a=new R8t({},H8t(e,t));W5t(e,t,a);const u=n!==void 0?!n:o.disable;if(a.set("disable",u,n!==void 0),u)return a;n=n||{};const l=e.getScaleComponent(t).get("type"),c=Ts(i[t]),d=gt(c)?(E=to(c.timeUnit))==null?void 0:E.unit:void 0,f=n.orient||s.legend.orient||"right",h=L8t({legend:n,channel:t,timeUnit:d,scaleType:l}),p=B8t({legend:n,legendType:h,orient:f,legendConfig:o}),m={legend:n,channel:t,model:e,markDef:r,encoding:i,fieldOrDatumDef:c,legendConfig:o,config:s,scaleType:l,orient:f,legendType:h,direction:p};for(const _ of gPe){if(h==="gradient"&&_.startsWith("symbol")||h==="symbol"&&_.startsWith("gradient"))continue;const C=_ in Cde?Cde[_](m):n[_];if(C!==void 0){const S=q8t(C,_,n,e.fieldDef(t));(S||s.legend[_]===void 0)&&a.set(_,C,S)}}const y=(n==null?void 0:n.encoding)??{},v=a.get("selections"),b={},w={fieldOrDatumDef:c,model:e,channel:t,legendCmpt:a,legendType:h};for(const _ of["labels","legend","title","symbols","gradient","entries"]){const C=pPe(y[_]??{},e),S=_ in Tde?Tde[_](C,w):C;S!==void 0&&!Mr(S)&&(b[_]={...v!=null&&v.length&&gt(c)?{name:`${fi(c.field)}_legend_${_}`}:{},...v!=null&&v.length?{interactive:!!v}:{},update:S})}return Mr(b)||a.set("encode",b,!!(n!=null&&n.encoding)),a}function G8t(e){const{legends:t,resolve:n}=e.component;for(const r of e.children){xPe(r);for(const i of at(r.component.legends))n.legend[i]=xQ(e.component.resolve,i),n.legend[i]==="shared"&&(t[i]=wPe(t[i],r.component.legends[i]),t[i]||(n.legend[i]="independent",delete t[i]))}for(const r of at(t))for(const i of e.children)i.component.legends[r]&&n.legend[r]==="shared"&&delete i.component.legends[r];return t}function wPe(e,t){var s,o,a,u;if(!e)return t.clone();const n=e.getWithExplicit("orient"),r=t.getWithExplicit("orient");if(n.explicit&&r.explicit&&n.value!==r.value)return;let i=!1;for(const l of gPe){const c=K0(e.getWithExplicit(l),t.getWithExplicit(l),l,"legend",(d,f)=>{switch(l){case"symbolType":return Y8t(d,f);case"title":return HIe(d,f);case"type":return i=!0,Xu("symbol")}return M$(d,f,l,"legend")});e.setWithExplicit(l,c)}return i&&((o=(s=e.implicit)==null?void 0:s.encode)!=null&&o.gradient&&BN(e.implicit,["encode","gradient"]),(u=(a=e.explicit)==null?void 0:a.encode)!=null&&u.gradient&&BN(e.explicit,["encode","gradient"])),e}function Y8t(e,t){return t.value==="circle"?t:e}function K8t(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function EPe(e){const t=e.component.legends,n={};for(const i of at(t)){const s=e.getScaleComponent(i),o=Lr(s.get("domains"));if(n[o])for(const a of n[o])wPe(a,t[i])||n[o].push(t[i]);else n[o]=[t[i].clone()]}return Oo(n).flat().map(i=>X8t(i,e.config)).filter(i=>i!==void 0)}function X8t(e,t){var o,a,u;const{disable:n,labelExpr:r,selections:i,...s}=e.combine();if(!n){if(t.aria===!1&&s.aria==null&&(s.aria=!1),(o=s.encode)!=null&&o.symbols){const l=s.encode.symbols.update;l.fill&&l.fill.value!=="transparent"&&!l.stroke&&!s.stroke&&(l.stroke={value:"transparent"});for(const c of oDe)s[c]&&delete l[c]}if(s.title||delete s.title,r!==void 0){let l=r;(u=(a=s.encode)==null?void 0:a.labels)!=null&&u.update&&Wt(s.encode.labels.update.text)&&(l=x1(r,"datum.label",s.encode.labels.update.text.signal)),K8t(s,"labels","text",{signal:l})}return s}}function Q8t(e){return RE(e)||SQ(e)?J8t(e):_Pe(e)}function J8t(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),_Pe(e))}function _Pe(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:r}=n;if(t.data){const i={signal:`[${t.size.map(o=>o.signal).join(", ")}]`},s=t.data.reduce((o,a)=>{const u=Wt(a)?a.signal:`data('${e.lookupDataSource(a)}')`;return $n(o,u)||o.push(u),o},[]);if(s.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:r,size:i,fit:{signal:s.length>1?`[${s.join(", ")}]`:s[0]},...n}]}else return[{name:r,translate:{signal:"[width / 2, height / 2]"},...n}]}const Z8t=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class TPe extends im{constructor(t,n,r,i){super({...n},{name:t}),this.specifiedProjection=n,this.size=r,this.data=i,this.merged=!1}get isFit(){return!!this.data}}function CPe(e){e.component.projection=wi(e)?eLt(e):rLt(e)}function eLt(e){if(e.hasProjection){const t=Eo(e.specifiedProjection),n=!(t.scale!=null||t.translate!=null),r=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,i=n?tLt(e):void 0,s=new TPe(e.projectionName(!0),{...Eo(e.config.projection),...t},r,i);return s.get("type")||s.set("type","equalEarth",!1),s}}function tLt(e){const t=[],{encoding:n}=e;for(const r of[[Rd,Id],[ac,Dd]])(Ts(n[r[0]])||Ts(n[r[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(Ou)&&e.typedFieldDef(Ou).type===CE&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(_i.Main)),t}function nLt(e,t){const n=uX(Z8t,i=>!!(!Ot(e.explicit,i)&&!Ot(t.explicit,i)||Ot(e.explicit,i)&&Ot(t.explicit,i)&&sl(e.get(i),t.get(i))));if(sl(e.size,t.size)){if(n)return e;if(sl(e.explicit,{}))return t;if(sl(t.explicit,{}))return e}return null}function rLt(e){if(e.children.length===0)return;let t;for(const r of e.children)CPe(r);const n=uX(e.children,r=>{const i=r.component.projection;if(i)if(t){const s=nLt(t,i);return s&&(t=s),!!s}else return t=i,!0;else return!0});if(t&&n){const r=e.projectionName(!0),i=new TPe(r,t.specifiedProjection,t.size,hn(t.data));for(const s of e.children){const o=s.component.projection;o&&(o.isFit&&i.data.push(...s.component.projection.data),s.renameProjection(o.get("name"),r),o.merged=!0)}return i}}function iLt(e,t,n,r){if(gA(t,n)){const i=wi(e)?e.axis(n)??e.legend(n)??{}:{},s=Ct(t,{expr:"datum"}),o=Ct(t,{expr:"datum",binSuffix:"end"});return{formulaAs:Ct(t,{binSuffix:"range",forAs:!0}),formula:fA(s,o,i.format,i.formatType,r)}}return{}}function SPe(e,t){return`${MIe(e)}_${t}`}function sLt(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function wQ(e,t,n){const r=R$(n,void 0)??{},i=SPe(r,t);return e.getName(`${i}_bins`)}function oLt(e){return"as"in e}function Ade(e,t,n){let r,i;oLt(e)?r=It(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:r=[Ct(e,{forAs:!0}),Ct(e,{binSuffix:"end",forAs:!0})];const s={...R$(t,void 0)},o=SPe(s,e.field),{signal:a,extentSignal:u}=sLt(n,o);if(v$(s.extent)){const c=s.extent;i=iPe(n,c.param,c),delete s.extent}const l={bin:s,field:e.field,as:[r],...a?{signal:a}:{},...u?{extentSignal:u}:{},...i?{span:i}:{}};return{key:o,binComponent:l}}class Pf extends Pr{clone(){return new Pf(null,hn(this.bins))}constructor(t,n){super(t),this.bins=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{if(Wa(s)&&Qr(s.bin)){const{key:a,binComponent:u}=Ade(s,s.bin,n);i[a]={...u,...i[a],...iLt(n,s,o,n.config)}}return i},{});return Mr(r)?null:new Pf(t,r)}static makeFromTransform(t,n,r){const{key:i,binComponent:s}=Ade(n,n.bin,r);return new Pf(t,{[i]:s})}merge(t,n){for(const r of at(t.bins))r in this.bins?(n(t.bins[r].signal,this.bins[r].signal),this.bins[r].as=gf([...this.bins[r].as,...t.bins[r].as],zn)):this.bins[r]=t.bins[r];for(const r of t.children)t.removeChild(r),r.parent=this;t.remove()}producedFields(){return new Set(Oo(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(Oo(this.bins).map(t=>t.field))}hash(){return`Bin ${zn(this.bins)}`}assemble(){return Oo(this.bins).flatMap(t=>{const n=[],[r,...i]=t.as,{extent:s,...o}=t.bin,a={type:"bin",field:oc(t.field),as:r,signal:t.signal,...v$(s)?{extent:null}:{extent:s},...t.span?{span:{signal:`span(${t.span})`}}:{},...o};!s&&t.extentSignal&&(n.push({type:"extent",field:oc(t.field),signal:t.extentSignal}),a.extent={signal:t.extentSignal}),n.push(a);for(const u of i)for(let l=0;l<2;l++)n.push({type:"formula",expr:Ct({field:r[l]},{expr:"datum"}),as:u[l]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}}function aLt(e,t,n,r){var s;const i=wi(r)?r.encoding[fh(t)]:void 0;if(Wa(n)&&wi(r)&&RRe(n,i,r.markDef,r.config)){e.add(Ct(n,{})),e.add(Ct(n,{suffix:"end"}));const{mark:o,markDef:a,config:u}=r,l=Y0({fieldDef:n,markDef:a,config:u});IC(o)&&l!==.5&&Gi(t)&&(e.add(Ct(n,{suffix:L$})),e.add(Ct(n,{suffix:F$}))),n.bin&&gA(n,t)&&e.add(Ct(n,{binSuffix:"range"}))}else if(AIe(t)){const o=SIe(t);e.add(r.getName(o))}else e.add(Ct(n));return bb(n)&&BOt((s=n.scale)==null?void 0:s.range)&&e.add(n.scale.range.field),e}function uLt(e,t){for(const n of at(t)){const r=t[n];for(const i of at(r))n in e?e[n][i]=new Set([...e[n][i]??[],...r[i]]):e[n]={[i]:r[i]}}}class ad extends Pr{clone(){return new ad(null,new Set(this.dimensions),hn(this.measures))}constructor(t,n,r){super(t),this.dimensions=n,this.measures=r}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let r=!1;n.forEachFieldDef(o=>{o.aggregate&&(r=!0)});const i={},s=new Set;return!r||(n.forEachFieldDef((o,a)=>{const{aggregate:u,field:l}=o;if(u)if(u==="count")i["*"]??(i["*"]={}),i["*"].count=new Set([Ct(o,{forAs:!0})]);else{if(Mp(u)||_g(u)){const c=Mp(u)?"argmin":"argmax",d=u[c];i[d]??(i[d]={}),i[d][c]=new Set([Ct({op:c,field:d},{forAs:!0})])}else i[l]??(i[l]={}),i[l][u]=new Set([Ct(o,{forAs:!0})]);hh(a)&&n.scaleDomain(a)==="unaggregated"&&(i[l]??(i[l]={}),i[l].min=new Set([Ct({field:l,aggregate:"min"},{forAs:!0})]),i[l].max=new Set([Ct({field:l,aggregate:"max"},{forAs:!0})]))}else aLt(s,a,o,n)}),s.size+at(i).length===0)?null:new ad(t,s,i)}static makeFromTransform(t,n){var r;const i=new Set,s={};for(const o of n.aggregate){const{op:a,field:u,as:l}=o;a&&(a==="count"?(s["*"]??(s["*"]={}),s["*"].count=new Set([l||Ct(o,{forAs:!0})])):(s[u]??(s[u]={}),(r=s[u])[a]??(r[a]=new Set),s[u][a].add(l||Ct(o,{forAs:!0}))))}for(const o of n.groupby??[])i.add(o);return i.size+at(s).length===0?null:new ad(t,i,s)}merge(t){return bIe(this.dimensions,t.dimensions)?(uLt(this.measures,t.measures),!0):(cOt("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...at(this.measures)])}producedFields(){const t=new Set;for(const n of at(this.measures))for(const r of at(this.measures[n])){const i=this.measures[n][r];i.size===0?t.add(`${r}_${n}`):i.forEach(t.add,t)}return t}hash(){return`Aggregate ${zn({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const t=[],n=[],r=[];for(const s of at(this.measures))for(const o of at(this.measures[s]))for(const a of this.measures[s][o])r.push(a),t.push(o),n.push(s==="*"?null:oc(s));return{type:"aggregate",groupby:[...this.dimensions].map(oc),ops:t,fields:n,as:r}}}class kE extends Pr{constructor(t,n,r,i){super(t),this.model=n,this.name=r,this.data=i;for(const s of Kl){const o=n.facet[s];if(o){const{bin:a,sort:u}=o;this[s]={name:n.getName(`${s}_domain`),fields:[Ct(o),...Qr(a)?[Ct(o,{binSuffix:"end"})]:[]],...yp(u)?{sortField:u}:Qe(u)?{sortIndexField:bw(o,s)}:{}}}}this.childModel=n.child}hash(){let t="Facet";for(const n of Kl)this[n]&&(t+=` ${n.charAt(0)}:${zn(this[n])}`);return t}get fields(){var n;const t=[];for(const r of Kl)(n=this[r])!=null&&n.fields&&t.push(...this[r].fields);return t}dependentFields(){const t=new Set(this.fields);for(const n of Kl)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const n of nm){const r=this.childModel.component.scales[n];if(r&&!r.merged){const i=r.get("type"),s=r.get("range");if(io(i)&&mb(s)){const o=G$(this.childModel,n),a=CQ(o);a?t[n]=a:ht(EX(n))}}}return t}assembleRowColumnHeaderData(t,n,r){const i={row:"y",column:"x",facet:void 0}[t],s=[],o=[],a=[];i&&r&&r[i]&&(n?(s.push(`distinct_${r[i]}`),o.push("max")):(s.push(r[i]),o.push("distinct")),a.push(`distinct_${r[i]}`));const{sortField:u,sortIndexField:l}=this[t];if(u){const{op:c=A$,field:d}=u;s.push(d),o.push(c),a.push(Ct(u,{forAs:!0}))}else l&&(s.push(l),o.push("max"),a.push(l));return{name:this[t].name,source:n??this.data,transform:[{type:"aggregate",groupby:this[t].fields,...s.length?{fields:s,ops:o,as:a}:{}}]}}assembleFacetHeaderData(t){var u;const{columns:n}=this.model.layout,{layoutHeaders:r}=this.model.component,i=[],s={};for(const l of yQ){for(const c of bQ){const d=(r[l]&&r[l][c])??[];for(const f of d)if(((u=f.axes)==null?void 0:u.length)>0){s[l]=!0;break}}if(s[l]){const c=`length(data("${this.facet.name}"))`,d=l==="row"?n?{signal:`ceil(${c} / ${n})`}:1:n?{signal:`min(${c}, ${n})`}:{signal:c};i.push({name:`${this.facet.name}_${l}`,transform:[{type:"sequence",start:0,stop:d}]})}}const{row:o,column:a}=s;return(o||a)&&i.unshift(this.assembleRowColumnHeaderData("facet",null,t)),i}assemble(){const t=[];let n=null;const r=this.getChildIndependentFieldsWithStep(),{column:i,row:s,facet:o}=this;if(i&&s&&(r.x||r.y)){n=`cross_${this.column.name}_${this.row.name}`;const a=[].concat(r.x??[],r.y??[]),u=a.map(()=>"distinct");t.push({name:n,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:a,ops:u}]})}for(const a of[gp,mp])this[a]&&t.push(this.assembleRowColumnHeaderData(a,n,r));if(o){const a=this.assembleFacetHeaderData(r);a&&t.push(...a)}return t}}function kde(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function lLt(e,t){const n=dX(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){const r=kde(t.slice(5,t.length));return`timeParse(${n},'${r}')`}else if(t.startsWith("utc:")){const r=kde(t.slice(4,t.length));return`utcParse(${n},'${r}')`}else return ht(v4t(t)),null}function cLt(e){const t={};return gP(e.filter,n=>{if(aRe(n)){let r=null;kX(n)?r=tl(n.equal):RX(n)?r=tl(n.lte):IX(n)?r=tl(n.lt):DX(n)?r=tl(n.gt):PX(n)?r=tl(n.gte):NX(n)?r=n.range[0]:OX(n)&&(r=(n.oneOf??n.in)[0]),r&&(gb(r)?t[n.field]="date":pr(r)?t[n.field]="number":It(r)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function dLt(e){const t={};function n(r){pw(r)?t[r.field]="date":r.type==="quantitative"&&GNt(r.aggregate)?t[r.field]="number":uw(r.field)>1?r.field in t||(t[r.field]="flatten"):bb(r)&&yp(r.sort)&&uw(r.sort.field)>1&&(r.sort.field in t||(t[r.sort.field]="flatten"))}if((wi(e)||dl(e))&&e.forEachFieldDef((r,i)=>{if(Wa(r))n(r);else{const s=hb(i),o=e.fieldDef(s);n({...r,type:o.type})}}),wi(e)){const{mark:r,markDef:i,encoding:s}=e;if(Tg(r)&&!e.encoding.order){const o=i.orient==="horizontal"?"y":"x",a=s[o];gt(a)&&a.type==="quantitative"&&!(a.field in t)&&(t[a.field]="number")}}return t}function fLt(e){const t={};if(wi(e)&&e.component.selection)for(const n of at(e.component.selection)){const r=e.component.selection[n];for(const i of r.project.items)!i.channel&&uw(i.field)>1&&(t[i.field]="flatten")}return t}class ua extends Pr{clone(){return new ua(null,hn(this._parse))}constructor(t,n){super(t),this._parse=n}hash(){return`Parse ${zn(this._parse)}`}static makeExplicit(t,n,r){var o;let i={};const s=n.data;return!x0(s)&&((o=s==null?void 0:s.format)!=null&&o.parse)&&(i=s.format.parse),this.makeWithAncestors(t,i,{},r)}static makeWithAncestors(t,n,r,i){for(const a of at(r)){const u=i.getWithExplicit(a);u.value!==void 0&&(u.explicit||u.value===r[a]||u.value==="derived"||r[a]==="flatten"?delete r[a]:ht(Dce(a,r[a],u.value)))}for(const a of at(n)){const u=i.get(a);u!==void 0&&(u===n[a]?delete n[a]:ht(Dce(a,n[a],u)))}const s=new im(n,r);i.copyAll(s);const o={};for(const a of at(s.combine())){const u=s.get(a);u!==null&&(o[a]=u)}return at(o).length===0||i.parseNothing?null:new ua(t,o)}get parse(){return this._parse}merge(t){this._parse={...this._parse,...t.parse},t.remove()}assembleFormatParse(){const t={};for(const n of at(this._parse)){const r=this._parse[n];uw(n)===1&&(t[n]=r)}return t}producedFields(){return new Set(at(this._parse))}dependentFields(){return new Set(at(this._parse))}assembleTransforms(t=!1){return at(this._parse).filter(n=>t?uw(n)>1:!0).map(n=>{const r=lLt(n,this._parse[n]);return r?{type:"formula",expr:r,as:_E(n)}:null}).filter(n=>n!==null)}}class X0 extends Pr{clone(){return new X0(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([yd])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:yd}}}class EA extends Pr{clone(){return new EA(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${zn(this.params)}`}assemble(){return{type:"graticule",...this.params===!0?{}:this.params}}}class _A extends Pr{clone(){return new _A(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${zn(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class D1 extends Pr{constructor(t){super(null),t??(t={name:"source"});let n;if(x0(t)||(n=t.format?{...Su(t.format,["parse"])}:{}),RC(t))this._data={values:t.values};else if(mw(t)){if(this._data={url:t.url},!n.type){let r=/(?:\.([^.]+))?$/.exec(t.url)[1];$n(["json","csv","tsv","dsv","topojson"],r)||(r="json"),n.type=r}}else TDe(t)?this._data={values:[{type:"Sphere"}]}:(EDe(t)||x0(t))&&(this._data={});this._generator=x0(t),t.name&&(this._name=t.name),n&&!Mr(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}var Ide=function(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},hLt=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},LT;function EQ(e){return e instanceof D1||e instanceof EA||e instanceof _A}class _Q{constructor(){LT.set(this,void 0),Ide(this,LT,!1,"f")}setModified(){Ide(this,LT,!0,"f")}get modifiedFlag(){return hLt(this,LT,"f")}}LT=new WeakMap;class xb extends _Q{getNodeDepths(t,n,r){r.set(t,n);for(const i of t.children)this.getNodeDepths(i,n+1,r);return r}optimize(t){const r=[...this.getNodeDepths(t,0,new Map).entries()].sort((i,s)=>s[1]-i[1]);for(const i of r)this.run(i[0]);return this.modifiedFlag}}class TQ extends _Q{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag}}class pLt extends TQ{mergeNodes(t,n){const r=n.shift();for(const i of n)t.removeChild(i),i.parent=r,i.remove()}run(t){const n=t.children.map(i=>i.hash()),r={};for(let i=0;i<n.length;i++)r[n[i]]===void 0?r[n[i]]=[t.children[i]]:r[n[i]].push(t.children[i]);for(const i of at(r))r[i].length>1&&(this.setModified(),this.mergeNodes(t,r[i]))}}class mLt extends TQ{constructor(t){super(),this.requiresSelectionId=t&&hQ(t)}run(t){t instanceof X0&&(this.requiresSelectionId&&(EQ(t.parent)||t.parent instanceof ad||t.parent instanceof ua)||(this.setModified(),t.remove()))}}class gLt extends _Q{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let r=new Set;t instanceof Rf&&(r=t.producedFields(),lX(r,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(const i of t.children)this.run(i,new Set([...n,...r]))}}class yLt extends TQ{constructor(){super()}run(t){t instanceof Au&&!t.isRequired()&&(this.setModified(),t.remove())}}class bLt extends xb{run(t){if(!EQ(t)&&!(t.numChildren()>1)){for(const n of t.children)if(n instanceof ua)if(t instanceof ua)this.setModified(),t.merge(n);else{if(cX(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}}class vLt extends xb{run(t){const n=[...t.children],r=t.children.filter(i=>i instanceof ua);if(t.numChildren()>1&&r.length>=1){const i={},s=new Set;for(const o of r){const a=o.parse;for(const u of at(a))u in i?i[u]!==a[u]&&s.add(u):i[u]=a[u]}for(const o of s)delete i[o];if(!Mr(i)){this.setModified();const o=new ua(t,i);for(const a of n){if(a instanceof ua)for(const u of at(i))delete a.parse[u];t.removeChild(a),a.parent=o,a instanceof ua&&at(a.parse).length===0&&a.remove()}}}}}class xLt extends xb{run(t){t instanceof Au||t.numChildren()>0||t instanceof kE||t instanceof D1||(this.setModified(),t.remove())}}class wLt extends xb{run(t){const n=t.children.filter(i=>i instanceof Rf),r=n.pop();for(const i of n)this.setModified(),r.merge(i)}}class ELt extends xb{run(t){const n=t.children.filter(i=>i instanceof ad),r={};for(const i of n){const s=zn(i.groupBy);s in r||(r[s]=[]),r[s].push(i)}for(const i of at(r)){const s=r[i];if(s.length>1){const o=s.pop();for(const a of s)o.merge(a)&&(t.removeChild(a),a.parent=o,a.remove(),this.setModified())}}}}class _Lt extends xb{constructor(t){super(),this.model=t}run(t){const n=!(EQ(t)||t instanceof AE||t instanceof ua||t instanceof X0),r=[],i=[];for(const s of t.children)s instanceof Pf&&(n&&!cX(t.producedFields(),s.dependentFields())?r.push(s):i.push(s));if(r.length>0){const s=r.pop();for(const o of r)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof Pf?t.merge(s,this.model.renameSignal.bind(this.model)):s.swapWithParent()}if(i.length>1){const s=i.pop();for(const o of i)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified()}}}class TLt extends xb{run(t){const n=[...t.children];if(!aw(n,o=>o instanceof Au)||t.numChildren()<=1)return;const i=[];let s;for(const o of n)if(o instanceof Au){let a=o;for(;a.numChildren()===1;){const[u]=a.children;if(u instanceof Au)a=u;else break}i.push(...a.children),s?(t.removeChild(o),o.parent=s.parent,s.parent.removeChild(s),s.parent=a,this.setModified()):s=a}else i.push(o);if(i.length){this.setModified();for(const o of i)o.parent.removeChild(o),o.parent=s}}}class wb extends Pr{clone(){return new wb(null,hn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=gf(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){return t.as??Ct(t)}hash(){return`JoinAggregateTransform ${zn(this.transform)}`}assemble(){const t=[],n=[],r=[];for(const s of this.transform.joinaggregate)n.push(s.op),r.push(this.getDefaultName(s)),t.push(s.field===void 0?null:s.field);const i=this.transform.groupby;return{type:"joinaggregate",as:r,ops:n,fields:t,...i!==void 0?{groupby:i}:{}}}}class xw extends Pr{clone(){return new xw(null,{...this.filter})}constructor(t,n){super(t),this.filter=n}static make(t,n,r){const{config:i,markDef:s}=n,{marks:o,scales:a}=r;if(o==="include-invalid-values"&&a==="include-invalid-values")return null;const u=n.reduceFieldDef((l,c,d)=>{const f=hh(d)&&n.getScaleComponent(d);if(f){const h=f.get("type"),{aggregate:p}=c,m=zX({scaleChannel:d,markDef:s,config:i,scaleType:h,isCountAggregate:b$(p)});m!=="show"&&m!=="always-valid"&&(l[c.field]=c)}return l},{});return at(u).length?new xw(t,u):null}dependentFields(){return new Set(at(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${zn(this.filter)}`}assemble(){const t=at(this.filter).reduce((n,r)=>{const i=this.filter[r],s=Ct(i,{expr:"datum"});return i!==null&&(i.type==="temporal"?n.push(`(isDate(${s}) || (${kz(s)}))`):i.type==="quantitative"&&n.push(kz(s))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}function kz(e){return`isValid(${e}) && isFinite(+${e})`}function CLt(e){return e.stack.stackBy.reduce((t,n)=>{const r=n.fieldDef,i=Ct(r);return i&&t.push(i),t},[])}function SLt(e){return Qe(e)&&e.every(t=>It(t))&&e.length>1}class vp extends Pr{clone(){return new vp(null,hn(this._stack))}constructor(t,n){super(t),this._stack=n}static makeFromTransform(t,n){const{stack:r,groupby:i,as:s,offset:o="zero"}=n,a=[],u=[];if(n.sort!==void 0)for(const d of n.sort)a.push(d.field),u.push(Wi(d.order,"ascending"));const l={field:a,order:u};let c;return SLt(s)?c=s:It(s)?c=[s,`${s}_end`]:c=[`${n.stack}_start`,`${n.stack}_end`],new vp(t,{dimensionFieldDefs:[],stackField:r,groupby:i,offset:o,sort:l,facetby:[],as:c})}static makeFromEncoding(t,n){const r=n.stack,{encoding:i}=n;if(!r)return null;const{groupbyChannels:s,fieldChannel:o,offset:a,impute:u}=r,l=s.map(h=>{const p=i[h];return gd(p)}).filter(h=>!!h),c=CLt(n),d=n.encoding.order;let f;if(Qe(d)||gt(d))f=zIe(d);else{const h=DRe(d)?d.sort:o==="y"?"descending":"ascending";f=c.reduce((p,m)=>(p.field.includes(m)||(p.field.push(m),p.order.push(h)),p),{field:[],order:[]})}return new vp(t,{dimensionFieldDefs:l,stackField:n.vgField(o),facetby:[],stackby:c,sort:f,offset:a,impute:u,as:[n.vgField(o,{suffix:"start",forAs:!0}),n.vgField(o,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${zn(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:t,impute:n,groupby:r}=this._stack;return t.length>0?t.map(i=>i.bin?n?[Ct(i,{binSuffix:"mid"})]:[Ct(i,{}),Ct(i,{binSuffix:"end"})]:[Ct(i)]).flat():r??[]}assemble(){const t=[],{facetby:n,dimensionFieldDefs:r,stackField:i,stackby:s,sort:o,offset:a,impute:u,as:l}=this._stack;if(u)for(const c of r){const{bandPosition:d=.5,bin:f}=c;if(f){const h=Ct(c,{expr:"datum"}),p=Ct(c,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${kz(h)} ? ${d}*${h}+${1-d}*${p} : ${h}`,as:Ct(c,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:i,groupby:[...s,...n],key:Ct(c,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:i,sort:o,as:l,offset:a}),t}}class IE extends Pr{clone(){return new IE(null,hn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=gf(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return(this.transform.groupby??[]).forEach(t.add,t),(this.transform.sort??[]).forEach(n=>t.add(n.field)),this.transform.window.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){return t.as??Ct(t)}hash(){return`WindowTransform ${zn(this.transform)}`}assemble(){const t=[],n=[],r=[],i=[];for(const d of this.transform.window)n.push(d.op),r.push(this.getDefaultName(d)),i.push(d.param===void 0?null:d.param),t.push(d.field===void 0?null:d.field);const s=this.transform.frame,o=this.transform.groupby;if(s&&s[0]===null&&s[1]===null&&n.every(d=>xX(d)))return{type:"joinaggregate",as:r,ops:n,fields:t,...o!==void 0?{groupby:o}:{}};const a=[],u=[];if(this.transform.sort!==void 0)for(const d of this.transform.sort)a.push(d.field),u.push(d.order??"ascending");const l={field:a,order:u},c=this.transform.ignorePeers;return{type:"window",params:i,as:r,ops:n,fields:t,sort:l,...c!==void 0?{ignorePeers:c}:{},...o!==void 0?{groupby:o}:{},...s!==void 0?{frame:s}:{}}}}function ALt(e){function t(n){if(!(n instanceof kE)){const r=n.clone();if(r instanceof Au){const i=Rz+r.getSource();r.setSource(i),e.model.component.data.outputNodes[i]=r}else(r instanceof ad||r instanceof vp||r instanceof IE||r instanceof wb)&&r.addDimensions(e.fields);for(const i of n.children.flatMap(t))i.parent=r;return[r]}return n.children.flatMap(t)}return t}function Iz(e){if(e instanceof kE)if(e.numChildren()===1&&!(e.children[0]instanceof Au)){const t=e.children[0];(t instanceof ad||t instanceof vp||t instanceof IE||t instanceof wb)&&t.addDimensions(e.fields),t.swapWithParent(),Iz(e)}else{const t=e.model.component.data.main;APe(t);const n=ALt(e),r=e.children.map(n).flat();for(const i of r)i.parent=t}else e.children.map(Iz)}function APe(e){if(e instanceof Au&&e.type===_i.Main&&e.numChildren()===1){const t=e.children[0];t instanceof kE||(t.swapWithParent(),APe(e))}}const Rz="scale_",BI=5;function Dz(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!Dz(t.children))return!1}return!0}function Dc(e,t){let n=!1;for(const r of t)n=e.optimize(r)||n;return n}function Rde(e,t,n){let r=e.sources,i=!1;return i=Dc(new yLt,r)||i,i=Dc(new mLt(t),r)||i,r=r.filter(s=>s.numChildren()>0),i=Dc(new xLt,r)||i,r=r.filter(s=>s.numChildren()>0),n||(i=Dc(new bLt,r)||i,i=Dc(new _Lt(t),r)||i,i=Dc(new gLt,r)||i,i=Dc(new vLt,r)||i,i=Dc(new ELt,r)||i,i=Dc(new wLt,r)||i,i=Dc(new pLt,r)||i,i=Dc(new TLt,r)||i),e.sources=r,i}function kLt(e,t){Dz(e.sources);let n=0,r=0;for(let i=0;i<BI&&Rde(e,t,!0);i++)n++;e.sources.map(Iz);for(let i=0;i<BI&&Rde(e,t,!1);i++)r++;Dz(e.sources),Math.max(n,r)===BI&&ht(`Maximum optimization runs(${BI}) reached.`)}class Gs{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,n){return new Gs(()=>t(n))}}function kPe(e){wi(e)?ILt(e):RLt(e)}function ILt(e){const t=e.component.scales;for(const n of at(t)){const r=PLt(e,n);if(t[n].setWithExplicit("domains",r),OLt(e,n),e.component.data.isFaceted){let s=e;for(;!dl(s)&&s.parent;)s=s.parent;if(s.component.resolve.scale[n]==="shared")for(const a of r.value)sp(a)&&(a.data=Rz+a.data.replace(Rz,""))}}}function RLt(e){for(const n of e.children)kPe(n);const t=e.component.scales;for(const n of at(t)){let r,i=null;for(const s of e.children){const o=s.component.scales[n];if(o){r===void 0?r=o.getWithExplicit("domains"):r=K0(r,o.getWithExplicit("domains"),"domains","scale",Pz);const a=o.get("selectionExtent");i&&a&&i.param!==a.param&&ht(f4t),i=a}}t[n].setWithExplicit("domains",r),i&&t[n].set("selectionExtent",i,!0)}}function DLt(e,t,n,r){if(e==="unaggregated"){const{valid:i,reason:s}=Dde(t,n);if(!i){ht(s);return}}else if(e===void 0&&r.useUnaggregatedDomain){const{valid:i}=Dde(t,n);if(i)return"unaggregated"}return e}function PLt(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:r}=e,i=DLt(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return i!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:i}),t==="x"&&Ts(r.x2)?Ts(r.x)?K0(Om(n,i,e,"x"),Om(n,i,e,"x2"),"domain","scale",Pz):Om(n,i,e,"x2"):t==="y"&&Ts(r.y2)?Ts(r.y)?K0(Om(n,i,e,"y"),Om(n,i,e,"y2"),"domain","scale",Pz):Om(n,i,e,"y2"):Om(n,i,e,t)}function NLt(e,t,n){return e.map(r=>({signal:`{data: ${D$(r,{timeUnit:n,type:t})}}`}))}function WF(e,t,n){var i;const r=(i=to(n))==null?void 0:i.unit;return t==="temporal"||r?NLt(e,t,r):[e]}function Om(e,t,n,r){const{encoding:i,markDef:s,mark:o,config:a,stack:u}=n,l=Ts(i[r]),{type:c}=l,d=l.timeUnit,f=g5t({invalid:Yf("invalid",s,a),isPath:Tg(o)});if(FOt(t)){const m=Om(e,void 0,n,r),y=WF(t.unionWith,c,d);return tf([...y,...m.value])}else{if(Wt(t))return tf([t]);if(t&&t!=="unaggregated"&&!pRe(t))return tf(WF(t,c,d))}if(u&&r===u.fieldChannel){if(u.offset==="normalize")return Xu([[0,1]]);const m=n.requestDataName(f);return Xu([{data:m,field:n.vgField(r,{suffix:"start"})},{data:m,field:n.vgField(r,{suffix:"end"})}])}const h=hh(r)&&gt(l)?$Lt(n,r,e):void 0;if(ph(l)){const m=WF([l.datum],c,d);return Xu(m)}const p=l;if(t==="unaggregated"){const{field:m}=l;return Xu([{data:n.requestDataName(f),field:Ct({field:m,aggregate:"min"})},{data:n.requestDataName(f),field:Ct({field:m,aggregate:"max"})}])}else if(Qr(p.bin)){if(io(e))return Xu(e==="bin-ordinal"?[]:[{data:AC(h)?n.requestDataName(f):n.requestDataName(_i.Raw),field:n.vgField(r,gA(p,r)?{binSuffix:"range"}:{}),sort:h===!0||!kt(h)?{field:n.vgField(r,{}),op:"min"}:h}]);{const{bin:m}=p;if(Qr(m)){const y=wQ(n,p.field,m);return Xu([new Gs(()=>{const v=n.getSignalName(y);return`[${v}.start, ${v}.stop]`})])}else return Xu([{data:n.requestDataName(f),field:n.vgField(r,{})}])}}else if(p.timeUnit&&$n(["time","utc"],e)){const m=i[fh(r)];if(RRe(p,m,s,a)){const y=n.requestDataName(f),v=Y0({fieldDef:p,fieldDef2:m,markDef:s,config:a}),b=IC(o)&&v!==.5&&Gi(r);return Xu([{data:y,field:n.vgField(r,b?{suffix:L$}:{})},{data:y,field:n.vgField(r,{suffix:b?F$:"end"})}])}}return Xu(h?[{data:AC(h)?n.requestDataName(f):n.requestDataName(_i.Raw),field:n.vgField(r),sort:h}]:[{data:n.requestDataName(f),field:n.vgField(r)}])}function GF(e,t){const{op:n,field:r,order:i}=e;return{op:n??(t?"sum":A$),...r?{field:oc(r)}:{},...i?{order:i}:{}}}function OLt(e,t){var a;const n=e.component.scales[t],r=e.specifiedScales[t].domain,i=(a=e.fieldDef(t))==null?void 0:a.bin,s=pRe(r)?r:void 0,o=pb(i)&&v$(i.extent)?i.extent:void 0;(s||o)&&n.set("selectionExtent",s??o,!0)}function $Lt(e,t,n){if(!io(n))return;const r=e.fieldDef(t),i=r.sort;if(kRe(i))return{op:"min",field:bw(r,t),order:"ascending"};const{stack:s}=e,o=s?new Set([...s.groupbyFields,...s.stackBy.map(a=>a.fieldDef.field)]):void 0;if(yp(i)){const a=s&&!o.has(i.field);return GF(i,a)}else if(g6t(i)){const{encoding:a,order:u}=i,l=e.fieldDef(a),{aggregate:c,field:d}=l,f=s&&!o.has(d);if(Mp(c)||_g(c))return GF({field:Ct(l),order:u},f);if(xX(c)||!c)return GF({op:c,field:d,order:u},f)}else{if(i==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if($n(["ascending",void 0],i))return!0}}function Dde(e,t){const{aggregate:n,type:r}=e;return n?It(n)&&!KNt.has(n)?{valid:!1,reason:z4t(n)}:r==="quantitative"&&t==="log"?{valid:!1,reason:U4t(e)}:{valid:!0}:{valid:!1,reason:j4t(e)}}function Pz(e,t,n,r){return e.explicit&&t.explicit&&ht(G4t(n,r,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function MLt(e){const t=gf(e.map(o=>{if(sp(o)){const{sort:a,...u}=o;return u}return o}),zn),n=gf(e.map(o=>{if(sp(o)){const a=o.sort;return a!==void 0&&!AC(a)&&("op"in a&&a.op==="count"&&delete a.field,a.order==="ascending"&&delete a.order),a}}).filter(o=>o!==void 0),zn);if(t.length===0)return;if(t.length===1){const o=e[0];if(sp(o)&&n.length>0){let a=n[0];if(n.length>1){ht(Nce);const u=n.filter(l=>kt(l)&&"op"in l&&l.op!=="min");n.every(l=>kt(l)&&"op"in l)&&u.length===1?a=u[0]:a=!0}else if(kt(a)&&"field"in a){const u=a.field;o.field===u&&(a=a.order?{order:a.order}:!0)}return{...o,sort:a}}return o}const r=gf(n.map(o=>AC(o)||!("op"in o)||It(o.op)&&Ot(qNt,o.op)?o:(ht(K4t(o)),!0)),zn);let i;r.length===1?i=r[0]:r.length>1&&(ht(Nce),i=!0);const s=gf(e.map(o=>sp(o)?o.data:null),o=>o);return s.length===1&&s[0]!==null?{data:s[0],fields:t.map(a=>a.field),...i?{sort:i}:{}}:{fields:t,...i?{sort:i}:{}}}function CQ(e){if(sp(e)&&It(e.field))return e.field;if(XNt(e)){let t;for(const n of e.fields)if(sp(n)&&It(n.field)){if(!t)t=n.field;else if(t!==n.field)return ht(X4t),t}return ht(Q4t),t}else if(QNt(e)){ht(J4t);const t=e.fields[0];return It(t)?t:void 0}}function G$(e,t){const r=e.component.scales[t].get("domains").map(i=>(sp(i)&&(i.data=e.lookupDataSource(i.data)),i));return MLt(r)}function IPe(e){return RE(e)||SQ(e)?e.children.reduce((t,n)=>t.concat(IPe(n)),Pde(e)):Pde(e)}function Pde(e){return at(e.component.scales).reduce((t,n)=>{const r=e.component.scales[n];if(r.merged)return t;const i=r.combine(),{name:s,type:o,selectionExtent:a,domains:u,range:l,reverse:c,...d}=i,f=LLt(i.range,s,n,e),h=G$(e,n),p=a?A5t(e,a,r,h):null;return t.push({name:s,type:o,...h?{domain:h}:{},...p?{domainRaw:p}:{},range:f,...c!==void 0?{reverse:c}:{},...d}),t},[])}function LLt(e,t,n,r){if(Gi(n)){if(mb(e))return{step:{signal:`${t}_step`}}}else if(kt(e)&&sp(e))return{...e,data:r.lookupDataSource(e.data)};return e}class RPe extends im{constructor(t,n){super({},{name:t}),this.merged=!1,this.setWithExplicit("type",n)}domainHasZero(){const t=this.get("type");if($n([_o.LOG,_o.TIME,_o.UTC],t))return"definitely-not";const n=this.get("zero");if(n===!0||n===void 0&&$n([_o.LINEAR,_o.SQRT,_o.POW],t))return"definitely";const r=this.get("domains");if(r.length>0){let i=!1,s=!1,o=!1;for(const a of r){if(Qe(a)){const u=a[0],l=a[a.length-1];if(pr(u)&&pr(l))if(u<=0&&l>=0){i=!0;continue}else{s=!0;continue}}o=!0}if(i)return"definitely";if(s&&!o)return"definitely-not"}return"maybe"}}const FLt=["range","scheme"];function BLt(e){const t=e.component.scales;for(const n of vX){const r=t[n];if(!r)continue;const i=jLt(n,e);r.setWithExplicit("range",i)}}function Nde(e,t){const n=e.fieldDef(t);if(n!=null&&n.bin){const{bin:r,field:i}=n,s=$u(t),o=e.getName(s);if(kt(r)&&r.binned&&r.step!==void 0)return new Gs(()=>{const a=e.scaleName(t),u=`(domain("${a}")[1] - domain("${a}")[0]) / ${r.step}`;return`${e.getSignalName(o)} / (${u})`});if(Qr(r)){const a=wQ(e,i,r);return new Gs(()=>{const u=e.getSignalName(a),l=`(${u}.stop - ${u}.start) / ${u}.step`;return`${e.getSignalName(o)} / (${l})`})}}}function jLt(e,t){const n=t.specifiedScales[e],{size:r}=t,s=t.getScaleComponent(e).get("type");for(const d of FLt)if(n[d]!==void 0){const f=cz(s,d),h=mRe(e,d);if(!f)ht(YIe(s,d,e));else if(h)ht(h);else switch(d){case"range":{const p=n.range;if(Qe(p)){if(Gi(e))return tf(p.map(m=>{if(m==="width"||m==="height"){const y=t.getName(m),v=t.getSignalName.bind(t);return Gs.fromName(v,y)}return m}))}else if(kt(p))return tf({data:t.requestDataName(_i.Main),field:p.field,sort:{op:"min",field:t.vgField(e)}});return tf(p)}case"scheme":return tf(zLt(n[d]))}}const o=e===pi||e==="xOffset"?"width":"height",a=r[o];if(Xf(a)){if(Gi(e))if(io(s)){const d=PPe(a,t,e);if(d)return tf({step:d})}else ht(KIe(o));else if(lA(e)){const d=e===yg?"x":"y";if(t.getScaleComponent(d).get("type")==="band"){const p=NPe(a,s);if(p)return tf(p)}}}const{rangeMin:u,rangeMax:l}=n,c=ULt(e,t);return(u!==void 0||l!==void 0)&&cz(s,"rangeMin")&&Qe(c)&&c.length===2?tf([u??c[0],l??c[1]]):Xu(c)}function zLt(e){return LOt(e)?{scheme:e.name,...Su(e,["name"])}:{scheme:e}}function DPe(e,t,n,{center:r}={}){const i=$u(e),s=t.getName(i),o=t.getSignalName.bind(t);return e===uo&&pd(n)?r?[Gs.fromName(a=>`${o(a)}/2`,s),Gs.fromName(a=>`-${o(a)}/2`,s)]:[Gs.fromName(o,s),0]:r?[Gs.fromName(a=>`-${o(a)}/2`,s),Gs.fromName(a=>`${o(a)}/2`,s)]:[0,Gs.fromName(o,s)]}function ULt(e,t){const{size:n,config:r,mark:i,encoding:s}=t,{type:o}=Ts(s[e]),u=t.getScaleComponent(e).get("type"),{domain:l,domainMid:c}=t.specifiedScales[e];switch(e){case pi:case uo:{if($n(["point","band"],u)){const d=OPe(e,n,r.view);if(Xf(d))return{step:PPe(d,t,e)}}return DPe(e,t,u)}case yg:case TE:return VLt(e,t,u);case em:{const d=WLt(i,r),f=GLt(i,n,t,r);return dw(u)?qLt(d,f,HLt(u,r,l,e)):[d,f]}case yc:return[0,Math.PI*2];case fb:return[0,360];case kd:return[0,new Gs(()=>{const d=t.getSignalName(dl(t.parent)?"child_width":"width"),f=t.getSignalName(dl(t.parent)?"child_height":"height");return`min(${d},${f})/2`})];case bg:return{step:1e3/r.scale.framesPerSecond};case wg:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case Eg:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case Ou:return"symbol";case Nu:case ch:case dh:return u==="ordinal"?o==="nominal"?"category":"ordinal":c!==void 0?"diverging":i==="rect"||i==="geoshape"?"heatmap":"ramp";case tm:case vg:case xg:return[r.scale.minOpacity,r.scale.maxOpacity]}}function PPe(e,t,n){const{encoding:r}=t,i=t.getScaleComponent(n),s=mX(n),o=r[s];if(uDe({step:e,offsetIsDiscrete:bn(o)&&lRe(o.type)})==="offset"&&URe(r,s)){const u=t.getScaleComponent(s);let c=`domain('${t.scaleName(s)}').length`;if(u.get("type")==="band"){const f=u.get("paddingInner")??u.get("padding")??0,h=u.get("paddingOuter")??u.get("padding")??0;c=`bandspace(${c}, ${f}, ${h})`}const d=i.get("paddingInner")??i.get("padding");return{signal:`${e.step} * ${c} / (1-${t4t(d)})`}}else return e.step}function NPe(e,t){if(uDe({step:e,offsetIsDiscrete:io(t)})==="offset")return{step:e.step}}function VLt(e,t,n){const r=e===yg?"x":"y",i=t.getScaleComponent(r);if(!i)return DPe(r,t,n,{center:!0});const s=i.get("type"),o=t.scaleName(r),{markDef:a,config:u}=t;if(s==="band"){const l=OPe(r,t.size,t.config.view);if(Xf(l)){const c=NPe(l,n);if(c)return c}return[0,{signal:`bandwidth('${o}')`}]}else{const l=t.encoding[r];if(gt(l)&&l.timeUnit){const c=sRe(l.timeUnit,p=>`scale('${o}', ${p})`),d=t.config.scale.bandWithNestedOffsetPaddingInner,f=Y0({fieldDef:l,markDef:a,config:u})-.5,h=f!==0?` + ${f}`:"";if(d){const p=Wt(d)?`${d.signal}/2`+h:`${d/2+f}`,m=Wt(d)?`(1 - ${d.signal}/2)`+h:`${1-d/2+f}`;return[{signal:`${p} * (${c})`},{signal:`${m} * (${c})`}]}return[0,{signal:c}]}return gIe(`Cannot use ${e} scale if ${r} scale is not discrete.`)}}function OPe(e,t,n){const r=e===pi?"width":"height",i=t[r];return i||YN(n,r)}function HLt(e,t,n,r){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&Qe(n)?n.length+1:(ht(aOt(r)),3)}}function qLt(e,t,n){const r=()=>{const i=Zc(t),s=Zc(e),o=`(${i} - ${s}) / (${n} - 1)`;return`sequence(${s}, ${i} + ${o}, ${o})`};return Wt(t)?new Gs(r):{signal:r()}}function WLt(e,t){switch(e){case"bar":case"tick":return t.scale.minBandSize;case"line":case"trail":case"rule":return t.scale.minStrokeWidth;case"text":return t.scale.minFontSize;case"point":case"square":case"circle":return t.scale.minSize}throw new Error(x$("size",e))}const Ode=.95;function GLt(e,t,n,r){const i={x:Nde(n,"x"),y:Nde(n,"y")};switch(e){case"bar":case"tick":{if(r.scale.maxBandSize!==void 0)return r.scale.maxBandSize;const s=$de(t,i,r.view);return pr(s)?s-1:new Gs(()=>`${s.signal} - 1`)}case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":{if(r.scale.maxSize)return r.scale.maxSize;const s=$de(t,i,r.view);return pr(s)?Math.pow(Ode*s,2):new Gs(()=>`pow(${Ode} * ${s.signal}, 2)`)}}throw new Error(x$("size",e))}function $de(e,t,n){const r=Xf(e.width)?e.width.step:pz(n,"width"),i=Xf(e.height)?e.height.step:pz(n,"height");return t.x||t.y?new Gs(()=>`min(${[t.x?t.x.signal:r,t.y?t.y.signal:i].join(", ")})`):Math.min(r,i)}function $Pe(e,t){wi(e)?YLt(e,t):LPe(e,t)}function YLt(e,t){const n=e.component.scales,{config:r,encoding:i,markDef:s,specifiedScales:o}=e;for(const a of at(n)){const u=o[a],l=n[a],c=e.getScaleComponent(a),d=Ts(i[a]),f=u[t],h=c.get("type"),p=c.get("padding"),m=c.get("paddingInner"),y=cz(h,t),v=mRe(a,t);if(f!==void 0&&(y?v&&ht(v):ht(YIe(h,t,a))),y&&v===void 0)if(f!==void 0){const b=d.timeUnit,w=d.type;switch(t){case"domainMax":case"domainMin":gb(u[t])||w==="temporal"||b?l.set(t,{signal:D$(u[t],{type:w,timeUnit:b})},!0):l.set(t,u[t],!0);break;default:l.copyKeyFromObject(t,u)}}else{const b=ct(Mde,t)?Mde[t]({model:e,channel:a,fieldOrDatumDef:d,scaleType:h,scalePadding:p,scalePaddingInner:m,domain:u.domain,domainMin:u.domainMin,domainMax:u.domainMax,markDef:s,config:r,hasNestedOffsetScale:VRe(i,a),hasSecondaryRangeChannel:!!i[fh(a)]}):r.scale[t];b!==void 0&&l.set(t,b,!1)}}}const Mde={bins:({model:e,fieldOrDatumDef:t})=>gt(t)?KLt(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>XLt(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:r,domainMax:i,fieldOrDatumDef:s})=>QLt(e,t,n,r,i,s),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:r,config:i})=>JLt(e,t,i.scale,n,r,i.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:r,config:i,hasNestedOffsetScale:s})=>ZLt(e,t,n.type,r,i.scale,s),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:r,config:i,hasNestedOffsetScale:s})=>eFt(e,t,n,r,i.scale,s),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:r})=>{const i=gt(e)?e.sort:void 0;return tFt(t,i,n,r.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:r,scaleType:i,config:s,hasSecondaryRangeChannel:o})=>nFt(e,t,n,r,i,s.scale,o)};function MPe(e){wi(e)?BLt(e):LPe(e,"range")}function LPe(e,t){const n=e.component.scales;for(const r of e.children)t==="range"?MPe(r):$Pe(r,t);for(const r of at(n)){let i;for(const s of e.children){const o=s.component.scales[r];if(o){const a=o.getWithExplicit(t);i=K0(i,a,t,"scale",wDe((u,l)=>{switch(t){case"range":return u.step&&l.step?u.step-l.step:0}return 0}))}}n[r].setWithExplicit(t,i)}}function KLt(e,t){const n=t.bin;if(Qr(n)){const r=wQ(e,t.field,n);return new Gs(()=>e.getSignalName(r))}else if(wo(n)&&pb(n)&&n.step!==void 0)return{step:n.step}}function XLt(e,t){if($n([Nu,ch,dh],e)&&t!=="nominal")return"hcl"}function QLt(e,t,n,r,i,s){var o;if(!((o=gd(s))!=null&&o.bin||Qe(n)||i!=null||r!=null||$n([_o.TIME,_o.UTC],e)))return Gi(t)?!0:void 0}function JLt(e,t,n,r,i,s){if(Gi(e)){if(yf(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:o,orient:a}=i;if(o==="bar"&&!(gt(r)&&(r.bin||r.timeUnit))&&(a==="vertical"&&e==="x"||a==="horizontal"&&e==="y"))return s.continuousBandSize}if(t===_o.POINT)return n.pointPadding}}function ZLt(e,t,n,r,i,s=!1){if(e===void 0){if(Gi(t)){const{bandPaddingInner:o,barBandPaddingInner:a,rectBandPaddingInner:u,tickBandPaddingInner:l,bandWithNestedOffsetPaddingInner:c}=i;return s?c:Wi(o,n==="bar"?a:n==="tick"?l:u)}else if(lA(t)&&r===_o.BAND)return i.offsetBandPaddingInner}}function eFt(e,t,n,r,i,s=!1){if(e===void 0){if(Gi(t)){const{bandPaddingOuter:o,bandWithNestedOffsetPaddingOuter:a}=i;if(s)return a;if(n===_o.BAND)return Wi(o,Wt(r)?{signal:`${r.signal}/2`}:r/2)}else if(lA(t)){if(n===_o.POINT)return .5;if(n===_o.BAND)return i.offsetBandPaddingOuter}}}function tFt(e,t,n,r){if(n==="x"&&r.xReverse!==void 0)return pd(e)&&t==="descending"?Wt(r.xReverse)?{signal:`!${r.xReverse.signal}`}:!r.xReverse:r.xReverse;if(pd(e)&&t==="descending")return!0}function nFt(e,t,n,r,i,s,o){if(!!n&&n!=="unaggregated"&&pd(i)){if(Qe(n)){const u=n[0],l=n[n.length-1];if(pr(u)&&u<=0&&pr(l)&&l>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!dw(i))return!0;if(!(gt(t)&&t.bin)&&$n([...nm,...MNt],e)){const{orient:u,type:l}=r;return $n(["bar","area","line","trail"],l)&&(u==="horizontal"&&e==="y"||u==="vertical"&&e==="x")?!1:$n(["bar","area"],l)&&!o?!0:s==null?void 0:s.zero}return!1}function rFt(e,t,n,r,i=!1){const s=iFt(t,n,r,i),{type:o}=e;return hh(t)?o!==void 0?HOt(t,o)?gt(n)&&!VOt(o,n.type)?(ht(q4t(o,s)),s):o:(ht(H4t(t,o,s)),s):s:null}function iFt(e,t,n,r){var i;switch(t.type){case"nominal":case"ordinal":{if(mx(e)||PF(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&ht(NF(e,"ordinal")),"ordinal";if(DF(e))return"band";if(Gi(e)||lA(e)){if($n(["rect","bar","image","rule","tick"],n.type)||r)return"band"}else if(n.type==="arc"&&e in bX)return"band";const s=n[$u(e)];return C1(s)||hw(t)&&((i=t.axis)!=null&&i.tickBand)?"band":"point"}case"temporal":return mx(e)?"time":PF(e)==="discrete"?(ht(NF(e,"temporal")),"ordinal"):gt(t)&&t.timeUnit&&to(t.timeUnit).utc?"utc":DF(e)?"band":"time";case"quantitative":return mx(e)?gt(t)&&Qr(t.bin)?"bin-ordinal":"linear":PF(e)==="discrete"?(ht(NF(e,"quantitative")),"ordinal"):DF(e)?"band":"linear";case"geojson":return}throw new Error(WIe(t.type))}function sFt(e,{ignoreRange:t}={}){FPe(e),kPe(e);for(const n of UOt)$Pe(e,n);t||MPe(e)}function FPe(e){wi(e)?e.component.scales=oFt(e):e.component.scales=uFt(e)}function oFt(e){const{encoding:t,mark:n,markDef:r}=e,i={};for(const s of vX){const o=Ts(t[s]);if(o&&n===bRe&&s===Ou&&o.type===CE)continue;let a=o&&o.scale;if(o&&a!==null&&a!==!1){a??(a={});const u=VRe(t,s),l=rFt(a,s,o,r,u);i[s]=new RPe(e.scaleName(`${s}`,!0),{value:l,explicit:a.type===l})}}return i}const aFt=wDe((e,t)=>$ce(e)-$ce(t));function uFt(e){var t;const n=e.component.scales={},r={},i=e.component.resolve;for(const s of e.children){FPe(s);for(const o of at(s.component.scales))if((t=i.scale)[o]??(t[o]=mPe(o,e)),i.scale[o]==="shared"){const a=r[o],u=s.component.scales[o].getWithExplicit("type");a?POt(a.value,u.value)?r[o]=K0(a,u,"type","scale",aFt):(i.scale[o]="independent",delete r[o]):r[o]=u}}for(const s of at(r)){const o=e.scaleName(s,!0),a=r[s];n[s]=new RPe(o,a);for(const u of e.children){const l=u.component.scales[s];l&&(u.renameScale(l.get("name"),o),l.merged=!0)}}return n}class YF{constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function wi(e){return(e==null?void 0:e.type)==="unit"}function dl(e){return(e==null?void 0:e.type)==="facet"}function SQ(e){return(e==null?void 0:e.type)==="concat"}function RE(e){return(e==null?void 0:e.type)==="layer"}class AQ{constructor(t,n,r,i,s,o,a){this.type=n,this.parent=r,this.config=s,this.parent=r,this.config=s,this.view=Eo(a),this.name=t.name??i,this.title=zm(t.title)?{text:t.title}:t.title?Eo(t.title):void 0,this.scaleNameMap=r?r.scaleNameMap:new YF,this.projectionNameMap=r?r.projectionNameMap:new YF,this.signalNameMap=r?r.signalNameMap:new YF,this.data=t.data,this.description=t.description,this.transforms=i5t(t.transform??[]),this.layout=n==="layer"||n==="unit"?{}:u$t(t,n,s),this.component={data:{sources:r?r.component.data.sources:[],outputNodes:r?r.component.data.outputNodes:{},outputNodeRefCounts:r?r.component.data.outputNodeRefCounts:{},isFaceted:k$(t)||(r==null?void 0:r.component.data.isFaceted)&&t.data===void 0},layoutSize:new im,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...o?hn(o):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){sFt(this)}parseProjection(){CPe(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){xPe(this)}assembleEncodeFromView(t){const{style:n,...r}=t,i={};for(const s of at(r)){const o=r[s];o!==void 0&&(i[s]=si(o))}return i}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=si(this.description)),this.type==="unit"||this.type==="layer")?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...n}:Mr(n)?void 0:n}assembleLayout(){if(!this.layout)return;const{spacing:t,...n}=this.layout,{component:r,config:i}=this,s=k8t(r.layoutHeaders,i);return{padding:t,...this.assembleDefaultLayout(),...n,...s?{titleBand:s}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const r of Kl)t[r].title&&n.push(E8t(this,r));for(const r of yQ)n=n.concat(_8t(this,r));return n}assembleAxes(){return l8t(this.component.axes,this.config)}assembleLegends(){return EPe(this)}assembleProjections(){return Q8t(this)}assembleTitle(){const{encoding:t,...n}=this.title??{},r={...LIe(this.config.title).nonMarkTitleProperties,...n,...t?{encode:{update:t}}:{}};if(r.text)return $n(["unit","layer"],this.type)?$n(["middle",void 0],r.anchor)&&(r.frame??(r.frame="group")):r.anchor??(r.anchor="start"),Mr(r)?void 0:r}assembleGroup(t=[]){const n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);const r=this.assembleLayout();r&&(n.layout=r),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const i=!this.parent||dl(this.parent)?IPe(this):[];i.length>0&&(n.scales=i);const s=this.assembleAxes();s.length>0&&(n.axes=s);const o=this.assembleLegends();return o.length>0&&(n.legends=o),n}getName(t){return fi((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(_i[t].toLowerCase())}requestDataName(t){const n=this.getDataName(t),r=this.component.data.outputNodeRefCounts;return r[n]=(r[n]||0)+1,n}getSizeSignalRef(t){if(dl(this.parent)){const n=hPe(t),r=y$(n),i=this.component.scales[r];if(i&&!i.merged){const s=i.get("type"),o=i.get("range");if(io(s)&&mb(o)){const a=i.get("name"),u=G$(this,r),l=CQ(u);if(l){const c=Ct({aggregate:"distinct",field:l},{expr:"datum"});return{signal:fPe(a,i,c)}}else return ht(EX(r)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(IIe(t)&&hh(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getScaleType(t){const n=this.getScaleComponent(t);return n?n.get("type"):void 0}getSelectionComponent(t,n){let r=this.component.selection[t];if(!r&&this.parent&&(r=this.parent.getSelectionComponent(t,n)),!r)throw new Error(o4t(n));return r}hasAxisOrientSignalRef(){var t,n;return((t=this.component.axes.x)==null?void 0:t.some(r=>r.hasOrientSignalRef()))||((n=this.component.axes.y)==null?void 0:n.some(r=>r.hasOrientSignalRef()))}}class BPe extends AQ{vgField(t,n={}){const r=this.fieldDef(t);if(r)return Ct(r,n)}reduceFieldDef(t,n){return L6t(this.getMapping(),(r,i,s)=>{const o=gd(i);return o?t(r,o,s):r},n)}forEachFieldDef(t,n){XX(this.getMapping(),(r,i)=>{const s=gd(r);s&&t(s,i)},n)}}class Y$ extends Pr{clone(){return new Y$(null,hn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=hn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"value",r[1]??"density"];const i=this.transform.resolve??"shared";this.transform.resolve=i}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${zn(this.transform)}`}assemble(){const{density:t,...n}=this.transform,r={type:"kde",field:t,...n};return r.resolve=this.transform.resolve,r}}class K$ extends Pr{clone(){return new K$(null,hn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=hn(n)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${zn(this.transform)}`}assemble(){const{extent:t,param:n}=this.transform;return{type:"extent",field:t,signal:n}}}class X$ extends Pr{clone(){return new X$(this.parent,hn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=hn(n);const{flatten:r,as:i=[]}=this.transform;this.transform.as=r.map((s,o)=>i[o]??s)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${zn(this.transform)}`}assemble(){const{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}}class Q$ extends Pr{clone(){return new Q$(null,hn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=hn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"key",r[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${zn(this.transform)}`}assemble(){const{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}}class bx extends Pr{clone(){return new bx(null,hn(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let r=0;for(const i of[[Rd,Id],[ac,Dd]]){const s=i.map(o=>{const a=Ts(n.encoding[o]);return gt(a)?a.field:ph(a)?{expr:`${a.datum}`}:md(a)?{expr:`${a.value}`}:void 0});(s[0]||s[1])&&(t=new bx(t,s,null,n.getName(`geojson_${r++}`)))}if(n.channelHasField(Ou)){const i=n.typedFieldDef(Ou);i.type===CE&&(t=new bx(t,null,i.field,n.getName(`geojson_${r++}`)))}return t}constructor(t,n,r,i){super(t),this.fields=n,this.geojson=r,this.signal=i}dependentFields(){const t=(this.fields??[]).filter(It);return new Set([...this.geojson?[this.geojson]:[],...t])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${zn(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class NC extends Pr{clone(){return new NC(null,this.projection,hn(this.fields),hn(this.as))}constructor(t,n,r,i){super(t),this.projection=n,this.fields=r,this.as=i}static parseAll(t,n){if(!n.projectionName())return t;for(const r of[[Rd,Id],[ac,Dd]]){const i=r.map(o=>{const a=Ts(n.encoding[o]);return gt(a)?a.field:ph(a)?{expr:`${a.datum}`}:md(a)?{expr:`${a.value}`}:void 0}),s=r[0]===ac?"2":"";(i[0]||i[1])&&(t=new NC(t,n.projectionName(),i,[n.getName(`x${s}`),n.getName(`y${s}`)]))}return t}dependentFields(){return new Set(this.fields.filter(It))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${zn(this.fields)} ${zn(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class Ky extends Pr{clone(){return new Ky(null,hn(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:n=0,stop:r,step:i}=t;return{signal:`sequence(${[n,r,...i?[i]:[]].join(",")})`}}static makeFromTransform(t,n){return new Ky(t,n)}static makeFromEncoding(t,n){const r=n.encoding,i=r.x,s=r.y;if(gt(i)&&gt(s)){const o=i.impute?i:s.impute?s:void 0;if(o===void 0)return;const a=i.impute?s:s.impute?i:void 0,{method:u,value:l,frame:c,keyvals:d}=o.impute,f=WRe(n.mark,r);return new Ky(t,{impute:o.field,key:a.field,...u?{method:u}:{},...l!==void 0?{value:l}:{},...c?{frame:c}:{},...d!==void 0?{keyvals:d}:{},...f.length?{groupby:f}:{}})}return null}hash(){return`Impute ${zn(this.transform)}`}assemble(){const{impute:t,key:n,keyvals:r,method:i,groupby:s,value:o,frame:a=[null,null]}=this.transform,u={type:"impute",field:t,key:n,...r?{keyvals:B$t(r)?this.processSequence(r):r}:{},method:"value",...s?{groupby:s}:{},value:!i||i==="value"?o:null};if(i&&i!=="value"){const l={type:"window",as:[`imputed_${t}_value`],ops:[i],fields:[t],frame:a,ignorePeers:!1,...s?{groupby:s}:{}},c={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[u,l,c]}else return[u]}}class J$ extends Pr{clone(){return new J$(null,hn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=hn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${zn(this.transform)}`}assemble(){const{loess:t,on:n,...r}=this.transform;return{type:"loess",x:n,y:t,...r}}}class OC extends Pr{clone(){return new OC(null,hn(this.transform),this.secondary)}constructor(t,n,r){super(t),this.transform=n,this.secondary=r}static make(t,n,r,i){const s=n.component.data.sources,{from:o}=r;let a=null;if(j$t(o)){let u=UPe(o.data,s);u||(u=new D1(o.data),s.push(u));const l=n.getName(`lookup_${i}`);a=new Au(u,l,_i.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[l]=a}else if(z$t(o)){const u=o.param;r={as:u,...r};let l;try{l=n.getSelectionComponent(fi(u),u)}catch{throw new Error(c4t(u))}if(a=l.materialized,!a)throw new Error(d4t(u))}return new OC(t,r,a.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?Rt(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${zn({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t={values:this.transform.from.fields,...this.transform.as?{as:Rt(this.transform.as)}:{}};else{let n=this.transform.as;It(n)||(ht(E4t),n="_lookup"),t={as:[n]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...t,...this.transform.default?{default:this.transform.default}:{}}}}class Z$ extends Pr{clone(){return new Z$(null,hn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=hn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"prob",r[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${zn(this.transform)}`}assemble(){const{quantile:t,...n}=this.transform;return{type:"quantile",field:t,...n}}}class e5 extends Pr{clone(){return new e5(null,hn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=hn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${zn(this.transform)}`}assemble(){const{regression:t,on:n,...r}=this.transform;return{type:"regression",x:n,y:t,...r}}}class t5 extends Pr{clone(){return new t5(null,hn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=gf((this.transform.groupby??[]).concat(t),n=>n)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${zn(this.transform)}`}assemble(){const{pivot:t,value:n,groupby:r,limit:i,op:s}=this.transform;return{type:"pivot",field:t,value:n,...i!==void 0?{limit:i}:{},...s!==void 0?{op:s}:{},...r!==void 0?{groupby:r}:{}}}}class n5 extends Pr{clone(){return new n5(null,hn(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${zn(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function jPe(e){let t=0;function n(r,i){if(r instanceof D1&&!r.isGenerator&&!mw(r.data)&&(e.push(i),i={name:null,source:i.name,transform:[]}),r instanceof ua&&(r.parent instanceof D1&&!i.source?(i.format={...i.format,parse:r.assembleFormatParse()},i.transform.push(...r.assembleTransforms(!0))):i.transform.push(...r.assembleTransforms())),r instanceof kE){i.name||(i.name=`data_${t++}`),!i.source||i.transform.length>0?(e.push(i),r.data=i.name):r.data=i.source,e.push(...r.assemble());return}switch((r instanceof EA||r instanceof _A||r instanceof xw||r instanceof AE||r instanceof yw||r instanceof NC||r instanceof ad||r instanceof OC||r instanceof IE||r instanceof wb||r instanceof Q$||r instanceof X$||r instanceof Y$||r instanceof J$||r instanceof Z$||r instanceof e5||r instanceof X0||r instanceof n5||r instanceof t5||r instanceof K$)&&i.transform.push(r.assemble()),(r instanceof Pf||r instanceof Rf||r instanceof Ky||r instanceof vp||r instanceof bx)&&i.transform.push(...r.assemble()),r instanceof Au&&(i.source&&i.transform.length===0?r.setSource(i.source):r.parent instanceof Au?r.setSource(i.name):(i.name||(i.name=`data_${t++}`),r.setSource(i.name),r.numChildren()===1&&(e.push(i),i={name:null,source:i.name,transform:[]}))),r.numChildren()){case 0:r instanceof Au&&(!i.source||i.transform.length>0)&&e.push(i);break;case 1:n(r.children[0],i);break;default:{i.name||(i.name=`data_${t++}`);let s=i.name;!i.source||i.transform.length>0?e.push(i):s=i.source;for(const o of r.children)n(o,{name:null,source:s,transform:[]});break}}}return n}function lFt(e){const t=[],n=jPe(t);for(const r of e.children)n(r,{source:e.name,name:null,transform:[]});return t}function cFt(e,t){const n=[],r=jPe(n);let i=0;for(const o of e.sources){o.hasName()||(o.dataName=`source_${i++}`);const a=o.assemble();r(o,a)}for(const o of n)o.transform.length===0&&delete o.transform;let s=0;for(const[o,a]of n.entries())(a.transform??[]).length===0&&!a.source&&n.splice(s++,0,n.splice(o,1)[0]);for(const o of n)for(const a of o.transform??[])a.type==="lookup"&&(a.from=e.outputNodes[a.from].getSource());for(const o of n)o.name in t&&(o.values=t[o.name]);return n}function dFt(e){return e==="top"||e==="left"||Wt(e)?"header":"footer"}function fFt(e){for(const t of Kl)hFt(e,t);Lde(e,"x"),Lde(e,"y")}function hFt(e,t){var o;const{facet:n,config:r,child:i,component:s}=e;if(e.channelHasField(t)){const a=n[t],u=vw("title",null,r,t);let l=gx(a,r,{allowDisabling:!0,includeDefault:u===void 0||!!u});i.component.layoutHeaders[t].title&&(l=Qe(l)?l.join(", "):l,l+=` / ${i.component.layoutHeaders[t].title}`,i.component.layoutHeaders[t].title=null);const c=vw("labelOrient",a.header,r,t),d=a.header!==null?Wi((o=a.header)==null?void 0:o.labels,r.header.labels,!0):!1,f=$n(["bottom","right"],c)?"footer":"header";s.layoutHeaders[t]={title:a.header!==null?l:null,facetFieldDef:a,[f]:t==="facet"?[]:[zPe(e,t,d)]}}}function zPe(e,t,n){const r=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(r)?e.child.getSizeSignalRef(r):void 0,axes:[]}}function Lde(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:r,resolve:i}=e.component;if(i.axis[t]=xQ(i,t),i.axis[t]==="shared"){const s=t==="x"?"column":"row",o=r[s];for(const a of n.component.axes[t]){const u=dFt(a.get("orient"));o[u]??(o[u]=[zPe(e,s,!1)]);const l=MT(a,"main",e.config,{header:!0});l&&o[u][0].axes.push(l),a.mainExtracted=!0}}}}function pFt(e){kQ(e),ZN(e,"width"),ZN(e,"height")}function mFt(e){kQ(e);const t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";ZN(e,t),ZN(e,n)}function kQ(e){for(const t of e.children)t.parseLayoutSize()}function ZN(e,t){const n=hPe(t),r=y$(n),i=e.component.resolve,s=e.component.layoutSize;let o;for(const a of e.children){const u=a.component.layoutSize.getWithExplicit(n),l=i.scale[r]??mPe(r,e);if(l==="independent"&&u.value==="step"){o=void 0;break}if(o){if(l==="independent"&&o.value!==u.value){o=void 0;break}o=K0(o,u,n,"")}else o=u}if(o){for(const a of e.children)e.renameSignal(a.getName(n),e.getName(t)),a.component.layoutSize.set(n,"merged",!1);s.setWithExplicit(t,o)}else s.setWithExplicit(t,{explicit:!1,value:void 0})}function gFt(e){const{size:t,component:n}=e;for(const r of nm){const i=$u(r);if(t[i]){const s=t[i];n.layoutSize.set(i,Xf(s)?"step":s,!0)}else{const s=yFt(e,i);n.layoutSize.set(i,s,!1)}}}function yFt(e,t){const n=t==="width"?"x":"y",r=e.config,i=e.getScaleComponent(n);if(i){const s=i.get("type"),o=i.get("range");if(io(s)){const a=YN(r.view,t);return mb(o)||Xf(a)?"step":a}else return hz(r.view,t)}else{if(e.hasProjection||e.mark==="arc")return hz(r.view,t);{const s=YN(r.view,t);return Xf(s)?s.step:s}}}function Nz(e,t,n){return Ct(t,{suffix:`by_${Ct(e)}`,...n})}class v2 extends BPe{constructor(t,n,r,i){super(t,"facet",n,r,i,t.resolve),this.child=NQ(t.spec,this,this.getName("child"),void 0,i),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!hA(t))return{facet:this.initFacetFieldDef(t,"facet")};const n=at(t),r={};for(const i of n){if(![mp,gp].includes(i)){ht(x$(i,"facet"));break}const s=t[i];if(s.field===void 0){ht(uz(s,i));break}r[i]=this.initFacetFieldDef(s,i)}return r}initFacetFieldDef(t,n){const r=KX(t,n);return r.header?r.header=Eo(r.header):r.header===null&&(r.header=null),r}channelHasField(t){return ct(this.facet,t)}fieldDef(t){return this.facet[t]}parseData(){this.component.data=r5(this),this.child.parseData()}parseLayoutSize(){kQ(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection,Object.values(this.component.selection).some(t=>Df(t))&&TX(_X)}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),fFt(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){const t={};for(const n of Kl)for(const r of bQ){const i=this.component.layoutHeaders[n],s=i[r],{facetFieldDef:o}=i;if(o){const a=vw("titleOrient",o.header,this.config,n);if(["right","bottom"].includes(a)){const u=q$(n,a);t.titleAnchor??(t.titleAnchor={}),t.titleAnchor[u]="end"}}if(s!=null&&s[0]){const a=n==="row"?"height":"width",u=r==="header"?"headerBand":"footerBand";n!=="facet"&&!this.child.component.layoutSize.get(a)&&(t[u]??(t[u]={}),t[u][n]=.5),i.title&&(t.offset??(t.offset={}),t.offset[n==="row"?"rowTitle":"columnTitle"]=10)}}return t}assembleDefaultLayout(){const{column:t,row:n}=this.facet,r=t?this.columnDistinctSignal():n?1:void 0;let i="all";return(!n&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(i="none"),{...this.getHeaderLayoutMixins(),...r?{columns:r}:{},bounds:"full",align:i}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof v2))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof v2?{...this.channelHasField("column")?{encode:{update:{columns:{field:Ct(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(t)}:super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],n=[],r=[];if(this.child instanceof v2){if(this.child.channelHasField("column")){const i=Ct(this.child.facet.column);t.push(i),n.push("distinct"),r.push(`distinct_${i}`)}}else for(const i of nm){const s=this.child.component.scales[i];if(s&&!s.merged){const o=s.get("type"),a=s.get("range");if(io(o)&&mb(a)){const u=G$(this.child,i),l=CQ(u);l?(t.push(l),n.push("distinct"),r.push(`distinct_${l}`)):ht(EX(i))}}}return{fields:t,ops:n,as:r}}assembleFacet(){const{name:t,data:n}=this.component.data.facetRoot,{row:r,column:i}=this.facet,{fields:s,ops:o,as:a}=this.getCardinalityAggregateForChild(),u=[];for(const c of Kl){const d=this.facet[c];if(d){u.push(Ct(d));const{bin:f,sort:h}=d;if(Qr(f)&&u.push(Ct(d,{binSuffix:"end"})),yp(h)){const{field:p,op:m=A$}=h,y=Nz(d,h);r&&i?(s.push(y),o.push("max"),a.push(y)):(s.push(p),o.push(m),a.push(y))}else if(Qe(h)){const p=bw(d,c);s.push(p),o.push("max"),a.push(p)}}}const l=!!r&&!!i;return{name:t,data:n,groupby:u,...l||s.length>0?{aggregate:{...l?{cross:l}:{},...s.length?{fields:s,ops:o,as:a}:{}}}:{}}}facetSortFields(t){const{facet:n}=this,r=n[t];return r?yp(r.sort)?[Nz(r,r.sort,{expr:"datum"})]:Qe(r.sort)?[bw(r,t,{expr:"datum"})]:[Ct(r,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:n}=this,r=n[t];if(r){const{sort:i}=r;return[(yp(i)?i.order:!Qe(i)&&i)||"ascending"]}return[]}assembleLabelTitle(){var i;const{facet:t,config:n}=this;if(t.facet)return Sz(t.facet,"facet",n);const r={row:["top","bottom"],column:["left","right"]};for(const s of yQ)if(t[s]){const o=vw("labelOrient",(i=t[s])==null?void 0:i.header,n,s);if(r[s].includes(o))return Sz(t[s],s,n)}}assembleMarks(){const{child:t}=this,n=this.component.data.facetRoot,r=lFt(n),i=t.assembleGroupEncodeEntry(!1),s=this.assembleLabelTitle()||t.assembleTitle(),o=t.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...s?{title:s}:{},...o?{style:o}:{},from:{facet:this.assembleFacet()},sort:{field:Kl.map(u=>this.facetSortFields(u)).flat(),order:Kl.map(u=>this.facetSortOrder(u)).flat()},...r.length>0?{data:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup(_5t(this,[]))}]}getMapping(){return this.facet}}function bFt(e,t){const{row:n,column:r}=t;if(n&&r){let i=null;for(const s of[n,r])if(yp(s.sort)){const{field:o,op:a=A$}=s.sort;e=i=new wb(e,{joinaggregate:[{op:a,field:o,as:Nz(s,s.sort,{forAs:!0})}],groupby:[Ct(s)]})}return i}return null}function UPe(e,t){var n,r,i,s;for(const o of t){const a=o.data;if(e.name&&o.hasName()&&e.name!==o.dataName)continue;const u=(n=e.format)==null?void 0:n.mesh,l=(r=a.format)==null?void 0:r.feature;if(u&&l)continue;const c=(i=e.format)==null?void 0:i.feature;if((c||l)&&c!==l)continue;const d=(s=a.format)==null?void 0:s.mesh;if(!((u||d)&&u!==d)){if(RC(e)&&RC(a)){if(sl(e.values,a.values))return o}else if(mw(e)&&mw(a)){if(e.url===a.url)return o}else if(EDe(e)&&e.name===o.dataName)return o}}return null}function vFt(e,t){if(e.data||!e.parent){if(e.data===null){const r=new D1({values:[]});return t.push(r),r}const n=UPe(e.data,t);if(n)return x0(e.data)||(n.data.format=yIe({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const r=new D1(e.data);return t.push(r),r}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function xFt(e,t,n){let r=0;for(const i of t.transforms){let s,o;if(Q$t(i))o=e=new yw(e,i),s="derived";else if(aQ(i)){const a=cLt(i);o=e=ua.makeWithAncestors(e,{},a,n)??e,e=new AE(e,t,i.filter)}else if(yDe(i))o=e=Pf.makeFromTransform(e,i,t),s="number";else if(Z$t(i))s="date",n.getWithExplicit(i.field).value===void 0&&(e=new ua(e,{[i.field]:s}),n.set(i.field,s,!1)),o=e=Rf.makeFromTransform(e,i);else if(e5t(i))o=e=ad.makeFromTransform(e,i),s="number",hQ(t)&&(e=new X0(e));else if(gDe(i))o=e=OC.make(e,t,i,r++),s="derived";else if(Y$t(i))o=e=new IE(e,i),s="number";else if(K$t(i))o=e=new wb(e,i),s="number";else if(t5t(i))o=e=vp.makeFromTransform(e,i),s="derived";else if(n5t(i))o=e=new Q$(e,i),s="derived";else if(r5t(i))o=e=new K$(e,i),s="derived";else if(X$t(i))o=e=new X$(e,i),s="derived";else if(U$t(i))o=e=new t5(e,i),s="derived";else if(G$t(i))e=new n5(e,i);else if(J$t(i))o=e=Ky.makeFromTransform(e,i),s="derived";else if(V$t(i))o=e=new Y$(e,i),s="derived";else if(H$t(i))o=e=new Z$(e,i),s="derived";else if(q$t(i))o=e=new e5(e,i),s="derived";else if(W$t(i))o=e=new J$(e,i),s="derived";else{ht(w4t(i));continue}if(o&&s!==void 0)for(const a of o.producedFields()??[])n.set(a,s,!1)}return e}function r5(e){var y;let t=vFt(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:r}=e.component.data,i=e.data,o=!(i&&(x0(i)||mw(i)||RC(i)))&&e.parent?e.parent.component.data.ancestorParse.clone():new m5t;x0(i)?(_De(i)?t=new _A(t,i.sequence):uQ(i)&&(t=new EA(t,i.graticule)),o.parseNothing=!0):((y=i==null?void 0:i.format)==null?void 0:y.parse)===null&&(o.parseNothing=!0),t=ua.makeExplicit(t,e,o)??t,t=new X0(t);const a=e.parent&&RE(e.parent);(wi(e)||dl(e))&&a&&(t=Pf.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=xFt(t,e,o));const u=fLt(e),l=dLt(e);t=ua.makeWithAncestors(t,{},{...u,...l},o)??t,wi(e)&&(t=bx.parseAll(t,e),t=NC.parseAll(t,e)),(wi(e)||dl(e))&&(a||(t=Pf.makeFromEncoding(t,e)??t),t=Rf.makeFromEncoding(t,e)??t,t=yw.parseAllForSortIndex(t,e));const c=t=jI(_i.Raw,e,t);if(wi(e)){const v=ad.makeFromEncoding(t,e);v&&(t=v,hQ(e)&&(t=new X0(t))),t=Ky.makeFromEncoding(t,e)??t,t=vp.makeFromEncoding(t,e)??t}let d,f;if(wi(e)){const{markDef:v,mark:b,config:w}=e,E=$r("invalid",v,w),{marks:_,scales:C}=f=CDe({invalid:E,isPath:Tg(b)});_!==C&&C==="include-invalid-values"&&(d=t=jI(_i.PreFilterInvalid,e,t)),_==="exclude-invalid-values"&&(t=xw.make(t,e,f)??t)}const h=t=jI(_i.Main,e,t);let p;if(wi(e)&&f){const{marks:v,scales:b}=f;v==="include-invalid-values"&&b==="exclude-invalid-values"&&(t=xw.make(t,e,f)??t,p=t=jI(_i.PostFilterInvalid,e,t))}wi(e)&&a8t(e,h);let m=null;if(dl(e)){const v=e.getName("facet");t=bFt(t,e.facet)??t,m=new kE(t,e,v,h.getSource()),n[v]=m}return{...e.component.data,outputNodes:n,outputNodeRefCounts:r,raw:c,main:h,facetRoot:m,ancestorParse:o,preFilterInvalid:d,postFilterInvalid:p}}function jI(e,t,n){const{outputNodes:r,outputNodeRefCounts:i}=t.component.data,s=t.getDataName(e),o=new Au(n,s,e,i);return r[s]=o,o}class wFt extends AQ{constructor(t,n,r,i){var s,o,a,u;super(t,"concat",n,r,i,t.resolve),(((o=(s=t.resolve)==null?void 0:s.axis)==null?void 0:o.x)==="shared"||((u=(a=t.resolve)==null?void 0:a.axis)==null?void 0:u.y)==="shared")&&ht(b4t),this.children=this.getChildren(t).map((l,c)=>NQ(l,this,this.getName(`concat_${c}`),void 0,i))}parseData(){this.component.data=r5(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of at(t.component.selection))this.component.selection[n]=t.component.selection[n]}Object.values(this.component.selection).some(t=>Df(t))&&TX(_X)}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return O$(t)?t.vconcat:sQ(t)?t.hconcat:t.concat}parseLayoutSize(){mFt(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=vQ(this);for(const n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{const n=t.assembleTitle(),r=t.assembleGroupStyle(),i=t.assembleGroupEncodeEntry(!1);return{type:"group",name:t.getName("group"),...n?{title:n}:{},...r?{style:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){const t=this.layout.columns;return{...t!=null?{columns:t}:{},bounds:"full",align:"each"}}}function EFt(e){return e===!1||e===null}const _Ft={disable:1,gridScale:1,scale:1,...jRe,labelExpr:1,encode:1},VPe=at(_Ft);class IQ extends im{constructor(t={},n={},r=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=r}clone(){return new IQ(hn(this.explicit),hn(this.implicit),this.mainExtracted)}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!EFt(this.get(t))}hasOrientSignalRef(){return Wt(this.explicit.orient)}}function TFt(e,t,n){const{encoding:r,config:i}=e,s=Ts(r[t])??Ts(r[fh(t)]),o=e.axis(t)||{},{format:a,formatType:u}=o;if(S1(u))return{text:ed({fieldOrDatumDef:s,field:"datum.value",format:a,formatType:u,config:i}),...n};if(a===void 0&&u===void 0&&i.customFormatTypes){if(fw(s)==="quantitative"){if(hw(s)&&s.stack==="normalize"&&i.normalizedNumberFormatType)return{text:ed({fieldOrDatumDef:s,field:"datum.value",format:i.normalizedNumberFormat,formatType:i.normalizedNumberFormatType,config:i}),...n};if(i.numberFormatType)return{text:ed({fieldOrDatumDef:s,field:"datum.value",format:i.numberFormat,formatType:i.numberFormatType,config:i}),...n}}if(fw(s)==="temporal"&&i.timeFormatType&&gt(s)&&!s.timeUnit)return{text:ed({fieldOrDatumDef:s,field:"datum.value",format:i.timeFormat,formatType:i.timeFormatType,config:i}),...n}}return n}function CFt(e){return nm.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[PFt(n,e)]),t),{})}const SFt={bottom:"top",top:"bottom",left:"right",right:"left"};function AFt(e){const{axes:t,resolve:n}=e.component,r={top:0,bottom:0,right:0,left:0};for(const i of e.children){i.parseAxesAndHeaders();for(const s of at(i.component.axes))n.axis[s]=xQ(e.component.resolve,s),n.axis[s]==="shared"&&(t[s]=kFt(t[s],i.component.axes[s]),t[s]||(n.axis[s]="independent",delete t[s]))}for(const i of nm){for(const s of e.children)if(s.component.axes[i]){if(n.axis[i]==="independent"){t[i]=(t[i]??[]).concat(s.component.axes[i]);for(const o of s.component.axes[i]){const{value:a,explicit:u}=o.getWithExplicit("orient");if(!Wt(a)){if(r[a]>0&&!u){const l=SFt[a];r[a]>r[l]&&o.set("orient",l,!1)}r[a]++}}}delete s.component.axes[i]}if(n.axis[i]==="independent"&&t[i]&&t[i].length>1)for(const[s,o]of(t[i]||[]).entries())s>0&&o.get("grid")&&!o.explicit.grid&&(o.implicit.grid=!1)}}function kFt(e,t){if(e){if(e.length!==t.length)return;const n=e.length;for(let r=0;r<n;r++){const i=e[r],s=t[r];if(!!i!=!!s)return;if(i&&s){const o=i.getWithExplicit("orient"),a=s.getWithExplicit("orient");if(o.explicit&&a.explicit&&o.value!==a.value)return;e[r]=IFt(i,s)}}}else return t.map(n=>n.clone());return e}function IFt(e,t){for(const n of VPe){const r=K0(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(i,s)=>{switch(n){case"title":return HIe(i,s);case"gridScale":return{explicit:i.explicit,value:Wi(i.value,s.value)}}return M$(i,s,n,"axis")});e.setWithExplicit(n,r)}return e}function RFt(e,t,n,r,i){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(Wt(n.labelAngle)?n.labelAngle:kC(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===uPe(r,i))return!0}return e===n[t]}const DFt=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function PFt(e,t){var v,b;let n=t.axis(e);const r=new IQ,i=Ts(t.encoding[e]),{mark:s,config:o}=t,a=(n==null?void 0:n.orient)||((v=o[e==="x"?"axisX":"axisY"])==null?void 0:v.orient)||((b=o.axis)==null?void 0:b.orient)||y8t(e),u=t.getScaleComponent(e).get("type"),l=c8t(e,u,a,t.config),c=n!==void 0?!n:Tz("disable",o.style,n==null?void 0:n.style,l).configValue;if(r.set("disable",c,n!==void 0),c)return r;n=n||{};const d=p8t(i,n,e,o.style,l),f=SRe(n.formatType,i,u),h=CRe(i,i.type,n.format,n.formatType,o,!0),p={fieldOrDatumDef:i,axis:n,channel:e,model:t,scaleType:u,orient:a,labelAngle:d,format:h,formatType:f,mark:s,config:o};for(const w of VPe){const E=w in Ede?Ede[w](p):Uce(w)?n[w]:void 0,_=E!==void 0,C=RFt(E,w,n,t,e);if(_&&C)r.set(w,E,C);else{const{configValue:S=void 0,configFrom:k=void 0}=Uce(w)&&w!=="values"?Tz(w,o.style,n.style,l):{},R=S!==void 0;_&&!R?r.set(w,E,C):(k!=="vgAxisConfig"||DFt.has(w)&&R||yA(S)||Wt(S))&&r.set(w,S,!1)}}const m=n.encoding??{},y=BRe.reduce((w,E)=>{if(!r.hasAxisPart(E))return w;const _=pPe(m[E]??{},t),C=E==="labels"?TFt(t,e,_):_;return C!==void 0&&!Mr(C)&&(w[E]={update:C}),w},{});return Mr(y)||r.set("encode",y,!!n.encoding||n.labelAngle!==void 0),r}function NFt({encoding:e,size:t}){for(const n of nm){const r=$u(n);Xf(t[r])&&o0(e[n])&&(delete t[r],ht(KIe(r)))}return t}const OFt={vgMark:"arc",encodeEntry:e=>({...bc(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...Ba("x",e,{defaultPos:"mid"}),...Ba("y",e,{defaultPos:"mid"}),...Lp(e,"radius"),...Lp(e,"theta")})},$Ft={vgMark:"area",encodeEntry:e=>({...bc(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...KN("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"}),...KN("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"}),...fQ(e)})},MFt={vgMark:"rect",encodeEntry:e=>({...bc(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Lp(e,"x"),...Lp(e,"y")})},LFt={vgMark:"shape",encodeEntry:e=>({...bc(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[{type:"geoshape",projection:e.projectionName(),...n&&gt(n)&&n.type===CE?{field:Ct(n,{expr:"datum"})}:{}}]}},FFt={vgMark:"image",encodeEntry:e=>({...bc(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...Lp(e,"x"),...Lp(e,"y"),...cQ(e,"url")})},BFt={vgMark:"line",encodeEntry:e=>({...bc(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...Ba("x",e,{defaultPos:"mid"}),...Ba("y",e,{defaultPos:"mid"}),...So("size",e,{vgChannel:"strokeWidth"}),...fQ(e)})},jFt={vgMark:"trail",encodeEntry:e=>({...bc(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...Ba("x",e,{defaultPos:"mid"}),...Ba("y",e,{defaultPos:"mid"}),...So("size",e),...fQ(e)})};function RQ(e,t){const{config:n}=e;return{...bc(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...Ba("x",e,{defaultPos:"mid"}),...Ba("y",e,{defaultPos:"mid"}),...So("size",e),...So("angle",e),...zFt(e,n,t)}}function zFt(e,t,n){return n?{shape:{value:n}}:So("shape",e)}const UFt={vgMark:"symbol",encodeEntry:e=>RQ(e)},VFt={vgMark:"symbol",encodeEntry:e=>RQ(e,"circle")},HFt={vgMark:"symbol",encodeEntry:e=>RQ(e,"square")},qFt={vgMark:"rect",encodeEntry:e=>({...bc(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Lp(e,"x"),...Lp(e,"y")})},WFt={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:{...bc(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...KN("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"}),...KN("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"}),...So("size",e,{vgChannel:"strokeWidth"})}}},GFt={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...bc(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...Ba("x",e,{defaultPos:"mid"}),...Ba("y",e,{defaultPos:"mid"}),...cQ(e),...So("size",e,{vgChannel:"fontSize"}),...So("angle",e),...dde("align",YFt(e.markDef,n,t)),...dde("baseline",KFt(e.markDef,n,t)),...Ba("radius",e,{defaultPos:null}),...Ba("theta",e,{defaultPos:null})}}};function YFt(e,t,n){if($r("align",e,n)===void 0)return"center"}function KFt(e,t,n){if($r("baseline",e,n)===void 0)return"middle"}const XFt={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,r=n.orient,i=r==="horizontal"?"x":"y",s=r==="horizontal"?"y":"x",o=r==="horizontal"?"height":"width";return{...bc(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Lp(e,i),...Ba(s,e,{defaultPos:"mid",vgChannel:s==="y"?"yc":"xc"}),[o]:si($r("thickness",n,t))}}},zI={arc:OFt,area:$Ft,bar:MFt,circle:VFt,geoshape:LFt,image:FFt,line:BFt,point:UFt,rect:qFt,rule:WFt,square:HFt,text:GFt,tick:XFt,trail:jFt};function QFt(e){if($n([C$,_$,YOt],e.mark)){const t=WRe(e.mark,e.encoding);if(t.length>0)return JFt(e,t)}else if(e.mark===T$){const t=oz.some(n=>$r(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return ZFt(e)}return DQ(e)}const Fde="faceted_path_";function JFt(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:Fde+e.requestDataName(_i.Main),data:e.requestDataName(_i.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:DQ(e,{fromPrefix:Fde})}]}const Bde="stack_group_";function ZFt(e){var l;const[t]=DQ(e,{fromPrefix:Bde}),n=e.scaleName(e.stack.fieldChannel),r=(c={})=>e.vgField(e.stack.fieldChannel,c),i=(c,d)=>{const f=[r({prefix:"min",suffix:"start",expr:d}),r({prefix:"max",suffix:"start",expr:d}),r({prefix:"min",suffix:"end",expr:d}),r({prefix:"max",suffix:"end",expr:d})];return`${c}(${f.map(h=>`scale('${n}',${h})`).join(",")})`};let s,o;e.stack.fieldChannel==="x"?(s={...ow(t.encode.update,["y","yc","y2","height",...oz]),x:{signal:i("min","datum")},x2:{signal:i("max","datum")},clip:{value:!0}},o={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...Su(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(s={...ow(t.encode.update,["x","xc","x2","width"]),y:{signal:i("min","datum")},y2:{signal:i("max","datum")},clip:{value:!0}},o={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...Su(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const c of oz){const d=Yf(c,e.markDef,e.config);t.encode.update[c]?(s[c]=t.encode.update[c],delete t.encode.update[c]):d&&(s[c]=si(d)),d&&(t.encode.update[c]={value:0})}const a=[];if(((l=e.stack.groupbyChannels)==null?void 0:l.length)>0)for(const c of e.stack.groupbyChannels){const d=e.fieldDef(c),f=Ct(d);f&&a.push(f),(d!=null&&d.bin||d!=null&&d.timeUnit)&&a.push(Ct(d,{binSuffix:"end"}))}return s=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((c,d)=>{if(t.encode.update[d])return{...c,[d]:t.encode.update[d]};{const f=Yf(d,e.markDef,e.config);return f!==void 0?{...c,[d]:si(f)}:c}},s),s.stroke&&(s.strokeForeground={value:!0},s.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(_i.Main),name:Bde+e.requestDataName(_i.Main),groupby:a,aggregate:{fields:[r({suffix:"start"}),r({suffix:"start"}),r({suffix:"end"}),r({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:s},marks:[{type:"group",encode:{update:o},marks:[t]}]}]}function e9t(e){const{encoding:t,stack:n,mark:r,markDef:i,config:s}=e,o=t.order;if(!(!Qe(o)&&md(o)&&iz(o.value)||!o&&iz($r("order",i,s)))){if((Qe(o)||gt(o))&&!n)return zIe(o,{expr:"datum"});if(Tg(r)){const a=i.orient==="horizontal"?"y":"x",u=t[a];if(gt(u))return{field:a}}}}function DQ(e,t={fromPrefix:""}){const{mark:n,markDef:r,encoding:i,config:s}=e,o=Wi(r.clip,t9t(e),n9t(e)),a=BIe(r),u=i.key,l=e9t(e),c=r9t(e),d=$r("aria",r,s),f=zI[n].postEncodingTransform?zI[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:zI[n].vgMark,...o?{clip:o}:{},style:a,...u?{key:u.field}:{},...l?{sort:l}:{},...c||{},...d===!1?{aria:d}:{},from:{data:t.fromPrefix+e.requestDataName(_i.Main)},encode:{update:zI[n].encodeEntry(e)},...f?{transform:f}:{}}]}function t9t(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t!=null&&t.get("selectionExtent")||n!=null&&n.get("selectionExtent")?!0:void 0}function n9t(e){const t=e.component.projection;return t&&!t.isFit?!0:void 0}function r9t(e){if(!e.component.selection)return null;const t=at(e.component.selection).length;let n=t,r=e.parent;for(;r&&n===0;)n=at(r.component.selection).length,r=r.parent;return n?{interactive:t>0||e.mark==="geoshape"||!!e.encoding.tooltip||!!e.markDef.tooltip}:null}class HPe extends BPe{constructor(t,n,r,i={},s){super(t,"unit",n,r,s,void 0,Hce(t)?t.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[],this.correctDataNames=l=>{var c,d,f;return(c=l.from)!=null&&c.data&&(l.from.data=this.lookupDataSource(l.from.data),"time"in this.encoding&&(l.from.data=l.from.data+ADe)),(f=(d=l.from)==null?void 0:d.facet)!=null&&f.data&&(l.from.facet.data=this.lookupDataSource(l.from.facet.data)),l};const o=Kf(t.mark)?{...t.mark}:{type:t.mark},a=o.type;o.filled===void 0&&(o.filled=D$t(o,s,{graticule:t.data&&uQ(t.data)}));const u=this.encoding=$6t(t.encoding||{},a,o.filled,s);this.markDef=hDe(o,u,s),this.size=NFt({encoding:u,size:Hce(t)?{...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}}:i}),this.stack=fDe(this.markDef,u),this.specifiedScales=this.initScales(a,u),this.specifiedAxes=this.initAxes(u),this.specifiedLegends=this.initLegends(u),this.specifiedProjection=t.projection,this.selection=(t.params??[]).filter(l=>rQ(l))}get hasProjection(){const{encoding:t}=this,n=this.mark===bRe,r=t&&ANt.some(i=>bn(t[i]));return n||r}scaleDomain(t){const n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return vX.reduce((r,i)=>{const s=Ts(n[i]);return s&&(r[i]=this.initScale(s.scale??{})),r},{})}initScale(t){const{domain:n,range:r}=t,i=Eo(t);return Qe(n)&&(i.domain=n.map(tl)),Qe(r)&&(i.range=r.map(tl)),i}initAxes(t){return nm.reduce((n,r)=>{const i=t[r];if(bn(i)||r===pi&&bn(t.x2)||r===uo&&bn(t.y2)){const s=bn(i)?i.axis:void 0;n[r]=s&&this.initAxis({...s})}return n},{})}initAxis(t){const n=at(t),r={};for(const i of n){const s=t[i];r[i]=yA(s)?FIe(s):tl(s)}return r}initLegends(t){return FNt.reduce((n,r)=>{const i=Ts(t[r]);if(i&&jNt(r)){const s=i.legend;n[r]=s&&Eo(s)}return n},{})}parseData(){this.component.data=r5(this)}parseLayoutSize(){gFt(this)}parseSelections(){this.component.selection=o8t(this,this.selection)}parseMarkGroup(){this.component.mark=QFt(this)}parseAxesAndHeaders(){this.component.axes=CFt(this)}assembleSelectionTopLevelSignals(t){return T5t(this,t)}assembleSignals(){return[...sPe(this),...E5t(this,[])]}assembleSelectionData(t){return C5t(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return vQ(this)}assembleMarks(){let t=this.component.mark??[];return(!this.parent||!RE(this.parent))&&(t=DDe(this,t)),t.map(this.correctDataNames)}assembleGroupStyle(){const{style:t}=this.view||{};return t!==void 0?t:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return Gy(this.encoding,t)}fieldDef(t){const n=this.encoding[t];return gd(n)}typedFieldDef(t){const n=this.fieldDef(t);return Wa(n)?n:null}}class PQ extends AQ{constructor(t,n,r,i,s){super(t,"layer",n,r,s,t.resolve,t.view);const o={...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}};this.children=t.layer.map((a,u)=>{if($$(a))return new PQ(a,this,this.getName(`layer_${u}`),o,s);if(rm(a))return new HPe(a,this,this.getName(`layer_${u}`),o,s);throw new Error(wX(a))})}parseData(){this.component.data=r5(this);for(const t of this.children)t.parseData()}parseLayoutSize(){pFt(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of at(t.component.selection))this.component.selection[n]=t.component.selection[n]}Object.values(this.component.selection).some(t=>Df(t))&&TX(_X)}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){AFt(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),sPe(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),vQ(this))}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleGroupStyle(){const t=new Set;for(const r of this.children)for(const i of Rt(r.assembleGroupStyle()))t.add(i);const n=Array.from(t);return n.length>1?n:n.length===1?n[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return S5t(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),EPe(this))}}function NQ(e,t,n,r,i){if(k$(e))return new v2(e,t,n,i);if($$(e))return new PQ(e,t,n,r,i);if(rm(e))return new HPe(e,t,n,r,i);if(s$t(e))return new wFt(e,t,n,i);throw new Error(wX(e))}function i9t(e,t={}){t.logger&&uOt(t.logger),t.fieldTitle&&MRe(t.fieldTitle);try{const n=dDe(fE(t.config,e.config)),r=xDe(e,n),i=NQ(r,null,"",void 0,n);return i.parse(),kLt(i.component.data,i),{spec:o9t(i,s9t(e,r.autosize,n,i),e.datasets,e.usermeta),normalized:r}}finally{t.logger&&lOt(),t.fieldTitle&&S6t()}}function s9t(e,t,n,r){const i=r.component.layoutSize.get("width"),s=r.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},r.hasAxisOrientSignalRef()&&(t.resize=!0)):It(t)&&(t={type:t}),i&&s&&f5t(t.type)){if(i==="step"&&s==="step")ht(kce()),t.type="pad";else if(i==="step"||s==="step"){const o=i==="step"?"width":"height";ht(kce(y$(o)));const a=o==="width"?"height":"width";t.type=h5t(a)}}return{...at(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t},...nde(n,!1),...nde(e,!0)}}function o9t(e,t,n={},r){const i=e.config?v$t(e.config):void 0,s=cFt(e.component.data,n),o=e.assembleSelectionData(s),a=e.assembleProjections(),u=e.assembleTitle(),l=e.assembleGroupStyle(),c=e.assembleGroupEncodeEntry(!0);let d=e.assembleLayoutSignals();d=d.filter(p=>(p.name==="width"||p.name==="height")&&p.value!==void 0?(t[p.name]=+p.value,!1):!0);const{params:f,...h}=t;return{$schema:"https://vega.github.io/schema/vega/v5.json",...e.description?{description:e.description}:{},...h,...u?{title:u}:{},...l?{style:l}:{},...c?{encode:{update:c}}:{},data:o,...a.length>0?{projections:a}:{},...e.assembleGroup([...d,...e.assembleSelectionTopLevelSignals([]),...aDe(f)]),...i?{config:i}:{},...r?{usermeta:r}:{}}}const a9t=wNt.version,u9t=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth:uw,accessPathWithDatum:dX,accessWithDatumToUnescapedPath:Ar,compile:i9t,contains:$n,deepEqual:sl,deleteNestedProperty:BN,duplicate:hn,entries:W0,every:uX,fieldIntersection:cX,flatAccessWithDatum:vIe,getFirstDefined:Wi,hasIntersection:lX,hasProperty:ct,hash:zn,internalField:EIe,isBoolean:AC,isEmpty:Mr,isEqual:_Nt,isInternalField:_Ie,isNullOrFalse:iz,isNumeric:d$,keys:at,logicalExpr:g2,mergeDeep:yIe,never:gIe,normalize:xDe,normalizeAngle:kC,omit:Su,pick:ow,prefixGenerator:sz,removePathFromField:_E,replaceAll:x1,replacePathInField:oc,resetIdCounter:CNt,setEqual:bIe,some:aw,stringify:Lr,titleCase:oA,unique:gf,uniqueId:wIe,vals:Oo,varName:fi,version:a9t},Symbol.toStringTag,{value:"Module"}));function qPe(e){const[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}}var l9t="vega-themes",c9t="2.15.0",d9t="Themes for stylized Vega and Vega-Lite visualizations.",f9t=["vega","vega-lite","themes","style"],h9t="BSD-3-Clause",p9t={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},m9t=[{name:"Emily Gu",url:"https://github.com/emilygu"},{name:"Arvind Satyanarayan",url:"http://arvindsatya.com"},{name:"Jeffrey Heer",url:"https://idl.cs.washington.edu"},{name:"Dominik Moritz",url:"https://www.domoritz.de"}],g9t="build/vega-themes.js",OQ="build/vega-themes.module.js",y9t="build/vega-themes.min.js",b9t="build/vega-themes.min.js",v9t="build/vega-themes.module.d.ts",x9t={type:"git",url:"https://github.com/vega/vega-themes.git"},w9t=["src","build"],E9t={prebuild:"yarn clean",build:"rollup -c",clean:"rimraf build && rimraf examples/build","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && mkdir -p examples/build && rsync -r build/* examples/build && gh-pages -d examples",preversion:"yarn lint",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",format:"eslint . --fix",lint:"eslint .",release:"release-it"},_9t={"@babel/core":"^7.24.6","@babel/plugin-transform-runtime":"^7.24.6","@babel/preset-env":"^7.24.6","@babel/preset-typescript":"^7.24.6","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@typescript-eslint/eslint-plugin":"^7.11.0","@typescript-eslint/parser":"^7.11.0","browser-sync":"^3.0.2",concurrently:"^8.2.2",eslint:"^8.45.0","eslint-config-prettier":"^9.1.0","eslint-plugin-prettier":"^5.1.3","gh-pages":"^6.1.1",prettier:"^3.2.5","release-it":"^17.3.0",rollup:"^4.18.0","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.4.5",typescript:"^5.4.5",vega:"^5.25.0","vega-lite":"^5.9.3"},T9t={vega:"*","vega-lite":"*"},C9t={},S9t={name:l9t,version:c9t,description:d9t,keywords:f9t,license:h9t,author:p9t,contributors:m9t,main:g9t,module:OQ,unpkg:y9t,jsdelivr:b9t,types:v9t,repository:x9t,files:w9t,scripts:E9t,devDependencies:_9t,peerDependencies:T9t,dependencies:C9t};const bv="#fff",jde="#888",A9t={background:"#333",view:{stroke:jde},title:{color:bv,subtitleColor:bv},style:{"guide-label":{fill:bv},"guide-title":{fill:bv}},axis:{domainColor:bv,gridColor:jde,tickColor:bv}},Gg="#4572a7",k9t={background:"#fff",arc:{fill:Gg},area:{fill:Gg},line:{stroke:Gg,strokeWidth:2},path:{stroke:Gg},rect:{fill:Gg},shape:{stroke:Gg},symbol:{fill:Gg,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},Yg="#30a2da",KF="#cbcbcb",I9t="#999",R9t="#333",zde="#f0f0f0",Ude="#333",D9t={arc:{fill:Yg},area:{fill:Yg},axis:{domainColor:KF,grid:!0,gridColor:KF,gridWidth:1,labelColor:I9t,labelFontSize:10,titleColor:R9t,tickColor:KF,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:zde,group:{fill:zde},legend:{labelColor:Ude,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:Ude,titleFontSize:14,titlePadding:10},line:{stroke:Yg,strokeWidth:2},path:{stroke:Yg,strokeWidth:.5},rect:{fill:Yg},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:Yg},bar:{binSpacing:2,fill:Yg,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},Kg="#000",P9t={group:{fill:"#e5e5e5"},arc:{fill:Kg},area:{fill:Kg},line:{stroke:Kg},path:{stroke:Kg},rect:{fill:Kg},shape:{stroke:Kg},symbol:{fill:Kg,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},N9t=22,O9t="normal",Vde="Benton Gothic, sans-serif",Hde=11.5,$9t="normal",Xg="#82c6df",XF="Benton Gothic Bold, sans-serif",qde="normal",Wde=13,V_={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},M9t={background:"#ffffff",title:{anchor:"start",color:"#000000",font:XF,fontSize:N9t,fontWeight:O9t},arc:{fill:Xg},area:{fill:Xg},line:{stroke:Xg,strokeWidth:2},path:{stroke:Xg},rect:{fill:Xg},shape:{stroke:Xg},symbol:{fill:Xg,size:30},axis:{labelFont:Vde,labelFontSize:Hde,labelFontWeight:$9t,titleFont:XF,titleFontSize:Wde,titleFontWeight:qde},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:Vde,labelFontSize:Hde,symbolType:"square",titleFont:XF,titleFontSize:Wde,titleFontWeight:qde},range:{category:V_["category-6"],diverging:V_["fireandice-6"],heatmap:V_["fire-7"],ordinal:V_["fire-7"],ramp:V_["fire-7"]}},Qg="#ab5787",UI="#979797",L9t={background:"#f9f9f9",arc:{fill:Qg},area:{fill:Qg},line:{stroke:Qg},path:{stroke:Qg},rect:{fill:Qg},shape:{stroke:Qg},symbol:{fill:Qg,size:30},axis:{domainColor:UI,domainWidth:.5,gridWidth:.2,labelColor:UI,tickColor:UI,tickWidth:.2,titleColor:UI},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},Jg="#3e5c69",F9t={background:"#fff",arc:{fill:Jg},area:{fill:Jg},line:{stroke:Jg},path:{stroke:Jg},rect:{fill:Jg},shape:{stroke:Jg},symbol:{fill:Jg},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},zl="#1696d2",Gde="#000000",B9t="#FFFFFF",VI="Lato",QF="Lato",j9t="Lato",z9t="#DEDDDD",U9t=18,H_={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},V9t={background:B9t,title:{anchor:"start",fontSize:U9t,font:VI},axisX:{domain:!0,domainColor:Gde,domainWidth:1,grid:!1,labelFontSize:12,labelFont:QF,labelAngle:0,tickColor:Gde,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:VI},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:z9t,gridWidth:1,labelFontSize:12,labelFont:QF,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:VI,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:QF,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:VI,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:H_["six-groups-cat-1"],diverging:H_["diverging-colors"],heatmap:H_["diverging-colors"],ordinal:H_["six-groups-seq"],ramp:H_["shades-blue"]},area:{fill:zl},rect:{fill:zl},line:{color:zl,stroke:zl,strokeWidth:5},trail:{color:zl,stroke:zl,strokeWidth:0,size:1},path:{stroke:zl,strokeWidth:.5},point:{filled:!0},text:{font:j9t,color:zl,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:zl,stroke:null}},arc:{fill:zl},shape:{stroke:zl},symbol:{fill:zl,size:30}},Zg="#3366CC",Yde="#ccc",HI="Arial, sans-serif",H9t={arc:{fill:Zg},area:{fill:Zg},path:{stroke:Zg},rect:{fill:Zg},shape:{stroke:Zg},symbol:{stroke:Zg},circle:{fill:Zg},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:HI,fontSize:12},"guide-title":{font:HI,fontSize:12},"group-title":{font:HI,fontSize:12}},title:{font:HI,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:Yde,tickColor:Yde,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},$Q=e=>e*(1/3+1),Kde=$Q(9),Xde=$Q(10),Qde=$Q(12),q_="Segoe UI",Jde="wf_standard-font, helvetica, arial, sans-serif",Zde="#252423",W_="#605E5C",efe="transparent",q9t="#C8C6C4",Oc="#118DFF",W9t="#12239E",G9t="#E66C37",Y9t="#6B007B",K9t="#E044A7",X9t="#744EC2",Q9t="#D9B300",J9t="#D64550",WPe=Oc,GPe="#DEEFFF",tfe=[GPe,WPe],Z9t=[GPe,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",WPe],eBt={view:{stroke:efe},background:efe,font:q_,header:{titleFont:Jde,titleFontSize:Qde,titleColor:Zde,labelFont:q_,labelFontSize:Xde,labelColor:W_},axis:{ticks:!1,grid:!1,domain:!1,labelColor:W_,labelFontSize:Kde,titleFont:Jde,titleColor:Zde,titleFontSize:Qde,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:q9t,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:Oc},line:{stroke:Oc,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:q_,fontSize:Kde,fill:W_},arc:{fill:Oc},area:{fill:Oc,line:!0,opacity:.6},path:{stroke:Oc},rect:{fill:Oc},point:{fill:Oc,filled:!0,size:75},shape:{stroke:Oc},symbol:{fill:Oc,strokeWidth:1.5,size:50},legend:{titleFont:q_,titleFontWeight:"bold",titleColor:W_,labelFont:q_,labelFontSize:Xde,labelColor:W_,symbolType:"circle",symbolSize:75},range:{category:[Oc,W9t,G9t,Y9t,K9t,X9t,Q9t,J9t],diverging:tfe,heatmap:tfe,ordinal:Z9t}},JF='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',tBt='IBM Plex Sans Condensed, system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", sans-serif',ZF=400,qI={textPrimary:{g90:"#f4f4f4",g100:"#f4f4f4",white:"#161616",g10:"#161616"},textSecondary:{g90:"#c6c6c6",g100:"#c6c6c6",white:"#525252",g10:"#525252"},layerAccent01:{white:"#e0e0e0",g10:"#e0e0e0",g90:"#525252",g100:"#393939"},gridBg:{white:"#ffffff",g10:"#ffffff",g90:"#161616",g100:"#161616"}},nBt=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],rBt=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function i5({theme:e,background:t}){const n=["white","g10"].includes(e)?"light":"dark",r=qI.gridBg[e],i=qI.textPrimary[e],s=qI.textSecondary[e],o=n==="dark"?nBt:rBt,a=n==="dark"?"#d4bbff":"#6929c4";return{background:t,arc:{fill:a},area:{fill:a},path:{stroke:a},rect:{fill:a},shape:{stroke:a},symbol:{stroke:a},circle:{fill:a},view:{fill:r,stroke:r},group:{fill:r},title:{color:i,anchor:"start",dy:-15,fontSize:16,font:JF,fontWeight:600},axis:{labelColor:s,labelFontSize:12,labelFont:tBt,labelFontWeight:ZF,titleColor:i,titleFontWeight:600,titleFontSize:12,grid:!0,gridColor:qI.layerAccent01[e],labelAngle:0},axisX:{titlePadding:10},axisY:{titlePadding:2.5},style:{"guide-label":{font:JF,fill:s,fontWeight:ZF},"guide-title":{font:JF,fill:s,fontWeight:ZF}},range:{category:o,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const iBt=i5({theme:"white",background:"#ffffff"}),sBt=i5({theme:"g10",background:"#f4f4f4"}),oBt=i5({theme:"g90",background:"#262626"}),aBt=i5({theme:"g100",background:"#161616"}),uBt=S9t.version,lBt=Object.freeze(Object.defineProperty({__proto__:null,carbong10:sBt,carbong100:aBt,carbong90:oBt,carbonwhite:iBt,dark:A9t,excel:k9t,fivethirtyeight:D9t,ggplot2:P9t,googlecharts:H9t,latimes:M9t,powerbi:eBt,quartz:L9t,urbaninstitute:V9t,version:uBt,vox:F9t},Symbol.toStringTag,{value:"Module"}));function cBt(e,t,n,r){if(Qe(e))return`[${e.map(i=>t(It(i)?i:nfe(i,n))).join(", ")}]`;if(kt(e)){let i="";const{title:s,image:o,...a}=e;s&&(i+=`<h2>${t(s)}</h2>`),o&&(i+=`<img src="${new URL(t(o),r||location.href).href}">`);const u=Object.keys(a);if(u.length>0){i+="<table>";for(const l of u){let c=a[l];c!==void 0&&(kt(c)&&(c=nfe(c,n)),i+=`<tr><td class="key">${t(l)}</td><td class="value">${t(c)}</td></tr>`)}i+="</table>"}return i||"{}"}return t(e)}function dBt(e){const t=[];return function(n,r){if(typeof r!="object"||r===null)return r;const i=t.indexOf(this)+1;return t.length=i,t.length>e?"[Object]":t.indexOf(r)>=0?"[Circular]":(t.push(r),r)}}function nfe(e,t){return JSON.stringify(e,dBt(t))}var fBt=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const YPe="vg-tooltip-element",hBt={offsetX:10,offsetY:10,id:YPe,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:pBt,maxDepth:2,formatTooltip:cBt,baseURL:""};function pBt(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function mBt(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return fBt.toString().replace(YPe,e)}function gBt(e,t,n,r){let i=e.clientX+n;i+t.width>window.innerWidth&&(i=+e.clientX-n-t.width);let s=e.clientY+r;return s+t.height>window.innerHeight&&(s=+e.clientY-r-t.height),{x:i,y:s}}class yBt{constructor(t){this.options={...hBt,...t};const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const r=document.createElement("style");r.setAttribute("id",this.options.styleId),r.innerHTML=mBt(n);const i=document.head;i.childNodes.length>0?i.insertBefore(r,i.childNodes[0]):i.appendChild(r)}}tooltipHandler(t,n,r,i){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),i==null||i===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(i,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:s,y:o}=gBt(n,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.style.top=`${o}px`,this.el.style.left=`${s}px`}}var e9={};function bBt(e){return e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var t9,rfe;function vBt(){return rfe||(rfe=1,t9=function(e){e.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}),t9}var xBt=gr;gr.Node=P1;gr.create=gr;function gr(e){var t=this;if(t instanceof gr||(t=new gr),t.tail=null,t.head=null,t.length=0,e&&typeof e.forEach=="function")e.forEach(function(i){t.push(i)});else if(arguments.length>0)for(var n=0,r=arguments.length;n<r;n++)t.push(arguments[n]);return t}gr.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t};gr.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}};gr.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}};gr.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)EBt(this,arguments[e]);return this.length};gr.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)_Bt(this,arguments[e]);return this.length};gr.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}};gr.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}};gr.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,r=0;n!==null;r++)e.call(t,n.value,r,this),n=n.next};gr.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,r=this.length-1;n!==null;r--)e.call(t,n.value,r,this),n=n.prev};gr.prototype.get=function(e){for(var t=0,n=this.head;n!==null&&t<e;t++)n=n.next;if(t===e&&n!==null)return n.value};gr.prototype.getReverse=function(e){for(var t=0,n=this.tail;n!==null&&t<e;t++)n=n.prev;if(t===e&&n!==null)return n.value};gr.prototype.map=function(e,t){t=t||this;for(var n=new gr,r=this.head;r!==null;)n.push(e.call(t,r.value,this)),r=r.next;return n};gr.prototype.mapReverse=function(e,t){t=t||this;for(var n=new gr,r=this.tail;r!==null;)n.push(e.call(t,r.value,this)),r=r.prev;return n};gr.prototype.reduce=function(e,t){var n,r=this.head;if(arguments.length>1)n=t;else if(this.head)r=this.head.next,n=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;r!==null;i++)n=e(n,r.value,i),r=r.next;return n};gr.prototype.reduceReverse=function(e,t){var n,r=this.tail;if(arguments.length>1)n=t;else if(this.tail)r=this.tail.prev,n=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;r!==null;i--)n=e(n,r.value,i),r=r.prev;return n};gr.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;n!==null;t++)e[t]=n.value,n=n.next;return e};gr.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;n!==null;t++)e[t]=n.value,n=n.prev;return e};gr.prototype.slice=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new gr;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(;i!==null&&r<t;r++,i=i.next)n.push(i.value);return n};gr.prototype.sliceReverse=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new gr;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=this.length,i=this.tail;i!==null&&r>t;r--)i=i.prev;for(;i!==null&&r>e;r--,i=i.prev)n.push(i.value);return n};gr.prototype.splice=function(e,t,...n){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(var s=[],r=0;i&&r<t;r++)s.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var r=0;r<n.length;r++)i=wBt(this,i,n[r]);return s};gr.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;n!==null;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=t,this.tail=e,this};function wBt(e,t,n){var r=t===e.head?new P1(n,null,t,e):new P1(n,t,t.next,e);return r.next===null&&(e.tail=r),r.prev===null&&(e.head=r),e.length++,r}function EBt(e,t){e.tail=new P1(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function _Bt(e,t){e.head=new P1(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function P1(e,t,n,r){if(!(this instanceof P1))return new P1(e,t,n,r);this.list=r,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}try{vBt()(gr)}catch{}const TBt=xBt,_y=Symbol("max"),Hh=Symbol("length"),vv=Symbol("lengthCalculator"),x2=Symbol("allowStale"),Ny=Symbol("maxAge"),jh=Symbol("dispose"),ife=Symbol("noDisposeOnSet"),Vs=Symbol("lruList"),$c=Symbol("cache"),KPe=Symbol("updateAgeOnGet"),n9=()=>1;class CBt{constructor(t){if(typeof t=="number"&&(t={max:t}),t||(t={}),t.max&&(typeof t.max!="number"||t.max<0))throw new TypeError("max must be a non-negative number");this[_y]=t.max||1/0;const n=t.length||n9;if(this[vv]=typeof n!="function"?n9:n,this[x2]=t.stale||!1,t.maxAge&&typeof t.maxAge!="number")throw new TypeError("maxAge must be a number");this[Ny]=t.maxAge||0,this[jh]=t.dispose,this[ife]=t.noDisposeOnSet||!1,this[KPe]=t.updateAgeOnGet||!1,this.reset()}set max(t){if(typeof t!="number"||t<0)throw new TypeError("max must be a non-negative number");this[_y]=t||1/0,G_(this)}get max(){return this[_y]}set allowStale(t){this[x2]=!!t}get allowStale(){return this[x2]}set maxAge(t){if(typeof t!="number")throw new TypeError("maxAge must be a non-negative number");this[Ny]=t,G_(this)}get maxAge(){return this[Ny]}set lengthCalculator(t){typeof t!="function"&&(t=n9),t!==this[vv]&&(this[vv]=t,this[Hh]=0,this[Vs].forEach(n=>{n.length=this[vv](n.value,n.key),this[Hh]+=n.length})),G_(this)}get lengthCalculator(){return this[vv]}get length(){return this[Hh]}get itemCount(){return this[Vs].length}rforEach(t,n){n=n||this;for(let r=this[Vs].tail;r!==null;){const i=r.prev;sfe(this,t,r,n),r=i}}forEach(t,n){n=n||this;for(let r=this[Vs].head;r!==null;){const i=r.next;sfe(this,t,r,n),r=i}}keys(){return this[Vs].toArray().map(t=>t.key)}values(){return this[Vs].toArray().map(t=>t.value)}reset(){this[jh]&&this[Vs]&&this[Vs].length&&this[Vs].forEach(t=>this[jh](t.key,t.value)),this[$c]=new Map,this[Vs]=new TBt,this[Hh]=0}dump(){return this[Vs].map(t=>e4(this,t)?!1:{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[Vs]}set(t,n,r){if(r=r||this[Ny],r&&typeof r!="number")throw new TypeError("maxAge must be a number");const i=r?Date.now():0,s=this[vv](n,t);if(this[$c].has(t)){if(s>this[_y])return vx(this,this[$c].get(t)),!1;const u=this[$c].get(t).value;return this[jh]&&(this[ife]||this[jh](t,u.value)),u.now=i,u.maxAge=r,u.value=n,this[Hh]+=s-u.length,u.length=s,this.get(t),G_(this),!0}const o=new SBt(t,n,s,i,r);return o.length>this[_y]?(this[jh]&&this[jh](t,n),!1):(this[Hh]+=o.length,this[Vs].unshift(o),this[$c].set(t,this[Vs].head),G_(this),!0)}has(t){if(!this[$c].has(t))return!1;const n=this[$c].get(t).value;return!e4(this,n)}get(t){return r9(this,t,!0)}peek(t){return r9(this,t,!1)}pop(){const t=this[Vs].tail;return t?(vx(this,t),t.value):null}del(t){vx(this,this[$c].get(t))}load(t){this.reset();const n=Date.now();for(let r=t.length-1;r>=0;r--){const i=t[r],s=i.e||0;if(s===0)this.set(i.k,i.v);else{const o=s-n;o>0&&this.set(i.k,i.v,o)}}}prune(){this[$c].forEach((t,n)=>r9(this,n,!1))}}const r9=(e,t,n)=>{const r=e[$c].get(t);if(r){const i=r.value;if(e4(e,i)){if(vx(e,r),!e[x2])return}else n&&(e[KPe]&&(r.value.now=Date.now()),e[Vs].unshiftNode(r));return i.value}},e4=(e,t)=>{if(!t||!t.maxAge&&!e[Ny])return!1;const n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[Ny]&&n>e[Ny]},G_=e=>{if(e[Hh]>e[_y])for(let t=e[Vs].tail;e[Hh]>e[_y]&&t!==null;){const n=t.prev;vx(e,t),t=n}},vx=(e,t)=>{if(t){const n=t.value;e[jh]&&e[jh](n.key,n.value),e[Hh]-=n.length,e[$c].delete(n.key),e[Vs].removeNode(t)}};class SBt{constructor(t,n,r,i,s){this.key=t,this.value=n,this.length=r,this.now=i,this.maxAge=s||0}}const sfe=(e,t,n,r)=>{let i=n.value;e4(e,i)&&(vx(e,n),e[x2]||(i=void 0)),i&&t.call(r,i.value,i.key,e)};var ABt=CBt;const kBt=Object.freeze({loose:!0}),IBt=Object.freeze({}),RBt=e=>e?typeof e!="object"?kBt:e:IBt;var MQ=RBt,Oz={exports:{}};const DBt="2.0.0",XPe=256,PBt=Number.MAX_SAFE_INTEGER||9007199254740991,NBt=16,OBt=XPe-6,$Bt=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var LQ={MAX_LENGTH:XPe,MAX_SAFE_COMPONENT_LENGTH:NBt,MAX_SAFE_BUILD_LENGTH:OBt,MAX_SAFE_INTEGER:PBt,RELEASE_TYPES:$Bt,SEMVER_SPEC_VERSION:DBt,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const MBt=typeof process=="object"&&e9&&e9.NODE_DEBUG&&/\bsemver\b/i.test(e9.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var s5=MBt;(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:i}=LQ,s=s5;t=e.exports={};const o=t.re=[],a=t.safeRe=[],u=t.src=[],l=t.t={};let c=0;const d="[a-zA-Z0-9-]",f=[["\\s",1],["\\d",i],[d,r]],h=m=>{for(const[y,v]of f)m=m.split(`${y}*`).join(`${y}{0,${v}}`).split(`${y}+`).join(`${y}{1,${v}}`);return m},p=(m,y,v)=>{const b=h(y),w=c++;s(m,w,y),l[m]=w,u[w]=y,o[w]=new RegExp(y,v?"g":void 0),a[w]=new RegExp(b,v?"g":void 0)};p("NUMERICIDENTIFIER","0|[1-9]\\d*"),p("NUMERICIDENTIFIERLOOSE","\\d+"),p("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${d}*`),p("MAINVERSION",`(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})`),p("MAINVERSIONLOOSE",`(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASEIDENTIFIER",`(?:${u[l.NUMERICIDENTIFIER]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASEIDENTIFIERLOOSE",`(?:${u[l.NUMERICIDENTIFIERLOOSE]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASE",`(?:-(${u[l.PRERELEASEIDENTIFIER]}(?:\\.${u[l.PRERELEASEIDENTIFIER]})*))`),p("PRERELEASELOOSE",`(?:-?(${u[l.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${u[l.PRERELEASEIDENTIFIERLOOSE]})*))`),p("BUILDIDENTIFIER",`${d}+`),p("BUILD",`(?:\\+(${u[l.BUILDIDENTIFIER]}(?:\\.${u[l.BUILDIDENTIFIER]})*))`),p("FULLPLAIN",`v?${u[l.MAINVERSION]}${u[l.PRERELEASE]}?${u[l.BUILD]}?`),p("FULL",`^${u[l.FULLPLAIN]}$`),p("LOOSEPLAIN",`[v=\\s]*${u[l.MAINVERSIONLOOSE]}${u[l.PRERELEASELOOSE]}?${u[l.BUILD]}?`),p("LOOSE",`^${u[l.LOOSEPLAIN]}$`),p("GTLT","((?:<|>)?=?)"),p("XRANGEIDENTIFIERLOOSE",`${u[l.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),p("XRANGEIDENTIFIER",`${u[l.NUMERICIDENTIFIER]}|x|X|\\*`),p("XRANGEPLAIN",`[v=\\s]*(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:${u[l.PRERELEASE]})?${u[l.BUILD]}?)?)?`),p("XRANGEPLAINLOOSE",`[v=\\s]*(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:${u[l.PRERELEASELOOSE]})?${u[l.BUILD]}?)?)?`),p("XRANGE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAIN]}$`),p("XRANGELOOSE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAINLOOSE]}$`),p("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),p("COERCE",`${u[l.COERCEPLAIN]}(?:$|[^\\d])`),p("COERCEFULL",u[l.COERCEPLAIN]+`(?:${u[l.PRERELEASE]})?(?:${u[l.BUILD]})?(?:$|[^\\d])`),p("COERCERTL",u[l.COERCE],!0),p("COERCERTLFULL",u[l.COERCEFULL],!0),p("LONETILDE","(?:~>?)"),p("TILDETRIM",`(\\s*)${u[l.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",p("TILDE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAIN]}$`),p("TILDELOOSE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAINLOOSE]}$`),p("LONECARET","(?:\\^)"),p("CARETTRIM",`(\\s*)${u[l.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",p("CARET",`^${u[l.LONECARET]}${u[l.XRANGEPLAIN]}$`),p("CARETLOOSE",`^${u[l.LONECARET]}${u[l.XRANGEPLAINLOOSE]}$`),p("COMPARATORLOOSE",`^${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]})$|^$`),p("COMPARATOR",`^${u[l.GTLT]}\\s*(${u[l.FULLPLAIN]})$|^$`),p("COMPARATORTRIM",`(\\s*)${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]}|${u[l.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",p("HYPHENRANGE",`^\\s*(${u[l.XRANGEPLAIN]})\\s+-\\s+(${u[l.XRANGEPLAIN]})\\s*$`),p("HYPHENRANGELOOSE",`^\\s*(${u[l.XRANGEPLAINLOOSE]})\\s+-\\s+(${u[l.XRANGEPLAINLOOSE]})\\s*$`),p("STAR","(<|>)?=?\\s*\\*"),p("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),p("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(Oz,Oz.exports);var FQ=Oz.exports;const ofe=/^[0-9]+$/,QPe=(e,t)=>{const n=ofe.test(e),r=ofe.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1},LBt=(e,t)=>QPe(t,e);var FBt={compareIdentifiers:QPe,rcompareIdentifiers:LBt};const WI=s5,{MAX_LENGTH:afe,MAX_SAFE_INTEGER:GI}=LQ,{safeRe:ufe,t:lfe}=FQ,BBt=MQ,{compareIdentifiers:xv}=FBt;let jBt=class Kd{constructor(t,n){if(n=BBt(n),t instanceof Kd){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>afe)throw new TypeError(`version is longer than ${afe} characters`);WI("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;const r=t.trim().match(n.loose?ufe[lfe.LOOSE]:ufe[lfe.FULL]);if(!r)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>GI||this.major<0)throw new TypeError("Invalid major version");if(this.minor>GI||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>GI||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){const s=+i;if(s>=0&&s<GI)return s}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(WI("SemVer.compare",this.version,this.options,t),!(t instanceof Kd)){if(typeof t=="string"&&t===this.version)return 0;t=new Kd(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof Kd||(t=new Kd(t,this.options)),xv(this.major,t.major)||xv(this.minor,t.minor)||xv(this.patch,t.patch)}comparePre(t){if(t instanceof Kd||(t=new Kd(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let n=0;do{const r=this.prerelease[n],i=t.prerelease[n];if(WI("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return xv(r,i)}while(++n)}compareBuild(t){t instanceof Kd||(t=new Kd(t,this.options));let n=0;do{const r=this.build[n],i=t.build[n];if(WI("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return xv(r,i)}while(++n)}inc(t,n,r){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,r),this.inc("pre",n,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,r),this.inc("pre",n,r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const i=Number(r)?1:0;if(!n&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(n===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(n){let s=[n,i];r===!1&&(s=[n]),xv(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var BQ=jBt;const cfe=BQ,zBt=(e,t,n)=>new cfe(e,n).compare(new cfe(t,n));var DE=zBt;const UBt=DE,VBt=(e,t,n)=>UBt(e,t,n)===0;var HBt=VBt;const qBt=DE,WBt=(e,t,n)=>qBt(e,t,n)!==0;var GBt=WBt;const YBt=DE,KBt=(e,t,n)=>YBt(e,t,n)>0;var XBt=KBt;const QBt=DE,JBt=(e,t,n)=>QBt(e,t,n)>=0;var ZBt=JBt;const ejt=DE,tjt=(e,t,n)=>ejt(e,t,n)<0;var njt=tjt;const rjt=DE,ijt=(e,t,n)=>rjt(e,t,n)<=0;var sjt=ijt;const ojt=HBt,ajt=GBt,ujt=XBt,ljt=ZBt,cjt=njt,djt=sjt,fjt=(e,t,n,r)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return ojt(e,n,r);case"!=":return ajt(e,n,r);case">":return ujt(e,n,r);case">=":return ljt(e,n,r);case"<":return cjt(e,n,r);case"<=":return djt(e,n,r);default:throw new TypeError(`Invalid operator: ${t}`)}};var hjt=fjt,i9,dfe;function pjt(){if(dfe)return i9;dfe=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(c,d){if(d=n(d),c instanceof t){if(c.loose===!!d.loose)return c;c=c.value}c=c.trim().split(/\s+/).join(" "),o("comparator",c,d),this.options=d,this.loose=!!d.loose,this.parse(c),this.semver===e?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(c){const d=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],f=c.match(d);if(!f)throw new TypeError(`Invalid comparator: ${c}`);this.operator=f[1]!==void 0?f[1]:"",this.operator==="="&&(this.operator=""),f[2]?this.semver=new a(f[2],this.options.loose):this.semver=e}toString(){return this.value}test(c){if(o("Comparator.test",c,this.options.loose),this.semver===e||c===e)return!0;if(typeof c=="string")try{c=new a(c,this.options)}catch{return!1}return s(c,this.operator,this.semver,this.options)}intersects(c,d){if(!(c instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new u(c.value,d).test(this.value):c.operator===""?c.value===""?!0:new u(this.value,d).test(c.semver):(d=n(d),d.includePrerelease&&(this.value==="<0.0.0-0"||c.value==="<0.0.0-0")||!d.includePrerelease&&(this.value.startsWith("<0.0.0")||c.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&c.operator.startsWith(">")||this.operator.startsWith("<")&&c.operator.startsWith("<")||this.semver.version===c.semver.version&&this.operator.includes("=")&&c.operator.includes("=")||s(this.semver,"<",c.semver,d)&&this.operator.startsWith(">")&&c.operator.startsWith("<")||s(this.semver,">",c.semver,d)&&this.operator.startsWith("<")&&c.operator.startsWith(">")))}}i9=t;const n=MQ,{safeRe:r,t:i}=FQ,s=hjt,o=s5,a=BQ,u=JPe();return i9}var s9,ffe;function JPe(){if(ffe)return s9;ffe=1;class e{constructor(z,q){if(q=r(q),z instanceof e)return z.loose===!!q.loose&&z.includePrerelease===!!q.includePrerelease?z:new e(z.raw,q);if(z instanceof i)return this.raw=z.value,this.set=[[z]],this.format(),this;if(this.options=q,this.loose=!!q.loose,this.includePrerelease=!!q.includePrerelease,this.raw=z.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(W=>this.parseRange(W.trim())).filter(W=>W.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const W=this.set[0];if(this.set=this.set.filter(J=>!p(J[0])),this.set.length===0)this.set=[W];else if(this.set.length>1){for(const J of this.set)if(J.length===1&&m(J[0])){this.set=[J];break}}}this.format()}format(){return this.range=this.set.map(z=>z.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(z){const W=((this.options.includePrerelease&&f)|(this.options.loose&&h))+":"+z,J=n.get(W);if(J)return J;const K=this.options.loose,Z=K?a[u.HYPHENRANGELOOSE]:a[u.HYPHENRANGE];z=z.replace(Z,O(this.options.includePrerelease)),s("hyphen replace",z),z=z.replace(a[u.COMPARATORTRIM],l),s("comparator trim",z),z=z.replace(a[u.TILDETRIM],c),s("tilde trim",z),z=z.replace(a[u.CARETTRIM],d),s("caret trim",z);let U=z.split(" ").map(G=>v(G,this.options)).join(" ").split(/\s+/).map(G=>N(G,this.options));K&&(U=U.filter(G=>(s("loose invalid filter",G,this.options),!!G.match(a[u.COMPARATORLOOSE])))),s("range list",U);const L=new Map,Y=U.map(G=>new i(G,this.options));for(const G of Y){if(p(G))return[G];L.set(G.value,G)}L.size>1&&L.has("")&&L.delete("");const j=[...L.values()];return n.set(W,j),j}intersects(z,q){if(!(z instanceof e))throw new TypeError("a Range is required");return this.set.some(W=>y(W,q)&&z.set.some(J=>y(J,q)&&W.every(K=>J.every(Z=>K.intersects(Z,q)))))}test(z){if(!z)return!1;if(typeof z=="string")try{z=new o(z,this.options)}catch{return!1}for(let q=0;q<this.set.length;q++)if(F(this.set[q],z,this.options))return!0;return!1}}s9=e;const t=ABt,n=new t({max:1e3}),r=MQ,i=pjt(),s=s5,o=BQ,{safeRe:a,t:u,comparatorTrimReplace:l,tildeTrimReplace:c,caretTrimReplace:d}=FQ,{FLAG_INCLUDE_PRERELEASE:f,FLAG_LOOSE:h}=LQ,p=$=>$.value==="<0.0.0-0",m=$=>$.value==="",y=($,z)=>{let q=!0;const W=$.slice();let J=W.pop();for(;q&&W.length;)q=W.every(K=>J.intersects(K,z)),J=W.pop();return q},v=($,z)=>(s("comp",$,z),$=_($,z),s("caret",$),$=w($,z),s("tildes",$),$=S($,z),s("xrange",$),$=R($,z),s("stars",$),$),b=$=>!$||$.toLowerCase()==="x"||$==="*",w=($,z)=>$.trim().split(/\s+/).map(q=>E(q,z)).join(" "),E=($,z)=>{const q=z.loose?a[u.TILDELOOSE]:a[u.TILDE];return $.replace(q,(W,J,K,Z,U)=>{s("tilde",$,W,J,K,Z,U);let L;return b(J)?L="":b(K)?L=`>=${J}.0.0 <${+J+1}.0.0-0`:b(Z)?L=`>=${J}.${K}.0 <${J}.${+K+1}.0-0`:U?(s("replaceTilde pr",U),L=`>=${J}.${K}.${Z}-${U} <${J}.${+K+1}.0-0`):L=`>=${J}.${K}.${Z} <${J}.${+K+1}.0-0`,s("tilde return",L),L})},_=($,z)=>$.trim().split(/\s+/).map(q=>C(q,z)).join(" "),C=($,z)=>{s("caret",$,z);const q=z.loose?a[u.CARETLOOSE]:a[u.CARET],W=z.includePrerelease?"-0":"";return $.replace(q,(J,K,Z,U,L)=>{s("caret",$,J,K,Z,U,L);let Y;return b(K)?Y="":b(Z)?Y=`>=${K}.0.0${W} <${+K+1}.0.0-0`:b(U)?K==="0"?Y=`>=${K}.${Z}.0${W} <${K}.${+Z+1}.0-0`:Y=`>=${K}.${Z}.0${W} <${+K+1}.0.0-0`:L?(s("replaceCaret pr",L),K==="0"?Z==="0"?Y=`>=${K}.${Z}.${U}-${L} <${K}.${Z}.${+U+1}-0`:Y=`>=${K}.${Z}.${U}-${L} <${K}.${+Z+1}.0-0`:Y=`>=${K}.${Z}.${U}-${L} <${+K+1}.0.0-0`):(s("no pr"),K==="0"?Z==="0"?Y=`>=${K}.${Z}.${U}${W} <${K}.${Z}.${+U+1}-0`:Y=`>=${K}.${Z}.${U}${W} <${K}.${+Z+1}.0-0`:Y=`>=${K}.${Z}.${U} <${+K+1}.0.0-0`),s("caret return",Y),Y})},S=($,z)=>(s("replaceXRanges",$,z),$.split(/\s+/).map(q=>k(q,z)).join(" ")),k=($,z)=>{$=$.trim();const q=z.loose?a[u.XRANGELOOSE]:a[u.XRANGE];return $.replace(q,(W,J,K,Z,U,L)=>{s("xRange",$,W,J,K,Z,U,L);const Y=b(K),j=Y||b(Z),G=j||b(U),X=G;return J==="="&&X&&(J=""),L=z.includePrerelease?"-0":"",Y?J===">"||J==="<"?W="<0.0.0-0":W="*":J&&X?(j&&(Z=0),U=0,J===">"?(J=">=",j?(K=+K+1,Z=0,U=0):(Z=+Z+1,U=0)):J==="<="&&(J="<",j?K=+K+1:Z=+Z+1),J==="<"&&(L="-0"),W=`${J+K}.${Z}.${U}${L}`):j?W=`>=${K}.0.0${L} <${+K+1}.0.0-0`:G&&(W=`>=${K}.${Z}.0${L} <${K}.${+Z+1}.0-0`),s("xRange return",W),W})},R=($,z)=>(s("replaceStars",$,z),$.trim().replace(a[u.STAR],"")),N=($,z)=>(s("replaceGTE0",$,z),$.trim().replace(a[z.includePrerelease?u.GTE0PRE:u.GTE0],"")),O=$=>(z,q,W,J,K,Z,U,L,Y,j,G,X,ne)=>(b(W)?q="":b(J)?q=`>=${W}.0.0${$?"-0":""}`:b(K)?q=`>=${W}.${J}.0${$?"-0":""}`:Z?q=`>=${q}`:q=`>=${q}${$?"-0":""}`,b(Y)?L="":b(j)?L=`<${+Y+1}.0.0-0`:b(G)?L=`<${Y}.${+j+1}.0-0`:X?L=`<=${Y}.${j}.${G}-${X}`:$?L=`<${Y}.${j}.${+G+1}-0`:L=`<=${L}`,`${q} ${L}`.trim()),F=($,z,q)=>{for(let W=0;W<$.length;W++)if(!$[W].test(z))return!1;if(z.prerelease.length&&!q.includePrerelease){for(let W=0;W<$.length;W++)if(s($[W].semver),$[W].semver!==i.ANY&&$[W].semver.prerelease.length>0){const J=$[W].semver;if(J.major===z.major&&J.minor===z.minor&&J.patch===z.patch)return!0}return!1}return!0};return s9}const mjt=JPe(),gjt=(e,t,n)=>{try{t=new mjt(t,n)}catch{return!1}return t.test(e)};var yjt=gjt,ZPe=bBt(yjt);function bjt(e,t,n){const r=e.open(t),i=250,{origin:s}=new URL(t);let o=40;function a(l){l.source===r&&(o=0,e.removeEventListener("message",a,!1))}e.addEventListener("message",a,!1);function u(){o<=0||(r.postMessage(n,s),setTimeout(u,i),o-=1)}setTimeout(u,i)}var vjt=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function e3e(e,...t){for(const n of t)xjt(e,n);return e}function xjt(e,t){for(const n of Object.keys(t))hE(e,n,t[n],!0)}const Lc=z3t;let $C=u9t;const YI=typeof window<"u"?window:void 0;var ipe;$C===void 0&&((ipe=YI==null?void 0:YI.vl)!=null&&ipe.compile)&&($C=YI.vl);const wjt={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},Ejt={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},FT={vega:"Vega","vega-lite":"Vega-Lite"},t4={vega:Lc.version,"vega-lite":$C?$C.version:"not available"},_jt={vega:e=>e,"vega-lite":(e,t)=>$C.compile(e,{config:t}).spec},Tjt=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,Cjt="chart-wrapper";function Sjt(e){return typeof e=="function"}function hfe(e,t,n,r){const i=`<html><head>${t}</head><body><pre><code class="json">`,s=`</code></pre>${n}</body></html>`,o=window.open("");o.document.write(i+e+s),o.document.title=`${FT[r]} JSON Source`}function Ajt(e,t){if(e.$schema){const n=qPe(e.$schema);t&&t!==n.library&&console.warn(`The given visualization spec is written in ${FT[n.library]}, but mode argument sets ${FT[t]??t}.`);const r=n.library;return ZPe(t4[r],`^${n.version.slice(1)}`)||console.warn(`The input spec uses ${FT[r]} ${n.version}, but the current version of ${FT[r]} is v${t4[r]}.`),r}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}function t3e(e){return!!(e&&"load"in e)}function pfe(e){return t3e(e)?e:Lc.loader(e)}function kjt(e){var n;const t=((n=e.usermeta)==null?void 0:n.embedOptions)??{};return It(t.defaultStyle)&&(t.defaultStyle=!1),t}async function Ijt(e,t,n={}){let r,i;It(t)?(i=pfe(n.loader),r=JSON.parse(await i.load(t))):r=t;const s=kjt(r),o=s.loader;(!i||o)&&(i=pfe(n.loader??o));const a=await mfe(s,i),u=await mfe(n,i),l={...e3e(u,a),config:fE(u.config??{},a.config??{})};return await Djt(e,r,l,i)}async function mfe(e,t){const n=It(e.config)?JSON.parse(await t.load(e.config)):e.config??{},r=It(e.patch)?JSON.parse(await t.load(e.patch)):e.patch;return{...e,...r?{patch:r}:{},...n?{config:n}:{}}}function Rjt(e){const t=e.getRootNode?e.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}async function Djt(e,t,n={},r){const i=n.theme?fE(lBt[n.theme],n.config??{}):n.config,s=pg(n.actions)?n.actions:e3e({},wjt,n.actions??{}),o={...Ejt,...n.i18n},a=n.renderer??"canvas",u=n.logLevel??Lc.Warn,l=n.downloadFileName??"visualization",c=typeof e=="string"?document.querySelector(e):e;if(!c)throw new Error(`${e} does not exist`);if(n.defaultStyle!==!1){const _="vega-embed-style",{root:C,rootContainer:S}=Rjt(c);if(!C.getElementById(_)){const k=document.createElement("style");k.id=_,k.innerHTML=n.defaultStyle===void 0||n.defaultStyle===!0?vjt.toString():n.defaultStyle,S.appendChild(k)}}const d=Ajt(t,n.mode);let f=_jt[d](t,i);if(d==="vega-lite"&&f.$schema){const _=qPe(f.$schema);ZPe(t4.vega,`^${_.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${_.version}, but current version is v${t4.vega}.`)}c.classList.add("vega-embed"),s&&c.classList.add("has-actions"),c.innerHTML="";let h=c;if(s){const _=document.createElement("div");_.classList.add(Cjt),c.appendChild(_),h=_}const p=n.patch;if(p&&(f=p instanceof Function?p(f):g6(f,p,!0,!1).newDocument),n.formatLocale&&Lc.formatLocale(n.formatLocale),n.timeFormatLocale&&Lc.timeFormatLocale(n.timeFormatLocale),n.expressionFunctions)for(const _ in n.expressionFunctions){const C=n.expressionFunctions[_];"fn"in C?Lc.expressionFunction(_,C.fn,C.visitor):C instanceof Function&&Lc.expressionFunction(_,C)}const{ast:m}=n,y=Lc.parse(f,d==="vega-lite"?{}:i,{ast:m}),v=new(n.viewClass||Lc.View)(y,{loader:r,logLevel:u,renderer:a,...m?{expr:Lc.expressionInterpreter??n.expr??Q3t}:{}});if(v.addSignalListener("autosize",(_,C)=>{const{type:S}=C;S=="fit-x"?(h.classList.add("fit-x"),h.classList.remove("fit-y")):S=="fit-y"?(h.classList.remove("fit-x"),h.classList.add("fit-y")):S=="fit"?h.classList.add("fit-x","fit-y"):h.classList.remove("fit-x","fit-y")}),n.tooltip!==!1){const{loader:_,tooltip:C}=n,S=_&&!t3e(_)?_==null?void 0:_.baseURL:void 0,k=Sjt(C)?C:new yBt({baseURL:S,...C===!0?{}:C}).call;v.tooltip(k)}let{hover:b}=n;if(b===void 0&&(b=d==="vega"),b){const{hoverSet:_,updateSet:C}=typeof b=="boolean"?{}:b;v.hover(_,C)}n&&(n.width!=null&&v.width(n.width),n.height!=null&&v.height(n.height),n.padding!=null&&v.padding(n.padding)),await v.initialize(h,n.bind).runAsync();let w;if(s!==!1){let _=c;if(n.defaultStyle!==!1||n.forceActionsMenu){const S=document.createElement("details");S.title=o.CLICK_TO_VIEW_ACTIONS,c.append(S),_=S;const k=document.createElement("summary");k.innerHTML=Tjt,S.append(k),w=R=>{S.contains(R.target)||S.removeAttribute("open")},document.addEventListener("click",w)}const C=document.createElement("div");if(_.append(C),C.classList.add("vega-actions"),s===!0||s.export!==!1){for(const S of["svg","png"])if(s===!0||s.export===!0||s.export[S]){const k=o[`${S.toUpperCase()}_ACTION`],R=document.createElement("a"),N=kt(n.scaleFactor)?n.scaleFactor[S]:n.scaleFactor;R.text=k,R.href="#",R.target="_blank",R.download=`${l}.${S}`,R.addEventListener("mousedown",async function(O){O.preventDefault();const F=await v.toImageURL(S,N);this.href=F}),C.append(R)}}if(s===!0||s.source!==!1){const S=document.createElement("a");S.text=o.SOURCE_ACTION,S.href="#",S.addEventListener("click",function(k){hfe(ZL(t),n.sourceHeader??"",n.sourceFooter??"",d),k.preventDefault()}),C.append(S)}if(d==="vega-lite"&&(s===!0||s.compiled!==!1)){const S=document.createElement("a");S.text=o.COMPILED_ACTION,S.href="#",S.addEventListener("click",function(k){hfe(ZL(f),n.sourceHeader??"",n.sourceFooter??"","vega"),k.preventDefault()}),C.append(S)}if(s===!0||s.editor!==!1){const S=n.editorUrl??"https://vega.github.io/editor/",k=document.createElement("a");k.text=o.EDITOR_ACTION,k.href="#",k.addEventListener("click",function(R){bjt(window,S,{config:i,mode:d,renderer:a,spec:ZL(t)}),R.preventDefault()}),C.append(k)}}function E(){w&&document.removeEventListener("click",w),v.finalize()}return{view:v,spec:t,vgSpec:f,finalize:E,embedOptions:n}}function Pjt(e){return!!e&&{}.toString.call(e)==="[object Function]"}function Njt(e,t,n){n&&(Pjt(n)?n(e.data(t)):e.change(t,Lc.changeset().remove(()=>!0).insert(n)))}function Ojt(e,t){Object.keys(t).forEach(n=>{Njt(e,n,t[n])})}function n3e(e){const t=new Set;return e.forEach(n=>{Object.keys(n).forEach(r=>{t.add(r)})}),t}const r3e=()=>{};function o9(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.addSignalListener(r,t[r])}catch(i){console.warn("Cannot add invalid signal listener.",i)}}),n.length>0}function $jt(e,t){if(e===t)return!1;const n={width:!1,height:!1,isExpensive:!1},r=n3e([e,t]);return r.has("width")&&(!("width"in e)||!("width"in t)||e.width!==t.width)&&("width"in e&&typeof e.width=="number"?n.width=e.width:n.isExpensive=!0),r.has("height")&&(!("height"in e)||!("height"in t)||e.height!==t.height)&&("height"in e&&typeof e.height=="number"?n.height=e.height:n.isExpensive=!0),r.delete("width"),r.delete("height"),[...r].some(i=>!(i in e)||!(i in t)||!ET(e[i],t[i]))&&(n.isExpensive=!0),n.width!==!1||n.height!==!1||n.isExpensive?n:!1}function gfe(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.removeSignalListener(r,t[r])}catch(i){console.warn("Cannot remove invalid signal listener.",i)}}),n.length>0}function a9(e){const{spec:t,width:n,height:r}=e;return typeof n<"u"&&typeof r<"u"?{...t,width:n,height:r}:typeof n<"u"?{...t,width:n}:typeof r<"u"?{...t,height:r}:t}function BT(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class i3e extends rr.PureComponent{constructor(){super(...arguments),BT(this,"containerRef",rr.createRef()),BT(this,"resultPromise",void 0),BT(this,"handleError",t=>{const{onError:n=r3e}=this.props;n(t,this.containerRef.current),console.warn(t)}),BT(this,"modifyView",t=>{this.resultPromise&&this.resultPromise.then(n=>(n&&t(n.view),!0)).catch(this.handleError)})}componentDidMount(){this.createView()}componentDidUpdate(t){const n=n3e([this.props,t]);if(n.delete("className"),n.delete("signalListeners"),n.delete("spec"),n.delete("style"),n.delete("width"),n.delete("height"),Array.from(n).some(r=>this.props[r]!==t[r]))this.clearView(),this.createView();else{const r=$jt(a9(this.props),a9(t)),{signalListeners:i}=this.props,{signalListeners:s}=t;if(r)if(r.isExpensive)this.clearView(),this.createView();else{const o=!e7(i,s);this.modifyView(a=>{r.width!==!1&&a.width(r.width),r.height!==!1&&a.height(r.height),o&&(s&&gfe(a,s),i&&o9(a,i)),a.run()})}else e7(i,s)||this.modifyView(o=>{s&&gfe(o,s),i&&o9(o,i),o.run()})}}componentWillUnmount(){this.clearView()}createView(){const{spec:t,onNewView:n,signalListeners:r={},width:i,height:s,...o}=this.props;if(this.containerRef.current){const a=a9(this.props);this.resultPromise=Ijt(this.containerRef.current,a,o).then(u=>{if(u){const{view:l}=u;o9(l,r)&&l.run()}return u}).catch(this.handleError),n&&this.modifyView(n)}}clearView(){return this.resultPromise&&this.resultPromise.then(t=>{t&&t.finalize()}).catch(this.handleError),this.resultPromise=void 0,this}render(){const{className:t,style:n}=this.props;return rr.createElement("div",{ref:this.containerRef,className:t,style:n})}}BT(i3e,"propTypes",{className:Ate.string,onError:Ate.func});function $z(){return $z=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$z.apply(this,arguments)}function Mz(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Mjt={};class jQ extends rr.PureComponent{constructor(){super(...arguments),Mz(this,"vegaEmbed",rr.createRef()),Mz(this,"handleNewView",t=>{this.update();const{onNewView:n=r3e}=this.props;n(t)})}componentDidMount(){this.update()}componentDidUpdate(t){e7(this.props.data,t.data)||this.update()}update(){const{data:t}=this.props;this.vegaEmbed.current&&t&&Object.keys(t).length>0&&this.vegaEmbed.current.modifyView(n=>{Ojt(n,t),n.resize().run()})}render(){const{data:t,...n}=this.props;return rr.createElement(i3e,$z({ref:this.vegaEmbed},n,{onNewView:this.handleNewView}))}}Mz(jQ,"defaultProps",{data:Mjt});function Lz(){return Lz=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Lz.apply(this,arguments)}function yfe(e){return rr.createElement(jQ,Lz({},e,{mode:"vega-lite"}))}const Ljt=jQ;function Fjt({currentConfig:e,provState:t}){const n=Bo(),[r,i]=D.useState(null),[s,o]=D.useState(!0),a=sb(),{updateResponseBlockValidation:u,setReactiveAnswers:l}=ro(),[c,d]=D.useState(),{actions:f,trrack:h}=D.useMemo(()=>{const b=J1.create(),w=b.register("signal",(_,C)=>(_.event=C,_)),E=CS({registry:b,initialState:{event:{}}});return{actions:{signalAction:w},trrack:E}},[]),p=D.useCallback(({status:b,provenanceGraph:w,answers:E})=>{n(u({location:"stimulus",identifier:a,status:b,values:E,provenanceGraph:w})),n(l(E))},[n,u,a,l]),m=D.useCallback((b,w)=>{h.apply(b,f.signalAction({key:b,value:w}))},[f,h]),y=D.useCallback((b,w)=>{const{responseId:E,response:_}=w;p({status:!0,provenanceGraph:h.graph.backend,answers:{[E]:_}})},[p,h.graph.backend]),v=D.useMemo(()=>{var w;const b=(w=r==null?void 0:r.config)==null?void 0:w.signals;return b?b.reduce((E,_)=>(_.name==="revisitAnswer"?E[_.name]=y:E[_.name]=m,E),{}):{}},[y,m,r]);return D.useEffect(()=>{async function b(){o(!0);let w;"path"in e?w=await bbt(e.path):w=e.config,w!==void 0&&i(w),o(!1)}e&&b()},[e]),D.useEffect(()=>{c&&t&&t.event&&t.event.key&&c.signal(t.event.key,t.event.value).run()},[c,t]),s?T.jsx("div",{children:"Loading..."}):"path"in e&&!r?T.jsx(Op,{path:e.path}):r?T.jsx(Ljt,{spec:structuredClone(r),signalListeners:v,onNewView:b=>d(b)}):T.jsx("div",{children:"Failed to load vega config"})}function Dt(e,t,n){return(t=jjt(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Bjt(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function jjt(e){var t=Bjt(e,"string");return typeof t=="symbol"?t:String(t)}function zjt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bfe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ujt(e,t,n){return bfe(e.prototype,t),bfe(e,n),e}function Vjt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vfe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function xfe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?vfe(Object(n),!0).forEach(function(r){Vjt(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vfe(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var wfe={addCSS:!0,thumbWidth:15,watch:!0};function Hjt(e,t){return(function(){return Array.from(document.querySelectorAll(t)).includes(this)}).call(e,t)}function qjt(e,t){if(e&&t){var n=new Event(t,{bubbles:!0});e.dispatchEvent(n)}}var TA=function(e){return e!=null?e.constructor:null},zQ=function(e,t){return!!(e&&t&&e instanceof t)},s3e=function(e){return e==null},o3e=function(e){return TA(e)===Object},Wjt=function(e){return TA(e)===Number&&!Number.isNaN(e)},a3e=function(e){return TA(e)===String},Gjt=function(e){return TA(e)===Boolean},Yjt=function(e){return TA(e)===Function},u3e=function(e){return Array.isArray(e)},l3e=function(e){return zQ(e,NodeList)},Kjt=function(e){return zQ(e,Element)},Xjt=function(e){return zQ(e,Event)},Qjt=function(e){return s3e(e)||(a3e(e)||u3e(e)||l3e(e))&&!e.length||o3e(e)&&!Object.keys(e).length},Qo={nullOrUndefined:s3e,object:o3e,number:Wjt,string:a3e,boolean:Gjt,function:Yjt,array:u3e,nodeList:l3e,element:Kjt,event:Xjt,empty:Qjt};function Jjt(e){var t="".concat(e).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return t?Math.max(0,(t[1]?t[1].length:0)-(t[2]?+t[2]:0)):0}function Zjt(e,t){if(1>t){var n=Jjt(t);return parseFloat(e.toFixed(n))}return Math.round(e/t)*t}var e7t=function(){function e(t,n){zjt(this,e),Qo.element(t)?this.element=t:Qo.string(t)&&(this.element=document.querySelector(t)),Qo.element(this.element)&&Qo.empty(this.element.rangeTouch)&&(this.config=xfe({},wfe,{},n),this.init())}return Ujt(e,[{key:"init",value:function(){e.enabled&&(this.config.addCSS&&(this.element.style.userSelect="none",this.element.style.webKitUserSelect="none",this.element.style.touchAction="manipulation"),this.listeners(!0),this.element.rangeTouch=this)}},{key:"destroy",value:function(){e.enabled&&(this.config.addCSS&&(this.element.style.userSelect="",this.element.style.webKitUserSelect="",this.element.style.touchAction=""),this.listeners(!1),this.element.rangeTouch=null)}},{key:"listeners",value:function(t){var n=this,r=t?"addEventListener":"removeEventListener";["touchstart","touchmove","touchend"].forEach(function(i){n.element[r](i,function(s){return n.set(s)},!1)})}},{key:"get",value:function(t){if(!e.enabled||!Qo.event(t))return null;var n,r=t.target,i=t.changedTouches[0],s=parseFloat(r.getAttribute("min"))||0,o=parseFloat(r.getAttribute("max"))||100,a=parseFloat(r.getAttribute("step"))||1,u=r.getBoundingClientRect(),l=100/u.width*(this.config.thumbWidth/2)/100;return 0>(n=100/u.width*(i.clientX-u.left))?n=0:100<n&&(n=100),50>n?n-=(100-2*n)*l:50<n&&(n+=2*(n-50)*l),s+Zjt(n/100*(o-s),a)}},{key:"set",value:function(t){e.enabled&&Qo.event(t)&&!t.target.disabled&&(t.preventDefault(),t.target.value=this.get(t),qjt(t.target,t.type==="touchend"?"change":"input"))}}],[{key:"setup",value:function(t){var n=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},r=null;if(Qo.empty(t)||Qo.string(t)?r=Array.from(document.querySelectorAll(Qo.string(t)?t:'input[type="range"]')):Qo.element(t)?r=[t]:Qo.nodeList(t)?r=Array.from(t):Qo.array(t)&&(r=t.filter(Qo.element)),Qo.empty(r))return null;var i=xfe({},wfe,{},n);if(Qo.string(t)&&i.watch){var s=new MutationObserver(function(o){Array.from(o).forEach(function(a){Array.from(a.addedNodes).forEach(function(u){Qo.element(u)&&Hjt(u,t)&&new e(u,i)})})});s.observe(document.body,{childList:!0,subtree:!0})}return r.map(function(o){return new e(o,n)})}},{key:"enabled",get:function(){return"ontouchstart"in document.documentElement}}]),e}();const CA=e=>e!=null?e.constructor:null,Bp=(e,t)=>!!(e&&t&&e instanceof t),UQ=e=>e==null,c3e=e=>CA(e)===Object,t7t=e=>CA(e)===Number&&!Number.isNaN(e),o5=e=>CA(e)===String,n7t=e=>CA(e)===Boolean,d3e=e=>typeof e=="function",f3e=e=>Array.isArray(e),r7t=e=>Bp(e,WeakMap),h3e=e=>Bp(e,NodeList),i7t=e=>CA(e)===Text,s7t=e=>Bp(e,Event),o7t=e=>Bp(e,KeyboardEvent),a7t=e=>Bp(e,window.TextTrackCue)||Bp(e,window.VTTCue),u7t=e=>Bp(e,TextTrack)||!UQ(e)&&o5(e.kind),l7t=e=>Bp(e,Promise)&&d3e(e.then),c7t=e=>e!==null&&typeof e=="object"&&e.nodeType===1&&typeof e.style=="object"&&typeof e.ownerDocument=="object",p3e=e=>UQ(e)||(o5(e)||f3e(e)||h3e(e))&&!e.length||c3e(e)&&!Object.keys(e).length,d7t=e=>{if(Bp(e,window.URL))return!0;if(!o5(e))return!1;let t=e;e.startsWith("http://")&&e.startsWith("https://")||(t=`http://${e}`);try{return!p3e(new URL(t).hostname)}catch{return!1}};var ce={nullOrUndefined:UQ,object:c3e,number:t7t,string:o5,boolean:n7t,function:d3e,array:f3e,weakMap:r7t,nodeList:h3e,element:c7t,textNode:i7t,event:s7t,keyboardEvent:o7t,cue:a7t,track:u7t,promise:l7t,url:d7t,empty:p3e};const Fz=(()=>{const e=document.createElement("span"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},n=Object.keys(t).find(r=>e.style[r]!==void 0);return!!ce.string(n)&&t[n]})();function m3e(e,t){setTimeout(()=>{try{e.hidden=!0,e.offsetHeight,e.hidden=!1}catch{}},t)}const f7t=!!window.document.documentMode,h7t=/Edge/g.test(navigator.userAgent),p7t="WebkitAppearance"in document.documentElement.style&&!/Edge/g.test(navigator.userAgent),m7t=/iPhone|iPod/gi.test(navigator.userAgent)&&navigator.maxTouchPoints>1,g7t=navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1,y7t=/iPad|iPhone|iPod/gi.test(navigator.userAgent)&&navigator.maxTouchPoints>1;var Ws={isIE:f7t,isEdge:h7t,isWebKit:p7t,isIPhone:m7t,isIPadOS:g7t,isIos:y7t};function b7t(e){return JSON.parse(JSON.stringify(e))}function g3e(e,t){return t.split(".").reduce((n,r)=>n&&n[r],e)}function Bi(e={},...t){if(!t.length)return e;const n=t.shift();return ce.object(n)?(Object.keys(n).forEach(r=>{ce.object(n[r])?(Object.keys(e).includes(r)||Object.assign(e,{[r]:{}}),Bi(e[r],n[r])):Object.assign(e,{[r]:n[r]})}),Bi(e,...t)):e}function y3e(e,t){const n=e.length?e:[e];Array.from(n).reverse().forEach((r,i)=>{const s=i>0?t.cloneNode(!0):t,o=r.parentNode,a=r.nextSibling;s.appendChild(r),a?o.insertBefore(s,a):o.appendChild(s)})}function Bz(e,t){ce.element(e)&&!ce.empty(t)&&Object.entries(t).filter(([,n])=>!ce.nullOrUndefined(n)).forEach(([n,r])=>e.setAttribute(n,r))}function ln(e,t,n){const r=document.createElement(e);return ce.object(t)&&Bz(r,t),ce.string(n)&&(r.innerText=n),r}function v7t(e,t){ce.element(e)&&ce.element(t)&&t.parentNode.insertBefore(e,t.nextSibling)}function Efe(e,t,n,r){ce.element(t)&&t.appendChild(ln(e,n,r))}function op(e){ce.nodeList(e)||ce.array(e)?Array.from(e).forEach(op):ce.element(e)&&ce.element(e.parentNode)&&e.parentNode.removeChild(e)}function vP(e){if(!ce.element(e))return;let{length:t}=e.childNodes;for(;t>0;)e.removeChild(e.lastChild),t-=1}function n4(e,t){return ce.element(t)&&ce.element(t.parentNode)&&ce.element(e)?(t.parentNode.replaceChild(e,t),e):null}function Jd(e,t){if(!ce.string(e)||ce.empty(e))return{};const n={},r=Bi({},t);return e.split(",").forEach(i=>{const s=i.trim(),o=s.replace(".",""),a=s.replace(/[[\]]/g,"").split("="),[u]=a,l=a.length>1?a[1].replace(/["']/g,""):"";switch(s.charAt(0)){case".":ce.string(r.class)?n.class=`${r.class} ${o}`:n.class=o;break;case"#":n.id=s.replace("#","");break;case"[":n[u]=l}}),Bi(r,n)}function ey(e,t){if(!ce.element(e))return;let n=t;ce.boolean(n)||(n=!e.hidden),e.hidden=n}function _r(e,t,n){if(ce.nodeList(e))return Array.from(e).map(r=>_r(r,t,n));if(ce.element(e)){let r="toggle";return n!==void 0&&(r=n?"add":"remove"),e.classList[r](t),e.classList.contains(t)}return!1}function r4(e,t){return ce.element(e)&&e.classList.contains(t)}function Oy(e,t){const{prototype:n}=Element;return(n.matches||n.webkitMatchesSelector||n.mozMatchesSelector||n.msMatchesSelector||function(){return Array.from(document.querySelectorAll(t)).includes(this)}).call(e,t)}function x7t(e,t){const{prototype:n}=Element;return(n.closest||function(){let r=this;do{if(Oy.matches(r,t))return r;r=r.parentElement||r.parentNode}while(r!==null&&r.nodeType===1);return null}).call(e,t)}function MC(e){return this.elements.container.querySelectorAll(e)}function ys(e){return this.elements.container.querySelector(e)}function u9(e=null,t=!1){ce.element(e)&&e.focus({preventScroll:!0,focusVisible:t})}const _fe={"audio/ogg":"vorbis","audio/wav":"1","video/webm":"vp8, vorbis","video/mp4":"avc1.42E01E, mp4a.40.2","video/ogg":"theora"},zi={audio:"canPlayType"in document.createElement("audio"),video:"canPlayType"in document.createElement("video"),check(e,t){const n=zi[e]||t!=="html5";return{api:n,ui:n&&zi.rangeInput}},pip:!(Ws.isIPhone||!ce.function(ln("video").webkitSetPresentationMode)&&(!document.pictureInPictureEnabled||ln("video").disablePictureInPicture)),airplay:ce.function(window.WebKitPlaybackTargetAvailabilityEvent),playsinline:"playsInline"in document.createElement("video"),mime(e){if(ce.empty(e))return!1;const[t]=e.split("/");let n=e;if(!this.isHTML5||t!==this.type)return!1;Object.keys(_fe).includes(n)&&(n+=`; codecs="${_fe[e]}"`);try{return!!(n&&this.media.canPlayType(n).replace(/no/,""))}catch{return!1}},textTracks:"textTracks"in document.createElement("video"),rangeInput:(()=>{const e=document.createElement("input");return e.type="range",e.type==="range"})(),touch:"ontouchstart"in document.documentElement,transitions:Fz!==!1,reducedMotion:"matchMedia"in window&&window.matchMedia("(prefers-reduced-motion)").matches},w7t=(()=>{let e=!1;try{const t=Object.defineProperty({},"passive",{get:()=>(e=!0,null)});window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch{}return e})();function LC(e,t,n,r=!1,i=!0,s=!1){if(!e||!("addEventListener"in e)||ce.empty(t)||!ce.function(n))return;const o=t.split(" ");let a=s;w7t&&(a={passive:i,capture:s}),o.forEach(u=>{this&&this.eventListeners&&r&&this.eventListeners.push({element:e,type:u,callback:n,options:a}),e[r?"addEventListener":"removeEventListener"](u,n,a)})}function tr(e,t="",n,r=!0,i=!1){LC.call(this,e,t,n,!0,r,i)}function a5(e,t="",n,r=!0,i=!1){LC.call(this,e,t,n,!1,r,i)}function VQ(e,t="",n,r=!0,i=!1){const s=(...o)=>{a5(e,t,s,r,i),n.apply(this,o)};LC.call(this,e,t,s,!0,r,i)}function cn(e,t="",n=!1,r={}){if(!ce.element(e)||ce.empty(t))return;const i=new CustomEvent(t,{bubbles:n,detail:{...r,plyr:this}});e.dispatchEvent(i)}function E7t(){this&&this.eventListeners&&(this.eventListeners.forEach(e=>{const{element:t,type:n,callback:r,options:i}=e;t.removeEventListener(n,r,i)}),this.eventListeners=[])}function _7t(){return new Promise(e=>this.ready?setTimeout(e,0):tr.call(this,this.elements.container,"ready",e)).then(()=>{})}function df(e){ce.promise(e)&&e.then(null,()=>{})}function jz(e){return ce.array(e)?e.filter((t,n)=>e.indexOf(t)===n):e}function b3e(e,t){return ce.array(e)&&e.length?e.reduce((n,r)=>Math.abs(r-t)<Math.abs(n-t)?r:n):null}function v3e(e){return!(!window||!window.CSS)&&window.CSS.supports(e)}const Tfe=[[1,1],[4,3],[3,4],[5,4],[4,5],[3,2],[2,3],[16,10],[10,16],[16,9],[9,16],[21,9],[9,21],[32,9],[9,32]].reduce((e,[t,n])=>({...e,[t/n]:[t,n]}),{});function x3e(e){return ce.array(e)||ce.string(e)&&e.includes(":")?(ce.array(e)?e:e.split(":")).map(Number).every(ce.number):!1}function i4(e){if(!ce.array(e)||!e.every(ce.number))return null;const[t,n]=e,r=(s,o)=>o===0?s:r(o,s%o),i=r(t,n);return[t/i,n/i]}function HQ(e){const t=r=>x3e(r)?r.split(":").map(Number):null;let n=t(e);if(n===null&&(n=t(this.config.ratio)),n===null&&!ce.empty(this.embed)&&ce.array(this.embed.ratio)&&({ratio:n}=this.embed),n===null&&this.isHTML5){const{videoWidth:r,videoHeight:i}=this.media;n=[r,i]}return i4(n)}function ww(e){if(!this.isVideo)return{};const{wrapper:t}=this.elements,n=HQ.call(this,e);if(!ce.array(n))return{};const[r,i]=i4(n),s=100/r*i;if(v3e(`aspect-ratio: ${r}/${i}`)?t.style.aspectRatio=`${r}/${i}`:t.style.paddingBottom=`${s}%`,this.isVimeo&&!this.config.vimeo.premium&&this.supported.ui){const o=100/this.media.offsetWidth*parseInt(window.getComputedStyle(this.media).paddingBottom,10),a=(o-s)/(o/50);this.fullscreen.active?t.style.paddingBottom=null:this.media.style.transform=`translateY(-${a}%)`}else this.isHTML5&&t.classList.add(this.config.classNames.videoFixedRatio);return{padding:s,ratio:n}}function w3e(e,t,n=.05){const r=e/t,i=b3e(Object.keys(Tfe),r);return Math.abs(i-r)<=n?Tfe[i]:[e,t]}function T7t(){return[Math.max(document.documentElement.clientWidth||0,window.innerWidth||0),Math.max(document.documentElement.clientHeight||0,window.innerHeight||0)]}const a0={getSources(){return this.isHTML5?Array.from(this.media.querySelectorAll("source")).filter(e=>{const t=e.getAttribute("type");return!!ce.empty(t)||zi.mime.call(this,t)}):[]},getQualityOptions(){return this.config.quality.forced?this.config.quality.options:a0.getSources.call(this).map(e=>Number(e.getAttribute("size"))).filter(Boolean)},setup(){if(!this.isHTML5)return;const e=this;e.options.speed=e.config.speed.options,ce.empty(this.config.ratio)||ww.call(e),Object.defineProperty(e.media,"quality",{get(){const t=a0.getSources.call(e).find(n=>n.getAttribute("src")===e.source);return t&&Number(t.getAttribute("size"))},set(t){if(e.quality!==t){if(e.config.quality.forced&&ce.function(e.config.quality.onChange))e.config.quality.onChange(t);else{const n=a0.getSources.call(e).find(u=>Number(u.getAttribute("size"))===t);if(!n)return;const{currentTime:r,paused:i,preload:s,readyState:o,playbackRate:a}=e.media;e.media.src=n.getAttribute("src"),(s!=="none"||o)&&(e.once("loadedmetadata",()=>{e.speed=a,e.currentTime=r,i||df(e.play())}),e.media.load())}cn.call(e,e.media,"qualitychange",!1,{quality:t})}}})},cancelRequests(){this.isHTML5&&(op(a0.getSources.call(this)),this.media.setAttribute("src",this.config.blankVideo),this.media.load(),this.debug.log("Cancelled network requests"))}};function C7t(e){return`${e}-${Math.floor(1e4*Math.random())}`}function zz(e,...t){return ce.empty(e)?e:e.toString().replace(/{(\d+)}/g,(n,r)=>t[r].toString())}function S7t(e,t){return e===0||t===0||Number.isNaN(e)||Number.isNaN(t)?0:(e/t*100).toFixed(2)}const w2=(e="",t="",n="")=>e.replace(new RegExp(t.toString().replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1"),"g"),n.toString()),E3e=(e="")=>e.toString().replace(/\w\S*/g,t=>t.charAt(0).toUpperCase()+t.slice(1).toLowerCase());function A7t(e=""){let t=e.toString();return t=w2(t,"-"," "),t=w2(t,"_"," "),t=E3e(t),w2(t," ","")}function k7t(e=""){let t=e.toString();return t=A7t(t),t.charAt(0).toLowerCase()+t.slice(1)}function I7t(e){const t=document.createDocumentFragment(),n=document.createElement("div");return t.appendChild(n),n.innerHTML=e,t.firstChild.innerText}function R7t(e){const t=document.createElement("div");return t.appendChild(e),t.innerHTML}const Cfe={pip:"PIP",airplay:"AirPlay",html5:"HTML5",vimeo:"Vimeo",youtube:"YouTube"},Hs={get(e="",t={}){if(ce.empty(e)||ce.empty(t))return"";let n=g3e(t.i18n,e);if(ce.empty(n))return Object.keys(Cfe).includes(e)?Cfe[e]:"";const r={"{seektime}":t.seekTime,"{title}":t.title};return Object.entries(r).forEach(([i,s])=>{n=w2(n,i,s)}),n}};class FC{constructor(t){Dt(this,"get",n=>{if(!FC.supported||!this.enabled)return null;const r=window.localStorage.getItem(this.key);if(ce.empty(r))return null;const i=JSON.parse(r);return ce.string(n)&&n.length?i[n]:i}),Dt(this,"set",n=>{if(!FC.supported||!this.enabled||!ce.object(n))return;let r=this.get();ce.empty(r)&&(r={}),Bi(r,n);try{window.localStorage.setItem(this.key,JSON.stringify(r))}catch{}}),this.enabled=t.config.storage.enabled,this.key=t.config.storage.key}static get supported(){try{if(!("localStorage"in window))return!1;const t="___test";return window.localStorage.setItem(t,t),window.localStorage.removeItem(t),!0}catch{return!1}}}function SA(e,t="text"){return new Promise((n,r)=>{try{const i=new XMLHttpRequest;if(!("withCredentials"in i))return;i.addEventListener("load",()=>{if(t==="text")try{n(JSON.parse(i.responseText))}catch{n(i.responseText)}else n(i.response)}),i.addEventListener("error",()=>{throw new Error(i.status)}),i.open("GET",e,!0),i.responseType=t,i.send()}catch(i){r(i)}})}function _3e(e,t){if(!ce.string(e))return;const n="cache",r=ce.string(t);let i=!1;const s=()=>document.getElementById(t)!==null,o=(a,u)=>{a.innerHTML=u,r&&s()||document.body.insertAdjacentElement("afterbegin",a)};if(!r||!s()){const a=FC.supported,u=document.createElement("div");if(u.setAttribute("hidden",""),r&&u.setAttribute("id",t),a){const l=window.localStorage.getItem(`${n}-${t}`);if(i=l!==null,i){const c=JSON.parse(l);o(u,c.content)}}SA(e).then(l=>{if(!ce.empty(l)){if(a)try{window.localStorage.setItem(`${n}-${t}`,JSON.stringify({content:l}))}catch{}o(u,l)}}).catch(()=>{})}}const T3e=e=>Math.trunc(e/60/60%60,10),D7t=e=>Math.trunc(e/60%60,10),P7t=e=>Math.trunc(e%60,10);function u5(e=0,t=!1,n=!1){if(!ce.number(e))return u5(void 0,t,n);const r=a=>`0${a}`.slice(-2);let i=T3e(e);const s=D7t(e),o=P7t(e);return i=t||i>0?`${i}:`:"",`${n&&e>0?"-":""}${i}${r(s)}:${r(o)}`}const At={getIconUrl(){const e=new URL(this.config.iconUrl,window.location),t=window.location.host?window.location.host:window.top.location.host,n=e.host!==t||Ws.isIE&&!window.svg4everybody;return{url:this.config.iconUrl,cors:n}},findElements(){try{return this.elements.controls=ys.call(this,this.config.selectors.controls.wrapper),this.elements.buttons={play:MC.call(this,this.config.selectors.buttons.play),pause:ys.call(this,this.config.selectors.buttons.pause),restart:ys.call(this,this.config.selectors.buttons.restart),rewind:ys.call(this,this.config.selectors.buttons.rewind),fastForward:ys.call(this,this.config.selectors.buttons.fastForward),mute:ys.call(this,this.config.selectors.buttons.mute),pip:ys.call(this,this.config.selectors.buttons.pip),airplay:ys.call(this,this.config.selectors.buttons.airplay),settings:ys.call(this,this.config.selectors.buttons.settings),captions:ys.call(this,this.config.selectors.buttons.captions),fullscreen:ys.call(this,this.config.selectors.buttons.fullscreen)},this.elements.progress=ys.call(this,this.config.selectors.progress),this.elements.inputs={seek:ys.call(this,this.config.selectors.inputs.seek),volume:ys.call(this,this.config.selectors.inputs.volume)},this.elements.display={buffer:ys.call(this,this.config.selectors.display.buffer),currentTime:ys.call(this,this.config.selectors.display.currentTime),duration:ys.call(this,this.config.selectors.display.duration)},ce.element(this.elements.progress)&&(this.elements.display.seekTooltip=this.elements.progress.querySelector(`.${this.config.classNames.tooltip}`)),!0}catch(e){return this.debug.warn("It looks like there is a problem with your custom controls HTML",e),this.toggleNativeControls(!0),!1}},createIcon(e,t){const n="http://www.w3.org/2000/svg",r=At.getIconUrl.call(this),i=`${r.cors?"":r.url}#${this.config.iconPrefix}`,s=document.createElementNS(n,"svg");Bz(s,Bi(t,{"aria-hidden":"true",focusable:"false"}));const o=document.createElementNS(n,"use"),a=`${i}-${e}`;return"href"in o&&o.setAttributeNS("http://www.w3.org/1999/xlink","href",a),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a),s.appendChild(o),s},createLabel(e,t={}){const n=Hs.get(e,this.config);return ln("span",{...t,class:[t.class,this.config.classNames.hidden].filter(Boolean).join(" ")},n)},createBadge(e){if(ce.empty(e))return null;const t=ln("span",{class:this.config.classNames.menu.value});return t.appendChild(ln("span",{class:this.config.classNames.menu.badge},e)),t},createButton(e,t){const n=Bi({},t);let r=k7t(e);const i={element:"button",toggle:!1,label:null,icon:null,labelPressed:null,iconPressed:null};switch(["element","icon","label"].forEach(o=>{Object.keys(n).includes(o)&&(i[o]=n[o],delete n[o])}),i.element!=="button"||Object.keys(n).includes("type")||(n.type="button"),Object.keys(n).includes("class")?n.class.split(" ").some(o=>o===this.config.classNames.control)||Bi(n,{class:`${n.class} ${this.config.classNames.control}`}):n.class=this.config.classNames.control,e){case"play":i.toggle=!0,i.label="play",i.labelPressed="pause",i.icon="play",i.iconPressed="pause";break;case"mute":i.toggle=!0,i.label="mute",i.labelPressed="unmute",i.icon="volume",i.iconPressed="muted";break;case"captions":i.toggle=!0,i.label="enableCaptions",i.labelPressed="disableCaptions",i.icon="captions-off",i.iconPressed="captions-on";break;case"fullscreen":i.toggle=!0,i.label="enterFullscreen",i.labelPressed="exitFullscreen",i.icon="enter-fullscreen",i.iconPressed="exit-fullscreen";break;case"play-large":n.class+=` ${this.config.classNames.control}--overlaid`,r="play",i.label="play",i.icon="play";break;default:ce.empty(i.label)&&(i.label=r),ce.empty(i.icon)&&(i.icon=e)}const s=ln(i.element);return i.toggle?(s.appendChild(At.createIcon.call(this,i.iconPressed,{class:"icon--pressed"})),s.appendChild(At.createIcon.call(this,i.icon,{class:"icon--not-pressed"})),s.appendChild(At.createLabel.call(this,i.labelPressed,{class:"label--pressed"})),s.appendChild(At.createLabel.call(this,i.label,{class:"label--not-pressed"}))):(s.appendChild(At.createIcon.call(this,i.icon)),s.appendChild(At.createLabel.call(this,i.label))),Bi(n,Jd(this.config.selectors.buttons[r],n)),Bz(s,n),r==="play"?(ce.array(this.elements.buttons[r])||(this.elements.buttons[r]=[]),this.elements.buttons[r].push(s)):this.elements.buttons[r]=s,s},createRange(e,t){const n=ln("input",Bi(Jd(this.config.selectors.inputs[e]),{type:"range",min:0,max:100,step:.01,value:0,autocomplete:"off",role:"slider","aria-label":Hs.get(e,this.config),"aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":0},t));return this.elements.inputs[e]=n,At.updateRangeFill.call(this,n),e7t.setup(n),n},createProgress(e,t){const n=ln("progress",Bi(Jd(this.config.selectors.display[e]),{min:0,max:100,value:0,role:"progressbar","aria-hidden":!0},t));if(e!=="volume"){n.appendChild(ln("span",null,"0"));const r={played:"played",buffer:"buffered"}[e],i=r?Hs.get(r,this.config):"";n.innerText=`% ${i.toLowerCase()}`}return this.elements.display[e]=n,n},createTime(e,t){const n=Jd(this.config.selectors.display[e],t),r=ln("div",Bi(n,{class:`${n.class?n.class:""} ${this.config.classNames.display.time} `.trim(),"aria-label":Hs.get(e,this.config),role:"timer"}),"00:00");return this.elements.display[e]=r,r},bindMenuItemShortcuts(e,t){tr.call(this,e,"keydown keyup",n=>{if(![" ","ArrowUp","ArrowDown","ArrowRight"].includes(n.key)||(n.preventDefault(),n.stopPropagation(),n.type==="keydown"))return;const r=Oy(e,'[role="menuitemradio"]');if(!r&&[" ","ArrowRight"].includes(n.key))At.showMenuPanel.call(this,t,!0);else{let i;n.key!==" "&&(n.key==="ArrowDown"||r&&n.key==="ArrowRight"?(i=e.nextElementSibling,ce.element(i)||(i=e.parentNode.firstElementChild)):(i=e.previousElementSibling,ce.element(i)||(i=e.parentNode.lastElementChild)),u9.call(this,i,!0))}},!1),tr.call(this,e,"keyup",n=>{n.key==="Return"&&At.focusFirstMenuItem.call(this,null,!0)})},createMenuItem({value:e,list:t,type:n,title:r,badge:i=null,checked:s=!1}){const o=Jd(this.config.selectors.inputs[n]),a=ln("button",Bi(o,{type:"button",role:"menuitemradio",class:`${this.config.classNames.control} ${o.class?o.class:""}`.trim(),"aria-checked":s,value:e})),u=ln("span");u.innerHTML=r,ce.element(i)&&u.appendChild(i),a.appendChild(u),Object.defineProperty(a,"checked",{enumerable:!0,get:()=>a.getAttribute("aria-checked")==="true",set(l){l&&Array.from(a.parentNode.children).filter(c=>Oy(c,'[role="menuitemradio"]')).forEach(c=>c.setAttribute("aria-checked","false")),a.setAttribute("aria-checked",l?"true":"false")}}),this.listeners.bind(a,"click keyup",l=>{if(!ce.keyboardEvent(l)||l.key===" "){switch(l.preventDefault(),l.stopPropagation(),a.checked=!0,n){case"language":this.currentTrack=Number(e);break;case"quality":this.quality=e;break;case"speed":this.speed=parseFloat(e)}At.showMenuPanel.call(this,"home",ce.keyboardEvent(l))}},n,!1),At.bindMenuItemShortcuts.call(this,a,n),t.appendChild(a)},formatTime(e=0,t=!1){return ce.number(e)?u5(e,T3e(this.duration)>0,t):e},updateTimeDisplay(e=null,t=0,n=!1){ce.element(e)&&ce.number(t)&&(e.innerText=At.formatTime(t,n))},updateVolume(){this.supported.ui&&(ce.element(this.elements.inputs.volume)&&At.setRange.call(this,this.elements.inputs.volume,this.muted?0:this.volume),ce.element(this.elements.buttons.mute)&&(this.elements.buttons.mute.pressed=this.muted||this.volume===0))},setRange(e,t=0){ce.element(e)&&(e.value=t,At.updateRangeFill.call(this,e))},updateProgress(e){if(!this.supported.ui||!ce.event(e))return;let t=0;const n=(r,i)=>{const s=ce.number(i)?i:0,o=ce.element(r)?r:this.elements.display.buffer;if(ce.element(o)){o.value=s;const a=o.getElementsByTagName("span")[0];ce.element(a)&&(a.childNodes[0].nodeValue=s)}};if(e)switch(e.type){case"timeupdate":case"seeking":case"seeked":t=S7t(this.currentTime,this.duration),e.type==="timeupdate"&&At.setRange.call(this,this.elements.inputs.seek,t);break;case"playing":case"progress":n(this.elements.display.buffer,100*this.buffered)}},updateRangeFill(e){const t=ce.event(e)?e.target:e;if(ce.element(t)&&t.getAttribute("type")==="range"){if(Oy(t,this.config.selectors.inputs.seek)){t.setAttribute("aria-valuenow",this.currentTime);const n=At.formatTime(this.currentTime),r=At.formatTime(this.duration),i=Hs.get("seekLabel",this.config);t.setAttribute("aria-valuetext",i.replace("{currentTime}",n).replace("{duration}",r))}else if(Oy(t,this.config.selectors.inputs.volume)){const n=100*t.value;t.setAttribute("aria-valuenow",n),t.setAttribute("aria-valuetext",`${n.toFixed(1)}%`)}else t.setAttribute("aria-valuenow",t.value);(Ws.isWebKit||Ws.isIPadOS)&&t.style.setProperty("--value",t.value/t.max*100+"%")}},updateSeekTooltip(e){var t,n;if(!this.config.tooltips.seek||!ce.element(this.elements.inputs.seek)||!ce.element(this.elements.display.seekTooltip)||this.duration===0)return;const r=this.elements.display.seekTooltip,i=`${this.config.classNames.tooltip}--visible`,s=c=>_r(r,i,c);if(this.touch)return void s(!1);let o=0;const a=this.elements.progress.getBoundingClientRect();if(ce.event(e))o=100/a.width*(e.pageX-a.left);else{if(!r4(r,i))return;o=parseFloat(r.style.left,10)}o<0?o=0:o>100&&(o=100);const u=this.duration/100*o;r.innerText=At.formatTime(u);const l=(t=this.config.markers)===null||t===void 0||(n=t.points)===null||n===void 0?void 0:n.find(({time:c})=>c===Math.round(u));l&&r.insertAdjacentHTML("afterbegin",`${l.label}<br>`),r.style.left=`${o}%`,ce.event(e)&&["mouseenter","mouseleave"].includes(e.type)&&s(e.type==="mouseenter")},timeUpdate(e){const t=!ce.element(this.elements.display.duration)&&this.config.invertTime;At.updateTimeDisplay.call(this,this.elements.display.currentTime,t?this.duration-this.currentTime:this.currentTime,t),e&&e.type==="timeupdate"&&this.media.seeking||At.updateProgress.call(this,e)},durationUpdate(){if(!this.supported.ui||!this.config.invertTime&&this.currentTime)return;if(this.duration>=2**32)return ey(this.elements.display.currentTime,!0),void ey(this.elements.progress,!0);ce.element(this.elements.inputs.seek)&&this.elements.inputs.seek.setAttribute("aria-valuemax",this.duration);const e=ce.element(this.elements.display.duration);!e&&this.config.displayDuration&&this.paused&&At.updateTimeDisplay.call(this,this.elements.display.currentTime,this.duration),e&&At.updateTimeDisplay.call(this,this.elements.display.duration,this.duration),this.config.markers.enabled&&At.setMarkers.call(this),At.updateSeekTooltip.call(this)},toggleMenuButton(e,t){ey(this.elements.settings.buttons[e],!t)},updateSetting(e,t,n){const r=this.elements.settings.panels[e];let i=null,s=t;if(e==="captions")i=this.currentTrack;else{if(i=ce.empty(n)?this[e]:n,ce.empty(i)&&(i=this.config[e].default),!ce.empty(this.options[e])&&!this.options[e].includes(i))return void this.debug.warn(`Unsupported value of '${i}' for ${e}`);if(!this.config[e].options.includes(i))return void this.debug.warn(`Disabled value of '${i}' for ${e}`)}if(ce.element(s)||(s=r&&r.querySelector('[role="menu"]')),!ce.element(s))return;this.elements.settings.buttons[e].querySelector(`.${this.config.classNames.menu.value}`).innerHTML=At.getLabel.call(this,e,i);const o=s&&s.querySelector(`[value="${i}"]`);ce.element(o)&&(o.checked=!0)},getLabel(e,t){switch(e){case"speed":return t===1?Hs.get("normal",this.config):`${t}&times;`;case"quality":if(ce.number(t)){const n=Hs.get(`qualityLabel.${t}`,this.config);return n.length?n:`${t}p`}return E3e(t);case"captions":return cr.getLabel.call(this);default:return null}},setQualityMenu(e){if(!ce.element(this.elements.settings.panels.quality))return;const t="quality",n=this.elements.settings.panels.quality.querySelector('[role="menu"]');ce.array(e)&&(this.options.quality=jz(e).filter(s=>this.config.quality.options.includes(s)));const r=!ce.empty(this.options.quality)&&this.options.quality.length>1;if(At.toggleMenuButton.call(this,t,r),vP(n),At.checkMenu.call(this),!r)return;const i=s=>{const o=Hs.get(`qualityBadge.${s}`,this.config);return o.length?At.createBadge.call(this,o):null};this.options.quality.sort((s,o)=>{const a=this.config.quality.options;return a.indexOf(s)>a.indexOf(o)?1:-1}).forEach(s=>{At.createMenuItem.call(this,{value:s,list:n,type:t,title:At.getLabel.call(this,"quality",s),badge:i(s)})}),At.updateSetting.call(this,t,n)},setCaptionsMenu(){if(!ce.element(this.elements.settings.panels.captions))return;const e="captions",t=this.elements.settings.panels.captions.querySelector('[role="menu"]'),n=cr.getTracks.call(this),r=!!n.length;if(At.toggleMenuButton.call(this,e,r),vP(t),At.checkMenu.call(this),!r)return;const i=n.map((s,o)=>({value:o,checked:this.captions.toggled&&this.currentTrack===o,title:cr.getLabel.call(this,s),badge:s.language&&At.createBadge.call(this,s.language.toUpperCase()),list:t,type:"language"}));i.unshift({value:-1,checked:!this.captions.toggled,title:Hs.get("disabled",this.config),list:t,type:"language"}),i.forEach(At.createMenuItem.bind(this)),At.updateSetting.call(this,e,t)},setSpeedMenu(){if(!ce.element(this.elements.settings.panels.speed))return;const e="speed",t=this.elements.settings.panels.speed.querySelector('[role="menu"]');this.options.speed=this.options.speed.filter(r=>r>=this.minimumSpeed&&r<=this.maximumSpeed);const n=!ce.empty(this.options.speed)&&this.options.speed.length>1;At.toggleMenuButton.call(this,e,n),vP(t),At.checkMenu.call(this),n&&(this.options.speed.forEach(r=>{At.createMenuItem.call(this,{value:r,list:t,type:e,title:At.getLabel.call(this,"speed",r)})}),At.updateSetting.call(this,e,t))},checkMenu(){const{buttons:e}=this.elements.settings,t=!ce.empty(e)&&Object.values(e).some(n=>!n.hidden);ey(this.elements.settings.menu,!t)},focusFirstMenuItem(e,t=!1){if(this.elements.settings.popup.hidden)return;let n=e;ce.element(n)||(n=Object.values(this.elements.settings.panels).find(i=>!i.hidden));const r=n.querySelector('[role^="menuitem"]');u9.call(this,r,t)},toggleMenu(e){const{popup:t}=this.elements.settings,n=this.elements.buttons.settings;if(!ce.element(t)||!ce.element(n))return;const{hidden:r}=t;let i=r;if(ce.boolean(e))i=e;else if(ce.keyboardEvent(e)&&e.key==="Escape")i=!1;else if(ce.event(e)){const s=ce.function(e.composedPath)?e.composedPath()[0]:e.target,o=t.contains(s);if(o||!o&&e.target!==n&&i)return}n.setAttribute("aria-expanded",i),ey(t,!i),_r(this.elements.container,this.config.classNames.menu.open,i),i&&ce.keyboardEvent(e)?At.focusFirstMenuItem.call(this,null,!0):i||r||u9.call(this,n,ce.keyboardEvent(e))},getMenuSize(e){const t=e.cloneNode(!0);t.style.position="absolute",t.style.opacity=0,t.removeAttribute("hidden"),e.parentNode.appendChild(t);const n=t.scrollWidth,r=t.scrollHeight;return op(t),{width:n,height:r}},showMenuPanel(e="",t=!1){const n=this.elements.container.querySelector(`#plyr-settings-${this.id}-${e}`);if(!ce.element(n))return;const r=n.parentNode,i=Array.from(r.children).find(s=>!s.hidden);if(zi.transitions&&!zi.reducedMotion){r.style.width=`${i.scrollWidth}px`,r.style.height=`${i.scrollHeight}px`;const s=At.getMenuSize.call(this,n),o=a=>{a.target===r&&["width","height"].includes(a.propertyName)&&(r.style.width="",r.style.height="",a5.call(this,r,Fz,o))};tr.call(this,r,Fz,o),r.style.width=`${s.width}px`,r.style.height=`${s.height}px`}ey(i,!0),ey(n,!1),At.focusFirstMenuItem.call(this,n,t)},setDownloadUrl(){const e=this.elements.buttons.download;ce.element(e)&&e.setAttribute("href",this.download)},create(e){const{bindMenuItemShortcuts:t,createButton:n,createProgress:r,createRange:i,createTime:s,setQualityMenu:o,setSpeedMenu:a,showMenuPanel:u}=At;this.elements.controls=null,ce.array(this.config.controls)&&this.config.controls.includes("play-large")&&this.elements.container.appendChild(n.call(this,"play-large"));const l=ln("div",Jd(this.config.selectors.controls.wrapper));this.elements.controls=l;const c={class:"plyr__controls__item"};return jz(ce.array(this.config.controls)?this.config.controls:[]).forEach(d=>{if(d==="restart"&&l.appendChild(n.call(this,"restart",c)),d==="rewind"&&l.appendChild(n.call(this,"rewind",c)),d==="play"&&l.appendChild(n.call(this,"play",c)),d==="fast-forward"&&l.appendChild(n.call(this,"fast-forward",c)),d==="progress"){const f=ln("div",{class:`${c.class} plyr__progress__container`}),h=ln("div",Jd(this.config.selectors.progress));if(h.appendChild(i.call(this,"seek",{id:`plyr-seek-${e.id}`})),h.appendChild(r.call(this,"buffer")),this.config.tooltips.seek){const p=ln("span",{class:this.config.classNames.tooltip},"00:00");h.appendChild(p),this.elements.display.seekTooltip=p}this.elements.progress=h,f.appendChild(this.elements.progress),l.appendChild(f)}if(d==="current-time"&&l.appendChild(s.call(this,"currentTime",c)),d==="duration"&&l.appendChild(s.call(this,"duration",c)),d==="mute"||d==="volume"){let{volume:f}=this.elements;if(ce.element(f)&&l.contains(f)||(f=ln("div",Bi({},c,{class:`${c.class} plyr__volume`.trim()})),this.elements.volume=f,l.appendChild(f)),d==="mute"&&f.appendChild(n.call(this,"mute")),d==="volume"&&!Ws.isIos&&!Ws.isIPadOS){const h={max:1,step:.05,value:this.config.volume};f.appendChild(i.call(this,"volume",Bi(h,{id:`plyr-volume-${e.id}`})))}}if(d==="captions"&&l.appendChild(n.call(this,"captions",c)),d==="settings"&&!ce.empty(this.config.settings)){const f=ln("div",Bi({},c,{class:`${c.class} plyr__menu`.trim(),hidden:""}));f.appendChild(n.call(this,"settings",{"aria-haspopup":!0,"aria-controls":`plyr-settings-${e.id}`,"aria-expanded":!1}));const h=ln("div",{class:"plyr__menu__container",id:`plyr-settings-${e.id}`,hidden:""}),p=ln("div"),m=ln("div",{id:`plyr-settings-${e.id}-home`}),y=ln("div",{role:"menu"});m.appendChild(y),p.appendChild(m),this.elements.settings.panels.home=m,this.config.settings.forEach(v=>{const b=ln("button",Bi(Jd(this.config.selectors.buttons.settings),{type:"button",class:`${this.config.classNames.control} ${this.config.classNames.control}--forward`,role:"menuitem","aria-haspopup":!0,hidden:""}));t.call(this,b,v),tr.call(this,b,"click",()=>{u.call(this,v,!1)});const w=ln("span",null,Hs.get(v,this.config)),E=ln("span",{class:this.config.classNames.menu.value});E.innerHTML=e[v],w.appendChild(E),b.appendChild(w),y.appendChild(b);const _=ln("div",{id:`plyr-settings-${e.id}-${v}`,hidden:""}),C=ln("button",{type:"button",class:`${this.config.classNames.control} ${this.config.classNames.control}--back`});C.appendChild(ln("span",{"aria-hidden":!0},Hs.get(v,this.config))),C.appendChild(ln("span",{class:this.config.classNames.hidden},Hs.get("menuBack",this.config))),tr.call(this,_,"keydown",S=>{S.key==="ArrowLeft"&&(S.preventDefault(),S.stopPropagation(),u.call(this,"home",!0))},!1),tr.call(this,C,"click",()=>{u.call(this,"home",!1)}),_.appendChild(C),_.appendChild(ln("div",{role:"menu"})),p.appendChild(_),this.elements.settings.buttons[v]=b,this.elements.settings.panels[v]=_}),h.appendChild(p),f.appendChild(h),l.appendChild(f),this.elements.settings.popup=h,this.elements.settings.menu=f}if(d==="pip"&&zi.pip&&l.appendChild(n.call(this,"pip",c)),d==="airplay"&&zi.airplay&&l.appendChild(n.call(this,"airplay",c)),d==="download"){const f=Bi({},c,{element:"a",href:this.download,target:"_blank"});this.isHTML5&&(f.download="");const{download:h}=this.config.urls;!ce.url(h)&&this.isEmbed&&Bi(f,{icon:`logo-${this.provider}`,label:this.provider}),l.appendChild(n.call(this,"download",f))}d==="fullscreen"&&l.appendChild(n.call(this,"fullscreen",c))}),this.isHTML5&&o.call(this,a0.getQualityOptions.call(this)),a.call(this),l},inject(){if(this.config.loadSprite){const i=At.getIconUrl.call(this);i.cors&&_3e(i.url,"sprite-plyr")}this.id=Math.floor(1e4*Math.random());let e=null;this.elements.controls=null;const t={id:this.id,seektime:this.config.seekTime,title:this.config.title};let n=!0;ce.function(this.config.controls)&&(this.config.controls=this.config.controls.call(this,t)),this.config.controls||(this.config.controls=[]),ce.element(this.config.controls)||ce.string(this.config.controls)?e=this.config.controls:(e=At.create.call(this,{id:this.id,seektime:this.config.seekTime,speed:this.speed,quality:this.quality,captions:cr.getLabel.call(this)}),n=!1);let r;if(n&&ce.string(this.config.controls)&&(e=(i=>{let s=i;return Object.entries(t).forEach(([o,a])=>{s=w2(s,`{${o}}`,a)}),s})(e)),ce.string(this.config.selectors.controls.container)&&(r=document.querySelector(this.config.selectors.controls.container)),ce.element(r)||(r=this.elements.container),r[ce.element(e)?"insertAdjacentElement":"insertAdjacentHTML"]("afterbegin",e),ce.element(this.elements.controls)||At.findElements.call(this),!ce.empty(this.elements.buttons)){const i=s=>{const o=this.config.classNames.controlPressed;s.setAttribute("aria-pressed","false"),Object.defineProperty(s,"pressed",{configurable:!0,enumerable:!0,get:()=>r4(s,o),set(a=!1){_r(s,o,a),s.setAttribute("aria-pressed",a?"true":"false")}})};Object.values(this.elements.buttons).filter(Boolean).forEach(s=>{ce.array(s)||ce.nodeList(s)?Array.from(s).filter(Boolean).forEach(i):i(s)})}if(Ws.isEdge&&m3e(r),this.config.tooltips.controls){const{classNames:i,selectors:s}=this.config,o=`${s.controls.wrapper} ${s.labels} .${i.hidden}`,a=MC.call(this,o);Array.from(a).forEach(u=>{_r(u,this.config.classNames.hidden,!1),_r(u,this.config.classNames.tooltip,!0)})}},setMediaMetadata(){try{"mediaSession"in navigator&&(navigator.mediaSession.metadata=new window.MediaMetadata({title:this.config.mediaMetadata.title,artist:this.config.mediaMetadata.artist,album:this.config.mediaMetadata.album,artwork:this.config.mediaMetadata.artwork}))}catch{}},setMarkers(){var e,t;if(!this.duration||this.elements.markers)return;const n=(e=this.config.markers)===null||e===void 0||(t=e.points)===null||t===void 0?void 0:t.filter(({time:u})=>u>0&&u<this.duration);if(n==null||!n.length)return;const r=document.createDocumentFragment(),i=document.createDocumentFragment();let s=null;const o=`${this.config.classNames.tooltip}--visible`,a=u=>_r(s,o,u);n.forEach(u=>{const l=ln("span",{class:this.config.classNames.marker},""),c=u.time/this.duration*100+"%";s&&(l.addEventListener("mouseenter",()=>{u.label||(s.style.left=c,s.innerHTML=u.label,a(!0))}),l.addEventListener("mouseleave",()=>{a(!1)})),l.addEventListener("click",()=>{this.currentTime=u.time}),l.style.left=c,i.appendChild(l)}),r.appendChild(i),this.config.tooltips.seek||(s=ln("span",{class:this.config.classNames.tooltip},""),r.appendChild(s)),this.elements.markers={points:i,tip:s},this.elements.progress.appendChild(r)}};function C3e(e,t=!0){let n=e;if(t){const r=document.createElement("a");r.href=n,n=r.href}try{return new URL(n)}catch{return null}}function S3e(e){const t=new URLSearchParams;return ce.object(e)&&Object.entries(e).forEach(([n,r])=>{t.set(n,r)}),t}const cr={setup(){if(!this.supported.ui)return;if(!this.isVideo||this.isYouTube||this.isHTML5&&!zi.textTracks)return void(ce.array(this.config.controls)&&this.config.controls.includes("settings")&&this.config.settings.includes("captions")&&At.setCaptionsMenu.call(this));if(ce.element(this.elements.captions)||(this.elements.captions=ln("div",Jd(this.config.selectors.captions)),this.elements.captions.setAttribute("dir","auto"),v7t(this.elements.captions,this.elements.wrapper)),Ws.isIE&&window.URL){const r=this.media.querySelectorAll("track");Array.from(r).forEach(i=>{const s=i.getAttribute("src"),o=C3e(s);o!==null&&o.hostname!==window.location.href.hostname&&["http:","https:"].includes(o.protocol)&&SA(s,"blob").then(a=>{i.setAttribute("src",window.URL.createObjectURL(a))}).catch(()=>{op(i)})})}const e=jz((navigator.languages||[navigator.language||navigator.userLanguage||"en"]).map(r=>r.split("-")[0]));let t=(this.storage.get("language")||this.config.captions.language||"auto").toLowerCase();t==="auto"&&([t]=e);let n=this.storage.get("captions");if(ce.boolean(n)||({active:n}=this.config.captions),Object.assign(this.captions,{toggled:!1,active:n,language:t,languages:e}),this.isHTML5){const r=this.config.captions.update?"addtrack removetrack":"removetrack";tr.call(this,this.media.textTracks,r,cr.update.bind(this))}setTimeout(cr.update.bind(this),0)},update(){const e=cr.getTracks.call(this,!0),{active:t,language:n,meta:r,currentTrackNode:i}=this.captions,s=!!e.find(o=>o.language===n);this.isHTML5&&this.isVideo&&e.filter(o=>!r.get(o)).forEach(o=>{this.debug.log("Track added",o),r.set(o,{default:o.mode==="showing"}),o.mode==="showing"&&(o.mode="hidden"),tr.call(this,o,"cuechange",()=>cr.updateCues.call(this))}),(s&&this.language!==n||!e.includes(i))&&(cr.setLanguage.call(this,n),cr.toggle.call(this,t&&s)),this.elements&&_r(this.elements.container,this.config.classNames.captions.enabled,!ce.empty(e)),ce.array(this.config.controls)&&this.config.controls.includes("settings")&&this.config.settings.includes("captions")&&At.setCaptionsMenu.call(this)},toggle(e,t=!0){if(!this.supported.ui)return;const{toggled:n}=this.captions,r=this.config.classNames.captions.active,i=ce.nullOrUndefined(e)?!n:e;if(i!==n){if(t||(this.captions.active=i,this.storage.set({captions:i})),!this.language&&i&&!t){const s=cr.getTracks.call(this),o=cr.findTrack.call(this,[this.captions.language,...this.captions.languages],!0);return this.captions.language=o.language,void cr.set.call(this,s.indexOf(o))}this.elements.buttons.captions&&(this.elements.buttons.captions.pressed=i),_r(this.elements.container,r,i),this.captions.toggled=i,At.updateSetting.call(this,"captions"),cn.call(this,this.media,i?"captionsenabled":"captionsdisabled")}setTimeout(()=>{i&&this.captions.toggled&&(this.captions.currentTrackNode.mode="hidden")})},set(e,t=!0){const n=cr.getTracks.call(this);if(e!==-1)if(ce.number(e))if(e in n){if(this.captions.currentTrack!==e){this.captions.currentTrack=e;const r=n[e],{language:i}=r||{};this.captions.currentTrackNode=r,At.updateSetting.call(this,"captions"),t||(this.captions.language=i,this.storage.set({language:i})),this.isVimeo&&this.embed.enableTextTrack(i),cn.call(this,this.media,"languagechange")}cr.toggle.call(this,!0,t),this.isHTML5&&this.isVideo&&cr.updateCues.call(this)}else this.debug.warn("Track not found",e);else this.debug.warn("Invalid caption argument",e);else cr.toggle.call(this,!1,t)},setLanguage(e,t=!0){if(!ce.string(e))return void this.debug.warn("Invalid language argument",e);const n=e.toLowerCase();this.captions.language=n;const r=cr.getTracks.call(this),i=cr.findTrack.call(this,[n]);cr.set.call(this,r.indexOf(i),t)},getTracks(e=!1){return Array.from((this.media||{}).textTracks||[]).filter(t=>!this.isHTML5||e||this.captions.meta.has(t)).filter(t=>["captions","subtitles"].includes(t.kind))},findTrack(e,t=!1){const n=cr.getTracks.call(this),r=o=>Number((this.captions.meta.get(o)||{}).default),i=Array.from(n).sort((o,a)=>r(a)-r(o));let s;return e.every(o=>(s=i.find(a=>a.language===o),!s)),s||(t?i[0]:void 0)},getCurrentTrack(){return cr.getTracks.call(this)[this.currentTrack]},getLabel(e){let t=e;return!ce.track(t)&&zi.textTracks&&this.captions.toggled&&(t=cr.getCurrentTrack.call(this)),ce.track(t)?ce.empty(t.label)?ce.empty(t.language)?Hs.get("enabled",this.config):e.language.toUpperCase():t.label:Hs.get("disabled",this.config)},updateCues(e){if(!this.supported.ui)return;if(!ce.element(this.elements.captions))return void this.debug.warn("No captions element to render to");if(!ce.nullOrUndefined(e)&&!Array.isArray(e))return void this.debug.warn("updateCues: Invalid input",e);let t=e;if(!t){const r=cr.getCurrentTrack.call(this);t=Array.from((r||{}).activeCues||[]).map(i=>i.getCueAsHTML()).map(R7t)}const n=t.map(r=>r.trim()).join(`
`);if(n!==this.elements.captions.innerHTML){vP(this.elements.captions);const r=ln("span",Jd(this.config.selectors.caption));r.innerHTML=n,this.elements.captions.appendChild(r),cn.call(this,this.media,"cuechange")}}},A3e={enabled:!0,title:"",debug:!1,autoplay:!1,autopause:!0,playsinline:!0,seekTime:10,volume:1,muted:!1,duration:null,displayDuration:!0,invertTime:!0,toggleInvert:!0,ratio:null,clickToPlay:!0,hideControls:!0,resetOnEnd:!1,disableContextMenu:!0,loadSprite:!0,iconPrefix:"plyr",iconUrl:"https://cdn.plyr.io/3.7.8/plyr.svg",blankVideo:"https://cdn.plyr.io/static/blank.mp4",quality:{default:576,options:[4320,2880,2160,1440,1080,720,576,480,360,240],forced:!1,onChange:null},loop:{active:!1},speed:{selected:1,options:[.5,.75,1,1.25,1.5,1.75,2,4]},keyboard:{focused:!0,global:!1},tooltips:{controls:!1,seek:!0},captions:{active:!1,language:"auto",update:!1},fullscreen:{enabled:!0,fallback:!0,iosNative:!1},storage:{enabled:!0,key:"plyr"},controls:["play-large","play","progress","current-time","mute","volume","captions","settings","pip","airplay","fullscreen"],settings:["captions","quality","speed"],i18n:{restart:"Restart",rewind:"Rewind {seektime}s",play:"Play",pause:"Pause",fastForward:"Forward {seektime}s",seek:"Seek",seekLabel:"{currentTime} of {duration}",played:"Played",buffered:"Buffered",currentTime:"Current time",duration:"Duration",volume:"Volume",mute:"Mute",unmute:"Unmute",enableCaptions:"Enable captions",disableCaptions:"Disable captions",download:"Download",enterFullscreen:"Enter fullscreen",exitFullscreen:"Exit fullscreen",frameTitle:"Player for {title}",captions:"Captions",settings:"Settings",pip:"PIP",menuBack:"Go back to previous menu",speed:"Speed",normal:"Normal",quality:"Quality",loop:"Loop",start:"Start",end:"End",all:"All",reset:"Reset",disabled:"Disabled",enabled:"Enabled",advertisement:"Ad",qualityBadge:{2160:"4K",1440:"HD",1080:"HD",720:"HD",576:"SD",480:"SD"}},urls:{download:null,vimeo:{sdk:"https://player.vimeo.com/api/player.js",iframe:"https://player.vimeo.com/video/{0}?{1}",api:"https://vimeo.com/api/oembed.json?url={0}"},youtube:{sdk:"https://www.youtube.com/iframe_api",api:"https://noembed.com/embed?url=https://www.youtube.com/watch?v={0}"},googleIMA:{sdk:"https://imasdk.googleapis.com/js/sdkloader/ima3.js"}},listeners:{seek:null,play:null,pause:null,restart:null,rewind:null,fastForward:null,mute:null,volume:null,captions:null,download:null,fullscreen:null,pip:null,airplay:null,speed:null,quality:null,loop:null,language:null},events:["ended","progress","stalled","playing","waiting","canplay","canplaythrough","loadstart","loadeddata","loadedmetadata","timeupdate","volumechange","play","pause","error","seeking","seeked","emptied","ratechange","cuechange","download","enterfullscreen","exitfullscreen","captionsenabled","captionsdisabled","languagechange","controlshidden","controlsshown","ready","statechange","qualitychange","adsloaded","adscontentpause","adscontentresume","adstarted","adsmidpoint","adscomplete","adsallcomplete","adsimpression","adsclick"],selectors:{editable:"input, textarea, select, [contenteditable]",container:".plyr",controls:{container:null,wrapper:".plyr__controls"},labels:"[data-plyr]",buttons:{play:'[data-plyr="play"]',pause:'[data-plyr="pause"]',restart:'[data-plyr="restart"]',rewind:'[data-plyr="rewind"]',fastForward:'[data-plyr="fast-forward"]',mute:'[data-plyr="mute"]',captions:'[data-plyr="captions"]',download:'[data-plyr="download"]',fullscreen:'[data-plyr="fullscreen"]',pip:'[data-plyr="pip"]',airplay:'[data-plyr="airplay"]',settings:'[data-plyr="settings"]',loop:'[data-plyr="loop"]'},inputs:{seek:'[data-plyr="seek"]',volume:'[data-plyr="volume"]',speed:'[data-plyr="speed"]',language:'[data-plyr="language"]',quality:'[data-plyr="quality"]'},display:{currentTime:".plyr__time--current",duration:".plyr__time--duration",buffer:".plyr__progress__buffer",loop:".plyr__progress__loop",volume:".plyr__volume--display"},progress:".plyr__progress",captions:".plyr__captions",caption:".plyr__caption"},classNames:{type:"plyr--{0}",provider:"plyr--{0}",video:"plyr__video-wrapper",embed:"plyr__video-embed",videoFixedRatio:"plyr__video-wrapper--fixed-ratio",embedContainer:"plyr__video-embed__container",poster:"plyr__poster",posterEnabled:"plyr__poster-enabled",ads:"plyr__ads",control:"plyr__control",controlPressed:"plyr__control--pressed",playing:"plyr--playing",paused:"plyr--paused",stopped:"plyr--stopped",loading:"plyr--loading",hover:"plyr--hover",tooltip:"plyr__tooltip",cues:"plyr__cues",marker:"plyr__progress__marker",hidden:"plyr__sr-only",hideControls:"plyr--hide-controls",isTouch:"plyr--is-touch",uiSupported:"plyr--full-ui",noTransition:"plyr--no-transition",display:{time:"plyr__time"},menu:{value:"plyr__menu__value",badge:"plyr__badge",open:"plyr--menu-open"},captions:{enabled:"plyr--captions-enabled",active:"plyr--captions-active"},fullscreen:{enabled:"plyr--fullscreen-enabled",fallback:"plyr--fullscreen-fallback"},pip:{supported:"plyr--pip-supported",active:"plyr--pip-active"},airplay:{supported:"plyr--airplay-supported",active:"plyr--airplay-active"},previewThumbnails:{thumbContainer:"plyr__preview-thumb",thumbContainerShown:"plyr__preview-thumb--is-shown",imageContainer:"plyr__preview-thumb__image-container",timeContainer:"plyr__preview-thumb__time-container",scrubbingContainer:"plyr__preview-scrubbing",scrubbingContainerShown:"plyr__preview-scrubbing--is-shown"}},attributes:{embed:{provider:"data-plyr-provider",id:"data-plyr-embed-id",hash:"data-plyr-embed-hash"}},ads:{enabled:!1,publisherId:"",tagUrl:""},previewThumbnails:{enabled:!1,src:""},vimeo:{byline:!1,portrait:!1,title:!1,speed:!0,transparent:!1,customControls:!0,referrerPolicy:null,premium:!1},youtube:{rel:0,showinfo:0,iv_load_policy:3,modestbranding:1,customControls:!0,noCookie:!1},mediaMetadata:{title:"",artist:"",album:"",artwork:[]},markers:{enabled:!1,points:[]}},l9={active:"picture-in-picture",inactive:"inline"},Xm={html5:"html5",youtube:"youtube",vimeo:"vimeo"},c9={audio:"audio",video:"video"};function N7t(e){return/^(https?:\/\/)?(www\.)?(youtube\.com|youtube-nocookie\.com|youtu\.?be)\/.+$/.test(e)?Xm.youtube:/^https?:\/\/player.vimeo.com\/video\/\d{0,9}(?=\b|\/)/.test(e)?Xm.vimeo:null}const d9=()=>{};class O7t{constructor(t=!1){this.enabled=window.console&&t,this.enabled&&this.log("Debugging enabled")}get log(){return this.enabled?Function.prototype.bind.call(console.log,console):d9}get warn(){return this.enabled?Function.prototype.bind.call(console.warn,console):d9}get error(){return this.enabled?Function.prototype.bind.call(console.error,console):d9}}class Mc{constructor(t){Dt(this,"onChange",()=>{if(!this.supported)return;const n=this.player.elements.buttons.fullscreen;ce.element(n)&&(n.pressed=this.active);const r=this.target===this.player.media?this.target:this.player.elements.container;cn.call(this.player,r,this.active?"enterfullscreen":"exitfullscreen",!0)}),Dt(this,"toggleFallback",(n=!1)=>{if(n?this.scrollPosition={x:window.scrollX??0,y:window.scrollY??0}:window.scrollTo(this.scrollPosition.x,this.scrollPosition.y),document.body.style.overflow=n?"hidden":"",_r(this.target,this.player.config.classNames.fullscreen.fallback,n),Ws.isIos){let r=document.head.querySelector('meta[name="viewport"]');const i="viewport-fit=cover";r||(r=document.createElement("meta"),r.setAttribute("name","viewport"));const s=ce.string(r.content)&&r.content.includes(i);n?(this.cleanupViewport=!s,s||(r.content+=`,${i}`)):this.cleanupViewport&&(r.content=r.content.split(",").filter(o=>o.trim()!==i).join(","))}this.onChange()}),Dt(this,"trapFocus",n=>{if(Ws.isIos||Ws.isIPadOS||!this.active||n.key!=="Tab")return;const r=document.activeElement,i=MC.call(this.player,"a[href], button:not(:disabled), input:not(:disabled), [tabindex]"),[s]=i,o=i[i.length-1];r!==o||n.shiftKey?r===s&&n.shiftKey&&(o.focus(),n.preventDefault()):(s.focus(),n.preventDefault())}),Dt(this,"update",()=>{if(this.supported){let n;n=this.forceFallback?"Fallback (forced)":Mc.nativeSupported?"Native":"Fallback",this.player.debug.log(`${n} fullscreen enabled`)}else this.player.debug.log("Fullscreen not supported and fallback disabled");_r(this.player.elements.container,this.player.config.classNames.fullscreen.enabled,this.supported)}),Dt(this,"enter",()=>{this.supported&&(Ws.isIos&&this.player.config.fullscreen.iosNative?this.player.isVimeo?this.player.embed.requestFullscreen():this.target.webkitEnterFullscreen():!Mc.nativeSupported||this.forceFallback?this.toggleFallback(!0):this.prefix?ce.empty(this.prefix)||this.target[`${this.prefix}Request${this.property}`]():this.target.requestFullscreen({navigationUI:"hide"}))}),Dt(this,"exit",()=>{if(this.supported)if(Ws.isIos&&this.player.config.fullscreen.iosNative)this.player.isVimeo?this.player.embed.exitFullscreen():this.target.webkitEnterFullscreen(),df(this.player.play());else if(!Mc.nativeSupported||this.forceFallback)this.toggleFallback(!1);else if(this.prefix){if(!ce.empty(this.prefix)){const n=this.prefix==="moz"?"Cancel":"Exit";document[`${this.prefix}${n}${this.property}`]()}}else(document.cancelFullScreen||document.exitFullscreen).call(document)}),Dt(this,"toggle",()=>{this.active?this.exit():this.enter()}),this.player=t,this.prefix=Mc.prefix,this.property=Mc.property,this.scrollPosition={x:0,y:0},this.forceFallback=t.config.fullscreen.fallback==="force",this.player.elements.fullscreen=t.config.fullscreen.container&&x7t(this.player.elements.container,t.config.fullscreen.container),tr.call(this.player,document,this.prefix==="ms"?"MSFullscreenChange":`${this.prefix}fullscreenchange`,()=>{this.onChange()}),tr.call(this.player,this.player.elements.container,"dblclick",n=>{ce.element(this.player.elements.controls)&&this.player.elements.controls.contains(n.target)||this.player.listeners.proxy(n,this.toggle,"fullscreen")}),tr.call(this,this.player.elements.container,"keydown",n=>this.trapFocus(n)),this.update()}static get nativeSupported(){return!!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled)}get useNative(){return Mc.nativeSupported&&!this.forceFallback}static get prefix(){if(ce.function(document.exitFullscreen))return"";let t="";return["webkit","moz","ms"].some(n=>!(!ce.function(document[`${n}ExitFullscreen`])&&!ce.function(document[`${n}CancelFullScreen`]))&&(t=n,!0)),t}static get property(){return this.prefix==="moz"?"FullScreen":"Fullscreen"}get supported(){return[this.player.config.fullscreen.enabled,this.player.isVideo,Mc.nativeSupported||this.player.config.fullscreen.fallback,!this.player.isYouTube||Mc.nativeSupported||!Ws.isIos||this.player.config.playsinline&&!this.player.config.fullscreen.iosNative].every(Boolean)}get active(){if(!this.supported)return!1;if(!Mc.nativeSupported||this.forceFallback)return r4(this.target,this.player.config.classNames.fullscreen.fallback);const t=this.prefix?this.target.getRootNode()[`${this.prefix}${this.property}Element`]:this.target.getRootNode().fullscreenElement;return t&&t.shadowRoot?t===this.target.getRootNode().host:t===this.target}get target(){return Ws.isIos&&this.player.config.fullscreen.iosNative?this.player.media:this.player.elements.fullscreen??this.player.elements.container}}function xP(e,t=1){return new Promise((n,r)=>{const i=new Image,s=()=>{delete i.onload,delete i.onerror,(i.naturalWidth>=t?n:r)(i)};Object.assign(i,{onload:s,onerror:s,src:e})})}const Nr={addStyleHook(){_r(this.elements.container,this.config.selectors.container.replace(".",""),!0),_r(this.elements.container,this.config.classNames.uiSupported,this.supported.ui)},toggleNativeControls(e=!1){e&&this.isHTML5?this.media.setAttribute("controls",""):this.media.removeAttribute("controls")},build(){if(this.listeners.media(),!this.supported.ui)return this.debug.warn(`Basic support only for ${this.provider} ${this.type}`),void Nr.toggleNativeControls.call(this,!0);ce.element(this.elements.controls)||(At.inject.call(this),this.listeners.controls()),Nr.toggleNativeControls.call(this),this.isHTML5&&cr.setup.call(this),this.volume=null,this.muted=null,this.loop=null,this.quality=null,this.speed=null,At.updateVolume.call(this),At.timeUpdate.call(this),At.durationUpdate.call(this),Nr.checkPlaying.call(this),_r(this.elements.container,this.config.classNames.pip.supported,zi.pip&&this.isHTML5&&this.isVideo),_r(this.elements.container,this.config.classNames.airplay.supported,zi.airplay&&this.isHTML5),_r(this.elements.container,this.config.classNames.isTouch,this.touch),this.ready=!0,setTimeout(()=>{cn.call(this,this.media,"ready")},0),Nr.setTitle.call(this),this.poster&&Nr.setPoster.call(this,this.poster,!1).catch(()=>{}),this.config.duration&&At.durationUpdate.call(this),this.config.mediaMetadata&&At.setMediaMetadata.call(this)},setTitle(){let e=Hs.get("play",this.config);if(ce.string(this.config.title)&&!ce.empty(this.config.title)&&(e+=`, ${this.config.title}`),Array.from(this.elements.buttons.play||[]).forEach(t=>{t.setAttribute("aria-label",e)}),this.isEmbed){const t=ys.call(this,"iframe");if(!ce.element(t))return;const n=ce.empty(this.config.title)?"video":this.config.title,r=Hs.get("frameTitle",this.config);t.setAttribute("title",r.replace("{title}",n))}},togglePoster(e){_r(this.elements.container,this.config.classNames.posterEnabled,e)},setPoster(e,t=!0){return t&&this.poster?Promise.reject(new Error("Poster already set")):(this.media.setAttribute("data-poster",e),this.elements.poster.removeAttribute("hidden"),_7t.call(this).then(()=>xP(e)).catch(n=>{throw e===this.poster&&Nr.togglePoster.call(this,!1),n}).then(()=>{if(e!==this.poster)throw new Error("setPoster cancelled by later call to setPoster")}).then(()=>(Object.assign(this.elements.poster.style,{backgroundImage:`url('${e}')`,backgroundSize:""}),Nr.togglePoster.call(this,!0),e)))},checkPlaying(e){_r(this.elements.container,this.config.classNames.playing,this.playing),_r(this.elements.container,this.config.classNames.paused,this.paused),_r(this.elements.container,this.config.classNames.stopped,this.stopped),Array.from(this.elements.buttons.play||[]).forEach(t=>{Object.assign(t,{pressed:this.playing}),t.setAttribute("aria-label",Hs.get(this.playing?"pause":"play",this.config))}),ce.event(e)&&e.type==="timeupdate"||Nr.toggleControls.call(this)},checkLoading(e){this.loading=["stalled","waiting"].includes(e.type),clearTimeout(this.timers.loading),this.timers.loading=setTimeout(()=>{_r(this.elements.container,this.config.classNames.loading,this.loading),Nr.toggleControls.call(this)},this.loading?250:0)},toggleControls(e){const{controls:t}=this.elements;if(t&&this.config.hideControls){const n=this.touch&&this.lastSeekTime+2e3>Date.now();this.toggleControls(!!(e||this.loading||this.paused||t.pressed||t.hover||n))}},migrateStyles(){Object.values({...this.media.style}).filter(e=>!ce.empty(e)&&ce.string(e)&&e.startsWith("--plyr")).forEach(e=>{this.elements.container.style.setProperty(e,this.media.style.getPropertyValue(e)),this.media.style.removeProperty(e)}),ce.empty(this.media.style)&&this.media.removeAttribute("style")}};class $7t{constructor(t){Dt(this,"firstTouch",()=>{const{player:n}=this,{elements:r}=n;n.touch=!0,_r(r.container,n.config.classNames.isTouch,!0)}),Dt(this,"global",(n=!0)=>{const{player:r}=this;r.config.keyboard.global&&LC.call(r,window,"keydown keyup",this.handleKey,n,!1),LC.call(r,document.body,"click",this.toggleMenu,n),VQ.call(r,document.body,"touchstart",this.firstTouch)}),Dt(this,"container",()=>{const{player:n}=this,{config:r,elements:i,timers:s}=n;!r.keyboard.global&&r.keyboard.focused&&tr.call(n,i.container,"keydown keyup",this.handleKey,!1),tr.call(n,i.container,"mousemove mouseleave touchstart touchmove enterfullscreen exitfullscreen",u=>{const{controls:l}=i;l&&u.type==="enterfullscreen"&&(l.pressed=!1,l.hover=!1);let c=0;["touchstart","touchmove","mousemove"].includes(u.type)&&(Nr.toggleControls.call(n,!0),c=n.touch?3e3:2e3),clearTimeout(s.controls),s.controls=setTimeout(()=>Nr.toggleControls.call(n,!1),c)});const o=()=>{if(!n.isVimeo||n.config.vimeo.premium)return;const u=i.wrapper,{active:l}=n.fullscreen,[c,d]=HQ.call(n),f=v3e(`aspect-ratio: ${c} / ${d}`);if(!l)return void(f?(u.style.width=null,u.style.height=null):(u.style.maxWidth=null,u.style.margin=null));const[h,p]=T7t(),m=h/p>c/d;f?(u.style.width=m?"auto":"100%",u.style.height=m?"100%":"auto"):(u.style.maxWidth=m?p/d*c+"px":null,u.style.margin=m?"0 auto":null)},a=()=>{clearTimeout(s.resized),s.resized=setTimeout(o,50)};tr.call(n,i.container,"enterfullscreen exitfullscreen",u=>{const{target:l}=n.fullscreen;l===i.container&&(!n.isEmbed&&ce.empty(n.config.ratio)||(o(),(u.type==="enterfullscreen"?tr:a5).call(n,window,"resize",a)))})}),Dt(this,"media",()=>{const{player:n}=this,{elements:r}=n;if(tr.call(n,n.media,"timeupdate seeking seeked",s=>At.timeUpdate.call(n,s)),tr.call(n,n.media,"durationchange loadeddata loadedmetadata",s=>At.durationUpdate.call(n,s)),tr.call(n,n.media,"ended",()=>{n.isHTML5&&n.isVideo&&n.config.resetOnEnd&&(n.restart(),n.pause())}),tr.call(n,n.media,"progress playing seeking seeked",s=>At.updateProgress.call(n,s)),tr.call(n,n.media,"volumechange",s=>At.updateVolume.call(n,s)),tr.call(n,n.media,"playing play pause ended emptied timeupdate",s=>Nr.checkPlaying.call(n,s)),tr.call(n,n.media,"waiting canplay seeked playing",s=>Nr.checkLoading.call(n,s)),n.supported.ui&&n.config.clickToPlay&&!n.isAudio){const s=ys.call(n,`.${n.config.classNames.video}`);if(!ce.element(s))return;tr.call(n,r.container,"click",o=>{([r.container,s].includes(o.target)||s.contains(o.target))&&(n.touch&&n.config.hideControls||(n.ended?(this.proxy(o,n.restart,"restart"),this.proxy(o,()=>{df(n.play())},"play")):this.proxy(o,()=>{df(n.togglePlay())},"play")))})}n.supported.ui&&n.config.disableContextMenu&&tr.call(n,r.wrapper,"contextmenu",s=>{s.preventDefault()},!1),tr.call(n,n.media,"volumechange",()=>{n.storage.set({volume:n.volume,muted:n.muted})}),tr.call(n,n.media,"ratechange",()=>{At.updateSetting.call(n,"speed"),n.storage.set({speed:n.speed})}),tr.call(n,n.media,"qualitychange",s=>{At.updateSetting.call(n,"quality",null,s.detail.quality)}),tr.call(n,n.media,"ready qualitychange",()=>{At.setDownloadUrl.call(n)});const i=n.config.events.concat(["keyup","keydown"]).join(" ");tr.call(n,n.media,i,s=>{let{detail:o={}}=s;s.type==="error"&&(o=n.media.error),cn.call(n,r.container,s.type,!0,o)})}),Dt(this,"proxy",(n,r,i)=>{const{player:s}=this,o=s.config.listeners[i];let a=!0;ce.function(o)&&(a=o.call(s,n)),a!==!1&&ce.function(r)&&r.call(s,n)}),Dt(this,"bind",(n,r,i,s,o=!0)=>{const{player:a}=this,u=a.config.listeners[s],l=ce.function(u);tr.call(a,n,r,c=>this.proxy(c,i,s),o&&!l)}),Dt(this,"controls",()=>{const{player:n}=this,{elements:r}=n,i=Ws.isIE?"change":"input";if(r.buttons.play&&Array.from(r.buttons.play).forEach(s=>{this.bind(s,"click",()=>{df(n.togglePlay())},"play")}),this.bind(r.buttons.restart,"click",n.restart,"restart"),this.bind(r.buttons.rewind,"click",()=>{n.lastSeekTime=Date.now(),n.rewind()},"rewind"),this.bind(r.buttons.fastForward,"click",()=>{n.lastSeekTime=Date.now(),n.forward()},"fastForward"),this.bind(r.buttons.mute,"click",()=>{n.muted=!n.muted},"mute"),this.bind(r.buttons.captions,"click",()=>n.toggleCaptions()),this.bind(r.buttons.download,"click",()=>{cn.call(n,n.media,"download")},"download"),this.bind(r.buttons.fullscreen,"click",()=>{n.fullscreen.toggle()},"fullscreen"),this.bind(r.buttons.pip,"click",()=>{n.pip="toggle"},"pip"),this.bind(r.buttons.airplay,"click",n.airplay,"airplay"),this.bind(r.buttons.settings,"click",s=>{s.stopPropagation(),s.preventDefault(),At.toggleMenu.call(n,s)},null,!1),this.bind(r.buttons.settings,"keyup",s=>{[" ","Enter"].includes(s.key)&&(s.key!=="Enter"?(s.preventDefault(),s.stopPropagation(),At.toggleMenu.call(n,s)):At.focusFirstMenuItem.call(n,null,!0))},null,!1),this.bind(r.settings.menu,"keydown",s=>{s.key==="Escape"&&At.toggleMenu.call(n,s)}),this.bind(r.inputs.seek,"mousedown mousemove",s=>{const o=r.progress.getBoundingClientRect(),a=100/o.width*(s.pageX-o.left);s.currentTarget.setAttribute("seek-value",a)}),this.bind(r.inputs.seek,"mousedown mouseup keydown keyup touchstart touchend",s=>{const o=s.currentTarget,a="play-on-seeked";if(ce.keyboardEvent(s)&&!["ArrowLeft","ArrowRight"].includes(s.key))return;n.lastSeekTime=Date.now();const u=o.hasAttribute(a),l=["mouseup","touchend","keyup"].includes(s.type);u&&l?(o.removeAttribute(a),df(n.play())):!l&&n.playing&&(o.setAttribute(a,""),n.pause())}),Ws.isIos){const s=MC.call(n,'input[type="range"]');Array.from(s).forEach(o=>this.bind(o,i,a=>m3e(a.target)))}this.bind(r.inputs.seek,i,s=>{const o=s.currentTarget;let a=o.getAttribute("seek-value");ce.empty(a)&&(a=o.value),o.removeAttribute("seek-value"),n.currentTime=a/o.max*n.duration},"seek"),this.bind(r.progress,"mouseenter mouseleave mousemove",s=>At.updateSeekTooltip.call(n,s)),this.bind(r.progress,"mousemove touchmove",s=>{const{previewThumbnails:o}=n;o&&o.loaded&&o.startMove(s)}),this.bind(r.progress,"mouseleave touchend click",()=>{const{previewThumbnails:s}=n;s&&s.loaded&&s.endMove(!1,!0)}),this.bind(r.progress,"mousedown touchstart",s=>{const{previewThumbnails:o}=n;o&&o.loaded&&o.startScrubbing(s)}),this.bind(r.progress,"mouseup touchend",s=>{const{previewThumbnails:o}=n;o&&o.loaded&&o.endScrubbing(s)}),Ws.isWebKit&&Array.from(MC.call(n,'input[type="range"]')).forEach(s=>{this.bind(s,"input",o=>At.updateRangeFill.call(n,o.target))}),n.config.toggleInvert&&!ce.element(r.display.duration)&&this.bind(r.display.currentTime,"click",()=>{n.currentTime!==0&&(n.config.invertTime=!n.config.invertTime,At.timeUpdate.call(n))}),this.bind(r.inputs.volume,i,s=>{n.volume=s.target.value},"volume"),this.bind(r.controls,"mouseenter mouseleave",s=>{r.controls.hover=!n.touch&&s.type==="mouseenter"}),r.fullscreen&&Array.from(r.fullscreen.children).filter(s=>!s.contains(r.container)).forEach(s=>{this.bind(s,"mouseenter mouseleave",o=>{r.controls&&(r.controls.hover=!n.touch&&o.type==="mouseenter")})}),this.bind(r.controls,"mousedown mouseup touchstart touchend touchcancel",s=>{r.controls.pressed=["mousedown","touchstart"].includes(s.type)}),this.bind(r.controls,"focusin",()=>{const{config:s,timers:o}=n;_r(r.controls,s.classNames.noTransition,!0),Nr.toggleControls.call(n,!0),setTimeout(()=>{_r(r.controls,s.classNames.noTransition,!1)},0);const a=this.touch?3e3:4e3;clearTimeout(o.controls),o.controls=setTimeout(()=>Nr.toggleControls.call(n,!1),a)}),this.bind(r.inputs.volume,"wheel",s=>{const o=s.webkitDirectionInvertedFromDevice,[a,u]=[s.deltaX,-s.deltaY].map(d=>o?-d:d),l=Math.sign(Math.abs(a)>Math.abs(u)?a:u);n.increaseVolume(l/50);const{volume:c}=n.media;(l===1&&c<1||l===-1&&c>0)&&s.preventDefault()},"volume",!1)}),this.player=t,this.lastKey=null,this.focusTimer=null,this.lastKeyDown=null,this.handleKey=this.handleKey.bind(this),this.toggleMenu=this.toggleMenu.bind(this),this.firstTouch=this.firstTouch.bind(this)}handleKey(t){const{player:n}=this,{elements:r}=n,{key:i,type:s,altKey:o,ctrlKey:a,metaKey:u,shiftKey:l}=t,c=s==="keydown",d=c&&i===this.lastKey;if(!(o||a||u||l)&&i){if(c){const h=document.activeElement;if(ce.element(h)){const{editable:p}=n.config.selectors,{seek:m}=r.inputs;if(h!==m&&Oy(h,p)||t.key===" "&&Oy(h,'button, [role^="menuitem"]'))return}switch([" ","ArrowLeft","ArrowUp","ArrowRight","ArrowDown","0","1","2","3","4","5","6","7","8","9","c","f","k","l","m"].includes(i)&&(t.preventDefault(),t.stopPropagation()),i){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":d||(f=parseInt(i,10),n.currentTime=n.duration/10*f);break;case" ":case"k":d||df(n.togglePlay());break;case"ArrowUp":n.increaseVolume(.1);break;case"ArrowDown":n.decreaseVolume(.1);break;case"m":d||(n.muted=!n.muted);break;case"ArrowRight":n.forward();break;case"ArrowLeft":n.rewind();break;case"f":n.fullscreen.toggle();break;case"c":d||n.toggleCaptions();break;case"l":n.loop=!n.loop}i==="Escape"&&!n.fullscreen.usingNative&&n.fullscreen.active&&n.fullscreen.toggle(),this.lastKey=i}else this.lastKey=null;var f}}toggleMenu(t){At.toggleMenu.call(this.player,t)}}function M7t(e,t){return e(t={exports:{}},t.exports),t.exports}var L7t=M7t(function(e,t){e.exports=function(){var n=function(){},r={},i={},s={};function o(f,h){f=f.push?f:[f];var p,m,y,v=[],b=f.length,w=b;for(p=function(E,_){_.length&&v.push(E),--w||h(v)};b--;)m=f[b],(y=i[m])?p(m,y):(s[m]=s[m]||[]).push(p)}function a(f,h){if(f){var p=s[f];if(i[f]=h,p)for(;p.length;)p[0](f,h),p.splice(0,1)}}function u(f,h){f.call&&(f={success:f}),h.length?(f.error||n)(h):(f.success||n)(f)}function l(f,h,p,m){var y,v,b=document,w=p.async,E=(p.numRetries||0)+1,_=p.before||n,C=f.replace(/[\?|#].*$/,""),S=f.replace(/^(css|img)!/,"");m=m||0,/(^css!|\.css$)/.test(C)?((v=b.createElement("link")).rel="stylesheet",v.href=S,(y="hideFocus"in v)&&v.relList&&(y=0,v.rel="preload",v.as="style")):/(^img!|\.(png|gif|jpg|svg|webp)$)/.test(C)?(v=b.createElement("img")).src=S:((v=b.createElement("script")).src=f,v.async=w===void 0||w),v.onload=v.onerror=v.onbeforeload=function(k){var R=k.type[0];if(y)try{v.sheet.cssText.length||(R="e")}catch(N){N.code!=18&&(R="e")}if(R=="e"){if((m+=1)<E)return l(f,h,p,m)}else if(v.rel=="preload"&&v.as=="style")return v.rel="stylesheet";h(f,R,k.defaultPrevented)},_(f,v)!==!1&&b.head.appendChild(v)}function c(f,h,p){var m,y,v=(f=f.push?f:[f]).length,b=v,w=[];for(m=function(E,_,C){if(_=="e"&&w.push(E),_=="b"){if(!C)return;w.push(E)}--v||h(w)},y=0;y<b;y++)l(f[y],m,p)}function d(f,h,p){var m,y;if(h&&h.trim&&(m=h),y=(m?p:h)||{},m){if(m in r)throw"LoadJS";r[m]=!0}function v(b,w){c(f,function(E){u(y,E),b&&u({success:b,error:w},E),a(m,E)},y)}if(y.returnPromise)return new Promise(v);v()}return d.ready=function(f,h){return o(f,function(p){u(h,p)}),d},d.done=function(f){a(f,[])},d.reset=function(){r={},i={},s={}},d.isDefined=function(f){return f in r},d}()});function qQ(e){return new Promise((t,n)=>{L7t(e,{success:t,error:n})})}function F7t(e){return ce.empty(e)?null:ce.number(Number(e))?e:e.match(/^.*(vimeo.com\/|video\/)(\d+).*/)?RegExp.$2:e}function B7t(e){const t=e.match(/^.*(vimeo.com\/|video\/)(\d+)(\?.*&*h=|\/)+([\d,a-f]+)/);return t&&t.length===5?t[4]:null}function Y_(e){e&&!this.embed.hasPlayed&&(this.embed.hasPlayed=!0),this.media.paused===e&&(this.media.paused=!e,cn.call(this,this.media,e?"play":"pause"))}const Uz={setup(){const e=this;_r(e.elements.wrapper,e.config.classNames.embed,!0),e.options.speed=e.config.speed.options,ww.call(e),ce.object(window.Vimeo)?Uz.ready.call(e):qQ(e.config.urls.vimeo.sdk).then(()=>{Uz.ready.call(e)}).catch(t=>{e.debug.warn("Vimeo SDK (player.js) failed to load",t)})},ready(){const e=this,t=e.config.vimeo,{premium:n,referrerPolicy:r,...i}=t;let s=e.media.getAttribute("src"),o="";ce.empty(s)?(s=e.media.getAttribute(e.config.attributes.embed.id),o=e.media.getAttribute(e.config.attributes.embed.hash)):o=B7t(s);const a=o?{h:o}:{};n&&Object.assign(i,{controls:!1,sidedock:!1});const u=S3e({loop:e.config.loop.active,autoplay:e.autoplay,muted:e.muted,gesture:"media",playsinline:e.config.playsinline,...a,...i}),l=F7t(s),c=ln("iframe"),d=zz(e.config.urls.vimeo.iframe,l,u);if(c.setAttribute("src",d),c.setAttribute("allowfullscreen",""),c.setAttribute("allow",["autoplay","fullscreen","picture-in-picture","encrypted-media","accelerometer","gyroscope"].join("; ")),ce.empty(r)||c.setAttribute("referrerPolicy",r),n||!t.customControls)c.setAttribute("data-poster",e.poster),e.media=n4(c,e.media);else{const b=ln("div",{class:e.config.classNames.embedContainer,"data-poster":e.poster});b.appendChild(c),e.media=n4(b,e.media)}t.customControls||SA(zz(e.config.urls.vimeo.api,d)).then(b=>{!ce.empty(b)&&b.thumbnail_url&&Nr.setPoster.call(e,b.thumbnail_url).catch(()=>{})}),e.embed=new window.Vimeo.Player(c,{autopause:e.config.autopause,muted:e.muted}),e.media.paused=!0,e.media.currentTime=0,e.supported.ui&&e.embed.disableTextTrack(),e.media.play=()=>(Y_.call(e,!0),e.embed.play()),e.media.pause=()=>(Y_.call(e,!1),e.embed.pause()),e.media.stop=()=>{e.pause(),e.currentTime=0};let{currentTime:f}=e.media;Object.defineProperty(e.media,"currentTime",{get:()=>f,set(b){const{embed:w,media:E,paused:_,volume:C}=e,S=_&&!w.hasPlayed;E.seeking=!0,cn.call(e,E,"seeking"),Promise.resolve(S&&w.setVolume(0)).then(()=>w.setCurrentTime(b)).then(()=>S&&w.pause()).then(()=>S&&w.setVolume(C)).catch(()=>{})}});let h=e.config.speed.selected;Object.defineProperty(e.media,"playbackRate",{get:()=>h,set(b){e.embed.setPlaybackRate(b).then(()=>{h=b,cn.call(e,e.media,"ratechange")}).catch(()=>{e.options.speed=[1]})}});let{volume:p}=e.config;Object.defineProperty(e.media,"volume",{get:()=>p,set(b){e.embed.setVolume(b).then(()=>{p=b,cn.call(e,e.media,"volumechange")})}});let{muted:m}=e.config;Object.defineProperty(e.media,"muted",{get:()=>m,set(b){const w=!!ce.boolean(b)&&b;e.embed.setMuted(!!w||e.config.muted).then(()=>{m=w,cn.call(e,e.media,"volumechange")})}});let y,{loop:v}=e.config;Object.defineProperty(e.media,"loop",{get:()=>v,set(b){const w=ce.boolean(b)?b:e.config.loop.active;e.embed.setLoop(w).then(()=>{v=w})}}),e.embed.getVideoUrl().then(b=>{y=b,At.setDownloadUrl.call(e)}).catch(b=>{this.debug.warn(b)}),Object.defineProperty(e.media,"currentSrc",{get:()=>y}),Object.defineProperty(e.media,"ended",{get:()=>e.currentTime===e.duration}),Promise.all([e.embed.getVideoWidth(),e.embed.getVideoHeight()]).then(b=>{const[w,E]=b;e.embed.ratio=w3e(w,E),ww.call(this)}),e.embed.setAutopause(e.config.autopause).then(b=>{e.config.autopause=b}),e.embed.getVideoTitle().then(b=>{e.config.title=b,Nr.setTitle.call(this)}),e.embed.getCurrentTime().then(b=>{f=b,cn.call(e,e.media,"timeupdate")}),e.embed.getDuration().then(b=>{e.media.duration=b,cn.call(e,e.media,"durationchange")}),e.embed.getTextTracks().then(b=>{e.media.textTracks=b,cr.setup.call(e)}),e.embed.on("cuechange",({cues:b=[]})=>{const w=b.map(E=>I7t(E.text));cr.updateCues.call(e,w)}),e.embed.on("loaded",()=>{e.embed.getPaused().then(b=>{Y_.call(e,!b),b||cn.call(e,e.media,"playing")}),ce.element(e.embed.element)&&e.supported.ui&&e.embed.element.setAttribute("tabindex",-1)}),e.embed.on("bufferstart",()=>{cn.call(e,e.media,"waiting")}),e.embed.on("bufferend",()=>{cn.call(e,e.media,"playing")}),e.embed.on("play",()=>{Y_.call(e,!0),cn.call(e,e.media,"playing")}),e.embed.on("pause",()=>{Y_.call(e,!1)}),e.embed.on("timeupdate",b=>{e.media.seeking=!1,f=b.seconds,cn.call(e,e.media,"timeupdate")}),e.embed.on("progress",b=>{e.media.buffered=b.percent,cn.call(e,e.media,"progress"),parseInt(b.percent,10)===1&&cn.call(e,e.media,"canplaythrough"),e.embed.getDuration().then(w=>{w!==e.media.duration&&(e.media.duration=w,cn.call(e,e.media,"durationchange"))})}),e.embed.on("seeked",()=>{e.media.seeking=!1,cn.call(e,e.media,"seeked")}),e.embed.on("ended",()=>{e.media.paused=!0,cn.call(e,e.media,"ended")}),e.embed.on("error",b=>{e.media.error=b,cn.call(e,e.media,"error")}),t.customControls&&setTimeout(()=>Nr.build.call(e),0)}};function j7t(e){return ce.empty(e)?null:e.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/)?RegExp.$2:e}function K_(e){e&&!this.embed.hasPlayed&&(this.embed.hasPlayed=!0),this.media.paused===e&&(this.media.paused=!e,cn.call(this,this.media,e?"play":"pause"))}function z7t(e){return e.noCookie?"https://www.youtube-nocookie.com":window.location.protocol==="http:"?"http://www.youtube.com":void 0}const wP={setup(){if(_r(this.elements.wrapper,this.config.classNames.embed,!0),ce.object(window.YT)&&ce.function(window.YT.Player))wP.ready.call(this);else{const e=window.onYouTubeIframeAPIReady;window.onYouTubeIframeAPIReady=()=>{ce.function(e)&&e(),wP.ready.call(this)},qQ(this.config.urls.youtube.sdk).catch(t=>{this.debug.warn("YouTube API failed to load",t)})}},getTitle(e){SA(zz(this.config.urls.youtube.api,e)).then(t=>{if(ce.object(t)){const{title:n,height:r,width:i}=t;this.config.title=n,Nr.setTitle.call(this),this.embed.ratio=w3e(i,r)}ww.call(this)}).catch(()=>{ww.call(this)})},ready(){const e=this,t=e.config.youtube,n=e.media&&e.media.getAttribute("id");if(!ce.empty(n)&&n.startsWith("youtube-"))return;let r=e.media.getAttribute("src");ce.empty(r)&&(r=e.media.getAttribute(this.config.attributes.embed.id));const i=j7t(r),s=ln("div",{id:C7t(e.provider),"data-poster":t.customControls?e.poster:void 0});if(e.media=n4(s,e.media),t.customControls){const o=a=>`https://i.ytimg.com/vi/${i}/${a}default.jpg`;xP(o("maxres"),121).catch(()=>xP(o("sd"),121)).catch(()=>xP(o("hq"))).then(a=>Nr.setPoster.call(e,a.src)).then(a=>{a.includes("maxres")||(e.elements.poster.style.backgroundSize="cover")}).catch(()=>{})}e.embed=new window.YT.Player(e.media,{videoId:i,host:z7t(t),playerVars:Bi({},{autoplay:e.config.autoplay?1:0,hl:e.config.hl,controls:e.supported.ui&&t.customControls?0:1,disablekb:1,playsinline:e.config.playsinline&&!e.config.fullscreen.iosNative?1:0,cc_load_policy:e.captions.active?1:0,cc_lang_pref:e.config.captions.language,widget_referrer:window?window.location.href:null},t),events:{onError(o){if(!e.media.error){const a=o.data,u={2:"The request contains an invalid parameter value. For example, this error occurs if you specify a video ID that does not have 11 characters, or if the video ID contains invalid characters, such as exclamation points or asterisks.",5:"The requested content cannot be played in an HTML5 player or another error related to the HTML5 player has occurred.",100:"The video requested was not found. This error occurs when a video has been removed (for any reason) or has been marked as private.",101:"The owner of the requested video does not allow it to be played in embedded players.",150:"The owner of the requested video does not allow it to be played in embedded players."}[a]||"An unknown error occurred";e.media.error={code:a,message:u},cn.call(e,e.media,"error")}},onPlaybackRateChange(o){const a=o.target;e.media.playbackRate=a.getPlaybackRate(),cn.call(e,e.media,"ratechange")},onReady(o){if(ce.function(e.media.play))return;const a=o.target;wP.getTitle.call(e,i),e.media.play=()=>{K_.call(e,!0),a.playVideo()},e.media.pause=()=>{K_.call(e,!1),a.pauseVideo()},e.media.stop=()=>{a.stopVideo()},e.media.duration=a.getDuration(),e.media.paused=!0,e.media.currentTime=0,Object.defineProperty(e.media,"currentTime",{get:()=>Number(a.getCurrentTime()),set(d){e.paused&&!e.embed.hasPlayed&&e.embed.mute(),e.media.seeking=!0,cn.call(e,e.media,"seeking"),a.seekTo(d)}}),Object.defineProperty(e.media,"playbackRate",{get:()=>a.getPlaybackRate(),set(d){a.setPlaybackRate(d)}});let{volume:u}=e.config;Object.defineProperty(e.media,"volume",{get:()=>u,set(d){u=d,a.setVolume(100*u),cn.call(e,e.media,"volumechange")}});let{muted:l}=e.config;Object.defineProperty(e.media,"muted",{get:()=>l,set(d){const f=ce.boolean(d)?d:l;l=f,a[f?"mute":"unMute"](),a.setVolume(100*u),cn.call(e,e.media,"volumechange")}}),Object.defineProperty(e.media,"currentSrc",{get:()=>a.getVideoUrl()}),Object.defineProperty(e.media,"ended",{get:()=>e.currentTime===e.duration});const c=a.getAvailablePlaybackRates();e.options.speed=c.filter(d=>e.config.speed.options.includes(d)),e.supported.ui&&t.customControls&&e.media.setAttribute("tabindex",-1),cn.call(e,e.media,"timeupdate"),cn.call(e,e.media,"durationchange"),clearInterval(e.timers.buffering),e.timers.buffering=setInterval(()=>{e.media.buffered=a.getVideoLoadedFraction(),(e.media.lastBuffered===null||e.media.lastBuffered<e.media.buffered)&&cn.call(e,e.media,"progress"),e.media.lastBuffered=e.media.buffered,e.media.buffered===1&&(clearInterval(e.timers.buffering),cn.call(e,e.media,"canplaythrough"))},200),t.customControls&&setTimeout(()=>Nr.build.call(e),50)},onStateChange(o){const a=o.target;switch(clearInterval(e.timers.playing),e.media.seeking&&[1,2].includes(o.data)&&(e.media.seeking=!1,cn.call(e,e.media,"seeked")),o.data){case-1:cn.call(e,e.media,"timeupdate"),e.media.buffered=a.getVideoLoadedFraction(),cn.call(e,e.media,"progress");break;case 0:K_.call(e,!1),e.media.loop?(a.stopVideo(),a.playVideo()):cn.call(e,e.media,"ended");break;case 1:t.customControls&&!e.config.autoplay&&e.media.paused&&!e.embed.hasPlayed?e.media.pause():(K_.call(e,!0),cn.call(e,e.media,"playing"),e.timers.playing=setInterval(()=>{cn.call(e,e.media,"timeupdate")},50),e.media.duration!==a.getDuration()&&(e.media.duration=a.getDuration(),cn.call(e,e.media,"durationchange")));break;case 2:e.muted||e.embed.unMute(),K_.call(e,!1);break;case 3:cn.call(e,e.media,"waiting")}cn.call(e,e.elements.container,"statechange",!1,{code:o.data})}}})}},k3e={setup(){this.media?(_r(this.elements.container,this.config.classNames.type.replace("{0}",this.type),!0),_r(this.elements.container,this.config.classNames.provider.replace("{0}",this.provider),!0),this.isEmbed&&_r(this.elements.container,this.config.classNames.type.replace("{0}","video"),!0),this.isVideo&&(this.elements.wrapper=ln("div",{class:this.config.classNames.video}),y3e(this.media,this.elements.wrapper),this.elements.poster=ln("div",{class:this.config.classNames.poster}),this.elements.wrapper.appendChild(this.elements.poster)),this.isHTML5?a0.setup.call(this):this.isYouTube?wP.setup.call(this):this.isVimeo&&Uz.setup.call(this)):this.debug.warn("No media element found!")}};class U7t{constructor(t){Dt(this,"load",()=>{this.enabled&&(ce.object(window.google)&&ce.object(window.google.ima)?this.ready():qQ(this.player.config.urls.googleIMA.sdk).then(()=>{this.ready()}).catch(()=>{this.trigger("error",new Error("Google IMA SDK failed to load"))}))}),Dt(this,"ready",()=>{var n;this.enabled||((n=this).manager&&n.manager.destroy(),n.elements.displayContainer&&n.elements.displayContainer.destroy(),n.elements.container.remove()),this.startSafetyTimer(12e3,"ready()"),this.managerPromise.then(()=>{this.clearSafetyTimer("onAdsManagerLoaded()")}),this.listeners(),this.setupIMA()}),Dt(this,"setupIMA",()=>{this.elements.container=ln("div",{class:this.player.config.classNames.ads}),this.player.elements.container.appendChild(this.elements.container),google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED),google.ima.settings.setLocale(this.player.config.ads.language),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(this.player.config.playsinline),this.elements.displayContainer=new google.ima.AdDisplayContainer(this.elements.container,this.player.media),this.loader=new google.ima.AdsLoader(this.elements.displayContainer),this.loader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,n=>this.onAdsManagerLoaded(n),!1),this.loader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,n=>this.onAdError(n),!1),this.requestAds()}),Dt(this,"requestAds",()=>{const{container:n}=this.player.elements;try{const r=new google.ima.AdsRequest;r.adTagUrl=this.tagUrl,r.linearAdSlotWidth=n.offsetWidth,r.linearAdSlotHeight=n.offsetHeight,r.nonLinearAdSlotWidth=n.offsetWidth,r.nonLinearAdSlotHeight=n.offsetHeight,r.forceNonLinearFullSlot=!1,r.setAdWillPlayMuted(!this.player.muted),this.loader.requestAds(r)}catch(r){this.onAdError(r)}}),Dt(this,"pollCountdown",(n=!1)=>{if(!n)return clearInterval(this.countdownTimer),void this.elements.container.removeAttribute("data-badge-text");this.countdownTimer=setInterval(()=>{const r=u5(Math.max(this.manager.getRemainingTime(),0)),i=`${Hs.get("advertisement",this.player.config)} - ${r}`;this.elements.container.setAttribute("data-badge-text",i)},100)}),Dt(this,"onAdsManagerLoaded",n=>{if(!this.enabled)return;const r=new google.ima.AdsRenderingSettings;r.restoreCustomPlaybackStateOnAdBreakComplete=!0,r.enablePreloading=!0,this.manager=n.getAdsManager(this.player,r),this.cuePoints=this.manager.getCuePoints(),this.manager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,i=>this.onAdError(i)),Object.keys(google.ima.AdEvent.Type).forEach(i=>{this.manager.addEventListener(google.ima.AdEvent.Type[i],s=>this.onAdEvent(s))}),this.trigger("loaded")}),Dt(this,"addCuePoints",()=>{ce.empty(this.cuePoints)||this.cuePoints.forEach(n=>{if(n!==0&&n!==-1&&n<this.player.duration){const r=this.player.elements.progress;if(ce.element(r)){const i=100/this.player.duration*n,s=ln("span",{class:this.player.config.classNames.cues});s.style.left=`${i.toString()}%`,r.appendChild(s)}}})}),Dt(this,"onAdEvent",n=>{const{container:r}=this.player.elements,i=n.getAd(),s=n.getAdData();switch((o=>{cn.call(this.player,this.player.media,`ads${o.replace(/_/g,"").toLowerCase()}`)})(n.type),n.type){case google.ima.AdEvent.Type.LOADED:this.trigger("loaded"),this.pollCountdown(!0),i.isLinear()||(i.width=r.offsetWidth,i.height=r.offsetHeight);break;case google.ima.AdEvent.Type.STARTED:this.manager.setVolume(this.player.volume);break;case google.ima.AdEvent.Type.ALL_ADS_COMPLETED:this.player.ended?this.loadAds():this.loader.contentComplete();break;case google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED:this.pauseContent();break;case google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED:this.pollCountdown(),this.resumeContent();break;case google.ima.AdEvent.Type.LOG:s.adError&&this.player.debug.warn(`Non-fatal ad error: ${s.adError.getMessage()}`)}}),Dt(this,"onAdError",n=>{this.cancel(),this.player.debug.warn("Ads error",n)}),Dt(this,"listeners",()=>{const{container:n}=this.player.elements;let r;this.player.on("canplay",()=>{this.addCuePoints()}),this.player.on("ended",()=>{this.loader.contentComplete()}),this.player.on("timeupdate",()=>{r=this.player.currentTime}),this.player.on("seeked",()=>{const i=this.player.currentTime;ce.empty(this.cuePoints)||this.cuePoints.forEach((s,o)=>{r<s&&s<i&&(this.manager.discardAdBreak(),this.cuePoints.splice(o,1))})}),window.addEventListener("resize",()=>{this.manager&&this.manager.resize(n.offsetWidth,n.offsetHeight,google.ima.ViewMode.NORMAL)})}),Dt(this,"play",()=>{const{container:n}=this.player.elements;this.managerPromise||this.resumeContent(),this.managerPromise.then(()=>{this.manager.setVolume(this.player.volume),this.elements.displayContainer.initialize();try{this.initialized||(this.manager.init(n.offsetWidth,n.offsetHeight,google.ima.ViewMode.NORMAL),this.manager.start()),this.initialized=!0}catch(r){this.onAdError(r)}}).catch(()=>{})}),Dt(this,"resumeContent",()=>{this.elements.container.style.zIndex="",this.playing=!1,df(this.player.media.play())}),Dt(this,"pauseContent",()=>{this.elements.container.style.zIndex=3,this.playing=!0,this.player.media.pause()}),Dt(this,"cancel",()=>{this.initialized&&this.resumeContent(),this.trigger("error"),this.loadAds()}),Dt(this,"loadAds",()=>{this.managerPromise.then(()=>{this.manager&&this.manager.destroy(),this.managerPromise=new Promise(n=>{this.on("loaded",n),this.player.debug.log(this.manager)}),this.initialized=!1,this.requestAds()}).catch(()=>{})}),Dt(this,"trigger",(n,...r)=>{const i=this.events[n];ce.array(i)&&i.forEach(s=>{ce.function(s)&&s.apply(this,r)})}),Dt(this,"on",(n,r)=>(ce.array(this.events[n])||(this.events[n]=[]),this.events[n].push(r),this)),Dt(this,"startSafetyTimer",(n,r)=>{this.player.debug.log(`Safety timer invoked from: ${r}`),this.safetyTimer=setTimeout(()=>{this.cancel(),this.clearSafetyTimer("startSafetyTimer()")},n)}),Dt(this,"clearSafetyTimer",n=>{ce.nullOrUndefined(this.safetyTimer)||(this.player.debug.log(`Safety timer cleared from: ${n}`),clearTimeout(this.safetyTimer),this.safetyTimer=null)}),this.player=t,this.config=t.config.ads,this.playing=!1,this.initialized=!1,this.elements={container:null,displayContainer:null},this.manager=null,this.loader=null,this.cuePoints=null,this.events={},this.safetyTimer=null,this.countdownTimer=null,this.managerPromise=new Promise((n,r)=>{this.on("loaded",n),this.on("error",r)}),this.load()}get enabled(){const{config:t}=this;return this.player.isHTML5&&this.player.isVideo&&t.enabled&&(!ce.empty(t.publisherId)||ce.url(t.tagUrl))}get tagUrl(){const{config:t}=this;return ce.url(t.tagUrl)?t.tagUrl:`https://go.aniview.com/api/adserver6/vast/?${S3e({AV_PUBLISHERID:"58c25bb0073ef448b1087ad6",AV_CHANNELID:"5a0458dc28a06145e4519d21",AV_URL:window.location.hostname,cb:Date.now(),AV_WIDTH:640,AV_HEIGHT:480,AV_CDIM2:t.publisherId})}`}}function I3e(e=0,t=0,n=255){return Math.min(Math.max(e,t),n)}const V7t=e=>{const t=[];return e.split(/\r\n\r\n|\n\n|\r\r/).forEach(n=>{const r={};n.split(/\r\n|\n|\r/).forEach(i=>{if(ce.number(r.startTime)){if(!ce.empty(i.trim())&&ce.empty(r.text)){const s=i.trim().split("#xywh=");[r.text]=s,s[1]&&([r.x,r.y,r.w,r.h]=s[1].split(","))}}else{const s=i.match(/([0-9]{2})?:?([0-9]{2}):([0-9]{2}).([0-9]{2,3})( ?--> ?)([0-9]{2})?:?([0-9]{2}):([0-9]{2}).([0-9]{2,3})/);s&&(r.startTime=60*Number(s[1]||0)*60+60*Number(s[2])+Number(s[3])+ +`0.${s[4]}`,r.endTime=60*Number(s[6]||0)*60+60*Number(s[7])+Number(s[8])+ +`0.${s[9]}`)}}),r.text&&t.push(r)}),t},Sfe=(e,t)=>{const n={};return e>t.width/t.height?(n.width=t.width,n.height=1/e*t.width):(n.height=t.height,n.width=e*t.height),n};class Vz{constructor(t){Dt(this,"load",()=>{this.player.elements.display.seekTooltip&&(this.player.elements.display.seekTooltip.hidden=this.enabled),this.enabled&&this.getThumbnails().then(()=>{this.enabled&&(this.render(),this.determineContainerAutoSizing(),this.listeners(),this.loaded=!0)})}),Dt(this,"getThumbnails",()=>new Promise(n=>{const{src:r}=this.player.config.previewThumbnails;if(ce.empty(r))throw new Error("Missing previewThumbnails.src config attribute");const i=()=>{this.thumbnails.sort((s,o)=>s.height-o.height),this.player.debug.log("Preview thumbnails",this.thumbnails),n()};if(ce.function(r))r(s=>{this.thumbnails=s,i()});else{const s=(ce.string(r)?[r]:r).map(o=>this.getThumbnail(o));Promise.all(s).then(i)}})),Dt(this,"getThumbnail",n=>new Promise(r=>{SA(n).then(i=>{const s={frames:V7t(i),height:null,urlPrefix:""};s.frames[0].text.startsWith("/")||s.frames[0].text.startsWith("http://")||s.frames[0].text.startsWith("https://")||(s.urlPrefix=n.substring(0,n.lastIndexOf("/")+1));const o=new Image;o.onload=()=>{s.height=o.naturalHeight,s.width=o.naturalWidth,this.thumbnails.push(s),r()},o.src=s.urlPrefix+s.frames[0].text})})),Dt(this,"startMove",n=>{if(this.loaded&&ce.event(n)&&["touchmove","mousemove"].includes(n.type)&&this.player.media.duration){if(n.type==="touchmove")this.seekTime=this.player.media.duration*(this.player.elements.inputs.seek.value/100);else{var r,i;const s=this.player.elements.progress.getBoundingClientRect(),o=100/s.width*(n.pageX-s.left);this.seekTime=this.player.media.duration*(o/100),this.seekTime<0&&(this.seekTime=0),this.seekTime>this.player.media.duration-1&&(this.seekTime=this.player.media.duration-1),this.mousePosX=n.pageX,this.elements.thumb.time.innerText=u5(this.seekTime);const a=(r=this.player.config.markers)===null||r===void 0||(i=r.points)===null||i===void 0?void 0:i.find(({time:u})=>u===Math.round(this.seekTime));a&&this.elements.thumb.time.insertAdjacentHTML("afterbegin",`${a.label}<br>`)}this.showImageAtCurrentTime()}}),Dt(this,"endMove",()=>{this.toggleThumbContainer(!1,!0)}),Dt(this,"startScrubbing",n=>{(ce.nullOrUndefined(n.button)||n.button===!1||n.button===0)&&(this.mouseDown=!0,this.player.media.duration&&(this.toggleScrubbingContainer(!0),this.toggleThumbContainer(!1,!0),this.showImageAtCurrentTime()))}),Dt(this,"endScrubbing",()=>{this.mouseDown=!1,Math.ceil(this.lastTime)===Math.ceil(this.player.media.currentTime)?this.toggleScrubbingContainer(!1):VQ.call(this.player,this.player.media,"timeupdate",()=>{this.mouseDown||this.toggleScrubbingContainer(!1)})}),Dt(this,"listeners",()=>{this.player.on("play",()=>{this.toggleThumbContainer(!1,!0)}),this.player.on("seeked",()=>{this.toggleThumbContainer(!1)}),this.player.on("timeupdate",()=>{this.lastTime=this.player.media.currentTime})}),Dt(this,"render",()=>{this.elements.thumb.container=ln("div",{class:this.player.config.classNames.previewThumbnails.thumbContainer}),this.elements.thumb.imageContainer=ln("div",{class:this.player.config.classNames.previewThumbnails.imageContainer}),this.elements.thumb.container.appendChild(this.elements.thumb.imageContainer);const n=ln("div",{class:this.player.config.classNames.previewThumbnails.timeContainer});this.elements.thumb.time=ln("span",{},"00:00"),n.appendChild(this.elements.thumb.time),this.elements.thumb.imageContainer.appendChild(n),ce.element(this.player.elements.progress)&&this.player.elements.progress.appendChild(this.elements.thumb.container),this.elements.scrubbing.container=ln("div",{class:this.player.config.classNames.previewThumbnails.scrubbingContainer}),this.player.elements.wrapper.appendChild(this.elements.scrubbing.container)}),Dt(this,"destroy",()=>{this.elements.thumb.container&&this.elements.thumb.container.remove(),this.elements.scrubbing.container&&this.elements.scrubbing.container.remove()}),Dt(this,"showImageAtCurrentTime",()=>{this.mouseDown?this.setScrubbingContainerSize():this.setThumbContainerSizeAndPos();const n=this.thumbnails[0].frames.findIndex(s=>this.seekTime>=s.startTime&&this.seekTime<=s.endTime),r=n>=0;let i=0;this.mouseDown||this.toggleThumbContainer(r),r&&(this.thumbnails.forEach((s,o)=>{this.loadedImages.includes(s.frames[n].text)&&(i=o)}),n!==this.showingThumb&&(this.showingThumb=n,this.loadImage(i)))}),Dt(this,"loadImage",(n=0)=>{const r=this.showingThumb,i=this.thumbnails[n],{urlPrefix:s}=i,o=i.frames[r],a=i.frames[r].text,u=s+a;if(this.currentImageElement&&this.currentImageElement.dataset.filename===a)this.showImage(this.currentImageElement,o,n,r,a,!1),this.currentImageElement.dataset.index=r,this.removeOldImages(this.currentImageElement);else{this.loadingImage&&this.usingSprites&&(this.loadingImage.onload=null);const l=new Image;l.src=u,l.dataset.index=r,l.dataset.filename=a,this.showingThumbFilename=a,this.player.debug.log(`Loading image: ${u}`),l.onload=()=>this.showImage(l,o,n,r,a,!0),this.loadingImage=l,this.removeOldImages(l)}}),Dt(this,"showImage",(n,r,i,s,o,a=!0)=>{this.player.debug.log(`Showing thumb: ${o}. num: ${s}. qual: ${i}. newimg: ${a}`),this.setImageSizeAndOffset(n,r),a&&(this.currentImageContainer.appendChild(n),this.currentImageElement=n,this.loadedImages.includes(o)||this.loadedImages.push(o)),this.preloadNearby(s,!0).then(this.preloadNearby(s,!1)).then(this.getHigherQuality(i,n,r,o))}),Dt(this,"removeOldImages",n=>{Array.from(this.currentImageContainer.children).forEach(r=>{if(r.tagName.toLowerCase()!=="img")return;const i=this.usingSprites?500:1e3;if(r.dataset.index!==n.dataset.index&&!r.dataset.deleting){r.dataset.deleting=!0;const{currentImageContainer:s}=this;setTimeout(()=>{s.removeChild(r),this.player.debug.log(`Removing thumb: ${r.dataset.filename}`)},i)}})}),Dt(this,"preloadNearby",(n,r=!0)=>new Promise(i=>{setTimeout(()=>{const s=this.thumbnails[0].frames[n].text;if(this.showingThumbFilename===s){let o;o=r?this.thumbnails[0].frames.slice(n):this.thumbnails[0].frames.slice(0,n).reverse();let a=!1;o.forEach(u=>{const l=u.text;if(l!==s&&!this.loadedImages.includes(l)){a=!0,this.player.debug.log(`Preloading thumb filename: ${l}`);const{urlPrefix:c}=this.thumbnails[0],d=c+l,f=new Image;f.src=d,f.onload=()=>{this.player.debug.log(`Preloaded thumb filename: ${l}`),this.loadedImages.includes(l)||this.loadedImages.push(l),i()}}}),a||i()}},300)})),Dt(this,"getHigherQuality",(n,r,i,s)=>{if(n<this.thumbnails.length-1){let o=r.naturalHeight;this.usingSprites&&(o=i.h),o<this.thumbContainerHeight&&setTimeout(()=>{this.showingThumbFilename===s&&(this.player.debug.log(`Showing higher quality thumb for: ${s}`),this.loadImage(n+1))},300)}}),Dt(this,"toggleThumbContainer",(n=!1,r=!1)=>{const i=this.player.config.classNames.previewThumbnails.thumbContainerShown;this.elements.thumb.container.classList.toggle(i,n),!n&&r&&(this.showingThumb=null,this.showingThumbFilename=null)}),Dt(this,"toggleScrubbingContainer",(n=!1)=>{const r=this.player.config.classNames.previewThumbnails.scrubbingContainerShown;this.elements.scrubbing.container.classList.toggle(r,n),n||(this.showingThumb=null,this.showingThumbFilename=null)}),Dt(this,"determineContainerAutoSizing",()=>{(this.elements.thumb.imageContainer.clientHeight>20||this.elements.thumb.imageContainer.clientWidth>20)&&(this.sizeSpecifiedInCSS=!0)}),Dt(this,"setThumbContainerSizeAndPos",()=>{const{imageContainer:n}=this.elements.thumb;if(this.sizeSpecifiedInCSS){if(n.clientHeight>20&&n.clientWidth<20){const r=Math.floor(n.clientHeight*this.thumbAspectRatio);n.style.width=`${r}px`}else if(n.clientHeight<20&&n.clientWidth>20){const r=Math.floor(n.clientWidth/this.thumbAspectRatio);n.style.height=`${r}px`}}else{const r=Math.floor(this.thumbContainerHeight*this.thumbAspectRatio);n.style.height=`${this.thumbContainerHeight}px`,n.style.width=`${r}px`}this.setThumbContainerPos()}),Dt(this,"setThumbContainerPos",()=>{const n=this.player.elements.progress.getBoundingClientRect(),r=this.player.elements.container.getBoundingClientRect(),{container:i}=this.elements.thumb,s=r.left-n.left+10,o=r.right-n.left-i.clientWidth-10,a=this.mousePosX-n.left-i.clientWidth/2,u=I3e(a,s,o);i.style.left=`${u}px`,i.style.setProperty("--preview-arrow-offset",a-u+"px")}),Dt(this,"setScrubbingContainerSize",()=>{const{width:n,height:r}=Sfe(this.thumbAspectRatio,{width:this.player.media.clientWidth,height:this.player.media.clientHeight});this.elements.scrubbing.container.style.width=`${n}px`,this.elements.scrubbing.container.style.height=`${r}px`}),Dt(this,"setImageSizeAndOffset",(n,r)=>{if(!this.usingSprites)return;const i=this.thumbContainerHeight/r.h;n.style.height=n.naturalHeight*i+"px",n.style.width=n.naturalWidth*i+"px",n.style.left=`-${r.x*i}px`,n.style.top=`-${r.y*i}px`}),this.player=t,this.thumbnails=[],this.loaded=!1,this.lastMouseMoveTime=Date.now(),this.mouseDown=!1,this.loadedImages=[],this.elements={thumb:{},scrubbing:{}},this.load()}get enabled(){return this.player.isHTML5&&this.player.isVideo&&this.player.config.previewThumbnails.enabled}get currentImageContainer(){return this.mouseDown?this.elements.scrubbing.container:this.elements.thumb.imageContainer}get usingSprites(){return Object.keys(this.thumbnails[0].frames[0]).includes("w")}get thumbAspectRatio(){return this.usingSprites?this.thumbnails[0].frames[0].w/this.thumbnails[0].frames[0].h:this.thumbnails[0].width/this.thumbnails[0].height}get thumbContainerHeight(){if(this.mouseDown){const{height:t}=Sfe(this.thumbAspectRatio,{width:this.player.media.clientWidth,height:this.player.media.clientHeight});return t}return this.sizeSpecifiedInCSS?this.elements.thumb.imageContainer.clientHeight:Math.floor(this.player.media.clientWidth/this.thumbAspectRatio/4)}get currentImageElement(){return this.mouseDown?this.currentScrubbingImageElement:this.currentThumbnailImageElement}set currentImageElement(t){this.mouseDown?this.currentScrubbingImageElement=t:this.currentThumbnailImageElement=t}}const Hz={insertElements(e,t){ce.string(t)?Efe(e,this.media,{src:t}):ce.array(t)&&t.forEach(n=>{Efe(e,this.media,n)})},change(e){g3e(e,"sources.length")?(a0.cancelRequests.call(this),this.destroy.call(this,()=>{this.options.quality=[],op(this.media),this.media=null,ce.element(this.elements.container)&&this.elements.container.removeAttribute("class");const{sources:t,type:n}=e,[{provider:r=Xm.html5,src:i}]=t,s=r==="html5"?n:"div",o=r==="html5"?{}:{src:i};Object.assign(this,{provider:r,type:n,supported:zi.check(n,r,this.config.playsinline),media:ln(s,o)}),this.elements.container.appendChild(this.media),ce.boolean(e.autoplay)&&(this.config.autoplay=e.autoplay),this.isHTML5&&(this.config.crossorigin&&this.media.setAttribute("crossorigin",""),this.config.autoplay&&this.media.setAttribute("autoplay",""),ce.empty(e.poster)||(this.poster=e.poster),this.config.loop.active&&this.media.setAttribute("loop",""),this.config.muted&&this.media.setAttribute("muted",""),this.config.playsinline&&this.media.setAttribute("playsinline","")),Nr.addStyleHook.call(this),this.isHTML5&&Hz.insertElements.call(this,"source",t),this.config.title=e.title,k3e.setup.call(this),this.isHTML5&&Object.keys(e).includes("tracks")&&Hz.insertElements.call(this,"track",e.tracks),(this.isHTML5||this.isEmbed&&!this.supported.ui)&&Nr.build.call(this),this.isHTML5&&this.media.load(),ce.empty(e.previewThumbnails)||(Object.assign(this.config.previewThumbnails,e.previewThumbnails),this.previewThumbnails&&this.previewThumbnails.loaded&&(this.previewThumbnails.destroy(),this.previewThumbnails=null),this.config.previewThumbnails.enabled&&(this.previewThumbnails=new Vz(this))),this.fullscreen.update()},!0)):this.debug.warn("Invalid source format")}};class BC{constructor(t,n){if(Dt(this,"play",()=>ce.function(this.media.play)?(this.ads&&this.ads.enabled&&this.ads.managerPromise.then(()=>this.ads.play()).catch(()=>df(this.media.play())),this.media.play()):null),Dt(this,"pause",()=>this.playing&&ce.function(this.media.pause)?this.media.pause():null),Dt(this,"togglePlay",a=>(ce.boolean(a)?a:!this.playing)?this.play():this.pause()),Dt(this,"stop",()=>{this.isHTML5?(this.pause(),this.restart()):ce.function(this.media.stop)&&this.media.stop()}),Dt(this,"restart",()=>{this.currentTime=0}),Dt(this,"rewind",a=>{this.currentTime-=ce.number(a)?a:this.config.seekTime}),Dt(this,"forward",a=>{this.currentTime+=ce.number(a)?a:this.config.seekTime}),Dt(this,"increaseVolume",a=>{const u=this.media.muted?0:this.volume;this.volume=u+(ce.number(a)?a:0)}),Dt(this,"decreaseVolume",a=>{this.increaseVolume(-a)}),Dt(this,"airplay",()=>{zi.airplay&&this.media.webkitShowPlaybackTargetPicker()}),Dt(this,"toggleControls",a=>{if(this.supported.ui&&!this.isAudio){const u=r4(this.elements.container,this.config.classNames.hideControls),l=a===void 0?void 0:!a,c=_r(this.elements.container,this.config.classNames.hideControls,l);if(c&&ce.array(this.config.controls)&&this.config.controls.includes("settings")&&!ce.empty(this.config.settings)&&At.toggleMenu.call(this,!1),c!==u){const d=c?"controlshidden":"controlsshown";cn.call(this,this.media,d)}return!c}return!1}),Dt(this,"on",(a,u)=>{tr.call(this,this.elements.container,a,u)}),Dt(this,"once",(a,u)=>{VQ.call(this,this.elements.container,a,u)}),Dt(this,"off",(a,u)=>{a5(this.elements.container,a,u)}),Dt(this,"destroy",(a,u=!1)=>{if(!this.ready)return;const l=()=>{document.body.style.overflow="",this.embed=null,u?(Object.keys(this.elements).length&&(op(this.elements.buttons.play),op(this.elements.captions),op(this.elements.controls),op(this.elements.wrapper),this.elements.buttons.play=null,this.elements.captions=null,this.elements.controls=null,this.elements.wrapper=null),ce.function(a)&&a()):(E7t.call(this),a0.cancelRequests.call(this),n4(this.elements.original,this.elements.container),cn.call(this,this.elements.original,"destroyed",!0),ce.function(a)&&a.call(this.elements.original),this.ready=!1,setTimeout(()=>{this.elements=null,this.media=null},200))};this.stop(),clearTimeout(this.timers.loading),clearTimeout(this.timers.controls),clearTimeout(this.timers.resized),this.isHTML5?(Nr.toggleNativeControls.call(this,!0),l()):this.isYouTube?(clearInterval(this.timers.buffering),clearInterval(this.timers.playing),this.embed!==null&&ce.function(this.embed.destroy)&&this.embed.destroy(),l()):this.isVimeo&&(this.embed!==null&&this.embed.unload().then(l),setTimeout(l,200))}),Dt(this,"supports",a=>zi.mime.call(this,a)),this.timers={},this.ready=!1,this.loading=!1,this.failed=!1,this.touch=zi.touch,this.media=t,ce.string(this.media)&&(this.media=document.querySelectorAll(this.media)),(window.jQuery&&this.media instanceof jQuery||ce.nodeList(this.media)||ce.array(this.media))&&(this.media=this.media[0]),this.config=Bi({},A3e,BC.defaults,n||{},(()=>{try{return JSON.parse(this.media.getAttribute("data-plyr-config"))}catch{return{}}})()),this.elements={container:null,fullscreen:null,captions:null,buttons:{},display:{},progress:{},inputs:{},settings:{popup:null,menu:null,panels:{},buttons:{}}},this.captions={active:null,currentTrack:-1,meta:new WeakMap},this.fullscreen={active:!1},this.options={speed:[],quality:[]},this.debug=new O7t(this.config.debug),this.debug.log("Config",this.config),this.debug.log("Support",zi),ce.nullOrUndefined(this.media)||!ce.element(this.media))return void this.debug.error("Setup failed: no suitable element passed");if(this.media.plyr)return void this.debug.warn("Target already setup");if(!this.config.enabled)return void this.debug.error("Setup failed: disabled by config");if(!zi.check().api)return void this.debug.error("Setup failed: no support");const r=this.media.cloneNode(!0);r.autoplay=!1,this.elements.original=r;const i=this.media.tagName.toLowerCase();let s=null,o=null;switch(i){case"div":if(s=this.media.querySelector("iframe"),ce.element(s)){if(o=C3e(s.getAttribute("src")),this.provider=N7t(o.toString()),this.elements.container=this.media,this.media=s,this.elements.container.className="",o.search.length){const a=["1","true"];a.includes(o.searchParams.get("autoplay"))&&(this.config.autoplay=!0),a.includes(o.searchParams.get("loop"))&&(this.config.loop.active=!0),this.isYouTube?(this.config.playsinline=a.includes(o.searchParams.get("playsinline")),this.config.youtube.hl=o.searchParams.get("hl")):this.config.playsinline=!0}}else this.provider=this.media.getAttribute(this.config.attributes.embed.provider),this.media.removeAttribute(this.config.attributes.embed.provider);if(ce.empty(this.provider)||!Object.values(Xm).includes(this.provider))return void this.debug.error("Setup failed: Invalid provider");this.type=c9.video;break;case"video":case"audio":this.type=i,this.provider=Xm.html5,this.media.hasAttribute("crossorigin")&&(this.config.crossorigin=!0),this.media.hasAttribute("autoplay")&&(this.config.autoplay=!0),(this.media.hasAttribute("playsinline")||this.media.hasAttribute("webkit-playsinline"))&&(this.config.playsinline=!0),this.media.hasAttribute("muted")&&(this.config.muted=!0),this.media.hasAttribute("loop")&&(this.config.loop.active=!0);break;default:return void this.debug.error("Setup failed: unsupported type")}this.supported=zi.check(this.type,this.provider),this.supported.api?(this.eventListeners=[],this.listeners=new $7t(this),this.storage=new FC(this),this.media.plyr=this,ce.element(this.elements.container)||(this.elements.container=ln("div"),y3e(this.media,this.elements.container)),Nr.migrateStyles.call(this),Nr.addStyleHook.call(this),k3e.setup.call(this),this.config.debug&&tr.call(this,this.elements.container,this.config.events.join(" "),a=>{this.debug.log(`event: ${a.type}`)}),this.fullscreen=new Mc(this),(this.isHTML5||this.isEmbed&&!this.supported.ui)&&Nr.build.call(this),this.listeners.container(),this.listeners.global(),this.config.ads.enabled&&(this.ads=new U7t(this)),this.isHTML5&&this.config.autoplay&&this.once("canplay",()=>df(this.play())),this.lastSeekTime=0,this.config.previewThumbnails.enabled&&(this.previewThumbnails=new Vz(this))):this.debug.error("Setup failed: no support")}get isHTML5(){return this.provider===Xm.html5}get isEmbed(){return this.isYouTube||this.isVimeo}get isYouTube(){return this.provider===Xm.youtube}get isVimeo(){return this.provider===Xm.vimeo}get isVideo(){return this.type===c9.video}get isAudio(){return this.type===c9.audio}get playing(){return!!(this.ready&&!this.paused&&!this.ended)}get paused(){return!!this.media.paused}get stopped(){return!!(this.paused&&this.currentTime===0)}get ended(){return!!this.media.ended}set currentTime(t){if(!this.duration)return;const n=ce.number(t)&&t>0;this.media.currentTime=n?Math.min(t,this.duration):0,this.debug.log(`Seeking to ${this.currentTime} seconds`)}get currentTime(){return Number(this.media.currentTime)}get buffered(){const{buffered:t}=this.media;return ce.number(t)?t:t&&t.length&&this.duration>0?t.end(0)/this.duration:0}get seeking(){return!!this.media.seeking}get duration(){const t=parseFloat(this.config.duration),n=(this.media||{}).duration,r=ce.number(n)&&n!==1/0?n:0;return t||r}set volume(t){let n=t;ce.string(n)&&(n=Number(n)),ce.number(n)||(n=this.storage.get("volume")),ce.number(n)||({volume:n}=this.config),n>1&&(n=1),n<0&&(n=0),this.config.volume=n,this.media.volume=n,!ce.empty(t)&&this.muted&&n>0&&(this.muted=!1)}get volume(){return Number(this.media.volume)}set muted(t){let n=t;ce.boolean(n)||(n=this.storage.get("muted")),ce.boolean(n)||(n=this.config.muted),this.config.muted=n,this.media.muted=n}get muted(){return!!this.media.muted}get hasAudio(){return!this.isHTML5||!!this.isAudio||!!this.media.mozHasAudio||!!this.media.webkitAudioDecodedByteCount||!!(this.media.audioTracks&&this.media.audioTracks.length)}set speed(t){let n=null;ce.number(t)&&(n=t),ce.number(n)||(n=this.storage.get("speed")),ce.number(n)||(n=this.config.speed.selected);const{minimumSpeed:r,maximumSpeed:i}=this;n=I3e(n,r,i),this.config.speed.selected=n,setTimeout(()=>{this.media&&(this.media.playbackRate=n)},0)}get speed(){return Number(this.media.playbackRate)}get minimumSpeed(){return this.isYouTube?Math.min(...this.options.speed):this.isVimeo?.5:.0625}get maximumSpeed(){return this.isYouTube?Math.max(...this.options.speed):this.isVimeo?2:16}set quality(t){const n=this.config.quality,r=this.options.quality;if(!r.length)return;let i=[!ce.empty(t)&&Number(t),this.storage.get("quality"),n.selected,n.default].find(ce.number),s=!0;if(!r.includes(i)){const o=b3e(r,i);this.debug.warn(`Unsupported quality option: ${i}, using ${o} instead`),i=o,s=!1}n.selected=i,this.media.quality=i,s&&this.storage.set({quality:i})}get quality(){return this.media.quality}set loop(t){const n=ce.boolean(t)?t:this.config.loop.active;this.config.loop.active=n,this.media.loop=n}get loop(){return!!this.media.loop}set source(t){Hz.change.call(this,t)}get source(){return this.media.currentSrc}get download(){const{download:t}=this.config.urls;return ce.url(t)?t:this.source}set download(t){ce.url(t)&&(this.config.urls.download=t,At.setDownloadUrl.call(this))}set poster(t){this.isVideo?Nr.setPoster.call(this,t,!1).catch(()=>{}):this.debug.warn("Poster can only be set for video")}get poster(){return this.isVideo?this.media.getAttribute("poster")||this.media.getAttribute("data-poster"):null}get ratio(){if(!this.isVideo)return null;const t=i4(HQ.call(this));return ce.array(t)?t.join(":"):t}set ratio(t){this.isVideo?ce.string(t)&&x3e(t)?(this.config.ratio=i4(t),ww.call(this)):this.debug.error(`Invalid aspect ratio specified (${t})`):this.debug.warn("Aspect ratio can only be set for video")}set autoplay(t){this.config.autoplay=ce.boolean(t)?t:this.config.autoplay}get autoplay(){return!!this.config.autoplay}toggleCaptions(t){cr.toggle.call(this,t,!1)}set currentTrack(t){cr.set.call(this,t,!1),cr.setup.call(this)}get currentTrack(){const{toggled:t,currentTrack:n}=this.captions;return t?n:-1}set language(t){cr.setLanguage.call(this,t,!1)}get language(){return(cr.getCurrentTrack.call(this)||{}).language}set pip(t){if(!zi.pip)return;const n=ce.boolean(t)?t:!this.pip;ce.function(this.media.webkitSetPresentationMode)&&this.media.webkitSetPresentationMode(n?l9.active:l9.inactive),ce.function(this.media.requestPictureInPicture)&&(!this.pip&&n?this.media.requestPictureInPicture():this.pip&&!n&&document.exitPictureInPicture())}get pip(){return zi.pip?ce.empty(this.media.webkitPresentationMode)?this.media===document.pictureInPictureElement:this.media.webkitPresentationMode===l9.active:null}setPreviewThumbnails(t){this.previewThumbnails&&this.previewThumbnails.loaded&&(this.previewThumbnails.destroy(),this.previewThumbnails=null),Object.assign(this.config.previewThumbnails,t),this.config.previewThumbnails.enabled&&(this.previewThumbnails=new Vz(this))}static supported(t,n){return zi.check(t,n)}static loadSprite(t,n){return _3e(t,n)}static setup(t,n={}){let r=null;return ce.string(t)?r=Array.from(document.querySelectorAll(t)):ce.nodeList(t)?r=Array.from(t):ce.array(t)&&(r=t.filter(ce.element)),ce.empty(r)?null:r.map(i=>new BC(i,n))}}BC.defaults=b7t(A3e);function H7t(e,t,n=[]){const[r,i]=D.useState(null),s=D.useRef(null),{instantiate:o,destroy:a,getAPI:u,params:l}=t;D.useEffect(()=>{const d=o(s.current,l);return i(d),()=>{a&&a(d,l)}},n);const c=D.useMemo(()=>u(r,l),[r]);return D.useImperativeHandle(e,c,[c]),s}const q7t=(e,t)=>{const n=new BC(".plyr-react",t.options||{});return t.source&&(n.source=t.source),n},W7t=e=>{e&&e.destroy()},G7t=()=>{},Y7t=e=>e?()=>({plyr:e}):()=>new Proxy({plyr:{source:null}},{get:(t,n)=>n==="plyr"?t[n]:G7t});function R3e(e,t,n=null){return H7t(e,{instantiate:q7t,getAPI:Y7t,destroy:W7t,params:t},n||[t.options,t.source])}D.forwardRef((e,t)=>{const{source:n,options:r=null,...i}=e,s=R3e(t,{source:n,options:r});return T.jsx("video",{ref:s,className:"plyr-react plyr",...i})});const K7t=D.forwardRef((e,t)=>{const{source:n,options:r=null,endedCallback:i,errorCallback:s}=e,o=R3e(t,{options:r,source:n});return D.useEffect(()=>{const{current:a}=t;a.plyr.source!==null&&(a.plyr.on("ended",i),a.plyr.on("error",s))}),T.jsx("video",{ref:o,className:"plyr-react plyr"})});function X7t({currentConfig:e}){const t=D.useMemo(()=>e.path.startsWith("http")?e.path:`${rs}${e.path}`,[e.path]),[n,r]=D.useState(!0),[i,s]=D.useState(!1);D.useEffect(()=>{async function m(){if(t.startsWith("http"))s(!0);else{const y=await m6(t);s(!!y)}r(!1)}m()},[t]);const o=D.useMemo(()=>t.includes("youtube")?[{src:t,provider:"youtube"}]:t.includes("vimeo")?[{src:t,provider:"vimeo"}]:[{src:t,type:"video/mp4"}],[t]),a=D.useMemo(()=>({controls:[e.forceCompletion!==!1?"play-large":"play","current-time",...e.withTimeline?["progress"]:[],"volume","fullscreen"]}),[e.forceCompletion,e.withTimeline]),u=ih(),l=Sl(),c=Bo(),{updateResponseBlockValidation:d}=ro();D.useEffect(()=>{e.forceCompletion&&c(d({location:"stimulus",identifier:`${u}_${l}`,status:!1,values:{}}))},[u,e.forceCompletion,l,c,d]);const f=D.useCallback(()=>{e.forceCompletion&&c(d({location:"stimulus",identifier:`${u}_${l}`,status:!0,values:{}}))},[u,e.forceCompletion,l,c,d]),h=D.useCallback(()=>{s(!1)},[]),p=D.useRef(null);return n||i?T.jsx(Se,{mb:"md",children:T.jsx(K7t,{ref:p,source:{type:"video",sources:o},options:a,endedCallback:f,errorCallback:h})}):T.jsx(Op,{path:e.path})}function Q7t(){const e=Hf(),t=Sl(),n=ih(),r=e.components[n],{storageEngine:i}=Mi(),s=ir(O=>O.answers),o=D.useRef(null),[a,u]=D.useState(null),{setIsRecording:l}=ro(),c=ir(O=>O.analysisProvState.stimulus),d=cE(),f=YW(),h=ir(O=>O.sequence),[p]=Zf(),m=ir(O=>O.participantId),y=D.useMemo(()=>p.get("participantId"),[p]);RTe();const v=Bo(),{setAlertModal:b}=ro();D.useEffect(()=>{(i==null?void 0:i.getEngine())!=="firebase"&&v(b({show:!0,message:"There was an issue connecting to the firebase database. This could be caused by a network issue or your adblocker. If you are using an adblocker, please disable it for this website and refresh."}))},[b,i,v]),D.useEffect(()=>{!e||!e.uiConfig.recordStudyAudio||!i||i.getEngine()!=="firebase"||f&&f.endTime>0||d||(o.current&&a&&i.saveAudio(o.current,a),o.current&&(o.current.stream.getTracks().forEach(O=>{var F;O.stop(),(F=o.current)==null||F.stream.removeTrack(O)}),o.current.stream.getAudioTracks().forEach(O=>{var F;O.stop(),(F=o.current)==null||F.stream.removeTrack(O)}),o.current.stop(),o.current=null),r&&r.recordAudio!==void 0&&!r.recordAudio||n==="end"?(u(null),v(l(!1))):navigator.mediaDevices.getUserMedia({audio:!0}).then(O=>{const F=new MediaRecorder(O);o.current=F,o.current.start(),v(l(!0)),u(`${n}_${t}`)}))},[n,t]);const[w,E]=D.useState([]),_=D.useRef([]);D.useEffect(()=>{async function O(){var z;const $=((z=HW(h,t))==null?void 0:z.map(q=>q.currentBlock.id).filter(q=>q!==void 0))||[];E($)}async function F(){const $=_.current;JSON.stringify($)!==JSON.stringify(w)&&w.length>0&&i&&await i.addParticipantTags(w),_.current=w}O().then(F)},[t,i,h]);const C=sb(),S=D.useMemo(()=>{var F,$;const O=n&&n!=="end"&&!n.startsWith("__")&&kf(r,e);if(typeof O=="object"){const z=(F=s[C])==null?void 0:F.parameters,q=($=s[C])==null?void 0:$.correctAnswer;return{...O,parameters:z||O.parameters||void 0,correctAnswer:q||O.correctAnswer||void 0}}return O},[s,n,C,r,e]);if(n==="end")return T.jsx(Obt,{});if(n==="__dynamicLoading")return null;if(n==="__trainingFailed")return T.jsx($bt,{});if(n==="__timedOut")return T.jsx(Mbt,{});if(n==="Notfound")return T.jsx(Op,{email:e.uiConfig.contactEmail});if(y&&m!==y)return T.jsx(Ep,{style:{height:"80vh"},children:T.jsx(bd,{})});const k=S.instruction||"",{instructionLocation:R}=S,N=e.uiConfig.sidebar&&(R==="sidebar"||R===void 0);return T.jsxs(T.Fragment,{children:[R==="aboveStimulus"&&T.jsx($o,{text:k}),T.jsx(aN,{status:f,config:S,location:"aboveStimulus"},`${t}-above-response-block`),T.jsxs(D.Suspense,{fallback:T.jsx("div",{children:"Loading..."}),children:[S.type==="markdown"&&T.jsx(_bt,{currentConfig:S}),S.type==="website"&&T.jsx(ybt,{currentConfig:S,provState:c,answers:s}),S.type==="image"&&T.jsx(xbt,{currentConfig:S}),S.type==="react-component"&&T.jsx(Ebt,{currentConfig:S,provState:c,answers:s}),S.type==="vega"&&T.jsx(Fjt,{currentConfig:S,provState:c}),S.type==="video"&&T.jsx(X7t,{currentConfig:S})]},`${t}-stimulus`),(R==="belowStimulus"||R===void 0&&!N)&&T.jsx($o,{text:k}),T.jsx(aN,{status:f,config:S,location:"belowStimulus"},`${t}-below-response-block`)]})}function D3e(e){const[t]=Zf();return T.jsx(ZV,{...e,to:{pathname:e.to,search:t.toString()}})}var f9,Afe;function J7t(){if(Afe)return f9;Afe=1;var e="Expected a function",t=NaN,n="[object Symbol]",r=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,o=/^0o[0-7]+$/i,a=parseInt,u=typeof ws=="object"&&ws&&ws.Object===Object&&ws,l=typeof self=="object"&&self&&self.Object===Object&&self,c=u||l||Function("return this")(),d=Object.prototype,f=d.toString,h=Math.max,p=Math.min,m=function(){return c.Date.now()};function y(_,C,S){var k,R,N,O,F,$,z=0,q=!1,W=!1,J=!0;if(typeof _!="function")throw new TypeError(e);C=E(C)||0,v(S)&&(q=!!S.leading,W="maxWait"in S,N=W?h(E(S.maxWait)||0,C):N,J="trailing"in S?!!S.trailing:J);function K(pe){var de=k,xe=R;return k=R=void 0,z=pe,O=_.apply(xe,de),O}function Z(pe){return z=pe,F=setTimeout(Y,C),q?K(pe):O}function U(pe){var de=pe-$,xe=pe-z,Ce=C-de;return W?p(Ce,N-xe):Ce}function L(pe){var de=pe-$,xe=pe-z;return $===void 0||de>=C||de<0||W&&xe>=N}function Y(){var pe=m();if(L(pe))return j(pe);F=setTimeout(Y,U(pe))}function j(pe){return F=void 0,J&&k?K(pe):(k=R=void 0,O)}function G(){F!==void 0&&clearTimeout(F),z=0,k=$=R=F=void 0}function X(){return F===void 0?O:j(m())}function ne(){var pe=m(),de=L(pe);if(k=arguments,R=this,$=pe,de){if(F===void 0)return Z($);if(W)return F=setTimeout(Y,C),K($)}return F===void 0&&(F=setTimeout(Y,C)),O}return ne.cancel=G,ne.flush=X,ne}function v(_){var C=typeof _;return!!_&&(C=="object"||C=="function")}function b(_){return!!_&&typeof _=="object"}function w(_){return typeof _=="symbol"||b(_)&&f.call(_)==n}function E(_){if(typeof _=="number")return _;if(w(_))return t;if(v(_)){var C=typeof _.valueOf=="function"?_.valueOf():_;_=v(C)?C+"":C}if(typeof _!="string")return _===0?_:+_;_=_.replace(r,"");var S=s.test(_);return S||o.test(_)?a(_.slice(2),S?2:8):i.test(_)?t:+_}return f9=y,f9}var Z7t=J7t();const Gd=Tl(Z7t);function P3e(e,t,n,r){let i=0;for(let s=0;s<e.components.length;s+=1){const o=e.components[s];if(typeof o=="string"){if(r===e.orderPath&&o===t&&s>=n)break;i+=1}else if(o.order==="dynamic"?i+=1:i+=P3e(o,t,n,r),r.includes(o.orderPath))break}return i}function N3e(e,t){let n=0;return t.components.forEach(r=>{var i;if(typeof r=="string"&&((i=e.interruptions)!=null&&i.flatMap(s=>s.components).includes(r)))n+=1;else if(typeof r!="string"){const s=e.components.find(o=>typeof o!="string"&&o.orderPath===r.orderPath);n+=N3e(s,r)}}),n}function ezt(e,t){const n=[];return t.forEach(r=>{const i=e.findIndex(s=>typeof s=="string"?s===r:typeof r!="string"&&s.orderPath===r.orderPath);i!==-1&&(n.push(e[i]),e.splice(i,1)),i===-1&&typeof r=="string"&&n.push(r)}),e&&n.push(...e),n}function tzt({step:e,disabled:t,fullSequence:n,startIndex:r,interruption:i,participantView:s,studyConfig:o,subSequence:a,analysisNavigation:u,parentBlock:l,parentActive:c,answers:d}){const f=Kp(),h=Cl(),p=Sl(),m=o.components[e]&&kf(o.components[e],o),y=a&&a.components.slice(r).includes(e)?P3e(n,e,r,a.orderPath):-1,{trialId:v,funcIndex:b,analysisTab:w}=Va(),[E]=Zf(),_=D.useMemo(()=>E.get("participantId"),[E]),C=w?[]:nb(),S=v===e,k=c&&l&&b?r===f1(b):!1,R=s?p===y||k:p===`reviewer-${e}`,N=u?S:R,O=v?`./../${e}`:`./${e}`,F=l.order==="dynamic"?`/${f}/${vs(C.indexOf(l.id))}/${vs(r)}`:"",$=s?l.order==="dynamic"?F:`/${f}/${vs(y)}`:`/${f}/reviewer-${e}`,z=u?()=>h(O):()=>h(`${$}${_?`?participantId=${_}`:""}`),q=e.includes(".co.")?".co.":e.includes(".components.")?".components.":!1,W=e.includes("$")&&q&&e.includes(q)?e.split(q).at(-1):e,J=l.order==="dynamic"?Object.entries(d).find(([L,Y])=>L===`${l.id}_${C.indexOf(l.id)}_${W}_${r}`):Object.entries(d).find(([L,Y])=>L===`${W}_${r}`),K=J?J[1]:null,Z=K&&K.correctAnswer.length>0&&Object.keys(K.answer).length>0&&K.correctAnswer,U=Z&&K&&Object.values(Z).every(L=>K.answer[L.id]===L.answer);return T.jsxs(My,{withinPortal:!0,position:"left",withArrow:!0,arrowSize:10,shadow:"md",offset:0,children:[T.jsx(My.Target,{children:T.jsx(U4,{active:N,style:{lineHeight:"32px",height:"32px"},label:T.jsxs(Se,{children:[i&&T.jsx(q7e,{size:16,style:{marginRight:4,marginBottom:-2},color:"orange"}),e!==W&&T.jsx(sze,{size:16,style:{marginRight:4,marginBottom:-2},color:"blue"}),K&&Z?U?T.jsx(tS,{size:16,style:{marginRight:4,marginBottom:-2},color:"green"}):T.jsx(Uw,{size:16,style:{marginRight:4,marginBottom:-2},color:"red"}):null,T.jsx(Je,{size:"sm",span:N,fw:N?"700":void 0,display:"inline",style:{textWrap:"nowrap"},children:W})]}),onClick:z,disabled:t&&l.order!=="dynamic"})}),m&&T.jsx(My.Dropdown,{children:T.jsxs(Se,{mah:700,style:{overflow:"auto"},children:[T.jsxs(Se,{children:[T.jsx(Je,{fw:900,display:"inline-block",mr:2,children:"Name:"})," ",T.jsx(Je,{fw:400,component:"span",children:W})]}),m.description&&T.jsxs(Se,{children:[T.jsx(Je,{fw:900,display:"inline-block",mr:2,children:"Description:"})," ",T.jsx(Je,{fw:400,component:"span",children:m.description})]}),("parameters"in m||K)&&T.jsxs(Se,{children:[T.jsx(Je,{fw:900,display:"inline-block",mr:2,children:"Parameters:"})," ",T.jsx(Kh,{block:!0,children:K&&JSON.stringify(Object.keys(K).length>0?K.parameters:"parameters"in m?m.parameters:{},null,2)})]}),T.jsxs(Se,{children:[T.jsx(Je,{fw:900,display:"inline-block",mr:2,children:"Response:"})," ",T.jsx(Kh,{block:!0,children:JSON.stringify(m.response,null,2)})]}),m.correctAnswer&&T.jsxs(Se,{children:[T.jsx(Je,{fw:900,display:"inline-block",mr:2,children:"Correct Answer:"})," ",T.jsx(Kh,{block:!0,children:JSON.stringify(m.correctAnswer,null,2)})]}),m.meta&&T.jsxs(Se,{children:[T.jsx(Je,{fw:"900",component:"span",children:"Task Meta: "}),T.jsx(Kh,{block:!0,children:JSON.stringify(m.meta,null,2)})]})]})})]})}function s4({configSequence:e,fullSequence:t,participantSequence:n,participantView:r,studyConfig:i,analysisNavigation:s}){var S;let o=structuredClone(e.components);n&&r&&(o=ezt(structuredClone(e.components),structuredClone(n.components)));const{analysisTab:a}=Va();let u={};a||(u=ir(k=>k.answers)),r||(o=[...((S=e.interruptions)==null?void 0:S.flatMap(k=>k.components))||[],...o||[]]);const l=D.useMemo(()=>n?Vf(n).length-N3e(e,n):0,[e,n]),c=D.useMemo(()=>Vf(e),[e]),[d,f]=D.useState(l>0),[h]=Zf(),p=D.useMemo(()=>h.get("participantId"),[h]),m=Sl(),y=a?[]:nb(),v=typeof m=="number"&&e.order==="dynamic"&&y[m]===e.id,b=e.id&&y.indexOf(e.id)||-1,w=Kp(),E=Cl(),_=()=>E(`/${w}/${vs(b)}/${vs(0)}${p?`?participantId=${p}`:""}`),C=[...o,...Object.entries(u).filter(([k,R])=>k.startsWith(`${e.id}_${b}_`)).map(([k,R])=>R.componentName)];return T.jsx(U4,{active:v,label:T.jsxs(Se,{style:{opacity:l>0?1:.5},children:[T.jsx(Je,{size:"sm",display:"inline",fw:v?900:700,children:e.id?e.id:e.order}),e.order==="random"||e.order==="latinSquare"?T.jsx(jr,{label:e.order,position:"right",withArrow:!0,children:T.jsx(V7e,{size:"15",opacity:.5,style:{marginLeft:"5px",verticalAlign:"middle"}})}):null,r&&T.jsx(td,{ml:5,variant:"light",children:e.order==="dynamic"?`${Object.keys(u).filter(k=>k.startsWith(`${e.id}_`)).length} / ?`:`${l}/${c.length}`}),r&&e.interruptions&&T.jsx(td,{ml:5,color:"orange",variant:"light",children:(n==null?void 0:n.components.filter(k=>{var R;return typeof k=="string"&&((R=e.interruptions)==null?void 0:R.flatMap(N=>N.components).includes(k))}).length)||0})]}),opened:d,onClick:()=>e.order==="dynamic"&&!s&&r?_():f(!d),childrenOffset:32,style:{lineHeight:"32px",height:"32px"},children:d?T.jsx(Se,{style:{borderLeft:"1px solid #e9ecef"},children:C.map((k,R)=>{if(typeof k=="string")return T.jsx(tzt,{step:k,disabled:r&&(n==null?void 0:n.components[R])!==k,fullSequence:t,startIndex:R,interruption:e.interruptions&&e.interruptions.findIndex(O=>O.components.includes(k))>-1||!1,participantView:r,studyConfig:i,subSequence:n,analysisNavigation:s,parentBlock:e,parentActive:v,answers:u},R);const N=n==null?void 0:n.components.find(O=>typeof O!="string"&&O.orderPath===k.orderPath);return T.jsx(s4,{configSequence:k,participantSequence:N,fullSequence:t,participantView:r,studyConfig:i,analysisNavigation:s},R)})}):null},e.id)}function O3e(e,t,n,r){e==null||e.nextParticipant().then(()=>{window.location.href=r}).catch(i=>{console.error(i)})}function kfe({text:e}){return T.jsx(jr,{label:e,multiline:!0,w:200,style:{whiteSpace:"normal"},withinPortal:!0,position:"bottom",children:T.jsx(iH,{size:16,style:{marginBottom:-3,marginLeft:4}})})}function nzt(){const e=ir(h=>h.sequence),t=ir(h=>h.metadata),{toggleStudyBrowser:n}=ro(),r=Hf(),i=Bo(),s=Kp(),o=XV(`/${s}`),{storageEngine:a}=Mi(),u=cE(),l=D.useMemo(()=>{let h=structuredClone(r.sequence);return h=qW(h,"root"),h.components.push("end"),h},[r.sequence]),[c,d]=D.useState("participant"),f=D.useMemo(()=>c==="allTrials"||u,[c,u]);return T.jsxs(Or.Aside,{p:"0",children:[T.jsx(Or.Section,{p:"md",children:T.jsxs(Ft,{direction:"row",justify:"space-between",children:[T.jsx(Je,{size:"md",fw:700,pt:3,children:"Study Browser"}),T.jsx(jr,{label:"Go to the sequence of the next participant in the experiment. Sequences can be different between participants due to randomization, etc.",w:280,multiline:!0,disabled:f,children:T.jsx(tn,{variant:"light",leftSection:T.jsx(sH,{size:14}),onClick:()=>O3e(a,r,t,o),size:"xs",disabled:f,children:"Next Participant"})}),T.jsx(tg,{onClick:()=>i(n()),mt:1})]})}),T.jsx(Or.Section,{grow:!0,component:xp,p:"md",children:T.jsxs(Un,{value:c,onChange:d,children:[T.jsx(Se,{style:{position:"sticky",top:0,backgroundColor:"white",zIndex:1},children:T.jsxs(Un.List,{grow:!0,children:[T.jsxs(Un.Tab,{value:"participant",children:["Participant View",T.jsx(kfe,{text:"The Participants View shows items just as a participants would see them, considering randomization, omissions, etc. You can navigate between multiple participants using the next participant button."})]}),T.jsxs(Un.Tab,{value:"allTrials",disabled:u,children:["All Trials View",T.jsx(kfe,{text:"The All Trials View shows all items in the order defined in the config."})]})]})}),T.jsx(Un.Panel,{value:"participant",children:T.jsx(s4,{configSequence:l,participantSequence:e,fullSequence:e,participantView:!0,studyConfig:r})}),T.jsx(Un.Panel,{value:"allTrials",children:T.jsx(s4,{configSequence:l,participantSequence:e,fullSequence:e,participantView:!1,studyConfig:r})})]})})]})}const rzt=D.createContext(null);function oa(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(l){try{u(r.next(l))}catch(c){s(c)}}function a(l){try{u(r.throw(l))}catch(c){s(c)}}function u(l){var c;l.done?i(l.value):(c=l.value,c instanceof n?c:new n(function(d){d(c)})).then(o,a)}u((r=r.apply(e,t||[])).next())})}let AA=class{constructor(){this.listeners={}}on(t,n,r){if(this.listeners[t]||(this.listeners[t]=new Set),this.listeners[t].add(n),r==null?void 0:r.once){const i=()=>{this.un(t,i),this.un(t,n)};return this.on(t,i),i}return()=>this.un(t,n)}un(t,n){var r;(r=this.listeners[t])===null||r===void 0||r.delete(n)}once(t,n){return this.on(t,n,{once:!0})}unAll(){this.listeners={}}emit(t,...n){this.listeners[t]&&this.listeners[t].forEach(r=>r(...n))}};const KI={decode:function(e,t){return oa(this,void 0,void 0,function*(){const n=new AudioContext({sampleRate:t});return n.decodeAudioData(e).finally(()=>n.close())})},createBuffer:function(e,t){return typeof e[0]=="number"&&(e=[e]),function(n){const r=n[0];if(r.some(i=>i>1||i<-1)){const i=r.length;let s=0;for(let o=0;o<i;o++){const a=Math.abs(r[o]);a>s&&(s=a)}for(const o of n)for(let a=0;a<i;a++)o[a]/=s}}(e),{duration:t,length:e[0].length,sampleRate:e[0].length/t,numberOfChannels:e.length,getChannelData:n=>e==null?void 0:e[n],copyFromChannel:AudioBuffer.prototype.copyFromChannel,copyToChannel:AudioBuffer.prototype.copyToChannel}}};function $3e(e,t){const n=t.xmlns?document.createElementNS(t.xmlns,e):document.createElement(e);for(const[r,i]of Object.entries(t))if(r==="children")for(const[s,o]of Object.entries(t))typeof o=="string"?n.appendChild(document.createTextNode(o)):n.appendChild($3e(s,o));else r==="style"?Object.assign(n.style,i):r==="textContent"?n.textContent=i:n.setAttribute(r,i.toString());return n}function Ife(e,t,n){const r=$3e(e,t||{});return n==null||n.appendChild(r),r}var izt=Object.freeze({__proto__:null,createElement:Ife,default:Ife});const szt={fetchBlob:function(e,t,n){return oa(this,void 0,void 0,function*(){const r=yield fetch(e,n);if(r.status>=400)throw new Error(`Failed to fetch ${e}: ${r.status} (${r.statusText})`);return function(i,s){oa(this,void 0,void 0,function*(){if(!i.body||!i.headers)return;const o=i.body.getReader(),a=Number(i.headers.get("Content-Length"))||0;let u=0;const l=d=>oa(this,void 0,void 0,function*(){u+=(d==null?void 0:d.length)||0;const f=Math.round(u/a*100);s(f)}),c=()=>oa(this,void 0,void 0,function*(){let d;try{d=yield o.read()}catch{return}d.done||(l(d.value),yield c())});c()})}(r.clone(),t),r.blob()})}};class ozt extends AA{constructor(t){super(),this.isExternalMedia=!1,t.media?(this.media=t.media,this.isExternalMedia=!0):this.media=document.createElement("audio"),t.mediaControls&&(this.media.controls=!0),t.autoplay&&(this.media.autoplay=!0),t.playbackRate!=null&&this.onMediaEvent("canplay",()=>{t.playbackRate!=null&&(this.media.playbackRate=t.playbackRate)},{once:!0})}onMediaEvent(t,n,r){return this.media.addEventListener(t,n,r),()=>this.media.removeEventListener(t,n,r)}getSrc(){return this.media.currentSrc||this.media.src||""}revokeSrc(){const t=this.getSrc();t.startsWith("blob:")&&URL.revokeObjectURL(t)}canPlayType(t){return this.media.canPlayType(t)!==""}setSrc(t,n){const r=this.getSrc();if(t&&r===t)return;this.revokeSrc();const i=n instanceof Blob&&(this.canPlayType(n.type)||!t)?URL.createObjectURL(n):t;try{this.media.src=i}catch{this.media.src=t}}destroy(){this.media.pause(),this.isExternalMedia||(this.media.remove(),this.revokeSrc(),this.media.src="",this.media.load())}setMediaElement(t){this.media=t}play(){return oa(this,void 0,void 0,function*(){return this.media.play()})}pause(){this.media.pause()}isPlaying(){return!this.media.paused&&!this.media.ended}setTime(t){this.media.currentTime=t}getDuration(){return this.media.duration}getCurrentTime(){return this.media.currentTime}getVolume(){return this.media.volume}setVolume(t){this.media.volume=t}getMuted(){return this.media.muted}setMuted(t){this.media.muted=t}getPlaybackRate(){return this.media.playbackRate}isSeeking(){return this.media.seeking}setPlaybackRate(t,n){n!=null&&(this.media.preservesPitch=n),this.media.playbackRate=t}getMediaElement(){return this.media}setSinkId(t){return this.media.setSinkId(t)}}class Ew extends AA{constructor(t,n){super(),this.timeouts=[],this.isScrollable=!1,this.audioData=null,this.resizeObserver=null,this.lastContainerWidth=0,this.isDragging=!1,this.subscriptions=[],this.unsubscribeOnScroll=[],this.subscriptions=[],this.options=t;const r=this.parentFromOptionsContainer(t.container);this.parent=r;const[i,s]=this.initHtml();r.appendChild(i),this.container=i,this.scrollContainer=s.querySelector(".scroll"),this.wrapper=s.querySelector(".wrapper"),this.canvasWrapper=s.querySelector(".canvases"),this.progressWrapper=s.querySelector(".progress"),this.cursor=s.querySelector(".cursor"),n&&s.appendChild(n),this.initEvents()}parentFromOptionsContainer(t){let n;if(typeof t=="string"?n=document.querySelector(t):t instanceof HTMLElement&&(n=t),!n)throw new Error("Container not found");return n}initEvents(){const t=n=>{const r=this.wrapper.getBoundingClientRect(),i=n.clientX-r.left,s=n.clientY-r.top;return[i/r.width,s/r.height]};if(this.wrapper.addEventListener("click",n=>{const[r,i]=t(n);this.emit("click",r,i)}),this.wrapper.addEventListener("dblclick",n=>{const[r,i]=t(n);this.emit("dblclick",r,i)}),this.options.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.scrollContainer.addEventListener("scroll",()=>{const{scrollLeft:n,scrollWidth:r,clientWidth:i}=this.scrollContainer,s=n/r,o=(n+i)/r;this.emit("scroll",s,o,n,n+i)}),typeof ResizeObserver=="function"){const n=this.createDelay(100);this.resizeObserver=new ResizeObserver(()=>{n().then(()=>this.onContainerResize()).catch(()=>{})}),this.resizeObserver.observe(this.scrollContainer)}}onContainerResize(){const t=this.parent.clientWidth;t===this.lastContainerWidth&&this.options.height!=="auto"||(this.lastContainerWidth=t,this.reRender())}initDrag(){this.subscriptions.push(function(t,n,r,i,s=3,o=0,a=100){if(!t)return()=>{};const u=matchMedia("(pointer: coarse)").matches;let l=()=>{};const c=d=>{if(d.button!==o)return;d.preventDefault(),d.stopPropagation();let f=d.clientX,h=d.clientY,p=!1;const m=Date.now(),y=_=>{if(_.preventDefault(),_.stopPropagation(),u&&Date.now()-m<a)return;const C=_.clientX,S=_.clientY,k=C-f,R=S-h;if(p||Math.abs(k)>s||Math.abs(R)>s){const N=t.getBoundingClientRect(),{left:O,top:F}=N;p||(r==null||r(f-O,h-F),p=!0),n(k,R,C-O,S-F),f=C,h=S}},v=_=>{if(p){const C=_.clientX,S=_.clientY,k=t.getBoundingClientRect(),{left:R,top:N}=k;i==null||i(C-R,S-N)}l()},b=_=>{_.relatedTarget&&_.relatedTarget!==document.documentElement||v(_)},w=_=>{p&&(_.stopPropagation(),_.preventDefault())},E=_=>{p&&_.preventDefault()};document.addEventListener("pointermove",y),document.addEventListener("pointerup",v),document.addEventListener("pointerout",b),document.addEventListener("pointercancel",b),document.addEventListener("touchmove",E,{passive:!1}),document.addEventListener("click",w,{capture:!0}),l=()=>{document.removeEventListener("pointermove",y),document.removeEventListener("pointerup",v),document.removeEventListener("pointerout",b),document.removeEventListener("pointercancel",b),document.removeEventListener("touchmove",E),setTimeout(()=>{document.removeEventListener("click",w,{capture:!0})},10)}};return t.addEventListener("pointerdown",c),()=>{l(),t.removeEventListener("pointerdown",c)}}(this.wrapper,(t,n,r)=>{this.emit("drag",Math.max(0,Math.min(1,r/this.wrapper.getBoundingClientRect().width)))},t=>{this.isDragging=!0,this.emit("dragstart",Math.max(0,Math.min(1,t/this.wrapper.getBoundingClientRect().width)))},t=>{this.isDragging=!1,this.emit("dragend",Math.max(0,Math.min(1,t/this.wrapper.getBoundingClientRect().width)))}))}getHeight(t,n){var r;const i=((r=this.audioData)===null||r===void 0?void 0:r.numberOfChannels)||1;if(t==null)return 128;if(!isNaN(Number(t)))return Number(t);if(t==="auto"){const s=this.parent.clientHeight||128;return n!=null&&n.every(o=>!o.overlay)?s/i:s}return 128}initHtml(){const t=document.createElement("div"),n=t.attachShadow({mode:"open"}),r=this.options.cspNonce&&typeof this.options.cspNonce=="string"?this.options.cspNonce.replace(/"/g,""):"";return n.innerHTML=`
      <style${r?` nonce="${r}"`:""}>
        :host {
          user-select: none;
          min-width: 1px;
        }
        :host audio {
          display: block;
          width: 100%;
        }
        :host .scroll {
          overflow-x: auto;
          overflow-y: hidden;
          width: 100%;
          position: relative;
        }
        :host .noScrollbar {
          scrollbar-color: transparent;
          scrollbar-width: none;
        }
        :host .noScrollbar::-webkit-scrollbar {
          display: none;
          -webkit-appearance: none;
        }
        :host .wrapper {
          position: relative;
          overflow: visible;
          z-index: 2;
        }
        :host .canvases {
          min-height: ${this.getHeight(this.options.height,this.options.splitChannels)}px;
        }
        :host .canvases > div {
          position: relative;
        }
        :host canvas {
          display: block;
          position: absolute;
          top: 0;
          image-rendering: pixelated;
        }
        :host .progress {
          pointer-events: none;
          position: absolute;
          z-index: 2;
          top: 0;
          left: 0;
          width: 0;
          height: 100%;
          overflow: hidden;
        }
        :host .progress > div {
          position: relative;
        }
        :host .cursor {
          pointer-events: none;
          position: absolute;
          z-index: 5;
          top: 0;
          left: 0;
          height: 100%;
          border-radius: 2px;
        }
      </style>

      <div class="scroll" part="scroll">
        <div class="wrapper" part="wrapper">
          <div class="canvases" part="canvases"></div>
          <div class="progress" part="progress"></div>
          <div class="cursor" part="cursor"></div>
        </div>
      </div>
    `,[t,n]}setOptions(t){if(this.options.container!==t.container){const n=this.parentFromOptionsContainer(t.container);n.appendChild(this.container),this.parent=n}t.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.options=t,this.reRender()}getWrapper(){return this.wrapper}getWidth(){return this.scrollContainer.clientWidth}getScroll(){return this.scrollContainer.scrollLeft}setScroll(t){this.scrollContainer.scrollLeft=t}setScrollPercentage(t){const{scrollWidth:n}=this.scrollContainer,r=n*t;this.setScroll(r)}destroy(){var t,n;this.subscriptions.forEach(r=>r()),this.container.remove(),(t=this.resizeObserver)===null||t===void 0||t.disconnect(),(n=this.unsubscribeOnScroll)===null||n===void 0||n.forEach(r=>r()),this.unsubscribeOnScroll=[]}createDelay(t=10){let n,r;const i=()=>{n&&clearTimeout(n),r&&r()};return this.timeouts.push(i),()=>new Promise((s,o)=>{i(),r=o,n=setTimeout(()=>{n=void 0,r=void 0,s()},t)})}convertColorValues(t){if(!Array.isArray(t))return t||"";if(t.length<2)return t[0]||"";const n=document.createElement("canvas"),r=n.getContext("2d"),i=n.height*(window.devicePixelRatio||1),s=r.createLinearGradient(0,0,0,i),o=1/(t.length-1);return t.forEach((a,u)=>{const l=u*o;s.addColorStop(l,a)}),s}getPixelRatio(){return Math.max(1,window.devicePixelRatio||1)}renderBarWaveform(t,n,r,i){const s=t[0],o=t[1]||t[0],a=s.length,{width:u,height:l}=r.canvas,c=l/2,d=this.getPixelRatio(),f=n.barWidth?n.barWidth*d:1,h=n.barGap?n.barGap*d:n.barWidth?f/2:0,p=n.barRadius||0,m=u/(f+h)/a,y=p&&"roundRect"in r?"roundRect":"rect";r.beginPath();let v=0,b=0,w=0;for(let E=0;E<=a;E++){const _=Math.round(E*m);if(_>v){const k=Math.round(b*c*i),R=k+Math.round(w*c*i)||1;let N=c-k;n.barAlign==="top"?N=0:n.barAlign==="bottom"&&(N=l-R),r[y](v*(f+h),N,f,R,p),v=_,b=0,w=0}const C=Math.abs(s[E]||0),S=Math.abs(o[E]||0);C>b&&(b=C),S>w&&(w=S)}r.fill(),r.closePath()}renderLineWaveform(t,n,r,i){const s=o=>{const a=t[o]||t[0],u=a.length,{height:l}=r.canvas,c=l/2,d=r.canvas.width/u;r.moveTo(0,c);let f=0,h=0;for(let p=0;p<=u;p++){const m=Math.round(p*d);if(m>f){const v=c+(Math.round(h*c*i)||1)*(o===0?-1:1);r.lineTo(f,v),f=m,h=0}const y=Math.abs(a[p]||0);y>h&&(h=y)}r.lineTo(f,c)};r.beginPath(),s(0),s(1),r.fill(),r.closePath()}renderWaveform(t,n,r){if(r.fillStyle=this.convertColorValues(n.waveColor),n.renderFunction)return void n.renderFunction(t,r);let i=n.barHeight||1;if(n.normalize){const s=Array.from(t[0]).reduce((o,a)=>Math.max(o,Math.abs(a)),0);i=s?1/s:1}n.barWidth||n.barGap||n.barAlign?this.renderBarWaveform(t,n,r,i):this.renderLineWaveform(t,n,r,i)}renderSingleCanvas(t,n,r,i,s,o,a){const u=this.getPixelRatio(),l=document.createElement("canvas");l.width=Math.round(r*u),l.height=Math.round(i*u),l.style.width=`${r}px`,l.style.height=`${i}px`,l.style.left=`${Math.round(s)}px`,o.appendChild(l);const c=l.getContext("2d");if(this.renderWaveform(t,n,c),l.width>0&&l.height>0){const d=l.cloneNode(),f=d.getContext("2d");f.drawImage(l,0,0),f.globalCompositeOperation="source-in",f.fillStyle=this.convertColorValues(n.progressColor),f.fillRect(0,0,l.width,l.height),a.appendChild(d)}}renderMultiCanvas(t,n,r,i,s,o){const a=this.getPixelRatio(),{clientWidth:u}=this.scrollContainer,l=r/a;let c=Math.min(Ew.MAX_CANVAS_WIDTH,u,l),d={};if(c===0)return;if(n.barWidth||n.barGap){const y=n.barWidth||.5,v=y+(n.barGap||y/2);c%v!=0&&(c=Math.floor(c/v)*v)}const f=y=>{if(y<0||y>=h||d[y])return;d[y]=!0;const v=y*c,b=Math.min(l-v,c);if(b<=0)return;const w=t.map(E=>{const _=Math.floor(v/l*E.length),C=Math.floor((v+b)/l*E.length);return E.slice(_,C)});this.renderSingleCanvas(w,n,b,i,v,s,o)},h=Math.ceil(l/c);if(!this.isScrollable){for(let y=0;y<h;y++)f(y);return}const p=this.scrollContainer.scrollLeft/l,m=Math.floor(p*h);if(f(m-1),f(m),f(m+1),h>1){const y=this.on("scroll",()=>{const{scrollLeft:v}=this.scrollContainer,b=Math.floor(v/l*h);Object.keys(d).length>Ew.MAX_NODES&&(s.innerHTML="",o.innerHTML="",d={}),f(b-1),f(b),f(b+1)});this.unsubscribeOnScroll.push(y)}}renderChannel(t,n,r,i){var{overlay:s}=n,o=function(c,d){var f={};for(var h in c)Object.prototype.hasOwnProperty.call(c,h)&&d.indexOf(h)<0&&(f[h]=c[h]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function"){var p=0;for(h=Object.getOwnPropertySymbols(c);p<h.length;p++)d.indexOf(h[p])<0&&Object.prototype.propertyIsEnumerable.call(c,h[p])&&(f[h[p]]=c[h[p]])}return f}(n,["overlay"]);const a=document.createElement("div"),u=this.getHeight(o.height,o.splitChannels);a.style.height=`${u}px`,s&&i>0&&(a.style.marginTop=`-${u}px`),this.canvasWrapper.style.minHeight=`${u}px`,this.canvasWrapper.appendChild(a);const l=a.cloneNode();this.progressWrapper.appendChild(l),this.renderMultiCanvas(t,o,r,u,a,l)}render(t){return oa(this,void 0,void 0,function*(){var n;this.timeouts.forEach(u=>u()),this.timeouts=[],this.canvasWrapper.innerHTML="",this.progressWrapper.innerHTML="",this.options.width!=null&&(this.scrollContainer.style.width=typeof this.options.width=="number"?`${this.options.width}px`:this.options.width);const r=this.getPixelRatio(),i=this.scrollContainer.clientWidth,s=Math.ceil(t.duration*(this.options.minPxPerSec||0));this.isScrollable=s>i;const o=this.options.fillParent&&!this.isScrollable,a=(o?i:s)*r;if(this.wrapper.style.width=o?"100%":`${s}px`,this.scrollContainer.style.overflowX=this.isScrollable?"auto":"hidden",this.scrollContainer.classList.toggle("noScrollbar",!!this.options.hideScrollbar),this.cursor.style.backgroundColor=`${this.options.cursorColor||this.options.progressColor}`,this.cursor.style.width=`${this.options.cursorWidth}px`,this.audioData=t,this.emit("render"),this.options.splitChannels)for(let u=0;u<t.numberOfChannels;u++){const l=Object.assign(Object.assign({},this.options),(n=this.options.splitChannels)===null||n===void 0?void 0:n[u]);this.renderChannel([t.getChannelData(u)],l,a,u)}else{const u=[t.getChannelData(0)];t.numberOfChannels>1&&u.push(t.getChannelData(1)),this.renderChannel(u,this.options,a,0)}Promise.resolve().then(()=>this.emit("rendered"))})}reRender(){if(this.unsubscribeOnScroll.forEach(r=>r()),this.unsubscribeOnScroll=[],!this.audioData)return;const{scrollWidth:t}=this.scrollContainer,{right:n}=this.progressWrapper.getBoundingClientRect();if(this.render(this.audioData),this.isScrollable&&t!==this.scrollContainer.scrollWidth){const{right:r}=this.progressWrapper.getBoundingClientRect();let i=r-n;i*=2,i=i<0?Math.floor(i):Math.ceil(i),i/=2,this.scrollContainer.scrollLeft+=i}}zoom(t){this.options.minPxPerSec=t,this.reRender()}scrollIntoView(t,n=!1){const{scrollLeft:r,scrollWidth:i,clientWidth:s}=this.scrollContainer,o=t*i,a=r,u=r+s,l=s/2;if(this.isDragging)o+30>u?this.scrollContainer.scrollLeft+=30:o-30<a&&(this.scrollContainer.scrollLeft-=30);else{(o<a||o>u)&&(this.scrollContainer.scrollLeft=o-(this.options.autoCenter?l:0));const c=o-r-l;n&&this.options.autoCenter&&c>0&&(this.scrollContainer.scrollLeft+=Math.min(c,10))}{const c=this.scrollContainer.scrollLeft,d=c/i,f=(c+s)/i;this.emit("scroll",d,f,c,c+s)}}renderProgress(t,n){if(isNaN(t))return;const r=100*t;this.canvasWrapper.style.clipPath=`polygon(${r}% 0, 100% 0, 100% 100%, ${r}% 100%)`,this.progressWrapper.style.width=`${r}%`,this.cursor.style.left=`${r}%`,this.cursor.style.transform=`translateX(-${Math.round(r)===100?this.options.cursorWidth:0}px)`,this.isScrollable&&this.options.autoScroll&&this.scrollIntoView(t,n)}exportImage(t,n,r){return oa(this,void 0,void 0,function*(){const i=this.canvasWrapper.querySelectorAll("canvas");if(!i.length)throw new Error("No waveform data");if(r==="dataURL"){const s=Array.from(i).map(o=>o.toDataURL(t,n));return Promise.resolve(s)}return Promise.all(Array.from(i).map(s=>new Promise((o,a)=>{s.toBlob(u=>{u?o(u):a(new Error("Could not export image"))},t,n)})))})}}Ew.MAX_CANVAS_WIDTH=8e3,Ew.MAX_NODES=10;class azt extends AA{constructor(){super(...arguments),this.unsubscribe=()=>{}}start(){this.unsubscribe=this.on("tick",()=>{requestAnimationFrame(()=>{this.emit("tick")})}),this.emit("tick")}stop(){this.unsubscribe()}destroy(){this.unsubscribe()}}class Rfe extends AA{constructor(t=new AudioContext){super(),this.bufferNode=null,this.playStartTime=0,this.playedDuration=0,this._muted=!1,this._playbackRate=1,this._duration=void 0,this.buffer=null,this.currentSrc="",this.paused=!0,this.crossOrigin=null,this.seeking=!1,this.autoplay=!1,this.addEventListener=this.on,this.removeEventListener=this.un,this.audioContext=t,this.gainNode=this.audioContext.createGain(),this.gainNode.connect(this.audioContext.destination)}load(){return oa(this,void 0,void 0,function*(){})}get src(){return this.currentSrc}set src(t){if(this.currentSrc=t,this._duration=void 0,!t)return this.buffer=null,void this.emit("emptied");fetch(t).then(n=>{if(n.status>=400)throw new Error(`Failed to fetch ${t}: ${n.status} (${n.statusText})`);return n.arrayBuffer()}).then(n=>this.currentSrc!==t?null:this.audioContext.decodeAudioData(n)).then(n=>{this.currentSrc===t&&(this.buffer=n,this.emit("loadedmetadata"),this.emit("canplay"),this.autoplay&&this.play())})}_play(){var t;if(!this.paused)return;this.paused=!1,(t=this.bufferNode)===null||t===void 0||t.disconnect(),this.bufferNode=this.audioContext.createBufferSource(),this.buffer&&(this.bufferNode.buffer=this.buffer),this.bufferNode.playbackRate.value=this._playbackRate,this.bufferNode.connect(this.gainNode);let n=this.playedDuration*this._playbackRate;n>=this.duration&&(n=0,this.playedDuration=0),this.bufferNode.start(this.audioContext.currentTime,n),this.playStartTime=this.audioContext.currentTime,this.bufferNode.onended=()=>{this.currentTime>=this.duration&&(this.pause(),this.emit("ended"))}}_pause(){var t;this.paused=!0,(t=this.bufferNode)===null||t===void 0||t.stop(),this.playedDuration+=this.audioContext.currentTime-this.playStartTime}play(){return oa(this,void 0,void 0,function*(){this.paused&&(this._play(),this.emit("play"))})}pause(){this.paused||(this._pause(),this.emit("pause"))}stopAt(t){var n,r;const i=t-this.currentTime;(n=this.bufferNode)===null||n===void 0||n.stop(this.audioContext.currentTime+i),(r=this.bufferNode)===null||r===void 0||r.addEventListener("ended",()=>{this.bufferNode=null,this.pause()},{once:!0})}setSinkId(t){return oa(this,void 0,void 0,function*(){return this.audioContext.setSinkId(t)})}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t,this.bufferNode&&(this.bufferNode.playbackRate.value=t)}get currentTime(){return(this.paused?this.playedDuration:this.playedDuration+(this.audioContext.currentTime-this.playStartTime))*this._playbackRate}set currentTime(t){const n=!this.paused;n&&this._pause(),this.playedDuration=t/this._playbackRate,n&&this._play(),this.emit("seeking"),this.emit("timeupdate")}get duration(){var t,n;return(t=this._duration)!==null&&t!==void 0?t:((n=this.buffer)===null||n===void 0?void 0:n.duration)||0}set duration(t){this._duration=t}get volume(){return this.gainNode.gain.value}set volume(t){this.gainNode.gain.value=t,this.emit("volumechange")}get muted(){return this._muted}set muted(t){this._muted!==t&&(this._muted=t,this._muted?this.gainNode.disconnect():this.gainNode.connect(this.audioContext.destination))}canPlayType(t){return/^(audio|video)\//.test(t)}getGainNode(){return this.gainNode}getChannelData(){const t=[];if(!this.buffer)return t;const n=this.buffer.numberOfChannels;for(let r=0;r<n;r++)t.push(this.buffer.getChannelData(r));return t}}const uzt={waveColor:"#999",progressColor:"#555",cursorWidth:1,minPxPerSec:0,fillParent:!0,interact:!0,dragToSeek:!1,autoScroll:!0,autoCenter:!0,sampleRate:8e3};class jC extends ozt{static create(t){return new jC(t)}constructor(t){const n=t.media||(t.backend==="WebAudio"?new Rfe:void 0);super({media:n,mediaControls:t.mediaControls,autoplay:t.autoplay,playbackRate:t.audioRate}),this.plugins=[],this.decodedData=null,this.subscriptions=[],this.mediaSubscriptions=[],this.abortController=null,this.options=Object.assign({},uzt,t),this.timer=new azt;const r=n?void 0:this.getMediaElement();this.renderer=new Ew(this.options,r),this.initPlayerEvents(),this.initRendererEvents(),this.initTimerEvents(),this.initPlugins();const i=this.options.url||this.getSrc()||"";Promise.resolve().then(()=>{this.emit("init");const{peaks:s,duration:o}=this.options;(i||s&&o)&&this.load(i,s,o).catch(()=>null)})}updateProgress(t=this.getCurrentTime()){return this.renderer.renderProgress(t/this.getDuration(),this.isPlaying()),t}initTimerEvents(){this.subscriptions.push(this.timer.on("tick",()=>{if(!this.isSeeking()){const t=this.updateProgress();this.emit("timeupdate",t),this.emit("audioprocess",t)}}))}initPlayerEvents(){this.isPlaying()&&(this.emit("play"),this.timer.start()),this.mediaSubscriptions.push(this.onMediaEvent("timeupdate",()=>{const t=this.updateProgress();this.emit("timeupdate",t)}),this.onMediaEvent("play",()=>{this.emit("play"),this.timer.start()}),this.onMediaEvent("pause",()=>{this.emit("pause"),this.timer.stop()}),this.onMediaEvent("emptied",()=>{this.timer.stop()}),this.onMediaEvent("ended",()=>{this.emit("timeupdate",this.getDuration()),this.emit("finish")}),this.onMediaEvent("seeking",()=>{this.emit("seeking",this.getCurrentTime())}),this.onMediaEvent("error",t=>{var n;this.emit("error",(n=this.getMediaElement().error)!==null&&n!==void 0?n:new Error("Media error"))}))}initRendererEvents(){this.subscriptions.push(this.renderer.on("click",(t,n)=>{this.options.interact&&(this.seekTo(t),this.emit("interaction",t*this.getDuration()),this.emit("click",t,n))}),this.renderer.on("dblclick",(t,n)=>{this.emit("dblclick",t,n)}),this.renderer.on("scroll",(t,n,r,i)=>{const s=this.getDuration();this.emit("scroll",t*s,n*s,r,i)}),this.renderer.on("render",()=>{this.emit("redraw")}),this.renderer.on("rendered",()=>{this.emit("redrawcomplete")}),this.renderer.on("dragstart",t=>{this.emit("dragstart",t)}),this.renderer.on("dragend",t=>{this.emit("dragend",t)}));{let t;this.subscriptions.push(this.renderer.on("drag",n=>{if(!this.options.interact)return;let r;this.renderer.renderProgress(n),clearTimeout(t),this.isPlaying()?r=0:this.options.dragToSeek===!0?r=200:typeof this.options.dragToSeek=="object"&&this.options.dragToSeek!==void 0&&(r=this.options.dragToSeek.debounceTime),t=setTimeout(()=>{this.seekTo(n)},r),this.emit("interaction",n*this.getDuration()),this.emit("drag",n)}))}}initPlugins(){var t;!((t=this.options.plugins)===null||t===void 0)&&t.length&&this.options.plugins.forEach(n=>{this.registerPlugin(n)})}unsubscribePlayerEvents(){this.mediaSubscriptions.forEach(t=>t()),this.mediaSubscriptions=[]}setOptions(t){this.options=Object.assign({},this.options,t),t.duration&&!t.peaks&&(this.decodedData=KI.createBuffer(this.exportPeaks(),t.duration)),t.peaks&&t.duration&&(this.decodedData=KI.createBuffer(t.peaks,t.duration)),this.renderer.setOptions(this.options),t.audioRate&&this.setPlaybackRate(t.audioRate),t.mediaControls!=null&&(this.getMediaElement().controls=t.mediaControls)}registerPlugin(t){return t._init(this),this.plugins.push(t),this.subscriptions.push(t.once("destroy",()=>{this.plugins=this.plugins.filter(n=>n!==t)})),t}getWrapper(){return this.renderer.getWrapper()}getWidth(){return this.renderer.getWidth()}getScroll(){return this.renderer.getScroll()}setScroll(t){return this.renderer.setScroll(t)}setScrollTime(t){const n=t/this.getDuration();this.renderer.setScrollPercentage(n)}getActivePlugins(){return this.plugins}loadAudio(t,n,r,i){return oa(this,void 0,void 0,function*(){var s;if(this.emit("load",t),!this.options.media&&this.isPlaying()&&this.pause(),this.decodedData=null,!n&&!r){const a=this.options.fetchParams||{};window.AbortController&&!a.signal&&(this.abortController=new AbortController,a.signal=(s=this.abortController)===null||s===void 0?void 0:s.signal);const u=c=>this.emit("loading",c);n=yield szt.fetchBlob(t,u,a);const l=this.options.blobMimeType;l&&(n=new Blob([n],{type:l}))}this.setSrc(t,n);const o=yield new Promise(a=>{const u=i||this.getDuration();u?a(u):this.mediaSubscriptions.push(this.onMediaEvent("loadedmetadata",()=>a(this.getDuration()),{once:!0}))});if(!t&&!n){const a=this.getMediaElement();a instanceof Rfe&&(a.duration=o)}if(r)this.decodedData=KI.createBuffer(r,o||0);else if(n){const a=yield n.arrayBuffer();this.decodedData=yield KI.decode(a,this.options.sampleRate)}this.decodedData&&(this.emit("decode",this.getDuration()),this.renderer.render(this.decodedData)),this.emit("ready",this.getDuration())})}load(t,n,r){return oa(this,void 0,void 0,function*(){try{return yield this.loadAudio(t,void 0,n,r)}catch(i){throw this.emit("error",i),i}})}loadBlob(t,n,r){return oa(this,void 0,void 0,function*(){try{return yield this.loadAudio("",t,n,r)}catch(i){throw this.emit("error",i),i}})}zoom(t){if(!this.decodedData)throw new Error("No audio loaded");this.renderer.zoom(t),this.emit("zoom",t)}getDecodedData(){return this.decodedData}exportPeaks({channels:t=2,maxLength:n=8e3,precision:r=1e4}={}){if(!this.decodedData)throw new Error("The audio has not been decoded yet");const i=Math.min(t,this.decodedData.numberOfChannels),s=[];for(let o=0;o<i;o++){const a=this.decodedData.getChannelData(o),u=[],l=a.length/n;for(let c=0;c<n;c++){const d=a.slice(Math.floor(c*l),Math.ceil((c+1)*l));let f=0;for(let h=0;h<d.length;h++){const p=d[h];Math.abs(p)>Math.abs(f)&&(f=p)}u.push(Math.round(f*r)/r)}s.push(u)}return s}getDuration(){let t=super.getDuration()||0;return t!==0&&t!==1/0||!this.decodedData||(t=this.decodedData.duration),t}toggleInteraction(t){this.options.interact=t}setTime(t){super.setTime(t),this.updateProgress(t),this.emit("timeupdate",t)}seekTo(t){const n=this.getDuration()*t;this.setTime(n)}playPause(){return oa(this,void 0,void 0,function*(){return this.isPlaying()?this.pause():this.play()})}stop(){this.pause(),this.setTime(0)}skip(t){this.setTime(this.getCurrentTime()+t)}empty(){this.load("",[[0]],.001)}setMediaElement(t){this.unsubscribePlayerEvents(),super.setMediaElement(t),this.initPlayerEvents()}exportImage(){return oa(this,arguments,void 0,function*(t="image/png",n=1,r="dataURL"){return this.renderer.exportImage(t,n,r)})}destroy(){var t;this.emit("destroy"),(t=this.abortController)===null||t===void 0||t.abort(),this.plugins.forEach(n=>n.destroy()),this.subscriptions.forEach(n=>n()),this.unsubscribePlayerEvents(),this.timer.destroy(),this.renderer.destroy(),super.destroy()}}jC.BasePlugin=class extends AA{constructor(e){super(),this.subscriptions=[],this.options=e}onInit(){}_init(e){this.wavesurfer=e,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach(e=>e())}},jC.dom=izt;function lzt(e){return jC.create(e)}function czt(e){const{plugin:t,options:n,creator:r="create"}=e,i=t[r];if(!t)throw new Error("Please pass a valid plugin in plugin list");if(!r)throw new Error("Please pass the creator function name in 'creator' property.");if(typeof i!="function")throw new Error(`"${r}" is not callable on given plugin. Please pass a valid 'creator' in plugins list.`);return i(n)}const Dfe=e=>e.reduce((t,n)=>(t[n[0]]=n[1],t),{}),dzt=(e,t)=>{const n=Object.entries(e),r=Object.entries(t),i=n.filter(([o])=>r.findIndex(([a])=>a===o)===-1),s=r.filter(([o])=>n.findIndex(([a])=>a===o)===-1);return{disabled:Dfe(i),enabled:Dfe(s)}};function Pfe(e,t){const n={},r=[...t];for(;r.length>=1;){const i=r.shift();!!e[i.key]?n[i.key]=e[i.key]:n[i.key]=czt(i)}return n}function fzt({container:e,plugins:t=[],onMount:n,...r}){const i=D.useRef(!1),[s,o]=D.useState({}),a=D.useRef([]),[u,l]=D.useState(null);return D.useEffect(()=>{if(!e)return;const c=e;if(i.current)return;i.current=!0;const d=Pfe(s,t);a.current=Object.keys(d);const f=lzt({container:e,...r,plugins:Object.values(d)});return n==null||n(f),o(d),l(f),()=>{c!==e&&f.destroy()}},[e]),D.useEffect(()=>{if(u){const c=Pfe(s,t),{disabled:d,enabled:f}=dzt(s,c);Object.keys(d).forEach(h=>{d[h].destroy()}),Object.keys(f).forEach(h=>{a.current.includes(h)||(console.log("register plugin",h,f[h]),u==null||u.registerPlugin(f[h]))}),a.current=Object.keys(f),o(c)}},[t]),[u,s,Object.values(s)]}function M3e({children:e,plugins:t=[],onMount:n,...r}){const i=fzt({plugins:t,onMount:n,...r});return rr.createElement(rzt.Provider,{value:i},e)}const L3e=({id:e="waveform",children:t})=>rr.createElement("div",{id:e},t);function h9(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(l){try{u(r.next(l))}catch(c){s(c)}}function a(l){try{u(r.throw(l))}catch(c){s(c)}}function u(l){var c;l.done?i(l.value):(c=l.value,c instanceof n?c:new n(function(d){d(c)})).then(o,a)}u((r=r.apply(e,[])).next())})}class F3e{constructor(){this.listeners={}}on(t,n,r){if(this.listeners[t]||(this.listeners[t]=new Set),this.listeners[t].add(n),r==null?void 0:r.once){const i=()=>{this.un(t,i),this.un(t,n)};return this.on(t,i),i}return()=>this.un(t,n)}un(t,n){var r;(r=this.listeners[t])===null||r===void 0||r.delete(n)}once(t,n){return this.on(t,n,{once:!0})}unAll(){this.listeners={}}emit(t,...n){this.listeners[t]&&this.listeners[t].forEach(r=>r(...n))}}class hzt extends F3e{constructor(t){super(),this.subscriptions=[],this.options=t}onInit(){}_init(t){this.wavesurfer=t,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach(t=>t())}}class pzt extends F3e{constructor(){super(...arguments),this.unsubscribe=()=>{}}start(){this.unsubscribe=this.on("tick",()=>{requestAnimationFrame(()=>{this.emit("tick")})}),this.emit("tick")}stop(){this.unsubscribe()}destroy(){this.unsubscribe()}}const mzt=["audio/webm","audio/wav","audio/mpeg","audio/mp4","audio/mp3"];class WQ extends hzt{constructor(t){var n,r,i,s,o,a;super(Object.assign(Object.assign({},t),{audioBitsPerSecond:(n=t.audioBitsPerSecond)!==null&&n!==void 0?n:128e3,scrollingWaveform:(r=t.scrollingWaveform)!==null&&r!==void 0&&r,scrollingWaveformWindow:(i=t.scrollingWaveformWindow)!==null&&i!==void 0?i:5,continuousWaveform:(s=t.continuousWaveform)!==null&&s!==void 0&&s,renderRecordedAudio:(o=t.renderRecordedAudio)===null||o===void 0||o,mediaRecorderTimeslice:(a=t.mediaRecorderTimeslice)!==null&&a!==void 0?a:void 0})),this.stream=null,this.mediaRecorder=null,this.dataWindow=null,this.isWaveformPaused=!1,this.lastStartTime=0,this.lastDuration=0,this.duration=0,this.timer=new pzt,this.subscriptions.push(this.timer.on("tick",()=>{const u=performance.now()-this.lastStartTime;this.duration=this.isPaused()?this.duration:this.lastDuration+u,this.emit("record-progress",this.duration)}))}static create(t){return new WQ(t||{})}renderMicStream(t){var n;const r=new AudioContext,i=r.createMediaStreamSource(t),s=r.createAnalyser();i.connect(s),this.options.continuousWaveform&&(s.fftSize=32);const o=s.frequencyBinCount,a=new Float32Array(o);let u=0;this.wavesurfer&&((n=this.originalOptions)!==null&&n!==void 0||(this.originalOptions=Object.assign({},this.wavesurfer.options)),this.wavesurfer.options.interact=!1,this.options.scrollingWaveform&&(this.wavesurfer.options.cursorWidth=0));const l=setInterval(()=>{var c,d,f,h;if(!this.isWaveformPaused){if(s.getFloatTimeDomainData(a),this.options.scrollingWaveform){const p=Math.floor((this.options.scrollingWaveformWindow||0)*r.sampleRate),m=Math.min(p,this.dataWindow?this.dataWindow.length+o:o),y=new Float32Array(p);if(this.dataWindow){const v=Math.max(0,p-this.dataWindow.length);y.set(this.dataWindow.slice(-m+o),v)}y.set(a,p-o),this.dataWindow=y}else if(this.options.continuousWaveform){if(!this.dataWindow){const m=this.options.continuousWaveformDuration?Math.round(100*this.options.continuousWaveformDuration):((d=(c=this.wavesurfer)===null||c===void 0?void 0:c.getWidth())!==null&&d!==void 0?d:0)*window.devicePixelRatio;this.dataWindow=new Float32Array(m)}let p=0;for(let m=0;m<o;m++){const y=Math.abs(a[m]);y>p&&(p=y)}if(u+1>this.dataWindow.length){const m=new Float32Array(2*this.dataWindow.length);m.set(this.dataWindow,0),this.dataWindow=m}this.dataWindow[u]=p,u++}else this.dataWindow=a;if(this.wavesurfer){const p=((h=(f=this.dataWindow)===null||f===void 0?void 0:f.length)!==null&&h!==void 0?h:0)/100;this.wavesurfer.load("",[this.dataWindow],this.options.scrollingWaveform?this.options.scrollingWaveformWindow:p).then(()=>{this.wavesurfer&&this.options.continuousWaveform&&(this.wavesurfer.setTime(this.getDuration()/1e3),this.wavesurfer.options.minPxPerSec||this.wavesurfer.setOptions({minPxPerSec:this.wavesurfer.getWidth()/this.wavesurfer.getDuration()}))}).catch(m=>{console.error("Error rendering real-time recording data:",m)})}}},10);return{onDestroy:()=>{clearInterval(l),i==null||i.disconnect(),r==null||r.close()},onEnd:()=>{this.isWaveformPaused=!0,clearInterval(l),this.stopMic()}}}startMic(t){return h9(this,void 0,void 0,function*(){let n;try{n=yield navigator.mediaDevices.getUserMedia({audio:!(t!=null&&t.deviceId)||{deviceId:t.deviceId}})}catch(s){throw new Error("Error accessing the microphone: "+s.message)}const{onDestroy:r,onEnd:i}=this.renderMicStream(n);return this.subscriptions.push(this.once("destroy",r)),this.subscriptions.push(this.once("record-end",i)),this.stream=n,n})}stopMic(){this.stream&&(this.stream.getTracks().forEach(t=>t.stop()),this.stream=null,this.mediaRecorder=null)}startRecording(t){return h9(this,void 0,void 0,function*(){const n=this.stream||(yield this.startMic(t));this.dataWindow=null;const r=this.mediaRecorder||new MediaRecorder(n,{mimeType:this.options.mimeType||mzt.find(o=>MediaRecorder.isTypeSupported(o)),audioBitsPerSecond:this.options.audioBitsPerSecond});this.mediaRecorder=r,this.stopRecording();const i=[];r.ondataavailable=o=>{o.data.size>0&&i.push(o.data),this.emit("record-data-available",o.data)};const s=o=>{var a;const u=new Blob(i,{type:r.mimeType});this.emit(o,u),this.options.renderRecordedAudio&&(this.applyOriginalOptionsIfNeeded(),(a=this.wavesurfer)===null||a===void 0||a.load(URL.createObjectURL(u)))};r.onpause=()=>s("record-pause"),r.onstop=()=>s("record-end"),r.start(this.options.mediaRecorderTimeslice),this.lastStartTime=performance.now(),this.lastDuration=0,this.duration=0,this.isWaveformPaused=!1,this.timer.start(),this.emit("record-start")})}getDuration(){return this.duration}isRecording(){var t;return((t=this.mediaRecorder)===null||t===void 0?void 0:t.state)==="recording"}isPaused(){var t;return((t=this.mediaRecorder)===null||t===void 0?void 0:t.state)==="paused"}isActive(){var t;return((t=this.mediaRecorder)===null||t===void 0?void 0:t.state)!=="inactive"}stopRecording(){var t;this.isActive()&&((t=this.mediaRecorder)===null||t===void 0||t.stop(),this.timer.stop())}pauseRecording(){var t,n;this.isRecording()&&(this.isWaveformPaused=!0,(t=this.mediaRecorder)===null||t===void 0||t.requestData(),(n=this.mediaRecorder)===null||n===void 0||n.pause(),this.timer.stop(),this.lastDuration=this.duration)}resumeRecording(){var t;this.isPaused()&&(this.isWaveformPaused=!1,(t=this.mediaRecorder)===null||t===void 0||t.resume(),this.timer.start(),this.lastStartTime=performance.now(),this.emit("record-resume"))}static getAvailableAudioDevices(){return h9(this,void 0,void 0,function*(){return navigator.mediaDevices.enumerateDevices().then(t=>t.filter(n=>n.kind==="audioinput"))})}destroy(){this.applyOriginalOptionsIfNeeded(),super.destroy(),this.stopRecording(),this.stopMic()}applyOriginalOptionsIfNeeded(){this.wavesurfer&&this.originalOptions&&(this.wavesurfer.setOptions(this.originalOptions),delete this.originalOptions)}}function gzt({width:e=70,height:t=36}){const n=D.useRef(null),r=D.useRef(null),[i,s]=D.useState(!1);D.useEffect(()=>{if(i&&n.current){const a=n.current.registerPlugin(WQ.create({scrollingWaveform:!0,renderRecordedAudio:!1}));r.current=a,navigator.userAgent.includes("Firefox")||a.startRecording(),n.current.setOptions({height:t,waveColor:"#FA5252"})}return()=>{var a,u;i&&n.current&&((a=r.current)==null||a.stopRecording(),(u=r.current)==null||u.destroy(),n.current.destroy())}},[i]);const o=D.useCallback(a=>{n.current=a,s(!0)},[]);return T.jsx(Se,{id:"waveformDiv",style:{width:`${e}px`,height:`${t}px`},children:T.jsx(M3e,{onMount:o,plugins:[],container:"#waveformDiv",height:t,children:T.jsx(L3e,{id:"waveform",height:t})})})}function yzt({studyNavigatorEnabled:e,dataCollectionEnabled:t}){const n=ir(k=>k.config),r=ir(k=>k.metadata),i=ir(k=>k.answers),s=nb(),o=Bo(),{toggleShowHelpText:a,toggleStudyBrowser:u,incrementHelpCounter:l}=ro(),{storageEngine:c}=Mi(),d=ih(),f=Sl(),h=D.useMemo(()=>{const k=Object.values(i).filter(N=>N.endTime>-1).length,R=s.map((N,O)=>n.components[N]?1:typeof f=="number"&&f<=O&&N!=="end"?55:Object.entries(i).filter(([F,$])=>F.includes(`${N}_`)).length).reduce((N,O)=>N+O,0);return k/R*100},[i,f,s,n.components]),[p,m]=D.useState(!1),y=n==null?void 0:n.uiConfig.logoPath,v=n==null?void 0:n.uiConfig.withProgressBar,b=Kp(),w=XV(`/${b}`),E=D.useRef(null),[_,C]=D.useState(!1),S=ir(k=>k.isRecording);return D.useEffect(()=>{const k=E.current;k&&C(k.scrollWidth>k.offsetWidth)},[n]),T.jsx(Or.Header,{p:"md",children:T.jsxs(ff,{mt:-7,align:"center",children:[T.jsx(ff.Col,{span:4,children:T.jsxs(Ft,{align:"center",children:[T.jsx(rg,{w:40,src:`${rs}${y}`,alt:"Study Logo"}),T.jsx(al,{w:"md"}),T.jsx(Pi,{ref:E,order:4,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},title:_?n==null?void 0:n.studyMetadata.title:void 0,children:n==null?void 0:n.studyMetadata.title})]})}),T.jsx(ff.Col,{span:4,children:v&&T.jsx(Mw,{radius:"md",size:"lg",value:h})}),T.jsx(ff.Col,{span:4,children:T.jsxs(Ti,{wrap:"nowrap",justify:"right",children:[S?T.jsxs(Ti,{ml:"xl",gap:20,wrap:"nowrap",children:[T.jsx(Je,{color:"red",children:"Recording audio"}),T.jsx(gzt,{})]}):null,!t&&T.jsx(jr,{multiline:!0,withArrow:!0,arrowSize:6,w:300,label:"This is a demo version of the study, were not collecting any data.",children:T.jsx(td,{size:"lg",color:"orange",children:"Demo Mode"})}),(n==null?void 0:n.uiConfig.helpTextPath)!==void 0&&T.jsx(tn,{variant:"outline",onClick:()=>{o(a()),o(l({identifier:`${d}_${f}`}))},children:"Help"}),T.jsxs(Da,{shadow:"md",width:200,withinPortal:!0,opened:p,onChange:m,children:[T.jsx(Da.Target,{children:T.jsx(eg,{size:"lg",className:"studyBrowserMenuDropdown",variant:"subtle",color:"gray",children:T.jsx(J7e,{})})}),T.jsxs(Da.Dropdown,{children:[e&&T.jsx(Da.Item,{leftSection:T.jsx(cze,{size:14}),onClick:()=>o(u()),children:"Study Browser"}),T.jsx(Da.Item,{component:"a",href:n!==null?`mailto:${n.uiConfig.contactEmail}`:void 0,leftSection:T.jsx(rze,{size:14}),children:"Contact"}),e&&T.jsx(Da.Item,{leftSection:T.jsx(sH,{size:14}),onClick:()=>O3e(c,n,r,w),children:"Next Participant"}),e&&T.jsx(Da.Item,{leftSection:T.jsx(vge,{size:14}),component:"a",href:`${rs}analysis/stats/${b}`,children:"Analyze & Manage"})]})]})]})})]})})}function bzt(){var u;const e=(u=Hf())==null?void 0:u.uiConfig.sidebar,t=Hf(),n=ih(),r=t.components[n],i=D.useMemo(()=>r?kf(r,t):null,[r,t]),s=YW(),o=(i==null?void 0:i.instruction)||"",a=(i==null?void 0:i.instructionLocation)==="sidebar"||(i==null?void 0:i.instructionLocation)===void 0;return e&&i?T.jsxs(Or.Navbar,{bg:"gray.1",display:"block",style:{zIndex:0,overflowY:"scroll"},children:[a&&o!==""&&T.jsxs(Or.Section,{bg:"gray.3",p:"md",children:[T.jsx(Je,{span:!0,c:"orange.8",fw:700,inherit:!0,children:"Task:"}),T.jsx($o,{text:o})]}),T.jsx(Or.Section,{p:"md",children:T.jsx(aN,{status:s,config:i,location:"sidebar"},`${n}-sidebar-response-block`)})]}):T.jsx(Or.Navbar,{bg:"gray.1",display:"block",style:{zIndex:0,overflowY:"scroll"},children:T.jsx(aN,{status:s,config:i,location:"sidebar",style:{display:"hidden"}},`${n}-sidebar-response-block`)})}function vzt(){const e=ir(d=>d.showHelpText),t=ir(d=>d.config),n=Bo(),{toggleShowHelpText:r}=ro(),[i,s]=D.useState(""),[o,a]=D.useState(!0),u=ih(),l=D.useMemo(()=>kf(t.components[u]||{},t),[u,t]),c=D.useMemo(()=>l.helpTextPathOverride?l.helpTextPathOverride:t.uiConfig.helpTextPath,[l.helpTextPathOverride,t.uiConfig.helpTextPath]);return D.useEffect(()=>{async function d(){if(!c){a(!1);return}const f=await m6(`${rs}${c}`);f!==void 0&&s(f),a(!1)}d()},[c]),T.jsx(Ei,{size:"70%",opened:e,withCloseButton:!1,onClose:()=>n(r()),children:o||i?T.jsx($o,{text:i}):T.jsx(Op,{path:t.uiConfig.helpTextPath})})}function xzt(){const e=ir(o=>o.alertModal),{setAlertModal:t}=ro(),n=Bo(),[r,i]=D.useState(e.show),s=D.useCallback(()=>n(t({...e,show:!1})),[e,t,n]);return D.useEffect(()=>i(e.show),[e.show]),T.jsx(Ei,{opened:r,centered:!0,size:"lg",withCloseButton:!1,onClose:s,children:T.jsxs(up,{color:"red",radius:"xs",title:"Alert",icon:T.jsx(U7e,{}),onClose:s,styles:{root:{backgroundColor:"unset"}},children:[T.jsx(Je,{my:"md",children:e.message}),T.jsx(Ti,{w:"100%",justify:"end",children:T.jsx(tn,{onClick:s,color:"red",variant:"filled",m:"xs",children:"Continue Study"})})]})})}const XI=15,QI=3,Nfe=["#4269d0","#ff725c","#6cc5b0","#3ca951","#ff8ab7","#a463f2","#97bbf5","#9c6b4e"];function wzt({xScale:e,height:t,currentNode:n,provenance:r,answer:i}){const s=D.useMemo(()=>{var a;const o=new Map;if(o.set("Root","#efb118"),i.provenanceGraph){let u=0;Object.entries(((a=i.provenanceGraph.stimulus)==null?void 0:a.nodes)||{}).forEach(l=>{const[,c]=l;o.has(c.label)||(o.set(c.label,Nfe[u]),u=(u+1)%Nfe.length)})}return o},[i]);return T.jsxs("g",{style:{cursor:"pointer"},children:[r?Object.entries(r.nodes||{}).map(o=>{const[a,u]=o;return T.jsx("g",{children:T.jsx("rect",{fill:s.get(u.label)||"#9498a0",opacity:u.id===n?1:.7,x:e(u.createdOn)-QI/2,y:t/2-XI/2,width:QI,height:XI})},a)}):null,n&&r&&r.nodes[n]&&T.jsx("rect",{fill:s.get(r.nodes[n].label)||"#9498a0",x:e(r.nodes[n].createdOn)-QI/2,y:t/2-XI/2,width:QI,height:XI}),T.jsx(BU,{position:{bottom:10,left:10},children:T.jsxs(Po,{width:200,position:"bottom",withArrow:!0,shadow:"md",children:[T.jsx(Po.Target,{children:T.jsx(tn,{children:"Show Legend"})}),T.jsx(Po.Dropdown,{children:T.jsx(Es,{children:Array.from(s.keys()).map(o=>T.jsxs(Ti,{children:[T.jsx(fV,{color:s.get(o)}),T.jsx("span",{children:o})]},o))})})]})})]})}const Ofe={left:5,top:0,right:5,bottom:0};function Ezt({xScale:e,participantData:t,width:n,height:r,currentNode:i,trialName:s}){const o=D.useMemo(()=>Object.entries(t.answers).filter(a=>s?s===a[0]:!0).map(a=>{const[u,l]=a;return Object.keys(l.provenanceGraph).map(d=>{const f=l.provenanceGraph[d];return f?T.jsx(wzt,{answer:t.answers[s],height:r,currentNode:i,xScale:e,provenance:f},u+d):null})}),[i,r,t.answers,s,e]);return T.jsxs("svg",{style:{width:n,height:r},children:[T.jsx("line",{stroke:"black",strokeWidth:1,x1:Ofe.left,x2:n+Ofe.left,y1:r/2,y2:r/2}),o]})}function B3e(e){const t=D.useRef(()=>{throw new Error("Cannot call an event handler while rendering.")});return D.useLayoutEffect(()=>{t.current=e}),D.useCallback((...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function _zt({width:e,height:t,updateTimer:n,duration:r,isPlaying:i,xScale:s,startTime:o}){const a=D.useRef(0),u=D.useRef(Date.now()),[l,c]=D.useState(0);D.useEffect(()=>{o&&(a.current=0,n(o,0))},[o,n]);const d=B3e(()=>{if(a.current>=r)return;const h=Date.now();a.current=h-u.current,n(o+a.current,void 0),c(l+1)});D.useEffect(()=>{i&&a.current>=r&&(n(o,0),u.current=Date.now()-a.current,a.current=0)},[o,i,r,n]),D.useEffect(()=>{let h=null;return i&&a.current<r&&(u.current=Date.now()-a.current,h=setInterval(()=>{i&&d()},30)),()=>{h&&clearInterval(h)}},[r,d,i]);const f=D.useCallback(h=>{a.current=s.invert(h.clientX-10)-s.domain()[0],u.current=Date.now()-a.current,c(l+1),n(o+a.current,a.current/r)},[r,l,o,n,s]);return T.jsx("svg",{onClick:f,style:{width:e,height:t,position:"absolute",zIndex:1e4},children:T.jsx("line",{stroke:"#e15759",strokeWidth:3,y1:0,y2:t,x1:s(o+a.current),x2:s(o+a.current)})})}function qz(e){const t=Math.floor(e/1e3/60/60),n=Math.floor((e/1e3/60/60-t)*60),r=Math.floor(((e/1e3/60/60-t)*60-n)*60),i=r<10?`0${r}`:`${r}`,s=n<10?`0${n}`:`${n}`,o=t<10?`0${t}`:`${t}`;return`${t>0?`${o}h`:""} ${n>0?`${s}m`:""} ${i}s`}function p9(e,t,n,r,i){const{saveAnalysisState:s}=ro(),o=Bo(),a=D.useMemo(()=>{const u=J1.create(),l=CS({registry:u,initialState:{}});return n&&l.importObject(structuredClone(n)),l},[n]);D.useEffect(()=>{if(!n){r&&(i(null,e),o(s({prov:null,location:e})));return}if(!r||!n.nodes[r]){i(n.root,e),o(s({prov:a.getState(n.nodes[n.root]),location:e}));return}let u=n.nodes[r];for(;;)if(t<u.createdOn){if(lxe(u))break;{const l=u.parent;u=n.nodes[l]}}else if(u.children.length>0){const l=u.children[0];if(t>n.nodes[l].createdOn)u=n.nodes[l];else break}else break;u.id!==r&&(i(u.id,e),o(s({prov:a.getState(u),location:e})))},[r,t,n,o,s,e,i,a])}const m9={left:0,top:0,right:0,bottom:0};function Tzt(e,t){return t?t.getParticipantData(e):null}function Czt({setTimeString:e}){var X,ne,pe,de,xe,Ce,ue,se;const[t]=Zf(),n=D.useMemo(()=>t.get("participantId")||void 0,[t]),{storageEngine:r}=Mi(),i=ir(me=>me.analysisIsPlaying),s=ir(me=>me.analysisHasAudio),{saveAnalysisState:o,setAnalysisHasAudio:a,setAnalysisIsPlaying:u}=ro(),l=Bo(),c=ih(),d=Sl();D.useEffect(()=>{l(o({prov:void 0,location:"stimulus"}))},[d,o,l]);const[f,{width:h}]=_w(),[p,m]=D.useState(0),[y,v]=D.useState(null),[b,w]=D.useState({aboveStimulus:void 0,belowStimulus:void 0,sidebar:void 0,stimulus:void 0}),[E,_]=D.useState(null),[C,S]=D.useState(0),{value:k,status:R}=uN(Tzt,[n,r]),[N,O]=MOe(0,100),F=D.useRef(null),[$,z]=D.useState(!0),q=D.useRef(null),W=sb(),J=B3e((me,be)=>{var Ue,Ne;const Le=(Ne=(Ue=k==null?void 0:k.answers)==null?void 0:Ue[W])==null?void 0:Ne.provenanceGraph[be];k&&Le&&me&&(!E||Le.nodes[me].createdOn>E.time||N<E.time)&&_({name:me||"",time:Le.nodes[me].createdOn}),w({...b,[be]:me})});p9("aboveStimulus",N,(ne=(X=k==null?void 0:k.answers)==null?void 0:X[W])==null?void 0:ne.provenanceGraph.aboveStimulus,b.aboveStimulus,J),p9("belowStimulus",N,(de=(pe=k==null?void 0:k.answers)==null?void 0:pe[W])==null?void 0:de.provenanceGraph.belowStimulus,b.belowStimulus,J),p9("sidebar",N,(Ce=(xe=k==null?void 0:k.answers)==null?void 0:xe[W])==null?void 0:Ce.provenanceGraph.sidebar,b.sidebar,J),D.useEffect(()=>{l(u(!1))},[n,c,d,l,u]),D.useEffect(()=>{var me,be,Le,Ue,Ne,je;if(W&&k&&((be=(me=k.answers)==null?void 0:me[W])!=null&&be.provenanceGraph)){const Ke=J1.create(),ut=CS({registry:Ke,initialState:{}});(Ue=(Le=k.answers)==null?void 0:Le[W])!=null&&Ue.provenanceGraph.stimulus&&(ut.importObject(structuredClone((je=(Ne=k.answers)==null?void 0:Ne[W])==null?void 0:je.provenanceGraph.stimulus)),q.current=ut)}},[k,W,l]);const K=D.useCallback(me=>{var be,Le,Ue;me&&(W&&k&&q.current&&(l(o({prov:q.current.getState((Ue=(Le=(be=k.answers)==null?void 0:be[W])==null?void 0:Le.provenanceGraph.stimulus)==null?void 0:Ue.nodes[me]),location:"stimulus"})),q.current.to(me)),J(me,"stimulus"),v(me))},[W,k,J,l,o]);D.useEffect(()=>{var Le,Ue,Ne,je;if(!W||!k||!q.current||!((Ue=(Le=k.answers)==null?void 0:Le[W])!=null&&Ue.provenanceGraph))return;const me=(je=(Ne=k.answers)==null?void 0:Ne[W])==null?void 0:je.provenanceGraph;if(!me.stimulus)return;if(!y||!me.stimulus.nodes[y]){K(me.stimulus.root);return}let be=me.stimulus.nodes[y];for(;;)if(N<be.createdOn){if(lxe(be))break;{const Ke=be.parent;be=me.stimulus.nodes[Ke]}}else if(be.children.length>0){const Ke=be.children[0];if(N>me.stimulus.nodes[Ke].createdOn)be=me.stimulus.nodes[Ke];else break}else break;be.id!==y&&K(be.id)},[K,y,k,n,N,W]);const Z=D.useMemo(()=>{var me,be;return((be=(me=k==null?void 0:k.answers)==null?void 0:me[W])==null?void 0:be.startTime)||0},[k,W]);D.useEffect(()=>{C===0?e(""):N!==0&&e(`${qz(N-Z)} / ${qz(C*1e3)}`)},[W,k,N,e,Z,C]),D.useEffect(()=>{var me,be,Le,Ue;if(!s&&k){const Ne=((be=(me=k.answers)==null?void 0:me[W])==null?void 0:be.endTime)-((Ue=(Le=k.answers)==null?void 0:Le[W])==null?void 0:Ue.startTime);S(Ne>-1?Ne/1e3:0)}},[s,W,k]);const U=cE(),L=D.useRef(null),Y=D.useCallback(async me=>{if(L.current=me,me&&k&&U&&W&&r)try{const be=await r.getAudio(W,n);await me.load(be),z(!1),l(a(!0)),S(me.getDuration()),m(me.getWidth()),me.seekTo(0),me.on("redrawcomplete",()=>m(me.getWidth()))}catch(be){throw l(a(!1)),new Error(be)}else l(a(!1)),S(0)},[k,U,W,r,n,l,a]),j=D.useCallback((me,be)=>{if(me>C*1e3+Z){l(u(!1)),O(me);return}O(me),L.current&&be!==void 0&&setTimeout(()=>{var Le;(Le=L.current)==null||Le.seekTo(be)})},[u,O,Z,l,C]);D.useEffect(()=>{L.current&&(i?L.current.play():L.current.pause())},[L,i,C,Z,O]);const G=D.useMemo(()=>{var Le,Ue,Ne,je,Ke,ut,pt,xt,De,wt;if(!k||!((Ue=(Le=k.answers)==null?void 0:Le[W])!=null&&Ue.startTime)||!((je=(Ne=k.answers)==null?void 0:Ne[W])!=null&&je.endTime))return null;const me=C>0?((ut=(Ke=k.answers)==null?void 0:Ke[W])==null?void 0:ut.startTime)+C*1e3:(xt=(pt=k.answers)==null?void 0:pt[W])==null?void 0:xt.endTime;return KO([m9.left,h+m9.left+m9.right]).domain([(wt=(De=k.answers)==null?void 0:De[W])==null?void 0:wt.startTime,me]).clamp(!0)},[k,W,h,C]);return D.useEffect(()=>{Y(L.current)},[j,Y,k,n,L]),T.jsx(Ti,{wrap:"nowrap",gap:10,mx:10,children:T.jsxs(Es,{ref:f,style:{width:"100%"},gap:0,children:[T.jsx(Ep,{}),k!==null&&W?T.jsxs(Se,{ref:F,style:{overflow:"hidden",width:"100%",pointerEvents:"none"},display:s?"block":"none",id:"waveformDiv",children:[T.jsx(M3e,{onMount:Y,plugins:[],container:"#waveformDiv",height:50,waveColor:"#484848",progressColor:"#e15759",barHeight:0,cursorColor:"rgba(0, 0, 0, 0)",children:T.jsx(L3e,{id:"waveform",height:50})}),$?T.jsx(bd,{}):null]}):null,R==="success"&&k&&G&&W&&((se=(ue=k.answers)==null?void 0:ue[W])!=null&&se.provenanceGraph)?T.jsx(Ezt,{xScale:G,trialName:W,currentNode:(E==null?void 0:E.name)||"",participantData:k,width:p||h,height:25}):null,G&&k?T.jsx(_zt,{duration:C*1e3,height:(s?50:0)+25,isPlaying:i,startTime:Z,width:h,xScale:G,updateTimer:j}):null]})})}function Szt(e,t){return t?t.getParticipantData(e):null}function Azt(e){return e?e.getAllParticipantsData():null}function kzt(){const[e]=Zf(),t=D.useMemo(()=>e.get("participantId")||void 0,[e]),n=ih(),r=Sl(),i=Cl(),{setAnalysisIsPlaying:s}=ro(),o=Bo(),a=ir(v=>v.analysisIsPlaying),{storageEngine:u}=Mi(),{value:l,status:c}=uN(Szt,[t,u]),{value:d}=uN(Azt,[u]),[f,h]=D.useMemo(()=>{if(d&&l&&t&&n){const v=d.filter(_=>_.participantConfigHash===l.participantConfigHash),b=v.findIndex(_=>_.participantId===t),w=b<v.length-1?v[b+1]:v[0],E=b>0?v[b-1]:v[v.length-1];return[[w.participantId,Vf(w.sequence).indexOf(n)],[E.participantId,Vf(E.sequence).indexOf(n)]]}return[["",0],["",0]]},[d,n,l,t]),p=D.useMemo(()=>{const v={};return d==null||d.forEach(b=>{v[b.participantConfigHash]||(v[b.participantConfigHash]=new Set),v[b.participantConfigHash].add(b.participantId)}),Object.keys(v).sort((b,w)=>b===(l==null?void 0:l.participantConfigHash)?-1:w===(l==null?void 0:l.participantConfigHash)?1:0).map(b=>({group:`Config version: ${b}`,items:[...v[b]].map(w=>({value:w,label:w,disabled:b!==(l==null?void 0:l.participantConfigHash)}))}))},[d,l==null?void 0:l.participantConfigHash]),[m,y]=D.useState("");return T.jsx(Or.Footer,{zIndex:101,withBorder:!1,children:T.jsxs(Se,{style:{backgroundColor:"var(--mantine-color-blue-1)",height:"150px"},children:[T.jsx(fl,{visible:c!=="success",overlayProps:{backgroundOpacity:.4}}),T.jsx(Czt,{setTimeString:y}),T.jsx(Ep,{children:T.jsxs(Ti,{gap:"xs",style:{height:"50px"},children:[T.jsx(Je,{size:"sm",ff:"monospace",children:m}),T.jsx(eg,{variant:"filled",size:30,onClick:()=>o(s(!a)),children:a?T.jsx(gze,{}):T.jsx(yze,{})}),T.jsx(Je,{mx:"0",children:"Participant:"}),T.jsx(Lw,{style:{width:"300px"},value:(l==null?void 0:l.participantId)||"",onChange:v=>{i(`./../${vs(0)}?participantId=${v}`)},data:p}),T.jsx(tn,{onClick:()=>i(`../${vs(+r-1)}?participantId=${t}`,{relative:"path"}),children:T.jsx(Fte,{})}),T.jsx(tn,{onClick:()=>i(`../${vs(+r+1)}?participantId=${t}`,{relative:"path"}),children:T.jsx(Bte,{})}),T.jsxs(tn,{px:"xs",disabled:!l||f[0]===l.participantId,onClick:()=>i(`./../${vs(h[1])}?participantId=${h[0]}`),children:[T.jsx(Fte,{}),T.jsx(jte,{})]}),T.jsxs(tn,{px:"xs",disabled:!l||f[0]===l.participantId,onClick:()=>i(`./../${vs(f[1])}?participantId=${f[0]}`),children:[T.jsx(jte,{}),T.jsx(Bte,{})]})]})})]})})}function Izt(){const e=D.useRef([]),t=Hf(),n=t.uiConfig.windowEventDebounceTime??100,r=ir(d=>d.showStudyBrowser),i=ir(d=>d.analysisHasAudio),s=ir(d=>d.modes);D.useEffect(()=>{const d=Gd(_=>{e.current.push([Date.now(),"focus",_.target instanceof HTMLElement?_.target.tagName:""])},n,{maxWait:n}),f=Gd(_=>{e.current.push([Date.now(),"input",_.data??""])},n,{maxWait:n}),h=Gd(_=>{e.current.push([Date.now(),"keydown",_.key])},n,{maxWait:n}),p=Gd(_=>{e.current.push([Date.now(),"keyup",_.key])},n,{maxWait:n}),m=Gd(_=>{e.current.push([Date.now(),"mousedown",[_.clientX,_.clientY]])},n,{maxWait:n}),y=Gd(_=>{e.current.push([Date.now(),"mouseup",[_.clientX,_.clientY]])},n,{maxWait:n}),v=Gd(()=>{e.current.push([Date.now(),"resize",[window.innerWidth,window.innerHeight]])},n,{maxWait:n}),b=Gd(_=>{e.current.push([Date.now(),"mousemove",[_.clientX,_.clientY]])},n,{maxWait:n}),w=Gd(()=>{e.current.push([Date.now(),"scroll",[window.scrollX,window.scrollY]])},n,{maxWait:n}),E=Gd(()=>{e.current.push([Date.now(),"visibility",document.visibilityState])},n,{maxWait:n});return window.addEventListener("focus",d,!0),window.addEventListener("input",f),window.addEventListener("keydown",h),window.addEventListener("keyup",p),window.addEventListener("mousedown",m),window.addEventListener("mouseup",y),window.addEventListener("resize",v),window.addEventListener("mousemove",b),window.addEventListener("scroll",w),document.addEventListener("visibilitychange",E),()=>{window.removeEventListener("focus",d,!0),window.removeEventListener("input",f),window.removeEventListener("keydown",h),window.removeEventListener("keyup",p),window.removeEventListener("mousedown",m),window.removeEventListener("mouseup",y),window.removeEventListener("resize",v),window.removeEventListener("mousemove",b),window.removeEventListener("scroll",w),document.removeEventListener("visibilitychange",E)}},[]);const o=t.uiConfig.sidebarWidth??300,{studyNavigatorEnabled:a,dataCollectionEnabled:u}=D.useMemo(()=>s,[s]),l=D.useMemo(()=>a&&r,[a,r]),c=cE();return T.jsx(TTe.Provider,{value:e,children:T.jsxs(Or,{padding:"md",header:{height:70},navbar:{width:o,breakpoint:"xs",collapsed:{desktop:!t.uiConfig.sidebar,mobile:!t.uiConfig.sidebar}},aside:{width:360,breakpoint:"xs",collapsed:{desktop:!l,mobile:!l}},footer:{height:(c?75:0)+(i?50:0)},children:[T.jsx(bzt,{}),T.jsx(nzt,{}),T.jsx(yzt,{studyNavigatorEnabled:a,dataCollectionEnabled:u}),T.jsx(vzt,{}),T.jsx(xzt,{}),T.jsx(Or.Main,{children:T.jsx(Qje,{})}),c&&T.jsx(kzt,{})]})})}function Rzt(e,t=!1){return typeof e=="number"?$fe(e,t):$fe(e.length,t).map(r=>r.map(i=>e[i]))}function $fe(e,t){if(e<0)throw new Error("Latin square size must be > 0");if(e==0)return[];if(e==1)return[[0]];let n=new Array(e);for(let s=0;s<e;s++)s<2?n[s]=s:s%2==0?n[s]=e-s/2:n[s]=Math.floor(s/2)+1;let r=[n],i=n;for(let s=1;s<e;s+=1){let o=i.map(a=>(a+1)%e);r.push(o),i=o}if(t&&e%2>0)for(let s=0;s<e;s+=1)r.push(r[s].slice().reverse());return r}function j3e(e,t,n){if(vl(e))return{id:e.id,orderPath:n,order:e.order,components:[],skip:[]};let r=e.components;e.order==="random"?r=e.components.sort(()=>.5-Math.random()):e.order==="latinSquare"&&t&&(r=t[n].pop().map(i=>i.startsWith("_componentBlock")?e.components[+i.slice(15)]:i)),r=r.slice(0,e.numSamples);for(let i=0;i<r.length;i+=1){const s=r[i];if(typeof s!="string"&&!Array.isArray(s)){const o=e.components.indexOf(s);r[i]=j3e(s,t,`${n}-${o}`)}}return e.interruptions&&e.interruptions.forEach(i=>{const s=[];if(i.spacing!=="random")for(let o=0;o<r.length;o+=1)(o===i.firstLocation||o>i.firstLocation&&o%i.spacing===0)&&s.push(...i.components),s.push(r[o]);if(i.spacing==="random"){const o=new Set;if(i.numInterruptions>r.length-1)throw new Error("Number of interruptions cannot be greater than the number of components");for(;o.size<i.numInterruptions;){const l=Math.floor(Math.random()*r.length-1)+1;o.add(l)}const a=Array.from(o).sort((l,c)=>l-c);let u=0;for(let l=0;l<r.length;l+=1)l===a[u]&&(s.push(...i.components),u+=1),s.push(r[l])}r=s}),{id:e.id,orderPath:n,order:e.order,components:r.flat(),skip:e.skip}}function Dzt(e,t){const n=structuredClone(e);return j3e(n,t,"root")}function z3e(e,t,n,r=0){const i=n.length>0?`${n}-${r}`:"root";e.order==="latinSquare"&&t.push(i),!vl(e)&&e.components.forEach((s,o)=>{typeof s!="string"&&!vl(s)&&z3e(s,t,i,o)})}function Pzt(e){const t=[];return z3e(e,t,"",0),t}function Mfe(e,t){const n=t.split("-");let r={};n.forEach(o=>{if(o==="root")r=e.sequence;else{if(vl(r))return;r=r.components[+o]}});const i=r.components.map((o,a)=>typeof o=="string"?o:`_componentBlock${a}`);return Rzt(i.sort(()=>.5-Math.random()),!0)}function Lfe(e){const n=Pzt(e.sequence).map(s=>({[s]:Mfe(e,s)})).reduce((s,o)=>({...s,...o}),{}),r=e.uiConfig.numSequences||1e3,i=[];return Array.from({length:r}).forEach(()=>{const s=Dzt(e.sequence,n);s.components.push("end"),i.push(s),Object.entries(n).forEach(([o,a])=>{a.length===0&&(n[o]=Mfe(e,o))})}),i}var JI={exports:{}},g9={},$h={},ty={},y9={},b9={},v9={},Ffe;function o4(){return Ffe||(Ffe=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class n extends t{constructor(b){if(super(),!e.IDENTIFIER.test(b))throw new Error("CodeGen: name must be a valid identifier");this.str=b}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=n;class r extends t{constructor(b){super(),this._items=typeof b=="string"?[b]:b}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const b=this._items[0];return b===""||b==='""'}get str(){var b;return(b=this._str)!==null&&b!==void 0?b:this._str=this._items.reduce((w,E)=>`${w}${E}`,"")}get names(){var b;return(b=this._names)!==null&&b!==void 0?b:this._names=this._items.reduce((w,E)=>(E instanceof n&&(w[E.str]=(w[E.str]||0)+1),w),{})}}e._Code=r,e.nil=new r("");function i(v,...b){const w=[v[0]];let E=0;for(;E<b.length;)a(w,b[E]),w.push(v[++E]);return new r(w)}e._=i;const s=new r("+");function o(v,...b){const w=[h(v[0])];let E=0;for(;E<b.length;)w.push(s),a(w,b[E]),w.push(s,h(v[++E]));return u(w),new r(w)}e.str=o;function a(v,b){b instanceof r?v.push(...b._items):b instanceof n?v.push(b):v.push(d(b))}e.addCodeArg=a;function u(v){let b=1;for(;b<v.length-1;){if(v[b]===s){const w=l(v[b-1],v[b+1]);if(w!==void 0){v.splice(b-1,3,w);continue}v[b++]="+"}b++}}function l(v,b){if(b==='""')return v;if(v==='""')return b;if(typeof v=="string")return b instanceof n||v[v.length-1]!=='"'?void 0:typeof b!="string"?`${v.slice(0,-1)}${b}"`:b[0]==='"'?v.slice(0,-1)+b.slice(1):void 0;if(typeof b=="string"&&b[0]==='"'&&!(v instanceof n))return`"${v}${b.slice(1)}`}function c(v,b){return b.emptyStr()?v:v.emptyStr()?b:o`${v}${b}`}e.strConcat=c;function d(v){return typeof v=="number"||typeof v=="boolean"||v===null?v:h(Array.isArray(v)?v.join(","):v)}function f(v){return new r(h(v))}e.stringify=f;function h(v){return JSON.stringify(v).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=h;function p(v){return typeof v=="string"&&e.IDENTIFIER.test(v)?new r(`.${v}`):i`[${v}]`}e.getProperty=p;function m(v){if(typeof v=="string"&&e.IDENTIFIER.test(v))return new r(`${v}`);throw new Error(`CodeGen: invalid export name: ${v}, use explicit $id name mapping`)}e.getEsmExportName=m;function y(v){return new r(v.toString())}e.regexpCode=y}(v9)),v9}var x9={},Bfe;function jfe(){return Bfe||(Bfe=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=o4();class n extends Error{constructor(l){super(`CodeGen: "code" for ${l} not defined`),this.value=l.value}}var r;(function(u){u[u.Started=0]="Started",u[u.Completed=1]="Completed"})(r||(e.UsedValueState=r={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class i{constructor({prefixes:l,parent:c}={}){this._names={},this._prefixes=l,this._parent=c}toName(l){return l instanceof t.Name?l:this.name(l)}name(l){return new t.Name(this._newName(l))}_newName(l){const c=this._names[l]||this._nameGroup(l);return`${l}${c.index++}`}_nameGroup(l){var c,d;if(!((d=(c=this._parent)===null||c===void 0?void 0:c._prefixes)===null||d===void 0)&&d.has(l)||this._prefixes&&!this._prefixes.has(l))throw new Error(`CodeGen: prefix "${l}" is not allowed in this scope`);return this._names[l]={prefix:l,index:0}}}e.Scope=i;class s extends t.Name{constructor(l,c){super(c),this.prefix=l}setValue(l,{property:c,itemIndex:d}){this.value=l,this.scopePath=(0,t._)`.${new t.Name(c)}[${d}]`}}e.ValueScopeName=s;const o=(0,t._)`\n`;class a extends i{constructor(l){super(l),this._values={},this._scope=l.scope,this.opts={...l,_n:l.lines?o:t.nil}}get(){return this._scope}name(l){return new s(l,this._newName(l))}value(l,c){var d;if(c.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const f=this.toName(l),{prefix:h}=f,p=(d=c.key)!==null&&d!==void 0?d:c.ref;let m=this._values[h];if(m){const b=m.get(p);if(b)return b}else m=this._values[h]=new Map;m.set(p,f);const y=this._scope[h]||(this._scope[h]=[]),v=y.length;return y[v]=c.ref,f.setValue(c,{property:h,itemIndex:v}),f}getValue(l,c){const d=this._values[l];if(d)return d.get(c)}scopeRefs(l,c=this._values){return this._reduceValues(c,d=>{if(d.scopePath===void 0)throw new Error(`CodeGen: name "${d}" has no value`);return(0,t._)`${l}${d.scopePath}`})}scopeCode(l=this._values,c,d){return this._reduceValues(l,f=>{if(f.value===void 0)throw new Error(`CodeGen: name "${f}" has no value`);return f.value.code},c,d)}_reduceValues(l,c,d={},f){let h=t.nil;for(const p in l){const m=l[p];if(!m)continue;const y=d[p]=d[p]||new Map;m.forEach(v=>{if(y.has(v))return;y.set(v,r.Started);let b=c(v);if(b){const w=this.opts.es5?e.varKinds.var:e.varKinds.const;h=(0,t._)`${h}${w} ${v} = ${b};${this.opts._n}`}else if(b=f==null?void 0:f(v))h=(0,t._)`${h}${b}${this.opts._n}`;else throw new n(v);y.set(v,r.Completed)})}return h}}e.ValueScope=a}(x9)),x9}var zfe;function Mn(){return zfe||(zfe=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=o4(),n=jfe();var r=o4();Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return r.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return r.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return r.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}});var i=jfe();Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return i.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return i.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return i.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return i.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class s{optimizeNodes(){return this}optimizeNames(G,X){return this}}class o extends s{constructor(G,X,ne){super(),this.varKind=G,this.name=X,this.rhs=ne}render({es5:G,_n:X}){const ne=G?n.varKinds.var:this.varKind,pe=this.rhs===void 0?"":` = ${this.rhs}`;return`${ne} ${this.name}${pe};`+X}optimizeNames(G,X){if(G[this.name.str])return this.rhs&&(this.rhs=z(this.rhs,G,X)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class a extends s{constructor(G,X,ne){super(),this.lhs=G,this.rhs=X,this.sideEffects=ne}render({_n:G}){return`${this.lhs} = ${this.rhs};`+G}optimizeNames(G,X){if(!(this.lhs instanceof t.Name&&!G[this.lhs.str]&&!this.sideEffects))return this.rhs=z(this.rhs,G,X),this}get names(){const G=this.lhs instanceof t.Name?{}:{...this.lhs.names};return $(G,this.rhs)}}class u extends a{constructor(G,X,ne,pe){super(G,ne,pe),this.op=X}render({_n:G}){return`${this.lhs} ${this.op}= ${this.rhs};`+G}}class l extends s{constructor(G){super(),this.label=G,this.names={}}render({_n:G}){return`${this.label}:`+G}}class c extends s{constructor(G){super(),this.label=G,this.names={}}render({_n:G}){return`break${this.label?` ${this.label}`:""};`+G}}class d extends s{constructor(G){super(),this.error=G}render({_n:G}){return`throw ${this.error};`+G}get names(){return this.error.names}}class f extends s{constructor(G){super(),this.code=G}render({_n:G}){return`${this.code};`+G}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(G,X){return this.code=z(this.code,G,X),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class h extends s{constructor(G=[]){super(),this.nodes=G}render(G){return this.nodes.reduce((X,ne)=>X+ne.render(G),"")}optimizeNodes(){const{nodes:G}=this;let X=G.length;for(;X--;){const ne=G[X].optimizeNodes();Array.isArray(ne)?G.splice(X,1,...ne):ne?G[X]=ne:G.splice(X,1)}return G.length>0?this:void 0}optimizeNames(G,X){const{nodes:ne}=this;let pe=ne.length;for(;pe--;){const de=ne[pe];de.optimizeNames(G,X)||(q(G,de.names),ne.splice(pe,1))}return ne.length>0?this:void 0}get names(){return this.nodes.reduce((G,X)=>F(G,X.names),{})}}class p extends h{render(G){return"{"+G._n+super.render(G)+"}"+G._n}}class m extends h{}class y extends p{}y.kind="else";class v extends p{constructor(G,X){super(X),this.condition=G}render(G){let X=`if(${this.condition})`+super.render(G);return this.else&&(X+="else "+this.else.render(G)),X}optimizeNodes(){super.optimizeNodes();const G=this.condition;if(G===!0)return this.nodes;let X=this.else;if(X){const ne=X.optimizeNodes();X=this.else=Array.isArray(ne)?new y(ne):ne}if(X)return G===!1?X instanceof v?X:X.nodes:this.nodes.length?this:new v(W(G),X instanceof v?[X]:X.nodes);if(!(G===!1||!this.nodes.length))return this}optimizeNames(G,X){var ne;if(this.else=(ne=this.else)===null||ne===void 0?void 0:ne.optimizeNames(G,X),!!(super.optimizeNames(G,X)||this.else))return this.condition=z(this.condition,G,X),this}get names(){const G=super.names;return $(G,this.condition),this.else&&F(G,this.else.names),G}}v.kind="if";class b extends p{}b.kind="for";class w extends b{constructor(G){super(),this.iteration=G}render(G){return`for(${this.iteration})`+super.render(G)}optimizeNames(G,X){if(super.optimizeNames(G,X))return this.iteration=z(this.iteration,G,X),this}get names(){return F(super.names,this.iteration.names)}}class E extends b{constructor(G,X,ne,pe){super(),this.varKind=G,this.name=X,this.from=ne,this.to=pe}render(G){const X=G.es5?n.varKinds.var:this.varKind,{name:ne,from:pe,to:de}=this;return`for(${X} ${ne}=${pe}; ${ne}<${de}; ${ne}++)`+super.render(G)}get names(){const G=$(super.names,this.from);return $(G,this.to)}}class _ extends b{constructor(G,X,ne,pe){super(),this.loop=G,this.varKind=X,this.name=ne,this.iterable=pe}render(G){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(G)}optimizeNames(G,X){if(super.optimizeNames(G,X))return this.iterable=z(this.iterable,G,X),this}get names(){return F(super.names,this.iterable.names)}}class C extends p{constructor(G,X,ne){super(),this.name=G,this.args=X,this.async=ne}render(G){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(G)}}C.kind="func";class S extends h{render(G){return"return "+super.render(G)}}S.kind="return";class k extends p{render(G){let X="try"+super.render(G);return this.catch&&(X+=this.catch.render(G)),this.finally&&(X+=this.finally.render(G)),X}optimizeNodes(){var G,X;return super.optimizeNodes(),(G=this.catch)===null||G===void 0||G.optimizeNodes(),(X=this.finally)===null||X===void 0||X.optimizeNodes(),this}optimizeNames(G,X){var ne,pe;return super.optimizeNames(G,X),(ne=this.catch)===null||ne===void 0||ne.optimizeNames(G,X),(pe=this.finally)===null||pe===void 0||pe.optimizeNames(G,X),this}get names(){const G=super.names;return this.catch&&F(G,this.catch.names),this.finally&&F(G,this.finally.names),G}}class R extends p{constructor(G){super(),this.error=G}render(G){return`catch(${this.error})`+super.render(G)}}R.kind="catch";class N extends p{render(G){return"finally"+super.render(G)}}N.kind="finally";class O{constructor(G,X={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...X,_n:X.lines?`
`:""},this._extScope=G,this._scope=new n.Scope({parent:G}),this._nodes=[new m]}toString(){return this._root.render(this.opts)}name(G){return this._scope.name(G)}scopeName(G){return this._extScope.name(G)}scopeValue(G,X){const ne=this._extScope.value(G,X);return(this._values[ne.prefix]||(this._values[ne.prefix]=new Set)).add(ne),ne}getScopeValue(G,X){return this._extScope.getValue(G,X)}scopeRefs(G){return this._extScope.scopeRefs(G,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(G,X,ne,pe){const de=this._scope.toName(X);return ne!==void 0&&pe&&(this._constants[de.str]=ne),this._leafNode(new o(G,de,ne)),de}const(G,X,ne){return this._def(n.varKinds.const,G,X,ne)}let(G,X,ne){return this._def(n.varKinds.let,G,X,ne)}var(G,X,ne){return this._def(n.varKinds.var,G,X,ne)}assign(G,X,ne){return this._leafNode(new a(G,X,ne))}add(G,X){return this._leafNode(new u(G,e.operators.ADD,X))}code(G){return typeof G=="function"?G():G!==t.nil&&this._leafNode(new f(G)),this}object(...G){const X=["{"];for(const[ne,pe]of G)X.length>1&&X.push(","),X.push(ne),(ne!==pe||this.opts.es5)&&(X.push(":"),(0,t.addCodeArg)(X,pe));return X.push("}"),new t._Code(X)}if(G,X,ne){if(this._blockNode(new v(G)),X&&ne)this.code(X).else().code(ne).endIf();else if(X)this.code(X).endIf();else if(ne)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(G){return this._elseNode(new v(G))}else(){return this._elseNode(new y)}endIf(){return this._endBlockNode(v,y)}_for(G,X){return this._blockNode(G),X&&this.code(X).endFor(),this}for(G,X){return this._for(new w(G),X)}forRange(G,X,ne,pe,de=this.opts.es5?n.varKinds.var:n.varKinds.let){const xe=this._scope.toName(G);return this._for(new E(de,xe,X,ne),()=>pe(xe))}forOf(G,X,ne,pe=n.varKinds.const){const de=this._scope.toName(G);if(this.opts.es5){const xe=X instanceof t.Name?X:this.var("_arr",X);return this.forRange("_i",0,(0,t._)`${xe}.length`,Ce=>{this.var(de,(0,t._)`${xe}[${Ce}]`),ne(de)})}return this._for(new _("of",pe,de,X),()=>ne(de))}forIn(G,X,ne,pe=this.opts.es5?n.varKinds.var:n.varKinds.const){if(this.opts.ownProperties)return this.forOf(G,(0,t._)`Object.keys(${X})`,ne);const de=this._scope.toName(G);return this._for(new _("in",pe,de,X),()=>ne(de))}endFor(){return this._endBlockNode(b)}label(G){return this._leafNode(new l(G))}break(G){return this._leafNode(new c(G))}return(G){const X=new S;if(this._blockNode(X),this.code(G),X.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(S)}try(G,X,ne){if(!X&&!ne)throw new Error('CodeGen: "try" without "catch" and "finally"');const pe=new k;if(this._blockNode(pe),this.code(G),X){const de=this.name("e");this._currNode=pe.catch=new R(de),X(de)}return ne&&(this._currNode=pe.finally=new N,this.code(ne)),this._endBlockNode(R,N)}throw(G){return this._leafNode(new d(G))}block(G,X){return this._blockStarts.push(this._nodes.length),G&&this.code(G).endBlock(X),this}endBlock(G){const X=this._blockStarts.pop();if(X===void 0)throw new Error("CodeGen: not in self-balancing block");const ne=this._nodes.length-X;if(ne<0||G!==void 0&&ne!==G)throw new Error(`CodeGen: wrong number of nodes: ${ne} vs ${G} expected`);return this._nodes.length=X,this}func(G,X=t.nil,ne,pe){return this._blockNode(new C(G,X,ne)),pe&&this.code(pe).endFunc(),this}endFunc(){return this._endBlockNode(C)}optimize(G=1){for(;G-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(G){return this._currNode.nodes.push(G),this}_blockNode(G){this._currNode.nodes.push(G),this._nodes.push(G)}_endBlockNode(G,X){const ne=this._currNode;if(ne instanceof G||X&&ne instanceof X)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${X?`${G.kind}/${X.kind}`:G.kind}"`)}_elseNode(G){const X=this._currNode;if(!(X instanceof v))throw new Error('CodeGen: "else" without "if"');return this._currNode=X.else=G,this}get _root(){return this._nodes[0]}get _currNode(){const G=this._nodes;return G[G.length-1]}set _currNode(G){const X=this._nodes;X[X.length-1]=G}}e.CodeGen=O;function F(j,G){for(const X in G)j[X]=(j[X]||0)+(G[X]||0);return j}function $(j,G){return G instanceof t._CodeOrName?F(j,G.names):j}function z(j,G,X){if(j instanceof t.Name)return ne(j);if(!pe(j))return j;return new t._Code(j._items.reduce((de,xe)=>(xe instanceof t.Name&&(xe=ne(xe)),xe instanceof t._Code?de.push(...xe._items):de.push(xe),de),[]));function ne(de){const xe=X[de.str];return xe===void 0||G[de.str]!==1?de:(delete G[de.str],xe)}function pe(de){return de instanceof t._Code&&de._items.some(xe=>xe instanceof t.Name&&G[xe.str]===1&&X[xe.str]!==void 0)}}function q(j,G){for(const X in G)j[X]=(j[X]||0)-(G[X]||0)}function W(j){return typeof j=="boolean"||typeof j=="number"||j===null?!j:(0,t._)`!${Y(j)}`}e.not=W;const J=L(e.operators.AND);function K(...j){return j.reduce(J)}e.and=K;const Z=L(e.operators.OR);function U(...j){return j.reduce(Z)}e.or=U;function L(j){return(G,X)=>G===t.nil?X:X===t.nil?G:(0,t._)`${Y(G)} ${j} ${Y(X)}`}function Y(j){return j instanceof t.Name?j:(0,t._)`(${j})`}}(b9)),b9}var In={},Ufe;function yr(){if(Ufe)return In;Ufe=1,Object.defineProperty(In,"__esModule",{value:!0}),In.checkStrictMode=In.getErrorPath=In.Type=In.useFunc=In.setEvaluated=In.evaluatedPropsToName=In.mergeEvaluated=In.eachItem=In.unescapeJsonPointer=In.escapeJsonPointer=In.escapeFragment=In.unescapeFragment=In.schemaRefOrVal=In.schemaHasRulesButRef=In.schemaHasRules=In.checkUnknownRules=In.alwaysValidSchema=In.toHash=void 0;const e=Mn(),t=o4();function n(_){const C={};for(const S of _)C[S]=!0;return C}In.toHash=n;function r(_,C){return typeof C=="boolean"?C:Object.keys(C).length===0?!0:(i(_,C),!s(C,_.self.RULES.all))}In.alwaysValidSchema=r;function i(_,C=_.schema){const{opts:S,self:k}=_;if(!S.strictSchema||typeof C=="boolean")return;const R=k.RULES.keywords;for(const N in C)R[N]||E(_,`unknown keyword: "${N}"`)}In.checkUnknownRules=i;function s(_,C){if(typeof _=="boolean")return!_;for(const S in _)if(C[S])return!0;return!1}In.schemaHasRules=s;function o(_,C){if(typeof _=="boolean")return!_;for(const S in _)if(S!=="$ref"&&C.all[S])return!0;return!1}In.schemaHasRulesButRef=o;function a({topSchemaRef:_,schemaPath:C},S,k,R){if(!R){if(typeof S=="number"||typeof S=="boolean")return S;if(typeof S=="string")return(0,e._)`${S}`}return(0,e._)`${_}${C}${(0,e.getProperty)(k)}`}In.schemaRefOrVal=a;function u(_){return d(decodeURIComponent(_))}In.unescapeFragment=u;function l(_){return encodeURIComponent(c(_))}In.escapeFragment=l;function c(_){return typeof _=="number"?`${_}`:_.replace(/~/g,"~0").replace(/\//g,"~1")}In.escapeJsonPointer=c;function d(_){return _.replace(/~1/g,"/").replace(/~0/g,"~")}In.unescapeJsonPointer=d;function f(_,C){if(Array.isArray(_))for(const S of _)C(S);else C(_)}In.eachItem=f;function h({mergeNames:_,mergeToName:C,mergeValues:S,resultToName:k}){return(R,N,O,F)=>{const $=O===void 0?N:O instanceof e.Name?(N instanceof e.Name?_(R,N,O):C(R,N,O),O):N instanceof e.Name?(C(R,O,N),N):S(N,O);return F===e.Name&&!($ instanceof e.Name)?k(R,$):$}}In.mergeEvaluated={props:h({mergeNames:(_,C,S)=>_.if((0,e._)`${S} !== true && ${C} !== undefined`,()=>{_.if((0,e._)`${C} === true`,()=>_.assign(S,!0),()=>_.assign(S,(0,e._)`${S} || {}`).code((0,e._)`Object.assign(${S}, ${C})`))}),mergeToName:(_,C,S)=>_.if((0,e._)`${S} !== true`,()=>{C===!0?_.assign(S,!0):(_.assign(S,(0,e._)`${S} || {}`),m(_,S,C))}),mergeValues:(_,C)=>_===!0?!0:{..._,...C},resultToName:p}),items:h({mergeNames:(_,C,S)=>_.if((0,e._)`${S} !== true && ${C} !== undefined`,()=>_.assign(S,(0,e._)`${C} === true ? true : ${S} > ${C} ? ${S} : ${C}`)),mergeToName:(_,C,S)=>_.if((0,e._)`${S} !== true`,()=>_.assign(S,C===!0?!0:(0,e._)`${S} > ${C} ? ${S} : ${C}`)),mergeValues:(_,C)=>_===!0?!0:Math.max(_,C),resultToName:(_,C)=>_.var("items",C)})};function p(_,C){if(C===!0)return _.var("props",!0);const S=_.var("props",(0,e._)`{}`);return C!==void 0&&m(_,S,C),S}In.evaluatedPropsToName=p;function m(_,C,S){Object.keys(S).forEach(k=>_.assign((0,e._)`${C}${(0,e.getProperty)(k)}`,!0))}In.setEvaluated=m;const y={};function v(_,C){return _.scopeValue("func",{ref:C,code:y[C.code]||(y[C.code]=new t._Code(C.code))})}In.useFunc=v;var b;(function(_){_[_.Num=0]="Num",_[_.Str=1]="Str"})(b||(In.Type=b={}));function w(_,C,S){if(_ instanceof e.Name){const k=C===b.Num;return S?k?(0,e._)`"[" + ${_} + "]"`:(0,e._)`"['" + ${_} + "']"`:k?(0,e._)`"/" + ${_}`:(0,e._)`"/" + ${_}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return S?(0,e.getProperty)(_).toString():"/"+c(_)}In.getErrorPath=w;function E(_,C,S=_.opts.strictSchema){if(S){if(C=`strict mode: ${C}`,S===!0)throw new Error(C);_.self.logger.warn(C)}}return In.checkStrictMode=E,In}var ZI={},Vfe;function Sg(){if(Vfe)return ZI;Vfe=1,Object.defineProperty(ZI,"__esModule",{value:!0});const e=Mn(),t={data:new e.Name("data"),valCxt:new e.Name("valCxt"),instancePath:new e.Name("instancePath"),parentData:new e.Name("parentData"),parentDataProperty:new e.Name("parentDataProperty"),rootData:new e.Name("rootData"),dynamicAnchors:new e.Name("dynamicAnchors"),vErrors:new e.Name("vErrors"),errors:new e.Name("errors"),this:new e.Name("this"),self:new e.Name("self"),scope:new e.Name("scope"),json:new e.Name("json"),jsonPos:new e.Name("jsonPos"),jsonLen:new e.Name("jsonLen"),jsonPart:new e.Name("jsonPart")};return ZI.default=t,ZI}var Hfe;function l5(){return Hfe||(Hfe=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=Mn(),n=yr(),r=Sg();e.keywordError={message:({keyword:y})=>(0,t.str)`must pass "${y}" keyword validation`},e.keyword$DataError={message:({keyword:y,schemaType:v})=>v?(0,t.str)`"${y}" keyword must be ${v} ($data)`:(0,t.str)`"${y}" keyword is invalid ($data)`};function i(y,v=e.keywordError,b,w){const{it:E}=y,{gen:_,compositeRule:C,allErrors:S}=E,k=d(y,v,b);w??(C||S)?u(_,k):l(E,(0,t._)`[${k}]`)}e.reportError=i;function s(y,v=e.keywordError,b){const{it:w}=y,{gen:E,compositeRule:_,allErrors:C}=w,S=d(y,v,b);u(E,S),_||C||l(w,r.default.vErrors)}e.reportExtraError=s;function o(y,v){y.assign(r.default.errors,v),y.if((0,t._)`${r.default.vErrors} !== null`,()=>y.if(v,()=>y.assign((0,t._)`${r.default.vErrors}.length`,v),()=>y.assign(r.default.vErrors,null)))}e.resetErrorsCount=o;function a({gen:y,keyword:v,schemaValue:b,data:w,errsCount:E,it:_}){if(E===void 0)throw new Error("ajv implementation error");const C=y.name("err");y.forRange("i",E,r.default.errors,S=>{y.const(C,(0,t._)`${r.default.vErrors}[${S}]`),y.if((0,t._)`${C}.instancePath === undefined`,()=>y.assign((0,t._)`${C}.instancePath`,(0,t.strConcat)(r.default.instancePath,_.errorPath))),y.assign((0,t._)`${C}.schemaPath`,(0,t.str)`${_.errSchemaPath}/${v}`),_.opts.verbose&&(y.assign((0,t._)`${C}.schema`,b),y.assign((0,t._)`${C}.data`,w))})}e.extendErrors=a;function u(y,v){const b=y.const("err",v);y.if((0,t._)`${r.default.vErrors} === null`,()=>y.assign(r.default.vErrors,(0,t._)`[${b}]`),(0,t._)`${r.default.vErrors}.push(${b})`),y.code((0,t._)`${r.default.errors}++`)}function l(y,v){const{gen:b,validateName:w,schemaEnv:E}=y;E.$async?b.throw((0,t._)`new ${y.ValidationError}(${v})`):(b.assign((0,t._)`${w}.errors`,v),b.return(!1))}const c={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function d(y,v,b){const{createErrors:w}=y.it;return w===!1?(0,t._)`{}`:f(y,v,b)}function f(y,v,b={}){const{gen:w,it:E}=y,_=[h(E,b),p(y,b)];return m(y,v,_),w.object(..._)}function h({errorPath:y},{instancePath:v}){const b=v?(0,t.str)`${y}${(0,n.getErrorPath)(v,n.Type.Str)}`:y;return[r.default.instancePath,(0,t.strConcat)(r.default.instancePath,b)]}function p({keyword:y,it:{errSchemaPath:v}},{schemaPath:b,parentSchema:w}){let E=w?v:(0,t.str)`${v}/${y}`;return b&&(E=(0,t.str)`${E}${(0,n.getErrorPath)(b,n.Type.Str)}`),[c.schemaPath,E]}function m(y,{params:v,message:b},w){const{keyword:E,data:_,schemaValue:C,it:S}=y,{opts:k,propertyName:R,topSchemaRef:N,schemaPath:O}=S;w.push([c.keyword,E],[c.params,typeof v=="function"?v(y):v||(0,t._)`{}`]),k.messages&&w.push([c.message,typeof b=="function"?b(y):b]),k.verbose&&w.push([c.schema,C],[c.parentSchema,(0,t._)`${N}${O}`],[r.default.data,_]),R&&w.push([c.propertyName,R])}}(y9)),y9}var qfe;function Nzt(){if(qfe)return ty;qfe=1,Object.defineProperty(ty,"__esModule",{value:!0}),ty.boolOrEmptySchema=ty.topBoolOrEmptySchema=void 0;const e=l5(),t=Mn(),n=Sg(),r={message:"boolean schema is false"};function i(a){const{gen:u,schema:l,validateName:c}=a;l===!1?o(a,!1):typeof l=="object"&&l.$async===!0?u.return(n.default.data):(u.assign((0,t._)`${c}.errors`,null),u.return(!0))}ty.topBoolOrEmptySchema=i;function s(a,u){const{gen:l,schema:c}=a;c===!1?(l.var(u,!1),o(a)):l.var(u,!0)}ty.boolOrEmptySchema=s;function o(a,u){const{gen:l,data:c}=a,d={gen:l,keyword:"false schema",data:c,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:a};(0,e.reportError)(d,r,void 0,u)}return ty}var go={},ny={},Wfe;function U3e(){if(Wfe)return ny;Wfe=1,Object.defineProperty(ny,"__esModule",{value:!0}),ny.getRules=ny.isJSONType=void 0;const e=["string","number","integer","boolean","null","object","array"],t=new Set(e);function n(i){return typeof i=="string"&&t.has(i)}ny.isJSONType=n;function r(){const i={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...i,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},i.number,i.string,i.array,i.object],post:{rules:[]},all:{},keywords:{}}}return ny.getRules=r,ny}var Mh={},Gfe;function V3e(){if(Gfe)return Mh;Gfe=1,Object.defineProperty(Mh,"__esModule",{value:!0}),Mh.shouldUseRule=Mh.shouldUseGroup=Mh.schemaHasRulesForType=void 0;function e({schema:r,self:i},s){const o=i.RULES.types[s];return o&&o!==!0&&t(r,o)}Mh.schemaHasRulesForType=e;function t(r,i){return i.rules.some(s=>n(r,s))}Mh.shouldUseGroup=t;function n(r,i){var s;return r[i.keyword]!==void 0||((s=i.definition.implements)===null||s===void 0?void 0:s.some(o=>r[o]!==void 0))}return Mh.shouldUseRule=n,Mh}var Yfe;function a4(){if(Yfe)return go;Yfe=1,Object.defineProperty(go,"__esModule",{value:!0}),go.reportTypeError=go.checkDataTypes=go.checkDataType=go.coerceAndCheckDataType=go.getJSONTypes=go.getSchemaTypes=go.DataType=void 0;const e=U3e(),t=V3e(),n=l5(),r=Mn(),i=yr();var s;(function(b){b[b.Correct=0]="Correct",b[b.Wrong=1]="Wrong"})(s||(go.DataType=s={}));function o(b){const w=a(b.type);if(w.includes("null")){if(b.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!w.length&&b.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');b.nullable===!0&&w.push("null")}return w}go.getSchemaTypes=o;function a(b){const w=Array.isArray(b)?b:b?[b]:[];if(w.every(e.isJSONType))return w;throw new Error("type must be JSONType or JSONType[]: "+w.join(","))}go.getJSONTypes=a;function u(b,w){const{gen:E,data:_,opts:C}=b,S=c(w,C.coerceTypes),k=w.length>0&&!(S.length===0&&w.length===1&&(0,t.schemaHasRulesForType)(b,w[0]));if(k){const R=p(w,_,C.strictNumbers,s.Wrong);E.if(R,()=>{S.length?d(b,w,S):y(b)})}return k}go.coerceAndCheckDataType=u;const l=new Set(["string","number","integer","boolean","null"]);function c(b,w){return w?b.filter(E=>l.has(E)||w==="array"&&E==="array"):[]}function d(b,w,E){const{gen:_,data:C,opts:S}=b,k=_.let("dataType",(0,r._)`typeof ${C}`),R=_.let("coerced",(0,r._)`undefined`);S.coerceTypes==="array"&&_.if((0,r._)`${k} == 'object' && Array.isArray(${C}) && ${C}.length == 1`,()=>_.assign(C,(0,r._)`${C}[0]`).assign(k,(0,r._)`typeof ${C}`).if(p(w,C,S.strictNumbers),()=>_.assign(R,C))),_.if((0,r._)`${R} !== undefined`);for(const O of E)(l.has(O)||O==="array"&&S.coerceTypes==="array")&&N(O);_.else(),y(b),_.endIf(),_.if((0,r._)`${R} !== undefined`,()=>{_.assign(C,R),f(b,R)});function N(O){switch(O){case"string":_.elseIf((0,r._)`${k} == "number" || ${k} == "boolean"`).assign(R,(0,r._)`"" + ${C}`).elseIf((0,r._)`${C} === null`).assign(R,(0,r._)`""`);return;case"number":_.elseIf((0,r._)`${k} == "boolean" || ${C} === null
              || (${k} == "string" && ${C} && ${C} == +${C})`).assign(R,(0,r._)`+${C}`);return;case"integer":_.elseIf((0,r._)`${k} === "boolean" || ${C} === null
              || (${k} === "string" && ${C} && ${C} == +${C} && !(${C} % 1))`).assign(R,(0,r._)`+${C}`);return;case"boolean":_.elseIf((0,r._)`${C} === "false" || ${C} === 0 || ${C} === null`).assign(R,!1).elseIf((0,r._)`${C} === "true" || ${C} === 1`).assign(R,!0);return;case"null":_.elseIf((0,r._)`${C} === "" || ${C} === 0 || ${C} === false`),_.assign(R,null);return;case"array":_.elseIf((0,r._)`${k} === "string" || ${k} === "number"
              || ${k} === "boolean" || ${C} === null`).assign(R,(0,r._)`[${C}]`)}}}function f({gen:b,parentData:w,parentDataProperty:E},_){b.if((0,r._)`${w} !== undefined`,()=>b.assign((0,r._)`${w}[${E}]`,_))}function h(b,w,E,_=s.Correct){const C=_===s.Correct?r.operators.EQ:r.operators.NEQ;let S;switch(b){case"null":return(0,r._)`${w} ${C} null`;case"array":S=(0,r._)`Array.isArray(${w})`;break;case"object":S=(0,r._)`${w} && typeof ${w} == "object" && !Array.isArray(${w})`;break;case"integer":S=k((0,r._)`!(${w} % 1) && !isNaN(${w})`);break;case"number":S=k();break;default:return(0,r._)`typeof ${w} ${C} ${b}`}return _===s.Correct?S:(0,r.not)(S);function k(R=r.nil){return(0,r.and)((0,r._)`typeof ${w} == "number"`,R,E?(0,r._)`isFinite(${w})`:r.nil)}}go.checkDataType=h;function p(b,w,E,_){if(b.length===1)return h(b[0],w,E,_);let C;const S=(0,i.toHash)(b);if(S.array&&S.object){const k=(0,r._)`typeof ${w} != "object"`;C=S.null?k:(0,r._)`!${w} || ${k}`,delete S.null,delete S.array,delete S.object}else C=r.nil;S.number&&delete S.integer;for(const k in S)C=(0,r.and)(C,h(k,w,E,_));return C}go.checkDataTypes=p;const m={message:({schema:b})=>`must be ${b}`,params:({schema:b,schemaValue:w})=>typeof b=="string"?(0,r._)`{type: ${b}}`:(0,r._)`{type: ${w}}`};function y(b){const w=v(b);(0,n.reportError)(w,m)}go.reportTypeError=y;function v(b){const{gen:w,data:E,schema:_}=b,C=(0,i.schemaRefOrVal)(b,_,"type");return{gen:w,keyword:"type",data:E,schema:_.type,schemaCode:C,schemaValue:C,parentSchema:_,params:{},it:b}}return go}var X_={},Kfe;function Ozt(){if(Kfe)return X_;Kfe=1,Object.defineProperty(X_,"__esModule",{value:!0}),X_.assignDefaults=void 0;const e=Mn(),t=yr();function n(i,s){const{properties:o,items:a}=i.schema;if(s==="object"&&o)for(const u in o)r(i,u,o[u].default);else s==="array"&&Array.isArray(a)&&a.forEach((u,l)=>r(i,l,u.default))}X_.assignDefaults=n;function r(i,s,o){const{gen:a,compositeRule:u,data:l,opts:c}=i;if(o===void 0)return;const d=(0,e._)`${l}${(0,e.getProperty)(s)}`;if(u){(0,t.checkStrictMode)(i,`default is ignored for: ${d}`);return}let f=(0,e._)`${d} === undefined`;c.useDefaults==="empty"&&(f=(0,e._)`${f} || ${d} === null || ${d} === ""`),a.if(f,(0,e._)`${d} = ${(0,e.stringify)(o)}`)}return X_}var Pc={},Sr={},Xfe;function Nd(){if(Xfe)return Sr;Xfe=1,Object.defineProperty(Sr,"__esModule",{value:!0}),Sr.validateUnion=Sr.validateArray=Sr.usePattern=Sr.callValidateCode=Sr.schemaProperties=Sr.allSchemaProperties=Sr.noPropertyInData=Sr.propertyInData=Sr.isOwnProperty=Sr.hasPropFunc=Sr.reportMissingProp=Sr.checkMissingProp=Sr.checkReportMissingProp=void 0;const e=Mn(),t=yr(),n=Sg(),r=yr();function i(b,w){const{gen:E,data:_,it:C}=b;E.if(c(E,_,w,C.opts.ownProperties),()=>{b.setParams({missingProperty:(0,e._)`${w}`},!0),b.error()})}Sr.checkReportMissingProp=i;function s({gen:b,data:w,it:{opts:E}},_,C){return(0,e.or)(..._.map(S=>(0,e.and)(c(b,w,S,E.ownProperties),(0,e._)`${C} = ${S}`)))}Sr.checkMissingProp=s;function o(b,w){b.setParams({missingProperty:w},!0),b.error()}Sr.reportMissingProp=o;function a(b){return b.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,e._)`Object.prototype.hasOwnProperty`})}Sr.hasPropFunc=a;function u(b,w,E){return(0,e._)`${a(b)}.call(${w}, ${E})`}Sr.isOwnProperty=u;function l(b,w,E,_){const C=(0,e._)`${w}${(0,e.getProperty)(E)} !== undefined`;return _?(0,e._)`${C} && ${u(b,w,E)}`:C}Sr.propertyInData=l;function c(b,w,E,_){const C=(0,e._)`${w}${(0,e.getProperty)(E)} === undefined`;return _?(0,e.or)(C,(0,e.not)(u(b,w,E))):C}Sr.noPropertyInData=c;function d(b){return b?Object.keys(b).filter(w=>w!=="__proto__"):[]}Sr.allSchemaProperties=d;function f(b,w){return d(w).filter(E=>!(0,t.alwaysValidSchema)(b,w[E]))}Sr.schemaProperties=f;function h({schemaCode:b,data:w,it:{gen:E,topSchemaRef:_,schemaPath:C,errorPath:S},it:k},R,N,O){const F=O?(0,e._)`${b}, ${w}, ${_}${C}`:w,$=[[n.default.instancePath,(0,e.strConcat)(n.default.instancePath,S)],[n.default.parentData,k.parentData],[n.default.parentDataProperty,k.parentDataProperty],[n.default.rootData,n.default.rootData]];k.opts.dynamicRef&&$.push([n.default.dynamicAnchors,n.default.dynamicAnchors]);const z=(0,e._)`${F}, ${E.object(...$)}`;return N!==e.nil?(0,e._)`${R}.call(${N}, ${z})`:(0,e._)`${R}(${z})`}Sr.callValidateCode=h;const p=(0,e._)`new RegExp`;function m({gen:b,it:{opts:w}},E){const _=w.unicodeRegExp?"u":"",{regExp:C}=w.code,S=C(E,_);return b.scopeValue("pattern",{key:S.toString(),ref:S,code:(0,e._)`${C.code==="new RegExp"?p:(0,r.useFunc)(b,C)}(${E}, ${_})`})}Sr.usePattern=m;function y(b){const{gen:w,data:E,keyword:_,it:C}=b,S=w.name("valid");if(C.allErrors){const R=w.let("valid",!0);return k(()=>w.assign(R,!1)),R}return w.var(S,!0),k(()=>w.break()),S;function k(R){const N=w.const("len",(0,e._)`${E}.length`);w.forRange("i",0,N,O=>{b.subschema({keyword:_,dataProp:O,dataPropType:t.Type.Num},S),w.if((0,e.not)(S),R)})}}Sr.validateArray=y;function v(b){const{gen:w,schema:E,keyword:_,it:C}=b;if(!Array.isArray(E))throw new Error("ajv implementation error");if(E.some(N=>(0,t.alwaysValidSchema)(C,N))&&!C.opts.unevaluated)return;const k=w.let("valid",!1),R=w.name("_valid");w.block(()=>E.forEach((N,O)=>{const F=b.subschema({keyword:_,schemaProp:O,compositeRule:!0},R);w.assign(k,(0,e._)`${k} || ${R}`),b.mergeValidEvaluated(F,R)||w.if((0,e.not)(k))})),b.result(k,()=>b.reset(),()=>b.error(!0))}return Sr.validateUnion=v,Sr}var Qfe;function $zt(){if(Qfe)return Pc;Qfe=1,Object.defineProperty(Pc,"__esModule",{value:!0}),Pc.validateKeywordUsage=Pc.validSchemaType=Pc.funcKeywordCode=Pc.macroKeywordCode=void 0;const e=Mn(),t=Sg(),n=Nd(),r=l5();function i(f,h){const{gen:p,keyword:m,schema:y,parentSchema:v,it:b}=f,w=h.macro.call(b.self,y,v,b),E=l(p,m,w);b.opts.validateSchema!==!1&&b.self.validateSchema(w,!0);const _=p.name("valid");f.subschema({schema:w,schemaPath:e.nil,errSchemaPath:`${b.errSchemaPath}/${m}`,topSchemaRef:E,compositeRule:!0},_),f.pass(_,()=>f.error(!0))}Pc.macroKeywordCode=i;function s(f,h){var p;const{gen:m,keyword:y,schema:v,parentSchema:b,$data:w,it:E}=f;u(E,h);const _=!w&&h.compile?h.compile.call(E.self,v,b,E):h.validate,C=l(m,y,_),S=m.let("valid");f.block$data(S,k),f.ok((p=h.valid)!==null&&p!==void 0?p:S);function k(){if(h.errors===!1)O(),h.modifying&&o(f),F(()=>f.error());else{const $=h.async?R():N();h.modifying&&o(f),F(()=>a(f,$))}}function R(){const $=m.let("ruleErrs",null);return m.try(()=>O((0,e._)`await `),z=>m.assign(S,!1).if((0,e._)`${z} instanceof ${E.ValidationError}`,()=>m.assign($,(0,e._)`${z}.errors`),()=>m.throw(z))),$}function N(){const $=(0,e._)`${C}.errors`;return m.assign($,null),O(e.nil),$}function O($=h.async?(0,e._)`await `:e.nil){const z=E.opts.passContext?t.default.this:t.default.self,q=!("compile"in h&&!w||h.schema===!1);m.assign(S,(0,e._)`${$}${(0,n.callValidateCode)(f,C,z,q)}`,h.modifying)}function F($){var z;m.if((0,e.not)((z=h.valid)!==null&&z!==void 0?z:S),$)}}Pc.funcKeywordCode=s;function o(f){const{gen:h,data:p,it:m}=f;h.if(m.parentData,()=>h.assign(p,(0,e._)`${m.parentData}[${m.parentDataProperty}]`))}function a(f,h){const{gen:p}=f;p.if((0,e._)`Array.isArray(${h})`,()=>{p.assign(t.default.vErrors,(0,e._)`${t.default.vErrors} === null ? ${h} : ${t.default.vErrors}.concat(${h})`).assign(t.default.errors,(0,e._)`${t.default.vErrors}.length`),(0,r.extendErrors)(f)},()=>f.error())}function u({schemaEnv:f},h){if(h.async&&!f.$async)throw new Error("async keyword in sync schema")}function l(f,h,p){if(p===void 0)throw new Error(`keyword "${h}" failed to compile`);return f.scopeValue("keyword",typeof p=="function"?{ref:p}:{ref:p,code:(0,e.stringify)(p)})}function c(f,h,p=!1){return!h.length||h.some(m=>m==="array"?Array.isArray(f):m==="object"?f&&typeof f=="object"&&!Array.isArray(f):typeof f==m||p&&typeof f>"u")}Pc.validSchemaType=c;function d({schema:f,opts:h,self:p,errSchemaPath:m},y,v){if(Array.isArray(y.keyword)?!y.keyword.includes(v):y.keyword!==v)throw new Error("ajv implementation error");const b=y.dependencies;if(b!=null&&b.some(w=>!Object.prototype.hasOwnProperty.call(f,w)))throw new Error(`parent schema must have dependencies of ${v}: ${b.join(",")}`);if(y.validateSchema&&!y.validateSchema(f[v])){const E=`keyword "${v}" value is invalid at path "${m}": `+p.errorsText(y.validateSchema.errors);if(h.validateSchema==="log")p.logger.error(E);else throw new Error(E)}}return Pc.validateKeywordUsage=d,Pc}var Lh={},Jfe;function Mzt(){if(Jfe)return Lh;Jfe=1,Object.defineProperty(Lh,"__esModule",{value:!0}),Lh.extendSubschemaMode=Lh.extendSubschemaData=Lh.getSubschema=void 0;const e=Mn(),t=yr();function n(s,{keyword:o,schemaProp:a,schema:u,schemaPath:l,errSchemaPath:c,topSchemaRef:d}){if(o!==void 0&&u!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(o!==void 0){const f=s.schema[o];return a===void 0?{schema:f,schemaPath:(0,e._)`${s.schemaPath}${(0,e.getProperty)(o)}`,errSchemaPath:`${s.errSchemaPath}/${o}`}:{schema:f[a],schemaPath:(0,e._)`${s.schemaPath}${(0,e.getProperty)(o)}${(0,e.getProperty)(a)}`,errSchemaPath:`${s.errSchemaPath}/${o}/${(0,t.escapeFragment)(a)}`}}if(u!==void 0){if(l===void 0||c===void 0||d===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:u,schemaPath:l,topSchemaRef:d,errSchemaPath:c}}throw new Error('either "keyword" or "schema" must be passed')}Lh.getSubschema=n;function r(s,o,{dataProp:a,dataPropType:u,data:l,dataTypes:c,propertyName:d}){if(l!==void 0&&a!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:f}=o;if(a!==void 0){const{errorPath:p,dataPathArr:m,opts:y}=o,v=f.let("data",(0,e._)`${o.data}${(0,e.getProperty)(a)}`,!0);h(v),s.errorPath=(0,e.str)`${p}${(0,t.getErrorPath)(a,u,y.jsPropertySyntax)}`,s.parentDataProperty=(0,e._)`${a}`,s.dataPathArr=[...m,s.parentDataProperty]}if(l!==void 0){const p=l instanceof e.Name?l:f.let("data",l,!0);h(p),d!==void 0&&(s.propertyName=d)}c&&(s.dataTypes=c);function h(p){s.data=p,s.dataLevel=o.dataLevel+1,s.dataTypes=[],o.definedProperties=new Set,s.parentData=o.data,s.dataNames=[...o.dataNames,p]}}Lh.extendSubschemaData=r;function i(s,{jtdDiscriminator:o,jtdMetadata:a,compositeRule:u,createErrors:l,allErrors:c}){u!==void 0&&(s.compositeRule=u),l!==void 0&&(s.createErrors=l),c!==void 0&&(s.allErrors=c),s.jtdDiscriminator=o,s.jtdMetadata=a}return Lh.extendSubschemaMode=i,Lh}var Ia={},w9={exports:{}},Zfe;function Lzt(){if(Zfe)return w9.exports;Zfe=1;var e=w9.exports=function(r,i,s){typeof i=="function"&&(s=i,i={}),s=i.cb||s;var o=typeof s=="function"?s:s.pre||function(){},a=s.post||function(){};t(i,o,a,r,"",r)};e.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0},e.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},e.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},e.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function t(r,i,s,o,a,u,l,c,d,f){if(o&&typeof o=="object"&&!Array.isArray(o)){i(o,a,u,l,c,d,f);for(var h in o){var p=o[h];if(Array.isArray(p)){if(h in e.arrayKeywords)for(var m=0;m<p.length;m++)t(r,i,s,p[m],a+"/"+h+"/"+m,u,a,h,o,m)}else if(h in e.propsKeywords){if(p&&typeof p=="object")for(var y in p)t(r,i,s,p[y],a+"/"+h+"/"+n(y),u,a,h,o,y)}else(h in e.keywords||r.allKeys&&!(h in e.skipKeywords))&&t(r,i,s,p,a+"/"+h,u,a,h,o)}s(o,a,u,l,c,d,f)}}function n(r){return r.replace(/~/g,"~0").replace(/\//g,"~1")}return w9.exports}var ehe;function c5(){if(ehe)return Ia;ehe=1,Object.defineProperty(Ia,"__esModule",{value:!0}),Ia.getSchemaRefs=Ia.resolveUrl=Ia.normalizeId=Ia._getFullPath=Ia.getFullPath=Ia.inlineRef=void 0;const e=yr(),t=KW(),n=Lzt(),r=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function i(m,y=!0){return typeof m=="boolean"?!0:y===!0?!o(m):y?a(m)<=y:!1}Ia.inlineRef=i;const s=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function o(m){for(const y in m){if(s.has(y))return!0;const v=m[y];if(Array.isArray(v)&&v.some(o)||typeof v=="object"&&o(v))return!0}return!1}function a(m){let y=0;for(const v in m){if(v==="$ref")return 1/0;if(y++,!r.has(v)&&(typeof m[v]=="object"&&(0,e.eachItem)(m[v],b=>y+=a(b)),y===1/0))return 1/0}return y}function u(m,y="",v){v!==!1&&(y=d(y));const b=m.parse(y);return l(m,b)}Ia.getFullPath=u;function l(m,y){return m.serialize(y).split("#")[0]+"#"}Ia._getFullPath=l;const c=/#\/?$/;function d(m){return m?m.replace(c,""):""}Ia.normalizeId=d;function f(m,y,v){return v=d(v),m.resolve(y,v)}Ia.resolveUrl=f;const h=/^[a-z_][-a-z0-9._]*$/i;function p(m,y){if(typeof m=="boolean")return{};const{schemaId:v,uriResolver:b}=this.opts,w=d(m[v]||y),E={"":w},_=u(b,w,!1),C={},S=new Set;return n(m,{allKeys:!0},(N,O,F,$)=>{if($===void 0)return;const z=_+O;let q=E[$];typeof N[v]=="string"&&(q=W.call(this,N[v])),J.call(this,N.$anchor),J.call(this,N.$dynamicAnchor),E[O]=q;function W(K){const Z=this.opts.uriResolver.resolve;if(K=d(q?Z(q,K):K),S.has(K))throw R(K);S.add(K);let U=this.refs[K];return typeof U=="string"&&(U=this.refs[U]),typeof U=="object"?k(N,U.schema,K):K!==d(z)&&(K[0]==="#"?(k(N,C[K],K),C[K]=N):this.refs[K]=z),K}function J(K){if(typeof K=="string"){if(!h.test(K))throw new Error(`invalid anchor "${K}"`);W.call(this,`#${K}`)}}}),C;function k(N,O,F){if(O!==void 0&&!t(N,O))throw R(F)}function R(N){return new Error(`reference "${N}" resolves to more than one schema`)}}return Ia.getSchemaRefs=p,Ia}var the;function d5(){if(the)return $h;the=1,Object.defineProperty($h,"__esModule",{value:!0}),$h.getData=$h.KeywordCxt=$h.validateFunctionCode=void 0;const e=Nzt(),t=a4(),n=V3e(),r=a4(),i=Ozt(),s=$zt(),o=Mzt(),a=Mn(),u=Sg(),l=c5(),c=yr(),d=l5();function f(ue){if(_(ue)&&(S(ue),E(ue))){y(ue);return}h(ue,()=>(0,e.topBoolOrEmptySchema)(ue))}$h.validateFunctionCode=f;function h({gen:ue,validateName:se,schema:me,schemaEnv:be,opts:Le},Ue){Le.code.es5?ue.func(se,(0,a._)`${u.default.data}, ${u.default.valCxt}`,be.$async,()=>{ue.code((0,a._)`"use strict"; ${b(me,Le)}`),m(ue,Le),ue.code(Ue)}):ue.func(se,(0,a._)`${u.default.data}, ${p(Le)}`,be.$async,()=>ue.code(b(me,Le)).code(Ue))}function p(ue){return(0,a._)`{${u.default.instancePath}="", ${u.default.parentData}, ${u.default.parentDataProperty}, ${u.default.rootData}=${u.default.data}${ue.dynamicRef?(0,a._)`, ${u.default.dynamicAnchors}={}`:a.nil}}={}`}function m(ue,se){ue.if(u.default.valCxt,()=>{ue.var(u.default.instancePath,(0,a._)`${u.default.valCxt}.${u.default.instancePath}`),ue.var(u.default.parentData,(0,a._)`${u.default.valCxt}.${u.default.parentData}`),ue.var(u.default.parentDataProperty,(0,a._)`${u.default.valCxt}.${u.default.parentDataProperty}`),ue.var(u.default.rootData,(0,a._)`${u.default.valCxt}.${u.default.rootData}`),se.dynamicRef&&ue.var(u.default.dynamicAnchors,(0,a._)`${u.default.valCxt}.${u.default.dynamicAnchors}`)},()=>{ue.var(u.default.instancePath,(0,a._)`""`),ue.var(u.default.parentData,(0,a._)`undefined`),ue.var(u.default.parentDataProperty,(0,a._)`undefined`),ue.var(u.default.rootData,u.default.data),se.dynamicRef&&ue.var(u.default.dynamicAnchors,(0,a._)`{}`)})}function y(ue){const{schema:se,opts:me,gen:be}=ue;h(ue,()=>{me.$comment&&se.$comment&&$(ue),N(ue),be.let(u.default.vErrors,null),be.let(u.default.errors,0),me.unevaluated&&v(ue),k(ue),z(ue)})}function v(ue){const{gen:se,validateName:me}=ue;ue.evaluated=se.const("evaluated",(0,a._)`${me}.evaluated`),se.if((0,a._)`${ue.evaluated}.dynamicProps`,()=>se.assign((0,a._)`${ue.evaluated}.props`,(0,a._)`undefined`)),se.if((0,a._)`${ue.evaluated}.dynamicItems`,()=>se.assign((0,a._)`${ue.evaluated}.items`,(0,a._)`undefined`))}function b(ue,se){const me=typeof ue=="object"&&ue[se.schemaId];return me&&(se.code.source||se.code.process)?(0,a._)`/*# sourceURL=${me} */`:a.nil}function w(ue,se){if(_(ue)&&(S(ue),E(ue))){C(ue,se);return}(0,e.boolOrEmptySchema)(ue,se)}function E({schema:ue,self:se}){if(typeof ue=="boolean")return!ue;for(const me in ue)if(se.RULES.all[me])return!0;return!1}function _(ue){return typeof ue.schema!="boolean"}function C(ue,se){const{schema:me,gen:be,opts:Le}=ue;Le.$comment&&me.$comment&&$(ue),O(ue),F(ue);const Ue=be.const("_errs",u.default.errors);k(ue,Ue),be.var(se,(0,a._)`${Ue} === ${u.default.errors}`)}function S(ue){(0,c.checkUnknownRules)(ue),R(ue)}function k(ue,se){if(ue.opts.jtd)return W(ue,[],!1,se);const me=(0,t.getSchemaTypes)(ue.schema),be=(0,t.coerceAndCheckDataType)(ue,me);W(ue,me,!be,se)}function R(ue){const{schema:se,errSchemaPath:me,opts:be,self:Le}=ue;se.$ref&&be.ignoreKeywordsWithRef&&(0,c.schemaHasRulesButRef)(se,Le.RULES)&&Le.logger.warn(`$ref: keywords ignored in schema at path "${me}"`)}function N(ue){const{schema:se,opts:me}=ue;se.default!==void 0&&me.useDefaults&&me.strictSchema&&(0,c.checkStrictMode)(ue,"default is ignored in the schema root")}function O(ue){const se=ue.schema[ue.opts.schemaId];se&&(ue.baseId=(0,l.resolveUrl)(ue.opts.uriResolver,ue.baseId,se))}function F(ue){if(ue.schema.$async&&!ue.schemaEnv.$async)throw new Error("async schema in sync schema")}function $({gen:ue,schemaEnv:se,schema:me,errSchemaPath:be,opts:Le}){const Ue=me.$comment;if(Le.$comment===!0)ue.code((0,a._)`${u.default.self}.logger.log(${Ue})`);else if(typeof Le.$comment=="function"){const Ne=(0,a.str)`${be}/$comment`,je=ue.scopeValue("root",{ref:se.root});ue.code((0,a._)`${u.default.self}.opts.$comment(${Ue}, ${Ne}, ${je}.schema)`)}}function z(ue){const{gen:se,schemaEnv:me,validateName:be,ValidationError:Le,opts:Ue}=ue;me.$async?se.if((0,a._)`${u.default.errors} === 0`,()=>se.return(u.default.data),()=>se.throw((0,a._)`new ${Le}(${u.default.vErrors})`)):(se.assign((0,a._)`${be}.errors`,u.default.vErrors),Ue.unevaluated&&q(ue),se.return((0,a._)`${u.default.errors} === 0`))}function q({gen:ue,evaluated:se,props:me,items:be}){me instanceof a.Name&&ue.assign((0,a._)`${se}.props`,me),be instanceof a.Name&&ue.assign((0,a._)`${se}.items`,be)}function W(ue,se,me,be){const{gen:Le,schema:Ue,data:Ne,allErrors:je,opts:Ke,self:ut}=ue,{RULES:pt}=ut;if(Ue.$ref&&(Ke.ignoreKeywordsWithRef||!(0,c.schemaHasRulesButRef)(Ue,pt))){Le.block(()=>pe(ue,"$ref",pt.all.$ref.definition));return}Ke.jtd||K(ue,se),Le.block(()=>{for(const De of pt.rules)xt(De);xt(pt.post)});function xt(De){(0,n.shouldUseGroup)(Ue,De)&&(De.type?(Le.if((0,r.checkDataType)(De.type,Ne,Ke.strictNumbers)),J(ue,De),se.length===1&&se[0]===De.type&&me&&(Le.else(),(0,r.reportTypeError)(ue)),Le.endIf()):J(ue,De),je||Le.if((0,a._)`${u.default.errors} === ${be||0}`))}}function J(ue,se){const{gen:me,schema:be,opts:{useDefaults:Le}}=ue;Le&&(0,i.assignDefaults)(ue,se.type),me.block(()=>{for(const Ue of se.rules)(0,n.shouldUseRule)(be,Ue)&&pe(ue,Ue.keyword,Ue.definition,se.type)})}function K(ue,se){ue.schemaEnv.meta||!ue.opts.strictTypes||(Z(ue,se),ue.opts.allowUnionTypes||U(ue,se),L(ue,ue.dataTypes))}function Z(ue,se){if(se.length){if(!ue.dataTypes.length){ue.dataTypes=se;return}se.forEach(me=>{j(ue.dataTypes,me)||X(ue,`type "${me}" not allowed by context "${ue.dataTypes.join(",")}"`)}),G(ue,se)}}function U(ue,se){se.length>1&&!(se.length===2&&se.includes("null"))&&X(ue,"use allowUnionTypes to allow union type keyword")}function L(ue,se){const me=ue.self.RULES.all;for(const be in me){const Le=me[be];if(typeof Le=="object"&&(0,n.shouldUseRule)(ue.schema,Le)){const{type:Ue}=Le.definition;Ue.length&&!Ue.some(Ne=>Y(se,Ne))&&X(ue,`missing type "${Ue.join(",")}" for keyword "${be}"`)}}}function Y(ue,se){return ue.includes(se)||se==="number"&&ue.includes("integer")}function j(ue,se){return ue.includes(se)||se==="integer"&&ue.includes("number")}function G(ue,se){const me=[];for(const be of ue.dataTypes)j(se,be)?me.push(be):se.includes("integer")&&be==="number"&&me.push("integer");ue.dataTypes=me}function X(ue,se){const me=ue.schemaEnv.baseId+ue.errSchemaPath;se+=` at "${me}" (strictTypes)`,(0,c.checkStrictMode)(ue,se,ue.opts.strictTypes)}class ne{constructor(se,me,be){if((0,s.validateKeywordUsage)(se,me,be),this.gen=se.gen,this.allErrors=se.allErrors,this.keyword=be,this.data=se.data,this.schema=se.schema[be],this.$data=me.$data&&se.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,c.schemaRefOrVal)(se,this.schema,be,this.$data),this.schemaType=me.schemaType,this.parentSchema=se.schema,this.params={},this.it=se,this.def=me,this.$data)this.schemaCode=se.gen.const("vSchema",Ce(this.$data,se));else if(this.schemaCode=this.schemaValue,!(0,s.validSchemaType)(this.schema,me.schemaType,me.allowUndefined))throw new Error(`${be} value must be ${JSON.stringify(me.schemaType)}`);("code"in me?me.trackErrors:me.errors!==!1)&&(this.errsCount=se.gen.const("_errs",u.default.errors))}result(se,me,be){this.failResult((0,a.not)(se),me,be)}failResult(se,me,be){this.gen.if(se),be?be():this.error(),me?(this.gen.else(),me(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(se,me){this.failResult((0,a.not)(se),void 0,me)}fail(se){if(se===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(se),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(se){if(!this.$data)return this.fail(se);const{schemaCode:me}=this;this.fail((0,a._)`${me} !== undefined && (${(0,a.or)(this.invalid$data(),se)})`)}error(se,me,be){if(me){this.setParams(me),this._error(se,be),this.setParams({});return}this._error(se,be)}_error(se,me){(se?d.reportExtraError:d.reportError)(this,this.def.error,me)}$dataError(){(0,d.reportError)(this,this.def.$dataError||d.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,d.resetErrorsCount)(this.gen,this.errsCount)}ok(se){this.allErrors||this.gen.if(se)}setParams(se,me){me?Object.assign(this.params,se):this.params=se}block$data(se,me,be=a.nil){this.gen.block(()=>{this.check$data(se,be),me()})}check$data(se=a.nil,me=a.nil){if(!this.$data)return;const{gen:be,schemaCode:Le,schemaType:Ue,def:Ne}=this;be.if((0,a.or)((0,a._)`${Le} === undefined`,me)),se!==a.nil&&be.assign(se,!0),(Ue.length||Ne.validateSchema)&&(be.elseIf(this.invalid$data()),this.$dataError(),se!==a.nil&&be.assign(se,!1)),be.else()}invalid$data(){const{gen:se,schemaCode:me,schemaType:be,def:Le,it:Ue}=this;return(0,a.or)(Ne(),je());function Ne(){if(be.length){if(!(me instanceof a.Name))throw new Error("ajv implementation error");const Ke=Array.isArray(be)?be:[be];return(0,a._)`${(0,r.checkDataTypes)(Ke,me,Ue.opts.strictNumbers,r.DataType.Wrong)}`}return a.nil}function je(){if(Le.validateSchema){const Ke=se.scopeValue("validate$data",{ref:Le.validateSchema});return(0,a._)`!${Ke}(${me})`}return a.nil}}subschema(se,me){const be=(0,o.getSubschema)(this.it,se);(0,o.extendSubschemaData)(be,this.it,se),(0,o.extendSubschemaMode)(be,se);const Le={...this.it,...be,items:void 0,props:void 0};return w(Le,me),Le}mergeEvaluated(se,me){const{it:be,gen:Le}=this;be.opts.unevaluated&&(be.props!==!0&&se.props!==void 0&&(be.props=c.mergeEvaluated.props(Le,se.props,be.props,me)),be.items!==!0&&se.items!==void 0&&(be.items=c.mergeEvaluated.items(Le,se.items,be.items,me)))}mergeValidEvaluated(se,me){const{it:be,gen:Le}=this;if(be.opts.unevaluated&&(be.props!==!0||be.items!==!0))return Le.if(me,()=>this.mergeEvaluated(se,a.Name)),!0}}$h.KeywordCxt=ne;function pe(ue,se,me,be){const Le=new ne(ue,me,se);"code"in me?me.code(Le,be):Le.$data&&me.validate?(0,s.funcKeywordCode)(Le,me):"macro"in me?(0,s.macroKeywordCode)(Le,me):(me.compile||me.validate)&&(0,s.funcKeywordCode)(Le,me)}const de=/^\/(?:[^~]|~0|~1)*$/,xe=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function Ce(ue,{dataLevel:se,dataNames:me,dataPathArr:be}){let Le,Ue;if(ue==="")return u.default.rootData;if(ue[0]==="/"){if(!de.test(ue))throw new Error(`Invalid JSON-pointer: ${ue}`);Le=ue,Ue=u.default.rootData}else{const ut=xe.exec(ue);if(!ut)throw new Error(`Invalid JSON-pointer: ${ue}`);const pt=+ut[1];if(Le=ut[2],Le==="#"){if(pt>=se)throw new Error(Ke("property/index",pt));return be[se-pt]}if(pt>se)throw new Error(Ke("data",pt));if(Ue=me[se-pt],!Le)return Ue}let Ne=Ue;const je=Le.split("/");for(const ut of je)ut&&(Ue=(0,a._)`${Ue}${(0,a.getProperty)((0,c.unescapeJsonPointer)(ut))}`,Ne=(0,a._)`${Ne} && ${Ue}`);return Ne;function Ke(ut,pt){return`Cannot access ${ut} ${pt} levels up, current level is ${se}`}}return $h.getData=Ce,$h}var eR={},nhe;function GQ(){if(nhe)return eR;nhe=1,Object.defineProperty(eR,"__esModule",{value:!0});class e extends Error{constructor(n){super("validation failed"),this.errors=n,this.ajv=this.validation=!0}}return eR.default=e,eR}var tR={},rhe;function f5(){if(rhe)return tR;rhe=1,Object.defineProperty(tR,"__esModule",{value:!0});const e=c5();class t extends Error{constructor(r,i,s,o){super(o||`can't resolve reference ${s} from id ${i}`),this.missingRef=(0,e.resolveUrl)(r,i,s),this.missingSchema=(0,e.normalizeId)((0,e.getFullPath)(r,this.missingRef))}}return tR.default=t,tR}var Yu={},ihe;function YQ(){if(ihe)return Yu;ihe=1,Object.defineProperty(Yu,"__esModule",{value:!0}),Yu.resolveSchema=Yu.getCompilingSchema=Yu.resolveRef=Yu.compileSchema=Yu.SchemaEnv=void 0;const e=Mn(),t=GQ(),n=Sg(),r=c5(),i=yr(),s=d5();class o{constructor(v){var b;this.refs={},this.dynamicAnchors={};let w;typeof v.schema=="object"&&(w=v.schema),this.schema=v.schema,this.schemaId=v.schemaId,this.root=v.root||this,this.baseId=(b=v.baseId)!==null&&b!==void 0?b:(0,r.normalizeId)(w==null?void 0:w[v.schemaId||"$id"]),this.schemaPath=v.schemaPath,this.localRefs=v.localRefs,this.meta=v.meta,this.$async=w==null?void 0:w.$async,this.refs={}}}Yu.SchemaEnv=o;function a(y){const v=c.call(this,y);if(v)return v;const b=(0,r.getFullPath)(this.opts.uriResolver,y.root.baseId),{es5:w,lines:E}=this.opts.code,{ownProperties:_}=this.opts,C=new e.CodeGen(this.scope,{es5:w,lines:E,ownProperties:_});let S;y.$async&&(S=C.scopeValue("Error",{ref:t.default,code:(0,e._)`require("ajv/dist/runtime/validation_error").default`}));const k=C.scopeName("validate");y.validateName=k;const R={gen:C,allErrors:this.opts.allErrors,data:n.default.data,parentData:n.default.parentData,parentDataProperty:n.default.parentDataProperty,dataNames:[n.default.data],dataPathArr:[e.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:C.scopeValue("schema",this.opts.code.source===!0?{ref:y.schema,code:(0,e.stringify)(y.schema)}:{ref:y.schema}),validateName:k,ValidationError:S,schema:y.schema,schemaEnv:y,rootId:b,baseId:y.baseId||b,schemaPath:e.nil,errSchemaPath:y.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,e._)`""`,opts:this.opts,self:this};let N;try{this._compilations.add(y),(0,s.validateFunctionCode)(R),C.optimize(this.opts.code.optimize);const O=C.toString();N=`${C.scopeRefs(n.default.scope)}return ${O}`,this.opts.code.process&&(N=this.opts.code.process(N,y));const $=new Function(`${n.default.self}`,`${n.default.scope}`,N)(this,this.scope.get());if(this.scope.value(k,{ref:$}),$.errors=null,$.schema=y.schema,$.schemaEnv=y,y.$async&&($.$async=!0),this.opts.code.source===!0&&($.source={validateName:k,validateCode:O,scopeValues:C._values}),this.opts.unevaluated){const{props:z,items:q}=R;$.evaluated={props:z instanceof e.Name?void 0:z,items:q instanceof e.Name?void 0:q,dynamicProps:z instanceof e.Name,dynamicItems:q instanceof e.Name},$.source&&($.source.evaluated=(0,e.stringify)($.evaluated))}return y.validate=$,y}catch(O){throw delete y.validate,delete y.validateName,N&&this.logger.error("Error compiling schema, function code:",N),O}finally{this._compilations.delete(y)}}Yu.compileSchema=a;function u(y,v,b){var w;b=(0,r.resolveUrl)(this.opts.uriResolver,v,b);const E=y.refs[b];if(E)return E;let _=f.call(this,y,b);if(_===void 0){const C=(w=y.localRefs)===null||w===void 0?void 0:w[b],{schemaId:S}=this.opts;C&&(_=new o({schema:C,schemaId:S,root:y,baseId:v}))}if(_!==void 0)return y.refs[b]=l.call(this,_)}Yu.resolveRef=u;function l(y){return(0,r.inlineRef)(y.schema,this.opts.inlineRefs)?y.schema:y.validate?y:a.call(this,y)}function c(y){for(const v of this._compilations)if(d(v,y))return v}Yu.getCompilingSchema=c;function d(y,v){return y.schema===v.schema&&y.root===v.root&&y.baseId===v.baseId}function f(y,v){let b;for(;typeof(b=this.refs[v])=="string";)v=b;return b||this.schemas[v]||h.call(this,y,v)}function h(y,v){const b=this.opts.uriResolver.parse(v),w=(0,r._getFullPath)(this.opts.uriResolver,b);let E=(0,r.getFullPath)(this.opts.uriResolver,y.baseId,void 0);if(Object.keys(y.schema).length>0&&w===E)return m.call(this,b,y);const _=(0,r.normalizeId)(w),C=this.refs[_]||this.schemas[_];if(typeof C=="string"){const S=h.call(this,y,C);return typeof(S==null?void 0:S.schema)!="object"?void 0:m.call(this,b,S)}if(typeof(C==null?void 0:C.schema)=="object"){if(C.validate||a.call(this,C),_===(0,r.normalizeId)(v)){const{schema:S}=C,{schemaId:k}=this.opts,R=S[k];return R&&(E=(0,r.resolveUrl)(this.opts.uriResolver,E,R)),new o({schema:S,schemaId:k,root:y,baseId:E})}return m.call(this,b,C)}}Yu.resolveSchema=h;const p=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function m(y,{baseId:v,schema:b,root:w}){var E;if(((E=y.fragment)===null||E===void 0?void 0:E[0])!=="/")return;for(const S of y.fragment.slice(1).split("/")){if(typeof b=="boolean")return;const k=b[(0,i.unescapeFragment)(S)];if(k===void 0)return;b=k;const R=typeof b=="object"&&b[this.opts.schemaId];!p.has(S)&&R&&(v=(0,r.resolveUrl)(this.opts.uriResolver,v,R))}let _;if(typeof b!="boolean"&&b.$ref&&!(0,i.schemaHasRulesButRef)(b,this.RULES)){const S=(0,r.resolveUrl)(this.opts.uriResolver,v,b.$ref);_=h.call(this,w,S)}const{schemaId:C}=this.opts;if(_=_||new o({schema:b,schemaId:C,root:w,baseId:v}),_.schema!==_.root.schema)return _}return Yu}const Fzt="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",Bzt="Meta-schema for $data reference (JSON AnySchema extension proposal)",jzt="object",zzt=["$data"],Uzt={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},Vzt=!1,Hzt={$id:Fzt,description:Bzt,type:jzt,required:zzt,properties:Uzt,additionalProperties:Vzt};var nR={},Q_={exports:{}},E9,she;function qzt(){return she||(she=1,E9={HEX:{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15}}),E9}var _9,ohe;function Wzt(){if(ohe)return _9;ohe=1;const{HEX:e}=qzt(),t=/^(?:(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)$/u;function n(m){if(a(m,".")<3)return{host:m,isIPV4:!1};const y=m.match(t)||[],[v]=y;return v?{host:o(v,"."),isIPV4:!0}:{host:m,isIPV4:!1}}function r(m,y=!1){let v="",b=!0;for(const w of m){if(e[w]===void 0)return;w!=="0"&&b===!0&&(b=!1),b||(v+=w)}return y&&v.length===0&&(v="0"),v}function i(m){let y=0;const v={error:!1,address:"",zone:""},b=[],w=[];let E=!1,_=!1,C=!1;function S(){if(w.length){if(E===!1){const k=r(w);if(k!==void 0)b.push(k);else return v.error=!0,!1}w.length=0}return!0}for(let k=0;k<m.length;k++){const R=m[k];if(!(R==="["||R==="]"))if(R===":"){if(_===!0&&(C=!0),!S())break;if(y++,b.push(":"),y>7){v.error=!0;break}k-1>=0&&m[k-1]===":"&&(_=!0);continue}else if(R==="%"){if(!S())break;E=!0}else{w.push(R);continue}}return w.length&&(E?v.zone=w.join(""):C?b.push(w.join("")):b.push(r(w))),v.address=b.join(""),v}function s(m){if(a(m,":")<2)return{host:m,isIPV6:!1};const y=i(m);if(y.error)return{host:m,isIPV6:!1};{let v=y.address,b=y.address;return y.zone&&(v+="%"+y.zone,b+="%25"+y.zone),{host:v,escapedHost:b,isIPV6:!0}}}function o(m,y){let v="",b=!0;const w=m.length;for(let E=0;E<w;E++){const _=m[E];_==="0"&&b?(E+1<=w&&m[E+1]===y||E+1===w)&&(v+=_,b=!1):(_===y?b=!0:b=!1,v+=_)}return v}function a(m,y){let v=0;for(let b=0;b<m.length;b++)m[b]===y&&v++;return v}const u=/^\.\.?\//u,l=/^\/\.(?:\/|$)/u,c=/^\/\.\.(?:\/|$)/u,d=/^\/?(?:.|\n)*?(?=\/|$)/u;function f(m){const y=[];for(;m.length;)if(m.match(u))m=m.replace(u,"");else if(m.match(l))m=m.replace(l,"/");else if(m.match(c))m=m.replace(c,"/"),y.pop();else if(m==="."||m==="..")m="";else{const v=m.match(d);if(v){const b=v[0];m=m.slice(b.length),y.push(b)}else throw new Error("Unexpected dot segment condition")}return y.join("")}function h(m,y){const v=y!==!0?escape:unescape;return m.scheme!==void 0&&(m.scheme=v(m.scheme)),m.userinfo!==void 0&&(m.userinfo=v(m.userinfo)),m.host!==void 0&&(m.host=v(m.host)),m.path!==void 0&&(m.path=v(m.path)),m.query!==void 0&&(m.query=v(m.query)),m.fragment!==void 0&&(m.fragment=v(m.fragment)),m}function p(m){const y=[];if(m.userinfo!==void 0&&(y.push(m.userinfo),y.push("@")),m.host!==void 0){let v=unescape(m.host);const b=n(v);if(b.isIPV4)v=b.host;else{const w=s(b.host);w.isIPV6===!0?v=`[${w.escapedHost}]`:v=m.host}y.push(v)}return(typeof m.port=="number"||typeof m.port=="string")&&(y.push(":"),y.push(String(m.port))),y.length?y.join(""):void 0}return _9={recomposeAuthority:p,normalizeComponentEncoding:h,removeDotSegments:f,normalizeIPv4:n,normalizeIPv6:s,stringArrayToHexStripped:r},_9}var T9,ahe;function Gzt(){if(ahe)return T9;ahe=1;const e=/^[\da-f]{8}\b-[\da-f]{4}\b-[\da-f]{4}\b-[\da-f]{4}\b-[\da-f]{12}$/iu,t=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu;function n(b){return typeof b.secure=="boolean"?b.secure:String(b.scheme).toLowerCase()==="wss"}function r(b){return b.host||(b.error=b.error||"HTTP URIs must have a host."),b}function i(b){const w=String(b.scheme).toLowerCase()==="https";return(b.port===(w?443:80)||b.port==="")&&(b.port=void 0),b.path||(b.path="/"),b}function s(b){return b.secure=n(b),b.resourceName=(b.path||"/")+(b.query?"?"+b.query:""),b.path=void 0,b.query=void 0,b}function o(b){if((b.port===(n(b)?443:80)||b.port==="")&&(b.port=void 0),typeof b.secure=="boolean"&&(b.scheme=b.secure?"wss":"ws",b.secure=void 0),b.resourceName){const[w,E]=b.resourceName.split("?");b.path=w&&w!=="/"?w:void 0,b.query=E,b.resourceName=void 0}return b.fragment=void 0,b}function a(b,w){if(!b.path)return b.error="URN can not be parsed",b;const E=b.path.match(t);if(E){const _=w.scheme||b.scheme||"urn";b.nid=E[1].toLowerCase(),b.nss=E[2];const C=`${_}:${w.nid||b.nid}`,S=v[C];b.path=void 0,S&&(b=S.parse(b,w))}else b.error=b.error||"URN can not be parsed.";return b}function u(b,w){const E=w.scheme||b.scheme||"urn",_=b.nid.toLowerCase(),C=`${E}:${w.nid||_}`,S=v[C];S&&(b=S.serialize(b,w));const k=b,R=b.nss;return k.path=`${_||w.nid}:${R}`,w.skipEscape=!0,k}function l(b,w){const E=b;return E.uuid=E.nss,E.nss=void 0,!w.tolerant&&(!E.uuid||!e.test(E.uuid))&&(E.error=E.error||"UUID is not valid."),E}function c(b){const w=b;return w.nss=(b.uuid||"").toLowerCase(),w}const d={scheme:"http",domainHost:!0,parse:r,serialize:i},f={scheme:"https",domainHost:d.domainHost,parse:r,serialize:i},h={scheme:"ws",domainHost:!0,parse:s,serialize:o},p={scheme:"wss",domainHost:h.domainHost,parse:h.parse,serialize:h.serialize},v={http:d,https:f,ws:h,wss:p,urn:{scheme:"urn",parse:a,serialize:u,skipNormalize:!0},"urn:uuid":{scheme:"urn:uuid",parse:l,serialize:c,skipNormalize:!0}};return T9=v,T9}var uhe;function Yzt(){if(uhe)return Q_.exports;uhe=1;const{normalizeIPv6:e,normalizeIPv4:t,removeDotSegments:n,recomposeAuthority:r,normalizeComponentEncoding:i}=Wzt(),s=Gzt();function o(y,v){return typeof y=="string"?y=c(p(y,v),v):typeof y=="object"&&(y=p(c(y,v),v)),y}function a(y,v,b){const w=Object.assign({scheme:"null"},b),E=u(p(y,w),p(v,w),w,!0);return c(E,{...w,skipEscape:!0})}function u(y,v,b,w){const E={};return w||(y=p(c(y,b),b),v=p(c(v,b),b)),b=b||{},!b.tolerant&&v.scheme?(E.scheme=v.scheme,E.userinfo=v.userinfo,E.host=v.host,E.port=v.port,E.path=n(v.path||""),E.query=v.query):(v.userinfo!==void 0||v.host!==void 0||v.port!==void 0?(E.userinfo=v.userinfo,E.host=v.host,E.port=v.port,E.path=n(v.path||""),E.query=v.query):(v.path?(v.path.charAt(0)==="/"?E.path=n(v.path):((y.userinfo!==void 0||y.host!==void 0||y.port!==void 0)&&!y.path?E.path="/"+v.path:y.path?E.path=y.path.slice(0,y.path.lastIndexOf("/")+1)+v.path:E.path=v.path,E.path=n(E.path)),E.query=v.query):(E.path=y.path,v.query!==void 0?E.query=v.query:E.query=y.query),E.userinfo=y.userinfo,E.host=y.host,E.port=y.port),E.scheme=y.scheme),E.fragment=v.fragment,E}function l(y,v,b){return typeof y=="string"?(y=unescape(y),y=c(i(p(y,b),!0),{...b,skipEscape:!0})):typeof y=="object"&&(y=c(i(y,!0),{...b,skipEscape:!0})),typeof v=="string"?(v=unescape(v),v=c(i(p(v,b),!0),{...b,skipEscape:!0})):typeof v=="object"&&(v=c(i(v,!0),{...b,skipEscape:!0})),y.toLowerCase()===v.toLowerCase()}function c(y,v){const b={host:y.host,scheme:y.scheme,userinfo:y.userinfo,port:y.port,path:y.path,query:y.query,nid:y.nid,nss:y.nss,uuid:y.uuid,fragment:y.fragment,reference:y.reference,resourceName:y.resourceName,secure:y.secure,error:""},w=Object.assign({},v),E=[],_=s[(w.scheme||b.scheme||"").toLowerCase()];_&&_.serialize&&_.serialize(b,w),b.path!==void 0&&(w.skipEscape?b.path=unescape(b.path):(b.path=escape(b.path),b.scheme!==void 0&&(b.path=b.path.split("%3A").join(":")))),w.reference!=="suffix"&&b.scheme&&E.push(b.scheme,":");const C=r(b);if(C!==void 0&&(w.reference!=="suffix"&&E.push("//"),E.push(C),b.path&&b.path.charAt(0)!=="/"&&E.push("/")),b.path!==void 0){let S=b.path;!w.absolutePath&&(!_||!_.absolutePath)&&(S=n(S)),C===void 0&&(S=S.replace(/^\/\//u,"/%2F")),E.push(S)}return b.query!==void 0&&E.push("?",b.query),b.fragment!==void 0&&E.push("#",b.fragment),E.join("")}const d=Array.from({length:127},(y,v)=>/[^!"$&'()*+,\-.;=_`a-z{}~]/u.test(String.fromCharCode(v)));function f(y){let v=0;for(let b=0,w=y.length;b<w;++b)if(v=y.charCodeAt(b),v>126||d[v])return!0;return!1}const h=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function p(y,v){const b=Object.assign({},v),w={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0},E=y.indexOf("%")!==-1;let _=!1;b.reference==="suffix"&&(y=(b.scheme?b.scheme+":":"")+"//"+y);const C=y.match(h);if(C){if(w.scheme=C[1],w.userinfo=C[3],w.host=C[4],w.port=parseInt(C[5],10),w.path=C[6]||"",w.query=C[7],w.fragment=C[8],isNaN(w.port)&&(w.port=C[5]),w.host){const k=t(w.host);if(k.isIPV4===!1){const R=e(k.host);w.host=R.host.toLowerCase(),_=R.isIPV6}else w.host=k.host,_=!0}w.scheme===void 0&&w.userinfo===void 0&&w.host===void 0&&w.port===void 0&&!w.path&&w.query===void 0?w.reference="same-document":w.scheme===void 0?w.reference="relative":w.fragment===void 0?w.reference="absolute":w.reference="uri",b.reference&&b.reference!=="suffix"&&b.reference!==w.reference&&(w.error=w.error||"URI is not a "+b.reference+" reference.");const S=s[(b.scheme||w.scheme||"").toLowerCase()];if(!b.unicodeSupport&&(!S||!S.unicodeSupport)&&w.host&&(b.domainHost||S&&S.domainHost)&&_===!1&&f(w.host))try{w.host=URL.domainToASCII(w.host.toLowerCase())}catch(k){w.error=w.error||"Host's domain name can not be converted to ASCII: "+k}(!S||S&&!S.skipNormalize)&&(E&&w.scheme!==void 0&&(w.scheme=unescape(w.scheme)),E&&w.host!==void 0&&(w.host=unescape(w.host)),w.path&&w.path.length&&(w.path=escape(unescape(w.path))),w.fragment&&w.fragment.length&&(w.fragment=encodeURI(decodeURIComponent(w.fragment)))),S&&S.parse&&S.parse(w,b)}else w.error=w.error||"URI can not be parsed.";return w}const m={SCHEMES:s,normalize:o,resolve:a,resolveComponents:u,equal:l,serialize:c,parse:p};return Q_.exports=m,Q_.exports.default=m,Q_.exports.fastUri=m,Q_.exports}var lhe;function Kzt(){if(lhe)return nR;lhe=1,Object.defineProperty(nR,"__esModule",{value:!0});const e=Yzt();return e.code='require("ajv/dist/runtime/uri").default',nR.default=e,nR}var che;function Xzt(){return che||(che=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=d5();Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var n=Mn();Object.defineProperty(e,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return n.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return n.CodeGen}});const r=GQ(),i=f5(),s=U3e(),o=YQ(),a=Mn(),u=c5(),l=a4(),c=yr(),d=Hzt,f=Kzt(),h=(U,L)=>new RegExp(U,L);h.code="new RegExp";const p=["removeAdditional","useDefaults","coerceTypes"],m=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),y={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},v={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},b=200;function w(U){var L,Y,j,G,X,ne,pe,de,xe,Ce,ue,se,me,be,Le,Ue,Ne,je,Ke,ut,pt,xt,De,wt,Kt;const Te=U.strict,Oe=(L=U.code)===null||L===void 0?void 0:L.optimize,lt=Oe===!0||Oe===void 0?1:Oe||0,_t=(j=(Y=U.code)===null||Y===void 0?void 0:Y.regExp)!==null&&j!==void 0?j:h,St=(G=U.uriResolver)!==null&&G!==void 0?G:f.default;return{strictSchema:(ne=(X=U.strictSchema)!==null&&X!==void 0?X:Te)!==null&&ne!==void 0?ne:!0,strictNumbers:(de=(pe=U.strictNumbers)!==null&&pe!==void 0?pe:Te)!==null&&de!==void 0?de:!0,strictTypes:(Ce=(xe=U.strictTypes)!==null&&xe!==void 0?xe:Te)!==null&&Ce!==void 0?Ce:"log",strictTuples:(se=(ue=U.strictTuples)!==null&&ue!==void 0?ue:Te)!==null&&se!==void 0?se:"log",strictRequired:(be=(me=U.strictRequired)!==null&&me!==void 0?me:Te)!==null&&be!==void 0?be:!1,code:U.code?{...U.code,optimize:lt,regExp:_t}:{optimize:lt,regExp:_t},loopRequired:(Le=U.loopRequired)!==null&&Le!==void 0?Le:b,loopEnum:(Ue=U.loopEnum)!==null&&Ue!==void 0?Ue:b,meta:(Ne=U.meta)!==null&&Ne!==void 0?Ne:!0,messages:(je=U.messages)!==null&&je!==void 0?je:!0,inlineRefs:(Ke=U.inlineRefs)!==null&&Ke!==void 0?Ke:!0,schemaId:(ut=U.schemaId)!==null&&ut!==void 0?ut:"$id",addUsedSchema:(pt=U.addUsedSchema)!==null&&pt!==void 0?pt:!0,validateSchema:(xt=U.validateSchema)!==null&&xt!==void 0?xt:!0,validateFormats:(De=U.validateFormats)!==null&&De!==void 0?De:!0,unicodeRegExp:(wt=U.unicodeRegExp)!==null&&wt!==void 0?wt:!0,int32range:(Kt=U.int32range)!==null&&Kt!==void 0?Kt:!0,uriResolver:St}}class E{constructor(L={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,L=this.opts={...L,...w(L)};const{es5:Y,lines:j}=this.opts.code;this.scope=new a.ValueScope({scope:{},prefixes:m,es5:Y,lines:j}),this.logger=F(L.logger);const G=L.validateFormats;L.validateFormats=!1,this.RULES=(0,s.getRules)(),_.call(this,y,L,"NOT SUPPORTED"),_.call(this,v,L,"DEPRECATED","warn"),this._metaOpts=N.call(this),L.formats&&k.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),L.keywords&&R.call(this,L.keywords),typeof L.meta=="object"&&this.addMetaSchema(L.meta),S.call(this),L.validateFormats=G}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:L,meta:Y,schemaId:j}=this.opts;let G=d;j==="id"&&(G={...d},G.id=G.$id,delete G.$id),Y&&L&&this.addMetaSchema(G,G[j],!1)}defaultMeta(){const{meta:L,schemaId:Y}=this.opts;return this.opts.defaultMeta=typeof L=="object"?L[Y]||L:void 0}validate(L,Y){let j;if(typeof L=="string"){if(j=this.getSchema(L),!j)throw new Error(`no schema with key or ref "${L}"`)}else j=this.compile(L);const G=j(Y);return"$async"in j||(this.errors=j.errors),G}compile(L,Y){const j=this._addSchema(L,Y);return j.validate||this._compileSchemaEnv(j)}compileAsync(L,Y){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:j}=this.opts;return G.call(this,L,Y);async function G(Ce,ue){await X.call(this,Ce.$schema);const se=this._addSchema(Ce,ue);return se.validate||ne.call(this,se)}async function X(Ce){Ce&&!this.getSchema(Ce)&&await G.call(this,{$ref:Ce},!0)}async function ne(Ce){try{return this._compileSchemaEnv(Ce)}catch(ue){if(!(ue instanceof i.default))throw ue;return pe.call(this,ue),await de.call(this,ue.missingSchema),ne.call(this,Ce)}}function pe({missingSchema:Ce,missingRef:ue}){if(this.refs[Ce])throw new Error(`AnySchema ${Ce} is loaded but ${ue} cannot be resolved`)}async function de(Ce){const ue=await xe.call(this,Ce);this.refs[Ce]||await X.call(this,ue.$schema),this.refs[Ce]||this.addSchema(ue,Ce,Y)}async function xe(Ce){const ue=this._loading[Ce];if(ue)return ue;try{return await(this._loading[Ce]=j(Ce))}finally{delete this._loading[Ce]}}}addSchema(L,Y,j,G=this.opts.validateSchema){if(Array.isArray(L)){for(const ne of L)this.addSchema(ne,void 0,j,G);return this}let X;if(typeof L=="object"){const{schemaId:ne}=this.opts;if(X=L[ne],X!==void 0&&typeof X!="string")throw new Error(`schema ${ne} must be string`)}return Y=(0,u.normalizeId)(Y||X),this._checkUnique(Y),this.schemas[Y]=this._addSchema(L,j,Y,G,!0),this}addMetaSchema(L,Y,j=this.opts.validateSchema){return this.addSchema(L,Y,!0,j),this}validateSchema(L,Y){if(typeof L=="boolean")return!0;let j;if(j=L.$schema,j!==void 0&&typeof j!="string")throw new Error("$schema must be a string");if(j=j||this.opts.defaultMeta||this.defaultMeta(),!j)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const G=this.validate(j,L);if(!G&&Y){const X="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(X);else throw new Error(X)}return G}getSchema(L){let Y;for(;typeof(Y=C.call(this,L))=="string";)L=Y;if(Y===void 0){const{schemaId:j}=this.opts,G=new o.SchemaEnv({schema:{},schemaId:j});if(Y=o.resolveSchema.call(this,G,L),!Y)return;this.refs[L]=Y}return Y.validate||this._compileSchemaEnv(Y)}removeSchema(L){if(L instanceof RegExp)return this._removeAllSchemas(this.schemas,L),this._removeAllSchemas(this.refs,L),this;switch(typeof L){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const Y=C.call(this,L);return typeof Y=="object"&&this._cache.delete(Y.schema),delete this.schemas[L],delete this.refs[L],this}case"object":{const Y=L;this._cache.delete(Y);let j=L[this.opts.schemaId];return j&&(j=(0,u.normalizeId)(j),delete this.schemas[j],delete this.refs[j]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(L){for(const Y of L)this.addKeyword(Y);return this}addKeyword(L,Y){let j;if(typeof L=="string")j=L,typeof Y=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),Y.keyword=j);else if(typeof L=="object"&&Y===void 0){if(Y=L,j=Y.keyword,Array.isArray(j)&&!j.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(z.call(this,j,Y),!Y)return(0,c.eachItem)(j,X=>q.call(this,X)),this;J.call(this,Y);const G={...Y,type:(0,l.getJSONTypes)(Y.type),schemaType:(0,l.getJSONTypes)(Y.schemaType)};return(0,c.eachItem)(j,G.type.length===0?X=>q.call(this,X,G):X=>G.type.forEach(ne=>q.call(this,X,G,ne))),this}getKeyword(L){const Y=this.RULES.all[L];return typeof Y=="object"?Y.definition:!!Y}removeKeyword(L){const{RULES:Y}=this;delete Y.keywords[L],delete Y.all[L];for(const j of Y.rules){const G=j.rules.findIndex(X=>X.keyword===L);G>=0&&j.rules.splice(G,1)}return this}addFormat(L,Y){return typeof Y=="string"&&(Y=new RegExp(Y)),this.formats[L]=Y,this}errorsText(L=this.errors,{separator:Y=", ",dataVar:j="data"}={}){return!L||L.length===0?"No errors":L.map(G=>`${j}${G.instancePath} ${G.message}`).reduce((G,X)=>G+Y+X)}$dataMetaSchema(L,Y){const j=this.RULES.all;L=JSON.parse(JSON.stringify(L));for(const G of Y){const X=G.split("/").slice(1);let ne=L;for(const pe of X)ne=ne[pe];for(const pe in j){const de=j[pe];if(typeof de!="object")continue;const{$data:xe}=de.definition,Ce=ne[pe];xe&&Ce&&(ne[pe]=Z(Ce))}}return L}_removeAllSchemas(L,Y){for(const j in L){const G=L[j];(!Y||Y.test(j))&&(typeof G=="string"?delete L[j]:G&&!G.meta&&(this._cache.delete(G.schema),delete L[j]))}}_addSchema(L,Y,j,G=this.opts.validateSchema,X=this.opts.addUsedSchema){let ne;const{schemaId:pe}=this.opts;if(typeof L=="object")ne=L[pe];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof L!="boolean")throw new Error("schema must be object or boolean")}let de=this._cache.get(L);if(de!==void 0)return de;j=(0,u.normalizeId)(ne||j);const xe=u.getSchemaRefs.call(this,L,j);return de=new o.SchemaEnv({schema:L,schemaId:pe,meta:Y,baseId:j,localRefs:xe}),this._cache.set(de.schema,de),X&&!j.startsWith("#")&&(j&&this._checkUnique(j),this.refs[j]=de),G&&this.validateSchema(L,!0),de}_checkUnique(L){if(this.schemas[L]||this.refs[L])throw new Error(`schema with key or id "${L}" already exists`)}_compileSchemaEnv(L){if(L.meta?this._compileMetaSchema(L):o.compileSchema.call(this,L),!L.validate)throw new Error("ajv implementation error");return L.validate}_compileMetaSchema(L){const Y=this.opts;this.opts=this._metaOpts;try{o.compileSchema.call(this,L)}finally{this.opts=Y}}}E.ValidationError=r.default,E.MissingRefError=i.default,e.default=E;function _(U,L,Y,j="error"){for(const G in U){const X=G;X in L&&this.logger[j](`${Y}: option ${G}. ${U[X]}`)}}function C(U){return U=(0,u.normalizeId)(U),this.schemas[U]||this.refs[U]}function S(){const U=this.opts.schemas;if(U)if(Array.isArray(U))this.addSchema(U);else for(const L in U)this.addSchema(U[L],L)}function k(){for(const U in this.opts.formats){const L=this.opts.formats[U];L&&this.addFormat(U,L)}}function R(U){if(Array.isArray(U)){this.addVocabulary(U);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const L in U){const Y=U[L];Y.keyword||(Y.keyword=L),this.addKeyword(Y)}}function N(){const U={...this.opts};for(const L of p)delete U[L];return U}const O={log(){},warn(){},error(){}};function F(U){if(U===!1)return O;if(U===void 0)return console;if(U.log&&U.warn&&U.error)return U;throw new Error("logger must implement log, warn and error methods")}const $=/^[a-z_$][a-z0-9_$:-]*$/i;function z(U,L){const{RULES:Y}=this;if((0,c.eachItem)(U,j=>{if(Y.keywords[j])throw new Error(`Keyword ${j} is already defined`);if(!$.test(j))throw new Error(`Keyword ${j} has invalid name`)}),!!L&&L.$data&&!("code"in L||"validate"in L))throw new Error('$data keyword must have "code" or "validate" function')}function q(U,L,Y){var j;const G=L==null?void 0:L.post;if(Y&&G)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:X}=this;let ne=G?X.post:X.rules.find(({type:de})=>de===Y);if(ne||(ne={type:Y,rules:[]},X.rules.push(ne)),X.keywords[U]=!0,!L)return;const pe={keyword:U,definition:{...L,type:(0,l.getJSONTypes)(L.type),schemaType:(0,l.getJSONTypes)(L.schemaType)}};L.before?W.call(this,ne,pe,L.before):ne.rules.push(pe),X.all[U]=pe,(j=L.implements)===null||j===void 0||j.forEach(de=>this.addKeyword(de))}function W(U,L,Y){const j=U.rules.findIndex(G=>G.keyword===Y);j>=0?U.rules.splice(j,0,L):(U.rules.push(L),this.logger.warn(`rule ${Y} is not defined`))}function J(U){let{metaSchema:L}=U;L!==void 0&&(U.$data&&this.opts.$data&&(L=Z(L)),U.validateSchema=this.compile(L,!0))}const K={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function Z(U){return{anyOf:[U,K]}}}(g9)),g9}var rR={},iR={},sR={},dhe;function Qzt(){if(dhe)return sR;dhe=1,Object.defineProperty(sR,"__esModule",{value:!0});const e={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};return sR.default=e,sR}var Im={},fhe;function Jzt(){if(fhe)return Im;fhe=1,Object.defineProperty(Im,"__esModule",{value:!0}),Im.callRef=Im.getValidate=void 0;const e=f5(),t=Nd(),n=Mn(),r=Sg(),i=YQ(),s=yr(),o={keyword:"$ref",schemaType:"string",code(l){const{gen:c,schema:d,it:f}=l,{baseId:h,schemaEnv:p,validateName:m,opts:y,self:v}=f,{root:b}=p;if((d==="#"||d==="#/")&&h===b.baseId)return E();const w=i.resolveRef.call(v,b,h,d);if(w===void 0)throw new e.default(f.opts.uriResolver,h,d);if(w instanceof i.SchemaEnv)return _(w);return C(w);function E(){if(p===b)return u(l,m,p,p.$async);const S=c.scopeValue("root",{ref:b});return u(l,(0,n._)`${S}.validate`,b,b.$async)}function _(S){const k=a(l,S);u(l,k,S,S.$async)}function C(S){const k=c.scopeValue("schema",y.code.source===!0?{ref:S,code:(0,n.stringify)(S)}:{ref:S}),R=c.name("valid"),N=l.subschema({schema:S,dataTypes:[],schemaPath:n.nil,topSchemaRef:k,errSchemaPath:d},R);l.mergeEvaluated(N),l.ok(R)}}};function a(l,c){const{gen:d}=l;return c.validate?d.scopeValue("validate",{ref:c.validate}):(0,n._)`${d.scopeValue("wrapper",{ref:c})}.validate`}Im.getValidate=a;function u(l,c,d,f){const{gen:h,it:p}=l,{allErrors:m,schemaEnv:y,opts:v}=p,b=v.passContext?r.default.this:n.nil;f?w():E();function w(){if(!y.$async)throw new Error("async schema referenced by sync schema");const S=h.let("valid");h.try(()=>{h.code((0,n._)`await ${(0,t.callValidateCode)(l,c,b)}`),C(c),m||h.assign(S,!0)},k=>{h.if((0,n._)`!(${k} instanceof ${p.ValidationError})`,()=>h.throw(k)),_(k),m||h.assign(S,!1)}),l.ok(S)}function E(){l.result((0,t.callValidateCode)(l,c,b),()=>C(c),()=>_(c))}function _(S){const k=(0,n._)`${S}.errors`;h.assign(r.default.vErrors,(0,n._)`${r.default.vErrors} === null ? ${k} : ${r.default.vErrors}.concat(${k})`),h.assign(r.default.errors,(0,n._)`${r.default.vErrors}.length`)}function C(S){var k;if(!p.opts.unevaluated)return;const R=(k=d==null?void 0:d.validate)===null||k===void 0?void 0:k.evaluated;if(p.props!==!0)if(R&&!R.dynamicProps)R.props!==void 0&&(p.props=s.mergeEvaluated.props(h,R.props,p.props));else{const N=h.var("props",(0,n._)`${S}.evaluated.props`);p.props=s.mergeEvaluated.props(h,N,p.props,n.Name)}if(p.items!==!0)if(R&&!R.dynamicItems)R.items!==void 0&&(p.items=s.mergeEvaluated.items(h,R.items,p.items));else{const N=h.var("items",(0,n._)`${S}.evaluated.items`);p.items=s.mergeEvaluated.items(h,N,p.items,n.Name)}}}return Im.callRef=u,Im.default=o,Im}var hhe;function Zzt(){if(hhe)return iR;hhe=1,Object.defineProperty(iR,"__esModule",{value:!0});const e=Qzt(),t=Jzt(),n=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",e.default,t.default];return iR.default=n,iR}var oR={},aR={},phe;function eUt(){if(phe)return aR;phe=1,Object.defineProperty(aR,"__esModule",{value:!0});const e=Mn(),t=e.operators,n={maximum:{okStr:"<=",ok:t.LTE,fail:t.GT},minimum:{okStr:">=",ok:t.GTE,fail:t.LT},exclusiveMaximum:{okStr:"<",ok:t.LT,fail:t.GTE},exclusiveMinimum:{okStr:">",ok:t.GT,fail:t.LTE}},r={message:({keyword:s,schemaCode:o})=>(0,e.str)`must be ${n[s].okStr} ${o}`,params:({keyword:s,schemaCode:o})=>(0,e._)`{comparison: ${n[s].okStr}, limit: ${o}}`},i={keyword:Object.keys(n),type:"number",schemaType:"number",$data:!0,error:r,code(s){const{keyword:o,data:a,schemaCode:u}=s;s.fail$data((0,e._)`${a} ${n[o].fail} ${u} || isNaN(${a})`)}};return aR.default=i,aR}var uR={},mhe;function tUt(){if(mhe)return uR;mhe=1,Object.defineProperty(uR,"__esModule",{value:!0});const e=Mn(),n={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:{message:({schemaCode:r})=>(0,e.str)`must be multiple of ${r}`,params:({schemaCode:r})=>(0,e._)`{multipleOf: ${r}}`},code(r){const{gen:i,data:s,schemaCode:o,it:a}=r,u=a.opts.multipleOfPrecision,l=i.let("res"),c=u?(0,e._)`Math.abs(Math.round(${l}) - ${l}) > 1e-${u}`:(0,e._)`${l} !== parseInt(${l})`;r.fail$data((0,e._)`(${o} === 0 || (${l} = ${s}/${o}, ${c}))`)}};return uR.default=n,uR}var lR={},cR={},ghe;function nUt(){if(ghe)return cR;ghe=1,Object.defineProperty(cR,"__esModule",{value:!0});function e(t){const n=t.length;let r=0,i=0,s;for(;i<n;)r++,s=t.charCodeAt(i++),s>=55296&&s<=56319&&i<n&&(s=t.charCodeAt(i),(s&64512)===56320&&i++);return r}return cR.default=e,e.code='require("ajv/dist/runtime/ucs2length").default',cR}var yhe;function rUt(){if(yhe)return lR;yhe=1,Object.defineProperty(lR,"__esModule",{value:!0});const e=Mn(),t=yr(),n=nUt(),i={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:{message({keyword:s,schemaCode:o}){const a=s==="maxLength"?"more":"fewer";return(0,e.str)`must NOT have ${a} than ${o} characters`},params:({schemaCode:s})=>(0,e._)`{limit: ${s}}`},code(s){const{keyword:o,data:a,schemaCode:u,it:l}=s,c=o==="maxLength"?e.operators.GT:e.operators.LT,d=l.opts.unicode===!1?(0,e._)`${a}.length`:(0,e._)`${(0,t.useFunc)(s.gen,n.default)}(${a})`;s.fail$data((0,e._)`${d} ${c} ${u}`)}};return lR.default=i,lR}var dR={},bhe;function iUt(){if(bhe)return dR;bhe=1,Object.defineProperty(dR,"__esModule",{value:!0});const e=Nd(),t=Mn(),r={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:{message:({schemaCode:i})=>(0,t.str)`must match pattern "${i}"`,params:({schemaCode:i})=>(0,t._)`{pattern: ${i}}`},code(i){const{data:s,$data:o,schema:a,schemaCode:u,it:l}=i,c=l.opts.unicodeRegExp?"u":"",d=o?(0,t._)`(new RegExp(${u}, ${c}))`:(0,e.usePattern)(i,a);i.fail$data((0,t._)`!${d}.test(${s})`)}};return dR.default=r,dR}var fR={},vhe;function sUt(){if(vhe)return fR;vhe=1,Object.defineProperty(fR,"__esModule",{value:!0});const e=Mn(),n={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:{message({keyword:r,schemaCode:i}){const s=r==="maxProperties"?"more":"fewer";return(0,e.str)`must NOT have ${s} than ${i} properties`},params:({schemaCode:r})=>(0,e._)`{limit: ${r}}`},code(r){const{keyword:i,data:s,schemaCode:o}=r,a=i==="maxProperties"?e.operators.GT:e.operators.LT;r.fail$data((0,e._)`Object.keys(${s}).length ${a} ${o}`)}};return fR.default=n,fR}var hR={},xhe;function oUt(){if(xhe)return hR;xhe=1,Object.defineProperty(hR,"__esModule",{value:!0});const e=Nd(),t=Mn(),n=yr(),i={keyword:"required",type:"object",schemaType:"array",$data:!0,error:{message:({params:{missingProperty:s}})=>(0,t.str)`must have required property '${s}'`,params:({params:{missingProperty:s}})=>(0,t._)`{missingProperty: ${s}}`},code(s){const{gen:o,schema:a,schemaCode:u,data:l,$data:c,it:d}=s,{opts:f}=d;if(!c&&a.length===0)return;const h=a.length>=f.loopRequired;if(d.allErrors?p():m(),f.strictRequired){const b=s.parentSchema.properties,{definedProperties:w}=s.it;for(const E of a)if((b==null?void 0:b[E])===void 0&&!w.has(E)){const _=d.schemaEnv.baseId+d.errSchemaPath,C=`required property "${E}" is not defined at "${_}" (strictRequired)`;(0,n.checkStrictMode)(d,C,d.opts.strictRequired)}}function p(){if(h||c)s.block$data(t.nil,y);else for(const b of a)(0,e.checkReportMissingProp)(s,b)}function m(){const b=o.let("missing");if(h||c){const w=o.let("valid",!0);s.block$data(w,()=>v(b,w)),s.ok(w)}else o.if((0,e.checkMissingProp)(s,a,b)),(0,e.reportMissingProp)(s,b),o.else()}function y(){o.forOf("prop",u,b=>{s.setParams({missingProperty:b}),o.if((0,e.noPropertyInData)(o,l,b,f.ownProperties),()=>s.error())})}function v(b,w){s.setParams({missingProperty:b}),o.forOf(b,u,()=>{o.assign(w,(0,e.propertyInData)(o,l,b,f.ownProperties)),o.if((0,t.not)(w),()=>{s.error(),o.break()})},t.nil)}}};return hR.default=i,hR}var pR={},whe;function aUt(){if(whe)return pR;whe=1,Object.defineProperty(pR,"__esModule",{value:!0});const e=Mn(),n={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:{message({keyword:r,schemaCode:i}){const s=r==="maxItems"?"more":"fewer";return(0,e.str)`must NOT have ${s} than ${i} items`},params:({schemaCode:r})=>(0,e._)`{limit: ${r}}`},code(r){const{keyword:i,data:s,schemaCode:o}=r,a=i==="maxItems"?e.operators.GT:e.operators.LT;r.fail$data((0,e._)`${s}.length ${a} ${o}`)}};return pR.default=n,pR}var mR={},gR={},Ehe;function KQ(){if(Ehe)return gR;Ehe=1,Object.defineProperty(gR,"__esModule",{value:!0});const e=KW();return e.code='require("ajv/dist/runtime/equal").default',gR.default=e,gR}var _he;function uUt(){if(_he)return mR;_he=1,Object.defineProperty(mR,"__esModule",{value:!0});const e=a4(),t=Mn(),n=yr(),r=KQ(),s={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:{message:({params:{i:o,j:a}})=>(0,t.str)`must NOT have duplicate items (items ## ${a} and ${o} are identical)`,params:({params:{i:o,j:a}})=>(0,t._)`{i: ${o}, j: ${a}}`},code(o){const{gen:a,data:u,$data:l,schema:c,parentSchema:d,schemaCode:f,it:h}=o;if(!l&&!c)return;const p=a.let("valid"),m=d.items?(0,e.getSchemaTypes)(d.items):[];o.block$data(p,y,(0,t._)`${f} === false`),o.ok(p);function y(){const E=a.let("i",(0,t._)`${u}.length`),_=a.let("j");o.setParams({i:E,j:_}),a.assign(p,!0),a.if((0,t._)`${E} > 1`,()=>(v()?b:w)(E,_))}function v(){return m.length>0&&!m.some(E=>E==="object"||E==="array")}function b(E,_){const C=a.name("item"),S=(0,e.checkDataTypes)(m,C,h.opts.strictNumbers,e.DataType.Wrong),k=a.const("indices",(0,t._)`{}`);a.for((0,t._)`;${E}--;`,()=>{a.let(C,(0,t._)`${u}[${E}]`),a.if(S,(0,t._)`continue`),m.length>1&&a.if((0,t._)`typeof ${C} == "string"`,(0,t._)`${C} += "_"`),a.if((0,t._)`typeof ${k}[${C}] == "number"`,()=>{a.assign(_,(0,t._)`${k}[${C}]`),o.error(),a.assign(p,!1).break()}).code((0,t._)`${k}[${C}] = ${E}`)})}function w(E,_){const C=(0,n.useFunc)(a,r.default),S=a.name("outer");a.label(S).for((0,t._)`;${E}--;`,()=>a.for((0,t._)`${_} = ${E}; ${_}--;`,()=>a.if((0,t._)`${C}(${u}[${E}], ${u}[${_}])`,()=>{o.error(),a.assign(p,!1).break(S)})))}}};return mR.default=s,mR}var yR={},The;function lUt(){if(The)return yR;The=1,Object.defineProperty(yR,"__esModule",{value:!0});const e=Mn(),t=yr(),n=KQ(),i={keyword:"const",$data:!0,error:{message:"must be equal to constant",params:({schemaCode:s})=>(0,e._)`{allowedValue: ${s}}`},code(s){const{gen:o,data:a,$data:u,schemaCode:l,schema:c}=s;u||c&&typeof c=="object"?s.fail$data((0,e._)`!${(0,t.useFunc)(o,n.default)}(${a}, ${l})`):s.fail((0,e._)`${c} !== ${a}`)}};return yR.default=i,yR}var bR={},Che;function cUt(){if(Che)return bR;Che=1,Object.defineProperty(bR,"__esModule",{value:!0});const e=Mn(),t=yr(),n=KQ(),i={keyword:"enum",schemaType:"array",$data:!0,error:{message:"must be equal to one of the allowed values",params:({schemaCode:s})=>(0,e._)`{allowedValues: ${s}}`},code(s){const{gen:o,data:a,$data:u,schema:l,schemaCode:c,it:d}=s;if(!u&&l.length===0)throw new Error("enum must have non-empty array");const f=l.length>=d.opts.loopEnum;let h;const p=()=>h??(h=(0,t.useFunc)(o,n.default));let m;if(f||u)m=o.let("valid"),s.block$data(m,y);else{if(!Array.isArray(l))throw new Error("ajv implementation error");const b=o.const("vSchema",c);m=(0,e.or)(...l.map((w,E)=>v(b,E)))}s.pass(m);function y(){o.assign(m,!1),o.forOf("v",c,b=>o.if((0,e._)`${p()}(${a}, ${b})`,()=>o.assign(m,!0).break()))}function v(b,w){const E=l[w];return typeof E=="object"&&E!==null?(0,e._)`${p()}(${a}, ${b}[${w}])`:(0,e._)`${a} === ${E}`}}};return bR.default=i,bR}var She;function dUt(){if(She)return oR;She=1,Object.defineProperty(oR,"__esModule",{value:!0});const e=eUt(),t=tUt(),n=rUt(),r=iUt(),i=sUt(),s=oUt(),o=aUt(),a=uUt(),u=lUt(),l=cUt(),c=[e.default,t.default,n.default,r.default,i.default,s.default,o.default,a.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},u.default,l.default];return oR.default=c,oR}var vR={},wv={},Ahe;function H3e(){if(Ahe)return wv;Ahe=1,Object.defineProperty(wv,"__esModule",{value:!0}),wv.validateAdditionalItems=void 0;const e=Mn(),t=yr(),r={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:{message:({params:{len:s}})=>(0,e.str)`must NOT have more than ${s} items`,params:({params:{len:s}})=>(0,e._)`{limit: ${s}}`},code(s){const{parentSchema:o,it:a}=s,{items:u}=o;if(!Array.isArray(u)){(0,t.checkStrictMode)(a,'"additionalItems" is ignored when "items" is not an array of schemas');return}i(s,u)}};function i(s,o){const{gen:a,schema:u,data:l,keyword:c,it:d}=s;d.items=!0;const f=a.const("len",(0,e._)`${l}.length`);if(u===!1)s.setParams({len:o.length}),s.pass((0,e._)`${f} <= ${o.length}`);else if(typeof u=="object"&&!(0,t.alwaysValidSchema)(d,u)){const p=a.var("valid",(0,e._)`${f} <= ${o.length}`);a.if((0,e.not)(p),()=>h(p)),s.ok(p)}function h(p){a.forRange("i",o.length,f,m=>{s.subschema({keyword:c,dataProp:m,dataPropType:t.Type.Num},p),d.allErrors||a.if((0,e.not)(p),()=>a.break())})}}return wv.validateAdditionalItems=i,wv.default=r,wv}var xR={},Ev={},khe;function q3e(){if(khe)return Ev;khe=1,Object.defineProperty(Ev,"__esModule",{value:!0}),Ev.validateTuple=void 0;const e=Mn(),t=yr(),n=Nd(),r={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(s){const{schema:o,it:a}=s;if(Array.isArray(o))return i(s,"additionalItems",o);a.items=!0,!(0,t.alwaysValidSchema)(a,o)&&s.ok((0,n.validateArray)(s))}};function i(s,o,a=s.schema){const{gen:u,parentSchema:l,data:c,keyword:d,it:f}=s;m(l),f.opts.unevaluated&&a.length&&f.items!==!0&&(f.items=t.mergeEvaluated.items(u,a.length,f.items));const h=u.name("valid"),p=u.const("len",(0,e._)`${c}.length`);a.forEach((y,v)=>{(0,t.alwaysValidSchema)(f,y)||(u.if((0,e._)`${p} > ${v}`,()=>s.subschema({keyword:d,schemaProp:v,dataProp:v},h)),s.ok(h))});function m(y){const{opts:v,errSchemaPath:b}=f,w=a.length,E=w===y.minItems&&(w===y.maxItems||y[o]===!1);if(v.strictTuples&&!E){const _=`"${d}" is ${w}-tuple, but minItems or maxItems/${o} are not specified or different at path "${b}"`;(0,t.checkStrictMode)(f,_,v.strictTuples)}}}return Ev.validateTuple=i,Ev.default=r,Ev}var Ihe;function fUt(){if(Ihe)return xR;Ihe=1,Object.defineProperty(xR,"__esModule",{value:!0});const e=q3e(),t={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:n=>(0,e.validateTuple)(n,"items")};return xR.default=t,xR}var wR={},Rhe;function hUt(){if(Rhe)return wR;Rhe=1,Object.defineProperty(wR,"__esModule",{value:!0});const e=Mn(),t=yr(),n=Nd(),r=H3e(),s={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:{message:({params:{len:o}})=>(0,e.str)`must NOT have more than ${o} items`,params:({params:{len:o}})=>(0,e._)`{limit: ${o}}`},code(o){const{schema:a,parentSchema:u,it:l}=o,{prefixItems:c}=u;l.items=!0,!(0,t.alwaysValidSchema)(l,a)&&(c?(0,r.validateAdditionalItems)(o,c):o.ok((0,n.validateArray)(o)))}};return wR.default=s,wR}var ER={},Dhe;function pUt(){if(Dhe)return ER;Dhe=1,Object.defineProperty(ER,"__esModule",{value:!0});const e=Mn(),t=yr(),r={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:{message:({params:{min:i,max:s}})=>s===void 0?(0,e.str)`must contain at least ${i} valid item(s)`:(0,e.str)`must contain at least ${i} and no more than ${s} valid item(s)`,params:({params:{min:i,max:s}})=>s===void 0?(0,e._)`{minContains: ${i}}`:(0,e._)`{minContains: ${i}, maxContains: ${s}}`},code(i){const{gen:s,schema:o,parentSchema:a,data:u,it:l}=i;let c,d;const{minContains:f,maxContains:h}=a;l.opts.next?(c=f===void 0?1:f,d=h):c=1;const p=s.const("len",(0,e._)`${u}.length`);if(i.setParams({min:c,max:d}),d===void 0&&c===0){(0,t.checkStrictMode)(l,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(d!==void 0&&c>d){(0,t.checkStrictMode)(l,'"minContains" > "maxContains" is always invalid'),i.fail();return}if((0,t.alwaysValidSchema)(l,o)){let w=(0,e._)`${p} >= ${c}`;d!==void 0&&(w=(0,e._)`${w} && ${p} <= ${d}`),i.pass(w);return}l.items=!0;const m=s.name("valid");d===void 0&&c===1?v(m,()=>s.if(m,()=>s.break())):c===0?(s.let(m,!0),d!==void 0&&s.if((0,e._)`${u}.length > 0`,y)):(s.let(m,!1),y()),i.result(m,()=>i.reset());function y(){const w=s.name("_valid"),E=s.let("count",0);v(w,()=>s.if(w,()=>b(E)))}function v(w,E){s.forRange("i",0,p,_=>{i.subschema({keyword:"contains",dataProp:_,dataPropType:t.Type.Num,compositeRule:!0},w),E()})}function b(w){s.code((0,e._)`${w}++`),d===void 0?s.if((0,e._)`${w} >= ${c}`,()=>s.assign(m,!0).break()):(s.if((0,e._)`${w} > ${d}`,()=>s.assign(m,!1).break()),c===1?s.assign(m,!0):s.if((0,e._)`${w} >= ${c}`,()=>s.assign(m,!0)))}}};return ER.default=r,ER}var C9={},Phe;function mUt(){return Phe||(Phe=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=Mn(),n=yr(),r=Nd();e.error={message:({params:{property:u,depsCount:l,deps:c}})=>{const d=l===1?"property":"properties";return(0,t.str)`must have ${d} ${c} when property ${u} is present`},params:({params:{property:u,depsCount:l,deps:c,missingProperty:d}})=>(0,t._)`{property: ${u},
    missingProperty: ${d},
    depsCount: ${l},
    deps: ${c}}`};const i={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(u){const[l,c]=s(u);o(u,l),a(u,c)}};function s({schema:u}){const l={},c={};for(const d in u){if(d==="__proto__")continue;const f=Array.isArray(u[d])?l:c;f[d]=u[d]}return[l,c]}function o(u,l=u.schema){const{gen:c,data:d,it:f}=u;if(Object.keys(l).length===0)return;const h=c.let("missing");for(const p in l){const m=l[p];if(m.length===0)continue;const y=(0,r.propertyInData)(c,d,p,f.opts.ownProperties);u.setParams({property:p,depsCount:m.length,deps:m.join(", ")}),f.allErrors?c.if(y,()=>{for(const v of m)(0,r.checkReportMissingProp)(u,v)}):(c.if((0,t._)`${y} && (${(0,r.checkMissingProp)(u,m,h)})`),(0,r.reportMissingProp)(u,h),c.else())}}e.validatePropertyDeps=o;function a(u,l=u.schema){const{gen:c,data:d,keyword:f,it:h}=u,p=c.name("valid");for(const m in l)(0,n.alwaysValidSchema)(h,l[m])||(c.if((0,r.propertyInData)(c,d,m,h.opts.ownProperties),()=>{const y=u.subschema({keyword:f,schemaProp:m},p);u.mergeValidEvaluated(y,p)},()=>c.var(p,!0)),u.ok(p))}e.validateSchemaDeps=a,e.default=i}(C9)),C9}var _R={},Nhe;function gUt(){if(Nhe)return _R;Nhe=1,Object.defineProperty(_R,"__esModule",{value:!0});const e=Mn(),t=yr(),r={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:{message:"property name must be valid",params:({params:i})=>(0,e._)`{propertyName: ${i.propertyName}}`},code(i){const{gen:s,schema:o,data:a,it:u}=i;if((0,t.alwaysValidSchema)(u,o))return;const l=s.name("valid");s.forIn("key",a,c=>{i.setParams({propertyName:c}),i.subschema({keyword:"propertyNames",data:c,dataTypes:["string"],propertyName:c,compositeRule:!0},l),s.if((0,e.not)(l),()=>{i.error(!0),u.allErrors||s.break()})}),i.ok(l)}};return _R.default=r,_R}var TR={},Ohe;function W3e(){if(Ohe)return TR;Ohe=1,Object.defineProperty(TR,"__esModule",{value:!0});const e=Nd(),t=Mn(),n=Sg(),r=yr(),s={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:{message:"must NOT have additional properties",params:({params:o})=>(0,t._)`{additionalProperty: ${o.additionalProperty}}`},code(o){const{gen:a,schema:u,parentSchema:l,data:c,errsCount:d,it:f}=o;if(!d)throw new Error("ajv implementation error");const{allErrors:h,opts:p}=f;if(f.props=!0,p.removeAdditional!=="all"&&(0,r.alwaysValidSchema)(f,u))return;const m=(0,e.allSchemaProperties)(l.properties),y=(0,e.allSchemaProperties)(l.patternProperties);v(),o.ok((0,t._)`${d} === ${n.default.errors}`);function v(){a.forIn("key",c,C=>{!m.length&&!y.length?E(C):a.if(b(C),()=>E(C))})}function b(C){let S;if(m.length>8){const k=(0,r.schemaRefOrVal)(f,l.properties,"properties");S=(0,e.isOwnProperty)(a,k,C)}else m.length?S=(0,t.or)(...m.map(k=>(0,t._)`${C} === ${k}`)):S=t.nil;return y.length&&(S=(0,t.or)(S,...y.map(k=>(0,t._)`${(0,e.usePattern)(o,k)}.test(${C})`))),(0,t.not)(S)}function w(C){a.code((0,t._)`delete ${c}[${C}]`)}function E(C){if(p.removeAdditional==="all"||p.removeAdditional&&u===!1){w(C);return}if(u===!1){o.setParams({additionalProperty:C}),o.error(),h||a.break();return}if(typeof u=="object"&&!(0,r.alwaysValidSchema)(f,u)){const S=a.name("valid");p.removeAdditional==="failing"?(_(C,S,!1),a.if((0,t.not)(S),()=>{o.reset(),w(C)})):(_(C,S),h||a.if((0,t.not)(S),()=>a.break()))}}function _(C,S,k){const R={keyword:"additionalProperties",dataProp:C,dataPropType:r.Type.Str};k===!1&&Object.assign(R,{compositeRule:!0,createErrors:!1,allErrors:!1}),o.subschema(R,S)}}};return TR.default=s,TR}var CR={},$he;function yUt(){if($he)return CR;$he=1,Object.defineProperty(CR,"__esModule",{value:!0});const e=d5(),t=Nd(),n=yr(),r=W3e(),i={keyword:"properties",type:"object",schemaType:"object",code(s){const{gen:o,schema:a,parentSchema:u,data:l,it:c}=s;c.opts.removeAdditional==="all"&&u.additionalProperties===void 0&&r.default.code(new e.KeywordCxt(c,r.default,"additionalProperties"));const d=(0,t.allSchemaProperties)(a);for(const y of d)c.definedProperties.add(y);c.opts.unevaluated&&d.length&&c.props!==!0&&(c.props=n.mergeEvaluated.props(o,(0,n.toHash)(d),c.props));const f=d.filter(y=>!(0,n.alwaysValidSchema)(c,a[y]));if(f.length===0)return;const h=o.name("valid");for(const y of f)p(y)?m(y):(o.if((0,t.propertyInData)(o,l,y,c.opts.ownProperties)),m(y),c.allErrors||o.else().var(h,!0),o.endIf()),s.it.definedProperties.add(y),s.ok(h);function p(y){return c.opts.useDefaults&&!c.compositeRule&&a[y].default!==void 0}function m(y){s.subschema({keyword:"properties",schemaProp:y,dataProp:y},h)}}};return CR.default=i,CR}var SR={},Mhe;function bUt(){if(Mhe)return SR;Mhe=1,Object.defineProperty(SR,"__esModule",{value:!0});const e=Nd(),t=Mn(),n=yr(),r=yr(),i={keyword:"patternProperties",type:"object",schemaType:"object",code(s){const{gen:o,schema:a,data:u,parentSchema:l,it:c}=s,{opts:d}=c,f=(0,e.allSchemaProperties)(a),h=f.filter(E=>(0,n.alwaysValidSchema)(c,a[E]));if(f.length===0||h.length===f.length&&(!c.opts.unevaluated||c.props===!0))return;const p=d.strictSchema&&!d.allowMatchingProperties&&l.properties,m=o.name("valid");c.props!==!0&&!(c.props instanceof t.Name)&&(c.props=(0,r.evaluatedPropsToName)(o,c.props));const{props:y}=c;v();function v(){for(const E of f)p&&b(E),c.allErrors?w(E):(o.var(m,!0),w(E),o.if(m))}function b(E){for(const _ in p)new RegExp(E).test(_)&&(0,n.checkStrictMode)(c,`property ${_} matches pattern ${E} (use allowMatchingProperties)`)}function w(E){o.forIn("key",u,_=>{o.if((0,t._)`${(0,e.usePattern)(s,E)}.test(${_})`,()=>{const C=h.includes(E);C||s.subschema({keyword:"patternProperties",schemaProp:E,dataProp:_,dataPropType:r.Type.Str},m),c.opts.unevaluated&&y!==!0?o.assign((0,t._)`${y}[${_}]`,!0):!C&&!c.allErrors&&o.if((0,t.not)(m),()=>o.break())})})}}};return SR.default=i,SR}var AR={},Lhe;function vUt(){if(Lhe)return AR;Lhe=1,Object.defineProperty(AR,"__esModule",{value:!0});const e=yr(),t={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(n){const{gen:r,schema:i,it:s}=n;if((0,e.alwaysValidSchema)(s,i)){n.fail();return}const o=r.name("valid");n.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},o),n.failResult(o,()=>n.reset(),()=>n.error())},error:{message:"must NOT be valid"}};return AR.default=t,AR}var kR={},Fhe;function xUt(){if(Fhe)return kR;Fhe=1,Object.defineProperty(kR,"__esModule",{value:!0});const t={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:Nd().validateUnion,error:{message:"must match a schema in anyOf"}};return kR.default=t,kR}var IR={},Bhe;function wUt(){if(Bhe)return IR;Bhe=1,Object.defineProperty(IR,"__esModule",{value:!0});const e=Mn(),t=yr(),r={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:{message:"must match exactly one schema in oneOf",params:({params:i})=>(0,e._)`{passingSchemas: ${i.passing}}`},code(i){const{gen:s,schema:o,parentSchema:a,it:u}=i;if(!Array.isArray(o))throw new Error("ajv implementation error");if(u.opts.discriminator&&a.discriminator)return;const l=o,c=s.let("valid",!1),d=s.let("passing",null),f=s.name("_valid");i.setParams({passing:d}),s.block(h),i.result(c,()=>i.reset(),()=>i.error(!0));function h(){l.forEach((p,m)=>{let y;(0,t.alwaysValidSchema)(u,p)?s.var(f,!0):y=i.subschema({keyword:"oneOf",schemaProp:m,compositeRule:!0},f),m>0&&s.if((0,e._)`${f} && ${c}`).assign(c,!1).assign(d,(0,e._)`[${d}, ${m}]`).else(),s.if(f,()=>{s.assign(c,!0),s.assign(d,m),y&&i.mergeEvaluated(y,e.Name)})})}}};return IR.default=r,IR}var RR={},jhe;function EUt(){if(jhe)return RR;jhe=1,Object.defineProperty(RR,"__esModule",{value:!0});const e=yr(),t={keyword:"allOf",schemaType:"array",code(n){const{gen:r,schema:i,it:s}=n;if(!Array.isArray(i))throw new Error("ajv implementation error");const o=r.name("valid");i.forEach((a,u)=>{if((0,e.alwaysValidSchema)(s,a))return;const l=n.subschema({keyword:"allOf",schemaProp:u},o);n.ok(o),n.mergeEvaluated(l)})}};return RR.default=t,RR}var DR={},zhe;function _Ut(){if(zhe)return DR;zhe=1,Object.defineProperty(DR,"__esModule",{value:!0});const e=Mn(),t=yr(),r={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:{message:({params:s})=>(0,e.str)`must match "${s.ifClause}" schema`,params:({params:s})=>(0,e._)`{failingKeyword: ${s.ifClause}}`},code(s){const{gen:o,parentSchema:a,it:u}=s;a.then===void 0&&a.else===void 0&&(0,t.checkStrictMode)(u,'"if" without "then" and "else" is ignored');const l=i(u,"then"),c=i(u,"else");if(!l&&!c)return;const d=o.let("valid",!0),f=o.name("_valid");if(h(),s.reset(),l&&c){const m=o.let("ifClause");s.setParams({ifClause:m}),o.if(f,p("then",m),p("else",m))}else l?o.if(f,p("then")):o.if((0,e.not)(f),p("else"));s.pass(d,()=>s.error(!0));function h(){const m=s.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},f);s.mergeEvaluated(m)}function p(m,y){return()=>{const v=s.subschema({keyword:m},f);o.assign(d,f),s.mergeValidEvaluated(v,d),y?o.assign(y,(0,e._)`${m}`):s.setParams({ifClause:m})}}}};function i(s,o){const a=s.schema[o];return a!==void 0&&!(0,t.alwaysValidSchema)(s,a)}return DR.default=r,DR}var PR={},Uhe;function TUt(){if(Uhe)return PR;Uhe=1,Object.defineProperty(PR,"__esModule",{value:!0});const e=yr(),t={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:n,parentSchema:r,it:i}){r.if===void 0&&(0,e.checkStrictMode)(i,`"${n}" without "if" is ignored`)}};return PR.default=t,PR}var Vhe;function CUt(){if(Vhe)return vR;Vhe=1,Object.defineProperty(vR,"__esModule",{value:!0});const e=H3e(),t=fUt(),n=q3e(),r=hUt(),i=pUt(),s=mUt(),o=gUt(),a=W3e(),u=yUt(),l=bUt(),c=vUt(),d=xUt(),f=wUt(),h=EUt(),p=_Ut(),m=TUt();function y(v=!1){const b=[c.default,d.default,f.default,h.default,p.default,m.default,o.default,a.default,s.default,u.default,l.default];return v?b.push(t.default,r.default):b.push(e.default,n.default),b.push(i.default),b}return vR.default=y,vR}var NR={},OR={},Hhe;function SUt(){if(Hhe)return OR;Hhe=1,Object.defineProperty(OR,"__esModule",{value:!0});const e=Mn(),n={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:{message:({schemaCode:r})=>(0,e.str)`must match format "${r}"`,params:({schemaCode:r})=>(0,e._)`{format: ${r}}`},code(r,i){const{gen:s,data:o,$data:a,schema:u,schemaCode:l,it:c}=r,{opts:d,errSchemaPath:f,schemaEnv:h,self:p}=c;if(!d.validateFormats)return;a?m():y();function m(){const v=s.scopeValue("formats",{ref:p.formats,code:d.code.formats}),b=s.const("fDef",(0,e._)`${v}[${l}]`),w=s.let("fType"),E=s.let("format");s.if((0,e._)`typeof ${b} == "object" && !(${b} instanceof RegExp)`,()=>s.assign(w,(0,e._)`${b}.type || "string"`).assign(E,(0,e._)`${b}.validate`),()=>s.assign(w,(0,e._)`"string"`).assign(E,b)),r.fail$data((0,e.or)(_(),C()));function _(){return d.strictSchema===!1?e.nil:(0,e._)`${l} && !${E}`}function C(){const S=h.$async?(0,e._)`(${b}.async ? await ${E}(${o}) : ${E}(${o}))`:(0,e._)`${E}(${o})`,k=(0,e._)`(typeof ${E} == "function" ? ${S} : ${E}.test(${o}))`;return(0,e._)`${E} && ${E} !== true && ${w} === ${i} && !${k}`}}function y(){const v=p.formats[u];if(!v){_();return}if(v===!0)return;const[b,w,E]=C(v);b===i&&r.pass(S());function _(){if(d.strictSchema===!1){p.logger.warn(k());return}throw new Error(k());function k(){return`unknown format "${u}" ignored in schema at path "${f}"`}}function C(k){const R=k instanceof RegExp?(0,e.regexpCode)(k):d.code.formats?(0,e._)`${d.code.formats}${(0,e.getProperty)(u)}`:void 0,N=s.scopeValue("formats",{key:u,ref:k,code:R});return typeof k=="object"&&!(k instanceof RegExp)?[k.type||"string",k.validate,(0,e._)`${N}.validate`]:["string",k,N]}function S(){if(typeof v=="object"&&!(v instanceof RegExp)&&v.async){if(!h.$async)throw new Error("async format in sync schema");return(0,e._)`await ${E}(${o})`}return typeof w=="function"?(0,e._)`${E}(${o})`:(0,e._)`${E}.test(${o})`}}}};return OR.default=n,OR}var qhe;function AUt(){if(qhe)return NR;qhe=1,Object.defineProperty(NR,"__esModule",{value:!0});const t=[SUt().default];return NR.default=t,NR}var ry={},Whe;function kUt(){return Whe||(Whe=1,Object.defineProperty(ry,"__esModule",{value:!0}),ry.contentVocabulary=ry.metadataVocabulary=void 0,ry.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],ry.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]),ry}var Ghe;function IUt(){if(Ghe)return rR;Ghe=1,Object.defineProperty(rR,"__esModule",{value:!0});const e=Zzt(),t=dUt(),n=CUt(),r=AUt(),i=kUt(),s=[e.default,t.default,(0,n.default)(),r.default,i.metadataVocabulary,i.contentVocabulary];return rR.default=s,rR}var $R={},J_={},Yhe;function RUt(){if(Yhe)return J_;Yhe=1,Object.defineProperty(J_,"__esModule",{value:!0}),J_.DiscrError=void 0;var e;return function(t){t.Tag="tag",t.Mapping="mapping"}(e||(J_.DiscrError=e={})),J_}var Khe;function DUt(){if(Khe)return $R;Khe=1,Object.defineProperty($R,"__esModule",{value:!0});const e=Mn(),t=RUt(),n=YQ(),r=f5(),i=yr(),o={keyword:"discriminator",type:"object",schemaType:"object",error:{message:({params:{discrError:a,tagName:u}})=>a===t.DiscrError.Tag?`tag "${u}" must be string`:`value of tag "${u}" must be in oneOf`,params:({params:{discrError:a,tag:u,tagName:l}})=>(0,e._)`{error: ${a}, tag: ${l}, tagValue: ${u}}`},code(a){const{gen:u,data:l,schema:c,parentSchema:d,it:f}=a,{oneOf:h}=d;if(!f.opts.discriminator)throw new Error("discriminator: requires discriminator option");const p=c.propertyName;if(typeof p!="string")throw new Error("discriminator: requires propertyName");if(c.mapping)throw new Error("discriminator: mapping is not supported");if(!h)throw new Error("discriminator: requires oneOf keyword");const m=u.let("valid",!1),y=u.const("tag",(0,e._)`${l}${(0,e.getProperty)(p)}`);u.if((0,e._)`typeof ${y} == "string"`,()=>v(),()=>a.error(!1,{discrError:t.DiscrError.Tag,tag:y,tagName:p})),a.ok(m);function v(){const E=w();u.if(!1);for(const _ in E)u.elseIf((0,e._)`${y} === ${_}`),u.assign(m,b(E[_]));u.else(),a.error(!1,{discrError:t.DiscrError.Mapping,tag:y,tagName:p}),u.endIf()}function b(E){const _=u.name("valid"),C=a.subschema({keyword:"oneOf",schemaProp:E},_);return a.mergeEvaluated(C,e.Name),_}function w(){var E;const _={},C=k(d);let S=!0;for(let O=0;O<h.length;O++){let F=h[O];if(F!=null&&F.$ref&&!(0,i.schemaHasRulesButRef)(F,f.self.RULES)){const z=F.$ref;if(F=n.resolveRef.call(f.self,f.schemaEnv.root,f.baseId,z),F instanceof n.SchemaEnv&&(F=F.schema),F===void 0)throw new r.default(f.opts.uriResolver,f.baseId,z)}const $=(E=F==null?void 0:F.properties)===null||E===void 0?void 0:E[p];if(typeof $!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${p}"`);S=S&&(C||k(F)),R($,O)}if(!S)throw new Error(`discriminator: "${p}" must be required`);return _;function k({required:O}){return Array.isArray(O)&&O.includes(p)}function R(O,F){if(O.const)N(O.const,F);else if(O.enum)for(const $ of O.enum)N($,F);else throw new Error(`discriminator: "properties/${p}" must have "const" or "enum"`)}function N(O,F){if(typeof O!="string"||O in _)throw new Error(`discriminator: "${p}" values must be unique strings`);_[O]=F}}}};return $R.default=o,$R}const PUt="http://json-schema.org/draft-07/schema#",NUt="http://json-schema.org/draft-07/schema#",OUt="Core schema meta-schema",$Ut={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},MUt=["object","boolean"],LUt={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},FUt={$schema:PUt,$id:NUt,title:OUt,definitions:$Ut,type:MUt,properties:LUt,default:!0};var Xhe;function BUt(){return Xhe||(Xhe=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;const n=Xzt(),r=IUt(),i=DUt(),s=FUt,o=["/properties"],a="http://json-schema.org/draft-07/schema";class u extends n.default{_addVocabularies(){super._addVocabularies(),r.default.forEach(p=>this.addVocabulary(p)),this.opts.discriminator&&this.addKeyword(i.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const p=this.opts.$data?this.$dataMetaSchema(s,o):s;this.addMetaSchema(p,a,!1),this.refs["http://json-schema.org/schema"]=a}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(a)?a:void 0)}}t.Ajv=u,e.exports=t=u,e.exports.Ajv=u,Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var l=d5();Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return l.KeywordCxt}});var c=Mn();Object.defineProperty(t,"_",{enumerable:!0,get:function(){return c._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return c.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return c.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return c.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return c.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return c.CodeGen}});var d=GQ();Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return d.default}});var f=f5();Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return f.default}})}(JI,JI.exports)),JI.exports}var jUt=BUt();const XQ=Tl(jUt),zUt="#/definitions/StudyConfig",UUt="http://json-schema.org/draft-07/schema#",VUt=JSON.parse('{"Answer":{"additionalProperties":false,"description":"The Answer interface is used to define the properties of an answer. Answers are used to define the correct answer for a task. These are generally used in training tasks or if skip logic is required based on the answer.\\n\\nAnswers are used to defined correct answers for a task. These are generally used in training tasks or if skip logic is required based on the answer. The answer field is used to define the correct answer to the question. The acceptableLow and acceptableHigh fields are used to define a range of acceptable answers (these are currently only used for training). For example, if the correct answer is 5, and the acceptableLow is 4 and the acceptableHigh is 6, then any answer between 4 and 6 will be considered correct.\\n\\nHere\'s an example of how to use the Answer interface to define the correct answer to a question:\\n\\n```js { \\"type\\": \\"markdown\\", \\"path\\": \\"<study-name>/assets/question.md\\", \\"response\\": [  {    \\"id\\": \\"response1\\",    \\"prompt\\": \\"What is 2 + 2?\\",    \\"location\\": \\"belowStimulus\\",    \\"type\\": \\"numerical\\"  } ] \\"correctAnswer\\": [{  \\"id\\": \\"response1\\",  \\"answer\\": 4 }] } ```\\n\\nIn this example, the correct answer to the question \\"What is 2 + 2?\\" is 4. If the participant answers 4, they will be considered correct. If they answer anything other than 4, they will be considered incorrect.","properties":{"acceptableHigh":{"description":"The acceptable high value for the answer. This is used to define a range of acceptable answers.","type":"number"},"acceptableLow":{"description":"The acceptable low value for the answer. This is used to define a range of acceptable answers.","type":"number"},"answer":{"description":"The correct answer to the question."},"id":{"description":"The id of the answer. This is used to identify the answer in the data file.","type":"string"}},"required":["id","answer"],"type":"object"},"BaseComponents":{"additionalProperties":{"additionalProperties":false,"properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"config":{"description":"The vega or vega-lite configuration.","type":"object"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"forceCompletion":{"description":"Whether to force the video to play until the end. Defaults to true.","type":"boolean"},"helpTextPathOverride":{"description":"Optional override for the help text. If present, will override the default help text path set in the uiConfig.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"parameters":{"anyOf":[{"additionalProperties":{},"description":"The parameters that are passed to the react component. These can be used within your react component to render different things.","type":"object"},{"additionalProperties":{},"description":"The parameters that are passed to the website (iframe). These can be used within your website to render different things.","type":"object"}],"description":"The parameters that are passed to the react component. These can be used within your react component to render different things."},"path":{"anyOf":[{"description":"The path to the markdown file. This should be a relative path from the public folder.","type":"string"},{"description":"The path to the react component. This should be a relative path from the src/public folder.","type":"string"},{"description":"The path to the image. This could be a relative path from the public folder or a url to an external image.","type":"string"},{"description":"The path to the website. This should be a relative path from the public folder or could be an external website.","type":"string"},{"description":"The path to the vega file. This should be a relative path from the public folder.","type":"string"},{"description":"The path to the video. This could be a relative path from the public folder or might be a url to an external website.","type":"string"}],"description":"The path to the markdown file. This should be a relative path from the public folder."},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"style":{"additionalProperties":{"type":"string"},"description":"The style of the image. This is an object with css properties as keys and css values as values.","type":"object"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"enum":["markdown","react-component","image","website","questionnaire","vega","video"],"type":"string"},"withTimeline":{"description":"Whether to show the video timeline. Defaults to false.","type":"boolean"}},"type":"object"},"description":"The baseComponents is an optional set of components which can help template other components. For example, suppose you have a single HTML file that you want to display to the user several times. Instead of having the same component twice in the `components` list, you can have a single baseComponent with all the information that the two HTML components will share. A great example is showing the same HTML component but with two different questions;\\n\\n Using baseComponents:\\n\\n```js \\"baseComponents\\": { \\"my-image-component\\": { \\"instructionLocation\\": \\"sidebar\\", \\"nextButtonLocation\\": \\"sidebar\\", \\"path\\": \\"<study-name>/assets/my-image.jpg\\", \\"response\\": [   {     \\"id\\": \\"my-image-id\\",     \\"options\\": [\\"Europe\\", \\"Japan\\", \\"USA\\"],     \\"prompt\\": \\"Your Selected Answer:\\",     \\"type\\": \\"dropdown\\"   } ], \\"type\\": \\"image\\" } } ``` In the above code snippet, we have a single base component which holds the information about the type of component, the path to the image, and the response (which is a dropdown containing three choices). Any component which contains the `\\"baseComponent\\":\\"my-image-component\\"` key-value pair will inherit each of these properties. Thus, if we have three different questions which have the same choices and are concerning the same image, we can define our components like below: ```js \\"components\\": { \\"q1\\": { \\"baseComponent\\": \\"my-image-component\\", \\"description\\": \\"Choosing section with largest GDP\\", \\"instruction\\": \\"Which region has the largest GDP?\\" }, \\"q2\\": { \\"baseComponent\\": \\"my-image-component\\", \\"description\\": \\"Choosing section with lowest GDP\\", \\"instruction\\": \\"Which region has the lowest GDP?\\" }, \\"q3\\": { \\"baseComponent\\": \\"my-image-component\\", \\"description\\": \\"Choosing section with highest exports of Wheat\\", \\"instruction\\": \\"Which region had the most Wheat exported in 2022?\\" } } ```","type":"object"},"ButtonsResponse":{"additionalProperties":false,"description":"The ButtonsResponse interface is used to define the properties of a buttons response. ButtonsResponses render as a list of buttons that the participant can click. When a button is clicked, the value of the button is stored in the data file. Participants can cycle through the options using the arrow keys.\\n\\nExample: ```js {   \\"id\\": \\"buttonsResponse\\",   \\"type\\": \\"buttons\\",   \\"prompt\\": \\"Click a button\\",   \\"location\\": \\"belowStimulus\\",   \\"options\\": [     \\"Option 1\\",     \\"Option 2\\",     \\"Option 3\\"   ] } ``` In this example, the participant can click one of the buttons labeled \\"Option 1\\", \\"Option 2\\", or \\"Option 3\\".","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"options":{"items":{"anyOf":[{"$ref":"#/definitions/StringOption"},{"type":"string"}]},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"buttons","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","options","prompt","type"],"type":"object"},"CheckboxResponse":{"additionalProperties":false,"description":"The CheckboxResponse interface is used to define the properties of a checkbox response. CheckboxResponses render as a checkbox input with user specified options.\\n\\n```js { \\"id\\": \\"q7\\", \\"prompt\\": \\"Checkbox example (not required)\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"checkbox\\", \\"options\\": [\\"Option 1\\", \\"Option 2\\", \\"Option 3\\"] } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"horizontal":{"description":"Whether to render the checkboxes horizontally. Defaults to false, so they render horizontally.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"maxSelections":{"description":"The maximum number of selections that are required.","type":"number"},"minSelections":{"description":"The minimum number of selections that are required.","type":"number"},"options":{"description":"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.","items":{"anyOf":[{"$ref":"#/definitions/StringOption"},{"type":"string"}]},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"checkbox","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"},"withOther":{"description":"Whether to render the checkboxes with an \\"other\\" option.","type":"boolean"}},"required":["id","options","prompt","type"],"type":"object"},"ComponentBlock":{"additionalProperties":false,"description":"The ComponentBlock interface is used to define order properties within the sequence. This is used to define the order of components in a study and the skip logic. It supports random assignment of trials using a pure random assignment and a [latin square](https://en.wikipedia.org/wiki/Latin_square).\\n\\nThe pure random assignment is a random assignment with no guarantees. For example, one component _could_ show up in the first position 10 times in a row. However, this situation is unlikely.\\n\\nHere\'s a snippet that shows how to use the random order:\\n\\n```js { \\"order\\": \\"random\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\" ] } ``` This snippet would produce a random order of the components in the sequence array. For example, the resulting sequence array could be :\\n\\n```js [ [\\"component2\\", \\"component3\\", \\"component1\\"], [\\"component1\\", \\"component3\\", \\"component2\\"], [\\"component3\\", \\"component1\\", \\"component2\\"], ... ] ```\\n\\nThe latin square assignment is a random assignment with some guarantees. It ensures that each component is shown an equal number of times in each position. Here\'s a snippet that shows how to use the latin square order:\\n\\n```js { \\"order\\": \\"latinSquare\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\" ] } ```\\n\\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\\n\\n```js [ [\\"component1\\", \\"component2\\", \\"component3\\"], [\\"component2\\", \\"component3\\", \\"component1\\"], [\\"component3\\", \\"component1\\", \\"component2\\"], ... ] ```\\n\\nThe fixed assignment is a fixed assignment of components. This is used when you want to show the components in a specific order. Here\'s a snippet that shows how to use the fixed order:\\n\\n```js { \\"order\\": \\"fixed\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\" ] } ```\\n\\nThis snippet would produce a fixed order of the components in the sequence array. The resulting sequence array would be:\\n\\n```js [ [\\"component1\\", \\"component2\\", \\"component3\\"], [\\"component1\\", \\"component2\\", \\"component3\\"], [\\"component1\\", \\"component2\\", \\"component3\\"], ... ] ```\\n\\nIn addition to the order property, the ComponentBlock interface also includes the `\\"numSamples\\"` property. This is used to reduce the number of components shown to a participant. This property respects the order property and the guarantees provided by the order property. For example, if you have three components in the components array and you set `\\"numSamples\\"` to 2, you would randomize across the three components while only showing a participant two of them. Here\'s a snippet that shows how to use the numSamples property:\\n\\n```js { \\"order\\": \\"latinSquare\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\" ], \\"numSamples\\": 2 } ```\\n\\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\\n\\n```js [ [\\"component1\\", \\"component2\\"], [\\"component2\\", \\"component3\\"], [\\"component3\\", \\"component1\\"], ... ] ```\\n\\nThe interruptions property specifies an array of interruptions. These can be used for breaks or attention checks. Interruptions can be deterministic or random. Please see [InterruptionBlock](../../type-aliases/InterruptionBlock) for more specific information.\\n\\nThe skip property is used to define skip conditions. This is used to skip to a different component or block based on the response to a component or the number of correct or incorrect responses in a block. Please see [SkipConditions](../../type-aliases/SkipConditions) for more specific information.","properties":{"components":{"description":"The components that are included in the order.","items":{"anyOf":[{"type":"string"},{"$ref":"#/definitions/ComponentBlock"},{"$ref":"#/definitions/DynamicBlock"}]},"type":"array"},"id":{"description":"The id of the block. This is used to identify the block in the SkipConditions and is only required if you want to refer to the whole block in the condition.to property.","type":"string"},"interruptions":{"description":"The interruptions property specifies an array of interruptions. These can be used for breaks or attention checks.","items":{"$ref":"#/definitions/InterruptionBlock"},"type":"array"},"numSamples":{"description":"The number of samples to use for the random assignments. This means you can randomize across 3 components while only showing a participant 2 at a time.","type":"number"},"order":{"description":"The type of order. This can be random (pure random), latinSquare (random with some guarantees), or fixed.","enum":["random","latinSquare","fixed"],"type":"string"},"skip":{"$ref":"#/definitions/SkipConditions","description":"The skip conditions for the block."}},"required":["order","components"],"type":"object"},"ComponentBlockCondition":{"additionalProperties":false,"description":"The ComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect components in a block. All answers on all components in the block are checked.\\n\\nAnswers are checked against the correct answers defined in the IndividualComponent\'s [CorrectAnswer](../Answer). If no correct answers are defined, the component is considered correct by default.\\n\\nYou might use this if a participant answers two questions in a block incorrectly. Here\'s an example of how to use the ComponentBlockCondition:\\n\\n```js { ... \\"skip\\": [ {   \\"check\\": \\"block\\",   \\"condition\\": \\"numIncorrect\\",   \\"value\\": 2,   \\"to\\": \\"end\\" } ] ... } ```\\n\\nIn this example, when the number of components with incorrect responses in the block is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.\\n\\nWhen the condition is met, the participant will immediately be redirected to the component or block specified in the `\\"to\\"` property. If no conditions are met, the participant will continue to the next component in the sequence.","properties":{"check":{"const":"block","description":"The check we\'ll perform.","type":"string"},"condition":{"description":"The condition to check.","enum":["numCorrect","numIncorrect"],"type":"string"},"to":{"description":"The id of the component or block to skip to","type":"string"},"value":{"description":"The number of correct or incorrect responses to check for.","type":"number"}},"required":["check","condition","value","to"],"type":"object"},"ConfigResponseBlockLocation":{"enum":["sidebar","aboveStimulus","belowStimulus"],"type":"string"},"DeterministicInterruption":{"additionalProperties":false,"description":"The DeterministicInterruption interface is used to define an interruption that will be shown at a specific location in the block.\\n\\nFor example, if you want to show an interruption after the second component in the block, you would set firstLocation to 2. If you want to show an interruption after every 3 components, you would set spacing to 3. If you want to show an interruption after the second component and then every 3 components, you would set firstLocation to 2 and spacing to 3.\\n\\nThe components property is an array of the components that will be inserted at the location specified by firstLocation and spacing. These components should reference components in the StudyConfig.components section of the config.\\n\\nHere\'s an example of how to use the DeterministicInterruption:\\n\\n```js { \\"order\\": \\"fixed\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"component6\\" ], \\"interruptions\\": [ {   \\"firstLocation\\": 2,   \\"spacing\\": 3,   \\"components\\": [     \\"interruption1\\",     \\"interruption2\\"   ] } ] } ```\\n\\nThe resulting sequence array could be:\\n\\n```js [ [\\"component1\\", \\"component2\\", \\"interruption1\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"interruption2\\", \\"component6\\"], [\\"component1\\", \\"component2\\", \\"interruption1\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"interruption2\\", \\"component6\\"], [\\"component1\\", \\"component2\\", \\"interruption1\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"interruption2\\", \\"component6\\"], ... ] ```","properties":{"components":{"description":"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.","items":{"type":"string"},"type":"array"},"firstLocation":{"description":"The Location of the first instance of the interruption. If this is set to 2, the interruption will be shown after the second component (inserted at index 2).","type":"number"},"spacing":{"description":"The number of components between breaks.","type":"number"}},"required":["firstLocation","spacing","components"],"type":"object"},"DropdownResponse":{"additionalProperties":false,"description":"The DropdownResponse interface is used to define the properties of a dropdown response. DropdownResponses render as a select input with user specified options.\\n\\nExample: ```js { \\"id\\": \\"q-color\\", \\"prompt\\": \\"What is your favorite color?\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"dropdown\\", \\"placeholder\\": \\"Please choose your favorite color\\", \\"options\\": [\\"Red\\", \\"Blue\\"] } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"options":{"description":"The options that are displayed in the dropdown.","items":{"anyOf":[{"$ref":"#/definitions/StringOption"},{"type":"string"}]},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"placeholder":{"description":"The placeholder text that is displayed in the input.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"dropdown","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","options","prompt","type"],"type":"object"},"DynamicBlock":{"additionalProperties":false,"description":"The DynamicBlock interface is used to define a block where displayed components are controlled by a function. This is useful when you want to generate the sequence based on answers to previous questions or other factors.\\n\\nThe functionPath property is a path to the function that generates the components. This should be a relative path from the src/public folder.\\n\\nHere\'s an example of how to use the DynamicBlock:\\n\\n```js {   \\"id\\": \\"funcBlock\\",   \\"order\\": \\"dynamic\\",   \\"functionPath\\": \\"<study-name>/assets/function.js\\",   \\"parameters\\": {     \\"param1\\": \\"value1\\",     \\"param2\\": \\"value2\\"   } } ```","properties":{"functionPath":{"description":"The path to the function that generates the components. This should be a relative path from the src/public folder.","type":"string"},"id":{"description":"The id of the block. This is used to identify the block in the SkipConditions and is only required if you want to refer to the whole block in the condition.to property.","type":"string"},"order":{"const":"dynamic","description":"The type of order. This can be random (pure random), latinSquare (random with some guarantees), or fixed.","type":"string"},"parameters":{"additionalProperties":{},"description":"The parameters that are passed to the function. These can be used within your function to render different things.","type":"object"}},"required":["id","order","functionPath"],"type":"object"},"ImageComponent":{"additionalProperties":false,"description":"The ImageComponent interface is used to define the properties of an image component. This component is used to render an image with optional styling.\\n\\nFor example, to render an image with a path of `path/to/study/assets/image.jpg` and a max width of 50%, you would use the following snippet: ```js { \\"type\\": \\"image\\", \\"path\\": \\"<study-name>/assets/image.jpg\\", \\"style\\": { \\"maxWidth\\": \\"50%\\" } } ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"helpTextPathOverride":{"description":"Optional override for the help text. If present, will override the default help text path set in the uiConfig.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"path":{"description":"The path to the image. This could be a relative path from the public folder or a url to an external image.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"style":{"additionalProperties":{"type":"string"},"description":"The style of the image. This is an object with css properties as keys and css values as values.","type":"object"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"image","type":"string"}},"required":["path","response","type"],"type":"object"},"IndividualComponent":{"anyOf":[{"$ref":"#/definitions/MarkdownComponent"},{"$ref":"#/definitions/ReactComponent"},{"$ref":"#/definitions/ImageComponent"},{"$ref":"#/definitions/WebsiteComponent"},{"$ref":"#/definitions/QuestionnaireComponent"},{"$ref":"#/definitions/VegaComponent"},{"$ref":"#/definitions/VideoComponent"}]},"IndividualComponentAllResponsesCondition":{"additionalProperties":false,"description":"The IndividualComponentAllResponsesCondition interface is used to define a SkipCondition based on all answers to a specific component. The skip logic will be checked for every component in the block that has the specified name.\\n\\n:::info\\n\\nIf you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.\\n\\n:::\\n\\n\\nHere\'s an example of how to use the IndividualComponentAllResponsesCondition:\\n\\n```js { ... \\"skip\\": [ {   \\"name\\": \\"attentionCheck\\",   \\"check\\": \\"responses\\",   \\"to\\": \\"end\\" } ] ... } ```\\n\\nIn this example, if all responses to the component with the ID \\"attentionCheck\\" are correct, the participant will be redirected to the end of the study. If any response is incorrect, the participant will continue to the next component in the sequence.","properties":{"check":{"const":"responses","description":"The check we\'ll perform.","type":"string"},"name":{"description":"The name of the component to check.","type":"string"},"to":{"description":"The id of the component or block to skip to","type":"string"}},"required":["name","check","to"],"type":"object"},"IndividualComponentSingleResponseCondition":{"additionalProperties":false,"description":"The IndividualComponentSingleResponseCondition interface is used to define a SkipCondition based on a single answer to a specific component. The skip logic will be checked for every component in the block that has the specified name.\\n\\n:::info\\n\\nIf you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.\\n\\n:::\\n\\nFor example, if you want to skip to a different component based on a response to a specific component, you would use the IndividualComponentSingleResponseCondition. Here\'s an example of how to use the IndividualComponentSingleResponseCondition:\\n\\n```js { ... \\"skip\\": [ {   \\"name\\": \\"attentionCheck\\",   \\"check\\": \\"response\\",   \\"responseId\\": \\"attentionCheckResponse\\",   \\"value\\": \\"the right answer\\",   \\"comparison\\": \\"equal\\",   \\"to\\": \\"end\\" } ] ... } ```\\n\\nIn this example, we assign our skip logic to the component whose ID is \\"attentionCheck\\". If the answer given to the response \\"attentionCheckResponse\\" is equal to \\"the right answer\\", then the user will be redirected to the end of the study. If the response is _not_ equal to \\"the right answer\\", then the participant will continue to the next component in the sequence.","properties":{"check":{"const":"response","description":"The check we\'ll perform.","type":"string"},"comparison":{"description":"The comparison to use.","enum":["equal","notEqual"],"type":"string"},"name":{"description":"The name of the component to check.","type":"string"},"responseId":{"description":"The response id to check.","type":"string"},"to":{"description":"The id of the component or block to skip to","type":"string"},"value":{"description":"The value to check.","type":["string","number"]}},"required":["name","check","responseId","value","comparison","to"],"type":"object"},"InheritedComponent":{"additionalProperties":false,"description":"An InheritedComponent is a component that inherits properties from a baseComponent. This is used to avoid repeating properties in components. This also means that components in the baseComponents object can be partially defined, while components in the components object can inherit from them and must be fully defined and include all properties (after potentially merging with a base component).","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"baseComponent":{"type":"string"},"config":{"description":"The vega or vega-lite configuration.","type":"object"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"forceCompletion":{"description":"Whether to force the video to play until the end. Defaults to true.","type":"boolean"},"helpTextPathOverride":{"description":"Optional override for the help text. If present, will override the default help text path set in the uiConfig.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"parameters":{"anyOf":[{"additionalProperties":{},"description":"The parameters that are passed to the react component. These can be used within your react component to render different things.","type":"object"},{"additionalProperties":{},"description":"The parameters that are passed to the website (iframe). These can be used within your website to render different things.","type":"object"}],"description":"The parameters that are passed to the react component. These can be used within your react component to render different things."},"path":{"anyOf":[{"description":"The path to the markdown file. This should be a relative path from the public folder.","type":"string"},{"description":"The path to the react component. This should be a relative path from the src/public folder.","type":"string"},{"description":"The path to the image. This could be a relative path from the public folder or a url to an external image.","type":"string"},{"description":"The path to the website. This should be a relative path from the public folder or could be an external website.","type":"string"},{"description":"The path to the vega file. This should be a relative path from the public folder.","type":"string"},{"description":"The path to the video. This could be a relative path from the public folder or might be a url to an external website.","type":"string"}],"description":"The path to the markdown file. This should be a relative path from the public folder."},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"style":{"additionalProperties":{"type":"string"},"description":"The style of the image. This is an object with css properties as keys and css values as values.","type":"object"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"enum":["markdown","react-component","image","website","questionnaire","vega","video"],"type":"string"},"withTimeline":{"description":"Whether to show the video timeline. Defaults to false.","type":"boolean"}},"required":["baseComponent"],"type":"object"},"InterruptionBlock":{"anyOf":[{"$ref":"#/definitions/DeterministicInterruption"},{"$ref":"#/definitions/RandomInterruption"}],"description":"The InterruptionBlock interface is used to define interruptions in a block. These can be used for breaks or attention checks. Interruptions can be deterministic or random."},"LikertResponse":{"additionalProperties":false,"description":"The LikertResponse interface is used to define the properties of a likert response. LikertResponses render as radio buttons with a user specified number of options, which can be controlled through the numItems. For example, numItems: 5 will render 5 radio buttons, and numItems: 7 will render 7 radio buttons. LikertResponses can also have a description, and left and right labels. The left and right labels are used to label the left and right ends of the likert scale with values such as \'Strongly Disagree\' and \'Strongly Agree\'.\\n\\nExample for a five-point Likert Scale:\\n\\n```js { \\"id\\": \\"q-satisfaction\\", \\"prompt\\": \\"Rate your satisfaction from 1 (not enjoyable) to 5 (very enjoyable).\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"likert\\", \\"leftLabel\\": \\"Not Enjoyable\\", \\"rightLabel\\": \\"Very Enjoyable\\", \\"numItems\\": 5 } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"leftLabel":{"description":"The left label of the likert scale. E.g Strongly Disagree","type":"string"},"location":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"numItems":{"description":"The number of options to render.","type":"number"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"rightLabel":{"description":"The right label of the likert scale. E.g Strongly Agree","type":"string"},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"likert","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","numItems","prompt","type"],"type":"object"},"LongTextResponse":{"additionalProperties":false,"description":"The LongTextResponse interface is used to define the properties of a long text response. LongTextResponses render as a text area that accepts any text and can optionally have a placeholder. ```js { \\"id\\": \\"q-name\\", \\"prompt\\": \\"What is your first name?\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"longText\\", \\"placeholder\\": \\"Please enter your first name\\" } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"placeholder":{"description":"The placeholder text that is displayed in the input.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"longText","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","prompt","type"],"type":"object"},"MarkdownComponent":{"additionalProperties":false,"description":"The MarkdownComponent interface is used to define the properties of a markdown component. The components can be used to render many different things, such as consent forms, instructions, and debriefs. Additionally, you can use the markdown component to render images, videos, and other media, with supporting text. Markdown components can have responses (e.g. in a consent form), or no responses (e.g. in a help text file). Here\'s an example with no responses for a simple help text file:\\n\\n```js { \\"type\\": \\"markdown\\", \\"path\\": \\"<study-name>/assets/help.md\\", \\"response\\": [] } ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"helpTextPathOverride":{"description":"Optional override for the help text. If present, will override the default help text path set in the uiConfig.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"path":{"description":"The path to the markdown file. This should be a relative path from the public folder.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"markdown","type":"string"}},"required":["path","response","type"],"type":"object"},"MatrixResponse":{"additionalProperties":false,"description":"The MatrixResponse interface is used to define the properties of a matrix radio or matrix checkbox response. Question options are rendered as rows of the matrix, each row containing its own radio/checkbox group. Answer options are rendered as column headers of the matrix. These can be customized by passing in the custom strings into the answer options. Alternatively, `answerOptions` can be set to one of the following custom strings: \'satisfaction5\',\'satisfaction7\', \'likely5\', \'likely7\'. This will automatically generate the appropriate headers for the matrix.\\n\\nExample for a 5-scale satisfaction matrix with three questions:\\n\\n```js { \\"id\\": \\"multi-satisfaction\\", \\"prompt\\": \\"Rate your satisfaction from 1 (not enjoyable) to 5 (very enjoyable) for the following items.\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"matrix-radio\\", \\"answerOptions\\": \\"satisfaction5\\", \\"questionOptions\\": [  \\"The tool we created\\",  \\"The technique we developed\\",  \\"The authors of the tools\\" ] } ```\\n\\nHere\'s an example using custom columns (answerOptions):\\n\\n```js { \\"id\\": \\"multi-custom\\", \\"prompt\\": \\"Which categories do the following items belong to?\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"matrix-checkbox\\", \\"answerOptions\\": [  \\"Has Legs\\",  \\"Has Wings\\",  \\"Can Swim\\" ], \\"questionOptions\\": [  \\"Dog\\",  \\"Snake\\",  \\"Eagle\\",  \\"Salmon\\",  \\"Platypus\\" ]\\n\\n} ```","properties":{"answerOptions":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"const":"likely5","type":"string"},{"const":"likely7","type":"string"},{"const":"satisfaction5","type":"string"},{"const":"satisfaction7","type":"string"}],"description":"The answer options (columns). We provide some shortcuts for a likelihood scale (ranging from highly unlikely to highly likely) and a satisfaction scale (ranging from highly unsatisfied to highly satisfied) with either 5 or 7 options to choose from."},"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"questionOptions":{"description":"The question options (rows) are the prompts for each response you\'d like to record.","items":{"type":"string"},"type":"array"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"enum":["matrix-radio","matrix-checkbox"],"type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["answerOptions","id","prompt","questionOptions","type"],"type":"object"},"NumberOption":{"additionalProperties":false,"description":"The NumberOption interface is used to define the options for a slider response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.","properties":{"label":{"description":"The label displayed to participants.","type":"string"},"value":{"description":"The value stored in the participant\'s data.","type":"number"}},"required":["label","value"],"type":"object"},"NumericalResponse":{"additionalProperties":false,"description":"The NumericalResponse interface is used to define the properties of a numerical response. NumericalResponses render as a text input that only accepts numbers, and can optionally have a min and max value, or a placeholder.\\n\\nExample: ```js { \\"id\\": \\"q-numerical\\", \\"prompt\\": \\"Numerical example\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"numerical\\", \\"placeholder\\": \\"Enter your age, range from 0 - 120\\", \\"max\\": 120, \\"min\\": 0 } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"max":{"description":"The maximum value that is accepted in the input.","type":"number"},"min":{"description":"The minimum value that is accepted in the input.","type":"number"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"placeholder":{"description":"The placeholder text that is displayed in the input.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"numerical","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","prompt","type"],"type":"object"},"QuestionnaireComponent":{"additionalProperties":false,"description":"A QuestionnaireComponent is used to render simple questions that require a response. The main use case of this component type is to ask participants questions when you don\'t need to render a stimulus. Please note, that even though we\'re not using a stimulus, the responses still require a `location`. For example this could be used to collect demographic information from a participant using the following snippet:\\n\\n```js { \\"type\\": \\"questionnaire\\", \\"response\\": [  {    \\"id\\": \\"gender\\",    \\"prompt\\": \\"Gender:\\",    \\"location\\": \\"belowStimulus\\",    \\"type\\": \\"checkbox\\",    \\"options\\": [\\"Man\\", \\"Woman\\", \\"Genderqueer\\", \\"Third-gender\\", ...]  } ] } ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"helpTextPathOverride":{"description":"Optional override for the help text. If present, will override the default help text path set in the uiConfig.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"questionnaire","type":"string"}},"required":["response","type"],"type":"object"},"RadioResponse":{"additionalProperties":false,"description":"The RadioResponse interface is used to define the properties of a radio response. Radios have only one allowable selection. RadioResponses render as a radio input with user specified options, and optionally left and right labels.\\n\\nExample: ```js { \\"id\\": \\"q-radio\\", \\"prompt\\": \\"Radio button example\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"radio\\", \\"options\\": [\\"Option 1\\", \\"Option 2\\"] } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"horizontal":{"description":"Whether to render the radio buttons horizontally. Defaults to false, so they render horizontally.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"leftLabel":{"description":"The left label of the radio group. Used in Likert scales for example","type":"string"},"location":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"options":{"description":"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.","items":{"anyOf":[{"$ref":"#/definitions/StringOption"},{"type":"string"}]},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"rightLabel":{"description":"The right label of the radio group. Used in Likert scales for example","type":"string"},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"radio","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"},"withOther":{"description":"Whether to render the radios with an \\"other\\" option.","type":"boolean"}},"required":["id","options","prompt","type"],"type":"object"},"RandomInterruption":{"additionalProperties":false,"description":"The RandomInterruption interface is used to define an interruption that will be shown randomly in the block.\\n\\nFor example, if you want to show a single interruption randomly in the block, you would set `\\"spacing\\"` to \\"random\\" and `\\"numInterruptions\\"` to 1. If you want to show 3 interruptions randomly in the block, you would set `\\"spacing\\"` to \\"random\\" and `\\"numInterruptions\\"` to 3.\\n\\nThe components property is an array of the components that will be inserted randomly in the block. These components should reference components in the StudyConfig.components section of the config.\\n\\nHere\'s an example of how to use the RandomInterruption:\\n\\n```js { \\"order\\": \\"fixed\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"component6\\" ], \\"interruptions\\": [ {   \\"spacing\\": \\"random\\",   \\"numInterruptions\\": 3,   \\"components\\": [     \\"interruption1\\",     \\"interruption2\\"   ] } ] } ```\\n\\nThe resulting sequence array could be:\\n\\n```js [ [\\"component1\\", \\"interruption1\\", \\"interruption2\\", \\"component2\\", \\"interruption1\\", \\"interruption2\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"interruption1\\", \\"interruption2\\", \\"component6], [\\"component1\\", \\"interruption1\\", \\"interruption2\\", \\"component2\\", \\"interruption1\\", \\"interruption2\\", \\"component3\\", \\"component4\\", \\"interruption1\\", \\"interruption2\\", \\"component5\\", \\"component6], [\\"component1\\", \\"component2\\" \\"interruption1\\", \\"interruption2\\", \\"component3\\", \\"interruption1\\", \\"interruption2\\", \\"component4\\", \\"component5\\", \\"interruption1\\", \\"interruption2\\", \\"component6], ... ] ```","properties":{"components":{"description":"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.","items":{"type":"string"},"type":"array"},"numInterruptions":{"description":"The number of times the interruption will be randomly added","type":"number"},"spacing":{"const":"random","description":"If spacing is set to random, reVISit will add interruptions randomly. These interruptions will not ever be displayed as the first component in the block.","type":"string"}},"required":["spacing","numInterruptions","components"],"type":"object"},"ReactComponent":{"additionalProperties":false,"description":"The ReactComponent interface is used to define the properties of a react component. This component is used to render react code with certain parameters. These parameters can be used within your react code to render different things.\\n\\nUnlike other types of components, the path for a React component is relative to the `src/public/` folder. Similar to our standard assets, we suggest creating a folder named `src/public/{studyName}/assets` to house all of the React component assets for a particular study. Your React component which you link to in the path must be default exported from its file.\\n\\nReact components created this way have a generic prop type passed to the component on render, `<StimulusParams<T>>`, which has the following types.\\n\\n```ts { parameters: T; setAnswer: ({ status, provenanceGraph, answers }: { status: boolean, provenanceGraph?: TrrackedProvenance, answers: Record<string, any> }) => void } ```\\n\\nparameters is the same object passed in from the ReactComponent type below, allowing you to pass options in from the config to your component. setAnswer is a callback function allowing the creator of the ReactComponent to programmatically set the answer, as well as the provenance graph. This can be useful if you don\'t use the default answer interface, and instead have something more unique.\\n\\nSo, for example, if I had the following ReactComponent in my config ```js { type: \'react-component\'; path: \'my_study/CoolComponent.tsx\'; parameters: {  name: \'Zach\';  age: 26; } } ```\\n\\nMy react component, CoolComponent.tsx, would exist in src/public/my_study/assets, and look something like this\\n\\n```ts export default function CoolComponent({ parameters, setAnswer }: StimulusParams<{name: string, age: number}>) { // render something } ```\\n\\nFor in depth examples, see the following studies, and their associated codebases. https://revisit.dev/study/demo-click-accuracy-test (https://github.com/revisit-studies/study/tree/v2.1.0/src/public/demo-click-accuracy-test/assets) https://revisit.dev/study/example-brush-interactions (https://github.com/revisit-studies/study/tree/v2.1.0/src/public/example-brush-interactions/assets)","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"helpTextPathOverride":{"description":"Optional override for the help text. If present, will override the default help text path set in the uiConfig.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"parameters":{"additionalProperties":{},"description":"The parameters that are passed to the react component. These can be used within your react component to render different things.","type":"object"},"path":{"description":"The path to the react component. This should be a relative path from the src/public folder.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"react-component","type":"string"}},"required":["path","response","type"],"type":"object"},"ReactiveResponse":{"additionalProperties":false,"description":"The ReactiveResponse interface is used to define the properties of a reactive response. ReactiveResponses render as a list, that is connected to a WebsiteComponent, VegaComponent, or ReactComponent. When data is sent from the components, it is displayed in the list.\\n\\n```js { \\"id\\": \\"reactiveResponse\\", \\"prompt\\": \\"Answer clicked in the stimulus\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"reactive\\" } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"reactive","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","prompt","type"],"type":"object"},"RepeatedComponentBlockCondition":{"additionalProperties":false,"description":"The RepeatedComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect repeated components. You might use this if you need to check if an attention check was failed multiple times. This is similar to the [ComponentBlockCondition](../ComponentBlockCondition), but it only checks a specific repeated component.\\n\\nHere\'s an example of how to use the RepeatedComponentBlockCondition:\\n\\n```js { ... \\"skip\\": [ {   \\"name\\": \\"attentionCheck\\",   \\"check\\": \\"repeatedComponent\\",   \\"condition\\": \\"numIncorrect\\",   \\"value\\": 2,   \\"to\\": \\"end\\" } ] ... } ```\\n\\nIn this example, when the number of incorrect responses to the repeated component with the name \\"attentionCheck\\" is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.","properties":{"check":{"const":"repeatedComponent","description":"The check we\'ll perform.","type":"string"},"condition":{"description":"The condition to check.","enum":["numCorrect","numIncorrect"],"type":"string"},"name":{"description":"The name of the repeated component to check (e.g. attentionCheck).","type":"string"},"to":{"description":"The id of the component or block to skip to","type":"string"},"value":{"description":"The number of correct or incorrect responses to check for.","type":"number"}},"required":["name","check","condition","value","to"],"type":"object"},"Response":{"anyOf":[{"$ref":"#/definitions/NumericalResponse"},{"$ref":"#/definitions/ShortTextResponse"},{"$ref":"#/definitions/LongTextResponse"},{"$ref":"#/definitions/LikertResponse"},{"$ref":"#/definitions/DropdownResponse"},{"$ref":"#/definitions/SliderResponse"},{"$ref":"#/definitions/RadioResponse"},{"$ref":"#/definitions/CheckboxResponse"},{"$ref":"#/definitions/ReactiveResponse"},{"$ref":"#/definitions/MatrixResponse"},{"$ref":"#/definitions/ButtonsResponse"}]},"ShortTextResponse":{"additionalProperties":false,"description":"The ShortTextResponse interface is used to define the properties of a short text response. ShortTextResponses render as a text input that accepts any text and can optionally have a placeholder.\\n\\n```js { \\"id\\": \\"q-short-text\\", \\"prompt\\": \\"Short text example\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"shortText\\", \\"placeholder\\": \\"Enter your answer here\\" } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"placeholder":{"description":"The placeholder text that is displayed in the input.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"shortText","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","prompt","type"],"type":"object"},"SkipConditions":{"description":"The SkipConditions interface is used to define skip conditions. This is used to skip to a different component/block based on the response to a component or based on the number of correct/incorrect responses in a block. Skip conditions work recursively: if you have a nested block, the parent blocks\' skip conditions will be considered when computing the skip logic.\\n\\nSkip conditions are evaluated in the order they are defined in the array. If a condition is met, the participant will be redirected to the component or block specified in the `\\"to\\"` property. If no conditions are met, the participant will continue to the next component in the sequence.\\n\\nSkip conditions allow you to jump to a different component or block. If you intend to skip to a block, you should specify a block id in the sequence. If you intend to skip to a component, you should specify a component id. Skipping backwards is not supported. Skipping to a repeated component will skip to the first instance of the component after the component that triggered the skip.\\n\\nPlease see the interface definitions for more specific information on the different types of skip conditions.","items":{"anyOf":[{"$ref":"#/definitions/IndividualComponentSingleResponseCondition"},{"$ref":"#/definitions/IndividualComponentAllResponsesCondition"},{"$ref":"#/definitions/ComponentBlockCondition"},{"$ref":"#/definitions/RepeatedComponentBlockCondition"}]},"type":"array"},"SliderResponse":{"additionalProperties":false,"description":"The SliderResponse interface is used to define the properties of a slider response. SliderResponses render as a slider input with user specified steps. For example, you could have steps of 0, 50, and 100.\\n\\nExample: ```js { \\"id\\": \\"q-slider\\", \\"prompt\\": \\"How are you feeling?\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"slider\\", \\"options\\": [  {    \\"label\\": \\"Bad\\",    \\"value\\": 0  },  {    \\"label\\": \\"OK\\",    \\"value\\": 50  },  {    \\"label\\": \\"Good\\",    \\"value\\": 100  } ] } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"options":{"description":"This defines the steps in the slider and the extent of the slider as an array of objects that have a label and a value.","items":{"$ref":"#/definitions/NumberOption"},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"snap":{"description":"Whether the slider should snap between values. Defaults to false. Slider snapping disables the label above the handle.","type":"boolean"},"startingValue":{"description":"The starting value of the slider. Defaults to the minimum value.","type":"number"},"step":{"description":"The step value of the slider. If not provided (and snap not enabled), the step value is calculated as the range of the slider divided by 100.","type":"number"},"tlxStyle":{"description":"Whether to render the slider with a NASA-tlx style. Defaults to false.","type":"boolean"},"type":{"const":"slider","type":"string"},"withBar":{"description":"Whether to render the slider with a bar to the left. Defaults to true.","type":"boolean"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","options","prompt","type"],"type":"object"},"StringOption":{"additionalProperties":false,"description":"The StringOption interface is used to define the options for a dropdown, radio, buttons, or checkbox response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.","properties":{"label":{"description":"The label displayed to participants.","type":"string"},"value":{"description":"The value stored in the participant\'s data.","type":"string"}},"required":["label","value"],"type":"object"},"StudyConfig":{"additionalProperties":false,"description":"The StudyConfig interface is used to define the properties of a study configuration. This is a JSON object with four main components: the StudyMetadata, the UIConfig, the Components, and the Sequence. Below is the general template that should be followed when constructing a Study configuration file.\\n\\n```js { \\"$schema\\": \\"https://raw.githubusercontent.com/revisit-studies/study/v2.1.0/src/parser/StudyConfigSchema.json\\", \\"studyMetadata\\": {  ... }, \\"uiConfig\\": {  ... }, \\"components\\": {  ... }, \\"sequence\\": {  ... } } ```\\n\\n:::info For information about each of the individual pieces of the study configuration file, you can visit the documentation for each one individually. ::: <br/>\\n\\nThe `$schema` line is used to verify the schema. If you\'re using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration.","properties":{"$schema":{"description":"A required json schema property. This should point to the github link for the version of the schema you would like. The `$schema` line is used to verify the schema. If you\'re using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration. See examples for more information","type":"string"},"baseComponents":{"$ref":"#/definitions/BaseComponents","description":"The base components that are used in the study. These components can be used to template other components. See [BaseComponents](../../type-aliases/BaseComponents) for more information."},"components":{"additionalProperties":{"anyOf":[{"$ref":"#/definitions/IndividualComponent"},{"$ref":"#/definitions/InheritedComponent"}]},"description":"The components that are used in the study. They must be fully defined here with all properties. Some properties may be inherited from baseComponents.","type":"object"},"importedLibraries":{"description":"A list of libraries that are used in the study. This is used to import external libraries into the study. Library names are valid namespaces to be used later.","items":{"type":"string"},"type":"array"},"sequence":{"anyOf":[{"$ref":"#/definitions/ComponentBlock"},{"$ref":"#/definitions/DynamicBlock"}],"description":"The order of the components in the study. This might include some randomness."},"studyMetadata":{"$ref":"#/definitions/StudyMetadata","description":"The metadata for the study. This is used to identify the study and version in the data file."},"uiConfig":{"$ref":"#/definitions/UIConfig","description":"The UI configuration for the study. This is used to configure the UI of the app."}},"required":["$schema","studyMetadata","uiConfig","components","sequence"],"type":"object"},"StudyMetadata":{"additionalProperties":false,"description":"The StudyMetadata is used to describe certain properties of a study. Some of this data is displayed on the landing page when running the app, such as the title and description. Below is an example of a StudyMetadata entry in your study configuration file:\\n\\n```js \\"studyMetadata\\" : { \\"title\\": \\"My New Study\\", \\"version\\": \\"pilot\\", \\"authors\\": [  \\"Jane Doe\\",  \\"John Doe\\" ], \\"date\\": \\"2024-04-01\\", \\"description\\": \\"This study is meant to test your ability.\\", \\"organizations\\": [  \\"The reVISit Team\\",  \\"The Other Team\\" ] } ```","properties":{"authors":{"description":"The authors of your study.","items":{"type":"string"},"type":"array"},"date":{"description":"The date of your study, may be useful for the researcher.","type":"string"},"description":{"description":"The description of your study, shown on the landing page.","type":"string"},"organizations":{"description":"The organizations that are associated with your study.","items":{"type":"string"},"type":"array"},"title":{"description":"The title of your study, shown on the landing page.","type":"string"},"version":{"description":"The version of your study. When you change a configuration file after a study has already been distributed to participants, you can change the version number so that the participants who see this new configuration file can be identified.","type":"string"}},"required":["title","version","authors","date","description","organizations"],"type":"object"},"UIConfig":{"additionalProperties":false,"description":"The UIConfig is used to configure the UI of the app. This includes the logo, contact email, and whether to show a progress bar. The UIConfig is also used to configure the sidebar, which can be used to display the task instructions and capture responses. Below is an example of how the UI Config would look in your study configuration (note, there are optional fields that are not shown here): ```js uiConfig:{ \\"contactEmail\\": \\"contact@revisit.dev\\", \\"helpTextPath\\": \\"<study-name>/assets/help.md\\", \\"logoPath\\": \\"<study-name>/assets/logo.jpg\\", \\"withProgressBar\\": true, \\"autoDownloadStudy\\": true \\"autoDownloadTime\\": 5000, \\"studyEndMsg\\": \\"Thank you for completing this study. You\'re the best!\\", \\"sidebar\\": true, \\"windowEventDebounceTime\\": 500, \\"urlParticipantIdParam\\": \\"PROLIFIC_ID\\", \\"numSequences\\": 500 } ``` In the above, the `<study-name>/assets/` path is referring to the path to your individual study assets. It is common practice to have your study directory contain an `assets` directory where all components and images relevant to your study reside. Note that this path is relative to the `public` folder of the repository - as is all other paths you define in reVISit (aside from React components whose paths are relative to `src/public`.)","properties":{"autoDownloadStudy":{"description":"Controls whether the study data is automatically downloaded at the end of the study.","type":"boolean"},"autoDownloadTime":{"description":"The time in milliseconds to wait before automatically downloading the study data.","type":"number"},"contactEmail":{"description":"The email address that used during the study if a participant clicks contact.","type":"string"},"enumerateQuestions":{"description":"Whether to prepend questions with their index (+ 1). This should only be used when all questions are in the same location, e.g. all are in the side bar.","type":"boolean"},"helpTextPath":{"description":"The path to the help text file. This is displayed when a participant clicks help. Markdown is supported.","type":"string"},"logoPath":{"description":"The path to the logo image. This is displayed on the landing page and the header.","type":"string"},"nextOnEnter":{"description":"Whether enter key should move to the next question. Defaults to false.","type":"boolean"},"numSequences":{"description":"The number of sequences to generate for the study. This is used to generate the random sequences for the study. The default is 1000.","type":"number"},"participantNameField":{"description":"The default name field for a participant. Directs revisit to use the task and response id as a name in UI elements. For example, if you wanted the response \'prolificId\' from the task \'introduction\' to be the name, this field would be \'introduction.prolificId\'","type":"string"},"recordStudyAudio":{"description":"Whether or not we want to utilize think-aloud features. If true, will record audio on all components unless deactivated on individual components. Defaults to false.","type":"boolean"},"sidebar":{"description":"Controls whether the left sidebar is rendered at all. Required to be true if your response\'s location is set to sidebar for any question.","type":"boolean"},"sidebarWidth":{"description":"The width of the left sidebar. Defaults to 300.","type":"number"},"studyEndMsg":{"description":"The message to display when the study ends.","type":"string"},"timeoutReject":{"description":"Whether to redirect a timed out participant to a rejection page. This only works for components where the `nextButtonDisableTime` field is set.","type":"boolean"},"urlParticipantIdParam":{"description":"If the participant ID is passed in the URL, this is the name of the querystring parameter that is used to capture the participant ID (e.g. PROLIFIC_ID). This will allow a user to continue a study on different devices and browsers.","type":"string"},"windowEventDebounceTime":{"description":"Debounce time in milliseconds for automatically tracked window events. Defaults to 100. E.g 100 here means 1000ms / 100ms = 10 times a second, 200 here means 1000ms / 200ms = 5 times per second","type":"number"},"withProgressBar":{"description":"Controls whether the progress bar is rendered in the study.","type":"boolean"}},"required":["contactEmail","logoPath","withProgressBar","sidebar"],"type":"object"},"VegaComponent":{"anyOf":[{"$ref":"#/definitions/VegaComponentPath"},{"$ref":"#/definitions/VegaComponentConfig"}]},"VegaComponentConfig":{"additionalProperties":false,"description":"The VegaComponentConfig interface is used to define the properties of a Vega Component. This component is used to render a Vega/Vega-Lite Component by adding Vega/Vega-Lite specs within the reVISit config itself.\\n\\nTo do this, would use the following snippet: ```js { \\"type\\": \\"vega\\", \\"config\\": { ... vega specs here ...}, }\\n\\nIIf you are using Vega, you can use signals with `revisitAnswer` to send the user\'s responses back to the reVISit. For example, you can use the following snippet in your Vega spec\'s signals section: ```js { \\"signals\\": [  {    \\"name\\": \\"revisitAnswer\\",    \\"value\\": {},    \\"on\\": [      {        \\"events\\": \\"rect:click\\",        \\"update\\": \\"{responseId: \'vegaDemoResponse1\', response: datum.category}\\"      }    ]  } ] } In this example, when a user clicks on a rectangle in the Vega chart, the `revisitAnswer` signal is updated with the responseId and response. ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"config":{"description":"The vega or vega-lite configuration.","type":"object"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"helpTextPathOverride":{"description":"Optional override for the help text. If present, will override the default help text path set in the uiConfig.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"vega","type":"string"}},"required":["config","response","type"],"type":"object"},"VegaComponentPath":{"additionalProperties":false,"description":"The VegaComponentPath interface is used to define the properties of a Vega Component. This component is used to render a Vega/Vega-Lite Component with path pointing to your Vega/Vega-Lite specs file.\\n\\nFor example, to render a vega based stimuli with a path of `<study-name>/assets/vega.spec.json`, you would use the following snippet: ```js { \\"type\\": \\"vega\\", \\"path\\": \\"<study-name>/assets/vega.spec.json\\", } ```\\n\\nIf you are using Vega, you can use signals with `revisitAnswer` to send the user\'s responses back to the reVISit. For example, you can use the following snippet in your Vega spec file\'s signals section: ```js { \\"signals\\": [  {    \\"name\\": \\"revisitAnswer\\",    \\"value\\": {},    \\"on\\": [      {        \\"events\\": \\"rect:click\\",        \\"update\\": \\"{responseId: \'vegaDemoResponse1\', response: datum.category}\\"      }    ]  } ] } In this example, when a user clicks on a rectangle in the Vega chart, the `revisitAnswer` signal is updated with the responseId and response. This signal is then passed to reVISit as the participant\'s response. ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"helpTextPathOverride":{"description":"Optional override for the help text. If present, will override the default help text path set in the uiConfig.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"path":{"description":"The path to the vega file. This should be a relative path from the public folder.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"vega","type":"string"}},"required":["path","response","type"],"type":"object"},"VideoComponent":{"additionalProperties":false,"description":"The VideoComponent interface is used to define the properties of a video component. This component is used to render a video with optional controls.\\n\\nMost often, video components will be used for trainings, and will have a `forceCompletion` field set to true. This will prevent the participant from moving on until the video has finished playing.\\n\\nAs such, the `forceCompletion` field is set to true by default, and the `withTimeline` field is set to false by default.\\n\\nFor example, to render a training video with a path of `<study-name>/assets/video.mp4`, you would use the following snippet: ```js {   \\"type\\": \\"video\\",   \\"path\\": \\"<study-name>/assets/video.mp4\\", } ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"forceCompletion":{"description":"Whether to force the video to play until the end. Defaults to true.","type":"boolean"},"helpTextPathOverride":{"description":"Optional override for the help text. If present, will override the default help text path set in the uiConfig.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"path":{"description":"The path to the video. This could be a relative path from the public folder or might be a url to an external website.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"video","type":"string"},"withTimeline":{"description":"Whether to show the video timeline. Defaults to false.","type":"boolean"}},"required":["path","response","type"],"type":"object"},"WebsiteComponent":{"additionalProperties":false,"description":"The WebsiteComponent interface is used to define the properties of a website component. A WebsiteComponent is used to render an iframe with a website inside of it. This can be used to display an external website or an html file that is located in the public folder.\\n\\n```js { \\"type\\": \\"website\\", \\"path\\": \\"<study-name>/assets/website.html\\", } ```\\n\\nTo pass a data from the config to the website, you can use the `parameters` field as below:\\n\\n```js { \\"type\\": \\"website\\", \\"path\\": \\"<study-name>/website.html\\", \\"parameters\\": {  \\"barData\\": [0.32, 0.01, 1.2, 1.3, 0.82, 0.4, 0.3] }, \\"response\\": [  {    \\"id\\": \\"barChart\\",    \\"prompt\\": \\"Your selected answer:\\",    \\"location\\": \\"belowStimulus\\",    \\"type\\": \\"reactive\\"  } ] } ``` In the `website.html` file, by including `revisit-communicate.js`, you can use the `Revisit.onDataReceive` method to retrieve the data, and `Revisit.postAnswers` to send the user\'s responses back to the reVISit as shown in the example below:\\n\\n```html <script src=\\"../../revisitUtilities/revisit-communicate.js\\"><\/script> <script> Revisit.onDataReceive((data) => {  const barData = data[\'barData\'];  ... });\\n\\n// Call out that \'barChart\' needs to match ID in \'response\' object Revisit.postAnswers({ barChart: userAnswer }); <\/script> ```\\n\\n If the html website implements Trrack library for provenance tracking, you can send the provenance graph back to reVISit by calling `Revisit.postProvenanceGraph` as shown in the example below. You need to call this each time the Trrack state is updated so that reVISit is kept aware of the changes in the provenance graph.\\n\\n```js const trrack = initializeTrrack({ initialState, registry });\\n\\n... Revisit.postProvenance(trrack.graph.backend); ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"helpTextPathOverride":{"description":"Optional override for the help text. If present, will override the default help text path set in the uiConfig.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"parameters":{"additionalProperties":{},"description":"The parameters that are passed to the website (iframe). These can be used within your website to render different things.","type":"object"},"path":{"description":"The path to the website. This should be a relative path from the public folder or could be an external website.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"website","type":"string"}},"required":["path","response","type"],"type":"object"}}'),HUt={$ref:zUt,$schema:UUt,definitions:VUt},qUt="#/definitions/GlobalConfig",WUt="http://json-schema.org/draft-07/schema#",GUt={GlobalConfig:{additionalProperties:!1,description:"The GlobalConfig is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",properties:{$schema:{description:"A required json schema property. This should point to the github link for the version of the schema you would like. See examples in the public folder for more information",type:"string"},configs:{additionalProperties:{additionalProperties:!1,description:"The key is used to identify the study config file. This key is used in the configList property.",properties:{path:{description:"The path to the study config file. This should be a relative path from the public folder.",type:"string"},test:{description:"Indicates whether the study is a test study. This is used to hide the study from the landing page.",type:"boolean"}},required:["path"],type:"object"},description:"A required property that specifies the options for the configList property.",type:"object"},configsList:{description:"A required property that is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",items:{type:"string"},type:"array"}},required:["$schema","configs","configsList"],type:"object"}},YUt={$ref:qUt,$schema:WUt,definitions:GUt},KUt="#/definitions/LibraryConfig",XUt="http://json-schema.org/draft-07/schema#",QUt=JSON.parse('{"Answer":{"additionalProperties":false,"description":"The Answer interface is used to define the properties of an answer. Answers are used to define the correct answer for a task. These are generally used in training tasks or if skip logic is required based on the answer.\\n\\nAnswers are used to defined correct answers for a task. These are generally used in training tasks or if skip logic is required based on the answer. The answer field is used to define the correct answer to the question. The acceptableLow and acceptableHigh fields are used to define a range of acceptable answers (these are currently only used for training). For example, if the correct answer is 5, and the acceptableLow is 4 and the acceptableHigh is 6, then any answer between 4 and 6 will be considered correct.\\n\\nHere\'s an example of how to use the Answer interface to define the correct answer to a question:\\n\\n```js { \\"type\\": \\"markdown\\", \\"path\\": \\"<study-name>/assets/question.md\\", \\"response\\": [  {    \\"id\\": \\"response1\\",    \\"prompt\\": \\"What is 2 + 2?\\",    \\"location\\": \\"belowStimulus\\",    \\"type\\": \\"numerical\\"  } ] \\"correctAnswer\\": [{  \\"id\\": \\"response1\\",  \\"answer\\": 4 }] } ```\\n\\nIn this example, the correct answer to the question \\"What is 2 + 2?\\" is 4. If the participant answers 4, they will be considered correct. If they answer anything other than 4, they will be considered incorrect.","properties":{"acceptableHigh":{"description":"The acceptable high value for the answer. This is used to define a range of acceptable answers.","type":"number"},"acceptableLow":{"description":"The acceptable low value for the answer. This is used to define a range of acceptable answers.","type":"number"},"answer":{"description":"The correct answer to the question."},"id":{"description":"The id of the answer. This is used to identify the answer in the data file.","type":"string"}},"required":["id","answer"],"type":"object"},"BaseComponents":{"additionalProperties":{"additionalProperties":false,"properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"config":{"description":"The vega or vega-lite configuration.","type":"object"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"forceCompletion":{"description":"Whether to force the video to play until the end. Defaults to true.","type":"boolean"},"helpTextPathOverride":{"description":"Optional override for the help text. If present, will override the default help text path set in the uiConfig.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"parameters":{"anyOf":[{"additionalProperties":{},"description":"The parameters that are passed to the react component. These can be used within your react component to render different things.","type":"object"},{"additionalProperties":{},"description":"The parameters that are passed to the website (iframe). These can be used within your website to render different things.","type":"object"}],"description":"The parameters that are passed to the react component. These can be used within your react component to render different things."},"path":{"anyOf":[{"description":"The path to the markdown file. This should be a relative path from the public folder.","type":"string"},{"description":"The path to the react component. This should be a relative path from the src/public folder.","type":"string"},{"description":"The path to the image. This could be a relative path from the public folder or a url to an external image.","type":"string"},{"description":"The path to the website. This should be a relative path from the public folder or could be an external website.","type":"string"},{"description":"The path to the vega file. This should be a relative path from the public folder.","type":"string"},{"description":"The path to the video. This could be a relative path from the public folder or might be a url to an external website.","type":"string"}],"description":"The path to the markdown file. This should be a relative path from the public folder."},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"style":{"additionalProperties":{"type":"string"},"description":"The style of the image. This is an object with css properties as keys and css values as values.","type":"object"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"enum":["markdown","react-component","image","website","questionnaire","vega","video"],"type":"string"},"withTimeline":{"description":"Whether to show the video timeline. Defaults to false.","type":"boolean"}},"type":"object"},"description":"The baseComponents is an optional set of components which can help template other components. For example, suppose you have a single HTML file that you want to display to the user several times. Instead of having the same component twice in the `components` list, you can have a single baseComponent with all the information that the two HTML components will share. A great example is showing the same HTML component but with two different questions;\\n\\n Using baseComponents:\\n\\n```js \\"baseComponents\\": { \\"my-image-component\\": { \\"instructionLocation\\": \\"sidebar\\", \\"nextButtonLocation\\": \\"sidebar\\", \\"path\\": \\"<study-name>/assets/my-image.jpg\\", \\"response\\": [   {     \\"id\\": \\"my-image-id\\",     \\"options\\": [\\"Europe\\", \\"Japan\\", \\"USA\\"],     \\"prompt\\": \\"Your Selected Answer:\\",     \\"type\\": \\"dropdown\\"   } ], \\"type\\": \\"image\\" } } ``` In the above code snippet, we have a single base component which holds the information about the type of component, the path to the image, and the response (which is a dropdown containing three choices). Any component which contains the `\\"baseComponent\\":\\"my-image-component\\"` key-value pair will inherit each of these properties. Thus, if we have three different questions which have the same choices and are concerning the same image, we can define our components like below: ```js \\"components\\": { \\"q1\\": { \\"baseComponent\\": \\"my-image-component\\", \\"description\\": \\"Choosing section with largest GDP\\", \\"instruction\\": \\"Which region has the largest GDP?\\" }, \\"q2\\": { \\"baseComponent\\": \\"my-image-component\\", \\"description\\": \\"Choosing section with lowest GDP\\", \\"instruction\\": \\"Which region has the lowest GDP?\\" }, \\"q3\\": { \\"baseComponent\\": \\"my-image-component\\", \\"description\\": \\"Choosing section with highest exports of Wheat\\", \\"instruction\\": \\"Which region had the most Wheat exported in 2022?\\" } } ```","type":"object"},"ButtonsResponse":{"additionalProperties":false,"description":"The ButtonsResponse interface is used to define the properties of a buttons response. ButtonsResponses render as a list of buttons that the participant can click. When a button is clicked, the value of the button is stored in the data file. Participants can cycle through the options using the arrow keys.\\n\\nExample: ```js {   \\"id\\": \\"buttonsResponse\\",   \\"type\\": \\"buttons\\",   \\"prompt\\": \\"Click a button\\",   \\"location\\": \\"belowStimulus\\",   \\"options\\": [     \\"Option 1\\",     \\"Option 2\\",     \\"Option 3\\"   ] } ``` In this example, the participant can click one of the buttons labeled \\"Option 1\\", \\"Option 2\\", or \\"Option 3\\".","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"options":{"items":{"anyOf":[{"$ref":"#/definitions/StringOption"},{"type":"string"}]},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"buttons","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","options","prompt","type"],"type":"object"},"CheckboxResponse":{"additionalProperties":false,"description":"The CheckboxResponse interface is used to define the properties of a checkbox response. CheckboxResponses render as a checkbox input with user specified options.\\n\\n```js { \\"id\\": \\"q7\\", \\"prompt\\": \\"Checkbox example (not required)\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"checkbox\\", \\"options\\": [\\"Option 1\\", \\"Option 2\\", \\"Option 3\\"] } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"horizontal":{"description":"Whether to render the checkboxes horizontally. Defaults to false, so they render horizontally.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"maxSelections":{"description":"The maximum number of selections that are required.","type":"number"},"minSelections":{"description":"The minimum number of selections that are required.","type":"number"},"options":{"description":"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.","items":{"anyOf":[{"$ref":"#/definitions/StringOption"},{"type":"string"}]},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"checkbox","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"},"withOther":{"description":"Whether to render the checkboxes with an \\"other\\" option.","type":"boolean"}},"required":["id","options","prompt","type"],"type":"object"},"ComponentBlock":{"additionalProperties":false,"description":"The ComponentBlock interface is used to define order properties within the sequence. This is used to define the order of components in a study and the skip logic. It supports random assignment of trials using a pure random assignment and a [latin square](https://en.wikipedia.org/wiki/Latin_square).\\n\\nThe pure random assignment is a random assignment with no guarantees. For example, one component _could_ show up in the first position 10 times in a row. However, this situation is unlikely.\\n\\nHere\'s a snippet that shows how to use the random order:\\n\\n```js { \\"order\\": \\"random\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\" ] } ``` This snippet would produce a random order of the components in the sequence array. For example, the resulting sequence array could be :\\n\\n```js [ [\\"component2\\", \\"component3\\", \\"component1\\"], [\\"component1\\", \\"component3\\", \\"component2\\"], [\\"component3\\", \\"component1\\", \\"component2\\"], ... ] ```\\n\\nThe latin square assignment is a random assignment with some guarantees. It ensures that each component is shown an equal number of times in each position. Here\'s a snippet that shows how to use the latin square order:\\n\\n```js { \\"order\\": \\"latinSquare\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\" ] } ```\\n\\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\\n\\n```js [ [\\"component1\\", \\"component2\\", \\"component3\\"], [\\"component2\\", \\"component3\\", \\"component1\\"], [\\"component3\\", \\"component1\\", \\"component2\\"], ... ] ```\\n\\nThe fixed assignment is a fixed assignment of components. This is used when you want to show the components in a specific order. Here\'s a snippet that shows how to use the fixed order:\\n\\n```js { \\"order\\": \\"fixed\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\" ] } ```\\n\\nThis snippet would produce a fixed order of the components in the sequence array. The resulting sequence array would be:\\n\\n```js [ [\\"component1\\", \\"component2\\", \\"component3\\"], [\\"component1\\", \\"component2\\", \\"component3\\"], [\\"component1\\", \\"component2\\", \\"component3\\"], ... ] ```\\n\\nIn addition to the order property, the ComponentBlock interface also includes the `\\"numSamples\\"` property. This is used to reduce the number of components shown to a participant. This property respects the order property and the guarantees provided by the order property. For example, if you have three components in the components array and you set `\\"numSamples\\"` to 2, you would randomize across the three components while only showing a participant two of them. Here\'s a snippet that shows how to use the numSamples property:\\n\\n```js { \\"order\\": \\"latinSquare\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\" ], \\"numSamples\\": 2 } ```\\n\\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\\n\\n```js [ [\\"component1\\", \\"component2\\"], [\\"component2\\", \\"component3\\"], [\\"component3\\", \\"component1\\"], ... ] ```\\n\\nThe interruptions property specifies an array of interruptions. These can be used for breaks or attention checks. Interruptions can be deterministic or random. Please see [InterruptionBlock](../../type-aliases/InterruptionBlock) for more specific information.\\n\\nThe skip property is used to define skip conditions. This is used to skip to a different component or block based on the response to a component or the number of correct or incorrect responses in a block. Please see [SkipConditions](../../type-aliases/SkipConditions) for more specific information.","properties":{"components":{"description":"The components that are included in the order.","items":{"anyOf":[{"type":"string"},{"$ref":"#/definitions/ComponentBlock"},{"$ref":"#/definitions/DynamicBlock"}]},"type":"array"},"id":{"description":"The id of the block. This is used to identify the block in the SkipConditions and is only required if you want to refer to the whole block in the condition.to property.","type":"string"},"interruptions":{"description":"The interruptions property specifies an array of interruptions. These can be used for breaks or attention checks.","items":{"$ref":"#/definitions/InterruptionBlock"},"type":"array"},"numSamples":{"description":"The number of samples to use for the random assignments. This means you can randomize across 3 components while only showing a participant 2 at a time.","type":"number"},"order":{"description":"The type of order. This can be random (pure random), latinSquare (random with some guarantees), or fixed.","enum":["random","latinSquare","fixed"],"type":"string"},"skip":{"$ref":"#/definitions/SkipConditions","description":"The skip conditions for the block."}},"required":["order","components"],"type":"object"},"ComponentBlockCondition":{"additionalProperties":false,"description":"The ComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect components in a block. All answers on all components in the block are checked.\\n\\nAnswers are checked against the correct answers defined in the IndividualComponent\'s [CorrectAnswer](../Answer). If no correct answers are defined, the component is considered correct by default.\\n\\nYou might use this if a participant answers two questions in a block incorrectly. Here\'s an example of how to use the ComponentBlockCondition:\\n\\n```js { ... \\"skip\\": [ {   \\"check\\": \\"block\\",   \\"condition\\": \\"numIncorrect\\",   \\"value\\": 2,   \\"to\\": \\"end\\" } ] ... } ```\\n\\nIn this example, when the number of components with incorrect responses in the block is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.\\n\\nWhen the condition is met, the participant will immediately be redirected to the component or block specified in the `\\"to\\"` property. If no conditions are met, the participant will continue to the next component in the sequence.","properties":{"check":{"const":"block","description":"The check we\'ll perform.","type":"string"},"condition":{"description":"The condition to check.","enum":["numCorrect","numIncorrect"],"type":"string"},"to":{"description":"The id of the component or block to skip to","type":"string"},"value":{"description":"The number of correct or incorrect responses to check for.","type":"number"}},"required":["check","condition","value","to"],"type":"object"},"ConfigResponseBlockLocation":{"enum":["sidebar","aboveStimulus","belowStimulus"],"type":"string"},"DeterministicInterruption":{"additionalProperties":false,"description":"The DeterministicInterruption interface is used to define an interruption that will be shown at a specific location in the block.\\n\\nFor example, if you want to show an interruption after the second component in the block, you would set firstLocation to 2. If you want to show an interruption after every 3 components, you would set spacing to 3. If you want to show an interruption after the second component and then every 3 components, you would set firstLocation to 2 and spacing to 3.\\n\\nThe components property is an array of the components that will be inserted at the location specified by firstLocation and spacing. These components should reference components in the StudyConfig.components section of the config.\\n\\nHere\'s an example of how to use the DeterministicInterruption:\\n\\n```js { \\"order\\": \\"fixed\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"component6\\" ], \\"interruptions\\": [ {   \\"firstLocation\\": 2,   \\"spacing\\": 3,   \\"components\\": [     \\"interruption1\\",     \\"interruption2\\"   ] } ] } ```\\n\\nThe resulting sequence array could be:\\n\\n```js [ [\\"component1\\", \\"component2\\", \\"interruption1\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"interruption2\\", \\"component6\\"], [\\"component1\\", \\"component2\\", \\"interruption1\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"interruption2\\", \\"component6\\"], [\\"component1\\", \\"component2\\", \\"interruption1\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"interruption2\\", \\"component6\\"], ... ] ```","properties":{"components":{"description":"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.","items":{"type":"string"},"type":"array"},"firstLocation":{"description":"The Location of the first instance of the interruption. If this is set to 2, the interruption will be shown after the second component (inserted at index 2).","type":"number"},"spacing":{"description":"The number of components between breaks.","type":"number"}},"required":["firstLocation","spacing","components"],"type":"object"},"DropdownResponse":{"additionalProperties":false,"description":"The DropdownResponse interface is used to define the properties of a dropdown response. DropdownResponses render as a select input with user specified options.\\n\\nExample: ```js { \\"id\\": \\"q-color\\", \\"prompt\\": \\"What is your favorite color?\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"dropdown\\", \\"placeholder\\": \\"Please choose your favorite color\\", \\"options\\": [\\"Red\\", \\"Blue\\"] } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"options":{"description":"The options that are displayed in the dropdown.","items":{"anyOf":[{"$ref":"#/definitions/StringOption"},{"type":"string"}]},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"placeholder":{"description":"The placeholder text that is displayed in the input.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"dropdown","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","options","prompt","type"],"type":"object"},"DynamicBlock":{"additionalProperties":false,"description":"The DynamicBlock interface is used to define a block where displayed components are controlled by a function. This is useful when you want to generate the sequence based on answers to previous questions or other factors.\\n\\nThe functionPath property is a path to the function that generates the components. This should be a relative path from the src/public folder.\\n\\nHere\'s an example of how to use the DynamicBlock:\\n\\n```js {   \\"id\\": \\"funcBlock\\",   \\"order\\": \\"dynamic\\",   \\"functionPath\\": \\"<study-name>/assets/function.js\\",   \\"parameters\\": {     \\"param1\\": \\"value1\\",     \\"param2\\": \\"value2\\"   } } ```","properties":{"functionPath":{"description":"The path to the function that generates the components. This should be a relative path from the src/public folder.","type":"string"},"id":{"description":"The id of the block. This is used to identify the block in the SkipConditions and is only required if you want to refer to the whole block in the condition.to property.","type":"string"},"order":{"const":"dynamic","description":"The type of order. This can be random (pure random), latinSquare (random with some guarantees), or fixed.","type":"string"},"parameters":{"additionalProperties":{},"description":"The parameters that are passed to the function. These can be used within your function to render different things.","type":"object"}},"required":["id","order","functionPath"],"type":"object"},"ImageComponent":{"additionalProperties":false,"description":"The ImageComponent interface is used to define the properties of an image component. This component is used to render an image with optional styling.\\n\\nFor example, to render an image with a path of `path/to/study/assets/image.jpg` and a max width of 50%, you would use the following snippet: ```js { \\"type\\": \\"image\\", \\"path\\": \\"<study-name>/assets/image.jpg\\", \\"style\\": { \\"maxWidth\\": \\"50%\\" } } ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"helpTextPathOverride":{"description":"Optional override for the help text. If present, will override the default help text path set in the uiConfig.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"path":{"description":"The path to the image. This could be a relative path from the public folder or a url to an external image.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"style":{"additionalProperties":{"type":"string"},"description":"The style of the image. This is an object with css properties as keys and css values as values.","type":"object"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"image","type":"string"}},"required":["path","response","type"],"type":"object"},"IndividualComponent":{"anyOf":[{"$ref":"#/definitions/MarkdownComponent"},{"$ref":"#/definitions/ReactComponent"},{"$ref":"#/definitions/ImageComponent"},{"$ref":"#/definitions/WebsiteComponent"},{"$ref":"#/definitions/QuestionnaireComponent"},{"$ref":"#/definitions/VegaComponent"},{"$ref":"#/definitions/VideoComponent"}]},"IndividualComponentAllResponsesCondition":{"additionalProperties":false,"description":"The IndividualComponentAllResponsesCondition interface is used to define a SkipCondition based on all answers to a specific component. The skip logic will be checked for every component in the block that has the specified name.\\n\\n:::info\\n\\nIf you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.\\n\\n:::\\n\\n\\nHere\'s an example of how to use the IndividualComponentAllResponsesCondition:\\n\\n```js { ... \\"skip\\": [ {   \\"name\\": \\"attentionCheck\\",   \\"check\\": \\"responses\\",   \\"to\\": \\"end\\" } ] ... } ```\\n\\nIn this example, if all responses to the component with the ID \\"attentionCheck\\" are correct, the participant will be redirected to the end of the study. If any response is incorrect, the participant will continue to the next component in the sequence.","properties":{"check":{"const":"responses","description":"The check we\'ll perform.","type":"string"},"name":{"description":"The name of the component to check.","type":"string"},"to":{"description":"The id of the component or block to skip to","type":"string"}},"required":["name","check","to"],"type":"object"},"IndividualComponentSingleResponseCondition":{"additionalProperties":false,"description":"The IndividualComponentSingleResponseCondition interface is used to define a SkipCondition based on a single answer to a specific component. The skip logic will be checked for every component in the block that has the specified name.\\n\\n:::info\\n\\nIf you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.\\n\\n:::\\n\\nFor example, if you want to skip to a different component based on a response to a specific component, you would use the IndividualComponentSingleResponseCondition. Here\'s an example of how to use the IndividualComponentSingleResponseCondition:\\n\\n```js { ... \\"skip\\": [ {   \\"name\\": \\"attentionCheck\\",   \\"check\\": \\"response\\",   \\"responseId\\": \\"attentionCheckResponse\\",   \\"value\\": \\"the right answer\\",   \\"comparison\\": \\"equal\\",   \\"to\\": \\"end\\" } ] ... } ```\\n\\nIn this example, we assign our skip logic to the component whose ID is \\"attentionCheck\\". If the answer given to the response \\"attentionCheckResponse\\" is equal to \\"the right answer\\", then the user will be redirected to the end of the study. If the response is _not_ equal to \\"the right answer\\", then the participant will continue to the next component in the sequence.","properties":{"check":{"const":"response","description":"The check we\'ll perform.","type":"string"},"comparison":{"description":"The comparison to use.","enum":["equal","notEqual"],"type":"string"},"name":{"description":"The name of the component to check.","type":"string"},"responseId":{"description":"The response id to check.","type":"string"},"to":{"description":"The id of the component or block to skip to","type":"string"},"value":{"description":"The value to check.","type":["string","number"]}},"required":["name","check","responseId","value","comparison","to"],"type":"object"},"InheritedComponent":{"additionalProperties":false,"description":"An InheritedComponent is a component that inherits properties from a baseComponent. This is used to avoid repeating properties in components. This also means that components in the baseComponents object can be partially defined, while components in the components object can inherit from them and must be fully defined and include all properties (after potentially merging with a base component).","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"baseComponent":{"type":"string"},"config":{"description":"The vega or vega-lite configuration.","type":"object"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"forceCompletion":{"description":"Whether to force the video to play until the end. Defaults to true.","type":"boolean"},"helpTextPathOverride":{"description":"Optional override for the help text. If present, will override the default help text path set in the uiConfig.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"parameters":{"anyOf":[{"additionalProperties":{},"description":"The parameters that are passed to the react component. These can be used within your react component to render different things.","type":"object"},{"additionalProperties":{},"description":"The parameters that are passed to the website (iframe). These can be used within your website to render different things.","type":"object"}],"description":"The parameters that are passed to the react component. These can be used within your react component to render different things."},"path":{"anyOf":[{"description":"The path to the markdown file. This should be a relative path from the public folder.","type":"string"},{"description":"The path to the react component. This should be a relative path from the src/public folder.","type":"string"},{"description":"The path to the image. This could be a relative path from the public folder or a url to an external image.","type":"string"},{"description":"The path to the website. This should be a relative path from the public folder or could be an external website.","type":"string"},{"description":"The path to the vega file. This should be a relative path from the public folder.","type":"string"},{"description":"The path to the video. This could be a relative path from the public folder or might be a url to an external website.","type":"string"}],"description":"The path to the markdown file. This should be a relative path from the public folder."},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"style":{"additionalProperties":{"type":"string"},"description":"The style of the image. This is an object with css properties as keys and css values as values.","type":"object"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"enum":["markdown","react-component","image","website","questionnaire","vega","video"],"type":"string"},"withTimeline":{"description":"Whether to show the video timeline. Defaults to false.","type":"boolean"}},"required":["baseComponent"],"type":"object"},"InterruptionBlock":{"anyOf":[{"$ref":"#/definitions/DeterministicInterruption"},{"$ref":"#/definitions/RandomInterruption"}],"description":"The InterruptionBlock interface is used to define interruptions in a block. These can be used for breaks or attention checks. Interruptions can be deterministic or random."},"LibraryConfig":{"additionalProperties":false,"description":"LibraryConfig is used to define the properties of a library configuration. This is a JSON object with three main components: baseComponents, components, and the sequences. Libraries are useful for defining components and sequences of these components that are to be reused across multiple studies. We (the reVISit team) provide several libraries that can be used in your study configurations. Check the public/libraries folder in the reVISit-studies repository for available libraries. We also plan to accept community contributions for libraries. If you have a library that you think would be useful for others, please reach out to us. We would love to include it in our repository.\\n\\nBelow is the general template that should be followed when constructing a Library configuration file.\\n\\n```js {  \\"$schema\\": \\"https://raw.githubusercontent.com/revisit-studies/study/v2.1.0/src/parser/LibraryConfigSchema.json\\",  \\"baseComponents\\": {    // BaseComponents here are defined exactly as is in the StudyConfig  },  \\"components\\": {    // Components here are defined exactly as is in the StudyConfig  },  \\"sequences\\": {   // Sequences here are defined as \\"key\\": \\"value\\" pairs where the key is the name of the sequence and the value is a ComponentBlock, just like in the StudyConfig  } } ```","properties":{"$schema":{"description":"A required json schema property. This should point to the github link for the version of the schema you would like. The `$schema` line is used to verify the schema. If you\'re using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration. See examples for more information","type":"string"},"baseComponents":{"$ref":"#/definitions/BaseComponents","description":"The base components that are used in the study. These components can be used to template other components. See [BaseComponents](../../type-aliases/BaseComponents) for more information."},"components":{"additionalProperties":{"anyOf":[{"$ref":"#/definitions/IndividualComponent"},{"$ref":"#/definitions/InheritedComponent"}]},"description":"The components that are used in the study. They must be fully defined here with all properties. Some properties may be inherited from baseComponents.","type":"object"},"description":{"description":"A description of the library.","type":"string"},"doi":{"description":"The DOI of the paper where the content of the library is based on.","type":"string"},"externalLink":{"description":"The external link to the paper/website where the content of the library is based on.","type":"string"},"reference":{"description":"The reference to the paper where the content of the library is based on.","type":"string"},"sequences":{"additionalProperties":{"anyOf":[{"$ref":"#/definitions/ComponentBlock"},{"$ref":"#/definitions/DynamicBlock"}],"description":"The order of the components in the study. This might include some randomness."},"description":"The order of the components in the study. This might include some randomness.","type":"object"}},"required":["$schema","description","components","sequences"],"type":"object"},"LikertResponse":{"additionalProperties":false,"description":"The LikertResponse interface is used to define the properties of a likert response. LikertResponses render as radio buttons with a user specified number of options, which can be controlled through the numItems. For example, numItems: 5 will render 5 radio buttons, and numItems: 7 will render 7 radio buttons. LikertResponses can also have a description, and left and right labels. The left and right labels are used to label the left and right ends of the likert scale with values such as \'Strongly Disagree\' and \'Strongly Agree\'.\\n\\nExample for a five-point Likert Scale:\\n\\n```js { \\"id\\": \\"q-satisfaction\\", \\"prompt\\": \\"Rate your satisfaction from 1 (not enjoyable) to 5 (very enjoyable).\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"likert\\", \\"leftLabel\\": \\"Not Enjoyable\\", \\"rightLabel\\": \\"Very Enjoyable\\", \\"numItems\\": 5 } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"leftLabel":{"description":"The left label of the likert scale. E.g Strongly Disagree","type":"string"},"location":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"numItems":{"description":"The number of options to render.","type":"number"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"rightLabel":{"description":"The right label of the likert scale. E.g Strongly Agree","type":"string"},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"likert","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","numItems","prompt","type"],"type":"object"},"LongTextResponse":{"additionalProperties":false,"description":"The LongTextResponse interface is used to define the properties of a long text response. LongTextResponses render as a text area that accepts any text and can optionally have a placeholder. ```js { \\"id\\": \\"q-name\\", \\"prompt\\": \\"What is your first name?\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"longText\\", \\"placeholder\\": \\"Please enter your first name\\" } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"placeholder":{"description":"The placeholder text that is displayed in the input.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"longText","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","prompt","type"],"type":"object"},"MarkdownComponent":{"additionalProperties":false,"description":"The MarkdownComponent interface is used to define the properties of a markdown component. The components can be used to render many different things, such as consent forms, instructions, and debriefs. Additionally, you can use the markdown component to render images, videos, and other media, with supporting text. Markdown components can have responses (e.g. in a consent form), or no responses (e.g. in a help text file). Here\'s an example with no responses for a simple help text file:\\n\\n```js { \\"type\\": \\"markdown\\", \\"path\\": \\"<study-name>/assets/help.md\\", \\"response\\": [] } ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"helpTextPathOverride":{"description":"Optional override for the help text. If present, will override the default help text path set in the uiConfig.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"path":{"description":"The path to the markdown file. This should be a relative path from the public folder.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"markdown","type":"string"}},"required":["path","response","type"],"type":"object"},"MatrixResponse":{"additionalProperties":false,"description":"The MatrixResponse interface is used to define the properties of a matrix radio or matrix checkbox response. Question options are rendered as rows of the matrix, each row containing its own radio/checkbox group. Answer options are rendered as column headers of the matrix. These can be customized by passing in the custom strings into the answer options. Alternatively, `answerOptions` can be set to one of the following custom strings: \'satisfaction5\',\'satisfaction7\', \'likely5\', \'likely7\'. This will automatically generate the appropriate headers for the matrix.\\n\\nExample for a 5-scale satisfaction matrix with three questions:\\n\\n```js { \\"id\\": \\"multi-satisfaction\\", \\"prompt\\": \\"Rate your satisfaction from 1 (not enjoyable) to 5 (very enjoyable) for the following items.\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"matrix-radio\\", \\"answerOptions\\": \\"satisfaction5\\", \\"questionOptions\\": [  \\"The tool we created\\",  \\"The technique we developed\\",  \\"The authors of the tools\\" ] } ```\\n\\nHere\'s an example using custom columns (answerOptions):\\n\\n```js { \\"id\\": \\"multi-custom\\", \\"prompt\\": \\"Which categories do the following items belong to?\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"matrix-checkbox\\", \\"answerOptions\\": [  \\"Has Legs\\",  \\"Has Wings\\",  \\"Can Swim\\" ], \\"questionOptions\\": [  \\"Dog\\",  \\"Snake\\",  \\"Eagle\\",  \\"Salmon\\",  \\"Platypus\\" ]\\n\\n} ```","properties":{"answerOptions":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"const":"likely5","type":"string"},{"const":"likely7","type":"string"},{"const":"satisfaction5","type":"string"},{"const":"satisfaction7","type":"string"}],"description":"The answer options (columns). We provide some shortcuts for a likelihood scale (ranging from highly unlikely to highly likely) and a satisfaction scale (ranging from highly unsatisfied to highly satisfied) with either 5 or 7 options to choose from."},"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"questionOptions":{"description":"The question options (rows) are the prompts for each response you\'d like to record.","items":{"type":"string"},"type":"array"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"enum":["matrix-radio","matrix-checkbox"],"type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["answerOptions","id","prompt","questionOptions","type"],"type":"object"},"NumberOption":{"additionalProperties":false,"description":"The NumberOption interface is used to define the options for a slider response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.","properties":{"label":{"description":"The label displayed to participants.","type":"string"},"value":{"description":"The value stored in the participant\'s data.","type":"number"}},"required":["label","value"],"type":"object"},"NumericalResponse":{"additionalProperties":false,"description":"The NumericalResponse interface is used to define the properties of a numerical response. NumericalResponses render as a text input that only accepts numbers, and can optionally have a min and max value, or a placeholder.\\n\\nExample: ```js { \\"id\\": \\"q-numerical\\", \\"prompt\\": \\"Numerical example\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"numerical\\", \\"placeholder\\": \\"Enter your age, range from 0 - 120\\", \\"max\\": 120, \\"min\\": 0 } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"max":{"description":"The maximum value that is accepted in the input.","type":"number"},"min":{"description":"The minimum value that is accepted in the input.","type":"number"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"placeholder":{"description":"The placeholder text that is displayed in the input.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"numerical","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","prompt","type"],"type":"object"},"QuestionnaireComponent":{"additionalProperties":false,"description":"A QuestionnaireComponent is used to render simple questions that require a response. The main use case of this component type is to ask participants questions when you don\'t need to render a stimulus. Please note, that even though we\'re not using a stimulus, the responses still require a `location`. For example this could be used to collect demographic information from a participant using the following snippet:\\n\\n```js { \\"type\\": \\"questionnaire\\", \\"response\\": [  {    \\"id\\": \\"gender\\",    \\"prompt\\": \\"Gender:\\",    \\"location\\": \\"belowStimulus\\",    \\"type\\": \\"checkbox\\",    \\"options\\": [\\"Man\\", \\"Woman\\", \\"Genderqueer\\", \\"Third-gender\\", ...]  } ] } ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"helpTextPathOverride":{"description":"Optional override for the help text. If present, will override the default help text path set in the uiConfig.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"questionnaire","type":"string"}},"required":["response","type"],"type":"object"},"RadioResponse":{"additionalProperties":false,"description":"The RadioResponse interface is used to define the properties of a radio response. Radios have only one allowable selection. RadioResponses render as a radio input with user specified options, and optionally left and right labels.\\n\\nExample: ```js { \\"id\\": \\"q-radio\\", \\"prompt\\": \\"Radio button example\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"radio\\", \\"options\\": [\\"Option 1\\", \\"Option 2\\"] } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"horizontal":{"description":"Whether to render the radio buttons horizontally. Defaults to false, so they render horizontally.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"leftLabel":{"description":"The left label of the radio group. Used in Likert scales for example","type":"string"},"location":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"options":{"description":"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.","items":{"anyOf":[{"$ref":"#/definitions/StringOption"},{"type":"string"}]},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"rightLabel":{"description":"The right label of the radio group. Used in Likert scales for example","type":"string"},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"radio","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"},"withOther":{"description":"Whether to render the radios with an \\"other\\" option.","type":"boolean"}},"required":["id","options","prompt","type"],"type":"object"},"RandomInterruption":{"additionalProperties":false,"description":"The RandomInterruption interface is used to define an interruption that will be shown randomly in the block.\\n\\nFor example, if you want to show a single interruption randomly in the block, you would set `\\"spacing\\"` to \\"random\\" and `\\"numInterruptions\\"` to 1. If you want to show 3 interruptions randomly in the block, you would set `\\"spacing\\"` to \\"random\\" and `\\"numInterruptions\\"` to 3.\\n\\nThe components property is an array of the components that will be inserted randomly in the block. These components should reference components in the StudyConfig.components section of the config.\\n\\nHere\'s an example of how to use the RandomInterruption:\\n\\n```js { \\"order\\": \\"fixed\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"component6\\" ], \\"interruptions\\": [ {   \\"spacing\\": \\"random\\",   \\"numInterruptions\\": 3,   \\"components\\": [     \\"interruption1\\",     \\"interruption2\\"   ] } ] } ```\\n\\nThe resulting sequence array could be:\\n\\n```js [ [\\"component1\\", \\"interruption1\\", \\"interruption2\\", \\"component2\\", \\"interruption1\\", \\"interruption2\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"interruption1\\", \\"interruption2\\", \\"component6], [\\"component1\\", \\"interruption1\\", \\"interruption2\\", \\"component2\\", \\"interruption1\\", \\"interruption2\\", \\"component3\\", \\"component4\\", \\"interruption1\\", \\"interruption2\\", \\"component5\\", \\"component6], [\\"component1\\", \\"component2\\" \\"interruption1\\", \\"interruption2\\", \\"component3\\", \\"interruption1\\", \\"interruption2\\", \\"component4\\", \\"component5\\", \\"interruption1\\", \\"interruption2\\", \\"component6], ... ] ```","properties":{"components":{"description":"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.","items":{"type":"string"},"type":"array"},"numInterruptions":{"description":"The number of times the interruption will be randomly added","type":"number"},"spacing":{"const":"random","description":"If spacing is set to random, reVISit will add interruptions randomly. These interruptions will not ever be displayed as the first component in the block.","type":"string"}},"required":["spacing","numInterruptions","components"],"type":"object"},"ReactComponent":{"additionalProperties":false,"description":"The ReactComponent interface is used to define the properties of a react component. This component is used to render react code with certain parameters. These parameters can be used within your react code to render different things.\\n\\nUnlike other types of components, the path for a React component is relative to the `src/public/` folder. Similar to our standard assets, we suggest creating a folder named `src/public/{studyName}/assets` to house all of the React component assets for a particular study. Your React component which you link to in the path must be default exported from its file.\\n\\nReact components created this way have a generic prop type passed to the component on render, `<StimulusParams<T>>`, which has the following types.\\n\\n```ts { parameters: T; setAnswer: ({ status, provenanceGraph, answers }: { status: boolean, provenanceGraph?: TrrackedProvenance, answers: Record<string, any> }) => void } ```\\n\\nparameters is the same object passed in from the ReactComponent type below, allowing you to pass options in from the config to your component. setAnswer is a callback function allowing the creator of the ReactComponent to programmatically set the answer, as well as the provenance graph. This can be useful if you don\'t use the default answer interface, and instead have something more unique.\\n\\nSo, for example, if I had the following ReactComponent in my config ```js { type: \'react-component\'; path: \'my_study/CoolComponent.tsx\'; parameters: {  name: \'Zach\';  age: 26; } } ```\\n\\nMy react component, CoolComponent.tsx, would exist in src/public/my_study/assets, and look something like this\\n\\n```ts export default function CoolComponent({ parameters, setAnswer }: StimulusParams<{name: string, age: number}>) { // render something } ```\\n\\nFor in depth examples, see the following studies, and their associated codebases. https://revisit.dev/study/demo-click-accuracy-test (https://github.com/revisit-studies/study/tree/v2.1.0/src/public/demo-click-accuracy-test/assets) https://revisit.dev/study/example-brush-interactions (https://github.com/revisit-studies/study/tree/v2.1.0/src/public/example-brush-interactions/assets)","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"helpTextPathOverride":{"description":"Optional override for the help text. If present, will override the default help text path set in the uiConfig.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"parameters":{"additionalProperties":{},"description":"The parameters that are passed to the react component. These can be used within your react component to render different things.","type":"object"},"path":{"description":"The path to the react component. This should be a relative path from the src/public folder.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"react-component","type":"string"}},"required":["path","response","type"],"type":"object"},"ReactiveResponse":{"additionalProperties":false,"description":"The ReactiveResponse interface is used to define the properties of a reactive response. ReactiveResponses render as a list, that is connected to a WebsiteComponent, VegaComponent, or ReactComponent. When data is sent from the components, it is displayed in the list.\\n\\n```js { \\"id\\": \\"reactiveResponse\\", \\"prompt\\": \\"Answer clicked in the stimulus\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"reactive\\" } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"reactive","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","prompt","type"],"type":"object"},"RepeatedComponentBlockCondition":{"additionalProperties":false,"description":"The RepeatedComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect repeated components. You might use this if you need to check if an attention check was failed multiple times. This is similar to the [ComponentBlockCondition](../ComponentBlockCondition), but it only checks a specific repeated component.\\n\\nHere\'s an example of how to use the RepeatedComponentBlockCondition:\\n\\n```js { ... \\"skip\\": [ {   \\"name\\": \\"attentionCheck\\",   \\"check\\": \\"repeatedComponent\\",   \\"condition\\": \\"numIncorrect\\",   \\"value\\": 2,   \\"to\\": \\"end\\" } ] ... } ```\\n\\nIn this example, when the number of incorrect responses to the repeated component with the name \\"attentionCheck\\" is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.","properties":{"check":{"const":"repeatedComponent","description":"The check we\'ll perform.","type":"string"},"condition":{"description":"The condition to check.","enum":["numCorrect","numIncorrect"],"type":"string"},"name":{"description":"The name of the repeated component to check (e.g. attentionCheck).","type":"string"},"to":{"description":"The id of the component or block to skip to","type":"string"},"value":{"description":"The number of correct or incorrect responses to check for.","type":"number"}},"required":["name","check","condition","value","to"],"type":"object"},"Response":{"anyOf":[{"$ref":"#/definitions/NumericalResponse"},{"$ref":"#/definitions/ShortTextResponse"},{"$ref":"#/definitions/LongTextResponse"},{"$ref":"#/definitions/LikertResponse"},{"$ref":"#/definitions/DropdownResponse"},{"$ref":"#/definitions/SliderResponse"},{"$ref":"#/definitions/RadioResponse"},{"$ref":"#/definitions/CheckboxResponse"},{"$ref":"#/definitions/ReactiveResponse"},{"$ref":"#/definitions/MatrixResponse"},{"$ref":"#/definitions/ButtonsResponse"}]},"ShortTextResponse":{"additionalProperties":false,"description":"The ShortTextResponse interface is used to define the properties of a short text response. ShortTextResponses render as a text input that accepts any text and can optionally have a placeholder.\\n\\n```js { \\"id\\": \\"q-short-text\\", \\"prompt\\": \\"Short text example\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"shortText\\", \\"placeholder\\": \\"Enter your answer here\\" } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"placeholder":{"description":"The placeholder text that is displayed in the input.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"shortText","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","prompt","type"],"type":"object"},"SkipConditions":{"description":"The SkipConditions interface is used to define skip conditions. This is used to skip to a different component/block based on the response to a component or based on the number of correct/incorrect responses in a block. Skip conditions work recursively: if you have a nested block, the parent blocks\' skip conditions will be considered when computing the skip logic.\\n\\nSkip conditions are evaluated in the order they are defined in the array. If a condition is met, the participant will be redirected to the component or block specified in the `\\"to\\"` property. If no conditions are met, the participant will continue to the next component in the sequence.\\n\\nSkip conditions allow you to jump to a different component or block. If you intend to skip to a block, you should specify a block id in the sequence. If you intend to skip to a component, you should specify a component id. Skipping backwards is not supported. Skipping to a repeated component will skip to the first instance of the component after the component that triggered the skip.\\n\\nPlease see the interface definitions for more specific information on the different types of skip conditions.","items":{"anyOf":[{"$ref":"#/definitions/IndividualComponentSingleResponseCondition"},{"$ref":"#/definitions/IndividualComponentAllResponsesCondition"},{"$ref":"#/definitions/ComponentBlockCondition"},{"$ref":"#/definitions/RepeatedComponentBlockCondition"}]},"type":"array"},"SliderResponse":{"additionalProperties":false,"description":"The SliderResponse interface is used to define the properties of a slider response. SliderResponses render as a slider input with user specified steps. For example, you could have steps of 0, 50, and 100.\\n\\nExample: ```js { \\"id\\": \\"q-slider\\", \\"prompt\\": \\"How are you feeling?\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"slider\\", \\"options\\": [  {    \\"label\\": \\"Bad\\",    \\"value\\": 0  },  {    \\"label\\": \\"OK\\",    \\"value\\": 50  },  {    \\"label\\": \\"Good\\",    \\"value\\": 100  } ] } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"options":{"description":"This defines the steps in the slider and the extent of the slider as an array of objects that have a label and a value.","items":{"$ref":"#/definitions/NumberOption"},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"snap":{"description":"Whether the slider should snap between values. Defaults to false. Slider snapping disables the label above the handle.","type":"boolean"},"startingValue":{"description":"The starting value of the slider. Defaults to the minimum value.","type":"number"},"step":{"description":"The step value of the slider. If not provided (and snap not enabled), the step value is calculated as the range of the slider divided by 100.","type":"number"},"tlxStyle":{"description":"Whether to render the slider with a NASA-tlx style. Defaults to false.","type":"boolean"},"type":{"const":"slider","type":"string"},"withBar":{"description":"Whether to render the slider with a bar to the left. Defaults to true.","type":"boolean"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","options","prompt","type"],"type":"object"},"StringOption":{"additionalProperties":false,"description":"The StringOption interface is used to define the options for a dropdown, radio, buttons, or checkbox response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.","properties":{"label":{"description":"The label displayed to participants.","type":"string"},"value":{"description":"The value stored in the participant\'s data.","type":"string"}},"required":["label","value"],"type":"object"},"VegaComponent":{"anyOf":[{"$ref":"#/definitions/VegaComponentPath"},{"$ref":"#/definitions/VegaComponentConfig"}]},"VegaComponentConfig":{"additionalProperties":false,"description":"The VegaComponentConfig interface is used to define the properties of a Vega Component. This component is used to render a Vega/Vega-Lite Component by adding Vega/Vega-Lite specs within the reVISit config itself.\\n\\nTo do this, would use the following snippet: ```js { \\"type\\": \\"vega\\", \\"config\\": { ... vega specs here ...}, }\\n\\nIIf you are using Vega, you can use signals with `revisitAnswer` to send the user\'s responses back to the reVISit. For example, you can use the following snippet in your Vega spec\'s signals section: ```js { \\"signals\\": [  {    \\"name\\": \\"revisitAnswer\\",    \\"value\\": {},    \\"on\\": [      {        \\"events\\": \\"rect:click\\",        \\"update\\": \\"{responseId: \'vegaDemoResponse1\', response: datum.category}\\"      }    ]  } ] } In this example, when a user clicks on a rectangle in the Vega chart, the `revisitAnswer` signal is updated with the responseId and response. ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"config":{"description":"The vega or vega-lite configuration.","type":"object"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"helpTextPathOverride":{"description":"Optional override for the help text. If present, will override the default help text path set in the uiConfig.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"vega","type":"string"}},"required":["config","response","type"],"type":"object"},"VegaComponentPath":{"additionalProperties":false,"description":"The VegaComponentPath interface is used to define the properties of a Vega Component. This component is used to render a Vega/Vega-Lite Component with path pointing to your Vega/Vega-Lite specs file.\\n\\nFor example, to render a vega based stimuli with a path of `<study-name>/assets/vega.spec.json`, you would use the following snippet: ```js { \\"type\\": \\"vega\\", \\"path\\": \\"<study-name>/assets/vega.spec.json\\", } ```\\n\\nIf you are using Vega, you can use signals with `revisitAnswer` to send the user\'s responses back to the reVISit. For example, you can use the following snippet in your Vega spec file\'s signals section: ```js { \\"signals\\": [  {    \\"name\\": \\"revisitAnswer\\",    \\"value\\": {},    \\"on\\": [      {        \\"events\\": \\"rect:click\\",        \\"update\\": \\"{responseId: \'vegaDemoResponse1\', response: datum.category}\\"      }    ]  } ] } In this example, when a user clicks on a rectangle in the Vega chart, the `revisitAnswer` signal is updated with the responseId and response. This signal is then passed to reVISit as the participant\'s response. ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"helpTextPathOverride":{"description":"Optional override for the help text. If present, will override the default help text path set in the uiConfig.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"path":{"description":"The path to the vega file. This should be a relative path from the public folder.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"vega","type":"string"}},"required":["path","response","type"],"type":"object"},"VideoComponent":{"additionalProperties":false,"description":"The VideoComponent interface is used to define the properties of a video component. This component is used to render a video with optional controls.\\n\\nMost often, video components will be used for trainings, and will have a `forceCompletion` field set to true. This will prevent the participant from moving on until the video has finished playing.\\n\\nAs such, the `forceCompletion` field is set to true by default, and the `withTimeline` field is set to false by default.\\n\\nFor example, to render a training video with a path of `<study-name>/assets/video.mp4`, you would use the following snippet: ```js {   \\"type\\": \\"video\\",   \\"path\\": \\"<study-name>/assets/video.mp4\\", } ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"forceCompletion":{"description":"Whether to force the video to play until the end. Defaults to true.","type":"boolean"},"helpTextPathOverride":{"description":"Optional override for the help text. If present, will override the default help text path set in the uiConfig.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"path":{"description":"The path to the video. This could be a relative path from the public folder or might be a url to an external website.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"video","type":"string"},"withTimeline":{"description":"Whether to show the video timeline. Defaults to false.","type":"boolean"}},"required":["path","response","type"],"type":"object"},"WebsiteComponent":{"additionalProperties":false,"description":"The WebsiteComponent interface is used to define the properties of a website component. A WebsiteComponent is used to render an iframe with a website inside of it. This can be used to display an external website or an html file that is located in the public folder.\\n\\n```js { \\"type\\": \\"website\\", \\"path\\": \\"<study-name>/assets/website.html\\", } ```\\n\\nTo pass a data from the config to the website, you can use the `parameters` field as below:\\n\\n```js { \\"type\\": \\"website\\", \\"path\\": \\"<study-name>/website.html\\", \\"parameters\\": {  \\"barData\\": [0.32, 0.01, 1.2, 1.3, 0.82, 0.4, 0.3] }, \\"response\\": [  {    \\"id\\": \\"barChart\\",    \\"prompt\\": \\"Your selected answer:\\",    \\"location\\": \\"belowStimulus\\",    \\"type\\": \\"reactive\\"  } ] } ``` In the `website.html` file, by including `revisit-communicate.js`, you can use the `Revisit.onDataReceive` method to retrieve the data, and `Revisit.postAnswers` to send the user\'s responses back to the reVISit as shown in the example below:\\n\\n```html <script src=\\"../../revisitUtilities/revisit-communicate.js\\"><\/script> <script> Revisit.onDataReceive((data) => {  const barData = data[\'barData\'];  ... });\\n\\n// Call out that \'barChart\' needs to match ID in \'response\' object Revisit.postAnswers({ barChart: userAnswer }); <\/script> ```\\n\\n If the html website implements Trrack library for provenance tracking, you can send the provenance graph back to reVISit by calling `Revisit.postProvenanceGraph` as shown in the example below. You need to call this each time the Trrack state is updated so that reVISit is kept aware of the changes in the provenance graph.\\n\\n```js const trrack = initializeTrrack({ initialState, registry });\\n\\n... Revisit.postProvenance(trrack.graph.backend); ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"helpTextPathOverride":{"description":"Optional override for the help text. If present, will override the default help text path set in the uiConfig.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"parameters":{"additionalProperties":{},"description":"The parameters that are passed to the website (iframe). These can be used within your website to render different things.","type":"object"},"path":{"description":"The path to the website. This should be a relative path from the public folder or could be an external website.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"website","type":"string"}},"required":["path","response","type"],"type":"object"}}'),JUt={$ref:KUt,$schema:XUt,definitions:QUt},G3e=new XQ;G3e.addSchema(JUt);const ZUt=G3e.getSchema("#/definitions/LibraryConfig");function Y3e(e,t){return vl(e)?e:{...e,components:e.components.map(n=>typeof n=="object"?Y3e(n,t):`$${t}.components.${n}`)}}function K3e(e,t,n=[]){return vl(e)?e:{...e,components:(e.components||[]).map(r=>{if(typeof r=="object")return K3e(r,t);const i=r.includes(".se.")?".se.":r.includes(".sequences.")?".sequences.":!1;if(typeof r=="string"&&r.startsWith("$")&&i){const[s,o]=r.split(i),a=s.slice(1);if(!t[a]){const c={message:`Library ${a} not found in imported libraries`,instancePath:"",params:{action:"check the library name"}};return n.push(c),r}let l=t[a].sequences[o];if(!l){const c={message:`Sequence ${o} not found in library ${s}`,instancePath:"",params:{action:"check the sequence name"}};return n.push(c),r}return l=Y3e(l,a),l}return r})}}function eVt(e,t,n){Object.entries(n).forEach(([r,i])=>{Object.entries(i.components).forEach(([s,o])=>{var a;h6(o)&&!((a=i.baseComponents)!=null&&a[o.baseComponent])&&t.push({message:`Base component \`${o.baseComponent}\` is not defined in baseComponents object in library \`${r}\``,instancePath:`/importedLibraries/${r}/components/${s}`,params:{action:"add the base component to the baseComponents object"}})})})}function tVt(e,t){let n=!1,r;try{r=JSON.parse(e),n=ZUt(r)}catch{n=!1}const i=[],s=[];return r?n||i.push({message:"Library config is not valid",instancePath:"",params:{action:"fix the errors in the library config"}}):i.push({message:`Could not find library \`${t}\``,instancePath:"/importedLibraries/",params:{action:"make sure the library is in the correct location"}}),{...r,errors:i,warnings:s}}async function nVt(e){const t=await(await fetch(`${rs}libraries/${e}/config.json`)).text();return tVt(t,e)}async function rVt(e,t,n){const r=e.map(async s=>{const o=await nVt(s);return o.errors&&t.push(...o.errors),o.warnings&&n.push(...o.warnings),[s,o]}),i=Object.fromEntries(await Promise.all(r));return Object.entries(i).forEach(([s,o])=>{o.components||delete i[s]}),e.forEach(s=>{i[s]&&(i[s].components=Object.fromEntries(Object.entries(i[s].components).map(([o,a])=>{if(h6(a)){const u=vTe({},i[s].baseComponents[a.baseComponent],a);return delete u.baseComponent,[[`$${s}.components.${o}`,u],[`$${s}.co.${o}`,u]]}return[[`$${s}.components.${o}`,a],[`$${s}.co.${o}`,a]]}).reduce((o,[a,u])=>(o.push(a,u),o),[])))}),i}const X3e=new XQ;X3e.addSchema(YUt);const Qhe=X3e.getSchema("#/definitions/GlobalConfig"),Q3e=new XQ;Q3e.addSchema(HUt);const Jhe=Q3e.getSchema("#/definitions/StudyConfig");function iVt(e){const t=[];return[e.configsList.every(r=>e.configs[r]===void 0?(t.push({message:`Config ${r} is not defined in configs object, but is present in configsList`}),!1):!0),t]}function sVt(e){const t=JSON.parse(e),n=Qhe(t),r=iVt(t);if(n&&r[0])return t;throw console.error("Global config parsing errors",[...Qhe.errors||[],...r[1]]),Error("There was an issue validating your file global.json")}function J3e(e,t,n=[]){if(!vl(e)){if(e.components.length===0){n.push({message:"Sequence has an empty components array",instancePath:"/sequence/",params:{action:"remove empty components block"}});return}e.id&&t.map((i,s)=>i===e.id?s:null).forEach(i=>{i!==null&&t.splice(i,1)}),e.components.forEach(r=>{typeof r=="string"?t.includes(r)&&t.map((s,o)=>s===r?o:null).forEach(s=>{s!==null&&t.splice(s,1)}):J3e(r,t,n)}),e.skip&&t.push(...e.skip.map(r=>r.to).filter(r=>r!=="end"))}}function oVt(e,t){const n=[],r=[];eVt(e,n,t),Object.entries(e.components).forEach(([o,a])=>{var u;h6(a)&&!((u=e.baseComponents)!=null&&u[a.baseComponent])&&n.push({message:`Base component \`${a.baseComponent}\` is not defined in baseComponents object`,instancePath:`/components/${o}`,params:{action:"add the base component to the baseComponents object"}})});const i=mTe(e.sequence);i.forEach(o=>{var a;e.components[o]||n.push({message:(a=e.baseComponents)!=null&&a[o]?`Component \`${o}\` is a base component and cannot be used in the sequence`:`Component \`${o}\` is not defined in components object`,instancePath:"/sequence/",params:{action:"add the component to the components object"}})}),Object.keys(e.components).filter(o=>!i.includes(o)&&!o.includes(".se.")&&!o.includes(".sequences.")&&!o.includes(".co.")&&!o.includes(".components.")).forEach(o=>{r.push({message:`Component \`${o}\` is defined in components object but not used deterministically in the sequence`,instancePath:"/components/",params:{action:"remove the component from the components object or add it to the sequence"}})});const s=[];return J3e(e.sequence,s),s.forEach(o=>{n.push({message:`Skip target \`${o}\` does not occur after the skip block it is used in`,instancePath:"/sequence/",params:{action:"add the target to the sequence after the skip block"}})}),{errors:n,warnings:r}}async function QQ(e){let t=!1,n;try{n=JSON.parse(e),t=Jhe(n)}catch{t=!1}let r=Jhe.errors||[],i=[];if(t&&n){const s=n.importedLibraries||[],o=await rVt(s,r,i);Object.values(o).forEach(l=>{n.components={...n.components,...l.components},n.baseComponents={...n.baseComponents,...l.components}}),n.sequence=K3e(n.sequence,o,r);const{errors:a,warnings:u}=oVt(n,o);r=[...r,...a],i=[...i,...u]}else r=[...r,{message:"There was an issue validating your config file",instancePath:"root",params:{action:"fix the errors in your file or make sure the global config references the right file path"}}];return{...n,errors:r,warnings:i}}async function aVt(e){const t=await(await fetch(`${rs}${e}`)).text();return await QQ(t)}async function JQ(e,t){const n=t.configsList.find(r=>Sge(r)===e);if(n){const r=t.configs[n];return await aVt(`${r.path}`)}return null}async function uVt(e){const t={},n=e.configsList.map(async i=>JQ(i,e)),r=await Promise.all(n);return e.configsList.forEach((i,s)=>{t[i]=r[s]}),t}function lVt({globalConfig:e}){const t=Kp(),[n,r]=D.useState(null),i=e.configsList.includes(t)||t==="__revisit-widget";D.useEffect(()=>{if(t!=="__revisit-widget")return JQ(t,e).then(p=>{r(p)}),()=>{};if(e&&t){const p=m=>{m.data.type==="revisitWidget/CONFIG"&&QQ(m.data.payload).then(async y=>{r(y);const v=await Lfe(y);window.parent.postMessage({type:"revisitWidget/SEQUENCE_ARRAY",payload:v},"*")})};return window.addEventListener("message",p),window.parent.postMessage({type:"revisitWidget/READY"},"*"),()=>{window.removeEventListener("message",p)}}return()=>{}},[e,t]);const[s,o]=D.useState([]),[a,u]=D.useState(null),{storageEngine:l}=Mi(),[c]=Zf(),d=D.useMemo(()=>c.get("participantId"),[c]);D.useEffect(()=>{async function p(){if(!l||!n||!t)return;await l.initializeStudyDb(t,n),await l.getSequenceArray()||await l.setSequenceArray(await Lfe(n));const y=n.uiConfig.urlParticipantIdParam&&c.get(n.uiConfig.urlParticipantIdParam)||void 0,v=Object.fromEntries(c.entries()),b=await fetch("https://api.ipify.org?format=json").catch(k=>""),w=b instanceof Response?await b.json():{ip:""},E={language:navigator.language,userAgent:navigator.userAgent,resolution:{width:window.screen.width,height:window.screen.height,availHeight:window.screen.availHeight,availWidth:window.screen.availWidth,colorDepth:window.screen.colorDepth,orientation:window.screen.orientation.type,pixelDepth:window.screen.pixelDepth},ip:w.ip},_=await l.initializeParticipantSession(t,v,n,E,d||y),C=await l.getModes(t),S=await lyt(t,n,_.sequence,E,_.answers,C,_.participantId);u(S),o([{element:T.jsx(Izt,{}),children:[{path:"/",element:T.jsx(D3e,{to:vs(0),replace:!0})},{path:"/:index/:funcIndex?",element:n.errors.length>0?T.jsxs(T.Fragment,{children:[T.jsx(Pi,{order:2,mb:8,children:"Error loading config"}),T.jsx(KR,{issues:n.errors,type:"error"})]}):T.jsx(Q7t,{})}]}])}p()},[l,n,t,c,d]);const f=dge(s);let h=null;return i?s.length===0?h=T.jsx(fl,{visible:!0}):h=f&&a?T.jsx(xTe.Provider,{value:a,children:T.jsx($it,{store:a.store,children:f})}):T.jsx(Op,{}):h=T.jsx(Op,{}),h}function EP({studyIds:e}){const t=Cl(),{studyId:n}=Va(),r=fc(),i=e.map(o=>({value:o,label:o})).sort((o,a)=>o.label.localeCompare(a.label)),s=r.pathname.includes("analysis");return T.jsx(Or.Header,{p:"md",children:T.jsxs(ff,{mt:-7,align:"center",children:[T.jsx(ff.Col,{span:6,children:T.jsxs(Ft,{align:"center",onClick:()=>t("/"),style:{cursor:"pointer"},children:[T.jsx(rg,{w:40,src:`${rs}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),T.jsx(al,{w:"md"}),T.jsx(Pi,{order:4,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:s?"ReVISit Analytics Platform":"ReVISit Studies"})]})}),T.jsx(ff.Col,{span:6,children:T.jsxs(Ft,{justify:"flex-end",direction:"row",children:[s&&T.jsxs(T.Fragment,{children:[T.jsx(Lw,{allowDeselect:!1,placeholder:"Select Study",data:i,value:n,onChange:o=>t(`/analysis/stats/${o}`),mr:16}),T.jsx(tn,{component:"a",href:`${rs}${n}`,target:"_blank",leftSection:T.jsx(wge,{}),mr:"sm",children:"Go to Study"})]}),T.jsx(_ge,{onClick:()=>t("/settings"),style:{cursor:"pointer",marginTop:s?6:void 0}})]})})]})})}function Z3e({visibleParticipants:e,studyId:t,gap:n,fileName:r}){const[i,{open:s,close:o}]=Xz(!1),[a,u]=D.useState([]),l=async()=>typeof e=="function"?await e():e,c=async()=>{const f=await l(),h=r?`${r}.json`:`${t}_all.json`;XW(JSON.stringify(f,null,2),h)},d=async()=>{const f=await l();u(f),s()};return T.jsxs(T.Fragment,{children:[T.jsxs(Ti,{style:{gap:n},children:[T.jsx(jr,{label:"Download all participants data as JSON",children:T.jsx(tn,{variant:"light",disabled:e.length===0&&typeof e!="function",onClick:c,px:4,children:T.jsx(Q7e,{})})}),T.jsx(jr,{label:"Download all participants data as a tidy CSV",children:T.jsx(tn,{variant:"light",disabled:e.length===0&&typeof e!="function",onClick:d,px:4,children:T.jsx(Tge,{})})})]}),i&&a.length>0&&T.jsx(Nbt,{opened:i,close:o,filename:r?`${r}_tidy.csv`:`${t}_all_tidy.csv`,data:a,studyId:t})]})}function eNe(e,t){if(!e)return null;if(t!=null&&t.uiConfig&&t.uiConfig.participantNameField){const[n,r]=t.uiConfig.participantNameField.split("."),i=Object.keys(e.answers).find(s=>s.startsWith(n));if(i)return`${e.answers[i].answer[r]}`}return null}function cVt({cellData:e}){return Number.isFinite(e.endTime)&&Number.isFinite(e.startTime)?T.jsx(Vt.Td,{children:T.jsx(Es,{miw:100,children:e.timedOut?T.jsx(Je,{children:"Timed out"}):Object.entries(e.answer).map(([t,n])=>T.jsxs(Se,{children:[T.jsxs(Je,{fw:700,span:!0,children:[" ",`${t}: `]}),typeof n=="object"?T.jsx(Je,{size:"xs",component:"pre",span:!0,children:`${JSON.stringify(n,null,2)}`}):T.jsx(Je,{span:!0,children:n})]},`cell-${t}`))})}):T.jsx(Vt.Td,{children:"N/A"})}function Zhe({cellData:e}){const t=e.endTime&&e.startTime?(e.endTime-e.startTime)/1e3:NaN,n=e.endTime&&e.startTime?DTe(e):NaN;return Number.isFinite(e.endTime)&&Number.isFinite(e.startTime)?T.jsxs(Vt.Td,{children:[t.toFixed(1)," ","s",n&&T.jsxs(T.Fragment,{children:[T.jsx("br",{})," ","(",(n/1e3).toFixed(1)," ","s)"]})]}):T.jsx(Vt.Td,{children:"N/A"})}function dVt(e){const{metaData:t}=e;return T.jsx(Vt.Td,{children:T.jsx(FV,{w:200,hideLabel:"hide",maxHeight:50,showLabel:"more",children:T.jsxs(Es,{gap:"xs",children:[T.jsxs(Se,{children:["IP:"," ",t.ip]}),T.jsxs(Se,{children:["Language:"," ",t.language]}),T.jsxs(Se,{children:["Resolution:"," ",JSON.stringify(t.resolution)]}),T.jsxs(Se,{children:["User Agent:"," ",t.userAgent]})]})})})}function fVt({visibleParticipants:e,studyConfig:t,refresh:n}){const{storageEngine:r}=Mi(),{studyId:i}=Va(),{user:s}=rE(),o=async(E,_)=>{if(r&&i)if(s.isAdmin){const C=_===""?"Rejected by admin":_;await r.rejectParticipant(i,E,C),await n()}else console.warn("You are not authorized to perform this action.")},[a,u]=D.useState([]),[l,c]=D.useState(!1),[d,f]=D.useState(!1),[h,p]=D.useState(""),m=async()=>{c(!0),f(!1);const E=a.map(async _=>await o(_,h));await Promise.all(E),u([]),await n(),c(!1)};function y(E){E==="all"?a.length===e.length?u([]):u(e.map(_=>_.participantId)):a.includes(E)?u(a.filter(_=>_!==E)):u([...a,E])}const v=bTe(t.sequence),b=[T.jsx(Vt.Th,{children:T.jsx(Ft,{justify:"center",children:T.jsx(Ao,{mb:-4,checked:a.length===e.length,onChange:()=>y("all")})})},"action"),T.jsx(Vt.Th,{children:"Index"},"index"),T.jsx(Vt.Th,{children:"Name"},"name"),T.jsx(Vt.Th,{children:"ID"},"ID"),T.jsx(Vt.Th,{children:"Start Time"},"startTime"),T.jsx(Vt.Th,{children:"End Time"},"endTime"),T.jsx(Vt.Th,{children:"Total Duration (clean)"},"total-duration"),T.jsx(Vt.Th,{children:"Status"},"status"),T.jsx(Vt.Th,{children:"Tags"},"tags"),T.jsx(Vt.Th,{children:"Meta"},"meta"),...v.flatMap(E=>[T.jsx(Vt.Th,{children:E.componentName},`header-${E.componentName}-${E.timesSeenInBlock}`),T.jsxs(Vt.Th,{children:[T.jsx("span",{style:{whiteSpace:"nowrap"},children:E.componentName})," ","Duration (clean)"]},`header-${E.componentName}-${E.timesSeenInBlock}-duration`)])],w=e.map(E=>{const _=eNe(E,t),C=E.answers&&Object.values(E.answers).filter(R=>R.startTime).sort((R,N)=>R.startTime-N.startTime),S=C&&C.length>0?C[0].startTime:void 0,k=C&&C.length>0?C[C.length-1].endTime:void 0;return T.jsxs(Vt.Tr,{children:[T.jsx(Vt.Td,{children:T.jsx(Ft,{justify:"center",children:T.jsx(Ao,{mb:-4,checked:a.includes(E.participantId),onChange:()=>y(E.participantId)})})}),T.jsx(Vt.Td,{children:`P-${E.participantIndex.toString().padStart(3,"0")}`}),T.jsx(Vt.Td,{children:_}),T.jsx(Vt.Td,{style:{whiteSpace:"nowrap"},children:E.participantId}),T.jsx(Vt.Td,{miw:110,children:S?new Date(S).toLocaleString():"N/A"}),T.jsx(Vt.Td,{miw:110,children:E.completed&&k?new Date(k).toLocaleString():"N/A"}),T.jsx(Zhe,{cellData:{startTime:S,endTime:k,windowEvents:Object.values(E.answers).flatMap(R=>R.windowEvents)}},`cell-${E.participantId}-total-duration`),T.jsx(Vt.Td,{children:T.jsxs(Ft,{direction:"column",miw:100,children:[T.jsxs(Ft,{direction:"row",align:"center",children:[E.rejected?T.jsx(jr,{label:"Rejected",children:T.jsx(Uw,{size:16,color:"red",style:{marginBottom:-3}})}):E.completed?T.jsx(jr,{label:"Completed",children:T.jsx(tS,{size:16,color:"teal",style:{marginBottom:-3}})}):T.jsx(jr,{label:"In Progress",children:T.jsx(Ege,{size:16,color:"orange",style:{marginBottom:-3}})}),!E.completed&&T.jsxs(Je,{size:"sm",mb:-1,ml:4,children:[(Object.entries(E.answers).filter(([R,N])=>N.endTime!==-1&&N.endTime!==void 0).length/(Vf(E.sequence).length-1)*100).toFixed(2),"%"]})]}),E.rejected&&T.jsx(Je,{mt:5,fz:10,children:E.rejected.reason})]})}),T.jsx(Vt.Td,{children:T.jsx(Ft,{direction:"column",miw:100,children:(E.participantTags||[]).map(R=>T.jsxs(Je,{fz:10,children:["-"," ",R]},`tag-${R}`))})}),E.metadata?T.jsx(dVt,{metaData:E.metadata}):T.jsx(Vt.Td,{children:"N/A"}),v.map(R=>{const N=HW(E.sequence,R.orderPath),O=N&&Object.entries(E.answers).sort((F,$)=>{const z=parseInt(F[0].slice(F[0].lastIndexOf("_")+1),10),q=parseInt($[0].slice($[0].lastIndexOf("_")+1),10);return z-q}).filter(([F])=>{const $=F.slice(0,F.lastIndexOf("_")),z=parseInt(F.slice(F.lastIndexOf("_")+1),10);return $===R.componentName&&z<=N[0].lastIndex&&z>=N[0].firstIndex});return O!==null&&O.length>=R.timesSeenInBlock+1&&O[R.timesSeenInBlock][1].endTime!==-1?T.jsxs(rr.Fragment,{children:[T.jsx(cVt,{cellData:O[R.timesSeenInBlock][1]}),T.jsx(Zhe,{cellData:O[R.timesSeenInBlock][1]})]},`cellgroup-${E.participantId}-${R.componentName}-${R.timesSeenInBlock}`):T.jsxs(rr.Fragment,{children:[T.jsx(Vt.Td,{children:"N/A"}),T.jsx(Vt.Td,{children:"N/A"})]},`cellgroup-${E.participantId}-${R.componentName}-${R.timesSeenInBlock}`)})]},E.participantId)});return e.length>0?T.jsxs(T.Fragment,{children:[T.jsx(fl,{visible:l,overlayProps:{blur:2}}),T.jsxs(Ft,{justify:"space-between",mb:8,p:8,children:[T.jsx(Ti,{children:T.jsx(Lw,{w:350,variant:"filled",placeholder:"Search for a participant ID",data:[...new Set(e.map(E=>E.participantId))],searchable:!0,value:null,leftSection:T.jsx(dze,{size:14}),onChange:E=>E&&y(E)})}),T.jsxs(Ti,{children:[T.jsx(Z3e,{visibleParticipants:e,studyId:i||""}),T.jsxs(tn,{disabled:a.length===0||!s.isAdmin,onClick:()=>f(!0),color:"red",children:["Reject Participants (",a.length,")"]})]})]}),T.jsx(Ft,{direction:"column",style:{width:"100%",overflow:"auto"},children:T.jsxs(Vt,{striped:!0,withTableBorder:!0,children:[T.jsx(Vt.Thead,{children:T.jsx(Vt.Tr,{children:b})}),T.jsx(Vt.Tbody,{children:w})]})}),T.jsxs(Ei,{opened:d,onClose:()=>f(!1),title:T.jsxs(Je,{children:["Reject Participants (",a.length,")"]}),children:[T.jsx(Xh,{label:"Please enter the reason for rejection.",onChange:E=>p(E.target.value)}),T.jsxs(Ft,{mt:"sm",justify:"right",children:[T.jsx(tn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{f(!1),p("")},children:"Cancel"}),T.jsx(tn,{color:"red",onClick:()=>m(),children:"Reject Participants"})]})]})]}):T.jsxs(T.Fragment,{children:[T.jsx(al,{h:"xl"}),T.jsx(Ft,{justify:"center",align:"center",children:T.jsx(Je,{children:"No data available"})})]})}function hVt({studyId:e,refresh:t}){const[n,r]=D.useState(!1),[i,s]=D.useState(!1),[o,a]=D.useState(!1),[u,l]=D.useState(!1),[c,d]=D.useState(""),[f,h]=D.useState([]),[p,m]=D.useState(""),[y,v]=D.useState(""),[b,w]=D.useState(!1),[E,_]=D.useState(!1),{storageEngine:C}=Mi(),S=C,k=D.useCallback(async()=>{_(!0);const U=await S.getSnapshots(e);h(U),_(!1)},[S,e]);D.useEffect(()=>{k()},[k]);const R=async(U,...L)=>{w(!0);const Y=await U(...L);Y.status==="SUCCESS"?(k(),w(!1),await t(),Y.notifications&&Y.notifications.forEach(j=>{dC(j)})):(w(!1),dC({title:Y.error.title,message:Y.error.message,color:"red"}))},N=async()=>{await R(S.createSnapshot.bind(S),e,!1)},O=async()=>{m(""),r(!1),await R(S.createSnapshot.bind(S),e,!0)},F=async()=>{a(!1),await R(S.renameSnapshot.bind(S),c,y)},$=async U=>{await R(S.restoreSnapshot.bind(S),e,U)},z=async()=>{m(""),s(!1),await R(S.removeSnapshotOrLive.bind(S),c,!0)},q=async()=>{m(""),l(!1),await R(S.removeSnapshotOrLive.bind(S),e,!0)},W=()=>Mte({title:"Create a Snapshot",children:T.jsx(Je,{mb:30,children:"This will create a snapshot of the live database without impacting the live data."}),labels:{confirm:"Create",cancel:"Cancel"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:()=>N()}),J=U=>Mte({title:"Restore Snapshot",children:T.jsx(Je,{mb:30,children:"Restoring this snapshot will perform 2 actions. First, we will create a snapshot of the current live database, then we will restore the selected snapshot into the live database."}),labels:{confirm:"Restore",cancel:"Cancel"},confirmProps:{color:"red"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:()=>$(U)}),K=U=>{const L=/-snapshot-(.+)$/,Y=U.match(L);return Y&&Y[1]?Y[1].replace("T"," "):null},Z=async U=>{const L=U.slice(U.indexOf("-")+1);return await S.getAllParticipantsDataByStudy(L)};return T.jsxs(T.Fragment,{children:[T.jsx(fl,{visible:b}),T.jsxs(Ft,{justify:"space-between",align:"center",children:[T.jsxs(Se,{style:{width:"70%"},children:[T.jsx(Pi,{order:5,children:"Create a Snapshot"}),T.jsxs(Je,{children:["This will create a snapshot of the live"," ",T.jsx(Je,{span:!0,fw:700,children:e})," ","database. It will"," ",T.jsx(Je,{span:!0,fw:700,fs:"italic",children:"not"})," ","remove this data from the live database. The current study data can be restored from a snapshot at any time."]})]}),T.jsx(jr,{label:"Create a snapshot",children:T.jsx(tn,{onClick:W,children:"Snapshot"})})]}),T.jsx(al,{h:"lg"}),T.jsxs(Ft,{justify:"space-between",align:"center",children:[T.jsxs(Se,{style:{width:"70%"},children:[T.jsx(Pi,{order:5,children:"Archive Data"}),T.jsxs(Je,{children:["This will create a snapshot of the live"," ",T.jsx(Je,{span:!0,fw:700,children:e})," ","database. It will then remove this data from the live database. The current study data can be restored from a snapshot at any time."]})]}),T.jsx(jr,{label:"Snapshot and Delete Data",children:T.jsx(tn,{color:"red",onClick:()=>r(!0),children:"Archive"})})]}),T.jsx(al,{h:"lg"}),T.jsxs(Ft,{justify:"space-between",align:"center",children:[T.jsxs(Se,{style:{width:"70%"},children:[T.jsx(Pi,{order:5,children:"Delete Data"}),T.jsxs(Je,{children:["This will delete the live"," ",T.jsx(Je,{span:!0,fw:700,children:e})," ","database. Since this does not create a snapshot the data will be permanently deleted and cannot be restored."]})]}),T.jsx(jr,{label:"Delete Data",children:T.jsx(tn,{color:"red",onClick:()=>l(!0),children:"Delete"})})]}),T.jsx(al,{h:"xl"}),T.jsxs(Ft,{direction:"column",children:[T.jsx(Ft,{style:{borderBottom:"1px solid #dedede"},direction:"row",justify:"space-between",mb:"xs",pb:"sm",children:T.jsx(Pi,{order:5,children:"Snapshots"})}),T.jsxs(Se,{style:{position:"relative"},children:[T.jsx(fl,{visible:E}),f.length>0?T.jsxs(Vt,{children:[T.jsx(Vt.Thead,{children:T.jsxs(Vt.Tr,{children:[T.jsx(Vt.Th,{children:"Snapshot Name"}),T.jsx(Vt.Th,{children:"Date Created"}),T.jsx(Vt.Th,{children:"Actions"})]})}),T.jsx(Vt.Tbody,{children:f.map(U=>T.jsxs(Vt.Tr,{children:[T.jsx(Vt.Td,{children:U.alternateName}),T.jsx(Vt.Td,{children:K(U.originalName)}),T.jsx(Vt.Td,{children:T.jsxs(Ft,{children:[T.jsx(jr,{label:"Rename",children:T.jsx(tn,{color:"green",variant:"light",px:4,style:{margin:"0px 5px"},onClick:()=>{a(!0),d(U.originalName)},children:T.jsx(oze,{})})}),T.jsx(jr,{label:"Restore Snapshot",children:T.jsx(tn,{color:"blue",variant:"light",px:4,style:{margin:"0px 5px"},onClick:()=>{J(U.originalName)},children:T.jsx(lze,{})})}),T.jsx(jr,{label:"Delete Snapshot",children:T.jsx(tn,{color:"red",px:4,variant:"light",style:{margin:"0px 10px 0px 5px"},onClick:()=>{s(!0),d(U.originalName)},children:T.jsx(Cge,{})})}),T.jsx(Z3e,{visibleParticipants:()=>Z(U.originalName),studyId:e,gap:"10px",fileName:U.alternateName})]})})]},U.originalName))})]}):T.jsx(Je,{children:"No snapshots."})]})]}),T.jsxs(Ei,{opened:n,onClose:()=>{r(!1),m("")},title:T.jsx(Je,{children:"Archive Data"}),children:[T.jsx(Je,{mb:"sm",children:"This will create a snapshot of the live database and remove the data from the live database."}),T.jsx(Xh,{label:"To archive this data, please enter the name of the study.",placeholder:e,onChange:U=>m(U.target.value)}),T.jsxs(Ft,{mt:"sm",justify:"right",children:[T.jsx(tn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{r(!1),m("")},children:"Cancel"}),T.jsx(tn,{color:"red",onClick:O,disabled:p!==e,children:"Archive"})]})]}),T.jsxs(Ei,{opened:i,onClose:()=>{s(!1),m("")},title:T.jsx(Je,{children:"Delete Snapshot"}),children:[T.jsxs(Je,{mb:"sm",children:["This will permanently remove this snapshot. This action is"," ",T.jsx(Je,{span:!0,fw:700,children:"irreversible"}),"."]}),T.jsx(Xh,{label:"To delete this snapshot, please enter the name of the study.",placeholder:e,onChange:U=>m(U.target.value)}),T.jsxs(Ft,{mt:"sm",justify:"right",children:[T.jsx(tn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{s(!1),m("")},children:"Cancel"}),T.jsx(tn,{color:"red",onClick:z,disabled:p!==e,children:"Delete"})]})]}),T.jsxs(Ei,{opened:o,onClose:()=>{a(!1),v("")},title:T.jsx(Je,{children:"Rename Snapshot"}),children:[T.jsx(Xh,{label:"Enter the new name of the snapshot.",placeholder:c,onChange:U=>v(U.target.value)}),T.jsxs(Ft,{mt:"sm",justify:"right",children:[T.jsx(tn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{a(!1),v("")},children:"Cancel"}),T.jsx(tn,{color:"green",onClick:F,disabled:!y||y.length===0,children:"Rename"})]})]}),T.jsxs(Ei,{opened:u,onClose:()=>{l(!1),m("")},title:T.jsx(Je,{children:"Delete Live Data"}),children:[T.jsxs(Je,{mb:"sm",children:["This will permanently delete the live"," ",T.jsx(Je,{span:!0,fw:700,children:e})," ","data. This action is"," ",T.jsx(Je,{span:!0,fw:700,children:"irreversible"}),". Please consider using archive data to create a snapshot of the live data before deleting."]}),T.jsx(Xh,{label:"To delete this live data, please enter the name of the study.",placeholder:e,onChange:U=>m(U.target.value)}),T.jsxs(Ft,{mt:"sm",justify:"right",children:[T.jsx(tn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{l(!1),m("")},children:"Cancel"}),T.jsx(tn,{color:"red",onClick:q,disabled:p!==e,children:"Delete"})]})]})]})}function pVt({studyId:e}){const{storageEngine:t}=Mi(),[n,r]=D.useState(!1),[i,s]=D.useState(!1),[o,a]=D.useState(!1),[u,l]=D.useState(!1);D.useEffect(()=>{(async()=>{if(t){const f=await t.getModes(e);s(f.dataCollectionEnabled),a(f.studyNavigatorEnabled),l(f.analyticsInterfacePubliclyAccessible),r(!0)}})()},[t,e]);const c=async(d,f)=>{t&&(await t.setMode(e,d,f),d==="dataCollectionEnabled"?s(f):d==="studyNavigatorEnabled"?a(f):d==="analyticsInterfacePubliclyAccessible"&&l(f))};return n&&T.jsxs(Es,{children:[T.jsx(Ly,{label:"Data Collection Enabled",checked:i,onChange:d=>c("dataCollectionEnabled",d.currentTarget.checked)}),T.jsx(Ly,{label:"Study Navigator Enabled",checked:o,onChange:d=>c("studyNavigatorEnabled",d.currentTarget.checked)}),T.jsx(Ly,{label:"Analytics Interface Publicly Accessible",checked:u,onChange:d=>c("analyticsInterfacePubliclyAccessible",d.currentTarget.checked)})]})}function mVt({studyId:e,refresh:t}){const{storageEngine:n}=Mi();return T.jsx(_p,{children:T.jsxs(na,{multiple:!0,variant:"contained",children:[T.jsxs(na.Item,{value:"ReVISit Modes",children:[T.jsx(na.Control,{children:T.jsx(Pi,{order:5,children:"ReVISit Modes"})}),T.jsx(na.Panel,{children:T.jsx(pVt,{studyId:e})})]},"modes"),T.jsxs(na.Item,{value:"Data Management",children:[T.jsx(na.Control,{disabled:(n==null?void 0:n.getEngine())==="localStorage",children:T.jsx(Pi,{order:5,children:"Data Management"})}),T.jsx(na.Panel,{children:(n==null?void 0:n.getEngine())!=="localStorage"&&T.jsx(hVt,{studyId:e,refresh:t})})]},"dataManagement")]})})}function gVt({response:e,participantData:t,trialId:n,trialConfig:r}){const[i,{toggle:s}]=Xz(!0),[o,a]=_w(),u=D.useMemo(()=>e.type==="metadata"?[]:t.map(f=>Object.entries(f.answers).filter(([h])=>h.slice(0,h.lastIndexOf("_"))===n)).map(f=>f.map(([,h])=>h.answer)).flat(),[t,e.type,n]),l=D.useMemo(()=>{var f;return e.type==="metadata"||(f=r.correctAnswer)==null?void 0:f.find(h=>h.id===e.id)},[e.id,e.type,r.correctAnswer]),c=D.useMemo(()=>{const d={height:"container",width:"container"};if(e.type==="shortText"||e.type==="longText")return{};if(e.type==="metadata"){const h=t.map(m=>Object.entries(m.answers).filter(([y])=>y.slice(0,y.lastIndexOf("_"))===n)).map(m=>m.filter(([y,v])=>v.endTime!==-1).map(([y,v])=>(v.endTime-v.startTime)/1e3)).flat();return{...d,data:{values:h},mark:"bar",encoding:{x:{field:"data",bin:!0,type:"quantitative",title:"Time (s)"},y:{aggregate:"count",type:"quantitative",title:"Count"}}}}const f={params:[{name:"correctAnswer",value:l==null?void 0:l.answer},{name:"variable",value:e.id}],transform:[{calculate:"datum[variable] === correctAnswer ? 'correct' : 'incorrect'",as:"result"},{calculate:"if(datum.result === 'correct', 0, if(datum.result === 'incorrect', 1, 2))",as:"order"}],color:{field:"result",type:"nominal",scale:{domain:["correct","incorrect"],range:["#69DB7C","#ADB5BD"]}},order:{field:"order"}};if(e.type==="numerical"||e.type==="slider"||e.type==="likert"){let h,p;return e.type==="numerical"&&(h=e.min,p=e.max),e.type==="slider"&&(h=Math.min(...e.options.map(y=>y.value)),p=Math.max(...e.options.map(y=>y.value))),e.type==="likert"&&(h=1,p=e.numItems),{...d,data:{values:u},mark:"bar",params:l!==void 0?f.params:void 0,transform:[{bin:e.type==="likert"?{step:1}:{maxbins:10},field:e.id,as:"bins"},...l!==void 0?f.transform:[]],encoding:{x:{field:"bins",scale:h!==void 0&&p!==void 0?{domain:[h,p]}:void 0,type:"quantitative",title:"Answer"},x2:{field:"bins_end"},y:{aggregate:"count",type:"quantitative",title:"Count",stack:!0},color:l!==void 0?f.color:void 0,order:l!==void 0?f.order:void 0}}}if(e.type==="radio"||e.type==="dropdown"||e.type==="checkbox")return{...d,data:{values:u},mark:"bar",params:l!==void 0?f.params:void 0,transform:l!==void 0?f.transform:void 0,encoding:{x:{field:e.id,type:"ordinal",title:"Answer"},y:{aggregate:"count",type:"quantitative",title:"Count"},color:l!==void 0?f.color:void 0}}},[t,u,e.id,e.max,e.min,e.numItems,e.options,e.type,n,l]);return T.jsxs(Cw,{p:"lg",withBorder:!0,ref:o,children:[T.jsxs(Ft,{direction:"row",justify:"space-between",onClick:s,children:[T.jsxs(Ft,{align:"center",children:[e.type==="metadata"&&T.jsx(X7e,{size:20}),e.type==="numerical"&&T.jsx(ize,{size:20}),(e.type==="shortText"||e.type==="longText")&&T.jsx(G7e,{size:20}),e.type==="likert"&&T.jsx(Z7e,{size:20}),e.type==="dropdown"&&T.jsx(fze,{size:20}),e.type==="slider"&&T.jsx(z7e,{size:20}),e.type==="radio"&&T.jsx(uze,{size:20}),e.type==="checkbox"&&T.jsx(hze,{size:20}),e.type==="reactive"&&T.jsx(tze,{size:20}),T.jsx(Pi,{order:5,ml:4,children:e.id})]}),T.jsx(K7e,{style:{rotate:i?"180deg":"none",transition:"rotate 200ms"}})]}),T.jsxs(m4,{in:i,mah:400,children:[T.jsx(Se,{style:{top:0,position:"sticky",backgroundColor:"white",zIndex:2},py:"md",children:T.jsx(z1,{})}),T.jsxs(LV,{cols:2,h:360,children:[T.jsx(xp,{mih:200,children:e.type!=="metadata"&&e.type!=="shortText"&&e.type!=="longText"&&e.type!=="reactive"?T.jsx(yfe,{spec:c,actions:!1,height:270,width:a.width/2-60-(l===void 0?0:60),padding:0,style:{justifySelf:"center"},renderer:"svg"}):T.jsxs(Ft,{direction:"column",gap:"xs",style:{overflowX:"clip"},children:[e.type==="metadata"&&T.jsx(Kh,{block:!0,children:`${JSON.stringify(r,null,2)}`}),e.type!=="metadata"&&T.jsxs(T.Fragment,{children:[T.jsx(Je,{fw:700,children:"Response Values: "}),u.map((d,f)=>T.jsx(Ft,{align:"center",gap:"xs",children:T.jsx(Je,{children:d[e.id]})},f))]})]})}),T.jsx(xp,{mih:200,children:e.type==="metadata"?T.jsx(yfe,{spec:c,actions:!1,width:a.width/2-60,height:270,padding:0,style:{justifySelf:"center"}}):T.jsxs(T.Fragment,{children:[T.jsx(Je,{fw:700,children:"Response Specification: "}),T.jsx(Kh,{block:!0,children:JSON.stringify(e,null,2)}),T.jsx("br",{}),l&&T.jsxs(T.Fragment,{children:[T.jsx(Je,{fw:700,children:"Correct Answer: "}),T.jsx(Kh,{block:!0,children:JSON.stringify(l,null,2)})]})]})})]})]})]})}function yVt({participantData:e,studyConfig:t,trialId:n}){const r=n&&n!=="end"&&kf(t.components[n],t),i=D.useMemo(()=>[{id:"Config and Timing",type:"metadata"},...r?r.response:[]],[r]);return r?T.jsx(Ft,{w:"100%",direction:"column",gap:"xs",children:i.map(s=>T.jsx(gVt,{response:s,participantData:e,trialId:n,trialConfig:r},s.id))}):T.jsx(Ft,{justify:"center",align:"center",pt:"lg",pb:"md",w:"100%",children:T.jsx(Je,{children:n!=="end"?"No trial selected":"The end component has no data."})})}function bVt({studyConfig:e,visibleParticipants:t}){const n=D.useMemo(()=>{let i=structuredClone(e.sequence);return i=qW(i,"root"),i.components.push("end"),i},[e.sequence]),{trialId:r}=Va();return T.jsx(Cw,{shadow:"sm",p:"md",withBorder:!0,children:t.length===0?T.jsx(Ft,{justify:"center",align:"center",pt:"lg",pb:"md",children:T.jsx(Je,{children:"No data available."})}):T.jsxs(Ft,{direction:"row",children:[T.jsx(Se,{w:340,children:T.jsx(s4,{configSequence:n,participantSequence:n,fullSequence:n,participantView:!1,studyConfig:e,analysisNavigation:!0})}),T.jsx(z1,{orientation:"vertical",mx:"md"}),T.jsx(yVt,{participantData:t,studyConfig:e,trialId:r})]})})}function vVt({xScale:e,answer:t,height:n,labelHeight:r=0}){return T.jsx("g",{children:T.jsx("line",{stroke:"gray",strokeWidth:1,x1:e(t.startTime)+2,x2:e(t.startTime)+2,y1:n-45-r,y2:n-25})})}const MR=3,_v=25,LR=25,FR=20,epe=1,S9=15;function xVt({xScale:e,answer:t,name:n,height:r,setSelectedTask:i,isSelected:s,labelHeight:o=0,isCorrect:a,hasCorrect:u}){const[l,c]=D.useState(!1),[d,{width:f}]=_w();return T.jsxs("g",{onClick:()=>i(n),onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),style:{cursor:"pointer"},children:[T.jsx("rect",{opacity:1,fill:l||s?"cornflowerblue":"lightgray",x:e(t.startTime)+epe,width:e(t.endTime)-e(t.startTime)-epe*2,y:r-_v,height:_v}),T.jsx("rect",{rx:3,opacity:1,x:e(t.startTime)-MR,width:f+MR*2+(u?S9:0),y:r-_v-LR-o,height:FR,fill:"whitesmoke"}),T.jsx("line",{stroke:"black",strokeWidth:1,x1:e(t.startTime)-MR,x2:f+e(t.startTime)+MR+(u?S9:0),y1:r-_v-LR+FR-o,y2:r-_v-LR+FR-o}),T.jsx("foreignObject",{x:e(t.startTime),width:f+(u?S9:0),y:r-_v-LR-o,height:FR,children:T.jsx(Ep,{style:{width:"fit-content"},children:T.jsxs(Ti,{wrap:"nowrap",gap:2,children:[T.jsx(Je,{lineClamp:1,ref:d,mx:0,style:{width:"fit-content",fontWeight:600},size:"12px",children:n}),u?a?T.jsx(tS,{color:"var(--mantine-color-green-6)",style:{marginTop:2,strokeWidth:4},size:"14"}):T.jsx(Uw,{color:"var(--mantine-color-red-6)",style:{marginTop:2,strokeWidth:4},size:14}):""]})})})]})}const tpe=25,wVt=8,A9={left:20,top:0,right:20,bottom:0};function EVt({participantData:e,width:t,height:n,selectedTask:r,studyId:i,studyConfig:s,maxLength:o}){const a=D.useCallback(y=>{const v=y.split("_"),b=+v[v.length-1];window.open(`${rs}${i}/${vs(b)}?participantId=${e.participantId}`,"_blank")},[e.participantId,i]),u=D.useMemo(()=>{const y=Object.values(e.answers||{}).filter(w=>w.startTime).map(w=>[w.startTime,w.endTime]).flat(),v=$ot(y);return KO([A9.left,t-A9.left-A9.right]).domain([v[0],o?v[0]+o:v[1]]).clamp(!0)},[o,e.answers,t]),[l,c,d]=D.useMemo(()=>{let y=0;const v=Object.entries(e.answers||{}).filter(_=>!!_[1].startTime).sort((_,C)=>_[1].startTime-C[1].startTime);let b=0,w=0;const E=v.map((_,C)=>{const[S,k]=_,R=C>0?v[C-y-1]:null;R&&R[0].length*(wVt+1)+u(R[1].startTime)>u(k.startTime)?y+=1:y=0;const N=S.split("_"),O=N.slice(0,N.length-1).join("_"),F=s==null?void 0:s.components[O];let $=!0,z=!1;return F&&F.correctAnswer?(F.correctAnswer.forEach(q=>{const{id:W,answer:J}=q;(!F||!F.correctAnswer||k.answer[W]!==J)&&($=!1)}),z=!0):z=!1,z&&(w+=1,$&&(b+=1)),{line:T.jsx(vVt,{labelHeight:y*tpe,answer:k,height:n,xScale:u},S),label:T.jsx(jr,{withinPortal:!0,position:"bottom-start",px:4,py:0,withArrow:!0,label:T.jsx(Es,{gap:0,children:Object.entries(k.answer).map(q=>{var Z,U;const[W,J]=q,K=(U=(Z=F==null?void 0:F.correctAnswer)==null?void 0:Z.find(L=>L.id===W))==null?void 0:U.answer;return T.jsx(Je,{children:`${W}: ${J} ${K?`[${K}]`:""}`},W)})}),children:T.jsx("g",{children:T.jsx(xVt,{isCorrect:$,hasCorrect:z,labelHeight:y*tpe,isSelected:r===S,setSelectedTask:a,answer:k,height:n,name:S,xScale:u},S)})},`${S}-tooltip`)}});return[b,w,E]},[e.answers,u,s==null?void 0:s.components,n,r,a]),f=D.useMemo(()=>{if(!e.answers||Object.entries(e.answers).length===0)return 0;const y=Object.values(e.answers).filter(v=>v.startTime).sort((v,b)=>v.startTime-b.startTime);return new Date(y[y.length-1].endTime-(y[0]?y[0].startTime:0)).getTime()},[e]),h=D.useMemo(()=>Object.entries(e.answers||{}).sort((v,b)=>v[1].startTime-b[1].startTime).map(v=>{const[b,w]=v,E=[];let _=[-1,-1],C="visible";if(w.windowEvents)for(let S=0;S<w.windowEvents.length;S+=1)w.windowEvents[S][1]==="visibility"&&(w.windowEvents[S][2]==="hidden"&&C==="visible"?(_=[w.windowEvents[S][0],-1],C="hidden"):w.windowEvents[S][2]==="visible"&&C==="hidden"&&(_[1]=w.windowEvents[S][0],E.push(_),_=[-1,-1],C="visible"));return E.map((S,k)=>T.jsx(jr,{withinPortal:!0,label:"Browsed away",children:T.jsx("rect",{x:u(S[0]),width:u(S[1])-u(S[0]),y:n-5,height:10})},k))}),[u,n,e.answers]),p=D.useMemo(()=>eNe(e,s),[e,s]),m=D.useMemo(()=>{if(!e.answers||Object.entries(e.answers).length===0)return"";const y=Object.values(e.answers).filter(b=>b.startTime).sort((b,w)=>b.startTime-w.startTime),v=new Date(y[y.length-1].endTime);return e.completed?`${v.toLocaleDateString()} ${v.toLocaleTimeString()}`:""},[e]);return T.jsx(Ep,{children:T.jsxs(Es,{gap:15,style:{width:"100%"},children:[T.jsx(z1,{size:"md"}),T.jsxs(Ti,{justify:"space-between",children:[T.jsxs(Ti,{justify:"center",children:[e.participantIndex?T.jsx(Je,{children:`P-${e.participantIndex.toString().padStart(3,"0")}`}):null,T.jsx(Je,{size:"md",fw:700,children:p||e.participantId}),T.jsx(Je,{size:"md",children:m}),e.completed?null:T.jsx(Je,{size:"xl",c:"red",children:"Not completed"}),T.jsxs(Ti,{gap:10,children:[T.jsx(td,{variant:"light",size:"lg",color:"green",leftSection:T.jsx(tS,{width:18,height:18,style:{paddingTop:1}}),pb:1,children:l}),T.jsx(td,{variant:"light",size:"lg",color:"red",leftSection:T.jsx(Uw,{width:18,height:18,style:{paddingTop:1}}),pb:1,children:c-l}),T.jsx(td,{variant:"light",size:"lg",color:"gray",leftSection:T.jsx(eze,{width:18,height:18,style:{paddingTop:1}}),pb:1,children:qz(f)})]})]}),T.jsx(tn,{rightSection:T.jsx(xge,{size:14}),component:"a",href:`${rs}${i}/${vs(0)}?participantId=${e.participantId}`,target:"_blank",children:"Go to replay"})]}),e.completed?T.jsxs("svg",{style:{width:t,height:n,overflow:"visible"},children:[d.map(y=>y.line),d.map(y=>y.label),h]}):null]})})}function _Vt({visibleParticipants:e,studyConfig:t}){const{studyId:n}=Va(),[r,{width:i}]=_w(),[s,o]=D.useState(!1),a=D.useMemo(()=>s?Math.max(...e.map(l=>{const c=Math.min(...Object.values(l.answers).map(f=>f.startTime||0)),d=Math.max(...Object.values(l.answers).map(f=>f.endTime||0));return d&&c?d-c:0})):void 0,[s,e]);return T.jsxs(Es,{ref:r,style:{width:"100%"},children:[T.jsx(Ti,{children:T.jsx(Ly,{checked:s,label:"Scale by time",onChange:u=>o(u.currentTarget.checked)})}),e.map(u=>T.jsx(EVt,{maxLength:a,studyConfig:t,studyId:n||"",height:200,participantData:u,width:i},u.participantId))]})}function npe(e,t){const n=Object.values(e.answers).map(i=>i.startTime).filter(i=>i!==void 0).sort(),r=Object.values(t.answers).map(i=>i.startTime).filter(i=>i!==void 0).sort();return n.length===0||r.length===0?n.length>0?-1:r.length>0?1:t.participantIndex-e.participantIndex:r[0]-n[0]}function TVt({globalConfig:e}){const{studyId:t}=Va(),[n,r]=D.useState([]),[i,s]=D.useState(void 0),[o,a]=D.useState(!1),{storageEngine:u}=Mi(),l=Cl(),{analysisTab:c}=Va(),{user:d}=rE();D.useEffect(()=>{if(!t)return()=>{};if(t==="__revisit-widget"){const w=async E=>{if(E.data.type==="revisitWidget/CONFIG"&&u){const _=await QQ(E.data.payload);s(_)}};return window.addEventListener("message",w),window.parent.postMessage({type:"revisitWidget/READY"},"*"),()=>{window.removeEventListener("message",w)}}return JQ(t,e).then(w=>{w&&s(w)}),()=>{}},[t,e,u]);const f=D.useCallback(async()=>{if(a(!0),t){if(!i||!u)return;await u.initializeStudyDb(t,i);const w=await u.getAllParticipantsData();r(w),a(!1)}},[u,t,i]);D.useEffect(()=>{f()},[e,u,t,f]);const[h,p]=D.useState([]),[m,y,v]=D.useMemo(()=>{const w=n.filter(C=>!C.rejected&&C.completed),E=n.filter(C=>!C.rejected&&!C.completed),_=n.filter(C=>C.rejected);return p([...w,...E,..._].sort(npe)),[w,E,_]},[n]),b=D.useCallback(w=>{const E=[];w.includes("completed")&&E.push(...m),w.includes("inprogress")&&E.push(...y),w.includes("rejected")&&E.push(...v),p(E.sort(npe))},[m,y,v]);return T.jsxs(T.Fragment,{children:[T.jsx(EP,{studyIds:e.configsList}),T.jsx(Or.Main,{children:T.jsxs(_p,{fluid:!0,style:{height:"100%",position:"relative"},children:[T.jsx(fl,{visible:o}),T.jsxs(Ft,{direction:"row",align:"center",justify:"space-between",children:[T.jsx(Pi,{order:5,children:t}),T.jsxs(Ft,{direction:"row",align:"center",children:[T.jsx(Je,{mt:-2,size:"sm",children:"Participants: "}),T.jsx(Ao.Group,{defaultValue:["completed","inprogress","rejected"],onChange:b,mb:"xs",mt:8,ml:"xs",children:T.jsxs(Ti,{children:[T.jsx(Ao,{value:"completed",label:"Completed"}),T.jsx(Ao,{value:"inprogress",label:"In Progress"}),T.jsx(Ao,{value:"rejected",label:"Rejected"})]})})]})]}),T.jsx(al,{h:"xs"}),T.jsxs(Un,{variant:"outline",value:c,onChange:w=>l(`/analysis/stats/${t}/${w}`),style:{height:"100%"},children:[T.jsxs(Un.List,{children:[T.jsx(Un.Tab,{value:"table",leftSection:T.jsx(pze,{size:16}),children:"Table View"}),T.jsx(Un.Tab,{value:"stats",leftSection:T.jsx(Y7e,{size:16}),children:"Trial Stats"}),T.jsx(Un.Tab,{value:"replay",leftSection:T.jsx(aze,{size:16}),children:"Participant Replay"}),T.jsx(Un.Tab,{value:"manage",leftSection:T.jsx(_ge,{size:16}),disabled:!d.isAdmin,children:"Manage"})]}),T.jsx(Un.Panel,{value:"table",pt:"xs",children:i&&T.jsx(fVt,{visibleParticipants:h,studyConfig:i,refresh:f})}),T.jsx(Un.Panel,{value:"stats",pt:"xs",children:i&&T.jsx(bVt,{studyConfig:i,visibleParticipants:h})}),T.jsx(Un.Panel,{value:"replay",pt:"xs",children:T.jsx(_Vt,{visibleParticipants:h,studyConfig:i})}),T.jsx(Un.Panel,{value:"manage",pt:"xs",children:t&&d.isAdmin?T.jsx(mVt,{studyId:t,refresh:f}):T.jsx(_p,{mt:20,children:T.jsx(up,{title:"Unauthorized Access",variant:"light",color:"red",icon:T.jsx(iH,{}),children:"You are not authorized to manage the data for this study."})})})]})]})})]})}function rpe({children:e,paramToCheck:t,paramCallback:n}){const{user:r,verifyAdminStatus:i,logout:s}=rE(),{storageEngine:o}=Mi(),[a,u]=D.useState(!1),l=Va();return D.useEffect(()=>{(async()=>{if(a===!1)if(t&&n&&l[t]){const d=await n(l[t]);d&&u(d)}else u(!0);if(a)try{r&&await i(r)||s()}catch(d){s(),console.warn(d)}})()},[r.isAdmin,a]),r.determiningStatus||!o?T.jsx(fl,{visible:r.determiningStatus||!(o!=null&&o.getEngine())}):a&&!r.isAdmin&&!r.determiningStatus?T.jsx(ZV,{to:"/login"}):T.jsx(T.Fragment,{children:e})}async function tNe(e,t){if(e instanceof Ul){t(!0);const n=new Wh,r=n3();try{await brt(r,n,Fve)}catch(i){dC({title:"Error",message:i.message,color:"red"})}finally{t(!1)}return r.currentUser}return null}function CVt(){const{user:e}=rE(),[t,n]=D.useState(!1),{storageEngine:r}=Mi();return D.useEffect(()=>{!e.determiningStatus&&!e.isAdmin&&e.adminVerification&&dC({title:"Unauthorized",message:"You are not authorized to use this application.",color:"red"})},[e.adminVerification]),!e.determiningStatus&&e.isAdmin?T.jsx(ZV,{to:"/"}):T.jsx(_p,{children:T.jsx(j1,{padding:"lg",children:T.jsxs(Ft,{align:"center",direction:"column",justify:"center",children:[T.jsx(rg,{maw:200,mt:50,mb:100,src:`${rs}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),T.jsxs(T.Fragment,{children:[T.jsx(Je,{mb:20,children:"To access admin settings, please sign in using your Google account."}),T.jsx(tn,{onClick:()=>tNe(r,n),leftSection:T.jsx(mze,{}),variant:"filled",children:"Sign In With Google"})]}),T.jsx(fl,{visible:t})]})})})}function SVt(){const{user:e,triggerAuth:t,logout:n}=rE(),{storageEngine:r}=Mi(),[i,s]=D.useState(!1),[o,a]=D.useState([]),[u,l]=D.useState(!1),[c,d]=D.useState(!1),[f,h]=D.useState(!1),[p,m]=D.useState(!1),[y,v]=D.useState(!1),[b,w]=D.useState(""),[E,_]=D.useState(null),C=STe({initialValues:{email:""},validate:{email:j1t("Invalid email")}});D.useEffect(()=>{(async()=>{if(l(!0),r instanceof Ul){const z=await(r==null?void 0:r.getUserManagementData("authentication"));s((z==null?void 0:z.isEnabled)||!1);const q=await(r==null?void 0:r.getUserManagementData("adminUsers"));q&&q.adminUsersList&&a(q==null?void 0:q.adminUsersList.map(W=>W.email))}else s(!1);l(!1)})()},[r]);const S=async()=>{if(l(!0),r instanceof Ul){const $=await tNe(r,l);$&&$.email?(_({email:$.email,uid:$.uid}),m(!0)):v(!0)}l(!1)},k=async $=>{l(!0),r instanceof Ul&&$&&(await r.changeAuth(!0),await r.addAdminUser($),a([$.email]),s(!0),t()),m(!1),l(!1)},R=async()=>{if(l(!0),r instanceof Ul){await r.addAdminUser({email:C.values.email,uid:null});const $=await r.getUserManagementData("adminUsers");a(($==null?void 0:$.adminUsersList.map(z=>z.email))||[])}l(!1),d(!1),C.setValues({email:""})},N=$=>{h(!0),w($)},O=async()=>{if(l(!0),r instanceof Ul){await r.removeAdminUser(b);const $=await r.getUserManagementData("adminUsers");a(($==null?void 0:$.adminUsersList.map(z=>z.email))||[])}h(!1),l(!1)},F=D.useMemo(()=>r instanceof Ul,[r]);return T.jsxs(T.Fragment,{children:[T.jsx(_p,{children:T.jsxs(j1,{withBorder:!0,style:{backgroundColor:"#FAFAFA"},children:[T.jsx(Pi,{mb:20,order:3,children:"Authentication"}),i?T.jsx(Ft,{children:T.jsx(Je,{children:"Authentication is enabled."})}):T.jsxs(Ft,{justify:"space-between",children:[T.jsx(Se,{children:T.jsx(Je,{children:"Authentication is currently disabled."})}),T.jsx(jr,{label:"You can only enable auth when using Firebase",disabled:F,children:T.jsx(tn,{onClick:$=>F?S():$.preventDefault(),color:"green","data-disabled":F?void 0:!0,style:{"&[dataDisabled]":{pointerEvents:"all"}},children:"Enable Authentication"})})]}),i?T.jsxs(Ft,{mt:40,direction:"column",children:[T.jsxs(Ft,{style:{borderBottom:"1px solid #dedede"},direction:"row",justify:"space-between",mb:15,pb:15,children:[T.jsx(Pi,{order:6,children:"Enabled Users"}),T.jsx(sH,{style:{cursor:"pointer"},onClick:()=>d(!0)})]}),o.length>0?o.map($=>{var z;return T.jsxs(Ft,{justify:"space-between",mb:10,children:[T.jsx(Je,{children:$}),$===((z=e.user)==null?void 0:z.email)?T.jsx(Je,{color:"blue",size:"xs",children:"You"}):T.jsx(eg,{variant:"subtle",onClick:()=>N($),children:T.jsx(Cge,{color:"red"})})]},$)}):null,T.jsx(Ft,{direction:"row",justify:"left",children:T.jsx(tn,{onClick:()=>n(),mt:20,children:"Log out"})})]}):null]})}),T.jsx(Ei,{opened:c,onClose:()=>d(!1),title:"Add Admin User",children:T.jsxs(Se,{component:"form",onSubmit:C.onSubmit(()=>R()),children:[T.jsx(Xh,{leftSection:T.jsx(H7e,{}),placeholder:"User Gmail Account",...C.getInputProps("email")}),T.jsxs(Ft,{mt:30,justify:"right",children:[T.jsx(tn,{mr:5,variant:"subtle",color:"red",onClick:()=>d(!1),children:"Cancel"}),T.jsx(tn,{type:"submit",children:"Save"})]})]})}),T.jsxs(Ei,{opened:f,size:"large",onClose:()=>h(!1),title:T.jsxs(Je,{fw:700,children:["Remove",b,"?"]}),children:[T.jsxs(Je,{mt:40,children:["Are you sure you want to remove",T.jsx("b",{children:b})," ","as an administrator?"]}),T.jsxs(Ft,{mt:40,justify:"right",children:[T.jsx(tn,{mr:5,variant:"subtle",color:"red",onClick:()=>h(!1),children:"Cancel"}),T.jsx(tn,{onClick:()=>O(),children:"Yes, I'm sure."})]})]}),T.jsxs(Ei,{opened:p,size:"md",onClose:()=>m(!1),title:T.jsx(Je,{fw:700,children:"Enable Authentication?"}),children:[T.jsxs(Je,{mt:40,children:["User"," ",T.jsx("b",{children:E==null?void 0:E.email})," ","will be added as an administrator to this application. After enabling authentication, you'll be able to add additional users below. This action cannot be undone."]}),T.jsxs(Ft,{mt:40,justify:"right",children:[T.jsx(tn,{mr:5,variant:"subtle",color:"red",onClick:()=>m(!1),children:"Cancel"}),T.jsx(tn,{onClick:()=>k(E),children:"Yes, I'm sure."})]})]}),T.jsxs(Ei,{opened:y,size:"md",onClose:()=>v(!1),title:T.jsx(Je,{fw:700,children:"An Error Occurred."}),children:[T.jsxs(Je,{mt:40,children:["An error has occurred when trying to enable authentication. Please consult the"," ",T.jsx("a",{href:"https://revisit.dev/docs/data-and-deployment/authentication-authorization/adding-removing-ui/",target:"_blank",rel:"noreferrer",children:"documentation"})," ","for more information."]}),T.jsx(Ft,{mt:40,justify:"right",children:T.jsx(tn,{mr:5,onClick:()=>v(!1),children:"Okay"})})]}),T.jsx(fl,{visible:u})]})}class AVt extends Bve{constructor(){super("localStorage");Wo(this,"studyDatabase");Wo(this,"studyId")}async connect(){this.connected=!0}async initializeStudyDb(n,r){this.studyId=n,this.studyDatabase=await Dv.createInstance({name:n});const i=await this.getCurrentConfigHash(),s=await i3(JSON.stringify(r));i&&i!==s&&(await this.studyDatabase.removeItem("sequenceArray"),await this.clearCurrentParticipantId()),this.studyDatabase.setItem("currentConfigHash",s);const o=await this.studyDatabase.getItem("configs");await this.studyDatabase.setItem("configs",{...o,[s]:r})}getAudio(n,r){return console.warn("not yet implemented",r),Promise.resolve(void 0)}async saveAudio(n){return console.warn("not yet implemented",n),Promise.resolve()}async initializeParticipantSession(n,r,i,s,o){var h;if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(await this.getCurrentParticipantId(o),!this.currentParticipantId)throw new Error("Participant not initialized");const a=await this.studyDatabase.getItem(this.currentParticipantId);if(a)return a;const u=await this.getModes(n),l=await i3(JSON.stringify(i)),{currentRow:c,creationIndex:d}=await this.getSequence(),f={participantId:this.currentParticipantId,participantConfigHash:l,sequence:c,participantIndex:d,answers:{},searchParams:r,metadata:s,completed:!1,rejected:!1,participantTags:[]};return u.dataCollectionEnabled&&await((h=this.studyDatabase)==null?void 0:h.setItem(this.currentParticipantId,f)),f}async getCurrentConfigHash(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");return await this.studyDatabase.getItem("currentConfigHash")}async getAllConfigsFromHash(n,r){return await Dv.createInstance({name:r}).getItem("configs")||{}}async getCurrentParticipantId(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const r=await this.studyDatabase.getItem("currentParticipant");if(n)return this.currentParticipantId=n,await this.studyDatabase.setItem("currentParticipant",n),n;if(r)return this.currentParticipantId=r,r;const i=r3();return await this.studyDatabase.setItem("currentParticipant",i),this.currentParticipantId=i,i}async clearCurrentParticipantId(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");await this.studyDatabase.removeItem("currentParticipant")}async saveAnswers(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const r=await this.studyDatabase.getItem(this.currentParticipantId);if(!r)throw new Error("Participant not initialized");r.answers=n,await this.studyDatabase.setItem(this.currentParticipantId,r)}async setSequenceArray(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");this.studyDatabase.setItem("sequenceArray",n)}async getSequence(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.studyDatabase.getItem("sequenceArray");if(!n)throw new Error("Latin square not initialized");if(!this.studyId)throw new Error("Study ID not initialized");const r=await this.getModes(this.studyId),i=r.dataCollectionEnabled?n.pop():n[Math.floor(Math.random()*n.length-1)];if(!i)throw new Error("Latin square is empty");return r.dataCollectionEnabled&&await this.studyDatabase.setItem("sequenceArray",n),{currentRow:i,creationIndex:1e3-n.length}}async getSequenceArray(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");return await this.studyDatabase.getItem("sequenceArray")}async getAllParticipantsData(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=[];return await this.studyDatabase.iterate((r,i)=>{i!=="config"&&i!=="currentParticipant"&&i!=="sequenceArray"&&i!=="configs"&&i!=="currentConfigHash"&&i!=="modes"&&n.push(r)}),n}async getAllParticipantsDataByStudy(n){const r=Dv.createInstance({name:n}),i=[];return await r.iterate((s,o)=>{o!=="config"&&o!=="currentParticipant"&&o!=="sequenceArray"&&o!=="configs"&&o!=="currentConfigHash"&&o!=="modes"&&i.push(s)}),i}async getParticipantData(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const r=n||await this.studyDatabase.getItem("currentParticipant");return r?await this.studyDatabase.getItem(r):null}async getParticipantTags(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.getParticipantData();if(!n)throw new Error("Participant not initialized");return n.participantTags}async addParticipantTags(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const r=await this.getParticipantData();if(!r)throw new Error("Participant not initialized");r.participantTags=[...new Set([...r.participantTags,...n])],await this.studyDatabase.setItem(this.currentParticipantId,r)}async removeParticipantTags(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const r=await this.getParticipantData();if(!r)throw new Error("Participant not initialized");r.participantTags=r.participantTags.filter(i=>!n.includes(i)),await this.studyDatabase.setItem(this.currentParticipantId,r)}async nextParticipant(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=r3();await this.studyDatabase.setItem("currentParticipant",n)}async verifyCompletion(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.getParticipantData();if(!n)throw new Error("Participant not initialized");return n.completed||(n.completed=!0,await this.studyDatabase.setItem(this.currentParticipantId,n)),!0}async validateUser(n){return!0}async rejectParticipant(n,r,i){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const s=await this.studyDatabase.getItem(r);if(!s)throw new Error("Participant not found");if(s.rejected)return;s.rejected={reason:i,timestamp:new Date().getTime()};const o=await this.studyDatabase.getItem("sequenceArray");o&&(o.unshift(s.sequence),this.setSequenceArray(o)),await this.studyDatabase.setItem(r,s)}async rejectCurrentParticipant(n,r){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");await this.rejectParticipant(n,this.currentParticipantId,r)}async setMode(n,r,i){this.studyDatabase=await Dv.createInstance({name:n});const s=await this.studyDatabase.getItem("modes");if(!s)throw new Error("Modes not initialized");s[r]=i,this.studyDatabase.setItem("modes",s)}async getModes(n){this.studyDatabase=await Dv.createInstance({name:n});const r=await this.studyDatabase.getItem("modes");if(r)return r;const i={dataCollectionEnabled:!0,studyNavigatorEnabled:!0,analyticsInterfacePubliclyAccessible:!0};return this.studyDatabase.setItem("modes",i),i}async getParticipantsStatusCounts(n){const r=await this.getAllParticipantsDataByStudy(n),i=r.filter(l=>l.completed&&!l.rejected).length,s=r.filter(l=>l.rejected).length,o=r.filter(l=>!l.completed&&!l.rejected).length,a=Math.min(...r.map(l=>Math.min(...Object.values(l.answers).map(c=>c.startTime)))),u=Math.max(...r.map(l=>Math.max(...Object.values(l.answers).map(c=>c.endTime))));return{completed:i,rejected:s,inProgress:o,minTime:a===1/0?null:a,maxTime:u===-1/0?null:u}}_verifyStudyDatabase(n){return n!==void 0}}async function kVt(){let e,t=!1;{const n=new Ul;await n.connect(),n.isConnected()?e=n:t=!0}if(t){const n=new AVt;await n.connect(),e=n}return e}function Z_({title:e}){const t=fc();return D.useEffect(()=>{document.title=e},[t,e]),null}async function IVt(){const t=await(await fetch(`${rs}global.json`)).text();return sVt(t)}function RVt(){const[e,t]=D.useState(null),[n,r]=D.useState({});D.useEffect(()=>{async function a(){e&&r(await uVt(e))}a()},[e]),D.useEffect(()=>{e||IVt().then(a=>{t(a)})},[e]);const{storageEngine:i,setStorageEngine:s}=Mi();D.useEffect(()=>{if(i!==void 0)return;async function a(){const u=await kVt();s(u)}a()},[s,i]);const o=async a=>i instanceof Ul?!(await i.getModes(a)).analyticsInterfacePubliclyAccessible:!1;return e?T.jsx(T7e,{basename:rs,children:T.jsx(bit,{children:T.jsx(B7e,{children:T.jsxs(Zje,{children:[T.jsx(oy,{path:"/",element:T.jsxs(T.Fragment,{children:[T.jsx(Z_,{title:"ReVISit | Home"}),T.jsxs(Or,{padding:"md",header:{height:70},children:[T.jsx(EP,{studyIds:e.configsList}),T.jsx(xit,{globalConfig:e,studyConfigs:n})]})]})}),T.jsx(oy,{path:"/:studyId/*",element:T.jsxs(T.Fragment,{children:[T.jsx(Z_,{title:"ReVISit | Study"}),T.jsx(lVt,{globalConfig:e})]})}),T.jsx(oy,{path:"/analysis/stats/:studyId/:analysisTab/:trialId?",element:T.jsxs(T.Fragment,{children:[T.jsx(Z_,{title:"ReVISit | Analysis"}),T.jsx(rpe,{paramToCheck:"studyId",paramCallback:o,children:T.jsx(Or,{padding:"md",header:{height:70},children:T.jsx(TVt,{globalConfig:e})})})]})}),T.jsx(oy,{path:"/analysis/stats/:studyId",element:T.jsx(D3e,{to:"./table",replace:!0})}),T.jsx(oy,{path:"/settings",element:T.jsxs(rpe,{children:[T.jsx(Z_,{title:"ReVISit | Settings"}),T.jsxs(Or,{padding:"md",header:{height:70},children:[T.jsx(EP,{studyIds:e.configsList}),T.jsx(Or.Main,{children:T.jsx(SVt,{})})]})]})}),T.jsx(oy,{path:"/login",element:T.jsxs(T.Fragment,{children:[T.jsx(Z_,{title:"ReVISit | Login"}),T.jsxs(Or,{padding:"md",header:{height:70},children:[T.jsx(EP,{studyIds:e.configsList}),T.jsx(Or.Main,{children:T.jsx(CVt,{})})]})]})})]})})})}):null}b4e.createRoot(document.getElementById("root")).render(T.jsx(rr.StrictMode,{children:T.jsx(uje,{children:T.jsxs(Spe,{children:[T.jsx(Yp,{}),T.jsx(RVt,{})]})})}))});export default DVt();
