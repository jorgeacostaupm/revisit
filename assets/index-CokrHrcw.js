var wNe=Object.defineProperty;var xNe=(e,t,n)=>t in e?wNe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Wa=(e,t,n)=>xNe(e,typeof t!="symbol"?t+"":t,n);function ENe(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var cs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function vl(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function tpe(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var w8={exports:{}},JE={},x8={exports:{}},An={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nee;function _Ne(){if(nee)return An;nee=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),c=Symbol.for("react.lazy"),d=Symbol.iterator;function f(j){return j===null||typeof j!="object"?null:(j=d&&j[d]||j["@@iterator"],typeof j=="function"?j:null)}var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p=Object.assign,m={};function g(j,V,z){this.props=j,this.context=V,this.refs=m,this.updater=z||h}g.prototype.isReactComponent={},g.prototype.setState=function(j,V){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,V,"setState")},g.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function b(){}b.prototype=g.prototype;function v(j,V,z){this.props=j,this.context=V,this.refs=m,this.updater=z||h}var x=v.prototype=new b;x.constructor=v,p(x,g.prototype),x.isPureReactComponent=!0;var E=Array.isArray,_=Object.prototype.hasOwnProperty,C={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function k(j,V,z){var G,Q={},ie=null,me=null;if(V!=null)for(G in V.ref!==void 0&&(me=V.ref),V.key!==void 0&&(ie=""+V.key),V)_.call(V,G)&&!S.hasOwnProperty(G)&&(Q[G]=V[G]);var ae=arguments.length-2;if(ae===1)Q.children=z;else if(1<ae){for(var fe=Array(ae),be=0;be<ae;be++)fe[be]=arguments[be+2];Q.children=fe}if(j&&j.defaultProps)for(G in ae=j.defaultProps,ae)Q[G]===void 0&&(Q[G]=ae[G]);return{$$typeof:e,type:j,key:ie,ref:me,props:Q,_owner:C.current}}function R(j,V){return{$$typeof:e,type:j.type,key:V,ref:j.ref,props:j.props,_owner:j._owner}}function O(j){return typeof j=="object"&&j!==null&&j.$$typeof===e}function N(j){var V={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(z){return V[z]})}var L=/\/+/g;function $(j,V){return typeof j=="object"&&j!==null&&j.key!=null?N(""+j.key):V.toString(36)}function B(j,V,z,G,Q){var ie=typeof j;(ie==="undefined"||ie==="boolean")&&(j=null);var me=!1;if(j===null)me=!0;else switch(ie){case"string":case"number":me=!0;break;case"object":switch(j.$$typeof){case e:case t:me=!0}}if(me)return me=j,Q=Q(me),j=G===""?"."+$(me,0):G,E(Q)?(z="",j!=null&&(z=j.replace(L,"$&/")+"/"),B(Q,V,z,"",function(be){return be})):Q!=null&&(O(Q)&&(Q=R(Q,z+(!Q.key||me&&me.key===Q.key?"":(""+Q.key).replace(L,"$&/")+"/")+j)),V.push(Q)),1;if(me=0,G=G===""?".":G+":",E(j))for(var ae=0;ae<j.length;ae++){ie=j[ae];var fe=G+$(ie,ae);me+=B(ie,V,z,fe,Q)}else if(fe=f(j),typeof fe=="function")for(j=fe.call(j),ae=0;!(ie=j.next()).done;)ie=ie.value,fe=G+$(ie,ae++),me+=B(ie,V,z,fe,Q);else if(ie==="object")throw V=String(j),Error("Objects are not valid as a React child (found: "+(V==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":V)+"). If you meant to render a collection of children, use an array instead.");return me}function H(j,V,z){if(j==null)return j;var G=[],Q=0;return B(j,G,"","",function(ie){return V.call(z,ie,Q++)}),G}function Y(j){if(j._status===-1){var V=j._result;V=V(),V.then(function(z){(j._status===0||j._status===-1)&&(j._status=1,j._result=z)},function(z){(j._status===0||j._status===-1)&&(j._status=2,j._result=z)}),j._status===-1&&(j._status=0,j._result=V)}if(j._status===1)return j._result.default;throw j._result}var J={current:null},K={transition:null},Z={ReactCurrentDispatcher:J,ReactCurrentBatchConfig:K,ReactCurrentOwner:C};function U(){throw Error("act(...) is not supported in production builds of React.")}return An.Children={map:H,forEach:function(j,V,z){H(j,function(){V.apply(this,arguments)},z)},count:function(j){var V=0;return H(j,function(){V++}),V},toArray:function(j){return H(j,function(V){return V})||[]},only:function(j){if(!O(j))throw Error("React.Children.only expected to receive a single React element child.");return j}},An.Component=g,An.Fragment=n,An.Profiler=i,An.PureComponent=v,An.StrictMode=r,An.Suspense=l,An.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Z,An.act=U,An.cloneElement=function(j,V,z){if(j==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+j+".");var G=p({},j.props),Q=j.key,ie=j.ref,me=j._owner;if(V!=null){if(V.ref!==void 0&&(ie=V.ref,me=C.current),V.key!==void 0&&(Q=""+V.key),j.type&&j.type.defaultProps)var ae=j.type.defaultProps;for(fe in V)_.call(V,fe)&&!S.hasOwnProperty(fe)&&(G[fe]=V[fe]===void 0&&ae!==void 0?ae[fe]:V[fe])}var fe=arguments.length-2;if(fe===1)G.children=z;else if(1<fe){ae=Array(fe);for(var be=0;be<fe;be++)ae[be]=arguments[be+2];G.children=ae}return{$$typeof:e,type:j.type,key:Q,ref:ie,props:G,_owner:me}},An.createContext=function(j){return j={$$typeof:o,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},j.Provider={$$typeof:s,_context:j},j.Consumer=j},An.createElement=k,An.createFactory=function(j){var V=k.bind(null,j);return V.type=j,V},An.createRef=function(){return{current:null}},An.forwardRef=function(j){return{$$typeof:a,render:j}},An.isValidElement=O,An.lazy=function(j){return{$$typeof:c,_payload:{_status:-1,_result:j},_init:Y}},An.memo=function(j,V){return{$$typeof:u,type:j,compare:V===void 0?null:V}},An.startTransition=function(j){var V=K.transition;K.transition={};try{j()}finally{K.transition=V}},An.unstable_act=U,An.useCallback=function(j,V){return J.current.useCallback(j,V)},An.useContext=function(j){return J.current.useContext(j)},An.useDebugValue=function(){},An.useDeferredValue=function(j){return J.current.useDeferredValue(j)},An.useEffect=function(j,V){return J.current.useEffect(j,V)},An.useId=function(){return J.current.useId()},An.useImperativeHandle=function(j,V,z){return J.current.useImperativeHandle(j,V,z)},An.useInsertionEffect=function(j,V){return J.current.useInsertionEffect(j,V)},An.useLayoutEffect=function(j,V){return J.current.useLayoutEffect(j,V)},An.useMemo=function(j,V){return J.current.useMemo(j,V)},An.useReducer=function(j,V,z){return J.current.useReducer(j,V,z)},An.useRef=function(j){return J.current.useRef(j)},An.useState=function(j){return J.current.useState(j)},An.useSyncExternalStore=function(j,V,z){return J.current.useSyncExternalStore(j,V,z)},An.useTransition=function(){return J.current.useTransition()},An.version="18.3.1",An}var ree;function qN(){return ree||(ree=1,x8.exports=_Ne()),x8.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iee;function TNe(){if(iee)return JE;iee=1;var e=qN(),t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(a,l,u){var c,d={},f=null,h=null;u!==void 0&&(f=""+u),l.key!==void 0&&(f=""+l.key),l.ref!==void 0&&(h=l.ref);for(c in l)r.call(l,c)&&!s.hasOwnProperty(c)&&(d[c]=l[c]);if(a&&a.defaultProps)for(c in l=a.defaultProps,l)d[c]===void 0&&(d[c]=l[c]);return{$$typeof:t,type:a,key:f,ref:h,props:d,_owner:i.current}}return JE.Fragment=n,JE.jsx=o,JE.jsxs=o,JE}var see;function CNe(){return see||(see=1,w8.exports=TNe()),w8.exports}var T=CNe(),D=qN();const Jn=vl(D),SNe=ENe({__proto__:null,default:Jn},[D]);var fk={},E8={exports:{}},Va={},_8={exports:{}},T8={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oee;function ANe(){return oee||(oee=1,function(e){function t(K,Z){var U=K.length;K.push(Z);e:for(;0<U;){var j=U-1>>>1,V=K[j];if(0<i(V,Z))K[j]=Z,K[U]=V,U=j;else break e}}function n(K){return K.length===0?null:K[0]}function r(K){if(K.length===0)return null;var Z=K[0],U=K.pop();if(U!==Z){K[0]=U;e:for(var j=0,V=K.length,z=V>>>1;j<z;){var G=2*(j+1)-1,Q=K[G],ie=G+1,me=K[ie];if(0>i(Q,U))ie<V&&0>i(me,Q)?(K[j]=me,K[ie]=U,j=ie):(K[j]=Q,K[G]=U,j=G);else if(ie<V&&0>i(me,U))K[j]=me,K[ie]=U,j=ie;else break e}}return Z}function i(K,Z){var U=K.sortIndex-Z.sortIndex;return U!==0?U:K.id-Z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,d=null,f=3,h=!1,p=!1,m=!1,g=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(K){for(var Z=n(u);Z!==null;){if(Z.callback===null)r(u);else if(Z.startTime<=K)r(u),Z.sortIndex=Z.expirationTime,t(l,Z);else break;Z=n(u)}}function E(K){if(m=!1,x(K),!p)if(n(l)!==null)p=!0,Y(_);else{var Z=n(u);Z!==null&&J(E,Z.startTime-K)}}function _(K,Z){p=!1,m&&(m=!1,b(k),k=-1),h=!0;var U=f;try{for(x(Z),d=n(l);d!==null&&(!(d.expirationTime>Z)||K&&!N());){var j=d.callback;if(typeof j=="function"){d.callback=null,f=d.priorityLevel;var V=j(d.expirationTime<=Z);Z=e.unstable_now(),typeof V=="function"?d.callback=V:d===n(l)&&r(l),x(Z)}else r(l);d=n(l)}if(d!==null)var z=!0;else{var G=n(u);G!==null&&J(E,G.startTime-Z),z=!1}return z}finally{d=null,f=U,h=!1}}var C=!1,S=null,k=-1,R=5,O=-1;function N(){return!(e.unstable_now()-O<R)}function L(){if(S!==null){var K=e.unstable_now();O=K;var Z=!0;try{Z=S(!0,K)}finally{Z?$():(C=!1,S=null)}}else C=!1}var $;if(typeof v=="function")$=function(){v(L)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,H=B.port2;B.port1.onmessage=L,$=function(){H.postMessage(null)}}else $=function(){g(L,0)};function Y(K){S=K,C||(C=!0,$())}function J(K,Z){k=g(function(){K(e.unstable_now())},Z)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(K){K.callback=null},e.unstable_continueExecution=function(){p||h||(p=!0,Y(_))},e.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<K?Math.floor(1e3/K):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(K){switch(f){case 1:case 2:case 3:var Z=3;break;default:Z=f}var U=f;f=Z;try{return K()}finally{f=U}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(K,Z){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var U=f;f=K;try{return Z()}finally{f=U}},e.unstable_scheduleCallback=function(K,Z,U){var j=e.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?j+U:j):U=j,K){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=U+V,K={id:c++,callback:Z,priorityLevel:K,startTime:U,expirationTime:V,sortIndex:-1},U>j?(K.sortIndex=U,t(u,K),n(l)===null&&K===n(u)&&(m?(b(k),k=-1):m=!0,J(E,U-j))):(K.sortIndex=V,t(l,K),p||h||(p=!0,Y(_))),K},e.unstable_shouldYield=N,e.unstable_wrapCallback=function(K){var Z=f;return function(){var U=f;f=Z;try{return K.apply(this,arguments)}finally{f=U}}}}(T8)),T8}var aee;function kNe(){return aee||(aee=1,_8.exports=ANe()),_8.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lee;function INe(){if(lee)return Va;lee=1;var e=qN(),t=kNe();function n(y){for(var w="https://reactjs.org/docs/error-decoder.html?invariant="+y,A=1;A<arguments.length;A++)w+="&args[]="+encodeURIComponent(arguments[A]);return"Minified React error #"+y+"; visit "+w+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function s(y,w){o(y,w),o(y+"Capture",w)}function o(y,w){for(i[y]=w,y=0;y<w.length;y++)r.add(w[y])}var a=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),l=Object.prototype.hasOwnProperty,u=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,c={},d={};function f(y){return l.call(d,y)?!0:l.call(c,y)?!1:u.test(y)?d[y]=!0:(c[y]=!0,!1)}function h(y,w,A,P){if(A!==null&&A.type===0)return!1;switch(typeof w){case"function":case"symbol":return!0;case"boolean":return P?!1:A!==null?!A.acceptsBooleans:(y=y.toLowerCase().slice(0,5),y!=="data-"&&y!=="aria-");default:return!1}}function p(y,w,A,P){if(w===null||typeof w>"u"||h(y,w,A,P))return!0;if(P)return!1;if(A!==null)switch(A.type){case 3:return!w;case 4:return w===!1;case 5:return isNaN(w);case 6:return isNaN(w)||1>w}return!1}function m(y,w,A,P,F,W,ee){this.acceptsBooleans=w===2||w===3||w===4,this.attributeName=P,this.attributeNamespace=F,this.mustUseProperty=A,this.propertyName=y,this.type=w,this.sanitizeURL=W,this.removeEmptyString=ee}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(y){g[y]=new m(y,0,!1,y,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(y){var w=y[0];g[w]=new m(w,1,!1,y[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(y){g[y]=new m(y,2,!1,y.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(y){g[y]=new m(y,2,!1,y,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(y){g[y]=new m(y,3,!1,y.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(y){g[y]=new m(y,3,!0,y,null,!1,!1)}),["capture","download"].forEach(function(y){g[y]=new m(y,4,!1,y,null,!1,!1)}),["cols","rows","size","span"].forEach(function(y){g[y]=new m(y,6,!1,y,null,!1,!1)}),["rowSpan","start"].forEach(function(y){g[y]=new m(y,5,!1,y.toLowerCase(),null,!1,!1)});var b=/[\-:]([a-z])/g;function v(y){return y[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(y){var w=y.replace(b,v);g[w]=new m(w,1,!1,y,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(y){var w=y.replace(b,v);g[w]=new m(w,1,!1,y,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(y){var w=y.replace(b,v);g[w]=new m(w,1,!1,y,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(y){g[y]=new m(y,1,!1,y.toLowerCase(),null,!1,!1)}),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(y){g[y]=new m(y,1,!1,y.toLowerCase(),null,!0,!0)});function x(y,w,A,P){var F=g.hasOwnProperty(w)?g[w]:null;(F!==null?F.type!==0:P||!(2<w.length)||w[0]!=="o"&&w[0]!=="O"||w[1]!=="n"&&w[1]!=="N")&&(p(w,A,F,P)&&(A=null),P||F===null?f(w)&&(A===null?y.removeAttribute(w):y.setAttribute(w,""+A)):F.mustUseProperty?y[F.propertyName]=A===null?F.type===3?!1:"":A:(w=F.attributeName,P=F.attributeNamespace,A===null?y.removeAttribute(w):(F=F.type,A=F===3||F===4&&A===!0?"":""+A,P?y.setAttributeNS(P,w,A):y.setAttribute(w,A))))}var E=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=Symbol.for("react.element"),C=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),O=Symbol.for("react.provider"),N=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),$=Symbol.for("react.suspense"),B=Symbol.for("react.suspense_list"),H=Symbol.for("react.memo"),Y=Symbol.for("react.lazy"),J=Symbol.for("react.offscreen"),K=Symbol.iterator;function Z(y){return y===null||typeof y!="object"?null:(y=K&&y[K]||y["@@iterator"],typeof y=="function"?y:null)}var U=Object.assign,j;function V(y){if(j===void 0)try{throw Error()}catch(A){var w=A.stack.trim().match(/\n( *(at )?)/);j=w&&w[1]||""}return`
`+j+y}var z=!1;function G(y,w){if(!y||z)return"";z=!0;var A=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(w)if(w=function(){throw Error()},Object.defineProperty(w.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(w,[])}catch(Le){var P=Le}Reflect.construct(y,[],w)}else{try{w.call()}catch(Le){P=Le}y.call(w.prototype)}else{try{throw Error()}catch(Le){P=Le}y()}}catch(Le){if(Le&&P&&typeof Le.stack=="string"){for(var F=Le.stack.split(`
`),W=P.stack.split(`
`),ee=F.length-1,he=W.length-1;1<=ee&&0<=he&&F[ee]!==W[he];)he--;for(;1<=ee&&0<=he;ee--,he--)if(F[ee]!==W[he]){if(ee!==1||he!==1)do if(ee--,he--,0>he||F[ee]!==W[he]){var ve=`
`+F[ee].replace(" at new "," at ");return y.displayName&&ve.includes("<anonymous>")&&(ve=ve.replace("<anonymous>",y.displayName)),ve}while(1<=ee&&0<=he);break}}}finally{z=!1,Error.prepareStackTrace=A}return(y=y?y.displayName||y.name:"")?V(y):""}function Q(y){switch(y.tag){case 5:return V(y.type);case 16:return V("Lazy");case 13:return V("Suspense");case 19:return V("SuspenseList");case 0:case 2:case 15:return y=G(y.type,!1),y;case 11:return y=G(y.type.render,!1),y;case 1:return y=G(y.type,!0),y;default:return""}}function ie(y){if(y==null)return null;if(typeof y=="function")return y.displayName||y.name||null;if(typeof y=="string")return y;switch(y){case S:return"Fragment";case C:return"Portal";case R:return"Profiler";case k:return"StrictMode";case $:return"Suspense";case B:return"SuspenseList"}if(typeof y=="object")switch(y.$$typeof){case N:return(y.displayName||"Context")+".Consumer";case O:return(y._context.displayName||"Context")+".Provider";case L:var w=y.render;return y=y.displayName,y||(y=w.displayName||w.name||"",y=y!==""?"ForwardRef("+y+")":"ForwardRef"),y;case H:return w=y.displayName||null,w!==null?w:ie(y.type)||"Memo";case Y:w=y._payload,y=y._init;try{return ie(y(w))}catch{}}return null}function me(y){var w=y.type;switch(y.tag){case 24:return"Cache";case 9:return(w.displayName||"Context")+".Consumer";case 10:return(w._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return y=w.render,y=y.displayName||y.name||"",w.displayName||(y!==""?"ForwardRef("+y+")":"ForwardRef");case 7:return"Fragment";case 5:return w;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ie(w);case 8:return w===k?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof w=="function")return w.displayName||w.name||null;if(typeof w=="string")return w}return null}function ae(y){switch(typeof y){case"boolean":case"number":case"string":case"undefined":return y;case"object":return y;default:return""}}function fe(y){var w=y.type;return(y=y.nodeName)&&y.toLowerCase()==="input"&&(w==="checkbox"||w==="radio")}function be(y){var w=fe(y)?"checked":"value",A=Object.getOwnPropertyDescriptor(y.constructor.prototype,w),P=""+y[w];if(!y.hasOwnProperty(w)&&typeof A<"u"&&typeof A.get=="function"&&typeof A.set=="function"){var F=A.get,W=A.set;return Object.defineProperty(y,w,{configurable:!0,get:function(){return F.call(this)},set:function(ee){P=""+ee,W.call(this,ee)}}),Object.defineProperty(y,w,{enumerable:A.enumerable}),{getValue:function(){return P},setValue:function(ee){P=""+ee},stopTracking:function(){y._valueTracker=null,delete y[w]}}}}function te(y){y._valueTracker||(y._valueTracker=be(y))}function re(y){if(!y)return!1;var w=y._valueTracker;if(!w)return!0;var A=w.getValue(),P="";return y&&(P=fe(y)?y.checked?"true":"false":y.value),y=P,y!==A?(w.setValue(y),!0):!1}function we(y){if(y=y||(typeof document<"u"?document:void 0),typeof y>"u")return null;try{return y.activeElement||y.body}catch{return y.body}}function Ee(y,w){var A=w.checked;return U({},w,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:A??y._wrapperState.initialChecked})}function Fe(y,w){var A=w.defaultValue==null?"":w.defaultValue,P=w.checked!=null?w.checked:w.defaultChecked;A=ae(w.value!=null?w.value:A),y._wrapperState={initialChecked:P,initialValue:A,controlled:w.type==="checkbox"||w.type==="radio"?w.checked!=null:w.value!=null}}function We(y,w){w=w.checked,w!=null&&x(y,"checked",w,!1)}function Me(y,w){We(y,w);var A=ae(w.value),P=w.type;if(A!=null)P==="number"?(A===0&&y.value===""||y.value!=A)&&(y.value=""+A):y.value!==""+A&&(y.value=""+A);else if(P==="submit"||P==="reset"){y.removeAttribute("value");return}w.hasOwnProperty("value")?Je(y,w.type,A):w.hasOwnProperty("defaultValue")&&Je(y,w.type,ae(w.defaultValue)),w.checked==null&&w.defaultChecked!=null&&(y.defaultChecked=!!w.defaultChecked)}function Be(y,w,A){if(w.hasOwnProperty("value")||w.hasOwnProperty("defaultValue")){var P=w.type;if(!(P!=="submit"&&P!=="reset"||w.value!==void 0&&w.value!==null))return;w=""+y._wrapperState.initialValue,A||w===y.value||(y.value=w),y.defaultValue=w}A=y.name,A!==""&&(y.name=""),y.defaultChecked=!!y._wrapperState.initialChecked,A!==""&&(y.name=A)}function Je(y,w,A){(w!=="number"||we(y.ownerDocument)!==y)&&(A==null?y.defaultValue=""+y._wrapperState.initialValue:y.defaultValue!==""+A&&(y.defaultValue=""+A))}var lt=Array.isArray;function ht(y,w,A,P){if(y=y.options,w){w={};for(var F=0;F<A.length;F++)w["$"+A[F]]=!0;for(A=0;A<y.length;A++)F=w.hasOwnProperty("$"+y[A].value),y[A].selected!==F&&(y[A].selected=F),F&&P&&(y[A].defaultSelected=!0)}else{for(A=""+ae(A),w=null,F=0;F<y.length;F++){if(y[F].value===A){y[F].selected=!0,P&&(y[F].defaultSelected=!0);return}w!==null||y[F].disabled||(w=y[F])}w!==null&&(w.selected=!0)}}function vt(y,w){if(w.dangerouslySetInnerHTML!=null)throw Error(n(91));return U({},w,{value:void 0,defaultValue:void 0,children:""+y._wrapperState.initialValue})}function Pe(y,w){var A=w.value;if(A==null){if(A=w.children,w=w.defaultValue,A!=null){if(w!=null)throw Error(n(92));if(lt(A)){if(1<A.length)throw Error(n(93));A=A[0]}w=A}w==null&&(w=""),A=w}y._wrapperState={initialValue:ae(A)}}function wt(y,w){var A=ae(w.value),P=ae(w.defaultValue);A!=null&&(A=""+A,A!==y.value&&(y.value=A),w.defaultValue==null&&y.defaultValue!==A&&(y.defaultValue=A)),P!=null&&(y.defaultValue=""+P)}function Wt(y){var w=y.textContent;w===y._wrapperState.initialValue&&w!==""&&w!==null&&(y.value=w)}function Ce(y){switch(y){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ne(y,w){return y==null||y==="http://www.w3.org/1999/xhtml"?Ce(w):y==="http://www.w3.org/2000/svg"&&w==="foreignObject"?"http://www.w3.org/1999/xhtml":y}var ot,xt=function(y){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(w,A,P,F){MSApp.execUnsafeLocalFunction(function(){return y(w,A,P,F)})}:y}(function(y,w){if(y.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in y)y.innerHTML=w;else{for(ot=ot||document.createElement("div"),ot.innerHTML="<svg>"+w.valueOf().toString()+"</svg>",w=ot.firstChild;y.firstChild;)y.removeChild(y.firstChild);for(;w.firstChild;)y.appendChild(w.firstChild)}});function Ct(y,w){if(w){var A=y.firstChild;if(A&&A===y.lastChild&&A.nodeType===3){A.nodeValue=w;return}}y.textContent=w}var Qt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},yn=["Webkit","ms","Moz","O"];Object.keys(Qt).forEach(function(y){yn.forEach(function(w){w=w+y.charAt(0).toUpperCase()+y.substring(1),Qt[w]=Qt[y]})});function er(y,w,A){return w==null||typeof w=="boolean"||w===""?"":A||typeof w!="number"||w===0||Qt.hasOwnProperty(y)&&Qt[y]?(""+w).trim():w+"px"}function Wr(y,w){y=y.style;for(var A in w)if(w.hasOwnProperty(A)){var P=A.indexOf("--")===0,F=er(A,w[A],P);A==="float"&&(A="cssFloat"),P?y.setProperty(A,F):y[A]=F}}var pn=U({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function En(y,w){if(w){if(pn[y]&&(w.children!=null||w.dangerouslySetInnerHTML!=null))throw Error(n(137,y));if(w.dangerouslySetInnerHTML!=null){if(w.children!=null)throw Error(n(60));if(typeof w.dangerouslySetInnerHTML!="object"||!("__html"in w.dangerouslySetInnerHTML))throw Error(n(61))}if(w.style!=null&&typeof w.style!="object")throw Error(n(62))}}function Mr(y,w){if(y.indexOf("-")===-1)return typeof w.is=="string";switch(y){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var On=null;function bs(y){return y=y.target||y.srcElement||window,y.correspondingUseElement&&(y=y.correspondingUseElement),y.nodeType===3?y.parentNode:y}var Qr=null,Lr=null,Jr=null;function tr(y){if(y=LE(y)){if(typeof Qr!="function")throw Error(n(280));var w=y.stateNode;w&&(w=AA(w),Qr(y.stateNode,y.type,w))}}function Qs(y){Lr?Jr?Jr.push(y):Jr=[y]:Lr=y}function su(){if(Lr){var y=Lr,w=Jr;if(Jr=Lr=null,tr(y),w)for(y=0;y<w.length;y++)tr(w[y])}}function ta(y,w){return y(w)}function El(){}var nr=!1;function Fr(y,w,A){if(nr)return y(w,A);nr=!0;try{return ta(y,w,A)}finally{nr=!1,(Lr!==null||Jr!==null)&&(El(),su())}}function dr(y,w){var A=y.stateNode;if(A===null)return null;var P=AA(A);if(P===null)return null;A=P[w];e:switch(w){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(P=!P.disabled)||(y=y.type,P=!(y==="button"||y==="input"||y==="select"||y==="textarea")),y=!P;break e;default:y=!1}if(y)return null;if(A&&typeof A!="function")throw Error(n(231,w,typeof A));return A}var ws=!1;if(a)try{var Gn={};Object.defineProperty(Gn,"passive",{get:function(){ws=!0}}),window.addEventListener("test",Gn,Gn),window.removeEventListener("test",Gn,Gn)}catch{ws=!1}function li(y,w,A,P,F,W,ee,he,ve){var Le=Array.prototype.slice.call(arguments,3);try{w.apply(A,Le)}catch(it){this.onError(it)}}var xs=!1,Qi=null,Js=!1,_l=null,ih={onError:function(y){xs=!0,Qi=y}};function Yn(y,w,A,P,F,W,ee,he,ve){xs=!1,Qi=null,li.apply(ih,arguments)}function Zu(y,w,A,P,F,W,ee,he,ve){if(Yn.apply(this,arguments),xs){if(xs){var Le=Qi;xs=!1,Qi=null}else throw Error(n(198));Js||(Js=!0,_l=Le)}}function ui(y){var w=y,A=y;if(y.alternate)for(;w.return;)w=w.return;else{y=w;do w=y,(w.flags&4098)!==0&&(A=w.return),y=w.return;while(y)}return w.tag===3?A:null}function Oa(y){if(y.tag===13){var w=y.memoizedState;if(w===null&&(y=y.alternate,y!==null&&(w=y.memoizedState)),w!==null)return w.dehydrated}return null}function Zs(y){if(ui(y)!==y)throw Error(n(188))}function Xp(y){var w=y.alternate;if(!w){if(w=ui(y),w===null)throw Error(n(188));return w!==y?null:y}for(var A=y,P=w;;){var F=A.return;if(F===null)break;var W=F.alternate;if(W===null){if(P=F.return,P!==null){A=P;continue}break}if(F.child===W.child){for(W=F.child;W;){if(W===A)return Zs(F),y;if(W===P)return Zs(F),w;W=W.sibling}throw Error(n(188))}if(A.return!==P.return)A=F,P=W;else{for(var ee=!1,he=F.child;he;){if(he===A){ee=!0,A=F,P=W;break}if(he===P){ee=!0,P=F,A=W;break}he=he.sibling}if(!ee){for(he=W.child;he;){if(he===A){ee=!0,A=W,P=F;break}if(he===P){ee=!0,P=W,A=F;break}he=he.sibling}if(!ee)throw Error(n(189))}}if(A.alternate!==P)throw Error(n(190))}if(A.tag!==3)throw Error(n(188));return A.stateNode.current===A?y:w}function sh(y){return y=Xp(y),y!==null?Sd(y):null}function Sd(y){if(y.tag===5||y.tag===6)return y;for(y=y.child;y!==null;){var w=Sd(y);if(w!==null)return w;y=y.sibling}return null}var Ad=t.unstable_scheduleCallback,ec=t.unstable_cancelCallback,Qp=t.unstable_shouldYield,tc=t.unstable_requestPaint,$n=t.unstable_now,oh=t.unstable_getCurrentPriorityLevel,Ji=t.unstable_ImmediatePriority,Tl=t.unstable_UserBlockingPriority,Zi=t.unstable_NormalPriority,nc=t.unstable_LowPriority,Jp=t.unstable_IdlePriority,ou=null,es=null;function Zp(y){if(es&&typeof es.onCommitFiberRoot=="function")try{es.onCommitFiberRoot(ou,y,void 0,(y.current.flags&128)===128)}catch{}}var ts=Math.clz32?Math.clz32:ue,ne=Math.log,ge=Math.LN2;function ue(y){return y>>>=0,y===0?32:31-(ne(y)/ge|0)|0}var _e=64,Ae=4194304;function xe(y){switch(y&-y){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return y&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return y&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return y}}function Ye(y,w){var A=y.pendingLanes;if(A===0)return 0;var P=0,F=y.suspendedLanes,W=y.pingedLanes,ee=A&268435455;if(ee!==0){var he=ee&~F;he!==0?P=xe(he):(W&=ee,W!==0&&(P=xe(W)))}else ee=A&~F,ee!==0?P=xe(ee):W!==0&&(P=xe(W));if(P===0)return 0;if(w!==0&&w!==P&&(w&F)===0&&(F=P&-P,W=w&-w,F>=W||F===16&&(W&4194240)!==0))return w;if((P&4)!==0&&(P|=A&16),w=y.entangledLanes,w!==0)for(y=y.entanglements,w&=P;0<w;)A=31-ts(w),F=1<<A,P|=y[A],w&=~F;return P}function et(y,w){switch(y){case 1:case 2:case 4:return w+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return w+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function nt(y,w){for(var A=y.suspendedLanes,P=y.pingedLanes,F=y.expirationTimes,W=y.pendingLanes;0<W;){var ee=31-ts(W),he=1<<ee,ve=F[ee];ve===-1?((he&A)===0||(he&P)!==0)&&(F[ee]=et(he,w)):ve<=w&&(y.expiredLanes|=he),W&=~he}}function tt(y){return y=y.pendingLanes&-1073741825,y!==0?y:y&1073741824?1073741824:0}function pt(){var y=_e;return _e<<=1,(_e&4194240)===0&&(_e=64),y}function Pt(y){for(var w=[],A=0;31>A;A++)w.push(y);return w}function rn(y,w,A){y.pendingLanes|=w,w!==536870912&&(y.suspendedLanes=0,y.pingedLanes=0),y=y.eventTimes,w=31-ts(w),y[w]=A}function qt(y,w){var A=y.pendingLanes&~w;y.pendingLanes=w,y.suspendedLanes=0,y.pingedLanes=0,y.expiredLanes&=w,y.mutableReadLanes&=w,y.entangledLanes&=w,w=y.entanglements;var P=y.eventTimes;for(y=y.expirationTimes;0<A;){var F=31-ts(A),W=1<<F;w[F]=0,P[F]=-1,y[F]=-1,A&=~W}}function _n(y,w){var A=y.entangledLanes|=w;for(y=y.entanglements;A;){var P=31-ts(A),F=1<<P;F&w|y[P]&w&&(y[P]|=w),A&=~F}}var Vt=0;function rr(y){return y&=-y,1<y?4<y?(y&268435455)!==0?16:536870912:4:1}var ns,$a,au,em,kd,tm=!1,eo=[],ci=null,Es=null,na=null,Id=new Map,ra=new Map,Ma=[],u1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function lu(y,w){switch(y){case"focusin":case"focusout":ci=null;break;case"dragenter":case"dragleave":Es=null;break;case"mouseover":case"mouseout":na=null;break;case"pointerover":case"pointerout":Id.delete(w.pointerId);break;case"gotpointercapture":case"lostpointercapture":ra.delete(w.pointerId)}}function zi(y,w,A,P,F,W){return y===null||y.nativeEvent!==W?(y={blockedOn:w,domEventName:A,eventSystemFlags:P,nativeEvent:W,targetContainers:[F]},w!==null&&(w=LE(w),w!==null&&$a(w)),y):(y.eventSystemFlags|=P,w=y.targetContainers,F!==null&&w.indexOf(F)===-1&&w.push(F),y)}function SE(y,w,A,P,F){switch(w){case"focusin":return ci=zi(ci,y,w,A,P,F),!0;case"dragenter":return Es=zi(Es,y,w,A,P,F),!0;case"mouseover":return na=zi(na,y,w,A,P,F),!0;case"pointerover":var W=F.pointerId;return Id.set(W,zi(Id.get(W)||null,y,w,A,P,F)),!0;case"gotpointercapture":return W=F.pointerId,ra.set(W,zi(ra.get(W)||null,y,w,A,P,F)),!0}return!1}function dg(y){var w=hg(y.target);if(w!==null){var A=ui(w);if(A!==null){if(w=A.tag,w===13){if(w=Oa(A),w!==null){y.blockedOn=w,kd(y.priority,function(){au(A)});return}}else if(w===3&&A.stateNode.current.memoizedState.isDehydrated){y.blockedOn=A.tag===3?A.stateNode.containerInfo:null;return}}}y.blockedOn=null}function rc(y){if(y.blockedOn!==null)return!1;for(var w=y.targetContainers;0<w.length;){var A=zn(y.domEventName,y.eventSystemFlags,w[0],y.nativeEvent);if(A===null){A=y.nativeEvent;var P=new A.constructor(A.type,A);On=P,A.target.dispatchEvent(P),On=null}else return w=LE(A),w!==null&&$a(w),y.blockedOn=A,!1;w.shift()}return!0}function Rd(y,w,A){rc(y)&&A.delete(w)}function c1(){tm=!1,ci!==null&&rc(ci)&&(ci=null),Es!==null&&rc(Es)&&(Es=null),na!==null&&rc(na)&&(na=null),Id.forEach(Rd),ra.forEach(Rd)}function Cl(y,w){y.blockedOn===w&&(y.blockedOn=null,tm||(tm=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,c1)))}function La(y){function w(F){return Cl(F,y)}if(0<eo.length){Cl(eo[0],y);for(var A=1;A<eo.length;A++){var P=eo[A];P.blockedOn===y&&(P.blockedOn=null)}}for(ci!==null&&Cl(ci,y),Es!==null&&Cl(Es,y),na!==null&&Cl(na,y),Id.forEach(w),ra.forEach(w),A=0;A<Ma.length;A++)P=Ma[A],P.blockedOn===y&&(P.blockedOn=null);for(;0<Ma.length&&(A=Ma[0],A.blockedOn===null);)dg(A),A.blockedOn===null&&Ma.shift()}var ic=E.ReactCurrentBatchConfig,ce=!0;function ye(y,w,A,P){var F=Vt,W=ic.transition;ic.transition=null;try{Vt=1,$t(y,w,A,P)}finally{Vt=F,ic.transition=W}}function je(y,w,A,P){var F=Vt,W=ic.transition;ic.transition=null;try{Vt=4,$t(y,w,A,P)}finally{Vt=F,ic.transition=W}}function $t(y,w,A,P){if(ce){var F=zn(y,w,A,P);if(F===null)c5(y,w,P,vn,A),lu(y,P);else if(SE(F,y,w,A,P))P.stopPropagation();else if(lu(y,P),w&4&&-1<u1.indexOf(y)){for(;F!==null;){var W=LE(F);if(W!==null&&ns(W),W=zn(y,w,A,P),W===null&&c5(y,w,P,vn,A),W===F)break;F=W}F!==null&&P.stopPropagation()}else c5(y,w,P,null,A)}}var vn=null;function zn(y,w,A,P){if(vn=null,y=bs(P),y=hg(y),y!==null)if(w=ui(y),w===null)y=null;else if(A=w.tag,A===13){if(y=Oa(w),y!==null)return y;y=null}else if(A===3){if(w.stateNode.current.memoizedState.isDehydrated)return w.tag===3?w.stateNode.containerInfo:null;y=null}else w!==y&&(y=null);return vn=y,null}function pr(y){switch(y){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(oh()){case Ji:return 1;case Tl:return 4;case Zi:case nc:return 16;case Jp:return 536870912;default:return 16}default:return 16}}var dn=null,fr=null,jr=null;function rs(){if(jr)return jr;var y,w=fr,A=w.length,P,F="value"in dn?dn.value:dn.textContent,W=F.length;for(y=0;y<A&&w[y]===F[y];y++);var ee=A-y;for(P=1;P<=ee&&w[A-P]===F[W-P];P++);return jr=F.slice(y,1<P?1-P:void 0)}function uu(y){var w=y.keyCode;return"charCode"in y?(y=y.charCode,y===0&&w===13&&(y=13)):y=w,y===10&&(y=13),32<=y||y===13?y:0}function Fa(){return!0}function ah(){return!1}function Ui(y){function w(A,P,F,W,ee){this._reactName=A,this._targetInst=F,this.type=P,this.nativeEvent=W,this.target=ee,this.currentTarget=null;for(var he in y)y.hasOwnProperty(he)&&(A=y[he],this[he]=A?A(W):W[he]);return this.isDefaultPrevented=(W.defaultPrevented!=null?W.defaultPrevented:W.returnValue===!1)?Fa:ah,this.isPropagationStopped=ah,this}return U(w.prototype,{preventDefault:function(){this.defaultPrevented=!0;var A=this.nativeEvent;A&&(A.preventDefault?A.preventDefault():typeof A.returnValue!="unknown"&&(A.returnValue=!1),this.isDefaultPrevented=Fa)},stopPropagation:function(){var A=this.nativeEvent;A&&(A.stopPropagation?A.stopPropagation():typeof A.cancelBubble!="unknown"&&(A.cancelBubble=!0),this.isPropagationStopped=Fa)},persist:function(){},isPersistent:Fa}),w}var sc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(y){return y.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},d1=Ui(sc),Dd=U({},sc,{view:0,detail:0}),e5=Ui(Dd),f1,lh,nm,fg=U({},Dd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:I,button:0,buttons:0,relatedTarget:function(y){return y.relatedTarget===void 0?y.fromElement===y.srcElement?y.toElement:y.fromElement:y.relatedTarget},movementX:function(y){return"movementX"in y?y.movementX:(y!==nm&&(nm&&y.type==="mousemove"?(f1=y.screenX-nm.screenX,lh=y.screenY-nm.screenY):lh=f1=0,nm=y),f1)},movementY:function(y){return"movementY"in y?y.movementY:lh}}),h1=Ui(fg),AE=U({},fg,{dataTransfer:0}),hA=Ui(AE),p1=U({},Dd,{relatedTarget:0}),m1=Ui(p1),pA=U({},sc,{animationName:0,elapsedTime:0,pseudoElement:0}),uh=Ui(pA),mA=U({},sc,{clipboardData:function(y){return"clipboardData"in y?y.clipboardData:window.clipboardData}}),gA=Ui(mA),yA=U({},sc,{data:0}),kE=Ui(yA),ja={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function rm(y){var w=this.nativeEvent;return w.getModifierState?w.getModifierState(y):(y=bA[y])?!!w[y]:!1}function I(){return rm}var q=U({},Dd,{key:function(y){if(y.key){var w=ja[y.key]||y.key;if(w!=="Unidentified")return w}return y.type==="keypress"?(y=uu(y),y===13?"Enter":String.fromCharCode(y)):y.type==="keydown"||y.type==="keyup"?vA[y.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:I,charCode:function(y){return y.type==="keypress"?uu(y):0},keyCode:function(y){return y.type==="keydown"||y.type==="keyup"?y.keyCode:0},which:function(y){return y.type==="keypress"?uu(y):y.type==="keydown"||y.type==="keyup"?y.keyCode:0}}),X=Ui(q),oe=U({},fg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ke=Ui(oe),Ue=U({},Dd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:I}),Et=Ui(Ue),yr=U({},sc,{propertyName:0,elapsedTime:0,pseudoElement:0}),is=Ui(yr),Un=U({},fg,{deltaX:function(y){return"deltaX"in y?y.deltaX:"wheelDeltaX"in y?-y.wheelDeltaX:0},deltaY:function(y){return"deltaY"in y?y.deltaY:"wheelDeltaY"in y?-y.wheelDeltaY:"wheelDelta"in y?-y.wheelDelta:0},deltaZ:0,deltaMode:0}),_s=Ui(Un),Ts=[9,13,27,32],Pd=a&&"CompositionEvent"in window,to=null;a&&"documentMode"in document&&(to=document.documentMode);var g1=a&&"TextEvent"in window&&!to,y1=a&&(!Pd||to&&8<to&&11>=to),KQ=" ",XQ=!1;function QQ(y,w){switch(y){case"keyup":return Ts.indexOf(w.keyCode)!==-1;case"keydown":return w.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function JQ(y){return y=y.detail,typeof y=="object"&&"data"in y?y.data:null}var v1=!1;function yPe(y,w){switch(y){case"compositionend":return JQ(w);case"keypress":return w.which!==32?null:(XQ=!0,KQ);case"textInput":return y=w.data,y===KQ&&XQ?null:y;default:return null}}function vPe(y,w){if(v1)return y==="compositionend"||!Pd&&QQ(y,w)?(y=rs(),jr=fr=dn=null,v1=!1,y):null;switch(y){case"paste":return null;case"keypress":if(!(w.ctrlKey||w.altKey||w.metaKey)||w.ctrlKey&&w.altKey){if(w.char&&1<w.char.length)return w.char;if(w.which)return String.fromCharCode(w.which)}return null;case"compositionend":return y1&&w.locale!=="ko"?null:w.data;default:return null}}var bPe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ZQ(y){var w=y&&y.nodeName&&y.nodeName.toLowerCase();return w==="input"?!!bPe[y.type]:w==="textarea"}function eJ(y,w,A,P){Qs(P),w=TA(w,"onChange"),0<w.length&&(A=new d1("onChange","change",null,A,P),y.push({event:A,listeners:w}))}var IE=null,RE=null;function wPe(y){vJ(y,0)}function wA(y){var w=_1(y);if(re(w))return y}function xPe(y,w){if(y==="change")return w}var tJ=!1;if(a){var t5;if(a){var n5="oninput"in document;if(!n5){var nJ=document.createElement("div");nJ.setAttribute("oninput","return;"),n5=typeof nJ.oninput=="function"}t5=n5}else t5=!1;tJ=t5&&(!document.documentMode||9<document.documentMode)}function rJ(){IE&&(IE.detachEvent("onpropertychange",iJ),RE=IE=null)}function iJ(y){if(y.propertyName==="value"&&wA(RE)){var w=[];eJ(w,RE,y,bs(y)),Fr(wPe,w)}}function EPe(y,w,A){y==="focusin"?(rJ(),IE=w,RE=A,IE.attachEvent("onpropertychange",iJ)):y==="focusout"&&rJ()}function _Pe(y){if(y==="selectionchange"||y==="keyup"||y==="keydown")return wA(RE)}function TPe(y,w){if(y==="click")return wA(w)}function CPe(y,w){if(y==="input"||y==="change")return wA(w)}function SPe(y,w){return y===w&&(y!==0||1/y===1/w)||y!==y&&w!==w}var oc=typeof Object.is=="function"?Object.is:SPe;function DE(y,w){if(oc(y,w))return!0;if(typeof y!="object"||y===null||typeof w!="object"||w===null)return!1;var A=Object.keys(y),P=Object.keys(w);if(A.length!==P.length)return!1;for(P=0;P<A.length;P++){var F=A[P];if(!l.call(w,F)||!oc(y[F],w[F]))return!1}return!0}function sJ(y){for(;y&&y.firstChild;)y=y.firstChild;return y}function oJ(y,w){var A=sJ(y);y=0;for(var P;A;){if(A.nodeType===3){if(P=y+A.textContent.length,y<=w&&P>=w)return{node:A,offset:w-y};y=P}e:{for(;A;){if(A.nextSibling){A=A.nextSibling;break e}A=A.parentNode}A=void 0}A=sJ(A)}}function aJ(y,w){return y&&w?y===w?!0:y&&y.nodeType===3?!1:w&&w.nodeType===3?aJ(y,w.parentNode):"contains"in y?y.contains(w):y.compareDocumentPosition?!!(y.compareDocumentPosition(w)&16):!1:!1}function lJ(){for(var y=window,w=we();w instanceof y.HTMLIFrameElement;){try{var A=typeof w.contentWindow.location.href=="string"}catch{A=!1}if(A)y=w.contentWindow;else break;w=we(y.document)}return w}function r5(y){var w=y&&y.nodeName&&y.nodeName.toLowerCase();return w&&(w==="input"&&(y.type==="text"||y.type==="search"||y.type==="tel"||y.type==="url"||y.type==="password")||w==="textarea"||y.contentEditable==="true")}function APe(y){var w=lJ(),A=y.focusedElem,P=y.selectionRange;if(w!==A&&A&&A.ownerDocument&&aJ(A.ownerDocument.documentElement,A)){if(P!==null&&r5(A)){if(w=P.start,y=P.end,y===void 0&&(y=w),"selectionStart"in A)A.selectionStart=w,A.selectionEnd=Math.min(y,A.value.length);else if(y=(w=A.ownerDocument||document)&&w.defaultView||window,y.getSelection){y=y.getSelection();var F=A.textContent.length,W=Math.min(P.start,F);P=P.end===void 0?W:Math.min(P.end,F),!y.extend&&W>P&&(F=P,P=W,W=F),F=oJ(A,W);var ee=oJ(A,P);F&&ee&&(y.rangeCount!==1||y.anchorNode!==F.node||y.anchorOffset!==F.offset||y.focusNode!==ee.node||y.focusOffset!==ee.offset)&&(w=w.createRange(),w.setStart(F.node,F.offset),y.removeAllRanges(),W>P?(y.addRange(w),y.extend(ee.node,ee.offset)):(w.setEnd(ee.node,ee.offset),y.addRange(w)))}}for(w=[],y=A;y=y.parentNode;)y.nodeType===1&&w.push({element:y,left:y.scrollLeft,top:y.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<w.length;A++)y=w[A],y.element.scrollLeft=y.left,y.element.scrollTop=y.top}}var kPe=a&&"documentMode"in document&&11>=document.documentMode,b1=null,i5=null,PE=null,s5=!1;function uJ(y,w,A){var P=A.window===A?A.document:A.nodeType===9?A:A.ownerDocument;s5||b1==null||b1!==we(P)||(P=b1,"selectionStart"in P&&r5(P)?P={start:P.selectionStart,end:P.selectionEnd}:(P=(P.ownerDocument&&P.ownerDocument.defaultView||window).getSelection(),P={anchorNode:P.anchorNode,anchorOffset:P.anchorOffset,focusNode:P.focusNode,focusOffset:P.focusOffset}),PE&&DE(PE,P)||(PE=P,P=TA(i5,"onSelect"),0<P.length&&(w=new d1("onSelect","select",null,w,A),y.push({event:w,listeners:P}),w.target=b1)))}function xA(y,w){var A={};return A[y.toLowerCase()]=w.toLowerCase(),A["Webkit"+y]="webkit"+w,A["Moz"+y]="moz"+w,A}var w1={animationend:xA("Animation","AnimationEnd"),animationiteration:xA("Animation","AnimationIteration"),animationstart:xA("Animation","AnimationStart"),transitionend:xA("Transition","TransitionEnd")},o5={},cJ={};a&&(cJ=document.createElement("div").style,"AnimationEvent"in window||(delete w1.animationend.animation,delete w1.animationiteration.animation,delete w1.animationstart.animation),"TransitionEvent"in window||delete w1.transitionend.transition);function EA(y){if(o5[y])return o5[y];if(!w1[y])return y;var w=w1[y],A;for(A in w)if(w.hasOwnProperty(A)&&A in cJ)return o5[y]=w[A];return y}var dJ=EA("animationend"),fJ=EA("animationiteration"),hJ=EA("animationstart"),pJ=EA("transitionend"),mJ=new Map,gJ="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function im(y,w){mJ.set(y,w),s(w,[y])}for(var a5=0;a5<gJ.length;a5++){var l5=gJ[a5],IPe=l5.toLowerCase(),RPe=l5[0].toUpperCase()+l5.slice(1);im(IPe,"on"+RPe)}im(dJ,"onAnimationEnd"),im(fJ,"onAnimationIteration"),im(hJ,"onAnimationStart"),im("dblclick","onDoubleClick"),im("focusin","onFocus"),im("focusout","onBlur"),im(pJ,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var NE="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),DPe=new Set("cancel close invalid load scroll toggle".split(" ").concat(NE));function yJ(y,w,A){var P=y.type||"unknown-event";y.currentTarget=A,Zu(P,w,void 0,y),y.currentTarget=null}function vJ(y,w){w=(w&4)!==0;for(var A=0;A<y.length;A++){var P=y[A],F=P.event;P=P.listeners;e:{var W=void 0;if(w)for(var ee=P.length-1;0<=ee;ee--){var he=P[ee],ve=he.instance,Le=he.currentTarget;if(he=he.listener,ve!==W&&F.isPropagationStopped())break e;yJ(F,he,Le),W=ve}else for(ee=0;ee<P.length;ee++){if(he=P[ee],ve=he.instance,Le=he.currentTarget,he=he.listener,ve!==W&&F.isPropagationStopped())break e;yJ(F,he,Le),W=ve}}}if(Js)throw y=_l,Js=!1,_l=null,y}function Vr(y,w){var A=w[g5];A===void 0&&(A=w[g5]=new Set);var P=y+"__bubble";A.has(P)||(bJ(w,y,2,!1),A.add(P))}function u5(y,w,A){var P=0;w&&(P|=4),bJ(A,y,P,w)}var _A="_reactListening"+Math.random().toString(36).slice(2);function OE(y){if(!y[_A]){y[_A]=!0,r.forEach(function(A){A!=="selectionchange"&&(DPe.has(A)||u5(A,!1,y),u5(A,!0,y))});var w=y.nodeType===9?y:y.ownerDocument;w===null||w[_A]||(w[_A]=!0,u5("selectionchange",!1,w))}}function bJ(y,w,A,P){switch(pr(w)){case 1:var F=ye;break;case 4:F=je;break;default:F=$t}A=F.bind(null,w,A,y),F=void 0,!ws||w!=="touchstart"&&w!=="touchmove"&&w!=="wheel"||(F=!0),P?F!==void 0?y.addEventListener(w,A,{capture:!0,passive:F}):y.addEventListener(w,A,!0):F!==void 0?y.addEventListener(w,A,{passive:F}):y.addEventListener(w,A,!1)}function c5(y,w,A,P,F){var W=P;if((w&1)===0&&(w&2)===0&&P!==null)e:for(;;){if(P===null)return;var ee=P.tag;if(ee===3||ee===4){var he=P.stateNode.containerInfo;if(he===F||he.nodeType===8&&he.parentNode===F)break;if(ee===4)for(ee=P.return;ee!==null;){var ve=ee.tag;if((ve===3||ve===4)&&(ve=ee.stateNode.containerInfo,ve===F||ve.nodeType===8&&ve.parentNode===F))return;ee=ee.return}for(;he!==null;){if(ee=hg(he),ee===null)return;if(ve=ee.tag,ve===5||ve===6){P=W=ee;continue e}he=he.parentNode}}P=P.return}Fr(function(){var Le=W,it=bs(A),ut=[];e:{var rt=mJ.get(y);if(rt!==void 0){var Ot=d1,Lt=y;switch(y){case"keypress":if(uu(A)===0)break e;case"keydown":case"keyup":Ot=X;break;case"focusin":Lt="focus",Ot=m1;break;case"focusout":Lt="blur",Ot=m1;break;case"beforeblur":case"afterblur":Ot=m1;break;case"click":if(A.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ot=h1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ot=hA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ot=Et;break;case dJ:case fJ:case hJ:Ot=uh;break;case pJ:Ot=is;break;case"scroll":Ot=e5;break;case"wheel":Ot=_s;break;case"copy":case"cut":case"paste":Ot=gA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ot=ke}var Ft=(w&4)!==0,ki=!Ft&&y==="scroll",Ie=Ft?rt!==null?rt+"Capture":null:rt;Ft=[];for(var Te=Le,De;Te!==null;){De=Te;var yt=De.stateNode;if(De.tag===5&&yt!==null&&(De=yt,Ie!==null&&(yt=dr(Te,Ie),yt!=null&&Ft.push($E(Te,yt,De)))),ki)break;Te=Te.return}0<Ft.length&&(rt=new Ot(rt,Lt,null,A,it),ut.push({event:rt,listeners:Ft}))}}if((w&7)===0){e:{if(rt=y==="mouseover"||y==="pointerover",Ot=y==="mouseout"||y==="pointerout",rt&&A!==On&&(Lt=A.relatedTarget||A.fromElement)&&(hg(Lt)||Lt[ch]))break e;if((Ot||rt)&&(rt=it.window===it?it:(rt=it.ownerDocument)?rt.defaultView||rt.parentWindow:window,Ot?(Lt=A.relatedTarget||A.toElement,Ot=Le,Lt=Lt?hg(Lt):null,Lt!==null&&(ki=ui(Lt),Lt!==ki||Lt.tag!==5&&Lt.tag!==6)&&(Lt=null)):(Ot=null,Lt=Le),Ot!==Lt)){if(Ft=h1,yt="onMouseLeave",Ie="onMouseEnter",Te="mouse",(y==="pointerout"||y==="pointerover")&&(Ft=ke,yt="onPointerLeave",Ie="onPointerEnter",Te="pointer"),ki=Ot==null?rt:_1(Ot),De=Lt==null?rt:_1(Lt),rt=new Ft(yt,Te+"leave",Ot,A,it),rt.target=ki,rt.relatedTarget=De,yt=null,hg(it)===Le&&(Ft=new Ft(Ie,Te+"enter",Lt,A,it),Ft.target=De,Ft.relatedTarget=ki,yt=Ft),ki=yt,Ot&&Lt)t:{for(Ft=Ot,Ie=Lt,Te=0,De=Ft;De;De=x1(De))Te++;for(De=0,yt=Ie;yt;yt=x1(yt))De++;for(;0<Te-De;)Ft=x1(Ft),Te--;for(;0<De-Te;)Ie=x1(Ie),De--;for(;Te--;){if(Ft===Ie||Ie!==null&&Ft===Ie.alternate)break t;Ft=x1(Ft),Ie=x1(Ie)}Ft=null}else Ft=null;Ot!==null&&wJ(ut,rt,Ot,Ft,!1),Lt!==null&&ki!==null&&wJ(ut,ki,Lt,Ft,!0)}}e:{if(rt=Le?_1(Le):window,Ot=rt.nodeName&&rt.nodeName.toLowerCase(),Ot==="select"||Ot==="input"&&rt.type==="file")var Ht=xPe;else if(ZQ(rt))if(tJ)Ht=CPe;else{Ht=_Pe;var Zt=EPe}else(Ot=rt.nodeName)&&Ot.toLowerCase()==="input"&&(rt.type==="checkbox"||rt.type==="radio")&&(Ht=TPe);if(Ht&&(Ht=Ht(y,Le))){eJ(ut,Ht,A,it);break e}Zt&&Zt(y,rt,Le),y==="focusout"&&(Zt=rt._wrapperState)&&Zt.controlled&&rt.type==="number"&&Je(rt,"number",rt.value)}switch(Zt=Le?_1(Le):window,y){case"focusin":(ZQ(Zt)||Zt.contentEditable==="true")&&(b1=Zt,i5=Le,PE=null);break;case"focusout":PE=i5=b1=null;break;case"mousedown":s5=!0;break;case"contextmenu":case"mouseup":case"dragend":s5=!1,uJ(ut,A,it);break;case"selectionchange":if(kPe)break;case"keydown":case"keyup":uJ(ut,A,it)}var en;if(Pd)e:{switch(y){case"compositionstart":var an="onCompositionStart";break e;case"compositionend":an="onCompositionEnd";break e;case"compositionupdate":an="onCompositionUpdate";break e}an=void 0}else v1?QQ(y,A)&&(an="onCompositionEnd"):y==="keydown"&&A.keyCode===229&&(an="onCompositionStart");an&&(y1&&A.locale!=="ko"&&(v1||an!=="onCompositionStart"?an==="onCompositionEnd"&&v1&&(en=rs()):(dn=it,fr="value"in dn?dn.value:dn.textContent,v1=!0)),Zt=TA(Le,an),0<Zt.length&&(an=new kE(an,y,null,A,it),ut.push({event:an,listeners:Zt}),en?an.data=en:(en=JQ(A),en!==null&&(an.data=en)))),(en=g1?yPe(y,A):vPe(y,A))&&(Le=TA(Le,"onBeforeInput"),0<Le.length&&(it=new kE("onBeforeInput","beforeinput",null,A,it),ut.push({event:it,listeners:Le}),it.data=en))}vJ(ut,w)})}function $E(y,w,A){return{instance:y,listener:w,currentTarget:A}}function TA(y,w){for(var A=w+"Capture",P=[];y!==null;){var F=y,W=F.stateNode;F.tag===5&&W!==null&&(F=W,W=dr(y,A),W!=null&&P.unshift($E(y,W,F)),W=dr(y,w),W!=null&&P.push($E(y,W,F))),y=y.return}return P}function x1(y){if(y===null)return null;do y=y.return;while(y&&y.tag!==5);return y||null}function wJ(y,w,A,P,F){for(var W=w._reactName,ee=[];A!==null&&A!==P;){var he=A,ve=he.alternate,Le=he.stateNode;if(ve!==null&&ve===P)break;he.tag===5&&Le!==null&&(he=Le,F?(ve=dr(A,W),ve!=null&&ee.unshift($E(A,ve,he))):F||(ve=dr(A,W),ve!=null&&ee.push($E(A,ve,he)))),A=A.return}ee.length!==0&&y.push({event:w,listeners:ee})}var PPe=/\r\n?/g,NPe=/\u0000|\uFFFD/g;function xJ(y){return(typeof y=="string"?y:""+y).replace(PPe,`
`).replace(NPe,"")}function CA(y,w,A){if(w=xJ(w),xJ(y)!==w&&A)throw Error(n(425))}function SA(){}var d5=null,f5=null;function h5(y,w){return y==="textarea"||y==="noscript"||typeof w.children=="string"||typeof w.children=="number"||typeof w.dangerouslySetInnerHTML=="object"&&w.dangerouslySetInnerHTML!==null&&w.dangerouslySetInnerHTML.__html!=null}var p5=typeof setTimeout=="function"?setTimeout:void 0,OPe=typeof clearTimeout=="function"?clearTimeout:void 0,EJ=typeof Promise=="function"?Promise:void 0,$Pe=typeof queueMicrotask=="function"?queueMicrotask:typeof EJ<"u"?function(y){return EJ.resolve(null).then(y).catch(MPe)}:p5;function MPe(y){setTimeout(function(){throw y})}function m5(y,w){var A=w,P=0;do{var F=A.nextSibling;if(y.removeChild(A),F&&F.nodeType===8)if(A=F.data,A==="/$"){if(P===0){y.removeChild(F),La(w);return}P--}else A!=="$"&&A!=="$?"&&A!=="$!"||P++;A=F}while(A);La(w)}function sm(y){for(;y!=null;y=y.nextSibling){var w=y.nodeType;if(w===1||w===3)break;if(w===8){if(w=y.data,w==="$"||w==="$!"||w==="$?")break;if(w==="/$")return null}}return y}function _J(y){y=y.previousSibling;for(var w=0;y;){if(y.nodeType===8){var A=y.data;if(A==="$"||A==="$!"||A==="$?"){if(w===0)return y;w--}else A==="/$"&&w++}y=y.previousSibling}return null}var E1=Math.random().toString(36).slice(2),Nd="__reactFiber$"+E1,ME="__reactProps$"+E1,ch="__reactContainer$"+E1,g5="__reactEvents$"+E1,LPe="__reactListeners$"+E1,FPe="__reactHandles$"+E1;function hg(y){var w=y[Nd];if(w)return w;for(var A=y.parentNode;A;){if(w=A[ch]||A[Nd]){if(A=w.alternate,w.child!==null||A!==null&&A.child!==null)for(y=_J(y);y!==null;){if(A=y[Nd])return A;y=_J(y)}return w}y=A,A=y.parentNode}return null}function LE(y){return y=y[Nd]||y[ch],!y||y.tag!==5&&y.tag!==6&&y.tag!==13&&y.tag!==3?null:y}function _1(y){if(y.tag===5||y.tag===6)return y.stateNode;throw Error(n(33))}function AA(y){return y[ME]||null}var y5=[],T1=-1;function om(y){return{current:y}}function Gr(y){0>T1||(y.current=y5[T1],y5[T1]=null,T1--)}function Br(y,w){T1++,y5[T1]=y.current,y.current=w}var am={},Io=om(am),Ba=om(!1),pg=am;function C1(y,w){var A=y.type.contextTypes;if(!A)return am;var P=y.stateNode;if(P&&P.__reactInternalMemoizedUnmaskedChildContext===w)return P.__reactInternalMemoizedMaskedChildContext;var F={},W;for(W in A)F[W]=w[W];return P&&(y=y.stateNode,y.__reactInternalMemoizedUnmaskedChildContext=w,y.__reactInternalMemoizedMaskedChildContext=F),F}function za(y){return y=y.childContextTypes,y!=null}function kA(){Gr(Ba),Gr(Io)}function TJ(y,w,A){if(Io.current!==am)throw Error(n(168));Br(Io,w),Br(Ba,A)}function CJ(y,w,A){var P=y.stateNode;if(w=w.childContextTypes,typeof P.getChildContext!="function")return A;P=P.getChildContext();for(var F in P)if(!(F in w))throw Error(n(108,me(y)||"Unknown",F));return U({},A,P)}function IA(y){return y=(y=y.stateNode)&&y.__reactInternalMemoizedMergedChildContext||am,pg=Io.current,Br(Io,y),Br(Ba,Ba.current),!0}function SJ(y,w,A){var P=y.stateNode;if(!P)throw Error(n(169));A?(y=CJ(y,w,pg),P.__reactInternalMemoizedMergedChildContext=y,Gr(Ba),Gr(Io),Br(Io,y)):Gr(Ba),Br(Ba,A)}var dh=null,RA=!1,v5=!1;function AJ(y){dh===null?dh=[y]:dh.push(y)}function jPe(y){RA=!0,AJ(y)}function lm(){if(!v5&&dh!==null){v5=!0;var y=0,w=Vt;try{var A=dh;for(Vt=1;y<A.length;y++){var P=A[y];do P=P(!0);while(P!==null)}dh=null,RA=!1}catch(F){throw dh!==null&&(dh=dh.slice(y+1)),Ad(Ji,lm),F}finally{Vt=w,v5=!1}}return null}var S1=[],A1=0,DA=null,PA=0,cu=[],du=0,mg=null,fh=1,hh="";function gg(y,w){S1[A1++]=PA,S1[A1++]=DA,DA=y,PA=w}function kJ(y,w,A){cu[du++]=fh,cu[du++]=hh,cu[du++]=mg,mg=y;var P=fh;y=hh;var F=32-ts(P)-1;P&=~(1<<F),A+=1;var W=32-ts(w)+F;if(30<W){var ee=F-F%5;W=(P&(1<<ee)-1).toString(32),P>>=ee,F-=ee,fh=1<<32-ts(w)+F|A<<F|P,hh=W+y}else fh=1<<W|A<<F|P,hh=y}function b5(y){y.return!==null&&(gg(y,1),kJ(y,1,0))}function w5(y){for(;y===DA;)DA=S1[--A1],S1[A1]=null,PA=S1[--A1],S1[A1]=null;for(;y===mg;)mg=cu[--du],cu[du]=null,hh=cu[--du],cu[du]=null,fh=cu[--du],cu[du]=null}var Sl=null,Al=null,Zr=!1,ac=null;function IJ(y,w){var A=mu(5,null,null,0);A.elementType="DELETED",A.stateNode=w,A.return=y,w=y.deletions,w===null?(y.deletions=[A],y.flags|=16):w.push(A)}function RJ(y,w){switch(y.tag){case 5:var A=y.type;return w=w.nodeType!==1||A.toLowerCase()!==w.nodeName.toLowerCase()?null:w,w!==null?(y.stateNode=w,Sl=y,Al=sm(w.firstChild),!0):!1;case 6:return w=y.pendingProps===""||w.nodeType!==3?null:w,w!==null?(y.stateNode=w,Sl=y,Al=null,!0):!1;case 13:return w=w.nodeType!==8?null:w,w!==null?(A=mg!==null?{id:fh,overflow:hh}:null,y.memoizedState={dehydrated:w,treeContext:A,retryLane:1073741824},A=mu(18,null,null,0),A.stateNode=w,A.return=y,y.child=A,Sl=y,Al=null,!0):!1;default:return!1}}function x5(y){return(y.mode&1)!==0&&(y.flags&128)===0}function E5(y){if(Zr){var w=Al;if(w){var A=w;if(!RJ(y,w)){if(x5(y))throw Error(n(418));w=sm(A.nextSibling);var P=Sl;w&&RJ(y,w)?IJ(P,A):(y.flags=y.flags&-4097|2,Zr=!1,Sl=y)}}else{if(x5(y))throw Error(n(418));y.flags=y.flags&-4097|2,Zr=!1,Sl=y}}}function DJ(y){for(y=y.return;y!==null&&y.tag!==5&&y.tag!==3&&y.tag!==13;)y=y.return;Sl=y}function NA(y){if(y!==Sl)return!1;if(!Zr)return DJ(y),Zr=!0,!1;var w;if((w=y.tag!==3)&&!(w=y.tag!==5)&&(w=y.type,w=w!=="head"&&w!=="body"&&!h5(y.type,y.memoizedProps)),w&&(w=Al)){if(x5(y))throw PJ(),Error(n(418));for(;w;)IJ(y,w),w=sm(w.nextSibling)}if(DJ(y),y.tag===13){if(y=y.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(n(317));e:{for(y=y.nextSibling,w=0;y;){if(y.nodeType===8){var A=y.data;if(A==="/$"){if(w===0){Al=sm(y.nextSibling);break e}w--}else A!=="$"&&A!=="$!"&&A!=="$?"||w++}y=y.nextSibling}Al=null}}else Al=Sl?sm(y.stateNode.nextSibling):null;return!0}function PJ(){for(var y=Al;y;)y=sm(y.nextSibling)}function k1(){Al=Sl=null,Zr=!1}function _5(y){ac===null?ac=[y]:ac.push(y)}var BPe=E.ReactCurrentBatchConfig;function FE(y,w,A){if(y=A.ref,y!==null&&typeof y!="function"&&typeof y!="object"){if(A._owner){if(A=A._owner,A){if(A.tag!==1)throw Error(n(309));var P=A.stateNode}if(!P)throw Error(n(147,y));var F=P,W=""+y;return w!==null&&w.ref!==null&&typeof w.ref=="function"&&w.ref._stringRef===W?w.ref:(w=function(ee){var he=F.refs;ee===null?delete he[W]:he[W]=ee},w._stringRef=W,w)}if(typeof y!="string")throw Error(n(284));if(!A._owner)throw Error(n(290,y))}return y}function OA(y,w){throw y=Object.prototype.toString.call(w),Error(n(31,y==="[object Object]"?"object with keys {"+Object.keys(w).join(", ")+"}":y))}function NJ(y){var w=y._init;return w(y._payload)}function OJ(y){function w(Ie,Te){if(y){var De=Ie.deletions;De===null?(Ie.deletions=[Te],Ie.flags|=16):De.push(Te)}}function A(Ie,Te){if(!y)return null;for(;Te!==null;)w(Ie,Te),Te=Te.sibling;return null}function P(Ie,Te){for(Ie=new Map;Te!==null;)Te.key!==null?Ie.set(Te.key,Te):Ie.set(Te.index,Te),Te=Te.sibling;return Ie}function F(Ie,Te){return Ie=gm(Ie,Te),Ie.index=0,Ie.sibling=null,Ie}function W(Ie,Te,De){return Ie.index=De,y?(De=Ie.alternate,De!==null?(De=De.index,De<Te?(Ie.flags|=2,Te):De):(Ie.flags|=2,Te)):(Ie.flags|=1048576,Te)}function ee(Ie){return y&&Ie.alternate===null&&(Ie.flags|=2),Ie}function he(Ie,Te,De,yt){return Te===null||Te.tag!==6?(Te=p8(De,Ie.mode,yt),Te.return=Ie,Te):(Te=F(Te,De),Te.return=Ie,Te)}function ve(Ie,Te,De,yt){var Ht=De.type;return Ht===S?it(Ie,Te,De.props.children,yt,De.key):Te!==null&&(Te.elementType===Ht||typeof Ht=="object"&&Ht!==null&&Ht.$$typeof===Y&&NJ(Ht)===Te.type)?(yt=F(Te,De.props),yt.ref=FE(Ie,Te,De),yt.return=Ie,yt):(yt=ik(De.type,De.key,De.props,null,Ie.mode,yt),yt.ref=FE(Ie,Te,De),yt.return=Ie,yt)}function Le(Ie,Te,De,yt){return Te===null||Te.tag!==4||Te.stateNode.containerInfo!==De.containerInfo||Te.stateNode.implementation!==De.implementation?(Te=m8(De,Ie.mode,yt),Te.return=Ie,Te):(Te=F(Te,De.children||[]),Te.return=Ie,Te)}function it(Ie,Te,De,yt,Ht){return Te===null||Te.tag!==7?(Te=Tg(De,Ie.mode,yt,Ht),Te.return=Ie,Te):(Te=F(Te,De),Te.return=Ie,Te)}function ut(Ie,Te,De){if(typeof Te=="string"&&Te!==""||typeof Te=="number")return Te=p8(""+Te,Ie.mode,De),Te.return=Ie,Te;if(typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case _:return De=ik(Te.type,Te.key,Te.props,null,Ie.mode,De),De.ref=FE(Ie,null,Te),De.return=Ie,De;case C:return Te=m8(Te,Ie.mode,De),Te.return=Ie,Te;case Y:var yt=Te._init;return ut(Ie,yt(Te._payload),De)}if(lt(Te)||Z(Te))return Te=Tg(Te,Ie.mode,De,null),Te.return=Ie,Te;OA(Ie,Te)}return null}function rt(Ie,Te,De,yt){var Ht=Te!==null?Te.key:null;if(typeof De=="string"&&De!==""||typeof De=="number")return Ht!==null?null:he(Ie,Te,""+De,yt);if(typeof De=="object"&&De!==null){switch(De.$$typeof){case _:return De.key===Ht?ve(Ie,Te,De,yt):null;case C:return De.key===Ht?Le(Ie,Te,De,yt):null;case Y:return Ht=De._init,rt(Ie,Te,Ht(De._payload),yt)}if(lt(De)||Z(De))return Ht!==null?null:it(Ie,Te,De,yt,null);OA(Ie,De)}return null}function Ot(Ie,Te,De,yt,Ht){if(typeof yt=="string"&&yt!==""||typeof yt=="number")return Ie=Ie.get(De)||null,he(Te,Ie,""+yt,Ht);if(typeof yt=="object"&&yt!==null){switch(yt.$$typeof){case _:return Ie=Ie.get(yt.key===null?De:yt.key)||null,ve(Te,Ie,yt,Ht);case C:return Ie=Ie.get(yt.key===null?De:yt.key)||null,Le(Te,Ie,yt,Ht);case Y:var Zt=yt._init;return Ot(Ie,Te,De,Zt(yt._payload),Ht)}if(lt(yt)||Z(yt))return Ie=Ie.get(De)||null,it(Te,Ie,yt,Ht,null);OA(Te,yt)}return null}function Lt(Ie,Te,De,yt){for(var Ht=null,Zt=null,en=Te,an=Te=0,As=null;en!==null&&an<De.length;an++){en.index>an?(As=en,en=null):As=en.sibling;var ir=rt(Ie,en,De[an],yt);if(ir===null){en===null&&(en=As);break}y&&en&&ir.alternate===null&&w(Ie,en),Te=W(ir,Te,an),Zt===null?Ht=ir:Zt.sibling=ir,Zt=ir,en=As}if(an===De.length)return A(Ie,en),Zr&&gg(Ie,an),Ht;if(en===null){for(;an<De.length;an++)en=ut(Ie,De[an],yt),en!==null&&(Te=W(en,Te,an),Zt===null?Ht=en:Zt.sibling=en,Zt=en);return Zr&&gg(Ie,an),Ht}for(en=P(Ie,en);an<De.length;an++)As=Ot(en,Ie,an,De[an],yt),As!==null&&(y&&As.alternate!==null&&en.delete(As.key===null?an:As.key),Te=W(As,Te,an),Zt===null?Ht=As:Zt.sibling=As,Zt=As);return y&&en.forEach(function(ym){return w(Ie,ym)}),Zr&&gg(Ie,an),Ht}function Ft(Ie,Te,De,yt){var Ht=Z(De);if(typeof Ht!="function")throw Error(n(150));if(De=Ht.call(De),De==null)throw Error(n(151));for(var Zt=Ht=null,en=Te,an=Te=0,As=null,ir=De.next();en!==null&&!ir.done;an++,ir=De.next()){en.index>an?(As=en,en=null):As=en.sibling;var ym=rt(Ie,en,ir.value,yt);if(ym===null){en===null&&(en=As);break}y&&en&&ym.alternate===null&&w(Ie,en),Te=W(ym,Te,an),Zt===null?Ht=ym:Zt.sibling=ym,Zt=ym,en=As}if(ir.done)return A(Ie,en),Zr&&gg(Ie,an),Ht;if(en===null){for(;!ir.done;an++,ir=De.next())ir=ut(Ie,ir.value,yt),ir!==null&&(Te=W(ir,Te,an),Zt===null?Ht=ir:Zt.sibling=ir,Zt=ir);return Zr&&gg(Ie,an),Ht}for(en=P(Ie,en);!ir.done;an++,ir=De.next())ir=Ot(en,Ie,an,ir.value,yt),ir!==null&&(y&&ir.alternate!==null&&en.delete(ir.key===null?an:ir.key),Te=W(ir,Te,an),Zt===null?Ht=ir:Zt.sibling=ir,Zt=ir);return y&&en.forEach(function(bNe){return w(Ie,bNe)}),Zr&&gg(Ie,an),Ht}function ki(Ie,Te,De,yt){if(typeof De=="object"&&De!==null&&De.type===S&&De.key===null&&(De=De.props.children),typeof De=="object"&&De!==null){switch(De.$$typeof){case _:e:{for(var Ht=De.key,Zt=Te;Zt!==null;){if(Zt.key===Ht){if(Ht=De.type,Ht===S){if(Zt.tag===7){A(Ie,Zt.sibling),Te=F(Zt,De.props.children),Te.return=Ie,Ie=Te;break e}}else if(Zt.elementType===Ht||typeof Ht=="object"&&Ht!==null&&Ht.$$typeof===Y&&NJ(Ht)===Zt.type){A(Ie,Zt.sibling),Te=F(Zt,De.props),Te.ref=FE(Ie,Zt,De),Te.return=Ie,Ie=Te;break e}A(Ie,Zt);break}else w(Ie,Zt);Zt=Zt.sibling}De.type===S?(Te=Tg(De.props.children,Ie.mode,yt,De.key),Te.return=Ie,Ie=Te):(yt=ik(De.type,De.key,De.props,null,Ie.mode,yt),yt.ref=FE(Ie,Te,De),yt.return=Ie,Ie=yt)}return ee(Ie);case C:e:{for(Zt=De.key;Te!==null;){if(Te.key===Zt)if(Te.tag===4&&Te.stateNode.containerInfo===De.containerInfo&&Te.stateNode.implementation===De.implementation){A(Ie,Te.sibling),Te=F(Te,De.children||[]),Te.return=Ie,Ie=Te;break e}else{A(Ie,Te);break}else w(Ie,Te);Te=Te.sibling}Te=m8(De,Ie.mode,yt),Te.return=Ie,Ie=Te}return ee(Ie);case Y:return Zt=De._init,ki(Ie,Te,Zt(De._payload),yt)}if(lt(De))return Lt(Ie,Te,De,yt);if(Z(De))return Ft(Ie,Te,De,yt);OA(Ie,De)}return typeof De=="string"&&De!==""||typeof De=="number"?(De=""+De,Te!==null&&Te.tag===6?(A(Ie,Te.sibling),Te=F(Te,De),Te.return=Ie,Ie=Te):(A(Ie,Te),Te=p8(De,Ie.mode,yt),Te.return=Ie,Ie=Te),ee(Ie)):A(Ie,Te)}return ki}var I1=OJ(!0),$J=OJ(!1),$A=om(null),MA=null,R1=null,T5=null;function C5(){T5=R1=MA=null}function S5(y){var w=$A.current;Gr($A),y._currentValue=w}function A5(y,w,A){for(;y!==null;){var P=y.alternate;if((y.childLanes&w)!==w?(y.childLanes|=w,P!==null&&(P.childLanes|=w)):P!==null&&(P.childLanes&w)!==w&&(P.childLanes|=w),y===A)break;y=y.return}}function D1(y,w){MA=y,T5=R1=null,y=y.dependencies,y!==null&&y.firstContext!==null&&((y.lanes&w)!==0&&(Ua=!0),y.firstContext=null)}function fu(y){var w=y._currentValue;if(T5!==y)if(y={context:y,memoizedValue:w,next:null},R1===null){if(MA===null)throw Error(n(308));R1=y,MA.dependencies={lanes:0,firstContext:y}}else R1=R1.next=y;return w}var yg=null;function k5(y){yg===null?yg=[y]:yg.push(y)}function MJ(y,w,A,P){var F=w.interleaved;return F===null?(A.next=A,k5(w)):(A.next=F.next,F.next=A),w.interleaved=A,ph(y,P)}function ph(y,w){y.lanes|=w;var A=y.alternate;for(A!==null&&(A.lanes|=w),A=y,y=y.return;y!==null;)y.childLanes|=w,A=y.alternate,A!==null&&(A.childLanes|=w),A=y,y=y.return;return A.tag===3?A.stateNode:null}var um=!1;function I5(y){y.updateQueue={baseState:y.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function LJ(y,w){y=y.updateQueue,w.updateQueue===y&&(w.updateQueue={baseState:y.baseState,firstBaseUpdate:y.firstBaseUpdate,lastBaseUpdate:y.lastBaseUpdate,shared:y.shared,effects:y.effects})}function mh(y,w){return{eventTime:y,lane:w,tag:0,payload:null,callback:null,next:null}}function cm(y,w,A){var P=y.updateQueue;if(P===null)return null;if(P=P.shared,(Kn&2)!==0){var F=P.pending;return F===null?w.next=w:(w.next=F.next,F.next=w),P.pending=w,ph(y,A)}return F=P.interleaved,F===null?(w.next=w,k5(P)):(w.next=F.next,F.next=w),P.interleaved=w,ph(y,A)}function LA(y,w,A){if(w=w.updateQueue,w!==null&&(w=w.shared,(A&4194240)!==0)){var P=w.lanes;P&=y.pendingLanes,A|=P,w.lanes=A,_n(y,A)}}function FJ(y,w){var A=y.updateQueue,P=y.alternate;if(P!==null&&(P=P.updateQueue,A===P)){var F=null,W=null;if(A=A.firstBaseUpdate,A!==null){do{var ee={eventTime:A.eventTime,lane:A.lane,tag:A.tag,payload:A.payload,callback:A.callback,next:null};W===null?F=W=ee:W=W.next=ee,A=A.next}while(A!==null);W===null?F=W=w:W=W.next=w}else F=W=w;A={baseState:P.baseState,firstBaseUpdate:F,lastBaseUpdate:W,shared:P.shared,effects:P.effects},y.updateQueue=A;return}y=A.lastBaseUpdate,y===null?A.firstBaseUpdate=w:y.next=w,A.lastBaseUpdate=w}function FA(y,w,A,P){var F=y.updateQueue;um=!1;var W=F.firstBaseUpdate,ee=F.lastBaseUpdate,he=F.shared.pending;if(he!==null){F.shared.pending=null;var ve=he,Le=ve.next;ve.next=null,ee===null?W=Le:ee.next=Le,ee=ve;var it=y.alternate;it!==null&&(it=it.updateQueue,he=it.lastBaseUpdate,he!==ee&&(he===null?it.firstBaseUpdate=Le:he.next=Le,it.lastBaseUpdate=ve))}if(W!==null){var ut=F.baseState;ee=0,it=Le=ve=null,he=W;do{var rt=he.lane,Ot=he.eventTime;if((P&rt)===rt){it!==null&&(it=it.next={eventTime:Ot,lane:0,tag:he.tag,payload:he.payload,callback:he.callback,next:null});e:{var Lt=y,Ft=he;switch(rt=w,Ot=A,Ft.tag){case 1:if(Lt=Ft.payload,typeof Lt=="function"){ut=Lt.call(Ot,ut,rt);break e}ut=Lt;break e;case 3:Lt.flags=Lt.flags&-65537|128;case 0:if(Lt=Ft.payload,rt=typeof Lt=="function"?Lt.call(Ot,ut,rt):Lt,rt==null)break e;ut=U({},ut,rt);break e;case 2:um=!0}}he.callback!==null&&he.lane!==0&&(y.flags|=64,rt=F.effects,rt===null?F.effects=[he]:rt.push(he))}else Ot={eventTime:Ot,lane:rt,tag:he.tag,payload:he.payload,callback:he.callback,next:null},it===null?(Le=it=Ot,ve=ut):it=it.next=Ot,ee|=rt;if(he=he.next,he===null){if(he=F.shared.pending,he===null)break;rt=he,he=rt.next,rt.next=null,F.lastBaseUpdate=rt,F.shared.pending=null}}while(!0);if(it===null&&(ve=ut),F.baseState=ve,F.firstBaseUpdate=Le,F.lastBaseUpdate=it,w=F.shared.interleaved,w!==null){F=w;do ee|=F.lane,F=F.next;while(F!==w)}else W===null&&(F.shared.lanes=0);wg|=ee,y.lanes=ee,y.memoizedState=ut}}function jJ(y,w,A){if(y=w.effects,w.effects=null,y!==null)for(w=0;w<y.length;w++){var P=y[w],F=P.callback;if(F!==null){if(P.callback=null,P=A,typeof F!="function")throw Error(n(191,F));F.call(P)}}}var jE={},Od=om(jE),BE=om(jE),zE=om(jE);function vg(y){if(y===jE)throw Error(n(174));return y}function R5(y,w){switch(Br(zE,w),Br(BE,y),Br(Od,jE),y=w.nodeType,y){case 9:case 11:w=(w=w.documentElement)?w.namespaceURI:Ne(null,"");break;default:y=y===8?w.parentNode:w,w=y.namespaceURI||null,y=y.tagName,w=Ne(w,y)}Gr(Od),Br(Od,w)}function P1(){Gr(Od),Gr(BE),Gr(zE)}function BJ(y){vg(zE.current);var w=vg(Od.current),A=Ne(w,y.type);w!==A&&(Br(BE,y),Br(Od,A))}function D5(y){BE.current===y&&(Gr(Od),Gr(BE))}var di=om(0);function jA(y){for(var w=y;w!==null;){if(w.tag===13){var A=w.memoizedState;if(A!==null&&(A=A.dehydrated,A===null||A.data==="$?"||A.data==="$!"))return w}else if(w.tag===19&&w.memoizedProps.revealOrder!==void 0){if((w.flags&128)!==0)return w}else if(w.child!==null){w.child.return=w,w=w.child;continue}if(w===y)break;for(;w.sibling===null;){if(w.return===null||w.return===y)return null;w=w.return}w.sibling.return=w.return,w=w.sibling}return null}var P5=[];function N5(){for(var y=0;y<P5.length;y++)P5[y]._workInProgressVersionPrimary=null;P5.length=0}var BA=E.ReactCurrentDispatcher,O5=E.ReactCurrentBatchConfig,bg=0,fi=null,ss=null,Cs=null,zA=!1,UE=!1,qE=0,zPe=0;function Ro(){throw Error(n(321))}function $5(y,w){if(w===null)return!1;for(var A=0;A<w.length&&A<y.length;A++)if(!oc(y[A],w[A]))return!1;return!0}function M5(y,w,A,P,F,W){if(bg=W,fi=w,w.memoizedState=null,w.updateQueue=null,w.lanes=0,BA.current=y===null||y.memoizedState===null?WPe:VPe,y=A(P,F),UE){W=0;do{if(UE=!1,qE=0,25<=W)throw Error(n(301));W+=1,Cs=ss=null,w.updateQueue=null,BA.current=GPe,y=A(P,F)}while(UE)}if(BA.current=HA,w=ss!==null&&ss.next!==null,bg=0,Cs=ss=fi=null,zA=!1,w)throw Error(n(300));return y}function L5(){var y=qE!==0;return qE=0,y}function $d(){var y={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Cs===null?fi.memoizedState=Cs=y:Cs=Cs.next=y,Cs}function hu(){if(ss===null){var y=fi.alternate;y=y!==null?y.memoizedState:null}else y=ss.next;var w=Cs===null?fi.memoizedState:Cs.next;if(w!==null)Cs=w,ss=y;else{if(y===null)throw Error(n(310));ss=y,y={memoizedState:ss.memoizedState,baseState:ss.baseState,baseQueue:ss.baseQueue,queue:ss.queue,next:null},Cs===null?fi.memoizedState=Cs=y:Cs=Cs.next=y}return Cs}function HE(y,w){return typeof w=="function"?w(y):w}function F5(y){var w=hu(),A=w.queue;if(A===null)throw Error(n(311));A.lastRenderedReducer=y;var P=ss,F=P.baseQueue,W=A.pending;if(W!==null){if(F!==null){var ee=F.next;F.next=W.next,W.next=ee}P.baseQueue=F=W,A.pending=null}if(F!==null){W=F.next,P=P.baseState;var he=ee=null,ve=null,Le=W;do{var it=Le.lane;if((bg&it)===it)ve!==null&&(ve=ve.next={lane:0,action:Le.action,hasEagerState:Le.hasEagerState,eagerState:Le.eagerState,next:null}),P=Le.hasEagerState?Le.eagerState:y(P,Le.action);else{var ut={lane:it,action:Le.action,hasEagerState:Le.hasEagerState,eagerState:Le.eagerState,next:null};ve===null?(he=ve=ut,ee=P):ve=ve.next=ut,fi.lanes|=it,wg|=it}Le=Le.next}while(Le!==null&&Le!==W);ve===null?ee=P:ve.next=he,oc(P,w.memoizedState)||(Ua=!0),w.memoizedState=P,w.baseState=ee,w.baseQueue=ve,A.lastRenderedState=P}if(y=A.interleaved,y!==null){F=y;do W=F.lane,fi.lanes|=W,wg|=W,F=F.next;while(F!==y)}else F===null&&(A.lanes=0);return[w.memoizedState,A.dispatch]}function j5(y){var w=hu(),A=w.queue;if(A===null)throw Error(n(311));A.lastRenderedReducer=y;var P=A.dispatch,F=A.pending,W=w.memoizedState;if(F!==null){A.pending=null;var ee=F=F.next;do W=y(W,ee.action),ee=ee.next;while(ee!==F);oc(W,w.memoizedState)||(Ua=!0),w.memoizedState=W,w.baseQueue===null&&(w.baseState=W),A.lastRenderedState=W}return[W,P]}function zJ(){}function UJ(y,w){var A=fi,P=hu(),F=w(),W=!oc(P.memoizedState,F);if(W&&(P.memoizedState=F,Ua=!0),P=P.queue,B5(WJ.bind(null,A,P,y),[y]),P.getSnapshot!==w||W||Cs!==null&&Cs.memoizedState.tag&1){if(A.flags|=2048,WE(9,HJ.bind(null,A,P,F,w),void 0,null),Ss===null)throw Error(n(349));(bg&30)!==0||qJ(A,w,F)}return F}function qJ(y,w,A){y.flags|=16384,y={getSnapshot:w,value:A},w=fi.updateQueue,w===null?(w={lastEffect:null,stores:null},fi.updateQueue=w,w.stores=[y]):(A=w.stores,A===null?w.stores=[y]:A.push(y))}function HJ(y,w,A,P){w.value=A,w.getSnapshot=P,VJ(w)&&GJ(y)}function WJ(y,w,A){return A(function(){VJ(w)&&GJ(y)})}function VJ(y){var w=y.getSnapshot;y=y.value;try{var A=w();return!oc(y,A)}catch{return!0}}function GJ(y){var w=ph(y,1);w!==null&&dc(w,y,1,-1)}function YJ(y){var w=$d();return typeof y=="function"&&(y=y()),w.memoizedState=w.baseState=y,y={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:HE,lastRenderedState:y},w.queue=y,y=y.dispatch=HPe.bind(null,fi,y),[w.memoizedState,y]}function WE(y,w,A,P){return y={tag:y,create:w,destroy:A,deps:P,next:null},w=fi.updateQueue,w===null?(w={lastEffect:null,stores:null},fi.updateQueue=w,w.lastEffect=y.next=y):(A=w.lastEffect,A===null?w.lastEffect=y.next=y:(P=A.next,A.next=y,y.next=P,w.lastEffect=y)),y}function KJ(){return hu().memoizedState}function UA(y,w,A,P){var F=$d();fi.flags|=y,F.memoizedState=WE(1|w,A,void 0,P===void 0?null:P)}function qA(y,w,A,P){var F=hu();P=P===void 0?null:P;var W=void 0;if(ss!==null){var ee=ss.memoizedState;if(W=ee.destroy,P!==null&&$5(P,ee.deps)){F.memoizedState=WE(w,A,W,P);return}}fi.flags|=y,F.memoizedState=WE(1|w,A,W,P)}function XJ(y,w){return UA(8390656,8,y,w)}function B5(y,w){return qA(2048,8,y,w)}function QJ(y,w){return qA(4,2,y,w)}function JJ(y,w){return qA(4,4,y,w)}function ZJ(y,w){if(typeof w=="function")return y=y(),w(y),function(){w(null)};if(w!=null)return y=y(),w.current=y,function(){w.current=null}}function eZ(y,w,A){return A=A!=null?A.concat([y]):null,qA(4,4,ZJ.bind(null,w,y),A)}function z5(){}function tZ(y,w){var A=hu();w=w===void 0?null:w;var P=A.memoizedState;return P!==null&&w!==null&&$5(w,P[1])?P[0]:(A.memoizedState=[y,w],y)}function nZ(y,w){var A=hu();w=w===void 0?null:w;var P=A.memoizedState;return P!==null&&w!==null&&$5(w,P[1])?P[0]:(y=y(),A.memoizedState=[y,w],y)}function rZ(y,w,A){return(bg&21)===0?(y.baseState&&(y.baseState=!1,Ua=!0),y.memoizedState=A):(oc(A,w)||(A=pt(),fi.lanes|=A,wg|=A,y.baseState=!0),w)}function UPe(y,w){var A=Vt;Vt=A!==0&&4>A?A:4,y(!0);var P=O5.transition;O5.transition={};try{y(!1),w()}finally{Vt=A,O5.transition=P}}function iZ(){return hu().memoizedState}function qPe(y,w,A){var P=pm(y);if(A={lane:P,action:A,hasEagerState:!1,eagerState:null,next:null},sZ(y))oZ(w,A);else if(A=MJ(y,w,A,P),A!==null){var F=sa();dc(A,y,P,F),aZ(A,w,P)}}function HPe(y,w,A){var P=pm(y),F={lane:P,action:A,hasEagerState:!1,eagerState:null,next:null};if(sZ(y))oZ(w,F);else{var W=y.alternate;if(y.lanes===0&&(W===null||W.lanes===0)&&(W=w.lastRenderedReducer,W!==null))try{var ee=w.lastRenderedState,he=W(ee,A);if(F.hasEagerState=!0,F.eagerState=he,oc(he,ee)){var ve=w.interleaved;ve===null?(F.next=F,k5(w)):(F.next=ve.next,ve.next=F),w.interleaved=F;return}}catch{}finally{}A=MJ(y,w,F,P),A!==null&&(F=sa(),dc(A,y,P,F),aZ(A,w,P))}}function sZ(y){var w=y.alternate;return y===fi||w!==null&&w===fi}function oZ(y,w){UE=zA=!0;var A=y.pending;A===null?w.next=w:(w.next=A.next,A.next=w),y.pending=w}function aZ(y,w,A){if((A&4194240)!==0){var P=w.lanes;P&=y.pendingLanes,A|=P,w.lanes=A,_n(y,A)}}var HA={readContext:fu,useCallback:Ro,useContext:Ro,useEffect:Ro,useImperativeHandle:Ro,useInsertionEffect:Ro,useLayoutEffect:Ro,useMemo:Ro,useReducer:Ro,useRef:Ro,useState:Ro,useDebugValue:Ro,useDeferredValue:Ro,useTransition:Ro,useMutableSource:Ro,useSyncExternalStore:Ro,useId:Ro,unstable_isNewReconciler:!1},WPe={readContext:fu,useCallback:function(y,w){return $d().memoizedState=[y,w===void 0?null:w],y},useContext:fu,useEffect:XJ,useImperativeHandle:function(y,w,A){return A=A!=null?A.concat([y]):null,UA(4194308,4,ZJ.bind(null,w,y),A)},useLayoutEffect:function(y,w){return UA(4194308,4,y,w)},useInsertionEffect:function(y,w){return UA(4,2,y,w)},useMemo:function(y,w){var A=$d();return w=w===void 0?null:w,y=y(),A.memoizedState=[y,w],y},useReducer:function(y,w,A){var P=$d();return w=A!==void 0?A(w):w,P.memoizedState=P.baseState=w,y={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:y,lastRenderedState:w},P.queue=y,y=y.dispatch=qPe.bind(null,fi,y),[P.memoizedState,y]},useRef:function(y){var w=$d();return y={current:y},w.memoizedState=y},useState:YJ,useDebugValue:z5,useDeferredValue:function(y){return $d().memoizedState=y},useTransition:function(){var y=YJ(!1),w=y[0];return y=UPe.bind(null,y[1]),$d().memoizedState=y,[w,y]},useMutableSource:function(){},useSyncExternalStore:function(y,w,A){var P=fi,F=$d();if(Zr){if(A===void 0)throw Error(n(407));A=A()}else{if(A=w(),Ss===null)throw Error(n(349));(bg&30)!==0||qJ(P,w,A)}F.memoizedState=A;var W={value:A,getSnapshot:w};return F.queue=W,XJ(WJ.bind(null,P,W,y),[y]),P.flags|=2048,WE(9,HJ.bind(null,P,W,A,w),void 0,null),A},useId:function(){var y=$d(),w=Ss.identifierPrefix;if(Zr){var A=hh,P=fh;A=(P&~(1<<32-ts(P)-1)).toString(32)+A,w=":"+w+"R"+A,A=qE++,0<A&&(w+="H"+A.toString(32)),w+=":"}else A=zPe++,w=":"+w+"r"+A.toString(32)+":";return y.memoizedState=w},unstable_isNewReconciler:!1},VPe={readContext:fu,useCallback:tZ,useContext:fu,useEffect:B5,useImperativeHandle:eZ,useInsertionEffect:QJ,useLayoutEffect:JJ,useMemo:nZ,useReducer:F5,useRef:KJ,useState:function(){return F5(HE)},useDebugValue:z5,useDeferredValue:function(y){var w=hu();return rZ(w,ss.memoizedState,y)},useTransition:function(){var y=F5(HE)[0],w=hu().memoizedState;return[y,w]},useMutableSource:zJ,useSyncExternalStore:UJ,useId:iZ,unstable_isNewReconciler:!1},GPe={readContext:fu,useCallback:tZ,useContext:fu,useEffect:B5,useImperativeHandle:eZ,useInsertionEffect:QJ,useLayoutEffect:JJ,useMemo:nZ,useReducer:j5,useRef:KJ,useState:function(){return j5(HE)},useDebugValue:z5,useDeferredValue:function(y){var w=hu();return ss===null?w.memoizedState=y:rZ(w,ss.memoizedState,y)},useTransition:function(){var y=j5(HE)[0],w=hu().memoizedState;return[y,w]},useMutableSource:zJ,useSyncExternalStore:UJ,useId:iZ,unstable_isNewReconciler:!1};function lc(y,w){if(y&&y.defaultProps){w=U({},w),y=y.defaultProps;for(var A in y)w[A]===void 0&&(w[A]=y[A]);return w}return w}function U5(y,w,A,P){w=y.memoizedState,A=A(P,w),A=A==null?w:U({},w,A),y.memoizedState=A,y.lanes===0&&(y.updateQueue.baseState=A)}var WA={isMounted:function(y){return(y=y._reactInternals)?ui(y)===y:!1},enqueueSetState:function(y,w,A){y=y._reactInternals;var P=sa(),F=pm(y),W=mh(P,F);W.payload=w,A!=null&&(W.callback=A),w=cm(y,W,F),w!==null&&(dc(w,y,F,P),LA(w,y,F))},enqueueReplaceState:function(y,w,A){y=y._reactInternals;var P=sa(),F=pm(y),W=mh(P,F);W.tag=1,W.payload=w,A!=null&&(W.callback=A),w=cm(y,W,F),w!==null&&(dc(w,y,F,P),LA(w,y,F))},enqueueForceUpdate:function(y,w){y=y._reactInternals;var A=sa(),P=pm(y),F=mh(A,P);F.tag=2,w!=null&&(F.callback=w),w=cm(y,F,P),w!==null&&(dc(w,y,P,A),LA(w,y,P))}};function lZ(y,w,A,P,F,W,ee){return y=y.stateNode,typeof y.shouldComponentUpdate=="function"?y.shouldComponentUpdate(P,W,ee):w.prototype&&w.prototype.isPureReactComponent?!DE(A,P)||!DE(F,W):!0}function uZ(y,w,A){var P=!1,F=am,W=w.contextType;return typeof W=="object"&&W!==null?W=fu(W):(F=za(w)?pg:Io.current,P=w.contextTypes,W=(P=P!=null)?C1(y,F):am),w=new w(A,W),y.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=WA,y.stateNode=w,w._reactInternals=y,P&&(y=y.stateNode,y.__reactInternalMemoizedUnmaskedChildContext=F,y.__reactInternalMemoizedMaskedChildContext=W),w}function cZ(y,w,A,P){y=w.state,typeof w.componentWillReceiveProps=="function"&&w.componentWillReceiveProps(A,P),typeof w.UNSAFE_componentWillReceiveProps=="function"&&w.UNSAFE_componentWillReceiveProps(A,P),w.state!==y&&WA.enqueueReplaceState(w,w.state,null)}function q5(y,w,A,P){var F=y.stateNode;F.props=A,F.state=y.memoizedState,F.refs={},I5(y);var W=w.contextType;typeof W=="object"&&W!==null?F.context=fu(W):(W=za(w)?pg:Io.current,F.context=C1(y,W)),F.state=y.memoizedState,W=w.getDerivedStateFromProps,typeof W=="function"&&(U5(y,w,W,A),F.state=y.memoizedState),typeof w.getDerivedStateFromProps=="function"||typeof F.getSnapshotBeforeUpdate=="function"||typeof F.UNSAFE_componentWillMount!="function"&&typeof F.componentWillMount!="function"||(w=F.state,typeof F.componentWillMount=="function"&&F.componentWillMount(),typeof F.UNSAFE_componentWillMount=="function"&&F.UNSAFE_componentWillMount(),w!==F.state&&WA.enqueueReplaceState(F,F.state,null),FA(y,A,F,P),F.state=y.memoizedState),typeof F.componentDidMount=="function"&&(y.flags|=4194308)}function N1(y,w){try{var A="",P=w;do A+=Q(P),P=P.return;while(P);var F=A}catch(W){F=`
Error generating stack: `+W.message+`
`+W.stack}return{value:y,source:w,stack:F,digest:null}}function H5(y,w,A){return{value:y,source:null,stack:A??null,digest:w??null}}function W5(y,w){try{console.error(w.value)}catch(A){setTimeout(function(){throw A})}}var YPe=typeof WeakMap=="function"?WeakMap:Map;function dZ(y,w,A){A=mh(-1,A),A.tag=3,A.payload={element:null};var P=w.value;return A.callback=function(){JA||(JA=!0,o8=P),W5(y,w)},A}function fZ(y,w,A){A=mh(-1,A),A.tag=3;var P=y.type.getDerivedStateFromError;if(typeof P=="function"){var F=w.value;A.payload=function(){return P(F)},A.callback=function(){W5(y,w)}}var W=y.stateNode;return W!==null&&typeof W.componentDidCatch=="function"&&(A.callback=function(){W5(y,w),typeof P!="function"&&(fm===null?fm=new Set([this]):fm.add(this));var ee=w.stack;this.componentDidCatch(w.value,{componentStack:ee!==null?ee:""})}),A}function hZ(y,w,A){var P=y.pingCache;if(P===null){P=y.pingCache=new YPe;var F=new Set;P.set(w,F)}else F=P.get(w),F===void 0&&(F=new Set,P.set(w,F));F.has(A)||(F.add(A),y=lNe.bind(null,y,w,A),w.then(y,y))}function pZ(y){do{var w;if((w=y.tag===13)&&(w=y.memoizedState,w=w!==null?w.dehydrated!==null:!0),w)return y;y=y.return}while(y!==null);return null}function mZ(y,w,A,P,F){return(y.mode&1)===0?(y===w?y.flags|=65536:(y.flags|=128,A.flags|=131072,A.flags&=-52805,A.tag===1&&(A.alternate===null?A.tag=17:(w=mh(-1,1),w.tag=2,cm(A,w,1))),A.lanes|=1),y):(y.flags|=65536,y.lanes=F,y)}var KPe=E.ReactCurrentOwner,Ua=!1;function ia(y,w,A,P){w.child=y===null?$J(w,null,A,P):I1(w,y.child,A,P)}function gZ(y,w,A,P,F){A=A.render;var W=w.ref;return D1(w,F),P=M5(y,w,A,P,W,F),A=L5(),y!==null&&!Ua?(w.updateQueue=y.updateQueue,w.flags&=-2053,y.lanes&=~F,gh(y,w,F)):(Zr&&A&&b5(w),w.flags|=1,ia(y,w,P,F),w.child)}function yZ(y,w,A,P,F){if(y===null){var W=A.type;return typeof W=="function"&&!h8(W)&&W.defaultProps===void 0&&A.compare===null&&A.defaultProps===void 0?(w.tag=15,w.type=W,vZ(y,w,W,P,F)):(y=ik(A.type,null,P,w,w.mode,F),y.ref=w.ref,y.return=w,w.child=y)}if(W=y.child,(y.lanes&F)===0){var ee=W.memoizedProps;if(A=A.compare,A=A!==null?A:DE,A(ee,P)&&y.ref===w.ref)return gh(y,w,F)}return w.flags|=1,y=gm(W,P),y.ref=w.ref,y.return=w,w.child=y}function vZ(y,w,A,P,F){if(y!==null){var W=y.memoizedProps;if(DE(W,P)&&y.ref===w.ref)if(Ua=!1,w.pendingProps=P=W,(y.lanes&F)!==0)(y.flags&131072)!==0&&(Ua=!0);else return w.lanes=y.lanes,gh(y,w,F)}return V5(y,w,A,P,F)}function bZ(y,w,A){var P=w.pendingProps,F=P.children,W=y!==null?y.memoizedState:null;if(P.mode==="hidden")if((w.mode&1)===0)w.memoizedState={baseLanes:0,cachePool:null,transitions:null},Br($1,kl),kl|=A;else{if((A&1073741824)===0)return y=W!==null?W.baseLanes|A:A,w.lanes=w.childLanes=1073741824,w.memoizedState={baseLanes:y,cachePool:null,transitions:null},w.updateQueue=null,Br($1,kl),kl|=y,null;w.memoizedState={baseLanes:0,cachePool:null,transitions:null},P=W!==null?W.baseLanes:A,Br($1,kl),kl|=P}else W!==null?(P=W.baseLanes|A,w.memoizedState=null):P=A,Br($1,kl),kl|=P;return ia(y,w,F,A),w.child}function wZ(y,w){var A=w.ref;(y===null&&A!==null||y!==null&&y.ref!==A)&&(w.flags|=512,w.flags|=2097152)}function V5(y,w,A,P,F){var W=za(A)?pg:Io.current;return W=C1(w,W),D1(w,F),A=M5(y,w,A,P,W,F),P=L5(),y!==null&&!Ua?(w.updateQueue=y.updateQueue,w.flags&=-2053,y.lanes&=~F,gh(y,w,F)):(Zr&&P&&b5(w),w.flags|=1,ia(y,w,A,F),w.child)}function xZ(y,w,A,P,F){if(za(A)){var W=!0;IA(w)}else W=!1;if(D1(w,F),w.stateNode===null)GA(y,w),uZ(w,A,P),q5(w,A,P,F),P=!0;else if(y===null){var ee=w.stateNode,he=w.memoizedProps;ee.props=he;var ve=ee.context,Le=A.contextType;typeof Le=="object"&&Le!==null?Le=fu(Le):(Le=za(A)?pg:Io.current,Le=C1(w,Le));var it=A.getDerivedStateFromProps,ut=typeof it=="function"||typeof ee.getSnapshotBeforeUpdate=="function";ut||typeof ee.UNSAFE_componentWillReceiveProps!="function"&&typeof ee.componentWillReceiveProps!="function"||(he!==P||ve!==Le)&&cZ(w,ee,P,Le),um=!1;var rt=w.memoizedState;ee.state=rt,FA(w,P,ee,F),ve=w.memoizedState,he!==P||rt!==ve||Ba.current||um?(typeof it=="function"&&(U5(w,A,it,P),ve=w.memoizedState),(he=um||lZ(w,A,he,P,rt,ve,Le))?(ut||typeof ee.UNSAFE_componentWillMount!="function"&&typeof ee.componentWillMount!="function"||(typeof ee.componentWillMount=="function"&&ee.componentWillMount(),typeof ee.UNSAFE_componentWillMount=="function"&&ee.UNSAFE_componentWillMount()),typeof ee.componentDidMount=="function"&&(w.flags|=4194308)):(typeof ee.componentDidMount=="function"&&(w.flags|=4194308),w.memoizedProps=P,w.memoizedState=ve),ee.props=P,ee.state=ve,ee.context=Le,P=he):(typeof ee.componentDidMount=="function"&&(w.flags|=4194308),P=!1)}else{ee=w.stateNode,LJ(y,w),he=w.memoizedProps,Le=w.type===w.elementType?he:lc(w.type,he),ee.props=Le,ut=w.pendingProps,rt=ee.context,ve=A.contextType,typeof ve=="object"&&ve!==null?ve=fu(ve):(ve=za(A)?pg:Io.current,ve=C1(w,ve));var Ot=A.getDerivedStateFromProps;(it=typeof Ot=="function"||typeof ee.getSnapshotBeforeUpdate=="function")||typeof ee.UNSAFE_componentWillReceiveProps!="function"&&typeof ee.componentWillReceiveProps!="function"||(he!==ut||rt!==ve)&&cZ(w,ee,P,ve),um=!1,rt=w.memoizedState,ee.state=rt,FA(w,P,ee,F);var Lt=w.memoizedState;he!==ut||rt!==Lt||Ba.current||um?(typeof Ot=="function"&&(U5(w,A,Ot,P),Lt=w.memoizedState),(Le=um||lZ(w,A,Le,P,rt,Lt,ve)||!1)?(it||typeof ee.UNSAFE_componentWillUpdate!="function"&&typeof ee.componentWillUpdate!="function"||(typeof ee.componentWillUpdate=="function"&&ee.componentWillUpdate(P,Lt,ve),typeof ee.UNSAFE_componentWillUpdate=="function"&&ee.UNSAFE_componentWillUpdate(P,Lt,ve)),typeof ee.componentDidUpdate=="function"&&(w.flags|=4),typeof ee.getSnapshotBeforeUpdate=="function"&&(w.flags|=1024)):(typeof ee.componentDidUpdate!="function"||he===y.memoizedProps&&rt===y.memoizedState||(w.flags|=4),typeof ee.getSnapshotBeforeUpdate!="function"||he===y.memoizedProps&&rt===y.memoizedState||(w.flags|=1024),w.memoizedProps=P,w.memoizedState=Lt),ee.props=P,ee.state=Lt,ee.context=ve,P=Le):(typeof ee.componentDidUpdate!="function"||he===y.memoizedProps&&rt===y.memoizedState||(w.flags|=4),typeof ee.getSnapshotBeforeUpdate!="function"||he===y.memoizedProps&&rt===y.memoizedState||(w.flags|=1024),P=!1)}return G5(y,w,A,P,W,F)}function G5(y,w,A,P,F,W){wZ(y,w);var ee=(w.flags&128)!==0;if(!P&&!ee)return F&&SJ(w,A,!1),gh(y,w,W);P=w.stateNode,KPe.current=w;var he=ee&&typeof A.getDerivedStateFromError!="function"?null:P.render();return w.flags|=1,y!==null&&ee?(w.child=I1(w,y.child,null,W),w.child=I1(w,null,he,W)):ia(y,w,he,W),w.memoizedState=P.state,F&&SJ(w,A,!0),w.child}function EZ(y){var w=y.stateNode;w.pendingContext?TJ(y,w.pendingContext,w.pendingContext!==w.context):w.context&&TJ(y,w.context,!1),R5(y,w.containerInfo)}function _Z(y,w,A,P,F){return k1(),_5(F),w.flags|=256,ia(y,w,A,P),w.child}var Y5={dehydrated:null,treeContext:null,retryLane:0};function K5(y){return{baseLanes:y,cachePool:null,transitions:null}}function TZ(y,w,A){var P=w.pendingProps,F=di.current,W=!1,ee=(w.flags&128)!==0,he;if((he=ee)||(he=y!==null&&y.memoizedState===null?!1:(F&2)!==0),he?(W=!0,w.flags&=-129):(y===null||y.memoizedState!==null)&&(F|=1),Br(di,F&1),y===null)return E5(w),y=w.memoizedState,y!==null&&(y=y.dehydrated,y!==null)?((w.mode&1)===0?w.lanes=1:y.data==="$!"?w.lanes=8:w.lanes=1073741824,null):(ee=P.children,y=P.fallback,W?(P=w.mode,W=w.child,ee={mode:"hidden",children:ee},(P&1)===0&&W!==null?(W.childLanes=0,W.pendingProps=ee):W=sk(ee,P,0,null),y=Tg(y,P,A,null),W.return=w,y.return=w,W.sibling=y,w.child=W,w.child.memoizedState=K5(A),w.memoizedState=Y5,y):X5(w,ee));if(F=y.memoizedState,F!==null&&(he=F.dehydrated,he!==null))return XPe(y,w,ee,P,he,F,A);if(W){W=P.fallback,ee=w.mode,F=y.child,he=F.sibling;var ve={mode:"hidden",children:P.children};return(ee&1)===0&&w.child!==F?(P=w.child,P.childLanes=0,P.pendingProps=ve,w.deletions=null):(P=gm(F,ve),P.subtreeFlags=F.subtreeFlags&14680064),he!==null?W=gm(he,W):(W=Tg(W,ee,A,null),W.flags|=2),W.return=w,P.return=w,P.sibling=W,w.child=P,P=W,W=w.child,ee=y.child.memoizedState,ee=ee===null?K5(A):{baseLanes:ee.baseLanes|A,cachePool:null,transitions:ee.transitions},W.memoizedState=ee,W.childLanes=y.childLanes&~A,w.memoizedState=Y5,P}return W=y.child,y=W.sibling,P=gm(W,{mode:"visible",children:P.children}),(w.mode&1)===0&&(P.lanes=A),P.return=w,P.sibling=null,y!==null&&(A=w.deletions,A===null?(w.deletions=[y],w.flags|=16):A.push(y)),w.child=P,w.memoizedState=null,P}function X5(y,w){return w=sk({mode:"visible",children:w},y.mode,0,null),w.return=y,y.child=w}function VA(y,w,A,P){return P!==null&&_5(P),I1(w,y.child,null,A),y=X5(w,w.pendingProps.children),y.flags|=2,w.memoizedState=null,y}function XPe(y,w,A,P,F,W,ee){if(A)return w.flags&256?(w.flags&=-257,P=H5(Error(n(422))),VA(y,w,ee,P)):w.memoizedState!==null?(w.child=y.child,w.flags|=128,null):(W=P.fallback,F=w.mode,P=sk({mode:"visible",children:P.children},F,0,null),W=Tg(W,F,ee,null),W.flags|=2,P.return=w,W.return=w,P.sibling=W,w.child=P,(w.mode&1)!==0&&I1(w,y.child,null,ee),w.child.memoizedState=K5(ee),w.memoizedState=Y5,W);if((w.mode&1)===0)return VA(y,w,ee,null);if(F.data==="$!"){if(P=F.nextSibling&&F.nextSibling.dataset,P)var he=P.dgst;return P=he,W=Error(n(419)),P=H5(W,P,void 0),VA(y,w,ee,P)}if(he=(ee&y.childLanes)!==0,Ua||he){if(P=Ss,P!==null){switch(ee&-ee){case 4:F=2;break;case 16:F=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:F=32;break;case 536870912:F=268435456;break;default:F=0}F=(F&(P.suspendedLanes|ee))!==0?0:F,F!==0&&F!==W.retryLane&&(W.retryLane=F,ph(y,F),dc(P,y,F,-1))}return f8(),P=H5(Error(n(421))),VA(y,w,ee,P)}return F.data==="$?"?(w.flags|=128,w.child=y.child,w=uNe.bind(null,y),F._reactRetry=w,null):(y=W.treeContext,Al=sm(F.nextSibling),Sl=w,Zr=!0,ac=null,y!==null&&(cu[du++]=fh,cu[du++]=hh,cu[du++]=mg,fh=y.id,hh=y.overflow,mg=w),w=X5(w,P.children),w.flags|=4096,w)}function CZ(y,w,A){y.lanes|=w;var P=y.alternate;P!==null&&(P.lanes|=w),A5(y.return,w,A)}function Q5(y,w,A,P,F){var W=y.memoizedState;W===null?y.memoizedState={isBackwards:w,rendering:null,renderingStartTime:0,last:P,tail:A,tailMode:F}:(W.isBackwards=w,W.rendering=null,W.renderingStartTime=0,W.last=P,W.tail=A,W.tailMode=F)}function SZ(y,w,A){var P=w.pendingProps,F=P.revealOrder,W=P.tail;if(ia(y,w,P.children,A),P=di.current,(P&2)!==0)P=P&1|2,w.flags|=128;else{if(y!==null&&(y.flags&128)!==0)e:for(y=w.child;y!==null;){if(y.tag===13)y.memoizedState!==null&&CZ(y,A,w);else if(y.tag===19)CZ(y,A,w);else if(y.child!==null){y.child.return=y,y=y.child;continue}if(y===w)break e;for(;y.sibling===null;){if(y.return===null||y.return===w)break e;y=y.return}y.sibling.return=y.return,y=y.sibling}P&=1}if(Br(di,P),(w.mode&1)===0)w.memoizedState=null;else switch(F){case"forwards":for(A=w.child,F=null;A!==null;)y=A.alternate,y!==null&&jA(y)===null&&(F=A),A=A.sibling;A=F,A===null?(F=w.child,w.child=null):(F=A.sibling,A.sibling=null),Q5(w,!1,F,A,W);break;case"backwards":for(A=null,F=w.child,w.child=null;F!==null;){if(y=F.alternate,y!==null&&jA(y)===null){w.child=F;break}y=F.sibling,F.sibling=A,A=F,F=y}Q5(w,!0,A,null,W);break;case"together":Q5(w,!1,null,null,void 0);break;default:w.memoizedState=null}return w.child}function GA(y,w){(w.mode&1)===0&&y!==null&&(y.alternate=null,w.alternate=null,w.flags|=2)}function gh(y,w,A){if(y!==null&&(w.dependencies=y.dependencies),wg|=w.lanes,(A&w.childLanes)===0)return null;if(y!==null&&w.child!==y.child)throw Error(n(153));if(w.child!==null){for(y=w.child,A=gm(y,y.pendingProps),w.child=A,A.return=w;y.sibling!==null;)y=y.sibling,A=A.sibling=gm(y,y.pendingProps),A.return=w;A.sibling=null}return w.child}function QPe(y,w,A){switch(w.tag){case 3:EZ(w),k1();break;case 5:BJ(w);break;case 1:za(w.type)&&IA(w);break;case 4:R5(w,w.stateNode.containerInfo);break;case 10:var P=w.type._context,F=w.memoizedProps.value;Br($A,P._currentValue),P._currentValue=F;break;case 13:if(P=w.memoizedState,P!==null)return P.dehydrated!==null?(Br(di,di.current&1),w.flags|=128,null):(A&w.child.childLanes)!==0?TZ(y,w,A):(Br(di,di.current&1),y=gh(y,w,A),y!==null?y.sibling:null);Br(di,di.current&1);break;case 19:if(P=(A&w.childLanes)!==0,(y.flags&128)!==0){if(P)return SZ(y,w,A);w.flags|=128}if(F=w.memoizedState,F!==null&&(F.rendering=null,F.tail=null,F.lastEffect=null),Br(di,di.current),P)break;return null;case 22:case 23:return w.lanes=0,bZ(y,w,A)}return gh(y,w,A)}var AZ,J5,kZ,IZ;AZ=function(y,w){for(var A=w.child;A!==null;){if(A.tag===5||A.tag===6)y.appendChild(A.stateNode);else if(A.tag!==4&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===w)break;for(;A.sibling===null;){if(A.return===null||A.return===w)return;A=A.return}A.sibling.return=A.return,A=A.sibling}},J5=function(){},kZ=function(y,w,A,P){var F=y.memoizedProps;if(F!==P){y=w.stateNode,vg(Od.current);var W=null;switch(A){case"input":F=Ee(y,F),P=Ee(y,P),W=[];break;case"select":F=U({},F,{value:void 0}),P=U({},P,{value:void 0}),W=[];break;case"textarea":F=vt(y,F),P=vt(y,P),W=[];break;default:typeof F.onClick!="function"&&typeof P.onClick=="function"&&(y.onclick=SA)}En(A,P);var ee;A=null;for(Le in F)if(!P.hasOwnProperty(Le)&&F.hasOwnProperty(Le)&&F[Le]!=null)if(Le==="style"){var he=F[Le];for(ee in he)he.hasOwnProperty(ee)&&(A||(A={}),A[ee]="")}else Le!=="dangerouslySetInnerHTML"&&Le!=="children"&&Le!=="suppressContentEditableWarning"&&Le!=="suppressHydrationWarning"&&Le!=="autoFocus"&&(i.hasOwnProperty(Le)?W||(W=[]):(W=W||[]).push(Le,null));for(Le in P){var ve=P[Le];if(he=F!=null?F[Le]:void 0,P.hasOwnProperty(Le)&&ve!==he&&(ve!=null||he!=null))if(Le==="style")if(he){for(ee in he)!he.hasOwnProperty(ee)||ve&&ve.hasOwnProperty(ee)||(A||(A={}),A[ee]="");for(ee in ve)ve.hasOwnProperty(ee)&&he[ee]!==ve[ee]&&(A||(A={}),A[ee]=ve[ee])}else A||(W||(W=[]),W.push(Le,A)),A=ve;else Le==="dangerouslySetInnerHTML"?(ve=ve?ve.__html:void 0,he=he?he.__html:void 0,ve!=null&&he!==ve&&(W=W||[]).push(Le,ve)):Le==="children"?typeof ve!="string"&&typeof ve!="number"||(W=W||[]).push(Le,""+ve):Le!=="suppressContentEditableWarning"&&Le!=="suppressHydrationWarning"&&(i.hasOwnProperty(Le)?(ve!=null&&Le==="onScroll"&&Vr("scroll",y),W||he===ve||(W=[])):(W=W||[]).push(Le,ve))}A&&(W=W||[]).push("style",A);var Le=W;(w.updateQueue=Le)&&(w.flags|=4)}},IZ=function(y,w,A,P){A!==P&&(w.flags|=4)};function VE(y,w){if(!Zr)switch(y.tailMode){case"hidden":w=y.tail;for(var A=null;w!==null;)w.alternate!==null&&(A=w),w=w.sibling;A===null?y.tail=null:A.sibling=null;break;case"collapsed":A=y.tail;for(var P=null;A!==null;)A.alternate!==null&&(P=A),A=A.sibling;P===null?w||y.tail===null?y.tail=null:y.tail.sibling=null:P.sibling=null}}function Do(y){var w=y.alternate!==null&&y.alternate.child===y.child,A=0,P=0;if(w)for(var F=y.child;F!==null;)A|=F.lanes|F.childLanes,P|=F.subtreeFlags&14680064,P|=F.flags&14680064,F.return=y,F=F.sibling;else for(F=y.child;F!==null;)A|=F.lanes|F.childLanes,P|=F.subtreeFlags,P|=F.flags,F.return=y,F=F.sibling;return y.subtreeFlags|=P,y.childLanes=A,w}function JPe(y,w,A){var P=w.pendingProps;switch(w5(w),w.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Do(w),null;case 1:return za(w.type)&&kA(),Do(w),null;case 3:return P=w.stateNode,P1(),Gr(Ba),Gr(Io),N5(),P.pendingContext&&(P.context=P.pendingContext,P.pendingContext=null),(y===null||y.child===null)&&(NA(w)?w.flags|=4:y===null||y.memoizedState.isDehydrated&&(w.flags&256)===0||(w.flags|=1024,ac!==null&&(u8(ac),ac=null))),J5(y,w),Do(w),null;case 5:D5(w);var F=vg(zE.current);if(A=w.type,y!==null&&w.stateNode!=null)kZ(y,w,A,P,F),y.ref!==w.ref&&(w.flags|=512,w.flags|=2097152);else{if(!P){if(w.stateNode===null)throw Error(n(166));return Do(w),null}if(y=vg(Od.current),NA(w)){P=w.stateNode,A=w.type;var W=w.memoizedProps;switch(P[Nd]=w,P[ME]=W,y=(w.mode&1)!==0,A){case"dialog":Vr("cancel",P),Vr("close",P);break;case"iframe":case"object":case"embed":Vr("load",P);break;case"video":case"audio":for(F=0;F<NE.length;F++)Vr(NE[F],P);break;case"source":Vr("error",P);break;case"img":case"image":case"link":Vr("error",P),Vr("load",P);break;case"details":Vr("toggle",P);break;case"input":Fe(P,W),Vr("invalid",P);break;case"select":P._wrapperState={wasMultiple:!!W.multiple},Vr("invalid",P);break;case"textarea":Pe(P,W),Vr("invalid",P)}En(A,W),F=null;for(var ee in W)if(W.hasOwnProperty(ee)){var he=W[ee];ee==="children"?typeof he=="string"?P.textContent!==he&&(W.suppressHydrationWarning!==!0&&CA(P.textContent,he,y),F=["children",he]):typeof he=="number"&&P.textContent!==""+he&&(W.suppressHydrationWarning!==!0&&CA(P.textContent,he,y),F=["children",""+he]):i.hasOwnProperty(ee)&&he!=null&&ee==="onScroll"&&Vr("scroll",P)}switch(A){case"input":te(P),Be(P,W,!0);break;case"textarea":te(P),Wt(P);break;case"select":case"option":break;default:typeof W.onClick=="function"&&(P.onclick=SA)}P=F,w.updateQueue=P,P!==null&&(w.flags|=4)}else{ee=F.nodeType===9?F:F.ownerDocument,y==="http://www.w3.org/1999/xhtml"&&(y=Ce(A)),y==="http://www.w3.org/1999/xhtml"?A==="script"?(y=ee.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild)):typeof P.is=="string"?y=ee.createElement(A,{is:P.is}):(y=ee.createElement(A),A==="select"&&(ee=y,P.multiple?ee.multiple=!0:P.size&&(ee.size=P.size))):y=ee.createElementNS(y,A),y[Nd]=w,y[ME]=P,AZ(y,w,!1,!1),w.stateNode=y;e:{switch(ee=Mr(A,P),A){case"dialog":Vr("cancel",y),Vr("close",y),F=P;break;case"iframe":case"object":case"embed":Vr("load",y),F=P;break;case"video":case"audio":for(F=0;F<NE.length;F++)Vr(NE[F],y);F=P;break;case"source":Vr("error",y),F=P;break;case"img":case"image":case"link":Vr("error",y),Vr("load",y),F=P;break;case"details":Vr("toggle",y),F=P;break;case"input":Fe(y,P),F=Ee(y,P),Vr("invalid",y);break;case"option":F=P;break;case"select":y._wrapperState={wasMultiple:!!P.multiple},F=U({},P,{value:void 0}),Vr("invalid",y);break;case"textarea":Pe(y,P),F=vt(y,P),Vr("invalid",y);break;default:F=P}En(A,F),he=F;for(W in he)if(he.hasOwnProperty(W)){var ve=he[W];W==="style"?Wr(y,ve):W==="dangerouslySetInnerHTML"?(ve=ve?ve.__html:void 0,ve!=null&&xt(y,ve)):W==="children"?typeof ve=="string"?(A!=="textarea"||ve!=="")&&Ct(y,ve):typeof ve=="number"&&Ct(y,""+ve):W!=="suppressContentEditableWarning"&&W!=="suppressHydrationWarning"&&W!=="autoFocus"&&(i.hasOwnProperty(W)?ve!=null&&W==="onScroll"&&Vr("scroll",y):ve!=null&&x(y,W,ve,ee))}switch(A){case"input":te(y),Be(y,P,!1);break;case"textarea":te(y),Wt(y);break;case"option":P.value!=null&&y.setAttribute("value",""+ae(P.value));break;case"select":y.multiple=!!P.multiple,W=P.value,W!=null?ht(y,!!P.multiple,W,!1):P.defaultValue!=null&&ht(y,!!P.multiple,P.defaultValue,!0);break;default:typeof F.onClick=="function"&&(y.onclick=SA)}switch(A){case"button":case"input":case"select":case"textarea":P=!!P.autoFocus;break e;case"img":P=!0;break e;default:P=!1}}P&&(w.flags|=4)}w.ref!==null&&(w.flags|=512,w.flags|=2097152)}return Do(w),null;case 6:if(y&&w.stateNode!=null)IZ(y,w,y.memoizedProps,P);else{if(typeof P!="string"&&w.stateNode===null)throw Error(n(166));if(A=vg(zE.current),vg(Od.current),NA(w)){if(P=w.stateNode,A=w.memoizedProps,P[Nd]=w,(W=P.nodeValue!==A)&&(y=Sl,y!==null))switch(y.tag){case 3:CA(P.nodeValue,A,(y.mode&1)!==0);break;case 5:y.memoizedProps.suppressHydrationWarning!==!0&&CA(P.nodeValue,A,(y.mode&1)!==0)}W&&(w.flags|=4)}else P=(A.nodeType===9?A:A.ownerDocument).createTextNode(P),P[Nd]=w,w.stateNode=P}return Do(w),null;case 13:if(Gr(di),P=w.memoizedState,y===null||y.memoizedState!==null&&y.memoizedState.dehydrated!==null){if(Zr&&Al!==null&&(w.mode&1)!==0&&(w.flags&128)===0)PJ(),k1(),w.flags|=98560,W=!1;else if(W=NA(w),P!==null&&P.dehydrated!==null){if(y===null){if(!W)throw Error(n(318));if(W=w.memoizedState,W=W!==null?W.dehydrated:null,!W)throw Error(n(317));W[Nd]=w}else k1(),(w.flags&128)===0&&(w.memoizedState=null),w.flags|=4;Do(w),W=!1}else ac!==null&&(u8(ac),ac=null),W=!0;if(!W)return w.flags&65536?w:null}return(w.flags&128)!==0?(w.lanes=A,w):(P=P!==null,P!==(y!==null&&y.memoizedState!==null)&&P&&(w.child.flags|=8192,(w.mode&1)!==0&&(y===null||(di.current&1)!==0?os===0&&(os=3):f8())),w.updateQueue!==null&&(w.flags|=4),Do(w),null);case 4:return P1(),J5(y,w),y===null&&OE(w.stateNode.containerInfo),Do(w),null;case 10:return S5(w.type._context),Do(w),null;case 17:return za(w.type)&&kA(),Do(w),null;case 19:if(Gr(di),W=w.memoizedState,W===null)return Do(w),null;if(P=(w.flags&128)!==0,ee=W.rendering,ee===null)if(P)VE(W,!1);else{if(os!==0||y!==null&&(y.flags&128)!==0)for(y=w.child;y!==null;){if(ee=jA(y),ee!==null){for(w.flags|=128,VE(W,!1),P=ee.updateQueue,P!==null&&(w.updateQueue=P,w.flags|=4),w.subtreeFlags=0,P=A,A=w.child;A!==null;)W=A,y=P,W.flags&=14680066,ee=W.alternate,ee===null?(W.childLanes=0,W.lanes=y,W.child=null,W.subtreeFlags=0,W.memoizedProps=null,W.memoizedState=null,W.updateQueue=null,W.dependencies=null,W.stateNode=null):(W.childLanes=ee.childLanes,W.lanes=ee.lanes,W.child=ee.child,W.subtreeFlags=0,W.deletions=null,W.memoizedProps=ee.memoizedProps,W.memoizedState=ee.memoizedState,W.updateQueue=ee.updateQueue,W.type=ee.type,y=ee.dependencies,W.dependencies=y===null?null:{lanes:y.lanes,firstContext:y.firstContext}),A=A.sibling;return Br(di,di.current&1|2),w.child}y=y.sibling}W.tail!==null&&$n()>M1&&(w.flags|=128,P=!0,VE(W,!1),w.lanes=4194304)}else{if(!P)if(y=jA(ee),y!==null){if(w.flags|=128,P=!0,A=y.updateQueue,A!==null&&(w.updateQueue=A,w.flags|=4),VE(W,!0),W.tail===null&&W.tailMode==="hidden"&&!ee.alternate&&!Zr)return Do(w),null}else 2*$n()-W.renderingStartTime>M1&&A!==1073741824&&(w.flags|=128,P=!0,VE(W,!1),w.lanes=4194304);W.isBackwards?(ee.sibling=w.child,w.child=ee):(A=W.last,A!==null?A.sibling=ee:w.child=ee,W.last=ee)}return W.tail!==null?(w=W.tail,W.rendering=w,W.tail=w.sibling,W.renderingStartTime=$n(),w.sibling=null,A=di.current,Br(di,P?A&1|2:A&1),w):(Do(w),null);case 22:case 23:return d8(),P=w.memoizedState!==null,y!==null&&y.memoizedState!==null!==P&&(w.flags|=8192),P&&(w.mode&1)!==0?(kl&1073741824)!==0&&(Do(w),w.subtreeFlags&6&&(w.flags|=8192)):Do(w),null;case 24:return null;case 25:return null}throw Error(n(156,w.tag))}function ZPe(y,w){switch(w5(w),w.tag){case 1:return za(w.type)&&kA(),y=w.flags,y&65536?(w.flags=y&-65537|128,w):null;case 3:return P1(),Gr(Ba),Gr(Io),N5(),y=w.flags,(y&65536)!==0&&(y&128)===0?(w.flags=y&-65537|128,w):null;case 5:return D5(w),null;case 13:if(Gr(di),y=w.memoizedState,y!==null&&y.dehydrated!==null){if(w.alternate===null)throw Error(n(340));k1()}return y=w.flags,y&65536?(w.flags=y&-65537|128,w):null;case 19:return Gr(di),null;case 4:return P1(),null;case 10:return S5(w.type._context),null;case 22:case 23:return d8(),null;case 24:return null;default:return null}}var YA=!1,Po=!1,eNe=typeof WeakSet=="function"?WeakSet:Set,Mt=null;function O1(y,w){var A=y.ref;if(A!==null)if(typeof A=="function")try{A(null)}catch(P){vi(y,w,P)}else A.current=null}function Z5(y,w,A){try{A()}catch(P){vi(y,w,P)}}var RZ=!1;function tNe(y,w){if(d5=ce,y=lJ(),r5(y)){if("selectionStart"in y)var A={start:y.selectionStart,end:y.selectionEnd};else e:{A=(A=y.ownerDocument)&&A.defaultView||window;var P=A.getSelection&&A.getSelection();if(P&&P.rangeCount!==0){A=P.anchorNode;var F=P.anchorOffset,W=P.focusNode;P=P.focusOffset;try{A.nodeType,W.nodeType}catch{A=null;break e}var ee=0,he=-1,ve=-1,Le=0,it=0,ut=y,rt=null;t:for(;;){for(var Ot;ut!==A||F!==0&&ut.nodeType!==3||(he=ee+F),ut!==W||P!==0&&ut.nodeType!==3||(ve=ee+P),ut.nodeType===3&&(ee+=ut.nodeValue.length),(Ot=ut.firstChild)!==null;)rt=ut,ut=Ot;for(;;){if(ut===y)break t;if(rt===A&&++Le===F&&(he=ee),rt===W&&++it===P&&(ve=ee),(Ot=ut.nextSibling)!==null)break;ut=rt,rt=ut.parentNode}ut=Ot}A=he===-1||ve===-1?null:{start:he,end:ve}}else A=null}A=A||{start:0,end:0}}else A=null;for(f5={focusedElem:y,selectionRange:A},ce=!1,Mt=w;Mt!==null;)if(w=Mt,y=w.child,(w.subtreeFlags&1028)!==0&&y!==null)y.return=w,Mt=y;else for(;Mt!==null;){w=Mt;try{var Lt=w.alternate;if((w.flags&1024)!==0)switch(w.tag){case 0:case 11:case 15:break;case 1:if(Lt!==null){var Ft=Lt.memoizedProps,ki=Lt.memoizedState,Ie=w.stateNode,Te=Ie.getSnapshotBeforeUpdate(w.elementType===w.type?Ft:lc(w.type,Ft),ki);Ie.__reactInternalSnapshotBeforeUpdate=Te}break;case 3:var De=w.stateNode.containerInfo;De.nodeType===1?De.textContent="":De.nodeType===9&&De.documentElement&&De.removeChild(De.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(yt){vi(w,w.return,yt)}if(y=w.sibling,y!==null){y.return=w.return,Mt=y;break}Mt=w.return}return Lt=RZ,RZ=!1,Lt}function GE(y,w,A){var P=w.updateQueue;if(P=P!==null?P.lastEffect:null,P!==null){var F=P=P.next;do{if((F.tag&y)===y){var W=F.destroy;F.destroy=void 0,W!==void 0&&Z5(w,A,W)}F=F.next}while(F!==P)}}function KA(y,w){if(w=w.updateQueue,w=w!==null?w.lastEffect:null,w!==null){var A=w=w.next;do{if((A.tag&y)===y){var P=A.create;A.destroy=P()}A=A.next}while(A!==w)}}function e8(y){var w=y.ref;if(w!==null){var A=y.stateNode;switch(y.tag){case 5:y=A;break;default:y=A}typeof w=="function"?w(y):w.current=y}}function DZ(y){var w=y.alternate;w!==null&&(y.alternate=null,DZ(w)),y.child=null,y.deletions=null,y.sibling=null,y.tag===5&&(w=y.stateNode,w!==null&&(delete w[Nd],delete w[ME],delete w[g5],delete w[LPe],delete w[FPe])),y.stateNode=null,y.return=null,y.dependencies=null,y.memoizedProps=null,y.memoizedState=null,y.pendingProps=null,y.stateNode=null,y.updateQueue=null}function PZ(y){return y.tag===5||y.tag===3||y.tag===4}function NZ(y){e:for(;;){for(;y.sibling===null;){if(y.return===null||PZ(y.return))return null;y=y.return}for(y.sibling.return=y.return,y=y.sibling;y.tag!==5&&y.tag!==6&&y.tag!==18;){if(y.flags&2||y.child===null||y.tag===4)continue e;y.child.return=y,y=y.child}if(!(y.flags&2))return y.stateNode}}function t8(y,w,A){var P=y.tag;if(P===5||P===6)y=y.stateNode,w?A.nodeType===8?A.parentNode.insertBefore(y,w):A.insertBefore(y,w):(A.nodeType===8?(w=A.parentNode,w.insertBefore(y,A)):(w=A,w.appendChild(y)),A=A._reactRootContainer,A!=null||w.onclick!==null||(w.onclick=SA));else if(P!==4&&(y=y.child,y!==null))for(t8(y,w,A),y=y.sibling;y!==null;)t8(y,w,A),y=y.sibling}function n8(y,w,A){var P=y.tag;if(P===5||P===6)y=y.stateNode,w?A.insertBefore(y,w):A.appendChild(y);else if(P!==4&&(y=y.child,y!==null))for(n8(y,w,A),y=y.sibling;y!==null;)n8(y,w,A),y=y.sibling}var no=null,uc=!1;function dm(y,w,A){for(A=A.child;A!==null;)OZ(y,w,A),A=A.sibling}function OZ(y,w,A){if(es&&typeof es.onCommitFiberUnmount=="function")try{es.onCommitFiberUnmount(ou,A)}catch{}switch(A.tag){case 5:Po||O1(A,w);case 6:var P=no,F=uc;no=null,dm(y,w,A),no=P,uc=F,no!==null&&(uc?(y=no,A=A.stateNode,y.nodeType===8?y.parentNode.removeChild(A):y.removeChild(A)):no.removeChild(A.stateNode));break;case 18:no!==null&&(uc?(y=no,A=A.stateNode,y.nodeType===8?m5(y.parentNode,A):y.nodeType===1&&m5(y,A),La(y)):m5(no,A.stateNode));break;case 4:P=no,F=uc,no=A.stateNode.containerInfo,uc=!0,dm(y,w,A),no=P,uc=F;break;case 0:case 11:case 14:case 15:if(!Po&&(P=A.updateQueue,P!==null&&(P=P.lastEffect,P!==null))){F=P=P.next;do{var W=F,ee=W.destroy;W=W.tag,ee!==void 0&&((W&2)!==0||(W&4)!==0)&&Z5(A,w,ee),F=F.next}while(F!==P)}dm(y,w,A);break;case 1:if(!Po&&(O1(A,w),P=A.stateNode,typeof P.componentWillUnmount=="function"))try{P.props=A.memoizedProps,P.state=A.memoizedState,P.componentWillUnmount()}catch(he){vi(A,w,he)}dm(y,w,A);break;case 21:dm(y,w,A);break;case 22:A.mode&1?(Po=(P=Po)||A.memoizedState!==null,dm(y,w,A),Po=P):dm(y,w,A);break;default:dm(y,w,A)}}function $Z(y){var w=y.updateQueue;if(w!==null){y.updateQueue=null;var A=y.stateNode;A===null&&(A=y.stateNode=new eNe),w.forEach(function(P){var F=cNe.bind(null,y,P);A.has(P)||(A.add(P),P.then(F,F))})}}function cc(y,w){var A=w.deletions;if(A!==null)for(var P=0;P<A.length;P++){var F=A[P];try{var W=y,ee=w,he=ee;e:for(;he!==null;){switch(he.tag){case 5:no=he.stateNode,uc=!1;break e;case 3:no=he.stateNode.containerInfo,uc=!0;break e;case 4:no=he.stateNode.containerInfo,uc=!0;break e}he=he.return}if(no===null)throw Error(n(160));OZ(W,ee,F),no=null,uc=!1;var ve=F.alternate;ve!==null&&(ve.return=null),F.return=null}catch(Le){vi(F,w,Le)}}if(w.subtreeFlags&12854)for(w=w.child;w!==null;)MZ(w,y),w=w.sibling}function MZ(y,w){var A=y.alternate,P=y.flags;switch(y.tag){case 0:case 11:case 14:case 15:if(cc(w,y),Md(y),P&4){try{GE(3,y,y.return),KA(3,y)}catch(Ft){vi(y,y.return,Ft)}try{GE(5,y,y.return)}catch(Ft){vi(y,y.return,Ft)}}break;case 1:cc(w,y),Md(y),P&512&&A!==null&&O1(A,A.return);break;case 5:if(cc(w,y),Md(y),P&512&&A!==null&&O1(A,A.return),y.flags&32){var F=y.stateNode;try{Ct(F,"")}catch(Ft){vi(y,y.return,Ft)}}if(P&4&&(F=y.stateNode,F!=null)){var W=y.memoizedProps,ee=A!==null?A.memoizedProps:W,he=y.type,ve=y.updateQueue;if(y.updateQueue=null,ve!==null)try{he==="input"&&W.type==="radio"&&W.name!=null&&We(F,W),Mr(he,ee);var Le=Mr(he,W);for(ee=0;ee<ve.length;ee+=2){var it=ve[ee],ut=ve[ee+1];it==="style"?Wr(F,ut):it==="dangerouslySetInnerHTML"?xt(F,ut):it==="children"?Ct(F,ut):x(F,it,ut,Le)}switch(he){case"input":Me(F,W);break;case"textarea":wt(F,W);break;case"select":var rt=F._wrapperState.wasMultiple;F._wrapperState.wasMultiple=!!W.multiple;var Ot=W.value;Ot!=null?ht(F,!!W.multiple,Ot,!1):rt!==!!W.multiple&&(W.defaultValue!=null?ht(F,!!W.multiple,W.defaultValue,!0):ht(F,!!W.multiple,W.multiple?[]:"",!1))}F[ME]=W}catch(Ft){vi(y,y.return,Ft)}}break;case 6:if(cc(w,y),Md(y),P&4){if(y.stateNode===null)throw Error(n(162));F=y.stateNode,W=y.memoizedProps;try{F.nodeValue=W}catch(Ft){vi(y,y.return,Ft)}}break;case 3:if(cc(w,y),Md(y),P&4&&A!==null&&A.memoizedState.isDehydrated)try{La(w.containerInfo)}catch(Ft){vi(y,y.return,Ft)}break;case 4:cc(w,y),Md(y);break;case 13:cc(w,y),Md(y),F=y.child,F.flags&8192&&(W=F.memoizedState!==null,F.stateNode.isHidden=W,!W||F.alternate!==null&&F.alternate.memoizedState!==null||(s8=$n())),P&4&&$Z(y);break;case 22:if(it=A!==null&&A.memoizedState!==null,y.mode&1?(Po=(Le=Po)||it,cc(w,y),Po=Le):cc(w,y),Md(y),P&8192){if(Le=y.memoizedState!==null,(y.stateNode.isHidden=Le)&&!it&&(y.mode&1)!==0)for(Mt=y,it=y.child;it!==null;){for(ut=Mt=it;Mt!==null;){switch(rt=Mt,Ot=rt.child,rt.tag){case 0:case 11:case 14:case 15:GE(4,rt,rt.return);break;case 1:O1(rt,rt.return);var Lt=rt.stateNode;if(typeof Lt.componentWillUnmount=="function"){P=rt,A=rt.return;try{w=P,Lt.props=w.memoizedProps,Lt.state=w.memoizedState,Lt.componentWillUnmount()}catch(Ft){vi(P,A,Ft)}}break;case 5:O1(rt,rt.return);break;case 22:if(rt.memoizedState!==null){jZ(ut);continue}}Ot!==null?(Ot.return=rt,Mt=Ot):jZ(ut)}it=it.sibling}e:for(it=null,ut=y;;){if(ut.tag===5){if(it===null){it=ut;try{F=ut.stateNode,Le?(W=F.style,typeof W.setProperty=="function"?W.setProperty("display","none","important"):W.display="none"):(he=ut.stateNode,ve=ut.memoizedProps.style,ee=ve!=null&&ve.hasOwnProperty("display")?ve.display:null,he.style.display=er("display",ee))}catch(Ft){vi(y,y.return,Ft)}}}else if(ut.tag===6){if(it===null)try{ut.stateNode.nodeValue=Le?"":ut.memoizedProps}catch(Ft){vi(y,y.return,Ft)}}else if((ut.tag!==22&&ut.tag!==23||ut.memoizedState===null||ut===y)&&ut.child!==null){ut.child.return=ut,ut=ut.child;continue}if(ut===y)break e;for(;ut.sibling===null;){if(ut.return===null||ut.return===y)break e;it===ut&&(it=null),ut=ut.return}it===ut&&(it=null),ut.sibling.return=ut.return,ut=ut.sibling}}break;case 19:cc(w,y),Md(y),P&4&&$Z(y);break;case 21:break;default:cc(w,y),Md(y)}}function Md(y){var w=y.flags;if(w&2){try{e:{for(var A=y.return;A!==null;){if(PZ(A)){var P=A;break e}A=A.return}throw Error(n(160))}switch(P.tag){case 5:var F=P.stateNode;P.flags&32&&(Ct(F,""),P.flags&=-33);var W=NZ(y);n8(y,W,F);break;case 3:case 4:var ee=P.stateNode.containerInfo,he=NZ(y);t8(y,he,ee);break;default:throw Error(n(161))}}catch(ve){vi(y,y.return,ve)}y.flags&=-3}w&4096&&(y.flags&=-4097)}function nNe(y,w,A){Mt=y,LZ(y)}function LZ(y,w,A){for(var P=(y.mode&1)!==0;Mt!==null;){var F=Mt,W=F.child;if(F.tag===22&&P){var ee=F.memoizedState!==null||YA;if(!ee){var he=F.alternate,ve=he!==null&&he.memoizedState!==null||Po;he=YA;var Le=Po;if(YA=ee,(Po=ve)&&!Le)for(Mt=F;Mt!==null;)ee=Mt,ve=ee.child,ee.tag===22&&ee.memoizedState!==null?BZ(F):ve!==null?(ve.return=ee,Mt=ve):BZ(F);for(;W!==null;)Mt=W,LZ(W),W=W.sibling;Mt=F,YA=he,Po=Le}FZ(y)}else(F.subtreeFlags&8772)!==0&&W!==null?(W.return=F,Mt=W):FZ(y)}}function FZ(y){for(;Mt!==null;){var w=Mt;if((w.flags&8772)!==0){var A=w.alternate;try{if((w.flags&8772)!==0)switch(w.tag){case 0:case 11:case 15:Po||KA(5,w);break;case 1:var P=w.stateNode;if(w.flags&4&&!Po)if(A===null)P.componentDidMount();else{var F=w.elementType===w.type?A.memoizedProps:lc(w.type,A.memoizedProps);P.componentDidUpdate(F,A.memoizedState,P.__reactInternalSnapshotBeforeUpdate)}var W=w.updateQueue;W!==null&&jJ(w,W,P);break;case 3:var ee=w.updateQueue;if(ee!==null){if(A=null,w.child!==null)switch(w.child.tag){case 5:A=w.child.stateNode;break;case 1:A=w.child.stateNode}jJ(w,ee,A)}break;case 5:var he=w.stateNode;if(A===null&&w.flags&4){A=he;var ve=w.memoizedProps;switch(w.type){case"button":case"input":case"select":case"textarea":ve.autoFocus&&A.focus();break;case"img":ve.src&&(A.src=ve.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(w.memoizedState===null){var Le=w.alternate;if(Le!==null){var it=Le.memoizedState;if(it!==null){var ut=it.dehydrated;ut!==null&&La(ut)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Po||w.flags&512&&e8(w)}catch(rt){vi(w,w.return,rt)}}if(w===y){Mt=null;break}if(A=w.sibling,A!==null){A.return=w.return,Mt=A;break}Mt=w.return}}function jZ(y){for(;Mt!==null;){var w=Mt;if(w===y){Mt=null;break}var A=w.sibling;if(A!==null){A.return=w.return,Mt=A;break}Mt=w.return}}function BZ(y){for(;Mt!==null;){var w=Mt;try{switch(w.tag){case 0:case 11:case 15:var A=w.return;try{KA(4,w)}catch(ve){vi(w,A,ve)}break;case 1:var P=w.stateNode;if(typeof P.componentDidMount=="function"){var F=w.return;try{P.componentDidMount()}catch(ve){vi(w,F,ve)}}var W=w.return;try{e8(w)}catch(ve){vi(w,W,ve)}break;case 5:var ee=w.return;try{e8(w)}catch(ve){vi(w,ee,ve)}}}catch(ve){vi(w,w.return,ve)}if(w===y){Mt=null;break}var he=w.sibling;if(he!==null){he.return=w.return,Mt=he;break}Mt=w.return}}var rNe=Math.ceil,XA=E.ReactCurrentDispatcher,r8=E.ReactCurrentOwner,pu=E.ReactCurrentBatchConfig,Kn=0,Ss=null,qi=null,ro=0,kl=0,$1=om(0),os=0,YE=null,wg=0,QA=0,i8=0,KE=null,qa=null,s8=0,M1=1/0,yh=null,JA=!1,o8=null,fm=null,ZA=!1,hm=null,ek=0,XE=0,a8=null,tk=-1,nk=0;function sa(){return(Kn&6)!==0?$n():tk!==-1?tk:tk=$n()}function pm(y){return(y.mode&1)===0?1:(Kn&2)!==0&&ro!==0?ro&-ro:BPe.transition!==null?(nk===0&&(nk=pt()),nk):(y=Vt,y!==0||(y=window.event,y=y===void 0?16:pr(y.type)),y)}function dc(y,w,A,P){if(50<XE)throw XE=0,a8=null,Error(n(185));rn(y,A,P),((Kn&2)===0||y!==Ss)&&(y===Ss&&((Kn&2)===0&&(QA|=A),os===4&&mm(y,ro)),Ha(y,P),A===1&&Kn===0&&(w.mode&1)===0&&(M1=$n()+500,RA&&lm()))}function Ha(y,w){var A=y.callbackNode;nt(y,w);var P=Ye(y,y===Ss?ro:0);if(P===0)A!==null&&ec(A),y.callbackNode=null,y.callbackPriority=0;else if(w=P&-P,y.callbackPriority!==w){if(A!=null&&ec(A),w===1)y.tag===0?jPe(UZ.bind(null,y)):AJ(UZ.bind(null,y)),$Pe(function(){(Kn&6)===0&&lm()}),A=null;else{switch(rr(P)){case 1:A=Ji;break;case 4:A=Tl;break;case 16:A=Zi;break;case 536870912:A=Jp;break;default:A=Zi}A=XZ(A,zZ.bind(null,y))}y.callbackPriority=w,y.callbackNode=A}}function zZ(y,w){if(tk=-1,nk=0,(Kn&6)!==0)throw Error(n(327));var A=y.callbackNode;if(L1()&&y.callbackNode!==A)return null;var P=Ye(y,y===Ss?ro:0);if(P===0)return null;if((P&30)!==0||(P&y.expiredLanes)!==0||w)w=rk(y,P);else{w=P;var F=Kn;Kn|=2;var W=HZ();(Ss!==y||ro!==w)&&(yh=null,M1=$n()+500,Eg(y,w));do try{oNe();break}catch(he){qZ(y,he)}while(!0);C5(),XA.current=W,Kn=F,qi!==null?w=0:(Ss=null,ro=0,w=os)}if(w!==0){if(w===2&&(F=tt(y),F!==0&&(P=F,w=l8(y,F))),w===1)throw A=YE,Eg(y,0),mm(y,P),Ha(y,$n()),A;if(w===6)mm(y,P);else{if(F=y.current.alternate,(P&30)===0&&!iNe(F)&&(w=rk(y,P),w===2&&(W=tt(y),W!==0&&(P=W,w=l8(y,W))),w===1))throw A=YE,Eg(y,0),mm(y,P),Ha(y,$n()),A;switch(y.finishedWork=F,y.finishedLanes=P,w){case 0:case 1:throw Error(n(345));case 2:_g(y,qa,yh);break;case 3:if(mm(y,P),(P&130023424)===P&&(w=s8+500-$n(),10<w)){if(Ye(y,0)!==0)break;if(F=y.suspendedLanes,(F&P)!==P){sa(),y.pingedLanes|=y.suspendedLanes&F;break}y.timeoutHandle=p5(_g.bind(null,y,qa,yh),w);break}_g(y,qa,yh);break;case 4:if(mm(y,P),(P&4194240)===P)break;for(w=y.eventTimes,F=-1;0<P;){var ee=31-ts(P);W=1<<ee,ee=w[ee],ee>F&&(F=ee),P&=~W}if(P=F,P=$n()-P,P=(120>P?120:480>P?480:1080>P?1080:1920>P?1920:3e3>P?3e3:4320>P?4320:1960*rNe(P/1960))-P,10<P){y.timeoutHandle=p5(_g.bind(null,y,qa,yh),P);break}_g(y,qa,yh);break;case 5:_g(y,qa,yh);break;default:throw Error(n(329))}}}return Ha(y,$n()),y.callbackNode===A?zZ.bind(null,y):null}function l8(y,w){var A=KE;return y.current.memoizedState.isDehydrated&&(Eg(y,w).flags|=256),y=rk(y,w),y!==2&&(w=qa,qa=A,w!==null&&u8(w)),y}function u8(y){qa===null?qa=y:qa.push.apply(qa,y)}function iNe(y){for(var w=y;;){if(w.flags&16384){var A=w.updateQueue;if(A!==null&&(A=A.stores,A!==null))for(var P=0;P<A.length;P++){var F=A[P],W=F.getSnapshot;F=F.value;try{if(!oc(W(),F))return!1}catch{return!1}}}if(A=w.child,w.subtreeFlags&16384&&A!==null)A.return=w,w=A;else{if(w===y)break;for(;w.sibling===null;){if(w.return===null||w.return===y)return!0;w=w.return}w.sibling.return=w.return,w=w.sibling}}return!0}function mm(y,w){for(w&=~i8,w&=~QA,y.suspendedLanes|=w,y.pingedLanes&=~w,y=y.expirationTimes;0<w;){var A=31-ts(w),P=1<<A;y[A]=-1,w&=~P}}function UZ(y){if((Kn&6)!==0)throw Error(n(327));L1();var w=Ye(y,0);if((w&1)===0)return Ha(y,$n()),null;var A=rk(y,w);if(y.tag!==0&&A===2){var P=tt(y);P!==0&&(w=P,A=l8(y,P))}if(A===1)throw A=YE,Eg(y,0),mm(y,w),Ha(y,$n()),A;if(A===6)throw Error(n(345));return y.finishedWork=y.current.alternate,y.finishedLanes=w,_g(y,qa,yh),Ha(y,$n()),null}function c8(y,w){var A=Kn;Kn|=1;try{return y(w)}finally{Kn=A,Kn===0&&(M1=$n()+500,RA&&lm())}}function xg(y){hm!==null&&hm.tag===0&&(Kn&6)===0&&L1();var w=Kn;Kn|=1;var A=pu.transition,P=Vt;try{if(pu.transition=null,Vt=1,y)return y()}finally{Vt=P,pu.transition=A,Kn=w,(Kn&6)===0&&lm()}}function d8(){kl=$1.current,Gr($1)}function Eg(y,w){y.finishedWork=null,y.finishedLanes=0;var A=y.timeoutHandle;if(A!==-1&&(y.timeoutHandle=-1,OPe(A)),qi!==null)for(A=qi.return;A!==null;){var P=A;switch(w5(P),P.tag){case 1:P=P.type.childContextTypes,P!=null&&kA();break;case 3:P1(),Gr(Ba),Gr(Io),N5();break;case 5:D5(P);break;case 4:P1();break;case 13:Gr(di);break;case 19:Gr(di);break;case 10:S5(P.type._context);break;case 22:case 23:d8()}A=A.return}if(Ss=y,qi=y=gm(y.current,null),ro=kl=w,os=0,YE=null,i8=QA=wg=0,qa=KE=null,yg!==null){for(w=0;w<yg.length;w++)if(A=yg[w],P=A.interleaved,P!==null){A.interleaved=null;var F=P.next,W=A.pending;if(W!==null){var ee=W.next;W.next=F,P.next=ee}A.pending=P}yg=null}return y}function qZ(y,w){do{var A=qi;try{if(C5(),BA.current=HA,zA){for(var P=fi.memoizedState;P!==null;){var F=P.queue;F!==null&&(F.pending=null),P=P.next}zA=!1}if(bg=0,Cs=ss=fi=null,UE=!1,qE=0,r8.current=null,A===null||A.return===null){os=1,YE=w,qi=null;break}e:{var W=y,ee=A.return,he=A,ve=w;if(w=ro,he.flags|=32768,ve!==null&&typeof ve=="object"&&typeof ve.then=="function"){var Le=ve,it=he,ut=it.tag;if((it.mode&1)===0&&(ut===0||ut===11||ut===15)){var rt=it.alternate;rt?(it.updateQueue=rt.updateQueue,it.memoizedState=rt.memoizedState,it.lanes=rt.lanes):(it.updateQueue=null,it.memoizedState=null)}var Ot=pZ(ee);if(Ot!==null){Ot.flags&=-257,mZ(Ot,ee,he,W,w),Ot.mode&1&&hZ(W,Le,w),w=Ot,ve=Le;var Lt=w.updateQueue;if(Lt===null){var Ft=new Set;Ft.add(ve),w.updateQueue=Ft}else Lt.add(ve);break e}else{if((w&1)===0){hZ(W,Le,w),f8();break e}ve=Error(n(426))}}else if(Zr&&he.mode&1){var ki=pZ(ee);if(ki!==null){(ki.flags&65536)===0&&(ki.flags|=256),mZ(ki,ee,he,W,w),_5(N1(ve,he));break e}}W=ve=N1(ve,he),os!==4&&(os=2),KE===null?KE=[W]:KE.push(W),W=ee;do{switch(W.tag){case 3:W.flags|=65536,w&=-w,W.lanes|=w;var Ie=dZ(W,ve,w);FJ(W,Ie);break e;case 1:he=ve;var Te=W.type,De=W.stateNode;if((W.flags&128)===0&&(typeof Te.getDerivedStateFromError=="function"||De!==null&&typeof De.componentDidCatch=="function"&&(fm===null||!fm.has(De)))){W.flags|=65536,w&=-w,W.lanes|=w;var yt=fZ(W,he,w);FJ(W,yt);break e}}W=W.return}while(W!==null)}VZ(A)}catch(Ht){w=Ht,qi===A&&A!==null&&(qi=A=A.return);continue}break}while(!0)}function HZ(){var y=XA.current;return XA.current=HA,y===null?HA:y}function f8(){(os===0||os===3||os===2)&&(os=4),Ss===null||(wg&268435455)===0&&(QA&268435455)===0||mm(Ss,ro)}function rk(y,w){var A=Kn;Kn|=2;var P=HZ();(Ss!==y||ro!==w)&&(yh=null,Eg(y,w));do try{sNe();break}catch(F){qZ(y,F)}while(!0);if(C5(),Kn=A,XA.current=P,qi!==null)throw Error(n(261));return Ss=null,ro=0,os}function sNe(){for(;qi!==null;)WZ(qi)}function oNe(){for(;qi!==null&&!Qp();)WZ(qi)}function WZ(y){var w=KZ(y.alternate,y,kl);y.memoizedProps=y.pendingProps,w===null?VZ(y):qi=w,r8.current=null}function VZ(y){var w=y;do{var A=w.alternate;if(y=w.return,(w.flags&32768)===0){if(A=JPe(A,w,kl),A!==null){qi=A;return}}else{if(A=ZPe(A,w),A!==null){A.flags&=32767,qi=A;return}if(y!==null)y.flags|=32768,y.subtreeFlags=0,y.deletions=null;else{os=6,qi=null;return}}if(w=w.sibling,w!==null){qi=w;return}qi=w=y}while(w!==null);os===0&&(os=5)}function _g(y,w,A){var P=Vt,F=pu.transition;try{pu.transition=null,Vt=1,aNe(y,w,A,P)}finally{pu.transition=F,Vt=P}return null}function aNe(y,w,A,P){do L1();while(hm!==null);if((Kn&6)!==0)throw Error(n(327));A=y.finishedWork;var F=y.finishedLanes;if(A===null)return null;if(y.finishedWork=null,y.finishedLanes=0,A===y.current)throw Error(n(177));y.callbackNode=null,y.callbackPriority=0;var W=A.lanes|A.childLanes;if(qt(y,W),y===Ss&&(qi=Ss=null,ro=0),(A.subtreeFlags&2064)===0&&(A.flags&2064)===0||ZA||(ZA=!0,XZ(Zi,function(){return L1(),null})),W=(A.flags&15990)!==0,(A.subtreeFlags&15990)!==0||W){W=pu.transition,pu.transition=null;var ee=Vt;Vt=1;var he=Kn;Kn|=4,r8.current=null,tNe(y,A),MZ(A,y),APe(f5),ce=!!d5,f5=d5=null,y.current=A,nNe(A),tc(),Kn=he,Vt=ee,pu.transition=W}else y.current=A;if(ZA&&(ZA=!1,hm=y,ek=F),W=y.pendingLanes,W===0&&(fm=null),Zp(A.stateNode),Ha(y,$n()),w!==null)for(P=y.onRecoverableError,A=0;A<w.length;A++)F=w[A],P(F.value,{componentStack:F.stack,digest:F.digest});if(JA)throw JA=!1,y=o8,o8=null,y;return(ek&1)!==0&&y.tag!==0&&L1(),W=y.pendingLanes,(W&1)!==0?y===a8?XE++:(XE=0,a8=y):XE=0,lm(),null}function L1(){if(hm!==null){var y=rr(ek),w=pu.transition,A=Vt;try{if(pu.transition=null,Vt=16>y?16:y,hm===null)var P=!1;else{if(y=hm,hm=null,ek=0,(Kn&6)!==0)throw Error(n(331));var F=Kn;for(Kn|=4,Mt=y.current;Mt!==null;){var W=Mt,ee=W.child;if((Mt.flags&16)!==0){var he=W.deletions;if(he!==null){for(var ve=0;ve<he.length;ve++){var Le=he[ve];for(Mt=Le;Mt!==null;){var it=Mt;switch(it.tag){case 0:case 11:case 15:GE(8,it,W)}var ut=it.child;if(ut!==null)ut.return=it,Mt=ut;else for(;Mt!==null;){it=Mt;var rt=it.sibling,Ot=it.return;if(DZ(it),it===Le){Mt=null;break}if(rt!==null){rt.return=Ot,Mt=rt;break}Mt=Ot}}}var Lt=W.alternate;if(Lt!==null){var Ft=Lt.child;if(Ft!==null){Lt.child=null;do{var ki=Ft.sibling;Ft.sibling=null,Ft=ki}while(Ft!==null)}}Mt=W}}if((W.subtreeFlags&2064)!==0&&ee!==null)ee.return=W,Mt=ee;else e:for(;Mt!==null;){if(W=Mt,(W.flags&2048)!==0)switch(W.tag){case 0:case 11:case 15:GE(9,W,W.return)}var Ie=W.sibling;if(Ie!==null){Ie.return=W.return,Mt=Ie;break e}Mt=W.return}}var Te=y.current;for(Mt=Te;Mt!==null;){ee=Mt;var De=ee.child;if((ee.subtreeFlags&2064)!==0&&De!==null)De.return=ee,Mt=De;else e:for(ee=Te;Mt!==null;){if(he=Mt,(he.flags&2048)!==0)try{switch(he.tag){case 0:case 11:case 15:KA(9,he)}}catch(Ht){vi(he,he.return,Ht)}if(he===ee){Mt=null;break e}var yt=he.sibling;if(yt!==null){yt.return=he.return,Mt=yt;break e}Mt=he.return}}if(Kn=F,lm(),es&&typeof es.onPostCommitFiberRoot=="function")try{es.onPostCommitFiberRoot(ou,y)}catch{}P=!0}return P}finally{Vt=A,pu.transition=w}}return!1}function GZ(y,w,A){w=N1(A,w),w=dZ(y,w,1),y=cm(y,w,1),w=sa(),y!==null&&(rn(y,1,w),Ha(y,w))}function vi(y,w,A){if(y.tag===3)GZ(y,y,A);else for(;w!==null;){if(w.tag===3){GZ(w,y,A);break}else if(w.tag===1){var P=w.stateNode;if(typeof w.type.getDerivedStateFromError=="function"||typeof P.componentDidCatch=="function"&&(fm===null||!fm.has(P))){y=N1(A,y),y=fZ(w,y,1),w=cm(w,y,1),y=sa(),w!==null&&(rn(w,1,y),Ha(w,y));break}}w=w.return}}function lNe(y,w,A){var P=y.pingCache;P!==null&&P.delete(w),w=sa(),y.pingedLanes|=y.suspendedLanes&A,Ss===y&&(ro&A)===A&&(os===4||os===3&&(ro&130023424)===ro&&500>$n()-s8?Eg(y,0):i8|=A),Ha(y,w)}function YZ(y,w){w===0&&((y.mode&1)===0?w=1:(w=Ae,Ae<<=1,(Ae&130023424)===0&&(Ae=4194304)));var A=sa();y=ph(y,w),y!==null&&(rn(y,w,A),Ha(y,A))}function uNe(y){var w=y.memoizedState,A=0;w!==null&&(A=w.retryLane),YZ(y,A)}function cNe(y,w){var A=0;switch(y.tag){case 13:var P=y.stateNode,F=y.memoizedState;F!==null&&(A=F.retryLane);break;case 19:P=y.stateNode;break;default:throw Error(n(314))}P!==null&&P.delete(w),YZ(y,A)}var KZ;KZ=function(y,w,A){if(y!==null)if(y.memoizedProps!==w.pendingProps||Ba.current)Ua=!0;else{if((y.lanes&A)===0&&(w.flags&128)===0)return Ua=!1,QPe(y,w,A);Ua=(y.flags&131072)!==0}else Ua=!1,Zr&&(w.flags&1048576)!==0&&kJ(w,PA,w.index);switch(w.lanes=0,w.tag){case 2:var P=w.type;GA(y,w),y=w.pendingProps;var F=C1(w,Io.current);D1(w,A),F=M5(null,w,P,y,F,A);var W=L5();return w.flags|=1,typeof F=="object"&&F!==null&&typeof F.render=="function"&&F.$$typeof===void 0?(w.tag=1,w.memoizedState=null,w.updateQueue=null,za(P)?(W=!0,IA(w)):W=!1,w.memoizedState=F.state!==null&&F.state!==void 0?F.state:null,I5(w),F.updater=WA,w.stateNode=F,F._reactInternals=w,q5(w,P,y,A),w=G5(null,w,P,!0,W,A)):(w.tag=0,Zr&&W&&b5(w),ia(null,w,F,A),w=w.child),w;case 16:P=w.elementType;e:{switch(GA(y,w),y=w.pendingProps,F=P._init,P=F(P._payload),w.type=P,F=w.tag=fNe(P),y=lc(P,y),F){case 0:w=V5(null,w,P,y,A);break e;case 1:w=xZ(null,w,P,y,A);break e;case 11:w=gZ(null,w,P,y,A);break e;case 14:w=yZ(null,w,P,lc(P.type,y),A);break e}throw Error(n(306,P,""))}return w;case 0:return P=w.type,F=w.pendingProps,F=w.elementType===P?F:lc(P,F),V5(y,w,P,F,A);case 1:return P=w.type,F=w.pendingProps,F=w.elementType===P?F:lc(P,F),xZ(y,w,P,F,A);case 3:e:{if(EZ(w),y===null)throw Error(n(387));P=w.pendingProps,W=w.memoizedState,F=W.element,LJ(y,w),FA(w,P,null,A);var ee=w.memoizedState;if(P=ee.element,W.isDehydrated)if(W={element:P,isDehydrated:!1,cache:ee.cache,pendingSuspenseBoundaries:ee.pendingSuspenseBoundaries,transitions:ee.transitions},w.updateQueue.baseState=W,w.memoizedState=W,w.flags&256){F=N1(Error(n(423)),w),w=_Z(y,w,P,A,F);break e}else if(P!==F){F=N1(Error(n(424)),w),w=_Z(y,w,P,A,F);break e}else for(Al=sm(w.stateNode.containerInfo.firstChild),Sl=w,Zr=!0,ac=null,A=$J(w,null,P,A),w.child=A;A;)A.flags=A.flags&-3|4096,A=A.sibling;else{if(k1(),P===F){w=gh(y,w,A);break e}ia(y,w,P,A)}w=w.child}return w;case 5:return BJ(w),y===null&&E5(w),P=w.type,F=w.pendingProps,W=y!==null?y.memoizedProps:null,ee=F.children,h5(P,F)?ee=null:W!==null&&h5(P,W)&&(w.flags|=32),wZ(y,w),ia(y,w,ee,A),w.child;case 6:return y===null&&E5(w),null;case 13:return TZ(y,w,A);case 4:return R5(w,w.stateNode.containerInfo),P=w.pendingProps,y===null?w.child=I1(w,null,P,A):ia(y,w,P,A),w.child;case 11:return P=w.type,F=w.pendingProps,F=w.elementType===P?F:lc(P,F),gZ(y,w,P,F,A);case 7:return ia(y,w,w.pendingProps,A),w.child;case 8:return ia(y,w,w.pendingProps.children,A),w.child;case 12:return ia(y,w,w.pendingProps.children,A),w.child;case 10:e:{if(P=w.type._context,F=w.pendingProps,W=w.memoizedProps,ee=F.value,Br($A,P._currentValue),P._currentValue=ee,W!==null)if(oc(W.value,ee)){if(W.children===F.children&&!Ba.current){w=gh(y,w,A);break e}}else for(W=w.child,W!==null&&(W.return=w);W!==null;){var he=W.dependencies;if(he!==null){ee=W.child;for(var ve=he.firstContext;ve!==null;){if(ve.context===P){if(W.tag===1){ve=mh(-1,A&-A),ve.tag=2;var Le=W.updateQueue;if(Le!==null){Le=Le.shared;var it=Le.pending;it===null?ve.next=ve:(ve.next=it.next,it.next=ve),Le.pending=ve}}W.lanes|=A,ve=W.alternate,ve!==null&&(ve.lanes|=A),A5(W.return,A,w),he.lanes|=A;break}ve=ve.next}}else if(W.tag===10)ee=W.type===w.type?null:W.child;else if(W.tag===18){if(ee=W.return,ee===null)throw Error(n(341));ee.lanes|=A,he=ee.alternate,he!==null&&(he.lanes|=A),A5(ee,A,w),ee=W.sibling}else ee=W.child;if(ee!==null)ee.return=W;else for(ee=W;ee!==null;){if(ee===w){ee=null;break}if(W=ee.sibling,W!==null){W.return=ee.return,ee=W;break}ee=ee.return}W=ee}ia(y,w,F.children,A),w=w.child}return w;case 9:return F=w.type,P=w.pendingProps.children,D1(w,A),F=fu(F),P=P(F),w.flags|=1,ia(y,w,P,A),w.child;case 14:return P=w.type,F=lc(P,w.pendingProps),F=lc(P.type,F),yZ(y,w,P,F,A);case 15:return vZ(y,w,w.type,w.pendingProps,A);case 17:return P=w.type,F=w.pendingProps,F=w.elementType===P?F:lc(P,F),GA(y,w),w.tag=1,za(P)?(y=!0,IA(w)):y=!1,D1(w,A),uZ(w,P,F),q5(w,P,F,A),G5(null,w,P,!0,y,A);case 19:return SZ(y,w,A);case 22:return bZ(y,w,A)}throw Error(n(156,w.tag))};function XZ(y,w){return Ad(y,w)}function dNe(y,w,A,P){this.tag=y,this.key=A,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=w,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=P,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mu(y,w,A,P){return new dNe(y,w,A,P)}function h8(y){return y=y.prototype,!(!y||!y.isReactComponent)}function fNe(y){if(typeof y=="function")return h8(y)?1:0;if(y!=null){if(y=y.$$typeof,y===L)return 11;if(y===H)return 14}return 2}function gm(y,w){var A=y.alternate;return A===null?(A=mu(y.tag,w,y.key,y.mode),A.elementType=y.elementType,A.type=y.type,A.stateNode=y.stateNode,A.alternate=y,y.alternate=A):(A.pendingProps=w,A.type=y.type,A.flags=0,A.subtreeFlags=0,A.deletions=null),A.flags=y.flags&14680064,A.childLanes=y.childLanes,A.lanes=y.lanes,A.child=y.child,A.memoizedProps=y.memoizedProps,A.memoizedState=y.memoizedState,A.updateQueue=y.updateQueue,w=y.dependencies,A.dependencies=w===null?null:{lanes:w.lanes,firstContext:w.firstContext},A.sibling=y.sibling,A.index=y.index,A.ref=y.ref,A}function ik(y,w,A,P,F,W){var ee=2;if(P=y,typeof y=="function")h8(y)&&(ee=1);else if(typeof y=="string")ee=5;else e:switch(y){case S:return Tg(A.children,F,W,w);case k:ee=8,F|=8;break;case R:return y=mu(12,A,w,F|2),y.elementType=R,y.lanes=W,y;case $:return y=mu(13,A,w,F),y.elementType=$,y.lanes=W,y;case B:return y=mu(19,A,w,F),y.elementType=B,y.lanes=W,y;case J:return sk(A,F,W,w);default:if(typeof y=="object"&&y!==null)switch(y.$$typeof){case O:ee=10;break e;case N:ee=9;break e;case L:ee=11;break e;case H:ee=14;break e;case Y:ee=16,P=null;break e}throw Error(n(130,y==null?y:typeof y,""))}return w=mu(ee,A,w,F),w.elementType=y,w.type=P,w.lanes=W,w}function Tg(y,w,A,P){return y=mu(7,y,P,w),y.lanes=A,y}function sk(y,w,A,P){return y=mu(22,y,P,w),y.elementType=J,y.lanes=A,y.stateNode={isHidden:!1},y}function p8(y,w,A){return y=mu(6,y,null,w),y.lanes=A,y}function m8(y,w,A){return w=mu(4,y.children!==null?y.children:[],y.key,w),w.lanes=A,w.stateNode={containerInfo:y.containerInfo,pendingChildren:null,implementation:y.implementation},w}function hNe(y,w,A,P,F){this.tag=w,this.containerInfo=y,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Pt(0),this.expirationTimes=Pt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Pt(0),this.identifierPrefix=P,this.onRecoverableError=F,this.mutableSourceEagerHydrationData=null}function g8(y,w,A,P,F,W,ee,he,ve){return y=new hNe(y,w,A,he,ve),w===1?(w=1,W===!0&&(w|=8)):w=0,W=mu(3,null,null,w),y.current=W,W.stateNode=y,W.memoizedState={element:P,isDehydrated:A,cache:null,transitions:null,pendingSuspenseBoundaries:null},I5(W),y}function pNe(y,w,A){var P=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:C,key:P==null?null:""+P,children:y,containerInfo:w,implementation:A}}function QZ(y){if(!y)return am;y=y._reactInternals;e:{if(ui(y)!==y||y.tag!==1)throw Error(n(170));var w=y;do{switch(w.tag){case 3:w=w.stateNode.context;break e;case 1:if(za(w.type)){w=w.stateNode.__reactInternalMemoizedMergedChildContext;break e}}w=w.return}while(w!==null);throw Error(n(171))}if(y.tag===1){var A=y.type;if(za(A))return CJ(y,A,w)}return w}function JZ(y,w,A,P,F,W,ee,he,ve){return y=g8(A,P,!0,y,F,W,ee,he,ve),y.context=QZ(null),A=y.current,P=sa(),F=pm(A),W=mh(P,F),W.callback=w??null,cm(A,W,F),y.current.lanes=F,rn(y,F,P),Ha(y,P),y}function ok(y,w,A,P){var F=w.current,W=sa(),ee=pm(F);return A=QZ(A),w.context===null?w.context=A:w.pendingContext=A,w=mh(W,ee),w.payload={element:y},P=P===void 0?null:P,P!==null&&(w.callback=P),y=cm(F,w,ee),y!==null&&(dc(y,F,ee,W),LA(y,F,ee)),ee}function ak(y){if(y=y.current,!y.child)return null;switch(y.child.tag){case 5:return y.child.stateNode;default:return y.child.stateNode}}function ZZ(y,w){if(y=y.memoizedState,y!==null&&y.dehydrated!==null){var A=y.retryLane;y.retryLane=A!==0&&A<w?A:w}}function y8(y,w){ZZ(y,w),(y=y.alternate)&&ZZ(y,w)}function mNe(){return null}var eee=typeof reportError=="function"?reportError:function(y){console.error(y)};function v8(y){this._internalRoot=y}lk.prototype.render=v8.prototype.render=function(y){var w=this._internalRoot;if(w===null)throw Error(n(409));ok(y,w,null,null)},lk.prototype.unmount=v8.prototype.unmount=function(){var y=this._internalRoot;if(y!==null){this._internalRoot=null;var w=y.containerInfo;xg(function(){ok(null,y,null,null)}),w[ch]=null}};function lk(y){this._internalRoot=y}lk.prototype.unstable_scheduleHydration=function(y){if(y){var w=em();y={blockedOn:null,target:y,priority:w};for(var A=0;A<Ma.length&&w!==0&&w<Ma[A].priority;A++);Ma.splice(A,0,y),A===0&&dg(y)}};function b8(y){return!(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)}function uk(y){return!(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11&&(y.nodeType!==8||y.nodeValue!==" react-mount-point-unstable "))}function tee(){}function gNe(y,w,A,P,F){if(F){if(typeof P=="function"){var W=P;P=function(){var Le=ak(ee);W.call(Le)}}var ee=JZ(w,P,y,0,null,!1,!1,"",tee);return y._reactRootContainer=ee,y[ch]=ee.current,OE(y.nodeType===8?y.parentNode:y),xg(),ee}for(;F=y.lastChild;)y.removeChild(F);if(typeof P=="function"){var he=P;P=function(){var Le=ak(ve);he.call(Le)}}var ve=g8(y,0,!1,null,null,!1,!1,"",tee);return y._reactRootContainer=ve,y[ch]=ve.current,OE(y.nodeType===8?y.parentNode:y),xg(function(){ok(w,ve,A,P)}),ve}function ck(y,w,A,P,F){var W=A._reactRootContainer;if(W){var ee=W;if(typeof F=="function"){var he=F;F=function(){var ve=ak(ee);he.call(ve)}}ok(w,ee,y,F)}else ee=gNe(A,w,y,F,P);return ak(ee)}ns=function(y){switch(y.tag){case 3:var w=y.stateNode;if(w.current.memoizedState.isDehydrated){var A=xe(w.pendingLanes);A!==0&&(_n(w,A|1),Ha(w,$n()),(Kn&6)===0&&(M1=$n()+500,lm()))}break;case 13:xg(function(){var P=ph(y,1);if(P!==null){var F=sa();dc(P,y,1,F)}}),y8(y,1)}},$a=function(y){if(y.tag===13){var w=ph(y,134217728);if(w!==null){var A=sa();dc(w,y,134217728,A)}y8(y,134217728)}},au=function(y){if(y.tag===13){var w=pm(y),A=ph(y,w);if(A!==null){var P=sa();dc(A,y,w,P)}y8(y,w)}},em=function(){return Vt},kd=function(y,w){var A=Vt;try{return Vt=y,w()}finally{Vt=A}},Qr=function(y,w,A){switch(w){case"input":if(Me(y,A),w=A.name,A.type==="radio"&&w!=null){for(A=y;A.parentNode;)A=A.parentNode;for(A=A.querySelectorAll("input[name="+JSON.stringify(""+w)+'][type="radio"]'),w=0;w<A.length;w++){var P=A[w];if(P!==y&&P.form===y.form){var F=AA(P);if(!F)throw Error(n(90));re(P),Me(P,F)}}}break;case"textarea":wt(y,A);break;case"select":w=A.value,w!=null&&ht(y,!!A.multiple,w,!1)}},ta=c8,El=xg;var yNe={usingClientEntryPoint:!1,Events:[LE,_1,AA,Qs,su,c8]},QE={findFiberByHostInstance:hg,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},vNe={bundleType:QE.bundleType,version:QE.version,rendererPackageName:QE.rendererPackageName,rendererConfig:QE.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:E.ReactCurrentDispatcher,findHostInstanceByFiber:function(y){return y=sh(y),y===null?null:y.stateNode},findFiberByHostInstance:QE.findFiberByHostInstance||mNe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var dk=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!dk.isDisabled&&dk.supportsFiber)try{ou=dk.inject(vNe),es=dk}catch{}}return Va.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=yNe,Va.createPortal=function(y,w){var A=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!b8(w))throw Error(n(200));return pNe(y,w,null,A)},Va.createRoot=function(y,w){if(!b8(y))throw Error(n(299));var A=!1,P="",F=eee;return w!=null&&(w.unstable_strictMode===!0&&(A=!0),w.identifierPrefix!==void 0&&(P=w.identifierPrefix),w.onRecoverableError!==void 0&&(F=w.onRecoverableError)),w=g8(y,1,!1,null,null,A,!1,P,F),y[ch]=w.current,OE(y.nodeType===8?y.parentNode:y),new v8(w)},Va.findDOMNode=function(y){if(y==null)return null;if(y.nodeType===1)return y;var w=y._reactInternals;if(w===void 0)throw typeof y.render=="function"?Error(n(188)):(y=Object.keys(y).join(","),Error(n(268,y)));return y=sh(w),y=y===null?null:y.stateNode,y},Va.flushSync=function(y){return xg(y)},Va.hydrate=function(y,w,A){if(!uk(w))throw Error(n(200));return ck(null,y,w,!0,A)},Va.hydrateRoot=function(y,w,A){if(!b8(y))throw Error(n(405));var P=A!=null&&A.hydratedSources||null,F=!1,W="",ee=eee;if(A!=null&&(A.unstable_strictMode===!0&&(F=!0),A.identifierPrefix!==void 0&&(W=A.identifierPrefix),A.onRecoverableError!==void 0&&(ee=A.onRecoverableError)),w=JZ(w,null,y,1,A??null,F,!1,W,ee),y[ch]=w.current,OE(y),P)for(y=0;y<P.length;y++)A=P[y],F=A._getVersion,F=F(A._source),w.mutableSourceEagerHydrationData==null?w.mutableSourceEagerHydrationData=[A,F]:w.mutableSourceEagerHydrationData.push(A,F);return new lk(w)},Va.render=function(y,w,A){if(!uk(w))throw Error(n(200));return ck(null,y,w,!1,A)},Va.unmountComponentAtNode=function(y){if(!uk(y))throw Error(n(40));return y._reactRootContainer?(xg(function(){ck(null,null,y,!1,function(){y._reactRootContainer=null,y[ch]=null})}),!0):!1},Va.unstable_batchedUpdates=c8,Va.unstable_renderSubtreeIntoContainer=function(y,w,A,P){if(!uk(A))throw Error(n(200));if(y==null||y._reactInternals===void 0)throw Error(n(38));return ck(y,w,A,!1,P)},Va.version="18.3.1-next-f1338f8080-20240426",Va}var uee;function npe(){if(uee)return E8.exports;uee=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),E8.exports=INe(),E8.exports}var cee;function RNe(){if(cee)return fk;cee=1;var e=npe();return fk.createRoot=e.createRoot,fk.hydrateRoot=e.hydrateRoot,fk}var DNe=RNe();const PNe=vl(DNe);var Yd=function(){return Yd=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Yd.apply(this,arguments)};function AC(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function NNe(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}var AR="right-scroll-bar-position",kR="width-before-scroll-bar",ONe="with-scroll-bars-hidden",$Ne="--removed-body-scroll-bar-size";function C8(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function MNe(e,t){var n=D.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=t,n.facade}var LNe=typeof window<"u"?D.useLayoutEffect:D.useEffect,dee=new WeakMap;function FNe(e,t){var n=MNe(null,function(r){return e.forEach(function(i){return C8(i,r)})});return LNe(function(){var r=dee.get(n);if(r){var i=new Set(r),s=new Set(e),o=n.current;i.forEach(function(a){s.has(a)||C8(a,null)}),s.forEach(function(a){i.has(a)||C8(a,o)})}dee.set(n,e)},[e]),n}function jNe(e){return e}function BNe(e,t){t===void 0&&(t=jNe);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(s){var o=t(s,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(r=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var l=function(){var c=o;o=[],c.forEach(s)},u=function(){return Promise.resolve().then(l)};u(),n={push:function(c){o.push(c),u()},filter:function(c){return o=o.filter(c),n}}}};return i}function zNe(e){e===void 0&&(e={});var t=BNe(null);return t.options=Yd({async:!0,ssr:!1},e),t}var rpe=function(e){var t=e.sideCar,n=AC(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return D.createElement(r,Yd({},n))};rpe.isSideCarExport=!0;function UNe(e,t){return e.useMedium(t),rpe}var ipe=zNe(),S8=function(){},HN=D.forwardRef(function(e,t){var n=D.useRef(null),r=D.useState({onScrollCapture:S8,onWheelCapture:S8,onTouchMoveCapture:S8}),i=r[0],s=r[1],o=e.forwardProps,a=e.children,l=e.className,u=e.removeScrollBar,c=e.enabled,d=e.shards,f=e.sideCar,h=e.noIsolation,p=e.inert,m=e.allowPinchZoom,g=e.as,b=g===void 0?"div":g,v=e.gapMode,x=AC(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),E=f,_=FNe([n,t]),C=Yd(Yd({},x),i);return D.createElement(D.Fragment,null,c&&D.createElement(E,{sideCar:ipe,removeScrollBar:u,shards:d,noIsolation:h,inert:p,setCallbacks:s,allowPinchZoom:!!m,lockRef:n,gapMode:v}),o?D.cloneElement(D.Children.only(a),Yd(Yd({},C),{ref:_})):D.createElement(b,Yd({},C,{className:l,ref:_}),a))});HN.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};HN.classNames={fullWidth:kR,zeroRight:AR};var spe=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function qNe(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=spe();return t&&e.setAttribute("nonce",t),e}function HNe(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function WNe(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var VNe=function(){var e=0,t=null;return{add:function(n){e==0&&(t=qNe())&&(HNe(t,n),WNe(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},GNe=function(){var e=VNe();return function(t,n){D.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},YNe=function(){var e=GNe(),t=function(n){var r=n.styles,i=n.dynamic;return e(r,i),null};return t},KNe={left:0,top:0,right:0,gap:0},A8=function(e){return parseInt(e||"",10)||0},XNe=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],i=t[e==="padding"?"paddingRight":"marginRight"];return[A8(n),A8(r),A8(i)]},QNe=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return KNe;var t=XNe(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},JNe=YNe(),zb="data-scroll-locked",ZNe=function(e,t,n,r){var i=e.left,s=e.top,o=e.right,a=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(ONe,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(zb,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(AR,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(kR,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(AR," .").concat(AR,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(kR," .").concat(kR,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(zb,`] {
    `).concat($Ne,": ").concat(a,`px;
  }
`)},fee=function(){var e=parseInt(document.body.getAttribute(zb)||"0",10);return isFinite(e)?e:0},eOe=function(){D.useEffect(function(){return document.body.setAttribute(zb,(fee()+1).toString()),function(){var e=fee()-1;e<=0?document.body.removeAttribute(zb):document.body.setAttribute(zb,e.toString())}},[])},tOe=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,i=r===void 0?"margin":r;eOe();var s=D.useMemo(function(){return QNe(i)},[i]);return D.createElement(JNe,{styles:ZNe(s,!t,i,n?"":"!important")})};function nOe(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=spe();return t&&e.setAttribute("nonce",t),e}function rOe(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function iOe(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var sOe=function(){var e=0,t=null;return{add:function(n){e==0&&(t=nOe())&&(rOe(t,n),iOe(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},oOe=function(){var e=sOe();return function(t,n){D.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},aOe=function(){var e=oOe(),t=function(n){var r=n.styles,i=n.dynamic;return e(r,i),null};return t},T9=!1;if(typeof window<"u")try{var hk=Object.defineProperty({},"passive",{get:function(){return T9=!0,!0}});window.addEventListener("test",hk,hk),window.removeEventListener("test",hk,hk)}catch{T9=!1}var F1=T9?{passive:!1}:!1,lOe=function(e){return e.tagName==="TEXTAREA"},ope=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!lOe(e)&&n[t]==="visible")},uOe=function(e){return ope(e,"overflowY")},cOe=function(e){return ope(e,"overflowX")},hee=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=ape(e,r);if(i){var s=lpe(e,r),o=s[1],a=s[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},dOe=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},fOe=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},ape=function(e,t){return e==="v"?uOe(t):cOe(t)},lpe=function(e,t){return e==="v"?dOe(t):fOe(t)},hOe=function(e,t){return e==="h"&&t==="rtl"?-1:1},pOe=function(e,t,n,r,i){var s=hOe(e,window.getComputedStyle(t).direction),o=s*r,a=n.target,l=t.contains(a),u=!1,c=o>0,d=0,f=0;do{var h=lpe(e,a),p=h[0],m=h[1],g=h[2],b=m-g-s*p;(p||b)&&ape(e,a)&&(d+=b,f+=p),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!l&&a!==document.body||l&&(t.contains(a)||t===a));return(c&&Math.abs(d)<1||!c&&Math.abs(f)<1)&&(u=!0),u},pk=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},pee=function(e){return[e.deltaX,e.deltaY]},mee=function(e){return e&&"current"in e?e.current:e},mOe=function(e,t){return e[0]===t[0]&&e[1]===t[1]},gOe=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},yOe=0,j1=[];function vOe(e){var t=D.useRef([]),n=D.useRef([0,0]),r=D.useRef(),i=D.useState(yOe++)[0],s=D.useState(aOe)[0],o=D.useRef(e);D.useEffect(function(){o.current=e},[e]),D.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var m=NNe([e.lockRef.current],(e.shards||[]).map(mee),!0).filter(Boolean);return m.forEach(function(g){return g.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),m.forEach(function(g){return g.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var a=D.useCallback(function(m,g){if("touches"in m&&m.touches.length===2||m.type==="wheel"&&m.ctrlKey)return!o.current.allowPinchZoom;var b=pk(m),v=n.current,x="deltaX"in m?m.deltaX:v[0]-b[0],E="deltaY"in m?m.deltaY:v[1]-b[1],_,C=m.target,S=Math.abs(x)>Math.abs(E)?"h":"v";if("touches"in m&&S==="h"&&C.type==="range")return!1;var k=hee(S,C);if(!k)return!0;if(k?_=S:(_=S==="v"?"h":"v",k=hee(S,C)),!k)return!1;if(!r.current&&"changedTouches"in m&&(x||E)&&(r.current=_),!_)return!0;var R=r.current||_;return pOe(R,g,m,R==="h"?x:E)},[]),l=D.useCallback(function(m){var g=m;if(!(!j1.length||j1[j1.length-1]!==s)){var b="deltaY"in g?pee(g):pk(g),v=t.current.filter(function(_){return _.name===g.type&&(_.target===g.target||g.target===_.shadowParent)&&mOe(_.delta,b)})[0];if(v&&v.should){g.cancelable&&g.preventDefault();return}if(!v){var x=(o.current.shards||[]).map(mee).filter(Boolean).filter(function(_){return _.contains(g.target)}),E=x.length>0?a(g,x[0]):!o.current.noIsolation;E&&g.cancelable&&g.preventDefault()}}},[]),u=D.useCallback(function(m,g,b,v){var x={name:m,delta:g,target:b,should:v,shadowParent:bOe(b)};t.current.push(x),setTimeout(function(){t.current=t.current.filter(function(E){return E!==x})},1)},[]),c=D.useCallback(function(m){n.current=pk(m),r.current=void 0},[]),d=D.useCallback(function(m){u(m.type,pee(m),m.target,a(m,e.lockRef.current))},[]),f=D.useCallback(function(m){u(m.type,pk(m),m.target,a(m,e.lockRef.current))},[]);D.useEffect(function(){return j1.push(s),e.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:f}),document.addEventListener("wheel",l,F1),document.addEventListener("touchmove",l,F1),document.addEventListener("touchstart",c,F1),function(){j1=j1.filter(function(m){return m!==s}),document.removeEventListener("wheel",l,F1),document.removeEventListener("touchmove",l,F1),document.removeEventListener("touchstart",c,F1)}},[]);var h=e.removeScrollBar,p=e.inert;return D.createElement(D.Fragment,null,p?D.createElement(s,{styles:gOe(i)}):null,h?D.createElement(tOe,{gapMode:e.gapMode}):null)}function bOe(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const wOe=UNe(ipe,vOe);var yw=D.forwardRef(function(e,t){return D.createElement(HN,Yd({},e,{ref:t,sideCar:wOe}))});yw.classNames=HN.classNames;function Or(e){return Object.keys(e)}function k8(e){return e&&typeof e=="object"&&!Array.isArray(e)}function Jz(e,t){const n={...e},r=t;return k8(e)&&k8(t)&&Object.keys(t).forEach(i=>{k8(r[i])&&i in e?n[i]=Jz(n[i],r[i]):n[i]=r[i]}),n}function xOe(e){return e.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}function EOe(e){var t;return typeof e!="string"||!e.includes("var(--mantine-scale)")?e:(t=e.match(/^calc\((.*?)\)$/))==null?void 0:t[1].split("*")[0].trim()}function yT(e){const t=EOe(e);return typeof t=="number"?t:typeof t=="string"?t.includes("calc")||t.includes("var")?t:t.includes("px")?Number(t.replace("px","")):t.includes("rem")?Number(t.replace("rem",""))*16:t.includes("em")?Number(t.replace("em",""))*16:Number(t):NaN}function I8(e){return e==="0rem"?"0rem":`calc(${e} * var(--mantine-scale))`}function upe(e,{shouldScale:t=!1}={}){function n(r){if(r===0||r==="0")return`0${e}`;if(typeof r=="number"){const i=`${r/16}${e}`;return t?I8(i):i}if(typeof r=="string"){if(r===""||r.startsWith("calc(")||r.startsWith("clamp(")||r.includes("rgba("))return r;if(r.includes(","))return r.split(",").map(s=>n(s)).join(",");if(r.includes(" "))return r.split(" ").map(s=>n(s)).join(" ");if(r.includes(e))return t?I8(r):r;const i=r.replace("px","");if(!Number.isNaN(Number(i))){const s=`${Number(i)/16}${e}`;return t?I8(s):s}}return r}return n}const Oe=upe("rem",{shouldScale:!0}),lD=upe("em");function O0(e){return Object.keys(e).reduce((t,n)=>(e[n]!==void 0&&(t[n]=e[n]),t),{})}function cpe(e){if(typeof e=="number")return!0;if(typeof e=="string"){if(e.startsWith("calc(")||e.startsWith("var(")||e.includes(" ")&&e.trim()!=="")return!0;const t=/^[+-]?[0-9]+(\.[0-9]+)?(px|em|rem|ex|ch|lh|rlh|vw|vh|vmin|vmax|vb|vi|svw|svh|lvw|lvh|dvw|dvh|cm|mm|in|pt|pc|q|cqw|cqh|cqi|cqb|cqmin|cqmax|%)?$/;return e.trim().split(/\s+/).every(r=>t.test(r))}return!1}function Dp(e){return Array.isArray(e)||e===null?!1:typeof e=="object"?e.type!==D.Fragment:!1}function ps(e){const t=D.createContext(null);return[({children:i,value:s})=>T.jsx(t.Provider,{value:s,children:i}),()=>{const i=D.useContext(t);if(i===null)throw new Error(e);return i}]}function Pp(e=null){const t=D.createContext(e);return[({children:i,value:s})=>T.jsx(t.Provider,{value:s,children:i}),()=>D.useContext(t)]}function uD(e,t){return n=>{if(typeof n!="string"||n.trim().length===0)throw new Error(t);return`${e}-${n}`}}function cD(e,t){let n=e;for(;(n=n.parentElement)&&!n.matches(t););return n}function _Oe(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].disabled)return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].disabled)return r}return e}function TOe(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].disabled)return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].disabled)return r}return e}function COe(e,t,n){return cD(e,n)===cD(t,n)}function Zz({parentSelector:e,siblingSelector:t,onKeyDown:n,loop:r=!0,activateOnFocus:i=!1,dir:s="rtl",orientation:o}){return a=>{var p;n==null||n(a);const l=Array.from(((p=cD(a.currentTarget,e))==null?void 0:p.querySelectorAll(t))||[]).filter(m=>COe(a.currentTarget,m,e)),u=l.findIndex(m=>a.currentTarget===m),c=TOe(u,l,r),d=_Oe(u,l,r),f=s==="rtl"?d:c,h=s==="rtl"?c:d;switch(a.key){case"ArrowRight":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),l[f].focus(),i&&l[f].click());break}case"ArrowLeft":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),l[h].focus(),i&&l[h].click());break}case"ArrowUp":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),l[d].focus(),i&&l[d].click());break}case"ArrowDown":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),l[c].focus(),i&&l[c].click());break}case"Home":{a.stopPropagation(),a.preventDefault(),!l[0].disabled&&l[0].focus();break}case"End":{a.stopPropagation(),a.preventDefault();const m=l.length-1;!l[m].disabled&&l[m].focus();break}}}}const SOe={app:100,modal:200,popover:300,overlay:400,max:9999};function Gs(e){return SOe[e]}const C9=()=>{};function AOe(e,t={active:!0}){return typeof e!="function"||!t.active?t.onKeyDown||C9:n=>{var r;n.key==="Escape"&&(e(n),(r=t.onTrigger)==null||r.call(t))}}function cn(e,t="size",n=!0){if(e!==void 0)return cpe(e)?n?Oe(e):e:`var(--${t}-${e})`}function Wi(e){return cn(e,"mantine-spacing")}function Tr(e){return e===void 0?"var(--mantine-radius-default)":cn(e,"mantine-radius")}function wo(e){return cn(e,"mantine-font-size")}function dpe(e){return cn(e,"mantine-line-height",!1)}function eU(e){if(e)return cn(e,"mantine-shadow",!1)}function il(e,t){return n=>{e==null||e(n),t==null||t(n)}}function tU(e,t){return e in t?yT(t[e]):yT(e)}function vT(e,t){const n=e.map(r=>({value:r,px:tU(r,t)}));return n.sort((r,i)=>r.px-i.px),n}function Oc(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}function kOe(e,t,n){var r;return n?Array.from(((r=cD(n,t))==null?void 0:r.querySelectorAll(e))||[]).findIndex(i=>i===n):null}function IOe(){const[e,t]=D.useState(-1);return[e,{setHovered:t,resetHovered:()=>t(-1)}]}function Kd(e,t,n){return t===void 0&&n===void 0?e:t!==void 0&&n===void 0?Math.max(e,t):Math.min(t===void 0&&n!==void 0?e:Math.max(e,t),n)}function Ub(e="mantine-"){return`${e}${Math.random().toString(36).slice(2,11)}`}function Lm(e){const t=D.useRef(e);return D.useEffect(()=>{t.current=e}),D.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}const ROe=()=>{};function WN(e,t){const n=typeof t=="number"?t:t.delay,r=typeof t=="number"?!1:t.flushOnUnmount,i=Lm(e),s=D.useRef(0),o=Object.assign(D.useCallback((...a)=>{window.clearTimeout(s.current);const l=()=>{s.current!==0&&(s.current=0,i(...a))};o.flush=l,s.current=window.setTimeout(l,n)},[i,n]),{flush:ROe});return D.useEffect(()=>()=>{window.clearTimeout(s.current),r&&o.flush()},[o,r]),o}const gee=["mousedown","touchstart"];function DOe(e,t,n){const r=D.useRef(null);return D.useEffect(()=>{const i=s=>{const{target:o}=s??{};if(Array.isArray(n)){const a=(o==null?void 0:o.hasAttribute("data-ignore-outside-clicks"))||!document.body.contains(o)&&o.tagName!=="HTML";n.every(u=>!!u&&!s.composedPath().includes(u))&&!a&&e()}else r.current&&!r.current.contains(o)&&e()};return(t||gee).forEach(s=>document.addEventListener(s,i)),()=>{(t||gee).forEach(s=>document.removeEventListener(s,i))}},[r,e,n]),r}function POe(e,t){try{return e.addEventListener("change",t),()=>e.removeEventListener("change",t)}catch{return e.addListener(t),()=>e.removeListener(t)}}function NOe(e,t){return typeof window<"u"&&"matchMedia"in window?window.matchMedia(e).matches:!1}function OOe(e,t,{getInitialValueInEffect:n}={getInitialValueInEffect:!0}){const[r,i]=D.useState(n?t:NOe(e)),s=D.useRef(null);return D.useEffect(()=>{if("matchMedia"in window)return s.current=window.matchMedia(e),i(s.current.matches),POe(s.current,o=>i(o.matches))},[e]),r}const Ev=typeof document<"u"?D.useLayoutEffect:D.useEffect;function xf(e,t){const n=D.useRef(!1);D.useEffect(()=>()=>{n.current=!1},[]),D.useEffect(()=>{if(n.current)return e();n.current=!0},t)}function fpe({opened:e,shouldReturnFocus:t=!0}){const n=D.useRef(null),r=()=>{var i;n.current&&"focus"in n.current&&typeof n.current.focus=="function"&&((i=n.current)==null||i.focus({preventScroll:!0}))};return xf(()=>{let i=-1;const s=o=>{o.key==="Tab"&&window.clearTimeout(i)};return document.addEventListener("keydown",s),e?n.current=document.activeElement:t&&(i=window.setTimeout(r,10)),()=>{window.clearTimeout(i),document.removeEventListener("keydown",s)}},[e,t]),r}const $Oe=/input|select|textarea|button|object/,hpe="a, input, select, textarea, button, object, [tabindex]";function MOe(e){return e.style.display==="none"}function LOe(e){if(e.getAttribute("aria-hidden")||e.getAttribute("hidden")||e.getAttribute("type")==="hidden")return!1;let n=e;for(;n&&!(n===document.body||n.nodeType===11);){if(MOe(n))return!1;n=n.parentNode}return!0}function ppe(e){let t=e.getAttribute("tabindex");return t===null&&(t=void 0),parseInt(t,10)}function S9(e){const t=e.nodeName.toLowerCase(),n=!Number.isNaN(ppe(e));return($Oe.test(t)&&!e.disabled||e instanceof HTMLAnchorElement&&e.href||n)&&LOe(e)}function mpe(e){const t=ppe(e);return(Number.isNaN(t)||t>=0)&&S9(e)}function FOe(e){return Array.from(e.querySelectorAll(hpe)).filter(mpe)}function jOe(e,t){const n=FOe(e);if(!n.length){t.preventDefault();return}const r=n[t.shiftKey?0:n.length-1],i=e.getRootNode();let s=r===i.activeElement||e===i.activeElement;const o=i.activeElement;if(o.tagName==="INPUT"&&o.getAttribute("type")==="radio"&&(s=n.filter(c=>c.getAttribute("type")==="radio"&&c.getAttribute("name")===o.getAttribute("name")).includes(r)),!s)return;t.preventDefault();const l=n[t.shiftKey?n.length-1:0];l&&l.focus()}function BOe(e=!0){const t=D.useRef(null),n=i=>{let s=i.querySelector("[data-autofocus]");if(!s){const o=Array.from(i.querySelectorAll(hpe));s=o.find(mpe)||o.find(S9)||null,!s&&S9(i)&&(s=i)}s&&s.focus({preventScroll:!0})},r=D.useCallback(i=>{e&&i!==null&&t.current!==i&&(i?(setTimeout(()=>{i.getRootNode()&&n(i)}),t.current=i):t.current=null)},[e]);return D.useEffect(()=>{if(!e)return;t.current&&setTimeout(()=>n(t.current));const i=s=>{s.key==="Tab"&&t.current&&jOe(t.current,s)};return document.addEventListener("keydown",i),()=>document.removeEventListener("keydown",i)},[e]),r}const zOe=e=>(e+1)%1e6;function UOe(){const[,e]=D.useReducer(zOe,0);return e}const qOe=Jn.useId||(()=>{});function HOe(){const e=qOe();return e?`mantine-${e.replace(/:/g,"")}`:""}function Ia(e){const t=HOe(),[n,r]=D.useState(t);return Ev(()=>{r(Ub())},[]),typeof e=="string"?e:typeof window>"u"?t:n}function gpe(e,t,n){D.useEffect(()=>(window.addEventListener(e,t,n),()=>window.removeEventListener(e,t,n)),[e,t])}function dD(e,t){if(typeof e=="function")return e(t);typeof e=="object"&&e!==null&&"current"in e&&(e.current=t)}function ype(...e){const t=new Map;return n=>{if(e.forEach(r=>{const i=dD(r,n);i&&t.set(r,i)}),t.size>0)return()=>{e.forEach(r=>{const i=t.get(r);i?i():dD(r,null)}),t.clear()}}}function ms(...e){return D.useCallback(ype(...e),e)}function WOe(e,t,n="ltr"){const r=D.useRef(null),i=D.useRef(!1),s=D.useRef(!1),o=D.useRef(0),[a,l]=D.useState(!1);return D.useEffect(()=>{i.current=!0},[]),D.useEffect(()=>{var v,x;const u=({x:E,y:_})=>{cancelAnimationFrame(o.current),o.current=requestAnimationFrame(()=>{if(i.current&&r.current){r.current.style.userSelect="none";const C=r.current.getBoundingClientRect();if(C.width&&C.height){const S=Kd((E-C.left)/C.width,0,1);e({x:n==="ltr"?S:1-S,y:Kd((_-C.top)/C.height,0,1)})}}})},c=()=>{document.addEventListener("mousemove",m),document.addEventListener("mouseup",h),document.addEventListener("touchmove",b),document.addEventListener("touchend",h)},d=()=>{document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",h),document.removeEventListener("touchmove",b),document.removeEventListener("touchend",h)},f=()=>{!s.current&&i.current&&(s.current=!0,typeof(t==null?void 0:t.onScrubStart)=="function"&&t.onScrubStart(),l(!0),c())},h=()=>{s.current&&i.current&&(s.current=!1,l(!1),d(),setTimeout(()=>{typeof(t==null?void 0:t.onScrubEnd)=="function"&&t.onScrubEnd()},0))},p=E=>{f(),E.preventDefault(),m(E)},m=E=>u({x:E.clientX,y:E.clientY}),g=E=>{E.cancelable&&E.preventDefault(),f(),b(E)},b=E=>{E.cancelable&&E.preventDefault(),u({x:E.changedTouches[0].clientX,y:E.changedTouches[0].clientY})};return(v=r.current)==null||v.addEventListener("mousedown",p),(x=r.current)==null||x.addEventListener("touchstart",g,{passive:!1}),()=>{r.current&&(r.current.removeEventListener("mousedown",p),r.current.removeEventListener("touchstart",g))}},[n,e]),{ref:r,active:a}}function Hs({value:e,defaultValue:t,finalValue:n,onChange:r=()=>{}}){const[i,s]=D.useState(t!==void 0?t:n),o=(a,...l)=>{s(a),r==null||r(a,...l)};return e!==void 0?[e,r,!0]:[i,o,!1]}function VN(e,t){return OOe("(prefers-reduced-motion: reduce)",e,t)}const VOe={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};function gx(e){const t=D.useRef(0),n=D.useRef(null),[r,i]=D.useState(VOe),s=D.useMemo(()=>typeof window<"u"?new ResizeObserver(o=>{const a=o[0];a&&(cancelAnimationFrame(t.current),t.current=requestAnimationFrame(()=>{n.current&&i(a.contentRect)}))}):null,[]);return D.useEffect(()=>(n.current&&(s==null||s.observe(n.current,e)),()=>{s==null||s.disconnect(),t.current&&cancelAnimationFrame(t.current)}),[n.current]),[n,r]}function GOe(e){const[t,{width:n,height:r}]=gx(e);return{ref:t,width:n,height:r}}function nU(e=!1,t){const{onOpen:n,onClose:r}=t||{},[i,s]=D.useState(e),o=D.useCallback(()=>{s(u=>u||(n==null||n(),!0))},[n]),a=D.useCallback(()=>{s(u=>u&&(r==null||r(),!1))},[r]),l=D.useCallback(()=>{i?a():o()},[a,o,i]);return[i,{open:o,close:a,toggle:l}]}function YOe(e){const t=D.useRef(void 0);return D.useEffect(()=>{t.current=e},[e]),t.current}function KOe(e,t){const n=Lm(e),r=D.useRef(null),i=D.useRef(null),s=D.useRef(!0),o=D.useRef(t),a=D.useRef(-1),l=()=>window.clearTimeout(a.current),u=D.useCallback((...f)=>{n(...f),r.current=f,i.current=f,s.current=!1},[n]),c=D.useCallback(()=>{r.current&&r.current!==i.current?(u(...r.current),a.current=window.setTimeout(c,o.current)):s.current=!0},[u]),d=D.useCallback((...f)=>{s.current?(u(...f),a.current=window.setTimeout(c,o.current)):r.current=f},[u,c]);return D.useEffect(()=>{o.current=t},[t]),[d,l]}function XOe(e,t){return KOe(e,t)[0]}function QOe(e,t){window.dispatchEvent(new CustomEvent(e,{detail:t}))}function JOe(e){function t(r){const i=Object.keys(r).reduce((s,o)=>(s[`${e}:${o}`]=a=>r[o](a.detail),s),{});Ev(()=>(Object.keys(i).forEach(s=>{window.removeEventListener(s,i[s]),window.addEventListener(s,i[s])}),()=>Object.keys(i).forEach(s=>{window.removeEventListener(s,i[s])})),[i])}function n(r){return(...i)=>QOe(`${e}:${String(r)}`,i[0])}return[t,n]}var ZOe={};function e$e(){return typeof process<"u"&&ZOe?"production":"development"}function yee(e,t){return t.length===0?e:t.reduce((n,r)=>Math.abs(r-e)<Math.abs(n-e)?r:n)}function GN(e){var n;const t=Jn.version;return typeof Jn.version!="string"||t.startsWith("18.")?e==null?void 0:e.ref:(n=e==null?void 0:e.props)==null?void 0:n.ref}function vpe(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=vpe(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function Mi(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=vpe(e))&&(r&&(r+=" "),r+=t);return r}const t$e={};function n$e(e){const t={};return e.forEach(n=>{Object.entries(n).forEach(([r,i])=>{t[r]?t[r]=Mi(t[r],i):t[r]=i})}),t}function YN({theme:e,classNames:t,props:n,stylesCtx:r}){const s=(Array.isArray(t)?t:[t]).map(o=>typeof o=="function"?o(e,n,r):o||t$e);return n$e(s)}function fD({theme:e,styles:t,props:n,stylesCtx:r}){return(Array.isArray(t)?t:[t]).reduce((s,o)=>typeof o=="function"?{...s,...o(e,n,r)}:{...s,...o},{})}const bpe=D.createContext(null);function $0(){const e=D.useContext(bpe);if(!e)throw new Error("[@mantine/core] MantineProvider was not found in tree");return e}function r$e(){return $0().cssVariablesResolver}function i$e(){return $0().classNamesPrefix}function rU(){return $0().getStyleNonce}function s$e(){return $0().withStaticClasses}function o$e(){return $0().headless}function a$e(){var e;return(e=$0().stylesTransform)==null?void 0:e.sx}function l$e(){var e;return(e=$0().stylesTransform)==null?void 0:e.styles}function u$e(e){return/^#?([0-9A-F]{3}){1,2}([0-9A-F]{2})?$/i.test(e)}function c$e(e){let t=e.replace("#","");if(t.length===3){const o=t.split("");t=[o[0],o[0],o[1],o[1],o[2],o[2]].join("")}if(t.length===8){const o=parseInt(t.slice(6,8),16)/255;return{r:parseInt(t.slice(0,2),16),g:parseInt(t.slice(2,4),16),b:parseInt(t.slice(4,6),16),a:o}}const n=parseInt(t,16),r=n>>16&255,i=n>>8&255,s=n&255;return{r,g:i,b:s,a:1}}function d$e(e){const[t,n,r,i]=e.replace(/[^0-9,./]/g,"").split(/[/,]/).map(Number);return{r:t,g:n,b:r,a:i||1}}function f$e(e){const t=/^hsla?\(\s*(\d+)\s*,\s*(\d+%)\s*,\s*(\d+%)\s*(,\s*(0?\.\d+|\d+(\.\d+)?))?\s*\)$/i,n=e.match(t);if(!n)return{r:0,g:0,b:0,a:1};const r=parseInt(n[1],10),i=parseInt(n[2],10)/100,s=parseInt(n[3],10)/100,o=n[5]?parseFloat(n[5]):void 0,a=(1-Math.abs(2*s-1))*i,l=r/60,u=a*(1-Math.abs(l%2-1)),c=s-a/2;let d,f,h;return l>=0&&l<1?(d=a,f=u,h=0):l>=1&&l<2?(d=u,f=a,h=0):l>=2&&l<3?(d=0,f=a,h=u):l>=3&&l<4?(d=0,f=u,h=a):l>=4&&l<5?(d=u,f=0,h=a):(d=a,f=0,h=u),{r:Math.round((d+c)*255),g:Math.round((f+c)*255),b:Math.round((h+c)*255),a:o||1}}function iU(e){return u$e(e)?c$e(e):e.startsWith("rgb")?d$e(e):e.startsWith("hsl")?f$e(e):{r:0,g:0,b:0,a:1}}function mk(e,t){if(e.startsWith("var("))return`color-mix(in srgb, ${e}, black ${t*100}%)`;const{r:n,g:r,b:i,a:s}=iU(e),o=1-t,a=l=>Math.round(l*o);return`rgba(${a(n)}, ${a(r)}, ${a(i)}, ${s})`}function bT(e,t){return typeof e.primaryShade=="number"?e.primaryShade:t==="dark"?e.primaryShade.dark:e.primaryShade.light}function R8(e){return e<=.03928?e/12.92:((e+.055)/1.055)**2.4}function h$e(e){const t=e.match(/oklch\((.*?)%\s/);return t?parseFloat(t[1]):null}function p$e(e){if(e.startsWith("oklch("))return(h$e(e)||0)/100;const{r:t,g:n,b:r}=iU(e),i=t/255,s=n/255,o=r/255,a=R8(i),l=R8(s),u=R8(o);return .2126*a+.7152*l+.0722*u}function ZE(e,t=.179){return e.startsWith("var(")?!1:p$e(e)>t}function Ff({color:e,theme:t,colorScheme:n}){if(typeof e!="string")throw new Error(`[@mantine/core] Failed to parse color. Expected color to be a string, instead got ${typeof e}`);if(e==="bright")return{color:e,value:n==="dark"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:ZE(n==="dark"?t.white:t.black,t.luminanceThreshold),variable:"--mantine-color-bright"};if(e==="dimmed")return{color:e,value:n==="dark"?t.colors.dark[2]:t.colors.gray[7],shade:void 0,isThemeColor:!1,isLight:ZE(n==="dark"?t.colors.dark[2]:t.colors.gray[6],t.luminanceThreshold),variable:"--mantine-color-dimmed"};if(e==="white"||e==="black")return{color:e,value:e==="white"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:ZE(e==="white"?t.white:t.black,t.luminanceThreshold),variable:`--mantine-color-${e}`};const[r,i]=e.split("."),s=i?Number(i):void 0,o=r in t.colors;if(o){const a=s!==void 0?t.colors[r][s]:t.colors[r][bT(t,n||"light")];return{color:r,value:a,shade:s,isThemeColor:o,isLight:ZE(a,t.luminanceThreshold),variable:i?`--mantine-color-${r}-${s}`:`--mantine-color-${r}-filled`}}return{color:e,value:e,isThemeColor:o,isLight:ZE(e,t.luminanceThreshold),shade:s,variable:void 0}}function $r(e,t){const n=Ff({color:e||t.primaryColor,theme:t});return n.variable?`var(${n.variable})`:e}function A9(e,t){const n={from:(e==null?void 0:e.from)||t.defaultGradient.from,to:(e==null?void 0:e.to)||t.defaultGradient.to,deg:(e==null?void 0:e.deg)||t.defaultGradient.deg||0},r=$r(n.from,t),i=$r(n.to,t);return`linear-gradient(${n.deg}deg, ${r} 0%, ${i} 100%)`}function Ud(e,t){if(typeof e!="string"||t>1||t<0)return"rgba(0, 0, 0, 1)";if(e.startsWith("var(")){const s=(1-t)*100;return`color-mix(in srgb, ${e}, transparent ${s}%)`}if(e.startsWith("oklch"))return e.includes("/")?e.replace(/\/\s*[\d.]+\s*\)/,`/ ${t})`):e.replace(")",` / ${t})`);const{r:n,g:r,b:i}=iU(e);return`rgba(${n}, ${r}, ${i}, ${t})`}const B1=Ud,m$e=({color:e,theme:t,variant:n,gradient:r,autoContrast:i})=>{const s=Ff({color:e,theme:t}),o=typeof i=="boolean"?i:t.autoContrast;if(n==="filled"){const a=o&&s.isLight?"var(--mantine-color-black)":"var(--mantine-color-white)";return s.isThemeColor?s.shade===void 0?{background:`var(--mantine-color-${e}-filled)`,hover:`var(--mantine-color-${e}-filled-hover)`,color:a,border:`${Oe(1)} solid transparent`}:{background:`var(--mantine-color-${s.color}-${s.shade})`,hover:`var(--mantine-color-${s.color}-${s.shade===9?8:s.shade+1})`,color:a,border:`${Oe(1)} solid transparent`}:{background:e,hover:mk(e,.1),color:a,border:`${Oe(1)} solid transparent`}}if(n==="light"){if(s.isThemeColor){if(s.shade===void 0)return{background:`var(--mantine-color-${e}-light)`,hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${Oe(1)} solid transparent`};const a=t.colors[s.color][s.shade];return{background:Ud(a,.1),hover:Ud(a,.12),color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${Oe(1)} solid transparent`}}return{background:Ud(e,.1),hover:Ud(e,.12),color:e,border:`${Oe(1)} solid transparent`}}if(n==="outline")return s.isThemeColor?s.shade===void 0?{background:"transparent",hover:`var(--mantine-color-${e}-outline-hover)`,color:`var(--mantine-color-${e}-outline)`,border:`${Oe(1)} solid var(--mantine-color-${e}-outline)`}:{background:"transparent",hover:Ud(t.colors[s.color][s.shade],.05),color:`var(--mantine-color-${s.color}-${s.shade})`,border:`${Oe(1)} solid var(--mantine-color-${s.color}-${s.shade})`}:{background:"transparent",hover:Ud(e,.05),color:e,border:`${Oe(1)} solid ${e}`};if(n==="subtle"){if(s.isThemeColor){if(s.shade===void 0)return{background:"transparent",hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${Oe(1)} solid transparent`};const a=t.colors[s.color][s.shade];return{background:"transparent",hover:Ud(a,.12),color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${Oe(1)} solid transparent`}}return{background:"transparent",hover:Ud(e,.12),color:e,border:`${Oe(1)} solid transparent`}}return n==="transparent"?s.isThemeColor?s.shade===void 0?{background:"transparent",hover:"transparent",color:`var(--mantine-color-${e}-light-color)`,border:`${Oe(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${Oe(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:e,border:`${Oe(1)} solid transparent`}:n==="white"?s.isThemeColor?s.shade===void 0?{background:"var(--mantine-color-white)",hover:mk(t.white,.01),color:`var(--mantine-color-${e}-filled)`,border:`${Oe(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:mk(t.white,.01),color:`var(--mantine-color-${s.color}-${s.shade})`,border:`${Oe(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:mk(t.white,.01),color:e,border:`${Oe(1)} solid transparent`}:n==="gradient"?{background:A9(r,t),hover:A9(r,t),color:"var(--mantine-color-white)",border:"none"}:n==="default"?{background:"var(--mantine-color-default)",hover:"var(--mantine-color-default-hover)",color:"var(--mantine-color-default-color)",border:`${Oe(1)} solid var(--mantine-color-default-border)`}:{}},g$e={dark:["#C9C9C9","#b8b8b8","#828282","#696969","#424242","#3b3b3b","#2e2e2e","#242424","#1f1f1f","#141414"],gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]},vee="-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",sU={scale:1,fontSmoothing:!0,focusRing:"auto",white:"#fff",black:"#000",colors:g$e,primaryShade:{light:6,dark:8},primaryColor:"blue",variantColorResolver:m$e,autoContrast:!1,luminanceThreshold:.3,fontFamily:vee,fontFamilyMonospace:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace",respectReducedMotion:!1,cursorType:"default",defaultGradient:{from:"blue",to:"cyan",deg:45},defaultRadius:"sm",activeClassName:"mantine-active",focusClassName:"",headings:{fontFamily:vee,fontWeight:"700",textWrap:"wrap",sizes:{h1:{fontSize:Oe(34),lineHeight:"1.3"},h2:{fontSize:Oe(26),lineHeight:"1.35"},h3:{fontSize:Oe(22),lineHeight:"1.4"},h4:{fontSize:Oe(18),lineHeight:"1.45"},h5:{fontSize:Oe(16),lineHeight:"1.5"},h6:{fontSize:Oe(14),lineHeight:"1.5"}}},fontSizes:{xs:Oe(12),sm:Oe(14),md:Oe(16),lg:Oe(18),xl:Oe(20)},lineHeights:{xs:"1.4",sm:"1.45",md:"1.55",lg:"1.6",xl:"1.65"},radius:{xs:Oe(2),sm:Oe(4),md:Oe(8),lg:Oe(16),xl:Oe(32)},spacing:{xs:Oe(10),sm:Oe(12),md:Oe(16),lg:Oe(20),xl:Oe(32)},breakpoints:{xs:"36em",sm:"48em",md:"62em",lg:"75em",xl:"88em"},shadows:{xs:`0 ${Oe(1)} ${Oe(3)} rgba(0, 0, 0, 0.05), 0 ${Oe(1)} ${Oe(2)} rgba(0, 0, 0, 0.1)`,sm:`0 ${Oe(1)} ${Oe(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Oe(10)} ${Oe(15)} ${Oe(-5)}, rgba(0, 0, 0, 0.04) 0 ${Oe(7)} ${Oe(7)} ${Oe(-5)}`,md:`0 ${Oe(1)} ${Oe(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Oe(20)} ${Oe(25)} ${Oe(-5)}, rgba(0, 0, 0, 0.04) 0 ${Oe(10)} ${Oe(10)} ${Oe(-5)}`,lg:`0 ${Oe(1)} ${Oe(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Oe(28)} ${Oe(23)} ${Oe(-7)}, rgba(0, 0, 0, 0.04) 0 ${Oe(12)} ${Oe(12)} ${Oe(-7)}`,xl:`0 ${Oe(1)} ${Oe(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Oe(36)} ${Oe(28)} ${Oe(-7)}, rgba(0, 0, 0, 0.04) 0 ${Oe(17)} ${Oe(17)} ${Oe(-7)}`},other:{},components:{}};function bee(e){return e==="auto"||e==="dark"||e==="light"}function y$e({key:e="mantine-color-scheme-value"}={}){let t;return{get:n=>{if(typeof window>"u")return n;try{const r=window.localStorage.getItem(e);return bee(r)?r:n}catch{return n}},set:n=>{try{window.localStorage.setItem(e,n)}catch(r){console.warn("[@mantine/core] Local storage color scheme manager was unable to save color scheme.",r)}},subscribe:n=>{t=r=>{r.storageArea===window.localStorage&&r.key===e&&bee(r.newValue)&&n(r.newValue)},window.addEventListener("storage",t)},unsubscribe:()=>{window.removeEventListener("storage",t)},clear:()=>{window.localStorage.removeItem(e)}}}const v$e="[@mantine/core] MantineProvider: Invalid theme.primaryColor, it accepts only key of theme.colors, learn more  https://mantine.dev/theming/colors/#primary-color",wee="[@mantine/core] MantineProvider: Invalid theme.primaryShade, it accepts only 0-9 integers or an object { light: 0-9, dark: 0-9 }";function D8(e){return e<0||e>9?!1:parseInt(e.toString(),10)===e}function xee(e){if(!(e.primaryColor in e.colors))throw new Error(v$e);if(typeof e.primaryShade=="object"&&(!D8(e.primaryShade.dark)||!D8(e.primaryShade.light)))throw new Error(wee);if(typeof e.primaryShade=="number"&&!D8(e.primaryShade))throw new Error(wee)}function b$e(e,t){var r;if(!t)return xee(e),e;const n=Jz(e,t);return t.fontFamily&&!((r=t.headings)!=null&&r.fontFamily)&&(n.headings.fontFamily=t.fontFamily),xee(n),n}const oU=D.createContext(null),w$e=()=>D.useContext(oU)||sU;function Yi(){const e=D.useContext(oU);if(!e)throw new Error("@mantine/core: MantineProvider was not found in component tree, make sure you have it in your app");return e}function wpe({theme:e,children:t,inherit:n=!0}){const r=w$e(),i=D.useMemo(()=>b$e(n?r:sU,e),[e,r,n]);return T.jsx(oU.Provider,{value:i,children:t})}wpe.displayName="@mantine/core/MantineThemeProvider";function x$e(){const e=Yi(),t=rU(),n=Or(e.breakpoints).reduce((r,i)=>{const s=e.breakpoints[i].includes("px"),o=yT(e.breakpoints[i]),a=s?`${o-.1}px`:lD(o-.1),l=s?`${o}px`:lD(o);return`${r}@media (max-width: ${a}) {.mantine-visible-from-${i} {display: none !important;}}@media (min-width: ${l}) {.mantine-hidden-from-${i} {display: none !important;}}`},"");return T.jsx("style",{"data-mantine-styles":"classes",nonce:t==null?void 0:t(),dangerouslySetInnerHTML:{__html:n}})}function P8(e){return Object.entries(e).map(([t,n])=>`${t}: ${n};`).join("")}function e_(e,t){return(Array.isArray(e)?e:[e]).reduce((r,i)=>`${i}{${r}}`,t)}function E$e(e,t){const n=P8(e.variables),r=n?e_(t,n):"",i=P8(e.dark),s=P8(e.light),o=i?e_(t===":host"?`${t}([data-mantine-color-scheme="dark"])`:`${t}[data-mantine-color-scheme="dark"]`,i):"",a=s?e_(t===":host"?`${t}([data-mantine-color-scheme="light"])`:`${t}[data-mantine-color-scheme="light"]`,s):"";return`${r}${o}${a}`}function _v({color:e,theme:t,autoContrast:n}){return(typeof n=="boolean"?n:t.autoContrast)&&Ff({color:e||t.primaryColor,theme:t}).isLight?"var(--mantine-color-black)":"var(--mantine-color-white)"}function Eee(e,t){return _v({color:e.colors[e.primaryColor][bT(e,t)],theme:e,autoContrast:null})}function gk({theme:e,color:t,colorScheme:n,name:r=t,withColorValues:i=!0}){if(!e.colors[t])return{};if(n==="light"){const a=bT(e,"light"),l={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-filled)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${a===9?8:a+1})`,[`--mantine-color-${r}-light`]:B1(e.colors[t][a],.1),[`--mantine-color-${r}-light-hover`]:B1(e.colors[t][a],.12),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline-hover`]:B1(e.colors[t][a],.05)};return i?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...l}:l}const s=bT(e,"dark"),o={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-4)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${s})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${s===9?8:s+1})`,[`--mantine-color-${r}-light`]:B1(e.colors[t][Math.max(0,s-2)],.15),[`--mantine-color-${r}-light-hover`]:B1(e.colors[t][Math.max(0,s-2)],.2),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${Math.max(s-5,0)})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${Math.max(s-4,0)})`,[`--mantine-color-${r}-outline-hover`]:B1(e.colors[t][Math.max(s-4,0)],.05)};return i?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...o}:o}function _$e(e){return!!e&&typeof e=="object"&&"mantine-virtual-color"in e}function z1(e,t,n){Or(t).forEach(r=>Object.assign(e,{[`--mantine-${n}-${r}`]:t[r]}))}const xpe=e=>{const t=bT(e,"light"),n=e.defaultRadius in e.radius?e.radius[e.defaultRadius]:Oe(e.defaultRadius),r={variables:{"--mantine-scale":e.scale.toString(),"--mantine-cursor-type":e.cursorType,"--mantine-color-scheme":"light dark","--mantine-webkit-font-smoothing":e.fontSmoothing?"antialiased":"unset","--mantine-moz-font-smoothing":e.fontSmoothing?"grayscale":"unset","--mantine-color-white":e.white,"--mantine-color-black":e.black,"--mantine-line-height":e.lineHeights.md,"--mantine-font-family":e.fontFamily,"--mantine-font-family-monospace":e.fontFamilyMonospace,"--mantine-font-family-headings":e.headings.fontFamily,"--mantine-heading-font-weight":e.headings.fontWeight,"--mantine-heading-text-wrap":e.headings.textWrap,"--mantine-radius-default":n,"--mantine-primary-color-filled":`var(--mantine-color-${e.primaryColor}-filled)`,"--mantine-primary-color-filled-hover":`var(--mantine-color-${e.primaryColor}-filled-hover)`,"--mantine-primary-color-light":`var(--mantine-color-${e.primaryColor}-light)`,"--mantine-primary-color-light-hover":`var(--mantine-color-${e.primaryColor}-light-hover)`,"--mantine-primary-color-light-color":`var(--mantine-color-${e.primaryColor}-light-color)`},light:{"--mantine-primary-color-contrast":Eee(e,"light"),"--mantine-color-bright":"var(--mantine-color-black)","--mantine-color-text":e.black,"--mantine-color-body":e.white,"--mantine-color-error":"var(--mantine-color-red-6)","--mantine-color-placeholder":"var(--mantine-color-gray-5)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-${t})`,"--mantine-color-default":"var(--mantine-color-white)","--mantine-color-default-hover":"var(--mantine-color-gray-0)","--mantine-color-default-color":"var(--mantine-color-black)","--mantine-color-default-border":"var(--mantine-color-gray-4)","--mantine-color-dimmed":"var(--mantine-color-gray-6)"},dark:{"--mantine-primary-color-contrast":Eee(e,"dark"),"--mantine-color-bright":"var(--mantine-color-white)","--mantine-color-text":"var(--mantine-color-dark-0)","--mantine-color-body":"var(--mantine-color-dark-7)","--mantine-color-error":"var(--mantine-color-red-8)","--mantine-color-placeholder":"var(--mantine-color-dark-3)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-4)`,"--mantine-color-default":"var(--mantine-color-dark-6)","--mantine-color-default-hover":"var(--mantine-color-dark-5)","--mantine-color-default-color":"var(--mantine-color-white)","--mantine-color-default-border":"var(--mantine-color-dark-4)","--mantine-color-dimmed":"var(--mantine-color-dark-2)"}};z1(r.variables,e.breakpoints,"breakpoint"),z1(r.variables,e.spacing,"spacing"),z1(r.variables,e.fontSizes,"font-size"),z1(r.variables,e.lineHeights,"line-height"),z1(r.variables,e.shadows,"shadow"),z1(r.variables,e.radius,"radius"),e.colors[e.primaryColor].forEach((s,o)=>{r.variables[`--mantine-primary-color-${o}`]=`var(--mantine-color-${e.primaryColor}-${o})`}),Or(e.colors).forEach(s=>{const o=e.colors[s];if(_$e(o)){Object.assign(r.light,gk({theme:e,name:o.name,color:o.light,colorScheme:"light",withColorValues:!0})),Object.assign(r.dark,gk({theme:e,name:o.name,color:o.dark,colorScheme:"dark",withColorValues:!0}));return}o.forEach((a,l)=>{r.variables[`--mantine-color-${s}-${l}`]=a}),Object.assign(r.light,gk({theme:e,color:s,colorScheme:"light",withColorValues:!1})),Object.assign(r.dark,gk({theme:e,color:s,colorScheme:"dark",withColorValues:!1}))});const i=e.headings.sizes;return Or(i).forEach(s=>{r.variables[`--mantine-${s}-font-size`]=i[s].fontSize,r.variables[`--mantine-${s}-line-height`]=i[s].lineHeight,r.variables[`--mantine-${s}-font-weight`]=i[s].fontWeight||e.headings.fontWeight}),r};function T$e({theme:e,generator:t}){const n=xpe(e),r=t==null?void 0:t(e);return r?Jz(n,r):n}const N8=xpe(sU);function C$e(e){const t={variables:{},light:{},dark:{}};return Or(e.variables).forEach(n=>{N8.variables[n]!==e.variables[n]&&(t.variables[n]=e.variables[n])}),Or(e.light).forEach(n=>{N8.light[n]!==e.light[n]&&(t.light[n]=e.light[n])}),Or(e.dark).forEach(n=>{N8.dark[n]!==e.dark[n]&&(t.dark[n]=e.dark[n])}),t}function S$e(e){return`
  ${e}[data-mantine-color-scheme="dark"] { --mantine-color-scheme: dark; }
  ${e}[data-mantine-color-scheme="light"] { --mantine-color-scheme: light; }
`}function Epe({cssVariablesSelector:e,deduplicateCssVariables:t}){const n=Yi(),r=rU(),i=r$e(),s=T$e({theme:n,generator:i}),o=e===":root"&&t,a=o?C$e(s):s,l=E$e(a,e);return l?T.jsx("style",{"data-mantine-styles":!0,nonce:r==null?void 0:r(),dangerouslySetInnerHTML:{__html:`${l}${o?"":S$e(e)}`}}):null}Epe.displayName="@mantine/CssVariables";function A$e(){const e=console.error;console.error=(...t)=>{t.length>1&&typeof t[0]=="string"&&t[0].toLowerCase().includes("extra attributes from the server")&&typeof t[1]=="string"&&t[1].toLowerCase().includes("data-mantine-color-scheme")||e(...t)}}function U1(e,t){var i;const n=typeof window<"u"&&"matchMedia"in window&&window.matchMedia("(prefers-color-scheme: dark)").matches,r=e!=="auto"?e:n?"dark":"light";(i=t())==null||i.setAttribute("data-mantine-color-scheme",r)}function k$e({manager:e,defaultColorScheme:t,getRootElement:n,forceColorScheme:r}){const i=D.useRef(null),[s,o]=D.useState(()=>e.get(t)),a=r||s,l=D.useCallback(c=>{r||(U1(c,n),o(c),e.set(c))},[e.set,a,r]),u=D.useCallback(()=>{o(t),U1(t,n),e.clear()},[e.clear,t]);return D.useEffect(()=>(e.subscribe(l),e.unsubscribe),[e.subscribe,e.unsubscribe]),Ev(()=>{U1(e.get(t),n)},[]),D.useEffect(()=>{var d;if(r)return U1(r,n),()=>{};r===void 0&&U1(s,n),typeof window<"u"&&"matchMedia"in window&&(i.current=window.matchMedia("(prefers-color-scheme: dark)"));const c=f=>{s==="auto"&&U1(f.matches?"dark":"light",n)};return(d=i.current)==null||d.addEventListener("change",c),()=>{var f;return(f=i.current)==null?void 0:f.removeEventListener("change",c)}},[s,r]),{colorScheme:a,setColorScheme:l,clearColorScheme:u}}function I$e({respectReducedMotion:e,getRootElement:t}){Ev(()=>{var n;e&&((n=t())==null||n.setAttribute("data-respect-reduced-motion","true"))},[e])}A$e();function _pe({theme:e,children:t,getStyleNonce:n,withStaticClasses:r=!0,withGlobalClasses:i=!0,deduplicateCssVariables:s=!0,withCssVariables:o=!0,cssVariablesSelector:a=":root",classNamesPrefix:l="mantine",colorSchemeManager:u=y$e(),defaultColorScheme:c="light",getRootElement:d=()=>document.documentElement,cssVariablesResolver:f,forceColorScheme:h,stylesTransform:p}){const{colorScheme:m,setColorScheme:g,clearColorScheme:b}=k$e({defaultColorScheme:c,forceColorScheme:h,manager:u,getRootElement:d});return I$e({respectReducedMotion:(e==null?void 0:e.respectReducedMotion)||!1,getRootElement:d}),T.jsx(bpe.Provider,{value:{colorScheme:m,setColorScheme:g,clearColorScheme:b,getRootElement:d,classNamesPrefix:l,getStyleNonce:n,cssVariablesResolver:f,cssVariablesSelector:a,withStaticClasses:r,stylesTransform:p},children:T.jsxs(wpe,{theme:e,children:[o&&T.jsx(Epe,{cssVariablesSelector:a,deduplicateCssVariables:s}),i&&T.jsx(x$e,{}),t]})})}_pe.displayName="@mantine/core/MantineProvider";function Tv({classNames:e,styles:t,props:n,stylesCtx:r}){const i=Yi();return{resolvedClassNames:YN({theme:i,classNames:e,props:n,stylesCtx:r||void 0}),resolvedStyles:fD({theme:i,styles:t,props:n,stylesCtx:r||void 0})}}const R$e={always:"mantine-focus-always",auto:"mantine-focus-auto",never:"mantine-focus-never"};function D$e({theme:e,options:t,unstyled:n}){return Mi((t==null?void 0:t.focusable)&&!n&&(e.focusClassName||R$e[e.focusRing]),(t==null?void 0:t.active)&&!n&&e.activeClassName)}function P$e({selector:e,stylesCtx:t,options:n,props:r,theme:i}){return YN({theme:i,classNames:n==null?void 0:n.classNames,props:(n==null?void 0:n.props)||r,stylesCtx:t})[e]}function _ee({selector:e,stylesCtx:t,theme:n,classNames:r,props:i}){return YN({theme:n,classNames:r,props:i,stylesCtx:t})[e]}function N$e({rootSelector:e,selector:t,className:n}){return e===t?n:void 0}function O$e({selector:e,classes:t,unstyled:n}){return n?void 0:t[e]}function $$e({themeName:e,classNamesPrefix:t,selector:n,withStaticClass:r}){return r===!1?[]:e.map(i=>`${t}-${i}-${n}`)}function M$e({themeName:e,theme:t,selector:n,props:r,stylesCtx:i}){return e.map(s=>{var o,a;return(a=YN({theme:t,classNames:(o=t.components[s])==null?void 0:o.classNames,props:r,stylesCtx:i}))==null?void 0:a[n]})}function L$e({options:e,classes:t,selector:n,unstyled:r}){return e!=null&&e.variant&&!r?t[`${n}--${e.variant}`]:void 0}function F$e({theme:e,options:t,themeName:n,selector:r,classNamesPrefix:i,classNames:s,classes:o,unstyled:a,className:l,rootSelector:u,props:c,stylesCtx:d,withStaticClasses:f,headless:h,transformedStyles:p}){return Mi(D$e({theme:e,options:t,unstyled:a||h}),M$e({theme:e,themeName:n,selector:r,props:c,stylesCtx:d}),L$e({options:t,classes:o,selector:r,unstyled:a}),_ee({selector:r,stylesCtx:d,theme:e,classNames:s,props:c}),_ee({selector:r,stylesCtx:d,theme:e,classNames:p,props:c}),P$e({selector:r,stylesCtx:d,options:t,props:c,theme:e}),N$e({rootSelector:u,selector:r,className:l}),O$e({selector:r,classes:o,unstyled:a||h}),f&&!h&&$$e({themeName:n,classNamesPrefix:i,selector:r,withStaticClass:t==null?void 0:t.withStaticClass}),t==null?void 0:t.className)}function j$e({theme:e,themeName:t,props:n,stylesCtx:r,selector:i}){return t.map(s=>{var o;return fD({theme:e,styles:(o=e.components[s])==null?void 0:o.styles,props:n,stylesCtx:r})[i]}).reduce((s,o)=>({...s,...o}),{})}function k9({style:e,theme:t}){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...k9({style:r,theme:t})}),{}):typeof e=="function"?e(t):e??{}}function B$e(e){return e.reduce((t,n)=>(n&&Object.keys(n).forEach(r=>{t[r]={...t[r],...O0(n[r])}}),t),{})}function z$e({vars:e,varsResolver:t,theme:n,props:r,stylesCtx:i,selector:s,themeName:o,headless:a}){var l;return(l=B$e([a?{}:t==null?void 0:t(n,r,i),...o.map(u=>{var c,d,f;return(f=(d=(c=n.components)==null?void 0:c[u])==null?void 0:d.vars)==null?void 0:f.call(d,n,r,i)}),e==null?void 0:e(n,r,i)]))==null?void 0:l[s]}function U$e({theme:e,themeName:t,selector:n,options:r,props:i,stylesCtx:s,rootSelector:o,styles:a,style:l,vars:u,varsResolver:c,headless:d,withStylesTransform:f}){return{...!f&&j$e({theme:e,themeName:t,props:i,stylesCtx:s,selector:n}),...!f&&fD({theme:e,styles:a,props:i,stylesCtx:s})[n],...!f&&fD({theme:e,styles:r==null?void 0:r.styles,props:(r==null?void 0:r.props)||i,stylesCtx:s})[n],...z$e({theme:e,props:i,stylesCtx:s,vars:u,varsResolver:c,selector:n,themeName:t,headless:d}),...o===n?k9({style:l,theme:e}):null,...k9({style:r==null?void 0:r.style,theme:e})}}function q$e({props:e,stylesCtx:t,themeName:n}){var o;const r=Yi(),i=(o=l$e())==null?void 0:o();return{getTransformedStyles:a=>i?[...a.map(u=>i(u,{props:e,theme:r,ctx:t})),...n.map(u=>{var c;return i((c=r.components[u])==null?void 0:c.styles,{props:e,theme:r,ctx:t})})].filter(Boolean):[],withStylesTransform:!!i}}function Nt({name:e,classes:t,props:n,stylesCtx:r,className:i,style:s,rootSelector:o="root",unstyled:a,classNames:l,styles:u,vars:c,varsResolver:d}){const f=Yi(),h=i$e(),p=s$e(),m=o$e(),g=(Array.isArray(e)?e:[e]).filter(x=>x),{withStylesTransform:b,getTransformedStyles:v}=q$e({props:n,stylesCtx:r,themeName:g});return(x,E)=>({className:F$e({theme:f,options:E,themeName:g,selector:x,classNamesPrefix:h,classNames:l,classes:t,unstyled:a,className:i,rootSelector:o,props:n,stylesCtx:r,withStaticClasses:p,headless:m,transformedStyles:v([E==null?void 0:E.styles,u])}),style:U$e({theme:f,themeName:g,selector:x,options:E,props:n,stylesCtx:r,rootSelector:o,styles:u,style:s,vars:c,varsResolver:d,headless:m,withStylesTransform:b})})}function yx(e,t){return typeof e=="boolean"?e:t.autoContrast}function $e(e,t,n){var o;const r=Yi(),i=(o=r.components[e])==null?void 0:o.defaultProps,s=typeof i=="function"?i(r):i;return{...t,...s,...O0(n)}}function O8(e){return Or(e).reduce((t,n)=>e[n]!==void 0?`${t}${xOe(n)}:${e[n]};`:t,"").trim()}function H$e({selector:e,styles:t,media:n,container:r}){const i=t?O8(t):"",s=Array.isArray(n)?n.map(a=>`@media${a.query}{${e}{${O8(a.styles)}}}`):[],o=Array.isArray(r)?r.map(a=>`@container ${a.query}{${e}{${O8(a.styles)}}}`):[];return`${i?`${e}{${i}}`:""}${s.join("")}${o.join("")}`.trim()}function Cv(e){const t=rU();return T.jsx("style",{"data-mantine-styles":"inline",nonce:t==null?void 0:t(),dangerouslySetInnerHTML:{__html:H$e(e)}})}function Sv(e){const{m:t,mx:n,my:r,mt:i,mb:s,ml:o,mr:a,me:l,ms:u,p:c,px:d,py:f,pt:h,pb:p,pl:m,pr:g,pe:b,ps:v,bd:x,bg:E,c:_,opacity:C,ff:S,fz:k,fw:R,lts:O,ta:N,lh:L,fs:$,tt:B,td:H,w:Y,miw:J,maw:K,h:Z,mih:U,mah:j,bgsz:V,bgp:z,bgr:G,bga:Q,pos:ie,top:me,left:ae,bottom:fe,right:be,inset:te,display:re,flex:we,hiddenFrom:Ee,visibleFrom:Fe,lightHidden:We,darkHidden:Me,sx:Be,...Je}=e;return{styleProps:O0({m:t,mx:n,my:r,mt:i,mb:s,ml:o,mr:a,me:l,ms:u,p:c,px:d,py:f,pt:h,pb:p,pl:m,pr:g,pe:b,ps:v,bd:x,bg:E,c:_,opacity:C,ff:S,fz:k,fw:R,lts:O,ta:N,lh:L,fs:$,tt:B,td:H,w:Y,miw:J,maw:K,h:Z,mih:U,mah:j,bgsz:V,bgp:z,bgr:G,bga:Q,pos:ie,top:me,left:ae,bottom:fe,right:be,inset:te,display:re,flex:we,hiddenFrom:Ee,visibleFrom:Fe,lightHidden:We,darkHidden:Me,sx:Be}),rest:Je}}const W$e={m:{type:"spacing",property:"margin"},mt:{type:"spacing",property:"marginTop"},mb:{type:"spacing",property:"marginBottom"},ml:{type:"spacing",property:"marginLeft"},mr:{type:"spacing",property:"marginRight"},ms:{type:"spacing",property:"marginInlineStart"},me:{type:"spacing",property:"marginInlineEnd"},mx:{type:"spacing",property:"marginInline"},my:{type:"spacing",property:"marginBlock"},p:{type:"spacing",property:"padding"},pt:{type:"spacing",property:"paddingTop"},pb:{type:"spacing",property:"paddingBottom"},pl:{type:"spacing",property:"paddingLeft"},pr:{type:"spacing",property:"paddingRight"},ps:{type:"spacing",property:"paddingInlineStart"},pe:{type:"spacing",property:"paddingInlineEnd"},px:{type:"spacing",property:"paddingInline"},py:{type:"spacing",property:"paddingBlock"},bd:{type:"border",property:"border"},bg:{type:"color",property:"background"},c:{type:"textColor",property:"color"},opacity:{type:"identity",property:"opacity"},ff:{type:"fontFamily",property:"fontFamily"},fz:{type:"fontSize",property:"fontSize"},fw:{type:"identity",property:"fontWeight"},lts:{type:"size",property:"letterSpacing"},ta:{type:"identity",property:"textAlign"},lh:{type:"lineHeight",property:"lineHeight"},fs:{type:"identity",property:"fontStyle"},tt:{type:"identity",property:"textTransform"},td:{type:"identity",property:"textDecoration"},w:{type:"spacing",property:"width"},miw:{type:"spacing",property:"minWidth"},maw:{type:"spacing",property:"maxWidth"},h:{type:"spacing",property:"height"},mih:{type:"spacing",property:"minHeight"},mah:{type:"spacing",property:"maxHeight"},bgsz:{type:"size",property:"backgroundSize"},bgp:{type:"identity",property:"backgroundPosition"},bgr:{type:"identity",property:"backgroundRepeat"},bga:{type:"identity",property:"backgroundAttachment"},pos:{type:"identity",property:"position"},top:{type:"size",property:"top"},left:{type:"size",property:"left"},bottom:{type:"size",property:"bottom"},right:{type:"size",property:"right"},inset:{type:"size",property:"inset"},display:{type:"identity",property:"display"},flex:{type:"identity",property:"flex"}};function aU(e,t){const n=Ff({color:e,theme:t});return n.color==="dimmed"?"var(--mantine-color-dimmed)":n.color==="bright"?"var(--mantine-color-bright)":n.variable?`var(${n.variable})`:n.color}function V$e(e,t){const n=Ff({color:e,theme:t});return n.isThemeColor&&n.shade===void 0?`var(--mantine-color-${n.color}-text)`:aU(e,t)}function G$e(e,t){if(typeof e=="number")return Oe(e);if(typeof e=="string"){const[n,r,...i]=e.split(" ").filter(o=>o.trim()!=="");let s=`${Oe(n)}`;return r&&(s+=` ${r}`),i.length>0&&(s+=` ${aU(i.join(" "),t)}`),s.trim()}return e}const Tee={text:"var(--mantine-font-family)",mono:"var(--mantine-font-family-monospace)",monospace:"var(--mantine-font-family-monospace)",heading:"var(--mantine-font-family-headings)",headings:"var(--mantine-font-family-headings)"};function Y$e(e){return typeof e=="string"&&e in Tee?Tee[e]:e}const K$e=["h1","h2","h3","h4","h5","h6"];function X$e(e,t){return typeof e=="string"&&e in t.fontSizes?`var(--mantine-font-size-${e})`:typeof e=="string"&&K$e.includes(e)?`var(--mantine-${e}-font-size)`:typeof e=="number"||typeof e=="string"?Oe(e):e}function Q$e(e){return e}const J$e=["h1","h2","h3","h4","h5","h6"];function Z$e(e,t){return typeof e=="string"&&e in t.lineHeights?`var(--mantine-line-height-${e})`:typeof e=="string"&&J$e.includes(e)?`var(--mantine-${e}-line-height)`:e}function e4e(e){return typeof e=="number"?Oe(e):e}function t4e(e,t){if(typeof e=="number")return Oe(e);if(typeof e=="string"){const n=e.replace("-","");if(!(n in t.spacing))return Oe(e);const r=`--mantine-spacing-${n}`;return e.startsWith("-")?`calc(var(${r}) * -1)`:`var(${r})`}return e}const $8={color:aU,textColor:V$e,fontSize:X$e,spacing:t4e,identity:Q$e,size:e4e,lineHeight:Z$e,fontFamily:Y$e,border:G$e};function Cee(e){return e.replace("(min-width: ","").replace("em)","")}function n4e({media:e,...t}){const r=Object.keys(e).sort((i,s)=>Number(Cee(i))-Number(Cee(s))).map(i=>({query:i,styles:e[i]}));return{...t,media:r}}function r4e(e){if(typeof e!="object"||e===null)return!1;const t=Object.keys(e);return!(t.length===1&&t[0]==="base")}function i4e(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}function s4e(e){return typeof e=="object"&&e!==null?Or(e).filter(t=>t!=="base"):[]}function o4e(e,t){return typeof e=="object"&&e!==null&&t in e?e[t]:e}function Tpe({styleProps:e,data:t,theme:n}){return n4e(Or(e).reduce((r,i)=>{if(i==="hiddenFrom"||i==="visibleFrom"||i==="sx")return r;const s=t[i],o=Array.isArray(s.property)?s.property:[s.property],a=i4e(e[i]);if(!r4e(e[i]))return o.forEach(u=>{r.inlineStyles[u]=$8[s.type](a,n)}),r;r.hasResponsiveStyles=!0;const l=s4e(e[i]);return o.forEach(u=>{a&&(r.styles[u]=$8[s.type](a,n)),l.forEach(c=>{const d=`(min-width: ${n.breakpoints[c]})`;r.media[d]={...r.media[d],[u]:$8[s.type](o4e(e[i],c),n)}})}),r},{hasResponsiveStyles:!1,styles:{},inlineStyles:{},media:{}}))}function kC(){return`__m__-${D.useId().replace(/:/g,"")}`}function lU(e,t){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...lU(r,t)}),{}):typeof e=="function"?e(t):e??{}}function Cpe(e){return e.startsWith("data-")?e:`data-${e}`}function a4e(e){return Object.keys(e).reduce((t,n)=>{const r=e[n];return r===void 0||r===""||r===!1||r===null||(t[Cpe(n)]=e[n]),t},{})}function Spe(e){return e?typeof e=="string"?{[Cpe(e)]:!0}:Array.isArray(e)?[...e].reduce((t,n)=>({...t,...Spe(n)}),{}):a4e(e):null}function I9(e,t){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...I9(r,t)}),{}):typeof e=="function"?e(t):e??{}}function l4e({theme:e,style:t,vars:n,styleProps:r}){const i=I9(t,e),s=I9(n,e);return{...i,...s,...r}}const Ape=D.forwardRef(({component:e,style:t,__vars:n,className:r,variant:i,mod:s,size:o,hiddenFrom:a,visibleFrom:l,lightHidden:u,darkHidden:c,renderRoot:d,__size:f,...h},p)=>{var k;const m=Yi(),g=e||"div",{styleProps:b,rest:v}=Sv(h),x=a$e(),E=(k=x==null?void 0:x())==null?void 0:k(b.sx),_=kC(),C=Tpe({styleProps:b,theme:m,data:W$e}),S={ref:p,style:l4e({theme:m,style:t,vars:n,styleProps:C.inlineStyles}),className:Mi(r,E,{[_]:C.hasResponsiveStyles,"mantine-light-hidden":u,"mantine-dark-hidden":c,[`mantine-hidden-from-${a}`]:a,[`mantine-visible-from-${l}`]:l}),"data-variant":i,"data-size":cpe(o)?void 0:o||void 0,size:f,...Spe(s),...v};return T.jsxs(T.Fragment,{children:[C.hasResponsiveStyles&&T.jsx(Cv,{selector:`.${_}`,styles:C.styles,media:C.media}),typeof d=="function"?d(S):T.jsx(g,{...S})]})});Ape.displayName="@mantine/core/Box";const Se=Ape;function kpe(e){return e}function u4e(e){const t=e;return n=>{const r=D.forwardRef((i,s)=>T.jsx(t,{...n,...i,ref:s}));return r.extend=t.extend,r.displayName=`WithProps(${t.displayName})`,r}}function Ze(e){const t=D.forwardRef(e);return t.extend=kpe,t.withProps=n=>{const r=D.forwardRef((i,s)=>T.jsx(t,{...n,...i,ref:s}));return r.extend=t.extend,r.displayName=`WithProps(${t.displayName})`,r},t}function Ki(e){const t=D.forwardRef(e);return t.withProps=n=>{const r=D.forwardRef((i,s)=>T.jsx(t,{...n,...i,ref:s}));return r.extend=t.extend,r.displayName=`WithProps(${t.displayName})`,r},t.extend=kpe,t}const c4e=D.createContext({dir:"ltr",toggleDirection:()=>{},setDirection:()=>{}});function Np(){return D.useContext(c4e)}var KN=npe();const G_=vl(KN);function d4e(e){if(!e||typeof e=="string")return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function M8(e){return e!=null&&e.current?e.current.scrollHeight:"auto"}const t_=typeof window<"u"&&window.requestAnimationFrame;function f4e({transitionDuration:e,transitionTimingFunction:t="ease",onTransitionEnd:n=()=>{},opened:r}){const i=D.useRef(null),s=0,o={display:"none",height:0,overflow:"hidden"},[a,l]=D.useState(r?{}:o),u=p=>{KN.flushSync(()=>l(p))},c=p=>{u(m=>({...m,...p}))};function d(p){const m=e||d4e(p);return{transition:`height ${m}ms ${t}, opacity ${m}ms ${t}`}}xf(()=>{typeof t_=="function"&&t_(r?()=>{c({willChange:"height",display:"block",overflow:"hidden"}),t_(()=>{const p=M8(i);c({...d(p),height:p})})}:()=>{const p=M8(i);c({...d(p),willChange:"height",height:p}),t_(()=>c({height:s,overflow:"hidden"}))})},[r]);const f=p=>{if(!(p.target!==i.current||p.propertyName!=="height"))if(r){const m=M8(i);m===a.height?u({}):c({height:m}),n()}else a.height===s&&(u(o),n())};function h({style:p={},refKey:m="ref",...g}={}){const b=g[m];return{"aria-hidden":!r,...g,[m]:ype(i,b),onTransitionEnd:f,style:{boxSizing:"border-box",...p,...a}}}return h}const h4e={transitionDuration:200,transitionTimingFunction:"ease",animateOpacity:!0},XN=Ze((e,t)=>{const{children:n,in:r,transitionDuration:i,transitionTimingFunction:s,style:o,onTransitionEnd:a,animateOpacity:l,...u}=$e("Collapse",h4e,e),c=Yi(),d=VN(),h=(c.respectReducedMotion?d:!1)?0:i,p=f4e({opened:r,transitionDuration:h,transitionTimingFunction:s,onTransitionEnd:a});return h===0?r?T.jsx(Se,{...u,children:n}):null:T.jsx(Se,{...p({style:{opacity:r||!l?1:0,transition:l?`opacity ${h}ms ${s}`:"none",...lU(o,c)},ref:t,...u}),children:n})});XN.displayName="@mantine/core/Collapse";const[p4e,zu]=ps("ScrollArea.Root component was not found in tree");function vw(e,t){const n=Lm(t);Ev(()=>{let r=0;if(e){const i=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return i.observe(e),()=>{window.cancelAnimationFrame(r),i.unobserve(e)}}},[e,n])}const m4e=D.forwardRef((e,t)=>{const{style:n,...r}=e,i=zu(),[s,o]=D.useState(0),[a,l]=D.useState(0),u=!!(s&&a);return vw(i.scrollbarX,()=>{var d;const c=((d=i.scrollbarX)==null?void 0:d.offsetHeight)||0;i.onCornerHeightChange(c),l(c)}),vw(i.scrollbarY,()=>{var d;const c=((d=i.scrollbarY)==null?void 0:d.offsetWidth)||0;i.onCornerWidthChange(c),o(c)}),u?T.jsx("div",{...r,ref:t,style:{...n,width:s,height:a}}):null}),g4e=D.forwardRef((e,t)=>{const n=zu(),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?T.jsx(m4e,{...e,ref:t}):null}),y4e={scrollHideDelay:1e3,type:"hover"},Ipe=D.forwardRef((e,t)=>{const n=$e("ScrollAreaRoot",y4e,e),{type:r,scrollHideDelay:i,scrollbars:s,...o}=n,[a,l]=D.useState(null),[u,c]=D.useState(null),[d,f]=D.useState(null),[h,p]=D.useState(null),[m,g]=D.useState(null),[b,v]=D.useState(0),[x,E]=D.useState(0),[_,C]=D.useState(!1),[S,k]=D.useState(!1),R=ms(t,O=>l(O));return T.jsx(p4e,{value:{type:r,scrollHideDelay:i,scrollArea:a,viewport:u,onViewportChange:c,content:d,onContentChange:f,scrollbarX:h,onScrollbarXChange:p,scrollbarXEnabled:_,onScrollbarXEnabledChange:C,scrollbarY:m,onScrollbarYChange:g,scrollbarYEnabled:S,onScrollbarYEnabledChange:k,onCornerWidthChange:v,onCornerHeightChange:E},children:T.jsx(Se,{...o,ref:R,__vars:{"--sa-corner-width":s!=="xy"?"0px":`${b}px`,"--sa-corner-height":s!=="xy"?"0px":`${x}px`}})})});Ipe.displayName="@mantine/core/ScrollAreaRoot";function Rpe(e,t){const n=e/t;return Number.isNaN(n)?0:n}function QN(e){const t=Rpe(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function Dpe(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function v4e(e,[t,n]){return Math.min(n,Math.max(t,e))}function See(e,t,n="ltr"){const r=QN(t),i=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,s=t.scrollbar.size-i,o=t.content-t.viewport,a=s-r,l=n==="ltr"?[0,o]:[o*-1,0],u=v4e(e,l);return Dpe([0,o],[0,a])(u)}function b4e(e,t,n,r="ltr"){const i=QN(n),s=i/2,o=t||s,a=i-o,l=n.scrollbar.paddingStart+o,u=n.scrollbar.size-n.scrollbar.paddingEnd-a,c=n.content-n.viewport,d=r==="ltr"?[0,c]:[c*-1,0];return Dpe([l,u],d)(e)}function Ppe(e,t){return e>0&&e<t}function hD(e){return e?parseInt(e,10):0}function Ty(e,t,{checkForDefaultPrevented:n=!0}={}){return r=>{e==null||e(r),(n===!1||!r.defaultPrevented)&&(t==null||t(r))}}const[w4e,Npe]=ps("ScrollAreaScrollbar was not found in tree"),Ope=D.forwardRef((e,t)=>{const{sizes:n,hasThumb:r,onThumbChange:i,onThumbPointerUp:s,onThumbPointerDown:o,onThumbPositionChange:a,onDragScroll:l,onWheelScroll:u,onResize:c,...d}=e,f=zu(),[h,p]=D.useState(null),m=ms(t,k=>p(k)),g=D.useRef(null),b=D.useRef(""),{viewport:v}=f,x=n.content-n.viewport,E=Lm(u),_=Lm(a),C=WN(c,10),S=k=>{if(g.current){const R=k.clientX-g.current.left,O=k.clientY-g.current.top;l({x:R,y:O})}};return D.useEffect(()=>{const k=R=>{const O=R.target;(h==null?void 0:h.contains(O))&&E(R,x)};return document.addEventListener("wheel",k,{passive:!1}),()=>document.removeEventListener("wheel",k,{passive:!1})},[v,h,x,E]),D.useEffect(_,[n,_]),vw(h,C),vw(f.content,C),T.jsx(w4e,{value:{scrollbar:h,hasThumb:r,onThumbChange:Lm(i),onThumbPointerUp:Lm(s),onThumbPositionChange:_,onThumbPointerDown:Lm(o)},children:T.jsx("div",{...d,ref:m,"data-mantine-scrollbar":!0,style:{position:"absolute",...d.style},onPointerDown:Ty(e.onPointerDown,k=>{k.preventDefault(),k.button===0&&(k.target.setPointerCapture(k.pointerId),g.current=h.getBoundingClientRect(),b.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",S(k))}),onPointerMove:Ty(e.onPointerMove,S),onPointerUp:Ty(e.onPointerUp,k=>{k.preventDefault();const R=k.target;R.hasPointerCapture(k.pointerId)&&R.releasePointerCapture(k.pointerId),document.body.style.webkitUserSelect=b.current,g.current=null})})})}),$pe=D.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,style:i,...s}=e,o=zu(),[a,l]=D.useState(),u=D.useRef(null),c=ms(t,u,o.onScrollbarXChange);return D.useEffect(()=>{u.current&&l(getComputedStyle(u.current))},[u]),T.jsx(Ope,{"data-orientation":"horizontal",...s,ref:c,sizes:n,style:{...i,"--sa-thumb-width":`${QN(n)}px`},onThumbPointerDown:d=>e.onThumbPointerDown(d.x),onDragScroll:d=>e.onDragScroll(d.x),onWheelScroll:(d,f)=>{if(o.viewport){const h=o.viewport.scrollLeft+d.deltaX;e.onWheelScroll(h),Ppe(h,f)&&d.preventDefault()}},onResize:()=>{u.current&&o.viewport&&a&&r({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:u.current.clientWidth,paddingStart:hD(a.paddingLeft),paddingEnd:hD(a.paddingRight)}})}})});$pe.displayName="@mantine/core/ScrollAreaScrollbarX";const Mpe=D.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,style:i,...s}=e,o=zu(),[a,l]=D.useState(),u=D.useRef(null),c=ms(t,u,o.onScrollbarYChange);return D.useEffect(()=>{u.current&&l(window.getComputedStyle(u.current))},[]),T.jsx(Ope,{...s,"data-orientation":"vertical",ref:c,sizes:n,style:{"--sa-thumb-height":`${QN(n)}px`,...i},onThumbPointerDown:d=>e.onThumbPointerDown(d.y),onDragScroll:d=>e.onDragScroll(d.y),onWheelScroll:(d,f)=>{if(o.viewport){const h=o.viewport.scrollTop+d.deltaY;e.onWheelScroll(h),Ppe(h,f)&&d.preventDefault()}},onResize:()=>{u.current&&o.viewport&&a&&r({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:u.current.clientHeight,paddingStart:hD(a.paddingTop),paddingEnd:hD(a.paddingBottom)}})}})});Mpe.displayName="@mantine/core/ScrollAreaScrollbarY";const JN=D.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,{dir:i}=Np(),s=zu(),o=D.useRef(null),a=D.useRef(0),[l,u]=D.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=Rpe(l.viewport,l.content),d={...r,sizes:l,onSizesChange:u,hasThumb:c>0&&c<1,onThumbChange:h=>{o.current=h},onThumbPointerUp:()=>{a.current=0},onThumbPointerDown:h=>{a.current=h}},f=(h,p)=>b4e(h,a.current,l,p);return n==="horizontal"?T.jsx($pe,{...d,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const h=s.viewport.scrollLeft,p=See(h,l,i);o.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollLeft=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollLeft=f(h,i))}}):n==="vertical"?T.jsx(Mpe,{...d,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const h=s.viewport.scrollTop,p=See(h,l);l.scrollbar.size===0?o.current.style.setProperty("--thumb-opacity","0"):o.current.style.setProperty("--thumb-opacity","1"),o.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollTop=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollTop=f(h))}}):null});JN.displayName="@mantine/core/ScrollAreaScrollbarVisible";const uU=D.forwardRef((e,t)=>{const n=zu(),{forceMount:r,...i}=e,[s,o]=D.useState(!1),a=e.orientation==="horizontal",l=WN(()=>{if(n.viewport){const u=n.viewport.offsetWidth<n.viewport.scrollWidth,c=n.viewport.offsetHeight<n.viewport.scrollHeight;o(a?u:c)}},10);return vw(n.viewport,l),vw(n.content,l),r||s?T.jsx(JN,{"data-state":s?"visible":"hidden",...i,ref:t}):null});uU.displayName="@mantine/core/ScrollAreaScrollbarAuto";const Lpe=D.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=zu(),[s,o]=D.useState(!1);return D.useEffect(()=>{const{scrollArea:a}=i;let l=0;if(a){const u=()=>{window.clearTimeout(l),o(!0)},c=()=>{l=window.setTimeout(()=>o(!1),i.scrollHideDelay)};return a.addEventListener("pointerenter",u),a.addEventListener("pointerleave",c),()=>{window.clearTimeout(l),a.removeEventListener("pointerenter",u),a.removeEventListener("pointerleave",c)}}},[i.scrollArea,i.scrollHideDelay]),n||s?T.jsx(uU,{"data-state":s?"visible":"hidden",...r,ref:t}):null});Lpe.displayName="@mantine/core/ScrollAreaScrollbarHover";const x4e=D.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=zu(),s=e.orientation==="horizontal",[o,a]=D.useState("hidden"),l=WN(()=>a("idle"),100);return D.useEffect(()=>{if(o==="idle"){const u=window.setTimeout(()=>a("hidden"),i.scrollHideDelay);return()=>window.clearTimeout(u)}},[o,i.scrollHideDelay]),D.useEffect(()=>{const{viewport:u}=i,c=s?"scrollLeft":"scrollTop";if(u){let d=u[c];const f=()=>{const h=u[c];d!==h&&(a("scrolling"),l()),d=h};return u.addEventListener("scroll",f),()=>u.removeEventListener("scroll",f)}},[i.viewport,s,l]),n||o!=="hidden"?T.jsx(JN,{"data-state":o==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:Ty(e.onPointerEnter,()=>a("interacting")),onPointerLeave:Ty(e.onPointerLeave,()=>a("idle"))}):null}),R9=D.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=zu(),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:o}=i,a=e.orientation==="horizontal";return D.useEffect(()=>(a?s(!0):o(!0),()=>{a?s(!1):o(!1)}),[a,s,o]),i.type==="hover"?T.jsx(Lpe,{...r,ref:t,forceMount:n}):i.type==="scroll"?T.jsx(x4e,{...r,ref:t,forceMount:n}):i.type==="auto"?T.jsx(uU,{...r,ref:t,forceMount:n}):i.type==="always"?T.jsx(JN,{...r,ref:t}):null});R9.displayName="@mantine/core/ScrollAreaScrollbar";function E4e(e,t=()=>{}){let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function i(){const s={left:e.scrollLeft,top:e.scrollTop},o=n.left!==s.left,a=n.top!==s.top;(o||a)&&t(),n=s,r=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(r)}const Fpe=D.forwardRef((e,t)=>{const{style:n,...r}=e,i=zu(),s=Npe(),{onThumbPositionChange:o}=s,a=ms(t,c=>s.onThumbChange(c)),l=D.useRef(void 0),u=WN(()=>{l.current&&(l.current(),l.current=void 0)},100);return D.useEffect(()=>{const{viewport:c}=i;if(c){const d=()=>{if(u(),!l.current){const f=E4e(c,o);l.current=f,o()}};return o(),c.addEventListener("scroll",d),()=>c.removeEventListener("scroll",d)}},[i.viewport,u,o]),T.jsx("div",{"data-state":s.hasThumb?"visible":"hidden",...r,ref:a,style:{width:"var(--sa-thumb-width)",height:"var(--sa-thumb-height)",...n},onPointerDownCapture:Ty(e.onPointerDownCapture,c=>{const f=c.target.getBoundingClientRect(),h=c.clientX-f.left,p=c.clientY-f.top;s.onThumbPointerDown({x:h,y:p})}),onPointerUp:Ty(e.onPointerUp,s.onThumbPointerUp)})});Fpe.displayName="@mantine/core/ScrollAreaThumb";const D9=D.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Npe();return n||i.hasThumb?T.jsx(Fpe,{ref:t,...r}):null});D9.displayName="@mantine/core/ScrollAreaThumb";const jpe=D.forwardRef(({children:e,style:t,...n},r)=>{const i=zu(),s=ms(r,i.onViewportChange);return T.jsx(Se,{...n,ref:s,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...t},children:T.jsx("div",{style:{minWidth:"100%",display:"table"},ref:i.onContentChange,children:e})})});jpe.displayName="@mantine/core/ScrollAreaViewport";var cU={root:"m_d57069b5",viewport:"m_c0783ff9",viewportInner:"m_f8f631dd",scrollbar:"m_c44ba933",thumb:"m_d8b5e363",corner:"m_21657268"};const Bpe={scrollHideDelay:1e3,type:"hover",scrollbars:"xy"},_4e=(e,{scrollbarSize:t})=>({root:{"--scrollarea-scrollbar-size":Oe(t)}}),fp=Ze((e,t)=>{const n=$e("ScrollArea",Bpe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,scrollbarSize:l,vars:u,type:c,scrollHideDelay:d,viewportProps:f,viewportRef:h,onScrollPositionChange:p,children:m,offsetScrollbars:g,scrollbars:b,onBottomReached:v,onTopReached:x,...E}=n,[_,C]=D.useState(!1),S=Nt({name:"ScrollArea",props:n,classes:cU,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:_4e});return T.jsxs(Ipe,{type:c==="never"?"always":c,scrollHideDelay:d,ref:t,scrollbars:b,...S("root"),...E,children:[T.jsx(jpe,{...f,...S("viewport",{style:f==null?void 0:f.style}),ref:h,"data-offset-scrollbars":g===!0?"xy":g||void 0,"data-scrollbars":b||void 0,onScroll:k=>{var L;(L=f==null?void 0:f.onScroll)==null||L.call(f,k),p==null||p({x:k.currentTarget.scrollLeft,y:k.currentTarget.scrollTop});const{scrollTop:R,scrollHeight:O,clientHeight:N}=k.currentTarget;R-(O-N)>=0&&(v==null||v()),R===0&&(x==null||x())},children:m}),(b==="xy"||b==="x")&&T.jsx(R9,{...S("scrollbar"),orientation:"horizontal","data-hidden":c==="never"||void 0,forceMount:!0,onMouseEnter:()=>C(!0),onMouseLeave:()=>C(!1),children:T.jsx(D9,{...S("thumb")})}),(b==="xy"||b==="y")&&T.jsx(R9,{...S("scrollbar"),orientation:"vertical","data-hidden":c==="never"||void 0,forceMount:!0,onMouseEnter:()=>C(!0),onMouseLeave:()=>C(!1),children:T.jsx(D9,{...S("thumb")})}),T.jsx(g4e,{...S("corner"),"data-hovered":_||void 0,"data-hidden":c==="never"||void 0})]})});fp.displayName="@mantine/core/ScrollArea";const dU=Ze((e,t)=>{const{children:n,classNames:r,styles:i,scrollbarSize:s,scrollHideDelay:o,type:a,dir:l,offsetScrollbars:u,viewportRef:c,onScrollPositionChange:d,unstyled:f,variant:h,viewportProps:p,scrollbars:m,style:g,vars:b,onBottomReached:v,onTopReached:x,...E}=$e("ScrollAreaAutosize",Bpe,e);return T.jsx(Se,{...E,ref:t,style:[{display:"flex",overflow:"auto"},g],children:T.jsx(Se,{style:{display:"flex",flexDirection:"column",flex:1},children:T.jsx(fp,{classNames:r,styles:i,scrollHideDelay:o,scrollbarSize:s,type:a,dir:l,offsetScrollbars:u,viewportRef:c,onScrollPositionChange:d,unstyled:f,variant:h,viewportProps:p,vars:b,scrollbars:m,onBottomReached:v,onTopReached:x,children:n})})})});fp.classes=cU;dU.displayName="@mantine/core/ScrollAreaAutosize";dU.classes=cU;fp.Autosize=dU;var zpe={root:"m_87cf2631"};const T4e={__staticSelector:"UnstyledButton"},ul=Ki((e,t)=>{const n=$e("UnstyledButton",T4e,e),{className:r,component:i="button",__staticSelector:s,unstyled:o,classNames:a,styles:l,style:u,...c}=n,d=Nt({name:s,props:n,classes:zpe,className:r,style:u,classNames:a,styles:l,unstyled:o});return T.jsx(Se,{...d("root",{focusable:!0}),component:i,ref:t,type:i==="button"?"button":void 0,...c})});ul.classes=zpe;ul.displayName="@mantine/core/UnstyledButton";var Upe={root:"m_515a97f8"};const C4e={},fU=Ze((e,t)=>{const n=$e("VisuallyHidden",C4e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,...u}=n,c=Nt({name:"VisuallyHidden",classes:Upe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a});return T.jsx(Se,{component:"span",ref:t,...c("root"),...u})});fU.classes=Upe;fU.displayName="@mantine/core/VisuallyHidden";var qpe={root:"m_1b7284a3"};const S4e={},A4e=(e,{radius:t,shadow:n})=>({root:{"--paper-radius":t===void 0?void 0:Tr(t),"--paper-shadow":eU(n)}}),vx=Ki((e,t)=>{const n=$e("Paper",S4e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,withBorder:l,vars:u,radius:c,shadow:d,variant:f,mod:h,...p}=n,m=Nt({name:"Paper",props:n,classes:qpe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:A4e});return T.jsx(Se,{ref:t,mod:[{"data-with-border":l},h],...m("root"),variant:f,...p})});vx.classes=qpe;vx.displayName="@mantine/core/Paper";function ZN(){return typeof window<"u"}function Hpe(e){return Wpe(e)?(e.nodeName||"").toLowerCase():"#document"}function bx(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function k4e(e){var t;return(t=(Wpe(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Wpe(e){return ZN()?e instanceof Node||e instanceof bx(e).Node:!1}function el(e){return ZN()?e instanceof Element||e instanceof bx(e).Element:!1}function hU(e){return ZN()?e instanceof HTMLElement||e instanceof bx(e).HTMLElement:!1}function P9(e){return!ZN()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof bx(e).ShadowRoot}function I4e(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Aee(e){return["html","body","#document"].includes(Hpe(e))}function R4e(e){return bx(e).getComputedStyle(e)}function D4e(e){if(Hpe(e)==="html")return e;const t=e.assignedSlot||e.parentNode||P9(e)&&e.host||k4e(e);return P9(t)?t.host:t}function kee(e){let t=e.activeElement;for(;((n=t)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;t=t.shadowRoot.activeElement}return t}function wT(e,t){if(!e||!t)return!1;const n=t.getRootNode==null?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&P9(n)){let r=t;for(;r;){if(e===r)return!0;r=r.parentNode||r.host}}return!1}function Vpe(){const e=navigator.userAgentData;return e!=null&&e.platform?e.platform:navigator.platform}function Gpe(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(t=>{let{brand:n,version:r}=t;return n+"/"+r}).join(" "):navigator.userAgent}function P4e(e){return $4e()?!1:!Iee()&&e.width===0&&e.height===0||Iee()&&e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"||e.width<1&&e.height<1&&e.pressure===0&&e.detail===0&&e.pointerType==="touch"}function N4e(){return/apple/i.test(navigator.vendor)}function Iee(){const e=/android/i;return e.test(Vpe())||e.test(Gpe())}function O4e(){return Vpe().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function $4e(){return Gpe().includes("jsdom/")}function N9(e,t){const n=["mouse","pen"];return n.push("",void 0),n.includes(e)}function M4e(e){return"nativeEvent"in e}function L4e(e){return e.matches("html,body")}function dy(e){return(e==null?void 0:e.ownerDocument)||document}function L8(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return n.target!=null&&t.contains(n.target)}function Eb(e){return"composedPath"in e?e.composedPath()[0]:e.target}const F4e="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function j4e(e){return hU(e)&&e.matches(F4e)}const Fl=Math.min,Uo=Math.max,pD=Math.round,yk=Math.floor,f0=e=>({x:e,y:e}),B4e={left:"right",right:"left",bottom:"top",top:"bottom"},z4e={start:"end",end:"start"};function O9(e,t,n){return Uo(e,Fl(t,n))}function hp(e,t){return typeof e=="function"?e(t):e}function Xc(e){return e.split("-")[0]}function wx(e){return e.split("-")[1]}function pU(e){return e==="x"?"y":"x"}function mU(e){return e==="y"?"height":"width"}function Av(e){return["top","bottom"].includes(Xc(e))?"y":"x"}function gU(e){return pU(Av(e))}function U4e(e,t,n){n===void 0&&(n=!1);const r=wx(e),i=gU(e),s=mU(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(o=mD(o)),[o,mD(o)]}function q4e(e){const t=mD(e);return[$9(e),t,$9(t)]}function $9(e){return e.replace(/start|end/g,t=>z4e[t])}function H4e(e,t,n){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:r:t?r:i;case"left":case"right":return t?s:o;default:return[]}}function W4e(e,t,n,r){const i=wx(e);let s=H4e(Xc(e),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),t&&(s=s.concat(s.map($9)))),s}function mD(e){return e.replace(/left|right|bottom|top/g,t=>B4e[t])}function V4e(e){return{top:0,right:0,bottom:0,left:0,...e}}function yU(e){return typeof e!="number"?V4e(e):{top:e,right:e,bottom:e,left:e}}function bw(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function Ree(e,t,n){let{reference:r,floating:i}=e;const s=Av(t),o=gU(t),a=mU(o),l=Xc(t),u=s==="y",c=r.x+r.width/2-i.width/2,d=r.y+r.height/2-i.height/2,f=r[a]/2-i[a]/2;let h;switch(l){case"top":h={x:c,y:r.y-i.height};break;case"bottom":h={x:c,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:d};break;case"left":h={x:r.x-i.width,y:d};break;default:h={x:r.x,y:r.y}}switch(wx(t)){case"start":h[o]-=f*(n&&u?-1:1);break;case"end":h[o]+=f*(n&&u?-1:1);break}return h}const G4e=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(t));let u=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:c,y:d}=Ree(u,r,l),f=r,h={},p=0;for(let m=0;m<a.length;m++){const{name:g,fn:b}=a[m],{x:v,y:x,data:E,reset:_}=await b({x:c,y:d,initialPlacement:r,placement:f,strategy:i,middlewareData:h,rects:u,platform:o,elements:{reference:e,floating:t}});c=v??c,d=x??d,h={...h,[g]:{...h[g],...E}},_&&p<=50&&(p++,typeof _=="object"&&(_.placement&&(f=_.placement),_.rects&&(u=_.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:i}):_.rects),{x:c,y:d}=Ree(u,f,l)),m=-1)}return{x:c,y:d,placement:f,strategy:i,middlewareData:h}};async function vU(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:l}=e,{boundary:u="clippingAncestors",rootBoundary:c="viewport",elementContext:d="floating",altBoundary:f=!1,padding:h=0}=hp(t,e),p=yU(h),g=a[f?d==="floating"?"reference":"floating":d],b=bw(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(g)))==null||n?g:g.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:u,rootBoundary:c,strategy:l})),v=d==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,x=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),E=await(s.isElement==null?void 0:s.isElement(x))?await(s.getScale==null?void 0:s.getScale(x))||{x:1,y:1}:{x:1,y:1},_=bw(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:v,offsetParent:x,strategy:l}):v);return{top:(b.top-_.top+p.top)/E.y,bottom:(_.bottom-b.bottom+p.bottom)/E.y,left:(b.left-_.left+p.left)/E.x,right:(_.right-b.right+p.right)/E.x}}const Y4e=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:l}=t,{element:u,padding:c=0}=hp(e,t)||{};if(u==null)return{};const d=yU(c),f={x:n,y:r},h=gU(i),p=mU(h),m=await o.getDimensions(u),g=h==="y",b=g?"top":"left",v=g?"bottom":"right",x=g?"clientHeight":"clientWidth",E=s.reference[p]+s.reference[h]-f[h]-s.floating[p],_=f[h]-s.reference[h],C=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let S=C?C[x]:0;(!S||!await(o.isElement==null?void 0:o.isElement(C)))&&(S=a.floating[x]||s.floating[p]);const k=E/2-_/2,R=S/2-m[p]/2-1,O=Fl(d[b],R),N=Fl(d[v],R),L=O,$=S-m[p]-N,B=S/2-m[p]/2+k,H=O9(L,B,$),Y=!l.arrow&&wx(i)!=null&&B!==H&&s.reference[p]/2-(B<L?O:N)-m[p]/2<0,J=Y?B<L?B-L:B-$:0;return{[h]:f[h]+J,data:{[h]:H,centerOffset:B-H-J,...Y&&{alignmentOffset:J}},reset:Y}}}),K4e=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:u}=t,{mainAxis:c=!0,crossAxis:d=!0,fallbackPlacements:f,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:m=!0,...g}=hp(e,t);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const b=Xc(i),v=Xc(a)===a,x=await(l.isRTL==null?void 0:l.isRTL(u.floating)),E=f||(v||!m?[mD(a)]:q4e(a));!f&&p!=="none"&&E.push(...W4e(a,m,p,x));const _=[a,...E],C=await vU(t,g),S=[];let k=((r=s.flip)==null?void 0:r.overflows)||[];if(c&&S.push(C[b]),d){const L=U4e(i,o,x);S.push(C[L[0]],C[L[1]])}if(k=[...k,{placement:i,overflows:S}],!S.every(L=>L<=0)){var R,O;const L=(((R=s.flip)==null?void 0:R.index)||0)+1,$=_[L];if($)return{data:{index:L,overflows:k},reset:{placement:$}};let B=(O=k.filter(H=>H.overflows[0]<=0).sort((H,Y)=>H.overflows[1]-Y.overflows[1])[0])==null?void 0:O.placement;if(!B)switch(h){case"bestFit":{var N;const H=(N=k.map(Y=>[Y.placement,Y.overflows.filter(J=>J>0).reduce((J,K)=>J+K,0)]).sort((Y,J)=>Y[1]-J[1])[0])==null?void 0:N[0];H&&(B=H);break}case"initialPlacement":B=a;break}if(i!==B)return{reset:{placement:B}}}return{}}}};function Ype(e){const t=Fl(...e.map(s=>s.left)),n=Fl(...e.map(s=>s.top)),r=Uo(...e.map(s=>s.right)),i=Uo(...e.map(s=>s.bottom));return{x:t,y:n,width:r-t,height:i-n}}function X4e(e){const t=e.slice().sort((i,s)=>i.y-s.y),n=[];let r=null;for(let i=0;i<t.length;i++){const s=t[i];!r||s.y-r.y>r.height/2?n.push([s]):n[n.length-1].push(s),r=s}return n.map(i=>bw(Ype(i)))}const Q4e=function(e){return e===void 0&&(e={}),{name:"inline",options:e,async fn(t){const{placement:n,elements:r,rects:i,platform:s,strategy:o}=t,{padding:a=2,x:l,y:u}=hp(e,t),c=Array.from(await(s.getClientRects==null?void 0:s.getClientRects(r.reference))||[]),d=X4e(c),f=bw(Ype(c)),h=yU(a);function p(){if(d.length===2&&d[0].left>d[1].right&&l!=null&&u!=null)return d.find(g=>l>g.left-h.left&&l<g.right+h.right&&u>g.top-h.top&&u<g.bottom+h.bottom)||f;if(d.length>=2){if(Av(n)==="y"){const O=d[0],N=d[d.length-1],L=Xc(n)==="top",$=O.top,B=N.bottom,H=L?O.left:N.left,Y=L?O.right:N.right,J=Y-H,K=B-$;return{top:$,bottom:B,left:H,right:Y,width:J,height:K,x:H,y:$}}const g=Xc(n)==="left",b=Uo(...d.map(O=>O.right)),v=Fl(...d.map(O=>O.left)),x=d.filter(O=>g?O.left===v:O.right===b),E=x[0].top,_=x[x.length-1].bottom,C=v,S=b,k=S-C,R=_-E;return{top:E,bottom:_,left:C,right:S,width:k,height:R,x:C,y:E}}return f}const m=await s.getElementRects({reference:{getBoundingClientRect:p},floating:r.floating,strategy:o});return i.reference.x!==m.reference.x||i.reference.y!==m.reference.y||i.reference.width!==m.reference.width||i.reference.height!==m.reference.height?{reset:{rects:m}}:{}}}};async function J4e(e,t){const{placement:n,platform:r,elements:i}=e,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=Xc(n),a=wx(n),l=Av(n)==="y",u=["left","top"].includes(o)?-1:1,c=s&&l?-1:1,d=hp(t,e);let{mainAxis:f,crossAxis:h,alignmentAxis:p}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...d};return a&&typeof p=="number"&&(h=a==="end"?p*-1:p),l?{x:h*c,y:f*u}:{x:f*u,y:h*c}}const Z4e=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=t,l=await J4e(t,e);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+l.x,y:s+l.y,data:{...l,placement:o}}}}},e6e=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:g=>{let{x:b,y:v}=g;return{x:b,y:v}}},...l}=hp(e,t),u={x:n,y:r},c=await vU(t,l),d=Av(Xc(i)),f=pU(d);let h=u[f],p=u[d];if(s){const g=f==="y"?"top":"left",b=f==="y"?"bottom":"right",v=h+c[g],x=h-c[b];h=O9(v,h,x)}if(o){const g=d==="y"?"top":"left",b=d==="y"?"bottom":"right",v=p+c[g],x=p-c[b];p=O9(v,p,x)}const m=a.fn({...t,[f]:h,[d]:p});return{...m,data:{x:m.x-n,y:m.y-r}}}}},t6e=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=t,{offset:a=0,mainAxis:l=!0,crossAxis:u=!0}=hp(e,t),c={x:n,y:r},d=Av(i),f=pU(d);let h=c[f],p=c[d];const m=hp(a,t),g=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(l){const x=f==="y"?"height":"width",E=s.reference[f]-s.floating[x]+g.mainAxis,_=s.reference[f]+s.reference[x]-g.mainAxis;h<E?h=E:h>_&&(h=_)}if(u){var b,v;const x=f==="y"?"width":"height",E=["top","left"].includes(Xc(i)),_=s.reference[d]-s.floating[x]+(E&&((b=o.offset)==null?void 0:b[d])||0)+(E?0:g.crossAxis),C=s.reference[d]+s.reference[x]+(E?0:((v=o.offset)==null?void 0:v[d])||0)-(E?g.crossAxis:0);p<_?p=_:p>C&&(p=C)}return{[f]:h,[d]:p}}}},n6e=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){const{placement:n,rects:r,platform:i,elements:s}=t,{apply:o=()=>{},...a}=hp(e,t),l=await vU(t,a),u=Xc(n),c=wx(n),d=Av(n)==="y",{width:f,height:h}=r.floating;let p,m;u==="top"||u==="bottom"?(p=u,m=c===(await(i.isRTL==null?void 0:i.isRTL(s.floating))?"start":"end")?"left":"right"):(m=u,p=c==="end"?"top":"bottom");const g=h-l.top-l.bottom,b=f-l.left-l.right,v=Fl(h-l[p],g),x=Fl(f-l[m],b),E=!t.middlewareData.shift;let _=v,C=x;if(d?C=c||E?Fl(x,b):b:_=c||E?Fl(v,g):g,E&&!c){const k=Uo(l.left,0),R=Uo(l.right,0),O=Uo(l.top,0),N=Uo(l.bottom,0);d?C=f-2*(k!==0||R!==0?k+R:Uo(l.left,l.right)):_=h-2*(O!==0||N!==0?O+N:Uo(l.top,l.bottom))}await o({...t,availableWidth:C,availableHeight:_});const S=await i.getDimensions(s.floating);return f!==S.width||h!==S.height?{reset:{rects:!0}}:{}}}};function xx(e){return Kpe(e)?(e.nodeName||"").toLowerCase():"#document"}function zl(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Op(e){var t;return(t=(Kpe(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Kpe(e){return e instanceof Node||e instanceof zl(e).Node}function Ef(e){return e instanceof Element||e instanceof zl(e).Element}function _f(e){return e instanceof HTMLElement||e instanceof zl(e).HTMLElement}function Dee(e){return typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof zl(e).ShadowRoot}function IC(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=Qc(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function r6e(e){return["table","td","th"].includes(xx(e))}function bU(e){const t=wU(),n=Qc(e);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function i6e(e){let t=h0(e);for(;_f(t)&&!ww(t);){if(bU(t))return t;t=h0(t)}return null}function wU(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function ww(e){return["html","body","#document"].includes(xx(e))}function Qc(e){return zl(e).getComputedStyle(e)}function eO(e){return Ef(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function h0(e){if(xx(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Dee(e)&&e.host||Op(e);return Dee(t)?t.host:t}function Xpe(e){const t=h0(e);return ww(t)?e.ownerDocument?e.ownerDocument.body:e.body:_f(t)&&IC(t)?t:Xpe(t)}function Jh(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=Xpe(e),s=i===((r=e.ownerDocument)==null?void 0:r.body),o=zl(i);return s?t.concat(o,o.visualViewport||[],IC(i)?i:[],o.frameElement&&n?Jh(o.frameElement):[]):t.concat(i,Jh(i,[],n))}function Qpe(e){const t=Qc(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=_f(e),s=i?e.offsetWidth:n,o=i?e.offsetHeight:r,a=pD(n)!==s||pD(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function xU(e){return Ef(e)?e:e.contextElement}function qb(e){const t=xU(e);if(!_f(t))return f0(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:s}=Qpe(t);let o=(s?pD(n.width):n.width)/r,a=(s?pD(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const s6e=f0(0);function Jpe(e){const t=zl(e);return!wU()||!t.visualViewport?s6e:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function o6e(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==zl(e)?!1:t}function jy(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),s=xU(e);let o=f0(1);t&&(r?Ef(r)&&(o=qb(r)):o=qb(e));const a=o6e(s,n,r)?Jpe(s):f0(0);let l=(i.left+a.x)/o.x,u=(i.top+a.y)/o.y,c=i.width/o.x,d=i.height/o.y;if(s){const f=zl(s),h=r&&Ef(r)?zl(r):r;let p=f,m=p.frameElement;for(;m&&r&&h!==p;){const g=qb(m),b=m.getBoundingClientRect(),v=Qc(m),x=b.left+(m.clientLeft+parseFloat(v.paddingLeft))*g.x,E=b.top+(m.clientTop+parseFloat(v.paddingTop))*g.y;l*=g.x,u*=g.y,c*=g.x,d*=g.y,l+=x,u+=E,p=zl(m),m=p.frameElement}}return bw({width:c,height:d,x:l,y:u})}const a6e=[":popover-open",":modal"];function EU(e){return a6e.some(t=>{try{return e.matches(t)}catch{return!1}})}function l6e(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const s=i==="fixed",o=Op(r),a=t?EU(t.floating):!1;if(r===o||a&&s)return n;let l={scrollLeft:0,scrollTop:0},u=f0(1);const c=f0(0),d=_f(r);if((d||!d&&!s)&&((xx(r)!=="body"||IC(o))&&(l=eO(r)),_f(r))){const f=jy(r);u=qb(r),c.x=f.x+r.clientLeft,c.y=f.y+r.clientTop}return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-l.scrollLeft*u.x+c.x,y:n.y*u.y-l.scrollTop*u.y+c.y}}function u6e(e){return Array.from(e.getClientRects())}function Zpe(e){return jy(Op(e)).left+eO(e).scrollLeft}function c6e(e){const t=Op(e),n=eO(e),r=e.ownerDocument.body,i=Uo(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=Uo(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+Zpe(e);const a=-n.scrollTop;return Qc(r).direction==="rtl"&&(o+=Uo(t.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function d6e(e,t){const n=zl(e),r=Op(e),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;const u=wU();(!u||u&&t==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:a,y:l}}function f6e(e,t){const n=jy(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,s=_f(e)?qb(e):f0(1),o=e.clientWidth*s.x,a=e.clientHeight*s.y,l=i*s.x,u=r*s.y;return{width:o,height:a,x:l,y:u}}function Pee(e,t,n){let r;if(t==="viewport")r=d6e(e,n);else if(t==="document")r=c6e(Op(e));else if(Ef(t))r=f6e(t,n);else{const i=Jpe(e);r={...t,x:t.x-i.x,y:t.y-i.y}}return bw(r)}function eme(e,t){const n=h0(e);return n===t||!Ef(n)||ww(n)?!1:Qc(n).position==="fixed"||eme(n,t)}function h6e(e,t){const n=t.get(e);if(n)return n;let r=Jh(e,[],!1).filter(a=>Ef(a)&&xx(a)!=="body"),i=null;const s=Qc(e).position==="fixed";let o=s?h0(e):e;for(;Ef(o)&&!ww(o);){const a=Qc(o),l=bU(o);!l&&a.position==="fixed"&&(i=null),(s?!l&&!i:!l&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||IC(o)&&!l&&eme(e,o))?r=r.filter(c=>c!==o):i=a,o=h0(o)}return t.set(e,r),r}function p6e(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const o=[...n==="clippingAncestors"?EU(t)?[]:h6e(t,this._c):[].concat(n),r],a=o[0],l=o.reduce((u,c)=>{const d=Pee(t,c,i);return u.top=Uo(d.top,u.top),u.right=Fl(d.right,u.right),u.bottom=Fl(d.bottom,u.bottom),u.left=Uo(d.left,u.left),u},Pee(t,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function m6e(e){const{width:t,height:n}=Qpe(e);return{width:t,height:n}}function g6e(e,t,n){const r=_f(t),i=Op(t),s=n==="fixed",o=jy(e,!0,s,t);let a={scrollLeft:0,scrollTop:0};const l=f0(0);if(r||!r&&!s)if((xx(t)!=="body"||IC(i))&&(a=eO(t)),r){const d=jy(t,!0,s,t);l.x=d.x+t.clientLeft,l.y=d.y+t.clientTop}else i&&(l.x=Zpe(i));const u=o.left+a.scrollLeft-l.x,c=o.top+a.scrollTop-l.y;return{x:u,y:c,width:o.width,height:o.height}}function F8(e){return Qc(e).position==="static"}function Nee(e,t){return!_f(e)||Qc(e).position==="fixed"?null:t?t(e):e.offsetParent}function tme(e,t){const n=zl(e);if(EU(e))return n;if(!_f(e)){let i=h0(e);for(;i&&!ww(i);){if(Ef(i)&&!F8(i))return i;i=h0(i)}return n}let r=Nee(e,t);for(;r&&r6e(r)&&F8(r);)r=Nee(r,t);return r&&ww(r)&&F8(r)&&!bU(r)?n:r||i6e(e)||n}const y6e=async function(e){const t=this.getOffsetParent||tme,n=this.getDimensions,r=await n(e.floating);return{reference:g6e(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function v6e(e){return Qc(e).direction==="rtl"}const b6e={convertOffsetParentRelativeRectToViewportRelativeRect:l6e,getDocumentElement:Op,getClippingRect:p6e,getOffsetParent:tme,getElementRects:y6e,getClientRects:u6e,getDimensions:m6e,getScale:qb,isElement:Ef,isRTL:v6e};function w6e(e,t){let n=null,r;const i=Op(e);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const{left:u,top:c,width:d,height:f}=e.getBoundingClientRect();if(a||t(),!d||!f)return;const h=yk(c),p=yk(i.clientWidth-(u+d)),m=yk(i.clientHeight-(c+f)),g=yk(u),v={rootMargin:-h+"px "+-p+"px "+-m+"px "+-g+"px",threshold:Uo(0,Fl(1,l))||1};let x=!0;function E(_){const C=_[0].intersectionRatio;if(C!==l){if(!x)return o();C?o(!1,C):r=setTimeout(()=>{o(!1,1e-7)},1e3)}x=!1}try{n=new IntersectionObserver(E,{...v,root:i.ownerDocument})}catch{n=new IntersectionObserver(E,v)}n.observe(e)}return o(!0),s}function x6e(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,u=xU(e),c=i||s?[...u?Jh(u):[],...Jh(t)]:[];c.forEach(b=>{i&&b.addEventListener("scroll",n,{passive:!0}),s&&b.addEventListener("resize",n)});const d=u&&a?w6e(u,n):null;let f=-1,h=null;o&&(h=new ResizeObserver(b=>{let[v]=b;v&&v.target===u&&h&&(h.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var x;(x=h)==null||x.observe(t)})),n()}),u&&!l&&h.observe(u),h.observe(t));let p,m=l?jy(e):null;l&&g();function g(){const b=jy(e);m&&(b.x!==m.x||b.y!==m.y||b.width!==m.width||b.height!==m.height)&&n(),m=b,p=requestAnimationFrame(g)}return n(),()=>{var b;c.forEach(v=>{i&&v.removeEventListener("scroll",n),s&&v.removeEventListener("resize",n)}),d==null||d(),(b=h)==null||b.disconnect(),h=null,l&&cancelAnimationFrame(p)}}const E6e=Z4e,_6e=e6e,T6e=K4e,C6e=n6e,Oee=Y4e,S6e=Q4e,A6e=t6e,k6e=(e,t,n)=>{const r=new Map,i={platform:b6e,...n},s={...i.platform,_c:r};return G4e(e,t,{...i,platform:s})};var IR=typeof document<"u"?D.useLayoutEffect:D.useEffect;function gD(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!gD(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&e.$$typeof)&&!gD(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function nme(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function $ee(e,t){const n=nme(e);return Math.round(t*n)/n}function j8(e){const t=D.useRef(e);return IR(()=>{t.current=e}),t}function I6e(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:u}=e,[c,d]=D.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[f,h]=D.useState(r);gD(f,r)||h(r);const[p,m]=D.useState(null),[g,b]=D.useState(null),v=D.useCallback(K=>{K!==C.current&&(C.current=K,m(K))},[]),x=D.useCallback(K=>{K!==S.current&&(S.current=K,b(K))},[]),E=s||p,_=o||g,C=D.useRef(null),S=D.useRef(null),k=D.useRef(c),R=l!=null,O=j8(l),N=j8(i),L=j8(u),$=D.useCallback(()=>{if(!C.current||!S.current)return;const K={placement:t,strategy:n,middleware:f};N.current&&(K.platform=N.current),k6e(C.current,S.current,K).then(Z=>{const U={...Z,isPositioned:L.current!==!1};B.current&&!gD(k.current,U)&&(k.current=U,KN.flushSync(()=>{d(U)}))})},[f,t,n,N,L]);IR(()=>{u===!1&&k.current.isPositioned&&(k.current.isPositioned=!1,d(K=>({...K,isPositioned:!1})))},[u]);const B=D.useRef(!1);IR(()=>(B.current=!0,()=>{B.current=!1}),[]),IR(()=>{if(E&&(C.current=E),_&&(S.current=_),E&&_){if(O.current)return O.current(E,_,$);$()}},[E,_,$,O,R]);const H=D.useMemo(()=>({reference:C,floating:S,setReference:v,setFloating:x}),[v,x]),Y=D.useMemo(()=>({reference:E,floating:_}),[E,_]),J=D.useMemo(()=>{const K={position:n,left:0,top:0};if(!Y.floating)return K;const Z=$ee(Y.floating,c.x),U=$ee(Y.floating,c.y);return a?{...K,transform:"translate("+Z+"px, "+U+"px)",...nme(Y.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:Z,top:U}},[n,a,Y.floating,c.x,c.y]);return D.useMemo(()=>({...c,update:$,refs:H,elements:Y,floatingStyles:J}),[c,$,H,Y,J])}const R6e=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:i}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?Oee({element:r.current,padding:i}).fn(n):{}:r?Oee({element:r,padding:i}).fn(n):{}}}},rme=(e,t)=>({...E6e(e),options:[e,t]}),_U=(e,t)=>({..._6e(e),options:[e,t]}),Mee=(e,t)=>({...A6e(e),options:[e,t]}),yD=(e,t)=>({...T6e(e),options:[e,t]}),D6e=(e,t)=>({...C6e(e),options:[e,t]}),N2=(e,t)=>({...S6e(e),options:[e,t]}),ime=(e,t)=>({...R6e(e),options:[e,t]}),sme={...SNe},P6e=sme.useInsertionEffect,N6e=P6e||(e=>e());function $h(e){const t=D.useRef(()=>{});return N6e(()=>{t.current=e}),D.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}var lf=typeof document<"u"?D.useLayoutEffect:D.useEffect;let Lee=!1,O6e=0;const Fee=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+O6e++;function $6e(){const[e,t]=D.useState(()=>Lee?Fee():void 0);return lf(()=>{e==null&&t(Fee())},[]),D.useEffect(()=>{Lee=!0},[]),e}const M6e=sme.useId,ome=M6e||$6e;function L6e(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(i=>i(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,((r=e.get(t))==null?void 0:r.filter(i=>i!==n))||[])}}}const F6e=D.createContext(null),j6e=D.createContext(null),TU=()=>{var e;return((e=D.useContext(F6e))==null?void 0:e.id)||null},CU=()=>D.useContext(j6e);function SU(e){return"data-floating-ui-"+e}function B8(e){const t=D.useRef(e);return lf(()=>{t.current=e}),t}const jee=SU("safe-polygon");function RR(e,t,n){return n&&!N9(n)?0:typeof e=="number"?e:e==null?void 0:e[t]}function B6e(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,dataRef:i,events:s,elements:o}=e,{enabled:a=!0,delay:l=0,handleClose:u=null,mouseOnly:c=!1,restMs:d=0,move:f=!0}=t,h=CU(),p=TU(),m=B8(u),g=B8(l),b=B8(n),v=D.useRef(),x=D.useRef(-1),E=D.useRef(),_=D.useRef(-1),C=D.useRef(!0),S=D.useRef(!1),k=D.useRef(()=>{}),R=D.useRef(!1),O=D.useCallback(()=>{var J;const K=(J=i.current.openEvent)==null?void 0:J.type;return(K==null?void 0:K.includes("mouse"))&&K!=="mousedown"},[i]);D.useEffect(()=>{if(!a)return;function J(K){let{open:Z}=K;Z||(clearTimeout(x.current),clearTimeout(_.current),C.current=!0,R.current=!1)}return s.on("openchange",J),()=>{s.off("openchange",J)}},[a,s]),D.useEffect(()=>{if(!a||!m.current||!n)return;function J(Z){O()&&r(!1,Z,"hover")}const K=dy(o.floating).documentElement;return K.addEventListener("mouseleave",J),()=>{K.removeEventListener("mouseleave",J)}},[o.floating,n,r,a,m,O]);const N=D.useCallback(function(J,K,Z){K===void 0&&(K=!0),Z===void 0&&(Z="hover");const U=RR(g.current,"close",v.current);U&&!E.current?(clearTimeout(x.current),x.current=window.setTimeout(()=>r(!1,J,Z),U)):K&&(clearTimeout(x.current),r(!1,J,Z))},[g,r]),L=$h(()=>{k.current(),E.current=void 0}),$=$h(()=>{if(S.current){const J=dy(o.floating).body;J.style.pointerEvents="",J.removeAttribute(jee),S.current=!1}}),B=$h(()=>i.current.openEvent?["click","mousedown"].includes(i.current.openEvent.type):!1);D.useEffect(()=>{if(!a)return;function J(j){if(clearTimeout(x.current),C.current=!1,c&&!N9(v.current)||d>0&&!RR(g.current,"open"))return;const V=RR(g.current,"open",v.current);V?x.current=window.setTimeout(()=>{b.current||r(!0,j,"hover")},V):n||r(!0,j,"hover")}function K(j){if(B())return;k.current();const V=dy(o.floating);if(clearTimeout(_.current),R.current=!1,m.current&&i.current.floatingContext){n||clearTimeout(x.current),E.current=m.current({...i.current.floatingContext,tree:h,x:j.clientX,y:j.clientY,onClose(){$(),L(),B()||N(j,!0,"safe-polygon")}});const G=E.current;V.addEventListener("mousemove",G),k.current=()=>{V.removeEventListener("mousemove",G)};return}(v.current==="touch"?!wT(o.floating,j.relatedTarget):!0)&&N(j)}function Z(j){B()||i.current.floatingContext&&(m.current==null||m.current({...i.current.floatingContext,tree:h,x:j.clientX,y:j.clientY,onClose(){$(),L(),B()||N(j)}})(j))}if(el(o.domReference)){var U;const j=o.domReference;return n&&j.addEventListener("mouseleave",Z),(U=o.floating)==null||U.addEventListener("mouseleave",Z),f&&j.addEventListener("mousemove",J,{once:!0}),j.addEventListener("mouseenter",J),j.addEventListener("mouseleave",K),()=>{var V;n&&j.removeEventListener("mouseleave",Z),(V=o.floating)==null||V.removeEventListener("mouseleave",Z),f&&j.removeEventListener("mousemove",J),j.removeEventListener("mouseenter",J),j.removeEventListener("mouseleave",K)}}},[o,a,e,c,d,f,N,L,$,r,n,b,h,g,m,i,B]),lf(()=>{var J;if(a&&n&&(J=m.current)!=null&&J.__options.blockPointerEvents&&O()){S.current=!0;const Z=o.floating;if(el(o.domReference)&&Z){var K;const U=dy(o.floating).body;U.setAttribute(jee,"");const j=o.domReference,V=h==null||(K=h.nodesRef.current.find(z=>z.id===p))==null||(K=K.context)==null?void 0:K.elements.floating;return V&&(V.style.pointerEvents=""),U.style.pointerEvents="none",j.style.pointerEvents="auto",Z.style.pointerEvents="auto",()=>{U.style.pointerEvents="",j.style.pointerEvents="",Z.style.pointerEvents=""}}}},[a,n,p,o,h,m,O]),lf(()=>{n||(v.current=void 0,R.current=!1,L(),$())},[n,L,$]),D.useEffect(()=>()=>{L(),clearTimeout(x.current),clearTimeout(_.current),$()},[a,o.domReference,L,$]);const H=D.useMemo(()=>{function J(K){v.current=K.pointerType}return{onPointerDown:J,onPointerEnter:J,onMouseMove(K){const{nativeEvent:Z}=K;function U(){!C.current&&!b.current&&r(!0,Z,"hover")}c&&!N9(v.current)||n||d===0||R.current&&K.movementX**2+K.movementY**2<2||(clearTimeout(_.current),v.current==="touch"?U():(R.current=!0,_.current=window.setTimeout(U,d)))}}},[c,r,n,b,d]),Y=D.useMemo(()=>({onMouseEnter(){clearTimeout(x.current)},onMouseLeave(J){B()||N(J.nativeEvent,!1)}}),[N,B]);return D.useMemo(()=>a?{reference:H,floating:Y}:{},[a,H,Y])}const M9=()=>{},ame=D.createContext({delay:0,initialDelay:0,timeoutMs:0,currentId:null,setCurrentId:M9,setState:M9,isInstantPhase:!1}),lme=()=>D.useContext(ame);function z6e(e){const{children:t,delay:n,timeoutMs:r=0}=e,[i,s]=D.useReducer((l,u)=>({...l,...u}),{delay:n,timeoutMs:r,initialDelay:n,currentId:null,isInstantPhase:!1}),o=D.useRef(null),a=D.useCallback(l=>{s({currentId:l})},[]);return lf(()=>{i.currentId?o.current===null?o.current=i.currentId:i.isInstantPhase||s({isInstantPhase:!0}):(i.isInstantPhase&&s({isInstantPhase:!1}),o.current=null)},[i.currentId,i.isInstantPhase]),D.createElement(ame.Provider,{value:D.useMemo(()=>({...i,setState:s,setCurrentId:a}),[i,a])},t)}function U6e(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,floatingId:i}=e,{id:s,enabled:o=!0}=t,a=s??i,l=lme(),{currentId:u,setCurrentId:c,initialDelay:d,setState:f,timeoutMs:h}=l;return lf(()=>{o&&u&&(f({delay:{open:1,close:RR(d,"close")}}),u!==a&&r(!1))},[o,a,r,f,u,d]),lf(()=>{function p(){r(!1),f({delay:d,currentId:null})}if(o&&u&&!n&&u===a){if(h){const m=window.setTimeout(p,h);return()=>{clearTimeout(m)}}p()}},[o,n,f,u,a,r,d,h]),lf(()=>{o&&(c===M9||!n||c(a))},[o,n,c,a]),l}function z8(e,t){let n=e.filter(i=>{var s;return i.parentId===t&&((s=i.context)==null?void 0:s.open)}),r=n;for(;r.length;)r=e.filter(i=>{var s;return(s=r)==null?void 0:s.some(o=>{var a;return i.parentId===o.id&&((a=i.context)==null?void 0:a.open)})}),n=n.concat(r);return n}const q6e="data-floating-ui-focusable",H6e={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},W6e={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},Bee=e=>{var t,n;return{escapeKey:typeof e=="boolean"?e:(t=e==null?void 0:e.escapeKey)!=null?t:!1,outsidePress:typeof e=="boolean"?e:(n=e==null?void 0:e.outsidePress)!=null?n:!0}};function V6e(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,elements:i,dataRef:s}=e,{enabled:o=!0,escapeKey:a=!0,outsidePress:l=!0,outsidePressEvent:u="pointerdown",referencePress:c=!1,referencePressEvent:d="pointerdown",ancestorScroll:f=!1,bubbles:h,capture:p}=t,m=CU(),g=$h(typeof l=="function"?l:()=>!1),b=typeof l=="function"?g:l,v=D.useRef(!1),x=D.useRef(!1),{escapeKey:E,outsidePress:_}=Bee(h),{escapeKey:C,outsidePress:S}=Bee(p),k=D.useRef(!1),R=$h(H=>{var Y;if(!n||!o||!a||H.key!=="Escape"||k.current)return;const J=(Y=s.current.floatingContext)==null?void 0:Y.nodeId,K=m?z8(m.nodesRef.current,J):[];if(!E&&(H.stopPropagation(),K.length>0)){let Z=!0;if(K.forEach(U=>{var j;if((j=U.context)!=null&&j.open&&!U.context.dataRef.current.__escapeKeyBubbles){Z=!1;return}}),!Z)return}r(!1,M4e(H)?H.nativeEvent:H,"escape-key")}),O=$h(H=>{var Y;const J=()=>{var K;R(H),(K=Eb(H))==null||K.removeEventListener("keydown",J)};(Y=Eb(H))==null||Y.addEventListener("keydown",J)}),N=$h(H=>{var Y;const J=v.current;v.current=!1;const K=x.current;if(x.current=!1,u==="click"&&K||J||typeof b=="function"&&!b(H))return;const Z=Eb(H),U="["+SU("inert")+"]",j=dy(i.floating).querySelectorAll(U);let V=el(Z)?Z:null;for(;V&&!Aee(V);){const ie=D4e(V);if(Aee(ie)||!el(ie))break;V=ie}if(j.length&&el(Z)&&!L4e(Z)&&!wT(Z,i.floating)&&Array.from(j).every(ie=>!wT(V,ie)))return;if(hU(Z)&&B){const ie=Z.clientWidth>0&&Z.scrollWidth>Z.clientWidth,me=Z.clientHeight>0&&Z.scrollHeight>Z.clientHeight;let ae=me&&H.offsetX>Z.clientWidth;if(me&&R4e(Z).direction==="rtl"&&(ae=H.offsetX<=Z.offsetWidth-Z.clientWidth),ae||ie&&H.offsetY>Z.clientHeight)return}const z=(Y=s.current.floatingContext)==null?void 0:Y.nodeId,G=m&&z8(m.nodesRef.current,z).some(ie=>{var me;return L8(H,(me=ie.context)==null?void 0:me.elements.floating)});if(L8(H,i.floating)||L8(H,i.domReference)||G)return;const Q=m?z8(m.nodesRef.current,z):[];if(Q.length>0){let ie=!0;if(Q.forEach(me=>{var ae;if((ae=me.context)!=null&&ae.open&&!me.context.dataRef.current.__outsidePressBubbles){ie=!1;return}}),!ie)return}r(!1,H,"outside-press")}),L=$h(H=>{var Y;const J=()=>{var K;N(H),(K=Eb(H))==null||K.removeEventListener(u,J)};(Y=Eb(H))==null||Y.addEventListener(u,J)});D.useEffect(()=>{if(!n||!o)return;s.current.__escapeKeyBubbles=E,s.current.__outsidePressBubbles=_;let H=-1;function Y(j){r(!1,j,"ancestor-scroll")}function J(){window.clearTimeout(H),k.current=!0}function K(){H=window.setTimeout(()=>{k.current=!1},I4e()?5:0)}const Z=dy(i.floating);a&&(Z.addEventListener("keydown",C?O:R,C),Z.addEventListener("compositionstart",J),Z.addEventListener("compositionend",K)),b&&Z.addEventListener(u,S?L:N,S);let U=[];return f&&(el(i.domReference)&&(U=Jh(i.domReference)),el(i.floating)&&(U=U.concat(Jh(i.floating))),!el(i.reference)&&i.reference&&i.reference.contextElement&&(U=U.concat(Jh(i.reference.contextElement)))),U=U.filter(j=>{var V;return j!==((V=Z.defaultView)==null?void 0:V.visualViewport)}),U.forEach(j=>{j.addEventListener("scroll",Y,{passive:!0})}),()=>{a&&(Z.removeEventListener("keydown",C?O:R,C),Z.removeEventListener("compositionstart",J),Z.removeEventListener("compositionend",K)),b&&Z.removeEventListener(u,S?L:N,S),U.forEach(j=>{j.removeEventListener("scroll",Y)}),window.clearTimeout(H)}},[s,i,a,b,u,n,r,f,o,E,_,R,C,O,N,S,L]),D.useEffect(()=>{v.current=!1},[b,u]);const $=D.useMemo(()=>({onKeyDown:R,[H6e[d]]:H=>{c&&r(!1,H.nativeEvent,"reference-press")}}),[R,r,c,d]),B=D.useMemo(()=>({onKeyDown:R,onMouseDown(){x.current=!0},onMouseUp(){x.current=!0},[W6e[u]]:()=>{v.current=!0}}),[R,u]);return D.useMemo(()=>o?{reference:$,floating:B}:{},[o,$,B])}function G6e(e){const{open:t=!1,onOpenChange:n,elements:r}=e,i=ome(),s=D.useRef({}),[o]=D.useState(()=>L6e()),a=TU()!=null,[l,u]=D.useState(r.reference),c=$h((h,p,m)=>{s.current.openEvent=h?p:void 0,o.emit("openchange",{open:h,event:p,reason:m,nested:a}),n==null||n(h,p,m)}),d=D.useMemo(()=>({setPositionReference:u}),[]),f=D.useMemo(()=>({reference:l||r.reference||null,floating:r.floating||null,domReference:r.reference}),[l,r.reference,r.floating]);return D.useMemo(()=>({dataRef:s,open:t,onOpenChange:c,elements:f,events:o,floatingId:i,refs:d}),[t,c,f,o,i,d])}function AU(e){e===void 0&&(e={});const{nodeId:t}=e,n=G6e({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,i=r.elements,[s,o]=D.useState(null),[a,l]=D.useState(null),c=(i==null?void 0:i.domReference)||s,d=D.useRef(null),f=CU();lf(()=>{c&&(d.current=c)},[c]);const h=I6e({...e,elements:{...i,...a&&{reference:a}}}),p=D.useCallback(x=>{const E=el(x)?{getBoundingClientRect:()=>x.getBoundingClientRect(),contextElement:x}:x;l(E),h.refs.setReference(E)},[h.refs]),m=D.useCallback(x=>{(el(x)||x===null)&&(d.current=x,o(x)),(el(h.refs.reference.current)||h.refs.reference.current===null||x!==null&&!el(x))&&h.refs.setReference(x)},[h.refs]),g=D.useMemo(()=>({...h.refs,setReference:m,setPositionReference:p,domReference:d}),[h.refs,m,p]),b=D.useMemo(()=>({...h.elements,domReference:c}),[h.elements,c]),v=D.useMemo(()=>({...h,...r,refs:g,elements:b,nodeId:t}),[h,g,b,t,r]);return lf(()=>{r.dataRef.current.floatingContext=v;const x=f==null?void 0:f.nodesRef.current.find(E=>E.id===t);x&&(x.context=v)}),D.useMemo(()=>({...h,context:v,refs:g,elements:b}),[h,g,b,v])}function Y6e(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,events:i,dataRef:s,elements:o}=e,{enabled:a=!0,visibleOnly:l=!0}=t,u=D.useRef(!1),c=D.useRef(),d=D.useRef(!0);D.useEffect(()=>{if(!a)return;const h=bx(o.domReference);function p(){!n&&hU(o.domReference)&&o.domReference===kee(dy(o.domReference))&&(u.current=!0)}function m(){d.current=!0}return h.addEventListener("blur",p),h.addEventListener("keydown",m,!0),()=>{h.removeEventListener("blur",p),h.removeEventListener("keydown",m,!0)}},[o.domReference,n,a]),D.useEffect(()=>{if(!a)return;function h(p){let{reason:m}=p;(m==="reference-press"||m==="escape-key")&&(u.current=!0)}return i.on("openchange",h),()=>{i.off("openchange",h)}},[i,a]),D.useEffect(()=>()=>{clearTimeout(c.current)},[]);const f=D.useMemo(()=>({onPointerDown(h){P4e(h.nativeEvent)||(d.current=!1)},onMouseLeave(){u.current=!1},onFocus(h){if(u.current)return;const p=Eb(h.nativeEvent);if(l&&el(p))try{if(N4e()&&O4e())throw Error();if(!p.matches(":focus-visible"))return}catch{if(!d.current&&!j4e(p))return}r(!0,h.nativeEvent,"focus")},onBlur(h){u.current=!1;const p=h.relatedTarget,m=h.nativeEvent,g=el(p)&&p.hasAttribute(SU("focus-guard"))&&p.getAttribute("data-type")==="outside";c.current=window.setTimeout(()=>{var b;const v=kee(o.domReference?o.domReference.ownerDocument:document);!p&&v===o.domReference||wT((b=s.current.floatingContext)==null?void 0:b.refs.floating.current,v)||wT(o.domReference,v)||g||r(!1,m,"focus")})}}),[s,o.domReference,r,l]);return D.useMemo(()=>a?{reference:f}:{},[a,f])}const zee="active",Uee="selected";function U8(e,t,n){const r=new Map,i=n==="item";let s=e;if(i&&e){const{[zee]:o,[Uee]:a,...l}=e;s=l}return{...n==="floating"&&{tabIndex:-1,[q6e]:""},...s,...t.map(o=>{const a=o?o[n]:null;return typeof a=="function"?e?a(e):null:a}).concat(e).reduce((o,a)=>(a&&Object.entries(a).forEach(l=>{let[u,c]=l;if(!(i&&[zee,Uee].includes(u)))if(u.indexOf("on")===0){if(r.has(u)||r.set(u,[]),typeof c=="function"){var d;(d=r.get(u))==null||d.push(c),o[u]=function(){for(var f,h=arguments.length,p=new Array(h),m=0;m<h;m++)p[m]=arguments[m];return(f=r.get(u))==null?void 0:f.map(g=>g(...p)).find(g=>g!==void 0)}}}else o[u]=c}),o),{})}}function K6e(e){e===void 0&&(e=[]);const t=e.map(a=>a==null?void 0:a.reference),n=e.map(a=>a==null?void 0:a.floating),r=e.map(a=>a==null?void 0:a.item),i=D.useCallback(a=>U8(a,e,"reference"),t),s=D.useCallback(a=>U8(a,e,"floating"),n),o=D.useCallback(a=>U8(a,e,"item"),r);return D.useMemo(()=>({getReferenceProps:i,getFloatingProps:s,getItemProps:o}),[i,s,o])}const X6e=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function Q6e(e,t){var n;t===void 0&&(t={});const{open:r,floatingId:i}=e,{enabled:s=!0,role:o="dialog"}=t,a=(n=X6e.get(o))!=null?n:o,l=ome(),c=TU()!=null,d=D.useMemo(()=>a==="tooltip"||o==="label"?{["aria-"+(o==="label"?"labelledby":"describedby")]:r?i:void 0}:{"aria-expanded":r?"true":"false","aria-haspopup":a==="alertdialog"?"dialog":a,"aria-controls":r?i:void 0,...a==="listbox"&&{role:"combobox"},...a==="menu"&&{id:l},...a==="menu"&&c&&{role:"menuitem"},...o==="select"&&{"aria-autocomplete":"none"},...o==="combobox"&&{"aria-autocomplete":"list"}},[a,i,c,r,l,o]),f=D.useMemo(()=>{const p={id:i,...a&&{role:a}};return a==="tooltip"||o==="label"?p:{...p,...a==="menu"&&{"aria-labelledby":l}}},[a,i,l,o]),h=D.useCallback(p=>{let{active:m,selected:g}=p;const b={role:"option",...m&&{id:i+"-option"}};switch(o){case"select":return{...b,"aria-selected":m&&g};case"combobox":return{...b,...m&&{"aria-selected":!0}}}return{}},[i,o]);return D.useMemo(()=>s?{reference:d,floating:f,item:h}:{},[s,d,f,h])}function ume(e,t){if(e==="rtl"&&(t.includes("right")||t.includes("left"))){const[n,r]=t.split("-"),i=n==="right"?"left":"right";return r===void 0?i:`${i}-${r}`}return t}function qee(e,t,n,r){return e==="center"||r==="center"?{top:t}:e==="end"?{bottom:n}:e==="start"?{top:n}:{}}function Hee(e,t,n,r,i){return e==="center"||r==="center"?{left:t}:e==="end"?{[i==="ltr"?"right":"left"]:n}:e==="start"?{[i==="ltr"?"left":"right"]:n}:{}}const J6e={bottom:"borderTopLeftRadius",left:"borderTopRightRadius",right:"borderBottomLeftRadius",top:"borderBottomRightRadius"};function Z6e({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,arrowX:s,arrowY:o,dir:a}){const[l,u="center"]=e.split("-"),c={width:t,height:t,transform:"rotate(45deg)",position:"absolute",[J6e[l]]:r},d=-t/2;return l==="left"?{...c,...qee(u,o,n,i),right:d,borderLeftColor:"transparent",borderBottomColor:"transparent",clipPath:"polygon(100% 0, 0 0, 100% 100%)"}:l==="right"?{...c,...qee(u,o,n,i),left:d,borderRightColor:"transparent",borderTopColor:"transparent",clipPath:"polygon(0 100%, 0 0, 100% 100%)"}:l==="top"?{...c,...Hee(u,s,n,i,a),bottom:d,borderTopColor:"transparent",borderLeftColor:"transparent",clipPath:"polygon(0 100%, 100% 100%, 100% 0)"}:l==="bottom"?{...c,...Hee(u,s,n,i,a),top:d,borderBottomColor:"transparent",borderRightColor:"transparent",clipPath:"polygon(0 100%, 0 0, 100% 0)"}:{}}const kU=D.forwardRef(({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,visible:s,arrowX:o,arrowY:a,style:l,...u},c)=>{const{dir:d}=Np();return s?T.jsx("div",{...u,ref:c,style:{...l,...Z6e({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,dir:d,arrowX:o,arrowY:a})}}):null});kU.displayName="@mantine/core/FloatingArrow";var cme={root:"m_9814e45f"};const e5e={zIndex:Gs("modal")},t5e=(e,{gradient:t,color:n,backgroundOpacity:r,blur:i,radius:s,zIndex:o})=>({root:{"--overlay-bg":t||(n!==void 0||r!==void 0)&&Ud(n||"#000",r??.6)||void 0,"--overlay-filter":i?`blur(${Oe(i)})`:void 0,"--overlay-radius":s===void 0?void 0:Tr(s),"--overlay-z-index":o==null?void 0:o.toString()}}),xw=Ki((e,t)=>{const n=$e("Overlay",e5e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,fixed:u,center:c,children:d,radius:f,zIndex:h,gradient:p,blur:m,color:g,backgroundOpacity:b,mod:v,...x}=n,E=Nt({name:"Overlay",props:n,classes:cme,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:t5e});return T.jsx(Se,{ref:t,...E("root"),mod:[{center:c,fixed:u},v],...x,children:d})});xw.classes=cme;xw.displayName="@mantine/core/Overlay";function n5e(e){const t=document.createElement("div");return t.setAttribute("data-portal","true"),typeof e.className=="string"&&t.classList.add(...e.className.split(" ").filter(Boolean)),typeof e.style=="object"&&Object.assign(t.style,e.style),typeof e.id=="string"&&t.setAttribute("id",e.id),t}const r5e={},dme=D.forwardRef((e,t)=>{const{children:n,target:r,...i}=$e("Portal",r5e,e),[s,o]=D.useState(!1),a=D.useRef(null);return Ev(()=>(o(!0),a.current=r?typeof r=="string"?document.querySelector(r):r:n5e(i),dD(t,a.current),!r&&a.current&&document.body.appendChild(a.current),()=>{!r&&a.current&&document.body.removeChild(a.current)}),[r]),!s||!a.current?null:KN.createPortal(T.jsx(T.Fragment,{children:n}),a.current)});dme.displayName="@mantine/core/Portal";function M0({withinPortal:e=!0,children:t,...n}){return e?T.jsx(dme,{...n,children:t}):T.jsx(T.Fragment,{children:t})}M0.displayName="@mantine/core/OptionalPortal";const n_=e=>({in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:`scale(.9) translateY(${e==="bottom"?10:-10}px)`},transitionProperty:"transform, opacity"}),vk={fade:{in:{opacity:1},out:{opacity:0},transitionProperty:"opacity"},"fade-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(30px)"},transitionProperty:"opacity, transform"},"fade-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-30px)"},transitionProperty:"opacity, transform"},"fade-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(30px)"},transitionProperty:"opacity, transform"},"fade-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-30px)"},transitionProperty:"opacity, transform"},scale:{in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-y":{in:{opacity:1,transform:"scaleY(1)"},out:{opacity:0,transform:"scaleY(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-x":{in:{opacity:1,transform:"scaleX(1)"},out:{opacity:0,transform:"scaleX(0)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"skew-up":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:"translateY(-20px) skew(-10deg, -5deg)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"skew-down":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:"translateY(20px) skew(-10deg, -5deg)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-left":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:"translateY(20px) rotate(-5deg)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-right":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:"translateY(20px) rotate(5deg)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-100%)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(100%)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"slide-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(100%)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"slide-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-100%)"},common:{transformOrigin:"right"},transitionProperty:"transform, opacity"},pop:{...n_("bottom"),common:{transformOrigin:"center center"}},"pop-bottom-left":{...n_("bottom"),common:{transformOrigin:"bottom left"}},"pop-bottom-right":{...n_("bottom"),common:{transformOrigin:"bottom right"}},"pop-top-left":{...n_("top"),common:{transformOrigin:"top left"}},"pop-top-right":{...n_("top"),common:{transformOrigin:"top right"}}},Wee={entering:"in",entered:"in",exiting:"out",exited:"out","pre-exiting":"out","pre-entering":"out"};function i5e({transition:e,state:t,duration:n,timingFunction:r}){const i={transitionDuration:`${n}ms`,transitionTimingFunction:r};return typeof e=="string"?e in vk?{transitionProperty:vk[e].transitionProperty,...i,...vk[e].common,...vk[e][Wee[t]]}:{}:{transitionProperty:e.transitionProperty,...i,...e.common,...e[Wee[t]]}}function s5e({duration:e,exitDuration:t,timingFunction:n,mounted:r,onEnter:i,onExit:s,onEntered:o,onExited:a,enterDelay:l,exitDelay:u}){const c=Yi(),d=VN(),f=c.respectReducedMotion?d:!1,[h,p]=D.useState(f?0:e),[m,g]=D.useState(r?"entered":"exited"),b=D.useRef(-1),v=D.useRef(-1),x=D.useRef(-1),E=C=>{const S=C?i:s,k=C?o:a;window.clearTimeout(b.current);const R=f?0:C?e:t;p(R),R===0?(typeof S=="function"&&S(),typeof k=="function"&&k(),g(C?"entered":"exited")):x.current=requestAnimationFrame(()=>{G_.flushSync(()=>{g(C?"pre-entering":"pre-exiting")}),x.current=requestAnimationFrame(()=>{typeof S=="function"&&S(),g(C?"entering":"exiting"),b.current=window.setTimeout(()=>{typeof k=="function"&&k(),g(C?"entered":"exited")},R)})})},_=C=>{if(window.clearTimeout(v.current),typeof(C?l:u)!="number"){E(C);return}v.current=window.setTimeout(()=>{E(C)},C?l:u)};return xf(()=>{_(r)},[r]),D.useEffect(()=>()=>{window.clearTimeout(b.current),cancelAnimationFrame(x.current)},[]),{transitionDuration:h,transitionStatus:m,transitionTimingFunction:n||"ease"}}function jf({keepMounted:e,transition:t="fade",duration:n=250,exitDuration:r=n,mounted:i,children:s,timingFunction:o="ease",onExit:a,onEntered:l,onEnter:u,onExited:c,enterDelay:d,exitDelay:f}){const{transitionDuration:h,transitionStatus:p,transitionTimingFunction:m}=s5e({mounted:i,exitDuration:r,duration:n,timingFunction:o,onExit:a,onEntered:l,onEnter:u,onExited:c,enterDelay:d,exitDelay:f});return h===0?i?T.jsx(T.Fragment,{children:s({})}):e?s({display:"none"}):null:p==="exited"?e?s({display:"none"}):null:T.jsx(T.Fragment,{children:s(i5e({transition:t,duration:h,state:p,timingFunction:m}))})}jf.displayName="@mantine/core/Transition";const[o5e,fme]=ps("Popover component was not found in the tree");function RC({children:e,active:t=!0,refProp:n="ref",innerRef:r}){const i=BOe(t),s=ms(i,r);return Dp(e)?D.cloneElement(e,{[n]:s}):e}function hme(e){return T.jsx(fU,{tabIndex:-1,"data-autofocus":!0,...e})}RC.displayName="@mantine/core/FocusTrap";hme.displayName="@mantine/core/FocusTrapInitialFocus";RC.InitialFocus=hme;var pme={dropdown:"m_38a85659",arrow:"m_a31dc6c1",overlay:"m_3d7bc908"};const a5e={},IU=Ze((e,t)=>{var g,b,v,x;const n=$e("PopoverDropdown",a5e,e),{className:r,style:i,vars:s,children:o,onKeyDownCapture:a,variant:l,classNames:u,styles:c,...d}=n,f=fme(),h=fpe({opened:f.opened,shouldReturnFocus:f.returnFocus}),p=f.withRoles?{"aria-labelledby":f.getTargetId(),id:f.getDropdownId(),role:"dialog",tabIndex:-1}:{},m=ms(t,f.floating);return f.disabled?null:T.jsx(M0,{...f.portalProps,withinPortal:f.withinPortal,children:T.jsx(jf,{mounted:f.opened,...f.transitionProps,transition:((g=f.transitionProps)==null?void 0:g.transition)||"fade",duration:((b=f.transitionProps)==null?void 0:b.duration)??150,keepMounted:f.keepMounted,exitDuration:typeof((v=f.transitionProps)==null?void 0:v.exitDuration)=="number"?f.transitionProps.exitDuration:(x=f.transitionProps)==null?void 0:x.duration,children:E=>T.jsx(RC,{active:f.trapFocus&&f.opened,innerRef:m,children:T.jsxs(Se,{...p,...d,variant:l,onKeyDownCapture:AOe(f.onClose,{active:f.closeOnEscape,onTrigger:h,onKeyDown:a}),"data-position":f.placement,"data-fixed":f.floatingStrategy==="fixed"||void 0,...f.getStyles("dropdown",{className:r,props:n,classNames:u,styles:c,style:[{...E,zIndex:f.zIndex,top:f.y??0,left:f.x??0,width:f.width==="target"?void 0:Oe(f.width)},f.resolvedStyles.dropdown,c==null?void 0:c.dropdown,i]}),children:[o,T.jsx(kU,{ref:f.arrowRef,arrowX:f.arrowX,arrowY:f.arrowY,visible:f.withArrow,position:f.placement,arrowSize:f.arrowSize,arrowRadius:f.arrowRadius,arrowOffset:f.arrowOffset,arrowPosition:f.arrowPosition,...f.getStyles("arrow",{props:n,classNames:u,styles:c})})]})})})})});IU.classes=pme;IU.displayName="@mantine/core/PopoverDropdown";const l5e={refProp:"ref",popupType:"dialog"},mme=Ze((e,t)=>{const{children:n,refProp:r,popupType:i,...s}=$e("PopoverTarget",l5e,e);if(!Dp(n))throw new Error("Popover.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const o=s,a=fme(),l=ms(a.reference,GN(n),t),u=a.withRoles?{"aria-haspopup":i,"aria-expanded":a.opened,"aria-controls":a.getDropdownId(),id:a.getTargetId()}:{};return D.cloneElement(n,{...o,...u,...a.targetProps,className:Mi(a.targetProps.className,o.className,n.props.className),[r]:l,...a.controlled?null:{onClick:a.onToggle}})});mme.displayName="@mantine/core/PopoverTarget";function gme({opened:e,floating:t,position:n,positionDependencies:r}){const[i,s]=D.useState(0);D.useEffect(()=>{if(t.refs.reference.current&&t.refs.floating.current&&e)return x6e(t.refs.reference.current,t.refs.floating.current,t.update)},[t.refs.reference.current,t.refs.floating.current,e,i,n]),xf(()=>{t.update()},r),xf(()=>{s(o=>o+1)},[e])}function u5e(e){if(e===void 0)return{shift:!0,flip:!0};const t={...e};return e.shift===void 0&&(t.shift=!0),e.flip===void 0&&(t.flip=!0),t}function c5e(e,t){const n=u5e(e.middlewares),r=[rme(e.offset)];return n.shift&&r.push(_U(typeof n.shift=="boolean"?{limiter:Mee(),padding:5}:{limiter:Mee(),padding:5,...n.shift})),n.flip&&r.push(typeof n.flip=="boolean"?yD():yD(n.flip)),n.inline&&r.push(typeof n.inline=="boolean"?N2():N2(n.inline)),r.push(ime({element:e.arrowRef,padding:e.arrowOffset})),(n.size||e.width==="target")&&r.push(D6e({...typeof n.size=="boolean"?{}:n.size,apply({rects:i,availableWidth:s,availableHeight:o,...a}){var c;const u=((c=t().refs.floating.current)==null?void 0:c.style)??{};n.size&&(typeof n.size=="object"&&n.size.apply?n.size.apply({rects:i,availableWidth:s,availableHeight:o,...a}):Object.assign(u,{maxWidth:`${s}px`,maxHeight:`${o}px`})),e.width==="target"&&Object.assign(u,{width:`${i.reference.width}px`})}})),r}function d5e(e){const[t,n]=Hs({value:e.opened,defaultValue:e.defaultOpened,finalValue:!1,onChange:e.onChange}),r=D.useRef(t),i=()=>{t&&n(!1)},s=()=>n(!t),o=AU({strategy:e.strategy,placement:e.position,middleware:c5e(e,()=>o)});return gme({opened:t,position:e.position,positionDependencies:e.positionDependencies||[],floating:o}),xf(()=>{var a;(a=e.onPositionChange)==null||a.call(e,o.placement)},[o.placement]),xf(()=>{var a,l;t!==r.current&&(t?(l=e.onOpen)==null||l.call(e):(a=e.onClose)==null||a.call(e)),r.current=t},[t,e.onClose,e.onOpen]),{floating:o,controlled:typeof e.opened=="boolean",opened:t,onClose:i,onToggle:s}}const f5e={position:"bottom",offset:8,positionDependencies:[],transitionProps:{transition:"fade",duration:150},middlewares:{flip:!0,shift:!0,inline:!1},arrowSize:7,arrowOffset:5,arrowRadius:0,arrowPosition:"side",closeOnClickOutside:!0,withinPortal:!0,closeOnEscape:!0,trapFocus:!1,withRoles:!0,returnFocus:!1,withOverlay:!1,clickOutsideEvents:["mousedown","touchstart"],zIndex:Gs("popover"),__staticSelector:"Popover",width:"max-content"},h5e=(e,{radius:t,shadow:n})=>({dropdown:{"--popover-radius":t===void 0?void 0:Tr(t),"--popover-shadow":eU(n)}});function xo(e){var wt,Wt,Ce,Ne,ot,xt;const t=$e("Popover",f5e,e),{children:n,position:r,offset:i,onPositionChange:s,positionDependencies:o,opened:a,transitionProps:l,onExitTransitionEnd:u,onEnterTransitionEnd:c,width:d,middlewares:f,withArrow:h,arrowSize:p,arrowOffset:m,arrowRadius:g,arrowPosition:b,unstyled:v,classNames:x,styles:E,closeOnClickOutside:_,withinPortal:C,portalProps:S,closeOnEscape:k,clickOutsideEvents:R,trapFocus:O,onClose:N,onOpen:L,onChange:$,zIndex:B,radius:H,shadow:Y,id:J,defaultOpened:K,__staticSelector:Z,withRoles:U,disabled:j,returnFocus:V,variant:z,keepMounted:G,vars:Q,floatingStrategy:ie,withOverlay:me,overlayProps:ae,...fe}=t,be=Nt({name:Z,props:t,classes:pme,classNames:x,styles:E,unstyled:v,rootSelector:"dropdown",vars:Q,varsResolver:h5e}),{resolvedStyles:te}=Tv({classNames:x,styles:E,props:t}),re=D.useRef(null),[we,Ee]=D.useState(null),[Fe,We]=D.useState(null),{dir:Me}=Np(),Be=Ia(J),Je=d5e({middlewares:f,width:d,position:ume(Me,r),offset:typeof i=="number"?i+(h?p/2:0):i,arrowRef:re,arrowOffset:m,onPositionChange:s,positionDependencies:o,opened:a,defaultOpened:K,onChange:$,onOpen:L,onClose:N,strategy:ie});DOe(()=>_&&Je.onClose(),R,[we,Fe]);const lt=D.useCallback(Ct=>{Ee(Ct),Je.floating.refs.setReference(Ct)},[Je.floating.refs.setReference]),ht=D.useCallback(Ct=>{We(Ct),Je.floating.refs.setFloating(Ct)},[Je.floating.refs.setFloating]),vt=D.useCallback(()=>{var Ct;(Ct=l==null?void 0:l.onExited)==null||Ct.call(l),u==null||u()},[l==null?void 0:l.onExited,u]),Pe=D.useCallback(()=>{var Ct;(Ct=l==null?void 0:l.onEntered)==null||Ct.call(l),c==null||c()},[l==null?void 0:l.onEntered,c]);return T.jsxs(o5e,{value:{returnFocus:V,disabled:j,controlled:Je.controlled,reference:lt,floating:ht,x:Je.floating.x,y:Je.floating.y,arrowX:(Ce=(Wt=(wt=Je.floating)==null?void 0:wt.middlewareData)==null?void 0:Wt.arrow)==null?void 0:Ce.x,arrowY:(xt=(ot=(Ne=Je.floating)==null?void 0:Ne.middlewareData)==null?void 0:ot.arrow)==null?void 0:xt.y,opened:Je.opened,arrowRef:re,transitionProps:{...l,onExited:vt,onEntered:Pe},width:d,withArrow:h,arrowSize:p,arrowOffset:m,arrowRadius:g,arrowPosition:b,placement:Je.floating.placement,trapFocus:O,withinPortal:C,portalProps:S,zIndex:B,radius:H,shadow:Y,closeOnEscape:k,onClose:Je.onClose,onToggle:Je.onToggle,getTargetId:()=>`${Be}-target`,getDropdownId:()=>`${Be}-dropdown`,withRoles:U,targetProps:fe,__staticSelector:Z,classNames:x,styles:E,unstyled:v,variant:z,keepMounted:G,getStyles:be,resolvedStyles:te,floatingStrategy:ie},children:[n,me&&T.jsx(jf,{transition:"fade",mounted:Je.opened,duration:(l==null?void 0:l.duration)||250,exitDuration:(l==null?void 0:l.exitDuration)||250,children:Ct=>T.jsx(M0,{withinPortal:C,children:T.jsx(xw,{...ae,...be("overlay",{className:ae==null?void 0:ae.className,style:[Ct,ae==null?void 0:ae.style]})})})})]})}xo.Target=mme;xo.Dropdown=IU;xo.displayName="@mantine/core/Popover";xo.extend=e=>e;var $c={root:"m_5ae2e3c",barsLoader:"m_7a2bd4cd",bar:"m_870bb79","bars-loader-animation":"m_5d2b3b9d",dotsLoader:"m_4e3f22d7",dot:"m_870c4af","loader-dots-animation":"m_aac34a1",ovalLoader:"m_b34414df","oval-loader-animation":"m_f8e89c4b"};const yme=D.forwardRef(({className:e,...t},n)=>T.jsxs(Se,{component:"span",className:Mi($c.barsLoader,e),...t,ref:n,children:[T.jsx("span",{className:$c.bar}),T.jsx("span",{className:$c.bar}),T.jsx("span",{className:$c.bar})]}));yme.displayName="@mantine/core/Bars";const vme=D.forwardRef(({className:e,...t},n)=>T.jsxs(Se,{component:"span",className:Mi($c.dotsLoader,e),...t,ref:n,children:[T.jsx("span",{className:$c.dot}),T.jsx("span",{className:$c.dot}),T.jsx("span",{className:$c.dot})]}));vme.displayName="@mantine/core/Dots";const bme=D.forwardRef(({className:e,...t},n)=>T.jsx(Se,{component:"span",className:Mi($c.ovalLoader,e),...t,ref:n}));bme.displayName="@mantine/core/Oval";const wme={bars:yme,oval:bme,dots:vme},p5e={loaders:wme,type:"oval"},m5e=(e,{size:t,color:n})=>({root:{"--loader-size":cn(t,"loader-size"),"--loader-color":n?$r(n,e):void 0}}),ld=Ze((e,t)=>{const n=$e("Loader",p5e,e),{size:r,color:i,type:s,vars:o,className:a,style:l,classNames:u,styles:c,unstyled:d,loaders:f,variant:h,children:p,...m}=n,g=Nt({name:"Loader",props:n,classes:$c,className:a,style:l,classNames:u,styles:c,unstyled:d,vars:o,varsResolver:m5e});return p?T.jsx(Se,{...g("root"),ref:t,...m,children:p}):T.jsx(Se,{...g("root"),ref:t,component:f[s],variant:h,size:r,...m})});ld.defaultLoaders=wme;ld.classes=$c;ld.displayName="@mantine/core/Loader";var Ex={root:"m_8d3f4000",icon:"m_8d3afb97",loader:"m_302b9fb1",group:"m_1a0f1b21",groupSection:"m_437b6484"};const Vee={orientation:"horizontal"},g5e=(e,{borderWidth:t})=>({group:{"--ai-border-width":Oe(t)}}),RU=Ze((e,t)=>{const n=$e("ActionIconGroup",Vee,e),{className:r,style:i,classNames:s,styles:o,unstyled:a,orientation:l,vars:u,borderWidth:c,variant:d,mod:f,...h}=$e("ActionIconGroup",Vee,e),p=Nt({name:"ActionIconGroup",props:n,classes:Ex,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:u,varsResolver:g5e,rootSelector:"group"});return T.jsx(Se,{...p("group"),ref:t,variant:d,mod:[{"data-orientation":l},f],role:"group",...h})});RU.classes=Ex;RU.displayName="@mantine/core/ActionIconGroup";const Gee={},y5e=(e,{radius:t,color:n,gradient:r,variant:i,autoContrast:s,size:o})=>{const a=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:s});return{groupSection:{"--section-height":cn(o,"section-height"),"--section-padding-x":cn(o,"section-padding-x"),"--section-fz":wo(o),"--section-radius":t===void 0?void 0:Tr(t),"--section-bg":n||i?a.background:void 0,"--section-color":a.color,"--section-bd":n||i?a.border:void 0}}},DU=Ze((e,t)=>{const n=$e("ActionIconGroupSection",Gee,e),{className:r,style:i,classNames:s,styles:o,unstyled:a,vars:l,variant:u,gradient:c,radius:d,autoContrast:f,...h}=$e("ActionIconGroupSection",Gee,e),p=Nt({name:"ActionIconGroupSection",props:n,classes:Ex,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:l,varsResolver:y5e,rootSelector:"groupSection"});return T.jsx(Se,{...p("groupSection"),ref:t,variant:u,...h})});DU.classes=Ex;DU.displayName="@mantine/core/ActionIconGroupSection";const v5e={},b5e=(e,{size:t,radius:n,variant:r,gradient:i,color:s,autoContrast:o})=>{const a=e.variantColorResolver({color:s||e.primaryColor,theme:e,gradient:i,variant:r||"filled",autoContrast:o});return{root:{"--ai-size":cn(t,"ai-size"),"--ai-radius":n===void 0?void 0:Tr(n),"--ai-bg":s||r?a.background:void 0,"--ai-hover":s||r?a.hover:void 0,"--ai-hover-color":s||r?a.hoverColor:void 0,"--ai-color":a.color,"--ai-bd":s||r?a.border:void 0}}},L0=Ki((e,t)=>{const n=$e("ActionIcon",v5e,e),{className:r,unstyled:i,variant:s,classNames:o,styles:a,style:l,loading:u,loaderProps:c,size:d,color:f,radius:h,__staticSelector:p,gradient:m,vars:g,children:b,disabled:v,"data-disabled":x,autoContrast:E,mod:_,...C}=n,S=Nt({name:["ActionIcon",p],props:n,className:r,style:l,classes:Ex,classNames:o,styles:a,unstyled:i,vars:g,varsResolver:b5e});return T.jsxs(ul,{...S("root",{active:!v&&!u&&!x}),...C,unstyled:i,variant:s,size:d,disabled:v||u,ref:t,mod:[{loading:u,disabled:v||x},_],children:[T.jsx(jf,{mounted:!!u,transition:"slide-down",duration:150,children:k=>T.jsx(Se,{component:"span",...S("loader",{style:k}),"aria-hidden":!0,children:T.jsx(ld,{color:"var(--ai-color)",size:"calc(var(--ai-size) * 0.55)",...c})})}),T.jsx(Se,{component:"span",mod:{loading:u},...S("icon"),children:b})]})});L0.classes=Ex;L0.displayName="@mantine/core/ActionIcon";L0.Group=RU;L0.GroupSection=DU;const xme=D.forwardRef(({size:e="var(--cb-icon-size, 70%)",style:t,...n},r)=>T.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...t,width:e,height:e},ref:r,...n,children:T.jsx("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})}));xme.displayName="@mantine/core/CloseIcon";var Eme={root:"m_86a44da5","root--subtle":"m_220c80f2"};const w5e={variant:"subtle"},x5e=(e,{size:t,radius:n,iconSize:r})=>({root:{"--cb-size":cn(t,"cb-size"),"--cb-radius":n===void 0?void 0:Tr(n),"--cb-icon-size":Oe(r)}}),pp=Ki((e,t)=>{const n=$e("CloseButton",w5e,e),{iconSize:r,children:i,vars:s,radius:o,className:a,classNames:l,style:u,styles:c,unstyled:d,"data-disabled":f,disabled:h,variant:p,icon:m,mod:g,__staticSelector:b,...v}=n,x=Nt({name:b||"CloseButton",props:n,className:a,style:u,classes:Eme,classNames:l,styles:c,unstyled:d,vars:s,varsResolver:x5e});return T.jsxs(ul,{ref:t,...v,unstyled:d,variant:p,disabled:h,mod:[{disabled:h||f},g],...x("root",{variant:p,active:!h&&!f}),children:[m||T.jsx(xme,{}),i]})});pp.classes=Eme;pp.displayName="@mantine/core/CloseButton";function E5e(e){return D.Children.toArray(e).filter(Boolean)}var _me={root:"m_4081bf90"};const _5e={preventGrowOverflow:!0,gap:"md",align:"center",justify:"flex-start",wrap:"wrap"},T5e=(e,{grow:t,preventGrowOverflow:n,gap:r,align:i,justify:s,wrap:o},{childWidth:a})=>({root:{"--group-child-width":t&&n?a:void 0,"--group-gap":Wi(r),"--group-align":i,"--group-justify":s,"--group-wrap":o}}),yi=Ze((e,t)=>{const n=$e("Group",_5e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,children:l,gap:u,align:c,justify:d,wrap:f,grow:h,preventGrowOverflow:p,vars:m,variant:g,__size:b,mod:v,...x}=n,E=E5e(l),_=E.length,C=Wi(u??"md"),k={childWidth:`calc(${100/_}% - (${C} - ${C} / ${_}))`},R=Nt({name:"Group",props:n,stylesCtx:k,className:i,style:s,classes:_me,classNames:r,styles:o,unstyled:a,vars:m,varsResolver:T5e});return T.jsx(Se,{...R("root"),ref:t,variant:g,mod:[{grow:h},v],size:b,...x,children:E})});yi.classes=_me;yi.displayName="@mantine/core/Group";const[C5e,$p]=ps("ModalBase component was not found in tree");function S5e({opened:e,transitionDuration:t}){const[n,r]=D.useState(e),i=D.useRef(-1),o=VN()?0:t;return D.useEffect(()=>(e?(r(!0),window.clearTimeout(i.current)):o===0?r(!1):i.current=window.setTimeout(()=>r(!1),o),()=>window.clearTimeout(i.current)),[e,o]),n}function A5e({id:e,transitionProps:t,opened:n,trapFocus:r,closeOnEscape:i,onClose:s,returnFocus:o}){const a=Ia(e),[l,u]=D.useState(!1),[c,d]=D.useState(!1),f=typeof(t==null?void 0:t.duration)=="number"?t==null?void 0:t.duration:200,h=S5e({opened:n,transitionDuration:f});return gpe("keydown",p=>{var m;p.key==="Escape"&&i&&n&&((m=p.target)==null?void 0:m.getAttribute("data-mantine-stop-propagation"))!=="true"&&s()},{capture:!0}),fpe({opened:n,shouldReturnFocus:r&&o}),{_id:a,titleMounted:l,bodyMounted:c,shouldLockScroll:h,setTitleMounted:u,setBodyMounted:d}}const PU=D.forwardRef(({keepMounted:e,opened:t,onClose:n,id:r,transitionProps:i,onExitTransitionEnd:s,onEnterTransitionEnd:o,trapFocus:a,closeOnEscape:l,returnFocus:u,closeOnClickOutside:c,withinPortal:d,portalProps:f,lockScroll:h,children:p,zIndex:m,shadow:g,padding:b,__vars:v,unstyled:x,removeScrollProps:E,..._},C)=>{const{_id:S,titleMounted:k,bodyMounted:R,shouldLockScroll:O,setTitleMounted:N,setBodyMounted:L}=A5e({id:r,transitionProps:i,opened:t,trapFocus:a,closeOnEscape:l,onClose:n,returnFocus:u}),{key:$,...B}=E||{};return T.jsx(M0,{...f,withinPortal:d,children:T.jsx(C5e,{value:{opened:t,onClose:n,closeOnClickOutside:c,onExitTransitionEnd:s,onEnterTransitionEnd:o,transitionProps:{...i,keepMounted:e},getTitleId:()=>`${S}-title`,getBodyId:()=>`${S}-body`,titleMounted:k,bodyMounted:R,setTitleMounted:N,setBodyMounted:L,trapFocus:a,closeOnEscape:l,zIndex:m,unstyled:x},children:T.jsx(yw,{enabled:O&&h,...B,children:T.jsx(Se,{ref:C,..._,__vars:{...v,"--mb-z-index":(m||Gs("modal")).toString(),"--mb-shadow":eU(g),"--mb-padding":Wi(b)},children:p})},$)})})});PU.displayName="@mantine/core/ModalBase";function k5e(){const e=$p();return D.useEffect(()=>(e.setBodyMounted(!0),()=>e.setBodyMounted(!1)),[]),e.getBodyId()}var Ew={title:"m_615af6c9",header:"m_b5489c3c",inner:"m_60c222c7",content:"m_fd1ab0aa",close:"m_606cb269",body:"m_5df29311"};const NU=D.forwardRef(({className:e,...t},n)=>{const r=k5e(),i=$p();return T.jsx(Se,{ref:n,...t,id:r,className:Mi({[Ew.body]:!i.unstyled},e)})});NU.displayName="@mantine/core/ModalBaseBody";const OU=D.forwardRef(({className:e,onClick:t,...n},r)=>{const i=$p();return T.jsx(pp,{ref:r,...n,onClick:s=>{i.onClose(),t==null||t(s)},className:Mi({[Ew.close]:!i.unstyled},e),unstyled:i.unstyled})});OU.displayName="@mantine/core/ModalBaseCloseButton";const $U=D.forwardRef(({transitionProps:e,className:t,innerProps:n,onKeyDown:r,style:i,...s},o)=>{const a=$p();return T.jsx(jf,{mounted:a.opened,transition:"pop",...a.transitionProps,onExited:()=>{var l,u,c;(l=a.onExitTransitionEnd)==null||l.call(a),(c=(u=a.transitionProps)==null?void 0:u.onExited)==null||c.call(u)},onEntered:()=>{var l,u,c;(l=a.onEnterTransitionEnd)==null||l.call(a),(c=(u=a.transitionProps)==null?void 0:u.onEntered)==null||c.call(u)},...e,children:l=>T.jsx("div",{...n,className:Mi({[Ew.inner]:!a.unstyled},n.className),children:T.jsx(RC,{active:a.opened&&a.trapFocus,innerRef:o,children:T.jsx(vx,{...s,component:"section",role:"dialog",tabIndex:-1,"aria-modal":!0,"aria-describedby":a.bodyMounted?a.getBodyId():void 0,"aria-labelledby":a.titleMounted?a.getTitleId():void 0,style:[i,l],className:Mi({[Ew.content]:!a.unstyled},t),unstyled:a.unstyled,children:s.children})})})})});$U.displayName="@mantine/core/ModalBaseContent";const MU=D.forwardRef(({className:e,...t},n)=>{const r=$p();return T.jsx(Se,{component:"header",ref:n,className:Mi({[Ew.header]:!r.unstyled},e),...t})});MU.displayName="@mantine/core/ModalBaseHeader";const I5e={duration:200,timingFunction:"ease",transition:"fade"};function R5e(e){const t=$p();return{...I5e,...t.transitionProps,...e}}const LU=D.forwardRef(({onClick:e,transitionProps:t,style:n,visible:r,...i},s)=>{const o=$p(),a=R5e(t);return T.jsx(jf,{mounted:r!==void 0?r:o.opened,...a,transition:"fade",children:l=>T.jsx(xw,{ref:s,fixed:!0,style:[n,l],zIndex:o.zIndex,unstyled:o.unstyled,onClick:u=>{e==null||e(u),o.closeOnClickOutside&&o.onClose()},...i})})});LU.displayName="@mantine/core/ModalBaseOverlay";function D5e(){const e=$p();return D.useEffect(()=>(e.setTitleMounted(!0),()=>e.setTitleMounted(!1)),[]),e.getTitleId()}const FU=D.forwardRef(({className:e,...t},n)=>{const r=D5e(),i=$p();return T.jsx(Se,{component:"h2",ref:n,className:Mi({[Ew.title]:!i.unstyled},e),...t,id:r})});FU.displayName="@mantine/core/ModalBaseTitle";function Tme({children:e}){return T.jsx(T.Fragment,{children:e})}const[P5e,N5e]=Pp({size:"sm"}),O5e={},Cme=Ze((e,t)=>{const n=$e("InputClearButton",O5e,e),{size:r,variant:i,vars:s,classNames:o,styles:a,...l}=n,u=N5e(),{resolvedClassNames:c,resolvedStyles:d}=Tv({classNames:o,styles:a,props:n});return T.jsx(pp,{variant:i||"transparent",ref:t,size:r||(u==null?void 0:u.size)||"sm",classNames:c,styles:d,__staticSelector:"InputClearButton",...l})});Cme.displayName="@mantine/core/InputClearButton";const[$5e,_x]=Pp({offsetBottom:!1,offsetTop:!1,describedBy:void 0,getStyles:null,inputId:void 0,labelId:void 0});var Uu={wrapper:"m_6c018570",input:"m_8fb7ebe7",section:"m_82577fc2",placeholder:"m_88bacfd0",root:"m_46b77525",label:"m_8fdc1311",required:"m_78a94662",error:"m_8f816625",description:"m_fe47ce59"};const Yee={},M5e=(e,{size:t})=>({description:{"--input-description-size":t===void 0?void 0:`calc(${wo(t)} - ${Oe(2)})`}}),tO=Ze((e,t)=>{const n=$e("InputDescription",Yee,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,size:u,__staticSelector:c,__inheritStyles:d=!0,variant:f,...h}=$e("InputDescription",Yee,n),p=_x(),m=Nt({name:["InputWrapper",c],props:n,classes:Uu,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"description",vars:l,varsResolver:M5e}),g=d&&(p==null?void 0:p.getStyles)||m;return T.jsx(Se,{component:"p",ref:t,variant:f,size:u,...g("description",p!=null&&p.getStyles?{className:i,style:s}:void 0),...h})});tO.classes=Uu;tO.displayName="@mantine/core/InputDescription";const L5e={},F5e=(e,{size:t})=>({error:{"--input-error-size":t===void 0?void 0:`calc(${wo(t)} - ${Oe(2)})`}}),nO=Ze((e,t)=>{const n=$e("InputError",L5e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,size:u,__staticSelector:c,__inheritStyles:d=!0,variant:f,...h}=n,p=Nt({name:["InputWrapper",c],props:n,classes:Uu,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"error",vars:l,varsResolver:F5e}),m=_x(),g=d&&(m==null?void 0:m.getStyles)||p;return T.jsx(Se,{component:"p",ref:t,variant:f,size:u,...g("error",m!=null&&m.getStyles?{className:i,style:s}:void 0),...h})});nO.classes=Uu;nO.displayName="@mantine/core/InputError";const Kee={labelElement:"label"},j5e=(e,{size:t})=>({label:{"--input-label-size":wo(t),"--input-asterisk-color":void 0}}),rO=Ze((e,t)=>{const n=$e("InputLabel",Kee,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,labelElement:u,size:c,required:d,htmlFor:f,onMouseDown:h,children:p,__staticSelector:m,variant:g,mod:b,...v}=$e("InputLabel",Kee,n),x=Nt({name:["InputWrapper",m],props:n,classes:Uu,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"label",vars:l,varsResolver:j5e}),E=_x(),_=(E==null?void 0:E.getStyles)||x;return T.jsxs(Se,{..._("label",E!=null&&E.getStyles?{className:i,style:s}:void 0),component:u,variant:g,size:c,ref:t,htmlFor:u==="label"?f:void 0,mod:[{required:d},b],onMouseDown:C=>{h==null||h(C),!C.defaultPrevented&&C.detail>1&&C.preventDefault()},...v,children:[p,d&&T.jsx("span",{..._("required"),"aria-hidden":!0,children:" *"})]})});rO.classes=Uu;rO.displayName="@mantine/core/InputLabel";const Xee={},jU=Ze((e,t)=>{const n=$e("InputPlaceholder",Xee,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,__staticSelector:u,variant:c,error:d,mod:f,...h}=$e("InputPlaceholder",Xee,n),p=Nt({name:["InputPlaceholder",u],props:n,classes:Uu,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"placeholder"});return T.jsx(Se,{...p("placeholder"),mod:[{error:!!d},f],component:"span",variant:c,ref:t,...h})});jU.classes=Uu;jU.displayName="@mantine/core/InputPlaceholder";function B5e(e,{hasDescription:t,hasError:n}){const r=e.findIndex(l=>l==="input"),i=e.slice(0,r),s=e.slice(r+1),o=t&&i.includes("description")||n&&i.includes("error");return{offsetBottom:t&&s.includes("description")||n&&s.includes("error"),offsetTop:o}}const z5e={labelElement:"label",inputContainer:e=>e,inputWrapperOrder:["label","description","input","error"]},U5e=(e,{size:t})=>({label:{"--input-label-size":wo(t),"--input-asterisk-color":void 0},error:{"--input-error-size":t===void 0?void 0:`calc(${wo(t)} - ${Oe(2)})`},description:{"--input-description-size":t===void 0?void 0:`calc(${wo(t)} - ${Oe(2)})`}}),BU=Ze((e,t)=>{const n=$e("InputWrapper",z5e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,size:u,variant:c,__staticSelector:d,inputContainer:f,inputWrapperOrder:h,label:p,error:m,description:g,labelProps:b,descriptionProps:v,errorProps:x,labelElement:E,children:_,withAsterisk:C,id:S,required:k,__stylesApiProps:R,mod:O,...N}=n,L=Nt({name:["InputWrapper",d],props:R||n,classes:Uu,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:U5e}),$={size:u,variant:c,__staticSelector:d},B=Ia(S),H=typeof C=="boolean"?C:k,Y=(x==null?void 0:x.id)||`${B}-error`,J=(v==null?void 0:v.id)||`${B}-description`,K=B,Z=!!m&&typeof m!="boolean",U=!!g,j=`${Z?Y:""} ${U?J:""}`,V=j.trim().length>0?j.trim():void 0,z=(b==null?void 0:b.id)||`${B}-label`,G=p&&T.jsx(rO,{labelElement:E,id:z,htmlFor:K,required:H,...$,...b,children:p},"label"),Q=U&&T.jsx(tO,{...v,...$,size:(v==null?void 0:v.size)||$.size,id:(v==null?void 0:v.id)||J,children:g},"description"),ie=T.jsx(D.Fragment,{children:f(_)},"input"),me=Z&&D.createElement(nO,{...x,...$,size:(x==null?void 0:x.size)||$.size,key:"error",id:(x==null?void 0:x.id)||Y},m),ae=h.map(fe=>{switch(fe){case"label":return G;case"input":return ie;case"description":return Q;case"error":return me;default:return null}});return T.jsx($5e,{value:{getStyles:L,describedBy:V,inputId:K,labelId:z,...B5e(h,{hasDescription:U,hasError:Z})},children:T.jsx(Se,{ref:t,variant:c,size:u,mod:[{error:!!m},O],...L("root"),...N,children:ae})})});BU.classes=Uu;BU.displayName="@mantine/core/InputWrapper";const q5e={variant:"default",leftSectionPointerEvents:"none",rightSectionPointerEvents:"none",withAria:!0,withErrorStyles:!0},H5e=(e,t,n)=>({wrapper:{"--input-margin-top":n.offsetTop?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-margin-bottom":n.offsetBottom?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-height":cn(t.size,"input-height"),"--input-fz":wo(t.size),"--input-radius":t.radius===void 0?void 0:Tr(t.radius),"--input-left-section-width":t.leftSectionWidth!==void 0?Oe(t.leftSectionWidth):void 0,"--input-right-section-width":t.rightSectionWidth!==void 0?Oe(t.rightSectionWidth):void 0,"--input-padding-y":t.multiline?cn(t.size,"input-padding-y"):void 0,"--input-left-section-pointer-events":t.leftSectionPointerEvents,"--input-right-section-pointer-events":t.rightSectionPointerEvents}}),Dr=Ki((e,t)=>{const n=$e("Input",q5e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,required:l,__staticSelector:u,__stylesApiProps:c,size:d,wrapperProps:f,error:h,disabled:p,leftSection:m,leftSectionProps:g,leftSectionWidth:b,rightSection:v,rightSectionProps:x,rightSectionWidth:E,rightSectionPointerEvents:_,leftSectionPointerEvents:C,variant:S,vars:k,pointer:R,multiline:O,radius:N,id:L,withAria:$,withErrorStyles:B,mod:H,inputSize:Y,__clearSection:J,__clearable:K,__defaultRightSection:Z,...U}=n,{styleProps:j,rest:V}=Sv(U),z=_x(),G={offsetBottom:z==null?void 0:z.offsetBottom,offsetTop:z==null?void 0:z.offsetTop},Q=Nt({name:["Input",u],props:c||n,classes:Uu,className:i,style:s,classNames:r,styles:o,unstyled:a,stylesCtx:G,rootSelector:"wrapper",vars:k,varsResolver:H5e}),ie=$?{required:l,disabled:p,"aria-invalid":!!h,"aria-describedby":z==null?void 0:z.describedBy,id:(z==null?void 0:z.inputId)||L}:{},me=v||K&&J||Z;return T.jsx(P5e,{value:{size:d||"sm"},children:T.jsxs(Se,{...Q("wrapper"),...j,...f,mod:[{error:!!h&&B,pointer:R,disabled:p,multiline:O,"data-with-right-section":!!v,"data-with-left-section":!!m},H],variant:S,size:d,children:[m&&T.jsx("div",{...g,"data-position":"left",...Q("section",{className:g==null?void 0:g.className,style:g==null?void 0:g.style}),children:m}),T.jsx(Se,{component:"input",...V,...ie,ref:t,required:l,mod:{disabled:p,error:!!h&&B},variant:S,__size:Y,...Q("input")}),me&&T.jsx("div",{...x,"data-position":"right",...Q("section",{className:x==null?void 0:x.className,style:x==null?void 0:x.style}),children:me})]})})});Dr.classes=Uu;Dr.Wrapper=BU;Dr.Label=rO;Dr.Error=nO;Dr.Description=tO;Dr.Placeholder=jU;Dr.ClearButton=Cme;Dr.displayName="@mantine/core/Input";function W5e(e,t,n){const r=$e(e,t,n),{label:i,description:s,error:o,required:a,classNames:l,styles:u,className:c,unstyled:d,__staticSelector:f,__stylesApiProps:h,errorProps:p,labelProps:m,descriptionProps:g,wrapperProps:b,id:v,size:x,style:E,inputContainer:_,inputWrapperOrder:C,withAsterisk:S,variant:k,vars:R,mod:O,...N}=r,{styleProps:L,rest:$}=Sv(N),B={label:i,description:s,error:o,required:a,classNames:l,className:c,__staticSelector:f,__stylesApiProps:h||r,errorProps:p,labelProps:m,descriptionProps:g,unstyled:d,styles:u,size:x,style:E,inputContainer:_,inputWrapperOrder:C,withAsterisk:S,variant:k,id:v,mod:O,...b};return{...$,classNames:l,styles:u,unstyled:d,wrapperProps:{...B,...L},inputProps:{required:a,classNames:l,styles:u,unstyled:d,size:x,__staticSelector:f,__stylesApiProps:h||r,error:o,variant:k,id:v}}}const V5e={__staticSelector:"InputBase",withAria:!0},bl=Ki((e,t)=>{const{inputProps:n,wrapperProps:r,...i}=W5e("InputBase",V5e,e);return T.jsx(Dr.Wrapper,{...r,children:T.jsx(Dr,{...n,...i,ref:t})})});bl.classes={...Dr.classes,...Dr.Wrapper.classes};bl.displayName="@mantine/core/InputBase";const G5e={gap:{type:"spacing",property:"gap"},rowGap:{type:"spacing",property:"rowGap"},columnGap:{type:"spacing",property:"columnGap"},align:{type:"identity",property:"alignItems"},justify:{type:"identity",property:"justifyContent"},wrap:{type:"identity",property:"flexWrap"},direction:{type:"identity",property:"flexDirection"}};var Sme={root:"m_8bffd616"};const Y5e={},Dt=Ki((e,t)=>{const n=$e("Flex",Y5e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,gap:u,rowGap:c,columnGap:d,align:f,justify:h,wrap:p,direction:m,...g}=n,b=Nt({name:"Flex",classes:Sme,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l}),v=Yi(),x=kC(),E=Tpe({styleProps:{gap:u,rowGap:c,columnGap:d,align:f,justify:h,wrap:p,direction:m},theme:v,data:G5e});return T.jsxs(T.Fragment,{children:[E.hasResponsiveStyles&&T.jsx(Cv,{selector:`.${x}`,styles:E.styles,media:E.media}),T.jsx(Se,{ref:t,...b("root",{className:x,style:O0(E.inlineStyles)}),...g})]})});Dt.classes=Sme;Dt.displayName="@mantine/core/Flex";const[K5e,zU]=ps("Accordion component was not found in the tree");function iO({style:e,size:t=16,...n}){return T.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...e,width:Oe(t),height:Oe(t),display:"block"},...n,children:T.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}iO.displayName="@mantine/core/AccordionChevron";const[X5e,Ame]=ps("Accordion.Item component was not found in the tree");var DC={root:"m_9bdbb667",panel:"m_df78851f",content:"m_4ba554d4",itemTitle:"m_8fa820a0",control:"m_4ba585b8","control--default":"m_6939a5e9","control--contained":"m_4271d21b",label:"m_df3ffa0f",chevron:"m_3f35ae96",icon:"m_9bd771fe",item:"m_9bd7b098","item--default":"m_fe19b709","item--contained":"m_1f921b3b","item--filled":"m_2cdf939a","item--separated":"m_9f59b069"};const Q5e={},UU=Ze((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,chevron:a,icon:l,onClick:u,onKeyDown:c,children:d,disabled:f,mod:h,...p}=$e("AccordionControl",Q5e,e),{value:m}=Ame(),g=zU(),b=g.isItemActive(m),v=typeof g.order=="number",x=`h${g.order}`,E=T.jsxs(ul,{...p,...g.getStyles("control",{className:r,classNames:n,style:i,styles:s,variant:g.variant}),unstyled:g.unstyled,mod:["accordion-control",{active:b,"chevron-position":g.chevronPosition,disabled:f},h],ref:t,onClick:_=>{u==null||u(_),g.onChange(m)},type:"button",disabled:f,"aria-expanded":b,"aria-controls":g.getRegionId(m),id:g.getControlId(m),onKeyDown:Zz({siblingSelector:"[data-accordion-control]",parentSelector:"[data-accordion]",activateOnFocus:!1,loop:g.loop,orientation:"vertical",onKeyDown:c}),children:[T.jsx(Se,{component:"span",mod:{rotate:!g.disableChevronRotation&&b,position:g.chevronPosition},...g.getStyles("chevron",{classNames:n,styles:s}),children:a||g.chevron}),T.jsx("span",{...g.getStyles("label",{classNames:n,styles:s}),children:d}),l&&T.jsx(Se,{component:"span",mod:{"chevron-position":g.chevronPosition},...g.getStyles("icon",{classNames:n,styles:s}),children:l})]});return v?T.jsx(x,{...g.getStyles("itemTitle",{classNames:n,styles:s}),children:E}):E});UU.displayName="@mantine/core/AccordionControl";UU.classes=DC;const J5e={},qU=Ze((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,value:a,mod:l,...u}=$e("AccordionItem",J5e,e),c=zU();return T.jsx(X5e,{value:{value:a},children:T.jsx(Se,{ref:t,mod:[{active:c.isItemActive(a)},l],...c.getStyles("item",{className:r,classNames:n,styles:s,style:i,variant:c.variant}),...u})})});qU.displayName="@mantine/core/AccordionItem";qU.classes=DC;const Z5e={},HU=Ze((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,children:a,...l}=$e("AccordionPanel",Z5e,e),{value:u}=Ame(),c=zU();return T.jsx(XN,{ref:t,...c.getStyles("panel",{className:r,classNames:n,style:i,styles:s}),...l,in:c.isItemActive(u),transitionDuration:c.transitionDuration??200,role:"region",id:c.getRegionId(u),"aria-labelledby":c.getControlId(u),children:T.jsx("div",{...c.getStyles("content",{classNames:n,styles:s}),children:a})})});HU.displayName="@mantine/core/AccordionPanel";HU.classes=DC;const e8e={multiple:!1,disableChevronRotation:!1,chevronPosition:"right",variant:"default",chevron:T.jsx(iO,{})},t8e=(e,{transitionDuration:t,chevronSize:n,radius:r})=>({root:{"--accordion-transition-duration":t===void 0?void 0:`${t}ms`,"--accordion-chevron-size":n===void 0?void 0:Oe(n),"--accordion-radius":r===void 0?void 0:Tr(r)}});function zo(e){const t=$e("Accordion",e8e,e),{classNames:n,className:r,style:i,styles:s,unstyled:o,vars:a,children:l,multiple:u,value:c,defaultValue:d,onChange:f,id:h,loop:p,transitionDuration:m,disableChevronRotation:g,chevronPosition:b,chevronSize:v,order:x,chevron:E,variant:_,radius:C,...S}=t,k=Ia(h),[R,O]=Hs({value:c,defaultValue:d,finalValue:u?[]:null,onChange:f}),N=B=>Array.isArray(R)?R.includes(B):B===R,L=B=>{const H=Array.isArray(R)?R.includes(B)?R.filter(Y=>Y!==B):[...R,B]:B===R?null:B;O(H)},$=Nt({name:"Accordion",classes:DC,props:t,className:r,style:i,classNames:n,styles:s,unstyled:o,vars:a,varsResolver:t8e});return T.jsx(K5e,{value:{isItemActive:N,onChange:L,getControlId:uD(`${k}-control`,"Accordion.Item component was rendered with invalid value or without value"),getRegionId:uD(`${k}-panel`,"Accordion.Item component was rendered with invalid value or without value"),transitionDuration:m,disableChevronRotation:g,chevronPosition:b,order:x,chevron:E,loop:p,getStyles:$,variant:_,unstyled:o},children:T.jsx(Se,{...$("root"),id:k,...S,variant:_,"data-accordion":!0,children:l})})}const n8e=e=>e;zo.extend=n8e;zo.withProps=u4e(zo);zo.classes=DC;zo.displayName="@mantine/core/Accordion";zo.Item=qU;zo.Panel=HU;zo.Control=UU;zo.Chevron=iO;var kme={root:"m_7f854edf"};const r8e={position:{bottom:0,right:0},zIndex:Gs("modal"),withinPortal:!0},i8e=(e,{zIndex:t,position:n})=>({root:{"--affix-z-index":t==null?void 0:t.toString(),"--affix-top":Oe(n==null?void 0:n.top),"--affix-left":Oe(n==null?void 0:n.left),"--affix-bottom":Oe(n==null?void 0:n.bottom),"--affix-right":Oe(n==null?void 0:n.right)}}),WU=Ze((e,t)=>{const n=$e("Affix",r8e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,portalProps:u,zIndex:c,withinPortal:d,position:f,...h}=n,p=Nt({name:"Affix",classes:kme,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:i8e});return T.jsx(M0,{...u,withinPortal:d,children:T.jsx(Se,{ref:t,...p("root"),...h})})});WU.classes=kme;WU.displayName="@mantine/core/Affix";var Ime={root:"m_66836ed3",wrapper:"m_a5d60502",body:"m_667c2793",title:"m_6a03f287",label:"m_698f4f23",icon:"m_667f2a6a",message:"m_7fa78076",closeButton:"m_87f54839"};const s8e={},o8e=(e,{radius:t,color:n,variant:r,autoContrast:i})=>{const s=e.variantColorResolver({color:n||e.primaryColor,theme:e,variant:r||"light",autoContrast:i});return{root:{"--alert-radius":t===void 0?void 0:Tr(t),"--alert-bg":n||r?s.background:void 0,"--alert-color":s.color,"--alert-bd":n||r?s.border:void 0}}},Zh=Ze((e,t)=>{const n=$e("Alert",s8e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,radius:u,color:c,title:d,children:f,id:h,icon:p,withCloseButton:m,onClose:g,closeButtonLabel:b,variant:v,autoContrast:x,...E}=n,_=Nt({name:"Alert",classes:Ime,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:o8e}),C=Ia(h),S=d&&`${C}-title`||void 0,k=`${C}-body`;return T.jsx(Se,{id:C,..._("root",{variant:v}),variant:v,ref:t,...E,role:"alert","aria-describedby":k,"aria-labelledby":S,children:T.jsxs("div",{..._("wrapper"),children:[p&&T.jsx("div",{..._("icon"),children:p}),T.jsxs("div",{..._("body"),children:[d&&T.jsx("div",{..._("title"),"data-with-close-button":m||void 0,children:T.jsx("span",{id:S,..._("label"),children:d})}),f&&T.jsx("div",{id:k,..._("message"),"data-variant":v,children:f})]}),m&&T.jsx(pp,{..._("closeButton"),onClick:g,variant:"transparent",size:16,iconSize:16,"aria-label":b,unstyled:a})]})})});Zh.classes=Ime;Zh.displayName="@mantine/core/Alert";var Rme={root:"m_b6d8b162"};function a8e(e){if(e==="start")return"start";if(e==="end"||e)return"end"}const l8e={inherit:!1},u8e=(e,{variant:t,lineClamp:n,gradient:r,size:i,color:s})=>({root:{"--text-fz":wo(i),"--text-lh":dpe(i),"--text-gradient":t==="gradient"?A9(r,e):void 0,"--text-line-clamp":typeof n=="number"?n.toString():void 0,"--text-color":s?$r(s,e):void 0}}),Ve=Ki((e,t)=>{const n=$e("Text",l8e,e),{lineClamp:r,truncate:i,inline:s,inherit:o,gradient:a,span:l,__staticSelector:u,vars:c,className:d,style:f,classNames:h,styles:p,unstyled:m,variant:g,mod:b,size:v,...x}=n,E=Nt({name:["Text",u],props:n,classes:Rme,className:d,style:f,classNames:h,styles:p,unstyled:m,vars:c,varsResolver:u8e});return T.jsx(Se,{...E("root",{focusable:!0}),ref:t,component:l?"span":"p",variant:g,mod:[{"data-truncate":a8e(i),"data-line-clamp":typeof r=="number","data-inline":s,"data-inherit":o},b],size:v,...x})});Ve.classes=Rme;Ve.displayName="@mantine/core/Text";var Dme={root:"m_849cf0da"};const c8e={underline:"hover"},kv=Ki((e,t)=>{const{underline:n,className:r,unstyled:i,mod:s,...o}=$e("Anchor",c8e,e);return T.jsx(Ve,{component:"a",ref:t,className:Mi({[Dme.root]:!i},r),...o,mod:[{underline:n},s],__staticSelector:"Anchor",unstyled:i})});kv.classes=Dme;kv.displayName="@mantine/core/Anchor";const[d8e,Tx]=ps("AppShell was not found in tree");var F0={root:"m_89ab340",navbar:"m_45252eee",aside:"m_9cdde9a",header:"m_3b16f56b",main:"m_8983817",footer:"m_3840c879",section:"m_6dcfc7c7"};const f8e={},VU=Ze((e,t)=>{const n=$e("AppShellAside",f8e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,withBorder:u,zIndex:c,mod:d,...f}=n,h=Tx();return h.disabled?null:T.jsx(Se,{component:"aside",ref:t,mod:[{"with-border":u??h.withBorder},d],...h.getStyles("aside",{className:i,classNames:r,styles:o,style:s}),...f,__vars:{"--app-shell-aside-z-index":`calc(${c??h.zIndex} + 1)`}})});VU.classes=F0;VU.displayName="@mantine/core/AppShellAside";const h8e={},GU=Ze((e,t)=>{var p;const n=$e("AppShellFooter",h8e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,withBorder:u,zIndex:c,mod:d,...f}=n,h=Tx();return h.disabled?null:T.jsx(Se,{component:"footer",ref:t,mod:[{"with-border":u??h.withBorder},d],...h.getStyles("footer",{className:Mi({[yw.classNames.zeroRight]:h.offsetScrollbars},i),classNames:r,styles:o,style:s}),...f,__vars:{"--app-shell-footer-z-index":(p=c??h.zIndex)==null?void 0:p.toString()}})});GU.classes=F0;GU.displayName="@mantine/core/AppShellFooter";const p8e={},YU=Ze((e,t)=>{var p;const n=$e("AppShellHeader",p8e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,withBorder:u,zIndex:c,mod:d,...f}=n,h=Tx();return h.disabled?null:T.jsx(Se,{component:"header",ref:t,mod:[{"with-border":u??h.withBorder},d],...h.getStyles("header",{className:Mi({[yw.classNames.zeroRight]:h.offsetScrollbars},i),classNames:r,styles:o,style:s}),...f,__vars:{"--app-shell-header-z-index":(p=c??h.zIndex)==null?void 0:p.toString()}})});YU.classes=F0;YU.displayName="@mantine/core/AppShellHeader";const m8e={},KU=Ze((e,t)=>{const n=$e("AppShellMain",m8e,e),{classNames:r,className:i,style:s,styles:o,vars:a,...l}=n,u=Tx();return T.jsx(Se,{component:"main",ref:t,...u.getStyles("main",{className:i,style:s,classNames:r,styles:o}),...l})});KU.classes=F0;KU.displayName="@mantine/core/AppShellMain";function PC(e){return typeof e=="object"?e.base:e}function NC(e){const t=typeof e=="object"&&e!==null&&typeof e.base<"u"&&Object.keys(e).length===1;return typeof e=="number"||typeof e=="string"||t}function OC(e){return!(typeof e!="object"||e===null||Object.keys(e).length===1&&"base"in e)}function g8e({baseStyles:e,minMediaStyles:t,maxMediaStyles:n,aside:r,theme:i}){var l,u,c;const s=r==null?void 0:r.width,o="translateX(var(--app-shell-aside-width))",a="translateX(calc(var(--app-shell-aside-width) * -1))";if(r!=null&&r.breakpoint&&!((l=r==null?void 0:r.collapsed)!=null&&l.mobile)&&(n[r==null?void 0:r.breakpoint]=n[r==null?void 0:r.breakpoint]||{},n[r==null?void 0:r.breakpoint]["--app-shell-aside-width"]="100%",n[r==null?void 0:r.breakpoint]["--app-shell-aside-offset"]="0px"),NC(s)){const d=Oe(PC(s));e["--app-shell-aside-width"]=d,e["--app-shell-aside-offset"]=d}if(OC(s)&&(typeof s.base<"u"&&(e["--app-shell-aside-width"]=Oe(s.base),e["--app-shell-aside-offset"]=Oe(s.base)),Or(s).forEach(d=>{d!=="base"&&(t[d]=t[d]||{},t[d]["--app-shell-aside-width"]=Oe(s[d]),t[d]["--app-shell-aside-offset"]=Oe(s[d]))})),(u=r==null?void 0:r.collapsed)!=null&&u.desktop){const d=r.breakpoint;t[d]=t[d]||{},t[d]["--app-shell-aside-transform"]=o,t[d]["--app-shell-aside-transform-rtl"]=a,t[d]["--app-shell-aside-offset"]="0px !important"}if((c=r==null?void 0:r.collapsed)!=null&&c.mobile){const d=tU(r.breakpoint,i.breakpoints)-.1;n[d]=n[d]||{},n[d]["--app-shell-aside-width"]="100%",n[d]["--app-shell-aside-offset"]="0px",n[d]["--app-shell-aside-transform"]=o,n[d]["--app-shell-aside-transform-rtl"]=a}}function y8e({baseStyles:e,minMediaStyles:t,footer:n}){const r=n==null?void 0:n.height,i="translateY(var(--app-shell-footer-height))",s=(n==null?void 0:n.offset)??!0;if(NC(r)){const o=Oe(PC(r));e["--app-shell-footer-height"]=o,s&&(e["--app-shell-footer-offset"]=o)}OC(r)&&(typeof r.base<"u"&&(e["--app-shell-footer-height"]=Oe(r.base),s&&(e["--app-shell-footer-offset"]=Oe(r.base))),Or(r).forEach(o=>{o!=="base"&&(t[o]=t[o]||{},t[o]["--app-shell-footer-height"]=Oe(r[o]),s&&(t[o]["--app-shell-footer-offset"]=Oe(r[o])))})),n!=null&&n.collapsed&&(e["--app-shell-footer-transform"]=i,e["--app-shell-footer-offset"]="0px !important")}function v8e({baseStyles:e,minMediaStyles:t,header:n}){const r=n==null?void 0:n.height,i="translateY(calc(var(--app-shell-header-height) * -1))",s=(n==null?void 0:n.offset)??!0;if(NC(r)){const o=Oe(PC(r));e["--app-shell-header-height"]=o,s&&(e["--app-shell-header-offset"]=o)}OC(r)&&(typeof r.base<"u"&&(e["--app-shell-header-height"]=Oe(r.base),s&&(e["--app-shell-header-offset"]=Oe(r.base))),Or(r).forEach(o=>{o!=="base"&&(t[o]=t[o]||{},t[o]["--app-shell-header-height"]=Oe(r[o]),s&&(t[o]["--app-shell-header-offset"]=Oe(r[o])))})),n!=null&&n.collapsed&&(e["--app-shell-header-transform"]=i,e["--app-shell-header-offset"]="0px !important")}function b8e({baseStyles:e,minMediaStyles:t,maxMediaStyles:n,navbar:r,theme:i}){var l,u,c;const s=r==null?void 0:r.width,o="translateX(calc(var(--app-shell-navbar-width) * -1))",a="translateX(var(--app-shell-navbar-width))";if(r!=null&&r.breakpoint&&!((l=r==null?void 0:r.collapsed)!=null&&l.mobile)&&(n[r==null?void 0:r.breakpoint]=n[r==null?void 0:r.breakpoint]||{},n[r==null?void 0:r.breakpoint]["--app-shell-navbar-width"]="100%",n[r==null?void 0:r.breakpoint]["--app-shell-navbar-offset"]="0px"),NC(s)){const d=Oe(PC(s));e["--app-shell-navbar-width"]=d,e["--app-shell-navbar-offset"]=d}if(OC(s)&&(typeof s.base<"u"&&(e["--app-shell-navbar-width"]=Oe(s.base),e["--app-shell-navbar-offset"]=Oe(s.base)),Or(s).forEach(d=>{d!=="base"&&(t[d]=t[d]||{},t[d]["--app-shell-navbar-width"]=Oe(s[d]),t[d]["--app-shell-navbar-offset"]=Oe(s[d]))})),(u=r==null?void 0:r.collapsed)!=null&&u.desktop){const d=r.breakpoint;t[d]=t[d]||{},t[d]["--app-shell-navbar-transform"]=o,t[d]["--app-shell-navbar-transform-rtl"]=a,t[d]["--app-shell-navbar-offset"]="0px !important"}if((c=r==null?void 0:r.collapsed)!=null&&c.mobile){const d=tU(r.breakpoint,i.breakpoints)-.1;n[d]=n[d]||{},n[d]["--app-shell-navbar-width"]="100%",n[d]["--app-shell-navbar-offset"]="0px",n[d]["--app-shell-navbar-transform"]=o,n[d]["--app-shell-navbar-transform-rtl"]=a}}function q8(e){return Number(e)===0?"0px":Wi(e)}function w8e({padding:e,baseStyles:t,minMediaStyles:n}){NC(e)&&(t["--app-shell-padding"]=q8(PC(e))),OC(e)&&(e.base&&(t["--app-shell-padding"]=q8(e.base)),Or(e).forEach(r=>{r!=="base"&&(n[r]=n[r]||{},n[r]["--app-shell-padding"]=q8(e[r]))}))}function x8e({navbar:e,header:t,footer:n,aside:r,padding:i,theme:s}){const o={},a={},l={};b8e({baseStyles:l,minMediaStyles:o,maxMediaStyles:a,navbar:e,theme:s}),g8e({baseStyles:l,minMediaStyles:o,maxMediaStyles:a,aside:r,theme:s}),v8e({baseStyles:l,minMediaStyles:o,header:t}),y8e({baseStyles:l,minMediaStyles:o,footer:n}),w8e({baseStyles:l,minMediaStyles:o,padding:i});const u=vT(Or(o),s.breakpoints).map(f=>({query:`(min-width: ${lD(f.px)})`,styles:o[f.value]})),c=vT(Or(a),s.breakpoints).map(f=>({query:`(max-width: ${lD(f.px)})`,styles:a[f.value]})),d=[...u,...c];return{baseStyles:l,media:d}}function E8e({navbar:e,header:t,aside:n,footer:r,padding:i}){const s=Yi(),o=$0(),{media:a,baseStyles:l}=x8e({navbar:e,header:t,footer:r,aside:n,padding:i,theme:s});return T.jsx(Cv,{media:a,styles:l,selector:o.cssVariablesSelector})}const _8e={},XU=Ze((e,t)=>{const n=$e("AppShellNavbar",_8e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,withBorder:u,zIndex:c,mod:d,...f}=n,h=Tx();return h.disabled?null:T.jsx(Se,{component:"nav",ref:t,mod:[{"with-border":u??h.withBorder},d],...h.getStyles("navbar",{className:i,classNames:r,styles:o,style:s}),...f,__vars:{"--app-shell-navbar-z-index":`calc(${c??h.zIndex} + 1)`}})});XU.classes=F0;XU.displayName="@mantine/core/AppShellNavbar";const T8e={},QU=Ki((e,t)=>{const n=$e("AppShellSection",T8e,e),{classNames:r,className:i,style:s,styles:o,vars:a,grow:l,mod:u,...c}=n,d=Tx();return T.jsx(Se,{ref:t,mod:[{grow:l},u],...d.getStyles("section",{className:i,style:s,classNames:r,styles:o}),...c})});QU.classes=F0;QU.displayName="@mantine/core/AppShellSection";function C8e({transitionDuration:e,disabled:t}){const[n,r]=D.useState(!0),i=D.useRef(-1),s=D.useRef(-1);return gpe("resize",()=>{r(!0),clearTimeout(i.current),i.current=window.setTimeout(()=>D.startTransition(()=>{r(!1)}),200)}),Ev(()=>{r(!0),clearTimeout(s.current),s.current=window.setTimeout(()=>D.startTransition(()=>{r(!1)}),e||0)},[t,e]),n}const S8e={withBorder:!0,padding:0,transitionDuration:200,transitionTimingFunction:"ease",zIndex:Gs("app")},A8e=(e,{transitionDuration:t,transitionTimingFunction:n})=>({root:{"--app-shell-transition-duration":`${t}ms`,"--app-shell-transition-timing-function":n}}),Ar=Ze((e,t)=>{const n=$e("AppShell",S8e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,navbar:u,withBorder:c,padding:d,transitionDuration:f,transitionTimingFunction:h,header:p,zIndex:m,layout:g,disabled:b,aside:v,footer:x,offsetScrollbars:E=g!=="alt",mod:_,...C}=n,S=Nt({name:"AppShell",classes:F0,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:A8e}),k=C8e({disabled:b,transitionDuration:f});return T.jsxs(d8e,{value:{getStyles:S,withBorder:c,zIndex:m,disabled:b,offsetScrollbars:E},children:[T.jsx(E8e,{navbar:u,header:p,aside:v,footer:x,padding:d}),T.jsx(Se,{ref:t,...S("root"),mod:[{resizing:k,layout:g,disabled:b},_],...C})]})});Ar.classes=F0;Ar.displayName="@mantine/core/AppShell";Ar.Navbar=XU;Ar.Header=YU;Ar.Main=KU;Ar.Aside=VU;Ar.Footer=GU;Ar.Section=QU;function Pme(e){return typeof e=="string"?{value:e,label:e}:"value"in e&&!("label"in e)?{value:e.value,label:e.value,disabled:e.disabled}:typeof e=="number"?{value:e.toString(),label:e.toString()}:"group"in e?{group:e.group,items:e.items.map(t=>Pme(t))}:e}function JU(e){return e?e.map(t=>Pme(t)):[]}function ZU(e){return e.reduce((t,n)=>"group"in n?{...t,...ZU(n.items)}:(t[n.value]=n,t),{})}var cl={dropdown:"m_88b62a41",search:"m_985517d8",options:"m_b2821a6e",option:"m_92253aa5",empty:"m_2530cd1d",header:"m_858f94bd",footer:"m_82b967cb",group:"m_254f3e4f",groupLabel:"m_2bb2e9e5",chevron:"m_2943220b",optionsDropdownOption:"m_390b5f4",optionsDropdownCheckIcon:"m_8ee53fc2"};const k8e={error:null},I8e=(e,{size:t})=>({chevron:{"--combobox-chevron-size":cn(t,"combobox-chevron-size")}}),sO=Ze((e,t)=>{const n=$e("ComboboxChevron",k8e,e),{size:r,error:i,style:s,className:o,classNames:a,styles:l,unstyled:u,vars:c,mod:d,...f}=n,h=Nt({name:"ComboboxChevron",classes:cl,props:n,style:s,className:o,classNames:a,styles:l,unstyled:u,vars:c,varsResolver:I8e,rootSelector:"chevron"});return T.jsx(Se,{component:"svg",...f,...h("chevron"),size:r,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",mod:["combobox-chevron",{error:i},d],ref:t,children:T.jsx("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})});sO.classes=cl;sO.displayName="@mantine/core/ComboboxChevron";const[R8e,qu]=ps("Combobox component was not found in tree"),Nme=D.forwardRef(({size:e,onMouseDown:t,onClick:n,onClear:r,...i},s)=>T.jsx(Dr.ClearButton,{ref:s,tabIndex:-1,"aria-hidden":!0,...i,onMouseDown:o=>{o.preventDefault(),t==null||t(o)},onClick:o=>{r(),n==null||n(o)}}));Nme.displayName="@mantine/core/ComboboxClearButton";const D8e={},eq=Ze((e,t)=>{const{classNames:n,styles:r,className:i,style:s,hidden:o,...a}=$e("ComboboxDropdown",D8e,e),l=qu();return T.jsx(xo.Dropdown,{...a,ref:t,role:"presentation","data-hidden":o||void 0,...l.getStyles("dropdown",{className:i,style:s,classNames:n,styles:r})})});eq.classes=cl;eq.displayName="@mantine/core/ComboboxDropdown";const P8e={refProp:"ref"},Ome=Ze((e,t)=>{const{children:n,refProp:r}=$e("ComboboxDropdownTarget",P8e,e);if(qu(),!Dp(n))throw new Error("Combobox.DropdownTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");return T.jsx(xo.Target,{ref:t,refProp:r,children:n})});Ome.displayName="@mantine/core/ComboboxDropdownTarget";const N8e={},tq=Ze((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=$e("ComboboxEmpty",N8e,e),l=qu();return T.jsx(Se,{ref:t,...l.getStyles("empty",{className:r,classNames:n,styles:s,style:i}),...a})});tq.classes=cl;tq.displayName="@mantine/core/ComboboxEmpty";function nq({onKeyDown:e,withKeyboardNavigation:t,withAriaAttributes:n,withExpandedAttribute:r,targetType:i,autoComplete:s}){const o=qu(),[a,l]=D.useState(null),u=d=>{if(e==null||e(d),!o.readOnly&&t){if(d.nativeEvent.isComposing)return;if(d.nativeEvent.code==="ArrowDown"&&(d.preventDefault(),o.store.dropdownOpened?l(o.store.selectNextOption()):(o.store.openDropdown("keyboard"),l(o.store.selectActiveOption()),o.store.updateSelectedOptionIndex("selected",{scrollIntoView:!0}))),d.nativeEvent.code==="ArrowUp"&&(d.preventDefault(),o.store.dropdownOpened?l(o.store.selectPreviousOption()):(o.store.openDropdown("keyboard"),l(o.store.selectActiveOption()),o.store.updateSelectedOptionIndex("selected",{scrollIntoView:!0}))),d.nativeEvent.code==="Enter"||d.nativeEvent.code==="NumpadEnter"){if(d.nativeEvent.keyCode===229)return;const f=o.store.getSelectedOptionIndex();o.store.dropdownOpened&&f!==-1?(d.preventDefault(),o.store.clickSelectedOption()):i==="button"&&(d.preventDefault(),o.store.openDropdown("keyboard"))}d.nativeEvent.code==="Escape"&&o.store.closeDropdown("keyboard"),d.nativeEvent.code==="Space"&&i==="button"&&(d.preventDefault(),o.store.toggleDropdown("keyboard"))}};return{...n?{"aria-haspopup":"listbox","aria-expanded":r&&!!(o.store.listId&&o.store.dropdownOpened)||void 0,"aria-controls":o.store.dropdownOpened?o.store.listId:void 0,"aria-activedescendant":o.store.dropdownOpened&&a||void 0,autoComplete:s,"data-expanded":o.store.dropdownOpened||void 0,"data-mantine-stop-propagation":o.store.dropdownOpened||void 0}:{},onKeyDown:u}}const O8e={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},$me=Ze((e,t)=>{const{children:n,refProp:r,withKeyboardNavigation:i,withAriaAttributes:s,withExpandedAttribute:o,targetType:a,autoComplete:l,...u}=$e("ComboboxEventsTarget",O8e,e);if(!Dp(n))throw new Error("Combobox.EventsTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const c=qu(),d=nq({targetType:a,withAriaAttributes:s,withKeyboardNavigation:i,withExpandedAttribute:o,onKeyDown:n.props.onKeyDown,autoComplete:l});return D.cloneElement(n,{...d,...u,[r]:ms(t,c.store.targetRef,GN(n))})});$me.displayName="@mantine/core/ComboboxEventsTarget";const $8e={},rq=Ze((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=$e("ComboboxFooter",$8e,e),l=qu();return T.jsx(Se,{ref:t,...l.getStyles("footer",{className:r,classNames:n,style:i,styles:s}),...a,onMouseDown:u=>{u.preventDefault()}})});rq.classes=cl;rq.displayName="@mantine/core/ComboboxFooter";const M8e={},iq=Ze((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,children:a,label:l,...u}=$e("ComboboxGroup",M8e,e),c=qu();return T.jsxs(Se,{ref:t,...c.getStyles("group",{className:r,classNames:n,style:i,styles:s}),...u,children:[l&&T.jsx("div",{...c.getStyles("groupLabel",{classNames:n,styles:s}),children:l}),a]})});iq.classes=cl;iq.displayName="@mantine/core/ComboboxGroup";const L8e={},sq=Ze((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=$e("ComboboxHeader",L8e,e),l=qu();return T.jsx(Se,{ref:t,...l.getStyles("header",{className:r,classNames:n,style:i,styles:s}),...a,onMouseDown:u=>{u.preventDefault()}})});sq.classes=cl;sq.displayName="@mantine/core/ComboboxHeader";function Mme({value:e,valuesDivider:t=",",...n}){return T.jsx("input",{type:"hidden",value:Array.isArray(e)?e.join(t):e||"",...n})}Mme.displayName="@mantine/core/ComboboxHiddenInput";const F8e={},oq=Ze((e,t)=>{const n=$e("ComboboxOption",F8e,e),{classNames:r,className:i,style:s,styles:o,vars:a,onClick:l,id:u,active:c,onMouseDown:d,onMouseOver:f,disabled:h,selected:p,mod:m,...g}=n,b=qu(),v=D.useId(),x=u||v;return T.jsx(Se,{...b.getStyles("option",{className:i,classNames:r,styles:o,style:s}),...g,ref:t,id:x,mod:["combobox-option",{"combobox-active":c,"combobox-disabled":h,"combobox-selected":p},m],role:"option",onClick:E=>{var _;h?E.preventDefault():((_=b.onOptionSubmit)==null||_.call(b,n.value,n),l==null||l(E))},onMouseDown:E=>{E.preventDefault(),d==null||d(E)},onMouseOver:E=>{b.resetSelectionOnOptionHover&&b.store.resetSelectedOption(),f==null||f(E)}})});oq.classes=cl;oq.displayName="@mantine/core/ComboboxOption";const j8e={},aq=Ze((e,t)=>{const n=$e("ComboboxOptions",j8e,e),{classNames:r,className:i,style:s,styles:o,id:a,onMouseDown:l,labelledBy:u,...c}=n,d=qu(),f=Ia(a);return D.useEffect(()=>{d.store.setListId(f)},[f]),T.jsx(Se,{ref:t,...d.getStyles("options",{className:i,style:s,classNames:r,styles:o}),...c,id:f,role:"listbox","aria-labelledby":u,onMouseDown:h=>{h.preventDefault(),l==null||l(h)}})});aq.classes=cl;aq.displayName="@mantine/core/ComboboxOptions";const B8e={withAriaAttributes:!0,withKeyboardNavigation:!0},lq=Ze((e,t)=>{const n=$e("ComboboxSearch",B8e,e),{classNames:r,styles:i,unstyled:s,vars:o,withAriaAttributes:a,onKeyDown:l,withKeyboardNavigation:u,size:c,...d}=n,f=qu(),h=f.getStyles("search"),p=nq({targetType:"input",withAriaAttributes:a,withKeyboardNavigation:u,withExpandedAttribute:!1,onKeyDown:l,autoComplete:"off"});return T.jsx(Dr,{ref:ms(t,f.store.searchRef),classNames:[{input:h.className},r],styles:[{input:h.style},i],size:c||f.size,...p,...d,__staticSelector:"Combobox"})});lq.classes=cl;lq.displayName="@mantine/core/ComboboxSearch";const z8e={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},Lme=Ze((e,t)=>{const{children:n,refProp:r,withKeyboardNavigation:i,withAriaAttributes:s,withExpandedAttribute:o,targetType:a,autoComplete:l,...u}=$e("ComboboxTarget",z8e,e);if(!Dp(n))throw new Error("Combobox.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const c=qu(),d=nq({targetType:a,withAriaAttributes:s,withKeyboardNavigation:i,withExpandedAttribute:o,onKeyDown:n.props.onKeyDown,autoComplete:l}),f=D.cloneElement(n,{...d,...u});return T.jsx(xo.Target,{ref:ms(t,c.store.targetRef),children:f})});Lme.displayName="@mantine/core/ComboboxTarget";function U8e(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r}return e}function q8e(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r}return e}function H8e(e){for(let t=0;t<e.length;t+=1)if(!e[t].hasAttribute("data-combobox-disabled"))return t;return-1}function uq({defaultOpened:e,opened:t,onOpenedChange:n,onDropdownClose:r,onDropdownOpen:i,loop:s=!0,scrollBehavior:o="instant"}={}){const[a,l]=Hs({value:t,defaultValue:e,finalValue:!1,onChange:n}),u=D.useRef(null),c=D.useRef(-1),d=D.useRef(null),f=D.useRef(null),h=D.useRef(-1),p=D.useRef(-1),m=D.useRef(-1),g=D.useCallback((Y="unknown")=>{a||(l(!0),i==null||i(Y))},[l,i,a]),b=D.useCallback((Y="unknown")=>{a&&(l(!1),r==null||r(Y))},[l,r,a]),v=D.useCallback((Y="unknown")=>{a?b(Y):g(Y)},[b,g,a]),x=D.useCallback(()=>{const Y=document.querySelector(`#${u.current} [data-combobox-selected]`);Y==null||Y.removeAttribute("data-combobox-selected"),Y==null||Y.removeAttribute("aria-selected")},[]),E=D.useCallback(Y=>{const J=document.getElementById(u.current),K=J==null?void 0:J.querySelectorAll("[data-combobox-option]");if(!K)return null;const Z=Y>=K.length?0:Y<0?K.length-1:Y;return c.current=Z,K!=null&&K[Z]&&!K[Z].hasAttribute("data-combobox-disabled")?(x(),K[Z].setAttribute("data-combobox-selected","true"),K[Z].setAttribute("aria-selected","true"),K[Z].scrollIntoView({block:"nearest",behavior:o}),K[Z].id):null},[o,x]),_=D.useCallback(()=>{const Y=document.querySelector(`#${u.current} [data-combobox-active]`);if(Y){const J=document.querySelectorAll(`#${u.current} [data-combobox-option]`),K=Array.from(J).findIndex(Z=>Z===Y);return E(K)}return E(0)},[E]),C=D.useCallback(()=>E(q8e(c.current,document.querySelectorAll(`#${u.current} [data-combobox-option]`),s)),[E,s]),S=D.useCallback(()=>E(U8e(c.current,document.querySelectorAll(`#${u.current} [data-combobox-option]`),s)),[E,s]),k=D.useCallback(()=>E(H8e(document.querySelectorAll(`#${u.current} [data-combobox-option]`))),[E]),R=D.useCallback((Y="selected",J)=>{m.current=window.setTimeout(()=>{var U;const K=document.querySelectorAll(`#${u.current} [data-combobox-option]`),Z=Array.from(K).findIndex(j=>j.hasAttribute(`data-combobox-${Y}`));c.current=Z,J!=null&&J.scrollIntoView&&((U=K[Z])==null||U.scrollIntoView({block:"nearest",behavior:o}))},0)},[]),O=D.useCallback(()=>{c.current=-1,x()},[x]),N=D.useCallback(()=>{const Y=document.querySelectorAll(`#${u.current} [data-combobox-option]`),J=Y==null?void 0:Y[c.current];J==null||J.click()},[]),L=D.useCallback(Y=>{u.current=Y},[]),$=D.useCallback(()=>{h.current=window.setTimeout(()=>d.current.focus(),0)},[]),B=D.useCallback(()=>{p.current=window.setTimeout(()=>f.current.focus(),0)},[]),H=D.useCallback(()=>c.current,[]);return D.useEffect(()=>()=>{window.clearTimeout(h.current),window.clearTimeout(p.current),window.clearTimeout(m.current)},[]),{dropdownOpened:a,openDropdown:g,closeDropdown:b,toggleDropdown:v,selectedOptionIndex:c.current,getSelectedOptionIndex:H,selectOption:E,selectFirstOption:k,selectActiveOption:_,selectNextOption:C,selectPreviousOption:S,resetSelectedOption:O,updateSelectedOptionIndex:R,listId:u.current,setListId:L,clickSelectedOption:N,searchRef:d,focusSearchInput:$,targetRef:f,focusTarget:B}}const W8e={keepMounted:!0,withinPortal:!0,resetSelectionOnOptionHover:!1,width:"target",transitionProps:{transition:"fade",duration:0}},V8e=(e,{size:t,dropdownPadding:n})=>({options:{"--combobox-option-fz":wo(t),"--combobox-option-padding":cn(t,"combobox-option-padding")},dropdown:{"--combobox-padding":n===void 0?void 0:Oe(n),"--combobox-option-fz":wo(t),"--combobox-option-padding":cn(t,"combobox-option-padding")}});function Fn(e){const t=$e("Combobox",W8e,e),{classNames:n,styles:r,unstyled:i,children:s,store:o,vars:a,onOptionSubmit:l,onClose:u,size:c,dropdownPadding:d,resetSelectionOnOptionHover:f,__staticSelector:h,readOnly:p,...m}=t,g=uq(),b=o||g,v=Nt({name:h||"Combobox",classes:cl,props:t,classNames:n,styles:r,unstyled:i,vars:a,varsResolver:V8e}),x=()=>{u==null||u(),b.closeDropdown()};return T.jsx(R8e,{value:{getStyles:v,store:b,onOptionSubmit:l,size:c,resetSelectionOnOptionHover:f,readOnly:p},children:T.jsx(xo,{opened:b.dropdownOpened,...m,onChange:E=>!E&&x(),withRoles:!1,unstyled:i,children:s})})}const G8e=e=>e;Fn.extend=G8e;Fn.classes=cl;Fn.displayName="@mantine/core/Combobox";Fn.Target=Lme;Fn.Dropdown=eq;Fn.Options=aq;Fn.Option=oq;Fn.Search=lq;Fn.Empty=tq;Fn.Chevron=sO;Fn.Footer=rq;Fn.Header=sq;Fn.EventsTarget=$me;Fn.DropdownTarget=Ome;Fn.Group=iq;Fn.ClearButton=Nme;Fn.HiddenInput=Mme;var Fme={root:"m_5f75b09e",body:"m_5f6e695e",labelWrapper:"m_d3ea56bb",label:"m_8ee546b8",description:"m_328f68c0",error:"m_8e8a99cc"};const jme=Fme,oO=D.forwardRef(({__staticSelector:e,__stylesApiProps:t,className:n,classNames:r,styles:i,unstyled:s,children:o,label:a,description:l,id:u,disabled:c,error:d,size:f,labelPosition:h="left",bodyElement:p="div",labelElement:m="label",variant:g,style:b,vars:v,mod:x,...E},_)=>{const C=Nt({name:e,props:t,className:n,style:b,classes:Fme,classNames:r,styles:i,unstyled:s});return T.jsx(Se,{...C("root"),ref:_,__vars:{"--label-fz":wo(f),"--label-lh":cn(f,"label-lh")},mod:[{"label-position":h},x],variant:g,size:f,...E,children:T.jsxs(Se,{component:p,htmlFor:p==="label"?u:void 0,...C("body"),children:[o,T.jsxs("div",{...C("labelWrapper"),"data-disabled":c||void 0,children:[a&&T.jsx(Se,{component:m,htmlFor:m==="label"?u:void 0,...C("label"),"data-disabled":c||void 0,children:a}),l&&T.jsx(Dr.Description,{size:f,__inheritStyles:!1,...C("description"),children:l}),d&&typeof d!="boolean"&&T.jsx(Dr.Error,{size:f,__inheritStyles:!1,...C("error"),children:d})]})]})})});oO.displayName="@mantine/core/InlineInput";const Bme=D.createContext(null),Y8e=Bme.Provider,zme=()=>D.useContext(Bme),[K8e,X8e]=Pp();var Ume={card:"m_26775b0a"};const Q8e={withBorder:!0},J8e=(e,{radius:t})=>({card:{"--card-radius":Tr(t)}}),cq=Ze((e,t)=>{const n=$e("CheckboxCard",Q8e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,checked:u,mod:c,withBorder:d,value:f,onClick:h,defaultChecked:p,onChange:m,...g}=n,b=Nt({name:"CheckboxCard",classes:Ume,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:J8e,rootSelector:"card"}),v=zme(),x=typeof u=="boolean"?u:v?v.value.includes(f||""):void 0,[E,_]=Hs({value:x,defaultValue:p,finalValue:!1,onChange:m});return T.jsx(K8e,{value:{checked:E},children:T.jsx(ul,{ref:t,mod:[{"with-border":d,checked:E},c],...b("card"),...g,role:"checkbox","aria-checked":E,onClick:C=>{h==null||h(C),v==null||v.onChange(f||""),_(!E)}})})});cq.displayName="@mantine/core/CheckboxCard";cq.classes=Ume;function dq({children:e,role:t}){const n=_x();return n?T.jsx("div",{role:t,"aria-labelledby":n.labelId,"aria-describedby":n.describedBy,children:e}):T.jsx(T.Fragment,{children:e})}const Z8e={},fq=Ze((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,readOnly:l,...u}=$e("CheckboxGroup",Z8e,e),[c,d]=Hs({value:n,defaultValue:r,finalValue:[],onChange:i}),f=h=>{const p=typeof h=="string"?h:h.currentTarget.value;!l&&d(c.includes(p)?c.filter(m=>m!==p):[...c,p])};return T.jsx(Y8e,{value:{value:c,onChange:f,size:s},children:T.jsx(Dr.Wrapper,{size:s,ref:t,...o,...u,labelElement:"div",__staticSelector:"CheckboxGroup",children:T.jsx(dq,{role:"group",children:a})})})});fq.classes=Dr.Wrapper.classes;fq.displayName="@mantine/core/CheckboxGroup";function qme({size:e,style:t,...n}){const r=e!==void 0?{width:Oe(e),height:Oe(e),...t}:t;return T.jsx("svg",{viewBox:"0 0 10 7",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:r,"aria-hidden":!0,...n,children:T.jsx("path",{d:"M4 4.586L1.707 2.293A1 1 0 1 0 .293 3.707l3 3a.997.997 0 0 0 1.414 0l5-5A1 1 0 1 0 8.293.293L4 4.586z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}function Hme({indeterminate:e,...t}){return e?T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 6","aria-hidden":!0,...t,children:T.jsx("rect",{width:"32",height:"6",fill:"currentColor",rx:"3"})}):T.jsx(qme,{...t})}var Wme={indicator:"m_5e5256ee",icon:"m_1b1c543a","indicator--outline":"m_76e20374"};const eMe={icon:Hme},tMe=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=Ff({color:n||e.primaryColor,theme:e}),l=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{indicator:{"--checkbox-size":cn(r,"checkbox-size"),"--checkbox-radius":t===void 0?void 0:Tr(t),"--checkbox-color":s==="outline"?l:$r(n,e),"--checkbox-icon-color":i?$r(i,e):yx(o,e)?_v({color:n,theme:e,autoContrast:o}):void 0}}},hq=Ze((e,t)=>{const n=$e("CheckboxIndicator",eMe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,icon:u,indeterminate:c,radius:d,color:f,iconColor:h,autoContrast:p,checked:m,mod:g,variant:b,disabled:v,...x}=n,E=u,_=Nt({name:"CheckboxIndicator",classes:Wme,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:tMe,rootSelector:"indicator"}),C=X8e(),S=typeof m=="boolean"||typeof c=="boolean"?m||c:(C==null?void 0:C.checked)||!1;return T.jsx(Se,{ref:t,..._("indicator",{variant:b}),variant:b,mod:[{checked:S,disabled:v},g],...x,children:T.jsx(E,{indeterminate:c,..._("icon")})})});hq.displayName="@mantine/core/CheckboxIndicator";hq.classes=Wme;var Vme={root:"m_bf2d988c",inner:"m_26062bec",input:"m_26063560",icon:"m_bf295423","input--outline":"m_215c4542"};const nMe={labelPosition:"right",icon:Hme},rMe=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=Ff({color:n||e.primaryColor,theme:e}),l=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{root:{"--checkbox-size":cn(r,"checkbox-size"),"--checkbox-radius":t===void 0?void 0:Tr(t),"--checkbox-color":s==="outline"?l:$r(n,e),"--checkbox-icon-color":i?$r(i,e):yx(o,e)?_v({color:n,theme:e,autoContrast:o}):void 0}}},mo=Ze((e,t)=>{const n=$e("Checkbox",nMe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,color:u,label:c,id:d,size:f,radius:h,wrapperProps:p,checked:m,labelPosition:g,description:b,error:v,disabled:x,variant:E,indeterminate:_,icon:C,rootRef:S,iconColor:k,onChange:R,autoContrast:O,mod:N,...L}=n,$=zme(),B=f||($==null?void 0:$.size),H=C,Y=Nt({name:"Checkbox",props:n,classes:Vme,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:rMe}),{styleProps:J,rest:K}=Sv(L),Z=Ia(d),U=$?{checked:$.value.includes(K.value),onChange:j=>{$.onChange(j),R==null||R(j)}}:{};return T.jsx(oO,{...Y("root"),__staticSelector:"Checkbox",__stylesApiProps:n,id:Z,size:B,labelPosition:g,label:c,description:b,error:v,disabled:x,classNames:r,styles:o,unstyled:a,"data-checked":U.checked||m||void 0,variant:E,ref:S,mod:N,...J,...p,children:T.jsxs(Se,{...Y("inner"),mod:{"data-label-position":g},children:[T.jsx(Se,{component:"input",id:Z,ref:t,checked:m,disabled:x,mod:{error:!!v,indeterminate:_},...Y("input",{focusable:!0,variant:E}),onChange:R,...K,...U,type:"checkbox"}),T.jsx(H,{indeterminate:_,...Y("icon")})]})})});mo.classes={...Vme,...jme};mo.displayName="@mantine/core/Checkbox";mo.Group=fq;mo.Indicator=hq;mo.Card=cq;function _w(e){return"group"in e}function Gme({options:e,search:t,limit:n}){const r=t.trim().toLowerCase(),i=[];for(let s=0;s<e.length;s+=1){const o=e[s];if(i.length===n)return i;_w(o)&&i.push({group:o.group,items:Gme({options:o.items,search:t,limit:n-i.length})}),_w(o)||o.label.toLowerCase().includes(r)&&i.push(o)}return i}function iMe(e){if(e.length===0)return!0;for(const t of e)if(!("group"in t)||t.items.length>0)return!1;return!0}function Yme(e,t=new Set){if(Array.isArray(e))for(const n of e)if(_w(n))Yme(n.items,t);else{if(typeof n.value>"u")throw new Error("[@mantine/core] Each option must have value property");if(typeof n.value!="string")throw new Error(`[@mantine/core] Option value must be a string, other data formats are not supported, got ${typeof n.value}`);if(t.has(n.value))throw new Error(`[@mantine/core] Duplicate options are not supported. Option with value "${n.value}" was provided more than once`);t.add(n.value)}}function sMe(e,t){return Array.isArray(e)?e.includes(t):e===t}function Kme({data:e,withCheckIcon:t,value:n,checkIconPosition:r,unstyled:i,renderOption:s}){if(!_w(e)){const a=sMe(n,e.value),l=t&&a&&T.jsx(qme,{className:cl.optionsDropdownCheckIcon}),u=T.jsxs(T.Fragment,{children:[r==="left"&&l,T.jsx("span",{children:e.label}),r==="right"&&l]});return T.jsx(Fn.Option,{value:e.value,disabled:e.disabled,className:Mi({[cl.optionsDropdownOption]:!i}),"data-reverse":r==="right"||void 0,"data-checked":a||void 0,"aria-selected":a,active:a,children:typeof s=="function"?s({option:e,checked:a}):u})}const o=e.items.map(a=>T.jsx(Kme,{data:a,value:n,unstyled:i,withCheckIcon:t,checkIconPosition:r,renderOption:s},a.value));return T.jsx(Fn.Group,{label:e.group,children:o})}function Xme({data:e,hidden:t,hiddenWhenEmpty:n,filter:r,search:i,limit:s,maxDropdownHeight:o,withScrollArea:a=!0,filterOptions:l=!0,withCheckIcon:u=!1,value:c,checkIconPosition:d,nothingFoundMessage:f,unstyled:h,labelId:p,renderOption:m,scrollAreaProps:g,"aria-label":b}){Yme(e);const x=typeof i=="string"?(r||Gme)({options:e,search:l?i:"",limit:s??1/0}):e,E=iMe(x),_=x.map(C=>T.jsx(Kme,{data:C,withCheckIcon:u,value:c,checkIconPosition:d,unstyled:h,renderOption:m},_w(C)?C.group:C.value));return T.jsx(Fn.Dropdown,{hidden:t||n&&E,children:T.jsxs(Fn.Options,{labelledBy:p,"aria-label":b,children:[a?T.jsx(fp.Autosize,{mah:o??220,type:"scroll",scrollbarSize:"var(--combobox-padding)",offsetScrollbars:"y",...g,children:_}):_,E&&f&&T.jsx(Fn.Empty,{children:f})]})})}var Qme={root:"m_347db0ec","root--dot":"m_fbd81e3d",label:"m_5add502a",section:"m_91fdda9b"};const oMe={},aMe=(e,{radius:t,color:n,gradient:r,variant:i,size:s,autoContrast:o})=>{const a=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:o});return{root:{"--badge-height":cn(s,"badge-height"),"--badge-padding-x":cn(s,"badge-padding-x"),"--badge-fz":cn(s,"badge-fz"),"--badge-radius":t===void 0?void 0:Tr(t),"--badge-bg":n||i?a.background:void 0,"--badge-color":n||i?a.color:void 0,"--badge-bd":n||i?a.border:void 0,"--badge-dot-color":i==="dot"?$r(n,e):void 0}}},qc=Ki((e,t)=>{const n=$e("Badge",oMe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,radius:u,color:c,gradient:d,leftSection:f,rightSection:h,children:p,variant:m,fullWidth:g,autoContrast:b,circle:v,mod:x,...E}=n,_=Nt({name:"Badge",props:n,classes:Qme,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:aMe});return T.jsxs(Se,{variant:m,mod:[{block:g,circle:v,"with-right-section":!!h,"with-left-section":!!f},x],..._("root",{variant:m}),ref:t,...E,children:[f&&T.jsx("span",{..._("section"),"data-position":"left",children:f}),T.jsx("span",{..._("label"),children:p}),h&&T.jsx("span",{..._("section"),"data-position":"right",children:h})]})});qc.classes=Qme;qc.displayName="@mantine/core/Badge";var Jme={root:"m_fea6bf1a",burger:"m_d4fb9cad"};const lMe={},uMe=(e,{color:t,size:n,lineSize:r,transitionDuration:i,transitionTimingFunction:s})=>({root:{"--burger-color":t?$r(t,e):void 0,"--burger-size":cn(n,"burger-size"),"--burger-line-size":r?Oe(r):void 0,"--burger-transition-duration":i===void 0?void 0:`${i}ms`,"--burger-transition-timing-function":s}}),pq=Ze((e,t)=>{const n=$e("Burger",lMe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,opened:u,children:c,transitionDuration:d,transitionTimingFunction:f,lineSize:h,...p}=n,m=Nt({name:"Burger",classes:Jme,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:uMe});return T.jsxs(ul,{...m("root"),ref:t,...p,children:[T.jsx(Se,{mod:["reduce-motion",{opened:u}],...m("burger")}),c]})});pq.classes=Jme;pq.displayName="@mantine/core/Burger";var Cx={root:"m_77c9d27d",inner:"m_80f1301b",label:"m_811560b9",section:"m_a74036a",loader:"m_a25b86ee",group:"m_80d6d844",groupSection:"m_70be2a01"};const Qee={orientation:"horizontal"},cMe=(e,{borderWidth:t})=>({group:{"--button-border-width":Oe(t)}}),mq=Ze((e,t)=>{const n=$e("ButtonGroup",Qee,e),{className:r,style:i,classNames:s,styles:o,unstyled:a,orientation:l,vars:u,borderWidth:c,variant:d,mod:f,...h}=$e("ButtonGroup",Qee,e),p=Nt({name:"ButtonGroup",props:n,classes:Cx,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:u,varsResolver:cMe,rootSelector:"group"});return T.jsx(Se,{...p("group"),ref:t,variant:d,mod:[{"data-orientation":l},f],role:"group",...h})});mq.classes=Cx;mq.displayName="@mantine/core/ButtonGroup";const Jee={},dMe=(e,{radius:t,color:n,gradient:r,variant:i,autoContrast:s,size:o})=>{const a=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:s});return{groupSection:{"--section-height":cn(o,"section-height"),"--section-padding-x":cn(o,"section-padding-x"),"--section-fz":o!=null&&o.includes("compact")?wo(o.replace("compact-","")):wo(o),"--section-radius":t===void 0?void 0:Tr(t),"--section-bg":n||i?a.background:void 0,"--section-color":a.color,"--section-bd":n||i?a.border:void 0}}},gq=Ze((e,t)=>{const n=$e("ButtonGroupSection",Jee,e),{className:r,style:i,classNames:s,styles:o,unstyled:a,vars:l,variant:u,gradient:c,radius:d,autoContrast:f,...h}=$e("ButtonGroupSection",Jee,e),p=Nt({name:"ButtonGroupSection",props:n,classes:Cx,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:l,varsResolver:dMe,rootSelector:"groupSection"});return T.jsx(Se,{...p("groupSection"),ref:t,variant:u,...h})});gq.classes=Cx;gq.displayName="@mantine/core/ButtonGroupSection";const fMe={in:{opacity:1,transform:`translate(-50%, calc(-50% + ${Oe(1)}))`},out:{opacity:0,transform:"translate(-50%, -200%)"},common:{transformOrigin:"center"},transitionProperty:"transform, opacity"},hMe={},pMe=(e,{radius:t,color:n,gradient:r,variant:i,size:s,justify:o,autoContrast:a})=>{const l=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:a});return{root:{"--button-justify":o,"--button-height":cn(s,"button-height"),"--button-padding-x":cn(s,"button-padding-x"),"--button-fz":s!=null&&s.includes("compact")?wo(s.replace("compact-","")):wo(s),"--button-radius":t===void 0?void 0:Tr(t),"--button-bg":n||i?l.background:void 0,"--button-hover":n||i?l.hover:void 0,"--button-color":l.color,"--button-bd":n||i?l.border:void 0,"--button-hover-color":n||i?l.hoverColor:void 0}}},Gt=Ki((e,t)=>{const n=$e("Button",hMe,e),{style:r,vars:i,className:s,color:o,disabled:a,children:l,leftSection:u,rightSection:c,fullWidth:d,variant:f,radius:h,loading:p,loaderProps:m,gradient:g,classNames:b,styles:v,unstyled:x,"data-disabled":E,autoContrast:_,mod:C,...S}=n,k=Nt({name:"Button",props:n,classes:Cx,className:s,style:r,classNames:b,styles:v,unstyled:x,vars:i,varsResolver:pMe}),R=!!u,O=!!c;return T.jsxs(ul,{ref:t,...k("root",{active:!a&&!p&&!E}),unstyled:x,variant:f,disabled:a||p,mod:[{disabled:a||E,loading:p,block:d,"with-left-section":R,"with-right-section":O},C],...S,children:[T.jsx(jf,{mounted:!!p,transition:fMe,duration:150,children:N=>T.jsx(Se,{component:"span",...k("loader",{style:N}),"aria-hidden":!0,children:T.jsx(ld,{color:"var(--button-color)",size:"calc(var(--button-height) / 1.8)",...m})})}),T.jsxs("span",{...k("inner"),children:[u&&T.jsx(Se,{component:"span",...k("section"),mod:{position:"left"},children:u}),T.jsx(Se,{component:"span",mod:{loading:p},...k("label"),children:l}),c&&T.jsx(Se,{component:"span",...k("section"),mod:{position:"right"},children:c})]})]})});Gt.classes=Cx;Gt.displayName="@mantine/core/Button";Gt.Group=mq;Gt.GroupSection=gq;const[mMe,gMe]=ps("Card component was not found in tree");var yq={root:"m_e615b15f",section:"m_599a2148"};const yMe={},aO=Ki((e,t)=>{const n=$e("CardSection",yMe,e),{classNames:r,className:i,style:s,styles:o,vars:a,withBorder:l,inheritPadding:u,mod:c,...d}=n,f=gMe();return T.jsx(Se,{ref:t,mod:[{"with-border":l,"inherit-padding":u},c],...f.getStyles("section",{className:i,style:s,styles:o,classNames:r}),...d})});aO.classes=yq;aO.displayName="@mantine/core/CardSection";const vMe={},bMe=(e,{padding:t})=>({root:{"--card-padding":Wi(t)}}),Iv=Ki((e,t)=>{const n=$e("Card",vMe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,children:u,padding:c,...d}=n,f=Nt({name:"Card",props:n,classes:yq,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:bMe}),h=D.Children.toArray(u),p=h.map((m,g)=>typeof m=="object"&&m&&"type"in m&&m.type===aO?D.cloneElement(m,{"data-first-section":g===0||void 0,"data-last-section":g===h.length-1||void 0}):m);return T.jsx(mMe,{value:{getStyles:f},children:T.jsx(vx,{ref:t,unstyled:a,...f("root"),...d,children:p})})});Iv.classes=yq;Iv.displayName="@mantine/core/Card";Iv.Section=aO;var Zme={root:"m_4451eb3a"};const wMe={},Jc=Ki((e,t)=>{const n=$e("Center",wMe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,inline:u,mod:c,...d}=n,f=Nt({name:"Center",props:n,classes:Zme,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l});return T.jsx(Se,{ref:t,mod:[{inline:u},c],...f("root"),...d})});Jc.classes=Zme;Jc.displayName="@mantine/core/Center";var e0e={root:"m_b183c0a2"};const xMe={},EMe=(e,{color:t})=>({root:{"--code-bg":t?$r(t,e):void 0}}),Xd=Ze((e,t)=>{const n=$e("Code",xMe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,color:u,block:c,variant:d,mod:f,...h}=n,p=Nt({name:"Code",props:n,classes:e0e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:EMe});return T.jsx(Se,{component:c?"pre":"code",variant:d,ref:t,mod:[{block:c},f],...p("root"),...h,dir:"ltr"})});Xd.classes=e0e;Xd.displayName="@mantine/core/Code";var t0e={root:"m_de3d2490",colorOverlay:"m_862f3d1b",shadowOverlay:"m_98ae7f22",alphaOverlay:"m_95709ac0",childrenOverlay:"m_93e74e3"};const Zee={withShadow:!0},_Me=(e,{radius:t,size:n})=>({root:{"--cs-radius":t===void 0?void 0:Tr(t),"--cs-size":Oe(n)}}),vq=Ki((e,t)=>{const n=$e("ColorSwatch",Zee,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,color:u,size:c,radius:d,withShadow:f,children:h,variant:p,...m}=$e("ColorSwatch",Zee,n),g=Nt({name:"ColorSwatch",props:n,classes:t0e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:_Me});return T.jsxs(Se,{ref:t,variant:p,size:c,...g("root",{focusable:!0}),...m,children:[T.jsx("span",{...g("alphaOverlay")}),f&&T.jsx("span",{...g("shadowOverlay")}),T.jsx("span",{...g("colorOverlay",{style:{backgroundColor:u}})}),T.jsx("span",{...g("childrenOverlay"),children:h})]})});vq.classes=t0e;vq.displayName="@mantine/core/ColorSwatch";var n0e={root:"m_7485cace"};const TMe={},CMe=(e,{size:t,fluid:n})=>({root:{"--container-size":n?void 0:cn(t,"container-size")}}),mp=Ze((e,t)=>{const n=$e("Container",TMe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,fluid:u,mod:c,...d}=n,f=Nt({name:"Container",classes:n0e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:CMe});return T.jsx(Se,{ref:t,mod:[{fluid:u},c],...f("root"),...d})});mp.classes=n0e;mp.displayName="@mantine/core/Container";var r0e={root:"m_3eebeb36",label:"m_9e365f20"};const SMe={orientation:"horizontal"},AMe=(e,{color:t,variant:n,size:r})=>({root:{"--divider-color":t?$r(t,e):void 0,"--divider-border-style":n,"--divider-size":cn(r,"divider-size")}}),Rv=Ze((e,t)=>{const n=$e("Divider",SMe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,color:u,orientation:c,label:d,labelPosition:f,mod:h,...p}=n,m=Nt({name:"Divider",classes:r0e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:AMe});return T.jsx(Se,{ref:t,mod:[{orientation:c,"with-label":!!d},h],...m("root"),...p,role:"separator",children:d&&T.jsx(Se,{component:"span",mod:{position:f},...m("label"),children:d})})});Rv.classes=r0e;Rv.displayName="@mantine/core/Divider";const[kMe,Sx]=ps("Drawer component was not found in tree");var Mp={root:"m_f11b401e",header:"m_5a7c2c9",content:"m_b8a05bbd",inner:"m_31cd769a"};const IMe={},lO=Ze((e,t)=>{const n=$e("DrawerBody",IMe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...l}=n,u=Sx();return T.jsx(NU,{ref:t,...u.getStyles("body",{classNames:r,style:s,styles:o,className:i}),...l})});lO.classes=Mp;lO.displayName="@mantine/core/DrawerBody";const RMe={},uO=Ze((e,t)=>{const n=$e("DrawerCloseButton",RMe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...l}=n,u=Sx();return T.jsx(OU,{ref:t,...u.getStyles("close",{classNames:r,style:s,styles:o,className:i}),...l})});uO.classes=Mp;uO.displayName="@mantine/core/DrawerCloseButton";const DMe={},cO=Ze((e,t)=>{const n=$e("DrawerContent",DMe,e),{classNames:r,className:i,style:s,styles:o,vars:a,children:l,radius:u,__hidden:c,...d}=n,f=Sx(),h=f.scrollAreaComponent||Tme;return T.jsx($U,{...f.getStyles("content",{className:i,style:s,styles:o,classNames:r}),innerProps:f.getStyles("inner",{className:i,style:s,styles:o,classNames:r}),ref:t,...d,radius:u||f.radius||0,"data-hidden":c||void 0,children:T.jsx(h,{style:{height:"calc(100vh - var(--drawer-offset) * 2)"},children:l})})});cO.classes=Mp;cO.displayName="@mantine/core/DrawerContent";const PMe={},dO=Ze((e,t)=>{const n=$e("DrawerHeader",PMe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...l}=n,u=Sx();return T.jsx(MU,{ref:t,...u.getStyles("header",{classNames:r,style:s,styles:o,className:i}),...l})});dO.classes=Mp;dO.displayName="@mantine/core/DrawerHeader";const NMe={},fO=Ze((e,t)=>{const n=$e("DrawerOverlay",NMe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...l}=n,u=Sx();return T.jsx(LU,{ref:t,...u.getStyles("overlay",{classNames:r,style:s,styles:o,className:i}),...l})});fO.classes=Mp;fO.displayName="@mantine/core/DrawerOverlay";function OMe(e){switch(e){case"top":return"flex-start";case"bottom":return"flex-end";default:return}}function $Me(e){if(e==="top"||e==="bottom")return"0 0 calc(100% - var(--drawer-offset, 0rem) * 2)"}const MMe={top:"slide-down",bottom:"slide-up",left:"slide-right",right:"slide-left"},LMe={top:"slide-down",bottom:"slide-up",right:"slide-right",left:"slide-left"},FMe={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:Gs("modal"),position:"left"},jMe=(e,{position:t,size:n,offset:r})=>({root:{"--drawer-size":cn(n,"drawer-size"),"--drawer-flex":$Me(t),"--drawer-height":t==="left"||t==="right"?void 0:"var(--drawer-size)","--drawer-align":OMe(t),"--drawer-justify":t==="right"?"flex-end":void 0,"--drawer-offset":Oe(r)}}),hO=Ze((e,t)=>{const n=$e("DrawerRoot",FMe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,scrollAreaComponent:u,position:c,transitionProps:d,radius:f,...h}=n,{dir:p}=Np(),m=Nt({name:"Drawer",classes:Mp,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:jMe}),g=(p==="rtl"?LMe:MMe)[c];return T.jsx(kMe,{value:{scrollAreaComponent:u,getStyles:m,radius:f},children:T.jsx(PU,{ref:t,...m("root"),transitionProps:{transition:g,...d},unstyled:a,...h})})});hO.classes=Mp;hO.displayName="@mantine/core/DrawerRoot";const[BMe,zMe]=Pp();function i0e({children:e}){const[t,n]=D.useState([]),[r,i]=D.useState(Gs("modal"));return T.jsx(BMe,{value:{stack:t,addModal:(s,o)=>{n(a=>[...new Set([...a,s])]),i(a=>typeof o=="number"&&typeof a=="number"?Math.max(a,o):a)},removeModal:s=>n(o=>o.filter(a=>a!==s)),getZIndex:s=>`calc(${r} + ${t.indexOf(s)} + 1)`,currentId:t[t.length-1],maxZIndex:r},children:e})}i0e.displayName="@mantine/core/DrawerStack";const UMe={},pO=Ze((e,t)=>{const n=$e("DrawerTitle",UMe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...l}=n,u=Sx();return T.jsx(FU,{ref:t,...u.getStyles("title",{classNames:r,style:s,styles:o,className:i}),...l})});pO.classes=Mp;pO.displayName="@mantine/core/DrawerTitle";const qMe={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:Gs("modal"),withOverlay:!0,withCloseButton:!0},ud=Ze((e,t)=>{const{title:n,withOverlay:r,overlayProps:i,withCloseButton:s,closeButtonProps:o,children:a,opened:l,stackId:u,zIndex:c,...d}=$e("Drawer",qMe,e),f=zMe(),h=!!n||s,p=f&&u?{closeOnEscape:f.currentId===u,trapFocus:f.currentId===u,zIndex:f.getZIndex(u)}:{},m=r===!1?!1:u&&f?f.currentId===u:l;return D.useEffect(()=>{f&&u&&(l?f.addModal(u,c||Gs("modal")):f.removeModal(u))},[l,u,c]),T.jsxs(hO,{ref:t,opened:l,zIndex:f&&u?f.getZIndex(u):c,...d,...p,children:[r&&T.jsx(fO,{visible:m,transitionProps:f&&u?{duration:0}:void 0,...i}),T.jsxs(cO,{__hidden:f&&u&&l?u!==f.currentId:!1,children:[h&&T.jsxs(dO,{children:[n&&T.jsx(pO,{children:n}),s&&T.jsx(uO,{...o})]}),T.jsx(lO,{children:a})]})]})});ud.classes=Mp;ud.displayName="@mantine/core/Drawer";ud.Root=hO;ud.Overlay=fO;ud.Content=cO;ud.Body=lO;ud.Header=dO;ud.Title=pO;ud.CloseButton=uO;ud.Stack=i0e;function s0e({open:e,close:t,openDelay:n,closeDelay:r}){const i=D.useRef(-1),s=D.useRef(-1),o=()=>{window.clearTimeout(i.current),window.clearTimeout(s.current)},a=()=>{o(),n===0||n===void 0?e():i.current=window.setTimeout(e,n)},l=()=>{o(),r===0||r===void 0?t():s.current=window.setTimeout(t,r)};return D.useEffect(()=>o,[]),{openDropdown:a,closeDropdown:l}}const[ete,o0e]=ps("Grid component was not found in tree"),L9=(e,t)=>e==="content"?"auto":e==="auto"?"0rem":e?`${100/(t/e)}%`:void 0,tte=(e,t,n)=>n||e==="auto"?"100%":e==="content"?"unset":L9(e,t),nte=(e,t)=>{if(e)return e==="auto"||t?"1":"auto"},rte=(e,t)=>e===0?"0":e?`${100/(t/e)}%`:void 0;function HMe({span:e,order:t,offset:n,selector:r}){var h;const i=Yi(),s=o0e(),o=s.breakpoints||i.breakpoints,l=Oc(e)===void 0?12:Oc(e),u=O0({"--col-order":(h=Oc(t))==null?void 0:h.toString(),"--col-flex-grow":nte(l,s.grow),"--col-flex-basis":L9(l,s.columns),"--col-width":l==="content"?"auto":void 0,"--col-max-width":tte(l,s.columns,s.grow),"--col-offset":rte(Oc(n),s.columns)}),c=Or(o).reduce((p,m)=>{var g;return p[m]||(p[m]={}),typeof t=="object"&&t[m]!==void 0&&(p[m]["--col-order"]=(g=t[m])==null?void 0:g.toString()),typeof e=="object"&&e[m]!==void 0&&(p[m]["--col-flex-grow"]=nte(e[m],s.grow),p[m]["--col-flex-basis"]=L9(e[m],s.columns),p[m]["--col-width"]=e[m]==="content"?"auto":void 0,p[m]["--col-max-width"]=tte(e[m],s.columns,s.grow)),typeof n=="object"&&n[m]!==void 0&&(p[m]["--col-offset"]=rte(n[m],s.columns)),p},{}),f=vT(Or(c),o).filter(p=>Or(c[p.value]).length>0).map(p=>({query:s.type==="container"?`mantine-grid (min-width: ${o[p.value]})`:`(min-width: ${o[p.value]})`,styles:c[p.value]}));return T.jsx(Cv,{styles:u,media:s.type==="container"?void 0:f,container:s.type==="container"?f:void 0,selector:r})}var bq={container:"m_8478a6da",root:"m_410352e9",inner:"m_dee7bd2f",col:"m_96bdd299"};const WMe={span:12},wq=Ze((e,t)=>{const n=$e("GridCol",WMe,e),{classNames:r,className:i,style:s,styles:o,vars:a,span:l,order:u,offset:c,...d}=n,f=o0e(),h=kC();return T.jsxs(T.Fragment,{children:[T.jsx(HMe,{selector:`.${h}`,span:l,order:u,offset:c}),T.jsx(Se,{ref:t,...f.getStyles("col",{className:Mi(i,h),style:s,classNames:r,styles:o}),...d})]})});wq.classes=bq;wq.displayName="@mantine/core/GridCol";function ite({gutter:e,selector:t,breakpoints:n,type:r}){const i=Yi(),s=n||i.breakpoints,o=O0({"--grid-gutter":Wi(Oc(e))}),a=Or(s).reduce((c,d)=>(c[d]||(c[d]={}),typeof e=="object"&&e[d]!==void 0&&(c[d]["--grid-gutter"]=Wi(e[d])),c),{}),u=vT(Or(a),s).filter(c=>Or(a[c.value]).length>0).map(c=>({query:r==="container"?`mantine-grid (min-width: ${s[c.value]})`:`(min-width: ${s[c.value]})`,styles:a[c.value]}));return T.jsx(Cv,{styles:o,media:r==="container"?void 0:u,container:r==="container"?u:void 0,selector:t})}const VMe={gutter:"md",grow:!1,columns:12},GMe=(e,{justify:t,align:n,overflow:r})=>({root:{"--grid-justify":t,"--grid-align":n,"--grid-overflow":r}}),rf=Ze((e,t)=>{const n=$e("Grid",VMe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,grow:u,gutter:c,columns:d,align:f,justify:h,children:p,breakpoints:m,type:g,...b}=n,v=Nt({name:"Grid",classes:bq,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:GMe}),x=kC();return g==="container"&&m?T.jsxs(ete,{value:{getStyles:v,grow:u,columns:d||12,breakpoints:m,type:g},children:[T.jsx(ite,{selector:`.${x}`,...n}),T.jsx("div",{...v("container"),children:T.jsx(Se,{ref:t,...v("root",{className:x}),...b,children:T.jsx("div",{...v("inner"),children:p})})})]}):T.jsxs(ete,{value:{getStyles:v,grow:u,columns:d||12,breakpoints:m,type:g},children:[T.jsx(ite,{selector:`.${x}`,...n}),T.jsx(Se,{ref:t,...v("root",{className:x}),...b,children:T.jsx("div",{...v("inner"),children:p})})]})});rf.classes=bq;rf.displayName="@mantine/core/Grid";rf.Col=wq;const[YMe,a0e]=ps("HoverCard component was not found in the tree"),KMe={};function l0e(e){const{children:t,onMouseEnter:n,onMouseLeave:r,...i}=$e("HoverCardDropdown",KMe,e),s=a0e(),o=il(n,s.openDropdown),a=il(r,s.closeDropdown);return T.jsx(xo.Dropdown,{onMouseEnter:o,onMouseLeave:a,...i,children:t})}l0e.displayName="@mantine/core/HoverCardDropdown";const XMe={refProp:"ref"},u0e=D.forwardRef((e,t)=>{const{children:n,refProp:r,eventPropsWrapperName:i,...s}=$e("HoverCardTarget",XMe,e);if(!Dp(n))throw new Error("HoverCard.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const o=a0e(),a=il(n.props.onMouseEnter,o.openDropdown),l=il(n.props.onMouseLeave,o.closeDropdown),u={onMouseEnter:a,onMouseLeave:l};return T.jsx(xo.Target,{refProp:r,ref:t,...s,children:D.cloneElement(n,i?{[i]:u}:u)})});u0e.displayName="@mantine/core/HoverCardTarget";const QMe={openDelay:0,closeDelay:150,initiallyOpened:!1};function Cy(e){const{children:t,onOpen:n,onClose:r,openDelay:i,closeDelay:s,initiallyOpened:o,...a}=$e("HoverCard",QMe,e),[l,{open:u,close:c}]=nU(o,{onClose:r,onOpen:n}),{openDropdown:d,closeDropdown:f}=s0e({open:u,close:c,openDelay:i,closeDelay:s});return T.jsx(YMe,{value:{openDropdown:d,closeDropdown:f},children:T.jsx(xo,{...a,opened:l,__staticSelector:"HoverCard",children:t})})}Cy.displayName="@mantine/core/HoverCard";Cy.Target=u0e;Cy.Dropdown=l0e;Cy.extend=e=>e;var c0e={root:"m_9e117634"};const JMe={},ZMe=(e,{radius:t,fit:n})=>({root:{"--image-radius":t===void 0?void 0:Tr(t),"--image-object-fit":n}}),j0=Ki((e,t)=>{const n=$e("Image",JMe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,onError:u,src:c,radius:d,fit:f,fallbackSrc:h,mod:p,...m}=n,[g,b]=D.useState(!c);D.useEffect(()=>b(!c),[c]);const v=Nt({name:"Image",classes:c0e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:ZMe});return g&&h?T.jsx(Se,{component:"img",ref:t,src:h,...v("root"),onError:u,mod:["fallback",p],...m}):T.jsx(Se,{component:"img",ref:t,...v("root"),src:c,onError:x=>{u==null||u(x),b(!0)},mod:p,...m})});j0.classes=c0e;j0.displayName="@mantine/core/Image";function vD(){return vD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vD.apply(null,arguments)}function xq(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var eLe=D.useLayoutEffect,tLe=function(t){var n=D.useRef(t);return eLe(function(){n.current=t}),n},ste=function(t,n){if(typeof t=="function"){t(n);return}t.current=n},nLe=function(t,n){var r=D.useRef();return D.useCallback(function(i){t.current=i,r.current&&ste(r.current,null),r.current=n,n&&ste(n,i)},[n])},ote={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0",display:"block"},rLe=function(t){Object.keys(ote).forEach(function(n){t.style.setProperty(n,ote[n],"important")})},ate=rLe,oa=null,lte=function(t,n){var r=t.scrollHeight;return n.sizingStyle.boxSizing==="border-box"?r+n.borderSize:r-n.paddingSize};function iLe(e,t,n,r){n===void 0&&(n=1),r===void 0&&(r=1/0),oa||(oa=document.createElement("textarea"),oa.setAttribute("tabindex","-1"),oa.setAttribute("aria-hidden","true"),ate(oa)),oa.parentNode===null&&document.body.appendChild(oa);var i=e.paddingSize,s=e.borderSize,o=e.sizingStyle,a=o.boxSizing;Object.keys(o).forEach(function(f){var h=f;oa.style[h]=o[h]}),ate(oa),oa.value=t;var l=lte(oa,e);oa.value=t,l=lte(oa,e),oa.value="x";var u=oa.scrollHeight-i,c=u*n;a==="border-box"&&(c=c+i+s),l=Math.max(c,l);var d=u*r;return a==="border-box"&&(d=d+i+s),l=Math.min(d,l),[l,u]}var ute=function(){},sLe=function(t,n){return t.reduce(function(r,i){return r[i]=n[i],r},{})},oLe=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak","wordSpacing","scrollbarGutter"],aLe=!!document.documentElement.currentStyle,lLe=function(t){var n=window.getComputedStyle(t);if(n===null)return null;var r=sLe(oLe,n),i=r.boxSizing;if(i==="")return null;aLe&&i==="border-box"&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px");var s=parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),o=parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth);return{sizingStyle:r,paddingSize:s,borderSize:o}},uLe=lLe;function d0e(e,t,n){var r=tLe(n);D.useLayoutEffect(function(){var i=function(o){return r.current(o)};if(e)return e.addEventListener(t,i),function(){return e.removeEventListener(t,i)}},[])}var cLe=function(t){d0e(window,"resize",t)},dLe=function(t){d0e(document.fonts,"loadingdone",t)},fLe=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],hLe=function(t,n){var r=t.cacheMeasurements,i=t.maxRows,s=t.minRows,o=t.onChange,a=o===void 0?ute:o,l=t.onHeightChange,u=l===void 0?ute:l,c=xq(t,fLe),d=c.value!==void 0,f=D.useRef(null),h=nLe(f,n),p=D.useRef(0),m=D.useRef(),g=function(){var x=f.current,E=r&&m.current?m.current:uLe(x);if(E){m.current=E;var _=iLe(E,x.value||x.placeholder||"x",s,i),C=_[0],S=_[1];p.current!==C&&(p.current=C,x.style.setProperty("height",C+"px","important"),u(C,{rowHeight:S}))}},b=function(x){d||g(),a(x)};return D.useLayoutEffect(g),cLe(g),dLe(g),D.createElement("textarea",vD({},c,{onChange:b,ref:h}))},pLe=D.forwardRef(hLe);const mLe={},Eq=Ze((e,t)=>{const{autosize:n,maxRows:r,minRows:i,__staticSelector:s,resize:o,...a}=$e("Textarea",mLe,e),l=n&&e$e()!=="test",u=l?{maxRows:r,minRows:i}:{};return T.jsx(bl,{component:l?pLe:"textarea",ref:t,...a,__staticSelector:s||"Textarea",multiline:!0,"data-no-overflow":n&&r===void 0||void 0,__vars:{"--input-resize":o},...u})});Eq.classes=bl.classes;Eq.displayName="@mantine/core/Textarea";const[gLe,yLe]=ps("List component was not found in tree");var _q={root:"m_abbac491",item:"m_abb6bec2",itemWrapper:"m_75cd9f71",itemIcon:"m_60f83e5b"};const vLe={},Tq=Ze((e,t)=>{const n=$e("ListItem",vLe,e),{classNames:r,className:i,style:s,styles:o,vars:a,icon:l,children:u,mod:c,...d}=n,f=yLe(),h=l||f.icon,p={classNames:r,styles:o};return T.jsx(Se,{...f.getStyles("item",{...p,className:i,style:s}),component:"li",mod:[{"with-icon":!!h,centered:f.center},c],ref:t,...d,children:T.jsxs("div",{...f.getStyles("itemWrapper",p),children:[h&&T.jsx("span",{...f.getStyles("itemIcon",p),children:h}),T.jsx("span",{...f.getStyles("itemLabel",p),children:u})]})})});Tq.classes=_q;Tq.displayName="@mantine/core/ListItem";const bLe={type:"unordered"},wLe=(e,{size:t,spacing:n})=>({root:{"--list-fz":wo(t),"--list-lh":dpe(t),"--list-spacing":Wi(n)}}),Hc=Ze((e,t)=>{const n=$e("List",bLe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,children:u,type:c,withPadding:d,icon:f,spacing:h,center:p,listStyleType:m,mod:g,...b}=n,v=Nt({name:"List",classes:_q,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:wLe});return T.jsx(gLe,{value:{center:p,icon:f,getStyles:v},children:T.jsx(Se,{...v("root",{style:{listStyleType:m}}),component:c==="unordered"?"ul":"ol",mod:[{"with-padding":d},g],ref:t,...b,children:u})})});Hc.classes=_q;Hc.displayName="@mantine/core/List";Hc.Item=Tq;var f0e={root:"m_6e45937b",loader:"m_e8eb006c",overlay:"m_df587f17"};const cte={transitionProps:{transition:"fade",duration:0},overlayProps:{backgroundOpacity:.75},zIndex:Gs("overlay")},xLe=(e,{zIndex:t})=>({root:{"--lo-z-index":t==null?void 0:t.toString()}}),Nu=Ze((e,t)=>{const n=$e("LoadingOverlay",cte,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,transitionProps:u,loaderProps:c,overlayProps:d,visible:f,zIndex:h,...p}=n,m=Yi(),g=Nt({name:"LoadingOverlay",classes:f0e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:xLe}),b={...cte.overlayProps,...d};return T.jsx(jf,{transition:"fade",...u,mounted:!!f,children:v=>T.jsxs(Se,{...g("root",{style:v}),ref:t,...p,children:[T.jsx(ld,{...g("loader"),unstyled:a,...c}),T.jsx(xw,{...b,...g("overlay"),darkHidden:!0,unstyled:a,color:(d==null?void 0:d.color)||m.white}),T.jsx(xw,{...b,...g("overlay"),lightHidden:!0,unstyled:a,color:(d==null?void 0:d.color)||m.colors.dark[5]})]})})});Nu.classes=f0e;Nu.displayName="@mantine/core/LoadingOverlay";const[ELe,$C]=ps("Menu component was not found in the tree");var Ax={dropdown:"m_dc9b7c9f",label:"m_9bfac126",divider:"m_efdf90cb",item:"m_99ac2aa1",itemLabel:"m_5476e0d3",itemSection:"m_8b75e504"};const _Le={},Cq=Ze((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=$e("MenuDivider",_Le,e),l=$C();return T.jsx(Se,{ref:t,...l.getStyles("divider",{className:r,style:i,styles:s,classNames:n}),...a})});Cq.classes=Ax;Cq.displayName="@mantine/core/MenuDivider";const TLe={},Sq=Ze((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,onMouseEnter:a,onMouseLeave:l,onKeyDown:u,children:c,...d}=$e("MenuDropdown",TLe,e),f=D.useRef(null),h=$C(),p=il(u,b=>{var v,x;(b.key==="ArrowUp"||b.key==="ArrowDown")&&(b.preventDefault(),(x=(v=f.current)==null?void 0:v.querySelectorAll("[data-menu-item]:not(:disabled)")[0])==null||x.focus())}),m=il(a,()=>(h.trigger==="hover"||h.trigger==="click-hover")&&h.openDropdown()),g=il(l,()=>(h.trigger==="hover"||h.trigger==="click-hover")&&h.closeDropdown());return T.jsxs(xo.Dropdown,{...d,onMouseEnter:m,onMouseLeave:g,role:"menu","aria-orientation":"vertical",ref:ms(t,f),...h.getStyles("dropdown",{className:r,style:i,styles:s,classNames:n,withStaticClass:!1}),tabIndex:-1,"data-menu-dropdown":!0,onKeyDown:p,children:[T.jsx("div",{tabIndex:-1,"data-autofocus":!0,"data-mantine-stop-propagation":!0,style:{outline:0}}),c]})});Sq.classes=Ax;Sq.displayName="@mantine/core/MenuDropdown";const CLe={},Aq=Ki((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,color:a,closeMenuOnClick:l,leftSection:u,rightSection:c,children:d,disabled:f,...h}=$e("MenuItem",CLe,e),p=$C(),m=Yi(),{dir:g}=Np(),b=D.useRef(null),v=p.getItemIndex(b.current),x=h,E=il(x.onMouseLeave,()=>p.setHovered(-1)),_=il(x.onMouseEnter,()=>p.setHovered(p.getItemIndex(b.current))),C=il(x.onClick,()=>{typeof l=="boolean"?l&&p.closeDropdownImmediately():p.closeOnItemClick&&p.closeDropdownImmediately()}),S=il(x.onFocus,()=>p.setHovered(p.getItemIndex(b.current))),k=a?m.variantColorResolver({color:a,theme:m,variant:"light"}):void 0,R=a?Ff({color:a,theme:m}):null;return T.jsxs(ul,{...h,unstyled:p.unstyled,tabIndex:p.menuItemTabIndex,onFocus:S,...p.getStyles("item",{className:r,style:i,styles:s,classNames:n}),ref:ms(b,t),role:"menuitem",disabled:f,"data-menu-item":!0,"data-disabled":f||void 0,"data-hovered":p.hovered===v?!0:void 0,"data-mantine-stop-propagation":!0,onMouseEnter:_,onMouseLeave:E,onClick:C,onKeyDown:Zz({siblingSelector:"[data-menu-item]",parentSelector:"[data-menu-dropdown]",activateOnFocus:!1,loop:p.loop,dir:g,orientation:"vertical",onKeyDown:x.onKeyDown}),__vars:{"--menu-item-color":R!=null&&R.isThemeColor&&(R==null?void 0:R.shade)===void 0?`var(--mantine-color-${R.color}-6)`:k==null?void 0:k.color,"--menu-item-hover":k==null?void 0:k.hover},children:[u&&T.jsx("div",{...p.getStyles("itemSection",{styles:s,classNames:n}),"data-position":"left",children:u}),d&&T.jsx("div",{...p.getStyles("itemLabel",{styles:s,classNames:n}),children:d}),c&&T.jsx("div",{...p.getStyles("itemSection",{styles:s,classNames:n}),"data-position":"right",children:c})]})});Aq.classes=Ax;Aq.displayName="@mantine/core/MenuItem";const SLe={},kq=Ze((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=$e("MenuLabel",SLe,e),l=$C();return T.jsx(Se,{ref:t,...l.getStyles("label",{className:r,style:i,styles:s,classNames:n}),...a})});kq.classes=Ax;kq.displayName="@mantine/core/MenuLabel";const ALe={refProp:"ref"},h0e=D.forwardRef((e,t)=>{const{children:n,refProp:r,...i}=$e("MenuTarget",ALe,e);if(!Dp(n))throw new Error("Menu.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const s=$C(),o=n.props,a=il(o.onClick,()=>{s.trigger==="click"?s.toggleDropdown():s.trigger==="click-hover"&&(s.setOpenedViaClick(!0),s.opened||s.openDropdown())}),l=il(o.onMouseEnter,()=>(s.trigger==="hover"||s.trigger==="click-hover")&&s.openDropdown()),u=il(o.onMouseLeave,()=>{(s.trigger==="hover"||s.trigger==="click-hover"&&!s.openedViaClick)&&s.closeDropdown()});return T.jsx(xo.Target,{refProp:r,popupType:"menu",ref:t,...i,children:D.cloneElement(n,{onClick:a,onMouseEnter:l,onMouseLeave:u,"data-expanded":s.opened?!0:void 0})})});h0e.displayName="@mantine/core/MenuTarget";const kLe={trapFocus:!0,closeOnItemClick:!0,clickOutsideEvents:["mousedown","touchstart","keydown"],loop:!0,trigger:"click",openDelay:0,closeDelay:100,menuItemTabIndex:-1};function fa(e){const t=$e("Menu",kLe,e),{children:n,onOpen:r,onClose:i,opened:s,defaultOpened:o,trapFocus:a,onChange:l,closeOnItemClick:u,loop:c,closeOnEscape:d,trigger:f,openDelay:h,closeDelay:p,classNames:m,styles:g,unstyled:b,variant:v,vars:x,menuItemTabIndex:E,keepMounted:_,...C}=t,S=Nt({name:"Menu",classes:Ax,props:t,classNames:m,styles:g,unstyled:b}),[k,{setHovered:R,resetHovered:O}]=IOe(),[N,L]=Hs({value:s,defaultValue:o,finalValue:!1,onChange:l}),[$,B]=D.useState(!1),H=()=>{L(!1),B(!1),N&&(i==null||i())},Y=()=>{L(!0),!N&&(r==null||r())},J=()=>{N?H():Y()},{openDropdown:K,closeDropdown:Z}=s0e({open:Y,close:H,closeDelay:p,openDelay:h}),U=z=>kOe("[data-menu-item]","[data-menu-dropdown]",z),{resolvedClassNames:j,resolvedStyles:V}=Tv({classNames:m,styles:g,props:t});return xf(()=>{O()},[N]),T.jsx(ELe,{value:{getStyles:S,opened:N,toggleDropdown:J,getItemIndex:U,hovered:k,setHovered:R,openedViaClick:$,setOpenedViaClick:B,closeOnItemClick:u,closeDropdown:f==="click"?H:Z,openDropdown:f==="click"?Y:K,closeDropdownImmediately:H,loop:c,trigger:f,unstyled:b,menuItemTabIndex:E},children:T.jsx(xo,{...C,opened:N,onChange:J,defaultOpened:o,trapFocus:_?!1:a,closeOnEscape:d,__staticSelector:"Menu",classNames:j,styles:V,unstyled:b,variant:v,keepMounted:_,children:n})})}fa.extend=e=>e;fa.classes=Ax;fa.displayName="@mantine/core/Menu";fa.Item=Aq;fa.Label=kq;fa.Dropdown=Sq;fa.Target=h0e;fa.Divider=Cq;const[ILe,kx]=ps("Modal component was not found in tree");var Lp={root:"m_9df02822",content:"m_54c44539",inner:"m_1f958f16",header:"m_d0e2b9cd"};const RLe={},mO=Ze((e,t)=>{const n=$e("ModalBody",RLe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...l}=n,u=kx();return T.jsx(NU,{ref:t,...u.getStyles("body",{classNames:r,style:s,styles:o,className:i}),...l})});mO.classes=Lp;mO.displayName="@mantine/core/ModalBody";const DLe={},gO=Ze((e,t)=>{const n=$e("ModalCloseButton",DLe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...l}=n,u=kx();return T.jsx(OU,{ref:t,...u.getStyles("close",{classNames:r,style:s,styles:o,className:i}),...l})});gO.classes=Lp;gO.displayName="@mantine/core/ModalCloseButton";const PLe={},yO=Ze((e,t)=>{const n=$e("ModalContent",PLe,e),{classNames:r,className:i,style:s,styles:o,vars:a,children:l,__hidden:u,...c}=n,d=kx(),f=d.scrollAreaComponent||Tme;return T.jsx($U,{...d.getStyles("content",{className:i,style:s,styles:o,classNames:r}),innerProps:d.getStyles("inner",{className:i,style:s,styles:o,classNames:r}),"data-full-screen":d.fullScreen||void 0,"data-modal-content":!0,"data-hidden":u||void 0,ref:t,...c,children:T.jsx(f,{style:{maxHeight:d.fullScreen?"100dvh":`calc(100dvh - (${Oe(d.yOffset)} * 2))`},children:l})})});yO.classes=Lp;yO.displayName="@mantine/core/ModalContent";const NLe={},vO=Ze((e,t)=>{const n=$e("ModalHeader",NLe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...l}=n,u=kx();return T.jsx(MU,{ref:t,...u.getStyles("header",{classNames:r,style:s,styles:o,className:i}),...l})});vO.classes=Lp;vO.displayName="@mantine/core/ModalHeader";const OLe={},bO=Ze((e,t)=>{const n=$e("ModalOverlay",OLe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...l}=n,u=kx();return T.jsx(LU,{ref:t,...u.getStyles("overlay",{classNames:r,style:s,styles:o,className:i}),...l})});bO.classes=Lp;bO.displayName="@mantine/core/ModalOverlay";const $Le={__staticSelector:"Modal",closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:Gs("modal"),transitionProps:{duration:200,transition:"fade-down"},yOffset:"5dvh"},MLe=(e,{radius:t,size:n,yOffset:r,xOffset:i})=>({root:{"--modal-radius":t===void 0?void 0:Tr(t),"--modal-size":cn(n,"modal-size"),"--modal-y-offset":Oe(r),"--modal-x-offset":Oe(i)}}),wO=Ze((e,t)=>{const n=$e("ModalRoot",$Le,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,yOffset:u,scrollAreaComponent:c,radius:d,fullScreen:f,centered:h,xOffset:p,__staticSelector:m,...g}=n,b=Nt({name:m,classes:Lp,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:MLe});return T.jsx(ILe,{value:{yOffset:u,scrollAreaComponent:c,getStyles:b,fullScreen:f},children:T.jsx(PU,{ref:t,...b("root"),"data-full-screen":f||void 0,"data-centered":h||void 0,unstyled:a,...g})})});wO.classes=Lp;wO.displayName="@mantine/core/ModalRoot";const[LLe,FLe]=Pp();function p0e({children:e}){const[t,n]=D.useState([]),[r,i]=D.useState(Gs("modal"));return T.jsx(LLe,{value:{stack:t,addModal:(s,o)=>{n(a=>[...new Set([...a,s])]),i(a=>typeof o=="number"&&typeof a=="number"?Math.max(a,o):a)},removeModal:s=>n(o=>o.filter(a=>a!==s)),getZIndex:s=>`calc(${r} + ${t.indexOf(s)} + 1)`,currentId:t[t.length-1],maxZIndex:r},children:e})}p0e.displayName="@mantine/core/ModalStack";const jLe={},xO=Ze((e,t)=>{const n=$e("ModalTitle",jLe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...l}=n,u=kx();return T.jsx(FU,{ref:t,...u.getStyles("title",{classNames:r,style:s,styles:o,className:i}),...l})});xO.classes=Lp;xO.displayName="@mantine/core/ModalTitle";const BLe={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:Gs("modal"),transitionProps:{duration:200,transition:"fade-down"},withOverlay:!0,withCloseButton:!0},ii=Ze((e,t)=>{const{title:n,withOverlay:r,overlayProps:i,withCloseButton:s,closeButtonProps:o,children:a,radius:l,opened:u,stackId:c,zIndex:d,...f}=$e("Modal",BLe,e),h=FLe(),p=!!n||s,m=h&&c?{closeOnEscape:h.currentId===c,trapFocus:h.currentId===c,zIndex:h.getZIndex(c)}:{},g=r===!1?!1:c&&h?h.currentId===c:u;return D.useEffect(()=>{h&&c&&(u?h.addModal(c,d||Gs("modal")):h.removeModal(c))},[u,c,d]),T.jsxs(wO,{ref:t,radius:l,opened:u,zIndex:h&&c?h.getZIndex(c):d,...f,...m,children:[r&&T.jsx(bO,{visible:g,transitionProps:h&&c?{duration:0}:void 0,...i}),T.jsxs(yO,{radius:l,__hidden:h&&c&&u?c!==h.currentId:!1,children:[p&&T.jsxs(vO,{children:[n&&T.jsx(xO,{children:n}),s&&T.jsx(gO,{...o})]}),T.jsx(mO,{children:a})]})]})});ii.classes=Lp;ii.displayName="@mantine/core/Modal";ii.Root=wO;ii.Overlay=bO;ii.Content=yO;ii.Body=mO;ii.Header=vO;ii.Title=xO;ii.CloseButton=gO;ii.Stack=p0e;const[zLe,Iq]=Pp(),[ULe,qLe]=Pp();var EO={root:"m_7cda1cd6","root--default":"m_44da308b","root--contrast":"m_e3a01f8",label:"m_1e0e6180",remove:"m_ae386778",group:"m_1dcfd90b"};const HLe={},WLe=(e,{gap:t},{size:n})=>({group:{"--pg-gap":t!==void 0?cn(t):cn(n,"pg-gap")}}),Rq=Ze((e,t)=>{const n=$e("PillGroup",HLe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,size:u,disabled:c,...d}=n,f=Iq(),h=(f==null?void 0:f.size)||u||void 0,p=Nt({name:"PillGroup",classes:EO,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:WLe,stylesCtx:{size:h},rootSelector:"group"});return T.jsx(ULe,{value:{size:h,disabled:c},children:T.jsx(Se,{ref:t,size:h,...p("group"),...d})})});Rq.classes=EO;Rq.displayName="@mantine/core/PillGroup";const VLe={variant:"default"},GLe=(e,{radius:t},{size:n})=>({root:{"--pill-fz":cn(n,"pill-fz"),"--pill-height":cn(n,"pill-height"),"--pill-radius":t===void 0?void 0:Tr(t)}}),xT=Ze((e,t)=>{const n=$e("Pill",VLe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,variant:u,children:c,withRemoveButton:d,onRemove:f,removeButtonProps:h,radius:p,size:m,disabled:g,mod:b,...v}=n,x=qLe(),E=Iq(),_=m||(x==null?void 0:x.size)||void 0,C=(E==null?void 0:E.variant)==="filled"?"contrast":u||"default",S=Nt({name:"Pill",classes:EO,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:GLe,stylesCtx:{size:_}});return T.jsxs(Se,{component:"span",ref:t,variant:C,size:_,...S("root",{variant:C}),mod:[{"with-remove":d&&!g,disabled:g||(x==null?void 0:x.disabled)},b],...v,children:[T.jsx("span",{...S("label"),children:c}),d&&T.jsx(pp,{variant:"transparent",radius:p,tabIndex:-1,"aria-hidden":!0,unstyled:a,...h,...S("remove",{className:h==null?void 0:h.className,style:h==null?void 0:h.style}),onMouseDown:k=>{var R;k.preventDefault(),k.stopPropagation(),(R=h==null?void 0:h.onMouseDown)==null||R.call(h,k)},onClick:k=>{var R;k.stopPropagation(),f==null||f(),(R=h==null?void 0:h.onClick)==null||R.call(h,k)}})]})});xT.classes=EO;xT.displayName="@mantine/core/Pill";xT.Group=Rq;var m0e={field:"m_45c4369d"};const YLe={type:"visible"},Dq=Ze((e,t)=>{const n=$e("PillsInputField",YLe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,type:u,disabled:c,id:d,pointer:f,mod:h,...p}=n,m=Iq(),g=_x(),b=Nt({name:"PillsInputField",classes:m0e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"field"}),v=c||(m==null?void 0:m.disabled);return T.jsx(Se,{component:"input",ref:ms(t,m==null?void 0:m.fieldRef),"data-type":u,disabled:v,mod:[{disabled:v,pointer:f},h],...b("field"),...p,id:(g==null?void 0:g.inputId)||d,"aria-invalid":m==null?void 0:m.hasError,"aria-describedby":g==null?void 0:g.describedBy,type:"text",onMouseDown:x=>!f&&x.stopPropagation()})});Dq.classes=m0e;Dq.displayName="@mantine/core/PillsInputField";const KLe={},bD=Ze((e,t)=>{const n=$e("PillsInput",KLe,e),{children:r,onMouseDown:i,onClick:s,size:o,disabled:a,__staticSelector:l,error:u,variant:c,...d}=n,f=D.useRef(null);return T.jsx(zLe,{value:{fieldRef:f,size:o,disabled:a,hasError:!!u,variant:c},children:T.jsx(bl,{size:o,error:u,variant:c,component:"div",ref:t,onMouseDown:h=>{var p;h.preventDefault(),i==null||i(h),(p=f.current)==null||p.focus()},onClick:h=>{var p;h.preventDefault(),s==null||s(h),(p=f.current)==null||p.focus()},...d,multiline:!0,disabled:a,__staticSelector:l||"PillsInput",withAria:!1,children:r})})});bD.displayName="@mantine/core/PillsInput";bD.Field=Dq;function XLe({data:e,value:t}){const n=t.map(i=>i.trim().toLowerCase());return e.reduce((i,s)=>(_w(s)?i.push({group:s.group,items:s.items.filter(o=>n.indexOf(o.value.toLowerCase().trim())===-1)}):n.indexOf(s.value.toLowerCase().trim())===-1&&i.push(s),i),[])}const QLe={maxValues:1/0,withCheckIcon:!0,checkIconPosition:"left",hiddenInputValuesDivider:","},Pq=Ze((e,t)=>{const n=$e("MultiSelect",QLe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,size:u,value:c,defaultValue:d,onChange:f,onKeyDown:h,variant:p,data:m,dropdownOpened:g,defaultDropdownOpened:b,onDropdownOpen:v,onDropdownClose:x,selectFirstOptionOnChange:E,onOptionSubmit:_,comboboxProps:C,filter:S,limit:k,withScrollArea:R,maxDropdownHeight:O,searchValue:N,defaultSearchValue:L,onSearchChange:$,readOnly:B,disabled:H,onFocus:Y,onBlur:J,onPaste:K,radius:Z,rightSection:U,rightSectionWidth:j,rightSectionPointerEvents:V,rightSectionProps:z,leftSection:G,leftSectionWidth:Q,leftSectionPointerEvents:ie,leftSectionProps:me,inputContainer:ae,inputWrapperOrder:fe,withAsterisk:be,labelProps:te,descriptionProps:re,errorProps:we,wrapperProps:Ee,description:Fe,label:We,error:Me,maxValues:Be,searchable:Je,nothingFoundMessage:lt,withCheckIcon:ht,checkIconPosition:vt,hidePickedOptions:Pe,withErrorStyles:wt,name:Wt,form:Ce,id:Ne,clearable:ot,clearButtonProps:xt,hiddenInputProps:Ct,placeholder:Qt,hiddenInputValuesDivider:yn,required:er,mod:Wr,renderOption:pn,onRemove:En,onClear:Mr,scrollAreaProps:On,...bs}=n,Qr=Ia(Ne),Lr=JU(m),Jr=ZU(Lr),tr=uq({opened:g,defaultOpened:b,onDropdownOpen:v,onDropdownClose:()=>{x==null||x(),tr.resetSelectedOption()}}),{styleProps:Qs,rest:{type:su,autoComplete:ta,...El}}=Sv(bs),[nr,Fr]=Hs({value:c,defaultValue:d,finalValue:[],onChange:f}),[dr,ws]=Hs({value:N,defaultValue:L,finalValue:"",onChange:$}),Gn=Nt({name:"MultiSelect",classes:{},props:n,classNames:r,styles:o,unstyled:a}),{resolvedClassNames:li,resolvedStyles:xs}=Tv({props:n,styles:o,classNames:r}),Qi=Yn=>{h==null||h(Yn),Yn.key===" "&&!Je&&(Yn.preventDefault(),tr.toggleDropdown()),Yn.key==="Backspace"&&dr.length===0&&nr.length>0&&(En==null||En(nr[nr.length-1]),Fr(nr.slice(0,nr.length-1)))},Js=nr.map((Yn,Zu)=>{var ui,Oa;return T.jsx(xT,{withRemoveButton:!B&&!((ui=Jr[Yn])!=null&&ui.disabled),onRemove:()=>{Fr(nr.filter(Zs=>Yn!==Zs)),En==null||En(Yn)},unstyled:a,disabled:H,...Gn("pill"),children:((Oa=Jr[Yn])==null?void 0:Oa.label)||Yn},`${Yn}-${Zu}`)});D.useEffect(()=>{E&&tr.selectFirstOption()},[E,nr]);const _l=T.jsx(Fn.ClearButton,{...xt,onClear:()=>{Mr==null||Mr(),Fr([]),ws("")}}),ih=XLe({data:Lr,value:nr});return T.jsxs(T.Fragment,{children:[T.jsxs(Fn,{store:tr,classNames:li,styles:xs,unstyled:a,size:u,readOnly:B,__staticSelector:"MultiSelect",onOptionSubmit:Yn=>{_==null||_(Yn),ws(""),tr.updateSelectedOptionIndex("selected"),nr.includes(Jr[Yn].value)?(Fr(nr.filter(Zu=>Zu!==Jr[Yn].value)),En==null||En(Jr[Yn].value)):nr.length<Be&&Fr([...nr,Jr[Yn].value])},...C,children:[T.jsx(Fn.DropdownTarget,{children:T.jsx(bD,{...Qs,__staticSelector:"MultiSelect",classNames:li,styles:xs,unstyled:a,size:u,className:i,style:s,variant:p,disabled:H,radius:Z,__defaultRightSection:T.jsx(Fn.Chevron,{size:u,error:Me,unstyled:a}),__clearSection:_l,__clearable:ot&&nr.length>0&&!H&&!B,rightSection:U,rightSectionPointerEvents:V||(_l?"all":"none"),rightSectionWidth:j,rightSectionProps:z,leftSection:G,leftSectionWidth:Q,leftSectionPointerEvents:ie,leftSectionProps:me,inputContainer:ae,inputWrapperOrder:fe,withAsterisk:be,labelProps:te,descriptionProps:re,errorProps:we,wrapperProps:Ee,description:Fe,label:We,error:Me,multiline:!0,withErrorStyles:wt,__stylesApiProps:{...n,rightSectionPointerEvents:V||(_l?"all":"none"),multiline:!0},pointer:!Je,onClick:()=>Je?tr.openDropdown():tr.toggleDropdown(),"data-expanded":tr.dropdownOpened||void 0,id:Qr,required:er,mod:Wr,children:T.jsxs(xT.Group,{disabled:H,unstyled:a,...Gn("pillsList"),children:[Js,T.jsx(Fn.EventsTarget,{autoComplete:ta,children:T.jsx(bD.Field,{...El,ref:t,id:Qr,placeholder:Qt,type:!Je&&!Qt?"hidden":"visible",...Gn("inputField"),unstyled:a,onFocus:Yn=>{Y==null||Y(Yn),Je&&tr.openDropdown()},onBlur:Yn=>{J==null||J(Yn),tr.closeDropdown(),ws("")},onKeyDown:Qi,value:dr,onChange:Yn=>{ws(Yn.currentTarget.value),Je&&tr.openDropdown(),E&&tr.selectFirstOption()},disabled:H,readOnly:B||!Je,pointer:!Je})})]})})}),T.jsx(Xme,{data:Pe?ih:Lr,hidden:B||H,filter:S,search:dr,limit:k,hiddenWhenEmpty:!lt,withScrollArea:R,maxDropdownHeight:O,filterOptions:Je,value:nr,checkIconPosition:vt,withCheckIcon:ht,nothingFoundMessage:lt,unstyled:a,labelId:We?`${Qr}-label`:void 0,"aria-label":We?void 0:bs["aria-label"],renderOption:pn,scrollAreaProps:On})]}),T.jsx(Fn.HiddenInput,{name:Wt,valuesDivider:yn,value:nr,form:Ce,disabled:H,...Ct})]})});Pq.classes={...bl.classes,...Fn.classes};Pq.displayName="@mantine/core/MultiSelect";function JLe(e){return"group"in e}function Nq({data:e}){if(JLe(e)){const i=e.items.map(s=>T.jsx(Nq,{data:s},s.value));return T.jsx("optgroup",{label:e.group,children:i})}const{value:t,label:n,...r}=e;return T.jsx("option",{value:e.value,...r,children:e.label},e.value)}Nq.displayName="@mantine/core/NativeSelectOption";const ZLe={rightSectionPointerEvents:"none"},ty=Ze((e,t)=>{const{data:n,children:r,size:i,error:s,rightSection:o,unstyled:a,...l}=$e("NativeSelect",ZLe,e),u=JU(n).map((c,d)=>T.jsx(Nq,{data:c},d));return T.jsx(bl,{component:"select",ref:t,...l,__staticSelector:"NativeSelect",size:i,pointer:!0,error:s,unstyled:a,rightSection:o||T.jsx(sO,{size:i,error:s,unstyled:a}),children:r||u})});ty.classes=bl.classes;ty.displayName="@mantine/core/NativeSelect";var g0e={root:"m_f0824112",description:"m_57492dcc",section:"m_690090b5",label:"m_1f6ac4c4",body:"m_f07af9d2",children:"m_e17b862f",chevron:"m_1fd8a00b"};const eFe={},tFe=(e,{variant:t,color:n,childrenOffset:r,autoContrast:i})=>{const s=e.variantColorResolver({color:n||e.primaryColor,theme:e,variant:t||"light",autoContrast:i});return{root:{"--nl-bg":n||t?s.background:void 0,"--nl-hover":n||t?s.hover:void 0,"--nl-color":n||t?s.color:void 0},children:{"--nl-offset":Wi(r)}}},_O=Ki((e,t)=>{const n=$e("NavLink",eFe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,opened:u,defaultOpened:c,onChange:d,children:f,onClick:h,active:p,disabled:m,leftSection:g,rightSection:b,label:v,description:x,disableRightSectionRotation:E,noWrap:_,childrenOffset:C,onKeyDown:S,autoContrast:k,mod:R,...O}=n,N=Nt({name:"NavLink",props:n,classes:g0e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:tFe}),[L,$]=Hs({value:u,defaultValue:c,finalValue:!1,onChange:d}),B=!!f,H=Y=>{h==null||h(Y),B&&(Y.preventDefault(),$(!L))};return T.jsxs(T.Fragment,{children:[T.jsxs(ul,{...N("root"),component:"a",ref:t,onClick:H,onKeyDown:Y=>{S==null||S(Y),Y.nativeEvent.code==="Space"&&B&&(Y.preventDefault(),$(!L))},unstyled:a,mod:[{disabled:m,active:p,expanded:L},R],...O,children:[g&&T.jsx(Se,{component:"span",...N("section"),mod:{position:"left"},children:g}),T.jsxs(Se,{...N("body"),mod:{"no-wrap":_},children:[T.jsx(Se,{component:"span",...N("label"),children:v}),T.jsx(Se,{component:"span",mod:{active:p},...N("description"),children:x})]}),(B||b)&&T.jsx(Se,{...N("section"),component:"span",mod:{rotate:L&&!E,position:"right"},children:B?b||T.jsx(iO,{...N("chevron")}):b})]}),B&&T.jsx(XN,{in:L,...N("collapse"),children:T.jsx("div",{...N("children"),children:f})})]})});_O.classes=g0e;_O.displayName="@mantine/core/NavLink";var y0e={root:"m_a513464",icon:"m_a4ceffb",loader:"m_b0920b15",body:"m_a49ed24",title:"m_3feedf16",description:"m_3d733a3a",closeButton:"m_919a4d88"};const nFe={withCloseButton:!0},rFe=(e,{radius:t,color:n})=>({root:{"--notification-radius":t===void 0?void 0:Tr(t),"--notification-color":n?$r(n,e):void 0}}),Oq=Ze((e,t)=>{const n=$e("Notification",nFe,e),{className:r,color:i,radius:s,loading:o,withCloseButton:a,withBorder:l,title:u,icon:c,children:d,onClose:f,closeButtonProps:h,classNames:p,style:m,styles:g,unstyled:b,variant:v,vars:x,mod:E,..._}=n,C=Nt({name:"Notification",classes:y0e,props:n,className:r,style:m,classNames:p,styles:g,unstyled:b,vars:x,varsResolver:rFe});return T.jsxs(Se,{...C("root"),mod:[{"data-with-icon":!!c||o,"data-with-border":l},E],ref:t,variant:v,..._,role:"alert",children:[c&&!o&&T.jsx("div",{...C("icon"),children:c}),o&&T.jsx(ld,{size:28,color:i,...C("loader")}),T.jsxs("div",{...C("body"),children:[u&&T.jsx("div",{...C("title"),children:u}),T.jsx(Se,{...C("description"),mod:{"data-with-title":!!u},children:d})]}),a&&T.jsx(pp,{iconSize:16,color:"gray",...h,unstyled:b,onClick:f,...C("closeButton")})]})});Oq.classes=y0e;Oq.displayName="@mantine/core/Notification";function v0e(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}var ET;(function(e){e.event="event",e.props="prop"})(ET||(ET={}));function Fm(){}function iFe(e){var t,n=void 0;return function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return t&&r.length===t.length&&r.every(function(s,o){return s===t[o]})||(t=r,n=e.apply(void 0,r)),n}}function _T(e){return!!(e||"").match(/\d/)}function Hb(e){return e==null}function sFe(e){return typeof e=="number"&&isNaN(e)}function b0e(e){return Hb(e)||sFe(e)||typeof e=="number"&&!isFinite(e)}function w0e(e){return e.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}function oFe(e){switch(e){case"lakh":return/(\d+?)(?=(\d\d)+(\d)(?!\d))(\.\d+)?/g;case"wan":return/(\d)(?=(\d{4})+(?!\d))/g;case"thousand":default:return/(\d)(?=(\d{3})+(?!\d))/g}}function aFe(e,t,n){var r=oFe(n),i=e.search(/[1-9]/);return i=i===-1?e.length:i,e.substring(0,i)+e.substring(i,e.length).replace(r,"$1"+t)}function lFe(e){var t=D.useRef(e);t.current=e;var n=D.useRef(function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return t.current.apply(t,r)});return n.current}function $q(e,t){t===void 0&&(t=!0);var n=e[0]==="-",r=n&&t;e=e.replace("-","");var i=e.split("."),s=i[0],o=i[1]||"";return{beforeDecimal:s,afterDecimal:o,hasNegation:n,addNegation:r}}function uFe(e){if(!e)return e;var t=e[0]==="-";t&&(e=e.substring(1,e.length));var n=e.split("."),r=n[0].replace(/^0+/,"")||"0",i=n[1]||"";return(t?"-":"")+r+(i?"."+i:"")}function x0e(e,t,n){for(var r="",i=n?"0":"",s=0;s<=t-1;s++)r+=e[s]||i;return r}function dte(e,t){return Array(t+1).join(e)}function E0e(e){var t=e+"",n=t[0]==="-"?"-":"";n&&(t=t.substring(1));var r=t.split(/[eE]/g),i=r[0],s=r[1];if(s=Number(s),!s)return n+i;i=i.replace(".","");var o=1+s,a=i.length;return o<0?i="0."+dte("0",Math.abs(o))+i:o>=a?i=i+dte("0",o-a):i=(i.substring(0,o)||"0")+"."+i.substring(o),n+i}function fte(e,t,n){if(["","-"].indexOf(e)!==-1)return e;var r=(e.indexOf(".")!==-1||n)&&t,i=$q(e),s=i.beforeDecimal,o=i.afterDecimal,a=i.hasNegation,l=parseFloat("0."+(o||"0")),u=o.length<=t?"0."+o:l.toFixed(t),c=u.split("."),d=s;s&&Number(c[0])&&(d=s.split("").reverse().reduce(function(m,g,b){return m.length>b?(Number(m[0])+Number(g)).toString()+m.substring(1,m.length):g+m},c[0]));var f=x0e(c[1]||"",t,n),h=a?"-":"",p=r?".":"";return""+h+d+p+f}function ny(e,t){if(e.value=e.value,e!==null){if(e.createTextRange){var n=e.createTextRange();return n.move("character",t),n.select(),!0}return e.selectionStart||e.selectionStart===0?(e.focus(),e.setSelectionRange(t,t),!0):(e.focus(),!1)}}var _0e=iFe(function(e,t){for(var n=0,r=0,i=e.length,s=t.length;e[n]===t[n]&&n<i;)n++;for(;e[i-1-r]===t[s-1-r]&&s-r>n&&i-r>n;)r++;return{from:{start:n,end:i-r},to:{start:n,end:s-r}}}),cFe=function(e,t){var n=Math.min(e.selectionStart,t);return{from:{start:n,end:e.selectionEnd},to:{start:n,end:t}}};function dFe(e,t,n){return Math.min(Math.max(e,t),n)}function H8(e){return Math.max(e.selectionStart,e.selectionEnd)}function fFe(){return typeof navigator<"u"&&!(navigator.platform&&/iPhone|iPod/.test(navigator.platform))}function hFe(e){return{from:{start:0,end:0},to:{start:0,end:e.length},lastValue:""}}function pFe(e){var t=e.currentValue,n=e.formattedValue,r=e.currentValueIndex,i=e.formattedValueIndex;return t[r]===n[i]}function mFe(e,t,n,r,i,s,o){o===void 0&&(o=pFe);var a=i.findIndex(function(E){return E}),l=e.slice(0,a);!t&&!n.startsWith(l)&&(t=l,n=l+n,r=r+l.length);for(var u=n.length,c=e.length,d={},f=new Array(u),h=0;h<u;h++){f[h]=-1;for(var p=0,m=c;p<m;p++){var g=o({currentValue:n,lastValue:t,formattedValue:e,currentValueIndex:h,formattedValueIndex:p});if(g&&d[p]!==!0){f[h]=p,d[p]=!0;break}}}for(var b=r;b<u&&(f[b]===-1||!s(n[b]));)b++;var v=b===u||f[b]===-1?c:f[b];for(b=r-1;b>0&&f[b]===-1;)b--;var x=b===-1||f[b]===-1?0:f[b]+1;return x>v?v:r-x<v-r?x:v}function hte(e,t,n,r){var i=e.length;if(t=dFe(t,0,i),r==="left"){for(;t>=0&&!n[t];)t--;t===-1&&(t=n.indexOf(!0))}else{for(;t<=i&&!n[t];)t++;t>i&&(t=n.lastIndexOf(!0))}return t===-1&&(t=i),t}function gFe(e){for(var t=Array.from({length:e.length+1}).map(function(){return!0}),n=0,r=t.length;n<r;n++)t[n]=!!(_T(e[n])||_T(e[n-1]));return t}function T0e(e,t,n,r,i,s){s===void 0&&(s=Fm);var o=lFe(function(p,m){var g,b;return b0e(p)?(b="",g=""):typeof p=="number"||m?(b=typeof p=="number"?E0e(p):p,g=r(b)):(b=i(p,void 0),g=r(b)),{formattedValue:g,numAsString:b}}),a=D.useState(function(){return o(Hb(e)?t:e,n)}),l=a[0],u=a[1],c=function(p,m){p.formattedValue!==l.formattedValue&&u({formattedValue:p.formattedValue,numAsString:p.value}),s(p,m)},d=e,f=n;Hb(e)&&(d=l.numAsString,f=!0);var h=o(d,f);return D.useMemo(function(){u(h)},[h.formattedValue]),[l,c]}function yFe(e){return e.replace(/[^0-9]/g,"")}function vFe(e){return e}function bFe(e){var t=e.type;t===void 0&&(t="text");var n=e.displayType;n===void 0&&(n="input");var r=e.customInput,i=e.renderText,s=e.getInputRef,o=e.format;o===void 0&&(o=vFe);var a=e.removeFormatting;a===void 0&&(a=yFe);var l=e.defaultValue,u=e.valueIsNumericString,c=e.onValueChange,d=e.isAllowed,f=e.onChange;f===void 0&&(f=Fm);var h=e.onKeyDown;h===void 0&&(h=Fm);var p=e.onMouseUp;p===void 0&&(p=Fm);var m=e.onFocus;m===void 0&&(m=Fm);var g=e.onBlur;g===void 0&&(g=Fm);var b=e.value,v=e.getCaretBoundary;v===void 0&&(v=gFe);var x=e.isValidInputCharacter;x===void 0&&(x=_T);var E=e.isCharacterSame,_=v0e(e,["type","displayType","customInput","renderText","getInputRef","format","removeFormatting","defaultValue","valueIsNumericString","onValueChange","isAllowed","onChange","onKeyDown","onMouseUp","onFocus","onBlur","value","getCaretBoundary","isValidInputCharacter","isCharacterSame"]),C=T0e(b,l,!!u,o,a,c),S=C[0],k=S.formattedValue,R=S.numAsString,O=C[1],N=D.useRef(),L=D.useRef({formattedValue:k,numAsString:R}),$=function(Me,Be){L.current={formattedValue:Me.formattedValue,numAsString:Me.value},O(Me,Be)},B=D.useState(!1),H=B[0],Y=B[1],J=D.useRef(null),K=D.useRef({setCaretTimeout:null,focusTimeout:null});D.useEffect(function(){return Y(!0),function(){clearTimeout(K.current.setCaretTimeout),clearTimeout(K.current.focusTimeout)}},[]);var Z=o,U=function(Me,Be){var Je=parseFloat(Be);return{formattedValue:Me,value:Be,floatValue:isNaN(Je)?void 0:Je}},j=function(Me,Be,Je){Me.selectionStart===0&&Me.selectionEnd===Me.value.length||(ny(Me,Be),K.current.setCaretTimeout=setTimeout(function(){Me.value===Je&&Me.selectionStart!==Be&&ny(Me,Be)},0))},V=function(Me,Be,Je){return hte(Me,Be,v(Me),Je)},z=function(Me,Be,Je){var lt=v(Be),ht=mFe(Be,k,Me,Je,lt,x,E);return ht=hte(Be,ht,lt),ht},G=function(Me){var Be=Me.formattedValue;Be===void 0&&(Be="");var Je=Me.input,lt=Me.source,ht=Me.event,vt=Me.numAsString,Pe;if(Je){var wt=Me.inputValue||Je.value,Wt=H8(Je);Je.value=Be,Pe=z(wt,Be,Wt),Pe!==void 0&&j(Je,Pe,Be)}Be!==k&&$(U(Be,vt),{event:ht,source:lt})};D.useEffect(function(){var Me=L.current,Be=Me.formattedValue,Je=Me.numAsString;(k!==Be||R!==Je)&&$(U(k,R),{event:void 0,source:ET.props})},[k,R]);var Q=J.current?H8(J.current):void 0,ie=typeof window<"u"?D.useLayoutEffect:D.useEffect;ie(function(){var Me=J.current;if(k!==L.current.formattedValue&&Me){var Be=z(L.current.formattedValue,k,Q);Me.value=k,j(Me,Be,k)}},[k]);var me=function(Me,Be,Je){var lt=Be.target,ht=N.current?cFe(N.current,lt.selectionEnd):_0e(k,Me),vt=Object.assign(Object.assign({},ht),{lastValue:k}),Pe=a(Me,vt),wt=Z(Pe);if(Pe=a(wt,void 0),d&&!d(U(wt,Pe))){var Wt=Be.target,Ce=H8(Wt),Ne=z(Me,k,Ce);return Wt.value=k,j(Wt,Ne,k),!1}return G({formattedValue:wt,numAsString:Pe,inputValue:Me,event:Be,source:Je,input:Be.target}),!0},ae=function(Me,Be){Be===void 0&&(Be=0);var Je=Me.selectionStart,lt=Me.selectionEnd;N.current={selectionStart:Je,selectionEnd:lt+Be}},fe=function(Me){var Be=Me.target,Je=Be.value,lt=me(Je,Me,ET.event);lt&&f(Me),N.current=void 0},be=function(Me){var Be=Me.target,Je=Me.key,lt=Be.selectionStart,ht=Be.selectionEnd,vt=Be.value;vt===void 0&&(vt="");var Pe;Je==="ArrowLeft"||Je==="Backspace"?Pe=Math.max(lt-1,0):Je==="ArrowRight"?Pe=Math.min(lt+1,vt.length):Je==="Delete"&&(Pe=lt);var wt=0;Je==="Delete"&&lt===ht&&(wt=1);var Wt=Je==="ArrowLeft"||Je==="ArrowRight";if(Pe===void 0||lt!==ht&&!Wt){h(Me),ae(Be,wt);return}var Ce=Pe;if(Wt){var Ne=Je==="ArrowLeft"?"left":"right";Ce=V(vt,Pe,Ne),Ce!==Pe&&Me.preventDefault()}else Je==="Delete"&&!x(vt[Pe])?Ce=V(vt,Pe,"right"):Je==="Backspace"&&!x(vt[Pe])&&(Ce=V(vt,Pe,"left"));Ce!==Pe&&j(Be,Ce,vt),h(Me),ae(Be,wt)},te=function(Me){var Be=Me.target,Je=function(){var lt=Be.selectionStart,ht=Be.selectionEnd,vt=Be.value;if(vt===void 0&&(vt=""),lt===ht){var Pe=V(vt,lt);Pe!==lt&&j(Be,Pe,vt)}};Je(),requestAnimationFrame(function(){Je()}),p(Me),ae(Be)},re=function(Me){Me.persist&&Me.persist();var Be=Me.target,Je=Me.currentTarget;J.current=Be,K.current.focusTimeout=setTimeout(function(){var lt=Be.selectionStart,ht=Be.selectionEnd,vt=Be.value;vt===void 0&&(vt="");var Pe=V(vt,lt);Pe!==lt&&!(lt===0&&ht===vt.length)&&j(Be,Pe,vt),m(Object.assign(Object.assign({},Me),{currentTarget:Je}))},0)},we=function(Me){J.current=null,clearTimeout(K.current.focusTimeout),clearTimeout(K.current.setCaretTimeout),g(Me)},Ee=H&&fFe()?"numeric":void 0,Fe=Object.assign({inputMode:Ee},_,{type:t,value:k,onChange:fe,onKeyDown:be,onMouseUp:te,onFocus:re,onBlur:we});if(n==="text")return i?Jn.createElement(Jn.Fragment,null,i(k,_)||null):Jn.createElement("span",Object.assign({},_,{ref:s}),k);if(r){var We=r;return Jn.createElement(We,Object.assign({},Fe,{ref:s}))}return Jn.createElement("input",Object.assign({},Fe,{ref:s}))}function pte(e,t){var n=t.decimalScale,r=t.fixedDecimalScale,i=t.prefix;i===void 0&&(i="");var s=t.suffix;s===void 0&&(s="");var o=t.allowNegative,a=t.thousandsGroupStyle;if(a===void 0&&(a="thousand"),e===""||e==="-")return e;var l=TO(t),u=l.thousandSeparator,c=l.decimalSeparator,d=n!==0&&e.indexOf(".")!==-1||n&&r,f=$q(e,o),h=f.beforeDecimal,p=f.afterDecimal,m=f.addNegation;return n!==void 0&&(p=x0e(p,n,!!r)),u&&(h=aFe(h,u,a)),i&&(h=i+h),s&&(p=p+s),m&&(h="-"+h),e=h+(d&&c||"")+p,e}function TO(e){var t=e.decimalSeparator;t===void 0&&(t=".");var n=e.thousandSeparator,r=e.allowedDecimalSeparators;return n===!0&&(n=","),r||(r=[t,"."]),{decimalSeparator:t,thousandSeparator:n,allowedDecimalSeparators:r}}function wFe(e,t){e===void 0&&(e="");var n=new RegExp("(-)"),r=new RegExp("(-)(.)*(-)"),i=n.test(e),s=r.test(e);return e=e.replace(/-/g,""),i&&!s&&t&&(e="-"+e),e}function xFe(e,t){return new RegExp("(^-)|[0-9]|"+w0e(e),"g")}function EFe(e,t,n){return e===""?!0:!(t!=null&&t.match(/\d/))&&!(n!=null&&n.match(/\d/))&&typeof e=="string"&&!isNaN(Number(e))}function _Fe(e,t,n){var r;t===void 0&&(t=hFe(e));var i=n.allowNegative,s=n.prefix;s===void 0&&(s="");var o=n.suffix;o===void 0&&(o="");var a=n.decimalScale,l=t.from,u=t.to,c=u.start,d=u.end,f=TO(n),h=f.allowedDecimalSeparators,p=f.decimalSeparator,m=e[d]===p;if(_T(e)&&(e===s||e===o)&&t.lastValue==="")return e;if(d-c===1&&h.indexOf(e[c])!==-1){var g=a===0?"":p;e=e.substring(0,c)+g+e.substring(c+1,e.length)}var b=function(J,K,Z){var U=!1,j=!1;s.startsWith("-")?U=!1:J.startsWith("--")?(U=!1,j=!0):o.startsWith("-")&&J.length===o.length?U=!1:J[0]==="-"&&(U=!0);var V=U?1:0;return j&&(V=2),V&&(J=J.substring(V),K-=V,Z-=V),{value:J,start:K,end:Z,hasNegation:U}},v=b(e,c,d),x=v.hasNegation;r=v,e=r.value,c=r.start,d=r.end;var E=b(t.lastValue,l.start,l.end),_=E.start,C=E.end,S=E.value,k=e.substring(c,d);e.length&&S.length&&(_>S.length-o.length||C<s.length)&&!(k&&o.startsWith(k))&&(e=S);var R=0;e.startsWith(s)?R+=s.length:c<s.length&&(R=c),e=e.substring(R),d-=R;var O=e.length,N=e.length-o.length;e.endsWith(o)?O=N:(d>N||d>e.length-o.length)&&(O=d),e=e.substring(0,O),e=wFe(x?"-"+e:e,i),e=(e.match(xFe(p))||[]).join("");var L=e.indexOf(p);e=e.replace(new RegExp(w0e(p),"g"),function(J,K){return K===L?".":""});var $=$q(e,i),B=$.beforeDecimal,H=$.afterDecimal,Y=$.addNegation;return u.end-u.start<l.end-l.start&&B===""&&m&&!parseFloat(H)&&(e=Y?"-":""),e}function TFe(e,t){var n=t.prefix;n===void 0&&(n="");var r=t.suffix;r===void 0&&(r="");var i=Array.from({length:e.length+1}).map(function(){return!0}),s=e[0]==="-";i.fill(!1,0,n.length+(s?1:0));var o=e.length;return i.fill(!1,o-r.length+1,o+1),i}function CFe(e){var t=TO(e),n=t.thousandSeparator,r=t.decimalSeparator,i=e.prefix;i===void 0&&(i="");var s=e.allowNegative;if(s===void 0&&(s=!0),n===r)throw new Error(`
        Decimal separator can't be same as thousand separator.
        thousandSeparator: `+n+` (thousandSeparator = {true} is same as thousandSeparator = ",")
        decimalSeparator: `+r+` (default value for decimalSeparator is .)
     `);return i.startsWith("-")&&s&&(console.error(`
      Prefix can't start with '-' when allowNegative is true.
      prefix: `+i+`
      allowNegative: `+s+`
    `),s=!1),Object.assign(Object.assign({},e),{allowNegative:s})}function SFe(e){e=CFe(e),e.decimalSeparator,e.allowedDecimalSeparators,e.thousandsGroupStyle;var t=e.suffix,n=e.allowNegative,r=e.allowLeadingZeros,i=e.onKeyDown;i===void 0&&(i=Fm);var s=e.onBlur;s===void 0&&(s=Fm);var o=e.thousandSeparator,a=e.decimalScale,l=e.fixedDecimalScale,u=e.prefix;u===void 0&&(u="");var c=e.defaultValue,d=e.value,f=e.valueIsNumericString,h=e.onValueChange,p=v0e(e,["decimalSeparator","allowedDecimalSeparators","thousandsGroupStyle","suffix","allowNegative","allowLeadingZeros","onKeyDown","onBlur","thousandSeparator","decimalScale","fixedDecimalScale","prefix","defaultValue","value","valueIsNumericString","onValueChange"]),m=TO(e),g=m.decimalSeparator,b=m.allowedDecimalSeparators,v=function(Y){return pte(Y,e)},x=function(Y,J){return _Fe(Y,J,e)},E=Hb(d)?c:d,_=f??EFe(E,u,t);Hb(d)?Hb(c)||(_=_||typeof c=="number"):_=_||typeof d=="number";var C=function(Y){return b0e(Y)?Y:(typeof Y=="number"&&(Y=E0e(Y)),_&&typeof a=="number"?fte(Y,a,!!l):Y)},S=T0e(C(d),C(c),!!_,v,x,h),k=S[0],R=k.numAsString,O=k.formattedValue,N=S[1],L=function(Y){var J=Y.target,K=Y.key,Z=J.selectionStart,U=J.selectionEnd,j=J.value;if(j===void 0&&(j=""),(K==="Backspace"||K==="Delete")&&U<u.length){Y.preventDefault();return}if(Z!==U){i(Y);return}K==="Backspace"&&j[0]==="-"&&Z===u.length+1&&n&&ny(J,1),a&&l&&(K==="Backspace"&&j[Z-1]===g?(ny(J,Z-1),Y.preventDefault()):K==="Delete"&&j[Z]===g&&Y.preventDefault()),b!=null&&b.includes(K)&&j[Z]===g&&ny(J,Z+1);var V=o===!0?",":o;K==="Backspace"&&j[Z-1]===V&&ny(J,Z-1),K==="Delete"&&j[Z]===V&&ny(J,Z+1),i(Y)},$=function(Y){var J=R;if(J.match(/\d/g)||(J=""),r||(J=uFe(J)),l&&a&&(J=fte(J,a,l)),J!==R){var K=pte(J,e);N({formattedValue:K,value:J,floatValue:parseFloat(J)},{event:Y,source:ET.event})}s(Y)},B=function(Y){return Y===g?!0:_T(Y)},H=function(Y){var J=Y.currentValue,K=Y.lastValue,Z=Y.formattedValue,U=Y.currentValueIndex,j=Y.formattedValueIndex,V=J[U],z=Z[j],G=_0e(K,J),Q=G.to,ie=function(me){return x(me).indexOf(".")+u.length};return d===0&&l&&a&&J[Q.start]===g&&ie(J)<U&&ie(Z)>j?!1:U>=Q.start&&U<Q.end&&b&&b.includes(V)&&z===g?!0:V===z};return Object.assign(Object.assign({},p),{value:O,valueIsNumericString:!1,isValidInputCharacter:B,isCharacterSame:H,onValueChange:N,format:v,removeFormatting:x,getCaretBoundary:function(Y){return TFe(Y,e)},onKeyDown:L,onBlur:$})}function AFe(e){var t=SFe(e);return Jn.createElement(bFe,Object.assign({},t))}function mte({direction:e,style:t,...n}){return T.jsx("svg",{style:{width:"var(--ni-chevron-size)",height:"var(--ni-chevron-size)",transform:e==="up"?"rotate(180deg)":void 0,...t},viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...n,children:T.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}var F9={root:"m_e2f5cd4e",controls:"m_95e17d22",control:"m_80b4b171"};const kFe=/^(0\.0*|-0(\.0*)?)$/,IFe=/^-?0\d+(\.\d+)?\.?$/;function j9(e){return typeof e=="string"&&e!==""&&!Number.isNaN(Number(e))}function W8(e){return typeof e=="number"?e<Number.MAX_SAFE_INTEGER:e===""||j9(e)&&Number(e)<Number.MAX_SAFE_INTEGER}function RFe(e){return e.toString().replace(".","").length}function DFe(e,t){return(typeof e=="number"?e<Number.MAX_SAFE_INTEGER:!Number.isNaN(Number(e)))&&!Number.isNaN(e)&&RFe(t)<14&&t!==""}function gte(e,t,n){if(e===void 0)return!0;const r=t===void 0||e>=t,i=n===void 0||e<=n;return r&&i}const PFe={step:1,clampBehavior:"blur",allowDecimal:!0,allowNegative:!0,withKeyboardEvents:!0,allowLeadingZeros:!0,trimLeadingZeroesOnBlur:!0,startValue:0},NFe=(e,{size:t})=>({controls:{"--ni-chevron-size":cn(t,"ni-chevron-size")}}),Mq=Ze((e,t)=>{const n=$e("NumberInput",PFe,e),{className:r,classNames:i,styles:s,unstyled:o,vars:a,onChange:l,onValueChange:u,value:c,defaultValue:d,max:f,min:h,step:p,hideControls:m,rightSection:g,isAllowed:b,clampBehavior:v,onBlur:x,allowDecimal:E,decimalScale:_,onKeyDown:C,onKeyDownCapture:S,handlersRef:k,startValue:R,disabled:O,rightSectionPointerEvents:N,allowNegative:L,readOnly:$,size:B,rightSectionWidth:H,stepHoldInterval:Y,stepHoldDelay:J,allowLeadingZeros:K,withKeyboardEvents:Z,trimLeadingZeroesOnBlur:U,...j}=n,V=Nt({name:"NumberInput",classes:F9,props:n,classNames:i,styles:s,unstyled:o,vars:a,varsResolver:NFe}),{resolvedClassNames:z,resolvedStyles:G}=Tv({classNames:i,styles:s,props:n}),[Q,ie]=Hs({value:c,defaultValue:d,finalValue:"",onChange:l}),me=J!==void 0&&Y!==void 0,ae=D.useRef(null),fe=D.useRef(null),be=D.useRef(0),te=(Pe,wt)=>{wt.source==="event"&&ie(DFe(Pe.floatValue,Pe.value)&&!kFe.test(Pe.value)&&!(K&&IFe.test(Pe.value))?Pe.floatValue:Pe.value),u==null||u(Pe,wt)},re=Pe=>{const wt=String(Pe).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return wt?Math.max(0,(wt[1]?wt[1].length:0)-(wt[2]?+wt[2]:0)):0},we=Pe=>{ae.current&&typeof Pe<"u"&&ae.current.setSelectionRange(Pe,Pe)},Ee=D.useRef(C9);Ee.current=()=>{if(!W8(Q))return;let Pe;const wt=re(Q),Wt=re(p),Ce=Math.max(wt,Wt),Ne=10**Ce;if(!j9(Q)&&(typeof Q!="number"||Number.isNaN(Q)))Pe=Kd(R,h,f);else if(f!==void 0){const xt=(Math.round(Number(Q)*Ne)+Math.round(p*Ne))/Ne;Pe=xt<=f?xt:f}else Pe=(Math.round(Number(Q)*Ne)+Math.round(p*Ne))/Ne;const ot=Pe.toFixed(Ce);ie(parseFloat(ot)),u==null||u({floatValue:parseFloat(ot),formattedValue:ot,value:ot},{source:"increment"}),setTimeout(()=>{var xt;return we((xt=ae.current)==null?void 0:xt.value.length)},0)};const Fe=D.useRef(C9);Fe.current=()=>{if(!W8(Q))return;let Pe;const wt=h!==void 0?h:L?Number.MIN_SAFE_INTEGER:0,Wt=re(Q),Ce=re(p),Ne=Math.max(Wt,Ce),ot=10**Ne;if(!j9(Q)&&typeof Q!="number"||Number.isNaN(Q))Pe=Kd(R,wt,f);else{const Ct=(Math.round(Number(Q)*ot)-Math.round(p*ot))/ot;Pe=wt!==void 0&&Ct<wt?wt:Ct}const xt=Pe.toFixed(Ne);ie(parseFloat(xt)),u==null||u({floatValue:parseFloat(xt),formattedValue:xt,value:xt},{source:"decrement"}),setTimeout(()=>{var Ct;return we((Ct=ae.current)==null?void 0:Ct.value.length)},0)};const We=Pe=>{C==null||C(Pe),!($||!Z)&&(Pe.key==="ArrowUp"&&(Pe.preventDefault(),Ee.current()),Pe.key==="ArrowDown"&&(Pe.preventDefault(),Fe.current()))},Me=Pe=>{if(S==null||S(Pe),Pe.key==="Backspace"){const wt=ae.current;wt.selectionStart===0&&wt.selectionStart===wt.selectionEnd&&(Pe.preventDefault(),window.setTimeout(()=>we(0),0))}};dD(k,{increment:Ee.current,decrement:Fe.current});const Be=Pe=>{Pe?Ee.current():Fe.current(),be.current+=1},Je=Pe=>{if(Be(Pe),me){const wt=typeof Y=="number"?Y:Y(be.current);fe.current=window.setTimeout(()=>Je(Pe),wt)}},lt=(Pe,wt)=>{var Wt;Pe.preventDefault(),(Wt=ae.current)==null||Wt.focus(),Be(wt),me&&(fe.current=window.setTimeout(()=>Je(wt),J))},ht=()=>{fe.current&&window.clearTimeout(fe.current),fe.current=null,be.current=0},vt=T.jsxs("div",{...V("controls"),children:[T.jsx(ul,{...V("control"),tabIndex:-1,"aria-hidden":!0,disabled:O||typeof Q=="number"&&f!==void 0&&Q>=f,mod:{direction:"up"},onMouseDown:Pe=>Pe.preventDefault(),onPointerDown:Pe=>{lt(Pe,!0)},onPointerUp:ht,onPointerLeave:ht,children:T.jsx(mte,{direction:"up"})}),T.jsx(ul,{...V("control"),tabIndex:-1,"aria-hidden":!0,disabled:O||typeof Q=="number"&&h!==void 0&&Q<=h,mod:{direction:"down"},onMouseDown:Pe=>Pe.preventDefault(),onPointerDown:Pe=>{lt(Pe,!1)},onPointerUp:ht,onPointerLeave:ht,children:T.jsx(mte,{direction:"down"})})]});return T.jsx(bl,{component:AFe,allowNegative:L,className:Mi(F9.root,r),size:B,...j,readOnly:$,disabled:O,value:Q,getInputRef:ms(t,ae),onValueChange:te,rightSection:m||$||!W8(Q)?g:g||vt,classNames:z,styles:G,unstyled:o,__staticSelector:"NumberInput",decimalScale:E?_:0,onKeyDown:We,onKeyDownCapture:Me,rightSectionPointerEvents:N??(O?"none":void 0),rightSectionWidth:H??`var(--ni-right-section-width-${B||"sm"})`,allowLeadingZeros:K,onBlur:Pe=>{if(x==null||x(Pe),v==="blur"&&typeof Q=="number"&&Kd(Q,h,f)!==Q&&ie(Kd(Q,h,f)),U&&typeof Q=="string"&&re(Q)<15){const wt=Q.replace(/^0+/,""),Wt=parseFloat(wt);ie(Number.isNaN(Wt)||Wt>Number.MAX_SAFE_INTEGER?wt:Kd(Wt,h,f))}},isAllowed:Pe=>v==="strict"?b?b(Pe)&&gte(Pe.floatValue,h,f):gte(Pe.floatValue,h,f):b?b(Pe):!0})});Mq.classes={...bl.classes,...F9};Mq.displayName="@mantine/core/NumberInput";const[OFe,C0e]=ps("Progress.Root component was not found in tree");var MC={root:"m_db6d6462",section:"m_2242eb65","stripes-animation":"m_81a374bd",label:"m_91e40b74"};const $Fe={},Lq=Ze((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=$e("ProgressLabel",$Fe,e),l=C0e();return T.jsx(Se,{ref:t,...l.getStyles("label",{className:r,style:i,classNames:n,styles:s}),...a})});Lq.classes=MC;Lq.displayName="@mantine/core/ProgressLabel";const MFe={},LFe=(e,{size:t,radius:n,transitionDuration:r})=>({root:{"--progress-size":cn(t,"progress-size"),"--progress-radius":n===void 0?void 0:Tr(n),"--progress-transition-duration":typeof r=="number"?`${r}ms`:void 0}}),CO=Ze((e,t)=>{const n=$e("ProgressRoot",MFe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,autoContrast:u,transitionDuration:c,...d}=n,f=Nt({name:"Progress",classes:MC,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:LFe});return T.jsx(OFe,{value:{getStyles:f,autoContrast:u},children:T.jsx(Se,{ref:t,...f("root"),...d})})});CO.classes=MC;CO.displayName="@mantine/core/ProgressRoot";const FFe={withAria:!0},SO=Ze((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,value:a,withAria:l,color:u,striped:c,animated:d,mod:f,...h}=$e("ProgressSection",FFe,e),p=C0e(),m=Yi(),g=l?{role:"progressbar","aria-valuemax":100,"aria-valuemin":0,"aria-valuenow":a,"aria-valuetext":`${a}%`}:{};return T.jsx(Se,{ref:t,...p.getStyles("section",{className:r,classNames:n,styles:s,style:i}),...h,...g,mod:[{striped:c||d,animated:d},f],__vars:{"--progress-section-width":`${a}%`,"--progress-section-color":$r(u,m),"--progress-label-color":yx(p.autoContrast,m)?_v({color:u,theme:m,autoContrast:p.autoContrast}):void 0}})});SO.classes=MC;SO.displayName="@mantine/core/ProgressSection";const jFe={},Ix=Ze((e,t)=>{const n=$e("Progress",jFe,e),{value:r,classNames:i,styles:s,vars:o,color:a,striped:l,animated:u,"aria-label":c,...d}=n,{resolvedClassNames:f,resolvedStyles:h}=Tv({classNames:i,styles:s,props:n});return T.jsx(CO,{ref:t,classNames:f,styles:h,vars:o,...d,children:T.jsx(SO,{value:r,color:a,striped:l,animated:u,"aria-label":c})})});Ix.classes=MC;Ix.displayName="@mantine/core/Progress";Ix.Section=SO;Ix.Root=CO;Ix.Label=Lq;const[BFe,S0e]=Pp(),[zFe,UFe]=Pp();var A0e={card:"m_9dc8ae12"};const qFe={withBorder:!0},HFe=(e,{radius:t})=>({card:{"--card-radius":Tr(t)}}),Fq=Ze((e,t)=>{const n=$e("RadioCard",qFe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,checked:u,mod:c,withBorder:d,value:f,onClick:h,name:p,onKeyDown:m,...g}=n,b=Nt({name:"RadioCard",classes:A0e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:HFe,rootSelector:"card"}),{dir:v}=Np(),x=S0e(),E=typeof u=="boolean"?u:(x==null?void 0:x.value)===f||!1,_=p||(x==null?void 0:x.name),C=S=>{if(m==null||m(S),["ArrowDown","ArrowUp","ArrowLeft","ArrowRight"].includes(S.nativeEvent.code)){S.preventDefault();const k=Array.from(document.querySelectorAll(`[role="radio"][name="${_||"__mantine"}"]`)),R=k.findIndex(L=>L===S.target),O=R+1>=k.length?0:R+1,N=R-1<0?k.length-1:R-1;S.nativeEvent.code==="ArrowDown"&&(k[O].focus(),k[O].click()),S.nativeEvent.code==="ArrowUp"&&(k[N].focus(),k[N].click()),S.nativeEvent.code==="ArrowLeft"&&(k[v==="ltr"?N:O].focus(),k[v==="ltr"?N:O].click()),S.nativeEvent.code==="ArrowRight"&&(k[v==="ltr"?O:N].focus(),k[v==="ltr"?O:N].click())}};return T.jsx(zFe,{value:{checked:E},children:T.jsx(ul,{ref:t,mod:[{"with-border":d,checked:E},c],...b("card"),...g,role:"radio","aria-checked":E,name:_,onClick:S=>{h==null||h(S),x==null||x.onChange(f||"")},onKeyDown:C})})});Fq.displayName="@mantine/core/RadioCard";Fq.classes=A0e;const WFe={},jq=Ze((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,name:l,readOnly:u,...c}=$e("RadioGroup",WFe,e),d=Ia(l),[f,h]=Hs({value:n,defaultValue:r,finalValue:"",onChange:i}),p=m=>!u&&h(typeof m=="string"?m:m.currentTarget.value);return T.jsx(BFe,{value:{value:f,onChange:p,size:s,name:d},children:T.jsx(Dr.Wrapper,{size:s,ref:t,...o,...c,labelElement:"div",__staticSelector:"RadioGroup",children:T.jsx(dq,{role:"radiogroup",children:a})})})});jq.classes=Dr.Wrapper.classes;jq.displayName="@mantine/core/RadioGroup";function k0e({size:e,style:t,...n}){return T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 5 5",style:{width:Oe(e),height:Oe(e),...t},"aria-hidden":!0,...n,children:T.jsx("circle",{cx:"2.5",cy:"2.5",r:"2.5",fill:"currentColor"})})}var I0e={indicator:"m_717d7ff6",icon:"m_3e4da632","indicator--outline":"m_2980836c"};const VFe={icon:k0e},GFe=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=Ff({color:n||e.primaryColor,theme:e}),l=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{indicator:{"--radio-size":cn(r,"radio-size"),"--radio-radius":t===void 0?void 0:Tr(t),"--radio-color":s==="outline"?l:$r(n,e),"--radio-icon-size":cn(r,"radio-icon-size"),"--radio-icon-color":i?$r(i,e):yx(o,e)?_v({color:n,theme:e,autoContrast:o}):void 0}}},Bq=Ze((e,t)=>{const n=$e("RadioIndicator",VFe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,icon:u,radius:c,color:d,iconColor:f,autoContrast:h,checked:p,mod:m,variant:g,disabled:b,...v}=n,x=u,E=Nt({name:"RadioIndicator",classes:I0e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:GFe,rootSelector:"indicator"}),_=UFe(),C=typeof p=="boolean"?p:(_==null?void 0:_.checked)||!1;return T.jsx(Se,{ref:t,...E("indicator",{variant:g}),variant:g,mod:[{checked:C,disabled:b},m],...v,children:T.jsx(x,{...E("icon")})})});Bq.displayName="@mantine/core/RadioIndicator";Bq.classes=I0e;var R0e={root:"m_f3f1af94",inner:"m_89c4f5e4",icon:"m_f3ed6b2b",radio:"m_8a3dbb89","radio--outline":"m_1bfe9d39"};const YFe={labelPosition:"right"},KFe=(e,{size:t,radius:n,color:r,iconColor:i,variant:s,autoContrast:o})=>{const a=Ff({color:r||e.primaryColor,theme:e}),l=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{root:{"--radio-size":cn(t,"radio-size"),"--radio-radius":n===void 0?void 0:Tr(n),"--radio-color":s==="outline"?l:$r(r,e),"--radio-icon-color":i?$r(i,e):yx(o,e)?_v({color:r,theme:e,autoContrast:o}):void 0,"--radio-icon-size":cn(t,"radio-icon-size")}}},Au=Ze((e,t)=>{const n=$e("Radio",YFe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,id:u,size:c,label:d,labelPosition:f,description:h,error:p,radius:m,color:g,variant:b,disabled:v,wrapperProps:x,icon:E=k0e,rootRef:_,iconColor:C,onChange:S,mod:k,...R}=n,O=Nt({name:"Radio",classes:R0e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:KFe}),N=S0e(),L=(N==null?void 0:N.size)??c,$=n.size?c:L,{styleProps:B,rest:H}=Sv(R),Y=Ia(u),J=N?{checked:N.value===H.value,name:H.name??N.name,onChange:K=>{N.onChange(K),S==null||S(K)}}:{};return T.jsx(oO,{...O("root"),__staticSelector:"Radio",__stylesApiProps:n,id:Y,size:$,labelPosition:f,label:d,description:h,error:p,disabled:v,classNames:r,styles:o,unstyled:a,"data-checked":J.checked||void 0,variant:b,ref:_,mod:k,...B,...x,children:T.jsxs(Se,{...O("inner"),mod:{"label-position":f},children:[T.jsx(Se,{...O("radio",{focusable:!0,variant:b}),onChange:S,...H,...J,component:"input",mod:{error:!!p},ref:t,id:Y,disabled:v,type:"radio"}),T.jsx(E,{...O("icon"),"aria-hidden":!0})]})})});Au.classes=R0e;Au.displayName="@mantine/core/Radio";Au.Group=jq;Au.Card=Fq;Au.Indicator=Bq;const XFe={duration:100,transition:"fade"};function QFe(e,t){return{...XFe,...t,...e}}function JFe({offset:e,position:t,defaultOpened:n}){const[r,i]=D.useState(n),s=D.useRef(null),{x:o,y:a,elements:l,refs:u,update:c,placement:d}=AU({placement:t,middleware:[_U({crossAxis:!0,padding:5,rootBoundary:"document"})]}),f=d.includes("right")?e:t.includes("left")?e*-1:0,h=d.includes("bottom")?e:t.includes("top")?e*-1:0,p=D.useCallback(({clientX:m,clientY:g})=>{u.setPositionReference({getBoundingClientRect(){return{width:0,height:0,x:m,y:g,left:m+f,top:g+h,right:m,bottom:g}}})},[l.reference]);return D.useEffect(()=>{if(u.floating.current){const m=s.current;m.addEventListener("mousemove",p);const g=Jh(u.floating.current);return g.forEach(b=>{b.addEventListener("scroll",c)}),()=>{m.removeEventListener("mousemove",p),g.forEach(b=>{b.removeEventListener("scroll",c)})}}},[l.reference,u.floating.current,c,p,r]),{handleMouseMove:p,x:o,y:a,opened:r,setOpened:i,boundaryRef:s,floating:u.setFloating}}var AO={tooltip:"m_1b3c8819",arrow:"m_f898399f"};const ZFe={refProp:"ref",withinPortal:!0,offset:10,defaultOpened:!1,position:"right",zIndex:Gs("popover")},e9e=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":t===void 0?void 0:Tr(t),"--tooltip-bg":n?$r(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),zq=Ze((e,t)=>{const n=$e("TooltipFloating",ZFe,e),{children:r,refProp:i,withinPortal:s,style:o,className:a,classNames:l,styles:u,unstyled:c,radius:d,color:f,label:h,offset:p,position:m,multiline:g,zIndex:b,disabled:v,defaultOpened:x,variant:E,vars:_,portalProps:C,...S}=n,k=Yi(),R=Nt({name:"TooltipFloating",props:n,classes:AO,className:a,style:o,classNames:l,styles:u,unstyled:c,rootSelector:"tooltip",vars:_,varsResolver:e9e}),{handleMouseMove:O,x:N,y:L,opened:$,boundaryRef:B,floating:H,setOpened:Y}=JFe({offset:p,position:m,defaultOpened:x});if(!Dp(r))throw new Error("[@mantine/core] Tooltip.Floating component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const J=ms(B,GN(r),t),K=r.props,Z=j=>{var V;(V=K.onMouseEnter)==null||V.call(K,j),O(j),Y(!0)},U=j=>{var V;(V=K.onMouseLeave)==null||V.call(K,j),Y(!1)};return T.jsxs(T.Fragment,{children:[T.jsx(M0,{...C,withinPortal:s,children:T.jsx(Se,{...S,...R("tooltip",{style:{...lU(o,k),zIndex:b,display:!v&&$?"block":"none",top:(L&&Math.round(L))??"",left:(N&&Math.round(N))??""}}),variant:E,ref:H,mod:{multiline:g},children:h})}),D.cloneElement(r,{...K,[i]:J,onMouseEnter:Z,onMouseLeave:U})]})});zq.classes=AO;zq.displayName="@mantine/core/TooltipFloating";const D0e=D.createContext(!1),t9e=D0e.Provider,n9e=()=>D.useContext(D0e),r9e={openDelay:0,closeDelay:0};function Uq(e){const{openDelay:t,closeDelay:n,children:r}=$e("TooltipGroup",r9e,e);return T.jsx(t9e,{value:!0,children:T.jsx(z6e,{delay:{open:t,close:n},children:r})})}Uq.displayName="@mantine/core/TooltipGroup";Uq.extend=e=>e;function i9e(e){if(e===void 0)return{shift:!0,flip:!0};const t={...e};return e.shift===void 0&&(t.shift=!0),e.flip===void 0&&(t.flip=!0),t}function s9e(e){const t=i9e(e.middlewares),n=[rme(e.offset)];return t.shift&&n.push(_U(typeof t.shift=="boolean"?{padding:8}:{padding:8,...t.shift})),t.flip&&n.push(typeof t.flip=="boolean"?yD():yD(t.flip)),n.push(ime({element:e.arrowRef,padding:e.arrowOffset})),t.inline?n.push(typeof t.inline=="boolean"?N2():N2(t.inline)):e.inline&&n.push(N2()),n}function o9e(e){var C,S,k;const[t,n]=D.useState(e.defaultOpened),i=typeof e.opened=="boolean"?e.opened:t,s=n9e(),o=Ia(),{delay:a,currentId:l,setCurrentId:u}=lme(),c=D.useCallback(R=>{n(R),R&&u(o)},[u,o]),{x:d,y:f,context:h,refs:p,update:m,placement:g,middlewareData:{arrow:{x:b,y:v}={}}}=AU({strategy:e.strategy,placement:e.position,open:i,onOpenChange:c,middleware:s9e(e)});U6e(h,{id:o});const{getReferenceProps:x,getFloatingProps:E}=K6e([B6e(h,{enabled:(C=e.events)==null?void 0:C.hover,delay:s?a:{open:e.openDelay,close:e.closeDelay},mouseOnly:!((S=e.events)!=null&&S.touch)}),Y6e(h,{enabled:(k=e.events)==null?void 0:k.focus,visibleOnly:!0}),Q6e(h,{role:"tooltip"}),V6e(h,{enabled:typeof e.opened>"u"})]);gme({opened:i,position:e.position,positionDependencies:e.positionDependencies,floating:{refs:p,update:m}}),xf(()=>{var R;(R=e.onPositionChange)==null||R.call(e,g)},[g]);const _=i&&l&&l!==o;return{x:d,y:f,arrowX:b,arrowY:v,reference:p.setReference,floating:p.setFloating,getFloatingProps:E,getReferenceProps:x,isGroupPhase:_,opened:i,placement:g}}const yte={position:"top",refProp:"ref",withinPortal:!0,inline:!1,defaultOpened:!1,arrowSize:4,arrowOffset:5,arrowRadius:0,arrowPosition:"side",offset:5,transitionProps:{duration:100,transition:"fade"},events:{hover:!0,focus:!1,touch:!1},zIndex:Gs("popover"),positionDependencies:[],middlewares:{flip:!0,shift:!0,inline:!1}},a9e=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":t===void 0?void 0:Tr(t),"--tooltip-bg":n?$r(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),xn=Ze((e,t)=>{const n=$e("Tooltip",yte,e),{children:r,position:i,refProp:s,label:o,openDelay:a,closeDelay:l,onPositionChange:u,opened:c,defaultOpened:d,withinPortal:f,radius:h,color:p,classNames:m,styles:g,unstyled:b,style:v,className:x,withArrow:E,arrowSize:_,arrowOffset:C,arrowRadius:S,arrowPosition:k,offset:R,transitionProps:O,multiline:N,events:L,zIndex:$,disabled:B,positionDependencies:H,onClick:Y,onMouseEnter:J,onMouseLeave:K,inline:Z,variant:U,keepMounted:j,vars:V,portalProps:z,mod:G,floatingStrategy:Q,middlewares:ie,...me}=$e("Tooltip",yte,n),{dir:ae}=Np(),fe=D.useRef(null),be=o9e({position:ume(ae,i),closeDelay:l,openDelay:a,onPositionChange:u,opened:c,defaultOpened:d,events:L,arrowRef:fe,arrowOffset:C,offset:typeof R=="number"?R+(E?_/2:0):R,positionDependencies:[...H,r],inline:Z,strategy:Q,middlewares:ie}),te=Nt({name:"Tooltip",props:n,classes:AO,className:x,style:v,classNames:m,styles:g,unstyled:b,rootSelector:"tooltip",vars:V,varsResolver:a9e});if(!Dp(r))throw new Error("[@mantine/core] Tooltip component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const re=ms(be.reference,GN(r),t),we=QFe(O,{duration:100,transition:"fade"}),Ee=r.props;return T.jsxs(T.Fragment,{children:[T.jsx(M0,{...z,withinPortal:f,children:T.jsx(jf,{...we,keepMounted:j,mounted:!B&&!!be.opened,duration:be.isGroupPhase?10:we.duration,children:Fe=>T.jsxs(Se,{...me,"data-fixed":Q==="fixed"||void 0,variant:U,mod:[{multiline:N},G],...be.getFloatingProps({ref:be.floating,className:te("tooltip").className,style:{...te("tooltip").style,...Fe,zIndex:$,top:be.y??0,left:be.x??0}}),children:[o,T.jsx(kU,{ref:fe,arrowX:be.arrowX,arrowY:be.arrowY,visible:E,position:be.placement,arrowSize:_,arrowOffset:C,arrowRadius:S,arrowPosition:k,...te("arrow")})]})})}),D.cloneElement(r,be.getReferenceProps({onClick:Y,onMouseEnter:J,onMouseLeave:K,onMouseMove:n.onMouseMove,onPointerDown:n.onPointerDown,onPointerEnter:n.onPointerEnter,[s]:re,className:Mi(x,Ee.className),...Ee}))]})});xn.classes=AO;xn.displayName="@mantine/core/Tooltip";xn.Floating=zq;xn.Group=Uq;const l9e={searchable:!1,withCheckIcon:!0,allowDeselect:!0,checkIconPosition:"left"},Rx=Ze((e,t)=>{const n=$e("Select",l9e,e),{classNames:r,styles:i,unstyled:s,vars:o,dropdownOpened:a,defaultDropdownOpened:l,onDropdownClose:u,onDropdownOpen:c,onFocus:d,onBlur:f,onClick:h,onChange:p,data:m,value:g,defaultValue:b,selectFirstOptionOnChange:v,onOptionSubmit:x,comboboxProps:E,readOnly:_,disabled:C,filter:S,limit:k,withScrollArea:R,maxDropdownHeight:O,size:N,searchable:L,rightSection:$,checkIconPosition:B,withCheckIcon:H,nothingFoundMessage:Y,name:J,form:K,searchValue:Z,defaultSearchValue:U,onSearchChange:j,allowDeselect:V,error:z,rightSectionPointerEvents:G,id:Q,clearable:ie,clearButtonProps:me,hiddenInputProps:ae,renderOption:fe,onClear:be,autoComplete:te,scrollAreaProps:re,__defaultRightSection:we,__clearSection:Ee,__clearable:Fe,...We}=n,Me=D.useMemo(()=>JU(m),[m]),Be=D.useMemo(()=>ZU(Me),[Me]),Je=Ia(Q),[lt,ht,vt]=Hs({value:g,defaultValue:b,finalValue:null,onChange:p}),Pe=typeof lt=="string"?Be[lt]:void 0,wt=YOe(Pe),[Wt,Ce]=Hs({value:Z,defaultValue:U,finalValue:Pe?Pe.label:"",onChange:j}),Ne=uq({opened:a,defaultOpened:l,onDropdownOpen:()=>{c==null||c(),Ne.updateSelectedOptionIndex("active",{scrollIntoView:!0})},onDropdownClose:()=>{u==null||u(),Ne.resetSelectedOption()}}),{resolvedClassNames:ot,resolvedStyles:xt}=Tv({props:n,styles:i,classNames:r});D.useEffect(()=>{v&&Ne.selectFirstOption()},[v,lt]),D.useEffect(()=>{g===null&&Ce(""),typeof g=="string"&&Pe&&((wt==null?void 0:wt.value)!==Pe.value||(wt==null?void 0:wt.label)!==Pe.label)&&Ce(Pe.label)},[g,Pe]);const Ct=T.jsx(Fn.ClearButton,{...me,onClear:()=>{ht(null,null),Ce(""),be==null||be()}});return T.jsxs(T.Fragment,{children:[T.jsxs(Fn,{store:Ne,__staticSelector:"Select",classNames:ot,styles:xt,unstyled:s,readOnly:_,onOptionSubmit:Qt=>{x==null||x(Qt);const yn=V&&Be[Qt].value===lt?null:Be[Qt],er=yn?yn.value:null;er!==lt&&ht(er,yn),!vt&&Ce(typeof er=="string"&&(yn==null?void 0:yn.label)||""),Ne.closeDropdown()},size:N,...E,children:[T.jsx(Fn.Target,{targetType:L?"input":"button",autoComplete:te,children:T.jsx(bl,{id:Je,ref:t,__defaultRightSection:T.jsx(Fn.Chevron,{size:N,error:z,unstyled:s}),__clearSection:Ct,__clearable:ie&&!!lt&&!C&&!_,rightSection:$,rightSectionPointerEvents:G||(Ct?"all":"none"),...We,size:N,__staticSelector:"Select",disabled:C,readOnly:_||!L,value:Wt,onChange:Qt=>{Ce(Qt.currentTarget.value),Ne.openDropdown(),v&&Ne.selectFirstOption()},onFocus:Qt=>{L&&Ne.openDropdown(),d==null||d(Qt)},onBlur:Qt=>{var yn;L&&Ne.closeDropdown(),Ce(lt!=null&&((yn=Be[lt])==null?void 0:yn.label)||""),f==null||f(Qt)},onClick:Qt=>{L?Ne.openDropdown():Ne.toggleDropdown(),h==null||h(Qt)},classNames:ot,styles:xt,unstyled:s,pointer:!L,error:z})}),T.jsx(Xme,{data:Me,hidden:_||C,filter:S,search:Wt,limit:k,hiddenWhenEmpty:!Y,withScrollArea:R,maxDropdownHeight:O,filterOptions:L&&(Pe==null?void 0:Pe.label)!==Wt,value:lt,checkIconPosition:B,withCheckIcon:H,nothingFoundMessage:Y,unstyled:s,labelId:We.label?`${Je}-label`:void 0,"aria-label":We.label?void 0:We["aria-label"],renderOption:fe,scrollAreaProps:re})]}),T.jsx(Fn.HiddenInput,{value:lt,name:J,form:K,disabled:C,...ae})]})});Rx.classes={...bl.classes,...Fn.classes};Rx.displayName="@mantine/core/Select";function u9e({spacing:e,verticalSpacing:t,cols:n,selector:r}){var c;const i=Yi(),s=t===void 0?e:t,o=O0({"--sg-spacing-x":Wi(Oc(e)),"--sg-spacing-y":Wi(Oc(s)),"--sg-cols":(c=Oc(n))==null?void 0:c.toString()}),a=Or(i.breakpoints).reduce((d,f)=>(d[f]||(d[f]={}),typeof e=="object"&&e[f]!==void 0&&(d[f]["--sg-spacing-x"]=Wi(e[f])),typeof s=="object"&&s[f]!==void 0&&(d[f]["--sg-spacing-y"]=Wi(s[f])),typeof n=="object"&&n[f]!==void 0&&(d[f]["--sg-cols"]=n[f]),d),{}),u=vT(Or(a),i.breakpoints).filter(d=>Or(a[d.value]).length>0).map(d=>({query:`(min-width: ${i.breakpoints[d.value]})`,styles:a[d.value]}));return T.jsx(Cv,{styles:o,media:u,selector:r})}function V8(e){return typeof e=="object"&&e!==null?Or(e):[]}function c9e(e){return e.sort((t,n)=>yT(t)-yT(n))}function d9e({spacing:e,verticalSpacing:t,cols:n}){const r=Array.from(new Set([...V8(e),...V8(t),...V8(n)]));return c9e(r)}function f9e({spacing:e,verticalSpacing:t,cols:n,selector:r}){var u;const i=t===void 0?e:t,s=O0({"--sg-spacing-x":Wi(Oc(e)),"--sg-spacing-y":Wi(Oc(i)),"--sg-cols":(u=Oc(n))==null?void 0:u.toString()}),o=d9e({spacing:e,verticalSpacing:t,cols:n}),a=o.reduce((c,d)=>(c[d]||(c[d]={}),typeof e=="object"&&e[d]!==void 0&&(c[d]["--sg-spacing-x"]=Wi(e[d])),typeof i=="object"&&i[d]!==void 0&&(c[d]["--sg-spacing-y"]=Wi(i[d])),typeof n=="object"&&n[d]!==void 0&&(c[d]["--sg-cols"]=n[d]),c),{}),l=o.map(c=>({query:`simple-grid (min-width: ${c})`,styles:a[c]}));return T.jsx(Cv,{styles:s,container:l,selector:r})}var P0e={container:"m_925c2d2c",root:"m_2415a157"};const h9e={cols:1,spacing:"md",type:"media"},qq=Ze((e,t)=>{const n=$e("SimpleGrid",h9e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,cols:u,verticalSpacing:c,spacing:d,type:f,...h}=n,p=Nt({name:"SimpleGrid",classes:P0e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l}),m=kC();return f==="container"?T.jsxs(T.Fragment,{children:[T.jsx(f9e,{...n,selector:`.${m}`}),T.jsx("div",{...p("container"),children:T.jsx(Se,{ref:t,...p("root",{className:m}),...h})})]}):T.jsxs(T.Fragment,{children:[T.jsx(u9e,{...n,selector:`.${m}`}),T.jsx(Se,{ref:t,...p("root",{className:m}),...h})]})});qq.classes=P0e;qq.displayName="@mantine/core/SimpleGrid";const[p9e,kO]=ps("SliderProvider was not found in tree"),N0e=D.forwardRef(({size:e,disabled:t,variant:n,color:r,thumbSize:i,radius:s,...o},a)=>{const{getStyles:l}=kO();return T.jsx(Se,{tabIndex:-1,variant:n,size:e,ref:a,...l("root"),...o})});N0e.displayName="@mantine/core/SliderRoot";const O0e=D.forwardRef(({max:e,min:t,value:n,position:r,label:i,dragging:s,onMouseDown:o,onKeyDownCapture:a,labelTransitionProps:l,labelAlwaysOn:u,thumbLabel:c,onFocus:d,onBlur:f,showLabelOnHover:h,isHovered:p,children:m=null,disabled:g},b)=>{const{getStyles:v}=kO(),[x,E]=D.useState(!1),_=u||s||x||h&&p;return T.jsxs(Se,{tabIndex:0,role:"slider","aria-label":c,"aria-valuemax":e,"aria-valuemin":t,"aria-valuenow":n,ref:b,__vars:{"--slider-thumb-offset":`${r}%`},...v("thumb",{focusable:!0}),mod:{dragging:s,disabled:g},onFocus:C=>{E(!0),typeof d=="function"&&d(C)},onBlur:C=>{E(!1),typeof f=="function"&&f(C)},onTouchStart:o,onMouseDown:o,onKeyDownCapture:a,onClick:C=>C.stopPropagation(),children:[m,T.jsx(jf,{mounted:i!=null&&!!_,transition:"fade",duration:0,...l,children:C=>T.jsx("div",{...v("label",{style:C}),children:i})})]})});O0e.displayName="@mantine/core/SliderThumb";function $0e({value:e,min:t,max:n}){const r=(e-t)/(n-t)*100;return Math.min(Math.max(r,0),100)}function m9e({mark:e,offset:t,value:n,inverted:r=!1}){return r?typeof t=="number"&&e.value<=t||e.value>=n:typeof t=="number"?e.value>=t&&e.value<=n:e.value<=n}function M0e({marks:e,min:t,max:n,disabled:r,value:i,offset:s,inverted:o}){const{getStyles:a}=kO();if(!e)return null;const l=e.map((u,c)=>D.createElement(Se,{...a("markWrapper"),__vars:{"--mark-offset":`${$0e({value:u.value,min:t,max:n})}%`},key:c},T.jsx(Se,{...a("mark"),mod:{filled:m9e({mark:u,value:i,offset:s,inverted:o}),disabled:r}}),u.label&&T.jsx("div",{...a("markLabel"),children:u.label})));return T.jsx("div",{children:l})}M0e.displayName="@mantine/core/SliderMarks";function L0e({filled:e,children:t,offset:n,disabled:r,marksOffset:i,inverted:s,containerProps:o,...a}){const{getStyles:l}=kO();return T.jsx(Se,{...l("trackContainer"),mod:{disabled:r},...o,children:T.jsxs(Se,{...l("track"),mod:{inverted:s,disabled:r},children:[T.jsx(Se,{mod:{inverted:s,disabled:r},__vars:{"--slider-bar-width":`calc(${e}% + var(--slider-size))`,"--slider-bar-offset":`calc(${n}% - var(--slider-size))`},...l("bar")}),t,T.jsx(M0e,{...a,offset:i,disabled:r,inverted:s})]})})}L0e.displayName="@mantine/core/SliderTrack";function g9e({value:e,containerWidth:t,min:n,max:r,step:i,precision:s}){const a=(t?Math.min(Math.max(e,0),t)/t:e)*(r-n),l=(a!==0?Math.round(a/i)*i:0)+n,u=Math.max(l,n);return s!==void 0?Number(u.toFixed(s)):u}function bk(e,t){return parseFloat(e.toFixed(t))}function y9e(e){if(!e)return 0;const t=e.toString().split(".");return t.length>1?t[1].length:0}function G8(e,t){const r=[...t].sort((i,s)=>i.value-s.value).find(i=>i.value>e);return r?r.value:e}function Y8(e,t){const r=[...t].sort((i,s)=>s.value-i.value).find(i=>i.value<e);return r?r.value:e}function vte(e){const t=[...e].sort((n,r)=>n.value-r.value);return t.length>0?t[0].value:0}function bte(e){const t=[...e].sort((n,r)=>n.value-r.value);return t.length>0?t[t.length-1].value:100}var F0e={root:"m_dd36362e",label:"m_c9357328",thumb:"m_c9a9a60a",trackContainer:"m_a8645c2",track:"m_c9ade57f",bar:"m_38aeed47",markWrapper:"m_b7b0423a",mark:"m_dd33bc19",markLabel:"m_68c77a5b"};const v9e={radius:"xl",min:0,max:100,step:1,marks:[],label:e=>e,labelTransitionProps:{transition:"fade",duration:0},labelAlwaysOn:!1,thumbLabel:"",showLabelOnHover:!0,disabled:!1,scale:e=>e},b9e=(e,{size:t,color:n,thumbSize:r,radius:i})=>({root:{"--slider-size":cn(t,"slider-size"),"--slider-color":n?$r(n,e):void 0,"--slider-radius":i===void 0?void 0:Tr(i),"--slider-thumb-size":r!==void 0?Oe(r):"calc(var(--slider-size) * 2)"}}),Wb=Ze((e,t)=>{const n=$e("Slider",v9e,e),{classNames:r,styles:i,value:s,onChange:o,onChangeEnd:a,size:l,min:u,max:c,step:d,precision:f,defaultValue:h,name:p,marks:m,label:g,labelTransitionProps:b,labelAlwaysOn:v,thumbLabel:x,showLabelOnHover:E,thumbChildren:_,disabled:C,unstyled:S,scale:k,inverted:R,className:O,style:N,vars:L,hiddenInputProps:$,restrictToMarks:B,thumbProps:H,...Y}=n,J=Nt({name:"Slider",props:n,classes:F0e,classNames:r,className:O,styles:i,style:N,vars:L,varsResolver:b9e,unstyled:S}),{dir:K}=Np(),[Z,U]=D.useState(!1),[j,V]=Hs({value:typeof s=="number"?Kd(s,u,c):s,defaultValue:typeof h=="number"?Kd(h,u,c):h,finalValue:Kd(0,u,c),onChange:o}),z=D.useRef(j),G=D.useRef(null),Q=D.useRef(null),ie=$0e({value:j,min:u,max:c}),me=k(j),ae=typeof g=="function"?g(me):g,fe=f??y9e(d),be=D.useCallback(({x:Ee})=>{if(!C){const Fe=g9e({value:Ee,min:u,max:c,step:d,precision:fe});V(B&&(m!=null&&m.length)?yee(Fe,m.map(We=>We.value)):Fe),z.current=Fe}},[C,u,c,d,fe,V,m,B]),{ref:te,active:re}=WOe(be,{onScrubEnd:()=>a==null?void 0:a(B&&(m!=null&&m.length)?yee(z.current,m.map(Ee=>Ee.value)):z.current)},K),we=Ee=>{var Fe,We,Me,Be,Je,lt;if(!C)switch(Ee.key){case"ArrowUp":{if(Ee.preventDefault(),(Fe=Q.current)==null||Fe.focus(),B&&m){const vt=G8(j,m);V(vt),a==null||a(vt);break}const ht=bk(Math.min(Math.max(j+d,u),c),fe);V(ht),a==null||a(ht);break}case"ArrowRight":{if(Ee.preventDefault(),(We=Q.current)==null||We.focus(),B&&m){const vt=K==="rtl"?Y8(j,m):G8(j,m);V(vt),a==null||a(vt);break}const ht=bk(Math.min(Math.max(K==="rtl"?j-d:j+d,u),c),fe);V(ht),a==null||a(ht);break}case"ArrowDown":{if(Ee.preventDefault(),(Me=Q.current)==null||Me.focus(),B&&m){const vt=Y8(j,m);V(vt),a==null||a(vt);break}const ht=bk(Math.min(Math.max(j-d,u),c),fe);V(ht),a==null||a(ht);break}case"ArrowLeft":{if(Ee.preventDefault(),(Be=Q.current)==null||Be.focus(),B&&m){const vt=K==="rtl"?G8(j,m):Y8(j,m);V(vt),a==null||a(vt);break}const ht=bk(Math.min(Math.max(K==="rtl"?j+d:j-d,u),c),fe);V(ht),a==null||a(ht);break}case"Home":{if(Ee.preventDefault(),(Je=Q.current)==null||Je.focus(),B&&m){V(vte(m)),a==null||a(vte(m));break}V(u),a==null||a(u);break}case"End":{if(Ee.preventDefault(),(lt=Q.current)==null||lt.focus(),B&&m){V(bte(m)),a==null||a(bte(m));break}V(c),a==null||a(c);break}}};return T.jsx(p9e,{value:{getStyles:J},children:T.jsxs(N0e,{...Y,ref:ms(t,G),onKeyDownCapture:we,onMouseDownCapture:()=>{var Ee;return(Ee=G.current)==null?void 0:Ee.focus()},size:l,disabled:C,children:[T.jsx(L0e,{inverted:R,offset:0,filled:ie,marks:m,min:u,max:c,value:me,disabled:C,containerProps:{ref:te,onMouseEnter:E?()=>U(!0):void 0,onMouseLeave:E?()=>U(!1):void 0},children:T.jsx(O0e,{max:c,min:u,value:me,position:ie,dragging:re,label:ae,ref:Q,labelTransitionProps:b,labelAlwaysOn:v,thumbLabel:x,showLabelOnHover:E,isHovered:Z,disabled:C,...H,children:_})}),T.jsx("input",{type:"hidden",name:p,value:me,...$})]})})});Wb.classes=F0e;Wb.displayName="@mantine/core/Slider";const w9e={},Ul=Ze((e,t)=>{const{w:n,h:r,miw:i,mih:s,...o}=$e("Space",w9e,e);return T.jsx(Se,{ref:t,...o,w:n,miw:i??n,h:r,mih:s??r})});Ul.displayName="@mantine/core/Space";var j0e={root:"m_559cce2d",content:"m_b912df4e",control:"m_b9131032"};const x9e={maxHeight:100,initialState:!1},E9e=(e,{transitionDuration:t})=>({root:{"--spoiler-transition-duration":t!==void 0?`${t}ms`:void 0}}),Hq=Ze((e,t)=>{const n=$e("Spoiler",x9e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,initialState:u,maxHeight:c,hideLabel:d,showLabel:f,children:h,controlRef:p,transitionDuration:m,id:g,expanded:b,onExpandedChange:v,...x}=n,E=Nt({name:"Spoiler",classes:j0e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:E9e}),_=Ia(g),C=`${_}-region`,[S,k]=Hs({value:b,defaultValue:u,finalValue:!1,onChange:v}),{ref:R,height:O}=GOe(),N=S?d:f,L=N!==null&&c<O;return T.jsxs(Se,{...E("root"),id:_,ref:t,"data-has-spoiler":L||void 0,...x,children:[L&&T.jsx(kv,{component:"button",type:"button",ref:p,onClick:()=>k(!S),"aria-expanded":S,"aria-controls":C,...E("control"),children:N}),T.jsx("div",{...E("content",{style:{maxHeight:S?O?Oe(O):void 0:Oe(c)}}),"data-reduce-motion":!0,role:"region",id:C,children:T.jsx("div",{ref:R,children:h})})]})});Hq.classes=j0e;Hq.displayName="@mantine/core/Spoiler";var B0e={root:"m_6d731127"};const _9e={gap:"md",align:"stretch",justify:"flex-start"},T9e=(e,{gap:t,align:n,justify:r})=>({root:{"--stack-gap":Wi(t),"--stack-align":n,"--stack-justify":r}}),Ms=Ze((e,t)=>{const n=$e("Stack",_9e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,align:u,justify:c,gap:d,variant:f,...h}=n,p=Nt({name:"Stack",props:n,classes:B0e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:T9e});return T.jsx(Se,{ref:t,...p("root"),variant:f,...h})});Ms.classes=B0e;Ms.displayName="@mantine/core/Stack";const z0e=D.createContext(null),C9e=z0e.Provider,S9e=()=>D.useContext(z0e),A9e={},Wq=Ze((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,readOnly:l,...u}=$e("SwitchGroup",A9e,e),[c,d]=Hs({value:n,defaultValue:r,finalValue:[],onChange:i}),f=h=>{const p=h.currentTarget.value;!l&&d(c.includes(p)?c.filter(m=>m!==p):[...c,p])};return T.jsx(C9e,{value:{value:c,onChange:f,size:s},children:T.jsx(Dr.Wrapper,{size:s,ref:t,...o,...u,labelElement:"div",__staticSelector:"SwitchGroup",children:T.jsx(dq,{role:"group",children:a})})})});Wq.classes=Dr.Wrapper.classes;Wq.displayName="@mantine/core/SwitchGroup";var U0e={root:"m_5f93f3bb",input:"m_926b4011",track:"m_9307d992",thumb:"m_93039a1d",trackLabel:"m_8277e082"};const k9e={labelPosition:"right"},I9e=(e,{radius:t,color:n,size:r})=>({root:{"--switch-radius":t===void 0?void 0:Tr(t),"--switch-height":cn(r,"switch-height"),"--switch-width":cn(r,"switch-width"),"--switch-thumb-size":cn(r,"switch-thumb-size"),"--switch-label-font-size":cn(r,"switch-label-font-size"),"--switch-track-label-padding":cn(r,"switch-track-label-padding"),"--switch-color":n?$r(n,e):void 0}}),Sy=Ze((e,t)=>{const n=$e("Switch",k9e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,color:u,label:c,offLabel:d,onLabel:f,id:h,size:p,radius:m,wrapperProps:g,thumbIcon:b,checked:v,defaultChecked:x,onChange:E,labelPosition:_,description:C,error:S,disabled:k,variant:R,rootRef:O,mod:N,...L}=n,$=S9e(),B=p||($==null?void 0:$.size),H=Nt({name:"Switch",props:n,classes:U0e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:I9e}),{styleProps:Y,rest:J}=Sv(L),K=Ia(h),Z=$?{checked:$.value.includes(J.value),onChange:$.onChange}:{},[U,j]=Hs({value:Z.checked??v,defaultValue:x,finalValue:!1});return T.jsxs(oO,{...H("root"),__staticSelector:"Switch",__stylesApiProps:n,id:K,size:B,labelPosition:_,label:c,description:C,error:S,disabled:k,bodyElement:"label",labelElement:"span",classNames:r,styles:o,unstyled:a,"data-checked":Z.checked||v||void 0,variant:R,ref:O,mod:N,...Y,...g,children:[T.jsx("input",{...J,disabled:k,checked:U,"data-checked":Z.checked||v||void 0,onChange:V=>{var z;$?(z=Z.onChange)==null||z.call(Z,V):E==null||E(V),j(V.currentTarget.checked)},id:K,ref:t,type:"checkbox",role:"switch",...H("input")}),T.jsxs(Se,{"aria-hidden":"true",mod:{error:S,"label-position":_,"without-labels":!f&&!d},...H("track"),children:[T.jsx(Se,{component:"span",mod:"reduce-motion",...H("thumb"),children:b}),T.jsx("span",{...H("trackLabel"),children:U?f:d})]})]})});Sy.classes={...U0e,...jme};Sy.displayName="@mantine/core/Switch";Sy.Group=Wq;const[R9e,D9e]=ps("Table component was not found in the tree");var LC={table:"m_b23fa0ef",th:"m_4e7aa4f3",tr:"m_4e7aa4fd",td:"m_4e7aa4ef",tbody:"m_b2404537",thead:"m_b242d975",caption:"m_9e5a3ac7",scrollContainer:"m_a100c15",scrollContainerInner:"m_62259741"};function P9e(e,t){if(!t)return;const n={};return t.columnBorder&&e.withColumnBorders&&(n["data-with-column-border"]=!0),t.rowBorder&&e.withRowBorders&&(n["data-with-row-border"]=!0),t.striped&&e.striped&&(n["data-striped"]=e.striped),t.highlightOnHover&&e.highlightOnHover&&(n["data-hover"]=!0),t.captionSide&&e.captionSide&&(n["data-side"]=e.captionSide),t.stickyHeader&&e.stickyHeader&&(n["data-sticky"]=!0),n}function Dv(e,t){const n=`Table${e.charAt(0).toUpperCase()}${e.slice(1)}`,r=Ze((i,s)=>{const o=$e(n,{},i),{classNames:a,className:l,style:u,styles:c,...d}=o,f=D9e();return T.jsx(Se,{component:e,ref:s,...P9e(f,t),...f.getStyles(e,{className:l,classNames:a,style:u,styles:c,props:o}),...d})});return r.displayName=`@mantine/core/${n}`,r.classes=LC,r}const B9=Dv("th",{columnBorder:!0}),q0e=Dv("td",{columnBorder:!0}),DR=Dv("tr",{rowBorder:!0,striped:!0,highlightOnHover:!0}),H0e=Dv("thead",{stickyHeader:!0}),W0e=Dv("tbody"),V0e=Dv("tfoot"),G0e=Dv("caption",{captionSide:!0});function Vq({data:e}){return T.jsxs(T.Fragment,{children:[e.caption&&T.jsx(G0e,{children:e.caption}),e.head&&T.jsx(H0e,{children:T.jsx(DR,{children:e.head.map((t,n)=>T.jsx(B9,{children:t},n))})}),e.body&&T.jsx(W0e,{children:e.body.map((t,n)=>T.jsx(DR,{children:t.map((r,i)=>T.jsx(q0e,{children:r},i))},n))}),e.foot&&T.jsx(V0e,{children:T.jsx(DR,{children:e.foot.map((t,n)=>T.jsx(B9,{children:t},n))})})]})}Vq.displayName="@mantine/core/TableDataRenderer";const N9e={type:"scrollarea"},O9e=(e,{minWidth:t,type:n})=>({scrollContainer:{"--table-min-width":Oe(t),"--table-overflow":n==="native"?"auto":void 0}}),Gq=Ze((e,t)=>{const n=$e("TableScrollContainer",N9e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,children:u,minWidth:c,type:d,...f}=n,h=Nt({name:"TableScrollContainer",classes:LC,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:O9e,rootSelector:"scrollContainer"});return T.jsx(Se,{component:d==="scrollarea"?fp:"div",...d==="scrollarea"?{offsetScrollbars:"x"}:{},ref:t,...h("scrollContainer"),...f,children:T.jsx("div",{...h("scrollContainerInner"),children:u})})});Gq.classes=LC;Gq.displayName="@mantine/core/TableScrollContainer";const $9e={withRowBorders:!0,verticalSpacing:7},M9e=(e,{layout:t,captionSide:n,horizontalSpacing:r,verticalSpacing:i,borderColor:s,stripedColor:o,highlightOnHoverColor:a,striped:l,highlightOnHover:u,stickyHeaderOffset:c,stickyHeader:d})=>({table:{"--table-layout":t,"--table-caption-side":n,"--table-horizontal-spacing":Wi(r),"--table-vertical-spacing":Wi(i),"--table-border-color":s?$r(s,e):void 0,"--table-striped-color":l&&o?$r(o,e):void 0,"--table-highlight-on-hover-color":u&&a?$r(a,e):void 0,"--table-sticky-header-offset":d?Oe(c):void 0}}),jt=Ze((e,t)=>{const n=$e("Table",$9e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,horizontalSpacing:u,verticalSpacing:c,captionSide:d,stripedColor:f,highlightOnHoverColor:h,striped:p,highlightOnHover:m,withColumnBorders:g,withRowBorders:b,withTableBorder:v,borderColor:x,layout:E,variant:_,data:C,children:S,stickyHeader:k,stickyHeaderOffset:R,mod:O,tabularNums:N,...L}=n,$=Nt({name:"Table",props:n,className:i,style:s,classes:LC,classNames:r,styles:o,unstyled:a,rootSelector:"table",vars:l,varsResolver:M9e});return T.jsx(R9e,{value:{getStyles:$,stickyHeader:k,striped:p===!0?"odd":p||void 0,highlightOnHover:m,withColumnBorders:g,withRowBorders:b,captionSide:d||"bottom"},children:T.jsx(Se,{component:"table",variant:_,ref:t,mod:[{"data-with-table-border":v,"data-tabular-nums":N},O],...$("table"),...L,children:S||!!C&&T.jsx(Vq,{data:C})})})});jt.classes=LC;jt.displayName="@mantine/core/Table";jt.Td=q0e;jt.Th=B9;jt.Tr=DR;jt.Thead=H0e;jt.Tbody=W0e;jt.Tfoot=V0e;jt.Caption=G0e;jt.ScrollContainer=Gq;jt.DataRenderer=Vq;const[L9e,Yq]=ps("Tabs component was not found in the tree");var FC={root:"m_89d60db1","list--default":"m_576c9d4",list:"m_89d33d6d",panel:"m_b0c91715",tab:"m_4ec4dce6",tabSection:"m_fc420b1f","tab--default":"m_539e827b","list--outline":"m_6772fbd5","tab--outline":"m_b59ab47c","tab--pills":"m_c3381914"};const F9e={},Kq=Ze((e,t)=>{const n=$e("TabsList",F9e,e),{children:r,className:i,grow:s,justify:o,classNames:a,styles:l,style:u,mod:c,...d}=n,f=Yq();return T.jsx(Se,{...d,...f.getStyles("list",{className:i,style:u,classNames:a,styles:l,props:n,variant:f.variant}),ref:t,role:"tablist",variant:f.variant,mod:[{grow:s,orientation:f.orientation,placement:f.orientation==="vertical"&&f.placement,inverted:f.inverted},c],"aria-orientation":f.orientation,__vars:{"--tabs-justify":o},children:r})});Kq.classes=FC;Kq.displayName="@mantine/core/TabsList";const j9e={},Xq=Ze((e,t)=>{const n=$e("TabsPanel",j9e,e),{children:r,className:i,value:s,classNames:o,styles:a,style:l,mod:u,keepMounted:c,...d}=n,f=Yq(),h=f.value===s,p=f.keepMounted||c||h?r:null;return T.jsx(Se,{...d,...f.getStyles("panel",{className:i,classNames:o,styles:a,style:[l,h?void 0:{display:"none"}],props:n}),ref:t,mod:[{orientation:f.orientation},u],role:"tabpanel",id:f.getPanelId(s),"aria-labelledby":f.getTabId(s),children:p})});Xq.classes=FC;Xq.displayName="@mantine/core/TabsPanel";const B9e={},Qq=Ze((e,t)=>{const n=$e("TabsTab",B9e,e),{className:r,children:i,rightSection:s,leftSection:o,value:a,onClick:l,onKeyDown:u,disabled:c,color:d,style:f,classNames:h,styles:p,vars:m,mod:g,tabIndex:b,...v}=n,x=Yi(),{dir:E}=Np(),_=Yq(),C=a===_.value,S=R=>{_.onChange(_.allowTabDeactivation&&a===_.value?null:a),l==null||l(R)},k={classNames:h,styles:p,props:n};return T.jsxs(ul,{...v,..._.getStyles("tab",{className:r,style:f,variant:_.variant,...k}),disabled:c,unstyled:_.unstyled,variant:_.variant,mod:[{active:C,disabled:c,orientation:_.orientation,inverted:_.inverted,placement:_.orientation==="vertical"&&_.placement},g],ref:t,role:"tab",id:_.getTabId(a),"aria-selected":C,tabIndex:b||C||_.value===null?0:-1,"aria-controls":_.getPanelId(a),onClick:S,__vars:{"--tabs-color":d?$r(d,x):void 0},onKeyDown:Zz({siblingSelector:'[role="tab"]',parentSelector:'[role="tablist"]',activateOnFocus:_.activateTabWithKeyboard,loop:_.loop,orientation:_.orientation||"horizontal",dir:E,onKeyDown:u}),children:[o&&T.jsx("span",{..._.getStyles("tabSection",k),"data-position":"left",children:o}),i&&T.jsx("span",{..._.getStyles("tabLabel",k),children:i}),s&&T.jsx("span",{..._.getStyles("tabSection",k),"data-position":"right",children:s})]})});Qq.classes=FC;Qq.displayName="@mantine/core/TabsTab";const wte="Tabs.Tab or Tabs.Panel component was rendered with invalid value or without value",z9e={keepMounted:!0,orientation:"horizontal",loop:!0,activateTabWithKeyboard:!0,allowTabDeactivation:!1,unstyled:!1,inverted:!1,variant:"default",placement:"left"},U9e=(e,{radius:t,color:n,autoContrast:r})=>({root:{"--tabs-radius":Tr(t),"--tabs-color":$r(n,e),"--tabs-text-color":yx(r,e)?_v({color:n,theme:e,autoContrast:r}):void 0}}),Ln=Ze((e,t)=>{const n=$e("Tabs",z9e,e),{defaultValue:r,value:i,onChange:s,orientation:o,children:a,loop:l,id:u,activateTabWithKeyboard:c,allowTabDeactivation:d,variant:f,color:h,radius:p,inverted:m,placement:g,keepMounted:b,classNames:v,styles:x,unstyled:E,className:_,style:C,vars:S,autoContrast:k,mod:R,...O}=n,N=Ia(u),[L,$]=Hs({value:i,defaultValue:r,finalValue:null,onChange:s}),B=Nt({name:"Tabs",props:n,classes:FC,className:_,style:C,classNames:v,styles:x,unstyled:E,vars:S,varsResolver:U9e});return T.jsx(L9e,{value:{placement:g,value:L,orientation:o,id:N,loop:l,activateTabWithKeyboard:c,getTabId:uD(`${N}-tab`,wte),getPanelId:uD(`${N}-panel`,wte),onChange:$,allowTabDeactivation:d,variant:f,color:h,radius:p,inverted:m,keepMounted:b,unstyled:E,getStyles:B},children:T.jsx(Se,{ref:t,id:N,variant:f,mod:[{orientation:o,inverted:o==="horizontal"&&m,placement:o==="vertical"&&g},R],...B("root"),...O,children:a})})});Ln.classes=FC;Ln.displayName="@mantine/core/Tabs";Ln.Tab=Qq;Ln.Panel=Xq;Ln.List=Kq;const q9e={},jh=Ze((e,t)=>{const n=$e("TextInput",q9e,e);return T.jsx(bl,{component:"input",ref:t,...n,__staticSelector:"TextInput"})});jh.classes=bl.classes;jh.displayName="@mantine/core/TextInput";const H9e=["h1","h2","h3","h4","h5","h6"],W9e=["xs","sm","md","lg","xl"];function V9e(e,t){const n=t!==void 0?t:`h${e}`;return H9e.includes(n)?{fontSize:`var(--mantine-${n}-font-size)`,fontWeight:`var(--mantine-${n}-font-weight)`,lineHeight:`var(--mantine-${n}-line-height)`}:W9e.includes(n)?{fontSize:`var(--mantine-font-size-${n})`,fontWeight:`var(--mantine-h${e}-font-weight)`,lineHeight:`var(--mantine-h${e}-line-height)`}:{fontSize:Oe(n),fontWeight:`var(--mantine-h${e}-font-weight)`,lineHeight:`var(--mantine-h${e}-line-height)`}}var Y0e={root:"m_8a5d1357"};const G9e={order:1},Y9e=(e,{order:t,size:n,lineClamp:r,textWrap:i})=>{const s=V9e(t,n);return{root:{"--title-fw":s.fontWeight,"--title-lh":s.lineHeight,"--title-fz":s.fontSize,"--title-line-clamp":typeof r=="number"?r.toString():void 0,"--title-text-wrap":i}}},mi=Ze((e,t)=>{const n=$e("Title",G9e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,order:l,vars:u,size:c,variant:d,lineClamp:f,textWrap:h,mod:p,...m}=n,g=Nt({name:"Title",props:n,classes:Y0e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Y9e});return[1,2,3,4,5,6].includes(l)?T.jsx(Se,{...g("root"),component:`h${l}`,variant:d,ref:t,mod:[{order:l,"data-line-clamp":typeof f=="number"},p],size:c,...m}):null});mi.classes=Y0e;mi.displayName="@mantine/core/Title";function K9e(e){let t=e,n=!1;const r=new Set;return{getState(){return t},updateState(i){t=typeof i=="function"?i(t):i},setState(i){this.updateState(i),r.forEach(s=>s(t))},initialize(i){n||(t=i,n=!0)},subscribe(i){return r.add(i),()=>r.delete(i)}}}function X9e(e){return D.useSyncExternalStore(e.subscribe,()=>e.getState(),()=>e.getState())}function Q9e(e,t,n){const r=[],i=[],s={};for(const o of e){const a=o.position||t;s[a]=s[a]||0,s[a]+=1,s[a]<=n?i.push(o):r.push(o)}return{notifications:i,queue:r}}const J9e=()=>K9e({notifications:[],queue:[],defaultPosition:"bottom-right",limit:5}),Pv=J9e(),Z9e=(e=Pv)=>X9e(e);function Dx(e,t){const n=e.getState(),r=t([...n.notifications,...n.queue]),i=Q9e(r,n.defaultPosition,n.limit);e.setState({notifications:i.notifications,queue:i.queue,limit:n.limit,defaultPosition:n.defaultPosition})}function eje(e,t=Pv){const n=e.id||Ub();return Dx(t,r=>e.id&&r.some(i=>i.id===e.id)?r:[...r,{...e,id:n}]),n}function K0e(e,t=Pv){return Dx(t,n=>n.filter(r=>{var i;return r.id===e?((i=r.onClose)==null||i.call(r,r),!1):!0})),e}function tje(e,t=Pv){return Dx(t,n=>n.map(r=>r.id===e.id?{...r,...e}:r)),e.id}function nje(e=Pv){Dx(e,()=>[])}function rje(e=Pv){Dx(e,t=>t.slice(0,e.getState().limit))}const Nv={show:eje,hide:K0e,update:tje,clean:nje,cleanQueue:rje,updateState:Dx};function z9(e,t){return z9=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},z9(e,t)}function X0e(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,z9(e,t)}var K8={exports:{}},X8,xte;function ije(){if(xte)return X8;xte=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return X8=e,X8}var Q8,Ete;function sje(){if(Ete)return Q8;Ete=1;var e=ije();function t(){}function n(){}return n.resetWarningCache=t,Q8=function(){function r(o,a,l,u,c,d){if(d!==e){var f=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw f.name="Invariant Violation",f}}r.isRequired=r;function i(){return r}var s={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:n,resetWarningCache:t};return s.PropTypes=s,s},Q8}var _te;function oje(){return _te||(_te=1,K8.exports=sje()()),K8.exports}var aje=oje();const wD=vl(aje),Tte={disabled:!1},xD=Jn.createContext(null);var lje=function(t){return t.scrollTop},Y_="unmounted",Ug="exited",qg="entering",_b="entered",U9="exiting",Fp=function(e){X0e(t,e);function t(r,i){var s;s=e.call(this,r,i)||this;var o=i,a=o&&!o.isMounting?r.enter:r.appear,l;return s.appearStatus=null,r.in?a?(l=Ug,s.appearStatus=qg):l=_b:r.unmountOnExit||r.mountOnEnter?l=Y_:l=Ug,s.state={status:l},s.nextCallback=null,s}t.getDerivedStateFromProps=function(i,s){var o=i.in;return o&&s.status===Y_?{status:Ug}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(i){var s=null;if(i!==this.props){var o=this.state.status;this.props.in?o!==qg&&o!==_b&&(s=qg):(o===qg||o===_b)&&(s=U9)}this.updateStatus(!1,s)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var i=this.props.timeout,s,o,a;return s=o=a=i,i!=null&&typeof i!="number"&&(s=i.exit,o=i.enter,a=i.appear!==void 0?i.appear:o),{exit:s,enter:o,appear:a}},n.updateStatus=function(i,s){if(i===void 0&&(i=!1),s!==null)if(this.cancelNextCallback(),s===qg){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:G_.findDOMNode(this);o&&lje(o)}this.performEnter(i)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Ug&&this.setState({status:Y_})},n.performEnter=function(i){var s=this,o=this.props.enter,a=this.context?this.context.isMounting:i,l=this.props.nodeRef?[a]:[G_.findDOMNode(this),a],u=l[0],c=l[1],d=this.getTimeouts(),f=a?d.appear:d.enter;if(!i&&!o||Tte.disabled){this.safeSetState({status:_b},function(){s.props.onEntered(u)});return}this.props.onEnter(u,c),this.safeSetState({status:qg},function(){s.props.onEntering(u,c),s.onTransitionEnd(f,function(){s.safeSetState({status:_b},function(){s.props.onEntered(u,c)})})})},n.performExit=function(){var i=this,s=this.props.exit,o=this.getTimeouts(),a=this.props.nodeRef?void 0:G_.findDOMNode(this);if(!s||Tte.disabled){this.safeSetState({status:Ug},function(){i.props.onExited(a)});return}this.props.onExit(a),this.safeSetState({status:U9},function(){i.props.onExiting(a),i.onTransitionEnd(o.exit,function(){i.safeSetState({status:Ug},function(){i.props.onExited(a)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(i,s){s=this.setNextCallback(s),this.setState(i,s)},n.setNextCallback=function(i){var s=this,o=!0;return this.nextCallback=function(a){o&&(o=!1,s.nextCallback=null,i(a))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},n.onTransitionEnd=function(i,s){this.setNextCallback(s);var o=this.props.nodeRef?this.props.nodeRef.current:G_.findDOMNode(this),a=i==null&&!this.props.addEndListener;if(!o||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var l=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],u=l[0],c=l[1];this.props.addEndListener(u,c)}i!=null&&setTimeout(this.nextCallback,i)},n.render=function(){var i=this.state.status;if(i===Y_)return null;var s=this.props,o=s.children;s.in,s.mountOnEnter,s.unmountOnExit,s.appear,s.enter,s.exit,s.timeout,s.addEndListener,s.onEnter,s.onEntering,s.onEntered,s.onExit,s.onExiting,s.onExited,s.nodeRef;var a=xq(s,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return Jn.createElement(xD.Provider,{value:null},typeof o=="function"?o(i,a):Jn.cloneElement(Jn.Children.only(o),a))},t}(Jn.Component);Fp.contextType=xD;Fp.propTypes={};function q1(){}Fp.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:q1,onEntering:q1,onEntered:q1,onExit:q1,onExiting:q1,onExited:q1};Fp.UNMOUNTED=Y_;Fp.EXITED=Ug;Fp.ENTERING=qg;Fp.ENTERED=_b;Fp.EXITING=U9;function uje(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Jq(e,t){var n=function(s){return t&&D.isValidElement(s)?t(s):s},r=Object.create(null);return e&&D.Children.map(e,function(i){return i}).forEach(function(i){r[i.key]=n(i)}),r}function cje(e,t){e=e||{},t=t||{};function n(c){return c in t?t[c]:e[c]}var r=Object.create(null),i=[];for(var s in e)s in t?i.length&&(r[s]=i,i=[]):i.push(s);var o,a={};for(var l in t){if(r[l])for(o=0;o<r[l].length;o++){var u=r[l][o];a[r[l][o]]=n(u)}a[l]=n(l)}for(o=0;o<i.length;o++)a[i[o]]=n(i[o]);return a}function fy(e,t,n){return n[t]!=null?n[t]:e.props[t]}function dje(e,t){return Jq(e.children,function(n){return D.cloneElement(n,{onExited:t.bind(null,n),in:!0,appear:fy(n,"appear",e),enter:fy(n,"enter",e),exit:fy(n,"exit",e)})})}function fje(e,t,n){var r=Jq(e.children),i=cje(t,r);return Object.keys(i).forEach(function(s){var o=i[s];if(D.isValidElement(o)){var a=s in t,l=s in r,u=t[s],c=D.isValidElement(u)&&!u.props.in;l&&(!a||c)?i[s]=D.cloneElement(o,{onExited:n.bind(null,o),in:!0,exit:fy(o,"exit",e),enter:fy(o,"enter",e)}):!l&&a&&!c?i[s]=D.cloneElement(o,{in:!1}):l&&a&&D.isValidElement(u)&&(i[s]=D.cloneElement(o,{onExited:n.bind(null,o),in:u.props.in,exit:fy(o,"exit",e),enter:fy(o,"enter",e)}))}}),i}var hje=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},pje={component:"div",childFactory:function(t){return t}},km=function(e){X0e(t,e);function t(r,i){var s;s=e.call(this,r,i)||this;var o=s.handleExited.bind(uje(s));return s.state={contextValue:{isMounting:!0},handleExited:o,firstRender:!0},s}var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(i,s){var o=s.children,a=s.handleExited,l=s.firstRender;return{children:l?dje(i,a):fje(i,o,a),firstRender:!1}},n.handleExited=function(i,s){var o=Jq(this.props.children);i.key in o||(i.props.onExited&&i.props.onExited(s),this.mounted&&this.setState(function(a){var l=vD({},a.children);return delete l[i.key],{children:l}}))},n.render=function(){var i=this.props,s=i.component,o=i.childFactory,a=xq(i,["component","childFactory"]),l=this.state.contextValue,u=hje(this.state.children).map(o);return delete a.appear,delete a.enter,delete a.exit,s===null?Jn.createElement(xD.Provider,{value:l},u):Jn.createElement(xD.Provider,{value:l},Jn.createElement(s,a,u))},t}(Jn.Component);km.propTypes={};km.defaultProps=pje;const Q0e=["bottom-center","bottom-left","bottom-right","top-center","top-left","top-right"];function mje(e,t){return e.reduce((n,r)=>(n[r.position||t].push(r),n),Q0e.reduce((n,r)=>(n[r]=[],n),{}))}const Cte={left:"translateX(-100%)",right:"translateX(100%)","top-center":"translateY(-100%)","bottom-center":"translateY(100%)"},gje={left:"translateX(0)",right:"translateX(0)","top-center":"translateY(0)","bottom-center":"translateY(0)"};function yje({state:e,maxHeight:t,position:n,transitionDuration:r}){const[i,s]=n.split("-"),o=s==="center"?`${i}-center`:s,a={opacity:0,maxHeight:t,transform:Cte[o],transitionDuration:`${r}ms, ${r}ms, ${r}ms`,transitionTimingFunction:"cubic-bezier(.51,.3,0,1.21), cubic-bezier(.51,.3,0,1.21), linear",transitionProperty:"opacity, transform, max-height"},l={opacity:1,transform:gje[o]},u={opacity:0,maxHeight:0,transform:Cte[o]};return{...a,...{entering:l,entered:l,exiting:u,exited:u}[e]}}function vje(e,t){return typeof t=="number"?t:t===!1||e===!1?!1:e}const J0e=D.forwardRef(({data:e,onHide:t,autoClose:n,...r},i)=>{const{autoClose:s,message:o,...a}=e,l=vje(n,e.autoClose),u=D.useRef(-1),c=()=>window.clearTimeout(u.current),d=()=>{t(e.id),c()},f=()=>{typeof l=="number"&&(u.current=window.setTimeout(d,l))};return D.useEffect(()=>{var h;(h=e.onOpen)==null||h.call(e,e)},[]),D.useEffect(()=>(f(),c),[l]),T.jsx(Oq,{...r,...a,onClose:d,ref:i,onMouseEnter:c,onMouseLeave:f,children:o})});J0e.displayName="@mantine/notifications/NotificationContainer";var Z0e={root:"m_b37d9ac7",notification:"m_5ed0edd0"};const bje=Fp,wje={position:"bottom-right",autoClose:4e3,transitionDuration:250,containerWidth:440,notificationMaxHeight:200,limit:5,zIndex:Gs("overlay"),store:Pv,withinPortal:!0},xje=(e,{zIndex:t,containerWidth:n})=>({root:{"--notifications-z-index":t==null?void 0:t.toString(),"--notifications-container-width":Oe(n)}}),jp=Ze((e,t)=>{const n=$e("Notifications",wje,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,position:u,autoClose:c,transitionDuration:d,containerWidth:f,notificationMaxHeight:h,limit:p,zIndex:m,store:g,portalProps:b,withinPortal:v,...x}=n,E=Yi(),_=Z9e(g),C=UOe(),S=VN(),k=D.useRef({}),R=D.useRef(0),N=(E.respectReducedMotion?S:!1)?1:d,L=Nt({name:"Notifications",classes:Z0e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:xje});D.useEffect(()=>{g==null||g.updateState(H=>({...H,limit:p||5,defaultPosition:u}))},[p,u]),xf(()=>{_.notifications.length>R.current&&setTimeout(()=>C(),0),R.current=_.notifications.length},[_.notifications]);const $=mje(_.notifications,u),B=Q0e.reduce((H,Y)=>(H[Y]=$[Y].map(({style:J,...K})=>T.jsx(bje,{timeout:N,onEnter:()=>k.current[K.id].offsetHeight,nodeRef:{current:k.current[K.id]},children:Z=>T.jsx(J0e,{ref:U=>{k.current[K.id]=U},data:K,onHide:U=>K0e(U,g),autoClose:c,...L("notification",{style:{...yje({state:Z,position:Y,transitionDuration:N,maxHeight:h}),...J}})})},K.id)),H),{});return T.jsxs(M0,{withinPortal:v,...b,children:[T.jsx(Se,{...L("root"),"data-position":"top-center",ref:t,...x,children:T.jsx(km,{children:B["top-center"]})}),T.jsx(Se,{...L("root"),"data-position":"top-left",...x,children:T.jsx(km,{children:B["top-left"]})}),T.jsx(Se,{...L("root",{className:yw.classNames.fullWidth}),"data-position":"top-right",...x,children:T.jsx(km,{children:B["top-right"]})}),T.jsx(Se,{...L("root",{className:yw.classNames.fullWidth}),"data-position":"bottom-right",...x,children:T.jsx(km,{children:B["bottom-right"]})}),T.jsx(Se,{...L("root"),"data-position":"bottom-left",...x,children:T.jsx(km,{children:B["bottom-left"]})}),T.jsx(Se,{...L("root"),"data-position":"bottom-center",...x,children:T.jsx(km,{children:B["bottom-center"]})})]})});jp.classes=Z0e;jp.displayName="@mantine/notifications/Notifications";jp.show=Nv.show;jp.hide=Nv.hide;jp.update=Nv.update;jp.clean=Nv.clean;jp.cleanQueue=Nv.cleanQueue;jp.updateState=Nv.updateState;const ege=D.createContext({storageEngine:void 0,setStorageEngine:()=>{}}),Ai=()=>D.useContext(ege);function Eje({children:e}){const[t,n]=D.useState(void 0),r=D.useMemo(()=>({storageEngine:t,setStorageEngine:n}),[t]);return T.jsx(ege.Provider,{value:r,children:e})}var r_={},Ste;function _je(){if(Ste)return r_;Ste=1,Object.defineProperty(r_,"__esModule",{value:!0}),r_.parse=o,r_.serialize=u;const e=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,t=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,i=Object.prototype.toString,s=(()=>{const f=function(){};return f.prototype=Object.create(null),f})();function o(f,h){const p=new s,m=f.length;if(m<2)return p;const g=(h==null?void 0:h.decode)||c;let b=0;do{const v=f.indexOf("=",b);if(v===-1)break;const x=f.indexOf(";",b),E=x===-1?m:x;if(v>E){b=f.lastIndexOf(";",v-1)+1;continue}const _=a(f,b,v),C=l(f,v,_),S=f.slice(_,C);if(p[S]===void 0){let k=a(f,v+1,E),R=l(f,E,k);const O=g(f.slice(k,R));p[S]=O}b=E+1}while(b<m);return p}function a(f,h,p){do{const m=f.charCodeAt(h);if(m!==32&&m!==9)return h}while(++h<p);return p}function l(f,h,p){for(;h>p;){const m=f.charCodeAt(--h);if(m!==32&&m!==9)return h+1}return p}function u(f,h,p){const m=(p==null?void 0:p.encode)||encodeURIComponent;if(!e.test(f))throw new TypeError(`argument name is invalid: ${f}`);const g=m(h);if(!t.test(g))throw new TypeError(`argument val is invalid: ${h}`);let b=f+"="+g;if(!p)return b;if(p.maxAge!==void 0){if(!Number.isInteger(p.maxAge))throw new TypeError(`option maxAge is invalid: ${p.maxAge}`);b+="; Max-Age="+p.maxAge}if(p.domain){if(!n.test(p.domain))throw new TypeError(`option domain is invalid: ${p.domain}`);b+="; Domain="+p.domain}if(p.path){if(!r.test(p.path))throw new TypeError(`option path is invalid: ${p.path}`);b+="; Path="+p.path}if(p.expires){if(!d(p.expires)||!Number.isFinite(p.expires.valueOf()))throw new TypeError(`option expires is invalid: ${p.expires}`);b+="; Expires="+p.expires.toUTCString()}if(p.httpOnly&&(b+="; HttpOnly"),p.secure&&(b+="; Secure"),p.partitioned&&(b+="; Partitioned"),p.priority)switch(typeof p.priority=="string"?p.priority.toLowerCase():void 0){case"low":b+="; Priority=Low";break;case"medium":b+="; Priority=Medium";break;case"high":b+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${p.priority}`)}if(p.sameSite)switch(typeof p.sameSite=="string"?p.sameSite.toLowerCase():p.sameSite){case!0:case"strict":b+="; SameSite=Strict";break;case"lax":b+="; SameSite=Lax";break;case"none":b+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${p.sameSite}`)}return b}function c(f){if(f.indexOf("%")===-1)return f;try{return decodeURIComponent(f)}catch{return f}}function d(f){return i.call(f)==="[object Date]"}return r_}_je();var Ate="popstate";function Tje(e={}){function t(r,i){let{pathname:s,search:o,hash:a}=r.location;return q9("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:TT(i)}return Sje(t,n,null,e)}function oi(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Ou(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Cje(){return Math.random().toString(36).substring(2,10)}function kte(e,t){return{usr:e.state,key:e.key,idx:t}}function q9(e,t,n=null,r){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Px(t):t,state:n,key:t&&t.key||r||Cje()}}function TT({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Px(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function Sje(e,t,n,r={}){let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a="POP",l=null,u=c();u==null&&(u=0,o.replaceState({...o.state,idx:u},""));function c(){return(o.state||{idx:null}).idx}function d(){a="POP";let g=c(),b=g==null?null:g-u;u=g,l&&l({action:a,location:m.location,delta:b})}function f(g,b){a="PUSH";let v=q9(m.location,g,b);u=c()+1;let x=kte(v,u),E=m.createHref(v);try{o.pushState(x,"",E)}catch(_){if(_ instanceof DOMException&&_.name==="DataCloneError")throw _;i.location.assign(E)}s&&l&&l({action:a,location:m.location,delta:1})}function h(g,b){a="REPLACE";let v=q9(m.location,g,b);u=c();let x=kte(v,u),E=m.createHref(v);o.replaceState(x,"",E),s&&l&&l({action:a,location:m.location,delta:0})}function p(g){let b=i.location.origin!=="null"?i.location.origin:i.location.href,v=typeof g=="string"?g:TT(g);return v=v.replace(/ $/,"%20"),oi(b,`No window.location.(origin|href) available to create URL for href: ${v}`),new URL(v,b)}let m={get action(){return a},get location(){return e(i,o)},listen(g){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(Ate,d),l=g,()=>{i.removeEventListener(Ate,d),l=null}},createHref(g){return t(i,g)},createURL:p,encodeLocation(g){let b=p(g);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:f,replace:h,go(g){return o.go(g)}};return m}function tge(e,t,n="/"){return Aje(e,t,n,!1)}function Aje(e,t,n,r){let i=typeof t=="string"?Px(t):t,s=gp(i.pathname||"/",n);if(s==null)return null;let o=nge(e);kje(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let u=jje(s);a=Lje(o[l],u,r)}return a}function nge(e,t=[],n=[],r=""){let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(oi(l.relativePath.startsWith(r),`Absolute route path "${l.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),l.relativePath=l.relativePath.slice(r.length));let u=ep([r,l.relativePath]),c=n.concat(l);s.children&&s.children.length>0&&(oi(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${u}".`),nge(s.children,t,c,u)),!(s.path==null&&!s.index)&&t.push({path:u,score:$je(u,s.index),routesMeta:c})};return e.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of rge(s.path))i(s,o,l)}),t}function rge(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=rge(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>e.startsWith("/")&&l===""?"/":l)}function kje(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:Mje(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var Ije=/^:[\w-]+$/,Rje=3,Dje=2,Pje=1,Nje=10,Oje=-2,Ite=e=>e==="*";function $je(e,t){let n=e.split("/"),r=n.length;return n.some(Ite)&&(r+=Oje),t&&(r+=Dje),n.filter(i=>!Ite(i)).reduce((i,s)=>i+(Ije.test(s)?Rje:s===""?Pje:Nje),r)}function Mje(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function Lje(e,t,n=!1){let{routesMeta:r}=e,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],u=a===r.length-1,c=s==="/"?t:t.slice(s.length)||"/",d=ED({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},c),f=l.route;if(!d&&u&&n&&!r[r.length-1].route.index&&(d=ED({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},c)),!d)return null;Object.assign(i,d.params),o.push({params:i,pathname:ep([s,d.pathname]),pathnameBase:qje(ep([s,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(s=ep([s,d.pathnameBase]))}return o}function ED(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=Fje(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((u,{paramName:c,isOptional:d},f)=>{if(c==="*"){let p=a[f]||"";o=s.slice(0,s.length-p.length).replace(/(.)\/+$/,"$1")}const h=a[f];return d&&!h?u[c]=void 0:u[c]=(h||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:e}}function Fje(e,t=!1,n=!0){Ou(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function jje(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Ou(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function gp(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function Bje(e,t="/"){let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?Px(e):e;return{pathname:n?n.startsWith("/")?n:zje(n,t):t,search:Hje(r),hash:Wje(i)}}function zje(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function J8(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Uje(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Zq(e){let t=Uje(e);return t.map((n,r)=>r===t.length-1?n.pathname:n.pathnameBase)}function eH(e,t,n,r=!1){let i;typeof e=="string"?i=Px(e):(i={...e},oi(!i.pathname||!i.pathname.includes("?"),J8("?","pathname","search",i)),oi(!i.pathname||!i.pathname.includes("#"),J8("#","pathname","hash",i)),oi(!i.search||!i.search.includes("#"),J8("#","search","hash",i)));let s=e===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let d=t.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),d-=1;i.pathname=f.join("/")}a=d>=0?t[d]:"/"}let l=Bje(i,a),u=o&&o!=="/"&&o.endsWith("/"),c=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}var ep=e=>e.join("/").replace(/\/\/+/g,"/"),qje=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Hje=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Wje=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Vje(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var ige=["POST","PUT","PATCH","DELETE"];new Set(ige);var Gje=["GET",...ige];new Set(Gje);var Nx=D.createContext(null);Nx.displayName="DataRouter";var IO=D.createContext(null);IO.displayName="DataRouterState";var sge=D.createContext({isTransitioning:!1});sge.displayName="ViewTransition";var Yje=D.createContext(new Map);Yje.displayName="Fetchers";var Kje=D.createContext(null);Kje.displayName="Await";var cd=D.createContext(null);cd.displayName="Navigation";var jC=D.createContext(null);jC.displayName="Location";var Hu=D.createContext({outlet:null,matches:[],isDataRoute:!1});Hu.displayName="Route";var tH=D.createContext(null);tH.displayName="RouteError";function nH(e,{relative:t}={}){oi(Ox(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=D.useContext(cd),{hash:i,pathname:s,search:o}=BC(e,{relative:t}),a=s;return n!=="/"&&(a=s==="/"?n:ep([n,s])),r.createHref({pathname:a,search:o,hash:i})}function Ox(){return D.useContext(jC)!=null}function Wu(){return oi(Ox(),"useLocation() may be used only in the context of a <Router> component."),D.useContext(jC).location}var oge="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function age(e){D.useContext(cd).static||D.useLayoutEffect(e)}function Ra(){let{isDataRoute:e}=D.useContext(Hu);return e?uBe():Xje()}function Xje(){oi(Ox(),"useNavigate() may be used only in the context of a <Router> component.");let e=D.useContext(Nx),{basename:t,navigator:n}=D.useContext(cd),{matches:r}=D.useContext(Hu),{pathname:i}=Wu(),s=JSON.stringify(Zq(r)),o=D.useRef(!1);return age(()=>{o.current=!0}),D.useCallback((l,u={})=>{if(Ou(o.current,oge),!o.current)return;if(typeof l=="number"){n.go(l);return}let c=eH(l,JSON.parse(s),i,u.relative==="path");e==null&&t!=="/"&&(c.pathname=c.pathname==="/"?t:ep([t,c.pathname])),(u.replace?n.replace:n.push)(c,u.state,u)},[t,n,s,i,e])}var Qje=D.createContext(null);function Jje(e){let t=D.useContext(Hu).outlet;return t&&D.createElement(Qje.Provider,{value:e},t)}function To(){let{matches:e}=D.useContext(Hu),t=e[e.length-1];return t?t.params:{}}function BC(e,{relative:t}={}){let{matches:n}=D.useContext(Hu),{pathname:r}=Wu(),i=JSON.stringify(Zq(n));return D.useMemo(()=>eH(e,JSON.parse(i),r,t==="path"),[e,i,r,t])}function lge(e,t){return uge(e,t)}function uge(e,t,n,r){var v;oi(Ox(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i,static:s}=D.useContext(cd),{matches:o}=D.useContext(Hu),a=o[o.length-1],l=a?a.params:{},u=a?a.pathname:"/",c=a?a.pathnameBase:"/",d=a&&a.route;{let x=d&&d.path||"";cge(u,!d||x.endsWith("*")||x.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${x}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${x}"> to <Route path="${x==="/"?"*":`${x}/*`}">.`)}let f=Wu(),h;if(t){let x=typeof t=="string"?Px(t):t;oi(c==="/"||((v=x.pathname)==null?void 0:v.startsWith(c)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${c}" but pathname "${x.pathname}" was given in the \`location\` prop.`),h=x}else h=f;let p=h.pathname||"/",m=p;if(c!=="/"){let x=c.replace(/^\//,"").split("/");m="/"+p.replace(/^\//,"").split("/").slice(x.length).join("/")}let g=!s&&n&&n.matches&&n.matches.length>0?n.matches:tge(e,{pathname:m});Ou(d||g!=null,`No routes matched location "${h.pathname}${h.search}${h.hash}" `),Ou(g==null||g[g.length-1].route.element!==void 0||g[g.length-1].route.Component!==void 0||g[g.length-1].route.lazy!==void 0,`Matched leaf route at location "${h.pathname}${h.search}${h.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let b=rBe(g&&g.map(x=>Object.assign({},x,{params:Object.assign({},l,x.params),pathname:ep([c,i.encodeLocation?i.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?c:ep([c,i.encodeLocation?i.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),o,n,r);return t&&b?D.createElement(jC.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...h},navigationType:"POP"}},b):b}function Zje(){let e=lBe(),t=Vje(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=D.createElement(D.Fragment,null,D.createElement("p",null," Hey developer "),D.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",D.createElement("code",{style:s},"ErrorBoundary")," or"," ",D.createElement("code",{style:s},"errorElement")," prop on your route.")),D.createElement(D.Fragment,null,D.createElement("h2",null,"Unexpected Application Error!"),D.createElement("h3",{style:{fontStyle:"italic"}},t),n?D.createElement("pre",{style:i},n):null,o)}var eBe=D.createElement(Zje,null),tBe=class extends D.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?D.createElement(Hu.Provider,{value:this.props.routeContext},D.createElement(tH.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function nBe({routeContext:e,match:t,children:n}){let r=D.useContext(Nx);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),D.createElement(Hu.Provider,{value:e},n)}function rBe(e,t=[],n=null,r=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let i=e,s=n==null?void 0:n.errors;if(s!=null){let l=i.findIndex(u=>u.route.id&&(s==null?void 0:s[u.route.id])!==void 0);oi(l>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),i=i.slice(0,Math.min(i.length,l+1))}let o=!1,a=-1;if(n)for(let l=0;l<i.length;l++){let u=i[l];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(a=l),u.route.id){let{loaderData:c,errors:d}=n,f=u.route.loader&&!c.hasOwnProperty(u.route.id)&&(!d||d[u.route.id]===void 0);if(u.route.lazy||f){o=!0,a>=0?i=i.slice(0,a+1):i=[i[0]];break}}}return i.reduceRight((l,u,c)=>{let d,f=!1,h=null,p=null;n&&(d=s&&u.route.id?s[u.route.id]:void 0,h=u.route.errorElement||eBe,o&&(a<0&&c===0?(cge("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),f=!0,p=null):a===c&&(f=!0,p=u.route.hydrateFallbackElement||null)));let m=t.concat(i.slice(0,c+1)),g=()=>{let b;return d?b=h:f?b=p:u.route.Component?b=D.createElement(u.route.Component,null):u.route.element?b=u.route.element:b=l,D.createElement(nBe,{match:u,routeContext:{outlet:l,matches:m,isDataRoute:n!=null},children:b})};return n&&(u.route.ErrorBoundary||u.route.errorElement||c===0)?D.createElement(tBe,{location:n.location,revalidation:n.revalidation,component:h,error:d,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()},null)}function rH(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function iBe(e){let t=D.useContext(Nx);return oi(t,rH(e)),t}function sBe(e){let t=D.useContext(IO);return oi(t,rH(e)),t}function oBe(e){let t=D.useContext(Hu);return oi(t,rH(e)),t}function iH(e){let t=oBe(e),n=t.matches[t.matches.length-1];return oi(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function aBe(){return iH("useRouteId")}function lBe(){var r;let e=D.useContext(tH),t=sBe("useRouteError"),n=iH("useRouteError");return e!==void 0?e:(r=t.errors)==null?void 0:r[n]}function uBe(){let{router:e}=iBe("useNavigate"),t=iH("useNavigate"),n=D.useRef(!1);return age(()=>{n.current=!0}),D.useCallback(async(i,s={})=>{Ou(n.current,oge),n.current&&(typeof i=="number"?e.navigate(i):await e.navigate(i,{fromRouteId:t,...s}))},[e,t])}var Rte={};function cge(e,t,n){!t&&!Rte[e]&&(Rte[e]=!0,Ou(!1,n))}D.memo(cBe);function cBe({routes:e,future:t,state:n}){return uge(e,void 0,n,t)}function sH({to:e,replace:t,state:n,relative:r}){oi(Ox(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=D.useContext(cd);Ou(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=D.useContext(Hu),{pathname:o}=Wu(),a=Ra(),l=eH(e,Zq(s),o,r==="path"),u=JSON.stringify(l);return D.useEffect(()=>{a(JSON.parse(u),{replace:t,state:n,relative:r})},[a,u,r,t,n]),null}function dBe(e){return Jje(e.context)}function Hg(e){oi(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function fBe({basename:e="/",children:t=null,location:n,navigationType:r="POP",navigator:i,static:s=!1}){oi(!Ox(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=e.replace(/^\/*/,"/"),a=D.useMemo(()=>({basename:o,navigator:i,static:s,future:{}}),[o,i,s]);typeof n=="string"&&(n=Px(n));let{pathname:l="/",search:u="",hash:c="",state:d=null,key:f="default"}=n,h=D.useMemo(()=>{let p=gp(l,o);return p==null?null:{location:{pathname:p,search:u,hash:c,state:d,key:f},navigationType:r}},[o,l,u,c,d,f,r]);return Ou(h!=null,`<Router basename="${o}"> is not able to match the URL "${l}${u}${c}" because it does not start with the basename, so the <Router> won't render anything.`),h==null?null:D.createElement(cd.Provider,{value:a},D.createElement(jC.Provider,{children:t,value:h}))}function hBe({children:e,location:t}){return lge(H9(e),t)}function H9(e,t=[]){let n=[];return D.Children.forEach(e,(r,i)=>{if(!D.isValidElement(r))return;let s=[...t,i];if(r.type===D.Fragment){n.push.apply(n,H9(r.props.children,s));return}oi(r.type===Hg,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),oi(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=H9(r.props.children,s)),n.push(o)}),n}var PR="get",NR="application/x-www-form-urlencoded";function RO(e){return e!=null&&typeof e.tagName=="string"}function pBe(e){return RO(e)&&e.tagName.toLowerCase()==="button"}function mBe(e){return RO(e)&&e.tagName.toLowerCase()==="form"}function gBe(e){return RO(e)&&e.tagName.toLowerCase()==="input"}function yBe(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function vBe(e,t){return e.button===0&&(!t||t==="_self")&&!yBe(e)}function W9(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function bBe(e,t){let n=W9(e);return t&&t.forEach((r,i)=>{n.has(i)||t.getAll(i).forEach(s=>{n.append(i,s)})}),n}var wk=null;function wBe(){if(wk===null)try{new FormData(document.createElement("form"),0),wk=!1}catch{wk=!0}return wk}var xBe=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Z8(e){return e!=null&&!xBe.has(e)?(Ou(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${NR}"`),null):e}function EBe(e,t){let n,r,i,s,o;if(mBe(e)){let a=e.getAttribute("action");r=a?gp(a,t):null,n=e.getAttribute("method")||PR,i=Z8(e.getAttribute("enctype"))||NR,s=new FormData(e)}else if(pBe(e)||gBe(e)&&(e.type==="submit"||e.type==="image")){let a=e.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=e.getAttribute("formaction")||a.getAttribute("action");if(r=l?gp(l,t):null,n=e.getAttribute("formmethod")||a.getAttribute("method")||PR,i=Z8(e.getAttribute("formenctype"))||Z8(a.getAttribute("enctype"))||NR,s=new FormData(a,e),!wBe()){let{name:u,type:c,value:d}=e;if(c==="image"){let f=u?`${u}.`:"";s.append(`${f}x`,"0"),s.append(`${f}y`,"0")}else u&&s.append(u,d)}}else{if(RO(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=PR,r=null,i=NR,o=e}return s&&i==="text/plain"&&(o=s,s=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:s,body:o}}function oH(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}async function _Be(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function TBe(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function CBe(e,t,n){let r=await Promise.all(e.map(async i=>{let s=t.routes[i.route.id];if(s){let o=await _Be(s,n);return o.links?o.links():[]}return[]}));return IBe(r.flat(1).filter(TBe).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function Dte(e,t,n,r,i,s){let o=(l,u)=>n[u]?l.route.id!==n[u].route.id:!0,a=(l,u)=>{var c;return n[u].pathname!==l.pathname||((c=n[u].route.path)==null?void 0:c.endsWith("*"))&&n[u].params["*"]!==l.params["*"]};return s==="assets"?t.filter((l,u)=>o(l,u)||a(l,u)):s==="data"?t.filter((l,u)=>{var d;let c=r.routes[l.route.id];if(!c||!c.hasLoader)return!1;if(o(l,u)||a(l,u))return!0;if(l.route.shouldRevalidate){let f=l.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((d=n[0])==null?void 0:d.params)||{},nextUrl:new URL(e,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function SBe(e,t,{includeHydrateFallback:n}={}){return ABe(e.map(r=>{let i=t.routes[r.route.id];if(!i)return[];let s=[i.module];return i.clientActionModule&&(s=s.concat(i.clientActionModule)),i.clientLoaderModule&&(s=s.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(s=s.concat(i.hydrateFallbackModule)),i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function ABe(e){return[...new Set(e)]}function kBe(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}function IBe(e,t){let n=new Set;return new Set(t),e.reduce((r,i)=>{let s=JSON.stringify(kBe(i));return n.has(s)||(n.add(s),r.push({key:s,link:i})),r},[])}var RBe=new Set([100,101,204,205]);function DBe(e,t){let n=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n.pathname==="/"?n.pathname="_root.data":t&&gp(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function dge(){let e=D.useContext(Nx);return oH(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function PBe(){let e=D.useContext(IO);return oH(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var aH=D.createContext(void 0);aH.displayName="FrameworkContext";function fge(){let e=D.useContext(aH);return oH(e,"You must render this element inside a <HydratedRouter> element"),e}function NBe(e,t){let n=D.useContext(aH),[r,i]=D.useState(!1),[s,o]=D.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:u,onMouseLeave:c,onTouchStart:d}=t,f=D.useRef(null);D.useEffect(()=>{if(e==="render"&&o(!0),e==="viewport"){let m=b=>{b.forEach(v=>{o(v.isIntersecting)})},g=new IntersectionObserver(m,{threshold:.5});return f.current&&g.observe(f.current),()=>{g.disconnect()}}},[e]),D.useEffect(()=>{if(r){let m=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(m)}}},[r]);let h=()=>{i(!0)},p=()=>{i(!1),o(!1)};return n?e!=="intent"?[s,f,{}]:[s,f,{onFocus:i_(a,h),onBlur:i_(l,p),onMouseEnter:i_(u,h),onMouseLeave:i_(c,p),onTouchStart:i_(d,h)}]:[!1,f,{}]}function i_(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function OBe({page:e,...t}){let{router:n}=dge(),r=D.useMemo(()=>tge(n.routes,e,n.basename),[n.routes,e,n.basename]);return r?D.createElement(MBe,{page:e,matches:r,...t}):null}function $Be(e){let{manifest:t,routeModules:n}=fge(),[r,i]=D.useState([]);return D.useEffect(()=>{let s=!1;return CBe(e,t,n).then(o=>{s||i(o)}),()=>{s=!0}},[e,t,n]),r}function MBe({page:e,matches:t,...n}){let r=Wu(),{manifest:i,routeModules:s}=fge(),{basename:o}=dge(),{loaderData:a,matches:l}=PBe(),u=D.useMemo(()=>Dte(e,t,l,i,r,"data"),[e,t,l,i,r]),c=D.useMemo(()=>Dte(e,t,l,i,r,"assets"),[e,t,l,i,r]),d=D.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let p=new Set,m=!1;if(t.forEach(b=>{var x;let v=i.routes[b.route.id];!v||!v.hasLoader||(!u.some(E=>E.route.id===b.route.id)&&b.route.id in a&&((x=s[b.route.id])!=null&&x.shouldRevalidate)||v.hasClientLoader?m=!0:p.add(b.route.id))}),p.size===0)return[];let g=DBe(e,o);return m&&p.size>0&&g.searchParams.set("_routes",t.filter(b=>p.has(b.route.id)).map(b=>b.route.id).join(",")),[g.pathname+g.search]},[o,a,r,i,u,t,e,s]),f=D.useMemo(()=>SBe(c,i),[c,i]),h=$Be(c);return D.createElement(D.Fragment,null,d.map(p=>D.createElement("link",{key:p,rel:"prefetch",as:"fetch",href:p,...n})),f.map(p=>D.createElement("link",{key:p,rel:"modulepreload",href:p,...n})),h.map(({key:p,link:m})=>D.createElement("link",{key:p,...m})))}function LBe(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var hge=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{hge&&(window.__reactRouterVersion="7.5.2")}catch{}function FBe({basename:e,children:t,window:n}){let r=D.useRef();r.current==null&&(r.current=Tje({window:n,v5Compat:!0}));let i=r.current,[s,o]=D.useState({action:i.action,location:i.location}),a=D.useCallback(l=>{D.startTransition(()=>o(l))},[o]);return D.useLayoutEffect(()=>i.listen(a),[i,a]),D.createElement(fBe,{basename:e,children:t,location:s.location,navigationType:s.action,navigator:i})}var pge=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,mge=D.forwardRef(function({onClick:t,discover:n="render",prefetch:r="none",relative:i,reloadDocument:s,replace:o,state:a,target:l,to:u,preventScrollReset:c,viewTransition:d,...f},h){let{basename:p}=D.useContext(cd),m=typeof u=="string"&&pge.test(u),g,b=!1;if(typeof u=="string"&&m&&(g=u,hge))try{let R=new URL(window.location.href),O=u.startsWith("//")?new URL(R.protocol+u):new URL(u),N=gp(O.pathname,p);O.origin===R.origin&&N!=null?u=N+O.search+O.hash:b=!0}catch{Ou(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let v=nH(u,{relative:i}),[x,E,_]=NBe(r,f),C=UBe(u,{replace:o,state:a,target:l,preventScrollReset:c,relative:i,viewTransition:d});function S(R){t&&t(R),R.defaultPrevented||C(R)}let k=D.createElement("a",{...f,..._,href:g||v,onClick:b||s?t:S,ref:LBe(h,E),target:l,"data-discover":!m&&n==="render"?"true":void 0});return x&&!m?D.createElement(D.Fragment,null,k,D.createElement(OBe,{page:v})):k});mge.displayName="Link";var jBe=D.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:r="",end:i=!1,style:s,to:o,viewTransition:a,children:l,...u},c){let d=BC(o,{relative:u.relative}),f=Wu(),h=D.useContext(IO),{navigator:p,basename:m}=D.useContext(cd),g=h!=null&&GBe(d)&&a===!0,b=p.encodeLocation?p.encodeLocation(d).pathname:d.pathname,v=f.pathname,x=h&&h.navigation&&h.navigation.location?h.navigation.location.pathname:null;n||(v=v.toLowerCase(),x=x?x.toLowerCase():null,b=b.toLowerCase()),x&&m&&(x=gp(x,m)||x);const E=b!=="/"&&b.endsWith("/")?b.length-1:b.length;let _=v===b||!i&&v.startsWith(b)&&v.charAt(E)==="/",C=x!=null&&(x===b||!i&&x.startsWith(b)&&x.charAt(b.length)==="/"),S={isActive:_,isPending:C,isTransitioning:g},k=_?t:void 0,R;typeof r=="function"?R=r(S):R=[r,_?"active":null,C?"pending":null,g?"transitioning":null].filter(Boolean).join(" ");let O=typeof s=="function"?s(S):s;return D.createElement(mge,{...u,"aria-current":k,className:R,ref:c,style:O,to:o,viewTransition:a},typeof l=="function"?l(S):l)});jBe.displayName="NavLink";var BBe=D.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:r,replace:i,state:s,method:o=PR,action:a,onSubmit:l,relative:u,preventScrollReset:c,viewTransition:d,...f},h)=>{let p=WBe(),m=VBe(a,{relative:u}),g=o.toLowerCase()==="get"?"get":"post",b=typeof a=="string"&&pge.test(a),v=x=>{if(l&&l(x),x.defaultPrevented)return;x.preventDefault();let E=x.nativeEvent.submitter,_=(E==null?void 0:E.getAttribute("formmethod"))||o;p(E||x.currentTarget,{fetcherKey:t,method:_,navigate:n,replace:i,state:s,relative:u,preventScrollReset:c,viewTransition:d})};return D.createElement("form",{ref:h,method:g,action:m,onSubmit:r?l:v,...f,"data-discover":!b&&e==="render"?"true":void 0})});BBe.displayName="Form";function zBe(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function gge(e){let t=D.useContext(Nx);return oi(t,zBe(e)),t}function UBe(e,{target:t,replace:n,state:r,preventScrollReset:i,relative:s,viewTransition:o}={}){let a=Ra(),l=Wu(),u=BC(e,{relative:s});return D.useCallback(c=>{if(vBe(c,t)){c.preventDefault();let d=n!==void 0?n:TT(l)===TT(u);a(e,{replace:d,state:r,preventScrollReset:i,relative:s,viewTransition:o})}},[l,a,u,n,r,t,e,i,s,o])}function Bf(e){Ou(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=D.useRef(W9(e)),n=D.useRef(!1),r=Wu(),i=D.useMemo(()=>bBe(r.search,n.current?null:t.current),[r.search]),s=Ra(),o=D.useCallback((a,l)=>{const u=W9(typeof a=="function"?a(i):a);n.current=!0,s("?"+u,l)},[s,i]);return[i,o]}var qBe=0,HBe=()=>`__${String(++qBe)}__`;function WBe(){let{router:e}=gge("useSubmit"),{basename:t}=D.useContext(cd),n=aBe();return D.useCallback(async(r,i={})=>{let{action:s,method:o,encType:a,formData:l,body:u}=EBe(r,t);if(i.navigate===!1){let c=i.fetcherKey||HBe();await e.fetch(c,n,i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:u,formMethod:i.method||o,formEncType:i.encType||a,flushSync:i.flushSync})}else await e.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:u,formMethod:i.method||o,formEncType:i.encType||a,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[e,t,n])}function VBe(e,{relative:t}={}){let{basename:n}=D.useContext(cd),r=D.useContext(Hu);oi(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),s={...BC(e||".",{relative:t})},o=Wu();if(e==null){s.search=o.search;let a=new URLSearchParams(s.search),l=a.getAll("index");if(l.some(c=>c==="")){a.delete("index"),l.filter(d=>d).forEach(d=>a.append("index",d));let c=a.toString();s.search=c?`?${c}`:""}}return(!e||e===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(s.pathname=s.pathname==="/"?n:ep([n,s.pathname])),TT(s)}function GBe(e,t={}){let n=D.useContext(sge);oi(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=gge("useViewTransitionState"),i=BC(e,{relative:t.relative});if(!n.isTransitioning)return!1;let s=gp(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=gp(n.nextLocation.pathname,r)||n.nextLocation.pathname;return ED(i.pathname,o)!=null||ED(i.pathname,s)!=null}new TextEncoder;[...RBe];const lH=D.createContext(null);lH.displayName="@mantine/modals/ModalsContext";function YBe(){const e=D.useContext(lH);if(!e)throw new Error("[@mantine/modals] useModals hook was called outside of context, wrap your app with ModalsProvider component");return e}function KBe({id:e,cancelProps:t,confirmProps:n,labels:r={cancel:"",confirm:""},closeOnConfirm:i=!0,closeOnCancel:s=!0,groupProps:o,onCancel:a,onConfirm:l,children:u}){const{cancel:c,confirm:d}=r,f=YBe(),h=m=>{typeof(t==null?void 0:t.onClick)=="function"&&(t==null||t.onClick(m)),typeof a=="function"&&a(),s&&f.closeModal(e)},p=m=>{typeof(n==null?void 0:n.onClick)=="function"&&(n==null||n.onClick(m)),typeof l=="function"&&l(),i&&f.closeModal(e)};return T.jsxs(T.Fragment,{children:[u&&T.jsx(Se,{mb:"md",children:u}),T.jsxs(yi,{mt:u?0:"md",justify:"flex-end",...o,children:[T.jsx(Gt,{variant:"default",...t,onClick:h,children:(t==null?void 0:t.children)||c}),T.jsx(Gt,{...n,onClick:p,children:(n==null?void 0:n.children)||d})]})]})}const[XBe,uH]=JOe("mantine-modals"),Pte=e=>{const t=e.modalId||Ub();return uH("openConfirmModal")({...e,modalId:t}),t};uH("closeModal");uH("closeAllModals");function Nte(e,t){var n,r,i,s;t&&e.type==="confirm"&&((r=(n=e.props).onCancel)==null||r.call(n)),(s=(i=e.props).onClose)==null||s.call(i)}function QBe(e,t){var n;switch(t.type){case"OPEN":return{current:t.modal,modals:[...e.modals,t.modal]};case"CLOSE":{const r=e.modals.find(s=>s.id===t.modalId);if(!r)return e;Nte(r,t.canceled);const i=e.modals.filter(s=>s.id!==t.modalId);return{current:i[i.length-1]||e.current,modals:i}}case"CLOSE_ALL":return e.modals.length?(e.modals.concat().reverse().forEach(r=>{Nte(r,t.canceled)}),{current:e.current,modals:[]}):e;case"UPDATE":{const{modalId:r,newProps:i}=t,s=e.modals.map(a=>a.id!==r?a:a.type==="content"||a.type==="confirm"?{...a,props:{...a.props,...i}}:a.type==="context"?{...a,props:{...a.props,...i,innerProps:{...a.props.innerProps,...i.innerProps}}}:a),o=((n=e.current)==null?void 0:n.id)===r&&s.find(a=>a.id===r)||e.current;return{...e,modals:s,current:o}}default:return e}}function JBe(e){if(!e)return{confirmProps:{},modalProps:{}};const{id:t,children:n,onCancel:r,onConfirm:i,closeOnConfirm:s,closeOnCancel:o,cancelProps:a,confirmProps:l,groupProps:u,labels:c,...d}=e;return{confirmProps:{id:t,children:n,onCancel:r,onConfirm:i,closeOnConfirm:s,closeOnCancel:o,cancelProps:a,confirmProps:l,groupProps:u,labels:c},modalProps:{id:t,...d}}}function ZBe({children:e,modalProps:t,labels:n,modals:r}){const[i,s]=D.useReducer(QBe,{modals:[],current:null}),o=D.useRef(i);o.current=i;const a=D.useCallback(v=>{s({type:"CLOSE_ALL",canceled:v})},[o,s]),l=D.useCallback(({modalId:v,...x})=>{const E=v||Ub();return s({type:"OPEN",modal:{id:E,type:"content",props:x}}),E},[s]),u=D.useCallback(({modalId:v,...x})=>{const E=v||Ub();return s({type:"OPEN",modal:{id:E,type:"confirm",props:x}}),E},[s]),c=D.useCallback((v,{modalId:x,...E})=>{const _=x||Ub();return s({type:"OPEN",modal:{id:_,type:"context",props:E,ctx:v}}),_},[s]),d=D.useCallback((v,x)=>{s({type:"CLOSE",modalId:v,canceled:x})},[o,s]),f=D.useCallback(({modalId:v,...x})=>{s({type:"UPDATE",modalId:v,newProps:x})},[s]),h=D.useCallback(({modalId:v,...x})=>{s({type:"UPDATE",modalId:v,newProps:x})},[s]);XBe({openModal:l,openConfirmModal:u,openContextModal:({modal:v,...x})=>c(v,x),closeModal:d,closeContextModal:d,closeAllModals:a,updateModal:f,updateContextModal:h});const p={modalProps:t||{},modals:i.modals,openModal:l,openConfirmModal:u,openContextModal:c,closeModal:d,closeContextModal:d,closeAll:a,updateModal:f,updateContextModal:h},m=()=>{const v=o.current.current;switch(v==null?void 0:v.type){case"context":{const{innerProps:x,...E}=v.props,_=r[v.ctx];return{modalProps:E,content:T.jsx(_,{innerProps:x,context:p,id:v.id})}}case"confirm":{const{modalProps:x,confirmProps:E}=JBe(v.props);return{modalProps:x,content:T.jsx(KBe,{...E,id:v.id,labels:v.props.labels||n})}}case"content":{const{children:x,...E}=v.props;return{modalProps:E,content:x}}default:return{modalProps:{},content:null}}},{modalProps:g,content:b}=m();return T.jsxs(lH.Provider,{value:p,children:[T.jsx(ii,{zIndex:Gs("modal")+1,...t,...g,opened:i.modals.length>0,onClose:()=>{var v;return d((v=i.current)==null?void 0:v.id)},children:b}),e]})}/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var e7e={outline:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},filled:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",stroke:"none"}};/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const nn=(e,t,n,r)=>{const i=D.forwardRef(({color:s="currentColor",size:o=24,stroke:a=2,title:l,className:u,children:c,...d},f)=>D.createElement("svg",{ref:f,...e7e[e],width:o,height:o,className:["tabler-icon",`tabler-icon-${t}`,u].join(" "),...e==="filled"?{fill:s}:{strokeWidth:a,stroke:s},...d},[l&&D.createElement("title",{key:"svg-title"},l),...r.map(([h,p])=>D.createElement(h,p)),...Array.isArray(c)?c:[c]]));return i.displayName=`${n}`,i};/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var t7e=nn("outline","adjustments-horizontal","IconAdjustmentsHorizontal",[["path",{d:"M14 6m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-0"}],["path",{d:"M4 6l8 0",key:"svg-1"}],["path",{d:"M16 6l4 0",key:"svg-2"}],["path",{d:"M8 12m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-3"}],["path",{d:"M4 12l2 0",key:"svg-4"}],["path",{d:"M10 12l10 0",key:"svg-5"}],["path",{d:"M17 18m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-6"}],["path",{d:"M4 18l11 0",key:"svg-7"}],["path",{d:"M19 18l1 0",key:"svg-8"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var n7e=nn("outline","alert-circle","IconAlertCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 8v4",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Vb=nn("outline","alert-triangle","IconAlertTriangle",[["path",{d:"M12 9v4",key:"svg-0"}],["path",{d:"M10.363 3.591l-8.106 13.534a1.914 1.914 0 0 0 1.636 2.871h16.214a1.914 1.914 0 0 0 1.636 -2.87l-8.106 -13.536a1.914 1.914 0 0 0 -3.274 0z",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var V9=nn("outline","arrow-left","IconArrowLeft",[["path",{d:"M5 12l14 0",key:"svg-0"}],["path",{d:"M5 12l6 6",key:"svg-1"}],["path",{d:"M5 12l6 -6",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ote=nn("outline","arrow-right","IconArrowRight",[["path",{d:"M5 12l14 0",key:"svg-0"}],["path",{d:"M13 18l6 -6",key:"svg-1"}],["path",{d:"M13 6l6 6",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var r7e=nn("outline","arrows-shuffle","IconArrowsShuffle",[["path",{d:"M18 4l3 3l-3 3",key:"svg-0"}],["path",{d:"M18 20l3 -3l-3 -3",key:"svg-1"}],["path",{d:"M3 7h3a5 5 0 0 1 5 5a5 5 0 0 0 5 5h5",key:"svg-2"}],["path",{d:"M21 7h-5a4.978 4.978 0 0 0 -3 1m-4 8a4.984 4.984 0 0 1 -3 1h-3",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var i7e=nn("outline","at","IconAt",[["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-0"}],["path",{d:"M16 12v1.5a2.5 2.5 0 0 0 5 0v-1.5a9 9 0 1 0 -5.5 8.28",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var s7e=nn("outline","brain","IconBrain",[["path",{d:"M15.5 13a3.5 3.5 0 0 0 -3.5 3.5v1a3.5 3.5 0 0 0 7 0v-1.8",key:"svg-0"}],["path",{d:"M8.5 13a3.5 3.5 0 0 1 3.5 3.5v1a3.5 3.5 0 0 1 -7 0v-1.8",key:"svg-1"}],["path",{d:"M17.5 16a3.5 3.5 0 0 0 0 -7h-.5",key:"svg-2"}],["path",{d:"M19 9.3v-2.8a3.5 3.5 0 0 0 -7 0",key:"svg-3"}],["path",{d:"M6.5 16a3.5 3.5 0 0 1 0 -7h.5",key:"svg-4"}],["path",{d:"M5 9.3v-2.8a3.5 3.5 0 0 1 7 0v10",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var o7e=nn("outline","brand-python","IconBrandPython",[["path",{d:"M12 9h-7a2 2 0 0 0 -2 2v4a2 2 0 0 0 2 2h3",key:"svg-0"}],["path",{d:"M12 15h7a2 2 0 0 0 2 -2v-4a2 2 0 0 0 -2 -2h-3",key:"svg-1"}],["path",{d:"M8 9v-4a2 2 0 0 1 2 -2h4a2 2 0 0 1 2 2v5a2 2 0 0 1 -2 2h-4a2 2 0 0 0 -2 2v5a2 2 0 0 0 2 2h4a2 2 0 0 0 2 -2v-4",key:"svg-2"}],["path",{d:"M11 6l0 .01",key:"svg-3"}],["path",{d:"M13 18l0 .01",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var a7e=nn("outline","bubble-text","IconBubbleText",[["path",{d:"M7 10h10",key:"svg-0"}],["path",{d:"M9 14h5",key:"svg-1"}],["path",{d:"M12.4 3a5.34 5.34 0 0 1 4.906 3.239a5.333 5.333 0 0 1 -1.195 10.6a4.26 4.26 0 0 1 -5.28 1.863l-3.831 2.298v-3.134a2.668 2.668 0 0 1 -1.795 -3.773a4.8 4.8 0 0 1 2.908 -8.933a5.33 5.33 0 0 1 4.287 -2.16",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var l7e=nn("outline","chart-donut-2","IconChartDonut2",[["path",{d:"M12 3v5m4 4h5",key:"svg-0"}],["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-1"}],["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var yge=nn("outline","chart-histogram","IconChartHistogram",[["path",{d:"M3 3v18h18",key:"svg-0"}],["path",{d:"M20 18v3",key:"svg-1"}],["path",{d:"M16 16v5",key:"svg-2"}],["path",{d:"M12 13v8",key:"svg-3"}],["path",{d:"M8 16v5",key:"svg-4"}],["path",{d:"M3 11c6 0 5 -5 9 -5s3 5 9 5",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var zC=nn("outline","check","IconCheck",[["path",{d:"M5 12l5 5l10 -10",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var u7e=nn("outline","chevron-down","IconChevronDown",[["path",{d:"M6 9l6 6l6 -6",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var c7e=nn("outline","code-plus","IconCodePlus",[["path",{d:"M9 12h6",key:"svg-0"}],["path",{d:"M12 9v6",key:"svg-1"}],["path",{d:"M6 19a2 2 0 0 1 -2 -2v-4l-1 -1l1 -1v-4a2 2 0 0 1 2 -2",key:"svg-2"}],["path",{d:"M18 19a2 2 0 0 0 2 -2v-4l1 -1l-1 -1v-4a2 2 0 0 0 -2 -2",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var d7e=nn("outline","database-export","IconDatabaseExport",[["path",{d:"M4 6c0 1.657 3.582 3 8 3s8 -1.343 8 -3s-3.582 -3 -8 -3s-8 1.343 -8 3",key:"svg-0"}],["path",{d:"M4 6v6c0 1.657 3.582 3 8 3c1.118 0 2.183 -.086 3.15 -.241",key:"svg-1"}],["path",{d:"M20 12v-6",key:"svg-2"}],["path",{d:"M4 12v6c0 1.657 3.582 3 8 3c.157 0 .312 -.002 .466 -.005",key:"svg-3"}],["path",{d:"M16 19h6",key:"svg-4"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var vge=nn("outline","database","IconDatabase",[["path",{d:"M12 6m-8 0a8 3 0 1 0 16 0a8 3 0 1 0 -16 0",key:"svg-0"}],["path",{d:"M4 6v6a8 3 0 0 0 16 0v-6",key:"svg-1"}],["path",{d:"M4 12v6a8 3 0 0 0 16 0v-6",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var f7e=nn("outline","dice-3","IconDice3",[["path",{d:"M3 3m0 2a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z",key:"svg-0"}],["circle",{cx:"8.5",cy:"8.5",r:".5",fill:"currentColor",key:"svg-1"}],["circle",{cx:"15.5",cy:"15.5",r:".5",fill:"currentColor",key:"svg-2"}],["circle",{cx:"12",cy:"12",r:".5",fill:"currentColor",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var h7e=nn("outline","dots-vertical","IconDotsVertical",[["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M12 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var p7e=nn("outline","dots","IconDots",[["path",{d:"M5 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M19 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var bge=nn("outline","external-link","IconExternalLink",[["path",{d:"M12 6h-6a2 2 0 0 0 -2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-6",key:"svg-0"}],["path",{d:"M11 13l9 -9",key:"svg-1"}],["path",{d:"M15 4h5v5",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var wge=nn("outline","flame","IconFlame",[["path",{d:"M12 10.941c2.333 -3.308 .167 -7.823 -1 -8.941c0 3.395 -2.235 5.299 -3.667 6.706c-1.43 1.408 -2.333 3.621 -2.333 5.588c0 3.704 3.134 6.706 7 6.706s7 -3.002 7 -6.706c0 -1.712 -1.232 -4.403 -2.333 -5.588c-2.084 3.353 -3.257 3.353 -4.667 2.235",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var xge=nn("outline","graph-off","IconGraphOff",[["path",{d:"M8 4h10a2 2 0 0 1 2 2v10m-.586 3.414a2 2 0 0 1 -1.414 .586h-12a2 2 0 0 1 -2 -2v-12c0 -.547 .22 -1.043 .576 -1.405",key:"svg-0"}],["path",{d:"M7 14l3 -3l2 2l.5 -.5m2 -2l.5 -.5l2 2",key:"svg-1"}],["path",{d:"M3 3l18 18",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ege=nn("outline","graph","IconGraph",[["path",{d:"M4 18v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M7 14l3 -3l2 2l3 -3l2 2",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var m7e=nn("outline","hourglass-empty","IconHourglassEmpty",[["path",{d:"M6 20v-2a6 6 0 1 1 12 0v2a1 1 0 0 1 -1 1h-10a1 1 0 0 1 -1 -1z",key:"svg-0"}],["path",{d:"M6 4v2a6 6 0 1 0 12 0v-2a1 1 0 0 0 -1 -1h-10a1 1 0 0 0 -1 1z",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var g7e=nn("outline","html","IconHtml",[["path",{d:"M13 16v-8l2 5l2 -5v8",key:"svg-0"}],["path",{d:"M1 16v-8",key:"svg-1"}],["path",{d:"M5 8v8",key:"svg-2"}],["path",{d:"M1 12h4",key:"svg-3"}],["path",{d:"M7 8h4",key:"svg-4"}],["path",{d:"M9 8v8",key:"svg-5"}],["path",{d:"M20 8v8h3",key:"svg-6"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var cH=nn("outline","info-circle","IconInfoCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 9h.01",key:"svg-1"}],["path",{d:"M11 12h1v4h1",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var y7e=nn("outline","layout-columns","IconLayoutColumns",[["path",{d:"M4 4m0 2a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M12 4l0 16",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var _ge=nn("outline","list-check","IconListCheck",[["path",{d:"M3.5 5.5l1.5 1.5l2.5 -2.5",key:"svg-0"}],["path",{d:"M3.5 11.5l1.5 1.5l2.5 -2.5",key:"svg-1"}],["path",{d:"M3.5 17.5l1.5 1.5l2.5 -2.5",key:"svg-2"}],["path",{d:"M11 6l9 0",key:"svg-3"}],["path",{d:"M11 12l9 0",key:"svg-4"}],["path",{d:"M11 18l9 0",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var v7e=nn("outline","mail","IconMail",[["path",{d:"M3 7a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-10z",key:"svg-0"}],["path",{d:"M3 7l9 6l9 -6",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var b7e=nn("outline","number-123","IconNumber123",[["path",{d:"M3 10l2 -2v8",key:"svg-0"}],["path",{d:"M9 8h3a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 0 -1 1v2a1 1 0 0 0 1 1h3",key:"svg-1"}],["path",{d:"M17 8h2.5a1.5 1.5 0 0 1 1.5 1.5v1a1.5 1.5 0 0 1 -1.5 1.5h-1.5h1.5a1.5 1.5 0 0 1 1.5 1.5v1a1.5 1.5 0 0 1 -1.5 1.5h-2.5",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var w7e=nn("outline","package-import","IconPackageImport",[["path",{d:"M12 21l-8 -4.5v-9l8 -4.5l8 4.5v4.5",key:"svg-0"}],["path",{d:"M12 12l8 -4.5",key:"svg-1"}],["path",{d:"M12 12v9",key:"svg-2"}],["path",{d:"M12 12l-8 -4.5",key:"svg-3"}],["path",{d:"M22 18h-7",key:"svg-4"}],["path",{d:"M18 15l-3 3l3 3",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var x7e=nn("outline","pencil","IconPencil",[["path",{d:"M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4",key:"svg-0"}],["path",{d:"M13.5 6.5l4 4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var E7e=nn("outline","player-play","IconPlayerPlay",[["path",{d:"M7 4v16l13 -8z",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Tge=nn("outline","progress","IconProgress",[["path",{d:"M10 20.777a8.942 8.942 0 0 1 -2.48 -.969",key:"svg-0"}],["path",{d:"M14 3.223a9.003 9.003 0 0 1 0 17.554",key:"svg-1"}],["path",{d:"M4.579 17.093a8.961 8.961 0 0 1 -1.227 -2.592",key:"svg-2"}],["path",{d:"M3.124 10.5c.16 -.95 .468 -1.85 .9 -2.675l.169 -.305",key:"svg-3"}],["path",{d:"M6.907 4.579a8.954 8.954 0 0 1 3.093 -1.356",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var _7e=nn("outline","radio","IconRadio",[["path",{d:"M14 3l-9.371 3.749a1 1 0 0 0 -.629 .928v11.323a1 1 0 0 0 1 1h14a1 1 0 0 0 1 -1v-11a1 1 0 0 0 -1 -1h-14.5",key:"svg-0"}],["path",{d:"M4 12h16",key:"svg-1"}],["path",{d:"M7 12v-2",key:"svg-2"}],["path",{d:"M17 16v.01",key:"svg-3"}],["path",{d:"M13 16v.01",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var T7e=nn("outline","refresh","IconRefresh",[["path",{d:"M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4",key:"svg-0"}],["path",{d:"M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var C7e=nn("outline","schema-off","IconSchemaOff",[["path",{d:"M6 2h4v4m-4 0h-1v-1",key:"svg-0"}],["path",{d:"M15 11v-1h5v4h-2",key:"svg-1"}],["path",{d:"M5 18h5v4h-5z",key:"svg-2"}],["path",{d:"M5 10h5v4h-5z",key:"svg-3"}],["path",{d:"M10 12h2",key:"svg-4"}],["path",{d:"M7.5 7.5v2.5",key:"svg-5"}],["path",{d:"M7.5 14v4",key:"svg-6"}],["path",{d:"M3 3l18 18",key:"svg-7"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Cge=nn("outline","schema","IconSchema",[["path",{d:"M5 2h5v4h-5z",key:"svg-0"}],["path",{d:"M15 10h5v4h-5z",key:"svg-1"}],["path",{d:"M5 18h5v4h-5z",key:"svg-2"}],["path",{d:"M5 10h5v4h-5z",key:"svg-3"}],["path",{d:"M10 12h5",key:"svg-4"}],["path",{d:"M7.5 6v4",key:"svg-5"}],["path",{d:"M7.5 14v4",key:"svg-6"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var S7e=nn("outline","search","IconSearch",[["path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0",key:"svg-0"}],["path",{d:"M21 21l-6 -6",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var A7e=nn("outline","select","IconSelect",[["path",{d:"M3 3m0 2a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M9 11l3 3l3 -3",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Sge=nn("outline","settings","IconSettings",[["path",{d:"M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z",key:"svg-0"}],["path",{d:"M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var k7e=nn("outline","squares","IconSquares",[["path",{d:"M8 10a2 2 0 0 1 2 -2h9a2 2 0 0 1 2 2v9a2 2 0 0 1 -2 2h-9a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M16 8v-3a2 2 0 0 0 -2 -2h-9a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h3",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Age=nn("outline","table-export","IconTableExport",[["path",{d:"M12.5 21h-7.5a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v7.5",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}],["path",{d:"M16 19h6",key:"svg-3"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var I7e=nn("outline","table","IconTable",[["path",{d:"M3 5a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-14z",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var kge=nn("outline","trash-x","IconTrashX",[["path",{d:"M4 7h16",key:"svg-0"}],["path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12",key:"svg-1"}],["path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3",key:"svg-2"}],["path",{d:"M10 12l4 4m0 -4l-4 4",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var dH=nn("outline","user-plus","IconUserPlus",[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M16 19h6",key:"svg-1"}],["path",{d:"M19 16v6",key:"svg-2"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var $te=nn("outline","user","IconUser",[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var $x=nn("outline","x","IconX",[["path",{d:"M18 6l-12 12",key:"svg-0"}],["path",{d:"M6 6l12 12",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var R7e=nn("filled","brand-google-filled","IconBrandGoogleFilled",[["path",{d:"M12 2a9.96 9.96 0 0 1 6.29 2.226a1 1 0 0 1 .04 1.52l-1.51 1.362a1 1 0 0 1 -1.265 .06a6 6 0 1 0 2.103 6.836l.001 -.004h-3.66a1 1 0 0 1 -.992 -.883l-.007 -.117v-2a1 1 0 0 1 1 -1h6.945a1 1 0 0 1 .994 .89c.04 .367 .061 .737 .061 1.11c0 5.523 -4.477 10 -10 10s-10 -4.477 -10 -10s4.477 -10 10 -10z",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var D7e=nn("filled","player-pause-filled","IconPlayerPauseFilled",[["path",{d:"M9 4h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h2a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2z",key:"svg-0"}],["path",{d:"M17 4h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h2a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2z",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var P7e=nn("filled","player-play-filled","IconPlayerPlayFilled",[["path",{d:"M6 4v16a1 1 0 0 0 1.524 .852l13 -8a1 1 0 0 0 0 -1.704l-13 -8a1 1 0 0 0 -1.524 .852z",key:"svg-0"}]]);function Ige(e){const t=e.split("/")||[];return t[t.length-1].replace(/\.[^\.]+$/,"").replace(".","_").replace(" ","_").replace("/","_")}const Vi="/revisit/";function Mte(e){const t=[],n=String(e||"");let r=n.indexOf(","),i=0,s=!1;for(;!s;){r===-1&&(r=n.length,s=!0);const o=n.slice(i,r).trim();(o||!s)&&t.push(o),i=r+1,r=n.indexOf(",",i)}return t}function Rge(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const N7e=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,O7e=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,$7e={};function Lte(e,t){return($7e.jsx?O7e:N7e).test(e)}const M7e=/[ \t\n\f\r]/g;function L7e(e){return typeof e=="object"?e.type==="text"?Fte(e.value):!1:Fte(e)}function Fte(e){return e.replace(M7e,"")===""}let UC=class{constructor(t,n,r){this.property=t,this.normal=n,r&&(this.space=r)}};UC.prototype.property={};UC.prototype.normal={};UC.prototype.space=null;function Dge(e,t){const n={},r={};let i=-1;for(;++i<e.length;)Object.assign(n,e[i].property),Object.assign(r,e[i].normal);return new UC(n,r,t)}function CT(e){return e.toLowerCase()}let Vu=class{constructor(t,n){this.property=t,this.attribute=n}};Vu.prototype.space=null;Vu.prototype.boolean=!1;Vu.prototype.booleanish=!1;Vu.prototype.overloadedBoolean=!1;Vu.prototype.number=!1;Vu.prototype.commaSeparated=!1;Vu.prototype.spaceSeparated=!1;Vu.prototype.commaOrSpaceSeparated=!1;Vu.prototype.mustUseProperty=!1;Vu.prototype.defined=!1;let F7e=0;const bn=Ov(),Hi=Ov(),Pge=Ov(),gt=Ov(),Ur=Ov(),Gb=Ov(),Rl=Ov();function Ov(){return 2**++F7e}const G9=Object.freeze(Object.defineProperty({__proto__:null,boolean:bn,booleanish:Hi,commaOrSpaceSeparated:Rl,commaSeparated:Gb,number:gt,overloadedBoolean:Pge,spaceSeparated:Ur},Symbol.toStringTag,{value:"Module"})),eM=Object.keys(G9);class fH extends Vu{constructor(t,n,r,i){let s=-1;if(super(t,n),jte(this,"space",i),typeof r=="number")for(;++s<eM.length;){const o=eM[s];jte(this,eM[s],(r&G9[o])===G9[o])}}}fH.prototype.defined=!0;function jte(e,t,n){n&&(e[t]=n)}const j7e={}.hasOwnProperty;function Mx(e){const t={},n={};let r;for(r in e.properties)if(j7e.call(e.properties,r)){const i=e.properties[r],s=new fH(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),t[r]=s,n[CT(r)]=r,n[CT(s.attribute)]=r}return new UC(t,n,e.space)}const Nge=Mx({space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),Oge=Mx({space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function $ge(e,t){return t in e?e[t]:t}function Mge(e,t){return $ge(e,t.toLowerCase())}const Lge=Mx({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:Mge,properties:{xmlns:null,xmlnsXLink:null}}),Fge=Mx({transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:Hi,ariaAutoComplete:null,ariaBusy:Hi,ariaChecked:Hi,ariaColCount:gt,ariaColIndex:gt,ariaColSpan:gt,ariaControls:Ur,ariaCurrent:null,ariaDescribedBy:Ur,ariaDetails:null,ariaDisabled:Hi,ariaDropEffect:Ur,ariaErrorMessage:null,ariaExpanded:Hi,ariaFlowTo:Ur,ariaGrabbed:Hi,ariaHasPopup:null,ariaHidden:Hi,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Ur,ariaLevel:gt,ariaLive:null,ariaModal:Hi,ariaMultiLine:Hi,ariaMultiSelectable:Hi,ariaOrientation:null,ariaOwns:Ur,ariaPlaceholder:null,ariaPosInSet:gt,ariaPressed:Hi,ariaReadOnly:Hi,ariaRelevant:null,ariaRequired:Hi,ariaRoleDescription:Ur,ariaRowCount:gt,ariaRowIndex:gt,ariaRowSpan:gt,ariaSelected:Hi,ariaSetSize:gt,ariaSort:null,ariaValueMax:gt,ariaValueMin:gt,ariaValueNow:gt,ariaValueText:null,role:null}}),B7e=Mx({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:Mge,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Gb,acceptCharset:Ur,accessKey:Ur,action:null,allow:null,allowFullScreen:bn,allowPaymentRequest:bn,allowUserMedia:bn,alt:null,as:null,async:bn,autoCapitalize:null,autoComplete:Ur,autoFocus:bn,autoPlay:bn,blocking:Ur,capture:null,charSet:null,checked:bn,cite:null,className:Ur,cols:gt,colSpan:null,content:null,contentEditable:Hi,controls:bn,controlsList:Ur,coords:gt|Gb,crossOrigin:null,data:null,dateTime:null,decoding:null,default:bn,defer:bn,dir:null,dirName:null,disabled:bn,download:Pge,draggable:Hi,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:bn,formTarget:null,headers:Ur,height:gt,hidden:bn,high:gt,href:null,hrefLang:null,htmlFor:Ur,httpEquiv:Ur,id:null,imageSizes:null,imageSrcSet:null,inert:bn,inputMode:null,integrity:null,is:null,isMap:bn,itemId:null,itemProp:Ur,itemRef:Ur,itemScope:bn,itemType:Ur,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:bn,low:gt,manifest:null,max:null,maxLength:gt,media:null,method:null,min:null,minLength:gt,multiple:bn,muted:bn,name:null,nonce:null,noModule:bn,noValidate:bn,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:bn,optimum:gt,pattern:null,ping:Ur,placeholder:null,playsInline:bn,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:bn,referrerPolicy:null,rel:Ur,required:bn,reversed:bn,rows:gt,rowSpan:gt,sandbox:Ur,scope:null,scoped:bn,seamless:bn,selected:bn,shadowRootClonable:bn,shadowRootDelegatesFocus:bn,shadowRootMode:null,shape:null,size:gt,sizes:null,slot:null,span:gt,spellCheck:Hi,src:null,srcDoc:null,srcLang:null,srcSet:null,start:gt,step:null,style:null,tabIndex:gt,target:null,title:null,translate:null,type:null,typeMustMatch:bn,useMap:null,value:Hi,width:gt,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Ur,axis:null,background:null,bgColor:null,border:gt,borderColor:null,bottomMargin:gt,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:bn,declare:bn,event:null,face:null,frame:null,frameBorder:null,hSpace:gt,leftMargin:gt,link:null,longDesc:null,lowSrc:null,marginHeight:gt,marginWidth:gt,noResize:bn,noHref:bn,noShade:bn,noWrap:bn,object:null,profile:null,prompt:null,rev:null,rightMargin:gt,rules:null,scheme:null,scrolling:Hi,standby:null,summary:null,text:null,topMargin:gt,valueType:null,version:null,vAlign:null,vLink:null,vSpace:gt,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:bn,disableRemotePlayback:bn,prefix:null,property:null,results:gt,security:null,unselectable:null}}),z7e=Mx({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:$ge,properties:{about:Rl,accentHeight:gt,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:gt,amplitude:gt,arabicForm:null,ascent:gt,attributeName:null,attributeType:null,azimuth:gt,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:gt,by:null,calcMode:null,capHeight:gt,className:Ur,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:gt,diffuseConstant:gt,direction:null,display:null,dur:null,divisor:gt,dominantBaseline:null,download:bn,dx:null,dy:null,edgeMode:null,editable:null,elevation:gt,enableBackground:null,end:null,event:null,exponent:gt,externalResourcesRequired:null,fill:null,fillOpacity:gt,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Gb,g2:Gb,glyphName:Gb,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:gt,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:gt,horizOriginX:gt,horizOriginY:gt,id:null,ideographic:gt,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:gt,k:gt,k1:gt,k2:gt,k3:gt,k4:gt,kernelMatrix:Rl,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:gt,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:gt,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:gt,overlineThickness:gt,paintOrder:null,panose1:null,path:null,pathLength:gt,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Ur,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:gt,pointsAtY:gt,pointsAtZ:gt,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Rl,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Rl,rev:Rl,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Rl,requiredFeatures:Rl,requiredFonts:Rl,requiredFormats:Rl,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:gt,specularExponent:gt,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:gt,strikethroughThickness:gt,string:null,stroke:null,strokeDashArray:Rl,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:gt,strokeOpacity:gt,strokeWidth:null,style:null,surfaceScale:gt,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Rl,tabIndex:gt,tableValues:null,target:null,targetX:gt,targetY:gt,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Rl,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:gt,underlineThickness:gt,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:gt,values:null,vAlphabetic:gt,vMathematical:gt,vectorEffect:null,vHanging:gt,vIdeographic:gt,version:null,vertAdvY:gt,vertOriginX:gt,vertOriginY:gt,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:gt,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),U7e=/^data[-\w.:]+$/i,Bte=/-[a-z]/g,q7e=/[A-Z]/g;function DO(e,t){const n=CT(t);let r=t,i=Vu;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&U7e.test(t)){if(t.charAt(4)==="-"){const s=t.slice(5).replace(Bte,W7e);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=t.slice(4);if(!Bte.test(s)){let o=s.replace(q7e,H7e);o.charAt(0)!=="-"&&(o="-"+o),t="data"+o}}i=fH}return new i(r,t)}function H7e(e){return"-"+e.toLowerCase()}function W7e(e){return e.charAt(1).toUpperCase()}const V7e={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},qC=Dge([Oge,Nge,Lge,Fge,B7e],"html"),B0=Dge([Oge,Nge,Lge,Fge,z7e],"svg");function zte(e){const t=String(e||"").trim();return t?t.split(/[ \t\n\r\f]+/g):[]}function jge(e){return e.join(" ").trim()}var H1={},tM,Ute;function G7e(){if(Ute)return tM;Ute=1;var e=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,t=/\n/g,n=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,i=/^:\s*/,s=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,o=/^[;\s]*/,a=/^\s+|\s+$/g,l=`
`,u="/",c="*",d="",f="comment",h="declaration";tM=function(m,g){if(typeof m!="string")throw new TypeError("First argument must be a string");if(!m)return[];g=g||{};var b=1,v=1;function x($){var B=$.match(t);B&&(b+=B.length);var H=$.lastIndexOf(l);v=~H?$.length-H:v+$.length}function E(){var $={line:b,column:v};return function(B){return B.position=new _($),k(),B}}function _($){this.start=$,this.end={line:b,column:v},this.source=g.source}_.prototype.content=m;function C($){var B=new Error(g.source+":"+b+":"+v+": "+$);if(B.reason=$,B.filename=g.source,B.line=b,B.column=v,B.source=m,!g.silent)throw B}function S($){var B=$.exec(m);if(B){var H=B[0];return x(H),m=m.slice(H.length),B}}function k(){S(n)}function R($){var B;for($=$||[];B=O();)B!==!1&&$.push(B);return $}function O(){var $=E();if(!(u!=m.charAt(0)||c!=m.charAt(1))){for(var B=2;d!=m.charAt(B)&&(c!=m.charAt(B)||u!=m.charAt(B+1));)++B;if(B+=2,d===m.charAt(B-1))return C("End of comment missing");var H=m.slice(2,B-2);return v+=2,x(H),m=m.slice(B),v+=2,$({type:f,comment:H})}}function N(){var $=E(),B=S(r);if(B){if(O(),!S(i))return C("property missing ':'");var H=S(s),Y=$({type:h,property:p(B[0].replace(e,d)),value:H?p(H[0].replace(e,d)):d});return S(o),Y}}function L(){var $=[];R($);for(var B;B=N();)B!==!1&&($.push(B),R($));return $}return k(),L()};function p(m){return m?m.replace(a,d):d}return tM}var qte;function Y7e(){if(qte)return H1;qte=1;var e=H1&&H1.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(H1,"__esModule",{value:!0});var t=e(G7e());function n(r,i){var s=null;if(!r||typeof r!="string")return s;var o=(0,t.default)(r),a=typeof i=="function";return o.forEach(function(l){if(l.type==="declaration"){var u=l.property,c=l.value;a?i(u,c,l):c&&(s=s||{},s[u]=c)}}),s}return H1.default=n,H1}var K7e=Y7e();const Hte=vl(K7e),X7e=Hte.default||Hte,PO=Bge("end"),zf=Bge("start");function Bge(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function Q7e(e){const t=zf(e),n=PO(e);if(t&&n)return{start:t,end:n}}function O2(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?Wte(e.position):"start"in e||"end"in e?Wte(e):"line"in e||"column"in e?Y9(e):""}function Y9(e){return Vte(e&&e.line)+":"+Vte(e&&e.column)}function Wte(e){return Y9(e&&e.start)+"-"+Y9(e&&e.end)}function Vte(e){return e&&typeof e=="number"?e:1}class Zo extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",s={},o=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof t=="string"?i=t:!s.cause&&t&&(o=!0,i=t.message,s.cause=t),!s.ruleId&&!s.source&&typeof r=="string"){const l=r.indexOf(":");l===-1?s.ruleId=r:(s.source=r.slice(0,l),s.ruleId=r.slice(l+1))}if(!s.place&&s.ancestors&&s.ancestors){const l=s.ancestors[s.ancestors.length-1];l&&(s.place=l.position)}const a=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file,this.message=i,this.line=a?a.line:void 0,this.name=O2(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual,this.expected,this.note,this.url}}Zo.prototype.file="";Zo.prototype.name="";Zo.prototype.reason="";Zo.prototype.message="";Zo.prototype.stack="";Zo.prototype.column=void 0;Zo.prototype.line=void 0;Zo.prototype.ancestors=void 0;Zo.prototype.cause=void 0;Zo.prototype.fatal=void 0;Zo.prototype.place=void 0;Zo.prototype.ruleId=void 0;Zo.prototype.source=void 0;const hH={}.hasOwnProperty,J7e=new Map,Z7e=/[A-Z]/g,eze=/-([a-z])/g,tze=new Set(["table","tbody","thead","tfoot","tr"]),nze=new Set(["td","th"]),zge="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function rze(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=dze(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=cze(n,t.jsx,t.jsxs)}const i={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?B0:qC,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},s=Uge(i,e,void 0);return s&&typeof s!="string"?s:i.create(e,i.Fragment,{children:s||void 0},void 0)}function Uge(e,t,n){if(t.type==="element")return ize(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return sze(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return aze(e,t,n);if(t.type==="mdxjsEsm")return oze(e,t);if(t.type==="root")return lze(e,t,n);if(t.type==="text")return uze(e,t)}function ize(e,t,n){const r=e.schema;let i=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=B0,e.schema=i),e.ancestors.push(t);const s=Hge(e,t.tagName,!1),o=fze(e,t);let a=mH(e,t);return tze.has(t.tagName)&&(a=a.filter(function(l){return typeof l=="string"?!L7e(l):!0})),qge(e,o,s,t),pH(o,a),e.ancestors.pop(),e.schema=r,e.create(t,s,o,n)}function sze(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}ST(e,t.position)}function oze(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);ST(e,t.position)}function aze(e,t,n){const r=e.schema;let i=r;t.name==="svg"&&r.space==="html"&&(i=B0,e.schema=i),e.ancestors.push(t);const s=t.name===null?e.Fragment:Hge(e,t.name,!0),o=hze(e,t),a=mH(e,t);return qge(e,o,s,t),pH(o,a),e.ancestors.pop(),e.schema=r,e.create(t,s,o,n)}function lze(e,t,n){const r={};return pH(r,mH(e,t)),e.create(t,e.Fragment,r,n)}function uze(e,t){return t.value}function qge(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function pH(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function cze(e,t,n){return r;function r(i,s,o,a){const u=Array.isArray(o.children)?n:t;return a?u(s,o,a):u(s,o)}}function dze(e,t){return n;function n(r,i,s,o){const a=Array.isArray(s.children),l=zf(r);return t(i,s,o,a,{columnNumber:l?l.column-1:void 0,fileName:e,lineNumber:l?l.line:void 0},void 0)}}function fze(e,t){const n={};let r,i;for(i in t.properties)if(i!=="children"&&hH.call(t.properties,i)){const s=pze(e,i,t.properties[i]);if(s){const[o,a]=s;e.tableCellAlignToStyle&&o==="align"&&typeof a=="string"&&nze.has(t.tagName)?r=a:n[o]=a}}if(r){const s=n.style||(n.style={});s[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function hze(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const s=r.data.estree.body[0];s.type;const o=s.expression;o.type;const a=o.properties[0];a.type,Object.assign(n,e.evaluater.evaluateExpression(a.argument))}else ST(e,t.position);else{const i=r.name;let s;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const a=r.value.data.estree.body[0];a.type,s=e.evaluater.evaluateExpression(a.expression)}else ST(e,t.position);else s=r.value===null?!0:r.value;n[i]=s}return n}function mH(e,t){const n=[];let r=-1;const i=e.passKeys?new Map:J7e;for(;++r<t.children.length;){const s=t.children[r];let o;if(e.passKeys){const l=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(l){const u=i.get(l)||0;o=l+"-"+u,i.set(l,u+1)}}const a=Uge(e,s,o);a!==void 0&&n.push(a)}return n}function pze(e,t,n){const r=DO(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?Rge(n):jge(n)),r.property==="style"){let i=typeof n=="object"?n:mze(e,String(n));return e.stylePropertyNameCase==="css"&&(i=gze(i)),["style",i]}return[e.elementAttributeNameCase==="react"&&r.space?V7e[r.property]||r.property:r.attribute,n]}}function mze(e,t){const n={};try{X7e(t,r)}catch(i){if(!e.ignoreInvalidStyle){const s=i,o=new Zo("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:s,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw o.file=e.filePath||void 0,o.url=zge+"#cannot-parse-style-attribute",o}}return n;function r(i,s){let o=i;o.slice(0,2)!=="--"&&(o.slice(0,4)==="-ms-"&&(o="ms-"+o.slice(4)),o=o.replace(eze,vze)),n[o]=s}}function Hge(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const i=t.split(".");let s=-1,o;for(;++s<i.length;){const a=Lte(i[s])?{type:"Identifier",name:i[s]}:{type:"Literal",value:i[s]};o=o?{type:"MemberExpression",object:o,property:a,computed:!!(s&&a.type==="Literal"),optional:!1}:a}r=o}else r=Lte(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const i=r.value;return hH.call(e.components,i)?e.components[i]:i}if(e.evaluater)return e.evaluater.evaluateExpression(r);ST(e)}function ST(e,t){const n=new Zo("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=zge+"#cannot-handle-mdx-estrees-without-createevaluater",n}function gze(e){const t={};let n;for(n in e)hH.call(e,n)&&(t[yze(n)]=e[n]);return t}function yze(e){let t=e.replace(Z7e,bze);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function vze(e,t){return t.toUpperCase()}function bze(e){return"-"+e.toLowerCase()}const nM={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},wze={};function xze(e,t){const n=wze,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return Wge(e,r,i)}function Wge(e,t,n){if(Eze(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return Gte(e.children,t,n)}return Array.isArray(e)?Gte(e,t,n):""}function Gte(e,t,n){const r=[];let i=-1;for(;++i<e.length;)r[i]=Wge(e[i],t,n);return r.join("")}function Eze(e){return!!(e&&typeof e=="object")}const Yte=document.createElement("i");function gH(e){const t="&"+e+";";Yte.innerHTML=t;const n=Yte.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function AT(e,t,n,r){const i=e.length;let s=0,o;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(t,n),e.splice(...o);else for(n&&e.splice(t,n);s<r.length;)o=r.slice(s,s+1e4),o.unshift(t,0),e.splice(...o),s+=1e4,t+=1e4}function _ze(e,t){return e.length>0?(AT(e,e.length,0,t),e):t}function Tze(e,t,n,r){const i=e.length;let s=0,o;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(t,n),e.splice(...o);else for(n&&e.splice(t,n);s<r.length;)o=r.slice(s,s+1e4),o.unshift(t,0),e.splice(...o),s+=1e4,t+=1e4}const Kte={}.hasOwnProperty;function Cze(e){const t={};let n=-1;for(;++n<e.length;)Sze(t,e[n]);return t}function Sze(e,t){let n;for(n in t){const i=(Kte.call(e,n)?e[n]:void 0)||(e[n]={}),s=t[n];let o;if(s)for(o in s){Kte.call(i,o)||(i[o]=[]);const a=s[o];Aze(i[o],Array.isArray(a)?a:a?[a]:[])}}}function Aze(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);Tze(e,0,0,r)}function yH(e){return e!==null&&e<-2}function Xte(e){return e===-2||e===-1||e===32}function vH(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(l){return Xte(l)?(e.enter(n),a(l)):t(l)}function a(l){return Xte(l)&&s++<i?(e.consume(l),a):(e.exit(n),t(l))}}const kze={tokenize:Ize};function Ize(e){const t=e.attempt(this.parser.constructs.contentInitial,r,i);let n;return t;function r(a){if(a===null){e.consume(a);return}return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),vH(e,t,"linePrefix")}function i(a){return e.enter("paragraph"),s(a)}function s(a){const l=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=l),n=l,o(a)}function o(a){if(a===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(a);return}return yH(a)?(e.consume(a),e.exit("chunkText"),s):(e.consume(a),o)}}const Rze={tokenize:Dze},Qte={tokenize:Pze};function Dze(e){const t=this,n=[];let r=0,i,s,o;return a;function a(x){if(r<n.length){const E=n[r];return t.containerState=E[1],e.attempt(E[0].continuation,l,u)(x)}return u(x)}function l(x){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&v();const E=t.events.length;let _=E,C;for(;_--;)if(t.events[_][0]==="exit"&&t.events[_][1].type==="chunkFlow"){C=t.events[_][1].end;break}b(r);let S=E;for(;S<t.events.length;)t.events[S][1].end=Object.assign({},C),S++;return AT(t.events,_+1,0,t.events.slice(E)),t.events.length=S,u(x)}return a(x)}function u(x){if(r===n.length){if(!i)return f(x);if(i.currentConstruct&&i.currentConstruct.concrete)return p(x);t.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(Qte,c,d)(x)}function c(x){return i&&v(),b(r),f(x)}function d(x){return t.parser.lazy[t.now().line]=r!==n.length,o=t.now().offset,p(x)}function f(x){return t.containerState={},e.attempt(Qte,h,p)(x)}function h(x){return r++,n.push([t.currentConstruct,t.containerState]),f(x)}function p(x){if(x===null){i&&v(),b(0),e.consume(x);return}return i=i||t.parser.flow(t.now()),e.enter("chunkFlow",{contentType:"flow",previous:s,_tokenizer:i}),m(x)}function m(x){if(x===null){g(e.exit("chunkFlow"),!0),b(0),e.consume(x);return}return yH(x)?(e.consume(x),g(e.exit("chunkFlow")),r=0,t.interrupt=void 0,a):(e.consume(x),m)}function g(x,E){const _=t.sliceStream(x);if(E&&_.push(null),x.previous=s,s&&(s.next=x),s=x,i.defineSkip(x.start),i.write(_),t.parser.lazy[x.start.line]){let C=i.events.length;for(;C--;)if(i.events[C][1].start.offset<o&&(!i.events[C][1].end||i.events[C][1].end.offset>o))return;const S=t.events.length;let k=S,R,O;for(;k--;)if(t.events[k][0]==="exit"&&t.events[k][1].type==="chunkFlow"){if(R){O=t.events[k][1].end;break}R=!0}for(b(r),C=S;C<t.events.length;)t.events[C][1].end=Object.assign({},O),C++;AT(t.events,k+1,0,t.events.slice(S)),t.events.length=C}}function b(x){let E=n.length;for(;E-- >x;){const _=n[E];t.containerState=_[1],_[0].exit.call(t,e)}n.length=x}function v(){i.write([null]),s=void 0,i=void 0,t.containerState._closeFlow=void 0}}function Pze(e,t,n){return vH(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function HC(e,t,n,r){const i=e.length;let s=0,o;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(t,n),e.splice(...o);else for(n&&e.splice(t,n);s<r.length;)o=r.slice(s,s+1e4),o.unshift(t,0),e.splice(...o),s+=1e4,t+=1e4}function Tc(e,t){return e.length>0?(HC(e,e.length,0,t),e):t}function Nze(e){return e!==null&&(e<0||e===32)}const Oze=Vge(new RegExp("\\p{P}|\\p{S}","u")),$ze=Vge(/\s/);function Vge(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function Jte(e){if(e===null||Nze(e)||$ze(e))return 1;if(Oze(e))return 2}function Gge(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const s=e[i].resolveAll;s&&!r.includes(s)&&(t=s(t,n),r.push(s))}return t}const K9={name:"attention",tokenize:Lze,resolveAll:Mze};function Mze(e,t){let n=-1,r,i,s,o,a,l,u,c;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;l=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const d=Object.assign({},e[r][1].end),f=Object.assign({},e[n][1].start);Zte(d,-l),Zte(f,l),o={type:l>1?"strongSequence":"emphasisSequence",start:d,end:Object.assign({},e[r][1].end)},a={type:l>1?"strongSequence":"emphasisSequence",start:Object.assign({},e[n][1].start),end:f},s={type:l>1?"strongText":"emphasisText",start:Object.assign({},e[r][1].end),end:Object.assign({},e[n][1].start)},i={type:l>1?"strong":"emphasis",start:Object.assign({},o.start),end:Object.assign({},a.end)},e[r][1].end=Object.assign({},o.start),e[n][1].start=Object.assign({},a.end),u=[],e[r][1].end.offset-e[r][1].start.offset&&(u=Tc(u,[["enter",e[r][1],t],["exit",e[r][1],t]])),u=Tc(u,[["enter",i,t],["enter",o,t],["exit",o,t],["enter",s,t]]),u=Tc(u,Gge(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),u=Tc(u,[["exit",s,t],["enter",a,t],["exit",a,t],["exit",i,t]]),e[n][1].end.offset-e[n][1].start.offset?(c=2,u=Tc(u,[["enter",e[n][1],t],["exit",e[n][1],t]])):c=0,HC(e,r-1,n-r+3,u),n=r+u.length-c-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function Lze(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=Jte(r);let s;return o;function o(l){return s=l,e.enter("attentionSequence"),a(l)}function a(l){if(l===s)return e.consume(l),a;const u=e.exit("attentionSequence"),c=Jte(l),d=!c||c===2&&i||n.includes(l),f=!i||i===2&&c||n.includes(r);return u._open=!!(s===42?d:d&&(i||!f)),u._close=!!(s===42?f:f&&(c||!d)),t(l)}}function Zte(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const Qd=Lx(/[A-Za-z]/),Mc=Lx(/[\dA-Za-z]/),Fze=Lx(/[#-'*+\--9=?A-Z^-~]/);function jze(e){return e!==null&&(e<32||e===127)}const X9=Lx(/\d/),Bze=Lx(/[\dA-Fa-f]/),zze=Lx(/[!-/:-@[-`{-~]/);function kn(e){return e!==null&&e<-2}function ku(e){return e!==null&&(e<0||e===32)}function xr(e){return e===-2||e===-1||e===32}function Lx(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}const Uze={name:"autolink",tokenize:qze};function qze(e,t,n){let r=0;return i;function i(h){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),s}function s(h){return Qd(h)?(e.consume(h),o):h===64?n(h):u(h)}function o(h){return h===43||h===45||h===46||Mc(h)?(r=1,a(h)):u(h)}function a(h){return h===58?(e.consume(h),r=0,l):(h===43||h===45||h===46||Mc(h))&&r++<32?(e.consume(h),a):(r=0,u(h))}function l(h){return h===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):h===null||h===32||h===60||jze(h)?n(h):(e.consume(h),l)}function u(h){return h===64?(e.consume(h),c):Fze(h)?(e.consume(h),u):n(h)}function c(h){return Mc(h)?d(h):n(h)}function d(h){return h===46?(e.consume(h),r=0,c):h===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):f(h)}function f(h){if((h===45||Mc(h))&&r++<63){const p=h===45?f:d;return e.consume(h),p}return n(h)}}function Pi(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(l){return xr(l)?(e.enter(n),a(l)):t(l)}function a(l){return xr(l)&&s++<i?(e.consume(l),a):(e.exit(n),t(l))}}const NO={tokenize:Hze,partial:!0};function Hze(e,t,n){return r;function r(s){return xr(s)?Pi(e,i,"linePrefix")(s):i(s)}function i(s){return s===null||kn(s)?t(s):n(s)}}const Yge={name:"blockQuote",tokenize:Wze,continuation:{tokenize:Vze},exit:Gze};function Wze(e,t,n){const r=this;return i;function i(o){if(o===62){const a=r.containerState;return a.open||(e.enter("blockQuote",{_container:!0}),a.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(o),e.exit("blockQuoteMarker"),s}return n(o)}function s(o){return xr(o)?(e.enter("blockQuotePrefixWhitespace"),e.consume(o),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(o))}}function Vze(e,t,n){const r=this;return i;function i(o){return xr(o)?Pi(e,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return e.attempt(Yge,t,n)(o)}}function Gze(e){e.exit("blockQuote")}const Kge={name:"characterEscape",tokenize:Yze};function Yze(e,t,n){return r;function r(s){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(s),e.exit("escapeMarker"),i}function i(s){return zze(s)?(e.enter("characterEscapeValue"),e.consume(s),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(s)}}const Xge={name:"characterReference",tokenize:Kze};function Kze(e,t,n){const r=this;let i=0,s,o;return a;function a(d){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(d),e.exit("characterReferenceMarker"),l}function l(d){return d===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(d),e.exit("characterReferenceMarkerNumeric"),u):(e.enter("characterReferenceValue"),s=31,o=Mc,c(d))}function u(d){return d===88||d===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(d),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),s=6,o=Bze,c):(e.enter("characterReferenceValue"),s=7,o=X9,c(d))}function c(d){if(d===59&&i){const f=e.exit("characterReferenceValue");return o===Mc&&!gH(r.sliceSerialize(f))?n(d):(e.enter("characterReferenceMarker"),e.consume(d),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return o(d)&&i++<s?(e.consume(d),c):n(d)}}const ene={tokenize:Qze,partial:!0},tne={name:"codeFenced",tokenize:Xze,concrete:!0};function Xze(e,t,n){const r=this,i={tokenize:_,partial:!0};let s=0,o=0,a;return l;function l(C){return u(C)}function u(C){const S=r.events[r.events.length-1];return s=S&&S[1].type==="linePrefix"?S[2].sliceSerialize(S[1],!0).length:0,a=C,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),c(C)}function c(C){return C===a?(o++,e.consume(C),c):o<3?n(C):(e.exit("codeFencedFenceSequence"),xr(C)?Pi(e,d,"whitespace")(C):d(C))}function d(C){return C===null||kn(C)?(e.exit("codeFencedFence"),r.interrupt?t(C):e.check(ene,m,E)(C)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),f(C))}function f(C){return C===null||kn(C)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),d(C)):xr(C)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),Pi(e,h,"whitespace")(C)):C===96&&C===a?n(C):(e.consume(C),f)}function h(C){return C===null||kn(C)?d(C):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),p(C))}function p(C){return C===null||kn(C)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),d(C)):C===96&&C===a?n(C):(e.consume(C),p)}function m(C){return e.attempt(i,E,g)(C)}function g(C){return e.enter("lineEnding"),e.consume(C),e.exit("lineEnding"),b}function b(C){return s>0&&xr(C)?Pi(e,v,"linePrefix",s+1)(C):v(C)}function v(C){return C===null||kn(C)?e.check(ene,m,E)(C):(e.enter("codeFlowValue"),x(C))}function x(C){return C===null||kn(C)?(e.exit("codeFlowValue"),v(C)):(e.consume(C),x)}function E(C){return e.exit("codeFenced"),t(C)}function _(C,S,k){let R=0;return O;function O(H){return C.enter("lineEnding"),C.consume(H),C.exit("lineEnding"),N}function N(H){return C.enter("codeFencedFence"),xr(H)?Pi(C,L,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(H):L(H)}function L(H){return H===a?(C.enter("codeFencedFenceSequence"),$(H)):k(H)}function $(H){return H===a?(R++,C.consume(H),$):R>=o?(C.exit("codeFencedFenceSequence"),xr(H)?Pi(C,B,"whitespace")(H):B(H)):k(H)}function B(H){return H===null||kn(H)?(C.exit("codeFencedFence"),S(H)):k(H)}}}function Qze(e,t,n){const r=this;return i;function i(o){return o===null?n(o):(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}const rM={name:"codeIndented",tokenize:Zze},Jze={tokenize:eUe,partial:!0};function Zze(e,t,n){const r=this;return i;function i(u){return e.enter("codeIndented"),Pi(e,s,"linePrefix",5)(u)}function s(u){const c=r.events[r.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?o(u):n(u)}function o(u){return u===null?l(u):kn(u)?e.attempt(Jze,o,l)(u):(e.enter("codeFlowValue"),a(u))}function a(u){return u===null||kn(u)?(e.exit("codeFlowValue"),o(u)):(e.consume(u),a)}function l(u){return e.exit("codeIndented"),t(u)}}function eUe(e,t,n){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?n(o):kn(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),i):Pi(e,s,"linePrefix",5)(o)}function s(o){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):kn(o)?i(o):n(o)}}const tUe={name:"codeText",tokenize:iUe,resolve:nUe,previous:rUe};function nUe(e){let t=e.length-4,n=3,r,i;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)i===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(i=r):(r===t||e[r][1].type==="lineEnding")&&(e[i][1].type="codeTextData",r!==i+2&&(e[i][1].end=e[r-1][1].end,e.splice(i+2,r-i-2),t-=r-i-2,r=i+2),i=void 0);return e}function rUe(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function iUe(e,t,n){let r=0,i,s;return o;function o(d){return e.enter("codeText"),e.enter("codeTextSequence"),a(d)}function a(d){return d===96?(e.consume(d),r++,a):(e.exit("codeTextSequence"),l(d))}function l(d){return d===null?n(d):d===32?(e.enter("space"),e.consume(d),e.exit("space"),l):d===96?(s=e.enter("codeTextSequence"),i=0,c(d)):kn(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),l):(e.enter("codeTextData"),u(d))}function u(d){return d===null||d===32||d===96||kn(d)?(e.exit("codeTextData"),l(d)):(e.consume(d),u)}function c(d){return d===96?(e.consume(d),i++,c):i===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(d)):(s.type="codeTextData",u(d))}}let sUe=class{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const i=n||0;this.setCursor(Math.trunc(t));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&s_(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),s_(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),s_(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);s_(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);s_(this.left,n.reverse())}}};function s_(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function oUe(e){const t={};let n=-1,r,i,s,o,a,l,u;const c=new sUe(e);for(;++n<c.length;){for(;n in t;)n=t[n];if(r=c.get(n),n&&r[1].type==="chunkFlow"&&c.get(n-1)[1].type==="listItemPrefix"&&(l=r[1]._tokenizer.events,s=0,s<l.length&&l[s][1].type==="lineEndingBlank"&&(s+=2),s<l.length&&l[s][1].type==="content"))for(;++s<l.length&&l[s][1].type!=="content";)l[s][1].type==="chunkText"&&(l[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,aUe(c,n)),n=t[n],u=!0);else if(r[1]._container){for(s=n,i=void 0;s--&&(o=c.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank");)o[0]==="enter"&&(i&&(c.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);i&&(r[1].end=Object.assign({},c.get(i)[1].start),a=c.slice(i,n),a.unshift(r),c.splice(i,n-i+1,a))}}return HC(e,0,Number.POSITIVE_INFINITY,c.slice(0)),!u}function aUe(e,t){const n=e.get(t)[1],r=e.get(t)[2];let i=t-1;const s=[],o=n._tokenizer||r.parser[n.contentType](n.start),a=o.events,l=[],u={};let c,d,f=-1,h=n,p=0,m=0;const g=[m];for(;h;){for(;e.get(++i)[1]!==h;);s.push(i),h._tokenizer||(c=r.sliceStream(h),h.next||c.push(null),d&&o.defineSkip(h.start),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(c),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),d=h,h=h.next}for(h=n;++f<a.length;)a[f][0]==="exit"&&a[f-1][0]==="enter"&&a[f][1].type===a[f-1][1].type&&a[f][1].start.line!==a[f][1].end.line&&(m=f+1,g.push(m),h._tokenizer=void 0,h.previous=void 0,h=h.next);for(o.events=[],h?(h._tokenizer=void 0,h.previous=void 0):g.pop(),f=g.length;f--;){const b=a.slice(g[f],g[f+1]),v=s.pop();l.push([v,v+b.length-1]),e.splice(v,2,b)}for(l.reverse(),f=-1;++f<l.length;)u[p+l[f][0]]=p+l[f][1],p+=l[f][1]-l[f][0]-1;return u}const lUe={tokenize:dUe,resolve:cUe},uUe={tokenize:fUe,partial:!0};function cUe(e){return oUe(e),e}function dUe(e,t){let n;return r;function r(a){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?s(a):kn(a)?e.check(uUe,o,s)(a):(e.consume(a),i)}function s(a){return e.exit("chunkContent"),e.exit("content"),t(a)}function o(a){return e.consume(a),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function fUe(e,t,n){const r=this;return i;function i(o){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),Pi(e,s,"linePrefix")}function s(o){if(o===null||kn(o))return n(o);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):e.interrupt(r.parser.constructs.flow,n,t)(o)}}function nne(e){return e!==null&&(e<32||e===127)}function hUe(e){return e!==null&&e<-2}function pUe(e){return e!==null&&(e<0||e===32)}function Qge(e,t,n,r,i,s,o,a,l){const u=l||Number.POSITIVE_INFINITY;let c=0;return d;function d(b){return b===60?(e.enter(r),e.enter(i),e.enter(s),e.consume(b),e.exit(s),f):b===null||b===32||b===41||nne(b)?n(b):(e.enter(r),e.enter(o),e.enter(a),e.enter("chunkString",{contentType:"string"}),m(b))}function f(b){return b===62?(e.enter(s),e.consume(b),e.exit(s),e.exit(i),e.exit(r),t):(e.enter(a),e.enter("chunkString",{contentType:"string"}),h(b))}function h(b){return b===62?(e.exit("chunkString"),e.exit(a),f(b)):b===null||b===60||hUe(b)?n(b):(e.consume(b),b===92?p:h)}function p(b){return b===60||b===62||b===92?(e.consume(b),h):h(b)}function m(b){return!c&&(b===null||b===41||pUe(b))?(e.exit("chunkString"),e.exit(a),e.exit(o),e.exit(r),t(b)):c<u&&b===40?(e.consume(b),c++,m):b===41?(e.consume(b),c--,m):b===null||b===32||b===40||nne(b)?n(b):(e.consume(b),b===92?g:m)}function g(b){return b===40||b===41||b===92?(e.consume(b),m):m(b)}}function rne(e){return e!==null&&e<-2}function mUe(e){return e===-2||e===-1||e===32}function Jge(e,t,n,r,i,s){const o=this;let a=0,l;return u;function u(h){return e.enter(r),e.enter(i),e.consume(h),e.exit(i),e.enter(s),c}function c(h){return a>999||h===null||h===91||h===93&&!l||h===94&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs?n(h):h===93?(e.exit(s),e.enter(i),e.consume(h),e.exit(i),e.exit(r),t):rne(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),c):(e.enter("chunkString",{contentType:"string"}),d(h))}function d(h){return h===null||h===91||h===93||rne(h)||a++>999?(e.exit("chunkString"),c(h)):(e.consume(h),l||(l=!mUe(h)),h===92?f:d)}function f(h){return h===91||h===92||h===93?(e.consume(h),a++,d):d(h)}}function ine(e){return e!==null&&e<-2}function sne(e){return e===-2||e===-1||e===32}function gUe(e,t,n,r){const i=Number.POSITIVE_INFINITY;let s=0;return o;function o(l){return sne(l)?(e.enter(n),a(l)):t(l)}function a(l){return sne(l)&&s++<i?(e.consume(l),a):(e.exit(n),t(l))}}function Zge(e,t,n,r,i,s){let o;return a;function a(f){return f===34||f===39||f===40?(e.enter(r),e.enter(i),e.consume(f),e.exit(i),o=f===40?41:f,l):n(f)}function l(f){return f===o?(e.enter(i),e.consume(f),e.exit(i),e.exit(r),t):(e.enter(s),u(f))}function u(f){return f===o?(e.exit(s),l(o)):f===null?n(f):ine(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),gUe(e,u,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),c(f))}function c(f){return f===o||f===null||ine(f)?(e.exit("chunkString"),u(f)):(e.consume(f),f===92?d:c)}function d(f){return f===o||f===92?(e.consume(f),c):c(f)}}function yUe(e){return e!==null&&e<-2}function Q9(e){return e===-2||e===-1||e===32}function vUe(e,t,n,r){const i=Number.POSITIVE_INFINITY;let s=0;return o;function o(l){return Q9(l)?(e.enter(n),a(l)):t(l)}function a(l){return Q9(l)&&s++<i?(e.consume(l),a):(e.exit(n),t(l))}}function $2(e,t){let n;return r;function r(i){return yUe(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r):Q9(i)?vUe(e,r,n?"linePrefix":"lineSuffix")(i):t(i)}}function bH(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const bUe={name:"definition",tokenize:xUe},wUe={tokenize:EUe,partial:!0};function xUe(e,t,n){const r=this;let i;return s;function s(h){return e.enter("definition"),o(h)}function o(h){return Jge.call(r,e,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(h)}function a(h){return i=bH(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),h===58?(e.enter("definitionMarker"),e.consume(h),e.exit("definitionMarker"),l):n(h)}function l(h){return ku(h)?$2(e,u)(h):u(h)}function u(h){return Qge(e,c,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(h)}function c(h){return e.attempt(wUe,d,d)(h)}function d(h){return xr(h)?Pi(e,f,"whitespace")(h):f(h)}function f(h){return h===null||kn(h)?(e.exit("definition"),r.parser.defined.push(i),t(h)):n(h)}}function EUe(e,t,n){return r;function r(a){return ku(a)?$2(e,i)(a):n(a)}function i(a){return Zge(e,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function s(a){return xr(a)?Pi(e,o,"whitespace")(a):o(a)}function o(a){return a===null||kn(a)?t(a):n(a)}}const _Ue={name:"hardBreakEscape",tokenize:TUe};function TUe(e,t,n){return r;function r(s){return e.enter("hardBreakEscape"),e.consume(s),i}function i(s){return kn(s)?(e.exit("hardBreakEscape"),t(s)):n(s)}}const CUe={name:"headingAtx",tokenize:AUe,resolve:SUe};function SUe(e,t){let n=e.length-2,r=3,i,s;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},s={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},HC(e,r,n-r+1,[["enter",i,t],["enter",s,t],["exit",s,t],["exit",i,t]])),e}function AUe(e,t,n){let r=0;return i;function i(c){return e.enter("atxHeading"),s(c)}function s(c){return e.enter("atxHeadingSequence"),o(c)}function o(c){return c===35&&r++<6?(e.consume(c),o):c===null||ku(c)?(e.exit("atxHeadingSequence"),a(c)):n(c)}function a(c){return c===35?(e.enter("atxHeadingSequence"),l(c)):c===null||kn(c)?(e.exit("atxHeading"),t(c)):xr(c)?Pi(e,a,"whitespace")(c):(e.enter("atxHeadingText"),u(c))}function l(c){return c===35?(e.consume(c),l):(e.exit("atxHeadingSequence"),a(c))}function u(c){return c===null||c===35||ku(c)?(e.exit("atxHeadingText"),a(c)):(e.consume(c),u)}}const kUe=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],one=["pre","script","style","textarea"],IUe={name:"htmlFlow",tokenize:NUe,resolveTo:PUe,concrete:!0},RUe={tokenize:$Ue,partial:!0},DUe={tokenize:OUe,partial:!0};function PUe(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function NUe(e,t,n){const r=this;let i,s,o,a,l;return u;function u(z){return c(z)}function c(z){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(z),d}function d(z){return z===33?(e.consume(z),f):z===47?(e.consume(z),s=!0,m):z===63?(e.consume(z),i=3,r.interrupt?t:U):Qd(z)?(e.consume(z),o=String.fromCharCode(z),g):n(z)}function f(z){return z===45?(e.consume(z),i=2,h):z===91?(e.consume(z),i=5,a=0,p):Qd(z)?(e.consume(z),i=4,r.interrupt?t:U):n(z)}function h(z){return z===45?(e.consume(z),r.interrupt?t:U):n(z)}function p(z){const G="CDATA[";return z===G.charCodeAt(a++)?(e.consume(z),a===G.length?r.interrupt?t:L:p):n(z)}function m(z){return Qd(z)?(e.consume(z),o=String.fromCharCode(z),g):n(z)}function g(z){if(z===null||z===47||z===62||ku(z)){const G=z===47,Q=o.toLowerCase();return!G&&!s&&one.includes(Q)?(i=1,r.interrupt?t(z):L(z)):kUe.includes(o.toLowerCase())?(i=6,G?(e.consume(z),b):r.interrupt?t(z):L(z)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(z):s?v(z):x(z))}return z===45||Mc(z)?(e.consume(z),o+=String.fromCharCode(z),g):n(z)}function b(z){return z===62?(e.consume(z),r.interrupt?t:L):n(z)}function v(z){return xr(z)?(e.consume(z),v):O(z)}function x(z){return z===47?(e.consume(z),O):z===58||z===95||Qd(z)?(e.consume(z),E):xr(z)?(e.consume(z),x):O(z)}function E(z){return z===45||z===46||z===58||z===95||Mc(z)?(e.consume(z),E):_(z)}function _(z){return z===61?(e.consume(z),C):xr(z)?(e.consume(z),_):x(z)}function C(z){return z===null||z===60||z===61||z===62||z===96?n(z):z===34||z===39?(e.consume(z),l=z,S):xr(z)?(e.consume(z),C):k(z)}function S(z){return z===l?(e.consume(z),l=null,R):z===null||kn(z)?n(z):(e.consume(z),S)}function k(z){return z===null||z===34||z===39||z===47||z===60||z===61||z===62||z===96||ku(z)?_(z):(e.consume(z),k)}function R(z){return z===47||z===62||xr(z)?x(z):n(z)}function O(z){return z===62?(e.consume(z),N):n(z)}function N(z){return z===null||kn(z)?L(z):xr(z)?(e.consume(z),N):n(z)}function L(z){return z===45&&i===2?(e.consume(z),Y):z===60&&i===1?(e.consume(z),J):z===62&&i===4?(e.consume(z),j):z===63&&i===3?(e.consume(z),U):z===93&&i===5?(e.consume(z),Z):kn(z)&&(i===6||i===7)?(e.exit("htmlFlowData"),e.check(RUe,V,$)(z)):z===null||kn(z)?(e.exit("htmlFlowData"),$(z)):(e.consume(z),L)}function $(z){return e.check(DUe,B,V)(z)}function B(z){return e.enter("lineEnding"),e.consume(z),e.exit("lineEnding"),H}function H(z){return z===null||kn(z)?$(z):(e.enter("htmlFlowData"),L(z))}function Y(z){return z===45?(e.consume(z),U):L(z)}function J(z){return z===47?(e.consume(z),o="",K):L(z)}function K(z){if(z===62){const G=o.toLowerCase();return one.includes(G)?(e.consume(z),j):L(z)}return Qd(z)&&o.length<8?(e.consume(z),o+=String.fromCharCode(z),K):L(z)}function Z(z){return z===93?(e.consume(z),U):L(z)}function U(z){return z===62?(e.consume(z),j):z===45&&i===2?(e.consume(z),U):L(z)}function j(z){return z===null||kn(z)?(e.exit("htmlFlowData"),V(z)):(e.consume(z),j)}function V(z){return e.exit("htmlFlow"),t(z)}}function OUe(e,t,n){const r=this;return i;function i(o){return kn(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s):n(o)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}function $Ue(e,t,n){return r;function r(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),e.attempt(NO,t,n)}}const MUe={name:"htmlText",tokenize:LUe};function LUe(e,t,n){const r=this;let i,s,o;return a;function a(U){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(U),l}function l(U){return U===33?(e.consume(U),u):U===47?(e.consume(U),_):U===63?(e.consume(U),x):Qd(U)?(e.consume(U),k):n(U)}function u(U){return U===45?(e.consume(U),c):U===91?(e.consume(U),s=0,p):Qd(U)?(e.consume(U),v):n(U)}function c(U){return U===45?(e.consume(U),h):n(U)}function d(U){return U===null?n(U):U===45?(e.consume(U),f):kn(U)?(o=d,J(U)):(e.consume(U),d)}function f(U){return U===45?(e.consume(U),h):d(U)}function h(U){return U===62?Y(U):U===45?f(U):d(U)}function p(U){const j="CDATA[";return U===j.charCodeAt(s++)?(e.consume(U),s===j.length?m:p):n(U)}function m(U){return U===null?n(U):U===93?(e.consume(U),g):kn(U)?(o=m,J(U)):(e.consume(U),m)}function g(U){return U===93?(e.consume(U),b):m(U)}function b(U){return U===62?Y(U):U===93?(e.consume(U),b):m(U)}function v(U){return U===null||U===62?Y(U):kn(U)?(o=v,J(U)):(e.consume(U),v)}function x(U){return U===null?n(U):U===63?(e.consume(U),E):kn(U)?(o=x,J(U)):(e.consume(U),x)}function E(U){return U===62?Y(U):x(U)}function _(U){return Qd(U)?(e.consume(U),C):n(U)}function C(U){return U===45||Mc(U)?(e.consume(U),C):S(U)}function S(U){return kn(U)?(o=S,J(U)):xr(U)?(e.consume(U),S):Y(U)}function k(U){return U===45||Mc(U)?(e.consume(U),k):U===47||U===62||ku(U)?R(U):n(U)}function R(U){return U===47?(e.consume(U),Y):U===58||U===95||Qd(U)?(e.consume(U),O):kn(U)?(o=R,J(U)):xr(U)?(e.consume(U),R):Y(U)}function O(U){return U===45||U===46||U===58||U===95||Mc(U)?(e.consume(U),O):N(U)}function N(U){return U===61?(e.consume(U),L):kn(U)?(o=N,J(U)):xr(U)?(e.consume(U),N):R(U)}function L(U){return U===null||U===60||U===61||U===62||U===96?n(U):U===34||U===39?(e.consume(U),i=U,$):kn(U)?(o=L,J(U)):xr(U)?(e.consume(U),L):(e.consume(U),B)}function $(U){return U===i?(e.consume(U),i=void 0,H):U===null?n(U):kn(U)?(o=$,J(U)):(e.consume(U),$)}function B(U){return U===null||U===34||U===39||U===60||U===61||U===96?n(U):U===47||U===62||ku(U)?R(U):(e.consume(U),B)}function H(U){return U===47||U===62||ku(U)?R(U):n(U)}function Y(U){return U===62?(e.consume(U),e.exit("htmlTextData"),e.exit("htmlText"),t):n(U)}function J(U){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(U),e.exit("lineEnding"),K}function K(U){return xr(U)?Pi(e,Z,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(U):Z(U)}function Z(U){return e.enter("htmlTextData"),o(U)}}const wH={name:"labelEnd",tokenize:qUe,resolveTo:UUe,resolveAll:zUe},FUe={tokenize:HUe},jUe={tokenize:WUe},BUe={tokenize:VUe};function zUe(e){let t=-1;for(;++t<e.length;){const n=e[t][1];(n.type==="labelImage"||n.type==="labelLink"||n.type==="labelEnd")&&(e.splice(t+1,n.type==="labelImage"?4:2),n.type="data",t++)}return e}function UUe(e,t){let n=e.length,r=0,i,s,o,a;for(;n--;)if(i=e[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(e[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=n);const l={type:e[s][1].type==="labelLink"?"link":"image",start:Object.assign({},e[s][1].start),end:Object.assign({},e[e.length-1][1].end)},u={type:"label",start:Object.assign({},e[s][1].start),end:Object.assign({},e[o][1].end)},c={type:"labelText",start:Object.assign({},e[s+r+2][1].end),end:Object.assign({},e[o-2][1].start)};return a=[["enter",l,t],["enter",u,t]],a=Tc(a,e.slice(s+1,s+r+3)),a=Tc(a,[["enter",c,t]]),a=Tc(a,Gge(t.parser.constructs.insideSpan.null,e.slice(s+r+4,o-3),t)),a=Tc(a,[["exit",c,t],e[o-2],e[o-1],["exit",u,t]]),a=Tc(a,e.slice(o+1)),a=Tc(a,[["exit",l,t]]),HC(e,s,e.length,a),e}function qUe(e,t,n){const r=this;let i=r.events.length,s,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return a;function a(f){return s?s._inactive?d(f):(o=r.parser.defined.includes(bH(r.sliceSerialize({start:s.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(f),e.exit("labelMarker"),e.exit("labelEnd"),l):n(f)}function l(f){return f===40?e.attempt(FUe,c,o?c:d)(f):f===91?e.attempt(jUe,c,o?u:d)(f):o?c(f):d(f)}function u(f){return e.attempt(BUe,c,d)(f)}function c(f){return t(f)}function d(f){return s._balanced=!0,n(f)}}function HUe(e,t,n){return r;function r(d){return e.enter("resource"),e.enter("resourceMarker"),e.consume(d),e.exit("resourceMarker"),i}function i(d){return ku(d)?$2(e,s)(d):s(d)}function s(d){return d===41?c(d):Qge(e,o,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(d)}function o(d){return ku(d)?$2(e,l)(d):c(d)}function a(d){return n(d)}function l(d){return d===34||d===39||d===40?Zge(e,u,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(d):c(d)}function u(d){return ku(d)?$2(e,c)(d):c(d)}function c(d){return d===41?(e.enter("resourceMarker"),e.consume(d),e.exit("resourceMarker"),e.exit("resource"),t):n(d)}}function WUe(e,t,n){const r=this;return i;function i(a){return Jge.call(r,e,s,o,"reference","referenceMarker","referenceString")(a)}function s(a){return r.parser.defined.includes(bH(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(a):n(a)}function o(a){return n(a)}}function VUe(e,t,n){return r;function r(s){return e.enter("reference"),e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),i}function i(s){return s===93?(e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),e.exit("reference"),t):n(s)}}const GUe={name:"labelStartImage",tokenize:YUe,resolveAll:wH.resolveAll};function YUe(e,t,n){const r=this;return i;function i(a){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(a),e.exit("labelImageMarker"),s}function s(a){return a===91?(e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelImage"),o):n(a)}function o(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):t(a)}}const KUe={name:"labelStartLink",tokenize:XUe,resolveAll:wH.resolveAll};function XUe(e,t,n){const r=this;return i;function i(o){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):t(o)}}const iM={name:"lineEnding",tokenize:QUe};function QUe(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),Pi(e,t,"linePrefix")}}const OR={name:"thematicBreak",tokenize:JUe};function JUe(e,t,n){let r=0,i;return s;function s(u){return e.enter("thematicBreak"),o(u)}function o(u){return i=u,a(u)}function a(u){return u===i?(e.enter("thematicBreakSequence"),l(u)):r>=3&&(u===null||kn(u))?(e.exit("thematicBreak"),t(u)):n(u)}function l(u){return u===i?(e.consume(u),r++,l):(e.exit("thematicBreakSequence"),xr(u)?Pi(e,a,"whitespace")(u):a(u))}}const Ka={name:"list",tokenize:tqe,continuation:{tokenize:nqe},exit:iqe},ZUe={tokenize:sqe,partial:!0},eqe={tokenize:rqe,partial:!0};function tqe(e,t,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return a;function a(h){const p=r.containerState.type||(h===42||h===43||h===45?"listUnordered":"listOrdered");if(p==="listUnordered"?!r.containerState.marker||h===r.containerState.marker:X9(h)){if(r.containerState.type||(r.containerState.type=p,e.enter(p,{_container:!0})),p==="listUnordered")return e.enter("listItemPrefix"),h===42||h===45?e.check(OR,n,u)(h):u(h);if(!r.interrupt||h===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),l(h)}return n(h)}function l(h){return X9(h)&&++o<10?(e.consume(h),l):(!r.interrupt||o<2)&&(r.containerState.marker?h===r.containerState.marker:h===41||h===46)?(e.exit("listItemValue"),u(h)):n(h)}function u(h){return e.enter("listItemMarker"),e.consume(h),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||h,e.check(NO,r.interrupt?n:c,e.attempt(ZUe,f,d))}function c(h){return r.containerState.initialBlankLine=!0,s++,f(h)}function d(h){return xr(h)?(e.enter("listItemPrefixWhitespace"),e.consume(h),e.exit("listItemPrefixWhitespace"),f):n(h)}function f(h){return r.containerState.size=s+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(h)}}function nqe(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(NO,i,s);function i(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,Pi(e,t,"listItemIndent",r.containerState.size+1)(a)}function s(a){return r.containerState.furtherBlankLines||!xr(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(eqe,t,o)(a))}function o(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,Pi(e,e.attempt(Ka,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function rqe(e,t,n){const r=this;return Pi(e,i,"listItemIndent",r.containerState.size+1);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?t(s):n(s)}}function iqe(e){e.exit(this.containerState.type)}function sqe(e,t,n){const r=this;return Pi(e,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const o=r.events[r.events.length-1];return!xr(s)&&o&&o[1].type==="listItemPrefixWhitespace"?t(s):n(s)}}const ane={name:"setextUnderline",tokenize:aqe,resolveTo:oqe};function oqe(e,t){let n=e.length,r,i,s;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(i=n)}else e[n][1].type==="content"&&e.splice(n,1),!s&&e[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:Object.assign({},e[i][1].start),end:Object.assign({},e[e.length-1][1].end)};return e[i][1].type="setextHeadingText",s?(e.splice(i,0,["enter",o,t]),e.splice(s+1,0,["exit",e[r][1],t]),e[r][1].end=Object.assign({},e[s][1].end)):e[r][1]=o,e.push(["exit",o,t]),e}function aqe(e,t,n){const r=this;let i;return s;function s(u){let c=r.events.length,d;for(;c--;)if(r.events[c][1].type!=="lineEnding"&&r.events[c][1].type!=="linePrefix"&&r.events[c][1].type!=="content"){d=r.events[c][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||d)?(e.enter("setextHeadingLine"),i=u,o(u)):n(u)}function o(u){return e.enter("setextHeadingLineSequence"),a(u)}function a(u){return u===i?(e.consume(u),a):(e.exit("setextHeadingLineSequence"),xr(u)?Pi(e,l,"lineSuffix")(u):l(u))}function l(u){return u===null||kn(u)?(e.exit("setextHeadingLine"),t(u)):n(u)}}const lqe={tokenize:uqe};function uqe(e){const t=this,n=e.attempt(NO,r,e.attempt(this.parser.constructs.flowInitial,i,vH(e,e.attempt(this.parser.constructs.flow,i,e.attempt(lUe,i)),"linePrefix")));return n;function r(s){if(s===null){e.consume(s);return}return e.enter("lineEndingBlank"),e.consume(s),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function i(s){if(s===null){e.consume(s);return}return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const cqe={resolveAll:tye()},dqe=eye("string"),fqe=eye("text");function eye(e){return{tokenize:t,resolveAll:tye(e==="text"?hqe:void 0)};function t(n){const r=this,i=this.parser.constructs[e],s=n.attempt(i,o,a);return o;function o(c){return u(c)?s(c):a(c)}function a(c){if(c===null){n.consume(c);return}return n.enter("data"),n.consume(c),l}function l(c){return u(c)?(n.exit("data"),s(c)):(n.consume(c),l)}function u(c){if(c===null)return!0;const d=i[c];let f=-1;if(d)for(;++f<d.length;){const h=d[f];if(!h.previous||h.previous.call(r,r.previous))return!0}return!1}}}function tye(e){return t;function t(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return e?e(n,r):n}}function hqe(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],i=t.sliceStream(r);let s=i.length,o=-1,a=0,l;for(;s--;){const u=i[s];if(typeof u=="string"){for(o=u.length;u.charCodeAt(o-1)===32;)a++,o--;if(o)break;o=-1}else if(u===-2)l=!0,a++;else if(u!==-1){s++;break}}if(a){const u={type:n===e.length||l||a<2?"lineSuffix":"hardBreakTrailing",start:{line:r.end.line,column:r.end.column-a,offset:r.end.offset-a,_index:r.start._index+s,_bufferIndex:s?o:r.start._bufferIndex+o},end:Object.assign({},r.end)};r.end=Object.assign({},u.start),r.start.offset===r.end.offset?Object.assign(r,u):(e.splice(n,0,["enter",u,t],["exit",u,t]),n+=2)}n++}return e}function pqe(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const s=e[i].resolveAll;s&&!r.includes(s)&&(t=s(t,n),r.push(s))}return t}function mqe(e,t,n){let r=Object.assign(n?Object.assign({},n):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const i={},s=[];let o=[],a=[];const l={consume:v,enter:x,exit:E,attempt:S(_),check:S(C),interrupt:S(C,{interrupt:!0})},u={previous:null,code:null,containerState:{},events:[],parser:e,sliceStream:h,sliceSerialize:f,now:p,defineSkip:m,write:d};let c=t.tokenize.call(u,l);return t.resolveAll&&s.push(t),u;function d(N){return o=_ze(o,N),g(),o[o.length-1]!==null?[]:(k(t,0),u.events=pqe(s,u.events,u),u.events)}function f(N,L){return yqe(h(N),L)}function h(N){return gqe(o,N)}function p(){const{line:N,column:L,offset:$,_index:B,_bufferIndex:H}=r;return{line:N,column:L,offset:$,_index:B,_bufferIndex:H}}function m(N){i[N.line]=N.column,O()}function g(){let N;for(;r._index<o.length;){const L=o[r._index];if(typeof L=="string")for(N=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===N&&r._bufferIndex<L.length;)b(L.charCodeAt(r._bufferIndex));else b(L)}}function b(N){c=c(N)}function v(N){yH(N)?(r.line++,r.column=1,r.offset+=N===-3?2:1,O()):N!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),u.previous=N}function x(N,L){const $=L||{};return $.type=N,$.start=p(),u.events.push(["enter",$,u]),a.push($),$}function E(N){const L=a.pop();return L.end=p(),u.events.push(["exit",L,u]),L}function _(N,L){k(N,L.from)}function C(N,L){L.restore()}function S(N,L){return $;function $(B,H,Y){let J,K,Z,U;return Array.isArray(B)?V(B):"tokenize"in B?V([B]):j(B);function j(ie){return me;function me(ae){const fe=ae!==null&&ie[ae],be=ae!==null&&ie.null,te=[...Array.isArray(fe)?fe:fe?[fe]:[],...Array.isArray(be)?be:be?[be]:[]];return V(te)(ae)}}function V(ie){return J=ie,K=0,ie.length===0?Y:z(ie[K])}function z(ie){return me;function me(ae){return U=R(),Z=ie,ie.partial||(u.currentConstruct=ie),ie.name&&u.parser.constructs.disable.null.includes(ie.name)?Q():ie.tokenize.call(L?Object.assign(Object.create(u),L):u,l,G,Q)(ae)}}function G(ie){return N(Z,U),H}function Q(ie){return U.restore(),++K<J.length?z(J[K]):Y}}}function k(N,L){N.resolveAll&&!s.includes(N)&&s.push(N),N.resolve&&AT(u.events,L,u.events.length-L,N.resolve(u.events.slice(L),u)),N.resolveTo&&(u.events=N.resolveTo(u.events,u))}function R(){const N=p(),L=u.previous,$=u.currentConstruct,B=u.events.length,H=Array.from(a);return{restore:Y,from:B};function Y(){r=N,u.previous=L,u.currentConstruct=$,u.events.length=B,a=H,O()}}function O(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function gqe(e,t){const n=t.start._index,r=t.start._bufferIndex,i=t.end._index,s=t.end._bufferIndex;let o;if(n===i)o=[e[n].slice(r,s)];else{if(o=e.slice(n,i),r>-1){const a=o[0];typeof a=="string"?o[0]=a.slice(r):o.shift()}s>0&&o.push(e[i].slice(0,s))}return o}function yqe(e,t){let n=-1;const r=[];let i;for(;++n<e.length;){const s=e[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=t?" ":"	";break}case-1:{if(!t&&i)continue;o=" ";break}default:o=String.fromCharCode(s)}i=s===-2,r.push(o)}return r.join("")}const vqe={42:Ka,43:Ka,45:Ka,48:Ka,49:Ka,50:Ka,51:Ka,52:Ka,53:Ka,54:Ka,55:Ka,56:Ka,57:Ka,62:Yge},bqe={91:bUe},wqe={[-2]:rM,[-1]:rM,32:rM},xqe={35:CUe,42:OR,45:[ane,OR],60:IUe,61:ane,95:OR,96:tne,126:tne},Eqe={38:Xge,92:Kge},_qe={[-5]:iM,[-4]:iM,[-3]:iM,33:GUe,38:Xge,42:K9,60:[Uze,MUe],91:KUe,92:[_Ue,Kge],93:wH,95:K9,96:tUe},Tqe={null:[K9,cqe]},Cqe={null:[42,95]},Sqe={null:[]},Aqe=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:Cqe,contentInitial:bqe,disable:Sqe,document:vqe,flow:xqe,flowInitial:wqe,insideSpan:Tqe,string:Eqe,text:_qe},Symbol.toStringTag,{value:"Module"}));function kqe(e){const n=Cze([Aqe,...(e||{}).extensions||[]]),r={defined:[],lazy:{},constructs:n,content:i(kze),document:i(Rze),flow:i(lqe),string:i(dqe),text:i(fqe)};return r;function i(s){return o;function o(a){return mqe(r,s,a)}}}class Iqe{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const i=n||0;this.setCursor(Math.trunc(t));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&o_(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),o_(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),o_(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);o_(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);o_(this.left,n.reverse())}}}function o_(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function Rqe(e){const t={};let n=-1,r,i,s,o,a,l,u;const c=new Iqe(e);for(;++n<c.length;){for(;n in t;)n=t[n];if(r=c.get(n),n&&r[1].type==="chunkFlow"&&c.get(n-1)[1].type==="listItemPrefix"&&(l=r[1]._tokenizer.events,s=0,s<l.length&&l[s][1].type==="lineEndingBlank"&&(s+=2),s<l.length&&l[s][1].type==="content"))for(;++s<l.length&&l[s][1].type!=="content";)l[s][1].type==="chunkText"&&(l[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,Dqe(c,n)),n=t[n],u=!0);else if(r[1]._container){for(s=n,i=void 0;s--&&(o=c.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank");)o[0]==="enter"&&(i&&(c.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);i&&(r[1].end=Object.assign({},c.get(i)[1].start),a=c.slice(i,n),a.unshift(r),c.splice(i,n-i+1,a))}}return AT(e,0,Number.POSITIVE_INFINITY,c.slice(0)),!u}function Dqe(e,t){const n=e.get(t)[1],r=e.get(t)[2];let i=t-1;const s=[],o=n._tokenizer||r.parser[n.contentType](n.start),a=o.events,l=[],u={};let c,d,f=-1,h=n,p=0,m=0;const g=[m];for(;h;){for(;e.get(++i)[1]!==h;);s.push(i),h._tokenizer||(c=r.sliceStream(h),h.next||c.push(null),d&&o.defineSkip(h.start),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(c),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),d=h,h=h.next}for(h=n;++f<a.length;)a[f][0]==="exit"&&a[f-1][0]==="enter"&&a[f][1].type===a[f-1][1].type&&a[f][1].start.line!==a[f][1].end.line&&(m=f+1,g.push(m),h._tokenizer=void 0,h.previous=void 0,h=h.next);for(o.events=[],h?(h._tokenizer=void 0,h.previous=void 0):g.pop(),f=g.length;f--;){const b=a.slice(g[f],g[f+1]),v=s.pop();l.push([v,v+b.length-1]),e.splice(v,2,b)}for(l.reverse(),f=-1;++f<l.length;)u[p+l[f][0]]=p+l[f][1],p+=l[f][1]-l[f][0]-1;return u}function Pqe(e){for(;!Rqe(e););return e}const lne=/[\0\t\n\r]/g;function Nqe(){let e=1,t="",n=!0,r;return i;function i(s,o,a){const l=[];let u,c,d,f,h;for(s=t+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),d=0,t="",n&&(s.charCodeAt(0)===65279&&d++,n=void 0);d<s.length;){if(lne.lastIndex=d,u=lne.exec(s),f=u&&u.index!==void 0?u.index:s.length,h=s.charCodeAt(f),!u){t=s.slice(d);break}if(h===10&&d===f&&r)l.push(-3),r=void 0;else switch(r&&(l.push(-5),r=void 0),d<f&&(l.push(s.slice(d,f)),e+=f-d),h){case 0:{l.push(65533),e++;break}case 9:{for(c=Math.ceil(e/4)*4,l.push(-2);e++<c;)l.push(-1);break}case 10:{l.push(-4),e=1;break}default:r=!0,e=1}d=f+1}return a&&(r&&l.push(-5),t&&l.push(t),l.push(null)),l}}function Oqe(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function $qe(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}const Mqe=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function Lqe(e){return e.replace(Mqe,Fqe)}function Fqe(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return $qe(n.slice(s?2:1),s?16:10)}return gH(n)||e}function sM(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const nye={}.hasOwnProperty;function jqe(e,t,n){return typeof t!="string"&&(n=t,t=void 0),Bqe(n)(Pqe(kqe(n).document().write(Nqe()(e,t,!0))))}function Bqe(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(Je),autolinkProtocol:R,autolinkEmail:R,atxHeading:s(Fe),blockQuote:s(be),characterEscape:R,characterReference:R,codeFenced:s(te),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(te,o),codeText:s(re,o),codeTextData:R,data:R,codeFlowValue:R,definition:s(we),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(Ee),hardBreakEscape:s(We),hardBreakTrailing:s(We),htmlFlow:s(Me,o),htmlFlowData:R,htmlText:s(Me,o),htmlTextData:R,image:s(Be),label:o,link:s(Je),listItem:s(ht),listItemValue:f,listOrdered:s(lt,d),listUnordered:s(lt),paragraph:s(vt),reference:z,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(Fe),strong:s(Pe),thematicBreak:s(Wt)},exit:{atxHeading:l(),atxHeadingSequence:_,autolink:l(),autolinkEmail:fe,autolinkProtocol:ae,blockQuote:l(),characterEscapeValue:O,characterReferenceMarkerHexadecimal:Q,characterReferenceMarkerNumeric:Q,characterReferenceValue:ie,characterReference:me,codeFenced:l(g),codeFencedFence:m,codeFencedFenceInfo:h,codeFencedFenceMeta:p,codeFlowValue:O,codeIndented:l(b),codeText:l(H),codeTextData:O,data:O,definition:l(),definitionDestinationString:E,definitionLabelString:v,definitionTitleString:x,emphasis:l(),hardBreakEscape:l(L),hardBreakTrailing:l(L),htmlFlow:l($),htmlFlowData:O,htmlText:l(B),htmlTextData:O,image:l(J),label:Z,labelText:K,lineEnding:N,link:l(Y),listItem:l(),listOrdered:l(),listUnordered:l(),paragraph:l(),referenceString:G,resourceDestinationString:U,resourceTitleString:j,resource:V,setextHeading:l(k),setextHeadingLineSequence:S,setextHeadingText:C,strong:l(),thematicBreak:l()}};rye(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(Ce){let Ne={type:"root",children:[]};const ot={stack:[Ne],tokenStack:[],config:t,enter:a,exit:u,buffer:o,resume:c,data:n},xt=[];let Ct=-1;for(;++Ct<Ce.length;)if(Ce[Ct][1].type==="listOrdered"||Ce[Ct][1].type==="listUnordered")if(Ce[Ct][0]==="enter")xt.push(Ct);else{const Qt=xt.pop();Ct=i(Ce,Qt,Ct)}for(Ct=-1;++Ct<Ce.length;){const Qt=t[Ce[Ct][0]];nye.call(Qt,Ce[Ct][1].type)&&Qt[Ce[Ct][1].type].call(Object.assign({sliceSerialize:Ce[Ct][2].sliceSerialize},ot),Ce[Ct][1])}if(ot.tokenStack.length>0){const Qt=ot.tokenStack[ot.tokenStack.length-1];(Qt[1]||une).call(ot,void 0,Qt[0])}for(Ne.position={start:vm(Ce.length>0?Ce[0][1].start:{line:1,column:1,offset:0}),end:vm(Ce.length>0?Ce[Ce.length-2][1].end:{line:1,column:1,offset:0})},Ct=-1;++Ct<t.transforms.length;)Ne=t.transforms[Ct](Ne)||Ne;return Ne}function i(Ce,Ne,ot){let xt=Ne-1,Ct=-1,Qt=!1,yn,er,Wr,pn;for(;++xt<=ot;){const En=Ce[xt];switch(En[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{En[0]==="enter"?Ct++:Ct--,pn=void 0;break}case"lineEndingBlank":{En[0]==="enter"&&(yn&&!pn&&!Ct&&!Wr&&(Wr=xt),pn=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:pn=void 0}if(!Ct&&En[0]==="enter"&&En[1].type==="listItemPrefix"||Ct===-1&&En[0]==="exit"&&(En[1].type==="listUnordered"||En[1].type==="listOrdered")){if(yn){let Mr=xt;for(er=void 0;Mr--;){const On=Ce[Mr];if(On[1].type==="lineEnding"||On[1].type==="lineEndingBlank"){if(On[0]==="exit")continue;er&&(Ce[er][1].type="lineEndingBlank",Qt=!0),On[1].type="lineEnding",er=Mr}else if(!(On[1].type==="linePrefix"||On[1].type==="blockQuotePrefix"||On[1].type==="blockQuotePrefixWhitespace"||On[1].type==="blockQuoteMarker"||On[1].type==="listItemIndent"))break}Wr&&(!er||Wr<er)&&(yn._spread=!0),yn.end=Object.assign({},er?Ce[er][1].start:En[1].end),Ce.splice(er||xt,0,["exit",yn,En[2]]),xt++,ot++}if(En[1].type==="listItemPrefix"){const Mr={type:"listItem",_spread:!1,start:Object.assign({},En[1].start),end:void 0};yn=Mr,Ce.splice(xt,0,["enter",Mr,En[2]]),xt++,ot++,Wr=void 0,pn=!0}}}return Ce[Ne][1]._spread=Qt,ot}function s(Ce,Ne){return ot;function ot(xt){a.call(this,Ce(xt),xt),Ne&&Ne.call(this,xt)}}function o(){this.stack.push({type:"fragment",children:[]})}function a(Ce,Ne,ot){this.stack[this.stack.length-1].children.push(Ce),this.stack.push(Ce),this.tokenStack.push([Ne,ot]),Ce.position={start:vm(Ne.start),end:void 0}}function l(Ce){return Ne;function Ne(ot){Ce&&Ce.call(this,ot),u.call(this,ot)}}function u(Ce,Ne){const ot=this.stack.pop(),xt=this.tokenStack.pop();if(xt)xt[0].type!==Ce.type&&(Ne?Ne.call(this,Ce,xt[0]):(xt[1]||une).call(this,Ce,xt[0]));else throw new Error("Cannot close `"+Ce.type+"` ("+O2({start:Ce.start,end:Ce.end})+"): its not open");ot.position.end=vm(Ce.end)}function c(){return xze(this.stack.pop())}function d(){this.data.expectingFirstListItemValue=!0}function f(Ce){if(this.data.expectingFirstListItemValue){const Ne=this.stack[this.stack.length-2];Ne.start=Number.parseInt(this.sliceSerialize(Ce),10),this.data.expectingFirstListItemValue=void 0}}function h(){const Ce=this.resume(),Ne=this.stack[this.stack.length-1];Ne.lang=Ce}function p(){const Ce=this.resume(),Ne=this.stack[this.stack.length-1];Ne.meta=Ce}function m(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function g(){const Ce=this.resume(),Ne=this.stack[this.stack.length-1];Ne.value=Ce.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function b(){const Ce=this.resume(),Ne=this.stack[this.stack.length-1];Ne.value=Ce.replace(/(\r?\n|\r)$/g,"")}function v(Ce){const Ne=this.resume(),ot=this.stack[this.stack.length-1];ot.label=Ne,ot.identifier=sM(this.sliceSerialize(Ce)).toLowerCase()}function x(){const Ce=this.resume(),Ne=this.stack[this.stack.length-1];Ne.title=Ce}function E(){const Ce=this.resume(),Ne=this.stack[this.stack.length-1];Ne.url=Ce}function _(Ce){const Ne=this.stack[this.stack.length-1];if(!Ne.depth){const ot=this.sliceSerialize(Ce).length;Ne.depth=ot}}function C(){this.data.setextHeadingSlurpLineEnding=!0}function S(Ce){const Ne=this.stack[this.stack.length-1];Ne.depth=this.sliceSerialize(Ce).codePointAt(0)===61?1:2}function k(){this.data.setextHeadingSlurpLineEnding=void 0}function R(Ce){const ot=this.stack[this.stack.length-1].children;let xt=ot[ot.length-1];(!xt||xt.type!=="text")&&(xt=wt(),xt.position={start:vm(Ce.start),end:void 0},ot.push(xt)),this.stack.push(xt)}function O(Ce){const Ne=this.stack.pop();Ne.value+=this.sliceSerialize(Ce),Ne.position.end=vm(Ce.end)}function N(Ce){const Ne=this.stack[this.stack.length-1];if(this.data.atHardBreak){const ot=Ne.children[Ne.children.length-1];ot.position.end=vm(Ce.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(Ne.type)&&(R.call(this,Ce),O.call(this,Ce))}function L(){this.data.atHardBreak=!0}function $(){const Ce=this.resume(),Ne=this.stack[this.stack.length-1];Ne.value=Ce}function B(){const Ce=this.resume(),Ne=this.stack[this.stack.length-1];Ne.value=Ce}function H(){const Ce=this.resume(),Ne=this.stack[this.stack.length-1];Ne.value=Ce}function Y(){const Ce=this.stack[this.stack.length-1];if(this.data.inReference){const Ne=this.data.referenceType||"shortcut";Ce.type+="Reference",Ce.referenceType=Ne,delete Ce.url,delete Ce.title}else delete Ce.identifier,delete Ce.label;this.data.referenceType=void 0}function J(){const Ce=this.stack[this.stack.length-1];if(this.data.inReference){const Ne=this.data.referenceType||"shortcut";Ce.type+="Reference",Ce.referenceType=Ne,delete Ce.url,delete Ce.title}else delete Ce.identifier,delete Ce.label;this.data.referenceType=void 0}function K(Ce){const Ne=this.sliceSerialize(Ce),ot=this.stack[this.stack.length-2];ot.label=Lqe(Ne),ot.identifier=sM(Ne).toLowerCase()}function Z(){const Ce=this.stack[this.stack.length-1],Ne=this.resume(),ot=this.stack[this.stack.length-1];if(this.data.inReference=!0,ot.type==="link"){const xt=Ce.children;ot.children=xt}else ot.alt=Ne}function U(){const Ce=this.resume(),Ne=this.stack[this.stack.length-1];Ne.url=Ce}function j(){const Ce=this.resume(),Ne=this.stack[this.stack.length-1];Ne.title=Ce}function V(){this.data.inReference=void 0}function z(){this.data.referenceType="collapsed"}function G(Ce){const Ne=this.resume(),ot=this.stack[this.stack.length-1];ot.label=Ne,ot.identifier=sM(this.sliceSerialize(Ce)).toLowerCase(),this.data.referenceType="full"}function Q(Ce){this.data.characterReferenceType=Ce.type}function ie(Ce){const Ne=this.sliceSerialize(Ce),ot=this.data.characterReferenceType;let xt;ot?(xt=Oqe(Ne,ot==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):xt=gH(Ne);const Ct=this.stack[this.stack.length-1];Ct.value+=xt}function me(Ce){const Ne=this.stack.pop();Ne.position.end=vm(Ce.end)}function ae(Ce){O.call(this,Ce);const Ne=this.stack[this.stack.length-1];Ne.url=this.sliceSerialize(Ce)}function fe(Ce){O.call(this,Ce);const Ne=this.stack[this.stack.length-1];Ne.url="mailto:"+this.sliceSerialize(Ce)}function be(){return{type:"blockquote",children:[]}}function te(){return{type:"code",lang:null,meta:null,value:""}}function re(){return{type:"inlineCode",value:""}}function we(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Ee(){return{type:"emphasis",children:[]}}function Fe(){return{type:"heading",depth:0,children:[]}}function We(){return{type:"break"}}function Me(){return{type:"html",value:""}}function Be(){return{type:"image",title:null,url:"",alt:null}}function Je(){return{type:"link",title:null,url:"",children:[]}}function lt(Ce){return{type:"list",ordered:Ce.type==="listOrdered",start:null,spread:Ce._spread,children:[]}}function ht(Ce){return{type:"listItem",spread:Ce._spread,checked:null,children:[]}}function vt(){return{type:"paragraph",children:[]}}function Pe(){return{type:"strong",children:[]}}function wt(){return{type:"text",value:""}}function Wt(){return{type:"thematicBreak"}}}function vm(e){return{line:e.line,column:e.column,offset:e.offset}}function rye(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?rye(e,r):zqe(e,r)}}function zqe(e,t){let n;for(n in t)if(nye.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function une(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+O2({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+O2({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+O2({start:t.start,end:t.end})+") is still open")}function Uqe(e){const t=this;t.parser=n;function n(r){return jqe(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function qqe(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function Hqe(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function Wqe(e,t){const n=t.value?t.value+`
`:"",r={};t.lang&&(r.className=["language-"+t.lang]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(i.data={meta:t.meta}),e.patch(t,i),i=e.applyData(t,i),i={type:"element",tagName:"pre",properties:{},children:[i]},e.patch(t,i),i}function Vqe(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Gqe(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const cne=Yqe(/[\dA-Za-z]/);function Yqe(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function Fx(e){const t=[];let n=-1,r=0,i=0;for(;++n<e.length;){const s=e.charCodeAt(n);let o="";if(s===37&&cne(e.charCodeAt(n+1))&&cne(e.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const a=e.charCodeAt(n+1);s<56320&&a>56319&&a<57344?(o=String.fromCharCode(s,a),i=1):o=""}else o=String.fromCharCode(s);o&&(t.push(e.slice(r,n),encodeURIComponent(o)),r=n+i+1,o=""),i&&(n+=i,i=0)}return t.join("")+e.slice(r)}function Kqe(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),i=Fx(r.toLowerCase()),s=e.footnoteOrder.indexOf(r);let o,a=e.footnoteCounts.get(r);a===void 0?(a=0,e.footnoteOrder.push(r),o=e.footnoteOrder.length):o=s+1,a+=1,e.footnoteCounts.set(r,a);const l={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};e.patch(t,l);const u={type:"element",tagName:"sup",properties:{},children:[l]};return e.patch(t,u),e.applyData(t,u)}function Xqe(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Qqe(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function iye(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const i=e.all(t),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift({type:"text",value:"["});const o=i[i.length-1];return o&&o.type==="text"?o.value+=r:i.push({type:"text",value:r}),i}function Jqe(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return iye(e,t);const i={src:Fx(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"img",properties:i,children:[]};return e.patch(t,s),e.applyData(t,s)}function Zqe(e,t){const n={src:Fx(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function eHe(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function tHe(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return iye(e,t);const i={href:Fx(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"a",properties:i,children:e.all(t)};return e.patch(t,s),e.applyData(t,s)}function nHe(e,t){const n={href:Fx(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function rHe(e,t,n){const r=e.all(t),i=n?iHe(n):sye(t),s={},o=[];if(typeof t.checked=="boolean"){const c=r[0];let d;c&&c.type==="element"&&c.tagName==="p"?d=c:(d={type:"element",tagName:"p",properties:{},children:[]},r.unshift(d)),d.children.length>0&&d.children.unshift({type:"text",value:" "}),d.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const c=r[a];(i||a!==0||c.type!=="element"||c.tagName!=="p")&&o.push({type:"text",value:`
`}),c.type==="element"&&c.tagName==="p"&&!i?o.push(...c.children):o.push(c)}const l=r[r.length-1];l&&(i||l.type!=="element"||l.tagName!=="p")&&o.push({type:"text",value:`
`});const u={type:"element",tagName:"li",properties:s,children:o};return e.patch(t,u),e.applyData(t,u)}function iHe(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=sye(n[r])}return t}function sye(e){const t=e.spread;return t??e.children.length>1}function sHe(e,t){const n={},r=e.all(t);let i=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++i<r.length;){const o=r[i];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,s),e.applyData(t,s)}function oHe(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function aHe(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function lHe(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function uHe(e,t){const n=e.all(t),r=n.shift(),i=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],o),i.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},a=zf(t.children[1]),l=PO(t.children[t.children.length-1]);a&&l&&(o.position={start:a,end:l}),i.push(o)}const s={type:"element",tagName:"table",properties:{},children:e.wrap(i,!0)};return e.patch(t,s),e.applyData(t,s)}function cHe(e,t,n){const r=n?n.children:void 0,s=(r?r.indexOf(t):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,a=o?o.length:t.children.length;let l=-1;const u=[];for(;++l<a;){const d=t.children[l],f={},h=o?o[l]:void 0;h&&(f.align=h);let p={type:"element",tagName:s,properties:f,children:[]};d&&(p.children=e.all(d),e.patch(d,p),p=e.applyData(d,p)),u.push(p)}const c={type:"element",tagName:"tr",properties:{},children:e.wrap(u,!0)};return e.patch(t,c),e.applyData(t,c)}function dHe(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const dne=9,fne=32;function fHe(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),i=0;const s=[];for(;r;)s.push(hne(t.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(t);return s.push(hne(t.slice(i),i>0,!1)),s.join("")}function hne(e,t,n){let r=0,i=e.length;if(t){let s=e.codePointAt(r);for(;s===dne||s===fne;)r++,s=e.codePointAt(r)}if(n){let s=e.codePointAt(i-1);for(;s===dne||s===fne;)i--,s=e.codePointAt(i-1)}return i>r?e.slice(r,i):""}function hHe(e,t){const n={type:"text",value:fHe(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function pHe(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const mHe={blockquote:qqe,break:Hqe,code:Wqe,delete:Vqe,emphasis:Gqe,footnoteReference:Kqe,heading:Xqe,html:Qqe,imageReference:Jqe,image:Zqe,inlineCode:eHe,linkReference:tHe,link:nHe,listItem:rHe,list:sHe,paragraph:oHe,root:aHe,strong:lHe,table:uHe,tableCell:dHe,tableRow:cHe,text:hHe,thematicBreak:pHe,toml:xk,yaml:xk,definition:xk,footnoteDefinition:xk};function xk(){}const oye=-1,OO=0,_D=1,TD=2,xH=3,EH=4,_H=5,TH=6,aye=7,lye=8,pne=typeof self=="object"?self:globalThis,gHe=(e,t)=>{const n=(i,s)=>(e.set(s,i),i),r=i=>{if(e.has(i))return e.get(i);const[s,o]=t[i];switch(s){case OO:case oye:return n(o,i);case _D:{const a=n([],i);for(const l of o)a.push(r(l));return a}case TD:{const a=n({},i);for(const[l,u]of o)a[r(l)]=r(u);return a}case xH:return n(new Date(o),i);case EH:{const{source:a,flags:l}=o;return n(new RegExp(a,l),i)}case _H:{const a=n(new Map,i);for(const[l,u]of o)a.set(r(l),r(u));return a}case TH:{const a=n(new Set,i);for(const l of o)a.add(r(l));return a}case aye:{const{name:a,message:l}=o;return n(new pne[a](l),i)}case lye:return n(BigInt(o),i);case"BigInt":return n(Object(BigInt(o)),i)}return n(new pne[s](o),i)};return r},mne=e=>gHe(new Map,e)(0),W1="",{toString:yHe}={},{keys:vHe}=Object,a_=e=>{const t=typeof e;if(t!=="object"||!e)return[OO,t];const n=yHe.call(e).slice(8,-1);switch(n){case"Array":return[_D,W1];case"Object":return[TD,W1];case"Date":return[xH,W1];case"RegExp":return[EH,W1];case"Map":return[_H,W1];case"Set":return[TH,W1]}return n.includes("Array")?[_D,n]:n.includes("Error")?[aye,n]:[TD,n]},Ek=([e,t])=>e===OO&&(t==="function"||t==="symbol"),bHe=(e,t,n,r)=>{const i=(o,a)=>{const l=r.push(o)-1;return n.set(a,l),l},s=o=>{if(n.has(o))return n.get(o);let[a,l]=a_(o);switch(a){case OO:{let c=o;switch(l){case"bigint":a=lye,c=o.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+l);c=null;break;case"undefined":return i([oye],o)}return i([a,c],o)}case _D:{if(l)return i([l,[...o]],o);const c=[],d=i([a,c],o);for(const f of o)c.push(s(f));return d}case TD:{if(l)switch(l){case"BigInt":return i([l,o.toString()],o);case"Boolean":case"Number":case"String":return i([l,o.valueOf()],o)}if(t&&"toJSON"in o)return s(o.toJSON());const c=[],d=i([a,c],o);for(const f of vHe(o))(e||!Ek(a_(o[f])))&&c.push([s(f),s(o[f])]);return d}case xH:return i([a,o.toISOString()],o);case EH:{const{source:c,flags:d}=o;return i([a,{source:c,flags:d}],o)}case _H:{const c=[],d=i([a,c],o);for(const[f,h]of o)(e||!(Ek(a_(f))||Ek(a_(h))))&&c.push([s(f),s(h)]);return d}case TH:{const c=[],d=i([a,c],o);for(const f of o)(e||!Ek(a_(f)))&&c.push(s(f));return d}}const{message:u}=o;return i([a,{name:l,message:u}],o)};return s},gne=(e,{json:t,lossy:n}={})=>{const r=[];return bHe(!(t||n),!!t,new Map,r)(e),r},Tw=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?mne(gne(e,t)):structuredClone(e):(e,t)=>mne(gne(e,t));function wHe(e,t){const n=[{type:"text",value:""}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function xHe(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function EHe(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||wHe,r=e.options.footnoteBackLabel||xHe,i=e.options.footnoteLabel||"Footnotes",s=e.options.footnoteLabelTagName||"h2",o=e.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let l=-1;for(;++l<e.footnoteOrder.length;){const u=e.footnoteById.get(e.footnoteOrder[l]);if(!u)continue;const c=e.all(u),d=String(u.identifier).toUpperCase(),f=Fx(d.toLowerCase());let h=0;const p=[],m=e.footnoteCounts.get(d);for(;m!==void 0&&++h<=m;){p.length>0&&p.push({type:"text",value:" "});let v=typeof n=="string"?n:n(l,h);typeof v=="string"&&(v={type:"text",value:v}),p.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+f+(h>1?"-"+h:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(l,h),className:["data-footnote-backref"]},children:Array.isArray(v)?v:[v]})}const g=c[c.length-1];if(g&&g.type==="element"&&g.tagName==="p"){const v=g.children[g.children.length-1];v&&v.type==="text"?v.value+=" ":g.children.push({type:"text",value:" "}),g.children.push(...p)}else c.push(...p);const b={type:"element",tagName:"li",properties:{id:t+"fn-"+f},children:e.wrap(c,!0)};e.patch(u,b),a.push(b)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...Tw(o),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(a,!0)},{type:"text",value:`
`}]}}const uye=function(e){if(e==null)return SHe;if(typeof e=="function")return $O(e);if(typeof e=="object")return Array.isArray(e)?_He(e):THe(e);if(typeof e=="string")return CHe(e);throw new Error("Expected function, string, or object as test")};function _He(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=uye(e[n]);return $O(r);function r(...i){let s=-1;for(;++s<t.length;)if(t[s].apply(this,i))return!0;return!1}}function THe(e){const t=e;return $O(n);function n(r){const i=r;let s;for(s in e)if(i[s]!==t[s])return!1;return!0}}function CHe(e){return $O(t);function t(n){return n&&n.type===e}}function $O(e){return t;function t(n,r,i){return!!(AHe(n)&&e.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function SHe(){return!0}function AHe(e){return e!==null&&typeof e=="object"&&"type"in e}const cye=[],kHe=!0,yne=!1,IHe="skip";function RHe(e,t,n,r){let i;typeof t=="function"&&typeof n!="function"?(r=n,n=t):i=t;const s=uye(i),o=r?-1:1;a(e,void 0,[])();function a(l,u,c){const d=l&&typeof l=="object"?l:{};if(typeof d.type=="string"){const h=typeof d.tagName=="string"?d.tagName:typeof d.name=="string"?d.name:void 0;Object.defineProperty(f,"name",{value:"node ("+(l.type+(h?"<"+h+">":""))+")"})}return f;function f(){let h=cye,p,m,g;if((!t||s(l,u,c[c.length-1]||void 0))&&(h=DHe(n(l,c)),h[0]===yne))return h;if("children"in l&&l.children){const b=l;if(b.children&&h[0]!==IHe)for(m=(r?b.children.length:-1)+o,g=c.concat(b);m>-1&&m<b.children.length;){const v=b.children[m];if(p=a(v,m,g)(),p[0]===yne)return p;m=typeof p[1]=="number"?p[1]:m+o}}return h}}}function DHe(e){return Array.isArray(e)?e:typeof e=="number"?[kHe,e]:e==null?cye:[e]}function CH(e,t,n,r){let i,s,o;typeof t=="function"&&typeof n!="function"?(s=void 0,o=t,i=n):(s=t,o=n,i=r),RHe(e,s,a,i);function a(l,u){const c=u[u.length-1],d=c?c.children.indexOf(l):void 0;return o(l,d,c)}}const J9={}.hasOwnProperty,PHe={};function NHe(e,t){const n=t||PHe,r=new Map,i=new Map,s=new Map,o={...mHe,...n.handlers},a={all:u,applyData:$He,definitionById:r,footnoteById:i,footnoteCounts:s,footnoteOrder:[],handlers:o,one:l,options:n,patch:OHe,wrap:LHe};return CH(e,function(c){if(c.type==="definition"||c.type==="footnoteDefinition"){const d=c.type==="definition"?r:i,f=String(c.identifier).toUpperCase();d.has(f)||d.set(f,c)}}),a;function l(c,d){const f=c.type,h=a.handlers[f];if(J9.call(a.handlers,f)&&h)return h(a,c,d);if(a.options.passThrough&&a.options.passThrough.includes(f)){if("children"in c){const{children:m,...g}=c,b=Tw(g);return b.children=a.all(c),b}return Tw(c)}return(a.options.unknownHandler||MHe)(a,c,d)}function u(c){const d=[];if("children"in c){const f=c.children;let h=-1;for(;++h<f.length;){const p=a.one(f[h],c);if(p){if(h&&f[h-1].type==="break"&&(!Array.isArray(p)&&p.type==="text"&&(p.value=vne(p.value)),!Array.isArray(p)&&p.type==="element")){const m=p.children[0];m&&m.type==="text"&&(m.value=vne(m.value))}Array.isArray(p)?d.push(...p):d.push(p)}}}return d}}function OHe(e,t){e.position&&(t.position=Q7e(e))}function $He(e,t){let n=t;if(e&&e.data){const r=e.data.hName,i=e.data.hChildren,s=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const o="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:o}}n.type==="element"&&s&&Object.assign(n.properties,Tw(s)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function MHe(e,t){const n=t.data||{},r="value"in t&&!(J9.call(n,"hProperties")||J9.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function LHe(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function vne(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function bne(e,t){const n=NHe(e,t),r=n.one(e,void 0),i=EHe(n),s=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&s.children.push({type:"text",value:`
`},i),s}function FHe(e,t){return e&&"run"in e?async function(n,r){const i=bne(n,{file:r,...t});await e.run(i,r)}:function(n,r){return bne(n,{file:r,...t||e})}}function wne(e){if(e)throw e}var oM,xne;function jHe(){if(xne)return oM;xne=1;var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=function(u){return typeof Array.isArray=="function"?Array.isArray(u):t.call(u)==="[object Array]"},s=function(u){if(!u||t.call(u)!=="[object Object]")return!1;var c=e.call(u,"constructor"),d=u.constructor&&u.constructor.prototype&&e.call(u.constructor.prototype,"isPrototypeOf");if(u.constructor&&!c&&!d)return!1;var f;for(f in u);return typeof f>"u"||e.call(u,f)},o=function(u,c){n&&c.name==="__proto__"?n(u,c.name,{enumerable:!0,configurable:!0,value:c.newValue,writable:!0}):u[c.name]=c.newValue},a=function(u,c){if(c==="__proto__")if(e.call(u,c)){if(r)return r(u,c).value}else return;return u[c]};return oM=function l(){var u,c,d,f,h,p,m=arguments[0],g=1,b=arguments.length,v=!1;for(typeof m=="boolean"&&(v=m,m=arguments[1]||{},g=2),(m==null||typeof m!="object"&&typeof m!="function")&&(m={});g<b;++g)if(u=arguments[g],u!=null)for(c in u)d=a(m,c),f=a(u,c),m!==f&&(v&&f&&(s(f)||(h=i(f)))?(h?(h=!1,p=d&&i(d)?d:[]):p=d&&s(d)?d:{},o(m,{name:c,newValue:l(v,p,f)})):typeof f<"u"&&o(m,{name:c,newValue:f}));return m},oM}var BHe=jHe();const aM=vl(BHe);function Z9(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function zHe(){const e=[],t={run:n,use:r};return t;function n(...i){let s=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);a(null,...i);function a(l,...u){const c=e[++s];let d=-1;if(l){o(l);return}for(;++d<i.length;)(u[d]===null||u[d]===void 0)&&(u[d]=i[d]);i=u,c?UHe(c,a)(...u):o(null,...u)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),t}}function UHe(e,t){let n;return r;function r(...o){const a=e.length>o.length;let l;a&&o.push(i);try{l=e.apply(this,o)}catch(u){const c=u;if(a&&n)throw c;return i(c)}a||(l&&l.then&&typeof l.then=="function"?l.then(s,i):l instanceof Error?i(l):s(l))}function i(o,...a){n||(n=!0,t(o,...a))}function s(o){i(null,o)}}const qd={basename:qHe,dirname:HHe,extname:WHe,join:VHe,sep:"/"};function qHe(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');WC(e);let n=0,r=-1,i=e.length,s;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let o=-1,a=t.length-1;for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),a>-1&&(e.codePointAt(i)===t.codePointAt(a--)?a<0&&(r=i):(a=-1,r=o));return n===r?r=o:r<0&&(r=e.length),e.slice(n,r)}function HHe(e){if(WC(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function WHe(e){WC(e);let t=e.length,n=-1,r=0,i=-1,s=0,o;for(;t--;){const a=e.codePointAt(t);if(a===47){if(o){r=t+1;break}continue}n<0&&(o=!0,n=t+1),a===46?i<0?i=t:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":e.slice(i,n)}function VHe(...e){let t=-1,n;for(;++t<e.length;)WC(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":GHe(n)}function GHe(e){WC(e);const t=e.codePointAt(0)===47;let n=YHe(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function YHe(e,t){let n="",r=0,i=-1,s=0,o=-1,a,l;for(;++o<=e.length;){if(o<e.length)a=e.codePointAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(l=n.lastIndexOf("/"),l!==n.length-1){l<0?(n="",r=0):(n=n.slice(0,l),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",r=0,i=o,s=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(i+1,o):n=e.slice(i+1,o),r=o-i-1;i=o,s=0}else a===46&&s>-1?s++:s=-1}return n}function WC(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const KHe={cwd:XHe};function XHe(){return"/"}function ej(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function QHe(e){if(typeof e=="string")e=new URL(e);else if(!ej(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return JHe(e)}function JHe(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const lM=["history","path","basename","stem","extname","dirname"];class dye{constructor(t){let n;t?ej(t)?n={path:t}:typeof t=="string"||ZHe(t)?n={value:t}:n=t:n={},this.cwd=KHe.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<lM.length;){const s=lM[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)lM.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?qd.basename(this.path):void 0}set basename(t){cM(t,"basename"),uM(t,"basename"),this.path=qd.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?qd.dirname(this.path):void 0}set dirname(t){Ene(this.basename,"dirname"),this.path=qd.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?qd.extname(this.path):void 0}set extname(t){if(uM(t,"extname"),Ene(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=qd.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){ej(t)&&(t=QHe(t)),cM(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?qd.basename(this.path,this.extname):void 0}set stem(t){cM(t,"stem"),uM(t,"stem"),this.path=qd.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const i=this.message(t,n,r);throw i.fatal=!0,i}info(t,n,r){const i=this.message(t,n,r);return i.fatal=void 0,i}message(t,n,r){const i=new Zo(t,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function uM(e,t){if(e&&e.includes(qd.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+qd.sep+"`")}function cM(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function Ene(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function ZHe(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const eWe=function(e){const r=this.constructor.prototype,i=r[e],s=function(){return i.apply(s,arguments)};Object.setPrototypeOf(s,r);const o=Object.getOwnPropertyNames(i);for(const a of o){const l=Object.getOwnPropertyDescriptor(i,a);l&&Object.defineProperty(s,a,l)}return s},tWe={}.hasOwnProperty;class SH extends eWe{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=zHe()}copy(){const t=new SH;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(aM(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(hM("data",this.frozen),this.namespace[t]=n,this):tWe.call(this.namespace,t)&&this.namespace[t]||void 0:t?(hM("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(t,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=_k(t),r=this.parser||this.Parser;return dM("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),dM("process",this.parser||this.Parser),fM("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(s,o){const a=_k(t),l=r.parse(a);r.run(l,a,function(c,d,f){if(c||!d||!f)return u(c);const h=d,p=r.stringify(h,f);iWe(p)?f.value=p:f.result=p,u(c,f)});function u(c,d){c||!d?o(c):s?s(d):n(void 0,d)}}}processSync(t){let n=!1,r;return this.freeze(),dM("processSync",this.parser||this.Parser),fM("processSync",this.compiler||this.Compiler),this.process(t,i),Tne("processSync","process",n),r;function i(s,o){n=!0,wne(s),r=o}}run(t,n,r){_ne(t),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?s(void 0,r):new Promise(s);function s(o,a){const l=_k(n);i.run(t,l,u);function u(c,d,f){const h=d||t;c?a(c):o?o(h):r(void 0,h,f)}}}runSync(t,n){let r=!1,i;return this.run(t,n,s),Tne("runSync","run",r),i;function s(o,a){wne(o),i=a,r=!0}}stringify(t,n){this.freeze();const r=_k(n),i=this.compiler||this.Compiler;return fM("stringify",i),_ne(t),i(t,r)}use(t,...n){const r=this.attachers,i=this.namespace;if(hM("use",this.frozen),t!=null)if(typeof t=="function")l(t,n);else if(typeof t=="object")Array.isArray(t)?a(t):o(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function s(u){if(typeof u=="function")l(u,[]);else if(typeof u=="object")if(Array.isArray(u)){const[c,...d]=u;l(c,d)}else o(u);else throw new TypeError("Expected usable value, not `"+u+"`")}function o(u){if(!("plugins"in u)&&!("settings"in u))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(u.plugins),u.settings&&(i.settings=aM(!0,i.settings,u.settings))}function a(u){let c=-1;if(u!=null)if(Array.isArray(u))for(;++c<u.length;){const d=u[c];s(d)}else throw new TypeError("Expected a list of plugins, not `"+u+"`")}function l(u,c){let d=-1,f=-1;for(;++d<r.length;)if(r[d][0]===u){f=d;break}if(f===-1)r.push([u,...c]);else if(c.length>0){let[h,...p]=c;const m=r[f][1];Z9(m)&&Z9(h)&&(h=aM(!0,m,h)),r[f]=[u,h,...p]}}}}const nWe=new SH().freeze();function dM(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function fM(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function hM(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function _ne(e){if(!Z9(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function Tne(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function _k(e){return rWe(e)?e:new dye(e)}function rWe(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function iWe(e){return typeof e=="string"||sWe(e)}function sWe(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const oWe="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",Cne=[],Sne={allowDangerousHtml:!0},aWe=/^(https?|ircs?|mailto|xmpp)$/i,lWe=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function uWe(e){const t=e.allowedElements,n=e.allowElement,r=e.children||"",i=e.className,s=e.components,o=e.disallowedElements,a=e.rehypePlugins||Cne,l=e.remarkPlugins||Cne,u=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...Sne}:Sne,c=e.skipHtml,d=e.unwrapDisallowed,f=e.urlTransform||cWe,h=nWe().use(Uqe).use(l).use(FHe,u).use(a),p=new dye;typeof r=="string"&&(p.value=r);for(const v of lWe)Object.hasOwn(e,v.from)&&(""+v.from+(v.to?"use `"+v.to+"` instead":"remove it")+oWe+v.id,void 0);const m=h.parse(p);let g=h.runSync(m,p);return i&&(g={type:"element",tagName:"div",properties:{className:i},children:g.type==="root"?g.children:[g]}),CH(g,b),rze(g,{Fragment:T.Fragment,components:s,ignoreInvalidStyle:!0,jsx:T.jsx,jsxs:T.jsxs,passKeys:!0,passNode:!0});function b(v,x,E){if(v.type==="raw"&&E&&typeof x=="number")return c?E.children.splice(x,1):E.children[x]={type:"text",value:v.value},x;if(v.type==="element"){let _;for(_ in nM)if(Object.hasOwn(nM,_)&&Object.hasOwn(v.properties,_)){const C=v.properties[_],S=nM[_];(S===null||S.includes(v.tagName))&&(v.properties[_]=f(String(C||""),_,v))}}if(v.type==="element"){let _=t?!t.includes(v.tagName):o?o.includes(v.tagName):!1;if(!_&&n&&typeof x=="number"&&(_=!n(v,x,E)),_&&E&&typeof x=="number")return d&&v.children?E.children.splice(x,1,...v.children):E.children.splice(x,1),x}}}function cWe(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),i=e.indexOf("/");return t===-1||i!==-1&&t>i||n!==-1&&t>n||r!==-1&&t>r||aWe.test(e.slice(0,t))?e:""}const Ane=/[#.]/g;function dWe(e,t){const n=e||"",r={};let i=0,s,o;for(;i<n.length;){Ane.lastIndex=i;const a=Ane.exec(n),l=n.slice(i,a?a.index:n.length);l&&(s?s==="#"?r.id=l:Array.isArray(r.className)?r.className.push(l):r.className=[l]:o=l,i+=l.length),a&&(s=a[0],i++)}return{type:"element",tagName:o||t||"div",properties:r,children:[]}}const fWe=new Set(["button","menu","reset","submit"]),tj={}.hasOwnProperty;function fye(e,t,n){const r=n&&gWe(n);function i(s,o,...a){let l=-1,u;if(s==null){u={type:"root",children:[]};const c=o;a.unshift(c)}else if(u=dWe(s,t),u.tagName=u.tagName.toLowerCase(),r&&tj.call(r,u.tagName)&&(u.tagName=r[u.tagName]),hWe(o,u.tagName)){let c;for(c in o)tj.call(o,c)&&pWe(e,u.properties,c,o[c])}else a.unshift(o);for(;++l<a.length;)nj(u.children,a[l]);return u.type==="element"&&u.tagName==="template"&&(u.content={type:"root",children:u.children},u.children=[]),u}return i}function hWe(e,t){return e==null||typeof e!="object"||Array.isArray(e)?!1:t==="input"||!e.type||typeof e.type!="string"?!0:"children"in e&&Array.isArray(e.children)?!1:t==="button"?fWe.has(e.type.toLowerCase()):!("value"in e)}function pWe(e,t,n,r){const i=DO(e,n);let s=-1,o;if(r!=null){if(typeof r=="number"){if(Number.isNaN(r))return;o=r}else typeof r=="boolean"?o=r:typeof r=="string"?i.spaceSeparated?o=zte(r):i.commaSeparated?o=Mte(r):i.commaOrSpaceSeparated?o=zte(Mte(r).join(" ")):o=kne(i,i.property,r):Array.isArray(r)?o=r.concat():o=i.property==="style"?mWe(r):String(r);if(Array.isArray(o)){const a=[];for(;++s<o.length;){const l=kne(i,i.property,o[s]);a[s]=l}o=a}if(i.property==="className"&&Array.isArray(t.className)){const a=o;o=t.className.concat(a)}t[i.property]=o}}function nj(e,t){let n=-1;if(t!=null)if(typeof t=="string"||typeof t=="number")e.push({type:"text",value:String(t)});else if(Array.isArray(t))for(;++n<t.length;)nj(e,t[n]);else if(typeof t=="object"&&"type"in t)t.type==="root"?nj(e,t.children):e.push(t);else throw new Error("Expected node, nodes, or string, got `"+t+"`")}function kne(e,t,n){if(typeof n=="string"){if(e.number&&n&&!Number.isNaN(Number(n)))return Number(n);if((e.boolean||e.overloadedBoolean)&&(n===""||CT(n)===CT(t)))return!0}return n}function mWe(e){const t=[];let n;for(n in e)tj.call(e,n)&&t.push([n,e[n]].join(": "));return t.join("; ")}function gWe(e){const t={};let n=-1;for(;++n<e.length;)t[e[n].toLowerCase()]=e[n];return t}const yWe=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],vWe=fye(qC,"div"),bWe=fye(B0,"g",yWe),pM=/\r?\n|\r/g;function wWe(e){const t=String(e),n=[];for(pM.lastIndex=0;pM.test(t);)n.push(pM.lastIndex);return n.push(t.length+1),{toPoint:r,toOffset:i};function r(s){let o=-1;if(typeof s=="number"&&s>-1&&s<n[n.length-1]){for(;++o<n.length;)if(n[o]>s)return{line:o+1,column:s-(o>0?n[o-1]:0)+1,offset:s}}}function i(s){const o=s&&s.line,a=s&&s.column;if(typeof o=="number"&&typeof a=="number"&&!Number.isNaN(o)&&!Number.isNaN(a)&&o-1 in n){const l=(n[o-2]||0)+a-1||0;if(l>-1&&l<n[n.length-1])return l}}}const hy={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},hye={}.hasOwnProperty,xWe=Object.prototype;function EWe(e,t){const n=t||{};return AH({file:n.file||void 0,location:!1,schema:n.space==="svg"?B0:qC,verbose:n.verbose||!1},e)}function AH(e,t){let n;switch(t.nodeName){case"#comment":{const r=t;return n={type:"comment",value:r.data},$R(e,r,n),n}case"#document":case"#document-fragment":{const r=t,i="mode"in r?r.mode==="quirks"||r.mode==="limited-quirks":!1;if(n={type:"root",children:pye(e,t.childNodes),data:{quirksMode:i}},e.file&&e.location){const s=String(e.file),o=wWe(s),a=o.toPoint(0),l=o.toPoint(s.length);n.position={start:a,end:l}}return n}case"#documentType":{const r=t;return n={type:"doctype"},$R(e,r,n),n}case"#text":{const r=t;return n={type:"text",value:r.value},$R(e,r,n),n}default:return n=_We(e,t),n}}function pye(e,t){let n=-1;const r=[];for(;++n<t.length;){const i=AH(e,t[n]);r.push(i)}return r}function _We(e,t){const n=e.schema;e.schema=t.namespaceURI===hy.svg?B0:qC;let r=-1;const i={};for(;++r<t.attrs.length;){const a=t.attrs[r],l=(a.prefix?a.prefix+":":"")+a.name;hye.call(xWe,l)||(i[l]=a.value)}const o=(e.schema.space==="svg"?bWe:vWe)(t.tagName,i,pye(e,t.childNodes));if($R(e,t,o),o.tagName==="template"){const a=t,l=a.sourceCodeLocation,u=l&&l.startTag&&Ib(l.startTag),c=l&&l.endTag&&Ib(l.endTag),d=AH(e,a.content);u&&c&&e.file&&(d.position={start:u.end,end:c.start}),o.content=d}return e.schema=n,o}function $R(e,t,n){if("sourceCodeLocation"in t&&t.sourceCodeLocation&&e.file){const r=TWe(e,n,t.sourceCodeLocation);r&&(e.location=!0,n.position=r)}}function TWe(e,t,n){const r=Ib(n);if(t.type==="element"){const i=t.children[t.children.length-1];if(r&&!n.endTag&&i&&i.position&&i.position.end&&(r.end=Object.assign({},i.position.end)),e.verbose){const s={};let o;if(n.attrs)for(o in n.attrs)hye.call(n.attrs,o)&&(s[DO(e.schema,o).property]=Ib(n.attrs[o]));n.startTag;const a=Ib(n.startTag),l=n.endTag?Ib(n.endTag):void 0,u={opening:a};l&&(u.closing=l),u.properties=s,t.data={position:u}}}return r}function Ib(e){const t=Ine({line:e.startLine,column:e.startCol,offset:e.startOffset}),n=Ine({line:e.endLine,column:e.endCol,offset:e.endOffset});return t||n?{start:t,end:n}:void 0}function Ine(e){return e.line&&e.column?e:void 0}const Rne={}.hasOwnProperty;function mye(e,t){const n=t||{};function r(i,...s){let o=r.invalid;const a=r.handlers;if(i&&Rne.call(i,e)){const l=String(i[e]);o=Rne.call(a,l)?a[l]:r.unknown}if(o)return o.call(this,i,...s)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}const CWe={},SWe={}.hasOwnProperty,gye=mye("type",{handlers:{root:kWe,element:NWe,text:DWe,comment:PWe,doctype:RWe}});function AWe(e,t){const r=(t||CWe).space;return gye(e,r==="svg"?B0:qC)}function kWe(e,t){const n={nodeName:"#document",mode:(e.data||{}).quirksMode?"quirks":"no-quirks",childNodes:[]};return n.childNodes=kH(e.children,n,t),jx(e,n),n}function IWe(e,t){const n={nodeName:"#document-fragment",childNodes:[]};return n.childNodes=kH(e.children,n,t),jx(e,n),n}function RWe(e){const t={nodeName:"#documentType",name:"html",publicId:"",systemId:"",parentNode:null};return jx(e,t),t}function DWe(e){const t={nodeName:"#text",value:e.value,parentNode:null};return jx(e,t),t}function PWe(e){const t={nodeName:"#comment",data:e.value,parentNode:null};return jx(e,t),t}function NWe(e,t){const n=t;let r=n;e.type==="element"&&e.tagName.toLowerCase()==="svg"&&n.space==="html"&&(r=B0);const i=[];let s;if(e.properties){for(s in e.properties)if(s!=="children"&&SWe.call(e.properties,s)){const l=OWe(r,s,e.properties[s]);l&&i.push(l)}}const o=r.space,a={nodeName:e.tagName,tagName:e.tagName,attrs:i,namespaceURI:hy[o],childNodes:[],parentNode:null};return a.childNodes=kH(e.children,a,r),jx(e,a),e.tagName==="template"&&e.content&&(a.content=IWe(e.content,r)),a}function OWe(e,t,n){const r=DO(e,t);if(n===!1||n===null||n===void 0||typeof n=="number"&&Number.isNaN(n)||!n&&r.boolean)return;Array.isArray(n)&&(n=r.commaSeparated?Rge(n):jge(n));const i={name:r.attribute,value:n===!0?"":String(n)};if(r.space&&r.space!=="html"&&r.space!=="svg"){const s=i.name.indexOf(":");s<0?i.prefix="":(i.name=i.name.slice(s+1),i.prefix=r.attribute.slice(0,s)),i.namespace=hy[r.space]}return i}function kH(e,t,n){let r=-1;const i=[];if(e)for(;++r<e.length;){const s=gye(e[r],n);s.parentNode=t,i.push(s)}return i}function jx(e,t){const n=e.position;n&&n.start&&n.end&&(n.start.offset,n.end.offset,t.sourceCodeLocation={startLine:n.start.line,startCol:n.start.column,startOffset:n.start.offset,endLine:n.end.line,endCol:n.end.column,endOffset:n.end.offset})}const $We=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],MWe=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),ei="";var se;(function(e){e[e.EOF=-1]="EOF",e[e.NULL=0]="NULL",e[e.TABULATION=9]="TABULATION",e[e.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",e[e.LINE_FEED=10]="LINE_FEED",e[e.FORM_FEED=12]="FORM_FEED",e[e.SPACE=32]="SPACE",e[e.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",e[e.QUOTATION_MARK=34]="QUOTATION_MARK",e[e.NUMBER_SIGN=35]="NUMBER_SIGN",e[e.AMPERSAND=38]="AMPERSAND",e[e.APOSTROPHE=39]="APOSTROPHE",e[e.HYPHEN_MINUS=45]="HYPHEN_MINUS",e[e.SOLIDUS=47]="SOLIDUS",e[e.DIGIT_0=48]="DIGIT_0",e[e.DIGIT_9=57]="DIGIT_9",e[e.SEMICOLON=59]="SEMICOLON",e[e.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",e[e.EQUALS_SIGN=61]="EQUALS_SIGN",e[e.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",e[e.QUESTION_MARK=63]="QUESTION_MARK",e[e.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",e[e.LATIN_CAPITAL_F=70]="LATIN_CAPITAL_F",e[e.LATIN_CAPITAL_X=88]="LATIN_CAPITAL_X",e[e.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",e[e.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",e[e.GRAVE_ACCENT=96]="GRAVE_ACCENT",e[e.LATIN_SMALL_A=97]="LATIN_SMALL_A",e[e.LATIN_SMALL_F=102]="LATIN_SMALL_F",e[e.LATIN_SMALL_X=120]="LATIN_SMALL_X",e[e.LATIN_SMALL_Z=122]="LATIN_SMALL_Z",e[e.REPLACEMENT_CHARACTER=65533]="REPLACEMENT_CHARACTER"})(se=se||(se={}));const Ga={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function yye(e){return e>=55296&&e<=57343}function LWe(e){return e>=56320&&e<=57343}function FWe(e,t){return(e-55296)*1024+9216+t}function vye(e){return e!==32&&e!==10&&e!==13&&e!==9&&e!==12&&e>=1&&e<=31||e>=127&&e<=159}function bye(e){return e>=64976&&e<=65007||MWe.has(e)}var ze;(function(e){e.controlCharacterInInputStream="control-character-in-input-stream",e.noncharacterInInputStream="noncharacter-in-input-stream",e.surrogateInInputStream="surrogate-in-input-stream",e.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",e.endTagWithAttributes="end-tag-with-attributes",e.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",e.unexpectedSolidusInTag="unexpected-solidus-in-tag",e.unexpectedNullCharacter="unexpected-null-character",e.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",e.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",e.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",e.missingEndTagName="missing-end-tag-name",e.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",e.unknownNamedCharacterReference="unknown-named-character-reference",e.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",e.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",e.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",e.eofBeforeTagName="eof-before-tag-name",e.eofInTag="eof-in-tag",e.missingAttributeValue="missing-attribute-value",e.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",e.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",e.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",e.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",e.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",e.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",e.missingDoctypePublicIdentifier="missing-doctype-public-identifier",e.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",e.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",e.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",e.cdataInHtmlContent="cdata-in-html-content",e.incorrectlyOpenedComment="incorrectly-opened-comment",e.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",e.eofInDoctype="eof-in-doctype",e.nestedComment="nested-comment",e.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",e.eofInComment="eof-in-comment",e.incorrectlyClosedComment="incorrectly-closed-comment",e.eofInCdata="eof-in-cdata",e.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",e.nullCharacterReference="null-character-reference",e.surrogateCharacterReference="surrogate-character-reference",e.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",e.controlCharacterReference="control-character-reference",e.noncharacterCharacterReference="noncharacter-character-reference",e.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",e.missingDoctypeName="missing-doctype-name",e.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",e.duplicateAttribute="duplicate-attribute",e.nonConformingDoctype="non-conforming-doctype",e.missingDoctype="missing-doctype",e.misplacedDoctype="misplaced-doctype",e.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",e.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",e.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",e.openElementsLeftAfterEof="open-elements-left-after-eof",e.abandonedHeadElementChild="abandoned-head-element-child",e.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",e.nestedNoscriptInHead="nested-noscript-in-head",e.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"})(ze=ze||(ze={}));const jWe=65536;class BWe{constructor(t){this.handler=t,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=jWe,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(t){const{line:n,col:r,offset:i}=this;return{code:t,startLine:n,endLine:n,startCol:r,endCol:r,startOffset:i,endOffset:i}}_err(t){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(t)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(t){if(this.pos!==this.html.length-1){const n=this.html.charCodeAt(this.pos+1);if(LWe(n))return this.pos++,this._addGap(),FWe(t,n)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,se.EOF;return this._err(ze.surrogateInInputStream),t}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(t,n){this.html.length>0?this.html+=t:this.html=t,this.endOfChunkHit=!1,this.lastChunkWritten=n}insertHtmlAtCurrentPos(t){this.html=this.html.substring(0,this.pos+1)+t+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(t,n){if(this.pos+t.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(n)return this.html.startsWith(t,this.pos);for(let r=0;r<t.length;r++)if((this.html.charCodeAt(this.pos+r)|32)!==t.charCodeAt(r))return!1;return!0}peek(t){const n=this.pos+t;if(n>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,se.EOF;const r=this.html.charCodeAt(n);return r===se.CARRIAGE_RETURN?se.LINE_FEED:r}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,se.EOF;let t=this.html.charCodeAt(this.pos);return t===se.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,se.LINE_FEED):t===se.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,yye(t)&&(t=this._processSurrogate(t)),this.handler.onParseError===null||t>31&&t<127||t===se.LINE_FEED||t===se.CARRIAGE_RETURN||t>159&&t<64976||this._checkForProblematicCharacters(t),t)}_checkForProblematicCharacters(t){vye(t)?this._err(ze.controlCharacterInInputStream):bye(t)&&this._err(ze.noncharacterInInputStream)}retreat(t){for(this.pos-=t;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var Cn;(function(e){e[e.CHARACTER=0]="CHARACTER",e[e.NULL_CHARACTER=1]="NULL_CHARACTER",e[e.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",e[e.START_TAG=3]="START_TAG",e[e.END_TAG=4]="END_TAG",e[e.COMMENT=5]="COMMENT",e[e.DOCTYPE=6]="DOCTYPE",e[e.EOF=7]="EOF",e[e.HIBERNATION=8]="HIBERNATION"})(Cn=Cn||(Cn={}));function wye(e,t){for(let n=e.attrs.length-1;n>=0;n--)if(e.attrs[n].name===t)return e.attrs[n].value;return null}const Em=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(e=>e.charCodeAt(0))),zWe=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(e=>e.charCodeAt(0)));var mM;const UWe=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),qWe=(mM=String.fromCodePoint)!==null&&mM!==void 0?mM:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|e&1023),t+=String.fromCharCode(e),t};function HWe(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=UWe.get(e))!==null&&t!==void 0?t:e}var $s;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})($s||($s={}));const WWe=32;var sf;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(sf||(sf={}));function rj(e){return e>=$s.ZERO&&e<=$s.NINE}function VWe(e){return e>=$s.UPPER_A&&e<=$s.UPPER_F||e>=$s.LOWER_A&&e<=$s.LOWER_F}function GWe(e){return e>=$s.UPPER_A&&e<=$s.UPPER_Z||e>=$s.LOWER_A&&e<=$s.LOWER_Z||rj(e)}function YWe(e){return e===$s.EQUALS||GWe(e)}var Is;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(Is||(Is={}));var ry;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(ry||(ry={}));class KWe{constructor(t,n,r){this.decodeTree=t,this.emitCodePoint=n,this.errors=r,this.state=Is.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=ry.Strict}startEntity(t){this.decodeMode=t,this.state=Is.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,n){switch(this.state){case Is.EntityStart:return t.charCodeAt(n)===$s.NUM?(this.state=Is.NumericStart,this.consumed+=1,this.stateNumericStart(t,n+1)):(this.state=Is.NamedEntity,this.stateNamedEntity(t,n));case Is.NumericStart:return this.stateNumericStart(t,n);case Is.NumericDecimal:return this.stateNumericDecimal(t,n);case Is.NumericHex:return this.stateNumericHex(t,n);case Is.NamedEntity:return this.stateNamedEntity(t,n)}}stateNumericStart(t,n){return n>=t.length?-1:(t.charCodeAt(n)|WWe)===$s.LOWER_X?(this.state=Is.NumericHex,this.consumed+=1,this.stateNumericHex(t,n+1)):(this.state=Is.NumericDecimal,this.stateNumericDecimal(t,n))}addToNumericResult(t,n,r,i){if(n!==r){const s=r-n;this.result=this.result*Math.pow(i,s)+parseInt(t.substr(n,s),i),this.consumed+=s}}stateNumericHex(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(rj(i)||VWe(i))n+=1;else return this.addToNumericResult(t,r,n,16),this.emitNumericEntity(i,3)}return this.addToNumericResult(t,r,n,16),-1}stateNumericDecimal(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(rj(i))n+=1;else return this.addToNumericResult(t,r,n,10),this.emitNumericEntity(i,2)}return this.addToNumericResult(t,r,n,10),-1}emitNumericEntity(t,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===$s.SEMI)this.consumed+=1;else if(this.decodeMode===ry.Strict)return 0;return this.emitCodePoint(HWe(this.result),this.consumed),this.errors&&(t!==$s.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,n){const{decodeTree:r}=this;let i=r[this.treeIndex],s=(i&sf.VALUE_LENGTH)>>14;for(;n<t.length;n++,this.excess++){const o=t.charCodeAt(n);if(this.treeIndex=Eye(r,i,this.treeIndex+Math.max(1,s),o),this.treeIndex<0)return this.result===0||this.decodeMode===ry.Attribute&&(s===0||YWe(o))?0:this.emitNotTerminatedNamedEntity();if(i=r[this.treeIndex],s=(i&sf.VALUE_LENGTH)>>14,s!==0){if(o===$s.SEMI)return this.emitNamedEntityData(this.treeIndex,s,this.consumed+this.excess);this.decodeMode!==ry.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:n,decodeTree:r}=this,i=(r[n]&sf.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,i,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,n,r){const{decodeTree:i}=this;return this.emitCodePoint(n===1?i[t]&~sf.VALUE_LENGTH:i[t+1],r),n===3&&this.emitCodePoint(i[t+2],r),r}end(){var t;switch(this.state){case Is.NamedEntity:return this.result!==0&&(this.decodeMode!==ry.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case Is.NumericDecimal:return this.emitNumericEntity(0,2);case Is.NumericHex:return this.emitNumericEntity(0,3);case Is.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case Is.EntityStart:return 0}}}function xye(e){let t="";const n=new KWe(e,r=>t+=qWe(r));return function(i,s){let o=0,a=0;for(;(a=i.indexOf("&",a))>=0;){t+=i.slice(o,a),n.startEntity(s);const u=n.write(i,a+1);if(u<0){o=a+n.end();break}o=a+u,a=u===0?o+1:o}const l=t+i.slice(o);return t="",l}}function Eye(e,t,n,r){const i=(t&sf.BRANCH_LENGTH)>>7,s=t&sf.JUMP_TABLE;if(i===0)return s!==0&&r===s?n:-1;if(s){const l=r-s;return l<0||l>=i?-1:e[n+l]-1}let o=n,a=o+i-1;for(;o<=a;){const l=o+a>>>1,u=e[l];if(u<r)o=l+1;else if(u>r)a=l-1;else return e[l+i]}return-1}xye(Em);xye(zWe);var Qe;(function(e){e.HTML="http://www.w3.org/1999/xhtml",e.MATHML="http://www.w3.org/1998/Math/MathML",e.SVG="http://www.w3.org/2000/svg",e.XLINK="http://www.w3.org/1999/xlink",e.XML="http://www.w3.org/XML/1998/namespace",e.XMLNS="http://www.w3.org/2000/xmlns/"})(Qe=Qe||(Qe={}));var n0;(function(e){e.TYPE="type",e.ACTION="action",e.ENCODING="encoding",e.PROMPT="prompt",e.NAME="name",e.COLOR="color",e.FACE="face",e.SIZE="size"})(n0=n0||(n0={}));var $l;(function(e){e.NO_QUIRKS="no-quirks",e.QUIRKS="quirks",e.LIMITED_QUIRKS="limited-quirks"})($l=$l||($l={}));var Re;(function(e){e.A="a",e.ADDRESS="address",e.ANNOTATION_XML="annotation-xml",e.APPLET="applet",e.AREA="area",e.ARTICLE="article",e.ASIDE="aside",e.B="b",e.BASE="base",e.BASEFONT="basefont",e.BGSOUND="bgsound",e.BIG="big",e.BLOCKQUOTE="blockquote",e.BODY="body",e.BR="br",e.BUTTON="button",e.CAPTION="caption",e.CENTER="center",e.CODE="code",e.COL="col",e.COLGROUP="colgroup",e.DD="dd",e.DESC="desc",e.DETAILS="details",e.DIALOG="dialog",e.DIR="dir",e.DIV="div",e.DL="dl",e.DT="dt",e.EM="em",e.EMBED="embed",e.FIELDSET="fieldset",e.FIGCAPTION="figcaption",e.FIGURE="figure",e.FONT="font",e.FOOTER="footer",e.FOREIGN_OBJECT="foreignObject",e.FORM="form",e.FRAME="frame",e.FRAMESET="frameset",e.H1="h1",e.H2="h2",e.H3="h3",e.H4="h4",e.H5="h5",e.H6="h6",e.HEAD="head",e.HEADER="header",e.HGROUP="hgroup",e.HR="hr",e.HTML="html",e.I="i",e.IMG="img",e.IMAGE="image",e.INPUT="input",e.IFRAME="iframe",e.KEYGEN="keygen",e.LABEL="label",e.LI="li",e.LINK="link",e.LISTING="listing",e.MAIN="main",e.MALIGNMARK="malignmark",e.MARQUEE="marquee",e.MATH="math",e.MENU="menu",e.META="meta",e.MGLYPH="mglyph",e.MI="mi",e.MO="mo",e.MN="mn",e.MS="ms",e.MTEXT="mtext",e.NAV="nav",e.NOBR="nobr",e.NOFRAMES="noframes",e.NOEMBED="noembed",e.NOSCRIPT="noscript",e.OBJECT="object",e.OL="ol",e.OPTGROUP="optgroup",e.OPTION="option",e.P="p",e.PARAM="param",e.PLAINTEXT="plaintext",e.PRE="pre",e.RB="rb",e.RP="rp",e.RT="rt",e.RTC="rtc",e.RUBY="ruby",e.S="s",e.SCRIPT="script",e.SECTION="section",e.SELECT="select",e.SOURCE="source",e.SMALL="small",e.SPAN="span",e.STRIKE="strike",e.STRONG="strong",e.STYLE="style",e.SUB="sub",e.SUMMARY="summary",e.SUP="sup",e.TABLE="table",e.TBODY="tbody",e.TEMPLATE="template",e.TEXTAREA="textarea",e.TFOOT="tfoot",e.TD="td",e.TH="th",e.THEAD="thead",e.TITLE="title",e.TR="tr",e.TRACK="track",e.TT="tt",e.U="u",e.UL="ul",e.SVG="svg",e.VAR="var",e.WBR="wbr",e.XMP="xmp"})(Re=Re||(Re={}));var M;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.A=1]="A",e[e.ADDRESS=2]="ADDRESS",e[e.ANNOTATION_XML=3]="ANNOTATION_XML",e[e.APPLET=4]="APPLET",e[e.AREA=5]="AREA",e[e.ARTICLE=6]="ARTICLE",e[e.ASIDE=7]="ASIDE",e[e.B=8]="B",e[e.BASE=9]="BASE",e[e.BASEFONT=10]="BASEFONT",e[e.BGSOUND=11]="BGSOUND",e[e.BIG=12]="BIG",e[e.BLOCKQUOTE=13]="BLOCKQUOTE",e[e.BODY=14]="BODY",e[e.BR=15]="BR",e[e.BUTTON=16]="BUTTON",e[e.CAPTION=17]="CAPTION",e[e.CENTER=18]="CENTER",e[e.CODE=19]="CODE",e[e.COL=20]="COL",e[e.COLGROUP=21]="COLGROUP",e[e.DD=22]="DD",e[e.DESC=23]="DESC",e[e.DETAILS=24]="DETAILS",e[e.DIALOG=25]="DIALOG",e[e.DIR=26]="DIR",e[e.DIV=27]="DIV",e[e.DL=28]="DL",e[e.DT=29]="DT",e[e.EM=30]="EM",e[e.EMBED=31]="EMBED",e[e.FIELDSET=32]="FIELDSET",e[e.FIGCAPTION=33]="FIGCAPTION",e[e.FIGURE=34]="FIGURE",e[e.FONT=35]="FONT",e[e.FOOTER=36]="FOOTER",e[e.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",e[e.FORM=38]="FORM",e[e.FRAME=39]="FRAME",e[e.FRAMESET=40]="FRAMESET",e[e.H1=41]="H1",e[e.H2=42]="H2",e[e.H3=43]="H3",e[e.H4=44]="H4",e[e.H5=45]="H5",e[e.H6=46]="H6",e[e.HEAD=47]="HEAD",e[e.HEADER=48]="HEADER",e[e.HGROUP=49]="HGROUP",e[e.HR=50]="HR",e[e.HTML=51]="HTML",e[e.I=52]="I",e[e.IMG=53]="IMG",e[e.IMAGE=54]="IMAGE",e[e.INPUT=55]="INPUT",e[e.IFRAME=56]="IFRAME",e[e.KEYGEN=57]="KEYGEN",e[e.LABEL=58]="LABEL",e[e.LI=59]="LI",e[e.LINK=60]="LINK",e[e.LISTING=61]="LISTING",e[e.MAIN=62]="MAIN",e[e.MALIGNMARK=63]="MALIGNMARK",e[e.MARQUEE=64]="MARQUEE",e[e.MATH=65]="MATH",e[e.MENU=66]="MENU",e[e.META=67]="META",e[e.MGLYPH=68]="MGLYPH",e[e.MI=69]="MI",e[e.MO=70]="MO",e[e.MN=71]="MN",e[e.MS=72]="MS",e[e.MTEXT=73]="MTEXT",e[e.NAV=74]="NAV",e[e.NOBR=75]="NOBR",e[e.NOFRAMES=76]="NOFRAMES",e[e.NOEMBED=77]="NOEMBED",e[e.NOSCRIPT=78]="NOSCRIPT",e[e.OBJECT=79]="OBJECT",e[e.OL=80]="OL",e[e.OPTGROUP=81]="OPTGROUP",e[e.OPTION=82]="OPTION",e[e.P=83]="P",e[e.PARAM=84]="PARAM",e[e.PLAINTEXT=85]="PLAINTEXT",e[e.PRE=86]="PRE",e[e.RB=87]="RB",e[e.RP=88]="RP",e[e.RT=89]="RT",e[e.RTC=90]="RTC",e[e.RUBY=91]="RUBY",e[e.S=92]="S",e[e.SCRIPT=93]="SCRIPT",e[e.SECTION=94]="SECTION",e[e.SELECT=95]="SELECT",e[e.SOURCE=96]="SOURCE",e[e.SMALL=97]="SMALL",e[e.SPAN=98]="SPAN",e[e.STRIKE=99]="STRIKE",e[e.STRONG=100]="STRONG",e[e.STYLE=101]="STYLE",e[e.SUB=102]="SUB",e[e.SUMMARY=103]="SUMMARY",e[e.SUP=104]="SUP",e[e.TABLE=105]="TABLE",e[e.TBODY=106]="TBODY",e[e.TEMPLATE=107]="TEMPLATE",e[e.TEXTAREA=108]="TEXTAREA",e[e.TFOOT=109]="TFOOT",e[e.TD=110]="TD",e[e.TH=111]="TH",e[e.THEAD=112]="THEAD",e[e.TITLE=113]="TITLE",e[e.TR=114]="TR",e[e.TRACK=115]="TRACK",e[e.TT=116]="TT",e[e.U=117]="U",e[e.UL=118]="UL",e[e.SVG=119]="SVG",e[e.VAR=120]="VAR",e[e.WBR=121]="WBR",e[e.XMP=122]="XMP"})(M=M||(M={}));const XWe=new Map([[Re.A,M.A],[Re.ADDRESS,M.ADDRESS],[Re.ANNOTATION_XML,M.ANNOTATION_XML],[Re.APPLET,M.APPLET],[Re.AREA,M.AREA],[Re.ARTICLE,M.ARTICLE],[Re.ASIDE,M.ASIDE],[Re.B,M.B],[Re.BASE,M.BASE],[Re.BASEFONT,M.BASEFONT],[Re.BGSOUND,M.BGSOUND],[Re.BIG,M.BIG],[Re.BLOCKQUOTE,M.BLOCKQUOTE],[Re.BODY,M.BODY],[Re.BR,M.BR],[Re.BUTTON,M.BUTTON],[Re.CAPTION,M.CAPTION],[Re.CENTER,M.CENTER],[Re.CODE,M.CODE],[Re.COL,M.COL],[Re.COLGROUP,M.COLGROUP],[Re.DD,M.DD],[Re.DESC,M.DESC],[Re.DETAILS,M.DETAILS],[Re.DIALOG,M.DIALOG],[Re.DIR,M.DIR],[Re.DIV,M.DIV],[Re.DL,M.DL],[Re.DT,M.DT],[Re.EM,M.EM],[Re.EMBED,M.EMBED],[Re.FIELDSET,M.FIELDSET],[Re.FIGCAPTION,M.FIGCAPTION],[Re.FIGURE,M.FIGURE],[Re.FONT,M.FONT],[Re.FOOTER,M.FOOTER],[Re.FOREIGN_OBJECT,M.FOREIGN_OBJECT],[Re.FORM,M.FORM],[Re.FRAME,M.FRAME],[Re.FRAMESET,M.FRAMESET],[Re.H1,M.H1],[Re.H2,M.H2],[Re.H3,M.H3],[Re.H4,M.H4],[Re.H5,M.H5],[Re.H6,M.H6],[Re.HEAD,M.HEAD],[Re.HEADER,M.HEADER],[Re.HGROUP,M.HGROUP],[Re.HR,M.HR],[Re.HTML,M.HTML],[Re.I,M.I],[Re.IMG,M.IMG],[Re.IMAGE,M.IMAGE],[Re.INPUT,M.INPUT],[Re.IFRAME,M.IFRAME],[Re.KEYGEN,M.KEYGEN],[Re.LABEL,M.LABEL],[Re.LI,M.LI],[Re.LINK,M.LINK],[Re.LISTING,M.LISTING],[Re.MAIN,M.MAIN],[Re.MALIGNMARK,M.MALIGNMARK],[Re.MARQUEE,M.MARQUEE],[Re.MATH,M.MATH],[Re.MENU,M.MENU],[Re.META,M.META],[Re.MGLYPH,M.MGLYPH],[Re.MI,M.MI],[Re.MO,M.MO],[Re.MN,M.MN],[Re.MS,M.MS],[Re.MTEXT,M.MTEXT],[Re.NAV,M.NAV],[Re.NOBR,M.NOBR],[Re.NOFRAMES,M.NOFRAMES],[Re.NOEMBED,M.NOEMBED],[Re.NOSCRIPT,M.NOSCRIPT],[Re.OBJECT,M.OBJECT],[Re.OL,M.OL],[Re.OPTGROUP,M.OPTGROUP],[Re.OPTION,M.OPTION],[Re.P,M.P],[Re.PARAM,M.PARAM],[Re.PLAINTEXT,M.PLAINTEXT],[Re.PRE,M.PRE],[Re.RB,M.RB],[Re.RP,M.RP],[Re.RT,M.RT],[Re.RTC,M.RTC],[Re.RUBY,M.RUBY],[Re.S,M.S],[Re.SCRIPT,M.SCRIPT],[Re.SECTION,M.SECTION],[Re.SELECT,M.SELECT],[Re.SOURCE,M.SOURCE],[Re.SMALL,M.SMALL],[Re.SPAN,M.SPAN],[Re.STRIKE,M.STRIKE],[Re.STRONG,M.STRONG],[Re.STYLE,M.STYLE],[Re.SUB,M.SUB],[Re.SUMMARY,M.SUMMARY],[Re.SUP,M.SUP],[Re.TABLE,M.TABLE],[Re.TBODY,M.TBODY],[Re.TEMPLATE,M.TEMPLATE],[Re.TEXTAREA,M.TEXTAREA],[Re.TFOOT,M.TFOOT],[Re.TD,M.TD],[Re.TH,M.TH],[Re.THEAD,M.THEAD],[Re.TITLE,M.TITLE],[Re.TR,M.TR],[Re.TRACK,M.TRACK],[Re.TT,M.TT],[Re.U,M.U],[Re.UL,M.UL],[Re.SVG,M.SVG],[Re.VAR,M.VAR],[Re.WBR,M.WBR],[Re.XMP,M.XMP]]);function Bx(e){var t;return(t=XWe.get(e))!==null&&t!==void 0?t:M.UNKNOWN}const ct=M,QWe={[Qe.HTML]:new Set([ct.ADDRESS,ct.APPLET,ct.AREA,ct.ARTICLE,ct.ASIDE,ct.BASE,ct.BASEFONT,ct.BGSOUND,ct.BLOCKQUOTE,ct.BODY,ct.BR,ct.BUTTON,ct.CAPTION,ct.CENTER,ct.COL,ct.COLGROUP,ct.DD,ct.DETAILS,ct.DIR,ct.DIV,ct.DL,ct.DT,ct.EMBED,ct.FIELDSET,ct.FIGCAPTION,ct.FIGURE,ct.FOOTER,ct.FORM,ct.FRAME,ct.FRAMESET,ct.H1,ct.H2,ct.H3,ct.H4,ct.H5,ct.H6,ct.HEAD,ct.HEADER,ct.HGROUP,ct.HR,ct.HTML,ct.IFRAME,ct.IMG,ct.INPUT,ct.LI,ct.LINK,ct.LISTING,ct.MAIN,ct.MARQUEE,ct.MENU,ct.META,ct.NAV,ct.NOEMBED,ct.NOFRAMES,ct.NOSCRIPT,ct.OBJECT,ct.OL,ct.P,ct.PARAM,ct.PLAINTEXT,ct.PRE,ct.SCRIPT,ct.SECTION,ct.SELECT,ct.SOURCE,ct.STYLE,ct.SUMMARY,ct.TABLE,ct.TBODY,ct.TD,ct.TEMPLATE,ct.TEXTAREA,ct.TFOOT,ct.TH,ct.THEAD,ct.TITLE,ct.TR,ct.TRACK,ct.UL,ct.WBR,ct.XMP]),[Qe.MATHML]:new Set([ct.MI,ct.MO,ct.MN,ct.MS,ct.MTEXT,ct.ANNOTATION_XML]),[Qe.SVG]:new Set([ct.TITLE,ct.FOREIGN_OBJECT,ct.DESC]),[Qe.XLINK]:new Set,[Qe.XML]:new Set,[Qe.XMLNS]:new Set};function _ye(e){return e===ct.H1||e===ct.H2||e===ct.H3||e===ct.H4||e===ct.H5||e===ct.H6}Re.STYLE,Re.SCRIPT,Re.XMP,Re.IFRAME,Re.NOEMBED,Re.NOFRAMES,Re.PLAINTEXT;const JWe=new Map([[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);var le;(function(e){e[e.DATA=0]="DATA",e[e.RCDATA=1]="RCDATA",e[e.RAWTEXT=2]="RAWTEXT",e[e.SCRIPT_DATA=3]="SCRIPT_DATA",e[e.PLAINTEXT=4]="PLAINTEXT",e[e.TAG_OPEN=5]="TAG_OPEN",e[e.END_TAG_OPEN=6]="END_TAG_OPEN",e[e.TAG_NAME=7]="TAG_NAME",e[e.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",e[e.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",e[e.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",e[e.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",e[e.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",e[e.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",e[e.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",e[e.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",e[e.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",e[e.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",e[e.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",e[e.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",e[e.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",e[e.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",e[e.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",e[e.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",e[e.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",e[e.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",e[e.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",e[e.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",e[e.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",e[e.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",e[e.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",e[e.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",e[e.BOGUS_COMMENT=40]="BOGUS_COMMENT",e[e.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",e[e.COMMENT_START=42]="COMMENT_START",e[e.COMMENT_START_DASH=43]="COMMENT_START_DASH",e[e.COMMENT=44]="COMMENT",e[e.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",e[e.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",e[e.COMMENT_END_DASH=49]="COMMENT_END_DASH",e[e.COMMENT_END=50]="COMMENT_END",e[e.COMMENT_END_BANG=51]="COMMENT_END_BANG",e[e.DOCTYPE=52]="DOCTYPE",e[e.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",e[e.DOCTYPE_NAME=54]="DOCTYPE_NAME",e[e.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",e[e.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",e[e.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",e[e.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",e[e.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",e[e.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",e[e.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",e[e.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",e[e.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",e[e.CDATA_SECTION=68]="CDATA_SECTION",e[e.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",e[e.CDATA_SECTION_END=70]="CDATA_SECTION_END",e[e.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",e[e.NAMED_CHARACTER_REFERENCE=72]="NAMED_CHARACTER_REFERENCE",e[e.AMBIGUOUS_AMPERSAND=73]="AMBIGUOUS_AMPERSAND",e[e.NUMERIC_CHARACTER_REFERENCE=74]="NUMERIC_CHARACTER_REFERENCE",e[e.HEXADEMICAL_CHARACTER_REFERENCE_START=75]="HEXADEMICAL_CHARACTER_REFERENCE_START",e[e.HEXADEMICAL_CHARACTER_REFERENCE=76]="HEXADEMICAL_CHARACTER_REFERENCE",e[e.DECIMAL_CHARACTER_REFERENCE=77]="DECIMAL_CHARACTER_REFERENCE",e[e.NUMERIC_CHARACTER_REFERENCE_END=78]="NUMERIC_CHARACTER_REFERENCE_END"})(le||(le={}));const Ni={DATA:le.DATA,RCDATA:le.RCDATA,RAWTEXT:le.RAWTEXT,SCRIPT_DATA:le.SCRIPT_DATA,PLAINTEXT:le.PLAINTEXT,CDATA_SECTION:le.CDATA_SECTION};function M2(e){return e>=se.DIGIT_0&&e<=se.DIGIT_9}function K_(e){return e>=se.LATIN_CAPITAL_A&&e<=se.LATIN_CAPITAL_Z}function ZWe(e){return e>=se.LATIN_SMALL_A&&e<=se.LATIN_SMALL_Z}function _m(e){return ZWe(e)||K_(e)}function ij(e){return _m(e)||M2(e)}function Tye(e){return e>=se.LATIN_CAPITAL_A&&e<=se.LATIN_CAPITAL_F}function Cye(e){return e>=se.LATIN_SMALL_A&&e<=se.LATIN_SMALL_F}function eVe(e){return M2(e)||Tye(e)||Cye(e)}function Tk(e){return e+32}function Sye(e){return e===se.SPACE||e===se.LINE_FEED||e===se.TABULATION||e===se.FORM_FEED}function tVe(e){return e===se.EQUALS_SIGN||ij(e)}function Dne(e){return Sye(e)||e===se.SOLIDUS||e===se.GREATER_THAN_SIGN}class nVe{constructor(t,n){this.options=t,this.handler=n,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=le.DATA,this.returnState=le.DATA,this.charRefCode=-1,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new BWe(n),this.currentLocation=this.getCurrentLocation(-1)}_err(t){var n,r;(r=(n=this.handler).onParseError)===null||r===void 0||r.call(n,this.preprocessor.getError(t))}getCurrentLocation(t){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-t,startOffset:this.preprocessor.offset-t,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const t=this._consume();this._ensureHibernation()||this._callState(t)}this.inLoop=!1}}pause(){this.paused=!0}resume(t){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||t==null||t())}write(t,n,r){this.active=!0,this.preprocessor.write(t,n),this._runParsingLoop(),this.paused||r==null||r()}insertHtmlAtCurrentPos(t){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(t),this._runParsingLoop()}_ensureHibernation(){return this.preprocessor.endOfChunkHit?(this._unconsume(this.consumedAfterSnapshot),this.active=!1,!0):!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_unconsume(t){this.consumedAfterSnapshot-=t,this.preprocessor.retreat(t)}_reconsumeInState(t,n){this.state=t,this._callState(n)}_advanceBy(t){this.consumedAfterSnapshot+=t;for(let n=0;n<t;n++)this.preprocessor.advance()}_consumeSequenceIfMatch(t,n){return this.preprocessor.startsWith(t,n)?(this._advanceBy(t.length-1),!0):!1}_createStartTagToken(){this.currentToken={type:Cn.START_TAG,tagName:"",tagID:M.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:Cn.END_TAG,tagName:"",tagID:M.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(t){this.currentToken={type:Cn.COMMENT,data:"",location:this.getCurrentLocation(t)}}_createDoctypeToken(t){this.currentToken={type:Cn.DOCTYPE,name:t,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(t,n){this.currentCharacterToken={type:t,chars:n,location:this.currentLocation}}_createAttr(t){this.currentAttr={name:t,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var t,n;const r=this.currentToken;if(wye(r,this.currentAttr.name)===null){if(r.attrs.push(this.currentAttr),r.location&&this.currentLocation){const i=(t=(n=r.location).attrs)!==null&&t!==void 0?t:n.attrs=Object.create(null);i[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(ze.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(t){this._emitCurrentCharacterToken(t.location),this.currentToken=null,t.location&&(t.location.endLine=this.preprocessor.line,t.location.endCol=this.preprocessor.col+1,t.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const t=this.currentToken;this.prepareToken(t),t.tagID=Bx(t.tagName),t.type===Cn.START_TAG?(this.lastStartTagName=t.tagName,this.handler.onStartTag(t)):(t.attrs.length>0&&this._err(ze.endTagWithAttributes),t.selfClosing&&this._err(ze.endTagWithTrailingSolidus),this.handler.onEndTag(t)),this.preprocessor.dropParsedChunk()}emitCurrentComment(t){this.prepareToken(t),this.handler.onComment(t),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(t){this.prepareToken(t),this.handler.onDoctype(t),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(t){if(this.currentCharacterToken){switch(t&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=t.startLine,this.currentCharacterToken.location.endCol=t.startCol,this.currentCharacterToken.location.endOffset=t.startOffset),this.currentCharacterToken.type){case Cn.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case Cn.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case Cn.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}_emitEOFToken(){const t=this.getCurrentLocation(0);t&&(t.endLine=t.startLine,t.endCol=t.startCol,t.endOffset=t.startOffset),this._emitCurrentCharacterToken(t),this.handler.onEof({type:Cn.EOF,location:t}),this.active=!1}_appendCharToCurrentCharacterToken(t,n){if(this.currentCharacterToken)if(this.currentCharacterToken.type!==t)this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();else{this.currentCharacterToken.chars+=n;return}this._createCharacterToken(t,n)}_emitCodePoint(t){const n=Sye(t)?Cn.WHITESPACE_CHARACTER:t===se.NULL?Cn.NULL_CHARACTER:Cn.CHARACTER;this._appendCharToCurrentCharacterToken(n,String.fromCodePoint(t))}_emitChars(t){this._appendCharToCurrentCharacterToken(Cn.CHARACTER,t)}_matchNamedCharacterReference(t){let n=null,r=0,i=!1;for(let s=0,o=Em[0];s>=0&&(s=Eye(Em,o,s+1,t),!(s<0));t=this._consume()){r+=1,o=Em[s];const a=o&sf.VALUE_LENGTH;if(a){const l=(a>>14)-1;if(t!==se.SEMICOLON&&this._isCharacterReferenceInAttribute()&&tVe(this.preprocessor.peek(1))?(n=[se.AMPERSAND],s+=l):(n=l===0?[Em[s]&~sf.VALUE_LENGTH]:l===1?[Em[++s]]:[Em[++s],Em[++s]],r=0,i=t!==se.SEMICOLON),l===0){this._consume();break}}}return this._unconsume(r),i&&!this.preprocessor.endOfChunkHit&&this._err(ze.missingSemicolonAfterCharacterReference),this._unconsume(1),n}_isCharacterReferenceInAttribute(){return this.returnState===le.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===le.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===le.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(t){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(t):this._emitCodePoint(t)}_callState(t){switch(this.state){case le.DATA:{this._stateData(t);break}case le.RCDATA:{this._stateRcdata(t);break}case le.RAWTEXT:{this._stateRawtext(t);break}case le.SCRIPT_DATA:{this._stateScriptData(t);break}case le.PLAINTEXT:{this._statePlaintext(t);break}case le.TAG_OPEN:{this._stateTagOpen(t);break}case le.END_TAG_OPEN:{this._stateEndTagOpen(t);break}case le.TAG_NAME:{this._stateTagName(t);break}case le.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(t);break}case le.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(t);break}case le.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(t);break}case le.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(t);break}case le.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(t);break}case le.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(t);break}case le.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(t);break}case le.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(t);break}case le.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(t);break}case le.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(t);break}case le.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(t);break}case le.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(t);break}case le.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(t);break}case le.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(t);break}case le.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(t);break}case le.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(t);break}case le.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(t);break}case le.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(t);break}case le.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(t);break}case le.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(t);break}case le.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(t);break}case le.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(t);break}case le.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(t);break}case le.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(t);break}case le.ATTRIBUTE_NAME:{this._stateAttributeName(t);break}case le.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(t);break}case le.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(t);break}case le.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(t);break}case le.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(t);break}case le.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(t);break}case le.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(t);break}case le.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(t);break}case le.BOGUS_COMMENT:{this._stateBogusComment(t);break}case le.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(t);break}case le.COMMENT_START:{this._stateCommentStart(t);break}case le.COMMENT_START_DASH:{this._stateCommentStartDash(t);break}case le.COMMENT:{this._stateComment(t);break}case le.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(t);break}case le.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(t);break}case le.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(t);break}case le.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(t);break}case le.COMMENT_END_DASH:{this._stateCommentEndDash(t);break}case le.COMMENT_END:{this._stateCommentEnd(t);break}case le.COMMENT_END_BANG:{this._stateCommentEndBang(t);break}case le.DOCTYPE:{this._stateDoctype(t);break}case le.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(t);break}case le.DOCTYPE_NAME:{this._stateDoctypeName(t);break}case le.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(t);break}case le.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(t);break}case le.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(t);break}case le.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(t);break}case le.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(t);break}case le.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(t);break}case le.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(t);break}case le.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(t);break}case le.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(t);break}case le.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(t);break}case le.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(t);break}case le.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(t);break}case le.BOGUS_DOCTYPE:{this._stateBogusDoctype(t);break}case le.CDATA_SECTION:{this._stateCdataSection(t);break}case le.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(t);break}case le.CDATA_SECTION_END:{this._stateCdataSectionEnd(t);break}case le.CHARACTER_REFERENCE:{this._stateCharacterReference(t);break}case le.NAMED_CHARACTER_REFERENCE:{this._stateNamedCharacterReference(t);break}case le.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(t);break}case le.NUMERIC_CHARACTER_REFERENCE:{this._stateNumericCharacterReference(t);break}case le.HEXADEMICAL_CHARACTER_REFERENCE_START:{this._stateHexademicalCharacterReferenceStart(t);break}case le.HEXADEMICAL_CHARACTER_REFERENCE:{this._stateHexademicalCharacterReference(t);break}case le.DECIMAL_CHARACTER_REFERENCE:{this._stateDecimalCharacterReference(t);break}case le.NUMERIC_CHARACTER_REFERENCE_END:{this._stateNumericCharacterReferenceEnd(t);break}default:throw new Error("Unknown state")}}_stateData(t){switch(t){case se.LESS_THAN_SIGN:{this.state=le.TAG_OPEN;break}case se.AMPERSAND:{this.returnState=le.DATA,this.state=le.CHARACTER_REFERENCE;break}case se.NULL:{this._err(ze.unexpectedNullCharacter),this._emitCodePoint(t);break}case se.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRcdata(t){switch(t){case se.AMPERSAND:{this.returnState=le.RCDATA,this.state=le.CHARACTER_REFERENCE;break}case se.LESS_THAN_SIGN:{this.state=le.RCDATA_LESS_THAN_SIGN;break}case se.NULL:{this._err(ze.unexpectedNullCharacter),this._emitChars(ei);break}case se.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRawtext(t){switch(t){case se.LESS_THAN_SIGN:{this.state=le.RAWTEXT_LESS_THAN_SIGN;break}case se.NULL:{this._err(ze.unexpectedNullCharacter),this._emitChars(ei);break}case se.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptData(t){switch(t){case se.LESS_THAN_SIGN:{this.state=le.SCRIPT_DATA_LESS_THAN_SIGN;break}case se.NULL:{this._err(ze.unexpectedNullCharacter),this._emitChars(ei);break}case se.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_statePlaintext(t){switch(t){case se.NULL:{this._err(ze.unexpectedNullCharacter),this._emitChars(ei);break}case se.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateTagOpen(t){if(_m(t))this._createStartTagToken(),this.state=le.TAG_NAME,this._stateTagName(t);else switch(t){case se.EXCLAMATION_MARK:{this.state=le.MARKUP_DECLARATION_OPEN;break}case se.SOLIDUS:{this.state=le.END_TAG_OPEN;break}case se.QUESTION_MARK:{this._err(ze.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=le.BOGUS_COMMENT,this._stateBogusComment(t);break}case se.EOF:{this._err(ze.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(ze.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=le.DATA,this._stateData(t)}}_stateEndTagOpen(t){if(_m(t))this._createEndTagToken(),this.state=le.TAG_NAME,this._stateTagName(t);else switch(t){case se.GREATER_THAN_SIGN:{this._err(ze.missingEndTagName),this.state=le.DATA;break}case se.EOF:{this._err(ze.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(ze.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=le.BOGUS_COMMENT,this._stateBogusComment(t)}}_stateTagName(t){const n=this.currentToken;switch(t){case se.SPACE:case se.LINE_FEED:case se.TABULATION:case se.FORM_FEED:{this.state=le.BEFORE_ATTRIBUTE_NAME;break}case se.SOLIDUS:{this.state=le.SELF_CLOSING_START_TAG;break}case se.GREATER_THAN_SIGN:{this.state=le.DATA,this.emitCurrentTagToken();break}case se.NULL:{this._err(ze.unexpectedNullCharacter),n.tagName+=ei;break}case se.EOF:{this._err(ze.eofInTag),this._emitEOFToken();break}default:n.tagName+=String.fromCodePoint(K_(t)?Tk(t):t)}}_stateRcdataLessThanSign(t){t===se.SOLIDUS?this.state=le.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=le.RCDATA,this._stateRcdata(t))}_stateRcdataEndTagOpen(t){_m(t)?(this.state=le.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(t)):(this._emitChars("</"),this.state=le.RCDATA,this._stateRcdata(t))}handleSpecialEndTag(t){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const n=this.currentToken;switch(n.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case se.SPACE:case se.LINE_FEED:case se.TABULATION:case se.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=le.BEFORE_ATTRIBUTE_NAME,!1;case se.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=le.SELF_CLOSING_START_TAG,!1;case se.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=le.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=le.RCDATA,this._stateRcdata(t))}_stateRawtextLessThanSign(t){t===se.SOLIDUS?this.state=le.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=le.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagOpen(t){_m(t)?(this.state=le.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(t)):(this._emitChars("</"),this.state=le.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=le.RAWTEXT,this._stateRawtext(t))}_stateScriptDataLessThanSign(t){switch(t){case se.SOLIDUS:{this.state=le.SCRIPT_DATA_END_TAG_OPEN;break}case se.EXCLAMATION_MARK:{this.state=le.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=le.SCRIPT_DATA,this._stateScriptData(t)}}_stateScriptDataEndTagOpen(t){_m(t)?(this.state=le.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(t)):(this._emitChars("</"),this.state=le.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=le.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStart(t){t===se.HYPHEN_MINUS?(this.state=le.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=le.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStartDash(t){t===se.HYPHEN_MINUS?(this.state=le.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=le.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscaped(t){switch(t){case se.HYPHEN_MINUS:{this.state=le.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case se.LESS_THAN_SIGN:{this.state=le.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case se.NULL:{this._err(ze.unexpectedNullCharacter),this._emitChars(ei);break}case se.EOF:{this._err(ze.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataEscapedDash(t){switch(t){case se.HYPHEN_MINUS:{this.state=le.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case se.LESS_THAN_SIGN:{this.state=le.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case se.NULL:{this._err(ze.unexpectedNullCharacter),this.state=le.SCRIPT_DATA_ESCAPED,this._emitChars(ei);break}case se.EOF:{this._err(ze.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=le.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedDashDash(t){switch(t){case se.HYPHEN_MINUS:{this._emitChars("-");break}case se.LESS_THAN_SIGN:{this.state=le.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case se.GREATER_THAN_SIGN:{this.state=le.SCRIPT_DATA,this._emitChars(">");break}case se.NULL:{this._err(ze.unexpectedNullCharacter),this.state=le.SCRIPT_DATA_ESCAPED,this._emitChars(ei);break}case se.EOF:{this._err(ze.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=le.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedLessThanSign(t){t===se.SOLIDUS?this.state=le.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:_m(t)?(this._emitChars("<"),this.state=le.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(t)):(this._emitChars("<"),this.state=le.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagOpen(t){_m(t)?(this.state=le.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(t)):(this._emitChars("</"),this.state=le.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=le.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscapeStart(t){if(this.preprocessor.startsWith(Ga.SCRIPT,!1)&&Dne(this.preprocessor.peek(Ga.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<Ga.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=le.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=le.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscaped(t){switch(t){case se.HYPHEN_MINUS:{this.state=le.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case se.LESS_THAN_SIGN:{this.state=le.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case se.NULL:{this._err(ze.unexpectedNullCharacter),this._emitChars(ei);break}case se.EOF:{this._err(ze.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDash(t){switch(t){case se.HYPHEN_MINUS:{this.state=le.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case se.LESS_THAN_SIGN:{this.state=le.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case se.NULL:{this._err(ze.unexpectedNullCharacter),this.state=le.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(ei);break}case se.EOF:{this._err(ze.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=le.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDashDash(t){switch(t){case se.HYPHEN_MINUS:{this._emitChars("-");break}case se.LESS_THAN_SIGN:{this.state=le.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case se.GREATER_THAN_SIGN:{this.state=le.SCRIPT_DATA,this._emitChars(">");break}case se.NULL:{this._err(ze.unexpectedNullCharacter),this.state=le.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(ei);break}case se.EOF:{this._err(ze.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=le.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedLessThanSign(t){t===se.SOLIDUS?(this.state=le.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=le.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateScriptDataDoubleEscapeEnd(t){if(this.preprocessor.startsWith(Ga.SCRIPT,!1)&&Dne(this.preprocessor.peek(Ga.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<Ga.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=le.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=le.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateBeforeAttributeName(t){switch(t){case se.SPACE:case se.LINE_FEED:case se.TABULATION:case se.FORM_FEED:break;case se.SOLIDUS:case se.GREATER_THAN_SIGN:case se.EOF:{this.state=le.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case se.EQUALS_SIGN:{this._err(ze.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=le.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=le.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateAttributeName(t){switch(t){case se.SPACE:case se.LINE_FEED:case se.TABULATION:case se.FORM_FEED:case se.SOLIDUS:case se.GREATER_THAN_SIGN:case se.EOF:{this._leaveAttrName(),this.state=le.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case se.EQUALS_SIGN:{this._leaveAttrName(),this.state=le.BEFORE_ATTRIBUTE_VALUE;break}case se.QUOTATION_MARK:case se.APOSTROPHE:case se.LESS_THAN_SIGN:{this._err(ze.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(t);break}case se.NULL:{this._err(ze.unexpectedNullCharacter),this.currentAttr.name+=ei;break}default:this.currentAttr.name+=String.fromCodePoint(K_(t)?Tk(t):t)}}_stateAfterAttributeName(t){switch(t){case se.SPACE:case se.LINE_FEED:case se.TABULATION:case se.FORM_FEED:break;case se.SOLIDUS:{this.state=le.SELF_CLOSING_START_TAG;break}case se.EQUALS_SIGN:{this.state=le.BEFORE_ATTRIBUTE_VALUE;break}case se.GREATER_THAN_SIGN:{this.state=le.DATA,this.emitCurrentTagToken();break}case se.EOF:{this._err(ze.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=le.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateBeforeAttributeValue(t){switch(t){case se.SPACE:case se.LINE_FEED:case se.TABULATION:case se.FORM_FEED:break;case se.QUOTATION_MARK:{this.state=le.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case se.APOSTROPHE:{this.state=le.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case se.GREATER_THAN_SIGN:{this._err(ze.missingAttributeValue),this.state=le.DATA,this.emitCurrentTagToken();break}default:this.state=le.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(t)}}_stateAttributeValueDoubleQuoted(t){switch(t){case se.QUOTATION_MARK:{this.state=le.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case se.AMPERSAND:{this.returnState=le.ATTRIBUTE_VALUE_DOUBLE_QUOTED,this.state=le.CHARACTER_REFERENCE;break}case se.NULL:{this._err(ze.unexpectedNullCharacter),this.currentAttr.value+=ei;break}case se.EOF:{this._err(ze.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueSingleQuoted(t){switch(t){case se.APOSTROPHE:{this.state=le.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case se.AMPERSAND:{this.returnState=le.ATTRIBUTE_VALUE_SINGLE_QUOTED,this.state=le.CHARACTER_REFERENCE;break}case se.NULL:{this._err(ze.unexpectedNullCharacter),this.currentAttr.value+=ei;break}case se.EOF:{this._err(ze.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueUnquoted(t){switch(t){case se.SPACE:case se.LINE_FEED:case se.TABULATION:case se.FORM_FEED:{this._leaveAttrValue(),this.state=le.BEFORE_ATTRIBUTE_NAME;break}case se.AMPERSAND:{this.returnState=le.ATTRIBUTE_VALUE_UNQUOTED,this.state=le.CHARACTER_REFERENCE;break}case se.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=le.DATA,this.emitCurrentTagToken();break}case se.NULL:{this._err(ze.unexpectedNullCharacter),this.currentAttr.value+=ei;break}case se.QUOTATION_MARK:case se.APOSTROPHE:case se.LESS_THAN_SIGN:case se.EQUALS_SIGN:case se.GRAVE_ACCENT:{this._err(ze.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(t);break}case se.EOF:{this._err(ze.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAfterAttributeValueQuoted(t){switch(t){case se.SPACE:case se.LINE_FEED:case se.TABULATION:case se.FORM_FEED:{this._leaveAttrValue(),this.state=le.BEFORE_ATTRIBUTE_NAME;break}case se.SOLIDUS:{this._leaveAttrValue(),this.state=le.SELF_CLOSING_START_TAG;break}case se.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=le.DATA,this.emitCurrentTagToken();break}case se.EOF:{this._err(ze.eofInTag),this._emitEOFToken();break}default:this._err(ze.missingWhitespaceBetweenAttributes),this.state=le.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateSelfClosingStartTag(t){switch(t){case se.GREATER_THAN_SIGN:{const n=this.currentToken;n.selfClosing=!0,this.state=le.DATA,this.emitCurrentTagToken();break}case se.EOF:{this._err(ze.eofInTag),this._emitEOFToken();break}default:this._err(ze.unexpectedSolidusInTag),this.state=le.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateBogusComment(t){const n=this.currentToken;switch(t){case se.GREATER_THAN_SIGN:{this.state=le.DATA,this.emitCurrentComment(n);break}case se.EOF:{this.emitCurrentComment(n),this._emitEOFToken();break}case se.NULL:{this._err(ze.unexpectedNullCharacter),n.data+=ei;break}default:n.data+=String.fromCodePoint(t)}}_stateMarkupDeclarationOpen(t){this._consumeSequenceIfMatch(Ga.DASH_DASH,!0)?(this._createCommentToken(Ga.DASH_DASH.length+1),this.state=le.COMMENT_START):this._consumeSequenceIfMatch(Ga.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(Ga.DOCTYPE.length+1),this.state=le.DOCTYPE):this._consumeSequenceIfMatch(Ga.CDATA_START,!0)?this.inForeignNode?this.state=le.CDATA_SECTION:(this._err(ze.cdataInHtmlContent),this._createCommentToken(Ga.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=le.BOGUS_COMMENT):this._ensureHibernation()||(this._err(ze.incorrectlyOpenedComment),this._createCommentToken(2),this.state=le.BOGUS_COMMENT,this._stateBogusComment(t))}_stateCommentStart(t){switch(t){case se.HYPHEN_MINUS:{this.state=le.COMMENT_START_DASH;break}case se.GREATER_THAN_SIGN:{this._err(ze.abruptClosingOfEmptyComment),this.state=le.DATA;const n=this.currentToken;this.emitCurrentComment(n);break}default:this.state=le.COMMENT,this._stateComment(t)}}_stateCommentStartDash(t){const n=this.currentToken;switch(t){case se.HYPHEN_MINUS:{this.state=le.COMMENT_END;break}case se.GREATER_THAN_SIGN:{this._err(ze.abruptClosingOfEmptyComment),this.state=le.DATA,this.emitCurrentComment(n);break}case se.EOF:{this._err(ze.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=le.COMMENT,this._stateComment(t)}}_stateComment(t){const n=this.currentToken;switch(t){case se.HYPHEN_MINUS:{this.state=le.COMMENT_END_DASH;break}case se.LESS_THAN_SIGN:{n.data+="<",this.state=le.COMMENT_LESS_THAN_SIGN;break}case se.NULL:{this._err(ze.unexpectedNullCharacter),n.data+=ei;break}case se.EOF:{this._err(ze.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+=String.fromCodePoint(t)}}_stateCommentLessThanSign(t){const n=this.currentToken;switch(t){case se.EXCLAMATION_MARK:{n.data+="!",this.state=le.COMMENT_LESS_THAN_SIGN_BANG;break}case se.LESS_THAN_SIGN:{n.data+="<";break}default:this.state=le.COMMENT,this._stateComment(t)}}_stateCommentLessThanSignBang(t){t===se.HYPHEN_MINUS?this.state=le.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=le.COMMENT,this._stateComment(t))}_stateCommentLessThanSignBangDash(t){t===se.HYPHEN_MINUS?this.state=le.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=le.COMMENT_END_DASH,this._stateCommentEndDash(t))}_stateCommentLessThanSignBangDashDash(t){t!==se.GREATER_THAN_SIGN&&t!==se.EOF&&this._err(ze.nestedComment),this.state=le.COMMENT_END,this._stateCommentEnd(t)}_stateCommentEndDash(t){const n=this.currentToken;switch(t){case se.HYPHEN_MINUS:{this.state=le.COMMENT_END;break}case se.EOF:{this._err(ze.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=le.COMMENT,this._stateComment(t)}}_stateCommentEnd(t){const n=this.currentToken;switch(t){case se.GREATER_THAN_SIGN:{this.state=le.DATA,this.emitCurrentComment(n);break}case se.EXCLAMATION_MARK:{this.state=le.COMMENT_END_BANG;break}case se.HYPHEN_MINUS:{n.data+="-";break}case se.EOF:{this._err(ze.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--",this.state=le.COMMENT,this._stateComment(t)}}_stateCommentEndBang(t){const n=this.currentToken;switch(t){case se.HYPHEN_MINUS:{n.data+="--!",this.state=le.COMMENT_END_DASH;break}case se.GREATER_THAN_SIGN:{this._err(ze.incorrectlyClosedComment),this.state=le.DATA,this.emitCurrentComment(n);break}case se.EOF:{this._err(ze.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--!",this.state=le.COMMENT,this._stateComment(t)}}_stateDoctype(t){switch(t){case se.SPACE:case se.LINE_FEED:case se.TABULATION:case se.FORM_FEED:{this.state=le.BEFORE_DOCTYPE_NAME;break}case se.GREATER_THAN_SIGN:{this.state=le.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t);break}case se.EOF:{this._err(ze.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ze.missingWhitespaceBeforeDoctypeName),this.state=le.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t)}}_stateBeforeDoctypeName(t){if(K_(t))this._createDoctypeToken(String.fromCharCode(Tk(t))),this.state=le.DOCTYPE_NAME;else switch(t){case se.SPACE:case se.LINE_FEED:case se.TABULATION:case se.FORM_FEED:break;case se.NULL:{this._err(ze.unexpectedNullCharacter),this._createDoctypeToken(ei),this.state=le.DOCTYPE_NAME;break}case se.GREATER_THAN_SIGN:{this._err(ze.missingDoctypeName),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=le.DATA;break}case se.EOF:{this._err(ze.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(t)),this.state=le.DOCTYPE_NAME}}_stateDoctypeName(t){const n=this.currentToken;switch(t){case se.SPACE:case se.LINE_FEED:case se.TABULATION:case se.FORM_FEED:{this.state=le.AFTER_DOCTYPE_NAME;break}case se.GREATER_THAN_SIGN:{this.state=le.DATA,this.emitCurrentDoctype(n);break}case se.NULL:{this._err(ze.unexpectedNullCharacter),n.name+=ei;break}case se.EOF:{this._err(ze.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.name+=String.fromCodePoint(K_(t)?Tk(t):t)}}_stateAfterDoctypeName(t){const n=this.currentToken;switch(t){case se.SPACE:case se.LINE_FEED:case se.TABULATION:case se.FORM_FEED:break;case se.GREATER_THAN_SIGN:{this.state=le.DATA,this.emitCurrentDoctype(n);break}case se.EOF:{this._err(ze.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(Ga.PUBLIC,!1)?this.state=le.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(Ga.SYSTEM,!1)?this.state=le.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(ze.invalidCharacterSequenceAfterDoctypeName),n.forceQuirks=!0,this.state=le.BOGUS_DOCTYPE,this._stateBogusDoctype(t))}}_stateAfterDoctypePublicKeyword(t){const n=this.currentToken;switch(t){case se.SPACE:case se.LINE_FEED:case se.TABULATION:case se.FORM_FEED:{this.state=le.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case se.QUOTATION_MARK:{this._err(ze.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=le.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case se.APOSTROPHE:{this._err(ze.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=le.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case se.GREATER_THAN_SIGN:{this._err(ze.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=le.DATA,this.emitCurrentDoctype(n);break}case se.EOF:{this._err(ze.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ze.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=le.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case se.SPACE:case se.LINE_FEED:case se.TABULATION:case se.FORM_FEED:break;case se.QUOTATION_MARK:{n.publicId="",this.state=le.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case se.APOSTROPHE:{n.publicId="",this.state=le.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case se.GREATER_THAN_SIGN:{this._err(ze.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=le.DATA,this.emitCurrentDoctype(n);break}case se.EOF:{this._err(ze.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ze.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=le.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypePublicIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case se.QUOTATION_MARK:{this.state=le.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case se.NULL:{this._err(ze.unexpectedNullCharacter),n.publicId+=ei;break}case se.GREATER_THAN_SIGN:{this._err(ze.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=le.DATA;break}case se.EOF:{this._err(ze.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateDoctypePublicIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case se.APOSTROPHE:{this.state=le.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case se.NULL:{this._err(ze.unexpectedNullCharacter),n.publicId+=ei;break}case se.GREATER_THAN_SIGN:{this._err(ze.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=le.DATA;break}case se.EOF:{this._err(ze.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateAfterDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case se.SPACE:case se.LINE_FEED:case se.TABULATION:case se.FORM_FEED:{this.state=le.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case se.GREATER_THAN_SIGN:{this.state=le.DATA,this.emitCurrentDoctype(n);break}case se.QUOTATION_MARK:{this._err(ze.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=le.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case se.APOSTROPHE:{this._err(ze.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=le.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case se.EOF:{this._err(ze.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ze.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=le.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBetweenDoctypePublicAndSystemIdentifiers(t){const n=this.currentToken;switch(t){case se.SPACE:case se.LINE_FEED:case se.TABULATION:case se.FORM_FEED:break;case se.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=le.DATA;break}case se.QUOTATION_MARK:{n.systemId="",this.state=le.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case se.APOSTROPHE:{n.systemId="",this.state=le.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case se.EOF:{this._err(ze.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ze.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=le.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateAfterDoctypeSystemKeyword(t){const n=this.currentToken;switch(t){case se.SPACE:case se.LINE_FEED:case se.TABULATION:case se.FORM_FEED:{this.state=le.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case se.QUOTATION_MARK:{this._err(ze.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=le.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case se.APOSTROPHE:{this._err(ze.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=le.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case se.GREATER_THAN_SIGN:{this._err(ze.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=le.DATA,this.emitCurrentDoctype(n);break}case se.EOF:{this._err(ze.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ze.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=le.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case se.SPACE:case se.LINE_FEED:case se.TABULATION:case se.FORM_FEED:break;case se.QUOTATION_MARK:{n.systemId="",this.state=le.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case se.APOSTROPHE:{n.systemId="",this.state=le.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case se.GREATER_THAN_SIGN:{this._err(ze.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=le.DATA,this.emitCurrentDoctype(n);break}case se.EOF:{this._err(ze.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ze.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=le.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypeSystemIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case se.QUOTATION_MARK:{this.state=le.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case se.NULL:{this._err(ze.unexpectedNullCharacter),n.systemId+=ei;break}case se.GREATER_THAN_SIGN:{this._err(ze.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=le.DATA;break}case se.EOF:{this._err(ze.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateDoctypeSystemIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case se.APOSTROPHE:{this.state=le.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case se.NULL:{this._err(ze.unexpectedNullCharacter),n.systemId+=ei;break}case se.GREATER_THAN_SIGN:{this._err(ze.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=le.DATA;break}case se.EOF:{this._err(ze.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateAfterDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case se.SPACE:case se.LINE_FEED:case se.TABULATION:case se.FORM_FEED:break;case se.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=le.DATA;break}case se.EOF:{this._err(ze.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ze.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=le.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBogusDoctype(t){const n=this.currentToken;switch(t){case se.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=le.DATA;break}case se.NULL:{this._err(ze.unexpectedNullCharacter);break}case se.EOF:{this.emitCurrentDoctype(n),this._emitEOFToken();break}}}_stateCdataSection(t){switch(t){case se.RIGHT_SQUARE_BRACKET:{this.state=le.CDATA_SECTION_BRACKET;break}case se.EOF:{this._err(ze.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateCdataSectionBracket(t){t===se.RIGHT_SQUARE_BRACKET?this.state=le.CDATA_SECTION_END:(this._emitChars("]"),this.state=le.CDATA_SECTION,this._stateCdataSection(t))}_stateCdataSectionEnd(t){switch(t){case se.GREATER_THAN_SIGN:{this.state=le.DATA;break}case se.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=le.CDATA_SECTION,this._stateCdataSection(t)}}_stateCharacterReference(t){t===se.NUMBER_SIGN?this.state=le.NUMERIC_CHARACTER_REFERENCE:ij(t)?(this.state=le.NAMED_CHARACTER_REFERENCE,this._stateNamedCharacterReference(t)):(this._flushCodePointConsumedAsCharacterReference(se.AMPERSAND),this._reconsumeInState(this.returnState,t))}_stateNamedCharacterReference(t){const n=this._matchNamedCharacterReference(t);if(!this._ensureHibernation())if(n){for(let r=0;r<n.length;r++)this._flushCodePointConsumedAsCharacterReference(n[r]);this.state=this.returnState}else this._flushCodePointConsumedAsCharacterReference(se.AMPERSAND),this.state=le.AMBIGUOUS_AMPERSAND}_stateAmbiguousAmpersand(t){ij(t)?this._flushCodePointConsumedAsCharacterReference(t):(t===se.SEMICOLON&&this._err(ze.unknownNamedCharacterReference),this._reconsumeInState(this.returnState,t))}_stateNumericCharacterReference(t){this.charRefCode=0,t===se.LATIN_SMALL_X||t===se.LATIN_CAPITAL_X?this.state=le.HEXADEMICAL_CHARACTER_REFERENCE_START:M2(t)?(this.state=le.DECIMAL_CHARACTER_REFERENCE,this._stateDecimalCharacterReference(t)):(this._err(ze.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(se.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(se.NUMBER_SIGN),this._reconsumeInState(this.returnState,t))}_stateHexademicalCharacterReferenceStart(t){eVe(t)?(this.state=le.HEXADEMICAL_CHARACTER_REFERENCE,this._stateHexademicalCharacterReference(t)):(this._err(ze.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(se.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(se.NUMBER_SIGN),this._unconsume(2),this.state=this.returnState)}_stateHexademicalCharacterReference(t){Tye(t)?this.charRefCode=this.charRefCode*16+t-55:Cye(t)?this.charRefCode=this.charRefCode*16+t-87:M2(t)?this.charRefCode=this.charRefCode*16+t-48:t===se.SEMICOLON?this.state=le.NUMERIC_CHARACTER_REFERENCE_END:(this._err(ze.missingSemicolonAfterCharacterReference),this.state=le.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateDecimalCharacterReference(t){M2(t)?this.charRefCode=this.charRefCode*10+t-48:t===se.SEMICOLON?this.state=le.NUMERIC_CHARACTER_REFERENCE_END:(this._err(ze.missingSemicolonAfterCharacterReference),this.state=le.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateNumericCharacterReferenceEnd(t){if(this.charRefCode===se.NULL)this._err(ze.nullCharacterReference),this.charRefCode=se.REPLACEMENT_CHARACTER;else if(this.charRefCode>1114111)this._err(ze.characterReferenceOutsideUnicodeRange),this.charRefCode=se.REPLACEMENT_CHARACTER;else if(yye(this.charRefCode))this._err(ze.surrogateCharacterReference),this.charRefCode=se.REPLACEMENT_CHARACTER;else if(bye(this.charRefCode))this._err(ze.noncharacterCharacterReference);else if(vye(this.charRefCode)||this.charRefCode===se.CARRIAGE_RETURN){this._err(ze.controlCharacterReference);const n=JWe.get(this.charRefCode);n!==void 0&&(this.charRefCode=n)}this._flushCodePointConsumedAsCharacterReference(this.charRefCode),this._reconsumeInState(this.returnState,t)}}const Aye=new Set([M.DD,M.DT,M.LI,M.OPTGROUP,M.OPTION,M.P,M.RB,M.RP,M.RT,M.RTC]),Pne=new Set([...Aye,M.CAPTION,M.COLGROUP,M.TBODY,M.TD,M.TFOOT,M.TH,M.THEAD,M.TR]),Ck=new Map([[M.APPLET,Qe.HTML],[M.CAPTION,Qe.HTML],[M.HTML,Qe.HTML],[M.MARQUEE,Qe.HTML],[M.OBJECT,Qe.HTML],[M.TABLE,Qe.HTML],[M.TD,Qe.HTML],[M.TEMPLATE,Qe.HTML],[M.TH,Qe.HTML],[M.ANNOTATION_XML,Qe.MATHML],[M.MI,Qe.MATHML],[M.MN,Qe.MATHML],[M.MO,Qe.MATHML],[M.MS,Qe.MATHML],[M.MTEXT,Qe.MATHML],[M.DESC,Qe.SVG],[M.FOREIGN_OBJECT,Qe.SVG],[M.TITLE,Qe.SVG]]),rVe=[M.H1,M.H2,M.H3,M.H4,M.H5,M.H6],iVe=[M.TR,M.TEMPLATE,M.HTML],sVe=[M.TBODY,M.TFOOT,M.THEAD,M.TEMPLATE,M.HTML],oVe=[M.TABLE,M.TEMPLATE,M.HTML],aVe=[M.TD,M.TH];class lVe{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(t,n,r){this.treeAdapter=n,this.handler=r,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=M.UNKNOWN,this.current=t}_indexOf(t){return this.items.lastIndexOf(t,this.stackTop)}_isInTemplate(){return this.currentTagId===M.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===Qe.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(t,n){this.stackTop++,this.items[this.stackTop]=t,this.current=t,this.tagIDs[this.stackTop]=n,this.currentTagId=n,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(t,n,!0)}pop(){const t=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!0)}replace(t,n){const r=this._indexOf(t);this.items[r]=n,r===this.stackTop&&(this.current=n)}insertAfter(t,n,r){const i=this._indexOf(t)+1;this.items.splice(i,0,n),this.tagIDs.splice(i,0,r),this.stackTop++,i===this.stackTop&&this._updateCurrentElement(),this.handler.onItemPush(this.current,this.currentTagId,i===this.stackTop)}popUntilTagNamePopped(t){let n=this.stackTop+1;do n=this.tagIDs.lastIndexOf(t,n-1);while(n>0&&this.treeAdapter.getNamespaceURI(this.items[n])!==Qe.HTML);this.shortenToLength(n<0?0:n)}shortenToLength(t){for(;this.stackTop>=t;){const n=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(n,this.stackTop<t)}}popUntilElementPopped(t){const n=this._indexOf(t);this.shortenToLength(n<0?0:n)}popUntilPopped(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r<0?0:r)}popUntilNumberedHeaderPopped(){this.popUntilPopped(rVe,Qe.HTML)}popUntilTableCellPopped(){this.popUntilPopped(aVe,Qe.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(t,n){for(let r=this.stackTop;r>=0;r--)if(t.includes(this.tagIDs[r])&&this.treeAdapter.getNamespaceURI(this.items[r])===n)return r;return-1}clearBackTo(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r+1)}clearBackToTableContext(){this.clearBackTo(oVe,Qe.HTML)}clearBackToTableBodyContext(){this.clearBackTo(sVe,Qe.HTML)}clearBackToTableRowContext(){this.clearBackTo(iVe,Qe.HTML)}remove(t){const n=this._indexOf(t);n>=0&&(n===this.stackTop?this.pop():(this.items.splice(n,1),this.tagIDs.splice(n,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===M.BODY?this.items[1]:null}contains(t){return this._indexOf(t)>-1}getCommonAncestor(t){const n=this._indexOf(t)-1;return n>=0?this.items[n]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.tagIDs[0]===M.HTML}hasInScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===Qe.HTML)return!0;if(Ck.get(r)===i)return!1}return!0}hasNumberedHeaderInScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t],r=this.treeAdapter.getNamespaceURI(this.items[t]);if(_ye(n)&&r===Qe.HTML)return!0;if(Ck.get(n)===r)return!1}return!0}hasInListItemScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===Qe.HTML)return!0;if((r===M.UL||r===M.OL)&&i===Qe.HTML||Ck.get(r)===i)return!1}return!0}hasInButtonScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===Qe.HTML)return!0;if(r===M.BUTTON&&i===Qe.HTML||Ck.get(r)===i)return!1}return!0}hasInTableScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===Qe.HTML){if(r===t)return!0;if(r===M.TABLE||r===M.TEMPLATE||r===M.HTML)return!1}}return!0}hasTableBodyContextInTableScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t];if(this.treeAdapter.getNamespaceURI(this.items[t])===Qe.HTML){if(n===M.TBODY||n===M.THEAD||n===M.TFOOT)return!0;if(n===M.TABLE||n===M.HTML)return!1}}return!0}hasInSelectScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===Qe.HTML){if(r===t)return!0;if(r!==M.OPTION&&r!==M.OPTGROUP)return!1}}return!0}generateImpliedEndTags(){for(;Aye.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;Pne.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(t){for(;this.currentTagId!==t&&Pne.has(this.currentTagId);)this.pop()}}const gM=3;var Cc;(function(e){e[e.Marker=0]="Marker",e[e.Element=1]="Element"})(Cc=Cc||(Cc={}));const Nne={type:Cc.Marker};class uVe{constructor(t){this.treeAdapter=t,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(t,n){const r=[],i=n.length,s=this.treeAdapter.getTagName(t),o=this.treeAdapter.getNamespaceURI(t);for(let a=0;a<this.entries.length;a++){const l=this.entries[a];if(l.type===Cc.Marker)break;const{element:u}=l;if(this.treeAdapter.getTagName(u)===s&&this.treeAdapter.getNamespaceURI(u)===o){const c=this.treeAdapter.getAttrList(u);c.length===i&&r.push({idx:a,attrs:c})}}return r}_ensureNoahArkCondition(t){if(this.entries.length<gM)return;const n=this.treeAdapter.getAttrList(t),r=this._getNoahArkConditionCandidates(t,n);if(r.length<gM)return;const i=new Map(n.map(o=>[o.name,o.value]));let s=0;for(let o=0;o<r.length;o++){const a=r[o];a.attrs.every(l=>i.get(l.name)===l.value)&&(s+=1,s>=gM&&this.entries.splice(a.idx,1))}}insertMarker(){this.entries.unshift(Nne)}pushElement(t,n){this._ensureNoahArkCondition(t),this.entries.unshift({type:Cc.Element,element:t,token:n})}insertElementAfterBookmark(t,n){const r=this.entries.indexOf(this.bookmark);this.entries.splice(r,0,{type:Cc.Element,element:t,token:n})}removeEntry(t){const n=this.entries.indexOf(t);n>=0&&this.entries.splice(n,1)}clearToLastMarker(){const t=this.entries.indexOf(Nne);t>=0?this.entries.splice(0,t+1):this.entries.length=0}getElementEntryInScopeWithTagName(t){const n=this.entries.find(r=>r.type===Cc.Marker||this.treeAdapter.getTagName(r.element)===t);return n&&n.type===Cc.Element?n:null}getElementEntry(t){return this.entries.find(n=>n.type===Cc.Element&&n.element===t)}}function One(e){return{nodeName:"#text",value:e,parentNode:null}}const Tb={createDocument(){return{nodeName:"#document",mode:$l.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(e,t,n){return{nodeName:e,tagName:e,attrs:n,namespaceURI:t,childNodes:[],parentNode:null}},createCommentNode(e){return{nodeName:"#comment",data:e,parentNode:null}},appendChild(e,t){e.childNodes.push(t),t.parentNode=e},insertBefore(e,t,n){const r=e.childNodes.indexOf(n);e.childNodes.splice(r,0,t),t.parentNode=e},setTemplateContent(e,t){e.content=t},getTemplateContent(e){return e.content},setDocumentType(e,t,n,r){const i=e.childNodes.find(s=>s.nodeName==="#documentType");if(i)i.name=t,i.publicId=n,i.systemId=r;else{const s={nodeName:"#documentType",name:t,publicId:n,systemId:r,parentNode:null};Tb.appendChild(e,s)}},setDocumentMode(e,t){e.mode=t},getDocumentMode(e){return e.mode},detachNode(e){if(e.parentNode){const t=e.parentNode.childNodes.indexOf(e);e.parentNode.childNodes.splice(t,1),e.parentNode=null}},insertText(e,t){if(e.childNodes.length>0){const n=e.childNodes[e.childNodes.length-1];if(Tb.isTextNode(n)){n.value+=t;return}}Tb.appendChild(e,One(t))},insertTextBefore(e,t,n){const r=e.childNodes[e.childNodes.indexOf(n)-1];r&&Tb.isTextNode(r)?r.value+=t:Tb.insertBefore(e,One(t),n)},adoptAttributes(e,t){const n=new Set(e.attrs.map(r=>r.name));for(let r=0;r<t.length;r++)n.has(t[r].name)||e.attrs.push(t[r])},getFirstChild(e){return e.childNodes[0]},getChildNodes(e){return e.childNodes},getParentNode(e){return e.parentNode},getAttrList(e){return e.attrs},getTagName(e){return e.tagName},getNamespaceURI(e){return e.namespaceURI},getTextNodeContent(e){return e.value},getCommentNodeContent(e){return e.data},getDocumentTypeNodeName(e){return e.name},getDocumentTypeNodePublicId(e){return e.publicId},getDocumentTypeNodeSystemId(e){return e.systemId},isTextNode(e){return e.nodeName==="#text"},isCommentNode(e){return e.nodeName==="#comment"},isDocumentTypeNode(e){return e.nodeName==="#documentType"},isElementNode(e){return Object.prototype.hasOwnProperty.call(e,"tagName")},setNodeSourceCodeLocation(e,t){e.sourceCodeLocation=t},getNodeSourceCodeLocation(e){return e.sourceCodeLocation},updateNodeSourceCodeLocation(e,t){e.sourceCodeLocation={...e.sourceCodeLocation,...t}}},kye="html",cVe="about:legacy-compat",dVe="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",Iye=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],fVe=[...Iye,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],hVe=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),Rye=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],pVe=[...Rye,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function $ne(e,t){return t.some(n=>e.startsWith(n))}function mVe(e){return e.name===kye&&e.publicId===null&&(e.systemId===null||e.systemId===cVe)}function gVe(e){if(e.name!==kye)return $l.QUIRKS;const{systemId:t}=e;if(t&&t.toLowerCase()===dVe)return $l.QUIRKS;let{publicId:n}=e;if(n!==null){if(n=n.toLowerCase(),hVe.has(n))return $l.QUIRKS;let r=t===null?fVe:Iye;if($ne(n,r))return $l.QUIRKS;if(r=t===null?Rye:pVe,$ne(n,r))return $l.LIMITED_QUIRKS}return $l.NO_QUIRKS}const Mne={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},yVe="definitionurl",vVe="definitionURL",bVe=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(e=>[e.toLowerCase(),e])),wVe=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:Qe.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:Qe.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:Qe.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:Qe.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:Qe.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:Qe.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:Qe.XLINK}],["xml:base",{prefix:"xml",name:"base",namespace:Qe.XML}],["xml:lang",{prefix:"xml",name:"lang",namespace:Qe.XML}],["xml:space",{prefix:"xml",name:"space",namespace:Qe.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:Qe.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:Qe.XMLNS}]]),xVe=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(e=>[e.toLowerCase(),e])),EVe=new Set([M.B,M.BIG,M.BLOCKQUOTE,M.BODY,M.BR,M.CENTER,M.CODE,M.DD,M.DIV,M.DL,M.DT,M.EM,M.EMBED,M.H1,M.H2,M.H3,M.H4,M.H5,M.H6,M.HEAD,M.HR,M.I,M.IMG,M.LI,M.LISTING,M.MENU,M.META,M.NOBR,M.OL,M.P,M.PRE,M.RUBY,M.S,M.SMALL,M.SPAN,M.STRONG,M.STRIKE,M.SUB,M.SUP,M.TABLE,M.TT,M.U,M.UL,M.VAR]);function _Ve(e){const t=e.tagID;return t===M.FONT&&e.attrs.some(({name:r})=>r===n0.COLOR||r===n0.SIZE||r===n0.FACE)||EVe.has(t)}function Dye(e){for(let t=0;t<e.attrs.length;t++)if(e.attrs[t].name===yVe){e.attrs[t].name=vVe;break}}function Pye(e){for(let t=0;t<e.attrs.length;t++){const n=bVe.get(e.attrs[t].name);n!=null&&(e.attrs[t].name=n)}}function IH(e){for(let t=0;t<e.attrs.length;t++){const n=wVe.get(e.attrs[t].name);n&&(e.attrs[t].prefix=n.prefix,e.attrs[t].name=n.name,e.attrs[t].namespace=n.namespace)}}function TVe(e){const t=xVe.get(e.tagName);t!=null&&(e.tagName=t,e.tagID=Bx(e.tagName))}function CVe(e,t){return t===Qe.MATHML&&(e===M.MI||e===M.MO||e===M.MN||e===M.MS||e===M.MTEXT)}function SVe(e,t,n){if(t===Qe.MATHML&&e===M.ANNOTATION_XML){for(let r=0;r<n.length;r++)if(n[r].name===n0.ENCODING){const i=n[r].value.toLowerCase();return i===Mne.TEXT_HTML||i===Mne.APPLICATION_XML}}return t===Qe.SVG&&(e===M.FOREIGN_OBJECT||e===M.DESC||e===M.TITLE)}function AVe(e,t,n,r){return(!r||r===Qe.HTML)&&SVe(e,t,n)||(!r||r===Qe.MATHML)&&CVe(e,t)}const kVe="hidden",IVe=8,RVe=3;var pe;(function(e){e[e.INITIAL=0]="INITIAL",e[e.BEFORE_HTML=1]="BEFORE_HTML",e[e.BEFORE_HEAD=2]="BEFORE_HEAD",e[e.IN_HEAD=3]="IN_HEAD",e[e.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",e[e.AFTER_HEAD=5]="AFTER_HEAD",e[e.IN_BODY=6]="IN_BODY",e[e.TEXT=7]="TEXT",e[e.IN_TABLE=8]="IN_TABLE",e[e.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",e[e.IN_CAPTION=10]="IN_CAPTION",e[e.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",e[e.IN_TABLE_BODY=12]="IN_TABLE_BODY",e[e.IN_ROW=13]="IN_ROW",e[e.IN_CELL=14]="IN_CELL",e[e.IN_SELECT=15]="IN_SELECT",e[e.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",e[e.IN_TEMPLATE=17]="IN_TEMPLATE",e[e.AFTER_BODY=18]="AFTER_BODY",e[e.IN_FRAMESET=19]="IN_FRAMESET",e[e.AFTER_FRAMESET=20]="AFTER_FRAMESET",e[e.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",e[e.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(pe||(pe={}));const DVe={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},Nye=new Set([M.TABLE,M.TBODY,M.TFOOT,M.THEAD,M.TR]),Lne={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:Tb,onParseError:null};let Fne=class{constructor(t,n,r=null,i=null){this.fragmentContext=r,this.scriptHandler=i,this.currentToken=null,this.stopped=!1,this.insertionMode=pe.INITIAL,this.originalInsertionMode=pe.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...Lne,...t},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=n??this.treeAdapter.createDocument(),this.tokenizer=new nVe(this.options,this),this.activeFormattingElements=new uVe(this.treeAdapter),this.fragmentContextID=r?Bx(this.treeAdapter.getTagName(r)):M.UNKNOWN,this._setContextModes(r??this.document,this.fragmentContextID),this.openElements=new lVe(this.document,this.treeAdapter,this)}static parse(t,n){const r=new this(n);return r.tokenizer.write(t,!0),r.document}static getFragmentParser(t,n){const r={...Lne,...n};t??(t=r.treeAdapter.createElement(Re.TEMPLATE,Qe.HTML,[]));const i=r.treeAdapter.createElement("documentmock",Qe.HTML,[]),s=new this(r,i,t);return s.fragmentContextID===M.TEMPLATE&&s.tmplInsertionModeStack.unshift(pe.IN_TEMPLATE),s._initTokenizerForFragmentParsing(),s._insertFakeRootElement(),s._resetInsertionMode(),s._findFormInFragmentContext(),s}getFragment(){const t=this.treeAdapter.getFirstChild(this.document),n=this.treeAdapter.createDocumentFragment();return this._adoptNodes(t,n),n}_err(t,n,r){var i;if(!this.onParseError)return;const s=(i=t.location)!==null&&i!==void 0?i:DVe,o={code:n,startLine:s.startLine,startCol:s.startCol,startOffset:s.startOffset,endLine:r?s.startLine:s.endLine,endCol:r?s.startCol:s.endCol,endOffset:r?s.startOffset:s.endOffset};this.onParseError(o)}onItemPush(t,n,r){var i,s;(s=(i=this.treeAdapter).onItemPush)===null||s===void 0||s.call(i,t),r&&this.openElements.stackTop>0&&this._setContextModes(t,n)}onItemPop(t,n){var r,i;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(t,this.currentToken),(i=(r=this.treeAdapter).onItemPop)===null||i===void 0||i.call(r,t,this.openElements.current),n){let s,o;this.openElements.stackTop===0&&this.fragmentContext?(s=this.fragmentContext,o=this.fragmentContextID):{current:s,currentTagId:o}=this.openElements,this._setContextModes(s,o)}}_setContextModes(t,n){const r=t===this.document||this.treeAdapter.getNamespaceURI(t)===Qe.HTML;this.currentNotInHTML=!r,this.tokenizer.inForeignNode=!r&&!this._isIntegrationPoint(n,t)}_switchToTextParsing(t,n){this._insertElement(t,Qe.HTML),this.tokenizer.state=n,this.originalInsertionMode=this.insertionMode,this.insertionMode=pe.TEXT}switchToPlaintextParsing(){this.insertionMode=pe.TEXT,this.originalInsertionMode=pe.IN_BODY,this.tokenizer.state=Ni.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let t=this.fragmentContext;for(;t;){if(this.treeAdapter.getTagName(t)===Re.FORM){this.formElement=t;break}t=this.treeAdapter.getParentNode(t)}}_initTokenizerForFragmentParsing(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==Qe.HTML))switch(this.fragmentContextID){case M.TITLE:case M.TEXTAREA:{this.tokenizer.state=Ni.RCDATA;break}case M.STYLE:case M.XMP:case M.IFRAME:case M.NOEMBED:case M.NOFRAMES:case M.NOSCRIPT:{this.tokenizer.state=Ni.RAWTEXT;break}case M.SCRIPT:{this.tokenizer.state=Ni.SCRIPT_DATA;break}case M.PLAINTEXT:{this.tokenizer.state=Ni.PLAINTEXT;break}}}_setDocumentType(t){const n=t.name||"",r=t.publicId||"",i=t.systemId||"";if(this.treeAdapter.setDocumentType(this.document,n,r,i),t.location){const o=this.treeAdapter.getChildNodes(this.document).find(a=>this.treeAdapter.isDocumentTypeNode(a));o&&this.treeAdapter.setNodeSourceCodeLocation(o,t.location)}}_attachElementToTree(t,n){if(this.options.sourceCodeLocationInfo){const r=n&&{...n,startTag:n};this.treeAdapter.setNodeSourceCodeLocation(t,r)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(t);else{const r=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(r,t)}}_appendElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location)}_insertElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location),this.openElements.push(r,t.tagID)}_insertFakeElement(t,n){const r=this.treeAdapter.createElement(t,Qe.HTML,[]);this._attachElementToTree(r,null),this.openElements.push(r,n)}_insertTemplate(t){const n=this.treeAdapter.createElement(t.tagName,Qe.HTML,t.attrs),r=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(n,r),this._attachElementToTree(n,t.location),this.openElements.push(n,t.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,null)}_insertFakeRootElement(){const t=this.treeAdapter.createElement(Re.HTML,Qe.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(t,null),this.treeAdapter.appendChild(this.openElements.current,t),this.openElements.push(t,M.HTML)}_appendCommentNode(t,n){const r=this.treeAdapter.createCommentNode(t.data);this.treeAdapter.appendChild(n,r),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,t.location)}_insertCharacters(t){let n,r;if(this._shouldFosterParentOnInsertion()?({parent:n,beforeElement:r}=this._findFosterParentingLocation(),r?this.treeAdapter.insertTextBefore(n,t.chars,r):this.treeAdapter.insertText(n,t.chars)):(n=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(n,t.chars)),!t.location)return;const i=this.treeAdapter.getChildNodes(n),s=r?i.lastIndexOf(r):i.length,o=i[s-1];if(this.treeAdapter.getNodeSourceCodeLocation(o)){const{endLine:l,endCol:u,endOffset:c}=t.location;this.treeAdapter.updateNodeSourceCodeLocation(o,{endLine:l,endCol:u,endOffset:c})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(o,t.location)}_adoptNodes(t,n){for(let r=this.treeAdapter.getFirstChild(t);r;r=this.treeAdapter.getFirstChild(t))this.treeAdapter.detachNode(r),this.treeAdapter.appendChild(n,r)}_setEndLocation(t,n){if(this.treeAdapter.getNodeSourceCodeLocation(t)&&n.location){const r=n.location,i=this.treeAdapter.getTagName(t),s=n.type===Cn.END_TAG&&i===n.tagName?{endTag:{...r},endLine:r.endLine,endCol:r.endCol,endOffset:r.endOffset}:{endLine:r.startLine,endCol:r.startCol,endOffset:r.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(t,s)}}shouldProcessStartTagTokenInForeignContent(t){if(!this.currentNotInHTML)return!1;let n,r;return this.openElements.stackTop===0&&this.fragmentContext?(n=this.fragmentContext,r=this.fragmentContextID):{current:n,currentTagId:r}=this.openElements,t.tagID===M.SVG&&this.treeAdapter.getTagName(n)===Re.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(n)===Qe.MATHML?!1:this.tokenizer.inForeignNode||(t.tagID===M.MGLYPH||t.tagID===M.MALIGNMARK)&&!this._isIntegrationPoint(r,n,Qe.HTML)}_processToken(t){switch(t.type){case Cn.CHARACTER:{this.onCharacter(t);break}case Cn.NULL_CHARACTER:{this.onNullCharacter(t);break}case Cn.COMMENT:{this.onComment(t);break}case Cn.DOCTYPE:{this.onDoctype(t);break}case Cn.START_TAG:{this._processStartTag(t);break}case Cn.END_TAG:{this.onEndTag(t);break}case Cn.EOF:{this.onEof(t);break}case Cn.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(t);break}}}_isIntegrationPoint(t,n,r){const i=this.treeAdapter.getNamespaceURI(n),s=this.treeAdapter.getAttrList(n);return AVe(t,i,s,r)}_reconstructActiveFormattingElements(){const t=this.activeFormattingElements.entries.length;if(t){const n=this.activeFormattingElements.entries.findIndex(i=>i.type===Cc.Marker||this.openElements.contains(i.element)),r=n<0?t-1:n-1;for(let i=r;i>=0;i--){const s=this.activeFormattingElements.entries[i];this._insertElement(s.token,this.treeAdapter.getNamespaceURI(s.element)),s.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=pe.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(M.P),this.openElements.popUntilTagNamePopped(M.P)}_resetInsertionMode(){for(let t=this.openElements.stackTop;t>=0;t--)switch(t===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[t]){case M.TR:{this.insertionMode=pe.IN_ROW;return}case M.TBODY:case M.THEAD:case M.TFOOT:{this.insertionMode=pe.IN_TABLE_BODY;return}case M.CAPTION:{this.insertionMode=pe.IN_CAPTION;return}case M.COLGROUP:{this.insertionMode=pe.IN_COLUMN_GROUP;return}case M.TABLE:{this.insertionMode=pe.IN_TABLE;return}case M.BODY:{this.insertionMode=pe.IN_BODY;return}case M.FRAMESET:{this.insertionMode=pe.IN_FRAMESET;return}case M.SELECT:{this._resetInsertionModeForSelect(t);return}case M.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case M.HTML:{this.insertionMode=this.headElement?pe.AFTER_HEAD:pe.BEFORE_HEAD;return}case M.TD:case M.TH:{if(t>0){this.insertionMode=pe.IN_CELL;return}break}case M.HEAD:{if(t>0){this.insertionMode=pe.IN_HEAD;return}break}}this.insertionMode=pe.IN_BODY}_resetInsertionModeForSelect(t){if(t>0)for(let n=t-1;n>0;n--){const r=this.openElements.tagIDs[n];if(r===M.TEMPLATE)break;if(r===M.TABLE){this.insertionMode=pe.IN_SELECT_IN_TABLE;return}}this.insertionMode=pe.IN_SELECT}_isElementCausesFosterParenting(t){return Nye.has(t)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let t=this.openElements.stackTop;t>=0;t--){const n=this.openElements.items[t];switch(this.openElements.tagIDs[t]){case M.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(n)===Qe.HTML)return{parent:this.treeAdapter.getTemplateContent(n),beforeElement:null};break}case M.TABLE:{const r=this.treeAdapter.getParentNode(n);return r?{parent:r,beforeElement:n}:{parent:this.openElements.items[t-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(t){const n=this._findFosterParentingLocation();n.beforeElement?this.treeAdapter.insertBefore(n.parent,t,n.beforeElement):this.treeAdapter.appendChild(n.parent,t)}_isSpecialElement(t,n){const r=this.treeAdapter.getNamespaceURI(t);return QWe[r].has(n)}onCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){aYe(this,t);return}switch(this.insertionMode){case pe.INITIAL:{l_(this,t);break}case pe.BEFORE_HTML:{L2(this,t);break}case pe.BEFORE_HEAD:{F2(this,t);break}case pe.IN_HEAD:{j2(this,t);break}case pe.IN_HEAD_NO_SCRIPT:{B2(this,t);break}case pe.AFTER_HEAD:{z2(this,t);break}case pe.IN_BODY:case pe.IN_CAPTION:case pe.IN_CELL:case pe.IN_TEMPLATE:{$ye(this,t);break}case pe.TEXT:case pe.IN_SELECT:case pe.IN_SELECT_IN_TABLE:{this._insertCharacters(t);break}case pe.IN_TABLE:case pe.IN_TABLE_BODY:case pe.IN_ROW:{yM(this,t);break}case pe.IN_TABLE_TEXT:{zye(this,t);break}case pe.IN_COLUMN_GROUP:{CD(this,t);break}case pe.AFTER_BODY:{SD(this,t);break}case pe.AFTER_AFTER_BODY:{MR(this,t);break}}}onNullCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){oYe(this,t);return}switch(this.insertionMode){case pe.INITIAL:{l_(this,t);break}case pe.BEFORE_HTML:{L2(this,t);break}case pe.BEFORE_HEAD:{F2(this,t);break}case pe.IN_HEAD:{j2(this,t);break}case pe.IN_HEAD_NO_SCRIPT:{B2(this,t);break}case pe.AFTER_HEAD:{z2(this,t);break}case pe.TEXT:{this._insertCharacters(t);break}case pe.IN_TABLE:case pe.IN_TABLE_BODY:case pe.IN_ROW:{yM(this,t);break}case pe.IN_COLUMN_GROUP:{CD(this,t);break}case pe.AFTER_BODY:{SD(this,t);break}case pe.AFTER_AFTER_BODY:{MR(this,t);break}}}onComment(t){if(this.skipNextNewLine=!1,this.currentNotInHTML){sj(this,t);return}switch(this.insertionMode){case pe.INITIAL:case pe.BEFORE_HTML:case pe.BEFORE_HEAD:case pe.IN_HEAD:case pe.IN_HEAD_NO_SCRIPT:case pe.AFTER_HEAD:case pe.IN_BODY:case pe.IN_TABLE:case pe.IN_CAPTION:case pe.IN_COLUMN_GROUP:case pe.IN_TABLE_BODY:case pe.IN_ROW:case pe.IN_CELL:case pe.IN_SELECT:case pe.IN_SELECT_IN_TABLE:case pe.IN_TEMPLATE:case pe.IN_FRAMESET:case pe.AFTER_FRAMESET:{sj(this,t);break}case pe.IN_TABLE_TEXT:{u_(this,t);break}case pe.AFTER_BODY:{FVe(this,t);break}case pe.AFTER_AFTER_BODY:case pe.AFTER_AFTER_FRAMESET:{jVe(this,t);break}}}onDoctype(t){switch(this.skipNextNewLine=!1,this.insertionMode){case pe.INITIAL:{BVe(this,t);break}case pe.BEFORE_HEAD:case pe.IN_HEAD:case pe.IN_HEAD_NO_SCRIPT:case pe.AFTER_HEAD:{this._err(t,ze.misplacedDoctype);break}case pe.IN_TABLE_TEXT:{u_(this,t);break}}}onStartTag(t){this.skipNextNewLine=!1,this.currentToken=t,this._processStartTag(t),t.selfClosing&&!t.ackSelfClosing&&this._err(t,ze.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(t){this.shouldProcessStartTagTokenInForeignContent(t)?lYe(this,t):this._startTagOutsideForeignContent(t)}_startTagOutsideForeignContent(t){switch(this.insertionMode){case pe.INITIAL:{l_(this,t);break}case pe.BEFORE_HTML:{zVe(this,t);break}case pe.BEFORE_HEAD:{qVe(this,t);break}case pe.IN_HEAD:{dd(this,t);break}case pe.IN_HEAD_NO_SCRIPT:{VVe(this,t);break}case pe.AFTER_HEAD:{YVe(this,t);break}case pe.IN_BODY:{ea(this,t);break}case pe.IN_TABLE:{Cw(this,t);break}case pe.IN_TABLE_TEXT:{u_(this,t);break}case pe.IN_CAPTION:{HGe(this,t);break}case pe.IN_COLUMN_GROUP:{PH(this,t);break}case pe.IN_TABLE_BODY:{FO(this,t);break}case pe.IN_ROW:{jO(this,t);break}case pe.IN_CELL:{GGe(this,t);break}case pe.IN_SELECT:{Hye(this,t);break}case pe.IN_SELECT_IN_TABLE:{KGe(this,t);break}case pe.IN_TEMPLATE:{QGe(this,t);break}case pe.AFTER_BODY:{ZGe(this,t);break}case pe.IN_FRAMESET:{eYe(this,t);break}case pe.AFTER_FRAMESET:{nYe(this,t);break}case pe.AFTER_AFTER_BODY:{iYe(this,t);break}case pe.AFTER_AFTER_FRAMESET:{sYe(this,t);break}}}onEndTag(t){this.skipNextNewLine=!1,this.currentToken=t,this.currentNotInHTML?uYe(this,t):this._endTagOutsideForeignContent(t)}_endTagOutsideForeignContent(t){switch(this.insertionMode){case pe.INITIAL:{l_(this,t);break}case pe.BEFORE_HTML:{UVe(this,t);break}case pe.BEFORE_HEAD:{HVe(this,t);break}case pe.IN_HEAD:{WVe(this,t);break}case pe.IN_HEAD_NO_SCRIPT:{GVe(this,t);break}case pe.AFTER_HEAD:{KVe(this,t);break}case pe.IN_BODY:{LO(this,t);break}case pe.TEXT:{OGe(this,t);break}case pe.IN_TABLE:{kT(this,t);break}case pe.IN_TABLE_TEXT:{u_(this,t);break}case pe.IN_CAPTION:{WGe(this,t);break}case pe.IN_COLUMN_GROUP:{VGe(this,t);break}case pe.IN_TABLE_BODY:{oj(this,t);break}case pe.IN_ROW:{qye(this,t);break}case pe.IN_CELL:{YGe(this,t);break}case pe.IN_SELECT:{Wye(this,t);break}case pe.IN_SELECT_IN_TABLE:{XGe(this,t);break}case pe.IN_TEMPLATE:{JGe(this,t);break}case pe.AFTER_BODY:{Gye(this,t);break}case pe.IN_FRAMESET:{tYe(this,t);break}case pe.AFTER_FRAMESET:{rYe(this,t);break}case pe.AFTER_AFTER_BODY:{MR(this,t);break}}}onEof(t){switch(this.insertionMode){case pe.INITIAL:{l_(this,t);break}case pe.BEFORE_HTML:{L2(this,t);break}case pe.BEFORE_HEAD:{F2(this,t);break}case pe.IN_HEAD:{j2(this,t);break}case pe.IN_HEAD_NO_SCRIPT:{B2(this,t);break}case pe.AFTER_HEAD:{z2(this,t);break}case pe.IN_BODY:case pe.IN_TABLE:case pe.IN_CAPTION:case pe.IN_COLUMN_GROUP:case pe.IN_TABLE_BODY:case pe.IN_ROW:case pe.IN_CELL:case pe.IN_SELECT:case pe.IN_SELECT_IN_TABLE:{jye(this,t);break}case pe.TEXT:{$Ge(this,t);break}case pe.IN_TABLE_TEXT:{u_(this,t);break}case pe.IN_TEMPLATE:{Vye(this,t);break}case pe.AFTER_BODY:case pe.IN_FRAMESET:case pe.AFTER_FRAMESET:case pe.AFTER_AFTER_BODY:case pe.AFTER_AFTER_FRAMESET:{DH(this,t);break}}}onWhitespaceCharacter(t){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,t.chars.charCodeAt(0)===se.LINE_FEED)){if(t.chars.length===1)return;t.chars=t.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(t);return}switch(this.insertionMode){case pe.IN_HEAD:case pe.IN_HEAD_NO_SCRIPT:case pe.AFTER_HEAD:case pe.TEXT:case pe.IN_COLUMN_GROUP:case pe.IN_SELECT:case pe.IN_SELECT_IN_TABLE:case pe.IN_FRAMESET:case pe.AFTER_FRAMESET:{this._insertCharacters(t);break}case pe.IN_BODY:case pe.IN_CAPTION:case pe.IN_CELL:case pe.IN_TEMPLATE:case pe.AFTER_BODY:case pe.AFTER_AFTER_BODY:case pe.AFTER_AFTER_FRAMESET:{Oye(this,t);break}case pe.IN_TABLE:case pe.IN_TABLE_BODY:case pe.IN_ROW:{yM(this,t);break}case pe.IN_TABLE_TEXT:{Bye(this,t);break}}}};function PVe(e,t){let n=e.activeFormattingElements.getElementEntryInScopeWithTagName(t.tagName);return n?e.openElements.contains(n.element)?e.openElements.hasInScope(t.tagID)||(n=null):(e.activeFormattingElements.removeEntry(n),n=null):Fye(e,t),n}function NVe(e,t){let n=null,r=e.openElements.stackTop;for(;r>=0;r--){const i=e.openElements.items[r];if(i===t.element)break;e._isSpecialElement(i,e.openElements.tagIDs[r])&&(n=i)}return n||(e.openElements.shortenToLength(r<0?0:r),e.activeFormattingElements.removeEntry(t)),n}function OVe(e,t,n){let r=t,i=e.openElements.getCommonAncestor(t);for(let s=0,o=i;o!==n;s++,o=i){i=e.openElements.getCommonAncestor(o);const a=e.activeFormattingElements.getElementEntry(o),l=a&&s>=RVe;!a||l?(l&&e.activeFormattingElements.removeEntry(a),e.openElements.remove(o)):(o=$Ve(e,a),r===t&&(e.activeFormattingElements.bookmark=a),e.treeAdapter.detachNode(r),e.treeAdapter.appendChild(o,r),r=o)}return r}function $Ve(e,t){const n=e.treeAdapter.getNamespaceURI(t.element),r=e.treeAdapter.createElement(t.token.tagName,n,t.token.attrs);return e.openElements.replace(t.element,r),t.element=r,r}function MVe(e,t,n){const r=e.treeAdapter.getTagName(t),i=Bx(r);if(e._isElementCausesFosterParenting(i))e._fosterParentElement(n);else{const s=e.treeAdapter.getNamespaceURI(t);i===M.TEMPLATE&&s===Qe.HTML&&(t=e.treeAdapter.getTemplateContent(t)),e.treeAdapter.appendChild(t,n)}}function LVe(e,t,n){const r=e.treeAdapter.getNamespaceURI(n.element),{token:i}=n,s=e.treeAdapter.createElement(i.tagName,r,i.attrs);e._adoptNodes(t,s),e.treeAdapter.appendChild(t,s),e.activeFormattingElements.insertElementAfterBookmark(s,i),e.activeFormattingElements.removeEntry(n),e.openElements.remove(n.element),e.openElements.insertAfter(t,s,i.tagID)}function RH(e,t){for(let n=0;n<IVe;n++){const r=PVe(e,t);if(!r)break;const i=NVe(e,r);if(!i)break;e.activeFormattingElements.bookmark=r;const s=OVe(e,i,r.element),o=e.openElements.getCommonAncestor(r.element);e.treeAdapter.detachNode(s),o&&MVe(e,o,s),LVe(e,i,r)}}function sj(e,t){e._appendCommentNode(t,e.openElements.currentTmplContentOrNode)}function FVe(e,t){e._appendCommentNode(t,e.openElements.items[0])}function jVe(e,t){e._appendCommentNode(t,e.document)}function DH(e,t){if(e.stopped=!0,t.location){const n=e.fragmentContext?0:2;for(let r=e.openElements.stackTop;r>=n;r--)e._setEndLocation(e.openElements.items[r],t);if(!e.fragmentContext&&e.openElements.stackTop>=0){const r=e.openElements.items[0],i=e.treeAdapter.getNodeSourceCodeLocation(r);if(i&&!i.endTag&&(e._setEndLocation(r,t),e.openElements.stackTop>=1)){const s=e.openElements.items[1],o=e.treeAdapter.getNodeSourceCodeLocation(s);o&&!o.endTag&&e._setEndLocation(s,t)}}}}function BVe(e,t){e._setDocumentType(t);const n=t.forceQuirks?$l.QUIRKS:gVe(t);mVe(t)||e._err(t,ze.nonConformingDoctype),e.treeAdapter.setDocumentMode(e.document,n),e.insertionMode=pe.BEFORE_HTML}function l_(e,t){e._err(t,ze.missingDoctype,!0),e.treeAdapter.setDocumentMode(e.document,$l.QUIRKS),e.insertionMode=pe.BEFORE_HTML,e._processToken(t)}function zVe(e,t){t.tagID===M.HTML?(e._insertElement(t,Qe.HTML),e.insertionMode=pe.BEFORE_HEAD):L2(e,t)}function UVe(e,t){const n=t.tagID;(n===M.HTML||n===M.HEAD||n===M.BODY||n===M.BR)&&L2(e,t)}function L2(e,t){e._insertFakeRootElement(),e.insertionMode=pe.BEFORE_HEAD,e._processToken(t)}function qVe(e,t){switch(t.tagID){case M.HTML:{ea(e,t);break}case M.HEAD:{e._insertElement(t,Qe.HTML),e.headElement=e.openElements.current,e.insertionMode=pe.IN_HEAD;break}default:F2(e,t)}}function HVe(e,t){const n=t.tagID;n===M.HEAD||n===M.BODY||n===M.HTML||n===M.BR?F2(e,t):e._err(t,ze.endTagWithoutMatchingOpenElement)}function F2(e,t){e._insertFakeElement(Re.HEAD,M.HEAD),e.headElement=e.openElements.current,e.insertionMode=pe.IN_HEAD,e._processToken(t)}function dd(e,t){switch(t.tagID){case M.HTML:{ea(e,t);break}case M.BASE:case M.BASEFONT:case M.BGSOUND:case M.LINK:case M.META:{e._appendElement(t,Qe.HTML),t.ackSelfClosing=!0;break}case M.TITLE:{e._switchToTextParsing(t,Ni.RCDATA);break}case M.NOSCRIPT:{e.options.scriptingEnabled?e._switchToTextParsing(t,Ni.RAWTEXT):(e._insertElement(t,Qe.HTML),e.insertionMode=pe.IN_HEAD_NO_SCRIPT);break}case M.NOFRAMES:case M.STYLE:{e._switchToTextParsing(t,Ni.RAWTEXT);break}case M.SCRIPT:{e._switchToTextParsing(t,Ni.SCRIPT_DATA);break}case M.TEMPLATE:{e._insertTemplate(t),e.activeFormattingElements.insertMarker(),e.framesetOk=!1,e.insertionMode=pe.IN_TEMPLATE,e.tmplInsertionModeStack.unshift(pe.IN_TEMPLATE);break}case M.HEAD:{e._err(t,ze.misplacedStartTagForHeadElement);break}default:j2(e,t)}}function WVe(e,t){switch(t.tagID){case M.HEAD:{e.openElements.pop(),e.insertionMode=pe.AFTER_HEAD;break}case M.BODY:case M.BR:case M.HTML:{j2(e,t);break}case M.TEMPLATE:{$v(e,t);break}default:e._err(t,ze.endTagWithoutMatchingOpenElement)}}function $v(e,t){e.openElements.tmplCount>0?(e.openElements.generateImpliedEndTagsThoroughly(),e.openElements.currentTagId!==M.TEMPLATE&&e._err(t,ze.closingOfElementWithOpenChildElements),e.openElements.popUntilTagNamePopped(M.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode()):e._err(t,ze.endTagWithoutMatchingOpenElement)}function j2(e,t){e.openElements.pop(),e.insertionMode=pe.AFTER_HEAD,e._processToken(t)}function VVe(e,t){switch(t.tagID){case M.HTML:{ea(e,t);break}case M.BASEFONT:case M.BGSOUND:case M.HEAD:case M.LINK:case M.META:case M.NOFRAMES:case M.STYLE:{dd(e,t);break}case M.NOSCRIPT:{e._err(t,ze.nestedNoscriptInHead);break}default:B2(e,t)}}function GVe(e,t){switch(t.tagID){case M.NOSCRIPT:{e.openElements.pop(),e.insertionMode=pe.IN_HEAD;break}case M.BR:{B2(e,t);break}default:e._err(t,ze.endTagWithoutMatchingOpenElement)}}function B2(e,t){const n=t.type===Cn.EOF?ze.openElementsLeftAfterEof:ze.disallowedContentInNoscriptInHead;e._err(t,n),e.openElements.pop(),e.insertionMode=pe.IN_HEAD,e._processToken(t)}function YVe(e,t){switch(t.tagID){case M.HTML:{ea(e,t);break}case M.BODY:{e._insertElement(t,Qe.HTML),e.framesetOk=!1,e.insertionMode=pe.IN_BODY;break}case M.FRAMESET:{e._insertElement(t,Qe.HTML),e.insertionMode=pe.IN_FRAMESET;break}case M.BASE:case M.BASEFONT:case M.BGSOUND:case M.LINK:case M.META:case M.NOFRAMES:case M.SCRIPT:case M.STYLE:case M.TEMPLATE:case M.TITLE:{e._err(t,ze.abandonedHeadElementChild),e.openElements.push(e.headElement,M.HEAD),dd(e,t),e.openElements.remove(e.headElement);break}case M.HEAD:{e._err(t,ze.misplacedStartTagForHeadElement);break}default:z2(e,t)}}function KVe(e,t){switch(t.tagID){case M.BODY:case M.HTML:case M.BR:{z2(e,t);break}case M.TEMPLATE:{$v(e,t);break}default:e._err(t,ze.endTagWithoutMatchingOpenElement)}}function z2(e,t){e._insertFakeElement(Re.BODY,M.BODY),e.insertionMode=pe.IN_BODY,MO(e,t)}function MO(e,t){switch(t.type){case Cn.CHARACTER:{$ye(e,t);break}case Cn.WHITESPACE_CHARACTER:{Oye(e,t);break}case Cn.COMMENT:{sj(e,t);break}case Cn.START_TAG:{ea(e,t);break}case Cn.END_TAG:{LO(e,t);break}case Cn.EOF:{jye(e,t);break}}}function Oye(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t)}function $ye(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t),e.framesetOk=!1}function XVe(e,t){e.openElements.tmplCount===0&&e.treeAdapter.adoptAttributes(e.openElements.items[0],t.attrs)}function QVe(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e.openElements.tmplCount===0&&(e.framesetOk=!1,e.treeAdapter.adoptAttributes(n,t.attrs))}function JVe(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();e.framesetOk&&n&&(e.treeAdapter.detachNode(n),e.openElements.popAllUpToHtmlElement(),e._insertElement(t,Qe.HTML),e.insertionMode=pe.IN_FRAMESET)}function ZVe(e,t){e.openElements.hasInButtonScope(M.P)&&e._closePElement(),e._insertElement(t,Qe.HTML)}function eGe(e,t){e.openElements.hasInButtonScope(M.P)&&e._closePElement(),_ye(e.openElements.currentTagId)&&e.openElements.pop(),e._insertElement(t,Qe.HTML)}function tGe(e,t){e.openElements.hasInButtonScope(M.P)&&e._closePElement(),e._insertElement(t,Qe.HTML),e.skipNextNewLine=!0,e.framesetOk=!1}function nGe(e,t){const n=e.openElements.tmplCount>0;(!e.formElement||n)&&(e.openElements.hasInButtonScope(M.P)&&e._closePElement(),e._insertElement(t,Qe.HTML),n||(e.formElement=e.openElements.current))}function rGe(e,t){e.framesetOk=!1;const n=t.tagID;for(let r=e.openElements.stackTop;r>=0;r--){const i=e.openElements.tagIDs[r];if(n===M.LI&&i===M.LI||(n===M.DD||n===M.DT)&&(i===M.DD||i===M.DT)){e.openElements.generateImpliedEndTagsWithExclusion(i),e.openElements.popUntilTagNamePopped(i);break}if(i!==M.ADDRESS&&i!==M.DIV&&i!==M.P&&e._isSpecialElement(e.openElements.items[r],i))break}e.openElements.hasInButtonScope(M.P)&&e._closePElement(),e._insertElement(t,Qe.HTML)}function iGe(e,t){e.openElements.hasInButtonScope(M.P)&&e._closePElement(),e._insertElement(t,Qe.HTML),e.tokenizer.state=Ni.PLAINTEXT}function sGe(e,t){e.openElements.hasInScope(M.BUTTON)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(M.BUTTON)),e._reconstructActiveFormattingElements(),e._insertElement(t,Qe.HTML),e.framesetOk=!1}function oGe(e,t){const n=e.activeFormattingElements.getElementEntryInScopeWithTagName(Re.A);n&&(RH(e,t),e.openElements.remove(n.element),e.activeFormattingElements.removeEntry(n)),e._reconstructActiveFormattingElements(),e._insertElement(t,Qe.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function aGe(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Qe.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function lGe(e,t){e._reconstructActiveFormattingElements(),e.openElements.hasInScope(M.NOBR)&&(RH(e,t),e._reconstructActiveFormattingElements()),e._insertElement(t,Qe.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function uGe(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Qe.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1}function cGe(e,t){e.treeAdapter.getDocumentMode(e.document)!==$l.QUIRKS&&e.openElements.hasInButtonScope(M.P)&&e._closePElement(),e._insertElement(t,Qe.HTML),e.framesetOk=!1,e.insertionMode=pe.IN_TABLE}function Mye(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,Qe.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function Lye(e){const t=wye(e,n0.TYPE);return t!=null&&t.toLowerCase()===kVe}function dGe(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,Qe.HTML),Lye(t)||(e.framesetOk=!1),t.ackSelfClosing=!0}function fGe(e,t){e._appendElement(t,Qe.HTML),t.ackSelfClosing=!0}function hGe(e,t){e.openElements.hasInButtonScope(M.P)&&e._closePElement(),e._appendElement(t,Qe.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function pGe(e,t){t.tagName=Re.IMG,t.tagID=M.IMG,Mye(e,t)}function mGe(e,t){e._insertElement(t,Qe.HTML),e.skipNextNewLine=!0,e.tokenizer.state=Ni.RCDATA,e.originalInsertionMode=e.insertionMode,e.framesetOk=!1,e.insertionMode=pe.TEXT}function gGe(e,t){e.openElements.hasInButtonScope(M.P)&&e._closePElement(),e._reconstructActiveFormattingElements(),e.framesetOk=!1,e._switchToTextParsing(t,Ni.RAWTEXT)}function yGe(e,t){e.framesetOk=!1,e._switchToTextParsing(t,Ni.RAWTEXT)}function jne(e,t){e._switchToTextParsing(t,Ni.RAWTEXT)}function vGe(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Qe.HTML),e.framesetOk=!1,e.insertionMode=e.insertionMode===pe.IN_TABLE||e.insertionMode===pe.IN_CAPTION||e.insertionMode===pe.IN_TABLE_BODY||e.insertionMode===pe.IN_ROW||e.insertionMode===pe.IN_CELL?pe.IN_SELECT_IN_TABLE:pe.IN_SELECT}function bGe(e,t){e.openElements.currentTagId===M.OPTION&&e.openElements.pop(),e._reconstructActiveFormattingElements(),e._insertElement(t,Qe.HTML)}function wGe(e,t){e.openElements.hasInScope(M.RUBY)&&e.openElements.generateImpliedEndTags(),e._insertElement(t,Qe.HTML)}function xGe(e,t){e.openElements.hasInScope(M.RUBY)&&e.openElements.generateImpliedEndTagsWithExclusion(M.RTC),e._insertElement(t,Qe.HTML)}function EGe(e,t){e._reconstructActiveFormattingElements(),Dye(t),IH(t),t.selfClosing?e._appendElement(t,Qe.MATHML):e._insertElement(t,Qe.MATHML),t.ackSelfClosing=!0}function _Ge(e,t){e._reconstructActiveFormattingElements(),Pye(t),IH(t),t.selfClosing?e._appendElement(t,Qe.SVG):e._insertElement(t,Qe.SVG),t.ackSelfClosing=!0}function Bne(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Qe.HTML)}function ea(e,t){switch(t.tagID){case M.I:case M.S:case M.B:case M.U:case M.EM:case M.TT:case M.BIG:case M.CODE:case M.FONT:case M.SMALL:case M.STRIKE:case M.STRONG:{aGe(e,t);break}case M.A:{oGe(e,t);break}case M.H1:case M.H2:case M.H3:case M.H4:case M.H5:case M.H6:{eGe(e,t);break}case M.P:case M.DL:case M.OL:case M.UL:case M.DIV:case M.DIR:case M.NAV:case M.MAIN:case M.MENU:case M.ASIDE:case M.CENTER:case M.FIGURE:case M.FOOTER:case M.HEADER:case M.HGROUP:case M.DIALOG:case M.DETAILS:case M.ADDRESS:case M.ARTICLE:case M.SECTION:case M.SUMMARY:case M.FIELDSET:case M.BLOCKQUOTE:case M.FIGCAPTION:{ZVe(e,t);break}case M.LI:case M.DD:case M.DT:{rGe(e,t);break}case M.BR:case M.IMG:case M.WBR:case M.AREA:case M.EMBED:case M.KEYGEN:{Mye(e,t);break}case M.HR:{hGe(e,t);break}case M.RB:case M.RTC:{wGe(e,t);break}case M.RT:case M.RP:{xGe(e,t);break}case M.PRE:case M.LISTING:{tGe(e,t);break}case M.XMP:{gGe(e,t);break}case M.SVG:{_Ge(e,t);break}case M.HTML:{XVe(e,t);break}case M.BASE:case M.LINK:case M.META:case M.STYLE:case M.TITLE:case M.SCRIPT:case M.BGSOUND:case M.BASEFONT:case M.TEMPLATE:{dd(e,t);break}case M.BODY:{QVe(e,t);break}case M.FORM:{nGe(e,t);break}case M.NOBR:{lGe(e,t);break}case M.MATH:{EGe(e,t);break}case M.TABLE:{cGe(e,t);break}case M.INPUT:{dGe(e,t);break}case M.PARAM:case M.TRACK:case M.SOURCE:{fGe(e,t);break}case M.IMAGE:{pGe(e,t);break}case M.BUTTON:{sGe(e,t);break}case M.APPLET:case M.OBJECT:case M.MARQUEE:{uGe(e,t);break}case M.IFRAME:{yGe(e,t);break}case M.SELECT:{vGe(e,t);break}case M.OPTION:case M.OPTGROUP:{bGe(e,t);break}case M.NOEMBED:{jne(e,t);break}case M.FRAMESET:{JVe(e,t);break}case M.TEXTAREA:{mGe(e,t);break}case M.NOSCRIPT:{e.options.scriptingEnabled?jne(e,t):Bne(e,t);break}case M.PLAINTEXT:{iGe(e,t);break}case M.COL:case M.TH:case M.TD:case M.TR:case M.HEAD:case M.FRAME:case M.TBODY:case M.TFOOT:case M.THEAD:case M.CAPTION:case M.COLGROUP:break;default:Bne(e,t)}}function TGe(e,t){if(e.openElements.hasInScope(M.BODY)&&(e.insertionMode=pe.AFTER_BODY,e.options.sourceCodeLocationInfo)){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e._setEndLocation(n,t)}}function CGe(e,t){e.openElements.hasInScope(M.BODY)&&(e.insertionMode=pe.AFTER_BODY,Gye(e,t))}function SGe(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n))}function AGe(e){const t=e.openElements.tmplCount>0,{formElement:n}=e;t||(e.formElement=null),(n||t)&&e.openElements.hasInScope(M.FORM)&&(e.openElements.generateImpliedEndTags(),t?e.openElements.popUntilTagNamePopped(M.FORM):n&&e.openElements.remove(n))}function kGe(e){e.openElements.hasInButtonScope(M.P)||e._insertFakeElement(Re.P,M.P),e._closePElement()}function IGe(e){e.openElements.hasInListItemScope(M.LI)&&(e.openElements.generateImpliedEndTagsWithExclusion(M.LI),e.openElements.popUntilTagNamePopped(M.LI))}function RGe(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.popUntilTagNamePopped(n))}function DGe(e){e.openElements.hasNumberedHeaderInScope()&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilNumberedHeaderPopped())}function PGe(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker())}function NGe(e){e._reconstructActiveFormattingElements(),e._insertFakeElement(Re.BR,M.BR),e.openElements.pop(),e.framesetOk=!1}function Fye(e,t){const n=t.tagName,r=t.tagID;for(let i=e.openElements.stackTop;i>0;i--){const s=e.openElements.items[i],o=e.openElements.tagIDs[i];if(r===o&&(r!==M.UNKNOWN||e.treeAdapter.getTagName(s)===n)){e.openElements.generateImpliedEndTagsWithExclusion(r),e.openElements.stackTop>=i&&e.openElements.shortenToLength(i);break}if(e._isSpecialElement(s,o))break}}function LO(e,t){switch(t.tagID){case M.A:case M.B:case M.I:case M.S:case M.U:case M.EM:case M.TT:case M.BIG:case M.CODE:case M.FONT:case M.NOBR:case M.SMALL:case M.STRIKE:case M.STRONG:{RH(e,t);break}case M.P:{kGe(e);break}case M.DL:case M.UL:case M.OL:case M.DIR:case M.DIV:case M.NAV:case M.PRE:case M.MAIN:case M.MENU:case M.ASIDE:case M.BUTTON:case M.CENTER:case M.FIGURE:case M.FOOTER:case M.HEADER:case M.HGROUP:case M.DIALOG:case M.ADDRESS:case M.ARTICLE:case M.DETAILS:case M.SECTION:case M.SUMMARY:case M.LISTING:case M.FIELDSET:case M.BLOCKQUOTE:case M.FIGCAPTION:{SGe(e,t);break}case M.LI:{IGe(e);break}case M.DD:case M.DT:{RGe(e,t);break}case M.H1:case M.H2:case M.H3:case M.H4:case M.H5:case M.H6:{DGe(e);break}case M.BR:{NGe(e);break}case M.BODY:{TGe(e,t);break}case M.HTML:{CGe(e,t);break}case M.FORM:{AGe(e);break}case M.APPLET:case M.OBJECT:case M.MARQUEE:{PGe(e,t);break}case M.TEMPLATE:{$v(e,t);break}default:Fye(e,t)}}function jye(e,t){e.tmplInsertionModeStack.length>0?Vye(e,t):DH(e,t)}function OGe(e,t){var n;t.tagID===M.SCRIPT&&((n=e.scriptHandler)===null||n===void 0||n.call(e,e.openElements.current)),e.openElements.pop(),e.insertionMode=e.originalInsertionMode}function $Ge(e,t){e._err(t,ze.eofInElementThatCanContainOnlyText),e.openElements.pop(),e.insertionMode=e.originalInsertionMode,e.onEof(t)}function yM(e,t){if(Nye.has(e.openElements.currentTagId))switch(e.pendingCharacterTokens.length=0,e.hasNonWhitespacePendingCharacterToken=!1,e.originalInsertionMode=e.insertionMode,e.insertionMode=pe.IN_TABLE_TEXT,t.type){case Cn.CHARACTER:{zye(e,t);break}case Cn.WHITESPACE_CHARACTER:{Bye(e,t);break}}else VC(e,t)}function MGe(e,t){e.openElements.clearBackToTableContext(),e.activeFormattingElements.insertMarker(),e._insertElement(t,Qe.HTML),e.insertionMode=pe.IN_CAPTION}function LGe(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,Qe.HTML),e.insertionMode=pe.IN_COLUMN_GROUP}function FGe(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(Re.COLGROUP,M.COLGROUP),e.insertionMode=pe.IN_COLUMN_GROUP,PH(e,t)}function jGe(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,Qe.HTML),e.insertionMode=pe.IN_TABLE_BODY}function BGe(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(Re.TBODY,M.TBODY),e.insertionMode=pe.IN_TABLE_BODY,FO(e,t)}function zGe(e,t){e.openElements.hasInTableScope(M.TABLE)&&(e.openElements.popUntilTagNamePopped(M.TABLE),e._resetInsertionMode(),e._processStartTag(t))}function UGe(e,t){Lye(t)?e._appendElement(t,Qe.HTML):VC(e,t),t.ackSelfClosing=!0}function qGe(e,t){!e.formElement&&e.openElements.tmplCount===0&&(e._insertElement(t,Qe.HTML),e.formElement=e.openElements.current,e.openElements.pop())}function Cw(e,t){switch(t.tagID){case M.TD:case M.TH:case M.TR:{BGe(e,t);break}case M.STYLE:case M.SCRIPT:case M.TEMPLATE:{dd(e,t);break}case M.COL:{FGe(e,t);break}case M.FORM:{qGe(e,t);break}case M.TABLE:{zGe(e,t);break}case M.TBODY:case M.TFOOT:case M.THEAD:{jGe(e,t);break}case M.INPUT:{UGe(e,t);break}case M.CAPTION:{MGe(e,t);break}case M.COLGROUP:{LGe(e,t);break}default:VC(e,t)}}function kT(e,t){switch(t.tagID){case M.TABLE:{e.openElements.hasInTableScope(M.TABLE)&&(e.openElements.popUntilTagNamePopped(M.TABLE),e._resetInsertionMode());break}case M.TEMPLATE:{$v(e,t);break}case M.BODY:case M.CAPTION:case M.COL:case M.COLGROUP:case M.HTML:case M.TBODY:case M.TD:case M.TFOOT:case M.TH:case M.THEAD:case M.TR:break;default:VC(e,t)}}function VC(e,t){const n=e.fosterParentingEnabled;e.fosterParentingEnabled=!0,MO(e,t),e.fosterParentingEnabled=n}function Bye(e,t){e.pendingCharacterTokens.push(t)}function zye(e,t){e.pendingCharacterTokens.push(t),e.hasNonWhitespacePendingCharacterToken=!0}function u_(e,t){let n=0;if(e.hasNonWhitespacePendingCharacterToken)for(;n<e.pendingCharacterTokens.length;n++)VC(e,e.pendingCharacterTokens[n]);else for(;n<e.pendingCharacterTokens.length;n++)e._insertCharacters(e.pendingCharacterTokens[n]);e.insertionMode=e.originalInsertionMode,e._processToken(t)}const Uye=new Set([M.CAPTION,M.COL,M.COLGROUP,M.TBODY,M.TD,M.TFOOT,M.TH,M.THEAD,M.TR]);function HGe(e,t){const n=t.tagID;Uye.has(n)?e.openElements.hasInTableScope(M.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(M.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=pe.IN_TABLE,Cw(e,t)):ea(e,t)}function WGe(e,t){const n=t.tagID;switch(n){case M.CAPTION:case M.TABLE:{e.openElements.hasInTableScope(M.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(M.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=pe.IN_TABLE,n===M.TABLE&&kT(e,t));break}case M.BODY:case M.COL:case M.COLGROUP:case M.HTML:case M.TBODY:case M.TD:case M.TFOOT:case M.TH:case M.THEAD:case M.TR:break;default:LO(e,t)}}function PH(e,t){switch(t.tagID){case M.HTML:{ea(e,t);break}case M.COL:{e._appendElement(t,Qe.HTML),t.ackSelfClosing=!0;break}case M.TEMPLATE:{dd(e,t);break}default:CD(e,t)}}function VGe(e,t){switch(t.tagID){case M.COLGROUP:{e.openElements.currentTagId===M.COLGROUP&&(e.openElements.pop(),e.insertionMode=pe.IN_TABLE);break}case M.TEMPLATE:{$v(e,t);break}case M.COL:break;default:CD(e,t)}}function CD(e,t){e.openElements.currentTagId===M.COLGROUP&&(e.openElements.pop(),e.insertionMode=pe.IN_TABLE,e._processToken(t))}function FO(e,t){switch(t.tagID){case M.TR:{e.openElements.clearBackToTableBodyContext(),e._insertElement(t,Qe.HTML),e.insertionMode=pe.IN_ROW;break}case M.TH:case M.TD:{e.openElements.clearBackToTableBodyContext(),e._insertFakeElement(Re.TR,M.TR),e.insertionMode=pe.IN_ROW,jO(e,t);break}case M.CAPTION:case M.COL:case M.COLGROUP:case M.TBODY:case M.TFOOT:case M.THEAD:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=pe.IN_TABLE,Cw(e,t));break}default:Cw(e,t)}}function oj(e,t){const n=t.tagID;switch(t.tagID){case M.TBODY:case M.TFOOT:case M.THEAD:{e.openElements.hasInTableScope(n)&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=pe.IN_TABLE);break}case M.TABLE:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=pe.IN_TABLE,kT(e,t));break}case M.BODY:case M.CAPTION:case M.COL:case M.COLGROUP:case M.HTML:case M.TD:case M.TH:case M.TR:break;default:kT(e,t)}}function jO(e,t){switch(t.tagID){case M.TH:case M.TD:{e.openElements.clearBackToTableRowContext(),e._insertElement(t,Qe.HTML),e.insertionMode=pe.IN_CELL,e.activeFormattingElements.insertMarker();break}case M.CAPTION:case M.COL:case M.COLGROUP:case M.TBODY:case M.TFOOT:case M.THEAD:case M.TR:{e.openElements.hasInTableScope(M.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=pe.IN_TABLE_BODY,FO(e,t));break}default:Cw(e,t)}}function qye(e,t){switch(t.tagID){case M.TR:{e.openElements.hasInTableScope(M.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=pe.IN_TABLE_BODY);break}case M.TABLE:{e.openElements.hasInTableScope(M.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=pe.IN_TABLE_BODY,oj(e,t));break}case M.TBODY:case M.TFOOT:case M.THEAD:{(e.openElements.hasInTableScope(t.tagID)||e.openElements.hasInTableScope(M.TR))&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=pe.IN_TABLE_BODY,oj(e,t));break}case M.BODY:case M.CAPTION:case M.COL:case M.COLGROUP:case M.HTML:case M.TD:case M.TH:break;default:kT(e,t)}}function GGe(e,t){const n=t.tagID;Uye.has(n)?(e.openElements.hasInTableScope(M.TD)||e.openElements.hasInTableScope(M.TH))&&(e._closeTableCell(),jO(e,t)):ea(e,t)}function YGe(e,t){const n=t.tagID;switch(n){case M.TD:case M.TH:{e.openElements.hasInTableScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=pe.IN_ROW);break}case M.TABLE:case M.TBODY:case M.TFOOT:case M.THEAD:case M.TR:{e.openElements.hasInTableScope(n)&&(e._closeTableCell(),qye(e,t));break}case M.BODY:case M.CAPTION:case M.COL:case M.COLGROUP:case M.HTML:break;default:LO(e,t)}}function Hye(e,t){switch(t.tagID){case M.HTML:{ea(e,t);break}case M.OPTION:{e.openElements.currentTagId===M.OPTION&&e.openElements.pop(),e._insertElement(t,Qe.HTML);break}case M.OPTGROUP:{e.openElements.currentTagId===M.OPTION&&e.openElements.pop(),e.openElements.currentTagId===M.OPTGROUP&&e.openElements.pop(),e._insertElement(t,Qe.HTML);break}case M.INPUT:case M.KEYGEN:case M.TEXTAREA:case M.SELECT:{e.openElements.hasInSelectScope(M.SELECT)&&(e.openElements.popUntilTagNamePopped(M.SELECT),e._resetInsertionMode(),t.tagID!==M.SELECT&&e._processStartTag(t));break}case M.SCRIPT:case M.TEMPLATE:{dd(e,t);break}}}function Wye(e,t){switch(t.tagID){case M.OPTGROUP:{e.openElements.stackTop>0&&e.openElements.currentTagId===M.OPTION&&e.openElements.tagIDs[e.openElements.stackTop-1]===M.OPTGROUP&&e.openElements.pop(),e.openElements.currentTagId===M.OPTGROUP&&e.openElements.pop();break}case M.OPTION:{e.openElements.currentTagId===M.OPTION&&e.openElements.pop();break}case M.SELECT:{e.openElements.hasInSelectScope(M.SELECT)&&(e.openElements.popUntilTagNamePopped(M.SELECT),e._resetInsertionMode());break}case M.TEMPLATE:{$v(e,t);break}}}function KGe(e,t){const n=t.tagID;n===M.CAPTION||n===M.TABLE||n===M.TBODY||n===M.TFOOT||n===M.THEAD||n===M.TR||n===M.TD||n===M.TH?(e.openElements.popUntilTagNamePopped(M.SELECT),e._resetInsertionMode(),e._processStartTag(t)):Hye(e,t)}function XGe(e,t){const n=t.tagID;n===M.CAPTION||n===M.TABLE||n===M.TBODY||n===M.TFOOT||n===M.THEAD||n===M.TR||n===M.TD||n===M.TH?e.openElements.hasInTableScope(n)&&(e.openElements.popUntilTagNamePopped(M.SELECT),e._resetInsertionMode(),e.onEndTag(t)):Wye(e,t)}function QGe(e,t){switch(t.tagID){case M.BASE:case M.BASEFONT:case M.BGSOUND:case M.LINK:case M.META:case M.NOFRAMES:case M.SCRIPT:case M.STYLE:case M.TEMPLATE:case M.TITLE:{dd(e,t);break}case M.CAPTION:case M.COLGROUP:case M.TBODY:case M.TFOOT:case M.THEAD:{e.tmplInsertionModeStack[0]=pe.IN_TABLE,e.insertionMode=pe.IN_TABLE,Cw(e,t);break}case M.COL:{e.tmplInsertionModeStack[0]=pe.IN_COLUMN_GROUP,e.insertionMode=pe.IN_COLUMN_GROUP,PH(e,t);break}case M.TR:{e.tmplInsertionModeStack[0]=pe.IN_TABLE_BODY,e.insertionMode=pe.IN_TABLE_BODY,FO(e,t);break}case M.TD:case M.TH:{e.tmplInsertionModeStack[0]=pe.IN_ROW,e.insertionMode=pe.IN_ROW,jO(e,t);break}default:e.tmplInsertionModeStack[0]=pe.IN_BODY,e.insertionMode=pe.IN_BODY,ea(e,t)}}function JGe(e,t){t.tagID===M.TEMPLATE&&$v(e,t)}function Vye(e,t){e.openElements.tmplCount>0?(e.openElements.popUntilTagNamePopped(M.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode(),e.onEof(t)):DH(e,t)}function ZGe(e,t){t.tagID===M.HTML?ea(e,t):SD(e,t)}function Gye(e,t){var n;if(t.tagID===M.HTML){if(e.fragmentContext||(e.insertionMode=pe.AFTER_AFTER_BODY),e.options.sourceCodeLocationInfo&&e.openElements.tagIDs[0]===M.HTML){e._setEndLocation(e.openElements.items[0],t);const r=e.openElements.items[1];r&&!(!((n=e.treeAdapter.getNodeSourceCodeLocation(r))===null||n===void 0)&&n.endTag)&&e._setEndLocation(r,t)}}else SD(e,t)}function SD(e,t){e.insertionMode=pe.IN_BODY,MO(e,t)}function eYe(e,t){switch(t.tagID){case M.HTML:{ea(e,t);break}case M.FRAMESET:{e._insertElement(t,Qe.HTML);break}case M.FRAME:{e._appendElement(t,Qe.HTML),t.ackSelfClosing=!0;break}case M.NOFRAMES:{dd(e,t);break}}}function tYe(e,t){t.tagID===M.FRAMESET&&!e.openElements.isRootHtmlElementCurrent()&&(e.openElements.pop(),!e.fragmentContext&&e.openElements.currentTagId!==M.FRAMESET&&(e.insertionMode=pe.AFTER_FRAMESET))}function nYe(e,t){switch(t.tagID){case M.HTML:{ea(e,t);break}case M.NOFRAMES:{dd(e,t);break}}}function rYe(e,t){t.tagID===M.HTML&&(e.insertionMode=pe.AFTER_AFTER_FRAMESET)}function iYe(e,t){t.tagID===M.HTML?ea(e,t):MR(e,t)}function MR(e,t){e.insertionMode=pe.IN_BODY,MO(e,t)}function sYe(e,t){switch(t.tagID){case M.HTML:{ea(e,t);break}case M.NOFRAMES:{dd(e,t);break}}}function oYe(e,t){t.chars=ei,e._insertCharacters(t)}function aYe(e,t){e._insertCharacters(t),e.framesetOk=!1}function Yye(e){for(;e.treeAdapter.getNamespaceURI(e.openElements.current)!==Qe.HTML&&!e._isIntegrationPoint(e.openElements.currentTagId,e.openElements.current);)e.openElements.pop()}function lYe(e,t){if(_Ve(t))Yye(e),e._startTagOutsideForeignContent(t);else{const n=e._getAdjustedCurrentElement(),r=e.treeAdapter.getNamespaceURI(n);r===Qe.MATHML?Dye(t):r===Qe.SVG&&(TVe(t),Pye(t)),IH(t),t.selfClosing?e._appendElement(t,r):e._insertElement(t,r),t.ackSelfClosing=!0}}function uYe(e,t){if(t.tagID===M.P||t.tagID===M.BR){Yye(e),e._endTagOutsideForeignContent(t);return}for(let n=e.openElements.stackTop;n>0;n--){const r=e.openElements.items[n];if(e.treeAdapter.getNamespaceURI(r)===Qe.HTML){e._endTagOutsideForeignContent(t);break}const i=e.treeAdapter.getTagName(r);if(i.toLowerCase()===t.tagName){t.tagName=i,e.openElements.shortenToLength(n);break}}}Re.AREA,Re.BASE,Re.BASEFONT,Re.BGSOUND,Re.BR,Re.COL,Re.EMBED,Re.FRAME,Re.HR,Re.IMG,Re.INPUT,Re.KEYGEN,Re.LINK,Re.META,Re.PARAM,Re.SOURCE,Re.TRACK,Re.WBR;const cYe=new Set(["mdxFlowExpression","mdxJsxFlowElement","mdxJsxTextElement","mdxTextExpression","mdxjsEsm"]),zne={sourceCodeLocationInfo:!0,scriptingEnabled:!1};function Kye(e,t){const n=wYe(e),r=mye("type",{handlers:{root:dYe,element:fYe,text:hYe,comment:Qye,doctype:pYe,raw:gYe},unknown:yYe}),i={parser:n?new Fne(zne):Fne.getFragmentParser(void 0,zne),handle(a){r(a,i)},stitches:!1,options:t||{}};r(e,i),zx(i,zf());const s=n?i.parser.document:i.parser.getFragment(),o=EWe(s,{file:i.options.file});return i.stitches&&CH(o,"comment",function(a,l,u){const c=a;if(c.value.stitch&&u&&l!==void 0){const d=u.children;return d[l]=c.value.stitch,l}}),o.type==="root"&&o.children.length===1&&o.children[0].type===e.type?o.children[0]:o}function Xye(e,t){let n=-1;if(e)for(;++n<e.length;)t.handle(e[n])}function dYe(e,t){Xye(e.children,t)}function fYe(e,t){vYe(e,t),Xye(e.children,t),bYe(e,t)}function hYe(e,t){const n={type:Cn.CHARACTER,chars:e.value,location:GC(e)};zx(t,zf(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function pYe(e,t){const n={type:Cn.DOCTYPE,name:"html",forceQuirks:!1,publicId:"",systemId:"",location:GC(e)};zx(t,zf(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function mYe(e,t){t.stitches=!0;const n=xYe(e);if("children"in e&&"children"in n){const r=Kye({type:"root",children:e.children},t.options);n.children=r.children}Qye({type:"comment",value:{stitch:n}},t)}function Qye(e,t){const n=e.value,r={type:Cn.COMMENT,data:n,location:GC(e)};zx(t,zf(e)),t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken)}function gYe(e,t){if(t.parser.tokenizer.preprocessor.html="",t.parser.tokenizer.preprocessor.pos=-1,t.parser.tokenizer.preprocessor.lastGapPos=-2,t.parser.tokenizer.preprocessor.gapStack=[],t.parser.tokenizer.preprocessor.skipNextNewLine=!1,t.parser.tokenizer.preprocessor.lastChunkWritten=!1,t.parser.tokenizer.preprocessor.endOfChunkHit=!1,t.parser.tokenizer.preprocessor.isEol=!1,Jye(t,zf(e)),t.parser.tokenizer.write(e.value,!1),t.parser.tokenizer._runParsingLoop(),t.parser.tokenizer.state===72||t.parser.tokenizer.state===78){t.parser.tokenizer.preprocessor.lastChunkWritten=!0;const n=t.parser.tokenizer._consume();t.parser.tokenizer._callState(n)}}function yYe(e,t){const n=e;if(t.options.passThrough&&t.options.passThrough.includes(n.type))mYe(n,t);else{let r="";throw cYe.has(n.type)&&(r=". It looks like you are using MDX nodes with `hast-util-raw` (or `rehype-raw`). If you use this because you are using remark or rehype plugins that inject `'html'` nodes, then please raise an issue with that plugin, as its a bad and slow idea. If you use this because you are using markdown syntax, then you have to configure this utility (or plugin) to pass through these nodes (see `passThrough` in docs), but you can also migrate to use the MDX syntax"),new Error("Cannot compile `"+n.type+"` node"+r)}}function zx(e,t){Jye(e,t);const n=e.parser.tokenizer.currentCharacterToken;n&&n.location&&(n.location.endLine=e.parser.tokenizer.preprocessor.line,n.location.endCol=e.parser.tokenizer.preprocessor.col+1,n.location.endOffset=e.parser.tokenizer.preprocessor.offset+1,e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken)),e.parser.tokenizer.paused=!1,e.parser.tokenizer.inLoop=!1,e.parser.tokenizer.active=!1,e.parser.tokenizer.returnState=Ni.DATA,e.parser.tokenizer.charRefCode=-1,e.parser.tokenizer.consumedAfterSnapshot=-1,e.parser.tokenizer.currentLocation=null,e.parser.tokenizer.currentCharacterToken=null,e.parser.tokenizer.currentToken=null,e.parser.tokenizer.currentAttr={name:"",value:""}}function Jye(e,t){if(t&&t.offset!==void 0){const n={startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:-1,endCol:-1,endOffset:-1};e.parser.tokenizer.preprocessor.lineStartPos=-t.column+1,e.parser.tokenizer.preprocessor.droppedBufferSize=t.offset,e.parser.tokenizer.preprocessor.line=t.line,e.parser.tokenizer.currentLocation=n}}function vYe(e,t){const n=e.tagName.toLowerCase();if(t.parser.tokenizer.state===Ni.PLAINTEXT)return;zx(t,zf(e));const r=t.parser.openElements.current;let i="namespaceURI"in r?r.namespaceURI:hy.html;i===hy.html&&n==="svg"&&(i=hy.svg);const s=AWe({...e,children:[]},{space:i===hy.svg?"svg":"html"}),o={type:Cn.START_TAG,tagName:n,tagID:Bx(n),selfClosing:!1,ackSelfClosing:!1,attrs:"attrs"in s?s.attrs:[],location:GC(e)};t.parser.currentToken=o,t.parser._processToken(t.parser.currentToken),t.parser.tokenizer.lastStartTagName=n}function bYe(e,t){const n=e.tagName.toLowerCase();if(!t.parser.tokenizer.inForeignNode&&$We.includes(n)||t.parser.tokenizer.state===Ni.PLAINTEXT)return;zx(t,PO(e));const r={type:Cn.END_TAG,tagName:n,tagID:Bx(n),selfClosing:!1,ackSelfClosing:!1,attrs:[],location:GC(e)};t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken),n===t.parser.tokenizer.lastStartTagName&&(t.parser.tokenizer.state===Ni.RCDATA||t.parser.tokenizer.state===Ni.RAWTEXT||t.parser.tokenizer.state===Ni.SCRIPT_DATA)&&(t.parser.tokenizer.state=Ni.DATA)}function wYe(e){const t=e.type==="root"?e.children[0]:e;return!!(t&&(t.type==="doctype"||t.type==="element"&&t.tagName.toLowerCase()==="html"))}function GC(e){const t=zf(e)||{line:void 0,column:void 0,offset:void 0},n=PO(e)||{line:void 0,column:void 0,offset:void 0};return{startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:n.line,endCol:n.column,endOffset:n.offset}}function xYe(e){return"children"in e?Tw({...e,children:[]}):Tw(e)}function EYe(e){return function(t,n){return Kye(t,{...e,file:n})}}function Ws({text:e,required:t}){const n={img({node:i,width:s,height:o,...a}){return T.jsx(j0,{...a,h:o,w:s,ref:void 0})},p({node:i,...s}){return T.jsx(Ve,{...s,pb:8,fw:"inherit",ref:void 0})},h1({node:i,...s}){return T.jsx(mi,{...s,order:1,...s,pb:12})},h2({node:i,...s}){return T.jsx(mi,{...s,order:2,...s,pb:12})},h3({node:i,...s}){return T.jsx(mi,{...s,order:3,...s,pb:12})},h4({node:i,...s}){return T.jsx(mi,{...s,order:4,...s,pb:12})},h5({node:i,...s}){return T.jsx(mi,{...s,order:5,...s,pb:12})},h6({node:i,...s}){return T.jsx(mi,{...s,order:6,...s,pb:12})},a({node:i,...s}){return T.jsx(kv,{...s,ref:void 0})},ul({node:i,...s}){return T.jsx(Hc,{withPadding:!0,...s,pb:8})},ol({node:i,type:s,...o}){return T.jsx(Hc,{type:"ordered",withPadding:!0,...o,pb:8})}};return T.jsx(uWe,{components:n,rehypePlugins:[EYe],children:e+(t?'<span style="color: #fa5252; margin-left: 4px">*</span>':"")})}function LR({issues:e,type:t}){const n=`
    ${t==="error"?"There was an issue loading the study config. Please check the following issues:":"There were some warnings while loading the study config. Please check the following warnings:"}

    ${e.map(r=>`- You have ${t==="error"?"an error":"a warning"} at ${r.instancePath||"root"}: ${r.message} - ${JSON.stringify(r.params)}  `).join(`
`)}
  `.replace(/\n\s+/g,`
`);return T.jsx(Ws,{text:n})}const V1=14;function _Ye({completed:e,inProgress:t,rejected:n}){return T.jsxs(Dt,{ml:4,gap:4,children:[T.jsx(xn,{label:"Completed",children:T.jsx(qc,{variant:"light",color:"green",leftSection:T.jsx(zC,{width:V1,height:V1,style:{paddingTop:1}}),pb:1,children:e})}),T.jsx(xn,{label:"In Progress",children:T.jsx(qc,{variant:"light",color:"orange",leftSection:T.jsx(Tge,{width:V1,height:V1,style:{paddingTop:1}}),pb:1,children:t})}),T.jsx(xn,{label:"Rejected",children:T.jsx(qc,{variant:"light",color:"red",leftSection:T.jsx($x,{width:V1,height:V1,style:{paddingTop:1}}),pb:1,children:n})})]})}var Une={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zye=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},TYe=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=e[n++],o=e[n++],a=e[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;t[r++]=String.fromCharCode(55296+(l>>10)),t[r++]=String.fromCharCode(56320+(l&1023))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return t.join("")},NH={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const s=e[i],o=i+1<e.length,a=o?e[i+1]:0,l=i+2<e.length,u=l?e[i+2]:0,c=s>>2,d=(s&3)<<4|a>>4;let f=(a&15)<<2|u>>6,h=u&63;l||(h=64,o||(f=64)),r.push(n[c],n[d],n[f],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Zye(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):TYe(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const s=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0;++i;const u=i<e.length?n[e.charAt(i)]:64;++i;const d=i<e.length?n[e.charAt(i)]:64;if(++i,s==null||a==null||u==null||d==null)throw new CYe;const f=s<<2|a>>4;if(r.push(f),u!==64){const h=a<<4&240|u>>2;if(r.push(h),d!==64){const p=u<<6&192|d;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class CYe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const SYe=function(e){const t=Zye(e);return NH.encodeByteArray(t,!0)},eve=function(e){return SYe(e).replace(/\./g,"")},tve=function(e){try{return NH.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AYe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kYe=()=>AYe().__FIREBASE_DEFAULTS__,IYe=()=>{if(typeof process>"u"||typeof Une>"u")return;const e=Une.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},RYe=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&tve(e[1]);return t&&JSON.parse(t)},OH=()=>{try{return kYe()||IYe()||RYe()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},DYe=e=>{var t,n;return(n=(t=OH())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},nve=()=>{var e;return(e=OH())===null||e===void 0?void 0:e.config},rve=e=>{var t;return(t=OH())===null||t===void 0?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let aj=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ca(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function PYe(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ca())}function NYe(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function OYe(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function $Ye(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function MYe(){const e=Ca();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function ive(){try{return typeof indexedDB=="object"}catch{return!1}}function LYe(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;t(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FYe="FirebaseError";class Uf extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=FYe,Object.setPrototypeOf(this,Uf.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ux.prototype.create)}}class Ux{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},i=`${this.service}/${t}`,s=this.errors[t],o=s?jYe(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Uf(i,a,r)}}function jYe(e,t){return e.replace(BYe,(n,r)=>{const i=t[r];return i!=null?String(i):`<${r}?>`})}const BYe=/\{\$([^}]+)}/g;function zYe(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function AD(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const s=e[i],o=t[i];if(qne(s)&&qne(o)){if(!AD(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function qne(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YC(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(i=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function UYe(e,t){const n=new qYe(e,t);return n.subscribe.bind(n)}class qYe{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,r){let i;if(t===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");HYe(t,["next","error","complete"])?i=t:i={next:t,error:n,complete:r},i.next===void 0&&(i.next=vM),i.error===void 0&&(i.error=vM),i.complete===void 0&&(i.complete=vM);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function HYe(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function vM(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z0(e){return e&&e._delegate?e._delegate:e}class Tf{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wg="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let WYe=class{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new aj;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(GYe(t))try{this.getOrInitializeService({instanceIdentifier:Wg})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(t=Wg){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Wg){return this.instances.has(t)}getOptions(t=Wg){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(t,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(t),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&t(o,i),()=>{s.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:VYe(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=Wg){return this.component?this.component.multipleInstances?t:Wg:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function VYe(e){return e===Wg?void 0:e}function GYe(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YYe{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new WYe(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wr;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(wr||(wr={}));const KYe={debug:wr.DEBUG,verbose:wr.VERBOSE,info:wr.INFO,warn:wr.WARN,error:wr.ERROR,silent:wr.SILENT},XYe=wr.INFO,QYe={[wr.DEBUG]:"log",[wr.VERBOSE]:"log",[wr.INFO]:"info",[wr.WARN]:"warn",[wr.ERROR]:"error"},JYe=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),i=QYe[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class BO{constructor(t){this.name=t,this._logLevel=XYe,this._logHandler=JYe,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in wr))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?KYe[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,wr.DEBUG,...t),this._logHandler(this,wr.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,wr.VERBOSE,...t),this._logHandler(this,wr.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,wr.INFO,...t),this._logHandler(this,wr.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,wr.WARN,...t),this._logHandler(this,wr.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,wr.ERROR,...t),this._logHandler(this,wr.ERROR,...t)}}const ZYe=(e,t)=>t.some(n=>e instanceof n);let Hne,Wne;function eKe(){return Hne||(Hne=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function tKe(){return Wne||(Wne=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const sve=new WeakMap,lj=new WeakMap,ove=new WeakMap,bM=new WeakMap,$H=new WeakMap;function nKe(e){const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("success",s),e.removeEventListener("error",o)},s=()=>{n(r0(e.result)),i()},o=()=>{r(e.error),i()};e.addEventListener("success",s),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&sve.set(n,e)}).catch(()=>{}),$H.set(t,e),t}function rKe(e){if(lj.has(e))return;const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",o),e.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",s),e.addEventListener("error",o),e.addEventListener("abort",o)});lj.set(e,t)}let uj={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return lj.get(e);if(t==="objectStoreNames")return e.objectStoreNames||ove.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return r0(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function iKe(e){uj=e(uj)}function sKe(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(wM(this),t,...n);return ove.set(r,t.sort?t.sort():[t]),r0(r)}:tKe().includes(e)?function(...t){return e.apply(wM(this),t),r0(sve.get(this))}:function(...t){return r0(e.apply(wM(this),t))}}function oKe(e){return typeof e=="function"?sKe(e):(e instanceof IDBTransaction&&rKe(e),ZYe(e,eKe())?new Proxy(e,uj):e)}function r0(e){if(e instanceof IDBRequest)return nKe(e);if(bM.has(e))return bM.get(e);const t=oKe(e);return t!==e&&(bM.set(e,t),$H.set(t,e)),t}const wM=e=>$H.get(e);function aKe(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(e,t),a=r0(o);return r&&o.addEventListener("upgradeneeded",l=>{r(r0(o.result),l.oldVersion,l.newVersion,r0(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const lKe=["get","getKey","getAll","getAllKeys","count"],uKe=["put","add","delete","clear"],xM=new Map;function Vne(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(xM.get(t))return xM.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=uKe.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||lKe.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),i&&l.done]))[0]};return xM.set(t,s),s}iKe(e=>({...e,get:(t,n,r)=>Vne(t,n)||e.get(t,n,r),has:(t,n)=>!!Vne(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cKe{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(dKe(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function dKe(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const cj="@firebase/app",Gne="0.10.18";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yp=new BO("@firebase/app"),fKe="@firebase/app-compat",hKe="@firebase/analytics-compat",pKe="@firebase/analytics",mKe="@firebase/app-check-compat",gKe="@firebase/app-check",yKe="@firebase/auth",vKe="@firebase/auth-compat",bKe="@firebase/database",wKe="@firebase/data-connect",xKe="@firebase/database-compat",EKe="@firebase/functions",_Ke="@firebase/functions-compat",TKe="@firebase/installations",CKe="@firebase/installations-compat",SKe="@firebase/messaging",AKe="@firebase/messaging-compat",kKe="@firebase/performance",IKe="@firebase/performance-compat",RKe="@firebase/remote-config",DKe="@firebase/remote-config-compat",PKe="@firebase/storage",NKe="@firebase/storage-compat",OKe="@firebase/firestore",$Ke="@firebase/vertexai",MKe="@firebase/firestore-compat",LKe="firebase",FKe="11.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dj="[DEFAULT]",jKe={[cj]:"fire-core",[fKe]:"fire-core-compat",[pKe]:"fire-analytics",[hKe]:"fire-analytics-compat",[gKe]:"fire-app-check",[mKe]:"fire-app-check-compat",[yKe]:"fire-auth",[vKe]:"fire-auth-compat",[bKe]:"fire-rtdb",[wKe]:"fire-data-connect",[xKe]:"fire-rtdb-compat",[EKe]:"fire-fn",[_Ke]:"fire-fn-compat",[TKe]:"fire-iid",[CKe]:"fire-iid-compat",[SKe]:"fire-fcm",[AKe]:"fire-fcm-compat",[kKe]:"fire-perf",[IKe]:"fire-perf-compat",[RKe]:"fire-rc",[DKe]:"fire-rc-compat",[PKe]:"fire-gcs",[NKe]:"fire-gcs-compat",[OKe]:"fire-fst",[MKe]:"fire-fst-compat",[$Ke]:"fire-vertex","fire-js":"fire-js",[LKe]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kD=new Map,BKe=new Map,fj=new Map;function Yne(e,t){try{e.container.addComponent(t)}catch(n){yp.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function vp(e){const t=e.name;if(fj.has(t))return yp.debug(`There were multiple attempts to register component ${t}.`),!1;fj.set(t,e);for(const n of kD.values())Yne(n,e);for(const n of BKe.values())Yne(n,e);return!0}function ave(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Bh(e){return e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zKe={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},i0=new Ux("app","Firebase",zKe);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UKe{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Tf("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw i0.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mv=FKe;function qKe(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:dj,automaticDataCollectionEnabled:!1},t),i=r.name;if(typeof i!="string"||!i)throw i0.create("bad-app-name",{appName:String(i)});if(n||(n=nve()),!n)throw i0.create("no-options");const s=kD.get(i);if(s){if(AD(n,s.options)&&AD(r,s.config))return s;throw i0.create("duplicate-app",{appName:i})}const o=new YYe(i);for(const l of fj.values())o.addComponent(l);const a=new UKe(n,r,o);return kD.set(i,a),a}function HKe(e=dj){const t=kD.get(e);if(!t&&e===dj&&nve())return qKe();if(!t)throw i0.create("no-app",{appName:e});return t}function Wc(e,t,n){var r;let i=(r=jKe[e])!==null&&r!==void 0?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${t}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),yp.warn(a.join(" "));return}vp(new Tf(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WKe="firebase-heartbeat-database",VKe=1,IT="firebase-heartbeat-store";let EM=null;function lve(){return EM||(EM=aKe(WKe,VKe,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(IT)}catch(n){console.warn(n)}}}}).catch(e=>{throw i0.create("idb-open",{originalErrorMessage:e.message})})),EM}async function GKe(e){try{const n=(await lve()).transaction(IT),r=await n.objectStore(IT).get(uve(e));return await n.done,r}catch(t){if(t instanceof Uf)yp.warn(t.message);else{const n=i0.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});yp.warn(n.message)}}}async function Kne(e,t){try{const r=(await lve()).transaction(IT,"readwrite");await r.objectStore(IT).put(t,uve(e)),await r.done}catch(n){if(n instanceof Uf)yp.warn(n.message);else{const r=i0.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});yp.warn(r.message)}}}function uve(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YKe=1024,KKe=30*24*60*60*1e3;class XKe{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new JKe(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Xne();return((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=KKe}),this._storage.overwrite(this._heartbeatsCache))}catch(r){yp.warn(r)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Xne(),{heartbeatsToSend:r,unsentEntries:i}=QKe(this._heartbeatsCache.heartbeats),s=eve(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return yp.warn(n),""}}}function Xne(){return new Date().toISOString().substring(0,10)}function QKe(e,t=YKe){const n=[];let r=e.slice();for(const i of e){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Qne(n)>t){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Qne(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class JKe{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ive()?LYe().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await GKe(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Kne(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Kne(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function Qne(e){return eve(JSON.stringify({version:2,heartbeats:e})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZKe(e){vp(new Tf("platform-logger",t=>new cKe(t),"PRIVATE")),vp(new Tf("heartbeat",t=>new XKe(t),"PRIVATE")),Wc(cj,Gne,e),Wc(cj,Gne,"esm2017"),Wc("fire-js","")}ZKe("");function cve(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const eXe=cve,dve=new Ux("auth","Firebase",cve());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ID=new BO("@firebase/auth");function tXe(e,...t){ID.logLevel<=wr.WARN&&ID.warn(`Auth (${Mv}): ${e}`,...t)}function FR(e,...t){ID.logLevel<=wr.ERROR&&ID.error(`Auth (${Mv}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cf(e,...t){throw LH(e,...t)}function Vc(e,...t){return LH(e,...t)}function MH(e,t,n){const r=Object.assign(Object.assign({},eXe()),{[t]:n});return new Ux("auth","Firebase",r).create(t,{appName:e.name})}function Ay(e){return MH(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function nXe(e,t,n){const r=n;if(!(t instanceof r))throw r.name!==t.constructor.name&&Cf(e,"argument-error"),MH(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function LH(e,...t){if(typeof e!="string"){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return dve.create(e,...t)}function un(e,t,...n){if(!e)throw LH(t,...n)}function zh(e){const t="INTERNAL ASSERTION FAILED: "+e;throw FR(t),new Error(t)}function bp(e,t){e||zh(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hj(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.href)||""}function rXe(){return Jne()==="http:"||Jne()==="https:"}function Jne(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iXe(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(rXe()||OYe()||"connection"in navigator)?navigator.onLine:!0}function sXe(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{constructor(t,n){this.shortDelay=t,this.longDelay=n,bp(n>t,"Short delay should be less than long delay!"),this.isMobile=PYe()||$Ye()}get(){return iXe()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FH(e,t){bp(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fve{static initialize(t,n,r){this.fetchImpl=t,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;zh("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;zh("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;zh("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oXe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aXe=new KC(3e4,6e4);function jH(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function qx(e,t,n,r,i={}){return hve(e,i,async()=>{let s={},o={};r&&(t==="GET"?o=r:s={body:JSON.stringify(r)});const a=YC(Object.assign({key:e.config.apiKey},o)).slice(1),l=await e._getAdditionalHeaders();l["Content-Type"]="application/json",e.languageCode&&(l["X-Firebase-Locale"]=e.languageCode);const u=Object.assign({method:t,headers:l},s);return NYe()||(u.referrerPolicy="no-referrer"),fve.fetch()(pve(e,e.config.apiHost,n,a),u)})}async function hve(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},oXe),t);try{const i=new uXe(e),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Sk(e,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Sk(e,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Sk(e,"email-already-in-use",o);if(l==="USER_DISABLED")throw Sk(e,"user-disabled",o);const c=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw MH(e,c,u);Cf(e,c)}}catch(i){if(i instanceof Uf)throw i;Cf(e,"network-request-failed",{message:String(i)})}}async function lXe(e,t,n,r,i={}){const s=await qx(e,t,n,r,i);return"mfaPendingCredential"in s&&Cf(e,"multi-factor-auth-required",{_serverResponse:s}),s}function pve(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?FH(e.config,i):`${e.config.apiScheme}://${i}`}class uXe{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Vc(this.auth,"network-request-failed")),aXe.get())})}}function Sk(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Vc(e,t,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cXe(e,t){return qx(e,"POST","/v1/accounts:delete",t)}async function mve(e,t){return qx(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U2(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function dXe(e,t=!1){const n=z0(e),r=await n.getIdToken(t),i=BH(r);un(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:U2(_M(i.auth_time)),issuedAtTime:U2(_M(i.iat)),expirationTime:U2(_M(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function _M(e){return Number(e)*1e3}function BH(e){const[t,n,r]=e.split(".");if(t===void 0||n===void 0||r===void 0)return FR("JWT malformed, contained fewer than 3 sections"),null;try{const i=tve(n);return i?JSON.parse(i):(FR("Failed to decode base64 JWT payload"),null)}catch(i){return FR("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Zne(e){const t=BH(e);return un(t,"internal-error"),un(typeof t.exp<"u","internal-error"),un(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RT(e,t,n=!1){if(n)return t;try{return await t}catch(r){throw r instanceof Uf&&fXe(r)&&e.auth.currentUser===e&&await e.auth.signOut(),r}}function fXe({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hXe{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pj{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=U2(this.lastLoginAt),this.creationTime=U2(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RD(e){var t;const n=e.auth,r=await e.getIdToken(),i=await RT(e,mve(n,{idToken:r}));un(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=!((t=s.providerUserInfo)===null||t===void 0)&&t.length?gve(s.providerUserInfo):[],a=mXe(e.providerData,o),l=e.isAnonymous,u=!(e.email&&s.passwordHash)&&!(a!=null&&a.length),c=l?u:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new pj(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(e,d)}async function pXe(e){const t=z0(e);await RD(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function mXe(e,t){return[...e.filter(r=>!t.some(i=>i.providerId===r.providerId)),...t]}function gve(e){return e.map(t=>{var{providerId:n}=t,r=AC(t,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gXe(e,t){const n=await hve(e,{},async()=>{const r=YC({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:s}=e.config,o=pve(e,i,"/v1/token",`key=${s}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",fve.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function yXe(e,t){return qx(e,"POST","/v2/accounts:revokeToken",jH(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yb{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){un(t.idToken,"internal-error"),un(typeof t.idToken<"u","internal-error"),un(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):Zne(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){un(t.length!==0,"internal-error");const n=Zne(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(un(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await gXe(t,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(t,n,r){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Yb;return r&&(un(typeof r=="string","internal-error",{appName:t}),o.refreshToken=r),i&&(un(typeof i=="string","internal-error",{appName:t}),o.accessToken=i),s&&(un(typeof s=="number","internal-error",{appName:t}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Yb,this.toJSON())}_performRefresh(){return zh("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bm(e,t){un(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class Uh{constructor(t){var{uid:n,auth:r,stsTokenManager:i}=t,s=AC(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new hXe(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new pj(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(t){const n=await RT(this,this.stsTokenManager.getToken(this.auth,t));return un(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return dXe(this,t)}reload(){return pXe(this)}_assign(t){this!==t&&(un(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new Uh(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){un(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),n&&await RD(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Bh(this.auth.app))return Promise.reject(Ay(this.auth));const t=await this.getIdToken();return await RT(this,cXe(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var r,i,s,o,a,l,u,c;const d=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(i=n.email)!==null&&i!==void 0?i:void 0,h=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,m=(a=n.tenantId)!==null&&a!==void 0?a:void 0,g=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,b=(u=n.createdAt)!==null&&u!==void 0?u:void 0,v=(c=n.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:x,emailVerified:E,isAnonymous:_,providerData:C,stsTokenManager:S}=n;un(x&&S,t,"internal-error");const k=Yb.fromJSON(this.name,S);un(typeof x=="string",t,"internal-error"),bm(d,t.name),bm(f,t.name),un(typeof E=="boolean",t,"internal-error"),un(typeof _=="boolean",t,"internal-error"),bm(h,t.name),bm(p,t.name),bm(m,t.name),bm(g,t.name),bm(b,t.name),bm(v,t.name);const R=new Uh({uid:x,auth:t,email:f,emailVerified:E,displayName:d,isAnonymous:_,photoURL:p,phoneNumber:h,tenantId:m,stsTokenManager:k,createdAt:b,lastLoginAt:v});return C&&Array.isArray(C)&&(R.providerData=C.map(O=>Object.assign({},O))),g&&(R._redirectEventId=g),R}static async _fromIdTokenResponse(t,n,r=!1){const i=new Yb;i.updateFromServerResponse(n);const s=new Uh({uid:n.localId,auth:t,stsTokenManager:i,isAnonymous:r});return await RD(s),s}static async _fromGetAccountInfoResponse(t,n,r){const i=n.users[0];un(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?gve(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new Yb;a.updateFromIdToken(r);const l=new Uh({uid:i.localId,auth:t,stsTokenManager:a,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new pj(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ere=new Map;function qh(e){bp(e instanceof Function,"Expected a class definition");let t=ere.get(e);return t?(bp(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,ere.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yve{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}yve.type="NONE";const tre=yve;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jR(e,t,n){return`firebase:${e}:${t}:${n}`}class Kb{constructor(t,n,r){this.persistence=t,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=jR(this.userKey,i.apiKey,s),this.fullPersistenceKey=jR("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?Uh._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,r="authUser"){if(!n.length)return new Kb(qh(tre),t,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||qh(tre);const o=jR(r,t.config.apiKey,t.name);let a=null;for(const u of n)try{const c=await u._get(o);if(c){const d=Uh._fromJSON(t,c);u!==s&&(a=d),s=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Kb(s,t,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new Kb(s,t,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nre(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(xve(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(vve(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(_ve(t))return"Blackberry";if(Tve(t))return"Webos";if(bve(t))return"Safari";if((t.includes("chrome/")||wve(t))&&!t.includes("edge/"))return"Chrome";if(Eve(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=e.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function vve(e=Ca()){return/firefox\//i.test(e)}function bve(e=Ca()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function wve(e=Ca()){return/crios\//i.test(e)}function xve(e=Ca()){return/iemobile/i.test(e)}function Eve(e=Ca()){return/android/i.test(e)}function _ve(e=Ca()){return/blackberry/i.test(e)}function Tve(e=Ca()){return/webos/i.test(e)}function zH(e=Ca()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function vXe(e=Ca()){var t;return zH(e)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function bXe(){return MYe()&&document.documentMode===10}function Cve(e=Ca()){return zH(e)||Eve(e)||Tve(e)||_ve(e)||/windows phone/i.test(e)||xve(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sve(e,t=[]){let n;switch(e){case"Browser":n=nre(Ca());break;case"Worker":n=`${nre(Ca())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${Mv}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wXe{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const r=s=>new Promise((o,a)=>{try{const l=t(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const r of this.queue)await r(t),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xXe(e,t={}){return qx(e,"GET","/v2/passwordPolicy",jH(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EXe=6;class _Xe{constructor(t){var n,r,i,s;const o=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:EXe,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=t.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=t.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,l),this.validatePasswordCharacterOptions(t,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(t,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=t.length>=r),i&&(n.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<t.length;i++)r=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TXe{constructor(t,n,r,i){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new rre(this),this.idTokenSubscription=new rre(this),this.beforeStateQueue=new wXe(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=dve,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=qh(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Kb.create(this,t),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await mve(this,{idToken:t}),r=await Uh._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var n;if(Bh(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(t);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return un(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await RD(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=sXe()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Bh(this.app))return Promise.reject(Ay(this));const n=t?z0(t):null;return n&&un(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&un(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Bh(this.app)?Promise.reject(Ay(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Bh(this.app)?Promise.reject(Ay(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(qh(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await xXe(this),n=new _Xe(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new Ux("auth","Firebase",t())}onAuthStateChanged(t,n,r){return this.registerStateListener(this.authStateSubscription,t,n,r)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,r){return this.registerStateListener(this.idTokenSubscription,t,n,r)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await yXe(this,r)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,n){const r=await this.getOrInitRedirectPersistenceManager(n);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&qh(t)||this._popupRedirectResolver;un(n,this,"argument-error"),this.redirectPersistenceManager=await Kb.create(this,[qh(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(un(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=t.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=t.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return un(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=Sve(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var t;const n=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return n!=null&&n.error&&tXe(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function zO(e){return z0(e)}class rre{constructor(t){this.auth=t,this.observer=null,this.addObserver=UYe(n=>this.observer=n)}get next(){return un(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let UH={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function CXe(e){UH=e}function SXe(e){return UH.loadJS(e)}function AXe(){return UH.gapiScript}function kXe(e){return`__${e}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IXe(e,t){const n=ave(e,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(AD(s,t??{}))return i;Cf(i,"already-initialized")}return n.initialize({options:t})}function RXe(e,t){const n=(t==null?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(qh);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t==null?void 0:t.popupRedirectResolver)}function DXe(e,t,n){const r=zO(e);un(r._canInitEmulator,r,"emulator-config-failed"),un(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!1,s=Ave(t),{host:o,port:a}=PXe(t),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),NXe()}function Ave(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function PXe(e){const t=Ave(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:ire(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:ire(o)}}}function ire(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function NXe(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kve{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return zh("not implemented")}_getIdTokenResponse(t){return zh("not implemented")}_linkToIdToken(t,n){return zh("not implemented")}_getReauthenticationResolver(t){return zh("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xb(e,t){return lXe(e,"POST","/v1/accounts:signInWithIdp",jH(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OXe="http://localhost";class By extends kve{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new By(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):Cf("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:i}=n,s=AC(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new By(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(t){const n=this.buildRequest();return Xb(t,n)}_linkToIdToken(t,n){const r=this.buildRequest();return r.idToken=n,Xb(t,r)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,Xb(t,n)}buildRequest(){const t={requestUri:OXe,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=YC(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qH{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC extends qH{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm extends XC{constructor(){super("facebook.com")}static credential(t){return By._fromParams({providerId:jm.PROVIDER_ID,signInMethod:jm.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return jm.credentialFromTaggedObject(t)}static credentialFromError(t){return jm.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return jm.credential(t.oauthAccessToken)}catch{return null}}}jm.FACEBOOK_SIGN_IN_METHOD="facebook.com";jm.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mh extends XC{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return By._fromParams({providerId:Mh.PROVIDER_ID,signInMethod:Mh.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return Mh.credentialFromTaggedObject(t)}static credentialFromError(t){return Mh.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Mh.credential(n,r)}catch{return null}}}Mh.GOOGLE_SIGN_IN_METHOD="google.com";Mh.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bm extends XC{constructor(){super("github.com")}static credential(t){return By._fromParams({providerId:Bm.PROVIDER_ID,signInMethod:Bm.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Bm.credentialFromTaggedObject(t)}static credentialFromError(t){return Bm.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Bm.credential(t.oauthAccessToken)}catch{return null}}}Bm.GITHUB_SIGN_IN_METHOD="github.com";Bm.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zm extends XC{constructor(){super("twitter.com")}static credential(t,n){return By._fromParams({providerId:zm.PROVIDER_ID,signInMethod:zm.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return zm.credentialFromTaggedObject(t)}static credentialFromError(t){return zm.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return zm.credential(n,r)}catch{return null}}}zm.TWITTER_SIGN_IN_METHOD="twitter.com";zm.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sw{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,r,i=!1){const s=await Uh._fromIdTokenResponse(t,r,i),o=sre(r);return new Sw({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(t,n,r){await t._updateTokensIfNecessary(r,!0);const i=sre(r);return new Sw({user:t,providerId:i,_tokenResponse:r,operationType:n})}}function sre(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DD extends Uf{constructor(t,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,DD.prototype),this.customData={appName:t.name,tenantId:(s=t.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,i){return new DD(t,n,r,i)}}function Ive(e,t,n,r){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?DD._fromErrorAndOperation(e,s,t,r):s})}async function $Xe(e,t,n=!1){const r=await RT(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Sw._forOperation(e,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MXe(e,t,n=!1){const{auth:r}=e;if(Bh(r.app))return Promise.reject(Ay(r));const i="reauthenticate";try{const s=await RT(e,Ive(r,i,t,e),n);un(s.idToken,r,"internal-error");const o=BH(s.idToken);un(o,r,"internal-error");const{sub:a}=o;return un(e.uid===a,r,"user-mismatch"),Sw._forOperation(e,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Cf(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LXe(e,t,n=!1){if(Bh(e.app))return Promise.reject(Ay(e));const r="signIn",i=await Ive(e,r,t),s=await Sw._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}function FXe(e,t,n,r){return z0(e).onIdTokenChanged(t,n,r)}function jXe(e,t,n){return z0(e).beforeAuthStateChanged(t,n)}function BXe(e,t,n,r){return z0(e).onAuthStateChanged(t,n,r)}function zXe(e){return z0(e).signOut()}const PD="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rve{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(PD,"1"),this.storage.removeItem(PD),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UXe=1e3,qXe=10;class Dve extends Rve{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Cve(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&t(n,i,r)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=t.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);bXe()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,qXe):i()}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)})},UXe)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}Dve.type="LOCAL";const HXe=Dve;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pve extends Rve{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}Pve.type="SESSION";const Nve=Pve;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WXe(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UO{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(i=>i.isListeningto(t));if(n)return n;const r=new UO(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async u=>u(n.origin,s)),l=await WXe(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}UO.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HH(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VXe{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const u=HH("",20);i.port1.start();const c=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(d){const f=d;if(f.data.eventId===u)switch(f.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(f.data.response);break;default:clearTimeout(c),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:u,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uf(){return window}function GXe(e){uf().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ove(){return typeof uf().WorkerGlobalScope<"u"&&typeof uf().importScripts=="function"}async function YXe(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function KXe(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)===null||e===void 0?void 0:e.controller)||null}function XXe(){return Ove()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $ve="firebaseLocalStorageDb",QXe=1,ND="firebaseLocalStorage",Mve="fbase_key";class QC{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function qO(e,t){return e.transaction([ND],t?"readwrite":"readonly").objectStore(ND)}function JXe(){const e=indexedDB.deleteDatabase($ve);return new QC(e).toPromise()}function mj(){const e=indexedDB.open($ve,QXe);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const r=e.result;try{r.createObjectStore(ND,{keyPath:Mve})}catch(i){n(i)}}),e.addEventListener("success",async()=>{const r=e.result;r.objectStoreNames.contains(ND)?t(r):(r.close(),await JXe(),t(await mj()))})})}async function ore(e,t,n){const r=qO(e,!0).put({[Mve]:t,value:n});return new QC(r).toPromise()}async function ZXe(e,t){const n=qO(e,!1).get(t),r=await new QC(n).toPromise();return r===void 0?null:r.value}function are(e,t){const n=qO(e,!0).delete(t);return new QC(n).toPromise()}const eQe=800,tQe=3;class Lve{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await mj(),this.db)}async _withRetries(t){let n=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(n++>tQe)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Ove()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=UO._getInstance(XXe()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await YXe(),!this.activeServiceWorker)return;this.sender=new VXe(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||KXe()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await mj();return await ore(t,PD,"1"),await are(t,PD),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>ore(r,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(r=>ZXe(r,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>are(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(i=>{const s=qO(i,!1).getAll();return new QC(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(t.length!==0)for(const{fbase_key:i,value:s}of t)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),eQe)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Lve.type="LOCAL";const nQe=Lve;new KC(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fve(e,t){return t?qh(t):(un(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WH extends kve{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Xb(t,this._buildIdpRequest())}_linkToIdToken(t,n){return Xb(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return Xb(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function rQe(e){return LXe(e.auth,new WH(e),e.bypassAuthState)}function iQe(e){const{auth:t,user:n}=e;return un(n,t,"internal-error"),MXe(n,new WH(e),e.bypassAuthState)}async function sQe(e){const{auth:t,user:n}=e;return un(n,t,"internal-error"),$Xe(n,new WH(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jve{constructor(t,n,r,i,s=!1){this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=t;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return rQe;case"linkViaPopup":case"linkViaRedirect":return sQe;case"reauthViaPopup":case"reauthViaRedirect":return iQe;default:Cf(this.auth,"internal-error")}}resolve(t){bp(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){bp(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oQe=new KC(2e3,1e4);async function aQe(e,t,n){if(Bh(e.app))return Promise.reject(Vc(e,"operation-not-supported-in-this-environment"));const r=zO(e);nXe(e,t,qH);const i=Fve(r,n);return new py(r,"signInViaPopup",t,i).executeNotNull()}class py extends jve{constructor(t,n,r,i,s){super(t,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,py.currentPopupAction&&py.currentPopupAction.cancel(),py.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return un(t,this.auth,"internal-error"),t}async onExecution(){bp(this.filter.length===1,"Popup operations only handle one event");const t=HH();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Vc(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(Vc(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,py.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Vc(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,oQe.get())};t()}}py.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lQe="pendingRedirect",BR=new Map;class uQe extends jve{constructor(t,n,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let t=BR.get(this.auth._key());if(!t){try{const r=await cQe(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(n){t=()=>Promise.reject(n)}BR.set(this.auth._key(),t)}return this.bypassAuthState||BR.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function cQe(e,t){const n=hQe(t),r=fQe(e);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function dQe(e,t){BR.set(e._key(),t)}function fQe(e){return qh(e._redirectPersistence)}function hQe(e){return jR(lQe,e.config.apiKey,e.name)}async function pQe(e,t,n=!1){if(Bh(e.app))return Promise.reject(Ay(e));const r=zO(e),i=Fve(r,t),o=await new uQe(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mQe=10*60*1e3;class gQe{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(n=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!yQe(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var r;if(t.error&&!Bve(t)){const i=((r=t.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Vc(this.auth,i))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const r=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=mQe&&this.cachedEventUids.clear(),this.cachedEventUids.has(lre(t))}saveEventToCache(t){this.cachedEventUids.add(lre(t)),this.lastProcessedEventTime=Date.now()}}function lre(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function Bve({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function yQe(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Bve(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vQe(e,t={}){return qx(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bQe=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,wQe=/^https?/;async function xQe(e){if(e.config.emulator)return;const{authorizedDomains:t}=await vQe(e);for(const n of t)try{if(EQe(n))return}catch{}Cf(e,"unauthorized-domain")}function EQe(e){const t=hj(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const o=new URL(e);return o.hostname===""&&r===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!wQe.test(n))return!1;if(bQe.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _Qe=new KC(3e4,6e4);function ure(){const e=uf().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function TQe(e){return new Promise((t,n)=>{var r,i,s;function o(){ure(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{ure(),n(Vc(e,"network-request-failed"))},timeout:_Qe.get()})}if(!((i=(r=uf().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)t(gapi.iframes.getContext());else if(!((s=uf().gapi)===null||s===void 0)&&s.load)o();else{const a=kXe("iframefcb");return uf()[a]=()=>{gapi.load?o():n(Vc(e,"network-request-failed"))},SXe(`${AXe()}?onload=${a}`).catch(l=>n(l))}}).catch(t=>{throw zR=null,t})}let zR=null;function CQe(e){return zR=zR||TQe(e),zR}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SQe=new KC(5e3,15e3),AQe="__/auth/iframe",kQe="emulator/auth/iframe",IQe={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},RQe=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function DQe(e){const t=e.config;un(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?FH(t,kQe):`https://${e.config.authDomain}/${AQe}`,r={apiKey:t.apiKey,appName:e.name,v:Mv},i=RQe.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${YC(r).slice(1)}`}async function PQe(e){const t=await CQe(e),n=uf().gapi;return un(n,e,"internal-error"),t.open({where:document.body,url:DQe(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:IQe,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Vc(e,"network-request-failed"),a=uf().setTimeout(()=>{s(o)},SQe.get());function l(){uf().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NQe={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},OQe=500,$Qe=600,MQe="_blank",LQe="http://localhost";class cre{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function FQe(e,t,n,r=OQe,i=$Qe){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},NQe),{width:r.toString(),height:i.toString(),top:s,left:o}),u=Ca().toLowerCase();n&&(a=wve(u)?MQe:n),vve(u)&&(t=t||LQe,l.scrollbars="yes");const c=Object.entries(l).reduce((f,[h,p])=>`${f}${h}=${p},`,"");if(vXe(u)&&a!=="_self")return jQe(t||"",a),new cre(null);const d=window.open(t||"",a,c);un(d,e,"popup-blocked");try{d.focus()}catch{}return new cre(d)}function jQe(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BQe="__/auth/handler",zQe="emulator/auth/handler",UQe=encodeURIComponent("fac");async function dre(e,t,n,r,i,s){un(e.config.authDomain,e,"auth-domain-config-required"),un(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Mv,eventId:i};if(t instanceof qH){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",zYe(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[c,d]of Object.entries({}))o[c]=d}if(t instanceof XC){const c=t.getScopes().filter(d=>d!=="");c.length>0&&(o.scopes=c.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const c of Object.keys(a))a[c]===void 0&&delete a[c];const l=await e._getAppCheckToken(),u=l?`#${UQe}=${encodeURIComponent(l)}`:"";return`${qQe(e)}?${YC(a).slice(1)}${u}`}function qQe({config:e}){return e.emulator?FH(e,zQe):`https://${e.authDomain}/${BQe}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TM="webStorageSupport";class HQe{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Nve,this._completeRedirectFn=pQe,this._overrideRedirectResult=dQe}async _openPopup(t,n,r,i){var s;bp((s=this.eventManagers[t._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await dre(t,n,r,hj(),i);return FQe(t,o,HH())}async _openRedirect(t,n,r,i){await this._originValidation(t);const s=await dre(t,n,r,hj(),i);return GXe(s),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(bp(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(t);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(t){const n=await PQe(t),r=new gQe(t);return n.register("authEvent",i=>(un(i==null?void 0:i.authEvent,t,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,r}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(TM,{type:TM},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[TM];o!==void 0&&n(!!o),Cf(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=xQe(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return Cve()||bve()||zH()}}const zve=HQe;var fre="@firebase/auth",hre="1.8.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WQe{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(r=>{t((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){un(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VQe(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function GQe(e){vp(new Tf("auth",(t,{options:n})=>{const r=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;un(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Sve(e)},u=new TXe(r,i,s,l);return RXe(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,r)=>{t.getProvider("auth-internal").initialize()})),vp(new Tf("auth-internal",t=>{const n=zO(t.getProvider("auth").getImmediate());return(r=>new WQe(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Wc(fre,hre,VQe(e)),Wc(fre,hre,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YQe=5*60,KQe=rve("authIdTokenMaxAge")||YQe;let pre=null;const XQe=e=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>KQe)return;const i=n==null?void 0:n.token;pre!==i&&(pre=i,await fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function gj(e=HKe()){const t=ave(e,"auth");if(t.isInitialized())return t.getImmediate();const n=IXe(e,{popupRedirectResolver:zve,persistence:[nQe,HXe,Nve]}),r=rve("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=XQe(s.toString());jXe(n,o,()=>o(n.currentUser)),FXe(n,a=>o(a))}}const i=DYe("auth");return i&&DXe(n,`http://${i}`),n}function QQe(){var e,t;return(t=(e=document.getElementsByTagName("head"))===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:document}CXe({loadJS(e){return new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=i=>{const s=Vc("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",QQe().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});GQe("Browser");async function yj(e){const t=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map(s=>s.toString(16).padStart(2,"0")).join("")}function Ak(e){const t=e;return typeof t=="object"&&t&&t.participantId!==void 0}function vu(e){return!!e&&e.isCloudEngine()}const Uve=D.createContext({user:{user:null,determiningStatus:!1,isAdmin:!1,adminVerification:!1},logout:async()=>{},triggerAuth:()=>{},verifyAdminStatus:()=>Promise.resolve(!1)}),Hx=()=>D.useContext(Uve);function JQe({children:e}){const t={user:null,determiningStatus:!0,isAdmin:!1,adminVerification:!1},n={user:null,determiningStatus:!1,isAdmin:!1,adminVerification:!1},r={user:{name:"fakeName",email:"fakeEmail@fake.com",uid:"fakeUid"},determiningStatus:!1,isAdmin:!0,adminVerification:!0},[i,s]=D.useState(t),[o,a]=D.useState(!1),{storageEngine:l}=Ai(),u=async()=>{const h=gj();try{await zXe(h)}catch(p){console.error(`There was an issue signing-out the user: ${p.message}`)}finally{s(n)}},c=()=>{a(!0)},d=async h=>l&&vu(l)?await l.validateUser(h,!0):!1;D.useEffect(()=>{s(t);let h;if(l&&vu(l))try{h=gj()}catch{console.warn("No firebase store.")}const p=async b=>{if(s(v=>({user:v.user,isAdmin:v.isAdmin,determiningStatus:!0,adminVerification:!1})),b){const v={user:b,determiningStatus:!1,isAdmin:!1,adminVerification:!0},x=await d(v);v.isAdmin=!!x,s(v)}else u()},g=(async()=>{if(l&&vu(l)){const b=await(l==null?void 0:l.getUserManagementData("authentication"));if(b!=null&&b.isEnabled){const v=BXe(h,async x=>await p(x));return()=>v()}s(r)}else l&&s(r);return()=>{}})();return()=>{g.then(b=>b())}},[l,o]);const f=D.useMemo(()=>({user:i,triggerAuth:c,logout:u,verifyAdminStatus:d}),[i]);return T.jsx(Uve.Provider,{value:f,children:i.determiningStatus?T.jsx(Nu,{visible:!0}):e})}function ZQe({configName:e,config:t,url:n}){const{storageEngine:r}=Ai(),[i,s]=D.useState(null);D.useEffect(()=>{r&&r.getParticipantsStatusCounts(e).then(d=>{s(d)})},[e,r]);const{minTime:o,maxTime:a}=D.useMemo(()=>{if(!i)return{minTime:null,maxTime:null};if(!i.minTime||!i.maxTime)return{minTime:null,maxTime:null};const d=typeof i.minTime=="number"?new Date(i.minTime):i.minTime.toDate(),f=typeof i.maxTime=="number"?new Date(i.maxTime):i.maxTime.toDate();return{minTime:d.toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"long",day:"numeric"}),maxTime:f.toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"long",day:"numeric"})}},[i]),[l,u]=D.useState(null);D.useEffect(()=>{r&&r.getModes(e).then(d=>{u(d)})},[e,r]);const c=D.useMemo(()=>l?l.dataCollectionEnabled?i&&(i.inProgress>0||i.completed>0)?"Collecting Data":"Ready to Collect Data":"Data Collection Disabled":"Unknown",[l,i]);return T.jsx(Iv,{shadow:"sm",radius:"md",my:"sm",withBorder:!0,children:t.errors.length>0?T.jsxs(T.Fragment,{children:[T.jsx(Ve,{fw:"bold",children:e}),T.jsxs(Dt,{align:"center",direction:"row",children:[T.jsx(Vb,{color:"red"}),T.jsx(Ve,{fw:"bold",ml:8,color:"red",children:"Errors"})]}),T.jsx(LR,{issues:t.errors,type:"error"}),t.warnings.length>0&&T.jsxs(T.Fragment,{children:[T.jsxs(Dt,{align:"center",direction:"row",children:[T.jsx(Vb,{color:"orange"}),T.jsx(Ve,{fw:"bold",ml:8,color:"orange",children:"Warnings"})]}),T.jsx(LR,{issues:t.warnings,type:"warning"})]})]}):T.jsxs(T.Fragment,{children:[T.jsx(Dt,{direction:"row",justify:"space-between",children:T.jsx(Ve,{fw:"bold",children:t.studyMetadata.title})}),T.jsxs(Ve,{c:"dimmed",children:[T.jsx(Ve,{span:!0,fw:500,children:"Authors: "}),t.studyMetadata.authors.join(", ")]}),T.jsx(Ve,{c:"dimmed",children:t.studyMetadata.description}),T.jsx(Ve,{c:"dimmed",ta:"right",style:{paddingRight:5},children:T.jsxs(kv,{target:"_blank",onClick:d=>d.stopPropagation(),href:`undefined${n}`,children:["View source:"," ",n,T.jsx(bge,{style:{width:Oe(18),height:Oe(18),marginLeft:Oe(2),marginBottom:Oe(-3)}})]})}),t.warnings.length>0&&T.jsxs(T.Fragment,{children:[T.jsxs(Dt,{align:"center",direction:"row",children:[T.jsx(Vb,{color:"orange"}),T.jsx(Ve,{fw:"bold",ml:8,color:"orange",children:"Warnings"})]}),T.jsx(LR,{issues:t.warnings,type:"warning"})]}),T.jsx(Rv,{my:"md"}),T.jsxs(Dt,{direction:"row",gap:"sm",children:[T.jsxs(Ve,{fw:"bold",size:"sm",opacity:.7,children:["Study Status:"," ",c]}),i&&T.jsx(_Ye,{completed:i.completed,inProgress:i.inProgress,rejected:i.rejected}),T.jsxs(Dt,{ml:"auto",gap:"sm",opacity:.7,children:[l!=null&&l.studyNavigatorEnabled?T.jsx(xn,{label:"Study navigator enabled",withinPortal:!0,children:T.jsx(Cge,{size:16,color:"green"})}):T.jsx(xn,{label:"Study navigator disabled",withinPortal:!0,children:T.jsx(C7e,{size:16,color:"red"})}),l!=null&&l.analyticsInterfacePubliclyAccessible?T.jsx(xn,{label:"Analytics interface publicly accessible",withinPortal:!0,children:T.jsx(Ege,{size:16,color:"green"})}):T.jsx(xn,{label:"Analytics interface not publicly accessible",withinPortal:!0,children:T.jsx(xge,{size:16,color:"red"})}),(r==null?void 0:r.getEngine())==="localStorage"?T.jsx(xn,{label:"Local storage enabled",withinPortal:!0,children:T.jsx(vge,{size:16,color:"green"})}):T.jsx(xn,{label:"Firebase enabled",withinPortal:!0,children:T.jsx(wge,{size:16,color:"green"})})]})]}),o&&a&&T.jsxs(Ve,{c:"dimmed",mt:4,children:["Activity:"," ",o," ",""," ",a]}),T.jsxs(Dt,{direction:"row",align:"end",gap:"sm",mt:"md",children:[T.jsx(Gt,{leftSection:T.jsx(yge,{}),style:{marginLeft:"auto"},variant:"default",component:"a",href:`${Vi}analysis/stats/${n}`,children:"Analyze & Manage Study"}),T.jsx(Gt,{leftSection:T.jsx(_ge,{}),component:"a",href:`${Vi}${n}`,children:"Go to Study"})]})]})},e)}function G1({configNames:e,studyConfigs:t}){return e.map(n=>{const r=t[n];if(!r)return null;const i=Ige(n);return T.jsx(ZQe,{configName:n,config:r,url:i},n)})}function eJe({globalConfig:e,studyConfigs:t}){const{storageEngine:n}=Ai(),{configsList:r}=e,[i,s]=D.useState({});D.useEffect(()=>{async function b(){const v={};await Promise.all(r.map(async x=>{if(n&&vu(n)){const E=await n.getModes(x);v[x]=E.analyticsInterfacePubliclyAccessible}})),s(v)}b()},[r,n]);const{user:o}=Hx(),a=D.useMemo(()=>r.filter(b=>i[b]||o.isAdmin),[r,i,o]),l=D.useMemo(()=>a.filter(b=>b.startsWith("demo-")),[a]),u=D.useMemo(()=>a.filter(b=>b.startsWith("tutorial")),[a]),c=D.useMemo(()=>a.filter(b=>b.startsWith("example-")),[a]),d=D.useMemo(()=>a.filter(b=>b.startsWith("test-")),[a]),f=D.useMemo(()=>a.filter(b=>b.startsWith("library-")),[a]),h=D.useMemo(()=>a.filter(b=>!b.startsWith("demo-")&&!b.startsWith("tutorial")&&!b.startsWith("example-")&&!b.startsWith("test-")&&!b.startsWith("library-")),[a]),[p]=Bf(),m=D.useMemo(()=>p.get("tab")||(h.length>0?"Others":"Demos"),[h.length,p]),g=Ra();return T.jsx(Ar.Main,{children:T.jsxs(mp,{size:"sm",px:0,children:[T.jsx(j0,{maw:150,mx:"auto",mb:"xl",radius:"md",src:`${Vi}revisitAssets/revisitLogoSquare.svg`,alt:"reVISit"}),T.jsxs(Ln,{variant:"outline",defaultValue:h.length>0?"Others":"Demos",value:m,onChange:b=>g(`/?tab=${b}`),children:[T.jsxs(Ln.List,{children:[h.length>0&&T.jsx(Ln.Tab,{value:"Others",children:"Your Studies"}),T.jsx(Ln.Tab,{value:"Demos",children:"Demo Studies"}),T.jsx(Ln.Tab,{value:"Examples",children:"Example Studies"}),T.jsx(Ln.Tab,{value:"Tutorials",children:"Tutorials"}),T.jsx(Ln.Tab,{value:"Tests",children:"Tests"}),T.jsx(Ln.Tab,{value:"Libraries",children:"Libraries"})]}),h.length>0&&T.jsx(Ln.Panel,{value:"Others",children:T.jsx(G1,{configNames:h,studyConfigs:t})}),T.jsxs(Ln.Panel,{value:"Demos",children:[T.jsx(Ve,{c:"dimmed",mt:"sm",children:"These studies show off individual features of the reVISit platform."}),T.jsx(G1,{configNames:l,studyConfigs:t})]}),T.jsxs(Ln.Panel,{value:"Examples",children:[T.jsx(Ve,{c:"dimmed",mt:"sm",children:"These are full studies that demonstrate the capabilities of the reVISit platform."}),T.jsx(G1,{configNames:c,studyConfigs:t})]}),T.jsxs(Ln.Panel,{value:"Tutorials",children:[T.jsx(Ve,{c:"dimmed",mt:"sm",children:"These studies are designed to help you learn how to use the reVISit platform."}),T.jsx(G1,{configNames:u,studyConfigs:t})]}),T.jsxs(Ln.Panel,{value:"Tests",children:[T.jsx(Ve,{c:"dimmed",mt:"sm",children:"These studies exist for testing purposes."}),T.jsx(G1,{configNames:d,studyConfigs:t})]}),T.jsxs(Ln.Panel,{value:"Libraries",children:[T.jsx(Ve,{c:"dimmed",mt:"sm",children:"Here you can see an example of every library that we publish."}),T.jsx(G1,{configNames:f,studyConfigs:t})]})]})]})})}var CM={exports:{}},SM={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mre;function tJe(){if(mre)return SM;mre=1;var e=qN();function t(l,u){return l===u&&(l!==0||1/l===1/u)||l!==l&&u!==u}var n=typeof Object.is=="function"?Object.is:t,r=e.useSyncExternalStore,i=e.useRef,s=e.useEffect,o=e.useMemo,a=e.useDebugValue;return SM.useSyncExternalStoreWithSelector=function(l,u,c,d,f){var h=i(null);if(h.current===null){var p={hasValue:!1,value:null};h.current=p}else p=h.current;h=o(function(){function g(_){if(!b){if(b=!0,v=_,_=d(_),f!==void 0&&p.hasValue){var C=p.value;if(f(C,_))return x=C}return x=_}if(C=x,n(v,_))return C;var S=d(_);return f!==void 0&&f(C,S)?(v=_,C):(v=_,x=S)}var b=!1,v,x,E=c===void 0?null:c;return[function(){return g(u())},E===null?void 0:function(){return g(E())}]},[u,c,d,f]);var m=r(l,h[0],h[1]);return s(function(){p.hasValue=!0,p.value=m},[m]),a(m),m},SM}var gre;function nJe(){return gre||(gre=1,CM.exports=tJe()),CM.exports}var rJe=nJe();function iJe(e){e()}function sJe(){let e=null,t=null;return{clear(){e=null,t=null},notify(){iJe(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=e;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!r||e===null||(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var yre={notify(){},get:()=>[]};function oJe(e,t){let n,r=yre,i=0,s=!1;function o(m){c();const g=r.subscribe(m);let b=!1;return()=>{b||(b=!0,g(),d())}}function a(){r.notify()}function l(){p.onStateChange&&p.onStateChange()}function u(){return s}function c(){i++,n||(n=e.subscribe(l),r=sJe())}function d(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=yre)}function f(){s||(s=!0,c())}function h(){s&&(s=!1,d())}const p={addNestedSub:o,notifyNestedSubs:a,handleChangeWrapper:l,isSubscribed:u,trySubscribe:f,tryUnsubscribe:h,getListeners:()=>r};return p}var aJe=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",lJe=aJe(),uJe=()=>typeof navigator<"u"&&navigator.product==="ReactNative",cJe=uJe(),dJe=()=>lJe||cJe?D.useLayoutEffect:D.useEffect,fJe=dJe(),AM=Symbol.for("react-redux-context"),kM=typeof globalThis<"u"?globalThis:{};function hJe(){if(!D.createContext)return{};const e=kM[AM]??(kM[AM]=new Map);let t=e.get(D.createContext);return t||(t=D.createContext(null),e.set(D.createContext,t)),t}var p0=hJe();function pJe(e){const{children:t,context:n,serverState:r,store:i}=e,s=D.useMemo(()=>{const l=oJe(i);return{store:i,subscription:l,getServerState:r?()=>r:void 0}},[i,r]),o=D.useMemo(()=>i.getState(),[i]);fJe(()=>{const{subscription:l}=s;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),o!==i.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[s,o]);const a=n||p0;return D.createElement(a.Provider,{value:s},t)}var mJe=pJe;function VH(e=p0){return function(){return D.useContext(e)}}var qve=VH();function Hve(e=p0){const t=e===p0?qve:VH(e),n=()=>{const{store:r}=t();return r};return Object.assign(n,{withTypes:()=>n}),n}var gJe=Hve();function yJe(e=p0){const t=e===p0?gJe:Hve(e),n=()=>t().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var Wve=yJe(),vJe=(e,t)=>e===t;function bJe(e=p0){const t=e===p0?qve:VH(e),n=(r,i={})=>{const{equalityFn:s=vJe}=typeof i=="function"?{equalityFn:i}:i,o=t(),{store:a,subscription:l,getServerState:u}=o;D.useRef(!0);const c=D.useCallback({[r.name](f){return r(f)}}[r.name],[r]),d=rJe.useSyncExternalStoreWithSelector(l.addNestedSub,a.getState,u||a.getState,c,s);return D.useDebugValue(d),d};return Object.assign(n,{withTypes:()=>n}),n}var wJe=bJe();const xJe=D.createContext(null);function qo(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(u){try{l(r.next(u))}catch(c){s(c)}}function a(u){try{l(r.throw(u))}catch(c){s(c)}}function l(u){var c;u.done?i(u.value):(c=u.value,c instanceof n?c:new n(function(d){d(c)})).then(o,a)}l((r=r.apply(e,t||[])).next())})}let JC=class{constructor(){this.listeners={}}on(t,n,r){if(this.listeners[t]||(this.listeners[t]=new Set),this.listeners[t].add(n),r==null?void 0:r.once){const i=()=>{this.un(t,i),this.un(t,n)};return this.on(t,i),i}return()=>this.un(t,n)}un(t,n){var r;(r=this.listeners[t])===null||r===void 0||r.delete(n)}once(t,n){return this.on(t,n,{once:!0})}unAll(){this.listeners={}}emit(t,...n){this.listeners[t]&&this.listeners[t].forEach(r=>r(...n))}};const kk={decode:function(e,t){return qo(this,void 0,void 0,function*(){const n=new AudioContext({sampleRate:t});return n.decodeAudioData(e).finally(()=>n.close())})},createBuffer:function(e,t){return typeof e[0]=="number"&&(e=[e]),function(n){const r=n[0];if(r.some(i=>i>1||i<-1)){const i=r.length;let s=0;for(let o=0;o<i;o++){const a=Math.abs(r[o]);a>s&&(s=a)}for(const o of n)for(let a=0;a<i;a++)o[a]/=s}}(e),{duration:t,length:e[0].length,sampleRate:e[0].length/t,numberOfChannels:e.length,getChannelData:n=>e==null?void 0:e[n],copyFromChannel:AudioBuffer.prototype.copyFromChannel,copyToChannel:AudioBuffer.prototype.copyToChannel}}};function Vve(e,t){const n=t.xmlns?document.createElementNS(t.xmlns,e):document.createElement(e);for(const[r,i]of Object.entries(t))if(r==="children")for(const[s,o]of Object.entries(t))typeof o=="string"?n.appendChild(document.createTextNode(o)):n.appendChild(Vve(s,o));else r==="style"?Object.assign(n.style,i):r==="textContent"?n.textContent=i:n.setAttribute(r,i.toString());return n}function vre(e,t,n){const r=Vve(e,t||{});return n==null||n.appendChild(r),r}var EJe=Object.freeze({__proto__:null,createElement:vre,default:vre});const _Je={fetchBlob:function(e,t,n){return qo(this,void 0,void 0,function*(){const r=yield fetch(e,n);if(r.status>=400)throw new Error(`Failed to fetch ${e}: ${r.status} (${r.statusText})`);return function(i,s){qo(this,void 0,void 0,function*(){if(!i.body||!i.headers)return;const o=i.body.getReader(),a=Number(i.headers.get("Content-Length"))||0;let l=0;const u=d=>qo(this,void 0,void 0,function*(){l+=(d==null?void 0:d.length)||0;const f=Math.round(l/a*100);s(f)}),c=()=>qo(this,void 0,void 0,function*(){let d;try{d=yield o.read()}catch{return}d.done||(u(d.value),yield c())});c()})}(r.clone(),t),r.blob()})}};let TJe=class extends JC{constructor(t){super(),this.isExternalMedia=!1,t.media?(this.media=t.media,this.isExternalMedia=!0):this.media=document.createElement("audio"),t.mediaControls&&(this.media.controls=!0),t.autoplay&&(this.media.autoplay=!0),t.playbackRate!=null&&this.onMediaEvent("canplay",()=>{t.playbackRate!=null&&(this.media.playbackRate=t.playbackRate)},{once:!0})}onMediaEvent(t,n,r){return this.media.addEventListener(t,n,r),()=>this.media.removeEventListener(t,n,r)}getSrc(){return this.media.currentSrc||this.media.src||""}revokeSrc(){const t=this.getSrc();t.startsWith("blob:")&&URL.revokeObjectURL(t)}canPlayType(t){return this.media.canPlayType(t)!==""}setSrc(t,n){const r=this.getSrc();if(t&&r===t)return;this.revokeSrc();const i=n instanceof Blob&&(this.canPlayType(n.type)||!t)?URL.createObjectURL(n):t;try{this.media.src=i}catch{this.media.src=t}}destroy(){this.media.pause(),this.isExternalMedia||(this.media.remove(),this.revokeSrc(),this.media.src="",this.media.load())}setMediaElement(t){this.media=t}play(){return qo(this,void 0,void 0,function*(){return this.media.play()})}pause(){this.media.pause()}isPlaying(){return!this.media.paused&&!this.media.ended}setTime(t){this.media.currentTime=t}getDuration(){return this.media.duration}getCurrentTime(){return this.media.currentTime}getVolume(){return this.media.volume}setVolume(t){this.media.volume=t}getMuted(){return this.media.muted}setMuted(t){this.media.muted=t}getPlaybackRate(){return this.media.playbackRate}isSeeking(){return this.media.seeking}setPlaybackRate(t,n){n!=null&&(this.media.preservesPitch=n),this.media.playbackRate=t}getMediaElement(){return this.media}setSinkId(t){return this.media.setSinkId(t)}},vj=class bj extends JC{constructor(t,n){super(),this.timeouts=[],this.isScrollable=!1,this.audioData=null,this.resizeObserver=null,this.lastContainerWidth=0,this.isDragging=!1,this.subscriptions=[],this.unsubscribeOnScroll=[],this.subscriptions=[],this.options=t;const r=this.parentFromOptionsContainer(t.container);this.parent=r;const[i,s]=this.initHtml();r.appendChild(i),this.container=i,this.scrollContainer=s.querySelector(".scroll"),this.wrapper=s.querySelector(".wrapper"),this.canvasWrapper=s.querySelector(".canvases"),this.progressWrapper=s.querySelector(".progress"),this.cursor=s.querySelector(".cursor"),n&&s.appendChild(n),this.initEvents()}parentFromOptionsContainer(t){let n;if(typeof t=="string"?n=document.querySelector(t):t instanceof HTMLElement&&(n=t),!n)throw new Error("Container not found");return n}initEvents(){const t=n=>{const r=this.wrapper.getBoundingClientRect(),i=n.clientX-r.left,s=n.clientY-r.top;return[i/r.width,s/r.height]};if(this.wrapper.addEventListener("click",n=>{const[r,i]=t(n);this.emit("click",r,i)}),this.wrapper.addEventListener("dblclick",n=>{const[r,i]=t(n);this.emit("dblclick",r,i)}),this.options.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.scrollContainer.addEventListener("scroll",()=>{const{scrollLeft:n,scrollWidth:r,clientWidth:i}=this.scrollContainer,s=n/r,o=(n+i)/r;this.emit("scroll",s,o,n,n+i)}),typeof ResizeObserver=="function"){const n=this.createDelay(100);this.resizeObserver=new ResizeObserver(()=>{n().then(()=>this.onContainerResize()).catch(()=>{})}),this.resizeObserver.observe(this.scrollContainer)}}onContainerResize(){const t=this.parent.clientWidth;t===this.lastContainerWidth&&this.options.height!=="auto"||(this.lastContainerWidth=t,this.reRender())}initDrag(){this.subscriptions.push(function(t,n,r,i,s=3,o=0,a=100){if(!t)return()=>{};const l=matchMedia("(pointer: coarse)").matches;let u=()=>{};const c=d=>{if(d.button!==o)return;d.preventDefault(),d.stopPropagation();let f=d.clientX,h=d.clientY,p=!1;const m=Date.now(),g=_=>{if(_.preventDefault(),_.stopPropagation(),l&&Date.now()-m<a)return;const C=_.clientX,S=_.clientY,k=C-f,R=S-h;if(p||Math.abs(k)>s||Math.abs(R)>s){const O=t.getBoundingClientRect(),{left:N,top:L}=O;p||(r==null||r(f-N,h-L),p=!0),n(k,R,C-N,S-L),f=C,h=S}},b=_=>{if(p){const C=_.clientX,S=_.clientY,k=t.getBoundingClientRect(),{left:R,top:O}=k;i==null||i(C-R,S-O)}u()},v=_=>{_.relatedTarget&&_.relatedTarget!==document.documentElement||b(_)},x=_=>{p&&(_.stopPropagation(),_.preventDefault())},E=_=>{p&&_.preventDefault()};document.addEventListener("pointermove",g),document.addEventListener("pointerup",b),document.addEventListener("pointerout",v),document.addEventListener("pointercancel",v),document.addEventListener("touchmove",E,{passive:!1}),document.addEventListener("click",x,{capture:!0}),u=()=>{document.removeEventListener("pointermove",g),document.removeEventListener("pointerup",b),document.removeEventListener("pointerout",v),document.removeEventListener("pointercancel",v),document.removeEventListener("touchmove",E),setTimeout(()=>{document.removeEventListener("click",x,{capture:!0})},10)}};return t.addEventListener("pointerdown",c),()=>{u(),t.removeEventListener("pointerdown",c)}}(this.wrapper,(t,n,r)=>{this.emit("drag",Math.max(0,Math.min(1,r/this.wrapper.getBoundingClientRect().width)))},t=>{this.isDragging=!0,this.emit("dragstart",Math.max(0,Math.min(1,t/this.wrapper.getBoundingClientRect().width)))},t=>{this.isDragging=!1,this.emit("dragend",Math.max(0,Math.min(1,t/this.wrapper.getBoundingClientRect().width)))}))}getHeight(t,n){var r;const i=((r=this.audioData)===null||r===void 0?void 0:r.numberOfChannels)||1;if(t==null)return 128;if(!isNaN(Number(t)))return Number(t);if(t==="auto"){const s=this.parent.clientHeight||128;return n!=null&&n.every(o=>!o.overlay)?s/i:s}return 128}initHtml(){const t=document.createElement("div"),n=t.attachShadow({mode:"open"}),r=this.options.cspNonce&&typeof this.options.cspNonce=="string"?this.options.cspNonce.replace(/"/g,""):"";return n.innerHTML=`
      <style${r?` nonce="${r}"`:""}>
        :host {
          user-select: none;
          min-width: 1px;
        }
        :host audio {
          display: block;
          width: 100%;
        }
        :host .scroll {
          overflow-x: auto;
          overflow-y: hidden;
          width: 100%;
          position: relative;
        }
        :host .noScrollbar {
          scrollbar-color: transparent;
          scrollbar-width: none;
        }
        :host .noScrollbar::-webkit-scrollbar {
          display: none;
          -webkit-appearance: none;
        }
        :host .wrapper {
          position: relative;
          overflow: visible;
          z-index: 2;
        }
        :host .canvases {
          min-height: ${this.getHeight(this.options.height,this.options.splitChannels)}px;
        }
        :host .canvases > div {
          position: relative;
        }
        :host canvas {
          display: block;
          position: absolute;
          top: 0;
          image-rendering: pixelated;
        }
        :host .progress {
          pointer-events: none;
          position: absolute;
          z-index: 2;
          top: 0;
          left: 0;
          width: 0;
          height: 100%;
          overflow: hidden;
        }
        :host .progress > div {
          position: relative;
        }
        :host .cursor {
          pointer-events: none;
          position: absolute;
          z-index: 5;
          top: 0;
          left: 0;
          height: 100%;
          border-radius: 2px;
        }
      </style>

      <div class="scroll" part="scroll">
        <div class="wrapper" part="wrapper">
          <div class="canvases" part="canvases"></div>
          <div class="progress" part="progress"></div>
          <div class="cursor" part="cursor"></div>
        </div>
      </div>
    `,[t,n]}setOptions(t){if(this.options.container!==t.container){const n=this.parentFromOptionsContainer(t.container);n.appendChild(this.container),this.parent=n}t.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.options=t,this.reRender()}getWrapper(){return this.wrapper}getWidth(){return this.scrollContainer.clientWidth}getScroll(){return this.scrollContainer.scrollLeft}setScroll(t){this.scrollContainer.scrollLeft=t}setScrollPercentage(t){const{scrollWidth:n}=this.scrollContainer,r=n*t;this.setScroll(r)}destroy(){var t,n;this.subscriptions.forEach(r=>r()),this.container.remove(),(t=this.resizeObserver)===null||t===void 0||t.disconnect(),(n=this.unsubscribeOnScroll)===null||n===void 0||n.forEach(r=>r()),this.unsubscribeOnScroll=[]}createDelay(t=10){let n,r;const i=()=>{n&&clearTimeout(n),r&&r()};return this.timeouts.push(i),()=>new Promise((s,o)=>{i(),r=o,n=setTimeout(()=>{n=void 0,r=void 0,s()},t)})}convertColorValues(t){if(!Array.isArray(t))return t||"";if(t.length<2)return t[0]||"";const n=document.createElement("canvas"),r=n.getContext("2d"),i=n.height*(window.devicePixelRatio||1),s=r.createLinearGradient(0,0,0,i),o=1/(t.length-1);return t.forEach((a,l)=>{const u=l*o;s.addColorStop(u,a)}),s}getPixelRatio(){return Math.max(1,window.devicePixelRatio||1)}renderBarWaveform(t,n,r,i){const s=t[0],o=t[1]||t[0],a=s.length,{width:l,height:u}=r.canvas,c=u/2,d=this.getPixelRatio(),f=n.barWidth?n.barWidth*d:1,h=n.barGap?n.barGap*d:n.barWidth?f/2:0,p=n.barRadius||0,m=l/(f+h)/a,g=p&&"roundRect"in r?"roundRect":"rect";r.beginPath();let b=0,v=0,x=0;for(let E=0;E<=a;E++){const _=Math.round(E*m);if(_>b){const k=Math.round(v*c*i),R=k+Math.round(x*c*i)||1;let O=c-k;n.barAlign==="top"?O=0:n.barAlign==="bottom"&&(O=u-R),r[g](b*(f+h),O,f,R,p),b=_,v=0,x=0}const C=Math.abs(s[E]||0),S=Math.abs(o[E]||0);C>v&&(v=C),S>x&&(x=S)}r.fill(),r.closePath()}renderLineWaveform(t,n,r,i){const s=o=>{const a=t[o]||t[0],l=a.length,{height:u}=r.canvas,c=u/2,d=r.canvas.width/l;r.moveTo(0,c);let f=0,h=0;for(let p=0;p<=l;p++){const m=Math.round(p*d);if(m>f){const b=c+(Math.round(h*c*i)||1)*(o===0?-1:1);r.lineTo(f,b),f=m,h=0}const g=Math.abs(a[p]||0);g>h&&(h=g)}r.lineTo(f,c)};r.beginPath(),s(0),s(1),r.fill(),r.closePath()}renderWaveform(t,n,r){if(r.fillStyle=this.convertColorValues(n.waveColor),n.renderFunction)return void n.renderFunction(t,r);let i=n.barHeight||1;if(n.normalize){const s=Array.from(t[0]).reduce((o,a)=>Math.max(o,Math.abs(a)),0);i=s?1/s:1}n.barWidth||n.barGap||n.barAlign?this.renderBarWaveform(t,n,r,i):this.renderLineWaveform(t,n,r,i)}renderSingleCanvas(t,n,r,i,s,o,a){const l=this.getPixelRatio(),u=document.createElement("canvas");u.width=Math.round(r*l),u.height=Math.round(i*l),u.style.width=`${r}px`,u.style.height=`${i}px`,u.style.left=`${Math.round(s)}px`,o.appendChild(u);const c=u.getContext("2d");if(this.renderWaveform(t,n,c),u.width>0&&u.height>0){const d=u.cloneNode(),f=d.getContext("2d");f.drawImage(u,0,0),f.globalCompositeOperation="source-in",f.fillStyle=this.convertColorValues(n.progressColor),f.fillRect(0,0,u.width,u.height),a.appendChild(d)}}renderMultiCanvas(t,n,r,i,s,o){const a=this.getPixelRatio(),{clientWidth:l}=this.scrollContainer,u=r/a;let c=Math.min(bj.MAX_CANVAS_WIDTH,l,u),d={};if(c===0)return;if(n.barWidth||n.barGap){const g=n.barWidth||.5,b=g+(n.barGap||g/2);c%b!=0&&(c=Math.floor(c/b)*b)}const f=g=>{if(g<0||g>=h||d[g])return;d[g]=!0;const b=g*c,v=Math.min(u-b,c);if(v<=0)return;const x=t.map(E=>{const _=Math.floor(b/u*E.length),C=Math.floor((b+v)/u*E.length);return E.slice(_,C)});this.renderSingleCanvas(x,n,v,i,b,s,o)},h=Math.ceil(u/c);if(!this.isScrollable){for(let g=0;g<h;g++)f(g);return}const p=this.scrollContainer.scrollLeft/u,m=Math.floor(p*h);if(f(m-1),f(m),f(m+1),h>1){const g=this.on("scroll",()=>{const{scrollLeft:b}=this.scrollContainer,v=Math.floor(b/u*h);Object.keys(d).length>bj.MAX_NODES&&(s.innerHTML="",o.innerHTML="",d={}),f(v-1),f(v),f(v+1)});this.unsubscribeOnScroll.push(g)}}renderChannel(t,n,r,i){var{overlay:s}=n,o=function(c,d){var f={};for(var h in c)Object.prototype.hasOwnProperty.call(c,h)&&d.indexOf(h)<0&&(f[h]=c[h]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function"){var p=0;for(h=Object.getOwnPropertySymbols(c);p<h.length;p++)d.indexOf(h[p])<0&&Object.prototype.propertyIsEnumerable.call(c,h[p])&&(f[h[p]]=c[h[p]])}return f}(n,["overlay"]);const a=document.createElement("div"),l=this.getHeight(o.height,o.splitChannels);a.style.height=`${l}px`,s&&i>0&&(a.style.marginTop=`-${l}px`),this.canvasWrapper.style.minHeight=`${l}px`,this.canvasWrapper.appendChild(a);const u=a.cloneNode();this.progressWrapper.appendChild(u),this.renderMultiCanvas(t,o,r,l,a,u)}render(t){return qo(this,void 0,void 0,function*(){var n;this.timeouts.forEach(l=>l()),this.timeouts=[],this.canvasWrapper.innerHTML="",this.progressWrapper.innerHTML="",this.options.width!=null&&(this.scrollContainer.style.width=typeof this.options.width=="number"?`${this.options.width}px`:this.options.width);const r=this.getPixelRatio(),i=this.scrollContainer.clientWidth,s=Math.ceil(t.duration*(this.options.minPxPerSec||0));this.isScrollable=s>i;const o=this.options.fillParent&&!this.isScrollable,a=(o?i:s)*r;if(this.wrapper.style.width=o?"100%":`${s}px`,this.scrollContainer.style.overflowX=this.isScrollable?"auto":"hidden",this.scrollContainer.classList.toggle("noScrollbar",!!this.options.hideScrollbar),this.cursor.style.backgroundColor=`${this.options.cursorColor||this.options.progressColor}`,this.cursor.style.width=`${this.options.cursorWidth}px`,this.audioData=t,this.emit("render"),this.options.splitChannels)for(let l=0;l<t.numberOfChannels;l++){const u=Object.assign(Object.assign({},this.options),(n=this.options.splitChannels)===null||n===void 0?void 0:n[l]);this.renderChannel([t.getChannelData(l)],u,a,l)}else{const l=[t.getChannelData(0)];t.numberOfChannels>1&&l.push(t.getChannelData(1)),this.renderChannel(l,this.options,a,0)}Promise.resolve().then(()=>this.emit("rendered"))})}reRender(){if(this.unsubscribeOnScroll.forEach(r=>r()),this.unsubscribeOnScroll=[],!this.audioData)return;const{scrollWidth:t}=this.scrollContainer,{right:n}=this.progressWrapper.getBoundingClientRect();if(this.render(this.audioData),this.isScrollable&&t!==this.scrollContainer.scrollWidth){const{right:r}=this.progressWrapper.getBoundingClientRect();let i=r-n;i*=2,i=i<0?Math.floor(i):Math.ceil(i),i/=2,this.scrollContainer.scrollLeft+=i}}zoom(t){this.options.minPxPerSec=t,this.reRender()}scrollIntoView(t,n=!1){const{scrollLeft:r,scrollWidth:i,clientWidth:s}=this.scrollContainer,o=t*i,a=r,l=r+s,u=s/2;if(this.isDragging)o+30>l?this.scrollContainer.scrollLeft+=30:o-30<a&&(this.scrollContainer.scrollLeft-=30);else{(o<a||o>l)&&(this.scrollContainer.scrollLeft=o-(this.options.autoCenter?u:0));const c=o-r-u;n&&this.options.autoCenter&&c>0&&(this.scrollContainer.scrollLeft+=Math.min(c,10))}{const c=this.scrollContainer.scrollLeft,d=c/i,f=(c+s)/i;this.emit("scroll",d,f,c,c+s)}}renderProgress(t,n){if(isNaN(t))return;const r=100*t;this.canvasWrapper.style.clipPath=`polygon(${r}% 0, 100% 0, 100% 100%, ${r}% 100%)`,this.progressWrapper.style.width=`${r}%`,this.cursor.style.left=`${r}%`,this.cursor.style.transform=`translateX(-${Math.round(r)===100?this.options.cursorWidth:0}px)`,this.isScrollable&&this.options.autoScroll&&this.scrollIntoView(t,n)}exportImage(t,n,r){return qo(this,void 0,void 0,function*(){const i=this.canvasWrapper.querySelectorAll("canvas");if(!i.length)throw new Error("No waveform data");if(r==="dataURL"){const s=Array.from(i).map(o=>o.toDataURL(t,n));return Promise.resolve(s)}return Promise.all(Array.from(i).map(s=>new Promise((o,a)=>{s.toBlob(l=>{l?o(l):a(new Error("Could not export image"))},t,n)})))})}};vj.MAX_CANVAS_WIDTH=8e3,vj.MAX_NODES=10;let CJe=class extends JC{constructor(){super(...arguments),this.unsubscribe=()=>{}}start(){this.unsubscribe=this.on("tick",()=>{requestAnimationFrame(()=>{this.emit("tick")})}),this.emit("tick")}stop(){this.unsubscribe()}destroy(){this.unsubscribe()}},bre=class extends JC{constructor(t=new AudioContext){super(),this.bufferNode=null,this.playStartTime=0,this.playedDuration=0,this._muted=!1,this._playbackRate=1,this._duration=void 0,this.buffer=null,this.currentSrc="",this.paused=!0,this.crossOrigin=null,this.seeking=!1,this.autoplay=!1,this.addEventListener=this.on,this.removeEventListener=this.un,this.audioContext=t,this.gainNode=this.audioContext.createGain(),this.gainNode.connect(this.audioContext.destination)}load(){return qo(this,void 0,void 0,function*(){})}get src(){return this.currentSrc}set src(t){if(this.currentSrc=t,this._duration=void 0,!t)return this.buffer=null,void this.emit("emptied");fetch(t).then(n=>{if(n.status>=400)throw new Error(`Failed to fetch ${t}: ${n.status} (${n.statusText})`);return n.arrayBuffer()}).then(n=>this.currentSrc!==t?null:this.audioContext.decodeAudioData(n)).then(n=>{this.currentSrc===t&&(this.buffer=n,this.emit("loadedmetadata"),this.emit("canplay"),this.autoplay&&this.play())})}_play(){var t;if(!this.paused)return;this.paused=!1,(t=this.bufferNode)===null||t===void 0||t.disconnect(),this.bufferNode=this.audioContext.createBufferSource(),this.buffer&&(this.bufferNode.buffer=this.buffer),this.bufferNode.playbackRate.value=this._playbackRate,this.bufferNode.connect(this.gainNode);let n=this.playedDuration*this._playbackRate;n>=this.duration&&(n=0,this.playedDuration=0),this.bufferNode.start(this.audioContext.currentTime,n),this.playStartTime=this.audioContext.currentTime,this.bufferNode.onended=()=>{this.currentTime>=this.duration&&(this.pause(),this.emit("ended"))}}_pause(){var t;this.paused=!0,(t=this.bufferNode)===null||t===void 0||t.stop(),this.playedDuration+=this.audioContext.currentTime-this.playStartTime}play(){return qo(this,void 0,void 0,function*(){this.paused&&(this._play(),this.emit("play"))})}pause(){this.paused||(this._pause(),this.emit("pause"))}stopAt(t){var n,r;const i=t-this.currentTime;(n=this.bufferNode)===null||n===void 0||n.stop(this.audioContext.currentTime+i),(r=this.bufferNode)===null||r===void 0||r.addEventListener("ended",()=>{this.bufferNode=null,this.pause()},{once:!0})}setSinkId(t){return qo(this,void 0,void 0,function*(){return this.audioContext.setSinkId(t)})}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t,this.bufferNode&&(this.bufferNode.playbackRate.value=t)}get currentTime(){return(this.paused?this.playedDuration:this.playedDuration+(this.audioContext.currentTime-this.playStartTime))*this._playbackRate}set currentTime(t){const n=!this.paused;n&&this._pause(),this.playedDuration=t/this._playbackRate,n&&this._play(),this.emit("seeking"),this.emit("timeupdate")}get duration(){var t,n;return(t=this._duration)!==null&&t!==void 0?t:((n=this.buffer)===null||n===void 0?void 0:n.duration)||0}set duration(t){this._duration=t}get volume(){return this.gainNode.gain.value}set volume(t){this.gainNode.gain.value=t,this.emit("volumechange")}get muted(){return this._muted}set muted(t){this._muted!==t&&(this._muted=t,this._muted?this.gainNode.disconnect():this.gainNode.connect(this.audioContext.destination))}canPlayType(t){return/^(audio|video)\//.test(t)}getGainNode(){return this.gainNode}getChannelData(){const t=[];if(!this.buffer)return t;const n=this.buffer.numberOfChannels;for(let r=0;r<n;r++)t.push(this.buffer.getChannelData(r));return t}};const SJe={waveColor:"#999",progressColor:"#555",cursorWidth:1,minPxPerSec:0,fillParent:!0,interact:!0,dragToSeek:!1,autoScroll:!0,autoCenter:!0,sampleRate:8e3};let wj=class Gve extends TJe{static create(t){return new Gve(t)}constructor(t){const n=t.media||(t.backend==="WebAudio"?new bre:void 0);super({media:n,mediaControls:t.mediaControls,autoplay:t.autoplay,playbackRate:t.audioRate}),this.plugins=[],this.decodedData=null,this.subscriptions=[],this.mediaSubscriptions=[],this.abortController=null,this.options=Object.assign({},SJe,t),this.timer=new CJe;const r=n?void 0:this.getMediaElement();this.renderer=new vj(this.options,r),this.initPlayerEvents(),this.initRendererEvents(),this.initTimerEvents(),this.initPlugins();const i=this.options.url||this.getSrc()||"";Promise.resolve().then(()=>{this.emit("init");const{peaks:s,duration:o}=this.options;(i||s&&o)&&this.load(i,s,o).catch(()=>null)})}updateProgress(t=this.getCurrentTime()){return this.renderer.renderProgress(t/this.getDuration(),this.isPlaying()),t}initTimerEvents(){this.subscriptions.push(this.timer.on("tick",()=>{if(!this.isSeeking()){const t=this.updateProgress();this.emit("timeupdate",t),this.emit("audioprocess",t)}}))}initPlayerEvents(){this.isPlaying()&&(this.emit("play"),this.timer.start()),this.mediaSubscriptions.push(this.onMediaEvent("timeupdate",()=>{const t=this.updateProgress();this.emit("timeupdate",t)}),this.onMediaEvent("play",()=>{this.emit("play"),this.timer.start()}),this.onMediaEvent("pause",()=>{this.emit("pause"),this.timer.stop()}),this.onMediaEvent("emptied",()=>{this.timer.stop()}),this.onMediaEvent("ended",()=>{this.emit("timeupdate",this.getDuration()),this.emit("finish")}),this.onMediaEvent("seeking",()=>{this.emit("seeking",this.getCurrentTime())}),this.onMediaEvent("error",t=>{var n;this.emit("error",(n=this.getMediaElement().error)!==null&&n!==void 0?n:new Error("Media error"))}))}initRendererEvents(){this.subscriptions.push(this.renderer.on("click",(t,n)=>{this.options.interact&&(this.seekTo(t),this.emit("interaction",t*this.getDuration()),this.emit("click",t,n))}),this.renderer.on("dblclick",(t,n)=>{this.emit("dblclick",t,n)}),this.renderer.on("scroll",(t,n,r,i)=>{const s=this.getDuration();this.emit("scroll",t*s,n*s,r,i)}),this.renderer.on("render",()=>{this.emit("redraw")}),this.renderer.on("rendered",()=>{this.emit("redrawcomplete")}),this.renderer.on("dragstart",t=>{this.emit("dragstart",t)}),this.renderer.on("dragend",t=>{this.emit("dragend",t)}));{let t;this.subscriptions.push(this.renderer.on("drag",n=>{if(!this.options.interact)return;let r;this.renderer.renderProgress(n),clearTimeout(t),this.isPlaying()?r=0:this.options.dragToSeek===!0?r=200:typeof this.options.dragToSeek=="object"&&this.options.dragToSeek!==void 0&&(r=this.options.dragToSeek.debounceTime),t=setTimeout(()=>{this.seekTo(n)},r),this.emit("interaction",n*this.getDuration()),this.emit("drag",n)}))}}initPlugins(){var t;!((t=this.options.plugins)===null||t===void 0)&&t.length&&this.options.plugins.forEach(n=>{this.registerPlugin(n)})}unsubscribePlayerEvents(){this.mediaSubscriptions.forEach(t=>t()),this.mediaSubscriptions=[]}setOptions(t){this.options=Object.assign({},this.options,t),t.duration&&!t.peaks&&(this.decodedData=kk.createBuffer(this.exportPeaks(),t.duration)),t.peaks&&t.duration&&(this.decodedData=kk.createBuffer(t.peaks,t.duration)),this.renderer.setOptions(this.options),t.audioRate&&this.setPlaybackRate(t.audioRate),t.mediaControls!=null&&(this.getMediaElement().controls=t.mediaControls)}registerPlugin(t){return t._init(this),this.plugins.push(t),this.subscriptions.push(t.once("destroy",()=>{this.plugins=this.plugins.filter(n=>n!==t)})),t}getWrapper(){return this.renderer.getWrapper()}getWidth(){return this.renderer.getWidth()}getScroll(){return this.renderer.getScroll()}setScroll(t){return this.renderer.setScroll(t)}setScrollTime(t){const n=t/this.getDuration();this.renderer.setScrollPercentage(n)}getActivePlugins(){return this.plugins}loadAudio(t,n,r,i){return qo(this,void 0,void 0,function*(){var s;if(this.emit("load",t),!this.options.media&&this.isPlaying()&&this.pause(),this.decodedData=null,!n&&!r){const a=this.options.fetchParams||{};window.AbortController&&!a.signal&&(this.abortController=new AbortController,a.signal=(s=this.abortController)===null||s===void 0?void 0:s.signal);const l=c=>this.emit("loading",c);n=yield _Je.fetchBlob(t,l,a);const u=this.options.blobMimeType;u&&(n=new Blob([n],{type:u}))}this.setSrc(t,n);const o=yield new Promise(a=>{const l=i||this.getDuration();l?a(l):this.mediaSubscriptions.push(this.onMediaEvent("loadedmetadata",()=>a(this.getDuration()),{once:!0}))});if(!t&&!n){const a=this.getMediaElement();a instanceof bre&&(a.duration=o)}if(r)this.decodedData=kk.createBuffer(r,o||0);else if(n){const a=yield n.arrayBuffer();this.decodedData=yield kk.decode(a,this.options.sampleRate)}this.decodedData&&(this.emit("decode",this.getDuration()),this.renderer.render(this.decodedData)),this.emit("ready",this.getDuration())})}load(t,n,r){return qo(this,void 0,void 0,function*(){try{return yield this.loadAudio(t,void 0,n,r)}catch(i){throw this.emit("error",i),i}})}loadBlob(t,n,r){return qo(this,void 0,void 0,function*(){try{return yield this.loadAudio("",t,n,r)}catch(i){throw this.emit("error",i),i}})}zoom(t){if(!this.decodedData)throw new Error("No audio loaded");this.renderer.zoom(t),this.emit("zoom",t)}getDecodedData(){return this.decodedData}exportPeaks({channels:t=2,maxLength:n=8e3,precision:r=1e4}={}){if(!this.decodedData)throw new Error("The audio has not been decoded yet");const i=Math.min(t,this.decodedData.numberOfChannels),s=[];for(let o=0;o<i;o++){const a=this.decodedData.getChannelData(o),l=[],u=a.length/n;for(let c=0;c<n;c++){const d=a.slice(Math.floor(c*u),Math.ceil((c+1)*u));let f=0;for(let h=0;h<d.length;h++){const p=d[h];Math.abs(p)>Math.abs(f)&&(f=p)}l.push(Math.round(f*r)/r)}s.push(l)}return s}getDuration(){let t=super.getDuration()||0;return t!==0&&t!==1/0||!this.decodedData||(t=this.decodedData.duration),t}toggleInteraction(t){this.options.interact=t}setTime(t){super.setTime(t),this.updateProgress(t),this.emit("timeupdate",t)}seekTo(t){const n=this.getDuration()*t;this.setTime(n)}playPause(){return qo(this,void 0,void 0,function*(){return this.isPlaying()?this.pause():this.play()})}stop(){this.pause(),this.setTime(0)}skip(t){this.setTime(this.getCurrentTime()+t)}empty(){this.load("",[[0]],.001)}setMediaElement(t){this.unsubscribePlayerEvents(),super.setMediaElement(t),this.initPlayerEvents()}exportImage(){return qo(this,arguments,void 0,function*(t="image/png",n=1,r="dataURL"){return this.renderer.exportImage(t,n,r)})}destroy(){var t;this.emit("destroy"),(t=this.abortController)===null||t===void 0||t.abort(),this.plugins.forEach(n=>n.destroy()),this.subscriptions.forEach(n=>n()),this.unsubscribePlayerEvents(),this.timer.destroy(),this.renderer.destroy(),super.destroy()}};wj.BasePlugin=class extends JC{constructor(e){super(),this.subscriptions=[],this.options=e}onInit(){}_init(e){this.wavesurfer=e,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach(e=>e())}},wj.dom=EJe;function AJe(e){return wj.create(e)}function kJe(e){const{plugin:t,options:n,creator:r="create"}=e,i=t[r];if(!t)throw new Error("Please pass a valid plugin in plugin list");if(!r)throw new Error("Please pass the creator function name in 'creator' property.");if(typeof i!="function")throw new Error(`"${r}" is not callable on given plugin. Please pass a valid 'creator' in plugins list.`);return i(n)}const wre=e=>e.reduce((t,n)=>(t[n[0]]=n[1],t),{}),IJe=(e,t)=>{const n=Object.entries(e),r=Object.entries(t),i=n.filter(([o])=>r.findIndex(([a])=>a===o)===-1),s=r.filter(([o])=>n.findIndex(([a])=>a===o)===-1);return{disabled:wre(i),enabled:wre(s)}};function xre(e,t){const n={},r=[...t];for(;r.length>=1;){const i=r.shift();!!e[i.key]?n[i.key]=e[i.key]:n[i.key]=kJe(i)}return n}function RJe({container:e,plugins:t=[],onMount:n,...r}){const i=D.useRef(!1),[s,o]=D.useState({}),a=D.useRef([]),[l,u]=D.useState(null);return D.useEffect(()=>{if(!e)return;const c=e;if(i.current)return;i.current=!0;const d=xre(s,t);a.current=Object.keys(d);const f=AJe({container:e,...r,plugins:Object.values(d)});return n==null||n(f),o(d),u(f),()=>{c!==e&&f.destroy()}},[e]),D.useEffect(()=>{if(l){const c=xre(s,t),{disabled:d,enabled:f}=IJe(s,c);Object.keys(d).forEach(h=>{d[h].destroy()}),Object.keys(f).forEach(h=>{a.current.includes(h)||(console.log("register plugin",h,f[h]),l==null||l.registerPlugin(f[h]))}),a.current=Object.keys(f),o(c)}},[t]),[l,s,Object.values(s)]}function Yve({children:e,plugins:t=[],onMount:n,...r}){const i=RJe({plugins:t,onMount:n,...r});return Jn.createElement(xJe.Provider,{value:i},e)}const Kve=({id:e="waveform",children:t})=>Jn.createElement("div",{id:e},t);function IM(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(u){try{l(r.next(u))}catch(c){s(c)}}function a(u){try{l(r.throw(u))}catch(c){s(c)}}function l(u){var c;u.done?i(u.value):(c=u.value,c instanceof n?c:new n(function(d){d(c)})).then(o,a)}l((r=r.apply(e,[])).next())})}let Xve=class{constructor(){this.listeners={}}on(t,n,r){if(this.listeners[t]||(this.listeners[t]=new Set),this.listeners[t].add(n),r==null?void 0:r.once){const i=()=>{this.un(t,i),this.un(t,n)};return this.on(t,i),i}return()=>this.un(t,n)}un(t,n){var r;(r=this.listeners[t])===null||r===void 0||r.delete(n)}once(t,n){return this.on(t,n,{once:!0})}unAll(){this.listeners={}}emit(t,...n){this.listeners[t]&&this.listeners[t].forEach(r=>r(...n))}},DJe=class extends Xve{constructor(t){super(),this.subscriptions=[],this.options=t}onInit(){}_init(t){this.wavesurfer=t,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach(t=>t())}},PJe=class extends Xve{constructor(){super(...arguments),this.unsubscribe=()=>{}}start(){this.unsubscribe=this.on("tick",()=>{requestAnimationFrame(()=>{this.emit("tick")})}),this.emit("tick")}stop(){this.unsubscribe()}destroy(){this.unsubscribe()}};const NJe=["audio/webm","audio/wav","audio/mpeg","audio/mp4","audio/mp3"];let OJe=class Qve extends DJe{constructor(t){var n,r,i,s,o,a;super(Object.assign(Object.assign({},t),{audioBitsPerSecond:(n=t.audioBitsPerSecond)!==null&&n!==void 0?n:128e3,scrollingWaveform:(r=t.scrollingWaveform)!==null&&r!==void 0&&r,scrollingWaveformWindow:(i=t.scrollingWaveformWindow)!==null&&i!==void 0?i:5,continuousWaveform:(s=t.continuousWaveform)!==null&&s!==void 0&&s,renderRecordedAudio:(o=t.renderRecordedAudio)===null||o===void 0||o,mediaRecorderTimeslice:(a=t.mediaRecorderTimeslice)!==null&&a!==void 0?a:void 0})),this.stream=null,this.mediaRecorder=null,this.dataWindow=null,this.isWaveformPaused=!1,this.lastStartTime=0,this.lastDuration=0,this.duration=0,this.timer=new PJe,this.subscriptions.push(this.timer.on("tick",()=>{const l=performance.now()-this.lastStartTime;this.duration=this.isPaused()?this.duration:this.lastDuration+l,this.emit("record-progress",this.duration)}))}static create(t){return new Qve(t||{})}renderMicStream(t){var n;const r=new AudioContext,i=r.createMediaStreamSource(t),s=r.createAnalyser();i.connect(s),this.options.continuousWaveform&&(s.fftSize=32);const o=s.frequencyBinCount,a=new Float32Array(o);let l=0;this.wavesurfer&&((n=this.originalOptions)!==null&&n!==void 0||(this.originalOptions=Object.assign({},this.wavesurfer.options)),this.wavesurfer.options.interact=!1,this.options.scrollingWaveform&&(this.wavesurfer.options.cursorWidth=0));const u=setInterval(()=>{var c,d,f,h;if(!this.isWaveformPaused){if(s.getFloatTimeDomainData(a),this.options.scrollingWaveform){const p=Math.floor((this.options.scrollingWaveformWindow||0)*r.sampleRate),m=Math.min(p,this.dataWindow?this.dataWindow.length+o:o),g=new Float32Array(p);if(this.dataWindow){const b=Math.max(0,p-this.dataWindow.length);g.set(this.dataWindow.slice(-m+o),b)}g.set(a,p-o),this.dataWindow=g}else if(this.options.continuousWaveform){if(!this.dataWindow){const m=this.options.continuousWaveformDuration?Math.round(100*this.options.continuousWaveformDuration):((d=(c=this.wavesurfer)===null||c===void 0?void 0:c.getWidth())!==null&&d!==void 0?d:0)*window.devicePixelRatio;this.dataWindow=new Float32Array(m)}let p=0;for(let m=0;m<o;m++){const g=Math.abs(a[m]);g>p&&(p=g)}if(l+1>this.dataWindow.length){const m=new Float32Array(2*this.dataWindow.length);m.set(this.dataWindow,0),this.dataWindow=m}this.dataWindow[l]=p,l++}else this.dataWindow=a;if(this.wavesurfer){const p=((h=(f=this.dataWindow)===null||f===void 0?void 0:f.length)!==null&&h!==void 0?h:0)/100;this.wavesurfer.load("",[this.dataWindow],this.options.scrollingWaveform?this.options.scrollingWaveformWindow:p).then(()=>{this.wavesurfer&&this.options.continuousWaveform&&(this.wavesurfer.setTime(this.getDuration()/1e3),this.wavesurfer.options.minPxPerSec||this.wavesurfer.setOptions({minPxPerSec:this.wavesurfer.getWidth()/this.wavesurfer.getDuration()}))}).catch(m=>{console.error("Error rendering real-time recording data:",m)})}}},10);return{onDestroy:()=>{clearInterval(u),i==null||i.disconnect(),r==null||r.close()},onEnd:()=>{this.isWaveformPaused=!0,clearInterval(u),this.stopMic()}}}startMic(t){return IM(this,void 0,void 0,function*(){let n;try{n=yield navigator.mediaDevices.getUserMedia({audio:!(t!=null&&t.deviceId)||{deviceId:t.deviceId}})}catch(s){throw new Error("Error accessing the microphone: "+s.message)}const{onDestroy:r,onEnd:i}=this.renderMicStream(n);return this.subscriptions.push(this.once("destroy",r)),this.subscriptions.push(this.once("record-end",i)),this.stream=n,n})}stopMic(){this.stream&&(this.stream.getTracks().forEach(t=>t.stop()),this.stream=null,this.mediaRecorder=null)}startRecording(t){return IM(this,void 0,void 0,function*(){const n=this.stream||(yield this.startMic(t));this.dataWindow=null;const r=this.mediaRecorder||new MediaRecorder(n,{mimeType:this.options.mimeType||NJe.find(o=>MediaRecorder.isTypeSupported(o)),audioBitsPerSecond:this.options.audioBitsPerSecond});this.mediaRecorder=r,this.stopRecording();const i=[];r.ondataavailable=o=>{o.data.size>0&&i.push(o.data),this.emit("record-data-available",o.data)};const s=o=>{var a;const l=new Blob(i,{type:r.mimeType});this.emit(o,l),this.options.renderRecordedAudio&&(this.applyOriginalOptionsIfNeeded(),(a=this.wavesurfer)===null||a===void 0||a.load(URL.createObjectURL(l)))};r.onpause=()=>s("record-pause"),r.onstop=()=>s("record-end"),r.start(this.options.mediaRecorderTimeslice),this.lastStartTime=performance.now(),this.lastDuration=0,this.duration=0,this.isWaveformPaused=!1,this.timer.start(),this.emit("record-start")})}getDuration(){return this.duration}isRecording(){var t;return((t=this.mediaRecorder)===null||t===void 0?void 0:t.state)==="recording"}isPaused(){var t;return((t=this.mediaRecorder)===null||t===void 0?void 0:t.state)==="paused"}isActive(){var t;return((t=this.mediaRecorder)===null||t===void 0?void 0:t.state)!=="inactive"}stopRecording(){var t;this.isActive()&&((t=this.mediaRecorder)===null||t===void 0||t.stop(),this.timer.stop())}pauseRecording(){var t,n;this.isRecording()&&(this.isWaveformPaused=!0,(t=this.mediaRecorder)===null||t===void 0||t.requestData(),(n=this.mediaRecorder)===null||n===void 0||n.pause(),this.timer.stop(),this.lastDuration=this.duration)}resumeRecording(){var t;this.isPaused()&&(this.isWaveformPaused=!1,(t=this.mediaRecorder)===null||t===void 0||t.resume(),this.timer.start(),this.lastStartTime=performance.now(),this.emit("record-resume"))}static getAvailableAudioDevices(){return IM(this,void 0,void 0,function*(){return navigator.mediaDevices.enumerateDevices().then(t=>t.filter(n=>n.kind==="audioinput"))})}destroy(){this.applyOriginalOptionsIfNeeded(),super.destroy(),this.stopRecording(),this.stopMic()}applyOriginalOptionsIfNeeded(){this.wavesurfer&&this.originalOptions&&(this.wavesurfer.setOptions(this.originalOptions),delete this.originalOptions)}};function Jve({width:e=70,height:t=36}){const n=D.useRef(null),r=D.useRef(null),[i,s]=D.useState(!1);D.useEffect(()=>{if(i&&n.current){const a=n.current.registerPlugin(OJe.create({scrollingWaveform:!0,renderRecordedAudio:!1}));r.current=a,navigator.userAgent.includes("Firefox")||a.startRecording(),n.current.setOptions({height:t,waveColor:"#FA5252"})}return()=>{var a,l;i&&n.current&&((a=r.current)==null||a.stopRecording(),(l=r.current)==null||l.destroy(),n.current.destroy())}},[i]);const o=D.useCallback(a=>{n.current=a,s(!0)},[]);return T.jsx(Se,{id:"waveformDiv",style:{width:`${e}px`,height:`${t}px`},children:T.jsx(Yve,{onMount:o,plugins:[],container:"#waveformDiv",height:t,children:T.jsx(Kve,{id:"waveform",height:t})})})}function Ere({setAnswer:e}){return D.useEffect(()=>{navigator.mediaDevices.getUserMedia({audio:!0}).then(n=>{new MediaRecorder(n).start();const i=new AudioContext,s=i.createMediaStreamSource(n),o=i.createAnalyser();o.minDecibels=-45,s.connect(o);const a=o.frequencyBinCount,l=new Uint8Array(a);let u=!1;const c=()=>{if(!u){o.getByteFrequencyData(l);for(let d=0;d<a;d+=1)l[d]>0&&(u=!0,e({status:!0,provenanceGraph:void 0,answers:{audioTest:!0}}));window.requestAnimationFrame(c)}};window.requestAnimationFrame(c)})},[e]),T.jsx(Jc,{style:{height:"70%",width:"100%"},children:T.jsxs(Ms,{children:[T.jsx(Ve,{ta:"center",children:"Please allow us to access your microphone. There may be a popup in your browser window asking for access, click accept."}),T.jsx(Ve,{ta:"center",children:"Once we can confirm that your microphone is on and we hear you say something, the continue button will become available."}),T.jsx(Ve,{ta:"center",style:{fontWeight:700},children:"If you are not comfortable or able to speak English during this study, please return the study."}),T.jsx(Jc,{children:T.jsx(Jve,{height:200,width:400})})]})})}const Zve=Object.freeze(Object.defineProperty({__proto__:null,AudioTest:Ere,default:Ere},Symbol.toStringTag,{value:"Module"}));function $Je(){return T.jsx("div",{children:"test react file"})}const e1e=Object.freeze(Object.defineProperty({__proto__:null,default:$Je},Symbol.toStringTag,{value:"Module"}));function kc(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function m0(e){return!!e&&!!e[ni]}function wp(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===HJe}(e)||Array.isArray(e)||!!e[Ire]||!!(!((t=e.constructor)===null||t===void 0)&&t[Ire])||GH(e)||YH(e))}function zy(e,t,n){n===void 0&&(n=!1),Wx(e)===0?(n?Object.keys:Jb)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function Wx(e){var t=e[ni];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:GH(e)?2:YH(e)?3:0}function Qb(e,t){return Wx(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function MJe(e,t){return Wx(e)===2?e.get(t):e[t]}function t1e(e,t,n){var r=Wx(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function n1e(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function GH(e){return UJe&&e instanceof Map}function YH(e){return qJe&&e instanceof Set}function Vg(e){return e.o||e.t}function KH(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=i1e(e);delete t[ni];for(var n=Jb(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function XH(e,t){return t===void 0&&(t=!1),QH(e)||m0(e)||!wp(e)||(Wx(e)>1&&(e.set=e.add=e.clear=e.delete=LJe),Object.freeze(e),t&&zy(e,function(n,r){return XH(r,!0)},!0)),e}function LJe(){kc(2)}function QH(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function cf(e){var t=Tj[e];return t||kc(18,e),t}function FJe(e,t){Tj[e]||(Tj[e]=t)}function xj(){return DT}function RM(e,t){t&&(cf("Patches"),e.u=[],e.s=[],e.v=t)}function OD(e){Ej(e),e.p.forEach(jJe),e.p=null}function Ej(e){e===DT&&(DT=e.l)}function _re(e){return DT={p:[],l:DT,h:e,m:!0,_:0}}function jJe(e){var t=e[ni];t.i===0||t.i===1?t.j():t.g=!0}function DM(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.O||cf("ES5").S(t,e,r),r?(n[ni].P&&(OD(t),kc(4)),wp(e)&&(e=$D(t,e),t.l||MD(t,e)),t.u&&cf("Patches").M(n[ni].t,e,t.u,t.s)):e=$D(t,n,[]),OD(t),t.u&&t.v(t.u,t.s),e!==r1e?e:void 0}function $D(e,t,n){if(QH(t))return t;var r=t[ni];if(!r)return zy(t,function(a,l){return Tre(e,r,t,a,l,n)},!0),t;if(r.A!==e)return t;if(!r.P)return MD(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=KH(r.k):r.o,s=i,o=!1;r.i===3&&(s=new Set(i),i.clear(),o=!0),zy(s,function(a,l){return Tre(e,r,i,a,l,n,o)}),MD(e,i,!1),n&&e.u&&cf("Patches").N(r,n,e.u,e.s)}return r.o}function Tre(e,t,n,r,i,s,o){if(m0(i)){var a=$D(e,i,s&&t&&t.i!==3&&!Qb(t.R,r)?s.concat(r):void 0);if(t1e(n,r,a),!m0(a))return;e.m=!1}else o&&n.add(i);if(wp(i)&&!QH(i)){if(!e.h.D&&e._<1)return;$D(e,i),t&&t.A.l||MD(e,i)}}function MD(e,t,n){n===void 0&&(n=!1),!e.l&&e.h.D&&e.m&&XH(t,n)}function PM(e,t){var n=e[ni];return(n?Vg(n):e)[t]}function Cre(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function Um(e){e.P||(e.P=!0,e.l&&Um(e.l))}function NM(e){e.o||(e.o=KH(e.t))}function _j(e,t,n){var r=GH(t)?cf("MapSet").F(t,n):YH(t)?cf("MapSet").T(t,n):e.O?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:xj(),P:!1,I:!1,R:{},l:s,t:i,k:null,o:null,j:null,C:!1},l=a,u=PT;o&&(l=[a],u=X_);var c=Proxy.revocable(l,u),d=c.revoke,f=c.proxy;return a.k=f,a.j=d,f}(t,n):cf("ES5").J(t,n);return(n?n.A:xj()).p.push(r),r}function BJe(e){return m0(e)||kc(22,e),function t(n){if(!wp(n))return n;var r,i=n[ni],s=Wx(n);if(i){if(!i.P&&(i.i<4||!cf("ES5").K(i)))return i.t;i.I=!0,r=Sre(n,s),i.I=!1}else r=Sre(n,s);return zy(r,function(o,a){i&&MJe(i.t,o)===a||t1e(r,o,t(a))}),s===3?new Set(r):r}(e)}function Sre(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return KH(e)}function zJe(){function e(s,o){var a=i[s];return a?a.enumerable=o:i[s]=a={configurable:!0,enumerable:o,get:function(){var l=this[ni];return PT.get(l,s)},set:function(l){var u=this[ni];PT.set(u,s,l)}},a}function t(s){for(var o=s.length-1;o>=0;o--){var a=s[o][ni];if(!a.P)switch(a.i){case 5:r(a)&&Um(a);break;case 4:n(a)&&Um(a)}}}function n(s){for(var o=s.t,a=s.k,l=Jb(a),u=l.length-1;u>=0;u--){var c=l[u];if(c!==ni){var d=o[c];if(d===void 0&&!Qb(o,c))return!0;var f=a[c],h=f&&f[ni];if(h?h.t!==d:!n1e(f,d))return!0}}var p=!!o[ni];return l.length!==Jb(o).length+(p?0:1)}function r(s){var o=s.k;if(o.length!==s.t.length)return!0;var a=Object.getOwnPropertyDescriptor(o,o.length-1);if(a&&!a.get)return!0;for(var l=0;l<o.length;l++)if(!o.hasOwnProperty(l))return!0;return!1}var i={};FJe("ES5",{J:function(s,o){var a=Array.isArray(s),l=function(c,d){if(c){for(var f=Array(d.length),h=0;h<d.length;h++)Object.defineProperty(f,""+h,e(h,!0));return f}var p=i1e(d);delete p[ni];for(var m=Jb(p),g=0;g<m.length;g++){var b=m[g];p[b]=e(b,c||!!p[b].enumerable)}return Object.create(Object.getPrototypeOf(d),p)}(a,s),u={i:a?5:4,A:o?o.A:xj(),P:!1,I:!1,R:{},l:o,t:s,k:l,o:null,g:!1,C:!1};return Object.defineProperty(l,ni,{value:u,writable:!0}),l},S:function(s,o,a){a?m0(o)&&o[ni].A===s&&t(s.p):(s.u&&function l(u){if(u&&typeof u=="object"){var c=u[ni];if(c){var d=c.t,f=c.k,h=c.R,p=c.i;if(p===4)zy(f,function(x){x!==ni&&(d[x]!==void 0||Qb(d,x)?h[x]||l(f[x]):(h[x]=!0,Um(c)))}),zy(d,function(x){f[x]!==void 0||Qb(f,x)||(h[x]=!1,Um(c))});else if(p===5){if(r(c)&&(Um(c),h.length=!0),f.length<d.length)for(var m=f.length;m<d.length;m++)h[m]=!1;else for(var g=d.length;g<f.length;g++)h[g]=!0;for(var b=Math.min(f.length,d.length),v=0;v<b;v++)f.hasOwnProperty(v)||(h[v]=!0),h[v]===void 0&&l(f[v])}}}}(s.p[0]),t(s.p))},K:function(s){return s.i===4?n(s):r(s)}})}var Are,DT,JH=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",UJe=typeof Map<"u",qJe=typeof Set<"u",kre=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",r1e=JH?Symbol.for("immer-nothing"):((Are={})["immer-nothing"]=!0,Are),Ire=JH?Symbol.for("immer-draftable"):"__$immer_draftable",ni=JH?Symbol.for("immer-state"):"__$immer_state",HJe=""+Object.prototype.constructor,Jb=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,i1e=Object.getOwnPropertyDescriptors||function(e){var t={};return Jb(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},Tj={},PT={get:function(e,t){if(t===ni)return e;var n=Vg(e);if(!Qb(n,t))return function(i,s,o){var a,l=Cre(s,o);return l?"value"in l?l.value:(a=l.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!wp(r)?r:r===PM(e.t,t)?(NM(e),e.o[t]=_j(e.A.h,r,e)):r},has:function(e,t){return t in Vg(e)},ownKeys:function(e){return Reflect.ownKeys(Vg(e))},set:function(e,t,n){var r=Cre(Vg(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=PM(Vg(e),t),s=i==null?void 0:i[ni];if(s&&s.t===n)return e.o[t]=n,e.R[t]=!1,!0;if(n1e(n,i)&&(n!==void 0||Qb(e.t,t)))return!0;NM(e),Um(e)}return e.o[t]===n&&(n!==void 0||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return PM(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,NM(e),Um(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=Vg(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){kc(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){kc(12)}},X_={};zy(PT,function(e,t){X_[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),X_.deleteProperty=function(e,t){return X_.set.call(this,e,t,void 0)},X_.set=function(e,t,n){return PT.set.call(this,e[0],t,n,e[0])};var WJe=function(){function e(n){var r=this;this.O=kre,this.D=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var l=r;return function(m){var g=this;m===void 0&&(m=a);for(var b=arguments.length,v=Array(b>1?b-1:0),x=1;x<b;x++)v[x-1]=arguments[x];return l.produce(m,function(E){var _;return(_=s).call.apply(_,[g,E].concat(v))})}}var u;if(typeof s!="function"&&kc(6),o!==void 0&&typeof o!="function"&&kc(7),wp(i)){var c=_re(r),d=_j(r,i,void 0),f=!0;try{u=s(d),f=!1}finally{f?OD(c):Ej(c)}return typeof Promise<"u"&&u instanceof Promise?u.then(function(m){return RM(c,o),DM(m,c)},function(m){throw OD(c),m}):(RM(c,o),DM(u,c))}if(!i||typeof i!="object"){if((u=s(i))===void 0&&(u=i),u===r1e&&(u=void 0),r.D&&XH(u,!0),o){var h=[],p=[];cf("Patches").M(i,u,h,p),o(h,p)}return u}kc(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(u){for(var c=arguments.length,d=Array(c>1?c-1:0),f=1;f<c;f++)d[f-1]=arguments[f];return r.produceWithPatches(u,function(h){return i.apply(void 0,[h].concat(d))})};var o,a,l=r.produce(i,s,function(u,c){o=u,a=c});return typeof Promise<"u"&&l instanceof Promise?l.then(function(u){return[u,o,a]}):[l,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){wp(n)||kc(8),m0(n)&&(n=BJe(n));var r=_re(this),i=_j(this,n,void 0);return i[ni].C=!0,Ej(r),i},t.finishDraft=function(n,r){var i=n&&n[ni],s=i.A;return RM(s,r),DM(void 0,s)},t.setAutoFreeze=function(n){this.D=n},t.setUseProxies=function(n){n&&!kre&&kc(20),this.O=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=cf("Patches").$;return m0(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},e}(),Vl=new WJe,s1e=Vl.produce;Vl.produceWithPatches.bind(Vl);Vl.setAutoFreeze.bind(Vl);Vl.setUseProxies.bind(Vl);Vl.applyPatches.bind(Vl);Vl.createDraft.bind(Vl);Vl.finishDraft.bind(Vl);function NT(e){"@babel/helpers - typeof";return NT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},NT(e)}function VJe(e,t){if(NT(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(NT(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function GJe(e){var t=VJe(e,"string");return NT(t)=="symbol"?t:t+""}function YJe(e,t,n){return(t=GJe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Rre(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Dre(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Rre(Object(n),!0).forEach(function(r){YJe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rre(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function jo(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var Pre=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),OM=function(){return Math.random().toString(36).substring(7).split("").join(".")},LD={INIT:"@@redux/INIT"+OM(),REPLACE:"@@redux/REPLACE"+OM(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+OM()}};function KJe(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function o1e(e,t,n){var r;if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(jo(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(jo(1));return n(o1e)(e,t)}if(typeof e!="function")throw new Error(jo(2));var i=e,s=t,o=[],a=o,l=!1;function u(){a===o&&(a=o.slice())}function c(){if(l)throw new Error(jo(3));return s}function d(m){if(typeof m!="function")throw new Error(jo(4));if(l)throw new Error(jo(5));var g=!0;return u(),a.push(m),function(){if(g){if(l)throw new Error(jo(6));g=!1,u();var v=a.indexOf(m);a.splice(v,1),o=null}}}function f(m){if(!KJe(m))throw new Error(jo(7));if(typeof m.type>"u")throw new Error(jo(8));if(l)throw new Error(jo(9));try{l=!0,s=i(s,m)}finally{l=!1}for(var g=o=a,b=0;b<g.length;b++){var v=g[b];v()}return m}function h(m){if(typeof m!="function")throw new Error(jo(10));i=m,f({type:LD.REPLACE})}function p(){var m,g=d;return m={subscribe:function(v){if(typeof v!="object"||v===null)throw new Error(jo(11));function x(){v.next&&v.next(c())}x();var E=g(x);return{unsubscribe:E}}},m[Pre]=function(){return this},m}return f({type:LD.INIT}),r={dispatch:f,subscribe:d,getState:c,replaceReducer:h},r[Pre]=p,r}function XJe(e){Object.keys(e).forEach(function(t){var n=e[t],r=n(void 0,{type:LD.INIT});if(typeof r>"u")throw new Error(jo(12));if(typeof n(void 0,{type:LD.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(jo(13))})}function QJe(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];typeof e[i]=="function"&&(n[i]=e[i])}var s=Object.keys(n),o;try{XJe(n)}catch(a){o=a}return function(l,u){if(l===void 0&&(l={}),o)throw o;for(var c=!1,d={},f=0;f<s.length;f++){var h=s[f],p=n[h],m=l[h],g=p(m,u);if(typeof g>"u")throw u&&u.type,new Error(jo(14));d[h]=g,c=c||g!==m}return c=c||s.length!==Object.keys(l).length,c?d:l}}function FD(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.length===0?function(r){return r}:t.length===1?t[0]:t.reduce(function(r,i){return function(){return r(i.apply(void 0,arguments))}})}function JJe(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return function(){var i=r.apply(void 0,arguments),s=function(){throw new Error(jo(15))},o={getState:i.getState,dispatch:function(){return s.apply(void 0,arguments)}},a=t.map(function(l){return l(o)});return s=FD.apply(void 0,a)(i.dispatch),Dre(Dre({},i),{},{dispatch:s})}}}function a1e(e){var t=function(r){var i=r.dispatch,s=r.getState;return function(o){return function(a){return typeof a=="function"?a(i,s,e):o(a)}}};return t}var Cj=a1e();Cj.withExtraArgument=a1e;var l1e=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),ZC=function(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(u){return function(c){return l([u,c])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=u[0]&2?i.return:u[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,u[1])).done)return s;switch(i=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,i=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){n.label=u[1];break}if(u[0]===6&&n.label<s[1]){n.label=s[1],s=u;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(u);break}s[2]&&n.ops.pop(),n.trys.pop();continue}u=t.call(e,n)}catch(c){u=[6,c],i=0}finally{r=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},Uy=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},ZJe=Object.defineProperty,eZe=Object.defineProperties,tZe=Object.getOwnPropertyDescriptors,Nre=Object.getOwnPropertySymbols,nZe=Object.prototype.hasOwnProperty,rZe=Object.prototype.propertyIsEnumerable,Ore=function(e,t,n){return t in e?ZJe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},s0=function(e,t){for(var n in t||(t={}))nZe.call(t,n)&&Ore(e,n,t[n]);if(Nre)for(var r=0,i=Nre(t);r<i.length;r++){var n=i[r];rZe.call(t,n)&&Ore(e,n,t[n])}return e},$M=function(e,t){return eZe(e,tZe(t))},eS=function(e,t,n){return new Promise(function(r,i){var s=function(l){try{a(n.next(l))}catch(u){i(u)}},o=function(l){try{a(n.throw(l))}catch(u){i(u)}},a=function(l){return l.done?r(l.value):Promise.resolve(l.value).then(s,o)};a((n=n.apply(e,t)).next())})},iZe=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?FD:FD.apply(null,arguments)};function u1e(e){if(typeof e!="object"||e===null)return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(var n=t;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return t===n}var sZe=function(e){return e&&typeof e.match=="function"};function df(e,t){function n(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(t){var s=t.apply(void 0,r);if(!s)throw new Error("prepareAction did not return an object");return s0(s0({type:e,payload:s.payload},"meta"in s&&{meta:s.meta}),"error"in s&&{error:s.error})}return{type:e,payload:r[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(r){return r.type===e},n}function oZe(e){return u1e(e)&&"type"in e}var aZe=function(e){l1e(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,Uy([void 0],n[0].concat(this)))):new(t.bind.apply(t,Uy([void 0],n.concat(this))))},t}(Array),lZe=function(e){l1e(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,Uy([void 0],n[0].concat(this)))):new(t.bind.apply(t,Uy([void 0],n.concat(this))))},t}(Array);function Sj(e){return wp(e)?s1e(e,function(){}):e}function uZe(e){return typeof e=="boolean"}function cZe(){return function(t){return dZe(t)}}function dZe(e){e===void 0&&(e={});var t=e.thunk,n=t===void 0?!0:t;e.immutableCheck,e.serializableCheck,e.actionCreatorCheck;var r=new aZe;return n&&(uZe(n)?r.push(Cj):r.push(Cj.withExtraArgument(n.extraArgument))),r}function fZe(e){var t=cZe(),n=e||{},r=n.reducer,i=r===void 0?void 0:r,s=n.middleware,o=s===void 0?t():s,a=n.devTools,l=a===void 0?!0:a,u=n.preloadedState,c=u===void 0?void 0:u,d=n.enhancers,f=d===void 0?void 0:d,h;if(typeof i=="function")h=i;else if(u1e(i))h=QJe(i);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var p=o;typeof p=="function"&&(p=p(t));var m=JJe.apply(void 0,p),g=FD;l&&(g=iZe(s0({trace:!1},typeof l=="object"&&l)));var b=new lZe(m),v=b;Array.isArray(f)?v=Uy([m],f):typeof f=="function"&&(v=f(b));var x=g.apply(void 0,v);return o1e(h,c,x)}function c1e(e){var t={},n=[],r,i={addCase:function(s,o){var a=typeof s=="string"?s:s.type;if(!a)throw new Error("`builder.addCase` cannot be called with an empty action type");if(a in t)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return t[a]=o,i},addMatcher:function(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase:function(s){return r=s,i}};return e(i),[t,n,r]}function hZe(e){return typeof e=="function"}function pZe(e,t,n,r){n===void 0&&(n=[]);var i=typeof t=="function"?c1e(t):[t,n,r],s=i[0],o=i[1],a=i[2],l;if(hZe(e))l=function(){return Sj(e())};else{var u=Sj(e);l=function(){return u}}function c(d,f){d===void 0&&(d=l());var h=Uy([s[f.type]],o.filter(function(p){var m=p.matcher;return m(f)}).map(function(p){var m=p.reducer;return m}));return h.filter(function(p){return!!p}).length===0&&(h=[a]),h.reduce(function(p,m){if(m)if(m0(p)){var g=p,b=m(g,f);return b===void 0?p:b}else{if(wp(p))return s1e(p,function(v){return m(v,f)});var b=m(p,f);if(b===void 0){if(p===null)return p;throw Error("A case reducer on a non-draftable value must not return undefined")}return b}return p},d)}return c.getInitialState=l,c}function mZe(e,t){return e+"/"+t}function gZe(e){var t=e.name,n=typeof e.initialState=="function"?e.initialState:Sj(e.initialState),r=e.reducers||{},i=Object.keys(r),s={},o={},a={};i.forEach(function(c){var d=r[c],f=mZe(t,c),h,p;"reducer"in d?(h=d.reducer,p=d.prepare):h=d,s[c]=h,o[f]=h,a[c]=p?df(f,p):df(f)});function l(){var c=typeof e.extraReducers=="function"?c1e(e.extraReducers):[e.extraReducers],d=c[0],f=d===void 0?{}:d,h=c[1],p=h===void 0?[]:h,m=c[2],g=m===void 0?void 0:m,b=s0(s0({},f),o);return pZe(n,function(v){for(var x in b)v.addCase(x,b[x]);for(var E=0,_=p;E<_.length;E++){var C=_[E];v.addMatcher(C.matcher,C.reducer)}g&&v.addDefaultCase(g)})}var u;return{name:t,reducer:function(c,d){return u||(u=l()),u(c,d)},actions:a,caseReducers:s,getInitialState:function(){return u||(u=l()),u.getInitialState()}}}var yZe="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",d1e=function(e){e===void 0&&(e=21);for(var t="",n=e;n--;)t+=yZe[Math.random()*64|0];return t},vZe=["name","message","stack","code"],MM=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),$re=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),bZe=function(e){if(typeof e=="object"&&e!==null){for(var t={},n=0,r=vZe;n<r.length;n++){var i=r[n];typeof e[i]=="string"&&(t[i]=e[i])}return t}return{message:String(e)}};(function(){function e(t,n,r){var i=df(t+"/fulfilled",function(u,c,d,f){return{payload:u,meta:$M(s0({},f||{}),{arg:d,requestId:c,requestStatus:"fulfilled"})}}),s=df(t+"/pending",function(u,c,d){return{payload:void 0,meta:$M(s0({},d||{}),{arg:c,requestId:u,requestStatus:"pending"})}}),o=df(t+"/rejected",function(u,c,d,f,h){return{payload:f,error:(r&&r.serializeError||bZe)(u||"Rejected"),meta:$M(s0({},h||{}),{arg:d,requestId:c,rejectedWithValue:!!f,requestStatus:"rejected",aborted:(u==null?void 0:u.name)==="AbortError",condition:(u==null?void 0:u.name)==="ConditionError"})}}),a=typeof AbortController<"u"?AbortController:function(){function u(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return u.prototype.abort=function(){},u}();function l(u){return function(c,d,f){var h=r!=null&&r.idGenerator?r.idGenerator(u):d1e(),p=new a,m;function g(v){m=v,p.abort()}var b=function(){return eS(this,null,function(){var v,x,E,_,C,S,k;return ZC(this,function(R){switch(R.label){case 0:return R.trys.push([0,4,,5]),_=(v=r==null?void 0:r.condition)==null?void 0:v.call(r,u,{getState:d,extra:f}),xZe(_)?[4,_]:[3,2];case 1:_=R.sent(),R.label=2;case 2:if(_===!1||p.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return C=new Promise(function(O,N){return p.signal.addEventListener("abort",function(){return N({name:"AbortError",message:m||"Aborted"})})}),c(s(h,u,(x=r==null?void 0:r.getPendingMeta)==null?void 0:x.call(r,{requestId:h,arg:u},{getState:d,extra:f}))),[4,Promise.race([C,Promise.resolve(n(u,{dispatch:c,getState:d,extra:f,requestId:h,signal:p.signal,abort:g,rejectWithValue:function(O,N){return new MM(O,N)},fulfillWithValue:function(O,N){return new $re(O,N)}})).then(function(O){if(O instanceof MM)throw O;return O instanceof $re?i(O.payload,h,u,O.meta):i(O,h,u)})])];case 3:return E=R.sent(),[3,5];case 4:return S=R.sent(),E=S instanceof MM?o(null,h,u,S.payload,S.meta):o(S,h,u),[3,5];case 5:return k=r&&!r.dispatchConditionRejection&&o.match(E)&&E.meta.condition,k||c(E),[2,E]}})})}();return Object.assign(b,{abort:g,requestId:h,arg:u,unwrap:function(){return b.then(wZe)}})}}return Object.assign(l,{pending:s,rejected:o,fulfilled:i,typePrefix:t})}return e.withTypes=function(){return e},e})();function wZe(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function xZe(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var EZe=function(e,t){return sZe(e)?e.match(t):e(t)};function Mre(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(n){return e.some(function(r){return EZe(r,n)})}}var ZH=function(e,t){if(typeof e!="function")throw new TypeError(t+" is not a function")},Aj=function(){},f1e=function(e,t){return t===void 0&&(t=Aj),e.catch(t),e},h1e=function(e,t){return e.addEventListener("abort",t,{once:!0}),function(){return e.removeEventListener("abort",t)}},Zb=function(e,t){var n=e.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},_Ze="task",p1e="listener",m1e="completed",eW="cancelled",TZe="task-"+eW,CZe="task-"+m1e,g1e=p1e+"-"+eW,SZe=p1e+"-"+m1e,HO=function(){function e(t){this.code=t,this.name="TaskAbortError",this.message=_Ze+" "+eW+" (reason: "+t+")"}return e}(),ew=function(e){if(e.aborted)throw new HO(e.reason)};function y1e(e,t){var n=Aj;return new Promise(function(r,i){var s=function(){return i(new HO(e.reason))};if(e.aborted){s();return}n=h1e(e,s),t.finally(function(){return n()}).then(r,i)}).finally(function(){n=Aj})}var AZe=function(e,t){return eS(void 0,null,function(){var n,r;return ZC(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,4,5]),[4,Promise.resolve()];case 1:return i.sent(),[4,e()];case 2:return n=i.sent(),[2,{status:"ok",value:n}];case 3:return r=i.sent(),[2,{status:r instanceof HO?"cancelled":"rejected",error:r}];case 4:return t==null||t(),[7];case 5:return[2]}})})},jD=function(e){return function(t){return f1e(y1e(e,t).then(function(n){return ew(e),n}))}},v1e=function(e){var t=jD(e);return function(n){return t(new Promise(function(r){return setTimeout(r,n)}))}},kZe=Object.assign,Lre={},tS="listenerMiddleware",IZe=function(e,t){var n=function(r){return h1e(e,function(){return Zb(r,e.reason)})};return function(r,i){ZH(r,"taskExecutor");var s=new AbortController;n(s);var o=AZe(function(){return eS(void 0,null,function(){var a;return ZC(this,function(l){switch(l.label){case 0:return ew(e),ew(s.signal),[4,r({pause:jD(s.signal),delay:v1e(s.signal),signal:s.signal})];case 1:return a=l.sent(),ew(s.signal),[2,a]}})})},function(){return Zb(s,CZe)});return i!=null&&i.autoJoin&&t.push(o),{result:jD(e)(o),cancel:function(){Zb(s,TZe)}}}},RZe=function(e,t){var n=function(r,i){return eS(void 0,null,function(){var s,o,a,l;return ZC(this,function(u){switch(u.label){case 0:ew(t),s=function(){},o=new Promise(function(c,d){var f=e({predicate:r,effect:function(h,p){p.unsubscribe(),c([h,p.getState(),p.getOriginalState()])}});s=function(){f(),d()}}),a=[o],i!=null&&a.push(new Promise(function(c){return setTimeout(c,i,null)})),u.label=1;case 1:return u.trys.push([1,,3,4]),[4,y1e(t,Promise.race(a))];case 2:return l=u.sent(),ew(t),[2,l];case 3:return s(),[7];case 4:return[2]}})})};return function(r,i){return f1e(n(r,i))}},b1e=function(e){var t=e.type,n=e.actionCreator,r=e.matcher,i=e.predicate,s=e.effect;if(t)i=df(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error("Creating or removing a listener requires one of the known fields for matching an action");return ZH(s,"options.listener"),{predicate:i,type:t,effect:s}},DZe=function(e){var t=b1e(e),n=t.type,r=t.predicate,i=t.effect,s=d1e(),o={id:s,effect:i,type:n,predicate:r,pending:new Set,unsubscribe:function(){throw new Error("Unsubscribe not initialized")}};return o},kj=function(e){e.pending.forEach(function(t){Zb(t,g1e)})},PZe=function(e){return function(){e.forEach(kj),e.clear()}},Fre=function(e,t,n){try{e(t,n)}catch(r){setTimeout(function(){throw r},0)}},NZe=df(tS+"/add"),OZe=df(tS+"/removeAll"),$Ze=df(tS+"/remove"),MZe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.error.apply(console,Uy([tS+"/error"],e))};function LZe(e){var t=this;e===void 0&&(e={});var n=new Map,r=e.extra,i=e.onError,s=i===void 0?MZe:i;ZH(s,"onError");var o=function(h){return h.unsubscribe=function(){return n.delete(h.id)},n.set(h.id,h),function(p){h.unsubscribe(),p!=null&&p.cancelActive&&kj(h)}},a=function(h){for(var p=0,m=Array.from(n.values());p<m.length;p++){var g=m[p];if(h(g))return g}},l=function(h){var p=a(function(m){return m.effect===h.effect});return p||(p=DZe(h)),o(p)},u=function(h){var p=b1e(h),m=p.type,g=p.effect,b=p.predicate,v=a(function(x){var E=typeof m=="string"?x.type===m:x.predicate===b;return E&&x.effect===g});return v&&(v.unsubscribe(),h.cancelActive&&kj(v)),!!v},c=function(h,p,m,g){return eS(t,null,function(){var b,v,x,E;return ZC(this,function(_){switch(_.label){case 0:b=new AbortController,v=RZe(l,b.signal),x=[],_.label=1;case 1:return _.trys.push([1,3,4,6]),h.pending.add(b),[4,Promise.resolve(h.effect(p,kZe({},m,{getOriginalState:g,condition:function(C,S){return v(C,S).then(Boolean)},take:v,delay:v1e(b.signal),pause:jD(b.signal),extra:r,signal:b.signal,fork:IZe(b.signal,x),unsubscribe:h.unsubscribe,subscribe:function(){n.set(h.id,h)},cancelActiveListeners:function(){h.pending.forEach(function(C,S,k){C!==b&&(Zb(C,g1e),k.delete(C))})}})))];case 2:return _.sent(),[3,6];case 3:return E=_.sent(),E instanceof HO||Fre(s,E,{raisedBy:"effect"}),[3,6];case 4:return[4,Promise.allSettled(x)];case 5:return _.sent(),Zb(b,SZe),h.pending.delete(b),[7];case 6:return[2]}})})},d=PZe(n),f=function(h){return function(p){return function(m){if(!oZe(m))return p(m);if(NZe.match(m))return l(m.payload);if(OZe.match(m)){d();return}if($Ze.match(m))return u(m.payload);var g=h.getState(),b=function(){if(g===Lre)throw new Error(tS+": getOriginalState can only be called synchronously");return g},v;try{if(v=p(m),n.size>0)for(var x=h.getState(),E=Array.from(n.values()),_=0,C=E;_<C.length;_++){var S=C[_],k=!1;try{k=S.predicate(m,x,g)}catch(R){k=!1,Fre(s,R,{raisedBy:"predicate"})}k&&c(S,m,h,b)}}finally{g=Lre}return v}}};return{middleware:f,startListening:l,stopListening:u,clearListeners:d}}var jre;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);zJe();function FZe(){const e=new Map;return{listen(t,n){return e.has(t)||e.set(t,[]),e.get(t).push(n),()=>{e.set(t,(e.get(t)||[]).filter(r=>r!==n))}},fire(t,n){const r=e.get(t);r&&r.forEach(i=>i(n))}}}let Ik;const jZe=new Uint8Array(16);function BZe(){if(!Ik&&(Ik=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Ik))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Ik(jZe)}const oo=[];for(let e=0;e<256;++e)oo.push((e+256).toString(16).slice(1));function zZe(e,t=0){return(oo[e[t+0]]+oo[e[t+1]]+oo[e[t+2]]+oo[e[t+3]]+"-"+oo[e[t+4]]+oo[e[t+5]]+"-"+oo[e[t+6]]+oo[e[t+7]]+"-"+oo[e[t+8]]+oo[e[t+9]]+"-"+oo[e[t+10]]+oo[e[t+11]]+oo[e[t+12]]+oo[e[t+13]]+oo[e[t+14]]+oo[e[t+15]]).toLowerCase()}const UZe=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Bre={randomUUID:UZe};function zre(e,t,n){if(Bre.randomUUID&&!e)return Bre.randomUUID();e=e||{};const r=e.random||(e.rng||BZe)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,zZe(r)}class ff{static get(){let t=zre();for(;this.ids.has(t);)t=zre();return this.ids.set(t,!0),t}}ff.ids=new Map;function Gc(e){return"parent"in e}function w1e(e){return!Gc(e)}function qZe(e){const{label:t=void 0,state:n,initialArtifact:r,initialMetadata:i}=e,s={annotation:[],bookmark:[]},o=Object.keys(i||{}).reduce((l,u)=>(l[u]=[],i&&i[u]&&l[u].push({type:u,id:ff.get(),val:i[u],createdOn:Date.now()}),l),s),a=r?[{id:ff.get(),createdOn:Date.now(),val:r}]:[];return{id:ff.get(),label:t||"Root",event:"Root",children:[],level:0,createdOn:Date.now(),meta:o,artifacts:a,state:{type:"checkpoint",val:n}}}function HZe({parent:e,state:t,label:n,sideEffects:r={do:[],undo:[]},initialMetadata:i,initialArtifact:s,event:o}){const a={annotation:[],bookmark:[]},l=Object.keys(i||{}).reduce((c,d)=>(c[d]=[],i&&i[d]&&c[d].push({type:d,id:ff.get(),val:i[d],createdOn:Date.now()}),c),a),u=s?[{id:ff.get(),createdOn:Date.now(),val:s}]:[];return{id:ff.get(),label:n,event:o,children:[],parent:e.id,createdOn:Date.now(),meta:l,artifacts:u,sideEffects:r,state:t,level:e.level+1}}function _i(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if({}.NODE_ENV!=="production"){var i=ZZe[e],s=i?typeof i=="function"?i.apply(null,n):i:"unknown error nr: "+e;throw Error("[Immer] "+s)}throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(o){return"'"+o+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function qy(e){return!!e&&!!e[Gl]}function g0(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===eet}(e)||Array.isArray(e)||!!e[q2]||!!(!((t=e.constructor)===null||t===void 0)&&t[q2])||WO(e)||VO(e))}function Aw(e,t,n){n===void 0&&(n=!1),y0(e)===0?(n?Object.keys:oW)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function y0(e){var t=e[Gl];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:WO(e)?2:VO(e)?3:0}function OT(e,t){return y0(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function UR(e,t){return y0(e)===2?e.get(t):e[t]}function x1e(e,t,n){var r=y0(e);r===2?e.set(t,n):r===3?(e.delete(t),e.add(n)):e[t]=n}function WZe(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function WO(e){return QZe&&e instanceof Map}function VO(e){return JZe&&e instanceof Set}function Gg(e){return e.o||e.t}function tW(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=tet(e);delete t[Gl];for(var n=oW(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function nW(e,t){return t===void 0&&(t=!1),rW(e)||qy(e)||!g0(e)||(y0(e)>1&&(e.set=e.add=e.clear=e.delete=VZe),Object.freeze(e),t&&Aw(e,function(n,r){return nW(r,!0)},!0)),e}function VZe(){_i(2)}function rW(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function hf(e){var t=Pj[e];return t||_i(18,e),t}function GZe(e,t){Pj[e]||(Pj[e]=t)}function Ure(){return{}.NODE_ENV==="production"||kw||_i(0),kw}function LM(e,t){t&&(hf("Patches"),e.u=[],e.s=[],e.v=t)}function BD(e){Ij(e),e.p.forEach(YZe),e.p=null}function Ij(e){e===kw&&(kw=e.l)}function qre(e){return kw={p:[],l:kw,h:e,m:!0,_:0}}function YZe(e){var t=e[Gl];t.i===0||t.i===1?t.j():t.O=!0}function FM(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.g||hf("ES5").S(t,e,r),r?(n[Gl].P&&(BD(t),_i(4)),g0(e)&&(e=zD(t,e),t.l||UD(t,e)),t.u&&hf("Patches").M(n[Gl].t,e,t.u,t.s)):e=zD(t,n,[]),BD(t),t.u&&t.v(t.u,t.s),e!==sW?e:void 0}function zD(e,t,n){if(rW(t))return t;var r=t[Gl];if(!r)return Aw(t,function(s,o){return Hre(e,r,t,s,o,n)},!0),t;if(r.A!==e)return t;if(!r.P)return UD(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=tW(r.k):r.o;Aw(r.i===3?new Set(i):i,function(s,o){return Hre(e,r,i,s,o,n)}),UD(e,i,!1),n&&e.u&&hf("Patches").R(r,n,e.u,e.s)}return r.o}function Hre(e,t,n,r,i,s){if({}.NODE_ENV!=="production"&&i===n&&_i(5),qy(i)){var o=zD(e,i,s&&t&&t.i!==3&&!OT(t.D,r)?s.concat(r):void 0);if(x1e(n,r,o),!qy(o))return;e.m=!1}if(g0(i)&&!rW(i)){if(!e.h.F&&e._<1)return;zD(e,i),t&&t.A.l||UD(e,i)}}function UD(e,t,n){n===void 0&&(n=!1),e.h.F&&e.m&&nW(t,n)}function jM(e,t){var n=e[Gl];return(n?Gg(n):e)[t]}function Wre(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function Rj(e){e.P||(e.P=!0,e.l&&Rj(e.l))}function BM(e){e.o||(e.o=tW(e.t))}function Dj(e,t,n){var r=WO(t)?hf("MapSet").N(t,n):VO(t)?hf("MapSet").T(t,n):e.g?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:Ure(),P:!1,I:!1,D:{},l:s,t:i,k:null,o:null,j:null,C:!1},l=a,u=Nj;o&&(l=[a],u=Q_);var c=Proxy.revocable(l,u),d=c.revoke,f=c.proxy;return a.k=f,a.j=d,f}(t,n):hf("ES5").J(t,n);return(n?n.A:Ure()).p.push(r),r}function KZe(e){return qy(e)||_i(22,e),function t(n){if(!g0(n))return n;var r,i=n[Gl],s=y0(n);if(i){if(!i.P&&(i.i<4||!hf("ES5").K(i)))return i.t;i.I=!0,r=Vre(n,s),i.I=!1}else r=Vre(n,s);return Aw(r,function(o,a){i&&UR(i.t,o)===a||x1e(r,o,t(a))}),s===3?new Set(r):r}(e)}function Vre(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return tW(e)}function XZe(){function e(r){if(!g0(r))return r;if(Array.isArray(r))return r.map(e);if(WO(r))return new Map(Array.from(r.entries()).map(function(o){return[o[0],e(o[1])]}));if(VO(r))return new Set(Array.from(r).map(e));var i=Object.create(Object.getPrototypeOf(r));for(var s in r)i[s]=e(r[s]);return OT(r,q2)&&(i[q2]=r[q2]),i}function t(r){return qy(r)?e(r):r}var n="add";GZe("Patches",{$:function(r,i){return i.forEach(function(s){for(var o=s.path,a=s.op,l=r,u=0;u<o.length-1;u++){var c=y0(l),d=""+o[u];c!==0&&c!==1||d!=="__proto__"&&d!=="constructor"||_i(24),typeof l=="function"&&d==="prototype"&&_i(24),typeof(l=UR(l,d))!="object"&&_i(15,o.join("/"))}var f=y0(l),h=e(s.value),p=o[o.length-1];switch(a){case"replace":switch(f){case 2:return l.set(p,h);case 3:_i(16);default:return l[p]=h}case n:switch(f){case 1:return p==="-"?l.push(h):l.splice(p,0,h);case 2:return l.set(p,h);case 3:return l.add(h);default:return l[p]=h}case"remove":switch(f){case 1:return l.splice(p,1);case 2:return l.delete(p);case 3:return l.delete(s.value);default:return delete l[p]}default:_i(17,a)}}),r},R:function(r,i,s,o){switch(r.i){case 0:case 4:case 2:return function(a,l,u,c){var d=a.t,f=a.o;Aw(a.D,function(h,p){var m=UR(d,h),g=UR(f,h),b=p?OT(d,h)?"replace":n:"remove";if(m!==g||b!=="replace"){var v=l.concat(h);u.push(b==="remove"?{op:b,path:v}:{op:b,path:v,value:g}),c.push(b===n?{op:"remove",path:v}:b==="remove"?{op:n,path:v,value:t(m)}:{op:"replace",path:v,value:t(m)})}})}(r,i,s,o);case 5:case 1:return function(a,l,u,c){var d=a.t,f=a.D,h=a.o;if(h.length<d.length){var p=[h,d];d=p[0],h=p[1];var m=[c,u];u=m[0],c=m[1]}for(var g=0;g<d.length;g++)if(f[g]&&h[g]!==d[g]){var b=l.concat([g]);u.push({op:"replace",path:b,value:t(h[g])}),c.push({op:"replace",path:b,value:t(d[g])})}for(var v=d.length;v<h.length;v++){var x=l.concat([v]);u.push({op:n,path:x,value:t(h[v])})}d.length<h.length&&c.push({op:"replace",path:l.concat(["length"]),value:d.length})}(r,i,s,o);case 3:return function(a,l,u,c){var d=a.t,f=a.o,h=0;d.forEach(function(p){if(!f.has(p)){var m=l.concat([h]);u.push({op:"remove",path:m,value:p}),c.unshift({op:n,path:m,value:p})}h++}),h=0,f.forEach(function(p){if(!d.has(p)){var m=l.concat([h]);u.push({op:n,path:m,value:p}),c.unshift({op:"remove",path:m,value:p})}h++})}(r,i,s,o)}},M:function(r,i,s,o){s.push({op:"replace",path:[],value:i===sW?void 0:i}),o.push({op:"replace",path:[],value:r})}})}var Gre,kw,iW=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",QZe=typeof Map<"u",JZe=typeof Set<"u",Yre=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",sW=iW?Symbol.for("immer-nothing"):((Gre={})["immer-nothing"]=!0,Gre),q2=iW?Symbol.for("immer-draftable"):"__$immer_draftable",Gl=iW?Symbol.for("immer-state"):"__$immer_state",ZZe={0:"Illegal state",1:"Immer drafts cannot have computed properties",2:"This object has been frozen and should not be mutated",3:function(e){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+e},4:"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.",5:"Immer forbids circular references",6:"The first or second argument to `produce` must be a function",7:"The third argument to `produce` must be a function or undefined",8:"First argument to `createDraft` must be a plain object, an array, or an immerable object",9:"First argument to `finishDraft` must be a draft returned by `createDraft`",10:"The given draft is already finalized",11:"Object.defineProperty() cannot be used on an Immer draft",12:"Object.setPrototypeOf() cannot be used on an Immer draft",13:"Immer only supports deleting array indices",14:"Immer only supports setting array indices and the 'length' property",15:function(e){return"Cannot apply patch, path doesn't resolve: "+e},16:'Sets cannot have "replace" patches.',17:function(e){return"Unsupported patch operation: "+e},18:function(e){return"The plugin for '"+e+"' has not been loaded into Immer. To enable the plugin, import and call `enable"+e+"()` when initializing your application."},20:"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available",21:function(e){return"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '"+e+"'"},22:function(e){return"'current' expects a draft, got: "+e},23:function(e){return"'original' expects a draft, got: "+e},24:"Patching reserved attributes like __proto__, prototype and constructor is not allowed"},eet=""+Object.prototype.constructor,oW=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,tet=Object.getOwnPropertyDescriptors||function(e){var t={};return oW(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},Pj={},Nj={get:function(e,t){if(t===Gl)return e;var n=Gg(e);if(!OT(n,t))return function(i,s,o){var a,l=Wre(s,o);return l?"value"in l?l.value:(a=l.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!g0(r)?r:r===jM(e.t,t)?(BM(e),e.o[t]=Dj(e.A.h,r,e)):r},has:function(e,t){return t in Gg(e)},ownKeys:function(e){return Reflect.ownKeys(Gg(e))},set:function(e,t,n){var r=Wre(Gg(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=jM(Gg(e),t),s=i==null?void 0:i[Gl];if(s&&s.t===n)return e.o[t]=n,e.D[t]=!1,!0;if(WZe(n,i)&&(n!==void 0||OT(e.t,t)))return!0;BM(e),Rj(e)}return e.o[t]===n&&typeof n!="number"&&(n!==void 0||t in e.o)||(e.o[t]=n,e.D[t]=!0,!0)},deleteProperty:function(e,t){return jM(e.t,t)!==void 0||t in e.t?(e.D[t]=!1,BM(e),Rj(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=Gg(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){_i(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){_i(12)}},Q_={};Aw(Nj,function(e,t){Q_[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),Q_.deleteProperty=function(e,t){return{}.NODE_ENV!=="production"&&isNaN(parseInt(t))&&_i(13),Q_.set.call(this,e,t,void 0)},Q_.set=function(e,t,n){return{}.NODE_ENV!=="production"&&t!=="length"&&isNaN(parseInt(t))&&_i(14),Nj.set.call(this,e[0],t,n,e[0])};var net=function(){function e(n){var r=this;this.g=Yre,this.F=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var l=r;return function(m){var g=this;m===void 0&&(m=a);for(var b=arguments.length,v=Array(b>1?b-1:0),x=1;x<b;x++)v[x-1]=arguments[x];return l.produce(m,function(E){var _;return(_=s).call.apply(_,[g,E].concat(v))})}}var u;if(typeof s!="function"&&_i(6),o!==void 0&&typeof o!="function"&&_i(7),g0(i)){var c=qre(r),d=Dj(r,i,void 0),f=!0;try{u=s(d),f=!1}finally{f?BD(c):Ij(c)}return typeof Promise<"u"&&u instanceof Promise?u.then(function(m){return LM(c,o),FM(m,c)},function(m){throw BD(c),m}):(LM(c,o),FM(u,c))}if(!i||typeof i!="object"){if((u=s(i))===void 0&&(u=i),u===sW&&(u=void 0),r.F&&nW(u,!0),o){var h=[],p=[];hf("Patches").M(i,u,h,p),o(h,p)}return u}_i(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(u){for(var c=arguments.length,d=Array(c>1?c-1:0),f=1;f<c;f++)d[f-1]=arguments[f];return r.produceWithPatches(u,function(h){return i.apply(void 0,[h].concat(d))})};var o,a,l=r.produce(i,s,function(u,c){o=u,a=c});return typeof Promise<"u"&&l instanceof Promise?l.then(function(u){return[u,o,a]}):[l,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){g0(n)||_i(8),qy(n)&&(n=KZe(n));var r=qre(this),i=Dj(this,n,void 0);return i[Gl].C=!0,Ij(r),i},t.finishDraft=function(n,r){var i=n&&n[Gl];({}).NODE_ENV!=="production"&&(i&&i.C||_i(9),i.I&&_i(10));var s=i.A;return LM(s,r),FM(void 0,s)},t.setAutoFreeze=function(n){this.F=n},t.setUseProxies=function(n){n&&!Yre&&_i(20),this.g=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=hf("Patches").$;return qy(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},e}(),Yl=new net,ret=Yl.produce;Yl.produceWithPatches.bind(Yl);Yl.setAutoFreeze.bind(Yl);Yl.setUseProxies.bind(Yl);Yl.applyPatches.bind(Yl);Yl.createDraft.bind(Yl);Yl.finishDraft.bind(Yl);function iet(e,t={}){const{artifact:n=void 0,metadata:r=void 0,rootLabel:i="Root"}=t,s=qZe({state:e,label:i,initialArtifact:n,initialMetadata:r}),o={nodes:{[s.id]:s},root:s.id,current:s.id};return gZe({name:"provenance-graph",initialState:o,reducers:{addMetadata(a,l){const{id:u,meta:c}=l.payload,d=a.nodes[u].meta,f=Object.keys(c).reduce((h,p)=>(h[p]||(h[p]=[]),h[p].push({type:p,id:ff.get(),val:c[p],createdOn:Date.now()}),h),d);a.nodes[l.payload.id].meta=f},addArtifact(a,l){a.nodes[l.payload.id].artifacts.push({id:ff.get(),createdOn:Date.now(),val:l.payload.artifact})},changeCurrent(a,l){a.current=l.payload},addNode(a,{payload:l}){a.nodes[l.id]=l,a.nodes[l.parent].children.push(l.id),a.current=l.id},load(a,{payload:l}){return l}}})}function set(e){const t=new Map,{reducer:n,actions:r,getInitialState:i}=iet(e),s=LZe();s.startListening({matcher:Mre(r.changeCurrent,r.addNode),effect:(a,l)=>{l.cancelActiveListeners(),t.forEach(u=>{const c=Mre(r.addNode)(a),{skipOnNew:d}=u.config;d&&c||u.func(c?"new":"traversal")})}});const o=fZe({reducer:n,middleware:a=>a().prepend(s.middleware)});return{initialState:i(),get backend(){return o.getState()},get current(){return o.getState().nodes[o.getState().current]},get root(){return o.getState().nodes[o.getState().root]},currentChange(a,l){const u={id:ff.get(),func:a,config:l};return t.set(u.id,u),()=>t.delete(u.id)},update:o.dispatch,...r}}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var oet=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),aet=Object.prototype.hasOwnProperty;function Oj(e,t){return aet.call(e,t)}function $j(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)Oj(e,i)&&r.push(i);return r}function sl(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function Mj(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function Yg(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function E1e(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function Lj(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(Lj(e[t]))return!0}else if(typeof e=="object"){for(var r=$j(e),i=r.length,s=0;s<i;s++)if(Lj(e[r[s]]))return!0}}return!1}function Kre(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var _1e=function(e){oet(t,e);function t(n,r,i,s,o){var a=this.constructor,l=e.call(this,Kre(n,{name:r,index:i,operation:s,tree:o}))||this;return l.name=r,l.index=i,l.operation=s,l.tree=o,Object.setPrototypeOf(l,a.prototype),l.message=Kre(n,{name:r,index:i,operation:s,tree:o}),l}return t}(Error),xi=_1e,uet=sl,Rb={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=qD(n,this.path);r&&(r=sl(r));var i=ky(n,{op:"remove",path:this.from}).removed;return ky(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=qD(n,this.from);return ky(n,{op:"add",path:this.path,value:sl(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:$T(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},cet={add:function(e,t,n){return Mj(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:Rb.move,copy:Rb.copy,test:Rb.test,_get:Rb._get};function qD(e,t){if(t=="")return e;var n={op:"_get",path:t};return ky(e,n),n.value}function ky(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):HD(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=qD(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=$T(e,t.value),o.test===!1)throw new xi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new xi("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{r||(e=sl(e));var a=t.path||"",l=a.split("/"),u=e,c=1,d=l.length,f=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=HD;;){if(h=l[c],h&&h.indexOf("~")!=-1&&(h=E1e(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&l[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&f===void 0&&(u[h]===void 0?f=l.slice(0,c).join("/"):c==d-1&&(f=t.path),f!==void 0&&p(t,0,e,f)),c++,Array.isArray(u)){if(h==="-")h=u.length;else{if(n&&!Mj(h))throw new xi("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);Mj(h)&&(h=~~h)}if(c>=d){if(n&&t.op==="add"&&h>u.length)throw new xi("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=cet[t.op].call(t,u,h,e);if(o.test===!1)throw new xi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(c>=d){var o=Rb[t.op].call(t,u,h,e);if(o.test===!1)throw new xi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(u=u[h],n&&c<d&&(!u||typeof u!="object"))throw new xi("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function GO(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new xi("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=sl(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=ky(e,t[o],n,!0,i,o),e=s[o].newDocument;return s.newDocument=e,s}function det(e,t,n){var r=ky(e,t);if(r.test===!1)throw new xi("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function HD(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new xi("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(Rb[e.op]){if(typeof e.path!="string")throw new xi("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new xi('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new xi("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new xi("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&Lj(e.value))throw new xi("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new xi("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new xi("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=T1e([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new xi("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new xi("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function T1e(e,t,n){try{if(!Array.isArray(e))throw new xi("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)GO(sl(t),sl(e),n||!0);else{n=n||HD;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof xi)return i;throw i}}function $T(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,o;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!$T(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!$T(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}const fet=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:xi,_areEquals:$T,applyOperation:ky,applyPatch:GO,applyReducer:det,deepClone:uet,getValueByPointer:qD,validate:T1e,validator:HD},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var aW=new WeakMap,het=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),pet=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function met(e){return aW.get(e)}function get(e,t){return e.observers.get(t)}function yet(e,t){e.observers.delete(t.callback)}function vet(e,t){t.unobserve()}function bet(e,t){var n=[],r,i=met(e);if(!i)i=new het(e),aW.set(e,i);else{var s=get(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=sl(e),t){r.callback=t,r.next=null;var o=function(){Fj(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){Fj(r),clearTimeout(r.next),yet(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new pet(t,r)),r}function Fj(e,t){t===void 0&&(t=!1);var n=aW.get(e.object);lW(n.value,e.object,e.patches,"",t),e.patches.length&&GO(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function lW(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=$j(t),o=$j(e),a=!1,l=o.length-1;l>=0;l--){var u=o[l],c=e[u];if(Oj(t,u)&&!(t[u]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var d=t[u];typeof c=="object"&&c!=null&&typeof d=="object"&&d!=null&&Array.isArray(c)===Array.isArray(d)?lW(c,d,n,r+"/"+Yg(u),i):c!==d&&(i&&n.push({op:"test",path:r+"/"+Yg(u),value:sl(c)}),n.push({op:"replace",path:r+"/"+Yg(u),value:sl(d)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+Yg(u),value:sl(c)}),n.push({op:"remove",path:r+"/"+Yg(u)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&s.length==o.length))for(var l=0;l<s.length;l++){var u=s[l];!Oj(e,u)&&t[u]!==void 0&&n.push({op:"add",path:r+"/"+Yg(u),value:sl(t[u])})}}}function C1e(e,t,n){n===void 0&&(n=!1);var r=[];return lW(e,t,r,"",n),r}const wet=Object.freeze(Object.defineProperty({__proto__:null,compare:C1e,generate:Fj,observe:bet,unobserve:vet},Symbol.toStringTag,{value:"Module"}));Object.assign({},fet,wet,{JsonPatchError:_1e,deepClone:sl,escapePathComponent:Yg,unescapePathComponent:E1e});var J_=(e=>(e.TRAVERSAL_START="Traversal_Start",e.TRAVERSAL_END="Traversal_End",e))(J_||{});function qR(e,t){const n=e.state;if(n.type==="checkpoint")return n.val;const{checkpointRef:r}=n,i=t[r],s=S1e(i,e,t);s.shift();const o=s.map(l=>t[l]).map(l=>l.state.val).reduce((l,u)=>[...l,...u],[]),a=qR(i,t);return GO(a,sl(o),!0,!1).newDocument}function xet(e,t){const n=Object.keys(e).length;return new Set(t.map(r=>r.path.split("/")[0])).size<n/2?"patch":"checkpoint"}function nS({registry:e,initialState:t}){let n=!1;const r=FZe(),i=set(t);function s(c){return i.backend.nodes[c]}r.listen(J_.TRAVERSAL_START,()=>{n=!0}),r.listen(J_.TRAVERSAL_END,()=>{n=!1});const o={add(c,d=i.current.id){i.update(i.addMetadata({id:d,meta:c}))},latestOfType(c,d=i.current.id){var f;return(f=i.backend.nodes[d].meta[c])==null?void 0:f.at(-1)},allOfType(c,d=i.current.id){return i.backend.nodes[d].meta[c]},latest(c=i.current.id){const d=i.backend.nodes[c].meta,f=Object.keys(d).reduce((h,p)=>{const m=d[p].at(-1);return m&&(h[p]=m),h},{});return Object.keys(f).length>0?f:void 0},all(c=i.current.id){return i.backend.nodes[c].meta},types(c=i.current.id){return Object.keys(i.backend.nodes[c].meta)}},a={add(c,d=i.current.id){i.update(i.addArtifact({id:d,artifact:c}))},latest(c=i.current.id){return i.backend.nodes[c].artifacts.at(-1)},all(c=i.current.id){return i.backend.nodes[c].artifacts}},l={add(c,d=i.current.id){o.add({annotation:c},d)},latest(c=i.current.id){var d;return(d=o.latestOfType("annotation",c))==null?void 0:d.val},all(c=i.current.id){var d;return(d=o.allOfType("annotation",c))==null?void 0:d.map(f=>f.val)}},u={add(c=i.current.id){o.add({bookmark:!0},c)},remove(c=i.current.id){o.add({bookmark:!1},c)},is(c=i.current.id){var d;return!!((d=o.latestOfType("bookmark",c))!=null&&d.val)},toggle(c=i.current.id){u.is(c)?u.remove(c):u.add(c)}};return{registry:e,get isTraversing(){return n},getState(c=i.current){return qR(c,i.backend.nodes)},graph:i,get current(){return i.current},get root(){return i.root},record({label:c,state:d,sideEffects:f,eventType:h,onlySideEffects:p=!1}){let m=null,g=null;const b=qR(this.current,this.graph.backend.nodes);if(p)g={type:"checkpoint",val:d};else{const v=C1e(b,d);if(xet(d,v)==="checkpoint")g={type:"checkpoint",val:d};else{const x=this.current.state.type==="checkpoint"?this.current.id:this.current.state.checkpointRef;g={type:"patch",val:v,checkpointRef:x}}}if(!g)throw new Error(`Could not calculate new state. Previous state is: ${JSON.stringify(this.current.state,null,2)}`);if(m=HZe({label:c,state:g,parent:this.current,sideEffects:f,event:h}),!m)throw new Error("State Node creation failed!");i.update(i.addNode(m))},async apply(c,d){const f=e.get(d.type),h=qR(this.current,this.graph.backend.nodes);if(f.config.hasSideEffects){const{do:p=d,undo:m}=f.func(d.payload);this.record({label:c,state:h,sideEffects:{do:[p],undo:[m]},eventType:f.config.eventType})}else{const p=f.func(h,d.payload);this.record({label:c,state:p,sideEffects:{do:[],undo:[]},eventType:f.config.eventType})}},async to(c){r.fire(J_.TRAVERSAL_START);const d=S1e(i.current,i.backend.nodes[c],i.backend.nodes),f=[];for(let h=0;h<d.length-1;++h){const p=s(d[h]),m=s(d[h+1]);_et(p,m)?Gc(p)&&f.push(...p.sideEffects.undo):Gc(m)&&f.push(...m.sideEffects.do)}for(const h of f){const p=e.get(h.type).func;await p(h.payload)}i.update(i.changeCurrent(c)),r.fire(J_.TRAVERSAL_END)},undo(){const{current:c}=i;return Gc(c)?this.to(c.parent):Promise.resolve(console.warn("Already at root!"))},redo(c="latest"){const{current:d}=i;return d.children.length>0?this.to(d.children[c==="oldest"?0:d.children.length-1]):Promise.resolve(console.warn("Already at latest in this branch!"))},currentChange(c,d=!1){return i.currentChange(c,{skipOnNew:d})},done(){console.log("Setup later for URL sharing.")},tree(){return A1e(i.root,i.backend.nodes)},on(c,d){r.listen(c,d)},export(){return JSON.stringify(i.backend)},exportObject(){return JSON.parse(JSON.stringify(i.backend))},import(c){const d=JSON.parse(c),f=d.current;d.current=d.root,i.update(i.load(d)),this.to(f)},importObject(c){const d=c.current;c.current=c.root,i.update(i.load(c)),this.to(d)},metadata:o,artifact:a,annotations:l,bookmarks:u}}function Eet(e,t,n){let[r,i]=[e,t];r.level>i.level&&([r,i]=[i,r]);let s=i.level-r.level;for(;Gc(i)&&s!==0;)i=n[i.parent],s-=1;if(r.id===i.id)return r.id;for(;r.id!==i.id;)Gc(r)&&(r=n[r.parent]),Gc(i)&&(i=n[i.parent]);return r.id}function S1e(e,t,n){const r=Eet(e,t,n),i=n[r],s=[],o=[];let[a,l]=[e,t];for(;a.id!==i.id;)s.push(a),Gc(a)&&(a=n[a.parent]);for(s.push(a);l.id!==i.id;)o.push(l),Gc(l)&&(l=n[l.parent]);const u=o.reverse();return[...s,...u].map(c=>c.id)}function _et(e,t){if(Gc(e)&&e.parent===t.id)return!0;if(Gc(t)&&t.parent===e.id)return!1;throw new Error("Incorrect use of function. Nodes are not connected to each other.")}function A1e(e,t){return{...e,children:e.children.map(n=>A1e(t[n],t)),name:`${e.label}`}}XZe();function Tet(e){return e.length===2?ret(e):e}class Lv{static create(){return new Lv}constructor(){this.registry=new Map}has(t){return this.registry.has(t)}register(t,n,r){const i=n.length===2;if(n.length>2)throw new Error("Incorrect action function signature. Action function can only have two arguments at most!");if(this.has(t))throw new Error(`Already registered: ${t}`);const{label:s=t,eventType:o=t}=r||{};return this.registry.set(t,{func:Tet(n),config:{hasSideEffects:!i,label:typeof s=="string"?()=>s:s,eventType:o}}),df(t)}get(t){const n=this.registry.get(t);if(!n)throw new Error(`Not registered: ${t}`);return n}}function tp(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Cet(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Vx(e){let t,n,r;e.length!==2?(t=tp,n=(a,l)=>tp(e(a),l),r=(a,l)=>e(a)-l):(t=e===tp||e===Cet?e:Aet,n=e,r=e);function i(a,l,u=0,c=a.length){if(u<c){if(t(l,l)!==0)return c;do{const d=u+c>>>1;n(a[d],l)<0?u=d+1:c=d}while(u<c)}return u}function s(a,l,u=0,c=a.length){if(u<c){if(t(l,l)!==0)return c;do{const d=u+c>>>1;n(a[d],l)<=0?u=d+1:c=d}while(u<c)}return u}function o(a,l,u=0,c=a.length){const d=i(a,l,u,c-1);return d>u&&r(a[d-1],l)>-r(a[d],l)?d-1:d}return{left:i,center:o,right:s}}function Aet(){return 0}function k1e(e){return e===null?NaN:+e}function*ket(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const I1e=Vx(tp),v0=I1e.right,Iet=I1e.left;Vx(k1e).center;function Ret(e,t){let n=0,r,i=0,s=0;if(t===void 0)for(let o of e)o!=null&&(o=+o)>=o&&(r=o-i,i+=r/++n,s+=r*(o-i));else{let o=-1;for(let a of e)(a=t(a,++o,e))!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,s+=r*(a-i))}if(n>1)return s/(n-1)}function Det(e,t){const n=Ret(e,t);return n&&Math.sqrt(n)}function Pet(e,t){let n,r;for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));return[n,r]}class xa{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const s=n[i],o=t+s,a=Math.abs(t)<Math.abs(s)?t-(o-s):s-(o-t);a&&(n[r++]=a),t=o}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,s,o=0;if(n>0){for(o=t[--n];n>0&&(r=o,i=t[--n],o=r+i,s=i-(o-r),!s););n>0&&(s<0&&t[n-1]<0||s>0&&t[n-1]>0)&&(i=s*2,r=o+i,i==r-o&&(o=r))}return o}}class Xre extends Map{constructor(t,n=P1e){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(jj(this,t))}has(t){return super.has(jj(this,t))}set(t,n){return super.set(R1e(this,t),n)}delete(t){return super.delete(D1e(this,t))}}class WD extends Set{constructor(t,n=P1e){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(jj(this,t))}add(t){return super.add(R1e(this,t))}delete(t){return super.delete(D1e(this,t))}}function jj({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function R1e({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function D1e({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function P1e(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Net(e,t){return Array.from(t,n=>e[n])}function Oet(e=tp){if(e===tp)return N1e;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function N1e(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const $et=Math.sqrt(50),Met=Math.sqrt(10),Let=Math.sqrt(2);function VD(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=$et?10:s>=Met?5:s>=Let?2:1;let a,l,u;return i<0?(u=Math.pow(10,-i)/o,a=Math.round(e*u),l=Math.round(t*u),a/u<e&&++a,l/u>t&&--l,u=-u):(u=Math.pow(10,i)*o,a=Math.round(e/u),l=Math.round(t/u),a*u<e&&++a,l*u>t&&--l),l<a&&.5<=n&&n<2?VD(e,t,n*2):[a,l,u]}function Bj(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,s,o]=r?VD(t,e,n):VD(e,t,n);if(!(s>=i))return[];const a=s-i+1,l=new Array(a);if(r)if(o<0)for(let u=0;u<a;++u)l[u]=(s-u)/-o;else for(let u=0;u<a;++u)l[u]=(s-u)*o;else if(o<0)for(let u=0;u<a;++u)l[u]=(i+u)/-o;else for(let u=0;u<a;++u)l[u]=(i+u)*o;return l}function zj(e,t,n){return t=+t,e=+e,n=+n,VD(e,t,n)[2]}function b0(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?zj(t,e,n):zj(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function Iy(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function Uj(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function O1e(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?N1e:Oet(i);r>n;){if(r-n>600){const l=r-n+1,u=t-n+1,c=Math.log(l),d=.5*Math.exp(2*c/3),f=.5*Math.sqrt(c*d*(l-d)/l)*(u-l/2<0?-1:1),h=Math.max(n,Math.floor(t-u*d/l+f)),p=Math.min(r,Math.floor(t+(l-u)*d/l+f));O1e(e,t,h,p,i)}const s=e[t];let o=n,a=r;for(c_(e,n,t),i(e[r],s)>0&&c_(e,n,r);o<a;){for(c_(e,o,a),++o,--a;i(e[o],s)<0;)++o;for(;i(e[a],s)>0;)--a}i(e[n],s)===0?c_(e,n,a):(++a,c_(e,a,r)),a<=t&&(n=a+1),t<=a&&(r=a-1)}return e}function c_(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function qj(e,t,n){if(e=Float64Array.from(ket(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return Uj(e);if(t>=1)return Iy(e);var r,i=(r-1)*t,s=Math.floor(i),o=Iy(O1e(e,s).subarray(0,s+1)),a=Uj(e.subarray(s+1));return o+(a-o)*(i-s)}}function $1e(e,t,n=k1e){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,s=Math.floor(i),o=+n(e[s],s,e),a=+n(e[s+1],s+1,e);return o+(a-o)*(i-s)}}function Fet(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(s=+s)>=s&&(++n,r+=s)}if(n)return r/n}function M1e(e,t){return qj(e,.5,t)}function*jet(e){for(const t of e)yield*t}function L1e(e){return Array.from(jet(e))}function va(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function F1e(e,t){let n=0;for(let r of e)(r=+r)&&(n+=r);return n}function Bet(e,...t){e=new WD(e),t=t.map(zet);e:for(const n of e)for(const r of t)if(!r.has(n)){e.delete(n);continue e}return e}function zet(e){return e instanceof WD?e:new WD(e)}function Uet(...e){const t=new WD;for(const n of e)for(const r of n)t.add(r);return t}var qet={value:()=>{}};function uW(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new HR(n)}function HR(e){this._=e}function Het(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}HR.prototype=uW.prototype={constructor:HR,on:function(e,t){var n=this._,r=Het(e+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(e=r[s]).type)&&(i=Wet(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(i=(e=r[s]).type)n[i]=Qre(n[i],e.name,t);else if(t==null)for(i in n)n[i]=Qre(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new HR(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function Wet(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function Qre(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=qet,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Hj="http://www.w3.org/1999/xhtml";const Jre={svg:"http://www.w3.org/2000/svg",xhtml:Hj,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function YO(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Jre.hasOwnProperty(t)?{space:Jre[t],local:e}:e}function Vet(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Hj&&t.documentElement.namespaceURI===Hj?t.createElement(e):t.createElementNS(n,e)}}function Get(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function j1e(e){var t=YO(e);return(t.local?Get:Vet)(t)}function Yet(){}function cW(e){return e==null?Yet:function(){return this.querySelector(e)}}function Ket(e){typeof e!="function"&&(e=cW(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=new Array(o),l,u,c=0;c<o;++c)(l=s[c])&&(u=e.call(l,l.__data__,c,s))&&("__data__"in l&&(u.__data__=l.__data__),a[c]=u);return new Kl(r,this._parents)}function Xet(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Qet(){return[]}function B1e(e){return e==null?Qet:function(){return this.querySelectorAll(e)}}function Jet(e){return function(){return Xet(e.apply(this,arguments))}}function Zet(e){typeof e=="function"?e=Jet(e):e=B1e(e);for(var t=this._groups,n=t.length,r=[],i=[],s=0;s<n;++s)for(var o=t[s],a=o.length,l,u=0;u<a;++u)(l=o[u])&&(r.push(e.call(l,l.__data__,u,o)),i.push(l));return new Kl(r,i)}function z1e(e){return function(){return this.matches(e)}}function U1e(e){return function(t){return t.matches(e)}}var ett=Array.prototype.find;function ttt(e){return function(){return ett.call(this.children,e)}}function ntt(){return this.firstElementChild}function rtt(e){return this.select(e==null?ntt:ttt(typeof e=="function"?e:U1e(e)))}var itt=Array.prototype.filter;function stt(){return Array.from(this.children)}function ott(e){return function(){return itt.call(this.children,e)}}function att(e){return this.selectAll(e==null?stt:ott(typeof e=="function"?e:U1e(e)))}function ltt(e){typeof e!="function"&&(e=z1e(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],l,u=0;u<o;++u)(l=s[u])&&e.call(l,l.__data__,u,s)&&a.push(l);return new Kl(r,this._parents)}function q1e(e){return new Array(e.length)}function utt(){return new Kl(this._enter||this._groups.map(q1e),this._parents)}function GD(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}GD.prototype={constructor:GD,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function ctt(e){return function(){return e}}function dtt(e,t,n,r,i,s){for(var o=0,a,l=t.length,u=s.length;o<u;++o)(a=t[o])?(a.__data__=s[o],r[o]=a):n[o]=new GD(e,s[o]);for(;o<l;++o)(a=t[o])&&(i[o]=a)}function ftt(e,t,n,r,i,s,o){var a,l,u=new Map,c=t.length,d=s.length,f=new Array(c),h;for(a=0;a<c;++a)(l=t[a])&&(f[a]=h=o.call(l,l.__data__,a,t)+"",u.has(h)?i[a]=l:u.set(h,l));for(a=0;a<d;++a)h=o.call(e,s[a],a,s)+"",(l=u.get(h))?(r[a]=l,l.__data__=s[a],u.delete(h)):n[a]=new GD(e,s[a]);for(a=0;a<c;++a)(l=t[a])&&u.get(f[a])===l&&(i[a]=l)}function htt(e){return e.__data__}function ptt(e,t){if(!arguments.length)return Array.from(this,htt);var n=t?ftt:dtt,r=this._parents,i=this._groups;typeof e!="function"&&(e=ctt(e));for(var s=i.length,o=new Array(s),a=new Array(s),l=new Array(s),u=0;u<s;++u){var c=r[u],d=i[u],f=d.length,h=mtt(e.call(c,c&&c.__data__,u,r)),p=h.length,m=a[u]=new Array(p),g=o[u]=new Array(p),b=l[u]=new Array(f);n(c,d,m,g,b,h,t);for(var v=0,x=0,E,_;v<p;++v)if(E=m[v]){for(v>=x&&(x=v+1);!(_=g[x])&&++x<p;);E._next=_||null}}return o=new Kl(o,r),o._enter=a,o._exit=l,o}function mtt(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function gtt(){return new Kl(this._exit||this._groups.map(q1e),this._parents)}function ytt(e,t,n){var r=this.enter(),i=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function vtt(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,s=r.length,o=Math.min(i,s),a=new Array(i),l=0;l<o;++l)for(var u=n[l],c=r[l],d=u.length,f=a[l]=new Array(d),h,p=0;p<d;++p)(h=u[p]||c[p])&&(f[p]=h);for(;l<i;++l)a[l]=n[l];return new Kl(a,this._parents)}function btt(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function wtt(e){e||(e=xtt);function t(d,f){return d&&f?e(d.__data__,f.__data__):!d-!f}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],a=o.length,l=i[s]=new Array(a),u,c=0;c<a;++c)(u=o[c])&&(l[c]=u);l.sort(t)}return new Kl(i,this._parents).order()}function xtt(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Ett(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function _tt(){return Array.from(this)}function Ttt(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function Ctt(){let e=0;for(const t of this)++e;return e}function Stt(){return!this.node()}function Att(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],s=0,o=i.length,a;s<o;++s)(a=i[s])&&e.call(a,a.__data__,s,i);return this}function ktt(e){return function(){this.removeAttribute(e)}}function Itt(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Rtt(e,t){return function(){this.setAttribute(e,t)}}function Dtt(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Ptt(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Ntt(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Ott(e,t){var n=YO(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?Itt:ktt:typeof t=="function"?n.local?Ntt:Ptt:n.local?Dtt:Rtt)(n,t))}function H1e(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function $tt(e){return function(){this.style.removeProperty(e)}}function Mtt(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Ltt(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Ftt(e,t,n){return arguments.length>1?this.each((t==null?$tt:typeof t=="function"?Ltt:Mtt)(e,t,n??"")):Iw(this.node(),e)}function Iw(e,t){return e.style.getPropertyValue(t)||H1e(e).getComputedStyle(e,null).getPropertyValue(t)}function jtt(e){return function(){delete this[e]}}function Btt(e,t){return function(){this[e]=t}}function ztt(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Utt(e,t){return arguments.length>1?this.each((t==null?jtt:typeof t=="function"?ztt:Btt)(e,t)):this.node()[e]}function W1e(e){return e.trim().split(/^|\s+/)}function dW(e){return e.classList||new V1e(e)}function V1e(e){this._node=e,this._names=W1e(e.getAttribute("class")||"")}V1e.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function G1e(e,t){for(var n=dW(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function Y1e(e,t){for(var n=dW(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function qtt(e){return function(){G1e(this,e)}}function Htt(e){return function(){Y1e(this,e)}}function Wtt(e,t){return function(){(t.apply(this,arguments)?G1e:Y1e)(this,e)}}function Vtt(e,t){var n=W1e(e+"");if(arguments.length<2){for(var r=dW(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?Wtt:t?qtt:Htt)(n,t))}function Gtt(){this.textContent=""}function Ytt(e){return function(){this.textContent=e}}function Ktt(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Xtt(e){return arguments.length?this.each(e==null?Gtt:(typeof e=="function"?Ktt:Ytt)(e)):this.node().textContent}function Qtt(){this.innerHTML=""}function Jtt(e){return function(){this.innerHTML=e}}function Ztt(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function ent(e){return arguments.length?this.each(e==null?Qtt:(typeof e=="function"?Ztt:Jtt)(e)):this.node().innerHTML}function tnt(){this.nextSibling&&this.parentNode.appendChild(this)}function nnt(){return this.each(tnt)}function rnt(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function int(){return this.each(rnt)}function snt(e){var t=typeof e=="function"?e:j1e(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function ont(){return null}function ant(e,t){var n=typeof e=="function"?e:j1e(e),r=t==null?ont:typeof t=="function"?t:cW(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function lnt(){var e=this.parentNode;e&&e.removeChild(this)}function unt(){return this.each(lnt)}function cnt(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function dnt(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function fnt(e){return this.select(e?dnt:cnt)}function hnt(e){return arguments.length?this.property("__data__",e):this.node().__data__}function pnt(e){return function(t){e.call(this,t,this.__data__)}}function mnt(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function gnt(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,s;n<i;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function ynt(e,t,n){return function(){var r=this.__on,i,s=pnt(t);if(r){for(var o=0,a=r.length;o<a;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=t;return}}this.addEventListener(e.type,s,n),i={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(i):this.__on=[i]}}function vnt(e,t,n){var r=mnt(e+""),i,s=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,u=a.length,c;l<u;++l)for(i=0,c=a[l];i<s;++i)if((o=r[i]).type===c.type&&o.name===c.name)return c.value}return}for(a=t?ynt:gnt,i=0;i<s;++i)this.each(a(r[i],t,n));return this}function K1e(e,t,n){var r=H1e(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function bnt(e,t){return function(){return K1e(this,e,t)}}function wnt(e,t){return function(){return K1e(this,e,t.apply(this,arguments))}}function xnt(e,t){return this.each((typeof t=="function"?wnt:bnt)(e,t))}function*Ent(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var X1e=[null];function Kl(e,t){this._groups=e,this._parents=t}function rS(){return new Kl([[document.documentElement]],X1e)}function _nt(){return this}Kl.prototype=rS.prototype={constructor:Kl,select:Ket,selectAll:Zet,selectChild:rtt,selectChildren:att,filter:ltt,data:ptt,enter:utt,exit:gtt,join:ytt,merge:vtt,selection:_nt,order:btt,sort:wtt,call:Ett,nodes:_tt,node:Ttt,size:Ctt,empty:Stt,each:Att,attr:Ott,style:Ftt,property:Utt,classed:Vtt,text:Xtt,html:ent,raise:nnt,lower:int,append:snt,insert:ant,remove:unt,clone:fnt,datum:hnt,on:vnt,dispatch:xnt,[Symbol.iterator]:Ent};function Wj(e){return typeof e=="string"?new Kl([[document.querySelector(e)]],[document.documentElement]):new Kl([[e]],X1e)}function Tnt(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Cnt(e,t){if(e=Tnt(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}function Gx(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function iS(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function U0(){}var Hy=.7,Rw=1/Hy,tw="\\s*([+-]?\\d+)\\s*",MT="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",pf="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Snt=/^#([0-9a-f]{3,8})$/,Ant=new RegExp(`^rgb\\(${tw},${tw},${tw}\\)$`),knt=new RegExp(`^rgb\\(${pf},${pf},${pf}\\)$`),Int=new RegExp(`^rgba\\(${tw},${tw},${tw},${MT}\\)$`),Rnt=new RegExp(`^rgba\\(${pf},${pf},${pf},${MT}\\)$`),Dnt=new RegExp(`^hsl\\(${MT},${pf},${pf}\\)$`),Pnt=new RegExp(`^hsla\\(${MT},${pf},${pf},${MT}\\)$`),Zre={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Gx(U0,Wy,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:eie,formatHex:eie,formatHex8:Nnt,formatHsl:Ont,formatRgb:tie,toString:tie});function eie(){return this.rgb().formatHex()}function Nnt(){return this.rgb().formatHex8()}function Ont(){return Q1e(this).formatHsl()}function tie(){return this.rgb().formatRgb()}function Wy(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Snt.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?nie(t):n===3?new Ls(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Rk(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Rk(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Ant.exec(e))?new Ls(t[1],t[2],t[3],1):(t=knt.exec(e))?new Ls(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Int.exec(e))?Rk(t[1],t[2],t[3],t[4]):(t=Rnt.exec(e))?Rk(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Dnt.exec(e))?sie(t[1],t[2]/100,t[3]/100,1):(t=Pnt.exec(e))?sie(t[1],t[2]/100,t[3]/100,t[4]):Zre.hasOwnProperty(e)?nie(Zre[e]):e==="transparent"?new Ls(NaN,NaN,NaN,0):null}function nie(e){return new Ls(e>>16&255,e>>8&255,e&255,1)}function Rk(e,t,n,r){return r<=0&&(e=t=n=NaN),new Ls(e,t,n,r)}function fW(e){return e instanceof U0||(e=Wy(e)),e?(e=e.rgb(),new Ls(e.r,e.g,e.b,e.opacity)):new Ls}function Sf(e,t,n,r){return arguments.length===1?fW(e):new Ls(e,t,n,r??1)}function Ls(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Gx(Ls,Sf,iS(U0,{brighter(e){return e=e==null?Rw:Math.pow(Rw,e),new Ls(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Hy:Math.pow(Hy,e),new Ls(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ls(Ry(this.r),Ry(this.g),Ry(this.b),YD(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rie,formatHex:rie,formatHex8:$nt,formatRgb:iie,toString:iie}));function rie(){return`#${my(this.r)}${my(this.g)}${my(this.b)}`}function $nt(){return`#${my(this.r)}${my(this.g)}${my(this.b)}${my((isNaN(this.opacity)?1:this.opacity)*255)}`}function iie(){const e=YD(this.opacity);return`${e===1?"rgb(":"rgba("}${Ry(this.r)}, ${Ry(this.g)}, ${Ry(this.b)}${e===1?")":`, ${e})`}`}function YD(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Ry(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function my(e){return e=Ry(e),(e<16?"0":"")+e.toString(16)}function sie(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Ic(e,t,n,r)}function Q1e(e){if(e instanceof Ic)return new Ic(e.h,e.s,e.l,e.opacity);if(e instanceof U0||(e=Wy(e)),!e)return new Ic;if(e instanceof Ic)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),o=NaN,a=s-i,l=(s+i)/2;return a?(t===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-t)/a+2:o=(t-n)/a+4,a/=l<.5?s+i:2-s-i,o*=60):a=l>0&&l<1?0:o,new Ic(o,a,l,e.opacity)}function LT(e,t,n,r){return arguments.length===1?Q1e(e):new Ic(e,t,n,r??1)}function Ic(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Gx(Ic,LT,iS(U0,{brighter(e){return e=e==null?Rw:Math.pow(Rw,e),new Ic(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Hy:Math.pow(Hy,e),new Ic(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Ls(zM(e>=240?e-240:e+120,i,r),zM(e,i,r),zM(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Ic(oie(this.h),Dk(this.s),Dk(this.l),YD(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=YD(this.opacity);return`${e===1?"hsl(":"hsla("}${oie(this.h)}, ${Dk(this.s)*100}%, ${Dk(this.l)*100}%${e===1?")":`, ${e})`}`}}));function oie(e){return e=(e||0)%360,e<0?e+360:e}function Dk(e){return Math.max(0,Math.min(1,e||0))}function zM(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const J1e=Math.PI/180,Z1e=180/Math.PI,KD=18,ebe=.96422,tbe=1,nbe=.82521,rbe=4/29,nw=6/29,ibe=3*nw*nw,Mnt=nw*nw*nw;function sbe(e){if(e instanceof mf)return new mf(e.l,e.a,e.b,e.opacity);if(e instanceof Hh)return obe(e);e instanceof Ls||(e=fW(e));var t=WM(e.r),n=WM(e.g),r=WM(e.b),i=UM((.2225045*t+.7168786*n+.0606169*r)/tbe),s,o;return t===n&&n===r?s=o=i:(s=UM((.4360747*t+.3850649*n+.1430804*r)/ebe),o=UM((.0139322*t+.0971045*n+.7141733*r)/nbe)),new mf(116*i-16,500*(s-i),200*(i-o),e.opacity)}function Vy(e,t,n,r){return arguments.length===1?sbe(e):new mf(e,t,n,r??1)}function mf(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}Gx(mf,Vy,iS(U0,{brighter(e){return new mf(this.l+KD*(e??1),this.a,this.b,this.opacity)},darker(e){return new mf(this.l-KD*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=ebe*qM(t),e=tbe*qM(e),n=nbe*qM(n),new Ls(HM(3.1338561*t-1.6168667*e-.4906146*n),HM(-.9787684*t+1.9161415*e+.033454*n),HM(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function UM(e){return e>Mnt?Math.pow(e,1/3):e/ibe+rbe}function qM(e){return e>nw?e*e*e:ibe*(e-rbe)}function HM(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function WM(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Lnt(e){if(e instanceof Hh)return new Hh(e.h,e.c,e.l,e.opacity);if(e instanceof mf||(e=sbe(e)),e.a===0&&e.b===0)return new Hh(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*Z1e;return new Hh(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function FT(e,t,n,r){return arguments.length===1?Lnt(e):new Hh(e,t,n,r??1)}function Hh(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function obe(e){if(isNaN(e.h))return new mf(e.l,0,0,e.opacity);var t=e.h*J1e;return new mf(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}Gx(Hh,FT,iS(U0,{brighter(e){return new Hh(this.h,this.c,this.l+KD*(e??1),this.opacity)},darker(e){return new Hh(this.h,this.c,this.l-KD*(e??1),this.opacity)},rgb(){return obe(this).rgb()}}));var abe=-.14861,hW=1.78277,pW=-.29227,KO=-.90649,jT=1.97294,aie=jT*KO,lie=jT*hW,uie=hW*pW-KO*abe;function Fnt(e){if(e instanceof Dy)return new Dy(e.h,e.s,e.l,e.opacity);e instanceof Ls||(e=fW(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(uie*r+aie*t-lie*n)/(uie+aie-lie),s=r-i,o=(jT*(n-i)-pW*s)/KO,a=Math.sqrt(o*o+s*s)/(jT*i*(1-i)),l=a?Math.atan2(o,s)*Z1e-120:NaN;return new Dy(l<0?l+360:l,a,i,e.opacity)}function w0(e,t,n,r){return arguments.length===1?Fnt(e):new Dy(e,t,n,r??1)}function Dy(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Gx(Dy,w0,iS(U0,{brighter(e){return e=e==null?Rw:Math.pow(Rw,e),new Dy(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Hy:Math.pow(Hy,e),new Dy(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*J1e,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new Ls(255*(t+n*(abe*r+hW*i)),255*(t+n*(pW*r+KO*i)),255*(t+n*(jT*r)),this.opacity)}}));function lbe(e,t,n,r,i){var s=e*e,o=s*e;return((1-3*e+3*s-o)*t+(4-6*s+3*o)*n+(1+3*e+3*s-3*o)*r+o*i)/6}function ube(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],s=e[r+1],o=r>0?e[r-1]:2*i-s,a=r<t-1?e[r+2]:2*s-i;return lbe((n-r/t)*t,o,i,s,a)}}function cbe(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],s=e[r%t],o=e[(r+1)%t],a=e[(r+2)%t];return lbe((n-r/t)*t,i,s,o,a)}}const XO=e=>()=>e;function dbe(e,t){return function(n){return e+n*t}}function jnt(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function QO(e,t){var n=t-e;return n?dbe(e,n>180||n<-180?n-360*Math.round(n/360):n):XO(isNaN(e)?t:e)}function Bnt(e){return(e=+e)==1?Fs:function(t,n){return n-t?jnt(t,n,e):XO(isNaN(t)?n:t)}}function Fs(e,t){var n=t-e;return n?dbe(e,n):XO(isNaN(e)?t:e)}const BT=function e(t){var n=Bnt(t);function r(i,s){var o=n((i=Sf(i)).r,(s=Sf(s)).r),a=n(i.g,s.g),l=n(i.b,s.b),u=Fs(i.opacity,s.opacity);return function(c){return i.r=o(c),i.g=a(c),i.b=l(c),i.opacity=u(c),i+""}}return r.gamma=e,r}(1);function fbe(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),s=new Array(n),o,a;for(o=0;o<n;++o)a=Sf(t[o]),r[o]=a.r||0,i[o]=a.g||0,s[o]=a.b||0;return r=e(r),i=e(i),s=e(s),a.opacity=1,function(l){return a.r=r(l),a.g=i(l),a.b=s(l),a+""}}}var hbe=fbe(ube),znt=fbe(cbe);function mW(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function pbe(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Unt(e,t){return(pbe(t)?mW:mbe)(e,t)}function mbe(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=q0(e[o],t[o]);for(;o<n;++o)s[o]=t[o];return function(a){for(o=0;o<r;++o)s[o]=i[o](a);return s}}function gbe(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function bu(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function ybe(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=q0(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var Vj=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,VM=new RegExp(Vj.source,"g");function qnt(e){return function(){return e}}function Hnt(e){return function(t){return e(t)+""}}function gW(e,t){var n=Vj.lastIndex=VM.lastIndex=0,r,i,s,o=-1,a=[],l=[];for(e=e+"",t=t+"";(r=Vj.exec(e))&&(i=VM.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,l.push({i:o,x:bu(r,i)})),n=VM.lastIndex;return n<t.length&&(s=t.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?l[0]?Hnt(l[0].x):qnt(t):(t=l.length,function(u){for(var c=0,d;c<t;++c)a[(d=l[c]).i]=d.x(u);return a.join("")})}function q0(e,t){var n=typeof t,r;return t==null||n==="boolean"?XO(t):(n==="number"?bu:n==="string"?(r=Wy(t))?(t=r,BT):gW:t instanceof Wy?BT:t instanceof Date?gbe:pbe(t)?mW:Array.isArray(t)?mbe:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?ybe:bu)(e,t)}function Wnt(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function Vnt(e,t){var n=QO(+e,+t);return function(r){var i=n(r);return i-360*Math.floor(i/360)}}function sS(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var cie=180/Math.PI,Gj={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function vbe(e,t,n,r,i,s){var o,a,l;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,l/=a),e*r<t*n&&(e=-e,t=-t,l=-l,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*cie,skewX:Math.atan(l)*cie,scaleX:o,scaleY:a}}var Pk;function Gnt(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Gj:vbe(t.a,t.b,t.c,t.d,t.e,t.f)}function Ynt(e){return e==null||(Pk||(Pk=document.createElementNS("http://www.w3.org/2000/svg","g")),Pk.setAttribute("transform",e),!(e=Pk.transform.baseVal.consolidate()))?Gj:(e=e.matrix,vbe(e.a,e.b,e.c,e.d,e.e,e.f))}function bbe(e,t,n,r){function i(u){return u.length?u.pop()+" ":""}function s(u,c,d,f,h,p){if(u!==d||c!==f){var m=h.push("translate(",null,t,null,n);p.push({i:m-4,x:bu(u,d)},{i:m-2,x:bu(c,f)})}else(d||f)&&h.push("translate("+d+t+f+n)}function o(u,c,d,f){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),f.push({i:d.push(i(d)+"rotate(",null,r)-2,x:bu(u,c)})):c&&d.push(i(d)+"rotate("+c+r)}function a(u,c,d,f){u!==c?f.push({i:d.push(i(d)+"skewX(",null,r)-2,x:bu(u,c)}):c&&d.push(i(d)+"skewX("+c+r)}function l(u,c,d,f,h,p){if(u!==d||c!==f){var m=h.push(i(h)+"scale(",null,",",null,")");p.push({i:m-4,x:bu(u,d)},{i:m-2,x:bu(c,f)})}else(d!==1||f!==1)&&h.push(i(h)+"scale("+d+","+f+")")}return function(u,c){var d=[],f=[];return u=e(u),c=e(c),s(u.translateX,u.translateY,c.translateX,c.translateY,d,f),o(u.rotate,c.rotate,d,f),a(u.skewX,c.skewX,d,f),l(u.scaleX,u.scaleY,c.scaleX,c.scaleY,d,f),u=c=null,function(h){for(var p=-1,m=f.length,g;++p<m;)d[(g=f[p]).i]=g.x(h);return d.join("")}}}var wbe=bbe(Gnt,"px, ","px)","deg)"),xbe=bbe(Ynt,", ",")",")"),Knt=1e-12;function die(e){return((e=Math.exp(e))+1/e)/2}function Xnt(e){return((e=Math.exp(e))-1/e)/2}function Qnt(e){return((e=Math.exp(2*e))-1)/(e+1)}const Jnt=function e(t,n,r){function i(s,o){var a=s[0],l=s[1],u=s[2],c=o[0],d=o[1],f=o[2],h=c-a,p=d-l,m=h*h+p*p,g,b;if(m<Knt)b=Math.log(f/u)/t,g=function(S){return[a+S*h,l+S*p,u*Math.exp(t*S*b)]};else{var v=Math.sqrt(m),x=(f*f-u*u+r*m)/(2*u*n*v),E=(f*f-u*u-r*m)/(2*f*n*v),_=Math.log(Math.sqrt(x*x+1)-x),C=Math.log(Math.sqrt(E*E+1)-E);b=(C-_)/t,g=function(S){var k=S*b,R=die(_),O=u/(n*v)*(R*Qnt(t*k+_)-Xnt(_));return[a+O*h,l+O*p,u*R/die(t*k+_)]}}return g.duration=b*1e3*t/Math.SQRT2,g}return i.rho=function(s){var o=Math.max(.001,+s),a=o*o,l=a*a;return e(o,a,l)},i}(Math.SQRT2,2,4);function Ebe(e){return function(t,n){var r=e((t=LT(t)).h,(n=LT(n)).h),i=Fs(t.s,n.s),s=Fs(t.l,n.l),o=Fs(t.opacity,n.opacity);return function(a){return t.h=r(a),t.s=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const Znt=Ebe(QO);var ert=Ebe(Fs);function trt(e,t){var n=Fs((e=Vy(e)).l,(t=Vy(t)).l),r=Fs(e.a,t.a),i=Fs(e.b,t.b),s=Fs(e.opacity,t.opacity);return function(o){return e.l=n(o),e.a=r(o),e.b=i(o),e.opacity=s(o),e+""}}function _be(e){return function(t,n){var r=e((t=FT(t)).h,(n=FT(n)).h),i=Fs(t.c,n.c),s=Fs(t.l,n.l),o=Fs(t.opacity,n.opacity);return function(a){return t.h=r(a),t.c=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const nrt=_be(QO);var rrt=_be(Fs);function Tbe(e){return function t(n){n=+n;function r(i,s){var o=e((i=w0(i)).h,(s=w0(s)).h),a=Fs(i.s,s.s),l=Fs(i.l,s.l),u=Fs(i.opacity,s.opacity);return function(c){return i.h=o(c),i.s=a(c),i.l=l(Math.pow(c,n)),i.opacity=u(c),i+""}}return r.gamma=t,r}(1)}const irt=Tbe(QO);var yW=Tbe(Fs);function vW(e,t){t===void 0&&(t=e,e=q0);for(var n=0,r=t.length-1,i=t[0],s=new Array(r<0?0:r);n<r;)s[n]=e(i,i=t[++n]);return function(o){var a=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return s[a](o-a)}}function srt(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}const ort=Object.freeze(Object.defineProperty({__proto__:null,interpolate:q0,interpolateArray:Unt,interpolateBasis:ube,interpolateBasisClosed:cbe,interpolateCubehelix:irt,interpolateCubehelixLong:yW,interpolateDate:gbe,interpolateDiscrete:Wnt,interpolateHcl:nrt,interpolateHclLong:rrt,interpolateHsl:Znt,interpolateHslLong:ert,interpolateHue:Vnt,interpolateLab:trt,interpolateNumber:bu,interpolateNumberArray:mW,interpolateObject:ybe,interpolateRgb:BT,interpolateRgbBasis:hbe,interpolateRgbBasisClosed:znt,interpolateRound:sS,interpolateString:gW,interpolateTransformCss:wbe,interpolateTransformSvg:xbe,interpolateZoom:Jnt,piecewise:vW,quantize:srt},Symbol.toStringTag,{value:"Module"}));var Dw=0,Z_=0,d_=0,Cbe=1e3,XD,e2,QD=0,Gy=0,JO=0,zT=typeof performance=="object"&&performance.now?performance:Date,Sbe=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function ZO(){return Gy||(Sbe(art),Gy=zT.now()+JO)}function art(){Gy=0}function UT(){this._call=this._time=this._next=null}UT.prototype=bW.prototype={constructor:UT,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?ZO():+n)+(t==null?0:+t),!this._next&&e2!==this&&(e2?e2._next=this:XD=this,e2=this),this._call=e,this._time=n,Yj()},stop:function(){this._call&&(this._call=null,this._time=1/0,Yj())}};function bW(e,t,n){var r=new UT;return r.restart(e,t,n),r}function lrt(){ZO(),++Dw;for(var e=XD,t;e;)(t=Gy-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Dw}function fie(){Gy=(QD=zT.now())+JO,Dw=Z_=0;try{lrt()}finally{Dw=0,crt(),Gy=0}}function urt(){var e=zT.now(),t=e-QD;t>Cbe&&(JO-=t,QD=e)}function crt(){for(var e,t=XD,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:XD=n);e2=e,Yj(r)}function Yj(e){if(!Dw){Z_&&(Z_=clearTimeout(Z_));var t=e-Gy;t>24?(e<1/0&&(Z_=setTimeout(fie,e-zT.now()-JO)),d_&&(d_=clearInterval(d_))):(d_||(QD=zT.now(),d_=setInterval(urt,Cbe)),Dw=1,Sbe(fie))}}function hie(e,t,n){var r=new UT;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}function drt(e,t,n){var r=new UT,i=t;return t==null?(r.restart(e,t,n),r):(r._restart=r.restart,r.restart=function(s,o,a){o=+o,a=a==null?ZO():+a,r._restart(function l(u){u+=i,r._restart(l,i+=o,a),s(u)},o,a)},r.restart(e,t,n),r)}var frt=uW("start","end","cancel","interrupt"),hrt=[],Abe=0,pie=1,Kj=2,WR=3,mie=4,Xj=5,VR=6;function e$(e,t,n,r,i,s){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;prt(e,n,{name:t,index:r,group:i,on:frt,tween:hrt,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:Abe})}function wW(e,t){var n=fd(e,t);if(n.state>Abe)throw new Error("too late; already scheduled");return n}function qf(e,t){var n=fd(e,t);if(n.state>WR)throw new Error("too late; already running");return n}function fd(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function prt(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=bW(s,0,n.time);function s(u){n.state=pie,n.timer.restart(o,n.delay,n.time),n.delay<=u&&o(u-n.delay)}function o(u){var c,d,f,h;if(n.state!==pie)return l();for(c in r)if(h=r[c],h.name===n.name){if(h.state===WR)return hie(o);h.state===mie?(h.state=VR,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[c]):+c<t&&(h.state=VR,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[c])}if(hie(function(){n.state===WR&&(n.state=mie,n.timer.restart(a,n.delay,n.time),a(u))}),n.state=Kj,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Kj){for(n.state=WR,i=new Array(f=n.tween.length),c=0,d=-1;c<f;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++d]=h);i.length=d+1}}function a(u){for(var c=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(l),n.state=Xj,1),d=-1,f=i.length;++d<f;)i[d].call(e,c);n.state===Xj&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=VR,n.timer.stop(),delete r[t];for(var u in r)return;delete e.__transition}}function mrt(e,t){var n=e.__transition,r,i,s=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){s=!1;continue}i=r.state>Kj&&r.state<Xj,r.state=VR,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}s&&delete e.__transition}}function grt(e){return this.each(function(){mrt(this,e)})}function yrt(e,t){var n,r;return function(){var i=qf(this,e),s=i.tween;if(s!==n){r=n=s;for(var o=0,a=r.length;o<a;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function vrt(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=qf(this,e),o=s.tween;if(o!==r){i=(r=o).slice();for(var a={name:t,value:n},l=0,u=i.length;l<u;++l)if(i[l].name===t){i[l]=a;break}l===u&&i.push(a)}s.tween=i}}function brt(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=fd(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?yrt:vrt)(n,e,t))}function xW(e,t,n){var r=e._id;return e.each(function(){var i=qf(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return fd(i,r).value[t]}}function kbe(e,t){var n;return(typeof t=="number"?bu:t instanceof Wy?BT:(n=Wy(t))?(t=n,BT):gW)(e,t)}function wrt(e){return function(){this.removeAttribute(e)}}function xrt(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Ert(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttribute(e);return o===i?null:o===r?s:s=t(r=o,n)}}function _rt(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?s:s=t(r=o,n)}}function Trt(e,t,n){var r,i,s;return function(){var o,a=n(this),l;return a==null?void this.removeAttribute(e):(o=this.getAttribute(e),l=a+"",o===l?null:o===r&&l===i?s:(i=l,s=t(r=o,a)))}}function Crt(e,t,n){var r,i,s;return function(){var o,a=n(this),l;return a==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),l=a+"",o===l?null:o===r&&l===i?s:(i=l,s=t(r=o,a)))}}function Srt(e,t){var n=YO(e),r=n==="transform"?xbe:kbe;return this.attrTween(e,typeof t=="function"?(n.local?Crt:Trt)(n,r,xW(this,"attr."+e,t)):t==null?(n.local?xrt:wrt)(n):(n.local?_rt:Ert)(n,r,t))}function Art(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function krt(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Irt(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&krt(e,s)),n}return i._value=t,i}function Rrt(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&Art(e,s)),n}return i._value=t,i}function Drt(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=YO(e);return this.tween(n,(r.local?Irt:Rrt)(r,t))}function Prt(e,t){return function(){wW(this,e).delay=+t.apply(this,arguments)}}function Nrt(e,t){return t=+t,function(){wW(this,e).delay=t}}function Ort(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Prt:Nrt)(t,e)):fd(this.node(),t).delay}function $rt(e,t){return function(){qf(this,e).duration=+t.apply(this,arguments)}}function Mrt(e,t){return t=+t,function(){qf(this,e).duration=t}}function Lrt(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?$rt:Mrt)(t,e)):fd(this.node(),t).duration}function Frt(e,t){if(typeof t!="function")throw new Error;return function(){qf(this,e).ease=t}}function jrt(e){var t=this._id;return arguments.length?this.each(Frt(t,e)):fd(this.node(),t).ease}function Brt(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;qf(this,e).ease=n}}function zrt(e){if(typeof e!="function")throw new Error;return this.each(Brt(this._id,e))}function Urt(e){typeof e!="function"&&(e=z1e(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],l,u=0;u<o;++u)(l=s[u])&&e.call(l,l.__data__,u,s)&&a.push(l);return new xp(r,this._parents,this._name,this._id)}function qrt(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var l=t[a],u=n[a],c=l.length,d=o[a]=new Array(c),f,h=0;h<c;++h)(f=l[h]||u[h])&&(d[h]=f);for(;a<r;++a)o[a]=t[a];return new xp(o,this._parents,this._name,this._id)}function Hrt(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Wrt(e,t,n){var r,i,s=Hrt(t)?wW:qf;return function(){var o=s(this,e),a=o.on;a!==r&&(i=(r=a).copy()).on(t,n),o.on=i}}function Vrt(e,t){var n=this._id;return arguments.length<2?fd(this.node(),n).on.on(e):this.each(Wrt(n,e,t))}function Grt(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Yrt(){return this.on("end.remove",Grt(this._id))}function Krt(e){var t=this._name,n=this._id;typeof e!="function"&&(e=cW(e));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a=r[o],l=a.length,u=s[o]=new Array(l),c,d,f=0;f<l;++f)(c=a[f])&&(d=e.call(c,c.__data__,f,a))&&("__data__"in c&&(d.__data__=c.__data__),u[f]=d,e$(u[f],t,n,f,u,fd(c,n)));return new xp(s,this._parents,t,n)}function Xrt(e){var t=this._name,n=this._id;typeof e!="function"&&(e=B1e(e));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var l=r[a],u=l.length,c,d=0;d<u;++d)if(c=l[d]){for(var f=e.call(c,c.__data__,d,l),h,p=fd(c,n),m=0,g=f.length;m<g;++m)(h=f[m])&&e$(h,t,n,m,f,p);s.push(f),o.push(c)}return new xp(s,o,t,n)}var Qrt=rS.prototype.constructor;function Jrt(){return new Qrt(this._groups,this._parents)}function Zrt(e,t){var n,r,i;return function(){var s=Iw(this,e),o=(this.style.removeProperty(e),Iw(this,e));return s===o?null:s===n&&o===r?i:i=t(n=s,r=o)}}function Ibe(e){return function(){this.style.removeProperty(e)}}function eit(e,t,n){var r,i=n+"",s;return function(){var o=Iw(this,e);return o===i?null:o===r?s:s=t(r=o,n)}}function tit(e,t,n){var r,i,s;return function(){var o=Iw(this,e),a=n(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(e),Iw(this,e))),o===l?null:o===r&&l===i?s:(i=l,s=t(r=o,a))}}function nit(e,t){var n,r,i,s="style."+t,o="end."+s,a;return function(){var l=qf(this,e),u=l.on,c=l.value[s]==null?a||(a=Ibe(t)):void 0;(u!==n||i!==c)&&(r=(n=u).copy()).on(o,i=c),l.on=r}}function rit(e,t,n){var r=(e+="")=="transform"?wbe:kbe;return t==null?this.styleTween(e,Zrt(e,r)).on("end.style."+e,Ibe(e)):typeof t=="function"?this.styleTween(e,tit(e,r,xW(this,"style."+e,t))).each(nit(this._id,e)):this.styleTween(e,eit(e,r,t),n).on("end.style."+e,null)}function iit(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function sit(e,t,n){var r,i;function s(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&iit(e,o,n)),r}return s._value=t,s}function oit(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,sit(e,t,n??""))}function ait(e){return function(){this.textContent=e}}function lit(e){return function(){var t=e(this);this.textContent=t??""}}function uit(e){return this.tween("text",typeof e=="function"?lit(xW(this,"text",e)):ait(e==null?"":e+""))}function cit(e){return function(t){this.textContent=e.call(this,t)}}function dit(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&cit(i)),t}return r._value=e,r}function fit(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,dit(e))}function hit(){for(var e=this._name,t=this._id,n=Rbe(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,l,u=0;u<a;++u)if(l=o[u]){var c=fd(l,t);e$(l,e,n,u,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new xp(r,this._parents,e,n)}function pit(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var a={value:o},l={value:function(){--i===0&&s()}};n.each(function(){var u=qf(this,r),c=u.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(l)),u.on=t}),i===0&&s()})}var mit=0;function xp(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Rbe(){return++mit}var vh=rS.prototype;xp.prototype={constructor:xp,select:Krt,selectAll:Xrt,selectChild:vh.selectChild,selectChildren:vh.selectChildren,filter:Urt,merge:qrt,selection:Jrt,transition:hit,call:vh.call,nodes:vh.nodes,node:vh.node,size:vh.size,empty:vh.empty,each:vh.each,on:Vrt,attr:Srt,attrTween:Drt,style:rit,styleTween:oit,text:uit,textTween:fit,remove:Yrt,tween:brt,delay:Ort,duration:Lrt,ease:jrt,easeVarying:zrt,end:pit,[Symbol.iterator]:vh[Symbol.iterator]};function git(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var yit={time:null,delay:0,duration:250,ease:git};function vit(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function bit(e){var t,n;e instanceof xp?(t=e._id,e=e._name):(t=Rbe(),(n=yit).time=ZO(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,l,u=0;u<a;++u)(l=o[u])&&e$(l,e,t,u,o,n||vit(l,t));return new xp(r,this._parents,e,t)}rS.prototype.interrupt=grt;rS.prototype.transition=bit;const Qj=Math.PI,Jj=2*Qj,Kg=1e-6,wit=Jj-Kg;function Dbe(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function xit(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return Dbe;const n=10**t;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let EW=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?Dbe:xit(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,s,o){this._append`C${+t},${+n},${+r},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(t,n,r,i,s){if(t=+t,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,l=r-t,u=i-n,c=o-t,d=a-n,f=c*c+d*d;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(f>Kg)if(!(Math.abs(d*l-u*c)>Kg)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let h=r-o,p=i-a,m=l*l+u*u,g=h*h+p*p,b=Math.sqrt(m),v=Math.sqrt(f),x=s*Math.tan((Qj-Math.acos((m+f-g)/(2*b*v)))/2),E=x/v,_=x/b;Math.abs(E-1)>Kg&&this._append`L${t+E*c},${n+E*d}`,this._append`A${s},${s},0,0,${+(d*h>c*p)},${this._x1=t+_*l},${this._y1=n+_*u}`}}arc(t,n,r,i,s,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),l=r*Math.sin(i),u=t+a,c=n+l,d=1^o,f=o?i-s:s-i;this._x1===null?this._append`M${u},${c}`:(Math.abs(this._x1-u)>Kg||Math.abs(this._y1-c)>Kg)&&this._append`L${u},${c}`,r&&(f<0&&(f=f%Jj+Jj),f>wit?this._append`A${r},${r},0,1,${d},${t-a},${n-l}A${r},${r},0,1,${d},${this._x1=u},${this._y1=c}`:f>Kg&&this._append`A${r},${r},0,${+(f>=Qj)},${d},${this._x1=t+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function t$(){return new EW}t$.prototype=EW.prototype;const np=11102230246251565e-32,No=134217729,Eit=(3+8*np)*np;function GM(e,t,n,r,i){let s,o,a,l,u=t[0],c=r[0],d=0,f=0;c>u==c>-u?(s=u,u=t[++d]):(s=c,c=r[++f]);let h=0;if(d<e&&f<n)for(c>u==c>-u?(o=u+s,a=s-(o-u),u=t[++d]):(o=c+s,a=s-(o-c),c=r[++f]),s=o,a!==0&&(i[h++]=a);d<e&&f<n;)c>u==c>-u?(o=s+u,l=o-s,a=s-(o-l)+(u-l),u=t[++d]):(o=s+c,l=o-s,a=s-(o-l)+(c-l),c=r[++f]),s=o,a!==0&&(i[h++]=a);for(;d<e;)o=s+u,l=o-s,a=s-(o-l)+(u-l),u=t[++d],s=o,a!==0&&(i[h++]=a);for(;f<n;)o=s+c,l=o-s,a=s-(o-l)+(c-l),c=r[++f],s=o,a!==0&&(i[h++]=a);return(s!==0||h===0)&&(i[h++]=s),h}function _it(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}function oS(e){return new Float64Array(e)}const Tit=(3+16*np)*np,Cit=(2+12*np)*np,Sit=(9+64*np)*np*np,Y1=oS(4),gie=oS(8),yie=oS(12),vie=oS(16),aa=oS(4);function Ait(e,t,n,r,i,s,o){let a,l,u,c,d,f,h,p,m,g,b,v,x,E,_,C,S,k;const R=e-i,O=n-i,N=t-s,L=r-s;E=R*L,f=No*R,h=f-(f-R),p=R-h,f=No*L,m=f-(f-L),g=L-m,_=p*g-(E-h*m-p*m-h*g),C=N*O,f=No*N,h=f-(f-N),p=N-h,f=No*O,m=f-(f-O),g=O-m,S=p*g-(C-h*m-p*m-h*g),b=_-S,d=_-b,Y1[0]=_-(b+d)+(d-S),v=E+b,d=v-E,x=E-(v-d)+(b-d),b=x-C,d=x-b,Y1[1]=x-(b+d)+(d-C),k=v+b,d=k-v,Y1[2]=v-(k-d)+(b-d),Y1[3]=k;let $=_it(4,Y1),B=Cit*o;if($>=B||-$>=B||(d=e-R,a=e-(R+d)+(d-i),d=n-O,u=n-(O+d)+(d-i),d=t-N,l=t-(N+d)+(d-s),d=r-L,c=r-(L+d)+(d-s),a===0&&l===0&&u===0&&c===0)||(B=Sit*o+Eit*Math.abs($),$+=R*c+L*a-(N*u+O*l),$>=B||-$>=B))return $;E=a*L,f=No*a,h=f-(f-a),p=a-h,f=No*L,m=f-(f-L),g=L-m,_=p*g-(E-h*m-p*m-h*g),C=l*O,f=No*l,h=f-(f-l),p=l-h,f=No*O,m=f-(f-O),g=O-m,S=p*g-(C-h*m-p*m-h*g),b=_-S,d=_-b,aa[0]=_-(b+d)+(d-S),v=E+b,d=v-E,x=E-(v-d)+(b-d),b=x-C,d=x-b,aa[1]=x-(b+d)+(d-C),k=v+b,d=k-v,aa[2]=v-(k-d)+(b-d),aa[3]=k;const H=GM(4,Y1,4,aa,gie);E=R*c,f=No*R,h=f-(f-R),p=R-h,f=No*c,m=f-(f-c),g=c-m,_=p*g-(E-h*m-p*m-h*g),C=N*u,f=No*N,h=f-(f-N),p=N-h,f=No*u,m=f-(f-u),g=u-m,S=p*g-(C-h*m-p*m-h*g),b=_-S,d=_-b,aa[0]=_-(b+d)+(d-S),v=E+b,d=v-E,x=E-(v-d)+(b-d),b=x-C,d=x-b,aa[1]=x-(b+d)+(d-C),k=v+b,d=k-v,aa[2]=v-(k-d)+(b-d),aa[3]=k;const Y=GM(H,gie,4,aa,yie);E=a*c,f=No*a,h=f-(f-a),p=a-h,f=No*c,m=f-(f-c),g=c-m,_=p*g-(E-h*m-p*m-h*g),C=l*u,f=No*l,h=f-(f-l),p=l-h,f=No*u,m=f-(f-u),g=u-m,S=p*g-(C-h*m-p*m-h*g),b=_-S,d=_-b,aa[0]=_-(b+d)+(d-S),v=E+b,d=v-E,x=E-(v-d)+(b-d),b=x-C,d=x-b,aa[1]=x-(b+d)+(d-C),k=v+b,d=k-v,aa[2]=v-(k-d)+(b-d),aa[3]=k;const J=GM(Y,yie,4,aa,vie);return vie[J-1]}function Nk(e,t,n,r,i,s){const o=(t-s)*(n-i),a=(e-i)*(r-s),l=o-a,u=Math.abs(o+a);return Math.abs(l)>=Tit*u?l:-Ait(e,t,n,r,i,s,u)}const bie=Math.pow(2,-52),Ok=new Uint32Array(512);class JD{static from(t,n=Pit,r=Nit){const i=t.length,s=new Float64Array(i*2);for(let o=0;o<i;o++){const a=t[o];s[2*o]=n(a),s[2*o+1]=r(a)}return new JD(s)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:s}=this,o=t.length>>1;let a=1/0,l=1/0,u=-1/0,c=-1/0;for(let R=0;R<o;R++){const O=t[2*R],N=t[2*R+1];O<a&&(a=O),N<l&&(l=N),O>u&&(u=O),N>c&&(c=N),this._ids[R]=R}const d=(a+u)/2,f=(l+c)/2;let h,p,m;for(let R=0,O=1/0;R<o;R++){const N=YM(d,f,t[2*R],t[2*R+1]);N<O&&(h=R,O=N)}const g=t[2*h],b=t[2*h+1];for(let R=0,O=1/0;R<o;R++){if(R===h)continue;const N=YM(g,b,t[2*R],t[2*R+1]);N<O&&N>0&&(p=R,O=N)}let v=t[2*p],x=t[2*p+1],E=1/0;for(let R=0;R<o;R++){if(R===h||R===p)continue;const O=Rit(g,b,v,x,t[2*R],t[2*R+1]);O<E&&(m=R,E=O)}let _=t[2*m],C=t[2*m+1];if(E===1/0){for(let N=0;N<o;N++)this._dists[N]=t[2*N]-t[0]||t[2*N+1]-t[1];Db(this._ids,this._dists,0,o-1);const R=new Uint32Array(o);let O=0;for(let N=0,L=-1/0;N<o;N++){const $=this._ids[N],B=this._dists[$];B>L&&(R[O++]=$,L=B)}this.hull=R.subarray(0,O),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(Nk(g,b,v,x,_,C)<0){const R=p,O=v,N=x;p=m,v=_,x=C,m=R,_=O,C=N}const S=Dit(g,b,v,x,_,C);this._cx=S.x,this._cy=S.y;for(let R=0;R<o;R++)this._dists[R]=YM(t[2*R],t[2*R+1],S.x,S.y);Db(this._ids,this._dists,0,o-1),this._hullStart=h;let k=3;r[h]=n[m]=p,r[p]=n[h]=m,r[m]=n[p]=h,i[h]=0,i[p]=1,i[m]=2,s.fill(-1),s[this._hashKey(g,b)]=h,s[this._hashKey(v,x)]=p,s[this._hashKey(_,C)]=m,this.trianglesLen=0,this._addTriangle(h,p,m,-1,-1,-1);for(let R=0,O,N;R<this._ids.length;R++){const L=this._ids[R],$=t[2*L],B=t[2*L+1];if(R>0&&Math.abs($-O)<=bie&&Math.abs(B-N)<=bie||(O=$,N=B,L===h||L===p||L===m))continue;let H=0;for(let U=0,j=this._hashKey($,B);U<this._hashSize&&(H=s[(j+U)%this._hashSize],!(H!==-1&&H!==r[H]));U++);H=n[H];let Y=H,J;for(;J=r[Y],Nk($,B,t[2*Y],t[2*Y+1],t[2*J],t[2*J+1])>=0;)if(Y=J,Y===H){Y=-1;break}if(Y===-1)continue;let K=this._addTriangle(Y,L,r[Y],-1,-1,i[Y]);i[L]=this._legalize(K+2),i[Y]=K,k++;let Z=r[Y];for(;J=r[Z],Nk($,B,t[2*Z],t[2*Z+1],t[2*J],t[2*J+1])<0;)K=this._addTriangle(Z,L,J,i[L],-1,i[Z]),i[L]=this._legalize(K+2),r[Z]=Z,k--,Z=J;if(Y===H)for(;J=n[Y],Nk($,B,t[2*J],t[2*J+1],t[2*Y],t[2*Y+1])<0;)K=this._addTriangle(J,L,Y,-1,i[Y],i[J]),this._legalize(K+2),i[J]=K,r[Y]=Y,k--,Y=J;this._hullStart=n[L]=Y,r[Y]=n[Z]=L,r[L]=Z,s[this._hashKey($,B)]=L,s[this._hashKey(t[2*Y],t[2*Y+1])]=Y}this.hull=new Uint32Array(k);for(let R=0,O=this._hullStart;R<k;R++)this.hull[R]=O,O=r[O];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(kit(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:r,coords:i}=this;let s=0,o=0;for(;;){const a=r[t],l=t-t%3;if(o=l+(t+2)%3,a===-1){if(s===0)break;t=Ok[--s];continue}const u=a-a%3,c=l+(t+1)%3,d=u+(a+2)%3,f=n[o],h=n[t],p=n[c],m=n[d];if(Iit(i[2*f],i[2*f+1],i[2*h],i[2*h+1],i[2*p],i[2*p+1],i[2*m],i[2*m+1])){n[t]=m,n[a]=f;const b=r[d];if(b===-1){let x=this._hullStart;do{if(this._hullTri[x]===d){this._hullTri[x]=t;break}x=this._hullPrev[x]}while(x!==this._hullStart)}this._link(t,b),this._link(a,r[o]),this._link(o,d);const v=u+(a+1)%3;s<Ok.length&&(Ok[s++]=v)}else{if(s===0)break;t=Ok[--s]}}return o}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,r,i,s,o){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=n,this._triangles[a+2]=r,this._link(a,i),this._link(a+1,s),this._link(a+2,o),this.trianglesLen+=3,a}}function kit(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function YM(e,t,n,r){const i=e-n,s=t-r;return i*i+s*s}function Iit(e,t,n,r,i,s,o,a){const l=e-o,u=t-a,c=n-o,d=r-a,f=i-o,h=s-a,p=l*l+u*u,m=c*c+d*d,g=f*f+h*h;return l*(d*g-m*h)-u*(c*g-m*f)+p*(c*h-d*f)<0}function Rit(e,t,n,r,i,s){const o=n-e,a=r-t,l=i-e,u=s-t,c=o*o+a*a,d=l*l+u*u,f=.5/(o*u-a*l),h=(u*c-a*d)*f,p=(o*d-l*c)*f;return h*h+p*p}function Dit(e,t,n,r,i,s){const o=n-e,a=r-t,l=i-e,u=s-t,c=o*o+a*a,d=l*l+u*u,f=.5/(o*u-a*l),h=e+(u*c-a*d)*f,p=t+(o*d-l*c)*f;return{x:h,y:p}}function Db(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const s=e[i],o=t[s];let a=i-1;for(;a>=n&&t[e[a]]>o;)e[a+1]=e[a--];e[a+1]=s}else{const i=n+r>>1;let s=n+1,o=r;f_(e,i,s),t[e[n]]>t[e[r]]&&f_(e,n,r),t[e[s]]>t[e[r]]&&f_(e,s,r),t[e[n]]>t[e[s]]&&f_(e,n,s);const a=e[s],l=t[a];for(;;){do s++;while(t[e[s]]<l);do o--;while(t[e[o]]>l);if(o<s)break;f_(e,s,o)}e[n+1]=e[o],e[o]=a,r-s+1>=o-n?(Db(e,t,s,r),Db(e,t,n,o-1)):(Db(e,t,n,o-1),Db(e,t,s,r))}}function f_(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function Pit(e){return e[0]}function Nit(e){return e[1]}const wie=1e-6;class gy{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,r){t=+t,n=+n,r=+r;const i=t+r,s=n;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${s}`:(Math.abs(this._x1-i)>wie||Math.abs(this._y1-s)>wie)&&(this._+="L"+i+","+s),r&&(this._+=`A${r},${r},0,1,1,${t-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=s}`)}rect(t,n,r,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class Zj{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let Oit=class{constructor(t,[n,r,i,s]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((s=+s)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=i,this.xmin=n,this.ymax=s,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:r},vectors:i}=this;let s,o;const a=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let m=0,g=0,b=r.length,v,x;m<b;m+=3,g+=2){const E=r[m]*2,_=r[m+1]*2,C=r[m+2]*2,S=t[E],k=t[E+1],R=t[_],O=t[_+1],N=t[C],L=t[C+1],$=R-S,B=O-k,H=N-S,Y=L-k,J=($*Y-B*H)*2;if(Math.abs(J)<1e-9){if(s===void 0){s=o=0;for(const Z of n)s+=t[Z*2],o+=t[Z*2+1];s/=n.length,o/=n.length}const K=1e9*Math.sign((s-S)*Y-(o-k)*H);v=(S+N)/2-K*Y,x=(k+L)/2+K*H}else{const K=1/J,Z=$*$+B*B,U=H*H+Y*Y;v=S+(Y*Z-B*U)*K,x=k+($*U-H*Z)*K}a[g]=v,a[g+1]=x}let l=n[n.length-1],u,c=l*4,d,f=t[2*l],h,p=t[2*l+1];i.fill(0);for(let m=0;m<n.length;++m)l=n[m],u=c,d=f,h=p,c=l*4,f=t[2*l],p=t[2*l+1],i[u+2]=i[c]=h-p,i[u+3]=i[c+1]=f-d}render(t){const n=t==null?t=new gy:void 0,{delaunay:{halfedges:r,inedges:i,hull:s},circumcenters:o,vectors:a}=this;if(s.length<=1)return null;for(let c=0,d=r.length;c<d;++c){const f=r[c];if(f<c)continue;const h=Math.floor(c/3)*2,p=Math.floor(f/3)*2,m=o[h],g=o[h+1],b=o[p],v=o[p+1];this._renderSegment(m,g,b,v,t)}let l,u=s[s.length-1];for(let c=0;c<s.length;++c){l=u,u=s[c];const d=Math.floor(i[u]/3)*2,f=o[d],h=o[d+1],p=l*4,m=this._project(f,h,a[p+2],a[p+3]);m&&this._renderSegment(f,h,m[0],m[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new gy:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const r=n==null?n=new gy:void 0,i=this._clip(t);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let s=i.length;for(;i[0]===i[s-2]&&i[1]===i[s-1]&&s>1;)s-=2;for(let o=2;o<s;o+=2)(i[o]!==i[o-2]||i[o+1]!==i[o-1])&&n.lineTo(i[o],i[o+1]);return n.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,r=t.length/2;n<r;++n){const i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(t){const n=new Zj;return this.renderCell(t,n),n.value()}_renderSegment(t,n,r,i,s){let o;const a=this._regioncode(t,n),l=this._regioncode(r,i);a===0&&l===0?(s.moveTo(t,n),s.lineTo(r,i)):(o=this._clipSegment(t,n,r,i,a,l))&&(s.moveTo(o[0],o[1]),s.lineTo(o[2],o[3]))}contains(t,n,r){return n=+n,n!==n||(r=+r,r!==r)?!1:this.delaunay._step(t,n,r)===t}*neighbors(t){const n=this._clip(t);if(n)for(const r of this.delaunay.neighbors(t)){const i=this._clip(r);if(i){e:for(let s=0,o=n.length;s<o;s+=2)for(let a=0,l=i.length;a<l;a+=2)if(n[s]===i[a]&&n[s+1]===i[a+1]&&n[(s+2)%o]===i[(a+l-2)%l]&&n[(s+3)%o]===i[(a+l-1)%l]){yield r;break e}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:s}}=this,o=r[t];if(o===-1)return null;const a=[];let l=o;do{const u=Math.floor(l/3);if(a.push(n[u*2],n[u*2+1]),l=l%3===2?l-2:l+1,s[l]!==t)break;l=i[l]}while(l!==o&&l!==-1);return a}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:r}=this,i=t*4;return this._simplify(r[i]||r[i+1]?this._clipInfinite(t,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(t,n))}_clipFinite(t,n){const r=n.length;let i=null,s,o,a=n[r-2],l=n[r-1],u,c=this._regioncode(a,l),d,f=0;for(let h=0;h<r;h+=2)if(s=a,o=l,a=n[h],l=n[h+1],u=c,c=this._regioncode(a,l),u===0&&c===0)d=f,f=0,i?i.push(a,l):i=[a,l];else{let p,m,g,b,v;if(u===0){if((p=this._clipSegment(s,o,a,l,u,c))===null)continue;[m,g,b,v]=p}else{if((p=this._clipSegment(a,l,s,o,c,u))===null)continue;[b,v,m,g]=p,d=f,f=this._edgecode(m,g),d&&f&&this._edge(t,d,f,i,i.length),i?i.push(m,g):i=[m,g]}d=f,f=this._edgecode(b,v),d&&f&&this._edge(t,d,f,i,i.length),i?i.push(b,v):i=[b,v]}if(i)d=f,f=this._edgecode(i[0],i[1]),d&&f&&this._edge(t,d,f,i,i.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(t,n,r,i,s,o){const a=s<o;for(a&&([t,n,r,i,s,o]=[r,i,t,n,o,s]);;){if(s===0&&o===0)return a?[r,i,t,n]:[t,n,r,i];if(s&o)return null;let l,u,c=s||o;c&8?(l=t+(r-t)*(this.ymax-n)/(i-n),u=this.ymax):c&4?(l=t+(r-t)*(this.ymin-n)/(i-n),u=this.ymin):c&2?(u=n+(i-n)*(this.xmax-t)/(r-t),l=this.xmax):(u=n+(i-n)*(this.xmin-t)/(r-t),l=this.xmin),s?(t=l,n=u,s=this._regioncode(t,n)):(r=l,i=u,o=this._regioncode(r,i))}}_clipInfinite(t,n,r,i,s,o){let a=Array.from(n),l;if((l=this._project(a[0],a[1],r,i))&&a.unshift(l[0],l[1]),(l=this._project(a[a.length-2],a[a.length-1],s,o))&&a.push(l[0],l[1]),a=this._clipFinite(t,a))for(let u=0,c=a.length,d,f=this._edgecode(a[c-2],a[c-1]);u<c;u+=2)d=f,f=this._edgecode(a[u],a[u+1]),d&&f&&(u=this._edge(t,d,f,a,u),c=a.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(t,n,r,i,s){for(;n!==r;){let o,a;switch(n){case 5:n=4;continue;case 4:n=6,o=this.xmax,a=this.ymin;break;case 6:n=2;continue;case 2:n=10,o=this.xmax,a=this.ymax;break;case 10:n=8;continue;case 8:n=9,o=this.xmin,a=this.ymax;break;case 9:n=1;continue;case 1:n=5,o=this.xmin,a=this.ymin;break}(i[s]!==o||i[s+1]!==a)&&this.contains(t,o,a)&&(i.splice(s,0,o,a),s+=2)}return s}_project(t,n,r,i){let s=1/0,o,a,l;if(i<0){if(n<=this.ymin)return null;(o=(this.ymin-n)/i)<s&&(l=this.ymin,a=t+(s=o)*r)}else if(i>0){if(n>=this.ymax)return null;(o=(this.ymax-n)/i)<s&&(l=this.ymax,a=t+(s=o)*r)}if(r>0){if(t>=this.xmax)return null;(o=(this.xmax-t)/r)<s&&(a=this.xmax,l=n+(s=o)*i)}else if(r<0){if(t<=this.xmin)return null;(o=(this.xmin-t)/r)<s&&(a=this.xmin,l=n+(s=o)*i)}return[a,l]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const r=(n+2)%t.length,i=(n+4)%t.length;(t[n]===t[r]&&t[r]===t[i]||t[n+1]===t[r+1]&&t[r+1]===t[i+1])&&(t.splice(r,2),n-=2)}t.length||(t=null)}return t}};const $it=2*Math.PI,K1=Math.pow;function Mit(e){return e[0]}function Lit(e){return e[1]}function Fit(e){const{triangles:t,coords:n}=e;for(let r=0;r<t.length;r+=3){const i=2*t[r],s=2*t[r+1],o=2*t[r+2];if((n[o]-n[i])*(n[s+1]-n[i+1])-(n[s]-n[i])*(n[o+1]-n[i+1])>1e-10)return!1}return!0}function jit(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class _W{static from(t,n=Mit,r=Lit,i){return new _W("length"in t?Bit(t,n,r,i):Float64Array.from(zit(t,n,r,i)))}constructor(t){this._delaunator=new JD(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&Fit(t)){this.collinear=Int32Array.from({length:n.length/2},(f,h)=>h).sort((f,h)=>n[2*f]-n[2*h]||n[2*f+1]-n[2*h+1]);const l=this.collinear[0],u=this.collinear[this.collinear.length-1],c=[n[2*l],n[2*l+1],n[2*u],n[2*u+1]],d=1e-8*Math.hypot(c[3]-c[1],c[2]-c[0]);for(let f=0,h=n.length/2;f<h;++f){const p=jit(n[2*f],n[2*f+1],d);n[2*f]=p[0],n[2*f+1]=p[1]}this._delaunator=new JD(n)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,s=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let l=0,u=r.length;l<u;++l){const c=s[l%3===2?l-2:l+1];(r[l]===-1||o[c]===-1)&&(o[c]=l)}for(let l=0,u=i.length;l<u;++l)a[i[l]]=l;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],o[i[0]]=1,i.length===2&&(o[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(t){return new Oit(this,t)}*neighbors(t){const{inedges:n,hull:r,_hullIndex:i,halfedges:s,triangles:o,collinear:a}=this;if(a){const d=a.indexOf(t);d>0&&(yield a[d-1]),d<a.length-1&&(yield a[d+1]);return}const l=n[t];if(l===-1)return;let u=l,c=-1;do{if(yield c=o[u],u=u%3===2?u-2:u+1,o[u]!==t)return;if(u=s[u],u===-1){const d=r[(i[t]+1)%r.length];d!==c&&(yield d);return}}while(u!==l)}find(t,n,r=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const i=r;let s;for(;(s=this._step(r,t,n))>=0&&s!==r&&s!==i;)r=s;return s}_step(t,n,r){const{inedges:i,hull:s,_hullIndex:o,halfedges:a,triangles:l,points:u}=this;if(i[t]===-1||!u.length)return(t+1)%(u.length>>1);let c=t,d=K1(n-u[t*2],2)+K1(r-u[t*2+1],2);const f=i[t];let h=f;do{let p=l[h];const m=K1(n-u[p*2],2)+K1(r-u[p*2+1],2);if(m<d&&(d=m,c=p),h=h%3===2?h-2:h+1,l[h]!==t)break;if(h=a[h],h===-1){if(h=s[(o[t]+1)%s.length],h!==p&&K1(n-u[h*2],2)+K1(r-u[h*2+1],2)<d)return h;break}}while(h!==f);return c}render(t){const n=t==null?t=new gy:void 0,{points:r,halfedges:i,triangles:s}=this;for(let o=0,a=i.length;o<a;++o){const l=i[o];if(l<o)continue;const u=s[o]*2,c=s[l]*2;t.moveTo(r[u],r[u+1]),t.lineTo(r[c],r[c+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const r=t==null?t=new gy:void 0,{points:i}=this;for(let s=0,o=i.length;s<o;s+=2){const a=i[s],l=i[s+1];t.moveTo(a+n,l),t.arc(a,l,n,0,$it)}return r&&r.value()}renderHull(t){const n=t==null?t=new gy:void 0,{hull:r,points:i}=this,s=r[0]*2,o=r.length;t.moveTo(i[s],i[s+1]);for(let a=1;a<o;++a){const l=2*r[a];t.lineTo(i[l],i[l+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new Zj;return this.renderHull(t),t.value()}renderTriangle(t,n){const r=n==null?n=new gy:void 0,{points:i,triangles:s}=this,o=s[t*=3]*2,a=s[t+1]*2,l=s[t+2]*2;return n.moveTo(i[o],i[o+1]),n.lineTo(i[a],i[a+1]),n.lineTo(i[l],i[l+1]),n.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,r=t.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new Zj;return this.renderTriangle(t,n),n.value()}}function Bit(e,t,n,r){const i=e.length,s=new Float64Array(i*2);for(let o=0;o<i;++o){const a=e[o];s[o*2]=t.call(r,a,o,e),s[o*2+1]=n.call(r,a,o,e)}return s}function*zit(e,t,n,r){let i=0;for(const s of e)yield t.call(r,s,i,e),yield n.call(r,s,i,e),++i}var xie={},KM={},XM=34,h_=10,QM=13;function Pbe(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function Uit(e,t){var n=Pbe(e);return function(r,i){return t(n(r),i,e)}}function Eie(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function Qa(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function qit(e){return e<0?"-"+Qa(-e,6):e>9999?"+"+Qa(e,6):Qa(e,4)}function Hit(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":qit(e.getUTCFullYear())+"-"+Qa(e.getUTCMonth()+1,2)+"-"+Qa(e.getUTCDate(),2)+(i?"T"+Qa(t,2)+":"+Qa(n,2)+":"+Qa(r,2)+"."+Qa(i,3)+"Z":r?"T"+Qa(t,2)+":"+Qa(n,2)+":"+Qa(r,2)+"Z":n||t?"T"+Qa(t,2)+":"+Qa(n,2)+"Z":"")}function Wit(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(d,f){var h,p,m=i(d,function(g,b){if(h)return h(g,b-1);p=g,h=f?Uit(g,f):Pbe(g)});return m.columns=p||[],m}function i(d,f){var h=[],p=d.length,m=0,g=0,b,v=p<=0,x=!1;d.charCodeAt(p-1)===h_&&--p,d.charCodeAt(p-1)===QM&&--p;function E(){if(v)return KM;if(x)return x=!1,xie;var C,S=m,k;if(d.charCodeAt(S)===XM){for(;m++<p&&d.charCodeAt(m)!==XM||d.charCodeAt(++m)===XM;);return(C=m)>=p?v=!0:(k=d.charCodeAt(m++))===h_?x=!0:k===QM&&(x=!0,d.charCodeAt(m)===h_&&++m),d.slice(S+1,C-1).replace(/""/g,'"')}for(;m<p;){if((k=d.charCodeAt(C=m++))===h_)x=!0;else if(k===QM)x=!0,d.charCodeAt(m)===h_&&++m;else if(k!==n)continue;return d.slice(S,C)}return v=!0,d.slice(S,p)}for(;(b=E())!==KM;){for(var _=[];b!==xie&&b!==KM;)_.push(b),b=E();f&&(_=f(_,g++))==null||h.push(_)}return h}function s(d,f){return d.map(function(h){return f.map(function(p){return c(h[p])}).join(e)})}function o(d,f){return f==null&&(f=Eie(d)),[f.map(c).join(e)].concat(s(d,f)).join(`
`)}function a(d,f){return f==null&&(f=Eie(d)),s(d,f).join(`
`)}function l(d){return d.map(u).join(`
`)}function u(d){return d.map(c).join(e)}function c(d){return d==null?"":d instanceof Date?Hit(d):t.test(d+="")?'"'+d.replace(/"/g,'""')+'"':d}return{parse:r,parseRows:i,format:o,formatBody:a,formatRows:l,formatRow:u,formatValue:c}}function Vit(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function i(){var s,o=n.length,a,l=0,u=0;for(s=0;s<o;++s)a=n[s],l+=a.x,u+=a.y;for(l=(l/o-e)*r,u=(u/o-t)*r,s=0;s<o;++s)a=n[s],a.x-=l,a.y-=u}return i.initialize=function(s){n=s},i.x=function(s){return arguments.length?(e=+s,i):e},i.y=function(s){return arguments.length?(t=+s,i):t},i.strength=function(s){return arguments.length?(r=+s,i):r},i}function Git(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return Nbe(this.cover(t,n),t,n,e)}function Nbe(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,s=e._root,o={data:r},a=e._x0,l=e._y0,u=e._x1,c=e._y1,d,f,h,p,m,g,b,v;if(!s)return e._root=o,e;for(;s.length;)if((m=t>=(d=(a+u)/2))?a=d:u=d,(g=n>=(f=(l+c)/2))?l=f:c=f,i=s,!(s=s[b=g<<1|m]))return i[b]=o,e;if(h=+e._x.call(null,s.data),p=+e._y.call(null,s.data),t===h&&n===p)return o.next=s,i?i[b]=o:e._root=o,e;do i=i?i[b]=new Array(4):e._root=new Array(4),(m=t>=(d=(a+u)/2))?a=d:u=d,(g=n>=(f=(l+c)/2))?l=f:c=f;while((b=g<<1|m)===(v=(p>=f)<<1|h>=d));return i[v]=s,i[b]=o,e}function Yit(e){var t,n,r=e.length,i,s,o=new Array(r),a=new Array(r),l=1/0,u=1/0,c=-1/0,d=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(s=+this._y.call(null,t))||(o[n]=i,a[n]=s,i<l&&(l=i),i>c&&(c=i),s<u&&(u=s),s>d&&(d=s));if(l>c||u>d)return this;for(this.cover(l,u).cover(c,d),n=0;n<r;++n)Nbe(this,o[n],a[n],e[n]);return this}function Kit(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,s=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,s=(r=Math.floor(t))+1;else{for(var o=i-n||1,a=this._root,l,u;n>e||e>=i||r>t||t>=s;)switch(u=(t<r)<<1|e<n,l=new Array(4),l[u]=a,a=l,o*=2,u){case 0:i=n+o,s=r+o;break;case 1:n=i-o,s=r+o;break;case 2:i=n+o,r=s-o;break;case 3:n=i-o,r=s-o;break}this._root&&this._root.length&&(this._root=a)}return this._x0=n,this._y0=r,this._x1=i,this._y1=s,this}function Xit(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function Qit(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function ya(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function Jit(e,t,n){var r,i=this._x0,s=this._y0,o,a,l,u,c=this._x1,d=this._y1,f=[],h=this._root,p,m;for(h&&f.push(new ya(h,i,s,c,d)),n==null?n=1/0:(i=e-n,s=t-n,c=e+n,d=t+n,n*=n);p=f.pop();)if(!(!(h=p.node)||(o=p.x0)>c||(a=p.y0)>d||(l=p.x1)<i||(u=p.y1)<s))if(h.length){var g=(o+l)/2,b=(a+u)/2;f.push(new ya(h[3],g,b,l,u),new ya(h[2],o,b,g,u),new ya(h[1],g,a,l,b),new ya(h[0],o,a,g,b)),(m=(t>=b)<<1|e>=g)&&(p=f[f.length-1],f[f.length-1]=f[f.length-1-m],f[f.length-1-m]=p)}else{var v=e-+this._x.call(null,h.data),x=t-+this._y.call(null,h.data),E=v*v+x*x;if(E<n){var _=Math.sqrt(n=E);i=e-_,s=t-_,c=e+_,d=t+_,r=h.data}}return r}function Zit(e){if(isNaN(c=+this._x.call(null,e))||isNaN(d=+this._y.call(null,e)))return this;var t,n=this._root,r,i,s,o=this._x0,a=this._y0,l=this._x1,u=this._y1,c,d,f,h,p,m,g,b;if(!n)return this;if(n.length)for(;;){if((p=c>=(f=(o+l)/2))?o=f:l=f,(m=d>=(h=(a+u)/2))?a=h:u=h,t=n,!(n=n[g=m<<1|p]))return this;if(!n.length)break;(t[g+1&3]||t[g+2&3]||t[g+3&3])&&(r=t,b=g)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(s=n.next)&&delete n.next,i?(s?i.next=s:delete i.next,this):t?(s?t[g]=s:delete t[g],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[b]=n:this._root=n),this):(this._root=s,this)}function est(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function tst(){return this._root}function nst(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function rst(e){var t=[],n,r=this._root,i,s,o,a,l;for(r&&t.push(new ya(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,s=n.x0,o=n.y0,a=n.x1,l=n.y1)&&r.length){var u=(s+a)/2,c=(o+l)/2;(i=r[3])&&t.push(new ya(i,u,c,a,l)),(i=r[2])&&t.push(new ya(i,s,c,u,l)),(i=r[1])&&t.push(new ya(i,u,o,a,c)),(i=r[0])&&t.push(new ya(i,s,o,u,c))}return this}function ist(e){var t=[],n=[],r;for(this._root&&t.push(new ya(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var s,o=r.x0,a=r.y0,l=r.x1,u=r.y1,c=(o+l)/2,d=(a+u)/2;(s=i[0])&&t.push(new ya(s,o,a,c,d)),(s=i[1])&&t.push(new ya(s,c,a,l,d)),(s=i[2])&&t.push(new ya(s,o,d,c,u)),(s=i[3])&&t.push(new ya(s,c,d,l,u))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function sst(e){return e[0]}function ost(e){return arguments.length?(this._x=e,this):this._x}function ast(e){return e[1]}function lst(e){return arguments.length?(this._y=e,this):this._y}function TW(e,t,n){var r=new CW(t??sst,n??ast,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function CW(e,t,n,r,i,s){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=s,this._root=void 0}function _ie(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var Da=TW.prototype=CW.prototype;Da.copy=function(){var e=new CW(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=_ie(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=_ie(r));return e};Da.add=Git;Da.addAll=Yit;Da.cover=Kit;Da.data=Xit;Da.extent=Qit;Da.find=Jit;Da.remove=Zit;Da.removeAll=est;Da.root=tst;Da.size=nst;Da.visit=rst;Da.visitAfter=ist;Da.x=ost;Da.y=lst;function ba(e){return function(){return e}}function Vm(e){return(e()-.5)*1e-6}function ust(e){return e.x+e.vx}function cst(e){return e.y+e.vy}function dst(e){var t,n,r,i=1,s=1;typeof e!="function"&&(e=ba(e==null?1:+e));function o(){for(var u,c=t.length,d,f,h,p,m,g,b=0;b<s;++b)for(d=TW(t,ust,cst).visitAfter(a),u=0;u<c;++u)f=t[u],m=n[f.index],g=m*m,h=f.x+f.vx,p=f.y+f.vy,d.visit(v);function v(x,E,_,C,S){var k=x.data,R=x.r,O=m+R;if(k){if(k.index>f.index){var N=h-k.x-k.vx,L=p-k.y-k.vy,$=N*N+L*L;$<O*O&&(N===0&&(N=Vm(r),$+=N*N),L===0&&(L=Vm(r),$+=L*L),$=(O-($=Math.sqrt($)))/$*i,f.vx+=(N*=$)*(O=(R*=R)/(g+R)),f.vy+=(L*=$)*O,k.vx-=N*(O=1-O),k.vy-=L*O)}return}return E>h+O||C<h-O||_>p+O||S<p-O}}function a(u){if(u.data)return u.r=n[u.data.index];for(var c=u.r=0;c<4;++c)u[c]&&u[c].r>u.r&&(u.r=u[c].r)}function l(){if(t){var u,c=t.length,d;for(n=new Array(c),u=0;u<c;++u)d=t[u],n[d.index]=+e(d,u,t)}}return o.initialize=function(u,c){t=u,r=c,l()},o.iterations=function(u){return arguments.length?(s=+u,o):s},o.strength=function(u){return arguments.length?(i=+u,o):i},o.radius=function(u){return arguments.length?(e=typeof u=="function"?u:ba(+u),l(),o):e},o}function fst(e){return e.index}function Tie(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function hst(e){var t=fst,n=d,r,i=ba(30),s,o,a,l,u,c=1;e==null&&(e=[]);function d(g){return 1/Math.min(a[g.source.index],a[g.target.index])}function f(g){for(var b=0,v=e.length;b<c;++b)for(var x=0,E,_,C,S,k,R,O;x<v;++x)E=e[x],_=E.source,C=E.target,S=C.x+C.vx-_.x-_.vx||Vm(u),k=C.y+C.vy-_.y-_.vy||Vm(u),R=Math.sqrt(S*S+k*k),R=(R-s[x])/R*g*r[x],S*=R,k*=R,C.vx-=S*(O=l[x]),C.vy-=k*O,_.vx+=S*(O=1-O),_.vy+=k*O}function h(){if(o){var g,b=o.length,v=e.length,x=new Map(o.map((_,C)=>[t(_,C,o),_])),E;for(g=0,a=new Array(b);g<v;++g)E=e[g],E.index=g,typeof E.source!="object"&&(E.source=Tie(x,E.source)),typeof E.target!="object"&&(E.target=Tie(x,E.target)),a[E.source.index]=(a[E.source.index]||0)+1,a[E.target.index]=(a[E.target.index]||0)+1;for(g=0,l=new Array(v);g<v;++g)E=e[g],l[g]=a[E.source.index]/(a[E.source.index]+a[E.target.index]);r=new Array(v),p(),s=new Array(v),m()}}function p(){if(o)for(var g=0,b=e.length;g<b;++g)r[g]=+n(e[g],g,e)}function m(){if(o)for(var g=0,b=e.length;g<b;++g)s[g]=+i(e[g],g,e)}return f.initialize=function(g,b){o=g,u=b,h()},f.links=function(g){return arguments.length?(e=g,h(),f):e},f.id=function(g){return arguments.length?(t=g,f):t},f.iterations=function(g){return arguments.length?(c=+g,f):c},f.strength=function(g){return arguments.length?(n=typeof g=="function"?g:ba(+g),p(),f):n},f.distance=function(g){return arguments.length?(i=typeof g=="function"?g:ba(+g),m(),f):i},f}const pst=1664525,mst=1013904223,Cie=4294967296;function gst(){let e=1;return()=>(e=(pst*e+mst)%Cie)/Cie}function yst(e){return e.x}function vst(e){return e.y}var bst=10,wst=Math.PI*(3-Math.sqrt(5));function xst(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),s=0,o=.6,a=new Map,l=bW(d),u=uW("tick","end"),c=gst();e==null&&(e=[]);function d(){f(),u.call("tick",t),n<r&&(l.stop(),u.call("end",t))}function f(m){var g,b=e.length,v;m===void 0&&(m=1);for(var x=0;x<m;++x)for(n+=(s-n)*i,a.forEach(function(E){E(n)}),g=0;g<b;++g)v=e[g],v.fx==null?v.x+=v.vx*=o:(v.x=v.fx,v.vx=0),v.fy==null?v.y+=v.vy*=o:(v.y=v.fy,v.vy=0);return t}function h(){for(var m=0,g=e.length,b;m<g;++m){if(b=e[m],b.index=m,b.fx!=null&&(b.x=b.fx),b.fy!=null&&(b.y=b.fy),isNaN(b.x)||isNaN(b.y)){var v=bst*Math.sqrt(.5+m),x=m*wst;b.x=v*Math.cos(x),b.y=v*Math.sin(x)}(isNaN(b.vx)||isNaN(b.vy))&&(b.vx=b.vy=0)}}function p(m){return m.initialize&&m.initialize(e,c),m}return h(),t={tick:f,restart:function(){return l.restart(d),t},stop:function(){return l.stop(),t},nodes:function(m){return arguments.length?(e=m,h(),a.forEach(p),t):e},alpha:function(m){return arguments.length?(n=+m,t):n},alphaMin:function(m){return arguments.length?(r=+m,t):r},alphaDecay:function(m){return arguments.length?(i=+m,t):+i},alphaTarget:function(m){return arguments.length?(s=+m,t):s},velocityDecay:function(m){return arguments.length?(o=1-m,t):1-o},randomSource:function(m){return arguments.length?(c=m,a.forEach(p),t):c},force:function(m,g){return arguments.length>1?(g==null?a.delete(m):a.set(m,p(g)),t):a.get(m)},find:function(m,g,b){var v=0,x=e.length,E,_,C,S,k;for(b==null?b=1/0:b*=b,v=0;v<x;++v)S=e[v],E=m-S.x,_=g-S.y,C=E*E+_*_,C<b&&(k=S,b=C);return k},on:function(m,g){return arguments.length>1?(u.on(m,g),t):u.on(m)}}}function Est(){var e,t,n,r,i=ba(-30),s,o=1,a=1/0,l=.81;function u(h){var p,m=e.length,g=TW(e,yst,vst).visitAfter(d);for(r=h,p=0;p<m;++p)t=e[p],g.visit(f)}function c(){if(e){var h,p=e.length,m;for(s=new Array(p),h=0;h<p;++h)m=e[h],s[m.index]=+i(m,h,e)}}function d(h){var p=0,m,g,b=0,v,x,E;if(h.length){for(v=x=E=0;E<4;++E)(m=h[E])&&(g=Math.abs(m.value))&&(p+=m.value,b+=g,v+=g*m.x,x+=g*m.y);h.x=v/b,h.y=x/b}else{m=h,m.x=m.data.x,m.y=m.data.y;do p+=s[m.data.index];while(m=m.next)}h.value=p}function f(h,p,m,g){if(!h.value)return!0;var b=h.x-t.x,v=h.y-t.y,x=g-p,E=b*b+v*v;if(x*x/l<E)return E<a&&(b===0&&(b=Vm(n),E+=b*b),v===0&&(v=Vm(n),E+=v*v),E<o&&(E=Math.sqrt(o*E)),t.vx+=b*h.value*r/E,t.vy+=v*h.value*r/E),!0;if(h.length||E>=a)return;(h.data!==t||h.next)&&(b===0&&(b=Vm(n),E+=b*b),v===0&&(v=Vm(n),E+=v*v),E<o&&(E=Math.sqrt(o*E)));do h.data!==t&&(x=s[h.data.index]*r/E,t.vx+=b*x,t.vy+=v*x);while(h=h.next)}return u.initialize=function(h,p){e=h,n=p,c()},u.strength=function(h){return arguments.length?(i=typeof h=="function"?h:ba(+h),c(),u):i},u.distanceMin=function(h){return arguments.length?(o=h*h,u):Math.sqrt(o)},u.distanceMax=function(h){return arguments.length?(a=h*h,u):Math.sqrt(a)},u.theta=function(h){return arguments.length?(l=h*h,u):Math.sqrt(l)},u}function _st(e){var t=ba(.1),n,r,i;typeof e!="function"&&(e=ba(e==null?0:+e));function s(a){for(var l=0,u=n.length,c;l<u;++l)c=n[l],c.vx+=(i[l]-c.x)*r[l]*a}function o(){if(n){var a,l=n.length;for(r=new Array(l),i=new Array(l),a=0;a<l;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:ba(+a),o(),s):t},s.x=function(a){return arguments.length?(e=typeof a=="function"?a:ba(+a),o(),s):e},s}function Tst(e){var t=ba(.1),n,r,i;typeof e!="function"&&(e=ba(e==null?0:+e));function s(a){for(var l=0,u=n.length,c;l<u;++l)c=n[l],c.vy+=(i[l]-c.y)*r[l]*a}function o(){if(n){var a,l=n.length;for(r=new Array(l),i=new Array(l),a=0;a<l;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:ba(+a),o(),s):t},s.y=function(a){return arguments.length?(e=typeof a=="function"?a:ba(+a),o(),s):e},s}function Cst(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function ZD(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function Pw(e){return e=ZD(Math.abs(e)),e?e[1]:NaN}function Sst(e,t){return function(n,r){for(var i=n.length,s=[],o=0,a=e[0],l=0;i>0&&a>0&&(l+a+1>r&&(a=Math.max(1,r-l)),s.push(n.substring(i-=a,i+a)),!((l+=a+1)>r));)a=e[o=(o+1)%e.length];return s.reverse().join(t)}}function Ast(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var kst=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Yy(e){if(!(t=kst.exec(e)))throw new Error("invalid format: "+e);var t;return new SW({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Yy.prototype=SW.prototype;function SW(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}SW.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Ist(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var Obe;function Rst(e,t){var n=ZD(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(Obe=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+ZD(e,Math.max(0,t+s-1))[0]}function Sie(e,t){var n=ZD(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Aie={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Cst,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Sie(e*100,t),r:Sie,s:Rst,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function kie(e){return e}var Iie=Array.prototype.map,Rie=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function $be(e){var t=e.grouping===void 0||e.thousands===void 0?kie:Sst(Iie.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?kie:Ast(Iie.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function u(d){d=Yy(d);var f=d.fill,h=d.align,p=d.sign,m=d.symbol,g=d.zero,b=d.width,v=d.comma,x=d.precision,E=d.trim,_=d.type;_==="n"?(v=!0,_="g"):Aie[_]||(x===void 0&&(x=12),E=!0,_="g"),(g||f==="0"&&h==="=")&&(g=!0,f="0",h="=");var C=m==="$"?n:m==="#"&&/[boxX]/.test(_)?"0"+_.toLowerCase():"",S=m==="$"?r:/[%p]/.test(_)?o:"",k=Aie[_],R=/[defgprs%]/.test(_);x=x===void 0?6:/[gprs]/.test(_)?Math.max(1,Math.min(21,x)):Math.max(0,Math.min(20,x));function O(N){var L=C,$=S,B,H,Y;if(_==="c")$=k(N)+$,N="";else{N=+N;var J=N<0||1/N<0;if(N=isNaN(N)?l:k(Math.abs(N),x),E&&(N=Ist(N)),J&&+N==0&&p!=="+"&&(J=!1),L=(J?p==="("?p:a:p==="-"||p==="("?"":p)+L,$=(_==="s"?Rie[8+Obe/3]:"")+$+(J&&p==="("?")":""),R){for(B=-1,H=N.length;++B<H;)if(Y=N.charCodeAt(B),48>Y||Y>57){$=(Y===46?i+N.slice(B+1):N.slice(B))+$,N=N.slice(0,B);break}}}v&&!g&&(N=t(N,1/0));var K=L.length+N.length+$.length,Z=K<b?new Array(b-K+1).join(f):"";switch(v&&g&&(N=t(Z+N,Z.length?b-$.length:1/0),Z=""),h){case"<":N=L+N+$+Z;break;case"=":N=L+Z+N+$;break;case"^":N=Z.slice(0,K=Z.length>>1)+L+N+$+Z.slice(K);break;default:N=Z+L+N+$;break}return s(N)}return O.toString=function(){return d+""},O}function c(d,f){var h=u((d=Yy(d),d.type="f",d)),p=Math.max(-8,Math.min(8,Math.floor(Pw(f)/3)))*3,m=Math.pow(10,-p),g=Rie[8+p/3];return function(b){return h(m*b)+g}}return{format:u,formatPrefix:c}}var $k,n$,AW;Dst({thousands:",",grouping:[3],currency:["$",""]});function Dst(e){return $k=$be(e),n$=$k.format,AW=$k.formatPrefix,$k}function Mbe(e){return Math.max(0,-Pw(Math.abs(e)))}function Lbe(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Pw(t)/3)))*3-Pw(Math.abs(e)))}function Fbe(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Pw(t)-Pw(e))+1}var tn=1e-6,eB=1e-12,In=Math.PI,Ti=In/2,eP=In/4,Sa=In*2,Ri=180/In,Sn=In/180,jn=Math.abs,Yx=Math.atan,$u=Math.atan2,Jt=Math.cos,Mk=Math.ceil,jbe=Math.exp,tB=Math.hypot,tP=Math.log,JM=Math.pow,Xt=Math.sin,_u=Math.sign||function(e){return e>0?1:e<0?-1:0},Aa=Math.sqrt,kW=Math.tan;function Bbe(e){return e>1?0:e<-1?In:Math.acos(e)}function dl(e){return e>1?Ti:e<-1?-Ti:Math.asin(e)}function go(){}function nP(e,t){e&&Pie.hasOwnProperty(e.type)&&Pie[e.type](e,t)}var Die={Feature:function(e,t){nP(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)nP(n[r].geometry,t)}},Pie={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){nB(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)nB(n[r],t,0)},Polygon:function(e,t){Nie(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)Nie(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)nP(n[r],t)}};function nB(e,t,n){var r=-1,i=e.length-n,s;for(t.lineStart();++r<i;)s=e[r],t.point(s[0],s[1],s[2]);t.lineEnd()}function Nie(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)nB(e[n],t,1);t.polygonEnd()}function Lh(e,t){e&&Die.hasOwnProperty(e.type)?Die[e.type](e,t):nP(e,t)}var rP=new xa,iP=new xa,zbe,Ube,rB,iB,sB,Af={point:go,lineStart:go,lineEnd:go,polygonStart:function(){rP=new xa,Af.lineStart=Pst,Af.lineEnd=Nst},polygonEnd:function(){var e=+rP;iP.add(e<0?Sa+e:e),this.lineStart=this.lineEnd=this.point=go},sphere:function(){iP.add(Sa)}};function Pst(){Af.point=Ost}function Nst(){qbe(zbe,Ube)}function Ost(e,t){Af.point=qbe,zbe=e,Ube=t,e*=Sn,t*=Sn,rB=e,iB=Jt(t=t/2+eP),sB=Xt(t)}function qbe(e,t){e*=Sn,t*=Sn,t=t/2+eP;var n=e-rB,r=n>=0?1:-1,i=r*n,s=Jt(t),o=Xt(t),a=sB*o,l=iB*s+a*Jt(i),u=a*r*Xt(i);rP.add($u(u,l)),rB=e,iB=s,sB=o}function Hbe(e){return iP=new xa,Lh(e,Af),iP*2}function sP(e){return[$u(e[1],e[0]),dl(e[2])]}function Ky(e){var t=e[0],n=e[1],r=Jt(n);return[r*Jt(t),r*Xt(t),Xt(n)]}function Lk(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Nw(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function ZM(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function Fk(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function oP(e){var t=Aa(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var hi,tl,wi,Ml,Xg,Wbe,Vbe,rw,H2,Im,Ep,Dh={point:oB,lineStart:Oie,lineEnd:$ie,polygonStart:function(){Dh.point=Ybe,Dh.lineStart=$st,Dh.lineEnd=Mst,H2=new xa,Af.polygonStart()},polygonEnd:function(){Af.polygonEnd(),Dh.point=oB,Dh.lineStart=Oie,Dh.lineEnd=$ie,rP<0?(hi=-(wi=180),tl=-(Ml=90)):H2>tn?Ml=90:H2<-1e-6&&(tl=-90),Ep[0]=hi,Ep[1]=wi},sphere:function(){hi=-(wi=180),tl=-(Ml=90)}};function oB(e,t){Im.push(Ep=[hi=e,wi=e]),t<tl&&(tl=t),t>Ml&&(Ml=t)}function Gbe(e,t){var n=Ky([e*Sn,t*Sn]);if(rw){var r=Nw(rw,n),i=[r[1],-r[0],0],s=Nw(i,r);oP(s),s=sP(s);var o=e-Xg,a=o>0?1:-1,l=s[0]*Ri*a,u,c=jn(o)>180;c^(a*Xg<l&&l<a*e)?(u=s[1]*Ri,u>Ml&&(Ml=u)):(l=(l+360)%360-180,c^(a*Xg<l&&l<a*e)?(u=-s[1]*Ri,u<tl&&(tl=u)):(t<tl&&(tl=t),t>Ml&&(Ml=t))),c?e<Xg?Nl(hi,e)>Nl(hi,wi)&&(wi=e):Nl(e,wi)>Nl(hi,wi)&&(hi=e):wi>=hi?(e<hi&&(hi=e),e>wi&&(wi=e)):e>Xg?Nl(hi,e)>Nl(hi,wi)&&(wi=e):Nl(e,wi)>Nl(hi,wi)&&(hi=e)}else Im.push(Ep=[hi=e,wi=e]);t<tl&&(tl=t),t>Ml&&(Ml=t),rw=n,Xg=e}function Oie(){Dh.point=Gbe}function $ie(){Ep[0]=hi,Ep[1]=wi,Dh.point=oB,rw=null}function Ybe(e,t){if(rw){var n=e-Xg;H2.add(jn(n)>180?n+(n>0?360:-360):n)}else Wbe=e,Vbe=t;Af.point(e,t),Gbe(e,t)}function $st(){Af.lineStart()}function Mst(){Ybe(Wbe,Vbe),Af.lineEnd(),jn(H2)>tn&&(hi=-(wi=180)),Ep[0]=hi,Ep[1]=wi,rw=null}function Nl(e,t){return(t-=e)<0?t+360:t}function Lst(e,t){return e[0]-t[0]}function Mie(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function Kbe(e){var t,n,r,i,s,o,a;if(Ml=wi=-(hi=tl=1/0),Im=[],Lh(e,Dh),n=Im.length){for(Im.sort(Lst),t=1,r=Im[0],s=[r];t<n;++t)i=Im[t],Mie(r,i[0])||Mie(r,i[1])?(Nl(r[0],i[1])>Nl(r[0],r[1])&&(r[1]=i[1]),Nl(i[0],r[1])>Nl(r[0],r[1])&&(r[0]=i[0])):s.push(r=i);for(o=-1/0,n=s.length-1,t=0,r=s[n];t<=n;r=i,++t)i=s[t],(a=Nl(r[1],i[0]))>o&&(o=a,hi=i[0],wi=r[1])}return Im=Ep=null,hi===1/0||tl===1/0?[[NaN,NaN],[NaN,NaN]]:[[hi,tl],[wi,Ml]]}var t2,aP,lP,uP,cP,dP,fP,hP,aB,lB,uB,Xbe,Qbe,pa,ma,ga,Lc={sphere:go,point:IW,lineStart:Lie,lineEnd:Fie,polygonStart:function(){Lc.lineStart=Bst,Lc.lineEnd=zst},polygonEnd:function(){Lc.lineStart=Lie,Lc.lineEnd=Fie}};function IW(e,t){e*=Sn,t*=Sn;var n=Jt(t);aS(n*Jt(e),n*Xt(e),Xt(t))}function aS(e,t,n){++t2,lP+=(e-lP)/t2,uP+=(t-uP)/t2,cP+=(n-cP)/t2}function Lie(){Lc.point=Fst}function Fst(e,t){e*=Sn,t*=Sn;var n=Jt(t);pa=n*Jt(e),ma=n*Xt(e),ga=Xt(t),Lc.point=jst,aS(pa,ma,ga)}function jst(e,t){e*=Sn,t*=Sn;var n=Jt(t),r=n*Jt(e),i=n*Xt(e),s=Xt(t),o=$u(Aa((o=ma*s-ga*i)*o+(o=ga*r-pa*s)*o+(o=pa*i-ma*r)*o),pa*r+ma*i+ga*s);aP+=o,dP+=o*(pa+(pa=r)),fP+=o*(ma+(ma=i)),hP+=o*(ga+(ga=s)),aS(pa,ma,ga)}function Fie(){Lc.point=IW}function Bst(){Lc.point=Ust}function zst(){Jbe(Xbe,Qbe),Lc.point=IW}function Ust(e,t){Xbe=e,Qbe=t,e*=Sn,t*=Sn,Lc.point=Jbe;var n=Jt(t);pa=n*Jt(e),ma=n*Xt(e),ga=Xt(t),aS(pa,ma,ga)}function Jbe(e,t){e*=Sn,t*=Sn;var n=Jt(t),r=n*Jt(e),i=n*Xt(e),s=Xt(t),o=ma*s-ga*i,a=ga*r-pa*s,l=pa*i-ma*r,u=tB(o,a,l),c=dl(u),d=u&&-c/u;aB.add(d*o),lB.add(d*a),uB.add(d*l),aP+=c,dP+=c*(pa+(pa=r)),fP+=c*(ma+(ma=i)),hP+=c*(ga+(ga=s)),aS(pa,ma,ga)}function Zbe(e){t2=aP=lP=uP=cP=dP=fP=hP=0,aB=new xa,lB=new xa,uB=new xa,Lh(e,Lc);var t=+aB,n=+lB,r=+uB,i=tB(t,n,r);return i<eB&&(t=dP,n=fP,r=hP,aP<tn&&(t=lP,n=uP,r=cP),i=tB(t,n,r),i<eB)?[NaN,NaN]:[$u(n,t)*Ri,dl(r/i)*Ri]}function cB(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function dB(e,t){return jn(e)>In&&(e-=Math.round(e/Sa)*Sa),[e,t]}dB.invert=dB;function ewe(e,t,n){return(e%=Sa)?t||n?cB(Bie(e),zie(t,n)):Bie(e):t||n?zie(t,n):dB}function jie(e){return function(t,n){return t+=e,jn(t)>In&&(t-=Math.round(t/Sa)*Sa),[t,n]}}function Bie(e){var t=jie(e);return t.invert=jie(-e),t}function zie(e,t){var n=Jt(e),r=Xt(e),i=Jt(t),s=Xt(t);function o(a,l){var u=Jt(l),c=Jt(a)*u,d=Xt(a)*u,f=Xt(l),h=f*n+c*r;return[$u(d*i-h*s,c*n-f*r),dl(h*i+d*s)]}return o.invert=function(a,l){var u=Jt(l),c=Jt(a)*u,d=Xt(a)*u,f=Xt(l),h=f*i-d*s;return[$u(d*i+f*s,c*n+h*r),dl(h*n-c*r)]},o}function qst(e){e=ewe(e[0]*Sn,e[1]*Sn,e.length>2?e[2]*Sn:0);function t(n){return n=e(n[0]*Sn,n[1]*Sn),n[0]*=Ri,n[1]*=Ri,n}return t.invert=function(n){return n=e.invert(n[0]*Sn,n[1]*Sn),n[0]*=Ri,n[1]*=Ri,n},t}function Hst(e,t,n,r,i,s){if(n){var o=Jt(t),a=Xt(t),l=r*n;i==null?(i=t+r*Sa,s=t-l/2):(i=Uie(o,i),s=Uie(o,s),(r>0?i<s:i>s)&&(i+=r*Sa));for(var u,c=i;r>0?c>s:c<s;c-=l)u=sP([o,-a*Jt(c),-a*Xt(c)]),e.point(u[0],u[1])}}function Uie(e,t){t=Ky(t),t[0]-=e,oP(t);var n=Bbe(-t[1]);return((-t[2]<0?-n:n)+Sa-tn)%Sa}function twe(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:go,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function GR(e,t){return jn(e[0]-t[0])<tn&&jn(e[1]-t[1])<tn}function jk(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function nwe(e,t,n,r,i){var s=[],o=[],a,l;if(e.forEach(function(p){if(!((m=p.length-1)<=0)){var m,g=p[0],b=p[m],v;if(GR(g,b)){if(!g[2]&&!b[2]){for(i.lineStart(),a=0;a<m;++a)i.point((g=p[a])[0],g[1]);i.lineEnd();return}b[0]+=2*tn}s.push(v=new jk(g,p,null,!0)),o.push(v.o=new jk(g,null,v,!1)),s.push(v=new jk(b,p,null,!1)),o.push(v.o=new jk(b,null,v,!0))}}),!!s.length){for(o.sort(t),qie(s),qie(o),a=0,l=o.length;a<l;++a)o[a].e=n=!n;for(var u=s[0],c,d;;){for(var f=u,h=!0;f.v;)if((f=f.n)===u)return;c=f.z,i.lineStart();do{if(f.v=f.o.v=!0,f.e){if(h)for(a=0,l=c.length;a<l;++a)i.point((d=c[a])[0],d[1]);else r(f.x,f.n.x,1,i);f=f.n}else{if(h)for(c=f.p.z,a=c.length-1;a>=0;--a)i.point((d=c[a])[0],d[1]);else r(f.x,f.p.x,-1,i);f=f.p}f=f.o,c=f.z,h=!h}while(!f.v);i.lineEnd()}}}function qie(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function eL(e){return jn(e[0])<=In?e[0]:_u(e[0])*((jn(e[0])+In)%Sa-In)}function Wst(e,t){var n=eL(t),r=t[1],i=Xt(r),s=[Xt(n),-Jt(n),0],o=0,a=0,l=new xa;i===1?r=Ti+tn:i===-1&&(r=-Ti-tn);for(var u=0,c=e.length;u<c;++u)if(f=(d=e[u]).length)for(var d,f,h=d[f-1],p=eL(h),m=h[1]/2+eP,g=Xt(m),b=Jt(m),v=0;v<f;++v,p=E,g=C,b=S,h=x){var x=d[v],E=eL(x),_=x[1]/2+eP,C=Xt(_),S=Jt(_),k=E-p,R=k>=0?1:-1,O=R*k,N=O>In,L=g*C;if(l.add($u(L*R*Xt(O),b*S+L*Jt(O))),o+=N?k+R*Sa:k,N^p>=n^E>=n){var $=Nw(Ky(h),Ky(x));oP($);var B=Nw(s,$);oP(B);var H=(N^k>=0?-1:1)*dl(B[2]);(r>H||r===H&&($[0]||$[1]))&&(a+=N^k>=0?1:-1)}}return(o<-1e-6||o<tn&&l<-1e-12)^a&1}function rwe(e,t,n,r){return function(i){var s=t(i),o=twe(),a=t(o),l=!1,u,c,d,f={point:h,lineStart:m,lineEnd:g,polygonStart:function(){f.point=b,f.lineStart=v,f.lineEnd=x,c=[],u=[]},polygonEnd:function(){f.point=h,f.lineStart=m,f.lineEnd=g,c=L1e(c);var E=Wst(u,r);c.length?(l||(i.polygonStart(),l=!0),nwe(c,Gst,E,n,i)):E&&(l||(i.polygonStart(),l=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),l&&(i.polygonEnd(),l=!1),c=u=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(E,_){e(E,_)&&i.point(E,_)}function p(E,_){s.point(E,_)}function m(){f.point=p,s.lineStart()}function g(){f.point=h,s.lineEnd()}function b(E,_){d.push([E,_]),a.point(E,_)}function v(){a.lineStart(),d=[]}function x(){b(d[0][0],d[0][1]),a.lineEnd();var E=a.clean(),_=o.result(),C,S=_.length,k,R,O;if(d.pop(),u.push(d),d=null,!!S){if(E&1){if(R=_[0],(k=R.length-1)>0){for(l||(i.polygonStart(),l=!0),i.lineStart(),C=0;C<k;++C)i.point((O=R[C])[0],O[1]);i.lineEnd()}return}S>1&&E&2&&_.push(_.pop().concat(_.shift())),c.push(_.filter(Vst))}}return f}}function Vst(e){return e.length>1}function Gst(e,t){return((e=e.x)[0]<0?e[1]-Ti-tn:Ti-e[1])-((t=t.x)[0]<0?t[1]-Ti-tn:Ti-t[1])}const Hie=rwe(function(){return!0},Yst,Xst,[-In,-Ti]);function Yst(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(s,o){var a=s>0?In:-In,l=jn(s-t);jn(l-In)<tn?(e.point(t,n=(n+o)/2>0?Ti:-Ti),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),e.point(s,n),i=0):r!==a&&l>=In&&(jn(t-r)<tn&&(t-=r*tn),jn(s-a)<tn&&(s-=a*tn),n=Kst(t,n,s,o),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),i=0),e.point(t=s,n=o),r=a},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function Kst(e,t,n,r){var i,s,o=Xt(e-n);return jn(o)>tn?Yx((Xt(t)*(s=Jt(r))*Xt(n)-Xt(r)*(i=Jt(t))*Xt(e))/(i*s*o)):(t+r)/2}function Xst(e,t,n,r){var i;if(e==null)i=n*Ti,r.point(-In,i),r.point(0,i),r.point(In,i),r.point(In,0),r.point(In,-i),r.point(0,-i),r.point(-In,-i),r.point(-In,0),r.point(-In,i);else if(jn(e[0]-t[0])>tn){var s=e[0]<t[0]?In:-In;i=n*s/2,r.point(-s,i),r.point(0,i),r.point(s,i)}else r.point(t[0],t[1])}function Qst(e){var t=Jt(e),n=2*Sn,r=t>0,i=jn(t)>tn;function s(c,d,f,h){Hst(h,e,n,f,c,d)}function o(c,d){return Jt(c)*Jt(d)>t}function a(c){var d,f,h,p,m;return{lineStart:function(){p=h=!1,m=1},point:function(g,b){var v=[g,b],x,E=o(g,b),_=r?E?0:u(g,b):E?u(g+(g<0?In:-In),b):0;if(!d&&(p=h=E)&&c.lineStart(),E!==h&&(x=l(d,v),(!x||GR(d,x)||GR(v,x))&&(v[2]=1)),E!==h)m=0,E?(c.lineStart(),x=l(v,d),c.point(x[0],x[1])):(x=l(d,v),c.point(x[0],x[1],2),c.lineEnd()),d=x;else if(i&&d&&r^E){var C;!(_&f)&&(C=l(v,d,!0))&&(m=0,r?(c.lineStart(),c.point(C[0][0],C[0][1]),c.point(C[1][0],C[1][1]),c.lineEnd()):(c.point(C[1][0],C[1][1]),c.lineEnd(),c.lineStart(),c.point(C[0][0],C[0][1],3)))}E&&(!d||!GR(d,v))&&c.point(v[0],v[1]),d=v,h=E,f=_},lineEnd:function(){h&&c.lineEnd(),d=null},clean:function(){return m|(p&&h)<<1}}}function l(c,d,f){var h=Ky(c),p=Ky(d),m=[1,0,0],g=Nw(h,p),b=Lk(g,g),v=g[0],x=b-v*v;if(!x)return!f&&c;var E=t*b/x,_=-t*v/x,C=Nw(m,g),S=Fk(m,E),k=Fk(g,_);ZM(S,k);var R=C,O=Lk(S,R),N=Lk(R,R),L=O*O-N*(Lk(S,S)-1);if(!(L<0)){var $=Aa(L),B=Fk(R,(-O-$)/N);if(ZM(B,S),B=sP(B),!f)return B;var H=c[0],Y=d[0],J=c[1],K=d[1],Z;Y<H&&(Z=H,H=Y,Y=Z);var U=Y-H,j=jn(U-In)<tn,V=j||U<tn;if(!j&&K<J&&(Z=J,J=K,K=Z),V?j?J+K>0^B[1]<(jn(B[0]-H)<tn?J:K):J<=B[1]&&B[1]<=K:U>In^(H<=B[0]&&B[0]<=Y)){var z=Fk(R,(-O+$)/N);return ZM(z,S),[B,sP(z)]}}}function u(c,d){var f=r?e:In-e,h=0;return c<-f?h|=1:c>f&&(h|=2),d<-f?h|=4:d>f&&(h|=8),h}return rwe(o,a,s,r?[0,-e]:[-In,e-In])}function Jst(e,t,n,r,i,s){var o=e[0],a=e[1],l=t[0],u=t[1],c=0,d=1,f=l-o,h=u-a,p;if(p=n-o,!(!f&&p>0)){if(p/=f,f<0){if(p<c)return;p<d&&(d=p)}else if(f>0){if(p>d)return;p>c&&(c=p)}if(p=i-o,!(!f&&p<0)){if(p/=f,f<0){if(p>d)return;p>c&&(c=p)}else if(f>0){if(p<c)return;p<d&&(d=p)}if(p=r-a,!(!h&&p>0)){if(p/=h,h<0){if(p<c)return;p<d&&(d=p)}else if(h>0){if(p>d)return;p>c&&(c=p)}if(p=s-a,!(!h&&p<0)){if(p/=h,h<0){if(p>d)return;p>c&&(c=p)}else if(h>0){if(p<c)return;p<d&&(d=p)}return c>0&&(e[0]=o+c*f,e[1]=a+c*h),d<1&&(t[0]=o+d*f,t[1]=a+d*h),!0}}}}}var Bk=1e9,zk=-1e9;function iwe(e,t,n,r){function i(u,c){return e<=u&&u<=n&&t<=c&&c<=r}function s(u,c,d,f){var h=0,p=0;if(u==null||(h=o(u,d))!==(p=o(c,d))||l(u,c)<0^d>0)do f.point(h===0||h===3?e:n,h>1?r:t);while((h=(h+d+4)%4)!==p);else f.point(c[0],c[1])}function o(u,c){return jn(u[0]-e)<tn?c>0?0:3:jn(u[0]-n)<tn?c>0?2:1:jn(u[1]-t)<tn?c>0?1:0:c>0?3:2}function a(u,c){return l(u.x,c.x)}function l(u,c){var d=o(u,1),f=o(c,1);return d!==f?d-f:d===0?c[1]-u[1]:d===1?u[0]-c[0]:d===2?u[1]-c[1]:c[0]-u[0]}return function(u){var c=u,d=twe(),f,h,p,m,g,b,v,x,E,_,C,S={point:k,lineStart:L,lineEnd:$,polygonStart:O,polygonEnd:N};function k(H,Y){i(H,Y)&&c.point(H,Y)}function R(){for(var H=0,Y=0,J=h.length;Y<J;++Y)for(var K=h[Y],Z=1,U=K.length,j=K[0],V,z,G=j[0],Q=j[1];Z<U;++Z)V=G,z=Q,j=K[Z],G=j[0],Q=j[1],z<=r?Q>r&&(G-V)*(r-z)>(Q-z)*(e-V)&&++H:Q<=r&&(G-V)*(r-z)<(Q-z)*(e-V)&&--H;return H}function O(){c=d,f=[],h=[],C=!0}function N(){var H=R(),Y=C&&H,J=(f=L1e(f)).length;(Y||J)&&(u.polygonStart(),Y&&(u.lineStart(),s(null,null,1,u),u.lineEnd()),J&&nwe(f,a,H,s,u),u.polygonEnd()),c=u,f=h=p=null}function L(){S.point=B,h&&h.push(p=[]),_=!0,E=!1,v=x=NaN}function $(){f&&(B(m,g),b&&E&&d.rejoin(),f.push(d.result())),S.point=k,E&&c.lineEnd()}function B(H,Y){var J=i(H,Y);if(h&&p.push([H,Y]),_)m=H,g=Y,b=J,_=!1,J&&(c.lineStart(),c.point(H,Y));else if(J&&E)c.point(H,Y);else{var K=[v=Math.max(zk,Math.min(Bk,v)),x=Math.max(zk,Math.min(Bk,x))],Z=[H=Math.max(zk,Math.min(Bk,H)),Y=Math.max(zk,Math.min(Bk,Y))];Jst(K,Z,e,t,n,r)?(E||(c.lineStart(),c.point(K[0],K[1])),c.point(Z[0],Z[1]),J||c.lineEnd(),C=!1):J&&(c.lineStart(),c.point(H,Y),C=!1)}v=H,x=Y,E=J}return S}}function Wie(e,t,n){var r=va(e,t-tn,n).concat(t);return function(i){return r.map(function(s){return[i,s]})}}function Vie(e,t,n){var r=va(e,t-tn,n).concat(t);return function(i){return r.map(function(s){return[s,i]})}}function Zst(){var e,t,n,r,i,s,o,a,l=10,u=l,c=90,d=360,f,h,p,m,g=2.5;function b(){return{type:"MultiLineString",coordinates:v()}}function v(){return va(Mk(r/c)*c,n,c).map(p).concat(va(Mk(a/d)*d,o,d).map(m)).concat(va(Mk(t/l)*l,e,l).filter(function(x){return jn(x%c)>tn}).map(f)).concat(va(Mk(s/u)*u,i,u).filter(function(x){return jn(x%d)>tn}).map(h))}return b.lines=function(){return v().map(function(x){return{type:"LineString",coordinates:x}})},b.outline=function(){return{type:"Polygon",coordinates:[p(r).concat(m(o).slice(1),p(n).reverse().slice(1),m(a).reverse().slice(1))]}},b.extent=function(x){return arguments.length?b.extentMajor(x).extentMinor(x):b.extentMinor()},b.extentMajor=function(x){return arguments.length?(r=+x[0][0],n=+x[1][0],a=+x[0][1],o=+x[1][1],r>n&&(x=r,r=n,n=x),a>o&&(x=a,a=o,o=x),b.precision(g)):[[r,a],[n,o]]},b.extentMinor=function(x){return arguments.length?(t=+x[0][0],e=+x[1][0],s=+x[0][1],i=+x[1][1],t>e&&(x=t,t=e,e=x),s>i&&(x=s,s=i,i=x),b.precision(g)):[[t,s],[e,i]]},b.step=function(x){return arguments.length?b.stepMajor(x).stepMinor(x):b.stepMinor()},b.stepMajor=function(x){return arguments.length?(c=+x[0],d=+x[1],b):[c,d]},b.stepMinor=function(x){return arguments.length?(l=+x[0],u=+x[1],b):[l,u]},b.precision=function(x){return arguments.length?(g=+x,f=Wie(s,i,90),h=Vie(t,e,g),p=Wie(a,o,90),m=Vie(r,n,g),b):g},b.extentMajor([[-180,-90+tn],[180,90-tn]]).extentMinor([[-180,-80-tn],[180,80+tn]])}const qT=e=>e;var tL=new xa,fB=new xa,swe,owe,hB,pB,Fh={point:go,lineStart:go,lineEnd:go,polygonStart:function(){Fh.lineStart=eot,Fh.lineEnd=not},polygonEnd:function(){Fh.lineStart=Fh.lineEnd=Fh.point=go,tL.add(jn(fB)),fB=new xa},result:function(){var e=tL/2;return tL=new xa,e}};function eot(){Fh.point=tot}function tot(e,t){Fh.point=awe,swe=hB=e,owe=pB=t}function awe(e,t){fB.add(pB*e-hB*t),hB=e,pB=t}function not(){awe(swe,owe)}var Ow=1/0,pP=Ow,HT=-Ow,mP=HT,gP={point:rot,lineStart:go,lineEnd:go,polygonStart:go,polygonEnd:go,result:function(){var e=[[Ow,pP],[HT,mP]];return HT=mP=-(pP=Ow=1/0),e}};function rot(e,t){e<Ow&&(Ow=e),e>HT&&(HT=e),t<pP&&(pP=t),t>mP&&(mP=t)}var mB=0,gB=0,n2=0,yP=0,vP=0,Pb=0,yB=0,vB=0,r2=0,lwe,uwe,Jd,Zd,xu={point:Xy,lineStart:Gie,lineEnd:Yie,polygonStart:function(){xu.lineStart=oot,xu.lineEnd=aot},polygonEnd:function(){xu.point=Xy,xu.lineStart=Gie,xu.lineEnd=Yie},result:function(){var e=r2?[yB/r2,vB/r2]:Pb?[yP/Pb,vP/Pb]:n2?[mB/n2,gB/n2]:[NaN,NaN];return mB=gB=n2=yP=vP=Pb=yB=vB=r2=0,e}};function Xy(e,t){mB+=e,gB+=t,++n2}function Gie(){xu.point=iot}function iot(e,t){xu.point=sot,Xy(Jd=e,Zd=t)}function sot(e,t){var n=e-Jd,r=t-Zd,i=Aa(n*n+r*r);yP+=i*(Jd+e)/2,vP+=i*(Zd+t)/2,Pb+=i,Xy(Jd=e,Zd=t)}function Yie(){xu.point=Xy}function oot(){xu.point=lot}function aot(){cwe(lwe,uwe)}function lot(e,t){xu.point=cwe,Xy(lwe=Jd=e,uwe=Zd=t)}function cwe(e,t){var n=e-Jd,r=t-Zd,i=Aa(n*n+r*r);yP+=i*(Jd+e)/2,vP+=i*(Zd+t)/2,Pb+=i,i=Zd*e-Jd*t,yB+=i*(Jd+e),vB+=i*(Zd+t),r2+=i*3,Xy(Jd=e,Zd=t)}function dwe(e){this._context=e}dwe.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,Sa);break}}},result:go};var bB=new xa,nL,fwe,hwe,i2,s2,WT={point:go,lineStart:function(){WT.point=uot},lineEnd:function(){nL&&pwe(fwe,hwe),WT.point=go},polygonStart:function(){nL=!0},polygonEnd:function(){nL=null},result:function(){var e=+bB;return bB=new xa,e}};function uot(e,t){WT.point=pwe,fwe=i2=e,hwe=s2=t}function pwe(e,t){i2-=e,s2-=t,bB.add(Aa(i2*i2+s2*s2)),i2=e,s2=t}let Kie,bP,Xie,Qie;class Jie{constructor(t){this._append=t==null?mwe:cot(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==Xie||this._append!==bP){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,Xie=r,bP=this._append,Qie=this._,this._=i}this._+=Qie;break}}}result(){const t=this._;return this._="",t.length?t:null}}function mwe(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function cot(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return mwe;if(t!==Kie){const n=10**t;Kie=t,bP=function(i){let s=1;this._+=i[0];for(const o=i.length;s<o;++s)this._+=Math.round(arguments[s]*n)/n+i[s]}}return bP}function gwe(e,t){let n=3,r=4.5,i,s;function o(a){return a&&(typeof r=="function"&&s.pointRadius(+r.apply(this,arguments)),Lh(a,i(s))),s.result()}return o.area=function(a){return Lh(a,i(Fh)),Fh.result()},o.measure=function(a){return Lh(a,i(WT)),WT.result()},o.bounds=function(a){return Lh(a,i(gP)),gP.result()},o.centroid=function(a){return Lh(a,i(xu)),xu.result()},o.projection=function(a){return arguments.length?(i=a==null?(e=null,qT):(e=a).stream,o):e},o.context=function(a){return arguments.length?(s=a==null?(t=null,new Jie(n)):new dwe(t=a),typeof r!="function"&&s.pointRadius(r),o):t},o.pointRadius=function(a){return arguments.length?(r=typeof a=="function"?a:(s.pointRadius(+a),+a),o):r},o.digits=function(a){if(!arguments.length)return n;if(a==null)n=null;else{const l=Math.floor(a);if(!(l>=0))throw new RangeError(`invalid digits: ${a}`);n=l}return t===null&&(s=new Jie(n)),o},o.projection(e).digits(n).context(t)}function r$(e){return function(t){var n=new wB;for(var r in e)n[r]=e[r];return n.stream=t,n}}function wB(){}wB.prototype={constructor:wB,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function RW(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),Lh(n,e.stream(gP)),t(gP.result()),r!=null&&e.clipExtent(r),e}function i$(e,t,n){return RW(e,function(r){var i=t[1][0]-t[0][0],s=t[1][1]-t[0][1],o=Math.min(i/(r[1][0]-r[0][0]),s/(r[1][1]-r[0][1])),a=+t[0][0]+(i-o*(r[1][0]+r[0][0]))/2,l=+t[0][1]+(s-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([a,l])},n)}function DW(e,t,n){return i$(e,[[0,0],t],n)}function PW(e,t,n){return RW(e,function(r){var i=+t,s=i/(r[1][0]-r[0][0]),o=(i-s*(r[1][0]+r[0][0]))/2,a=-s*r[0][1];e.scale(150*s).translate([o,a])},n)}function NW(e,t,n){return RW(e,function(r){var i=+t,s=i/(r[1][1]-r[0][1]),o=-s*r[0][0],a=(i-s*(r[1][1]+r[0][1]))/2;e.scale(150*s).translate([o,a])},n)}var Zie=16,dot=Jt(30*Sn);function ese(e,t){return+t?hot(e,t):fot(e)}function fot(e){return r$({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function hot(e,t){function n(r,i,s,o,a,l,u,c,d,f,h,p,m,g){var b=u-r,v=c-i,x=b*b+v*v;if(x>4*t&&m--){var E=o+f,_=a+h,C=l+p,S=Aa(E*E+_*_+C*C),k=dl(C/=S),R=jn(jn(C)-1)<tn||jn(s-d)<tn?(s+d)/2:$u(_,E),O=e(R,k),N=O[0],L=O[1],$=N-r,B=L-i,H=v*$-b*B;(H*H/x>t||jn((b*$+v*B)/x-.5)>.3||o*f+a*h+l*p<dot)&&(n(r,i,s,o,a,l,N,L,R,E/=S,_/=S,C,m,g),g.point(N,L),n(N,L,R,E,_,C,u,c,d,f,h,p,m,g))}}return function(r){var i,s,o,a,l,u,c,d,f,h,p,m,g={point:b,lineStart:v,lineEnd:E,polygonStart:function(){r.polygonStart(),g.lineStart=_},polygonEnd:function(){r.polygonEnd(),g.lineStart=v}};function b(k,R){k=e(k,R),r.point(k[0],k[1])}function v(){d=NaN,g.point=x,r.lineStart()}function x(k,R){var O=Ky([k,R]),N=e(k,R);n(d,f,c,h,p,m,d=N[0],f=N[1],c=k,h=O[0],p=O[1],m=O[2],Zie,r),r.point(d,f)}function E(){g.point=b,r.lineEnd()}function _(){v(),g.point=C,g.lineEnd=S}function C(k,R){x(i=k,R),s=d,o=f,a=h,l=p,u=m,g.point=x}function S(){n(d,f,c,h,p,m,s,o,i,a,l,u,Zie,r),g.lineEnd=E,E()}return g}}var pot=r$({point:function(e,t){this.stream.point(e*Sn,t*Sn)}});function mot(e){return r$({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function got(e,t,n,r,i){function s(o,a){return o*=r,a*=i,[t+e*o,n-e*a]}return s.invert=function(o,a){return[(o-t)/e*r,(n-a)/e*i]},s}function tse(e,t,n,r,i,s){if(!s)return got(e,t,n,r,i);var o=Jt(s),a=Xt(s),l=o*e,u=a*e,c=o/e,d=a/e,f=(a*n-o*t)/e,h=(a*t+o*n)/e;function p(m,g){return m*=r,g*=i,[l*m-u*g+t,n-u*m-l*g]}return p.invert=function(m,g){return[r*(c*m-d*g+f),i*(h-d*m-c*g)]},p}function Hf(e){return ywe(function(){return e})()}function ywe(e){var t,n=150,r=480,i=250,s=0,o=0,a=0,l=0,u=0,c,d=0,f=1,h=1,p=null,m=Hie,g=null,b,v,x,E=qT,_=.5,C,S,k,R,O;function N(H){return k(H[0]*Sn,H[1]*Sn)}function L(H){return H=k.invert(H[0],H[1]),H&&[H[0]*Ri,H[1]*Ri]}N.stream=function(H){return R&&O===H?R:R=pot(mot(c)(m(C(E(O=H)))))},N.preclip=function(H){return arguments.length?(m=H,p=void 0,B()):m},N.postclip=function(H){return arguments.length?(E=H,g=b=v=x=null,B()):E},N.clipAngle=function(H){return arguments.length?(m=+H?Qst(p=H*Sn):(p=null,Hie),B()):p*Ri},N.clipExtent=function(H){return arguments.length?(E=H==null?(g=b=v=x=null,qT):iwe(g=+H[0][0],b=+H[0][1],v=+H[1][0],x=+H[1][1]),B()):g==null?null:[[g,b],[v,x]]},N.scale=function(H){return arguments.length?(n=+H,$()):n},N.translate=function(H){return arguments.length?(r=+H[0],i=+H[1],$()):[r,i]},N.center=function(H){return arguments.length?(s=H[0]%360*Sn,o=H[1]%360*Sn,$()):[s*Ri,o*Ri]},N.rotate=function(H){return arguments.length?(a=H[0]%360*Sn,l=H[1]%360*Sn,u=H.length>2?H[2]%360*Sn:0,$()):[a*Ri,l*Ri,u*Ri]},N.angle=function(H){return arguments.length?(d=H%360*Sn,$()):d*Ri},N.reflectX=function(H){return arguments.length?(f=H?-1:1,$()):f<0},N.reflectY=function(H){return arguments.length?(h=H?-1:1,$()):h<0},N.precision=function(H){return arguments.length?(C=ese(S,_=H*H),B()):Aa(_)},N.fitExtent=function(H,Y){return i$(N,H,Y)},N.fitSize=function(H,Y){return DW(N,H,Y)},N.fitWidth=function(H,Y){return PW(N,H,Y)},N.fitHeight=function(H,Y){return NW(N,H,Y)};function $(){var H=tse(n,0,0,f,h,d).apply(null,t(s,o)),Y=tse(n,r-H[0],i-H[1],f,h,d);return c=ewe(a,l,u),S=cB(t,Y),k=cB(c,S),C=ese(S,_),B()}function B(){return R=O=null,N}return function(){return t=e.apply(this,arguments),N.invert=t.invert&&L,$()}}function OW(e){var t=0,n=In/3,r=ywe(e),i=r(t,n);return i.parallels=function(s){return arguments.length?r(t=s[0]*Sn,n=s[1]*Sn):[t*Ri,n*Ri]},i}function yot(e){var t=Jt(e);function n(r,i){return[r*t,Xt(i)/t]}return n.invert=function(r,i){return[r/t,dl(i*t)]},n}function vot(e,t){var n=Xt(e),r=(n+Xt(t))/2;if(jn(r)<tn)return yot(e);var i=1+n*(2*r-n),s=Aa(i)/r;function o(a,l){var u=Aa(i-2*r*Xt(l))/r;return[u*Xt(a*=r),s-u*Jt(a)]}return o.invert=function(a,l){var u=s-l,c=$u(a,jn(u))*_u(u);return u*r<0&&(c-=In*_u(a)*_u(u)),[c/r,dl((i-(a*a+u*u)*r*r)/(2*r))]},o}function wP(){return OW(vot).scale(155.424).center([0,33.6442])}function vwe(){return wP().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function bot(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function wot(){var e,t,n=vwe(),r,i=wP().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s,o=wP().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,l,u={point:function(f,h){l=[f,h]}};function c(f){var h=f[0],p=f[1];return l=null,r.point(h,p),l||(s.point(h,p),l)||(a.point(h,p),l)}c.invert=function(f){var h=n.scale(),p=n.translate(),m=(f[0]-p[0])/h,g=(f[1]-p[1])/h;return(g>=.12&&g<.234&&m>=-.425&&m<-.214?i:g>=.166&&g<.234&&m>=-.214&&m<-.115?o:n).invert(f)},c.stream=function(f){return e&&t===f?e:e=bot([n.stream(t=f),i.stream(f),o.stream(f)])},c.precision=function(f){return arguments.length?(n.precision(f),i.precision(f),o.precision(f),d()):n.precision()},c.scale=function(f){return arguments.length?(n.scale(f),i.scale(f*.35),o.scale(f),c.translate(n.translate())):n.scale()},c.translate=function(f){if(!arguments.length)return n.translate();var h=n.scale(),p=+f[0],m=+f[1];return r=n.translate(f).clipExtent([[p-.455*h,m-.238*h],[p+.455*h,m+.238*h]]).stream(u),s=i.translate([p-.307*h,m+.201*h]).clipExtent([[p-.425*h+tn,m+.12*h+tn],[p-.214*h-tn,m+.234*h-tn]]).stream(u),a=o.translate([p-.205*h,m+.212*h]).clipExtent([[p-.214*h+tn,m+.166*h+tn],[p-.115*h-tn,m+.234*h-tn]]).stream(u),d()},c.fitExtent=function(f,h){return i$(c,f,h)},c.fitSize=function(f,h){return DW(c,f,h)},c.fitWidth=function(f,h){return PW(c,f,h)},c.fitHeight=function(f,h){return NW(c,f,h)};function d(){return e=t=null,c}return c.scale(1070)}function bwe(e){return function(t,n){var r=Jt(t),i=Jt(n),s=e(r*i);return s===1/0?[2,0]:[s*i*Xt(t),s*Xt(n)]}}function lS(e){return function(t,n){var r=Aa(t*t+n*n),i=e(r),s=Xt(i),o=Jt(i);return[$u(t*s,r*o),dl(r&&n*s/r)]}}var wwe=bwe(function(e){return Aa(2/(1+e))});wwe.invert=lS(function(e){return 2*dl(e/2)});function xot(){return Hf(wwe).scale(124.75).clipAngle(180-.001)}var xwe=bwe(function(e){return(e=Bbe(e))&&e/Xt(e)});xwe.invert=lS(function(e){return e});function Eot(){return Hf(xwe).scale(79.4188).clipAngle(180-.001)}function s$(e,t){return[e,tP(kW((Ti+t)/2))]}s$.invert=function(e,t){return[e,2*Yx(jbe(t))-Ti]};function _ot(){return Ewe(s$).scale(961/Sa)}function Ewe(e){var t=Hf(e),n=t.center,r=t.scale,i=t.translate,s=t.clipExtent,o=null,a,l,u;t.scale=function(d){return arguments.length?(r(d),c()):r()},t.translate=function(d){return arguments.length?(i(d),c()):i()},t.center=function(d){return arguments.length?(n(d),c()):n()},t.clipExtent=function(d){return arguments.length?(d==null?o=a=l=u=null:(o=+d[0][0],a=+d[0][1],l=+d[1][0],u=+d[1][1]),c()):o==null?null:[[o,a],[l,u]]};function c(){var d=In*r(),f=t(qst(t.rotate()).invert([0,0]));return s(o==null?[[f[0]-d,f[1]-d],[f[0]+d,f[1]+d]]:e===s$?[[Math.max(f[0]-d,o),a],[Math.min(f[0]+d,l),u]]:[[o,Math.max(f[1]-d,a)],[l,Math.min(f[1]+d,u)]])}return c()}function Uk(e){return kW((Ti+e)/2)}function Tot(e,t){var n=Jt(e),r=e===t?Xt(e):tP(n/Jt(t))/tP(Uk(t)/Uk(e)),i=n*JM(Uk(e),r)/r;if(!r)return s$;function s(o,a){i>0?a<-Ti+tn&&(a=-Ti+tn):a>Ti-tn&&(a=Ti-tn);var l=i/JM(Uk(a),r);return[l*Xt(r*o),i-l*Jt(r*o)]}return s.invert=function(o,a){var l=i-a,u=_u(r)*Aa(o*o+l*l),c=$u(o,jn(l))*_u(l);return l*r<0&&(c-=In*_u(o)*_u(l)),[c/r,2*Yx(JM(i/u,1/r))-Ti]},s}function Cot(){return OW(Tot).scale(109.5).parallels([30,30])}function xP(e,t){return[e,t]}xP.invert=xP;function Sot(){return Hf(xP).scale(152.63)}function Aot(e,t){var n=Jt(e),r=e===t?Xt(e):(n-Jt(t))/(t-e),i=n/r+e;if(jn(r)<tn)return xP;function s(o,a){var l=i-a,u=r*o;return[l*Xt(u),i-l*Jt(u)]}return s.invert=function(o,a){var l=i-a,u=$u(o,jn(l))*_u(l);return l*r<0&&(u-=In*_u(o)*_u(l)),[u/r,i-_u(r)*Aa(o*o+l*l)]},s}function kot(){return OW(Aot).scale(131.154).center([0,13.9389])}var W2=1.340264,V2=-.081106,G2=893e-6,Y2=.003796,EP=Aa(3)/2,Iot=12;function _we(e,t){var n=dl(EP*Xt(t)),r=n*n,i=r*r*r;return[e*Jt(n)/(EP*(W2+3*V2*r+i*(7*G2+9*Y2*r))),n*(W2+V2*r+i*(G2+Y2*r))]}_we.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,s=0,o,a,l;s<Iot&&(a=n*(W2+V2*r+i*(G2+Y2*r))-t,l=W2+3*V2*r+i*(7*G2+9*Y2*r),n-=o=a/l,r=n*n,i=r*r*r,!(jn(o)<eB));++s);return[EP*e*(W2+3*V2*r+i*(7*G2+9*Y2*r))/Jt(n),dl(Xt(n)/EP)]};function Rot(){return Hf(_we).scale(177.158)}function Twe(e,t){var n=Jt(t),r=Jt(e)*n;return[n*Xt(e)/r,Xt(t)/r]}Twe.invert=lS(Yx);function Dot(){return Hf(Twe).scale(144.049).clipAngle(60)}function Pot(){var e=1,t=0,n=0,r=1,i=1,s=0,o,a,l=null,u,c,d,f=1,h=1,p=r$({point:function(E,_){var C=x([E,_]);this.stream.point(C[0],C[1])}}),m=qT,g,b;function v(){return f=e*r,h=e*i,g=b=null,x}function x(E){var _=E[0]*f,C=E[1]*h;if(s){var S=C*o-_*a;_=_*o+C*a,C=S}return[_+t,C+n]}return x.invert=function(E){var _=E[0]-t,C=E[1]-n;if(s){var S=C*o+_*a;_=_*o-C*a,C=S}return[_/f,C/h]},x.stream=function(E){return g&&b===E?g:g=p(m(b=E))},x.postclip=function(E){return arguments.length?(m=E,l=u=c=d=null,v()):m},x.clipExtent=function(E){return arguments.length?(m=E==null?(l=u=c=d=null,qT):iwe(l=+E[0][0],u=+E[0][1],c=+E[1][0],d=+E[1][1]),v()):l==null?null:[[l,u],[c,d]]},x.scale=function(E){return arguments.length?(e=+E,v()):e},x.translate=function(E){return arguments.length?(t=+E[0],n=+E[1],v()):[t,n]},x.angle=function(E){return arguments.length?(s=E%360*Sn,a=Xt(s),o=Jt(s),v()):s*Ri},x.reflectX=function(E){return arguments.length?(r=E?-1:1,v()):r<0},x.reflectY=function(E){return arguments.length?(i=E?-1:1,v()):i<0},x.fitExtent=function(E,_){return i$(x,E,_)},x.fitSize=function(E,_){return DW(x,E,_)},x.fitWidth=function(E,_){return PW(x,E,_)},x.fitHeight=function(E,_){return NW(x,E,_)},x}function Cwe(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}Cwe.invert=function(e,t){var n=t,r=25,i;do{var s=n*n,o=s*s;n-=i=(n*(1.007226+s*(.015085+o*(-.044475+.028874*s-.005916*o)))-t)/(1.007226+s*(.015085*3+o*(-.044475*7+.028874*9*s-.005916*11*o)))}while(jn(i)>tn&&--r>0);return[e/(.8707+(s=n*n)*(-.131979+s*(-.013791+s*s*s*(.003971-.001529*s)))),n]};function Not(){return Hf(Cwe).scale(175.295)}function Swe(e,t){return[Jt(t)*Xt(e),Xt(t)]}Swe.invert=lS(dl);function Oot(){return Hf(Swe).scale(249.5).clipAngle(90+tn)}function Awe(e,t){var n=Jt(t),r=1+Jt(e)*n;return[n*Xt(e)/r,Xt(t)/r]}Awe.invert=lS(function(e){return 2*Yx(e)});function $ot(){return Hf(Awe).scale(250).clipAngle(142)}function kwe(e,t){return[tP(kW((Ti+t)/2)),-e]}kwe.invert=function(e,t){return[-t,2*Yx(jbe(e))-Ti]};function Mot(){var e=Ewe(kwe),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}function Lot(e,t){return e.parent===t.parent?1:2}function Fot(e){return e.reduce(jot,0)/e.length}function jot(e,t){return e+t.x}function Bot(e){return 1+e.reduce(zot,0)}function zot(e,t){return Math.max(e,t.y)}function Uot(e){for(var t;t=e.children;)e=t[0];return e}function qot(e){for(var t;t=e.children;)e=t[t.length-1];return e}function Hot(){var e=Lot,t=1,n=1,r=!1;function i(s){var o,a=0;s.eachAfter(function(f){var h=f.children;h?(f.x=Fot(h),f.y=Bot(h)):(f.x=o?a+=e(f,o):0,f.y=0,o=f)});var l=Uot(s),u=qot(s),c=l.x-e(l,u)/2,d=u.x+e(u,l)/2;return s.eachAfter(r?function(f){f.x=(f.x-s.x)*t,f.y=(s.y-f.y)*n}:function(f){f.x=(f.x-c)/(d-c)*t,f.y=(1-(s.y?f.y/s.y:1))*n})}return i.separation=function(s){return arguments.length?(e=s,i):e},i.size=function(s){return arguments.length?(r=!1,t=+s[0],n=+s[1],i):r?null:[t,n]},i.nodeSize=function(s){return arguments.length?(r=!0,t=+s[0],n=+s[1],i):r?[t,n]:null},i}function Wot(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function Vot(){return this.eachAfter(Wot)}function Got(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function Yot(e,t){for(var n=this,r=[n],i,s,o=-1;n=r.pop();)if(e.call(t,n,++o,this),i=n.children)for(s=i.length-1;s>=0;--s)r.push(i[s]);return this}function Kot(e,t){for(var n=this,r=[n],i=[],s,o,a,l=-1;n=r.pop();)if(i.push(n),s=n.children)for(o=0,a=s.length;o<a;++o)r.push(s[o]);for(;n=i.pop();)e.call(t,n,++l,this);return this}function Xot(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function Qot(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function Jot(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function Zot(e){for(var t=this,n=eat(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function eat(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function tat(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function nat(){return Array.from(this)}function rat(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function iat(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*sat(){var e=this,t,n=[e],r,i,s;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,s=r.length;i<s;++i)n.push(r[i]);while(n.length)}function $W(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=lat)):t===void 0&&(t=aat);for(var n=new $w(e),r,i=[n],s,o,a,l;r=i.pop();)if((o=t(r.data))&&(l=(o=Array.from(o)).length))for(r.children=o,a=l-1;a>=0;--a)i.push(s=o[a]=new $w(o[a])),s.parent=r,s.depth=r.depth+1;return n.eachBefore(Iwe)}function oat(){return $W(this).eachBefore(uat)}function aat(e){return e.children}function lat(e){return Array.isArray(e)?e[1]:null}function uat(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function Iwe(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function $w(e){this.data=e,this.depth=this.height=0,this.parent=null}$w.prototype=$W.prototype={constructor:$w,count:Vot,each:Got,eachAfter:Kot,eachBefore:Yot,find:Xot,sum:Qot,sort:Jot,path:Zot,ancestors:tat,descendants:nat,leaves:rat,links:iat,copy:oat,[Symbol.iterator]:sat};function YR(e){return e==null?null:Rwe(e)}function Rwe(e){if(typeof e!="function")throw new Error;return e}function iy(){return 0}function Cb(e){return function(){return e}}const cat=1664525,dat=1013904223,nse=4294967296;function fat(){let e=1;return()=>(e=(cat*e+dat)%nse)/nse}function hat(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function pat(e,t){let n=e.length,r,i;for(;n;)i=t()*n--|0,r=e[n],e[n]=e[i],e[i]=r;return e}function mat(e,t){for(var n=0,r=(e=pat(Array.from(e),t)).length,i=[],s,o;n<r;)s=e[n],o&&Dwe(o,s)?++n:(o=yat(i=gat(i,s)),n=0);return o}function gat(e,t){var n,r;if(rL(t,e))return[t];for(n=0;n<e.length;++n)if(qk(t,e[n])&&rL(o2(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(qk(o2(e[n],e[r]),t)&&qk(o2(e[n],t),e[r])&&qk(o2(e[r],t),e[n])&&rL(Pwe(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function qk(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function Dwe(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function rL(e,t){for(var n=0;n<t.length;++n)if(!Dwe(e,t[n]))return!1;return!0}function yat(e){switch(e.length){case 1:return vat(e[0]);case 2:return o2(e[0],e[1]);case 3:return Pwe(e[0],e[1],e[2])}}function vat(e){return{x:e.x,y:e.y,r:e.r}}function o2(e,t){var n=e.x,r=e.y,i=e.r,s=t.x,o=t.y,a=t.r,l=s-n,u=o-r,c=a-i,d=Math.sqrt(l*l+u*u);return{x:(n+s+l/d*c)/2,y:(r+o+u/d*c)/2,r:(d+i+a)/2}}function Pwe(e,t,n){var r=e.x,i=e.y,s=e.r,o=t.x,a=t.y,l=t.r,u=n.x,c=n.y,d=n.r,f=r-o,h=r-u,p=i-a,m=i-c,g=l-s,b=d-s,v=r*r+i*i-s*s,x=v-o*o-a*a+l*l,E=v-u*u-c*c+d*d,_=h*p-f*m,C=(p*E-m*x)/(_*2)-r,S=(m*g-p*b)/_,k=(h*x-f*E)/(_*2)-i,R=(f*b-h*g)/_,O=S*S+R*R-1,N=2*(s+C*S+k*R),L=C*C+k*k-s*s,$=-(Math.abs(O)>1e-6?(N+Math.sqrt(N*N-4*O*L))/(2*O):L/N);return{x:r+C+S*$,y:i+k+R*$,r:$}}function rse(e,t,n){var r=e.x-t.x,i,s,o=e.y-t.y,a,l,u=r*r+o*o;u?(s=t.r+n.r,s*=s,l=e.r+n.r,l*=l,s>l?(i=(u+l-s)/(2*u),a=Math.sqrt(Math.max(0,l/u-i*i)),n.x=e.x-i*r-a*o,n.y=e.y-i*o+a*r):(i=(u+s-l)/(2*u),a=Math.sqrt(Math.max(0,s/u-i*i)),n.x=t.x+i*r-a*o,n.y=t.y+i*o+a*r)):(n.x=t.x+n.r,n.y=t.y)}function ise(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function sse(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,s=(t.y*n.r+n.y*t.r)/r;return i*i+s*s}function Hk(e){this._=e,this.next=null,this.previous=null}function bat(e,t){if(!(s=(e=hat(e)).length))return 0;var n,r,i,s,o,a,l,u,c,d,f;if(n=e[0],n.x=0,n.y=0,!(s>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(s>2))return n.r+r.r;rse(r,n,i=e[2]),n=new Hk(n),r=new Hk(r),i=new Hk(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(l=3;l<s;++l){rse(n._,r._,i=e[l]),i=new Hk(i),u=r.next,c=n.previous,d=r._.r,f=n._.r;do if(d<=f){if(ise(u._,i._)){r=u,n.next=r,r.previous=n,--l;continue e}d+=u._.r,u=u.next}else{if(ise(c._,i._)){n=c,n.next=r,r.previous=n,--l;continue e}f+=c._.r,c=c.previous}while(u!==c.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,o=sse(n);(i=i.next)!==r;)(a=sse(i))<o&&(n=i,o=a);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=mat(n,t),l=0;l<s;++l)n=e[l],n.x-=i.x,n.y-=i.y;return i.r}function wat(e){return Math.sqrt(e.value)}function xat(){var e=null,t=1,n=1,r=iy;function i(s){const o=fat();return s.x=t/2,s.y=n/2,e?s.eachBefore(ose(e)).eachAfter(iL(r,.5,o)).eachBefore(ase(1)):s.eachBefore(ose(wat)).eachAfter(iL(iy,1,o)).eachAfter(iL(r,s.r/Math.min(t,n),o)).eachBefore(ase(Math.min(t,n)/(2*s.r))),s}return i.radius=function(s){return arguments.length?(e=YR(s),i):e},i.size=function(s){return arguments.length?(t=+s[0],n=+s[1],i):[t,n]},i.padding=function(s){return arguments.length?(r=typeof s=="function"?s:Cb(+s),i):r},i}function ose(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function iL(e,t,n){return function(r){if(i=r.children){var i,s,o=i.length,a=e(r)*t||0,l;if(a)for(s=0;s<o;++s)i[s].r+=a;if(l=bat(i,n),a)for(s=0;s<o;++s)i[s].r-=a;r.r=l+a}}}function ase(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function Nwe(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function uS(e,t,n,r,i){for(var s=e.children,o,a=-1,l=s.length,u=e.value&&(r-t)/e.value;++a<l;)o=s[a],o.y0=n,o.y1=i,o.x0=t,o.x1=t+=o.value*u}function Eat(){var e=1,t=1,n=0,r=!1;function i(o){var a=o.height+1;return o.x0=o.y0=n,o.x1=e,o.y1=t/a,o.eachBefore(s(t,a)),r&&o.eachBefore(Nwe),o}function s(o,a){return function(l){l.children&&uS(l,l.x0,o*(l.depth+1)/a,l.x1,o*(l.depth+2)/a);var u=l.x0,c=l.y0,d=l.x1-n,f=l.y1-n;d<u&&(u=d=(u+d)/2),f<c&&(c=f=(c+f)/2),l.x0=u,l.y0=c,l.x1=d,l.y1=f}}return i.round=function(o){return arguments.length?(r=!!o,i):r},i.size=function(o){return arguments.length?(e=+o[0],t=+o[1],i):[e,t]},i.padding=function(o){return arguments.length?(n=+o,i):n},i}var _at={depth:-1},lse={},sL={};function Tat(e){return e.id}function Cat(e){return e.parentId}function use(){var e=Tat,t=Cat,n;function r(i){var s=Array.from(i),o=e,a=t,l,u,c,d,f,h,p,m,g=new Map;if(n!=null){const b=s.map((E,_)=>Sat(n(E,_,i))),v=b.map(cse),x=new Set(b).add("");for(const E of v)x.has(E)||(x.add(E),b.push(E),v.push(cse(E)),s.push(sL));o=(E,_)=>b[_],a=(E,_)=>v[_]}for(c=0,l=s.length;c<l;++c)u=s[c],h=s[c]=new $w(u),(p=o(u,c,i))!=null&&(p+="")&&(m=h.id=p,g.set(m,g.has(m)?lse:h)),(p=a(u,c,i))!=null&&(p+="")&&(h.parent=p);for(c=0;c<l;++c)if(h=s[c],p=h.parent){if(f=g.get(p),!f)throw new Error("missing: "+p);if(f===lse)throw new Error("ambiguous: "+p);f.children?f.children.push(h):f.children=[h],h.parent=f}else{if(d)throw new Error("multiple roots");d=h}if(!d)throw new Error("no root");if(n!=null){for(;d.data===sL&&d.children.length===1;)d=d.children[0],--l;for(let b=s.length-1;b>=0&&(h=s[b],h.data===sL);--b)h.data=null}if(d.parent=_at,d.eachBefore(function(b){b.depth=b.parent.depth+1,--l}).eachBefore(Iwe),d.parent=null,l>0)throw new Error("cycle");return d}return r.id=function(i){return arguments.length?(e=YR(i),r):e},r.parentId=function(i){return arguments.length?(t=YR(i),r):t},r.path=function(i){return arguments.length?(n=YR(i),r):n},r}function Sat(e){e=`${e}`;let t=e.length;return xB(e,t-1)&&!xB(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function cse(e){let t=e.length;if(t<2)return"";for(;--t>1&&!xB(e,t););return e.slice(0,t)}function xB(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if((n&1)===0)return!0}return!1}function Aat(e,t){return e.parent===t.parent?1:2}function oL(e){var t=e.children;return t?t[0]:e.t}function aL(e){var t=e.children;return t?t[t.length-1]:e.t}function kat(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function Iat(e){for(var t=0,n=0,r=e.children,i=r.length,s;--i>=0;)s=r[i],s.z+=t,s.m+=t,t+=s.s+(n+=s.c)}function Rat(e,t,n){return e.a.parent===t.parent?e.a:n}function KR(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}KR.prototype=Object.create($w.prototype);function Dat(e){for(var t=new KR(e,0),n,r=[t],i,s,o,a;n=r.pop();)if(s=n._.children)for(n.children=new Array(a=s.length),o=a-1;o>=0;--o)r.push(i=n.children[o]=new KR(s[o],o)),i.parent=n;return(t.parent=new KR(null,0)).children=[t],t}function Pat(){var e=Aat,t=1,n=1,r=null;function i(u){var c=Dat(u);if(c.eachAfter(s),c.parent.m=-c.z,c.eachBefore(o),r)u.eachBefore(l);else{var d=u,f=u,h=u;u.eachBefore(function(v){v.x<d.x&&(d=v),v.x>f.x&&(f=v),v.depth>h.depth&&(h=v)});var p=d===f?1:e(d,f)/2,m=p-d.x,g=t/(f.x+p+m),b=n/(h.depth||1);u.eachBefore(function(v){v.x=(v.x+m)*g,v.y=v.depth*b})}return u}function s(u){var c=u.children,d=u.parent.children,f=u.i?d[u.i-1]:null;if(c){Iat(u);var h=(c[0].z+c[c.length-1].z)/2;f?(u.z=f.z+e(u._,f._),u.m=u.z-h):u.z=h}else f&&(u.z=f.z+e(u._,f._));u.parent.A=a(u,f,u.parent.A||d[0])}function o(u){u._.x=u.z+u.parent.m,u.m+=u.parent.m}function a(u,c,d){if(c){for(var f=u,h=u,p=c,m=f.parent.children[0],g=f.m,b=h.m,v=p.m,x=m.m,E;p=aL(p),f=oL(f),p&&f;)m=oL(m),h=aL(h),h.a=u,E=p.z+v-f.z-g+e(p._,f._),E>0&&(kat(Rat(p,u,d),u,E),g+=E,b+=E),v+=p.m,g+=f.m,x+=m.m,b+=h.m;p&&!aL(h)&&(h.t=p,h.m+=v-b),f&&!oL(m)&&(m.t=f,m.m+=g-x,d=u)}return d}function l(u){u.x*=t,u.y=u.depth*n}return i.separation=function(u){return arguments.length?(e=u,i):e},i.size=function(u){return arguments.length?(r=!1,t=+u[0],n=+u[1],i):r?null:[t,n]},i.nodeSize=function(u){return arguments.length?(r=!0,t=+u[0],n=+u[1],i):r?[t,n]:null},i}function o$(e,t,n,r,i){for(var s=e.children,o,a=-1,l=s.length,u=e.value&&(i-n)/e.value;++a<l;)o=s[a],o.x0=t,o.x1=r,o.y0=n,o.y1=n+=o.value*u}var Owe=(1+Math.sqrt(5))/2;function $we(e,t,n,r,i,s){for(var o=[],a=t.children,l,u,c=0,d=0,f=a.length,h,p,m=t.value,g,b,v,x,E,_,C;c<f;){h=i-n,p=s-r;do g=a[d++].value;while(!g&&d<f);for(b=v=g,_=Math.max(p/h,h/p)/(m*e),C=g*g*_,E=Math.max(v/C,C/b);d<f;++d){if(g+=u=a[d].value,u<b&&(b=u),u>v&&(v=u),C=g*g*_,x=Math.max(v/C,C/b),x>E){g-=u;break}E=x}o.push(l={value:g,dice:h<p,children:a.slice(c,d)}),l.dice?uS(l,n,r,i,m?r+=p*g/m:s):o$(l,n,r,m?n+=h*g/m:i,s),m-=g,c=d}return o}const Mwe=function e(t){function n(r,i,s,o,a){$we(t,r,i,s,o,a)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(Owe);function Nat(){var e=Mwe,t=!1,n=1,r=1,i=[0],s=iy,o=iy,a=iy,l=iy,u=iy;function c(f){return f.x0=f.y0=0,f.x1=n,f.y1=r,f.eachBefore(d),i=[0],t&&f.eachBefore(Nwe),f}function d(f){var h=i[f.depth],p=f.x0+h,m=f.y0+h,g=f.x1-h,b=f.y1-h;g<p&&(p=g=(p+g)/2),b<m&&(m=b=(m+b)/2),f.x0=p,f.y0=m,f.x1=g,f.y1=b,f.children&&(h=i[f.depth+1]=s(f)/2,p+=u(f)-h,m+=o(f)-h,g-=a(f)-h,b-=l(f)-h,g<p&&(p=g=(p+g)/2),b<m&&(m=b=(m+b)/2),e(f,p,m,g,b))}return c.round=function(f){return arguments.length?(t=!!f,c):t},c.size=function(f){return arguments.length?(n=+f[0],r=+f[1],c):[n,r]},c.tile=function(f){return arguments.length?(e=Rwe(f),c):e},c.padding=function(f){return arguments.length?c.paddingInner(f).paddingOuter(f):c.paddingInner()},c.paddingInner=function(f){return arguments.length?(s=typeof f=="function"?f:Cb(+f),c):s},c.paddingOuter=function(f){return arguments.length?c.paddingTop(f).paddingRight(f).paddingBottom(f).paddingLeft(f):c.paddingTop()},c.paddingTop=function(f){return arguments.length?(o=typeof f=="function"?f:Cb(+f),c):o},c.paddingRight=function(f){return arguments.length?(a=typeof f=="function"?f:Cb(+f),c):a},c.paddingBottom=function(f){return arguments.length?(l=typeof f=="function"?f:Cb(+f),c):l},c.paddingLeft=function(f){return arguments.length?(u=typeof f=="function"?f:Cb(+f),c):u},c}function Oat(e,t,n,r,i){var s=e.children,o,a=s.length,l,u=new Array(a+1);for(u[0]=l=o=0;o<a;++o)u[o+1]=l+=s[o].value;c(0,a,e.value,t,n,r,i);function c(d,f,h,p,m,g,b){if(d>=f-1){var v=s[d];v.x0=p,v.y0=m,v.x1=g,v.y1=b;return}for(var x=u[d],E=h/2+x,_=d+1,C=f-1;_<C;){var S=_+C>>>1;u[S]<E?_=S+1:C=S}E-u[_-1]<u[_]-E&&d+1<_&&--_;var k=u[_]-x,R=h-k;if(g-p>b-m){var O=h?(p*R+g*k)/h:g;c(d,_,k,p,m,O,b),c(_,f,R,O,m,g,b)}else{var N=h?(m*R+b*k)/h:b;c(d,_,k,p,m,g,N),c(_,f,R,p,N,g,b)}}}function $at(e,t,n,r,i){(e.depth&1?o$:uS)(e,t,n,r,i)}const Mat=function e(t){function n(r,i,s,o,a){if((l=r._squarify)&&l.ratio===t)for(var l,u,c,d,f=-1,h,p=l.length,m=r.value;++f<p;){for(u=l[f],c=u.children,d=u.value=0,h=c.length;d<h;++d)u.value+=c[d].value;u.dice?uS(u,i,s,o,m?s+=(a-s)*u.value/m:a):o$(u,i,s,m?i+=(o-i)*u.value/m:o,a),m-=u.value}else r._squarify=l=$we(t,r,i,s,o,a),l.ratio=t}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(Owe);function hd(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function H0(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const EB=Symbol("implicit");function a$(){var e=new Xre,t=[],n=[],r=EB;function i(s){let o=e.get(s);if(o===void 0){if(r!==EB)return r;e.set(s,o=t.push(s)-1)}return n[o%n.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new Xre;for(const o of s)e.has(o)||e.set(o,t.push(o)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return a$(t,n).unknown(r)},hd.apply(i,arguments),i}function _B(){var e=a$().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,s,o,a=!1,l=0,u=0,c=.5;delete e.unknown;function d(){var f=t().length,h=i<r,p=h?i:r,m=h?r:i;s=(m-p)/Math.max(1,f-l+u*2),a&&(s=Math.floor(s)),p+=(m-p-s*(f-l))*c,o=s*(1-l),a&&(p=Math.round(p),o=Math.round(o));var g=va(f).map(function(b){return p+s*b});return n(h?g.reverse():g)}return e.domain=function(f){return arguments.length?(t(f),d()):t()},e.range=function(f){return arguments.length?([r,i]=f,r=+r,i=+i,d()):[r,i]},e.rangeRound=function(f){return[r,i]=f,r=+r,i=+i,a=!0,d()},e.bandwidth=function(){return o},e.step=function(){return s},e.round=function(f){return arguments.length?(a=!!f,d()):a},e.padding=function(f){return arguments.length?(l=Math.min(1,u=+f),d()):l},e.paddingInner=function(f){return arguments.length?(l=Math.min(1,f),d()):l},e.paddingOuter=function(f){return arguments.length?(u=+f,d()):u},e.align=function(f){return arguments.length?(c=Math.max(0,Math.min(1,f)),d()):c},e.copy=function(){return _B(t(),[r,i]).round(a).paddingInner(l).paddingOuter(u).align(c)},hd.apply(d(),arguments)}function Lat(e){return function(){return e}}function TB(e){return+e}var dse=[0,1];function ol(e){return e}function CB(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Lat(isNaN(t)?NaN:.5)}function Fat(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function jat(e,t,n){var r=e[0],i=e[1],s=t[0],o=t[1];return i<r?(r=CB(i,r),s=n(o,s)):(r=CB(r,i),s=n(s,o)),function(a){return s(r(a))}}function Bat(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),s=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=CB(e[o],e[o+1]),s[o]=n(t[o],t[o+1]);return function(a){var l=v0(e,a,1,r)-1;return s[l](i[l](a))}}function cS(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function l$(){var e=dse,t=dse,n=q0,r,i,s,o=ol,a,l,u;function c(){var f=Math.min(e.length,t.length);return o!==ol&&(o=Fat(e[0],e[f-1])),a=f>2?Bat:jat,l=u=null,d}function d(f){return f==null||isNaN(f=+f)?s:(l||(l=a(e.map(r),t,n)))(r(o(f)))}return d.invert=function(f){return o(i((u||(u=a(t,e.map(r),bu)))(f)))},d.domain=function(f){return arguments.length?(e=Array.from(f,TB),c()):e.slice()},d.range=function(f){return arguments.length?(t=Array.from(f),c()):t.slice()},d.rangeRound=function(f){return t=Array.from(f),n=sS,c()},d.clamp=function(f){return arguments.length?(o=f?!0:ol,c()):o!==ol},d.interpolate=function(f){return arguments.length?(n=f,c()):n},d.unknown=function(f){return arguments.length?(s=f,d):s},function(f,h){return r=f,i=h,c()}}function Lwe(){return l$()(ol,ol)}function Fwe(e,t,n,r){var i=b0(e,t,n),s;switch(r=Yy(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(s=Lbe(i,o))&&(r.precision=s),AW(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=Fbe(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=Mbe(i))&&(r.precision=s-(r.type==="%")*2);break}}return n$(r)}function Fv(e){var t=e.domain;return e.ticks=function(n){var r=t();return Bj(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return Fwe(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,s=r.length-1,o=r[i],a=r[s],l,u,c=10;for(a<o&&(u=o,o=a,a=u,u=i,i=s,s=u);c-- >0;){if(u=zj(o,a,n),u===l)return r[i]=o,r[s]=a,t(r);if(u>0)o=Math.floor(o/u)*u,a=Math.ceil(a/u)*u;else if(u<0)o=Math.ceil(o*u)/u,a=Math.floor(a*u)/u;else break;l=u}return e},e}function u$(){var e=Lwe();return e.copy=function(){return cS(e,u$())},hd.apply(e,arguments),Fv(e)}function jwe(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,TB),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return jwe(e).unknown(t)},e=arguments.length?Array.from(e,TB):[0,1],Fv(n)}function Bwe(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],s=e[r],o;return s<i&&(o=n,n=r,r=o,o=i,i=s,s=o),e[n]=t.floor(i),e[r]=t.ceil(s),e}function fse(e){return Math.log(e)}function hse(e){return Math.exp(e)}function zat(e){return-Math.log(-e)}function Uat(e){return-Math.exp(-e)}function qat(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Hat(e){return e===10?qat:e===Math.E?Math.exp:t=>Math.pow(e,t)}function Wat(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function pse(e){return(t,n)=>-e(-t,n)}function MW(e){const t=e(fse,hse),n=t.domain;let r=10,i,s;function o(){return i=Wat(r),s=Hat(r),n()[0]<0?(i=pse(i),s=pse(s),e(zat,Uat)):e(fse,hse),t}return t.base=function(a){return arguments.length?(r=+a,o()):r},t.domain=function(a){return arguments.length?(n(a),o()):n()},t.ticks=a=>{const l=n();let u=l[0],c=l[l.length-1];const d=c<u;d&&([u,c]=[c,u]);let f=i(u),h=i(c),p,m;const g=a==null?10:+a;let b=[];if(!(r%1)&&h-f<g){if(f=Math.floor(f),h=Math.ceil(h),u>0){for(;f<=h;++f)for(p=1;p<r;++p)if(m=f<0?p/s(-f):p*s(f),!(m<u)){if(m>c)break;b.push(m)}}else for(;f<=h;++f)for(p=r-1;p>=1;--p)if(m=f>0?p/s(-f):p*s(f),!(m<u)){if(m>c)break;b.push(m)}b.length*2<g&&(b=Bj(u,c,g))}else b=Bj(f,h,Math.min(h-f,g)).map(s);return d?b.reverse():b},t.tickFormat=(a,l)=>{if(a==null&&(a=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=Yy(l)).precision==null&&(l.trim=!0),l=n$(l)),a===1/0)return l;const u=Math.max(1,r*a/t.ticks().length);return c=>{let d=c/s(Math.round(i(c)));return d*r<r-.5&&(d*=r),d<=u?l(c):""}},t.nice=()=>n(Bwe(n(),{floor:a=>s(Math.floor(i(a))),ceil:a=>s(Math.ceil(i(a)))})),t}function zwe(){const e=MW(l$()).domain([1,10]);return e.copy=()=>cS(e,zwe()).base(e.base()),hd.apply(e,arguments),e}function mse(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function gse(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function LW(e){var t=1,n=e(mse(t),gse(t));return n.constant=function(r){return arguments.length?e(mse(t=+r),gse(t)):t},Fv(n)}function Uwe(){var e=LW(l$());return e.copy=function(){return cS(e,Uwe()).constant(e.constant())},hd.apply(e,arguments)}function yse(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Vat(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Gat(e){return e<0?-e*e:e*e}function FW(e){var t=e(ol,ol),n=1;function r(){return n===1?e(ol,ol):n===.5?e(Vat,Gat):e(yse(n),yse(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},Fv(t)}function jW(){var e=FW(l$());return e.copy=function(){return cS(e,jW()).exponent(e.exponent())},hd.apply(e,arguments),e}function Yat(){return jW.apply(null,arguments).exponent(.5)}function qwe(){var e=[],t=[],n=[],r;function i(){var o=0,a=Math.max(1,t.length);for(n=new Array(a-1);++o<a;)n[o-1]=$1e(e,o/a);return s}function s(o){return o==null||isNaN(o=+o)?r:t[v0(n,o)]}return s.invertExtent=function(o){var a=t.indexOf(o);return a<0?[NaN,NaN]:[a>0?n[a-1]:e[0],a<n.length?n[a]:e[e.length-1]]},s.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let a of o)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(tp),i()},s.range=function(o){return arguments.length?(t=Array.from(o),i()):t.slice()},s.unknown=function(o){return arguments.length?(r=o,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return qwe().domain(e).range(t).unknown(r)},hd.apply(s,arguments)}function K2(){var e=0,t=1,n=1,r=[.5],i=[0,1],s;function o(l){return l!=null&&l<=l?i[v0(r,l,0,n)]:s}function a(){var l=-1;for(r=new Array(n);++l<n;)r[l]=((l+1)*t-(l-n)*e)/(n+1);return o}return o.domain=function(l){return arguments.length?([e,t]=l,e=+e,t=+t,a()):[e,t]},o.range=function(l){return arguments.length?(n=(i=Array.from(l)).length-1,a()):i.slice()},o.invertExtent=function(l){var u=i.indexOf(l);return u<0?[NaN,NaN]:u<1?[e,r[0]]:u>=n?[r[n-1],t]:[r[u-1],r[u]]},o.unknown=function(l){return arguments.length&&(s=l),o},o.thresholds=function(){return r.slice()},o.copy=function(){return K2().domain([e,t]).range(i).unknown(s)},hd.apply(Fv(o),arguments)}function Hwe(){var e=[.5],t=[0,1],n,r=1;function i(s){return s!=null&&s<=s?t[v0(e,s,0,r)]:n}return i.domain=function(s){return arguments.length?(e=Array.from(s),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(s){return arguments.length?(t=Array.from(s),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(s){var o=t.indexOf(s);return[e[o-1],e[o]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return Hwe().domain(e).range(t).unknown(n)},hd.apply(i,arguments)}const lL=new Date,uL=new Date;function gs(e,t,n,r){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(e(s=new Date(+s)),s),i.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),i.round=s=>{const o=i(s),a=i.ceil(s);return s-o<a-s?o:a},i.offset=(s,o)=>(t(s=new Date(+s),o==null?1:Math.floor(o)),s),i.range=(s,o,a)=>{const l=[];if(s=i.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return l;let u;do l.push(u=new Date(+s)),t(s,a),e(s);while(u<s&&s<o);return l},i.filter=s=>gs(o=>{if(o>=o)for(;e(o),!s(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;t(o,-1),!s(o););else for(;--a>=0;)for(;t(o,1),!s(o););}),n&&(i.count=(s,o)=>(lL.setTime(+s),uL.setTime(+o),e(lL),e(uL),Math.floor(n(lL,uL))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?o=>r(o)%s===0:o=>i.count(0,o)%s===0):i)),i}const Mw=gs(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Mw.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?gs(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):Mw);Mw.range;const Wh=1e3,Tu=Wh*60,Vh=Tu*60,_p=Vh*24,BW=_p*7,vse=_p*30,cL=_p*365,Gh=gs(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Wh)},(e,t)=>(t-e)/Wh,e=>e.getUTCSeconds());Gh.range;const c$=gs(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Wh)},(e,t)=>{e.setTime(+e+t*Tu)},(e,t)=>(t-e)/Tu,e=>e.getMinutes());c$.range;const d$=gs(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Tu)},(e,t)=>(t-e)/Tu,e=>e.getUTCMinutes());d$.range;const f$=gs(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Wh-e.getMinutes()*Tu)},(e,t)=>{e.setTime(+e+t*Vh)},(e,t)=>(t-e)/Vh,e=>e.getHours());f$.range;const h$=gs(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Vh)},(e,t)=>(t-e)/Vh,e=>e.getUTCHours());h$.range;const rp=gs(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Tu)/_p,e=>e.getDate()-1);rp.range;const o0=gs(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/_p,e=>e.getUTCDate()-1);o0.range;const Wwe=gs(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/_p,e=>Math.floor(e/_p));Wwe.range;function jv(e){return gs(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Tu)/BW)}const Kx=jv(0),_P=jv(1),Kat=jv(2),Xat=jv(3),Lw=jv(4),Qat=jv(5),Jat=jv(6);Kx.range;_P.range;Kat.range;Xat.range;Lw.range;Qat.range;Jat.range;function Bv(e){return gs(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/BW)}const Xx=Bv(0),TP=Bv(1),Zat=Bv(2),elt=Bv(3),Fw=Bv(4),tlt=Bv(5),nlt=Bv(6);Xx.range;TP.range;Zat.range;elt.range;Fw.range;tlt.range;nlt.range;const VT=gs(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());VT.range;const GT=gs(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());GT.range;const kf=gs(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());kf.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:gs(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});kf.range;const If=gs(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());If.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:gs(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});If.range;function Vwe(e,t,n,r,i,s){const o=[[Gh,1,Wh],[Gh,5,5*Wh],[Gh,15,15*Wh],[Gh,30,30*Wh],[s,1,Tu],[s,5,5*Tu],[s,15,15*Tu],[s,30,30*Tu],[i,1,Vh],[i,3,3*Vh],[i,6,6*Vh],[i,12,12*Vh],[r,1,_p],[r,2,2*_p],[n,1,BW],[t,1,vse],[t,3,3*vse],[e,1,cL]];function a(u,c,d){const f=c<u;f&&([u,c]=[c,u]);const h=d&&typeof d.range=="function"?d:l(u,c,d),p=h?h.range(u,+c+1):[];return f?p.reverse():p}function l(u,c,d){const f=Math.abs(c-u)/d,h=Vx(([,,g])=>g).right(o,f);if(h===o.length)return e.every(b0(u/cL,c/cL,d));if(h===0)return Mw.every(Math.max(b0(u,c,d),1));const[p,m]=o[f/o[h-1][2]<o[h][2]/f?h-1:h];return p.every(m)}return[a,l]}const[rlt,ilt]=Vwe(If,GT,Xx,Wwe,h$,d$),[slt,olt]=Vwe(kf,VT,Kx,rp,f$,c$);function dL(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function fL(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function p_(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function Gwe(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,s=e.days,o=e.shortDays,a=e.months,l=e.shortMonths,u=m_(i),c=g_(i),d=m_(s),f=g_(s),h=m_(o),p=g_(o),m=m_(a),g=g_(a),b=m_(l),v=g_(l),x={a:J,A:K,b:Z,B:U,c:null,d:Tse,e:Tse,f:Ilt,g:jlt,G:zlt,H:Slt,I:Alt,j:klt,L:Ywe,m:Rlt,M:Dlt,p:j,q:V,Q:Ase,s:kse,S:Plt,u:Nlt,U:Olt,V:$lt,w:Mlt,W:Llt,x:null,X:null,y:Flt,Y:Blt,Z:Ult,"%":Sse},E={a:z,A:G,b:Q,B:ie,c:null,d:Cse,e:Cse,f:Vlt,g:nut,G:iut,H:qlt,I:Hlt,j:Wlt,L:Xwe,m:Glt,M:Ylt,p:me,q:ae,Q:Ase,s:kse,S:Klt,u:Xlt,U:Qlt,V:Jlt,w:Zlt,W:eut,x:null,X:null,y:tut,Y:rut,Z:sut,"%":Sse},_={a:O,A:N,b:L,B:$,c:B,d:Ese,e:Ese,f:Elt,g:xse,G:wse,H:_se,I:_se,j:vlt,L:xlt,m:ylt,M:blt,p:R,q:glt,Q:Tlt,s:Clt,S:wlt,u:dlt,U:flt,V:hlt,w:clt,W:plt,x:H,X:Y,y:xse,Y:wse,Z:mlt,"%":_lt};x.x=C(n,x),x.X=C(r,x),x.c=C(t,x),E.x=C(n,E),E.X=C(r,E),E.c=C(t,E);function C(fe,be){return function(te){var re=[],we=-1,Ee=0,Fe=fe.length,We,Me,Be;for(te instanceof Date||(te=new Date(+te));++we<Fe;)fe.charCodeAt(we)===37&&(re.push(fe.slice(Ee,we)),(Me=bse[We=fe.charAt(++we)])!=null?We=fe.charAt(++we):Me=We==="e"?" ":"0",(Be=be[We])&&(We=Be(te,Me)),re.push(We),Ee=we+1);return re.push(fe.slice(Ee,we)),re.join("")}}function S(fe,be){return function(te){var re=p_(1900,void 0,1),we=k(re,fe,te+="",0),Ee,Fe;if(we!=te.length)return null;if("Q"in re)return new Date(re.Q);if("s"in re)return new Date(re.s*1e3+("L"in re?re.L:0));if(be&&!("Z"in re)&&(re.Z=0),"p"in re&&(re.H=re.H%12+re.p*12),re.m===void 0&&(re.m="q"in re?re.q:0),"V"in re){if(re.V<1||re.V>53)return null;"w"in re||(re.w=1),"Z"in re?(Ee=fL(p_(re.y,0,1)),Fe=Ee.getUTCDay(),Ee=Fe>4||Fe===0?TP.ceil(Ee):TP(Ee),Ee=o0.offset(Ee,(re.V-1)*7),re.y=Ee.getUTCFullYear(),re.m=Ee.getUTCMonth(),re.d=Ee.getUTCDate()+(re.w+6)%7):(Ee=dL(p_(re.y,0,1)),Fe=Ee.getDay(),Ee=Fe>4||Fe===0?_P.ceil(Ee):_P(Ee),Ee=rp.offset(Ee,(re.V-1)*7),re.y=Ee.getFullYear(),re.m=Ee.getMonth(),re.d=Ee.getDate()+(re.w+6)%7)}else("W"in re||"U"in re)&&("w"in re||(re.w="u"in re?re.u%7:"W"in re?1:0),Fe="Z"in re?fL(p_(re.y,0,1)).getUTCDay():dL(p_(re.y,0,1)).getDay(),re.m=0,re.d="W"in re?(re.w+6)%7+re.W*7-(Fe+5)%7:re.w+re.U*7-(Fe+6)%7);return"Z"in re?(re.H+=re.Z/100|0,re.M+=re.Z%100,fL(re)):dL(re)}}function k(fe,be,te,re){for(var we=0,Ee=be.length,Fe=te.length,We,Me;we<Ee;){if(re>=Fe)return-1;if(We=be.charCodeAt(we++),We===37){if(We=be.charAt(we++),Me=_[We in bse?be.charAt(we++):We],!Me||(re=Me(fe,te,re))<0)return-1}else if(We!=te.charCodeAt(re++))return-1}return re}function R(fe,be,te){var re=u.exec(be.slice(te));return re?(fe.p=c.get(re[0].toLowerCase()),te+re[0].length):-1}function O(fe,be,te){var re=h.exec(be.slice(te));return re?(fe.w=p.get(re[0].toLowerCase()),te+re[0].length):-1}function N(fe,be,te){var re=d.exec(be.slice(te));return re?(fe.w=f.get(re[0].toLowerCase()),te+re[0].length):-1}function L(fe,be,te){var re=b.exec(be.slice(te));return re?(fe.m=v.get(re[0].toLowerCase()),te+re[0].length):-1}function $(fe,be,te){var re=m.exec(be.slice(te));return re?(fe.m=g.get(re[0].toLowerCase()),te+re[0].length):-1}function B(fe,be,te){return k(fe,t,be,te)}function H(fe,be,te){return k(fe,n,be,te)}function Y(fe,be,te){return k(fe,r,be,te)}function J(fe){return o[fe.getDay()]}function K(fe){return s[fe.getDay()]}function Z(fe){return l[fe.getMonth()]}function U(fe){return a[fe.getMonth()]}function j(fe){return i[+(fe.getHours()>=12)]}function V(fe){return 1+~~(fe.getMonth()/3)}function z(fe){return o[fe.getUTCDay()]}function G(fe){return s[fe.getUTCDay()]}function Q(fe){return l[fe.getUTCMonth()]}function ie(fe){return a[fe.getUTCMonth()]}function me(fe){return i[+(fe.getUTCHours()>=12)]}function ae(fe){return 1+~~(fe.getUTCMonth()/3)}return{format:function(fe){var be=C(fe+="",x);return be.toString=function(){return fe},be},parse:function(fe){var be=S(fe+="",!1);return be.toString=function(){return fe},be},utcFormat:function(fe){var be=C(fe+="",E);return be.toString=function(){return fe},be},utcParse:function(fe){var be=S(fe+="",!0);return be.toString=function(){return fe},be}}}var bse={"-":"",_:" ",0:"0"},Ys=/^\s*\d+/,alt=/^%/,llt=/[\\^$*+?|[\]().{}]/g;function lr(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(t)+i:i)}function ult(e){return e.replace(llt,"\\$&")}function m_(e){return new RegExp("^(?:"+e.map(ult).join("|")+")","i")}function g_(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function clt(e,t,n){var r=Ys.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function dlt(e,t,n){var r=Ys.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function flt(e,t,n){var r=Ys.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function hlt(e,t,n){var r=Ys.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function plt(e,t,n){var r=Ys.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function wse(e,t,n){var r=Ys.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function xse(e,t,n){var r=Ys.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function mlt(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function glt(e,t,n){var r=Ys.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function ylt(e,t,n){var r=Ys.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function Ese(e,t,n){var r=Ys.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function vlt(e,t,n){var r=Ys.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function _se(e,t,n){var r=Ys.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function blt(e,t,n){var r=Ys.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function wlt(e,t,n){var r=Ys.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function xlt(e,t,n){var r=Ys.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function Elt(e,t,n){var r=Ys.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function _lt(e,t,n){var r=alt.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function Tlt(e,t,n){var r=Ys.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function Clt(e,t,n){var r=Ys.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function Tse(e,t){return lr(e.getDate(),t,2)}function Slt(e,t){return lr(e.getHours(),t,2)}function Alt(e,t){return lr(e.getHours()%12||12,t,2)}function klt(e,t){return lr(1+rp.count(kf(e),e),t,3)}function Ywe(e,t){return lr(e.getMilliseconds(),t,3)}function Ilt(e,t){return Ywe(e,t)+"000"}function Rlt(e,t){return lr(e.getMonth()+1,t,2)}function Dlt(e,t){return lr(e.getMinutes(),t,2)}function Plt(e,t){return lr(e.getSeconds(),t,2)}function Nlt(e){var t=e.getDay();return t===0?7:t}function Olt(e,t){return lr(Kx.count(kf(e)-1,e),t,2)}function Kwe(e){var t=e.getDay();return t>=4||t===0?Lw(e):Lw.ceil(e)}function $lt(e,t){return e=Kwe(e),lr(Lw.count(kf(e),e)+(kf(e).getDay()===4),t,2)}function Mlt(e){return e.getDay()}function Llt(e,t){return lr(_P.count(kf(e)-1,e),t,2)}function Flt(e,t){return lr(e.getFullYear()%100,t,2)}function jlt(e,t){return e=Kwe(e),lr(e.getFullYear()%100,t,2)}function Blt(e,t){return lr(e.getFullYear()%1e4,t,4)}function zlt(e,t){var n=e.getDay();return e=n>=4||n===0?Lw(e):Lw.ceil(e),lr(e.getFullYear()%1e4,t,4)}function Ult(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+lr(t/60|0,"0",2)+lr(t%60,"0",2)}function Cse(e,t){return lr(e.getUTCDate(),t,2)}function qlt(e,t){return lr(e.getUTCHours(),t,2)}function Hlt(e,t){return lr(e.getUTCHours()%12||12,t,2)}function Wlt(e,t){return lr(1+o0.count(If(e),e),t,3)}function Xwe(e,t){return lr(e.getUTCMilliseconds(),t,3)}function Vlt(e,t){return Xwe(e,t)+"000"}function Glt(e,t){return lr(e.getUTCMonth()+1,t,2)}function Ylt(e,t){return lr(e.getUTCMinutes(),t,2)}function Klt(e,t){return lr(e.getUTCSeconds(),t,2)}function Xlt(e){var t=e.getUTCDay();return t===0?7:t}function Qlt(e,t){return lr(Xx.count(If(e)-1,e),t,2)}function Qwe(e){var t=e.getUTCDay();return t>=4||t===0?Fw(e):Fw.ceil(e)}function Jlt(e,t){return e=Qwe(e),lr(Fw.count(If(e),e)+(If(e).getUTCDay()===4),t,2)}function Zlt(e){return e.getUTCDay()}function eut(e,t){return lr(TP.count(If(e)-1,e),t,2)}function tut(e,t){return lr(e.getUTCFullYear()%100,t,2)}function nut(e,t){return e=Qwe(e),lr(e.getUTCFullYear()%100,t,2)}function rut(e,t){return lr(e.getUTCFullYear()%1e4,t,4)}function iut(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Fw(e):Fw.ceil(e),lr(e.getUTCFullYear()%1e4,t,4)}function sut(){return"+0000"}function Sse(){return"%"}function Ase(e){return+e}function kse(e){return Math.floor(+e/1e3)}var X1,zW,Jwe,UW,Zwe;out({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function out(e){return X1=Gwe(e),zW=X1.format,Jwe=X1.parse,UW=X1.utcFormat,Zwe=X1.utcParse,X1}function aut(e){return new Date(e)}function lut(e){return e instanceof Date?+e:+new Date(+e)}function qW(e,t,n,r,i,s,o,a,l,u){var c=Lwe(),d=c.invert,f=c.domain,h=u(".%L"),p=u(":%S"),m=u("%I:%M"),g=u("%I %p"),b=u("%a %d"),v=u("%b %d"),x=u("%B"),E=u("%Y");function _(C){return(l(C)<C?h:a(C)<C?p:o(C)<C?m:s(C)<C?g:r(C)<C?i(C)<C?b:v:n(C)<C?x:E)(C)}return c.invert=function(C){return new Date(d(C))},c.domain=function(C){return arguments.length?f(Array.from(C,lut)):f().map(aut)},c.ticks=function(C){var S=f();return e(S[0],S[S.length-1],C??10)},c.tickFormat=function(C,S){return S==null?_:u(S)},c.nice=function(C){var S=f();return(!C||typeof C.range!="function")&&(C=t(S[0],S[S.length-1],C??10)),C?f(Bwe(S,C)):c},c.copy=function(){return cS(c,qW(e,t,n,r,i,s,o,a,l,u))},c}function uut(){return hd.apply(qW(slt,olt,kf,VT,Kx,rp,f$,c$,Gh,zW).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function cut(){return hd.apply(qW(rlt,ilt,If,GT,Xx,o0,h$,d$,Gh,UW).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function p$(){var e=0,t=1,n,r,i,s,o=ol,a=!1,l;function u(d){return d==null||isNaN(d=+d)?l:o(i===0?.5:(d=(s(d)-n)*i,a?Math.max(0,Math.min(1,d)):d))}u.domain=function(d){return arguments.length?([e,t]=d,n=s(e=+e),r=s(t=+t),i=n===r?0:1/(r-n),u):[e,t]},u.clamp=function(d){return arguments.length?(a=!!d,u):a},u.interpolator=function(d){return arguments.length?(o=d,u):o};function c(d){return function(f){var h,p;return arguments.length?([h,p]=f,o=d(h,p),u):[o(0),o(1)]}}return u.range=c(q0),u.rangeRound=c(sS),u.unknown=function(d){return arguments.length?(l=d,u):l},function(d){return s=d,n=d(e),r=d(t),i=n===r?0:1/(r-n),u}}function W0(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function HW(){var e=Fv(p$()(ol));return e.copy=function(){return W0(e,HW())},H0.apply(e,arguments)}function exe(){var e=MW(p$()).domain([1,10]);return e.copy=function(){return W0(e,exe()).base(e.base())},H0.apply(e,arguments)}function txe(){var e=LW(p$());return e.copy=function(){return W0(e,txe()).constant(e.constant())},H0.apply(e,arguments)}function WW(){var e=FW(p$());return e.copy=function(){return W0(e,WW()).exponent(e.exponent())},H0.apply(e,arguments)}function dut(){return WW.apply(null,arguments).exponent(.5)}function m$(){var e=0,t=.5,n=1,r=1,i,s,o,a,l,u=ol,c,d=!1,f;function h(m){return isNaN(m=+m)?f:(m=.5+((m=+c(m))-s)*(r*m<r*s?a:l),u(d?Math.max(0,Math.min(1,m)):m))}h.domain=function(m){return arguments.length?([e,t,n]=m,i=c(e=+e),s=c(t=+t),o=c(n=+n),a=i===s?0:.5/(s-i),l=s===o?0:.5/(o-s),r=s<i?-1:1,h):[e,t,n]},h.clamp=function(m){return arguments.length?(d=!!m,h):d},h.interpolator=function(m){return arguments.length?(u=m,h):u};function p(m){return function(g){var b,v,x;return arguments.length?([b,v,x]=g,u=vW(m,[b,v,x]),h):[u(0),u(.5),u(1)]}}return h.range=p(q0),h.rangeRound=p(sS),h.unknown=function(m){return arguments.length?(f=m,h):f},function(m){return c=m,i=m(e),s=m(t),o=m(n),a=i===s?0:.5/(s-i),l=s===o?0:.5/(o-s),r=s<i?-1:1,h}}function nxe(){var e=Fv(m$()(ol));return e.copy=function(){return W0(e,nxe())},H0.apply(e,arguments)}function rxe(){var e=MW(m$()).domain([.1,1,10]);return e.copy=function(){return W0(e,rxe()).base(e.base())},H0.apply(e,arguments)}function ixe(){var e=LW(m$());return e.copy=function(){return W0(e,ixe()).constant(e.constant())},H0.apply(e,arguments)}function VW(){var e=FW(m$());return e.copy=function(){return W0(e,VW()).exponent(e.exponent())},H0.apply(e,arguments)}function fut(){return VW.apply(null,arguments).exponent(.5)}function Ao(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const hut=Ao("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),put=Ao("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),mut=Ao("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),gut=Ao("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),yut=Ao("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),vut=Ao("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),but=Ao("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),wut=Ao("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),xut=Ao("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),Eut=Ao("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),GW=e=>hbe(e[e.length-1]);var _ut=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(Ao);const Tut=GW(_ut);var Cut=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(Ao);const Sut=GW(Cut);var Aut=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(Ao);const kut=GW(Aut);function Iut(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-e*(35.34-e*(2381.73-e*(6402.7-e*(7024.72-e*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+e*(170.73+e*(52.82-e*(131.46-e*(176.58-e*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+e*(442.36-e*(2482.43-e*(6167.24-e*(6614.94-e*2475.67)))))))+")"}var Rut=yW(w0(-100,.75,.35),w0(80,1.5,.8)),Dut=yW(w0(260,.75,.35),w0(80,1.5,.8));w0();function Put(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+e*(1172.33-e*(10793.56-e*(33300.12-e*(38394.49-e*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+e*(557.33+e*(1225.33-e*(3574.96-e*(1073.77+e*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+e*(3211.1-e*(15327.97-e*(27814-e*(22569.18-e*6838.66)))))))+")"}function g$(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}const Nut=g$(Ao("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));g$(Ao("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf"));var Out=g$(Ao("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),$ut=g$(Ao("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function mr(e){return function(){return e}}const Ise=Math.abs,Oo=Math.atan2,Cg=Math.cos,Mut=Math.max,hL=Math.min,Ld=Math.sin,yy=Math.sqrt,Lo=1e-12,jw=Math.PI,CP=jw/2,sxe=2*jw;function Lut(e){return e>1?0:e<-1?jw:Math.acos(e)}function Rse(e){return e>=1?CP:e<=-1?-CP:Math.asin(e)}function y$(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new EW(t)}function Fut(e){return e.innerRadius}function jut(e){return e.outerRadius}function But(e){return e.startAngle}function zut(e){return e.endAngle}function Uut(e){return e&&e.padAngle}function qut(e,t,n,r,i,s,o,a){var l=n-e,u=r-t,c=o-i,d=a-s,f=d*l-c*u;if(!(f*f<Lo))return f=(c*(t-s)-d*(e-i))/f,[e+f*l,t+f*u]}function Wk(e,t,n,r,i,s,o){var a=e-n,l=t-r,u=(o?s:-s)/yy(a*a+l*l),c=u*l,d=-u*a,f=e+c,h=t+d,p=n+c,m=r+d,g=(f+p)/2,b=(h+m)/2,v=p-f,x=m-h,E=v*v+x*x,_=i-s,C=f*m-p*h,S=(x<0?-1:1)*yy(Mut(0,_*_*E-C*C)),k=(C*x-v*S)/E,R=(-C*v-x*S)/E,O=(C*x+v*S)/E,N=(-C*v+x*S)/E,L=k-g,$=R-b,B=O-g,H=N-b;return L*L+$*$>B*B+H*H&&(k=O,R=N),{cx:k,cy:R,x01:-c,y01:-d,x11:k*(i/_-1),y11:R*(i/_-1)}}function Hut(){var e=Fut,t=jut,n=mr(0),r=null,i=But,s=zut,o=Uut,a=null,l=y$(u);function u(){var c,d,f=+e.apply(this,arguments),h=+t.apply(this,arguments),p=i.apply(this,arguments)-CP,m=s.apply(this,arguments)-CP,g=Ise(m-p),b=m>p;if(a||(a=c=l()),h<f&&(d=h,h=f,f=d),!(h>Lo))a.moveTo(0,0);else if(g>sxe-Lo)a.moveTo(h*Cg(p),h*Ld(p)),a.arc(0,0,h,p,m,!b),f>Lo&&(a.moveTo(f*Cg(m),f*Ld(m)),a.arc(0,0,f,m,p,b));else{var v=p,x=m,E=p,_=m,C=g,S=g,k=o.apply(this,arguments)/2,R=k>Lo&&(r?+r.apply(this,arguments):yy(f*f+h*h)),O=hL(Ise(h-f)/2,+n.apply(this,arguments)),N=O,L=O,$,B;if(R>Lo){var H=Rse(R/f*Ld(k)),Y=Rse(R/h*Ld(k));(C-=H*2)>Lo?(H*=b?1:-1,E+=H,_-=H):(C=0,E=_=(p+m)/2),(S-=Y*2)>Lo?(Y*=b?1:-1,v+=Y,x-=Y):(S=0,v=x=(p+m)/2)}var J=h*Cg(v),K=h*Ld(v),Z=f*Cg(_),U=f*Ld(_);if(O>Lo){var j=h*Cg(x),V=h*Ld(x),z=f*Cg(E),G=f*Ld(E),Q;if(g<jw)if(Q=qut(J,K,z,G,j,V,Z,U)){var ie=J-Q[0],me=K-Q[1],ae=j-Q[0],fe=V-Q[1],be=1/Ld(Lut((ie*ae+me*fe)/(yy(ie*ie+me*me)*yy(ae*ae+fe*fe)))/2),te=yy(Q[0]*Q[0]+Q[1]*Q[1]);N=hL(O,(f-te)/(be-1)),L=hL(O,(h-te)/(be+1))}else N=L=0}S>Lo?L>Lo?($=Wk(z,G,J,K,h,L,b),B=Wk(j,V,Z,U,h,L,b),a.moveTo($.cx+$.x01,$.cy+$.y01),L<O?a.arc($.cx,$.cy,L,Oo($.y01,$.x01),Oo(B.y01,B.x01),!b):(a.arc($.cx,$.cy,L,Oo($.y01,$.x01),Oo($.y11,$.x11),!b),a.arc(0,0,h,Oo($.cy+$.y11,$.cx+$.x11),Oo(B.cy+B.y11,B.cx+B.x11),!b),a.arc(B.cx,B.cy,L,Oo(B.y11,B.x11),Oo(B.y01,B.x01),!b))):(a.moveTo(J,K),a.arc(0,0,h,v,x,!b)):a.moveTo(J,K),!(f>Lo)||!(C>Lo)?a.lineTo(Z,U):N>Lo?($=Wk(Z,U,j,V,f,-N,b),B=Wk(J,K,z,G,f,-N,b),a.lineTo($.cx+$.x01,$.cy+$.y01),N<O?a.arc($.cx,$.cy,N,Oo($.y01,$.x01),Oo(B.y01,B.x01),!b):(a.arc($.cx,$.cy,N,Oo($.y01,$.x01),Oo($.y11,$.x11),!b),a.arc(0,0,f,Oo($.cy+$.y11,$.cx+$.x11),Oo(B.cy+B.y11,B.cx+B.x11),b),a.arc(B.cx,B.cy,N,Oo(B.y11,B.x11),Oo(B.y01,B.x01),!b))):a.arc(0,0,f,_,E,b)}if(a.closePath(),c)return a=null,c+""||null}return u.centroid=function(){var c=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,d=(+i.apply(this,arguments)+ +s.apply(this,arguments))/2-jw/2;return[Cg(d)*c,Ld(d)*c]},u.innerRadius=function(c){return arguments.length?(e=typeof c=="function"?c:mr(+c),u):e},u.outerRadius=function(c){return arguments.length?(t=typeof c=="function"?c:mr(+c),u):t},u.cornerRadius=function(c){return arguments.length?(n=typeof c=="function"?c:mr(+c),u):n},u.padRadius=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:mr(+c),u):r},u.startAngle=function(c){return arguments.length?(i=typeof c=="function"?c:mr(+c),u):i},u.endAngle=function(c){return arguments.length?(s=typeof c=="function"?c:mr(+c),u):s},u.padAngle=function(c){return arguments.length?(o=typeof c=="function"?c:mr(+c),u):o},u.context=function(c){return arguments.length?(a=c??null,u):a},u}function oxe(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function axe(e){this._context=e}axe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function YW(e){return new axe(e)}function lxe(e){return e[0]}function uxe(e){return e[1]}function cxe(e,t){var n=mr(!0),r=null,i=YW,s=null,o=y$(a);e=typeof e=="function"?e:e===void 0?lxe:mr(e),t=typeof t=="function"?t:t===void 0?uxe:mr(t);function a(l){var u,c=(l=oxe(l)).length,d,f=!1,h;for(r==null&&(s=i(h=o())),u=0;u<=c;++u)!(u<c&&n(d=l[u],u,l))===f&&((f=!f)?s.lineStart():s.lineEnd()),f&&s.point(+e(d,u,l),+t(d,u,l));if(h)return s=null,h+""||null}return a.x=function(l){return arguments.length?(e=typeof l=="function"?l:mr(+l),a):e},a.y=function(l){return arguments.length?(t=typeof l=="function"?l:mr(+l),a):t},a.defined=function(l){return arguments.length?(n=typeof l=="function"?l:mr(!!l),a):n},a.curve=function(l){return arguments.length?(i=l,r!=null&&(s=i(r)),a):i},a.context=function(l){return arguments.length?(l==null?r=s=null:s=i(r=l),a):r},a}function dxe(e,t,n){var r=null,i=mr(!0),s=null,o=YW,a=null,l=y$(u);e=typeof e=="function"?e:e===void 0?lxe:mr(+e),t=typeof t=="function"?t:mr(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?uxe:mr(+n);function u(d){var f,h,p,m=(d=oxe(d)).length,g,b=!1,v,x=new Array(m),E=new Array(m);for(s==null&&(a=o(v=l())),f=0;f<=m;++f){if(!(f<m&&i(g=d[f],f,d))===b)if(b=!b)h=f,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),p=f-1;p>=h;--p)a.point(x[p],E[p]);a.lineEnd(),a.areaEnd()}b&&(x[f]=+e(g,f,d),E[f]=+t(g,f,d),a.point(r?+r(g,f,d):x[f],n?+n(g,f,d):E[f]))}if(v)return a=null,v+""||null}function c(){return cxe().defined(i).curve(o).context(s)}return u.x=function(d){return arguments.length?(e=typeof d=="function"?d:mr(+d),r=null,u):e},u.x0=function(d){return arguments.length?(e=typeof d=="function"?d:mr(+d),u):e},u.x1=function(d){return arguments.length?(r=d==null?null:typeof d=="function"?d:mr(+d),u):r},u.y=function(d){return arguments.length?(t=typeof d=="function"?d:mr(+d),n=null,u):t},u.y0=function(d){return arguments.length?(t=typeof d=="function"?d:mr(+d),u):t},u.y1=function(d){return arguments.length?(n=d==null?null:typeof d=="function"?d:mr(+d),u):n},u.lineX0=u.lineY0=function(){return c().x(e).y(t)},u.lineY1=function(){return c().x(e).y(n)},u.lineX1=function(){return c().x(r).y(t)},u.defined=function(d){return arguments.length?(i=typeof d=="function"?d:mr(!!d),u):i},u.curve=function(d){return arguments.length?(o=d,s!=null&&(a=o(s)),u):o},u.context=function(d){return arguments.length?(d==null?s=a=null:a=o(s=d),u):s},u}const Wut={draw(e,t){const n=yy(t/jw);e.moveTo(n,0),e.arc(0,0,n,0,sxe)}};function Vut(e,t){let n=null,r=y$(i);e=typeof e=="function"?e:mr(e||Wut),t=typeof t=="function"?t:mr(t===void 0?64:+t);function i(){let s;if(n||(n=s=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(e=typeof s=="function"?s:mr(s),i):e},i.size=function(s){return arguments.length?(t=typeof s=="function"?s:mr(+s),i):t},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function x0(){}function SP(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function v$(e){this._context=e}v$.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:SP(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:SP(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Gut(e){return new v$(e)}function fxe(e){this._context=e}fxe.prototype={areaStart:x0,areaEnd:x0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:SP(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Yut(e){return new fxe(e)}function hxe(e){this._context=e}hxe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:SP(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Kut(e){return new hxe(e)}function pxe(e,t){this._basis=new v$(e),this._beta=t}pxe.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],s=e[n]-r,o=t[n]-i,a=-1,l;++a<=n;)l=a/n,this._basis.point(this._beta*e[a]+(1-this._beta)*(r+l*s),this._beta*t[a]+(1-this._beta)*(i+l*o));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const Xut=function e(t){function n(r){return t===1?new v$(r):new pxe(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function AP(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function KW(e,t){this._context=e,this._k=(1-t)/6}KW.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:AP(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:AP(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Qut=function e(t){function n(r){return new KW(r,t)}return n.tension=function(r){return e(+r)},n}(0);function XW(e,t){this._context=e,this._k=(1-t)/6}XW.prototype={areaStart:x0,areaEnd:x0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:AP(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Jut=function e(t){function n(r){return new XW(r,t)}return n.tension=function(r){return e(+r)},n}(0);function QW(e,t){this._context=e,this._k=(1-t)/6}QW.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:AP(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Zut=function e(t){function n(r){return new QW(r,t)}return n.tension=function(r){return e(+r)},n}(0);function JW(e,t,n){var r=e._x1,i=e._y1,s=e._x2,o=e._y2;if(e._l01_a>Lo){var a=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,l=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*a-e._x0*e._l12_2a+e._x2*e._l01_2a)/l,i=(i*a-e._y0*e._l12_2a+e._y2*e._l01_2a)/l}if(e._l23_a>Lo){var u=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);s=(s*u+e._x1*e._l23_2a-t*e._l12_2a)/c,o=(o*u+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(r,i,s,o,e._x2,e._y2)}function mxe(e,t){this._context=e,this._alpha=t}mxe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:JW(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const ect=function e(t){function n(r){return t?new mxe(r,t):new KW(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function gxe(e,t){this._context=e,this._alpha=t}gxe.prototype={areaStart:x0,areaEnd:x0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:JW(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const tct=function e(t){function n(r){return t?new gxe(r,t):new XW(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function yxe(e,t){this._context=e,this._alpha=t}yxe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:JW(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const nct=function e(t){function n(r){return t?new yxe(r,t):new QW(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function vxe(e){this._context=e}vxe.prototype={areaStart:x0,areaEnd:x0,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function rct(e){return new vxe(e)}function Dse(e){return e<0?-1:1}function Pse(e,t,n){var r=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(r||i<0&&-0),o=(n-e._y1)/(i||r<0&&-0),a=(s*i+o*r)/(r+i);return(Dse(s)+Dse(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function Nse(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function pL(e,t,n){var r=e._x0,i=e._y0,s=e._x1,o=e._y1,a=(s-r)/3;e._context.bezierCurveTo(r+a,i+a*t,s-a,o-a*n,s,o)}function kP(e){this._context=e}kP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:pL(this,this._t0,Nse(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,pL(this,Nse(this,n=Pse(this,e,t)),n);break;default:pL(this,this._t0,n=Pse(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function bxe(e){this._context=new wxe(e)}(bxe.prototype=Object.create(kP.prototype)).point=function(e,t){kP.prototype.point.call(this,t,e)};function wxe(e){this._context=e}wxe.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,s){this._context.bezierCurveTo(t,e,r,n,s,i)}};function ict(e){return new kP(e)}function sct(e){return new bxe(e)}function xxe(e){this._context=e}xxe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=Ose(e),i=Ose(t),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function Ose(e){var t,n=e.length-1,r,i=new Array(n),s=new Array(n),o=new Array(n);for(i[0]=0,s[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,s[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,s[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/s[t-1],s[t]-=r,o[t]-=r*o[t-1];for(i[n-1]=o[n-1]/s[n-1],t=n-2;t>=0;--t)i[t]=(o[t]-i[t+1])/s[t];for(s[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function oct(e){return new xxe(e)}function b$(e,t){this._context=e,this._t=t}b$.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function act(e){return new b$(e,.5)}function lct(e){return new b$(e,0)}function uct(e){return new b$(e,1)}function a2(e,t,n){this.k=e,this.x=t,this.y=n}a2.prototype={constructor:a2,scale:function(e){return e===1?this:new a2(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new a2(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};a2.prototype;const Exe=D.createContext(null);function _xe({children:e,value:t}){return T.jsx(Exe.Provider,{value:t,children:e})}const Gu=()=>{const e=D.useContext(Exe);if(!e)throw new Error("useMatrixContext must be used within a MatrixProvider");return e},Txe=Object.freeze(Object.defineProperty({__proto__:null,MatrixProvider:_xe,useMatrixContext:Gu},Symbol.toStringTag,{value:"Module"})),Cxe=(e,t)=>{const n=[...new Set(t.filter(s=>s.origin===e).map(s=>s.destination))].sort(),r=[...new Set(t.filter(s=>s.origin!==e).map(s=>s.destination))].filter(s=>!n.includes(s)).sort();return[...n,...r]};function Sxe({showLines:e=!0}){const{configProps:t,data:n,originScale:r,destinationScale:i,margin:s,setDestinationHighlight:o,setOriginHighlight:a,orderingNode:l,setOrderingNode:u,orderedOrigins:c,setOrderedDestinations:d,trrack:f,actions:h}=Gu(),p=D.useMemo(()=>i.range(),[i]),m=D.useMemo(()=>r.bandwidth()/2,[r]),g=D.useMemo(()=>r.domain().map(x=>({value:x,offset:(r(x)||0)+m})),[r,m]),b=D.useCallback(x=>{o(x),a(x)},[o,a]),v=D.useCallback((x,E)=>{t.nodeOrderingDisabled||(E===x?(u(null),f==null||f.apply("Reset Sort",h==null?void 0:h.setOrderingNode(null))):(u(x),f==null||f.apply("Sort",h==null?void 0:h.setOrderingNode(x))))},[t.nodeOrderingDisabled,f,h,u]);return D.useEffect(()=>{if(t.nodeOrderingDisabled)return;if(l===null){d(c);return}const x=Cxe(l,n);d(x)},[t.nodeOrderingDisabled,n,c,d,l]),T.jsxs(T.Fragment,{children:[e?T.jsx("path",{className:"axis-line",d:["M",0,0,"V",p[1]].join(" ")}):null,g.map(({value:x,offset:E})=>T.jsxs("g",{transform:`translate(${E},0 )`,children:[e?T.jsx("line",{className:"axis-line",y2:`${p[1]}`,x2:m,x1:m}):null,T.jsx("foreignObject",{className:"axis-label",y:-m,width:s.top,height:r.bandwidth(),style:{transform:"rotate(-90deg)",cursor:"pointer"},onMouseOver:()=>b(x),onClick:()=>v(x,l),children:T.jsx("div",{className:"label-container",style:{height:r.bandwidth()},children:T.jsx(xn,{transitionProps:{transition:"slide-down",duration:300},label:x,withinPortal:!0,openDelay:200,children:T.jsx(Ve,{className:"axis-label",size:"s",children:l===x?`  ${x}`:x})})})})]},`${x}`))]})}const Axe=Object.freeze(Object.defineProperty({__proto__:null,OriginAxis:Sxe,getOrder:Cxe},Symbol.toStringTag,{value:"Module"}));function kxe({showLines:e=!0}){const{configProps:t,margin:n,destinationScale:r,originScale:i,answerNodes:s,setAnswerNodes:o,orderingNode:a,actions:l,trrack:u,setAnswer:c,setDestinationHighlight:d,setOriginHighlight:f}=Gu(),h=D.useMemo(()=>i.range(),[i]),p=D.useMemo(()=>r.bandwidth()/2,[r]),m=D.useMemo(()=>r.domain().map(x=>({value:x,offset:(r(x)||0)+p})),[r,p]),g=D.useCallback((x,E)=>{if(t.destinationSelectionDisabled)return;let _;E.includes(x)?_=E.filter(C=>C!==x):_=[...E,x],o(_),u==null||u.apply("Set Answer",l==null?void 0:l.setAnswerNodes(_)),c({status:!0,provenanceGraph:u==null?void 0:u.graph.backend,answers:{answerNodes:_}})},[o,c,u,l,t]),b=D.useCallback((x,E)=>{d(x),f(E?null:x)},[d,f]),v=Math.round(r.bandwidth());return T.jsxs(T.Fragment,{children:[e?T.jsx("path",{className:"axis-line",d:["M",0,0,"H",h[1]].join(" ")}):null,m.map(({value:x,offset:E})=>T.jsxs("g",{transform:`translate(0, ${E})`,style:{cursor:"pointer"},children:[e?T.jsx("line",{className:"axis-line",x2:`${-(h[0]-h[1])}`,y2:p,y1:p}):null,T.jsx("foreignObject",{x:-n.left,y:-p,width:n.left,height:v,style:{cursor:"pointer"},onClick:()=>c?g(x,s):{},onMouseOver:()=>b(x,a),children:T.jsx("div",{className:"label-container",style:{justifyContent:"flex-end",borderRadius:"5px",background:s.includes(x)?" #ff6e4a":"transparent",height:v},children:T.jsx(xn,{transitionProps:{transition:"slide-right",duration:300},label:x,withinPortal:!0,openDelay:200,children:T.jsx(Ve,{className:"axis-label",style:{textAlign:"start"},children:x})})})})]},`${x}`))]})}const Ixe=Object.freeze(Object.defineProperty({__proto__:null,DestinationAxis:kxe},Symbol.toStringTag,{value:"Module"}));function SB(e,t){const n=e.domain(),r=e.range(),i=Math.floor((t-r[0])/e.step());return n[i]}function Rxe(){const{size:e,originScale:t,destinationScale:n,setOriginHighlight:r,setDestinationHighlight:i,originHighlight:s,destinationHighlight:o,linkMarks:a,setLinkMarks:l,trrack:u,actions:c}=Gu(),{width:d,height:f}=D.useMemo(()=>({width:e,height:e}),[e]),h=D.useCallback(g=>{const[b,v]=Cnt(g);return{origin:SB(t,b),destination:SB(n,v)}},[t,n]),p=D.useCallback(g=>{const{origin:b,destination:v}=h(g);b!==s&&r(b),v!==o&&i(v)},[h,s,r,o,i]),m=D.useCallback(g=>{const{origin:b,destination:v}=h(g),x=a.find(_=>_[0]===b&&_[1]===v);let E;x?E=a.filter(_=>_[0]!==b||_[1]!==v):E=[[b,v],...a],l(E),u==null||u.apply("Set Link Marks",c==null?void 0:c.setLinkMarks(E))},[h,a,l,u,c]);return T.jsx("rect",{width:d,height:f,fill:"transparent",opacity:0,onClick:m,onMouseMove:p})}const Dxe=Object.freeze(Object.defineProperty({__proto__:null,Background:Rxe,invertScaleBand:SB},Symbol.toStringTag,{value:"Module"})),Xa=3,Pxe=Object.freeze(Object.defineProperty({__proto__:null,HIGHLIGHT_STROKE_WIDTH:Xa},Symbol.toStringTag,{value:"Module"}));function Nxe(){const{margin:e,size:t,cellSize:n,originScale:r,destinationScale:i,originHighlight:s,destinationHighlight:o,orderingNode:a,actions:l,trrack:u}=Gu(),{topMargin:c,leftMargin:d}=D.useMemo(()=>({topMargin:e.top,leftMargin:e.left}),[e]),{width:f,height:h}=D.useMemo(()=>({width:t,height:t}),[t]);return D.useEffect(()=>{u==null||u.apply("Highlight",l==null?void 0:l.setOriginHighlight(s))},[s,u,l]),D.useEffect(()=>{u==null||u.apply("Highlight",l==null?void 0:l.setDestinationHighlight(o))},[o,u,l]),T.jsxs(T.Fragment,{children:[s&&T.jsx("rect",{id:"originHighlight",className:"highlight",width:n+Xa,height:h+c,y:-c+Xa/2,x:r(s)-Xa/2,visibility:s?"visible":"hidden",style:{strokeWidth:Xa}}),o&&T.jsx("rect",{id:"destinationHighlight",className:"highlight",width:f+d,height:n+Xa,x:-d+Xa/2,y:i(o)-Xa/2,visibility:o?"visible":"hidden",style:{strokeWidth:Xa}}),a&&T.jsx("rect",{id:"orderHighlight",className:"highlight",width:n+Xa,height:h+c,y:-c+Xa/2,x:r(a)-Xa/2,style:{strokeWidth:Xa}})]})}const Oxe=Object.freeze(Object.defineProperty({__proto__:null,Highlighting:Nxe},Symbol.toStringTag,{value:"Module"})),iw=e=>e.origin,sw=e=>e.destination,$se=5,bi=e=>+e.mean.toFixed(2),Qy=e=>+e.std.toFixed(2),ZW=e=>+Math.min($se,e.std===0?$se:+(e.mean/e.std).toFixed(2)),$xe=Object.freeze(Object.defineProperty({__proto__:null,destinationAccessor:sw,meanAccessor:bi,originAccessor:iw,snrAccessor:ZW,stdAccessor:Qy},Symbol.toStringTag,{value:"Module"}));var Qn=(e=>(e.Bivariate="Bivariate",e.MarkSize="Overlaid Mark Size",e.CellSize="Cell Size",e.BarChart="Bar Chart",e.BarChartColor="Bar Chart + Color Scale",e.MarkAngle45="Overlaid Mark Angle (0-45)",e.MarkAngle45_90="Overlaid Mark Angle (45-90)",e.MarkAngle90="Overlaid Mark Angle",e.ColorAngle45="Color+Angle (0-45)",e.ColorAngle90="Color+Angle (0-90)",e.Mean="Just the mean",e))(Qn||{}),w$=(e=>(e.None="none",e.Optimal="optimal",e.PCA="pca",e))(w$||{}),x$=(e=>(e.Mean="mean",e.StandardDeviation="std",e.SignalToNoiseRatio="snr",e))(x$||{}),Pl=(e=>(e.Viridis="viridis",e.Cividis="cividis",e.Warm="warm",e.Cool="cool",e.Plasma="plasma",e.Inferno="inferno",e.Turbo="turbo",e.Blues="blues",e.Oranges="oranges",e.Reds="reds",e))(Pl||{}),E$=(e=>(e.ClearNodeSelection="Clear State Selection",e.ClearLinkSelection="Clear Flight Selection",e.ResetOrdering="reset_ordering",e))(E$||{});const Mxe=Object.freeze(Object.defineProperty({__proto__:null,ClusteringMode:w$,ClusteringVariable:x$,ColorScheme:Pl,EncodingType:Qn,UserActionType:E$},Symbol.toStringTag,{value:"Module"})),mL=80,cct="Price Ranges (in $):",dct="Price Variation Ranges (in $):";function Lxe(){const{cellRenderer:e,cellSize:t,meanScale:n,devScale:r,configProps:i}=Gu(),{encoding:s}=i,o=t,a=D.useRef(null),l=D.useRef(null),u=D.useCallback((h,p)=>h.range().map(m=>{const[g,b]=h.invertExtent(m);return{mean:p?(g+b)/2:0,std:p?0:(g+b)/2,origin:"",destination:""}}),[]),c=D.useCallback((h,p,m,g,b)=>{const v=h.current;if(!v)return;const x=Wj(v);x.selectAll("*").remove();const E=Math.min(90,o*3+10);x.selectAll(".cell").data(p,C=>bi(C)+Qy(C)).enter().append("g").attr("class","cell").attr("transform",(C,S)=>`translate(${E*S}, 0)`).append("text").attr("transform",`translate(${o/2}, ${o+20})`).attr("text-anchor","middle").text((C,S)=>{const[k,R]=m.invertExtent(m.range()[S]);return S+1===m.range().length?`${k.toFixed(0)}-${+R.toFixed(0)}`:`${k.toFixed(0)}-${+R.toFixed(0)-1}`}),e(x.selectAll(".cell"),o,g,b)},[e,o]),d=D.useCallback((h,p)=>{const m=[];return h.range().forEach((g,b)=>{const[v,x]=n.invertExtent(g);p.range().forEach((E,_)=>{const[C,S]=r.invertExtent(E),k={mean:(v+x)/2,std:(C+S)/2,origin:`${b}`,destination:`${_}`};m.push(k)})}),m},[n,r]),f=D.useCallback((h,p,m,g,b,v)=>{const x=h.current;if(!x)return;const E=Math.min(o+30,60),_=Wj(x);_.selectAll("*").remove(),_.selectAll(".cell").data(p,C=>bi(C)+Qy(C)).join("g").attr("class","cell").attr("transform",C=>`translate(${E*+C.origin}, ${E*+C.destination+mL})`),_.selectAll(".meanLabel").data(m.range()).join("text").attr("transform",(C,S)=>`translate(${E*S+15}, ${mL-5})rotate(-45)`).attr("text-anchor","start").text((C,S)=>{const[k,R]=m.invertExtent(C);return S+1===m.range().length?`$${k.toFixed(0)} - ${+R.toFixed(0)}`:`$${k.toFixed(0)} - ${+R.toFixed(0)-.01}`}),_.selectAll(".devLabel").data(g.range()).join("text").attr("transform",(C,S)=>`translate(${m.range().length*E+5},${E*S+mL+E/2+5})`).attr("text-anchor","start").text((C,S)=>{const[k,R]=g.invertExtent(C);return S+1===g.range().length?`$${k.toFixed(0)} - ${+R.toFixed(0)}`:`$${k.toFixed(0)} - ${+R.toFixed(0)-.01}`}),e(_.selectAll(".cell"),E,b,v)},[o,e]);return D.useEffect(()=>{if(a.current&&s!==Qn.Bivariate){const h=u(n,!0);c(a,h,n,!0,!1)}},[n,s,c,u]),D.useEffect(()=>{if(l.current&&s!==Qn.Bivariate){const h=u(r,!1);c(l,h,r,!1,!0)}},[r,s,c,u]),D.useEffect(()=>{if(a.current&&s===Qn.Bivariate){const h=d(n,r);f(a,h,n,r,!0,!0)}},[s,n,r,f,d]),T.jsxs(T.Fragment,{children:[T.jsxs("div",{style:{width:"100%",height:"100%"},children:[T.jsx(Ve,{size:"xl",fw:700,style:{marginBottom:"2vh"},children:cct}),T.jsx("svg",{width:"100%",overflow:"visible",height:s!==Qn.Bivariate?o*2:Math.min(o+30,60)*7,children:T.jsx("g",{ref:a})})]}),r.range().length>1&&s!==Qn.Bivariate&&T.jsxs("div",{children:[T.jsx(Ve,{size:"xl",fw:700,style:{marginBottom:"2vh"},children:dct}),T.jsx("svg",{overflow:"visible",height:o*2,width:"100%",children:T.jsx("g",{ref:l})})]})]})}const Fxe=Object.freeze(Object.defineProperty({__proto__:null,Legend:Lxe},Symbol.toStringTag,{value:"Module"}));function jxe(){const{data:e,cellSize:t,cellRenderer:n,originScale:r,destinationScale:i}=Gu(),s=D.useRef(null);return D.useEffect(()=>{if(!s.current)return;const o=Wj(s.current).selectAll(".cell").data(e,a=>iw(a)+sw(a)+bi(a)+Qy(a)).join(a=>a.append("g").attr("class","cell").attr("transform",l=>`translate(${r(iw(l))}, ${i(sw(l))})`),a=>(a.selectAll("*").remove(),a.attr("transform",l=>`translate(${r(iw(l))}, ${i(sw(l))})`)),a=>a.remove());n(o,t)},[e,r,i,n,s,t]),T.jsx("g",{ref:s})}const Bxe=Object.freeze(Object.defineProperty({__proto__:null,EncodedCells:jxe},Symbol.toStringTag,{value:"Module"})),[Mse,gL]=[300,105];function fct(e,t,n,r,i,s){switch(s){case"top-right":return{x:e-n,y:t+i};case"bottom-left":return{x:e+i,y:t-r};case"bottom-right":return{x:e-n,y:t-r};default:return{x:e+i,y:t+i}}}function hct(e,t,n,r){const i=n/2,s=r/2,o=t<s,a=e<i;return o&&a?"top-left":o&&!a?"top-right":!o&&a?"bottom-left":"bottom-right"}function zxe(){const{data:e,originScale:t,destinationScale:n,originHighlight:r,destinationHighlight:i,cellSize:s,size:o}=Gu(),[a,l]=D.useState(!1),[u,c]=D.useState({x:0,y:0}),d=D.useRef(null),f=e.find(p=>iw(p)===r&&sw(p)===i),h=!!f&&r!=null&&i!=null;return D.useEffect(()=>{if(!h){d.current&&clearTimeout(d.current),l(!1);return}const p=t(r),m=n(i);if(p==null||m==null)return;const g=hct(p,m,o,o),{x:b,y:v}=fct(p,m,Mse,gL,s,g);d.current&&clearTimeout(d.current),l(!1),d.current=setTimeout(()=>{c({x:b,y:v}),l(!0)},200)},[h,t,n,r,i,o,s]),h?T.jsx("foreignObject",{x:u.x,y:u.y,width:Mse,height:gL,style:{pointerEvents:"none"},children:T.jsxs(Iv,{shadow:"sm",radius:"md",p:"xs",withBorder:!0,style:{backgroundColor:"white",height:gL,display:"flex",flexDirection:"column",opacity:a?1:0,transform:a?"scale(1)":"scale(0.95)",transition:"opacity 200ms ease, transform 200ms ease"},children:[T.jsxs(Ve,{size:"sm",fw:500,children:["Origin:"," ",r]}),T.jsxs(Ve,{size:"sm",fw:500,children:["Destination:"," ",i]}),T.jsxs(Ve,{size:"sm",c:"blue",children:["Mean:"," ",bi(f).toFixed(2)]}),T.jsxs(Ve,{size:"sm",c:"orange",children:["Deviation: ",Qy(f).toFixed(2)]})," "]})}):null}const Uxe=Object.freeze(Object.defineProperty({__proto__:null,MatrixTooltip:zxe},Symbol.toStringTag,{value:"Module"})),ef=Xa+1;function qxe({marks:e,size:t}){const{originScale:n,destinationScale:r,cellSize:i}=Gu();return e==null?void 0:e.map((s,o)=>T.jsxs(T.Fragment,{children:[T.jsx("rect",{x:n(s.origin),y:r(s.destination)-35,width:25,height:30,fill:"white"},o),T.jsx("text",{className:"cluster-label",color:"#ff6e4a",x:n(s.origin),y:r(s.destination)-10,children:s.option}),T.jsx("rect",{className:"mark",x:n(s.origin)-ef/2,y:r(s.destination)-ef/2,width:t*i+ef,height:t*i+ef,strokeWidth:ef},o)]}))}function Hxe({marks:e}){const{originScale:t,destinationScale:n,cellSize:r}=Gu();return e==null?void 0:e.map((i,s)=>T.jsx("rect",{className:"mark",x:t(i[0])-ef/2,y:n(i[1])-ef/2,width:r+ef,height:r+ef,strokeWidth:ef},s))}const Wxe=Object.freeze(Object.defineProperty({__proto__:null,ClusterMarks:qxe,LinkMarks:Hxe},Symbol.toStringTag,{value:"Module"})),pct="#008837",mct="#7b3294";function gct(e,t){const{l:n}=Vy(e),r=100-n,i=80-t+r*t/100;return Vy(i,0,0).formatHex()}function Vxe(e,t){const n=t/(e+1);return Array.from({length:e},(r,i)=>n*(i+1))}function Ah(e,t=0,n=45){const r=(n-t)/(e-1);return Array.from({length:e},(i,s)=>t+r*s)}function Gxe(e,t,n,r,i,s){return D.useCallback((a,l,u=!0,c=!0)=>{const d=n?ZW:Qy;function f(p="black"){a.append("rect").attr("fill",p).attr("width",l).attr("height",l)}function h(p){const m=r(bi(p));return gct(m,t)}switch(e){case Qn.BarChart:{let p=function(x=!1){x&&a.append("rect").attr("fill","transparent").attr("width",l).attr("height",l).attr("stroke","black").attr("stroke-width",1.5),a.append("rect").attr("fill",pct).attr("width",v*g).attr("height",E=>+r(bi(E))).attr("y",E=>l-+r(bi(E))).attr("x",(l-v)/2)},m=function(x=!1){x&&a.append("rect").attr("fill","transparent").attr("width",l).attr("height",l).attr("stroke","black").attr("stroke-width",1.5),a.append("rect").attr("fill",mct).attr("width",v*(1-g)).attr("height",E=>+i(d(E))).attr("x",(l-v)/2+v*g).attr("y",E=>l-+i(d(E)))};const g=.5,v=l*.8;u&&c?(p(),m()):u?p(!0):c&&m(!0);break}case Qn.BarChartColor:{let p=function(x=!1){x&&a.append("rect").attr("fill","transparent").attr("width",l).attr("height",l).attr("stroke","black").attr("stroke-width",1.5),a.append("rect").attr("fill",E=>s(bi(E))).attr("width",v*g).attr("height",E=>+r(bi(E))).attr("y",E=>l-+r(bi(E))).attr("x",(l-v)/2)},m=function(x=!1){x&&a.append("rect").attr("fill","transparent").attr("width",l).attr("height",l).attr("stroke","black").attr("stroke-width",1.5),a.append("rect").attr("fill","grey").attr("width",v*(1-g)).attr("height",E=>+i(d(E))).attr("x",(l-v)/2+v*g).attr("y",E=>l-+i(d(E)))};const g=.5,v=l*.8;u&&c?(p(),m()):u?p(!0):c&&m(!0);break}case Qn.Bivariate:{a.append("rect").attr("fill","white").attr("width",l).attr("height",l),a.append("rect").attr("width",l).attr("height",l).attr("fill",p=>r(bi(p))).attr("opacity",p=>i(d(p)));break}case Qn.MarkAngle45:case Qn.MarkAngle45_90:case Qn.MarkAngle90:{let p=function(E="#CCCCCC"){a.append("rect").attr("fill",E).attr("width",m).attr("height",g).attr("x",v).attr("y",x).attr("transform",_=>`rotate(${-i(d(_))}, ${b}, ${b})`)};const m=l*.8,g=l*.2,b=l/2,v=(l-m)/2,x=(l-g)/2;u&&c?(f(E=>r(bi(E))),p(h)):u?f(E=>r(bi(E))):c&&(f(),p());break}case Qn.ColorAngle45:case Qn.ColorAngle90:{let p=function(E="black",_=!1){_&&a.append("rect").attr("fill","transparent").attr("width",l).attr("height",l).attr("stroke","black").attr("stroke-width",1.5),a.append("rect").attr("fill",E).attr("width",m).attr("height",g).attr("x",v).attr("y",x).attr("transform",C=>`rotate(${-i(d(C))}, ${b}, ${b})`)};const m=l*.8,g=l*.6,b=l/2,v=(l-m)/2,x=(l-g)/2;u&&c?p(E=>r(bi(E))):u?p(E=>r(bi(E)),!0):c&&p("black",!0);break}case Qn.MarkSize:{let p=function(m="#CCCCCC"){a.append("rect").attr("fill",m).attr("width",g=>+i(d(g))).attr("height",g=>+i(d(g))).attr("x",g=>(l-+i(d(g)))/2).attr("y",g=>(l-+i(d(g)))/2)};u&&c?(f(m=>r(bi(m))),p(h)):u?f(m=>r(bi(m))):c&&(f(),p());break}case Qn.CellSize:{u&&c?a.append("rect").attr("fill",p=>r(bi(p))).attr("width",p=>i(d(p))).attr("height",p=>i(d(p))).attr("x",p=>(l-+i(d(p)))/2).attr("y",p=>(l-+i(d(p)))/2):u?a.append("rect").attr("fill",p=>r(bi(p))).attr("width",l).attr("height",l):c&&a.append("rect").attr("fill","black").attr("width",p=>i(d(p))).attr("height",p=>i(d(p))).attr("x",p=>(l-+i(d(p)))/2).attr("y",p=>(l-+i(d(p)))/2);break}default:{a.append("rect").attr("width",l).attr("height",l).attr("fill",p=>r(bi(p)));break}}},[r,i,n,e,t])}const Yxe=Object.freeze(Object.defineProperty({__proto__:null,createLinearScale:Ah,createMarkScale:Vxe,useCellRenderer:Gxe},Symbol.toStringTag,{value:"Module"}));function yct(e,t){const n=Ah(t,0,1);let r;switch(e){case Pl.Viridis:r=n.map(i=>Nut(i)).reverse();break;case Pl.Cividis:r=n.map(i=>Iut(i)).reverse();break;case Pl.Warm:r=n.map(i=>Rut(i)).reverse();break;case Pl.Cool:r=n.map(i=>Dut(i)).reverse();break;case Pl.Plasma:r=n.map(i=>$ut(i)).reverse();break;case Pl.Inferno:r=n.map(i=>Out(i)).reverse();break;case Pl.Turbo:r=n.map(i=>Put(i)).reverse();break;case Pl.Blues:r=n.map(i=>Sut(i));break;case Pl.Oranges:r=n.map(i=>kut(i));break;default:r=n.map(i=>Tut(i));break}return r}function Kxe(e,t,n,r,i,s,o,a,l,u){const{meanScale:c,alternateScale:d}=D.useMemo(()=>{const h=Ah(l,n*.2,n*.9),p=yct(t,l),m=e===Qn.BarChart||e===Qn.BarChartColor?h:p,g=e===Qn.BarChart||e===Qn.BarChartColor?p:h;return{meanScale:K2().domain([r,i]).range(m),alternateScale:K2().domain([r,i]).range(g)}},[r,i,l,t,e,n]),f=D.useMemo(()=>{let h=[1];switch(e){case Qn.BarChartColor:case Qn.BarChart:{h=Ah(u,n*.2,n*.9),a&&(h=h.reverse());break}case Qn.Bivariate:{h=Ah(u,.2,1).reverse();break}case Qn.ColorAngle45:case Qn.MarkAngle45:{h=Ah(u);break}case Qn.ColorAngle90:case Qn.MarkAngle90:{h=Ah(u,0,90);break}case Qn.MarkAngle45_90:{h=Ah(u,90,45);break}case Qn.MarkSize:{h=Vxe(u,n*.8);break}case Qn.CellSize:{h=Ah(u,n*.3,n).reverse();break}}return K2().domain([s,o]).range(h)},[s,o,u,e,n,a]);return{meanScale:c,devScale:f,alternateScale:d}}const Xxe=Object.freeze(Object.defineProperty({__proto__:null,useCellScales:Kxe},Symbol.toStringTag,{value:"Module"}));function vct(e,t){return e-t}function bct(e){return typeof e=="function"?e:function(){return e}}function Lse(e,t){e=Math.abs(e),t=Math.abs(t);var n,r;e>t?(n=e,r=t):(n=t,r=e);var i=r/n;return n*Math.sqrt(1+i*i)}function wct(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function xct(){function e(t){for(var n=t.length,r=[],i=[],s=[],o=0;o<n;o++)r[o]=[],i[o]=[],s[o]=[];for(var a=!0,l=0;l<n;l++)for(var o=0;o<n;o++)if(t[o][l]!==t[l][o]){a=!1;break}if(a){for(var o=0;o<n;o++)r[o]=t[o].slice();Ect(i,s,r),_ct(i,s,r)}else{for(var u=[],o=0;o<n;o++)u[o]=t[o].slice();Tct(u,r),Cct(i,s,u,r)}for(var c=[],o=0;o<n;o++){for(var d=c[o]=[],l=0;l<n;l++)d[l]=o===l?i[o]:0;c[o][s[o]>0?o+1:o-1]=s[o]}return{D:c,V:r}}return e}function Ect(e,t,n){for(var r=n.length,i=0;i<r;i++)e[i]=n[r-1][i];for(var s=r-1;s>0;s--){for(var o=0,a=0,l=0;l<s;l++)o+=Math.abs(e[l]);if(o===0){t[s]=e[s-1];for(var i=0;i<s;i++)e[i]=n[s-1][i],n[s][i]=0,n[i][s]=0}else{for(var l=0;l<s;l++)e[l]/=o,a+=e[l]*e[l];var u=e[s-1],c=Math.sqrt(a);u>0&&(c=-c),t[s]=o*c,a=a-u*c,e[s-1]=u-c;for(var i=0;i<s;i++)t[i]=0;for(var i=0;i<s;i++){u=e[i],n[i][s]=u,c=t[i]+n[i][i]*u;for(var l=i+1;l<=s-1;l++)c+=n[l][i]*e[l],t[l]+=n[l][i]*u;t[i]=c}u=0;for(var i=0;i<s;i++)t[i]/=a,u+=t[i]*e[i];for(var d=u/(a+a),i=0;i<s;i++)t[i]-=d*e[i];for(var i=0;i<s;i++){u=e[i],c=t[i];for(var l=i;l<=s-1;l++)n[l][i]-=u*t[l]+c*e[l];e[i]=n[s-1][i],n[s][i]=0}}e[s]=a}for(var s=0;s<r-1;s++){n[r-1][s]=n[s][s],n[s][s]=1;var a=e[s+1];if(a!=0){for(var l=0;l<=s;l++)e[l]=n[l][s+1]/a;for(var i=0;i<=s;i++){for(var c=0,l=0;l<=s;l++)c+=n[l][s+1]*n[l][i];for(var l=0;l<=s;l++)n[l][i]-=c*e[l]}}for(var l=0;l<=s;l++)n[l][s+1]=0}for(var i=0;i<r;i++)e[i]=n[r-1][i],n[r-1][i]=0;n[r-1][r-1]=1,t[0]=0}function _ct(e,t,n){for(var r=n.length,i=1;i<r;i++)t[i-1]=t[i];t[r-1]=0;for(var s=0,o=0,a=1e-12,l=0;l<r;l++){o=Math.max(o,Math.abs(e[l])+Math.abs(t[l]));for(var u=l;u<r&&!(Math.abs(t[u])<=a*o);)u++;if(u>l)do{var c=e[l],d=(e[l+1]-c)/(2*t[l]),f=Lse(d,1);d<0&&(f=-f),e[l]=t[l]/(d+f),e[l+1]=t[l]*(d+f);for(var h=e[l+1],p=c-e[l],i=l+2;i<r;i++)e[i]-=p;s+=p,d=e[u];for(var m=1,g=m,b=m,v=t[l+1],x=0,E=0,i=u-1;i>=l;i--){b=g,g=m,E=x,c=m*t[i],p=m*d,f=Lse(d,t[i]),t[i+1]=x*f,x=t[i]/f,m=d/f,d=m*e[i]-x*c,e[i+1]=p+x*(m*c+x*e[i]);for(var _=0;_<r;_++)p=n[_][i+1],n[_][i+1]=x*n[_][i]+m*p,n[_][i]=m*n[_][i]-x*p}d=-x*E*b*v*t[l]/h,t[l]=x*d,e[l]=m*d}while(Math.abs(t[l])>a*o);e[l]=e[l]+s,t[l]=0}for(var i=0;i<r-1;i++){for(var _=i,d=e[i],C=i+1;C<r;C++)e[C]<d&&(_=C,d=e[C]);if(_!=i){e[_]=e[i],e[i]=d;for(var C=0;C<r;C++)d=n[C][i],n[C][i]=n[C][_],n[C][_]=d}}}function Tct(e,t){for(var n=e.length,r=[],i=0,s=n-1,o=i+1;o<s;o++){for(var a=0,l=o;l<=s;l++)a+=Math.abs(e[l][o-1]);if(a!==0){for(var u=0,l=s;l>=o;l--)r[l]=e[l][o-1]/a,u+=r[l]*r[l];var c=Math.sqrt(u);r[o]>0&&(c=-c),u=u-r[o]*c,r[o]=r[o]-c;for(var d=o;d<n;d++){for(var f=0,l=s;l>=o;l--)f+=r[l]*e[l][d];f/=u;for(var l=o;l<=s;l++)e[l][d]-=f*r[l]}for(var l=0;l<=s;l++){for(var f=0,d=s;d>=o;d--)f+=r[d]*e[l][d];f/=u;for(var d=o;d<=s;d++)e[l][d]-=f*r[d]}r[o]=a*r[o],e[o][o-1]=a*c}}for(var l=0;l<n;l++)for(var d=0;d<n;d++)t[l][d]=l===d?1:0;for(var o=s-1;o>=i+1;o--)if(e[o][o-1]!==0){for(var l=o+1;l<=s;l++)r[l]=e[l][o-1];for(var d=o;d<=s;d++){for(var c=0,l=o;l<=s;l++)c+=r[l]*t[l][d];c=c/r[o]/e[o][o-1];for(var l=o;l<=s;l++)t[l][d]+=c*r[l]}}}function Cct(e,t,n,r){for(var i=n.length,s=i-1,o=0,a=i-1,l=1e-12,u=0,c=0,d=0,f=0,h=0,p=0,m,g,b,v,x=0,E=0;E<i;E++){(E<o||E>a)&&(e[E]=n[E][E],t[E]=0);for(var _=Math.max(E-1,0);_<i;_++)x+=Math.abs(n[E][_])}for(var C=0;s>=o;){for(var S=s;S>o&&(h=Math.abs(n[S-1][S-1])+Math.abs(n[S][S]),h===0&&(h=x),!(Math.abs(n[S][S-1])<l*h));)S--;if(S===s)n[s][s]=n[s][s]+u,e[s]=n[s][s],t[s]=0,s--,C=0;else if(S===s-1){if(g=n[s][s-1]*n[s-1][s],c=(n[s-1][s-1]-n[s][s])/2,d=c*c+g,p=Math.sqrt(Math.abs(d)),n[s][s]=n[s][s]+u,n[s-1][s-1]=n[s-1][s-1]+u,b=n[s][s],d>=0){p=c+(c>=0?p:-p),e[s-1]=b+p,e[s]=e[s-1],p!==0&&(e[s]=b-g/p),t[s-1]=0,t[s]=0,b=n[s][s-1],h=Math.abs(b)+Math.abs(p),c=b/h,d=p/h,f=Math.sqrt(c*c+d*d),c/=f,d/=f;for(var _=s-1;_<i;_++)p=n[s-1][_],n[s-1][_]=d*p+c*n[s][_],n[s][_]=d*n[s][_]-c*p;for(var E=0;E<=s;E++)p=n[E][s-1],n[E][s-1]=d*p+c*n[E][s],n[E][s]=d*n[E][s]-c*p;for(var E=o;E<=a;E++)p=r[E][s-1],r[E][s-1]=d*p+c*r[E][s],r[E][s]=d*r[E][s]-c*p}else e[s-1]=b+c,e[s]=b+c,t[s-1]=p,t[s]=-p;s=s-2,C=0}else{if(b=n[s][s],v=0,g=0,S<s&&(v=n[s-1][s-1],g=n[s][s-1]*n[s-1][s]),C==10){u+=b;for(var E=o;E<=s;E++)n[E][E]-=b;h=Math.abs(n[s][s-1])+Math.abs(n[s-1][s-2]),b=v=.75*h,g=-.4375*h*h}if(C==30&&(h=(v-b)/2,h=h*h+g,h>0)){h=Math.sqrt(h),v<b&&(h=-h),h=b-g/((v-b)/2+h);for(var E=o;E<=s;E++)n[E][E]-=h;u+=h,b=v=g=.964}C++;for(var k=s-2;k>=S&&(p=n[k][k],f=b-p,h=v-p,c=(f*h-g)/n[k+1][k]+n[k][k+1],d=n[k+1][k+1]-p-f-h,f=n[k+2][k+1],h=Math.abs(c)+Math.abs(d)+Math.abs(f),c=c/h,d=d/h,f=f/h,!(k==S||Math.abs(n[k][k-1])*(Math.abs(d)+Math.abs(f))<l*(Math.abs(c)*(Math.abs(n[k-1][k-1])+Math.abs(p)+Math.abs(n[k+1][k+1])))));)k--;for(var E=k+2;E<=s;E++)n[E][E-2]=0,E>k+2&&(n[E][E-3]=0);for(var R=k;R<=s-1;R++){var O=R!=s-1;if(R!=k&&(c=n[R][R-1],d=n[R+1][R-1],f=O?n[R+2][R-1]:0,b=Math.abs(c)+Math.abs(d)+Math.abs(f),b!=0&&(c/=b,d/=b,f/=b)),b==0)break;if(h=Math.sqrt(c*c+d*d+f*f),c<0&&(h=-h),h!=0){R!=k?n[R][R-1]=-h*b:S!=k&&(n[R][R-1]=-n[R][R-1]),c+=h,b=c/h,v=d/h,p=f/h,d/=c,f/=c;for(var _=R;_<i;_++)c=n[R][_]+d*n[R+1][_],O&&(c=c+f*n[R+2][_],n[R+2][_]=n[R+2][_]-c*p),n[R][_]=n[R][_]-c*b,n[R+1][_]=n[R+1][_]-c*v;for(var E=0;E<=Math.min(s,R+3);E++)c=b*n[E][R]+v*n[E][R+1],O&&(c+=p*n[E][R+2],n[E][R+2]=n[E][R+2]-c*f),n[E][R]=n[E][R]-c,n[E][R+1]=n[E][R+1]-c*d;for(var E=o;E<=a;E++)c=b*r[E][R]+v*r[E][R+1],O&&(c=c+p*r[E][R+2],r[E][R+2]=r[E][R+2]-c*f),r[E][R]=r[E][R]-c,r[E][R+1]=r[E][R+1]-c*d}}}}if(x!=0){for(s=i-1;s>=0;s--)if(c=e[s],d=t[s],d==0){var S=s;n[s][s]=1;for(var E=s-1;E>=0;E--){g=n[E][E]-c,f=0;for(var _=S;_<=s;_++)f=f+n[E][_]*n[_][s];if(t[E]<0)p=g,h=f;else if(S=E,t[E]===0?n[E][s]=-f/(g!==0?g:l*x):(b=n[E][E+1],v=n[E+1][E],d=(e[E]-c)*(e[E]-c)+t[E]*t[E],m=(b*h-p*f)/d,n[E][s]=m,Math.abs(b)>Math.abs(p)?n[E+1][s]=(-f-g*m)/b:n[E+1][s]=(-h-v*m)/p),m=Math.abs(n[E][s]),l*m*m>1)for(var _=E;_<=s;_++)n[_][s]=n[_][s]/m}}else if(d<0){var S=s-1;if(Math.abs(n[s][s-1])>Math.abs(n[s-1][s]))n[s-1][s-1]=d/n[s][s-1],n[s-1][s]=-(n[s][s]-c)/n[s][s-1];else{var N=Vk(0,-n[s-1][s],n[s-1][s-1]-c,d);n[s-1][s-1]=N[0],n[s-1][s]=N[1]}n[s][s-1]=0,n[s][s]=1;for(var E=s-2;E>=0;E--){for(var L=0,$=0,B,H,_=S;_<=s;_++)L=L+n[E][_]*n[_][s-1],$=$+n[E][_]*n[_][s];if(g=n[E][E]-c,t[E]<0)p=g,f=L,h=$;else{if(S=E,t[E]==0){var N=Vk(-L,-$,g,d);n[E][s-1]=N[0],n[E][s]=N[1]}else{b=n[E][E+1],v=n[E+1][E],B=(e[E]-c)*(e[E]-c)+t[E]*t[E]-d*d,H=(e[E]-c)*2*d,B==0&H==0&&(B=l*x*(Math.abs(g)+Math.abs(d)+Math.abs(b)+Math.abs(v)+Math.abs(p)));var N=Vk(b*f-p*L+d*$,b*h-p*$-d*L,B,H);if(n[E][s-1]=N[0],n[E][s]=N[1],Math.abs(b)>Math.abs(p)+Math.abs(d))n[E+1][s-1]=(-L-g*n[E][s-1]+d*n[E][s])/b,n[E+1][s]=(-$-g*n[E][s]-d*n[E][s-1])/b;else{var N=Vk(-f-v*n[E][s-1],-h-v*n[E][s],p,d);n[E+1][s-1]=N[0],n[E+1][s]=N[1]}}if(m=Math.max(Math.abs(n[E][s-1]),Math.abs(n[E][s])),l*m*m>1)for(var _=E;_<=s;_++)n[_][s-1]=n[_][s-1]/m,n[_][s]=n[_][s]/m}}}for(var E=0;E<i;E++)if(E<o||E>a)for(var _=E;_<i;_++)r[E][_]=n[E][_];for(var _=i-1;_>=o;_--)for(var E=o;E<=a;E++){p=0;for(var R=o;R<=Math.min(_,a);R++)p+=r[E][R]*n[R][_];r[E][_]=p}}}function Vk(e,t,n,r){if(Math.abs(n)>Math.abs(r)){var i=r/n,s=n+i*r;return[(e+i*t)/s,(t-i*e)/s]}else{var i=n/r,s=r+i*n;return[(i*e+t)/s,(i*t-e)/s]}}function Sct(e){var t=e[0].concat(e[1]).concat(e[2]).concat(e[3]);return t[12]*t[9]*t[6]*t[3]-t[8]*t[13]*t[6]*t[3]-t[12]*t[5]*t[10]*t[3]+t[4]*t[13]*t[10]*t[3]+t[8]*t[5]*t[14]*t[3]-t[4]*t[9]*t[14]*t[3]-t[12]*t[9]*t[2]*t[7]+t[8]*t[13]*t[2]*t[7]+t[12]*t[1]*t[10]*t[7]-t[0]*t[13]*t[10]*t[7]-t[8]*t[1]*t[14]*t[7]+t[0]*t[9]*t[14]*t[7]+t[12]*t[5]*t[2]*t[11]-t[4]*t[13]*t[2]*t[11]-t[12]*t[1]*t[6]*t[11]+t[0]*t[13]*t[6]*t[11]+t[4]*t[1]*t[14]*t[11]-t[0]*t[5]*t[14]*t[11]-t[8]*t[5]*t[2]*t[15]+t[4]*t[9]*t[2]*t[15]+t[8]*t[1]*t[6]*t[15]-t[0]*t[9]*t[6]*t[15]-t[4]*t[1]*t[10]*t[15]+t[0]*t[5]*t[10]*t[15]}function Qxe(e,t){for(var n=0,r=-1,i=Math.min(e.length,t.length);++r<i;)n+=e[r]*t[r];return n}function Jxe(e,t){t||(t=1e-10);for(var n=e.length,r=e[0].length,i=-1,s,o;++i<n;){var a=i;for(s=i;++s<n;)Math.abs(e[s][i])>Math.abs(e[a][i])&&(a=s);var l=e[i];if(e[i]=e[a],e[a]=l,Math.abs(e[i][i])<=t)return!1;for(s=i;++s<n;){var u=e[s][i]/e[i][i];for(o=i-1;++o<r;)e[s][o]-=e[i][o]*u}}for(i=n;--i>=0;){var u=e[i][i];for(s=-1;++s<i;)for(o=r;--o>=i;)e[s][o]-=e[i][o]*e[s][i]/u;for(e[i][i]/=u,o=n-1;++o<r;)e[i][o]/=u}return!0}function Act(e){var t=e.length,n=-1;if(t===e[0].length){for(e=e.map(function(r,i){for(var s=new Array(t),o=-1;++o<t;)s[o]=i===o?1:0;return r.concat(s)}),Jxe(e);++n<t;)e[n]=e[n].slice(t);return e}}function Zxe(e){return Math.sqrt(Qxe(e,e))}function kct(e,t){var n=e.length,r=t[0].length,i=t.length,s=-1,o,a;if(i!==e[0].length)throw{error:"columns(a) != rows(b); "+e[0].length+" != "+i};for(var l=new Array(n);++s<n;)for(l[s]=new Array(r),o=-1;++o<r;){var u=0;for(a=-1;++a<i;)u+=e[s][a]*t[a][o];l[s][o]=u}return l}function Ict(e){var t=Zxe(e);return e.map(function(n){return n/t})}function Rct(e){for(var t=e.length,n=e[0].length,r=-1,i,s=new Array(n);++r<n;)for(s[r]=new Array(t),i=-1;++i<t;)s[r][i]=e[i][r];return s}function Dct(e,t,n,r,i,s){var o,a;for(o=1;o<s;o++)a=e[o]/t[o-1],t[o]-=a*n[o-1],r[o]-=a*r[o-1];for(i[s-1]=r[s-1]/t[s-1],o=s-2;o>=0;o--)i[o]=(r[o]-n[o]*i[o+1])/t[o]}var Pct=Object.freeze({cross:wct,decompose:xct,determinant:Sct,dot:Qxe,gaussjordan:Jxe,inverse:Act,length:Zxe,multiply:kct,normalize:Ict,transpose:Rct,tridag:Dct});function eV(e){var t=.254829592,n=-.284496736,r=1.421413741,i=-1.453152027,s=1.061405429,o=.3275911,a=e<0?-1:1;e<0&&(a=-1,e=-e);var l=1/(1+o*e);return a*(1-((((s*l+i)*l+r)*l+n)*l+t)*l*Math.exp(-e*e))}function Nct(){var e=Math.random,t=0,n=1,r=1;function i(){var s,o,a;do s=2*e()-1,o=2*e()-1,a=s*s+o*o;while(a>=1||a===0);return t+n*s*Math.sqrt(-2*Math.log(a)/a)}return i.pdf=function(s){return s=(s-t)/n,Oct*Math.exp(-.5*s*s)/n},i.cdf=function(s){return s=(s-t)/n,.5*(1+eV(s/Math.SQRT2))},i.mean=function(s){return arguments.length?(t=+s,i):t},i.variance=function(s){return arguments.length?(n=Math.sqrt(r=+s),i):r},i.random=function(s){return arguments.length?(e=s,i):e},i}var Oct=1/Math.sqrt(2*Math.PI),$ct=Object.freeze({gaussian:Nct});function eEe(e){var t=e.length;if(t===0)return NaN;for(var n=0,r=-1;++r<t;)n+=(e[r]-n)/(r+1);return n}function tV(e){var t=e.length;if(t<1)return NaN;if(t===1)return 0;for(var n=eEe(e),r=-1,i=0;++r<t;){var s=e[r]-n;i+=s*s}return i/(t-1)}function nV(e,t){e=e.slice().sort(vct);var n=e.length-1;return t.map(function(r){if(r===0)return e[0];if(r===1)return e[n];var i=1+r*n,s=Math.floor(i),o=i-s,a=e[s-1];return o===0?a:a+o*(e[s]-a)})}function rV(e){var t=nV(e,[.25,.75]);return t[1]-t[0]}function Mct(e){var t,n=Math.sqrt(tV(e));return(t=Math.min(n,rV(e)/1.34))||(t=n)||(t=Math.abs(e[1]))||(t=1),.9*t*Math.pow(e.length,-.2)}function tEe(e){var t=rV(e)/1.34;return 1.06*Math.min(Math.sqrt(tV(e)),t)*Math.pow(e.length,-1/5)}var Lct=Object.freeze({nrd0:Mct,nrd:tEe});function iV(e,t){for(var n=e.length,r=-1,i=0,s;++r<n;)s=e[r]-t[r],i+=s*s;return Math.sqrt(i)}function Fct(e,t){for(var n=e.length,r=-1,i=0;++r<n;)i+=Math.abs(e[r]-t[r]);return i}function jct(e){return function(t,n){for(var r=t.length,i=-1,s=0;++i<r;)s+=Math.pow(Math.abs(t[i]-n[i]),e);return Math.pow(s,1/e)}}function Bct(e,t){for(var n=e.length,r=-1,i=0,s;++r<n;)s=Math.abs(e[r]-t[r]),s>i&&(i=s);return i}function zct(e,t){for(var n=e.length,r=-1,i=0;++r<n;)e[r]!==t[r]&&i++;return i}function Uct(e,t){for(var n=e.length,r=-1,i=0;++r<n;)e[r]===t[r]&&i++;return i/n}function qct(e,t){for(var n=e.length,r=-1,i=0,s=0,o,a;++r<n;)o=e[r],a=t[r],i+=Math.abs(o-a),s+=Math.abs(o+a);return i/s}var Hct=Object.freeze({euclidean:iV,manhattan:Fct,minkowski:jct,chebyshev:Bct,hamming:zct,jaccard:Uct,braycurtis:qct});function Wct(){var e=iV,t="single";function n(r){var i=r.length,s=[],o=[],a=[],l=[],u,c,d,f,h,p,m,g;for(m=-1;++m<i;)for(s[m]=0,a[m]=[],g=-1;++g<i;)a[m][g]=m===g?1/0:e(r[m],r[g]),a[m][s[m]]>a[m][g]&&(s[m]=g);for(m=-1;++m<i;)l[m]=[],l[m][0]={left:null,right:null,dist:0,centroid:r[m],size:1,depth:0},o[m]=1;for(h=0;h<i-1;h++){for(u=0,m=0;m<i;m++)a[m][s[m]]<a[u][s[u]]&&(u=m);c=s[u],d=l[u][0],f=l[c][0];var b={left:d,right:f,dist:a[u][c],centroid:Vct(d.size,d.centroid,f.size,f.centroid),size:d.size+f.size,depth:1+Math.max(d.depth,f.depth)};for(l[u].splice(0,0,b),o[u]+=o[c],g=0;g<i;g++)switch(t){case"single":a[u][g]>a[c][g]&&(a[g][u]=a[u][g]=a[c][g]);break;case"complete":a[u][g]<a[c][g]&&(a[g][u]=a[u][g]=a[c][g]);break;case"average":a[g][u]=a[u][g]=(o[u]*a[u][g]+o[c]*a[c][g])/(o[u]+o[g]);break}for(a[u][u]=1/0,m=0;m<i;m++)a[m][c]=a[c][m]=1/0;for(g=0;g<i;g++)s[g]==c&&(s[g]=u),a[u][g]<a[u][s[u]]&&(s[u]=g);p=b}return p}return n.distance=function(r){return arguments.length?(e=r,n):e},n}function Vct(e,t,n,r){for(var i=[],s=e+n,o=t.length,a=-1;++a<o;)i[a]=(e*t[a]+n*r[a])/s;return i}function Gct(e){return e<=1&&e>=-1?.5:0}function Yct(e){return e<=1&&e>=-1?1-Math.abs(e):0}function Kct(e){return e<=1&&e>=-1?.75*(1-e*e):0}function Xct(e){if(e<=1&&e>=-1){var t=1-e*e;return 15/16*t*t}return 0}function Qct(e){if(e<=1&&e>=-1){var t=1-e*e;return 35/32*t*t*t}return 0}function nEe(e){return 1/Math.sqrt(2*Math.PI)*Math.exp(-.5*e*e)}function Jct(e){return e<=1&&e>=-1?Math.PI/4*Math.cos(Math.PI/2*e):0}var Zct=Object.freeze({uniform:Gct,triangular:Yct,epanechnikov:Kct,quartic:Xct,triweight:Qct,gaussian:nEe,cosine:Jct});function edt(){var e=nEe,t=[],n=tEe;function r(i,s){var o=n.call(this,t);return i.map(function(a){for(var l=-1,u=0,c=t.length;++l<c;)u+=e((a-t[l])/o);return[a,u/o/c]})}return r.kernel=function(i){return arguments.length?(e=i,r):e},r.sample=function(i){return arguments.length?(t=i,r):t},r.bandwidth=function(i){return arguments.length?(n=bct(i),r):n},r}function tdt(){var e=iV,t=1e3,n=1;function r(i){for(var s=i.length,o=[],a=[],l=1,u=0,c=ndt(n,i),d,f,h,p,m,g,b;l&&u<t;){for(h=-1;++h<n;)a[h]=0;for(f=-1;++f<s;){for(p=i[f],g=1/0,h=-1;++h<n;)m=e.call(this,c[h],p),m<g&&(g=m,b=h);a[o[f]=b]++}for(d=[],f=-1;++f<s;)if(p=o[f],m=d[p],m==null)d[p]=i[f].slice();else for(h=-1;++h<m.length;)m[h]+=i[f][h];for(h=-1;++h<n;)for(p=d[h],m=1/a[h],f=-1;++f<p.length;)p[f]*=m;for(l=0,h=-1;++h<n;)if(!rEe(d[h],c[h])){l=1;break}c=d,u++}return{assignments:o,centroids:c}}return r.k=function(i){return arguments.length?(n=i,r):n},r.distance=function(i){return arguments.length?(e=i,r):e},r}function rEe(e,t){if(!e||!t||e.length!==t.length)return!1;for(var n=e.length,r=-1;++r<n;)if(e[r]!==t[r])return!1;return!0}function ndt(e,t){var n=t.length;if(e>n)return null;for(var r=[],i=[],s={},o=0,a=0,l,u,c;a<e;){if(o===n)return null;var d=Math.floor(Math.random()*n);if(!(d in s)){for(s[d]=1,o++,u=t[d],c=!0,l=0;l<a;l++)if(rEe(u,r[l])){c=!1;break}c&&(r[a]=u,i[a]=d,a++)}}return r}function iEe(e){return nV(e,[.5])[0]}function rdt(){var e=.3,t=2,n=1e-12;function r(i,s,o){var a=i.length,l;if(a!==s.length)throw{error:"Mismatched array lengths"};if(a==0)throw{error:"At least one point required."};if(arguments.length<3)for(o=[],l=-1;++l<a;)o[l]=1;if(yL(i),yL(s),yL(o),idt(i),a==1)return[s[0]];if(a==2)return[s[0],s[1]];var u=Math.floor(e*a);if(u<2)throw{error:"Bandwidth too small."};var c=[],d=[],f=[];for(l=-1;++l<a;)c[l]=0,d[l]=0,f[l]=1;for(var h=-1;++h<=t;){var p=[0,u-1],m;for(l=-1;++l<a;){m=i[l],l>0&&odt(i,o,l,p);for(var g=p[0],b=p[1],v=i[l]-i[g]>i[b]-i[l]?g:b,x=0,E=0,_=0,C=0,S=0,k=Math.abs(1/(i[v]-m)),R=g;R<=b;++R){var O=i[R],N=s[R],L=R<l?m-O:O-m,V=sdt(L*k)*f[R]*o[R],$=O*V;x+=V,E+=$,_+=O*$,C+=N*V,S+=N*$}var B=E/x,H=C/x,Y=S/x,J=_/x,K=Math.sqrt(Math.abs(J-B*B))<n?0:(Y-B*H)/(J-B*B),Z=H-K*B;c[l]=K*m+Z,d[l]=Math.abs(s[l]-c[l])}if(h===t)break;var U=iEe(d);if(Math.abs(U)<n)break;var j,V;for(l=-1;++l<a;)j=d[l]/(6*U),f[l]=j>=1?0:(V=1-j*j)*V}return c}return r.bandwidth=function(i){return arguments.length?(e=i,r):i},r.robustnessIterations=function(i){return arguments.length?(t=i,r):i},r.accuracy=function(i){return arguments.length?(n=i,r):i},r}function yL(e){for(var t=e.length,n=-1;++n<t;)if(!isFinite(e[n]))return!1;return!0}function idt(e){for(var t=e.length,n=0;++n<t;)if(e[n-1]>=e[n])return!1;return!0}function sdt(e){return(e=1-e*e*e)*e*e}function odt(e,t,n,r){var i=r[0],s=r[1],o=Fse(t,s);if(o<e.length&&e[o]-e[n]<e[n]-e[i]){var a=Fse(t,i);r[0]=a,r[1]=o}}function Fse(e,t){for(var n=t+1;n<e.length&&e[n]===0;)n++;return n}function adt(e){for(var t={},n=[],r=0,i=e.length,s=-1,o,a;++s<i;)a=t.hasOwnProperty(o=e[s])?++t[o]:t[o]=1,a===r?n.push(o):a>r&&(r=a,n=[o]);if(n.length===1)return n[0]}function ldt(e){return .5*(1+eV(e/Math.SQRT2))}var udt=Hct,cdt=Zct,ddt=$ct,fdt=Lct,hdt=Object.freeze({distance:udt,kernel:cdt,distribution:ddt,bandwidth:fdt,erf:eV,hcluster:Wct,iqr:rV,kde:edt,kmeans:tdt,loess:rdt,mean:eEe,median:iEe,mode:adt,phi:ldt,quantiles:nV,variance:tV}),pdt=Pct,mdt=hdt;function gdt(e,t,n=1){arguments.length<2&&(t=e,e=0);const r=[];let i=e;if(n<0)for(;i>t;i+=n)r.push(i);else for(;i<t;i+=n)r.push(i);return r}const ydt=gdt,{dot:vdt,length:bdt,normalize:gqt,transpose:yqt}=pdt,{mean:vqt}=mdt;function wdt(e){return ydt(0,e.length).sort((t,n)=>e[t]-e[n])}function xdt(e,t,n){const r=e.length;let i=0;for(let s=0;s<r;s++)i+=e[s][t]*e[s][n];return i}function Edt(e){const t=e[0].length,n=Array(t);for(let r=0;r<t;r++)n[r]=Array(t);for(let r=0;r<t;r++)for(let i=r;i<t;i++)n[r][i]=n[i][r]=xdt(e,r,i);return n}function _dt(e,t){if(!e)throw console.log(t),t}function V0(e,t){return!(isNaN(e)||isNaN(t)||e==1/0||t==1/0)}const Yu={};Yu.euclidean=function(e,t){let n=0;for(let r=e.length-1;r>=0;r--)if(V0(e[r],t[r])){const i=e[r]-t[r];n+=i*i}return Math.sqrt(n)};Yu.manhattan=function(e,t){let n=0;for(let r=e.length-1;r>=0;r--)V0(e[r],t[r])&&(n+=Math.abs(e[r]-t[r]));return n};Yu.minkowski=function(e){return(t,n)=>{let r=0;for(let i=t.length-1;i>=0;i--)V0(t[i],n[i])&&(r+=Math.pow(Math.abs(t[i]-n[i]),e));return Math.pow(r,1/e)}};Yu.chebyshev=function(e,t){let n=0;for(let r=e.length-1;r>=0;r--)if(V0(e[r],t[r])){const i=Math.abs(e[r]-t[r]);i>n&&(n=i)}return n};Yu.hamming=function(e,t){let n=0;for(let r=e.length-1;r>=0;r--)V0(e[r],t[r])&&e[r]!==t[r]&&n++;return n};Yu.jaccard=function(e,t){let n=0,r=0;for(let i=e.length-1;i>=0;i--)V0(e[i],t[i])&&(e[i]===t[i]&&r++,n++);return n===0?0:r/n};Yu.braycurtis=function(e,t){let n=0,r=0;for(let i=e.length-1;i>=0;i--){const s=e[i],o=t[i];V0(s,o)&&(n+=Math.abs(s-o),r+=Math.abs(s+o))}return r===0?0:n/r};Yu.morans=function(e){let t=0;const n=e.length*e[0].length;for(let r=0;r<e.length;r++)for(let i=0;i<e[0].length;i++)t+=e[r][i];return(r,i)=>{let s=0;for(let o=0;o<r.length;o++)V0(r[o],i[o])&&(s+=(r[o]*n-t)*(i[o]*n-t));return-1*s}};function Tdt(){let e=Yu.euclidean;function t(n){const r=n.length,i=[];for(let s=0;s<r;s++){const o=[];i[s]=o;for(let a=0;a<r;a++)a<s?o.push(i[a][s]):s===a?o.push(0):o.push(e(n[s],n[a]))}return i}return t.distance=function(n){return arguments.length?(e=n,t):e},t}function Cdt(e,t,n){const r=Array(e);if(arguments.length==1)for(;e;)r[--e]=Math.random();else if(arguments.length==2)for(;e;)r[--e]=Math.random()*t;else for(;e;)r[--e]=t+Math.random()*(n-t);return r}function jse(e){const t=bdt(e);let n=e.length;if(t===0||Math.abs(t-1)<1e-9)return 1;for(;n-- >0;)e[n]/=t;return t}function Sdt(e,t,n){t||(t=1e-9);const r=e.length;let i,s=Array(r),o=100;for(_dt(r==e[0].length,"poweriteration needs a square matrix"),i=Cdt(r),jse(i);o-- >0;){for(let l=0;l<r;l++){s[l]=0;for(let u=0;u<r;u++)s[l]+=e[l][u]*i[u]}if(jse(s),vdt(s,i)>1-t)break;const a=s;s=i,i=a}return s}function Adt(e,t){let n=t.length;const r=e.slice();for(;n--;)r[n]=e[t[n]];return r}function kdt(){let e=Yu.euclidean,t="single",n=null;function r(i){const s=i.length,o=[],a=[],l=[];let u,c=0;if(n===null){n=[];let f=-1;for(;++f<s;){o[f]=0,n[f]=[];let h=-1;for(;++h<s;)n[f][h]=f===h?1/0:e(i[f],i[h]),n[f][o[f]]>n[f][h]&&(o[f]=h)}}else{if(n.length<s||n[0].length<s)throw{error:`Provided distance matrix length ${n.length} instead of ${s}`};let f=-1;for(;++f<s;){o[f]=0;let h=-1;for(;++h<s;)f===h&&(n[f][h]=1/0),n[f][o[f]]>n[f][h]&&(o[f]=h)}}let d=-1;for(;++d<s;)d!=c&&console.log("i = %d, id = %d",d,c),l[d]={left:null,right:null,dist:0,centroid:i[d],id:c++,size:1,depth:0},a[d]=1;for(let f=0;f<s-1;f++){let h=0;for(d=0;d<s;d++)n[d][o[d]]<n[h][o[h]]&&(h=d);const p=o[h],m=l[h],g=l[p],b={left:m,right:g,dist:n[h][p],centroid:Idt(m.size,m.centroid,g.size,g.centroid),id:c++,size:m.size+g.size,depth:1+Math.max(m.depth,g.depth)};l[h]=b;for(let v=0;v<s;v++)if(!(v===h||v===p))switch(t){case"single":n[h][v]>n[p][v]&&(n[v][h]=n[h][v]=n[p][v]);break;case"complete":n[h][v]<n[p][v]&&(n[v][h]=n[h][v]=n[p][v]);break;case"average":n[v][h]=n[h][v]=(a[h]*n[h][v]+a[p]*n[p][v])/(a[h]+a[p]);break}a[h]+=a[p];for(let v=0;v<s;v++)n[v][p]=n[p][v]=1/0;for(let v=0;v<s;v++){if(t==="single")o[v]===p&&(o[v]=h);else if(o[v]===p||o[v]===h)for(let x=0;x<s;x++)n[v][x]<n[v][o[v]]&&(o[v]=x);n[h][v]<n[h][o[h]]&&(o[h]=v)}u=b}return u}return r.linkage=function(i){return arguments.length?(t=i,r):t},r.distance=function(i){return arguments.length?(e=i,r):e},r.distanceMatrix=function(i){return arguments.length?(n=i.map(s=>s.slice(0)),r):n},r}function Idt(e,t,n,r){const i=[],s=e+n,o=t.length;let a=-1;for(;++a<o;)i[a]=(e*t[a]+n*r[a])/s;return i}function Rdt(e){const t=e.length;if(t===0)return NaN;const n=e[0].length,r=e[0].slice(0);let i=0;for(;++i<t;){const s=e[i];for(let o=0;o<n;o++)r[o]+=(s[o]-r[o])/(i+1)}return r}function Ddt(){let e=null,t=Yu.euclidean,n="complete",r={},i={};function s(d){return d===null?[]:d.id in r?r[d.id]:r[d.id]=o(d)}function o(d){return d===null?[]:d.depth===0?[d.id]:s(d.left).concat(s(d.right))}function a(d,f,h){const p=`k${d.id}-${f}-${h}`;return p in i?i[p]:i[p]=l(d,f,h)}function l(d,f,h){if(d.depth===0)return[0,[d.id]];const p=d.left,m=d.right,g=s(p),b=s(m);let v,x;if(g.includes(f)&&b.includes(h))v=p,x=m;else if(b.includes(f)&&g.includes(h))v=m,x=p;else throw{error:`Node is not common ancestor of ${f}, ${h}`};const E=s(v.left),_=s(v.right);let C=_.includes(f)?E:_;C.length===0&&(C=[f]);const S=s(x.left),k=s(x.right);let R=k.includes(h)?S:k;R.length===0&&(R=[h]);let O=1/0,N=[];for(let L=0;L<C.length;L++){const $=a(v,f,C[L]);for(let B=0;B<R.length;B++){const H=a(x,R[B],h),Y=$[0]+e[C[L]][R[B]]+H[0];Y<O&&(O=Y,N=$[1].concat(H[1]))}}return[O,N]}function u(d){r={},i={};let f=1/0,h=[];const p=s(d.left),m=s(d.right);for(let g=0;g<p.length;g++)for(let b=0;b<m.length;b++){const v=a(d,p[g],m[b]);v[0]<f&&(f=v[0],h=v[1])}return e=null,h}function c(d){e===null&&(e=Tdt().distance(t)(d));const f=kdt().linkage(n).distanceMatrix(e);return u(f(d))}return c.order=u,c.reorder=c,c.distance=function(d){return arguments.length?(t=d,e=null,c):t},c.linkage=function(d){return arguments.length?(n=d,c):n},c.distance_matrix=function(d){return arguments.length?(e=d.map(f=>f.slice(0)),c):e},c.distanceMatrix=c.distance_matrix,c}function Pdt(e){const t=e.length;if(t===0)return null;const n=Rdt(e),r=n.length,i=Array(t);for(let s=0;s<t;s++){const o=e[s].slice(0);for(let a=0;a<r;a++)o[a]-=n[a];i[s]=o}return i}function Ndt(e,t){if(e.length===0)return null;e=Pdt(e);const n=Edt(e);return Sdt(n,t)}function Odt(e,t){return wdt(Ndt(e,t))}function $dt(e,t){let n=bi;e==="snr"?n=ZW:e==="std"&&(n=Qy);const r=Array.from(new Set(t.flatMap(({origin:o,destination:a})=>[o,a]))),i=new Map(r.map((o,a)=>[o,a])),s=Array.from({length:r.length},()=>Array(r.length).fill(0));return t.forEach(o=>{const{origin:a,destination:l}=o,u=n(o)||0;s[i.get(a)][i.get(l)]=u}),{matrix:s,nodes:r}}function sEe(e,t,n){const{matrix:r,nodes:i}=$dt(t,n);let s,o;return e==="optimal"?(s=Ddt(),s.distance(Yu.euclidean),s.linkage("complete"),o=s(r)):(s=Odt,o=s(r)),Adt(i,o)}function oEe(e,t,n){const[r,i]=D.useState(null),[s,o]=D.useState(null);return D.useLayoutEffect(()=>{if(e.length>1){let a;t==="none"?a=null:a=sEe(t,n,e),i(a),o(a)}},[e,t,n]),{orderedOrigins:r,orderedDestinations:s,setOrderedOrigins:i,setOrderedDestinations:o}}const aEe=Object.freeze(Object.defineProperty({__proto__:null,getClusterOrder:sEe,useOrderingState:oEe},Symbol.toStringTag,{value:"Module"}));function lEe(e){const[t,n]=D.useState([]),[r,i]=D.useState(null),[s,o]=D.useState([]),[a,l]=D.useState(null),[u,c]=D.useState(null);return D.useEffect(()=>{e&&(n(e.answerNodes),i(e.orderingNode),o(e.linkMarks),c(e.originHighlight),l(e.destinationHighlight))},[e]),{destinationHighlight:a,setDestinationHighlight:l,originHighlight:u,setOriginHighlight:c,answerNodes:t,setAnswerNodes:n,orderingNode:r,setOrderingNode:i,linkMarks:s,setLinkMarks:o}}const uEe=Object.freeze(Object.defineProperty({__proto__:null,useReplayState:lEe},Symbol.toStringTag,{value:"Module"})),Mdt={showConfigurationPanel:!1,colorScheme:Pl.Viridis,markContrast:0,encoding:Qn.Mean,showTooltip:!1,isSnr:!1,clusterMode:w$.None,clusterVar:x$.Mean,nMeans:5,nDevs:5},Ldt=(e,t)=>({...t,...Object.fromEntries(Object.entries(e).filter(([n,r])=>r!==void 0))});function cEe(e){const t=Ldt(e,Mdt),[n,r]=D.useState(t.colorScheme),[i,s]=D.useState(t.markContrast),[o,a]=D.useState(t.encoding),[l,u]=D.useState(t.showTooltip),[c,d]=D.useState(t.isSnr),[f,h]=D.useState(t.clusterMode),[p,m]=D.useState(t.clusterVar),[g,b]=D.useState(t.nMeans),[v,x]=D.useState(t.nDevs);return{...t,colorScheme:n,markContrast:i,encoding:o,showTooltip:l,isSnr:c,clusterMode:f,clusterVar:p,nMeans:g,nDevs:v,setColorScheme:r,setMarkContrast:s,setEncoding:a,setShowTooltip:u,setIsSnr:d,setClusterMode:h,setClusterVar:m,setNMeans:b,setNDevs:x}}const dEe=Object.freeze(Object.defineProperty({__proto__:null,useConfigProps:cEe},Symbol.toStringTag,{value:"Module"}));function Fdt(){const{setAnswerNodes:e,trrack:t,actions:n,setAnswer:r}=Gu();return T.jsx(Gt,{variant:"filled",size:"sm",styles:{root:{width:"fit-content",display:"inline-flex"}},onClick:()=>{e([]),t==null||t.apply("Set Answer",n==null?void 0:n.setAnswerNodes([])),r({status:!0,provenanceGraph:t==null?void 0:t.graph.backend,answers:{answerNodes:[]}})},children:E$.ClearNodeSelection})}function jdt(){const{setLinkMarks:e}=Gu();return T.jsx(Gt,{variant:"filled",size:"sm",styles:{root:{width:"fit-content",display:"inline-flex"}},onClick:()=>{e([])},children:E$.ClearLinkSelection})}function fEe(){return T.jsxs(Ms,{style:{display:"flex"},children:[T.jsx(Fdt,{}),T.jsx(jdt,{})]})}const hEe=Object.freeze(Object.defineProperty({__proto__:null,InteractionButtons:fEe},Symbol.toStringTag,{value:"Module"})),Bdt="modulepreload",zdt=function(e){return"/revisit/"+e},Bse={},Jy=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(n.map(l=>{if(l=zdt(l),l in Bse)return;Bse[l]=!0;const u=l.endsWith(".css"),c=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${c}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":Bdt,u||(d.as="script"),d.crossOrigin="",d.href=l,a&&d.setAttribute("nonce",a),document.head.appendChild(d),u)return new Promise((f,h)=>{d.addEventListener("load",f),d.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return t().catch(s)})},Udt=Object.assign({"/public/matrices/data/tasks_data.txt":()=>Jy(()=>import("./tasks_data-DzJatG4n.js"),[]),"/public/matrices/data/training_data.txt":()=>Jy(()=>import("./training_data-CWUhbmEg.js"),[])}),qdt=Object.keys(Udt).map(e=>e.replace("/public/matrices/data/",""));function pEe({configProps:e,dataname:t,setDataname:n}){const{showTooltip:r,encoding:i,colorScheme:s,markContrast:o,nMeans:a,nDevs:l,clusterMode:u,clusterVar:c,setShowTooltip:d,setEncoding:f,setColorScheme:h,setMarkContrast:p,setClusterMode:m,setClusterVar:g,setNMeans:b,setNDevs:v,showConfigurationPanel:x}=e,[E,_]=D.useState(!1);return T.jsxs(Se,{style:{position:"absolute",top:0,right:0},children:[!x&&!E&&T.jsx(pq,{opened:E,onClick:()=>_(C=>!C),size:"lg"}),T.jsx(ud,{opened:E,onClose:()=>_(!1),position:"left",size:300,padding:"md",withOverlay:!1,title:"Configuration",children:T.jsxs(Ms,{gap:"md",children:[T.jsx(mo,{label:"Tooltip",checked:r,onChange:C=>d(C.currentTarget.checked)}),T.jsx(ty,{label:"Data file:",value:t,onChange:C=>n(C.currentTarget.value),data:qdt}),T.jsx(ty,{label:"Encoding:",value:i,onChange:C=>f(C.currentTarget.value),data:Object.values(Qn)}),T.jsx(ty,{label:"Color scheme:",value:s,onChange:C=>h(C.currentTarget.value),data:Object.values(Pl)}),T.jsxs(Ms,{gap:"xs",children:[T.jsxs(Ve,{size:"sm",children:["Grey Mark contrast:",o]}),T.jsx(Wb,{min:0,max:100,value:o,onChange:p})]}),T.jsx(ty,{label:"Cluster mode:",value:u,onChange:C=>m(C.currentTarget.value),data:Object.values(w$)}),T.jsx(ty,{label:"Cluster variable:",value:c,onChange:C=>g(C.currentTarget.value),data:Object.values(x$)}),T.jsxs(Ms,{gap:"xs",children:[T.jsxs(Ve,{size:"sm",children:["Mean Steps:",a]}),T.jsx(Wb,{min:2,max:5,value:a,onChange:b})]}),T.jsxs(Ms,{gap:"xs",children:[T.jsxs(Ve,{size:"sm",children:["Deviation Steps:",l]}),T.jsx(Wb,{min:2,max:5,value:l,onChange:v})]})]})})]})}const mEe=Object.freeze(Object.defineProperty({__proto__:null,default:pEe},Symbol.toStringTag,{value:"Module"})),Sg={top:100,left:120,right:5,bottom:5};function gEe({config:e,data:t,dataname:n,setDataname:r,provenanceState:i,actions:s,trrack:o,setAnswer:a}){const l=cEe(e),u=lEe(i),c=oEe(t,l.clusterMode,l.clusterVar),[d,{width:f,height:h}]=gx(),p=Math.min(f-Sg.left-Sg.right,h-Sg.top-Sg.bottom),m=D.useMemo(()=>c.orderedOrigins||[...new Set(t.map(iw))].sort(),[t,c.orderedOrigins]),g=D.useMemo(()=>c.orderedDestinations||[...new Set(t.map(sw))].sort(),[t,c.orderedDestinations]),b=D.useMemo(()=>_B().domain(m).range([0,p]),[p,m]),v=D.useMemo(()=>_B().domain(g).range([0,p]),[p,g]),x=b.bandwidth(),{meanMin:E,meanMax:_}=D.useMemo(()=>({meanMin:0,meanMax:250}),[t]),{devMin:C,devMax:S}=D.useMemo(()=>({devMin:0,devMax:150}),[t,l.isSnr]),{meanScale:k,devScale:R,alternateScale:O}=Kxe(l.encoding,l.colorScheme,x,E,_,C,S,l.isSnr,l.nMeans,l.nDevs),N=Gxe(l.encoding,l.markContrast,l.isSnr,k,R,O),L=D.useMemo(()=>({data:t,width:f,height:h,size:p,margin:Sg,cellSize:x,meanMin:E,meanMax:_,devMin:C,devMax:S,meanScale:k,devScale:R,alternateScale:O,originScale:b,destinationScale:v,cellRenderer:N,configProps:l,...u,...c,actions:s,trrack:o,setAnswer:a}),[t,f,h,p,x,E,_,C,S,k,R,b,v,N,l,u,c,s,o,a]),$=!Number.isNaN(p)&&p>0;return T.jsx(_xe,{value:L,children:T.jsxs("div",{className:"container",children:[T.jsx(pEe,{configProps:l,dataname:n,setDataname:r}),T.jsx("svg",{ref:d,className:"matrix-svg",children:$&&T.jsxs("g",{transform:`translate(${Sg.left},${Sg.top})`,onMouseLeave:()=>{u.setOriginHighlight(null),u.setDestinationHighlight(null)},children:[T.jsx(jxe,{}),T.jsxs("g",{className:"axes",children:[T.jsx(Sxe,{}),T.jsx(kxe,{})]}),T.jsx(Nxe,{}),T.jsx(Rxe,{}),e.clusterMarks&&T.jsx(qxe,{size:3,marks:e.clusterMarks}),T.jsx(Hxe,{marks:u.linkMarks}),l.showTooltip&&T.jsx(zxe,{})]})}),$&&T.jsxs("div",{style:{display:"flex",flexDirection:"column",width:"35%",height:"100%",gap:"3vh",marginTop:"10vh"},children:[T.jsx(fEe,{}),T.jsx(Lxe,{})]})]})})}const yEe=Object.freeze(Object.defineProperty({__proto__:null,Matrix:gEe},Symbol.toStringTag,{value:"Module"}));function zse({parameters:e,setAnswer:t,provenanceState:n}){const[r,i]=D.useState(null),[s,o]=D.useState(e.dataset??""),a=D.useCallback(async c=>{if(c)try{const d=await fetch(`${c}`);if(!d.ok)throw new Error("Failed to fetch file");const p=(await d.text()).split(`
`).filter(m=>m.trim().length>0).map(m=>JSON.parse(m)).filter(m=>m.origin>=m.destination);p.forEach(m=>{if(m.destination!==m.origin){const g={...m};g.origin=m.destination,g.destination=m.origin,p.push(g)}}),i(p)}catch(d){console.error("Error loading JSON:",d)}},[]);D.useEffect(()=>{a(s)},[a,s]);const{actions:l,trrack:u}=D.useMemo(()=>{const c=Lv.create(),d=c.register("set-answer-nodes",(b,v)=>{b.answerNodes=v}),f=c.register("set-ordering-node",(b,v)=>{b.orderingNode=v}),h=c.register("set-link-marks",(b,v)=>{b.linkMarks=v}),p=c.register("highlight-origin-node",(b,v)=>{b.originHighlight=v}),m=c.register("highlight-destination-node",(b,v)=>{b.destinationHighlight=v}),g=nS({initialState:{answerNodes:[],orderingNode:null,linkMarks:[],originHighlight:null,destinationHighlight:null},registry:c});return{actions:{setAnswerNodes:d,setOrderingNode:f,setLinkMarks:h,setOriginHighlight:p,setDestinationHighlight:m},trrack:g}},[]);return r?T.jsx(gEe,{config:e,data:r,dataname:s,setDataname:o,provenanceState:n,actions:l,trrack:u,setAnswer:t}):T.jsx(ld,{})}const vEe=Object.freeze(Object.defineProperty({__proto__:null,Stimuli:zse,default:zse},Symbol.toStringTag,{value:"Module"})),bEe=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));function lo(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var Hdt=typeof Symbol=="function"&&Symbol.observable||"@@observable",Use=Hdt,vL=()=>Math.random().toString(36).substring(7).split("").join("."),Wdt={INIT:`@@redux/INIT${vL()}`,REPLACE:`@@redux/REPLACE${vL()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${vL()}`},IP=Wdt;function sV(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function wEe(e,t,n){if(typeof e!="function")throw new Error(lo(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(lo(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(lo(1));return n(wEe)(e,t)}let r=e,i=t,s=new Map,o=s,a=0,l=!1;function u(){o===s&&(o=new Map,s.forEach((g,b)=>{o.set(b,g)}))}function c(){if(l)throw new Error(lo(3));return i}function d(g){if(typeof g!="function")throw new Error(lo(4));if(l)throw new Error(lo(5));let b=!0;u();const v=a++;return o.set(v,g),function(){if(b){if(l)throw new Error(lo(6));b=!1,u(),o.delete(v),s=null}}}function f(g){if(!sV(g))throw new Error(lo(7));if(typeof g.type>"u")throw new Error(lo(8));if(typeof g.type!="string")throw new Error(lo(17));if(l)throw new Error(lo(9));try{l=!0,i=r(i,g)}finally{l=!1}return(s=o).forEach(v=>{v()}),g}function h(g){if(typeof g!="function")throw new Error(lo(10));r=g,f({type:IP.REPLACE})}function p(){const g=d;return{subscribe(b){if(typeof b!="object"||b===null)throw new Error(lo(11));function v(){const E=b;E.next&&E.next(c())}return v(),{unsubscribe:g(v)}},[Use](){return this}}}return f({type:IP.INIT}),{dispatch:f,subscribe:d,getState:c,replaceReducer:h,[Use]:p}}function Vdt(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:IP.INIT})>"u")throw new Error(lo(12));if(typeof n(void 0,{type:IP.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(lo(13))})}function Gdt(e){const t=Object.keys(e),n={};for(let s=0;s<t.length;s++){const o=t[s];typeof e[o]=="function"&&(n[o]=e[o])}const r=Object.keys(n);let i;try{Vdt(n)}catch(s){i=s}return function(o={},a){if(i)throw i;let l=!1;const u={};for(let c=0;c<r.length;c++){const d=r[c],f=n[d],h=o[d],p=f(h,a);if(typeof p>"u")throw a&&a.type,new Error(lo(14));u[d]=p,l=l||p!==h}return l=l||r.length!==Object.keys(o).length,l?u:o}}function RP(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function Ydt(...e){return t=>(n,r)=>{const i=t(n,r);let s=()=>{throw new Error(lo(15))};const o={getState:i.getState,dispatch:(l,...u)=>s(l,...u)},a=e.map(l=>l(o));return s=RP(...a)(i.dispatch),{...i,dispatch:s}}}function Kdt(e){return sV(e)&&"type"in e&&typeof e.type=="string"}var xEe=Symbol.for("immer-nothing"),qse=Symbol.for("immer-draftable"),Xl=Symbol.for("immer-state");function Rc(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Bw=Object.getPrototypeOf;function Zy(e){return!!e&&!!e[Xl]}function Tp(e){var t;return e?EEe(e)||Array.isArray(e)||!!e[qse]||!!((t=e.constructor)!=null&&t[qse])||T$(e)||C$(e):!1}var Xdt=Object.prototype.constructor.toString();function EEe(e){if(!e||typeof e!="object")return!1;const t=Bw(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===Xdt}function DP(e,t){_$(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function _$(e){const t=e[Xl];return t?t.type_:Array.isArray(e)?1:T$(e)?2:C$(e)?3:0}function AB(e,t){return _$(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function _Ee(e,t,n){const r=_$(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function Qdt(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function T$(e){return e instanceof Map}function C$(e){return e instanceof Set}function Qg(e){return e.copy_||e.base_}function kB(e,t){if(T$(e))return new Map(e);if(C$(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=EEe(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[Xl];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const o=i[s],a=r[o];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(r[o]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[o]})}return Object.create(Bw(e),r)}else{const r=Bw(e);if(r!==null&&n)return{...e};const i=Object.create(r);return Object.assign(i,e)}}function oV(e,t=!1){return S$(e)||Zy(e)||!Tp(e)||(_$(e)>1&&(e.set=e.add=e.clear=e.delete=Jdt),Object.freeze(e),t&&Object.entries(e).forEach(([n,r])=>oV(r,!0))),e}function Jdt(){Rc(2)}function S$(e){return Object.isFrozen(e)}var Zdt={};function ev(e){const t=Zdt[e];return t||Rc(0,e),t}var YT;function TEe(){return YT}function eft(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Hse(e,t){t&&(ev("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function IB(e){RB(e),e.drafts_.forEach(tft),e.drafts_=null}function RB(e){e===YT&&(YT=e.parent_)}function Wse(e){return YT=eft(YT,e)}function tft(e){const t=e[Xl];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function Vse(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[Xl].modified_&&(IB(t),Rc(4)),Tp(e)&&(e=PP(t,e),t.parent_||NP(t,e)),t.patches_&&ev("Patches").generateReplacementPatches_(n[Xl].base_,e,t.patches_,t.inversePatches_)):e=PP(t,n,[]),IB(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==xEe?e:void 0}function PP(e,t,n){if(S$(t))return t;const r=t[Xl];if(!r)return DP(t,(i,s)=>Gse(e,r,t,i,s,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return NP(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let s=i,o=!1;r.type_===3&&(s=new Set(i),i.clear(),o=!0),DP(s,(a,l)=>Gse(e,r,i,a,l,n,o)),NP(e,i,!1),n&&e.patches_&&ev("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function Gse(e,t,n,r,i,s,o){if(Zy(i)){const a=s&&t&&t.type_!==3&&!AB(t.assigned_,r)?s.concat(r):void 0,l=PP(e,i,a);if(_Ee(n,r,l),Zy(l))e.canAutoFreeze_=!1;else return}else o&&n.add(i);if(Tp(i)&&!S$(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;PP(e,i),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&NP(e,i)}}function NP(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&oV(t,n)}function nft(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:TEe(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=aV;n&&(i=[r],s=KT);const{revoke:o,proxy:a}=Proxy.revocable(i,s);return r.draft_=a,r.revoke_=o,a}var aV={get(e,t){if(t===Xl)return e;const n=Qg(e);if(!AB(n,t))return rft(e,n,t);const r=n[t];return e.finalized_||!Tp(r)?r:r===bL(e.base_,t)?(wL(e),e.copy_[t]=PB(r,e)):r},has(e,t){return t in Qg(e)},ownKeys(e){return Reflect.ownKeys(Qg(e))},set(e,t,n){const r=CEe(Qg(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=bL(Qg(e),t),s=i==null?void 0:i[Xl];if(s&&s.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(Qdt(n,i)&&(n!==void 0||AB(e.base_,t)))return!0;wL(e),DB(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return bL(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,wL(e),DB(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=Qg(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){Rc(11)},getPrototypeOf(e){return Bw(e.base_)},setPrototypeOf(){Rc(12)}},KT={};DP(aV,(e,t)=>{KT[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});KT.deleteProperty=function(e,t){return KT.set.call(this,e,t,void 0)};KT.set=function(e,t,n){return aV.set.call(this,e[0],t,n,e[0])};function bL(e,t){const n=e[Xl];return(n?Qg(n):e)[t]}function rft(e,t,n){var i;const r=CEe(t,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(e.draft_):void 0}function CEe(e,t){if(!(t in e))return;let n=Bw(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Bw(n)}}function DB(e){e.modified_||(e.modified_=!0,e.parent_&&DB(e.parent_))}function wL(e){e.copy_||(e.copy_=kB(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var ift=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const s=n;n=t;const o=this;return function(l=s,...u){return o.produce(l,c=>n.call(this,c,...u))}}typeof n!="function"&&Rc(6),r!==void 0&&typeof r!="function"&&Rc(7);let i;if(Tp(t)){const s=Wse(this),o=PB(t,void 0);let a=!0;try{i=n(o),a=!1}finally{a?IB(s):RB(s)}return Hse(s,r),Vse(i,s)}else if(!t||typeof t!="object"){if(i=n(t),i===void 0&&(i=t),i===xEe&&(i=void 0),this.autoFreeze_&&oV(i,!0),r){const s=[],o=[];ev("Patches").generateReplacementPatches_(t,i,s,o),r(s,o)}return i}else Rc(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(o,...a)=>this.produceWithPatches(o,l=>t(l,...a));let r,i;return[this.produce(t,n,(o,a)=>{r=o,i=a}),r,i]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Tp(e)||Rc(8),Zy(e)&&(e=sft(e));const t=Wse(this),n=PB(e,void 0);return n[Xl].isManual_=!0,RB(t),n}finishDraft(e,t){const n=e&&e[Xl];(!n||!n.isManual_)&&Rc(9);const{scope_:r}=n;return Hse(r,t),Vse(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=ev("Patches").applyPatches_;return Zy(e)?r(e,t):this.produce(e,i=>r(i,t))}};function PB(e,t){const n=T$(e)?ev("MapSet").proxyMap_(e,t):C$(e)?ev("MapSet").proxySet_(e,t):nft(e,t);return(t?t.scope_:TEe()).drafts_.push(n),n}function sft(e){return Zy(e)||Rc(10,e),SEe(e)}function SEe(e){if(!Tp(e)||S$(e))return e;const t=e[Xl];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=kB(e,t.scope_.immer_.useStrictShallowCopy_)}else n=kB(e,!0);return DP(n,(r,i)=>{_Ee(n,r,SEe(i))}),t&&(t.finalized_=!1),n}var Ql=new ift,AEe=Ql.produce;Ql.produceWithPatches.bind(Ql);Ql.setAutoFreeze.bind(Ql);Ql.setUseStrictShallowCopy.bind(Ql);Ql.applyPatches.bind(Ql);Ql.createDraft.bind(Ql);Ql.finishDraft.bind(Ql);function oft(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function aft(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function lft(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(n=>typeof n=="function")){const n=e.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${t}[${n}]`)}}var Yse=e=>Array.isArray(e)?e:[e];function uft(e){const t=Array.isArray(e[0])?e[0]:e;return lft(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function cft(e,t){const n=[],{length:r}=e;for(let i=0;i<r;i++)n.push(e[i].apply(null,t));return n}var dft=class{constructor(e){this.value=e}deref(){return this.value}},fft=typeof WeakRef<"u"?WeakRef:dft,hft=0,Kse=1;function Gk(){return{s:hft,v:void 0,o:null,p:null}}function kEe(e,t={}){let n=Gk();const{resultEqualityCheck:r}=t;let i,s=0;function o(){var d;let a=n;const{length:l}=arguments;for(let f=0,h=l;f<h;f++){const p=arguments[f];if(typeof p=="function"||typeof p=="object"&&p!==null){let m=a.o;m===null&&(a.o=m=new WeakMap);const g=m.get(p);g===void 0?(a=Gk(),m.set(p,a)):a=g}else{let m=a.p;m===null&&(a.p=m=new Map);const g=m.get(p);g===void 0?(a=Gk(),m.set(p,a)):a=g}}const u=a;let c;if(a.s===Kse)c=a.v;else if(c=e.apply(null,arguments),s++,r){const f=((d=i==null?void 0:i.deref)==null?void 0:d.call(i))??i;f!=null&&r(f,c)&&(c=f,s!==0&&s--),i=typeof c=="object"&&c!==null||typeof c=="function"?new fft(c):c}return u.s=Kse,u.v=c,c}return o.clearCache=()=>{n=Gk(),o.resetResultsCount()},o.resultsCount=()=>s,o.resetResultsCount=()=>{s=0},o}function pft(e,...t){const n=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,r=(...i)=>{let s=0,o=0,a,l={},u=i.pop();typeof u=="object"&&(l=u,u=i.pop()),oft(u,`createSelector expects an output function after the inputs, but received: [${typeof u}]`);const c={...n,...l},{memoize:d,memoizeOptions:f=[],argsMemoize:h=kEe,argsMemoizeOptions:p=[]}=c,m=Yse(f),g=Yse(p),b=uft(i),v=d(function(){return s++,u.apply(null,arguments)},...m),x=h(function(){o++;const _=cft(b,arguments);return a=v.apply(null,_),a},...g);return Object.assign(x,{resultFunc:u,memoizedResultFunc:v,dependencies:b,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>a,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:d,argsMemoize:h})};return Object.assign(r,{withTypes:()=>r}),r}var IEe=pft(kEe),mft=Object.assign((e,t=IEe)=>{aft(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const n=Object.keys(e),r=n.map(s=>e[s]);return t(r,(...s)=>s.reduce((o,a,l)=>(o[n[l]]=a,o),{}))},{withTypes:()=>mft});function REe(e){return({dispatch:n,getState:r})=>i=>s=>typeof s=="function"?s(n,r,e):i(s)}var gft=REe(),yft=REe,vft=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?RP:RP.apply(null,arguments)};function Xse(e,t){function n(...r){if(t){let i=t(...r);if(!i)throw new Error(ip(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:r[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=r=>Kdt(r)&&r.type===e,n}var DEe=class l2 extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,l2.prototype)}static get[Symbol.species](){return l2}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new l2(...t[0].concat(this)):new l2(...t.concat(this))}};function Qse(e){return Tp(e)?AEe(e,()=>{}):e}function Jse(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}function bft(e){return typeof e=="boolean"}var wft=()=>function(t){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=t??{};let o=new DEe;return n&&(bft(n)?o.push(gft):o.push(yft(n.extraArgument))),o},xft="RTK_autoBatch",Zse=e=>t=>{setTimeout(t,e)},Eft=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let i=!0,s=!1,o=!1;const a=new Set,l=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:Zse(10):e.type==="callback"?e.queueNotification:Zse(e.timeout),u=()=>{o=!1,s&&(s=!1,a.forEach(c=>c()))};return Object.assign({},r,{subscribe(c){const d=()=>i&&c(),f=r.subscribe(d);return a.add(c),()=>{f(),a.delete(c)}},dispatch(c){var d;try{return i=!((d=c==null?void 0:c.meta)!=null&&d[xft]),s=!i,s&&(o||(o=!0,l(u))),r.dispatch(c)}finally{i=!0}}})},_ft=e=>function(n){const{autoBatch:r=!0}=n??{};let i=new DEe(e);return r&&i.push(Eft(typeof r=="object"?r:void 0)),i};function Tft(e){const t=wft(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:s=void 0,enhancers:o=void 0}=e||{};let a;if(typeof n=="function")a=n;else if(sV(n))a=Gdt(n);else throw new Error(ip(1));let l;typeof r=="function"?l=r(t):l=t();let u=RP;i&&(u=vft({trace:!1,...typeof i=="object"&&i}));const c=Ydt(...l),d=_ft(c);let f=typeof o=="function"?o(d):d();const h=u(...f);return wEe(a,s,h)}function PEe(e){const t={},n=[];let r;const i={addCase(s,o){const a=typeof s=="string"?s:s.type;if(!a)throw new Error(ip(28));if(a in t)throw new Error(ip(29));return t[a]=o,i},addMatcher(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase(s){return r=s,i}};return e(i),[t,n,r]}function Cft(e){return typeof e=="function"}function Sft(e,t){let[n,r,i]=PEe(t),s;if(Cft(e))s=()=>Qse(e());else{const a=Qse(e);s=()=>a}function o(a=s(),l){let u=[n[l.type],...r.filter(({matcher:c})=>c(l)).map(({reducer:c})=>c)];return u.filter(c=>!!c).length===0&&(u=[i]),u.reduce((c,d)=>{if(d)if(Zy(c)){const h=d(c,l);return h===void 0?c:h}else{if(Tp(c))return AEe(c,f=>d(f,l));{const f=d(c,l);if(f===void 0){if(c===null)return c;throw Error("A case reducer on a non-draftable value must not return undefined")}return f}}return c},a)}return o.getInitialState=s,o}var Aft=Symbol.for("rtk-slice-createasyncthunk");function kft(e,t){return`${e}/${t}`}function Ift({creators:e}={}){var n;const t=(n=e==null?void 0:e.asyncThunk)==null?void 0:n[Aft];return function(i){const{name:s,reducerPath:o=s}=i;if(!s)throw new Error(ip(11));const a=(typeof i.reducers=="function"?i.reducers(Pft()):i.reducers)||{},l=Object.keys(a),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},c={addCase(x,E){const _=typeof x=="string"?x:x.type;if(!_)throw new Error(ip(12));if(_ in u.sliceCaseReducersByType)throw new Error(ip(13));return u.sliceCaseReducersByType[_]=E,c},addMatcher(x,E){return u.sliceMatchers.push({matcher:x,reducer:E}),c},exposeAction(x,E){return u.actionCreators[x]=E,c},exposeCaseReducer(x,E){return u.sliceCaseReducersByName[x]=E,c}};l.forEach(x=>{const E=a[x],_={reducerName:x,type:kft(s,x),createNotation:typeof i.reducers=="function"};Oft(E)?Mft(_,E,c,t):Nft(_,E,c)});function d(){const[x={},E=[],_=void 0]=typeof i.extraReducers=="function"?PEe(i.extraReducers):[i.extraReducers],C={...x,...u.sliceCaseReducersByType};return Sft(i.initialState,S=>{for(let k in C)S.addCase(k,C[k]);for(let k of u.sliceMatchers)S.addMatcher(k.matcher,k.reducer);for(let k of E)S.addMatcher(k.matcher,k.reducer);_&&S.addDefaultCase(_)})}const f=x=>x,h=new Map;let p;function m(x,E){return p||(p=d()),p(x,E)}function g(){return p||(p=d()),p.getInitialState()}function b(x,E=!1){function _(S){let k=S[x];return typeof k>"u"&&E&&(k=g()),k}function C(S=f){const k=Jse(h,E,()=>new WeakMap);return Jse(k,S,()=>{const R={};for(const[O,N]of Object.entries(i.selectors??{}))R[O]=Rft(N,S,g,E);return R})}return{reducerPath:x,getSelectors:C,get selectors(){return C(_)},selectSlice:_}}const v={name:s,reducer:m,actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState:g,...b(o),injectInto(x,{reducerPath:E,..._}={}){const C=E??o;return x.inject({reducerPath:C,reducer:m},_),{...v,...b(C,!0)}}};return v}}function Rft(e,t,n,r){function i(s,...o){let a=t(s);return typeof a>"u"&&r&&(a=n()),e(a,...o)}return i.unwrapped=e,i}var Dft=Ift();function Pft(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function Nft({type:e,reducerName:t,createNotation:n},r,i){let s,o;if("reducer"in r){if(n&&!$ft(r))throw new Error(ip(17));s=r.reducer,o=r.prepare}else s=r;i.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,o?Xse(e,o):Xse(e))}function Oft(e){return e._reducerDefinitionType==="asyncThunk"}function $ft(e){return e._reducerDefinitionType==="reducerWithPrepare"}function Mft({type:e,reducerName:t},n,r,i){if(!i)throw new Error(ip(18));const{payloadCreator:s,fulfilled:o,pending:a,rejected:l,settled:u,options:c}=n,d=i(e,s,c);r.exposeAction(t,d),o&&r.addCase(d.fulfilled,o),a&&r.addCase(d.pending,a),l&&r.addCase(d.rejected,l),u&&r.addMatcher(d.settled,u),r.exposeCaseReducer(t,{fulfilled:o||Yk,pending:a||Yk,rejected:l||Yk,settled:u||Yk})}function Yk(){}function ip(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}function A$(e){return e.baseComponent!==void 0}function Jl(e){return e.order==="dynamic"}function Rf(e){return Jl(e)?[e.id]:e.components.flatMap(t=>typeof t=="string"?t:Rf(t))}function NEe(e){return Jl(e)?[e]:e.components.flatMap(t=>typeof t=="string"?[]:NEe(t))}function NB(e,t){return NEe(t).find(r=>r.id===e)}function OEe(e){var t;return Jl(e)?[]:[...e.components.flatMap(n=>typeof n=="string"?n:Jl(n)?[]:OEe(n)),...((t=e.interruptions)==null?void 0:t.flatMap(n=>n.components))||[]]}function $Ee(e,t,n){let r=0;for(let i=0;i<e.components.length;i+=1){const s=e.components[i];if(typeof s=="string"){if(typeof t=="number"&&t===n+r)return[{currentBlock:e,firstIndex:n,lastIndex:n+Rf(e).length-1}];if(typeof t=="string"&&e.orderPath===t)return[{currentBlock:e,firstIndex:n,lastIndex:n+Rf(e).length-1}];r+=1}else{const o=$Ee(s,t,n+r);if(typeof o=="number")r+=o;else{const a={currentBlock:e,firstIndex:n,lastIndex:o[0].lastIndex};return[...o,a]}}}return r}function lV(e,t){const n=$Ee(e,t,0);return typeof n=="number"?null:n}function MEe(e,t,n){if(e.id===t)return{found:!0,distance:n};let r=0;for(let i=0;i<e.components.length;i+=1){const s=e.components[i];if(typeof s=="string")r+=1;else{const o=MEe(s,t,n+r);if(o.found)return o;r+=o.distance}}return{found:!1,distance:r}}function Lft(e,t){const n=MEe(e,t,0);return n.found?n.distance:-1}function LEe(e,t="root"){if(Jl(e))return[];const n=[],r={};return e.components.forEach((i,s)=>{typeof i=="string"?(n.push({componentName:i,orderPath:t,timesSeenInBlock:r[i]||0}),r[i]=r[i]?r[i]+1:1):n.push(...LEe(i,`${t}-${s}`))}),n}function uV(e,t){return typeof e=="string"?e:Jl(e)?{...e,orderPath:t,components:[]}:{...e,orderPath:t,order:e.order,components:e.components.map((n,r)=>uV(n,`${t}-${r}`))}}var u2={exports:{}};u2.exports;var eoe;function Fft(){return eoe||(eoe=1,function(e,t){var n=200,r="__lodash_hash_undefined__",i=800,s=16,o=9007199254740991,a="[object Arguments]",l="[object Array]",u="[object AsyncFunction]",c="[object Boolean]",d="[object Date]",f="[object Error]",h="[object Function]",p="[object GeneratorFunction]",m="[object Map]",g="[object Number]",b="[object Null]",v="[object Object]",x="[object Proxy]",E="[object RegExp]",_="[object Set]",C="[object String]",S="[object Undefined]",k="[object WeakMap]",R="[object ArrayBuffer]",O="[object DataView]",N="[object Float32Array]",L="[object Float64Array]",$="[object Int8Array]",B="[object Int16Array]",H="[object Int32Array]",Y="[object Uint8Array]",J="[object Uint8ClampedArray]",K="[object Uint16Array]",Z="[object Uint32Array]",U=/[\\^$.*+?()[\]{}|]/g,j=/^\[object .+?Constructor\]$/,V=/^(?:0|[1-9]\d*)$/,z={};z[N]=z[L]=z[$]=z[B]=z[H]=z[Y]=z[J]=z[K]=z[Z]=!0,z[a]=z[l]=z[R]=z[c]=z[O]=z[d]=z[f]=z[h]=z[m]=z[g]=z[v]=z[E]=z[_]=z[C]=z[k]=!1;var G=typeof cs=="object"&&cs&&cs.Object===Object&&cs,Q=typeof self=="object"&&self&&self.Object===Object&&self,ie=G||Q||Function("return this")(),me=t&&!t.nodeType&&t,ae=me&&!0&&e&&!e.nodeType&&e,fe=ae&&ae.exports===me,be=fe&&G.process,te=function(){try{var ce=ae&&ae.require&&ae.require("util").types;return ce||be&&be.binding&&be.binding("util")}catch{}}(),re=te&&te.isTypedArray;function we(ce,ye,je){switch(je.length){case 0:return ce.call(ye);case 1:return ce.call(ye,je[0]);case 2:return ce.call(ye,je[0],je[1]);case 3:return ce.call(ye,je[0],je[1],je[2])}return ce.apply(ye,je)}function Ee(ce,ye){for(var je=-1,$t=Array(ce);++je<ce;)$t[je]=ye(je);return $t}function Fe(ce){return function(ye){return ce(ye)}}function We(ce,ye){return ce==null?void 0:ce[ye]}function Me(ce,ye){return function(je){return ce(ye(je))}}var Be=Array.prototype,Je=Function.prototype,lt=Object.prototype,ht=ie["__core-js_shared__"],vt=Je.toString,Pe=lt.hasOwnProperty,wt=function(){var ce=/[^.]+$/.exec(ht&&ht.keys&&ht.keys.IE_PROTO||"");return ce?"Symbol(src)_1."+ce:""}(),Wt=lt.toString,Ce=vt.call(Object),Ne=RegExp("^"+vt.call(Pe).replace(U,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ot=fe?ie.Buffer:void 0,xt=ie.Symbol,Ct=ie.Uint8Array;ot&&ot.allocUnsafe;var Qt=Me(Object.getPrototypeOf,Object),yn=Object.create,er=lt.propertyIsEnumerable,Wr=Be.splice,pn=xt?xt.toStringTag:void 0,En=function(){try{var ce=nt(Object,"defineProperty");return ce({},"",{}),ce}catch{}}(),Mr=ot?ot.isBuffer:void 0,On=Math.max,bs=Date.now,Qr=nt(ie,"Map"),Lr=nt(Object,"create"),Jr=function(){function ce(){}return function(ye){if(!lu(ye))return{};if(yn)return yn(ye);ce.prototype=ye;var je=new ce;return ce.prototype=void 0,je}}();function tr(ce){var ye=-1,je=ce==null?0:ce.length;for(this.clear();++ye<je;){var $t=ce[ye];this.set($t[0],$t[1])}}function Qs(){this.__data__=Lr?Lr(null):{},this.size=0}function su(ce){var ye=this.has(ce)&&delete this.__data__[ce];return this.size-=ye?1:0,ye}function ta(ce){var ye=this.__data__;if(Lr){var je=ye[ce];return je===r?void 0:je}return Pe.call(ye,ce)?ye[ce]:void 0}function El(ce){var ye=this.__data__;return Lr?ye[ce]!==void 0:Pe.call(ye,ce)}function nr(ce,ye){var je=this.__data__;return this.size+=this.has(ce)?0:1,je[ce]=Lr&&ye===void 0?r:ye,this}tr.prototype.clear=Qs,tr.prototype.delete=su,tr.prototype.get=ta,tr.prototype.has=El,tr.prototype.set=nr;function Fr(ce){var ye=-1,je=ce==null?0:ce.length;for(this.clear();++ye<je;){var $t=ce[ye];this.set($t[0],$t[1])}}function dr(){this.__data__=[],this.size=0}function ws(ce){var ye=this.__data__,je=tc(ye,ce);if(je<0)return!1;var $t=ye.length-1;return je==$t?ye.pop():Wr.call(ye,je,1),--this.size,!0}function Gn(ce){var ye=this.__data__,je=tc(ye,ce);return je<0?void 0:ye[je][1]}function li(ce){return tc(this.__data__,ce)>-1}function xs(ce,ye){var je=this.__data__,$t=tc(je,ce);return $t<0?(++this.size,je.push([ce,ye])):je[$t][1]=ye,this}Fr.prototype.clear=dr,Fr.prototype.delete=ws,Fr.prototype.get=Gn,Fr.prototype.has=li,Fr.prototype.set=xs;function Qi(ce){var ye=-1,je=ce==null?0:ce.length;for(this.clear();++ye<je;){var $t=ce[ye];this.set($t[0],$t[1])}}function Js(){this.size=0,this.__data__={hash:new tr,map:new(Qr||Fr),string:new tr}}function _l(ce){var ye=et(this,ce).delete(ce);return this.size-=ye?1:0,ye}function ih(ce){return et(this,ce).get(ce)}function Yn(ce){return et(this,ce).has(ce)}function Zu(ce,ye){var je=et(this,ce),$t=je.size;return je.set(ce,ye),this.size+=je.size==$t?0:1,this}Qi.prototype.clear=Js,Qi.prototype.delete=_l,Qi.prototype.get=ih,Qi.prototype.has=Yn,Qi.prototype.set=Zu;function ui(ce){var ye=this.__data__=new Fr(ce);this.size=ye.size}function Oa(){this.__data__=new Fr,this.size=0}function Zs(ce){var ye=this.__data__,je=ye.delete(ce);return this.size=ye.size,je}function Xp(ce){return this.__data__.get(ce)}function sh(ce){return this.__data__.has(ce)}function Sd(ce,ye){var je=this.__data__;if(je instanceof Fr){var $t=je.__data__;if(!Qr||$t.length<n-1)return $t.push([ce,ye]),this.size=++je.size,this;je=this.__data__=new Qi($t)}return je.set(ce,ye),this.size=je.size,this}ui.prototype.clear=Oa,ui.prototype.delete=Zs,ui.prototype.get=Xp,ui.prototype.has=sh,ui.prototype.set=Sd;function Ad(ce,ye){var je=Es(ce),$t=!je&&ci(ce),vn=!je&&!$t&&ra(ce),zn=!je&&!$t&&!vn&&dg(ce),pr=je||$t||vn||zn,dn=pr?Ee(ce.length,String):[],fr=dn.length;for(var jr in ce)pr&&(jr=="length"||vn&&(jr=="offset"||jr=="parent")||zn&&(jr=="buffer"||jr=="byteLength"||jr=="byteOffset")||Pt(jr,fr))||dn.push(jr);return dn}function ec(ce,ye,je){(je!==void 0&&!eo(ce[ye],je)||je===void 0&&!(ye in ce))&&$n(ce,ye,je)}function Qp(ce,ye,je){var $t=ce[ye];(!(Pe.call(ce,ye)&&eo($t,je))||je===void 0&&!(ye in ce))&&$n(ce,ye,je)}function tc(ce,ye){for(var je=ce.length;je--;)if(eo(ce[je][0],ye))return je;return-1}function $n(ce,ye,je){ye=="__proto__"&&En?En(ce,ye,{configurable:!0,enumerable:!0,value:je,writable:!0}):ce[ye]=je}var oh=Ye();function Ji(ce){return ce==null?ce===void 0?S:b:pn&&pn in Object(ce)?tt(ce):ns(ce)}function Tl(ce){return zi(ce)&&Ji(ce)==a}function Zi(ce){if(!lu(ce)||_n(ce))return!1;var ye=Ma(ce)?Ne:j;return ye.test(tm(ce))}function nc(ce){return zi(ce)&&u1(ce.length)&&!!z[Ji(ce)]}function Jp(ce){if(!lu(ce))return rr(ce);var ye=Vt(ce),je=[];for(var $t in ce)$t=="constructor"&&(ye||!Pe.call(ce,$t))||je.push($t);return je}function ou(ce,ye,je,$t,vn){ce!==ye&&oh(ye,function(zn,pr){if(vn||(vn=new ui),lu(zn))es(ce,ye,pr,je,ou,$t,vn);else{var dn=$t?$t(au(ce,pr),zn,pr+"",ce,ye,vn):void 0;dn===void 0&&(dn=zn),ec(ce,pr,dn)}},Rd)}function es(ce,ye,je,$t,vn,zn,pr){var dn=au(ce,je),fr=au(ye,je),jr=pr.get(fr);if(jr){ec(ce,je,jr);return}var rs=zn?zn(dn,fr,je+"",ce,ye,pr):void 0,uu=rs===void 0;if(uu){var Fa=Es(fr),ah=!Fa&&ra(fr),Ui=!Fa&&!ah&&dg(fr);rs=fr,Fa||ah||Ui?Es(dn)?rs=dn:Id(dn)?rs=_e(dn):ah?(uu=!1,rs=ne(fr)):Ui?(uu=!1,rs=ue(fr)):rs=[]:SE(fr)||ci(fr)?(rs=dn,ci(dn)?rs=rc(dn):(!lu(dn)||Ma(dn))&&(rs=pt(fr))):uu=!1}uu&&(pr.set(fr,rs),vn(rs,fr,$t,zn,pr),pr.delete(fr)),ec(ce,je,rs)}function Zp(ce,ye){return em($a(ce,ye,La),ce+"")}var ts=En?function(ce,ye){return En(ce,"toString",{configurable:!0,enumerable:!1,value:Cl(ye),writable:!0})}:La;function ne(ce,ye){return ce.slice()}function ge(ce){var ye=new ce.constructor(ce.byteLength);return new Ct(ye).set(new Ct(ce)),ye}function ue(ce,ye){var je=ge(ce.buffer);return new ce.constructor(je,ce.byteOffset,ce.length)}function _e(ce,ye){var je=-1,$t=ce.length;for(ye||(ye=Array($t));++je<$t;)ye[je]=ce[je];return ye}function Ae(ce,ye,je,$t){var vn=!je;je||(je={});for(var zn=-1,pr=ye.length;++zn<pr;){var dn=ye[zn],fr=void 0;fr===void 0&&(fr=ce[dn]),vn?$n(je,dn,fr):Qp(je,dn,fr)}return je}function xe(ce){return Zp(function(ye,je){var $t=-1,vn=je.length,zn=vn>1?je[vn-1]:void 0,pr=vn>2?je[2]:void 0;for(zn=ce.length>3&&typeof zn=="function"?(vn--,zn):void 0,pr&&rn(je[0],je[1],pr)&&(zn=vn<3?void 0:zn,vn=1),ye=Object(ye);++$t<vn;){var dn=je[$t];dn&&ce(ye,dn,$t,zn)}return ye})}function Ye(ce){return function(ye,je,$t){for(var vn=-1,zn=Object(ye),pr=$t(ye),dn=pr.length;dn--;){var fr=pr[++vn];if(je(zn[fr],fr,zn)===!1)break}return ye}}function et(ce,ye){var je=ce.__data__;return qt(ye)?je[typeof ye=="string"?"string":"hash"]:je.map}function nt(ce,ye){var je=We(ce,ye);return Zi(je)?je:void 0}function tt(ce){var ye=Pe.call(ce,pn),je=ce[pn];try{ce[pn]=void 0;var $t=!0}catch{}var vn=Wt.call(ce);return $t&&(ye?ce[pn]=je:delete ce[pn]),vn}function pt(ce){return typeof ce.constructor=="function"&&!Vt(ce)?Jr(Qt(ce)):{}}function Pt(ce,ye){var je=typeof ce;return ye=ye??o,!!ye&&(je=="number"||je!="symbol"&&V.test(ce))&&ce>-1&&ce%1==0&&ce<ye}function rn(ce,ye,je){if(!lu(je))return!1;var $t=typeof ye;return($t=="number"?na(je)&&Pt(ye,je.length):$t=="string"&&ye in je)?eo(je[ye],ce):!1}function qt(ce){var ye=typeof ce;return ye=="string"||ye=="number"||ye=="symbol"||ye=="boolean"?ce!=="__proto__":ce===null}function _n(ce){return!!wt&&wt in ce}function Vt(ce){var ye=ce&&ce.constructor,je=typeof ye=="function"&&ye.prototype||lt;return ce===je}function rr(ce){var ye=[];if(ce!=null)for(var je in Object(ce))ye.push(je);return ye}function ns(ce){return Wt.call(ce)}function $a(ce,ye,je){return ye=On(ye===void 0?ce.length-1:ye,0),function(){for(var $t=arguments,vn=-1,zn=On($t.length-ye,0),pr=Array(zn);++vn<zn;)pr[vn]=$t[ye+vn];vn=-1;for(var dn=Array(ye+1);++vn<ye;)dn[vn]=$t[vn];return dn[ye]=je(pr),we(ce,this,dn)}}function au(ce,ye){if(!(ye==="constructor"&&typeof ce[ye]=="function")&&ye!="__proto__")return ce[ye]}var em=kd(ts);function kd(ce){var ye=0,je=0;return function(){var $t=bs(),vn=s-($t-je);if(je=$t,vn>0){if(++ye>=i)return arguments[0]}else ye=0;return ce.apply(void 0,arguments)}}function tm(ce){if(ce!=null){try{return vt.call(ce)}catch{}try{return ce+""}catch{}}return""}function eo(ce,ye){return ce===ye||ce!==ce&&ye!==ye}var ci=Tl(function(){return arguments}())?Tl:function(ce){return zi(ce)&&Pe.call(ce,"callee")&&!er.call(ce,"callee")},Es=Array.isArray;function na(ce){return ce!=null&&u1(ce.length)&&!Ma(ce)}function Id(ce){return zi(ce)&&na(ce)}var ra=Mr||ic;function Ma(ce){if(!lu(ce))return!1;var ye=Ji(ce);return ye==h||ye==p||ye==u||ye==x}function u1(ce){return typeof ce=="number"&&ce>-1&&ce%1==0&&ce<=o}function lu(ce){var ye=typeof ce;return ce!=null&&(ye=="object"||ye=="function")}function zi(ce){return ce!=null&&typeof ce=="object"}function SE(ce){if(!zi(ce)||Ji(ce)!=v)return!1;var ye=Qt(ce);if(ye===null)return!0;var je=Pe.call(ye,"constructor")&&ye.constructor;return typeof je=="function"&&je instanceof je&&vt.call(je)==Ce}var dg=re?Fe(re):nc;function rc(ce){return Ae(ce,Rd(ce))}function Rd(ce){return na(ce)?Ad(ce):Jp(ce)}var c1=xe(function(ce,ye,je){ou(ce,ye,je)});function Cl(ce){return function(){return ce}}function La(ce){return ce}function ic(){return!1}e.exports=c1}(u2,u2.exports)),u2.exports}var jft=Fft();const FEe=vl(jft);function Iu(e,t){var n;return A$(e)&&t.baseComponents?FEe({},(n=t.baseComponents)==null?void 0:n[e.baseComponent],e):e}function toe(e,t){return t.components[e]===void 0?null:Iu(t.components[e],t)}function noe(e){const t=e.response.map(n=>n.id);return e.responseOrder==="random"?{response:[...t].map(n=>({value:n,sort:Math.random()})).sort((n,r)=>n.sort-r.sort).map(({value:n})=>n)}:{response:t}}function roe(e){return e.response.reduce((t,n)=>{if(n.type==="radio"||n.type==="checkbox"||n.type==="buttons")if(n.optionOrder==="random"){const i=[...n.options.map(s=>typeof s=="string"?{value:s,label:s}:s)].map(s=>({value:s,sort:Math.random()})).sort((s,o)=>s.sort-o.sort).map(({value:s})=>s);t[n.id]=i}else t[n.id]=n.options.map(r=>typeof r=="string"?{value:r,label:r}:r);return t},{})}function ioe(e){return e.response.reduce((t,n)=>{if(n.type==="matrix-radio"||n.type==="matrix-checkbox")if(n.questionOrder==="random"){const i=[...n.questionOptions].map(s=>({value:s,sort:Math.random()})).sort((s,o)=>s.sort-o.sort).map(({value:s})=>s);t[n.id]=i}else t[n.id]=n.questionOptions;return t},{})}async function Bft(e,t,n,r,i,s,o){const a=Rf(n),l=Object.fromEntries(a.filter(p=>p!=="end").map((p,m)=>{const g=Iu(t.components[p]||{},t);return t.components[p]?[`${p}_${m}`,{answer:{},trialOrder:`${m}`,componentName:p,incorrectAnswers:{},startTime:0,endTime:-1,provenanceGraph:{aboveStimulus:void 0,belowStimulus:void 0,stimulus:void 0,sidebar:void 0},windowEvents:[],timedOut:!1,helpButtonClickedCount:0,parameters:Object.hasOwn(g,"parameters")?g.parameters:{},correctAnswer:Object.hasOwn(g,"correctAnswer")?g.correctAnswer:[],optionOrders:roe(g),questionOrders:ioe(g),formOrder:noe(g)}]:null}).filter(p=>p!==null)),u=Object.assign({},...a.map((p,m)=>{const g=Iu(t.components[p]||{response:[]},t);return{[`${p}_${m}`]:{aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}},stimulus:{valid:!g.response.some(b=>b.type==="reactive"&&b.required!==!1),values:{}},provenanceGraph:{aboveStimulus:void 0,belowStimulus:void 0,stimulus:void 0,sidebar:void 0}}}})),c=Object.assign({},...a.map((p,m)=>({[`${p}_${m}`]:{aboveStimulus:!0,belowStimulus:!0,sidebar:!0,stimulus:!0,provenanceGraph:{aboveStimulus:void 0,belowStimulus:void 0,stimulus:void 0,sidebar:void 0}}}))),d={studyId:e,isRecording:!1,answers:Object.keys(i).length>0?i:l,sequence:n,config:t,showStudyBrowser:!0,showHelpText:!1,alertModal:{show:!1,message:""},trialValidation:Object.keys(i).length>0?c:u,reactiveAnswers:{},metadata:r,analysisProvState:{aboveStimulus:void 0,belowStimulus:void 0,stimulus:void 0,sidebar:void 0},analysisIsPlaying:!1,analysisHasAudio:!1,analysisHasProvenance:!1,modes:s,matrixAnswers:{},participantId:o,funcSequence:{}},f=Dft({name:"storeSlice",initialState:d,reducers:{setConfig(p,{payload:m}){p.config=m},setIsRecording(p,{payload:m}){p.isRecording=m},pushToFuncSequence(p,{payload:m}){if(p.funcSequence[m.funcName]||(p.funcSequence[m.funcName]=[]),p.funcSequence[m.funcName].length>m.funcIndex)return;const g=Iu(p.config.components[m.component]||{response:[]},t),b=`${m.funcName}_${m.index}_${m.component}_${m.funcIndex}`;p.funcSequence[m.funcName].push(m.component),p.answers[b]={answer:{},incorrectAnswers:{},componentName:m.component,trialOrder:`${m.index}_${m.funcIndex}`,startTime:0,endTime:-1,provenanceGraph:{aboveStimulus:void 0,belowStimulus:void 0,stimulus:void 0,sidebar:void 0},windowEvents:[],timedOut:!1,helpButtonClickedCount:0,parameters:m.parameters||("parameters"in g?g.parameters:{})||{},correctAnswer:m.correctAnswer||g.correctAnswer||[],optionOrders:roe(g),questionOrders:ioe(g),formOrder:noe(g)},p.trialValidation[b]={aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},stimulus:{valid:g.response.every(v=>v.type!=="reactive"),values:{}},sidebar:{valid:!1,values:{}},provenanceGraph:{aboveStimulus:void 0,belowStimulus:void 0,stimulus:void 0,sidebar:void 0}}},toggleStudyBrowser:p=>{p.showStudyBrowser=!p.showStudyBrowser},toggleShowHelpText:p=>{p.showHelpText=!p.showHelpText},setAlertModal:(p,m)=>{p.alertModal=m.payload},setReactiveAnswers:(p,m)=>{p.reactiveAnswers=m.payload},saveAnalysisState(p,{payload:m}){p.analysisProvState[m.location]=m.prov},setAnalysisIsPlaying(p,{payload:m}){p.analysisIsPlaying=m},setAnalysisHasAudio(p,{payload:m}){p.analysisHasAudio=m},setAnalysisHasProvenance(p,{payload:m}){p.analysisHasProvenance=m},setMatrixAnswersRadio:(p,m)=>{if(m.payload){const{responseId:g,questionKey:b,val:v}=m.payload;p.matrixAnswers={...p.matrixAnswers,[g]:{...p.matrixAnswers[g],[b]:v}}}else p.matrixAnswers={}},setMatrixAnswersCheckbox:(p,m)=>{var g;if(m.payload){const{responseId:b,questionKey:v,value:x,isChecked:E,choiceOptions:_}=m.payload,C=((g=p.matrixAnswers[b])==null?void 0:g[v])??"";let S="";E?C.length>0?S=[...C.split("|"),x].sort((k,R)=>_.map(O=>O.value).indexOf(k)-_.map(O=>O.value).indexOf(R)).join("|"):S=`${x}`:S=C.split("|").filter(k=>k!==x).join("|"),p.matrixAnswers={...p.matrixAnswers,[b]:{...p.matrixAnswers[b],[v]:S}}}else p.matrixAnswers={}},updateResponseBlockValidation:(p,{payload:m})=>{var b,v;if(!p.trialValidation[m.identifier])return;const g=(v=(b=p.trialValidation[m.identifier])==null?void 0:b[m.location])==null?void 0:v.values;Object.keys(m.values).length>0?p.trialValidation[m.identifier][m.location]={valid:m.status,values:{...g,...m.values}}:p.trialValidation[m.identifier][m.location]={valid:m.status,values:g||{}},m.provenanceGraph&&(p.trialValidation[m.identifier].provenanceGraph[m.location]=m.provenanceGraph)},saveTrialAnswer(p,{payload:m}){p.answers[m.identifier]={...m}},incrementHelpCounter(p,{payload:m}){p.answers[m.identifier].helpButtonClickedCount+=1},saveIncorrectAnswer(p,{payload:m}){const{identifier:g,answer:b,question:v}=m;p.answers[v].incorrectAnswers||(p.answers[v].incorrectAnswers={}),p.answers[v].incorrectAnswers[g]||(p.answers[v].incorrectAnswers[g]={id:g,value:[]}),p.answers[v].incorrectAnswers[g].value.push(b)},deleteDynamicBlockAnswers(p,{payload:m}){var E;const{currentStep:g,funcIndex:b,funcName:v}=m,x=new RegExp(`.*_${g}_.*_${b}`);Object.keys(p.answers).forEach(_=>{_.match(x)&&delete p.answers[_]}),p.funcSequence[v]&&(p.funcSequence[v]=p.funcSequence[m.funcName].filter((_,C)=>C!==b)),((E=p.funcSequence[v])==null?void 0:E.length)===0&&delete p.funcSequence[v]}}});return{store:Tft({reducer:f.reducer,preloadedState:d}),actions:f.actions}}const jEe=D.createContext(null);function Gi(){return D.useContext(jEe).actions}const ys=Wve,Wn=wJe;function zft(e){return Wn(t=>{if(e.includes("reviewer-"))return!0;const n=t.trialValidation[e]?Object.values(t.trialValidation[e]).every(r=>typeof r=="object"&&"valid"in r?r.valid:!0):!0;return n?Object.values(n).every(r=>r):!1})}const Uft=IEe(e=>e.sequence,e=>Rf(e));function zv(){return Wn(Uft)}var XR={exports:{}};function c2(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var QR={exports:{}};const qft={},Hft=Object.freeze(Object.defineProperty({__proto__:null,default:qft},Symbol.toStringTag,{value:"Module"})),BEe=tpe(Hft);var Wft=QR.exports,soe;function Bn(){return soe||(soe=1,function(e,t){(function(n,r){e.exports=r()})(Wft,function(){var n=n||function(r,i){var s;if(typeof window<"u"&&window.crypto&&(s=window.crypto),typeof self<"u"&&self.crypto&&(s=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(s=globalThis.crypto),!s&&typeof window<"u"&&window.msCrypto&&(s=window.msCrypto),!s&&typeof cs<"u"&&cs.crypto&&(s=cs.crypto),!s&&typeof c2=="function")try{s=BEe}catch{}var o=function(){if(s){if(typeof s.getRandomValues=="function")try{return s.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof s.randomBytes=="function")try{return s.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},a=Object.create||function(){function v(){}return function(x){var E;return v.prototype=x,E=new v,v.prototype=null,E}}(),l={},u=l.lib={},c=u.Base=function(){return{extend:function(v){var x=a(this);return v&&x.mixIn(v),(!x.hasOwnProperty("init")||this.init===x.init)&&(x.init=function(){x.$super.init.apply(this,arguments)}),x.init.prototype=x,x.$super=this,x},create:function(){var v=this.extend();return v.init.apply(v,arguments),v},init:function(){},mixIn:function(v){for(var x in v)v.hasOwnProperty(x)&&(this[x]=v[x]);v.hasOwnProperty("toString")&&(this.toString=v.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),d=u.WordArray=c.extend({init:function(v,x){v=this.words=v||[],x!=i?this.sigBytes=x:this.sigBytes=v.length*4},toString:function(v){return(v||h).stringify(this)},concat:function(v){var x=this.words,E=v.words,_=this.sigBytes,C=v.sigBytes;if(this.clamp(),_%4)for(var S=0;S<C;S++){var k=E[S>>>2]>>>24-S%4*8&255;x[_+S>>>2]|=k<<24-(_+S)%4*8}else for(var R=0;R<C;R+=4)x[_+R>>>2]=E[R>>>2];return this.sigBytes+=C,this},clamp:function(){var v=this.words,x=this.sigBytes;v[x>>>2]&=4294967295<<32-x%4*8,v.length=r.ceil(x/4)},clone:function(){var v=c.clone.call(this);return v.words=this.words.slice(0),v},random:function(v){for(var x=[],E=0;E<v;E+=4)x.push(o());return new d.init(x,v)}}),f=l.enc={},h=f.Hex={stringify:function(v){for(var x=v.words,E=v.sigBytes,_=[],C=0;C<E;C++){var S=x[C>>>2]>>>24-C%4*8&255;_.push((S>>>4).toString(16)),_.push((S&15).toString(16))}return _.join("")},parse:function(v){for(var x=v.length,E=[],_=0;_<x;_+=2)E[_>>>3]|=parseInt(v.substr(_,2),16)<<24-_%8*4;return new d.init(E,x/2)}},p=f.Latin1={stringify:function(v){for(var x=v.words,E=v.sigBytes,_=[],C=0;C<E;C++){var S=x[C>>>2]>>>24-C%4*8&255;_.push(String.fromCharCode(S))}return _.join("")},parse:function(v){for(var x=v.length,E=[],_=0;_<x;_++)E[_>>>2]|=(v.charCodeAt(_)&255)<<24-_%4*8;return new d.init(E,x)}},m=f.Utf8={stringify:function(v){try{return decodeURIComponent(escape(p.stringify(v)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(v){return p.parse(unescape(encodeURIComponent(v)))}},g=u.BufferedBlockAlgorithm=c.extend({reset:function(){this._data=new d.init,this._nDataBytes=0},_append:function(v){typeof v=="string"&&(v=m.parse(v)),this._data.concat(v),this._nDataBytes+=v.sigBytes},_process:function(v){var x,E=this._data,_=E.words,C=E.sigBytes,S=this.blockSize,k=S*4,R=C/k;v?R=r.ceil(R):R=r.max((R|0)-this._minBufferSize,0);var O=R*S,N=r.min(O*4,C);if(O){for(var L=0;L<O;L+=S)this._doProcessBlock(_,L);x=_.splice(0,O),E.sigBytes-=N}return new d.init(x,N)},clone:function(){var v=c.clone.call(this);return v._data=this._data.clone(),v},_minBufferSize:0});u.Hasher=g.extend({cfg:c.extend(),init:function(v){this.cfg=this.cfg.extend(v),this.reset()},reset:function(){g.reset.call(this),this._doReset()},update:function(v){return this._append(v),this._process(),this},finalize:function(v){v&&this._append(v);var x=this._doFinalize();return x},blockSize:16,_createHelper:function(v){return function(x,E){return new v.init(E).finalize(x)}},_createHmacHelper:function(v){return function(x,E){return new b.HMAC.init(v,E).finalize(x)}}});var b=l.algo={};return l}(Math);return n})}(QR)),QR.exports}var JR={exports:{}},Vft=JR.exports,ooe;function k$(){return ooe||(ooe=1,function(e,t){(function(n,r){e.exports=r(Bn())})(Vft,function(n){return function(r){var i=n,s=i.lib,o=s.Base,a=s.WordArray,l=i.x64={};l.Word=o.extend({init:function(u,c){this.high=u,this.low=c}}),l.WordArray=o.extend({init:function(u,c){u=this.words=u||[],c!=r?this.sigBytes=c:this.sigBytes=u.length*8},toX32:function(){for(var u=this.words,c=u.length,d=[],f=0;f<c;f++){var h=u[f];d.push(h.high),d.push(h.low)}return a.create(d,this.sigBytes)},clone:function(){for(var u=o.clone.call(this),c=u.words=this.words.slice(0),d=c.length,f=0;f<d;f++)c[f]=c[f].clone();return u}})}(),n})}(JR)),JR.exports}var ZR={exports:{}},Gft=ZR.exports,aoe;function Yft(){return aoe||(aoe=1,function(e,t){(function(n,r){e.exports=r(Bn())})(Gft,function(n){return function(){if(typeof ArrayBuffer=="function"){var r=n,i=r.lib,s=i.WordArray,o=s.init,a=s.init=function(l){if(l instanceof ArrayBuffer&&(l=new Uint8Array(l)),(l instanceof Int8Array||typeof Uint8ClampedArray<"u"&&l instanceof Uint8ClampedArray||l instanceof Int16Array||l instanceof Uint16Array||l instanceof Int32Array||l instanceof Uint32Array||l instanceof Float32Array||l instanceof Float64Array)&&(l=new Uint8Array(l.buffer,l.byteOffset,l.byteLength)),l instanceof Uint8Array){for(var u=l.byteLength,c=[],d=0;d<u;d++)c[d>>>2]|=l[d]<<24-d%4*8;o.call(this,c,u)}else o.apply(this,arguments)};a.prototype=s}}(),n.lib.WordArray})}(ZR)),ZR.exports}var e3={exports:{}},Kft=e3.exports,loe;function Xft(){return loe||(loe=1,function(e,t){(function(n,r){e.exports=r(Bn())})(Kft,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=r.enc;o.Utf16=o.Utf16BE={stringify:function(l){for(var u=l.words,c=l.sigBytes,d=[],f=0;f<c;f+=2){var h=u[f>>>2]>>>16-f%4*8&65535;d.push(String.fromCharCode(h))}return d.join("")},parse:function(l){for(var u=l.length,c=[],d=0;d<u;d++)c[d>>>1]|=l.charCodeAt(d)<<16-d%2*16;return s.create(c,u*2)}},o.Utf16LE={stringify:function(l){for(var u=l.words,c=l.sigBytes,d=[],f=0;f<c;f+=2){var h=a(u[f>>>2]>>>16-f%4*8&65535);d.push(String.fromCharCode(h))}return d.join("")},parse:function(l){for(var u=l.length,c=[],d=0;d<u;d++)c[d>>>1]|=a(l.charCodeAt(d)<<16-d%2*16);return s.create(c,u*2)}};function a(l){return l<<8&4278255360|l>>>8&16711935}}(),n.enc.Utf16})}(e3)),e3.exports}var t3={exports:{}},Qft=t3.exports,uoe;function Uv(){return uoe||(uoe=1,function(e,t){(function(n,r){e.exports=r(Bn())})(Qft,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=r.enc;o.Base64={stringify:function(l){var u=l.words,c=l.sigBytes,d=this._map;l.clamp();for(var f=[],h=0;h<c;h+=3)for(var p=u[h>>>2]>>>24-h%4*8&255,m=u[h+1>>>2]>>>24-(h+1)%4*8&255,g=u[h+2>>>2]>>>24-(h+2)%4*8&255,b=p<<16|m<<8|g,v=0;v<4&&h+v*.75<c;v++)f.push(d.charAt(b>>>6*(3-v)&63));var x=d.charAt(64);if(x)for(;f.length%4;)f.push(x);return f.join("")},parse:function(l){var u=l.length,c=this._map,d=this._reverseMap;if(!d){d=this._reverseMap=[];for(var f=0;f<c.length;f++)d[c.charCodeAt(f)]=f}var h=c.charAt(64);if(h){var p=l.indexOf(h);p!==-1&&(u=p)}return a(l,u,d)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function a(l,u,c){for(var d=[],f=0,h=0;h<u;h++)if(h%4){var p=c[l.charCodeAt(h-1)]<<h%4*2,m=c[l.charCodeAt(h)]>>>6-h%4*2,g=p|m;d[f>>>2]|=g<<24-f%4*8,f++}return s.create(d,f)}}(),n.enc.Base64})}(t3)),t3.exports}var n3={exports:{}},Jft=n3.exports,coe;function Zft(){return coe||(coe=1,function(e,t){(function(n,r){e.exports=r(Bn())})(Jft,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=r.enc;o.Base64url={stringify:function(l,u){u===void 0&&(u=!0);var c=l.words,d=l.sigBytes,f=u?this._safe_map:this._map;l.clamp();for(var h=[],p=0;p<d;p+=3)for(var m=c[p>>>2]>>>24-p%4*8&255,g=c[p+1>>>2]>>>24-(p+1)%4*8&255,b=c[p+2>>>2]>>>24-(p+2)%4*8&255,v=m<<16|g<<8|b,x=0;x<4&&p+x*.75<d;x++)h.push(f.charAt(v>>>6*(3-x)&63));var E=f.charAt(64);if(E)for(;h.length%4;)h.push(E);return h.join("")},parse:function(l,u){u===void 0&&(u=!0);var c=l.length,d=u?this._safe_map:this._map,f=this._reverseMap;if(!f){f=this._reverseMap=[];for(var h=0;h<d.length;h++)f[d.charCodeAt(h)]=h}var p=d.charAt(64);if(p){var m=l.indexOf(p);m!==-1&&(c=m)}return a(l,c,f)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function a(l,u,c){for(var d=[],f=0,h=0;h<u;h++)if(h%4){var p=c[l.charCodeAt(h-1)]<<h%4*2,m=c[l.charCodeAt(h)]>>>6-h%4*2,g=p|m;d[f>>>2]|=g<<24-f%4*8,f++}return s.create(d,f)}}(),n.enc.Base64url})}(n3)),n3.exports}var r3={exports:{}},eht=r3.exports,doe;function qv(){return doe||(doe=1,function(e,t){(function(n,r){e.exports=r(Bn())})(eht,function(n){return function(r){var i=n,s=i.lib,o=s.WordArray,a=s.Hasher,l=i.algo,u=[];(function(){for(var m=0;m<64;m++)u[m]=r.abs(r.sin(m+1))*4294967296|0})();var c=l.MD5=a.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(m,g){for(var b=0;b<16;b++){var v=g+b,x=m[v];m[v]=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360}var E=this._hash.words,_=m[g+0],C=m[g+1],S=m[g+2],k=m[g+3],R=m[g+4],O=m[g+5],N=m[g+6],L=m[g+7],$=m[g+8],B=m[g+9],H=m[g+10],Y=m[g+11],J=m[g+12],K=m[g+13],Z=m[g+14],U=m[g+15],j=E[0],V=E[1],z=E[2],G=E[3];j=d(j,V,z,G,_,7,u[0]),G=d(G,j,V,z,C,12,u[1]),z=d(z,G,j,V,S,17,u[2]),V=d(V,z,G,j,k,22,u[3]),j=d(j,V,z,G,R,7,u[4]),G=d(G,j,V,z,O,12,u[5]),z=d(z,G,j,V,N,17,u[6]),V=d(V,z,G,j,L,22,u[7]),j=d(j,V,z,G,$,7,u[8]),G=d(G,j,V,z,B,12,u[9]),z=d(z,G,j,V,H,17,u[10]),V=d(V,z,G,j,Y,22,u[11]),j=d(j,V,z,G,J,7,u[12]),G=d(G,j,V,z,K,12,u[13]),z=d(z,G,j,V,Z,17,u[14]),V=d(V,z,G,j,U,22,u[15]),j=f(j,V,z,G,C,5,u[16]),G=f(G,j,V,z,N,9,u[17]),z=f(z,G,j,V,Y,14,u[18]),V=f(V,z,G,j,_,20,u[19]),j=f(j,V,z,G,O,5,u[20]),G=f(G,j,V,z,H,9,u[21]),z=f(z,G,j,V,U,14,u[22]),V=f(V,z,G,j,R,20,u[23]),j=f(j,V,z,G,B,5,u[24]),G=f(G,j,V,z,Z,9,u[25]),z=f(z,G,j,V,k,14,u[26]),V=f(V,z,G,j,$,20,u[27]),j=f(j,V,z,G,K,5,u[28]),G=f(G,j,V,z,S,9,u[29]),z=f(z,G,j,V,L,14,u[30]),V=f(V,z,G,j,J,20,u[31]),j=h(j,V,z,G,O,4,u[32]),G=h(G,j,V,z,$,11,u[33]),z=h(z,G,j,V,Y,16,u[34]),V=h(V,z,G,j,Z,23,u[35]),j=h(j,V,z,G,C,4,u[36]),G=h(G,j,V,z,R,11,u[37]),z=h(z,G,j,V,L,16,u[38]),V=h(V,z,G,j,H,23,u[39]),j=h(j,V,z,G,K,4,u[40]),G=h(G,j,V,z,_,11,u[41]),z=h(z,G,j,V,k,16,u[42]),V=h(V,z,G,j,N,23,u[43]),j=h(j,V,z,G,B,4,u[44]),G=h(G,j,V,z,J,11,u[45]),z=h(z,G,j,V,U,16,u[46]),V=h(V,z,G,j,S,23,u[47]),j=p(j,V,z,G,_,6,u[48]),G=p(G,j,V,z,L,10,u[49]),z=p(z,G,j,V,Z,15,u[50]),V=p(V,z,G,j,O,21,u[51]),j=p(j,V,z,G,J,6,u[52]),G=p(G,j,V,z,k,10,u[53]),z=p(z,G,j,V,H,15,u[54]),V=p(V,z,G,j,C,21,u[55]),j=p(j,V,z,G,$,6,u[56]),G=p(G,j,V,z,U,10,u[57]),z=p(z,G,j,V,N,15,u[58]),V=p(V,z,G,j,K,21,u[59]),j=p(j,V,z,G,R,6,u[60]),G=p(G,j,V,z,Y,10,u[61]),z=p(z,G,j,V,S,15,u[62]),V=p(V,z,G,j,B,21,u[63]),E[0]=E[0]+j|0,E[1]=E[1]+V|0,E[2]=E[2]+z|0,E[3]=E[3]+G|0},_doFinalize:function(){var m=this._data,g=m.words,b=this._nDataBytes*8,v=m.sigBytes*8;g[v>>>5]|=128<<24-v%32;var x=r.floor(b/4294967296),E=b;g[(v+64>>>9<<4)+15]=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360,g[(v+64>>>9<<4)+14]=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360,m.sigBytes=(g.length+1)*4,this._process();for(var _=this._hash,C=_.words,S=0;S<4;S++){var k=C[S];C[S]=(k<<8|k>>>24)&16711935|(k<<24|k>>>8)&4278255360}return _},clone:function(){var m=a.clone.call(this);return m._hash=this._hash.clone(),m}});function d(m,g,b,v,x,E,_){var C=m+(g&b|~g&v)+x+_;return(C<<E|C>>>32-E)+g}function f(m,g,b,v,x,E,_){var C=m+(g&v|b&~v)+x+_;return(C<<E|C>>>32-E)+g}function h(m,g,b,v,x,E,_){var C=m+(g^b^v)+x+_;return(C<<E|C>>>32-E)+g}function p(m,g,b,v,x,E,_){var C=m+(b^(g|~v))+x+_;return(C<<E|C>>>32-E)+g}i.MD5=a._createHelper(c),i.HmacMD5=a._createHmacHelper(c)}(Math),n.MD5})}(r3)),r3.exports}var i3={exports:{}},tht=i3.exports,foe;function zEe(){return foe||(foe=1,function(e,t){(function(n,r){e.exports=r(Bn())})(tht,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=i.Hasher,a=r.algo,l=[],u=a.SHA1=o.extend({_doReset:function(){this._hash=new s.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(c,d){for(var f=this._hash.words,h=f[0],p=f[1],m=f[2],g=f[3],b=f[4],v=0;v<80;v++){if(v<16)l[v]=c[d+v]|0;else{var x=l[v-3]^l[v-8]^l[v-14]^l[v-16];l[v]=x<<1|x>>>31}var E=(h<<5|h>>>27)+b+l[v];v<20?E+=(p&m|~p&g)+1518500249:v<40?E+=(p^m^g)+1859775393:v<60?E+=(p&m|p&g|m&g)-1894007588:E+=(p^m^g)-899497514,b=g,g=m,m=p<<30|p>>>2,p=h,h=E}f[0]=f[0]+h|0,f[1]=f[1]+p|0,f[2]=f[2]+m|0,f[3]=f[3]+g|0,f[4]=f[4]+b|0},_doFinalize:function(){var c=this._data,d=c.words,f=this._nDataBytes*8,h=c.sigBytes*8;return d[h>>>5]|=128<<24-h%32,d[(h+64>>>9<<4)+14]=Math.floor(f/4294967296),d[(h+64>>>9<<4)+15]=f,c.sigBytes=d.length*4,this._process(),this._hash},clone:function(){var c=o.clone.call(this);return c._hash=this._hash.clone(),c}});r.SHA1=o._createHelper(u),r.HmacSHA1=o._createHmacHelper(u)}(),n.SHA1})}(i3)),i3.exports}var s3={exports:{}},nht=s3.exports,hoe;function cV(){return hoe||(hoe=1,function(e,t){(function(n,r){e.exports=r(Bn())})(nht,function(n){return function(r){var i=n,s=i.lib,o=s.WordArray,a=s.Hasher,l=i.algo,u=[],c=[];(function(){function h(b){for(var v=r.sqrt(b),x=2;x<=v;x++)if(!(b%x))return!1;return!0}function p(b){return(b-(b|0))*4294967296|0}for(var m=2,g=0;g<64;)h(m)&&(g<8&&(u[g]=p(r.pow(m,1/2))),c[g]=p(r.pow(m,1/3)),g++),m++})();var d=[],f=l.SHA256=a.extend({_doReset:function(){this._hash=new o.init(u.slice(0))},_doProcessBlock:function(h,p){for(var m=this._hash.words,g=m[0],b=m[1],v=m[2],x=m[3],E=m[4],_=m[5],C=m[6],S=m[7],k=0;k<64;k++){if(k<16)d[k]=h[p+k]|0;else{var R=d[k-15],O=(R<<25|R>>>7)^(R<<14|R>>>18)^R>>>3,N=d[k-2],L=(N<<15|N>>>17)^(N<<13|N>>>19)^N>>>10;d[k]=O+d[k-7]+L+d[k-16]}var $=E&_^~E&C,B=g&b^g&v^b&v,H=(g<<30|g>>>2)^(g<<19|g>>>13)^(g<<10|g>>>22),Y=(E<<26|E>>>6)^(E<<21|E>>>11)^(E<<7|E>>>25),J=S+Y+$+c[k]+d[k],K=H+B;S=C,C=_,_=E,E=x+J|0,x=v,v=b,b=g,g=J+K|0}m[0]=m[0]+g|0,m[1]=m[1]+b|0,m[2]=m[2]+v|0,m[3]=m[3]+x|0,m[4]=m[4]+E|0,m[5]=m[5]+_|0,m[6]=m[6]+C|0,m[7]=m[7]+S|0},_doFinalize:function(){var h=this._data,p=h.words,m=this._nDataBytes*8,g=h.sigBytes*8;return p[g>>>5]|=128<<24-g%32,p[(g+64>>>9<<4)+14]=r.floor(m/4294967296),p[(g+64>>>9<<4)+15]=m,h.sigBytes=p.length*4,this._process(),this._hash},clone:function(){var h=a.clone.call(this);return h._hash=this._hash.clone(),h}});i.SHA256=a._createHelper(f),i.HmacSHA256=a._createHmacHelper(f)}(Math),n.SHA256})}(s3)),s3.exports}var o3={exports:{}},rht=o3.exports,poe;function iht(){return poe||(poe=1,function(e,t){(function(n,r,i){e.exports=r(Bn(),cV())})(rht,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=r.algo,a=o.SHA256,l=o.SHA224=a.extend({_doReset:function(){this._hash=new s.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var u=a._doFinalize.call(this);return u.sigBytes-=4,u}});r.SHA224=a._createHelper(l),r.HmacSHA224=a._createHmacHelper(l)}(),n.SHA224})}(o3)),o3.exports}var a3={exports:{}},sht=a3.exports,moe;function UEe(){return moe||(moe=1,function(e,t){(function(n,r,i){e.exports=r(Bn(),k$())})(sht,function(n){return function(){var r=n,i=r.lib,s=i.Hasher,o=r.x64,a=o.Word,l=o.WordArray,u=r.algo;function c(){return a.create.apply(a,arguments)}var d=[c(1116352408,3609767458),c(1899447441,602891725),c(3049323471,3964484399),c(3921009573,2173295548),c(961987163,4081628472),c(1508970993,3053834265),c(2453635748,2937671579),c(2870763221,3664609560),c(3624381080,2734883394),c(310598401,1164996542),c(607225278,1323610764),c(1426881987,3590304994),c(1925078388,4068182383),c(2162078206,991336113),c(2614888103,633803317),c(3248222580,3479774868),c(3835390401,2666613458),c(4022224774,944711139),c(264347078,2341262773),c(604807628,2007800933),c(770255983,1495990901),c(1249150122,1856431235),c(1555081692,3175218132),c(1996064986,2198950837),c(2554220882,3999719339),c(2821834349,766784016),c(2952996808,2566594879),c(3210313671,3203337956),c(3336571891,1034457026),c(3584528711,2466948901),c(113926993,3758326383),c(338241895,168717936),c(666307205,1188179964),c(773529912,1546045734),c(1294757372,1522805485),c(1396182291,2643833823),c(1695183700,2343527390),c(1986661051,1014477480),c(2177026350,1206759142),c(2456956037,344077627),c(2730485921,1290863460),c(2820302411,3158454273),c(3259730800,3505952657),c(3345764771,106217008),c(3516065817,3606008344),c(3600352804,1432725776),c(4094571909,1467031594),c(275423344,851169720),c(430227734,3100823752),c(506948616,1363258195),c(659060556,3750685593),c(883997877,3785050280),c(958139571,3318307427),c(1322822218,3812723403),c(1537002063,2003034995),c(1747873779,3602036899),c(1955562222,1575990012),c(2024104815,1125592928),c(2227730452,2716904306),c(2361852424,442776044),c(2428436474,593698344),c(2756734187,3733110249),c(3204031479,2999351573),c(3329325298,3815920427),c(3391569614,3928383900),c(3515267271,566280711),c(3940187606,3454069534),c(4118630271,4000239992),c(116418474,1914138554),c(174292421,2731055270),c(289380356,3203993006),c(460393269,320620315),c(685471733,587496836),c(852142971,1086792851),c(1017036298,365543100),c(1126000580,2618297676),c(1288033470,3409855158),c(1501505948,4234509866),c(1607167915,987167468),c(1816402316,1246189591)],f=[];(function(){for(var p=0;p<80;p++)f[p]=c()})();var h=u.SHA512=s.extend({_doReset:function(){this._hash=new l.init([new a.init(1779033703,4089235720),new a.init(3144134277,2227873595),new a.init(1013904242,4271175723),new a.init(2773480762,1595750129),new a.init(1359893119,2917565137),new a.init(2600822924,725511199),new a.init(528734635,4215389547),new a.init(1541459225,327033209)])},_doProcessBlock:function(p,m){for(var g=this._hash.words,b=g[0],v=g[1],x=g[2],E=g[3],_=g[4],C=g[5],S=g[6],k=g[7],R=b.high,O=b.low,N=v.high,L=v.low,$=x.high,B=x.low,H=E.high,Y=E.low,J=_.high,K=_.low,Z=C.high,U=C.low,j=S.high,V=S.low,z=k.high,G=k.low,Q=R,ie=O,me=N,ae=L,fe=$,be=B,te=H,re=Y,we=J,Ee=K,Fe=Z,We=U,Me=j,Be=V,Je=z,lt=G,ht=0;ht<80;ht++){var vt,Pe,wt=f[ht];if(ht<16)Pe=wt.high=p[m+ht*2]|0,vt=wt.low=p[m+ht*2+1]|0;else{var Wt=f[ht-15],Ce=Wt.high,Ne=Wt.low,ot=(Ce>>>1|Ne<<31)^(Ce>>>8|Ne<<24)^Ce>>>7,xt=(Ne>>>1|Ce<<31)^(Ne>>>8|Ce<<24)^(Ne>>>7|Ce<<25),Ct=f[ht-2],Qt=Ct.high,yn=Ct.low,er=(Qt>>>19|yn<<13)^(Qt<<3|yn>>>29)^Qt>>>6,Wr=(yn>>>19|Qt<<13)^(yn<<3|Qt>>>29)^(yn>>>6|Qt<<26),pn=f[ht-7],En=pn.high,Mr=pn.low,On=f[ht-16],bs=On.high,Qr=On.low;vt=xt+Mr,Pe=ot+En+(vt>>>0<xt>>>0?1:0),vt=vt+Wr,Pe=Pe+er+(vt>>>0<Wr>>>0?1:0),vt=vt+Qr,Pe=Pe+bs+(vt>>>0<Qr>>>0?1:0),wt.high=Pe,wt.low=vt}var Lr=we&Fe^~we&Me,Jr=Ee&We^~Ee&Be,tr=Q&me^Q&fe^me&fe,Qs=ie&ae^ie&be^ae&be,su=(Q>>>28|ie<<4)^(Q<<30|ie>>>2)^(Q<<25|ie>>>7),ta=(ie>>>28|Q<<4)^(ie<<30|Q>>>2)^(ie<<25|Q>>>7),El=(we>>>14|Ee<<18)^(we>>>18|Ee<<14)^(we<<23|Ee>>>9),nr=(Ee>>>14|we<<18)^(Ee>>>18|we<<14)^(Ee<<23|we>>>9),Fr=d[ht],dr=Fr.high,ws=Fr.low,Gn=lt+nr,li=Je+El+(Gn>>>0<lt>>>0?1:0),Gn=Gn+Jr,li=li+Lr+(Gn>>>0<Jr>>>0?1:0),Gn=Gn+ws,li=li+dr+(Gn>>>0<ws>>>0?1:0),Gn=Gn+vt,li=li+Pe+(Gn>>>0<vt>>>0?1:0),xs=ta+Qs,Qi=su+tr+(xs>>>0<ta>>>0?1:0);Je=Me,lt=Be,Me=Fe,Be=We,Fe=we,We=Ee,Ee=re+Gn|0,we=te+li+(Ee>>>0<re>>>0?1:0)|0,te=fe,re=be,fe=me,be=ae,me=Q,ae=ie,ie=Gn+xs|0,Q=li+Qi+(ie>>>0<Gn>>>0?1:0)|0}O=b.low=O+ie,b.high=R+Q+(O>>>0<ie>>>0?1:0),L=v.low=L+ae,v.high=N+me+(L>>>0<ae>>>0?1:0),B=x.low=B+be,x.high=$+fe+(B>>>0<be>>>0?1:0),Y=E.low=Y+re,E.high=H+te+(Y>>>0<re>>>0?1:0),K=_.low=K+Ee,_.high=J+we+(K>>>0<Ee>>>0?1:0),U=C.low=U+We,C.high=Z+Fe+(U>>>0<We>>>0?1:0),V=S.low=V+Be,S.high=j+Me+(V>>>0<Be>>>0?1:0),G=k.low=G+lt,k.high=z+Je+(G>>>0<lt>>>0?1:0)},_doFinalize:function(){var p=this._data,m=p.words,g=this._nDataBytes*8,b=p.sigBytes*8;m[b>>>5]|=128<<24-b%32,m[(b+128>>>10<<5)+30]=Math.floor(g/4294967296),m[(b+128>>>10<<5)+31]=g,p.sigBytes=m.length*4,this._process();var v=this._hash.toX32();return v},clone:function(){var p=s.clone.call(this);return p._hash=this._hash.clone(),p},blockSize:1024/32});r.SHA512=s._createHelper(h),r.HmacSHA512=s._createHmacHelper(h)}(),n.SHA512})}(a3)),a3.exports}var l3={exports:{}},oht=l3.exports,goe;function aht(){return goe||(goe=1,function(e,t){(function(n,r,i){e.exports=r(Bn(),k$(),UEe())})(oht,function(n){return function(){var r=n,i=r.x64,s=i.Word,o=i.WordArray,a=r.algo,l=a.SHA512,u=a.SHA384=l.extend({_doReset:function(){this._hash=new o.init([new s.init(3418070365,3238371032),new s.init(1654270250,914150663),new s.init(2438529370,812702999),new s.init(355462360,4144912697),new s.init(1731405415,4290775857),new s.init(2394180231,1750603025),new s.init(3675008525,1694076839),new s.init(1203062813,3204075428)])},_doFinalize:function(){var c=l._doFinalize.call(this);return c.sigBytes-=16,c}});r.SHA384=l._createHelper(u),r.HmacSHA384=l._createHmacHelper(u)}(),n.SHA384})}(l3)),l3.exports}var u3={exports:{}},lht=u3.exports,yoe;function uht(){return yoe||(yoe=1,function(e,t){(function(n,r,i){e.exports=r(Bn(),k$())})(lht,function(n){return function(r){var i=n,s=i.lib,o=s.WordArray,a=s.Hasher,l=i.x64,u=l.Word,c=i.algo,d=[],f=[],h=[];(function(){for(var g=1,b=0,v=0;v<24;v++){d[g+5*b]=(v+1)*(v+2)/2%64;var x=b%5,E=(2*g+3*b)%5;g=x,b=E}for(var g=0;g<5;g++)for(var b=0;b<5;b++)f[g+5*b]=b+(2*g+3*b)%5*5;for(var _=1,C=0;C<24;C++){for(var S=0,k=0,R=0;R<7;R++){if(_&1){var O=(1<<R)-1;O<32?k^=1<<O:S^=1<<O-32}_&128?_=_<<1^113:_<<=1}h[C]=u.create(S,k)}})();var p=[];(function(){for(var g=0;g<25;g++)p[g]=u.create()})();var m=c.SHA3=a.extend({cfg:a.cfg.extend({outputLength:512}),_doReset:function(){for(var g=this._state=[],b=0;b<25;b++)g[b]=new u.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(g,b){for(var v=this._state,x=this.blockSize/2,E=0;E<x;E++){var _=g[b+2*E],C=g[b+2*E+1];_=(_<<8|_>>>24)&16711935|(_<<24|_>>>8)&4278255360,C=(C<<8|C>>>24)&16711935|(C<<24|C>>>8)&4278255360;var S=v[E];S.high^=C,S.low^=_}for(var k=0;k<24;k++){for(var R=0;R<5;R++){for(var O=0,N=0,L=0;L<5;L++){var S=v[R+5*L];O^=S.high,N^=S.low}var $=p[R];$.high=O,$.low=N}for(var R=0;R<5;R++)for(var B=p[(R+4)%5],H=p[(R+1)%5],Y=H.high,J=H.low,O=B.high^(Y<<1|J>>>31),N=B.low^(J<<1|Y>>>31),L=0;L<5;L++){var S=v[R+5*L];S.high^=O,S.low^=N}for(var K=1;K<25;K++){var O,N,S=v[K],Z=S.high,U=S.low,j=d[K];j<32?(O=Z<<j|U>>>32-j,N=U<<j|Z>>>32-j):(O=U<<j-32|Z>>>64-j,N=Z<<j-32|U>>>64-j);var V=p[f[K]];V.high=O,V.low=N}var z=p[0],G=v[0];z.high=G.high,z.low=G.low;for(var R=0;R<5;R++)for(var L=0;L<5;L++){var K=R+5*L,S=v[K],Q=p[K],ie=p[(R+1)%5+5*L],me=p[(R+2)%5+5*L];S.high=Q.high^~ie.high&me.high,S.low=Q.low^~ie.low&me.low}var S=v[0],ae=h[k];S.high^=ae.high,S.low^=ae.low}},_doFinalize:function(){var g=this._data,b=g.words;this._nDataBytes*8;var v=g.sigBytes*8,x=this.blockSize*32;b[v>>>5]|=1<<24-v%32,b[(r.ceil((v+1)/x)*x>>>5)-1]|=128,g.sigBytes=b.length*4,this._process();for(var E=this._state,_=this.cfg.outputLength/8,C=_/8,S=[],k=0;k<C;k++){var R=E[k],O=R.high,N=R.low;O=(O<<8|O>>>24)&16711935|(O<<24|O>>>8)&4278255360,N=(N<<8|N>>>24)&16711935|(N<<24|N>>>8)&4278255360,S.push(N),S.push(O)}return new o.init(S,_)},clone:function(){for(var g=a.clone.call(this),b=g._state=this._state.slice(0),v=0;v<25;v++)b[v]=b[v].clone();return g}});i.SHA3=a._createHelper(m),i.HmacSHA3=a._createHmacHelper(m)}(Math),n.SHA3})}(u3)),u3.exports}var c3={exports:{}},cht=c3.exports,voe;function dht(){return voe||(voe=1,function(e,t){(function(n,r){e.exports=r(Bn())})(cht,function(n){/** @preserve
			(c) 2012 by Cdric Mesnil. All rights reserved.

			Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

			    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
			    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

			THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
			*/return function(r){var i=n,s=i.lib,o=s.WordArray,a=s.Hasher,l=i.algo,u=o.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),c=o.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),d=o.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),f=o.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),h=o.create([0,1518500249,1859775393,2400959708,2840853838]),p=o.create([1352829926,1548603684,1836072691,2053994217,0]),m=l.RIPEMD160=a.extend({_doReset:function(){this._hash=o.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(C,S){for(var k=0;k<16;k++){var R=S+k,O=C[R];C[R]=(O<<8|O>>>24)&16711935|(O<<24|O>>>8)&4278255360}var N=this._hash.words,L=h.words,$=p.words,B=u.words,H=c.words,Y=d.words,J=f.words,K,Z,U,j,V,z,G,Q,ie,me;z=K=N[0],G=Z=N[1],Q=U=N[2],ie=j=N[3],me=V=N[4];for(var ae,k=0;k<80;k+=1)ae=K+C[S+B[k]]|0,k<16?ae+=g(Z,U,j)+L[0]:k<32?ae+=b(Z,U,j)+L[1]:k<48?ae+=v(Z,U,j)+L[2]:k<64?ae+=x(Z,U,j)+L[3]:ae+=E(Z,U,j)+L[4],ae=ae|0,ae=_(ae,Y[k]),ae=ae+V|0,K=V,V=j,j=_(U,10),U=Z,Z=ae,ae=z+C[S+H[k]]|0,k<16?ae+=E(G,Q,ie)+$[0]:k<32?ae+=x(G,Q,ie)+$[1]:k<48?ae+=v(G,Q,ie)+$[2]:k<64?ae+=b(G,Q,ie)+$[3]:ae+=g(G,Q,ie)+$[4],ae=ae|0,ae=_(ae,J[k]),ae=ae+me|0,z=me,me=ie,ie=_(Q,10),Q=G,G=ae;ae=N[1]+U+ie|0,N[1]=N[2]+j+me|0,N[2]=N[3]+V+z|0,N[3]=N[4]+K+G|0,N[4]=N[0]+Z+Q|0,N[0]=ae},_doFinalize:function(){var C=this._data,S=C.words,k=this._nDataBytes*8,R=C.sigBytes*8;S[R>>>5]|=128<<24-R%32,S[(R+64>>>9<<4)+14]=(k<<8|k>>>24)&16711935|(k<<24|k>>>8)&4278255360,C.sigBytes=(S.length+1)*4,this._process();for(var O=this._hash,N=O.words,L=0;L<5;L++){var $=N[L];N[L]=($<<8|$>>>24)&16711935|($<<24|$>>>8)&4278255360}return O},clone:function(){var C=a.clone.call(this);return C._hash=this._hash.clone(),C}});function g(C,S,k){return C^S^k}function b(C,S,k){return C&S|~C&k}function v(C,S,k){return(C|~S)^k}function x(C,S,k){return C&k|S&~k}function E(C,S,k){return C^(S|~k)}function _(C,S){return C<<S|C>>>32-S}i.RIPEMD160=a._createHelper(m),i.HmacRIPEMD160=a._createHmacHelper(m)}(),n.RIPEMD160})}(c3)),c3.exports}var d3={exports:{}},fht=d3.exports,boe;function dV(){return boe||(boe=1,function(e,t){(function(n,r){e.exports=r(Bn())})(fht,function(n){(function(){var r=n,i=r.lib,s=i.Base,o=r.enc,a=o.Utf8,l=r.algo;l.HMAC=s.extend({init:function(u,c){u=this._hasher=new u.init,typeof c=="string"&&(c=a.parse(c));var d=u.blockSize,f=d*4;c.sigBytes>f&&(c=u.finalize(c)),c.clamp();for(var h=this._oKey=c.clone(),p=this._iKey=c.clone(),m=h.words,g=p.words,b=0;b<d;b++)m[b]^=1549556828,g[b]^=909522486;h.sigBytes=p.sigBytes=f,this.reset()},reset:function(){var u=this._hasher;u.reset(),u.update(this._iKey)},update:function(u){return this._hasher.update(u),this},finalize:function(u){var c=this._hasher,d=c.finalize(u);c.reset();var f=c.finalize(this._oKey.clone().concat(d));return f}})})()})}(d3)),d3.exports}var f3={exports:{}},hht=f3.exports,woe;function pht(){return woe||(woe=1,function(e,t){(function(n,r,i){e.exports=r(Bn(),cV(),dV())})(hht,function(n){return function(){var r=n,i=r.lib,s=i.Base,o=i.WordArray,a=r.algo,l=a.SHA256,u=a.HMAC,c=a.PBKDF2=s.extend({cfg:s.extend({keySize:128/32,hasher:l,iterations:25e4}),init:function(d){this.cfg=this.cfg.extend(d)},compute:function(d,f){for(var h=this.cfg,p=u.create(h.hasher,d),m=o.create(),g=o.create([1]),b=m.words,v=g.words,x=h.keySize,E=h.iterations;b.length<x;){var _=p.update(f).finalize(g);p.reset();for(var C=_.words,S=C.length,k=_,R=1;R<E;R++){k=p.finalize(k),p.reset();for(var O=k.words,N=0;N<S;N++)C[N]^=O[N]}m.concat(_),v[0]++}return m.sigBytes=x*4,m}});r.PBKDF2=function(d,f,h){return c.create(h).compute(d,f)}}(),n.PBKDF2})}(f3)),f3.exports}var h3={exports:{}},mht=h3.exports,xoe;function G0(){return xoe||(xoe=1,function(e,t){(function(n,r,i){e.exports=r(Bn(),zEe(),dV())})(mht,function(n){return function(){var r=n,i=r.lib,s=i.Base,o=i.WordArray,a=r.algo,l=a.MD5,u=a.EvpKDF=s.extend({cfg:s.extend({keySize:128/32,hasher:l,iterations:1}),init:function(c){this.cfg=this.cfg.extend(c)},compute:function(c,d){for(var f,h=this.cfg,p=h.hasher.create(),m=o.create(),g=m.words,b=h.keySize,v=h.iterations;g.length<b;){f&&p.update(f),f=p.update(c).finalize(d),p.reset();for(var x=1;x<v;x++)f=p.finalize(f),p.reset();m.concat(f)}return m.sigBytes=b*4,m}});r.EvpKDF=function(c,d,f){return u.create(f).compute(c,d)}}(),n.EvpKDF})}(h3)),h3.exports}var p3={exports:{}},ght=p3.exports,Eoe;function Ks(){return Eoe||(Eoe=1,function(e,t){(function(n,r,i){e.exports=r(Bn(),G0())})(ght,function(n){n.lib.Cipher||function(r){var i=n,s=i.lib,o=s.Base,a=s.WordArray,l=s.BufferedBlockAlgorithm,u=i.enc;u.Utf8;var c=u.Base64,d=i.algo,f=d.EvpKDF,h=s.Cipher=l.extend({cfg:o.extend(),createEncryptor:function(O,N){return this.create(this._ENC_XFORM_MODE,O,N)},createDecryptor:function(O,N){return this.create(this._DEC_XFORM_MODE,O,N)},init:function(O,N,L){this.cfg=this.cfg.extend(L),this._xformMode=O,this._key=N,this.reset()},reset:function(){l.reset.call(this),this._doReset()},process:function(O){return this._append(O),this._process()},finalize:function(O){O&&this._append(O);var N=this._doFinalize();return N},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function O(N){return typeof N=="string"?R:C}return function(N){return{encrypt:function(L,$,B){return O($).encrypt(N,L,$,B)},decrypt:function(L,$,B){return O($).decrypt(N,L,$,B)}}}}()});s.StreamCipher=h.extend({_doFinalize:function(){var O=this._process(!0);return O},blockSize:1});var p=i.mode={},m=s.BlockCipherMode=o.extend({createEncryptor:function(O,N){return this.Encryptor.create(O,N)},createDecryptor:function(O,N){return this.Decryptor.create(O,N)},init:function(O,N){this._cipher=O,this._iv=N}}),g=p.CBC=function(){var O=m.extend();O.Encryptor=O.extend({processBlock:function(L,$){var B=this._cipher,H=B.blockSize;N.call(this,L,$,H),B.encryptBlock(L,$),this._prevBlock=L.slice($,$+H)}}),O.Decryptor=O.extend({processBlock:function(L,$){var B=this._cipher,H=B.blockSize,Y=L.slice($,$+H);B.decryptBlock(L,$),N.call(this,L,$,H),this._prevBlock=Y}});function N(L,$,B){var H,Y=this._iv;Y?(H=Y,this._iv=r):H=this._prevBlock;for(var J=0;J<B;J++)L[$+J]^=H[J]}return O}(),b=i.pad={},v=b.Pkcs7={pad:function(O,N){for(var L=N*4,$=L-O.sigBytes%L,B=$<<24|$<<16|$<<8|$,H=[],Y=0;Y<$;Y+=4)H.push(B);var J=a.create(H,$);O.concat(J)},unpad:function(O){var N=O.words[O.sigBytes-1>>>2]&255;O.sigBytes-=N}};s.BlockCipher=h.extend({cfg:h.cfg.extend({mode:g,padding:v}),reset:function(){var O;h.reset.call(this);var N=this.cfg,L=N.iv,$=N.mode;this._xformMode==this._ENC_XFORM_MODE?O=$.createEncryptor:(O=$.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==O?this._mode.init(this,L&&L.words):(this._mode=O.call($,this,L&&L.words),this._mode.__creator=O)},_doProcessBlock:function(O,N){this._mode.processBlock(O,N)},_doFinalize:function(){var O,N=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(N.pad(this._data,this.blockSize),O=this._process(!0)):(O=this._process(!0),N.unpad(O)),O},blockSize:128/32});var x=s.CipherParams=o.extend({init:function(O){this.mixIn(O)},toString:function(O){return(O||this.formatter).stringify(this)}}),E=i.format={},_=E.OpenSSL={stringify:function(O){var N,L=O.ciphertext,$=O.salt;return $?N=a.create([1398893684,1701076831]).concat($).concat(L):N=L,N.toString(c)},parse:function(O){var N,L=c.parse(O),$=L.words;return $[0]==1398893684&&$[1]==1701076831&&(N=a.create($.slice(2,4)),$.splice(0,4),L.sigBytes-=16),x.create({ciphertext:L,salt:N})}},C=s.SerializableCipher=o.extend({cfg:o.extend({format:_}),encrypt:function(O,N,L,$){$=this.cfg.extend($);var B=O.createEncryptor(L,$),H=B.finalize(N),Y=B.cfg;return x.create({ciphertext:H,key:L,iv:Y.iv,algorithm:O,mode:Y.mode,padding:Y.padding,blockSize:O.blockSize,formatter:$.format})},decrypt:function(O,N,L,$){$=this.cfg.extend($),N=this._parse(N,$.format);var B=O.createDecryptor(L,$).finalize(N.ciphertext);return B},_parse:function(O,N){return typeof O=="string"?N.parse(O,this):O}}),S=i.kdf={},k=S.OpenSSL={execute:function(O,N,L,$,B){if($||($=a.random(64/8)),B)var H=f.create({keySize:N+L,hasher:B}).compute(O,$);else var H=f.create({keySize:N+L}).compute(O,$);var Y=a.create(H.words.slice(N),L*4);return H.sigBytes=N*4,x.create({key:H,iv:Y,salt:$})}},R=s.PasswordBasedCipher=C.extend({cfg:C.cfg.extend({kdf:k}),encrypt:function(O,N,L,$){$=this.cfg.extend($);var B=$.kdf.execute(L,O.keySize,O.ivSize,$.salt,$.hasher);$.iv=B.iv;var H=C.encrypt.call(this,O,N,B.key,$);return H.mixIn(B),H},decrypt:function(O,N,L,$){$=this.cfg.extend($),N=this._parse(N,$.format);var B=$.kdf.execute(L,O.keySize,O.ivSize,N.salt,$.hasher);$.iv=B.iv;var H=C.decrypt.call(this,O,N,B.key,$);return H}})}()})}(p3)),p3.exports}var m3={exports:{}},yht=m3.exports,_oe;function vht(){return _oe||(_oe=1,function(e,t){(function(n,r,i){e.exports=r(Bn(),Ks())})(yht,function(n){return n.mode.CFB=function(){var r=n.lib.BlockCipherMode.extend();r.Encryptor=r.extend({processBlock:function(s,o){var a=this._cipher,l=a.blockSize;i.call(this,s,o,l,a),this._prevBlock=s.slice(o,o+l)}}),r.Decryptor=r.extend({processBlock:function(s,o){var a=this._cipher,l=a.blockSize,u=s.slice(o,o+l);i.call(this,s,o,l,a),this._prevBlock=u}});function i(s,o,a,l){var u,c=this._iv;c?(u=c.slice(0),this._iv=void 0):u=this._prevBlock,l.encryptBlock(u,0);for(var d=0;d<a;d++)s[o+d]^=u[d]}return r}(),n.mode.CFB})}(m3)),m3.exports}var g3={exports:{}},bht=g3.exports,Toe;function wht(){return Toe||(Toe=1,function(e,t){(function(n,r,i){e.exports=r(Bn(),Ks())})(bht,function(n){return n.mode.CTR=function(){var r=n.lib.BlockCipherMode.extend(),i=r.Encryptor=r.extend({processBlock:function(s,o){var a=this._cipher,l=a.blockSize,u=this._iv,c=this._counter;u&&(c=this._counter=u.slice(0),this._iv=void 0);var d=c.slice(0);a.encryptBlock(d,0),c[l-1]=c[l-1]+1|0;for(var f=0;f<l;f++)s[o+f]^=d[f]}});return r.Decryptor=i,r}(),n.mode.CTR})}(g3)),g3.exports}var y3={exports:{}},xht=y3.exports,Coe;function Eht(){return Coe||(Coe=1,function(e,t){(function(n,r,i){e.exports=r(Bn(),Ks())})(xht,function(n){/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */return n.mode.CTRGladman=function(){var r=n.lib.BlockCipherMode.extend();function i(a){if((a>>24&255)===255){var l=a>>16&255,u=a>>8&255,c=a&255;l===255?(l=0,u===255?(u=0,c===255?c=0:++c):++u):++l,a=0,a+=l<<16,a+=u<<8,a+=c}else a+=1<<24;return a}function s(a){return(a[0]=i(a[0]))===0&&(a[1]=i(a[1])),a}var o=r.Encryptor=r.extend({processBlock:function(a,l){var u=this._cipher,c=u.blockSize,d=this._iv,f=this._counter;d&&(f=this._counter=d.slice(0),this._iv=void 0),s(f);var h=f.slice(0);u.encryptBlock(h,0);for(var p=0;p<c;p++)a[l+p]^=h[p]}});return r.Decryptor=o,r}(),n.mode.CTRGladman})}(y3)),y3.exports}var v3={exports:{}},_ht=v3.exports,Soe;function Tht(){return Soe||(Soe=1,function(e,t){(function(n,r,i){e.exports=r(Bn(),Ks())})(_ht,function(n){return n.mode.OFB=function(){var r=n.lib.BlockCipherMode.extend(),i=r.Encryptor=r.extend({processBlock:function(s,o){var a=this._cipher,l=a.blockSize,u=this._iv,c=this._keystream;u&&(c=this._keystream=u.slice(0),this._iv=void 0),a.encryptBlock(c,0);for(var d=0;d<l;d++)s[o+d]^=c[d]}});return r.Decryptor=i,r}(),n.mode.OFB})}(v3)),v3.exports}var b3={exports:{}},Cht=b3.exports,Aoe;function Sht(){return Aoe||(Aoe=1,function(e,t){(function(n,r,i){e.exports=r(Bn(),Ks())})(Cht,function(n){return n.mode.ECB=function(){var r=n.lib.BlockCipherMode.extend();return r.Encryptor=r.extend({processBlock:function(i,s){this._cipher.encryptBlock(i,s)}}),r.Decryptor=r.extend({processBlock:function(i,s){this._cipher.decryptBlock(i,s)}}),r}(),n.mode.ECB})}(b3)),b3.exports}var w3={exports:{}},Aht=w3.exports,koe;function kht(){return koe||(koe=1,function(e,t){(function(n,r,i){e.exports=r(Bn(),Ks())})(Aht,function(n){return n.pad.AnsiX923={pad:function(r,i){var s=r.sigBytes,o=i*4,a=o-s%o,l=s+a-1;r.clamp(),r.words[l>>>2]|=a<<24-l%4*8,r.sigBytes+=a},unpad:function(r){var i=r.words[r.sigBytes-1>>>2]&255;r.sigBytes-=i}},n.pad.Ansix923})}(w3)),w3.exports}var x3={exports:{}},Iht=x3.exports,Ioe;function Rht(){return Ioe||(Ioe=1,function(e,t){(function(n,r,i){e.exports=r(Bn(),Ks())})(Iht,function(n){return n.pad.Iso10126={pad:function(r,i){var s=i*4,o=s-r.sigBytes%s;r.concat(n.lib.WordArray.random(o-1)).concat(n.lib.WordArray.create([o<<24],1))},unpad:function(r){var i=r.words[r.sigBytes-1>>>2]&255;r.sigBytes-=i}},n.pad.Iso10126})}(x3)),x3.exports}var E3={exports:{}},Dht=E3.exports,Roe;function Pht(){return Roe||(Roe=1,function(e,t){(function(n,r,i){e.exports=r(Bn(),Ks())})(Dht,function(n){return n.pad.Iso97971={pad:function(r,i){r.concat(n.lib.WordArray.create([2147483648],1)),n.pad.ZeroPadding.pad(r,i)},unpad:function(r){n.pad.ZeroPadding.unpad(r),r.sigBytes--}},n.pad.Iso97971})}(E3)),E3.exports}var _3={exports:{}},Nht=_3.exports,Doe;function Oht(){return Doe||(Doe=1,function(e,t){(function(n,r,i){e.exports=r(Bn(),Ks())})(Nht,function(n){return n.pad.ZeroPadding={pad:function(r,i){var s=i*4;r.clamp(),r.sigBytes+=s-(r.sigBytes%s||s)},unpad:function(r){for(var i=r.words,s=r.sigBytes-1,s=r.sigBytes-1;s>=0;s--)if(i[s>>>2]>>>24-s%4*8&255){r.sigBytes=s+1;break}}},n.pad.ZeroPadding})}(_3)),_3.exports}var T3={exports:{}},$ht=T3.exports,Poe;function Mht(){return Poe||(Poe=1,function(e,t){(function(n,r,i){e.exports=r(Bn(),Ks())})($ht,function(n){return n.pad.NoPadding={pad:function(){},unpad:function(){}},n.pad.NoPadding})}(T3)),T3.exports}var C3={exports:{}},Lht=C3.exports,Noe;function Fht(){return Noe||(Noe=1,function(e,t){(function(n,r,i){e.exports=r(Bn(),Ks())})(Lht,function(n){return function(r){var i=n,s=i.lib,o=s.CipherParams,a=i.enc,l=a.Hex,u=i.format;u.Hex={stringify:function(c){return c.ciphertext.toString(l)},parse:function(c){var d=l.parse(c);return o.create({ciphertext:d})}}}(),n.format.Hex})}(C3)),C3.exports}var S3={exports:{}},jht=S3.exports,Ooe;function Bht(){return Ooe||(Ooe=1,function(e,t){(function(n,r,i){e.exports=r(Bn(),Uv(),qv(),G0(),Ks())})(jht,function(n){return function(){var r=n,i=r.lib,s=i.BlockCipher,o=r.algo,a=[],l=[],u=[],c=[],d=[],f=[],h=[],p=[],m=[],g=[];(function(){for(var x=[],E=0;E<256;E++)E<128?x[E]=E<<1:x[E]=E<<1^283;for(var _=0,C=0,E=0;E<256;E++){var S=C^C<<1^C<<2^C<<3^C<<4;S=S>>>8^S&255^99,a[_]=S,l[S]=_;var k=x[_],R=x[k],O=x[R],N=x[S]*257^S*16843008;u[_]=N<<24|N>>>8,c[_]=N<<16|N>>>16,d[_]=N<<8|N>>>24,f[_]=N;var N=O*16843009^R*65537^k*257^_*16843008;h[S]=N<<24|N>>>8,p[S]=N<<16|N>>>16,m[S]=N<<8|N>>>24,g[S]=N,_?(_=k^x[x[x[O^k]]],C^=x[x[C]]):_=C=1}})();var b=[0,1,2,4,8,16,32,64,128,27,54],v=o.AES=s.extend({_doReset:function(){var x;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var E=this._keyPriorReset=this._key,_=E.words,C=E.sigBytes/4,S=this._nRounds=C+6,k=(S+1)*4,R=this._keySchedule=[],O=0;O<k;O++)O<C?R[O]=_[O]:(x=R[O-1],O%C?C>6&&O%C==4&&(x=a[x>>>24]<<24|a[x>>>16&255]<<16|a[x>>>8&255]<<8|a[x&255]):(x=x<<8|x>>>24,x=a[x>>>24]<<24|a[x>>>16&255]<<16|a[x>>>8&255]<<8|a[x&255],x^=b[O/C|0]<<24),R[O]=R[O-C]^x);for(var N=this._invKeySchedule=[],L=0;L<k;L++){var O=k-L;if(L%4)var x=R[O];else var x=R[O-4];L<4||O<=4?N[L]=x:N[L]=h[a[x>>>24]]^p[a[x>>>16&255]]^m[a[x>>>8&255]]^g[a[x&255]]}}},encryptBlock:function(x,E){this._doCryptBlock(x,E,this._keySchedule,u,c,d,f,a)},decryptBlock:function(x,E){var _=x[E+1];x[E+1]=x[E+3],x[E+3]=_,this._doCryptBlock(x,E,this._invKeySchedule,h,p,m,g,l);var _=x[E+1];x[E+1]=x[E+3],x[E+3]=_},_doCryptBlock:function(x,E,_,C,S,k,R,O){for(var N=this._nRounds,L=x[E]^_[0],$=x[E+1]^_[1],B=x[E+2]^_[2],H=x[E+3]^_[3],Y=4,J=1;J<N;J++){var K=C[L>>>24]^S[$>>>16&255]^k[B>>>8&255]^R[H&255]^_[Y++],Z=C[$>>>24]^S[B>>>16&255]^k[H>>>8&255]^R[L&255]^_[Y++],U=C[B>>>24]^S[H>>>16&255]^k[L>>>8&255]^R[$&255]^_[Y++],j=C[H>>>24]^S[L>>>16&255]^k[$>>>8&255]^R[B&255]^_[Y++];L=K,$=Z,B=U,H=j}var K=(O[L>>>24]<<24|O[$>>>16&255]<<16|O[B>>>8&255]<<8|O[H&255])^_[Y++],Z=(O[$>>>24]<<24|O[B>>>16&255]<<16|O[H>>>8&255]<<8|O[L&255])^_[Y++],U=(O[B>>>24]<<24|O[H>>>16&255]<<16|O[L>>>8&255]<<8|O[$&255])^_[Y++],j=(O[H>>>24]<<24|O[L>>>16&255]<<16|O[$>>>8&255]<<8|O[B&255])^_[Y++];x[E]=K,x[E+1]=Z,x[E+2]=U,x[E+3]=j},keySize:256/32});r.AES=s._createHelper(v)}(),n.AES})}(S3)),S3.exports}var A3={exports:{}},zht=A3.exports,$oe;function Uht(){return $oe||($oe=1,function(e,t){(function(n,r,i){e.exports=r(Bn(),Uv(),qv(),G0(),Ks())})(zht,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=i.BlockCipher,a=r.algo,l=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],u=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],c=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],d=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],f=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],h=a.DES=o.extend({_doReset:function(){for(var b=this._key,v=b.words,x=[],E=0;E<56;E++){var _=l[E]-1;x[E]=v[_>>>5]>>>31-_%32&1}for(var C=this._subKeys=[],S=0;S<16;S++){for(var k=C[S]=[],R=c[S],E=0;E<24;E++)k[E/6|0]|=x[(u[E]-1+R)%28]<<31-E%6,k[4+(E/6|0)]|=x[28+(u[E+24]-1+R)%28]<<31-E%6;k[0]=k[0]<<1|k[0]>>>31;for(var E=1;E<7;E++)k[E]=k[E]>>>(E-1)*4+3;k[7]=k[7]<<5|k[7]>>>27}for(var O=this._invSubKeys=[],E=0;E<16;E++)O[E]=C[15-E]},encryptBlock:function(b,v){this._doCryptBlock(b,v,this._subKeys)},decryptBlock:function(b,v){this._doCryptBlock(b,v,this._invSubKeys)},_doCryptBlock:function(b,v,x){this._lBlock=b[v],this._rBlock=b[v+1],p.call(this,4,252645135),p.call(this,16,65535),m.call(this,2,858993459),m.call(this,8,16711935),p.call(this,1,1431655765);for(var E=0;E<16;E++){for(var _=x[E],C=this._lBlock,S=this._rBlock,k=0,R=0;R<8;R++)k|=d[R][((S^_[R])&f[R])>>>0];this._lBlock=S,this._rBlock=C^k}var O=this._lBlock;this._lBlock=this._rBlock,this._rBlock=O,p.call(this,1,1431655765),m.call(this,8,16711935),m.call(this,2,858993459),p.call(this,16,65535),p.call(this,4,252645135),b[v]=this._lBlock,b[v+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function p(b,v){var x=(this._lBlock>>>b^this._rBlock)&v;this._rBlock^=x,this._lBlock^=x<<b}function m(b,v){var x=(this._rBlock>>>b^this._lBlock)&v;this._lBlock^=x,this._rBlock^=x<<b}r.DES=o._createHelper(h);var g=a.TripleDES=o.extend({_doReset:function(){var b=this._key,v=b.words;if(v.length!==2&&v.length!==4&&v.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var x=v.slice(0,2),E=v.length<4?v.slice(0,2):v.slice(2,4),_=v.length<6?v.slice(0,2):v.slice(4,6);this._des1=h.createEncryptor(s.create(x)),this._des2=h.createEncryptor(s.create(E)),this._des3=h.createEncryptor(s.create(_))},encryptBlock:function(b,v){this._des1.encryptBlock(b,v),this._des2.decryptBlock(b,v),this._des3.encryptBlock(b,v)},decryptBlock:function(b,v){this._des3.decryptBlock(b,v),this._des2.encryptBlock(b,v),this._des1.decryptBlock(b,v)},keySize:192/32,ivSize:64/32,blockSize:64/32});r.TripleDES=o._createHelper(g)}(),n.TripleDES})}(A3)),A3.exports}var k3={exports:{}},qht=k3.exports,Moe;function Hht(){return Moe||(Moe=1,function(e,t){(function(n,r,i){e.exports=r(Bn(),Uv(),qv(),G0(),Ks())})(qht,function(n){return function(){var r=n,i=r.lib,s=i.StreamCipher,o=r.algo,a=o.RC4=s.extend({_doReset:function(){for(var c=this._key,d=c.words,f=c.sigBytes,h=this._S=[],p=0;p<256;p++)h[p]=p;for(var p=0,m=0;p<256;p++){var g=p%f,b=d[g>>>2]>>>24-g%4*8&255;m=(m+h[p]+b)%256;var v=h[p];h[p]=h[m],h[m]=v}this._i=this._j=0},_doProcessBlock:function(c,d){c[d]^=l.call(this)},keySize:256/32,ivSize:0});function l(){for(var c=this._S,d=this._i,f=this._j,h=0,p=0;p<4;p++){d=(d+1)%256,f=(f+c[d])%256;var m=c[d];c[d]=c[f],c[f]=m,h|=c[(c[d]+c[f])%256]<<24-p*8}return this._i=d,this._j=f,h}r.RC4=s._createHelper(a);var u=o.RC4Drop=a.extend({cfg:a.cfg.extend({drop:192}),_doReset:function(){a._doReset.call(this);for(var c=this.cfg.drop;c>0;c--)l.call(this)}});r.RC4Drop=s._createHelper(u)}(),n.RC4})}(k3)),k3.exports}var I3={exports:{}},Wht=I3.exports,Loe;function Vht(){return Loe||(Loe=1,function(e,t){(function(n,r,i){e.exports=r(Bn(),Uv(),qv(),G0(),Ks())})(Wht,function(n){return function(){var r=n,i=r.lib,s=i.StreamCipher,o=r.algo,a=[],l=[],u=[],c=o.Rabbit=s.extend({_doReset:function(){for(var f=this._key.words,h=this.cfg.iv,p=0;p<4;p++)f[p]=(f[p]<<8|f[p]>>>24)&16711935|(f[p]<<24|f[p]>>>8)&4278255360;var m=this._X=[f[0],f[3]<<16|f[2]>>>16,f[1],f[0]<<16|f[3]>>>16,f[2],f[1]<<16|f[0]>>>16,f[3],f[2]<<16|f[1]>>>16],g=this._C=[f[2]<<16|f[2]>>>16,f[0]&4294901760|f[1]&65535,f[3]<<16|f[3]>>>16,f[1]&4294901760|f[2]&65535,f[0]<<16|f[0]>>>16,f[2]&4294901760|f[3]&65535,f[1]<<16|f[1]>>>16,f[3]&4294901760|f[0]&65535];this._b=0;for(var p=0;p<4;p++)d.call(this);for(var p=0;p<8;p++)g[p]^=m[p+4&7];if(h){var b=h.words,v=b[0],x=b[1],E=(v<<8|v>>>24)&16711935|(v<<24|v>>>8)&4278255360,_=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360,C=E>>>16|_&4294901760,S=_<<16|E&65535;g[0]^=E,g[1]^=C,g[2]^=_,g[3]^=S,g[4]^=E,g[5]^=C,g[6]^=_,g[7]^=S;for(var p=0;p<4;p++)d.call(this)}},_doProcessBlock:function(f,h){var p=this._X;d.call(this),a[0]=p[0]^p[5]>>>16^p[3]<<16,a[1]=p[2]^p[7]>>>16^p[5]<<16,a[2]=p[4]^p[1]>>>16^p[7]<<16,a[3]=p[6]^p[3]>>>16^p[1]<<16;for(var m=0;m<4;m++)a[m]=(a[m]<<8|a[m]>>>24)&16711935|(a[m]<<24|a[m]>>>8)&4278255360,f[h+m]^=a[m]},blockSize:128/32,ivSize:64/32});function d(){for(var f=this._X,h=this._C,p=0;p<8;p++)l[p]=h[p];h[0]=h[0]+1295307597+this._b|0,h[1]=h[1]+3545052371+(h[0]>>>0<l[0]>>>0?1:0)|0,h[2]=h[2]+886263092+(h[1]>>>0<l[1]>>>0?1:0)|0,h[3]=h[3]+1295307597+(h[2]>>>0<l[2]>>>0?1:0)|0,h[4]=h[4]+3545052371+(h[3]>>>0<l[3]>>>0?1:0)|0,h[5]=h[5]+886263092+(h[4]>>>0<l[4]>>>0?1:0)|0,h[6]=h[6]+1295307597+(h[5]>>>0<l[5]>>>0?1:0)|0,h[7]=h[7]+3545052371+(h[6]>>>0<l[6]>>>0?1:0)|0,this._b=h[7]>>>0<l[7]>>>0?1:0;for(var p=0;p<8;p++){var m=f[p]+h[p],g=m&65535,b=m>>>16,v=((g*g>>>17)+g*b>>>15)+b*b,x=((m&4294901760)*m|0)+((m&65535)*m|0);u[p]=v^x}f[0]=u[0]+(u[7]<<16|u[7]>>>16)+(u[6]<<16|u[6]>>>16)|0,f[1]=u[1]+(u[0]<<8|u[0]>>>24)+u[7]|0,f[2]=u[2]+(u[1]<<16|u[1]>>>16)+(u[0]<<16|u[0]>>>16)|0,f[3]=u[3]+(u[2]<<8|u[2]>>>24)+u[1]|0,f[4]=u[4]+(u[3]<<16|u[3]>>>16)+(u[2]<<16|u[2]>>>16)|0,f[5]=u[5]+(u[4]<<8|u[4]>>>24)+u[3]|0,f[6]=u[6]+(u[5]<<16|u[5]>>>16)+(u[4]<<16|u[4]>>>16)|0,f[7]=u[7]+(u[6]<<8|u[6]>>>24)+u[5]|0}r.Rabbit=s._createHelper(c)}(),n.Rabbit})}(I3)),I3.exports}var R3={exports:{}},Ght=R3.exports,Foe;function Yht(){return Foe||(Foe=1,function(e,t){(function(n,r,i){e.exports=r(Bn(),Uv(),qv(),G0(),Ks())})(Ght,function(n){return function(){var r=n,i=r.lib,s=i.StreamCipher,o=r.algo,a=[],l=[],u=[],c=o.RabbitLegacy=s.extend({_doReset:function(){var f=this._key.words,h=this.cfg.iv,p=this._X=[f[0],f[3]<<16|f[2]>>>16,f[1],f[0]<<16|f[3]>>>16,f[2],f[1]<<16|f[0]>>>16,f[3],f[2]<<16|f[1]>>>16],m=this._C=[f[2]<<16|f[2]>>>16,f[0]&4294901760|f[1]&65535,f[3]<<16|f[3]>>>16,f[1]&4294901760|f[2]&65535,f[0]<<16|f[0]>>>16,f[2]&4294901760|f[3]&65535,f[1]<<16|f[1]>>>16,f[3]&4294901760|f[0]&65535];this._b=0;for(var g=0;g<4;g++)d.call(this);for(var g=0;g<8;g++)m[g]^=p[g+4&7];if(h){var b=h.words,v=b[0],x=b[1],E=(v<<8|v>>>24)&16711935|(v<<24|v>>>8)&4278255360,_=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360,C=E>>>16|_&4294901760,S=_<<16|E&65535;m[0]^=E,m[1]^=C,m[2]^=_,m[3]^=S,m[4]^=E,m[5]^=C,m[6]^=_,m[7]^=S;for(var g=0;g<4;g++)d.call(this)}},_doProcessBlock:function(f,h){var p=this._X;d.call(this),a[0]=p[0]^p[5]>>>16^p[3]<<16,a[1]=p[2]^p[7]>>>16^p[5]<<16,a[2]=p[4]^p[1]>>>16^p[7]<<16,a[3]=p[6]^p[3]>>>16^p[1]<<16;for(var m=0;m<4;m++)a[m]=(a[m]<<8|a[m]>>>24)&16711935|(a[m]<<24|a[m]>>>8)&4278255360,f[h+m]^=a[m]},blockSize:128/32,ivSize:64/32});function d(){for(var f=this._X,h=this._C,p=0;p<8;p++)l[p]=h[p];h[0]=h[0]+1295307597+this._b|0,h[1]=h[1]+3545052371+(h[0]>>>0<l[0]>>>0?1:0)|0,h[2]=h[2]+886263092+(h[1]>>>0<l[1]>>>0?1:0)|0,h[3]=h[3]+1295307597+(h[2]>>>0<l[2]>>>0?1:0)|0,h[4]=h[4]+3545052371+(h[3]>>>0<l[3]>>>0?1:0)|0,h[5]=h[5]+886263092+(h[4]>>>0<l[4]>>>0?1:0)|0,h[6]=h[6]+1295307597+(h[5]>>>0<l[5]>>>0?1:0)|0,h[7]=h[7]+3545052371+(h[6]>>>0<l[6]>>>0?1:0)|0,this._b=h[7]>>>0<l[7]>>>0?1:0;for(var p=0;p<8;p++){var m=f[p]+h[p],g=m&65535,b=m>>>16,v=((g*g>>>17)+g*b>>>15)+b*b,x=((m&4294901760)*m|0)+((m&65535)*m|0);u[p]=v^x}f[0]=u[0]+(u[7]<<16|u[7]>>>16)+(u[6]<<16|u[6]>>>16)|0,f[1]=u[1]+(u[0]<<8|u[0]>>>24)+u[7]|0,f[2]=u[2]+(u[1]<<16|u[1]>>>16)+(u[0]<<16|u[0]>>>16)|0,f[3]=u[3]+(u[2]<<8|u[2]>>>24)+u[1]|0,f[4]=u[4]+(u[3]<<16|u[3]>>>16)+(u[2]<<16|u[2]>>>16)|0,f[5]=u[5]+(u[4]<<8|u[4]>>>24)+u[3]|0,f[6]=u[6]+(u[5]<<16|u[5]>>>16)+(u[4]<<16|u[4]>>>16)|0,f[7]=u[7]+(u[6]<<8|u[6]>>>24)+u[5]|0}r.RabbitLegacy=s._createHelper(c)}(),n.RabbitLegacy})}(R3)),R3.exports}var D3={exports:{}},Kht=D3.exports,joe;function Xht(){return joe||(joe=1,function(e,t){(function(n,r,i){e.exports=r(Bn(),Uv(),qv(),G0(),Ks())})(Kht,function(n){return function(){var r=n,i=r.lib,s=i.BlockCipher,o=r.algo;const a=16,l=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],u=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var c={pbox:[],sbox:[]};function d(g,b){let v=b>>24&255,x=b>>16&255,E=b>>8&255,_=b&255,C=g.sbox[0][v]+g.sbox[1][x];return C=C^g.sbox[2][E],C=C+g.sbox[3][_],C}function f(g,b,v){let x=b,E=v,_;for(let C=0;C<a;++C)x=x^g.pbox[C],E=d(g,x)^E,_=x,x=E,E=_;return _=x,x=E,E=_,E=E^g.pbox[a],x=x^g.pbox[a+1],{left:x,right:E}}function h(g,b,v){let x=b,E=v,_;for(let C=a+1;C>1;--C)x=x^g.pbox[C],E=d(g,x)^E,_=x,x=E,E=_;return _=x,x=E,E=_,E=E^g.pbox[1],x=x^g.pbox[0],{left:x,right:E}}function p(g,b,v){for(let S=0;S<4;S++){g.sbox[S]=[];for(let k=0;k<256;k++)g.sbox[S][k]=u[S][k]}let x=0;for(let S=0;S<a+2;S++)g.pbox[S]=l[S]^b[x],x++,x>=v&&(x=0);let E=0,_=0,C=0;for(let S=0;S<a+2;S+=2)C=f(g,E,_),E=C.left,_=C.right,g.pbox[S]=E,g.pbox[S+1]=_;for(let S=0;S<4;S++)for(let k=0;k<256;k+=2)C=f(g,E,_),E=C.left,_=C.right,g.sbox[S][k]=E,g.sbox[S][k+1]=_;return!0}var m=o.Blowfish=s.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var g=this._keyPriorReset=this._key,b=g.words,v=g.sigBytes/4;p(c,b,v)}},encryptBlock:function(g,b){var v=f(c,g[b],g[b+1]);g[b]=v.left,g[b+1]=v.right},decryptBlock:function(g,b){var v=h(c,g[b],g[b+1]);g[b]=v.left,g[b+1]=v.right},blockSize:64/32,keySize:128/32,ivSize:64/32});r.Blowfish=s._createHelper(m)}(),n.Blowfish})}(D3)),D3.exports}var Qht=XR.exports,Boe;function Jht(){return Boe||(Boe=1,function(e,t){(function(n,r,i){e.exports=r(Bn(),k$(),Yft(),Xft(),Uv(),Zft(),qv(),zEe(),cV(),iht(),UEe(),aht(),uht(),dht(),dV(),pht(),G0(),Ks(),vht(),wht(),Eht(),Tht(),Sht(),kht(),Rht(),Pht(),Oht(),Mht(),Fht(),Bht(),Uht(),Hht(),Vht(),Yht(),Xht())})(Qht,function(n){return n})}(XR)),XR.exports}var ow=Jht();const qEe=ow.enc.Hex.parse("000102030405060708090a0b0c0d0e0f101112131415161718191a1b1c1d1e1f");function ri(e){const t=ow.AES.encrypt(e.toString(),qEe,{mode:ow.mode.ECB}).toString();return btoa(t)}function gf(e){const t=ow.AES.decrypt(atob(e),qEe,{mode:ow.mode.ECB}).toString(ow.enc.Utf8);return parseInt(t,10)}function Ku(){return Wn(e=>e.config)}function Wf(){const{studyId:e}=To();return`${e}`}function Pa(){const{index:e}=To();return e===void 0?0:e.startsWith("reviewer-")||e.startsWith("__")?e:gf(e)}const zoe=Object.assign({"../public/libraries/mic-check/assets/AudioTest.tsx":Zve,"../public/libraries/test/assets/test.tsx":e1e,"../public/matrices/Stimuli.tsx":vEe,"../public/matrices/components/Background.tsx":Dxe,"../public/matrices/components/ControlPanel.tsx":mEe,"../public/matrices/components/EncodedCells.tsx":Bxe,"../public/matrices/components/Highlighting.tsx":Oxe,"../public/matrices/components/InteractionButtons.tsx":hEe,"../public/matrices/components/Legend.tsx":Fxe,"../public/matrices/components/Marks.tsx":Wxe,"../public/matrices/components/Matrix.tsx":yEe,"../public/matrices/components/Tooltip.tsx":Uxe,"../public/matrices/components/axis/DestinationAxis.tsx":Ixe,"../public/matrices/components/axis/OriginAxis.tsx":Axe,"../public/matrices/hooks/useCellScales.tsx":Xxe,"../public/matrices/hooks/useConfig.tsx":dEe,"../public/matrices/hooks/useOrdering.tsx":aEe,"../public/matrices/hooks/useRenderEncodeCells.tsx":Yxe,"../public/matrices/hooks/useReplay.tsx":uEe,"../public/matrices/utils/Accessors.tsx":$xe,"../public/matrices/utils/Constants.ts":Pxe,"../public/matrices/utils/Enums.ts":Mxe,"../public/matrices/utils/Interfaces.tsx":bEe,"../public/matrices/utils/MatrixContext.tsx":Txe});function pd(){const{funcIndex:e}=To(),t=Wn(m=>m.answers),n=Ku(),r=Pa(),i=zv(),s=Ra(),o=Wf(),a=ys(),{pushToFuncSequence:l}=Gi(),[u,c]=D.useState(null),d=D.useMemo(()=>typeof r=="number"?toe(i[r],n):r.includes("reviewer-")||r.startsWith("__")?r:null,[r,i,n]),[f,h]=D.useState("__dynamicLoading"),p=D.useMemo(()=>{if(typeof r=="number"&&!d){const m=NB(i[r],n.sequence);if(!m)return null;const g=`../public/${m.functionPath}`;return g in zoe?zoe[g].default:null}return null},[d,r,i,n.sequence]);return D.useEffect(()=>{!e&&p&&typeof r=="number"&&s(`/${o}/${ri(r)}/${ri(0)}${window.location.search}`)},[r,e,s,p,o]),D.useEffect(()=>{var m;if(typeof r=="number"){const g=toe(i[r],n),b=i[r],v=e?gf(e):0,x=Object.entries(t).find(([_,C])=>_.startsWith(`${b}_${r}_`)&&_.endsWith(`${v}`)),E=x?x[1].componentName:null;if(E!==null){h(E),c(v);return}if(!g&&p!==null){const{component:_,parameters:C,correctAnswer:S}=p({answers:t,customParameters:(m=NB(i[r],n.sequence))==null?void 0:m.parameters,currentStep:r,currentBlock:i[r]});_!==null?e&&(h(_),c(v),a(l({component:_,funcName:b,index:r,funcIndex:v,parameters:C||void 0,correctAnswer:S||void 0}))):(h("__dynamicLoading"),c(null),s(`/${o}/${ri(r+1)}${window.location.search}`))}}},[r,e]),typeof r=="number"&&i[r]==="end"?"end":d?typeof r=="number"?i[r]:r.replace("reviewer-",""):u!==null&&e&&gf(e)===u?f:"__dynamicLoading"}function Hv(){const e=Pa(),t=zv(),n=pd(),{funcIndex:r}=To();return D.useMemo(()=>r&&typeof e=="number"?`${t[e]}_${e}_${n}_${gf(r)}`:`${n}_${e}`,[n,e,r,t])}function Y0(){const{funcIndex:e}=To(),t=zv(),n=Pa(),r=pd(),i=e&&typeof n=="number"?`${t[n]}_${n}_${r}_${gf(e)}`:`${r}_${n}`;return Wn(o=>o.answers[i])}const HEe=D.createContext(null);function Zht(){const e=D.useContext(HEe);if(!e)throw new Error("useWindowEvents must be used within a WindowEventsProvider");return e}function K0(){const[e]=Bf();return!!e.get("participantId")}function Uoe(e,t,n,r){const i=t.slice(0,t.lastIndexOf("_")),s=Object.entries(r.components).find(([a])=>a===i),o=s?s[1]:null;if(!o)throw new Error(`Component ${i} could not be found in the study components.`);return o.correctAnswer?o.correctAnswer.every(a=>e[a.id]===a.answer):!0}function ept(){const e=Pa(),t=zv(),n=Wn(R=>R.trialValidation),r=Wn(R=>R.sequence),i=Wn(R=>R.answers),s=Wn(R=>R.modes),o=Ku(),{funcIndex:a}=To(),l=Hv(),u=ys(),{saveTrialAnswer:c,setReactiveAnswers:d,setMatrixAnswersRadio:f,setMatrixAnswersCheckbox:h}=Gi(),{storageEngine:p}=Ai(),m=Wf(),g=D.useMemo(()=>s.dataCollectionEnabled,[s]),b=zft(l),v=K0(),x=typeof e!="number"||v||!b,E=Y0(),_=Ra(),C=D.useMemo(()=>Date.now(),[a,e]),S=Zht(),k=D.useCallback((R=!0)=>{if(typeof e!="number")return;const O=structuredClone(n[l]),N=Object.values(O).reduce((U,j)=>Object.hasOwn(j,"values")?{...U,...j.values}:U,{}),{provenanceGraph:L}=O,$=Date.now(),{componentName:B}=E,H=S&&"current"in S&&S.current?S.current.splice(0,S.current.length):[];if(g){const U={...E,answer:R?N:{},startTime:C,endTime:$,provenanceGraph:L,windowEvents:H,timedOut:!R};u(c({identifier:l,...U})),p&&p.saveAnswers({...i,[l]:U}),u(d({})),u(h(null)),u(f(null))}let Y=e+1;const J=lV(r,e),K=J!==null&&J.some(U=>Object.hasOwn(U.currentBlock,"skip")&&U.currentBlock.skip!==void 0),Z={...i,[l]:{answer:N,startTime:C,endTime:$,provenanceGraph:L,windowEvents:H}};K&&[...J.flatMap(j=>j.currentBlock.skip?j.currentBlock.skip.map(V=>({...V,firstIndex:j.firstIndex,lastIndex:j.lastIndex})):[])].some(j=>{let V=!1;const z=Object.fromEntries(Object.entries(Z).filter(([Q])=>{const ie=parseInt(Q.slice(Q.lastIndexOf("_")+1),10);return ie>=j.firstIndex&&ie<=e})),G=j.check!=="block"?Object.entries(z).filter(([Q])=>Q.slice(0,Q.lastIndexOf("_"))===j.name):Object.entries(z);if(G.length===0)return!1;if(G.some(([Q,ie])=>!ie))throw new Error(`There are components with missing response objects for the skip condition: ${JSON.stringify(j,null,2)}`);if(j.check==="response"||j.check==="responses"){const[Q,ie]=G[0];j.check==="response"?V=j.comparison==="equal"?j.value===ie.answer[j.responseId]:j.value!==ie.answer[j.responseId]:V=!Uoe(ie.answer,Q,o.components[Q.slice(0,Q.lastIndexOf("_"))],o)}else if(j.check==="block"||j.check==="repeatedComponent"){if(G.length<j.value)return!1;const Q=G.map(([ae,fe])=>Uoe(fe.answer,ae,o.components[B.slice(0,B.lastIndexOf("_"))],o)),ie=Q.filter(ae=>ae).length,me=Q.length-ie;V=j.condition==="numCorrect"&&ie===j.value||j.condition==="numIncorrect"&&me===j.value}if(V){const Q=t.indexOf(j.to),ie=Q===-1?Lft(r,j.to):-1;return Y=Q===-1?ie:Q,!0}return!1}),_(a?`/${m}/${ri(e)}/${ri(gf(a)+1)}${window.location.search}`:`/${m}/${ri(Y)}${window.location.search}`)},[e,n,l,E,S,g,r,i,C,a,_,m,u,c,p,d,h,f,o,t]);return{isNextDisabled:x,goToNextStep:k}}function tpt(){const e=Pa(),{funcIndex:t}=To(),n=Wf(),r=Ra(),i=K0(),s=Ku(),o=ys(),{deleteDynamicBlockAnswers:a}=Gi(),l=Wn(d=>d.answers),u=typeof e!="number"||i||e<=0,c=D.useCallback(()=>{if(typeof e!="number")return;const d=e-1,f=Rf(s.sequence);if(t&&(o(a({currentStep:e,funcIndex:gf(t),funcName:f[e]})),gf(t)!==0)){r(`/${n}/${ri(e)}/${ri(gf(t)-1)}${window.location.search}`);return}const h=f[d];if(NB(h,s.sequence)){const g=Object.keys(l).filter(b=>b.startsWith(`${h}_${d}_`)).length-1;r(`/${n}/${ri(d)}/${ri(g)}${window.location.search}`)}else r(`/${n}/${ri(d)}${window.location.search}`)},[e,t,r,n,s,o,a,l]);return{isPreviousDisabled:u,goToPreviousStep:c}}function npt({label:e="Previous",px:t}){const{isPreviousDisabled:n,goToPreviousStep:r}=tpt(),i=D.useCallback(()=>{r()},[r]);return T.jsx(Gt,{type:"submit",disabled:n,onClick:i,px:t,children:e})}function rpt({label:e="Next",disabled:t=!1,configInUse:n,location:r,checkAnswer:i}){const{isNextDisabled:s,goToNextStep:o}=ept(),a=Ku(),l=Ra(),u=D.useMemo(()=>(n==null?void 0:n.nextButtonDisableTime)??a.uiConfig.nextButtonDisableTime,[n,a]),c=D.useMemo(()=>(n==null?void 0:n.nextButtonEnableTime)??a.uiConfig.nextButtonEnableTime??0,[n,a]),[d,f]=D.useState(void 0);D.useEffect(()=>{let b=0;const v=setInterval(()=>{b+=100,f(b)},100);return()=>{clearInterval(v)}},[]),D.useEffect(()=>{d&&u&&d>=u&&a.uiConfig.timeoutReject&&l("./../__timedOut")},[u,d,l,a.uiConfig.timeoutReject]);const h=D.useMemo(()=>{const b=u&&d?d<=u:!0,v=d?d>=c:!0;return b&&v},[u,c,d]),p=D.useMemo(()=>(n==null?void 0:n.nextOnEnter)??a.uiConfig.nextOnEnter,[n,a]);D.useEffect(()=>{const b=v=>{v.key==="Enter"&&!t&&!s&&h&&o()};return p?(window.addEventListener("keydown",b),()=>{window.removeEventListener("keydown",b)}):()=>{}},[t,s,h,o,p]);const m=D.useMemo(()=>t||s||!h,[t,s,h]),g=D.useMemo(()=>(n==null?void 0:n.previousButtonText)??a.uiConfig.previousButtonText??"Previous",[n,a]);return T.jsxs(T.Fragment,{children:[T.jsxs(yi,{justify:"right",gap:"xs",children:[(n==null?void 0:n.previousButton)&&T.jsx(npt,{label:g,px:r==="sidebar"&&i?8:void 0}),i,T.jsx(Gt,{type:"submit",disabled:m,onClick:()=>o(),px:r==="sidebar"&&i?8:void 0,children:e})]}),d&&T.jsxs(T.Fragment,{children:[c>0&&d<c&&T.jsxs(Zh,{mt:"md",title:"Please wait",color:"blue",icon:T.jsx(cH,{}),children:["The next button will be enabled in"," ",Math.ceil((c-d)/1e3)," ","seconds."]}),u&&d&&u-d<1e4&&(u-d>0?T.jsxs(Zh,{mt:"md",title:"Next button disables soon",color:"yellow",icon:T.jsx(Vb,{}),children:["The next button disables in"," ",Math.ceil((u-d)/1e3)," ","seconds."]}):!a.uiConfig.timeoutReject&&T.jsxs(Zh,{mt:"md",title:"Next button disabled",color:"red",icon:T.jsx(Vb,{}),children:["The next button has timed out and is now disabled.",T.jsx(yi,{justify:"right",mt:"sm",children:T.jsx(Gt,{onClick:()=>o(!1),variant:"link",color:"red",children:"Proceed"})})]}))]})]})}function ipt(e){if(!/^[0-9a-zA-Z-]+$/.test(e))throw new Error(`[@mantine/use-form] Form name "${e}" is invalid, it should contain only letters, numbers and dashes`)}const spt=typeof window<"u"?D.useLayoutEffect:D.useEffect;function io(e,t){spt(()=>{if(e)return window.addEventListener(e,t),()=>window.removeEventListener(e,t)},[e])}function opt(e,t){e&&ipt(e),io(`mantine-form:${e}:set-field-value`,n=>t.setFieldValue(n.detail.path,n.detail.value)),io(`mantine-form:${e}:set-values`,n=>t.setValues(n.detail)),io(`mantine-form:${e}:set-initial-values`,n=>t.setInitialValues(n.detail)),io(`mantine-form:${e}:set-errors`,n=>t.setErrors(n.detail)),io(`mantine-form:${e}:set-field-error`,n=>t.setFieldError(n.detail.path,n.detail.error)),io(`mantine-form:${e}:clear-field-error`,n=>t.clearFieldError(n.detail)),io(`mantine-form:${e}:clear-errors`,t.clearErrors),io(`mantine-form:${e}:reset`,t.reset),io(`mantine-form:${e}:validate`,t.validate),io(`mantine-form:${e}:validate-field`,n=>t.validateField(n.detail)),io(`mantine-form:${e}:reorder-list-item`,n=>t.reorderListItem(n.detail.path,n.detail.payload)),io(`mantine-form:${e}:remove-list-item`,n=>t.removeListItem(n.detail.path,n.detail.index)),io(`mantine-form:${e}:insert-list-item`,n=>t.insertListItem(n.detail.path,n.detail.item,n.detail.index)),io(`mantine-form:${e}:set-dirty`,n=>t.setDirty(n.detail)),io(`mantine-form:${e}:set-touched`,n=>t.setTouched(n.detail)),io(`mantine-form:${e}:reset-dirty`,n=>t.resetDirty(n.detail)),io(`mantine-form:${e}:reset-touched`,t.resetTouched)}function apt(e){return t=>{if(!t)e(t);else if(typeof t=="function")e(t);else if(typeof t=="object"&&"nativeEvent"in t){const{currentTarget:n}=t;n instanceof HTMLInputElement?n.type==="checkbox"?e(n.checked):e(n.value):(n instanceof HTMLTextAreaElement||n instanceof HTMLSelectElement)&&e(n.value)}else e(t)}}function OB(e){return e===null||typeof e!="object"?{}:Object.keys(e).reduce((t,n)=>{const r=e[n];return r!=null&&r!==!1&&(t[n]=r),t},{})}function lpt(e){const[t,n]=D.useState(OB(e)),r=D.useRef(t),i=D.useCallback(l=>{n(u=>{const c=OB(typeof l=="function"?l(u):l);return r.current=c,c})},[]),s=D.useCallback(()=>i({}),[]),o=D.useCallback(l=>{r.current[l]!==void 0&&i(u=>{const c={...u};return delete c[l],c})},[t]),a=D.useCallback((l,u)=>{u==null||u===!1?o(l):r.current[l]!==u&&i(c=>({...c,[l]:u}))},[t]);return{errorsState:t,setErrors:i,clearErrors:s,setFieldError:a,clearFieldError:o}}function $B(e,t){if(t===null||typeof t!="object")return{};const n={...t};return Object.keys(t).forEach(r=>{r.includes(`${String(e)}.`)&&delete n[r]}),n}function qoe(e,t){const n=e.substring(t.length+1).split(".")[0];return parseInt(n,10)}function Hoe(e,t,n,r){if(t===void 0)return n;const i=`${String(e)}`;let s=n;r===-1&&(s=$B(`${i}.${t}`,s));const o={...s},a=new Set;return Object.entries(s).filter(([l])=>{if(!l.startsWith(`${i}.`))return!1;const u=qoe(l,i);return Number.isNaN(u)?!1:u>=t}).forEach(([l,u])=>{const c=qoe(l,i),d=l.replace(`${i}.${c}`,`${i}.${c+r}`);o[d]=u,a.add(d),a.has(l)||delete o[l]}),o}function upt(e,{from:t,to:n},r){const i=`${e}.${t}`,s=`${e}.${n}`,o={...r};return Object.keys(r).every(a=>{let l,u;if(a.startsWith(i)&&(l=a,u=a.replace(i,s)),a.startsWith(s)&&(l=a.replace(s,i),u=a),l&&u){const c=o[l],d=o[u];return d===void 0?delete o[l]:o[l]=d,c===void 0?delete o[u]:o[u]=c,!1}return!0}),o}function Woe(e,t,n){typeof n.value=="object"&&(n.value=Nb(n.value)),!n.enumerable||n.get||n.set||!n.configurable||!n.writable||t==="__proto__"?Object.defineProperty(e,t,n):e[t]=n.value}function Nb(e){if(typeof e!="object")return e;var t=0,n,r,i,s=Object.prototype.toString.call(e);if(s==="[object Object]"?i=Object.create(e.__proto__||null):s==="[object Array]"?i=Array(e.length):s==="[object Set]"?(i=new Set,e.forEach(function(o){i.add(Nb(o))})):s==="[object Map]"?(i=new Map,e.forEach(function(o,a){i.set(Nb(a),Nb(o))})):s==="[object Date]"?i=new Date(+e):s==="[object RegExp]"?i=new RegExp(e.source,e.flags):s==="[object DataView]"?i=new e.constructor(Nb(e.buffer)):s==="[object ArrayBuffer]"?i=e.slice(0):s.slice(-6)==="Array]"&&(i=new e.constructor(e)),i){for(r=Object.getOwnPropertySymbols(e);t<r.length;t++)Woe(i,r[t],Object.getOwnPropertyDescriptor(e,r[t]));for(t=0,r=Object.getOwnPropertyNames(e);t<r.length;t++)Object.hasOwnProperty.call(i,n=r[t])&&i[n]===e[n]||Woe(i,n,Object.getOwnPropertyDescriptor(e,n))}return i||e}function WEe(e){return typeof e!="string"?[]:e.split(".")}function ho(e,t){const n=WEe(e);if(n.length===0||typeof t!="object"||t===null)return;let r=t[n[0]];for(let i=1;i<n.length&&r!=null;i+=1)r=r[n[i]];return r}function dS(e,t,n){const r=WEe(e);if(r.length===0)return n;const i=Nb(n);if(r.length===1)return i[r[0]]=t,i;let s=i[r[0]];for(let o=1;o<r.length-1;o+=1){if(s===void 0)return i;s=s[r[o]]}return s[r[r.length-1]]=t,i}function cpt(e,{from:t,to:n},r){const i=ho(e,r);if(!Array.isArray(i))return r;const s=[...i],o=i[t];return s.splice(t,1),s.splice(n,0,o),dS(e,s,r)}function dpt(e,t,n,r){const i=ho(e,r);if(!Array.isArray(i))return r;const s=[...i];return s.splice(typeof n=="number"?n:s.length,0,t),dS(e,s,r)}function fpt(e,t,n){const r=ho(e,n);return Array.isArray(r)?dS(e,r.filter((i,s)=>s!==t),n):n}function hpt(e,t,n,r){const i=ho(e,r);if(!Array.isArray(i)||i.length<=n)return r;const s=[...i];return s[n]=t,dS(e,s,r)}function ppt({$values:e,$errors:t,$status:n}){const r=D.useCallback((a,l)=>{n.clearFieldDirty(a),t.setErrors(u=>upt(a,l,u)),e.setValues({values:cpt(a,l,e.refValues.current),updateState:!0})},[]),i=D.useCallback((a,l)=>{n.clearFieldDirty(a),t.setErrors(u=>Hoe(a,l,u,-1)),e.setValues({values:fpt(a,l,e.refValues.current),updateState:!0})},[]),s=D.useCallback((a,l,u)=>{n.clearFieldDirty(a),t.setErrors(c=>Hoe(a,u,c,1)),e.setValues({values:dpt(a,l,u,e.refValues.current),updateState:!0})},[]),o=D.useCallback((a,l,u)=>{n.clearFieldDirty(a),e.setValues({values:hpt(a,u,l,e.refValues.current),updateState:!0})},[]);return{reorderListItem:r,removeListItem:i,insertListItem:s,replaceListItem:o}}var xL,Voe;function fV(){return Voe||(Voe=1,xL=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(s=Object.keys(t),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var o=s[i];if(!e(t[o],n[o]))return!1}return!0}return t!==t&&n!==n}),xL}var mpt=fV();const d2=vl(mpt);function y_(e,t){const n=Object.keys(e);if(typeof t=="string"){const r=n.filter(i=>i.startsWith(`${t}.`));return e[t]||r.some(i=>e[i])||!1}return n.some(r=>e[r])}function gpt({initialDirty:e,initialTouched:t,mode:n,$values:r}){const[i,s]=D.useState(t),[o,a]=D.useState(e),l=D.useRef(t),u=D.useRef(e),c=D.useCallback(C=>{const S=typeof C=="function"?C(l.current):C;l.current=S,n==="controlled"&&s(S)},[]),d=D.useCallback((C,S=!1)=>{const k=typeof C=="function"?C(u.current):C;u.current=k,(n==="controlled"||S)&&a(k)},[]),f=D.useCallback(()=>c({}),[]),h=D.useCallback(C=>{const S=C?{...C,...r.refValues.current}:r.refValues.current;r.setValuesSnapshot(S),d({})},[]),p=D.useCallback((C,S)=>{c(k=>y_(k,C)===S?k:{...k,[C]:S})},[]),m=D.useCallback((C,S,k)=>{d(R=>y_(R,C)===S?R:{...R,[C]:S},k)},[]),g=D.useCallback((C,S)=>{const k=y_(u.current,C),R=!d2(ho(C,r.getValuesSnapshot()),S),O=$B(C,u.current);O[C]=R,d(O,k!==R)},[]),b=D.useCallback(C=>y_(l.current,C),[]),v=D.useCallback(C=>d(S=>{if(typeof C!="string")return S;const k=$B(C,S);return delete k[C],d2(k,S)?S:k}),[]),x=D.useCallback(C=>{if(C){const k=ho(C,u.current);if(typeof k=="boolean")return k;const R=ho(C,r.refValues.current),O=ho(C,r.valuesSnapshot.current);return!d2(R,O)}return Object.keys(u.current).length>0?y_(u.current):!d2(r.refValues.current,r.valuesSnapshot.current)},[]),E=D.useCallback(()=>u.current,[]),_=D.useCallback(()=>l.current,[]);return{touchedState:i,dirtyState:o,touchedRef:l,dirtyRef:u,setTouched:c,setDirty:d,resetDirty:h,resetTouched:f,isTouched:b,setFieldTouched:p,setFieldDirty:m,setTouchedState:s,setDirtyState:a,clearFieldDirty:v,isDirty:x,getDirty:E,getTouched:_,setCalculatedFieldDirty:g}}function ypt({initialValues:e,onValuesChange:t,mode:n}){const r=D.useRef(!1),[i,s]=D.useState(e||{}),o=D.useRef(i),a=D.useRef(i),l=D.useCallback(({values:m,subscribers:g,updateState:b=!0,mergeWithPreviousValues:v=!0})=>{const x=o.current,E=m instanceof Function?m(o.current):m,_=v?{...x,...E}:E;o.current=_,b&&s(_),t==null||t(_,x),g==null||g.filter(Boolean).forEach(C=>C({updatedValues:_,previousValues:x}))},[t]),u=D.useCallback(m=>{var v;const g=ho(m.path,o.current),b=m.value instanceof Function?m.value(g):m.value;if(g!==b){const x=o.current,E=dS(m.path,b,o.current);l({values:E,updateState:m.updateState}),(v=m.subscribers)==null||v.filter(Boolean).forEach(_=>_({path:m.path,updatedValues:E,previousValues:x}))}},[l]),c=D.useCallback(m=>{a.current=m},[]),d=D.useCallback((m,g)=>{r.current||(r.current=!0,l({values:m,updateState:n==="controlled"}),c(m),g())},[l]),f=D.useCallback(()=>{l({values:a.current,updateState:!0,mergeWithPreviousValues:!1})},[l]),h=D.useCallback(()=>o.current,[]),p=D.useCallback(()=>a.current,[]);return{initialized:r,stateValues:i,refValues:o,valuesSnapshot:a,setValues:l,setFieldValue:u,resetValues:f,setValuesSnapshot:c,initialize:d,getValues:h,getValuesSnapshot:p}}function vpt({$status:e}){const t=D.useRef({}),n=D.useCallback((i,s)=>{D.useEffect(()=>(t.current[i]=t.current[i]||[],t.current[i].push(s),()=>{t.current[i]=t.current[i].filter(o=>o!==s)}),[s])},[]),r=D.useCallback(i=>t.current[i]?t.current[i].map(s=>o=>s({previousValue:ho(i,o.previousValues),value:ho(i,o.updatedValues),touched:e.isTouched(i),dirty:e.isDirty(i)})):[],[]);return{subscribers:t,watch:n,getFieldSubscribers:r}}function Goe(e,t){return e?`${e}-${t.toString()}`:t.toString()}function Yoe(e){const t=OB(e);return{hasErrors:Object.keys(t).length>0,errors:t}}function MB(e,t,n="",r={}){return typeof e!="object"||e===null?r:Object.keys(e).reduce((i,s)=>{const o=e[s],a=`${n===""?"":`${n}.`}${s}`,l=ho(a,t);let u=!1;return typeof o=="function"&&(i[a]=o(l,t,a)),typeof o=="object"&&Array.isArray(l)&&(u=!0,l.forEach((c,d)=>MB(o,t,`${a}.${d}`,i))),typeof o=="object"&&typeof l=="object"&&l!==null&&(u||MB(o,t,a,i)),i},r)}function LB(e,t){return Yoe(typeof e=="function"?e(t):MB(e,t))}function Kk(e,t,n){if(typeof e!="string")return{hasError:!1,error:null};const r=LB(t,n),i=Object.keys(r.errors).find(s=>e.split(".").every((o,a)=>o===s.split(".")[a]));return{hasError:!!i,error:i?r.errors[i]:null}}const bpt="__MANTINE_FORM_INDEX__";function Koe(e,t){return t?typeof t=="boolean"?t:Array.isArray(t)?t.includes(e.replace(/[.][0-9]+/g,`.${bpt}`)):!1:!1}function VEe({name:e,mode:t="controlled",initialValues:n,initialErrors:r={},initialDirty:i={},initialTouched:s={},clearInputErrorOnChange:o=!0,validateInputOnChange:a=!1,validateInputOnBlur:l=!1,onValuesChange:u,transformValues:c=m=>m,enhanceGetInputProps:d,validate:f,onSubmitPreventDefault:h="always",touchTrigger:p="change"}={}){const m=lpt(r),g=ypt({initialValues:n,onValuesChange:u,mode:t}),b=gpt({initialDirty:i,initialTouched:s,$values:g,mode:t}),v=ppt({$values:g,$errors:m,$status:b}),x=vpt({$status:b}),[E,_]=D.useState(0),[C,S]=D.useState({}),[k,R]=D.useState(!1),O=D.useCallback(()=>{g.resetValues(),m.clearErrors(),b.resetDirty(),b.resetTouched(),t==="uncontrolled"&&_(Q=>Q+1)},[]),N=D.useCallback(Q=>{o&&m.clearErrors(),t==="uncontrolled"&&_(ie=>ie+1),Object.keys(x.subscribers.current).forEach(ie=>{const me=ho(ie,g.refValues.current),ae=ho(ie,Q);me!==ae&&x.getFieldSubscribers(ie).forEach(fe=>fe({previousValues:Q,updatedValues:g.refValues.current}))})},[o]),L=D.useCallback(Q=>{const ie=g.refValues.current;g.initialize(Q,()=>t==="uncontrolled"&&_(me=>me+1)),N(ie)},[N]),$=D.useCallback((Q,ie,me)=>{const ae=Koe(Q,a),fe=ie instanceof Function?ie(ho(Q,g.refValues.current)):ie;b.setCalculatedFieldDirty(Q,fe),p==="change"&&b.setFieldTouched(Q,!0),!ae&&o&&m.clearFieldError(Q),g.setFieldValue({path:Q,value:ie,updateState:t==="controlled",subscribers:[...x.getFieldSubscribers(Q),ae?be=>{const te=Kk(Q,f,be.updatedValues);te.hasError?m.setFieldError(Q,te.error):m.clearFieldError(Q)}:null,(me==null?void 0:me.forceUpdate)!==!1&&t!=="controlled"?()=>S(be=>({...be,[Q]:(be[Q]||0)+1})):null]})},[u,f]),B=D.useCallback(Q=>{const ie=g.refValues.current;g.setValues({values:Q,updateState:t==="controlled"}),N(ie)},[u,N]),H=D.useCallback(()=>{const Q=LB(f,g.refValues.current);return m.setErrors(Q.errors),Q},[f]),Y=D.useCallback(Q=>{const ie=Kk(Q,f,g.refValues.current);return ie.hasError?m.setFieldError(Q,ie.error):m.clearFieldError(Q),ie},[f]),J=(Q,{type:ie="input",withError:me=!0,withFocus:ae=!0,...fe}={})=>{const te={onChange:apt(re=>$(Q,re,{forceUpdate:!1})),"data-path":Goe(e,Q)};return me&&(te.error=m.errorsState[Q]),ie==="checkbox"?te[t==="controlled"?"checked":"defaultChecked"]=ho(Q,g.refValues.current):te[t==="controlled"?"value":"defaultValue"]=ho(Q,g.refValues.current),ae&&(te.onFocus=()=>b.setFieldTouched(Q,!0),te.onBlur=()=>{if(Koe(Q,l)){const re=Kk(Q,f,g.refValues.current);re.hasError?m.setFieldError(Q,re.error):m.clearFieldError(Q)}}),Object.assign(te,d==null?void 0:d({inputProps:te,field:Q,options:{type:ie,withError:me,withFocus:ae,...fe},form:G}))},K=(Q,ie)=>me=>{h==="always"&&(me==null||me.preventDefault());const ae=H();if(ae.hasErrors)h==="validation-failed"&&(me==null||me.preventDefault()),ie==null||ie(ae.errors,g.refValues.current,me);else{const fe=Q==null?void 0:Q(c(g.refValues.current),me);fe instanceof Promise&&(R(!0),fe.finally(()=>R(!1)))}},Z=Q=>c(Q||g.refValues.current),U=D.useCallback(Q=>{Q.preventDefault(),O()},[]),j=D.useCallback(Q=>Q?!Kk(Q,f,g.refValues.current).hasError:!LB(f,g.refValues.current).hasErrors,[f]),V=Q=>`${E}-${Q}-${C[Q]||0}`,z=D.useCallback(Q=>document.querySelector(`[data-path="${Goe(e,Q)}"]`),[]),G={watch:x.watch,initialized:g.initialized.current,values:g.stateValues,getValues:g.getValues,setInitialValues:g.setValuesSnapshot,initialize:L,setValues:B,setFieldValue:$,submitting:k,setSubmitting:R,errors:m.errorsState,setErrors:m.setErrors,setFieldError:m.setFieldError,clearFieldError:m.clearFieldError,clearErrors:m.clearErrors,resetDirty:b.resetDirty,setTouched:b.setTouched,setDirty:b.setDirty,isTouched:b.isTouched,resetTouched:b.resetTouched,isDirty:b.isDirty,getTouched:b.getTouched,getDirty:b.getDirty,reorderListItem:v.reorderListItem,insertListItem:v.insertListItem,removeListItem:v.removeListItem,replaceListItem:v.replaceListItem,reset:O,validate:H,validateField:Y,getInputProps:J,onSubmit:K,onReset:U,isValid:j,getTransformedValues:Z,key:V,getInputNode:z};return opt(e,G),G}function wpt(e,t){const n=t;return r=>typeof r!="string"?n:e.test(r)?null:n}function xpt(e){return wpt(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,e)}function GEe(e,t){if(e.type==="checkbox"){const n=e,r=n.minSelections&&t.length<n.minSelections,i=n.maxSelections&&t.length>n.maxSelections;if(r&&i)return`Please select between ${n.minSelections} and ${n.maxSelections} options`;if(r)return`Please select at least ${n.minSelections} options`;if(i)return`Please select at most ${n.maxSelections} options`}return null}const Ept=new URLSearchParams(window.location.search),_pt=(e,t)=>{let n={};return e.forEach(r=>{const i=t?t[r.id]:{},s=t&&t[`${r.id}-dontKnow`]!==void 0?t[`${r.id}-dontKnow`]:!1,o=r.withDontKnow?{[`${r.id}-dontKnow`]:s}:{},a=t&&t[`${r.id}-other`]!==void 0?t[`${r.id}-other`]:"",l=r.withOther?{[`${r.id}-other`]:a}:{};if(i)n={...n,[r.id]:i,...o,...l};else{let u="";r.paramCapture?u=Ept.get(r.paramCapture):r.type==="reactive"?u=[]:r.type==="matrix-radio"||r.type==="matrix-checkbox"?u=Object.fromEntries(r.questionOptions.map(c=>[c,""])):r.type==="slider"&&r.startingValue&&(u=r.startingValue.toString()),n={...n,[r.id]:u,...o,...l}}}),{...n}},Tpt=e=>{let t={};return e.forEach(n=>{n.required&&(t={...t,[n.id]:(r,i)=>{if(typeof r=="object"&&!Array.isArray(r)&&r!==null)return Object.values(r).every(s=>s!=="")?null:"Empty Input";if(Array.isArray(r)){if(n.requiredValue!=null&&!Array.isArray(n.requiredValue))return"Incorrect required value. Contact study administrator.";if(n.requiredValue!=null&&Array.isArray(n.requiredValue)){if(n.requiredValue.length!==r.length)return"Incorrect input";const s=[...n.requiredValue].sort(),o=[...r].sort();return s.every((a,l)=>a===o[l])?null:"Incorrect input"}return n.type==="checkbox"?GEe(n,r):r.length===0?"Empty input":null}return n.required&&n.requiredValue!=null&&r!=null?r.toString()!==n.requiredValue.toString()?"Incorrect input":null:n.required?(r==null||r==="")&&!i[`${n.id}-dontKnow`]?"Empty input":null:r===null?"Empty input":null}})}),t};function Cpt(e,t,n){const[r,i]=D.useState(null),s=VEe({initialValues:_pt(e,n),validate:Tpt(e)});return D.useEffect(()=>{r!==t&&(i(t),s.reset())},[r,s,t]),s}function X0(e,t,n){var o;const{requiredValue:r,requiredLabel:i}=e;let s="";return t.checked&&Array.isArray(r)?s=r&&[...r].sort().toString()!==[...t.checked].sort().toString()?`Please ${n?"select":"enter"} ${i||r.toString()} to continue.`:null:t.checked&&e.required?s=GEe(e,t.checked):s=t.value&&r&&r.toString()!==t.value.toString()?`Please ${n?"select":"enter"} ${i||(n?(o=n.find(a=>a.value===r))==null?void 0:o.label:r.toString())} to continue.`:null,s}function YEe({horizontal:e,children:t,style:n}){return e?T.jsx(yi,{mt:Oe(4),gap:"lg",style:n,children:t}):T.jsx(Ms,{gap:"md",style:n,children:t})}const Spt="_fixDisabled_1k5ri_1",Apt="_fixDisabledIcon_1k5ri_16",kpt="_fixDisabledLabel_1k5ri_20",Sc={fixDisabled:Spt,fixDisabledIcon:Apt,fixDisabledLabel:kpt},Ipt="_fixDisabled_d4mus_1",E0={fixDisabled:Ipt};function Rpt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i,otherValue:s}){const{prompt:o,required:a,secondaryText:l,horizontal:u,withOther:c,options:d}=e,f=Y0(),h=D.useMemo(()=>f?f.optionOrders:{},[f]),p=D.useMemo(()=>h[e.id]||d.map(v=>typeof v=="string"?{label:v,value:v}:v),[h,d,e.id]),[m,g]=D.useState(!1),b=D.useMemo(()=>X0(e,n,p),[e,n,p]);return T.jsxs(mo.Group,{label:T.jsxs(Dt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&T.jsx(Se,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${r}. `}),T.jsx(Se,{style:{display:"block"},className:"no-last-child-bottom-padding",children:T.jsx(Ws,{text:o,required:a})})]}),description:l,...n,error:b,style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:[T.jsx(Se,{mt:"xs",children:T.jsxs(YEe,{horizontal:!!u,style:{flexGrow:1},children:[p.map(v=>T.jsx(mo,{disabled:t,value:v.value,label:v.label,classNames:{input:Sc.fixDisabled,label:Sc.fixDisabledLabel,icon:Sc.fixDisabledIcon}},v.value)),c&&T.jsx(mo,{disabled:t,value:"__other",checked:m,onClick:v=>g(v.currentTarget.checked),label:u?"Other":T.jsx(Dr,{mt:-8,placeholder:"Other",disabled:!m,...s,classNames:{input:E0.fixDisabled}}),classNames:{input:Sc.fixDisabled,label:Sc.fixDisabledLabel,icon:Sc.fixDisabledIcon}},"__other")]})}),u&&c&&T.jsx(Dr,{mt:"sm",placeholder:"Other",disabled:!m,...s,w:216,classNames:{input:E0.fixDisabled}})]})}function Dpt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,options:l,secondaryText:u}=e,c=l.map(d=>typeof d=="string"?{value:d,label:d}:d);return T.jsx(Rx,{disabled:t,label:T.jsxs(Dt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&T.jsx(Se,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${r}. `}),T.jsx(Se,{style:{display:"block"},className:"no-last-child-bottom-padding",children:T.jsx(Ws,{text:o,required:a})})]}),description:u,placeholder:s,data:c,radius:"md",size:"md",...n,value:n.value===""?null:n.value,error:X0(e,n,c),classNames:{input:E0.fixDisabled}})}function Ppt({response:e,answer:t,index:n,enumerateQuestions:r}){const{prompt:i,required:s,secondaryText:o}=e;return T.jsx(Dr.Wrapper,{label:T.jsxs(Dt,{direction:"row",wrap:"nowrap",gap:4,children:[r&&T.jsx(Se,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${n}. `}),T.jsx(Se,{style:{display:"block"},className:"no-last-child-bottom-padding",children:T.jsx(Ws,{text:i,required:s})})]}),description:o,size:"md",children:t.value&&T.jsx(Hc,{children:Array.isArray(t.value)?t.value.map(a=>T.jsx(Hc.Item,{children:a},a)):T.jsx(Hc.Item,{children:t.value})})})}const Npt="_fixDisabled_14ab8_1",Opt="_fixDisabledIcon_14ab8_16",$pt="_fixDisabledLabel_14ab8_20",Rm={fixDisabled:Npt,fixDisabledIcon:Opt,fixDisabledLabel:$pt};function KEe({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i,stretch:s,otherValue:o}){const{prompt:a,required:l,leftLabel:u,rightLabel:c,secondaryText:d,horizontal:f,withOther:h,options:p}=e,m=Y0(),g=D.useMemo(()=>m?m.optionOrders:{},[m]),b=D.useMemo(()=>g[e.id]||p.map(_=>typeof _=="string"?{label:_,value:_}:_),[g,p,e.id]),[v,x]=D.useState(!1),E=D.useMemo(()=>X0(e,n,b),[e,n,b]);return T.jsxs(Au.Group,{name:`radioInput${e.id}`,label:T.jsxs(Dt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&T.jsx(Se,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${r}. `}),T.jsx(Se,{style:{display:"block"},className:"no-last-child-bottom-padding",children:T.jsx(Ws,{text:a,required:l})})]}),description:d,...n,error:E,style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:[T.jsxs(yi,{gap:"lg",align:"flex-end",mt:f?0:"sm",children:[u?T.jsx(Ve,{children:u}):null,T.jsxs(YEe,{horizontal:!!f,style:{flexGrow:1},children:[b.map(_=>T.jsxs("div",{style:{display:"flex",flexDirection:f?"column":"row",gap:f?"unset":Oe(12),flex:s?1:"unset",alignItems:"center"},children:[f&&T.jsx(Ve,{size:"sm",children:_.label}),T.jsx(Au,{disabled:t,value:_.value,label:_.label,styles:{label:{display:f?"none":"initial"}},onChange:()=>x(!1),classNames:{radio:Rm.fixDisabled,label:Rm.fixDisabledLabel,icon:Rm.fixDisabledIcon}})]},`${_.value}-${e.id}`)),h&&T.jsxs("div",{style:{display:"flex",flexDirection:f?"column":"row",gap:f?"unset":Oe(12),flex:s?1:"unset",alignItems:"center"},children:[f&&T.jsx(Ve,{size:"sm",children:"Other"}),T.jsx(Au,{disabled:t,value:"other",checked:v,onClick:_=>x(_.currentTarget.checked),label:!f&&T.jsx(Dr,{mt:-8,placeholder:"Other",disabled:!v,...o,classNames:{input:E0.fixDisabled}}),mt:0,classNames:{radio:Rm.fixDisabled,label:Rm.fixDisabledLabel,icon:Rm.fixDisabledIcon}})]})]}),T.jsx(Ve,{children:c})]}),f&&h&&T.jsx(Dr,{mt:"sm",placeholder:"Other",disabled:!v,...o,w:216,classNames:{input:E0.fixDisabled}})]},e.id)}function Mpt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{numItems:s}=e,o=[];for(let l=1;l<=+s;l+=1)o.push({label:`${l}`,value:`${l}`});const a={...e,type:"radio",options:o,horizontal:!0};return T.jsx(KEe,{disabled:t,response:a,answer:n,index:r,enumerateQuestions:i,stretch:!0})}function Lpt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,min:a,max:l,placeholder:u,secondaryText:c}=e;return T.jsx(Mq,{disabled:t,placeholder:u,label:T.jsxs(Dt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&T.jsx(Se,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${r}. `}),T.jsx(Se,{style:{display:"block"},className:"no-last-child-bottom-padding",children:T.jsx(Ws,{text:s,required:o})})]}),description:c,radius:"md",size:"md",min:a,max:l,...n,error:X0(e,n),classNames:{input:E0.fixDisabled}})}const Fpt="_track_w59g7_1",jpt="_fixDisabled_w59g7_11",Xoe={track:Fpt,fixDisabled:jpt};function Bpt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,options:a,secondaryText:l,snap:u,step:c,withBar:d,tlxStyle:f}=e,[h,p]=D.useMemo(()=>[Math.min(...a.map(b=>b.value)),Math.max(...a.map(b=>b.value))],[a]),m=a.some(b=>b.label!==""),g=X0(e,n);return T.jsx(Dr.Wrapper,{label:T.jsxs(Dt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&T.jsx(Se,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${r}. `}),T.jsx(Se,{style:{display:"block"},className:"no-last-child-bottom-padding",children:T.jsx(Ws,{text:s,required:o})})]}),description:l,error:g,style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:T.jsx(Wb,{disabled:t,marks:a,min:h,max:p,step:c??(u?.001:(p-h)/100),h:m?40:void 0,...n,classNames:{track:f?Xoe.track:"",bar:Xoe.fixDisabled},restrictToMarks:u,label:b=>u?null:b,styles:b=>({mark:{...f?{height:20,width:1,marginTop:-6,marginLeft:2,borderRadius:0}:{},...d===!1?{borderColor:"var(--mantine-color-gray-2)"}:{}},bar:d===!1||f?{display:"none"}:{},markLabel:{fontSize:b.fontSizes.sm,color:b.colors.gray[7],transform:"translate(calc((var(--mark-offset) * -1) + (var(--slider-size) / 2)), calc(var(--mantine-spacing-xs) / 2)"},thumb:{...f?{borderColor:"var(--mantine-color-red-6)",width:1,borderWidth:1,height:22,borderRadius:0,backgroundColor:"var(--mantine-color-red-6)",transform:"translate(-50%, -62%)"}:{}}}),flex:1,mt:f?"sm":"xs"})})}function zpt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,secondaryText:l}=e;return T.jsx(jh,{disabled:t,placeholder:s,label:T.jsxs(Dt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&T.jsx(Se,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${r}. `}),T.jsx(Se,{style:{display:"block"},className:"no-last-child-bottom-padding",children:T.jsx(Ws,{text:o,required:a})})]}),description:l,radius:"md",size:"md",...n,value:n.value||"",error:X0(e,n),classNames:{input:E0.fixDisabled}})}function Upt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,secondaryText:l}=e;return T.jsx(Eq,{disabled:t,placeholder:s,label:T.jsxs(Dt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&T.jsx(Se,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${r}. `}),T.jsx(Se,{style:{display:"block"},className:"no-last-child-bottom-padding",children:T.jsx(Ws,{text:o,required:a})})]}),description:l,radius:"md",size:"md",...n,value:n.value||"",error:X0(e,n),classNames:{input:E0.fixDisabled}})}function qpt({_choices:e,_n:t,idx:n,question:r,answer:i,onChange:s,disabled:o}){return T.jsx("div",{style:{flex:1,display:"grid",gridTemplateColumns:`repeat(${t}, 1fr)`,justifyItems:"center"},children:e.map(a=>T.jsx(mo,{disabled:o,checked:i.value[r].split("|").includes(a.value),onChange:l=>s(l,r,a),value:a.value,classNames:{input:Sc.fixDisabled,icon:Sc.fixDisabledIcon}},`${a.label}-${n}`))})}function Hpt({_choices:e,_n:t,idx:n,question:r,response:i,answer:s,onChange:o,disabled:a}){return T.jsx(Au.Group,{name:`radioInput${i.id}-${n}`,style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))",flex:1},onChange:l=>o(l,r),value:s.value[r],children:T.jsx("div",{style:{flex:1,display:"grid",gridTemplateColumns:`repeat(${t}, 1fr)`,justifyItems:"center"},children:e.map(l=>T.jsx(Au,{disabled:a,value:l.value,classNames:{radio:Rm.fixDisabled,icon:Rm.fixDisabledIcon}},`${l.label}-${n}`))})},`${i.id}-${n}`)}function Wpt({response:e,answer:t,index:n,disabled:r,enumerateQuestions:i}){const{setMatrixAnswersRadio:s,setMatrixAnswersCheckbox:o}=Gi(),a=ys(),{answerOptions:l,prompt:u,secondaryText:c,required:d}=e,h=typeof l=="string"?{likely5:["Highly Unlikely","Unlikely","Neutral","Likely","Highly Likely"],likely7:["Highly Unlikely","Unlikely","Slightly Unlikely","Neutral","Slightly Likely","Likely","Highly Likely"],satisfaction5:["Highly Unsatisfied","Unsatisfied","Neutral","Satisfied","Highly Satisfied"],satisfaction7:["Highly Unsatisfied","Unsatisfied","Slightly Unsatisfied","Neutral","Slightly Satisfied","Satisfied","Highly Satisfied"]}[l].map(E=>({value:E,label:E})):l.map(E=>typeof E=="string"?{value:E,label:E}:E),{questionOrders:p}=Y0(),m=D.useMemo(()=>p[e.id],[p,e.id]),g=(E,_)=>{const C={type:"radio",questionKey:_,val:E,responseId:e.id};a(s(C))},b=(E,_,C)=>{const S=E.target.checked,k={questionKey:_,responseId:e.id,value:C.value,label:C.label,isChecked:S,choiceOptions:h};a(o(k))},v=h.length,x=m.length;return T.jsxs(T.Fragment,{children:[T.jsxs(Dt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&T.jsx(Se,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${n}. `}),T.jsx(Se,{style:{display:"block"},className:"no-last-child-bottom-padding",children:T.jsx(Ws,{text:u,required:d})})]}),T.jsx(Ve,{c:"dimmed",size:"sm",mt:0,children:c}),T.jsxs(Se,{style:{display:"grid",gridTemplateColumns:"auto 1fr",gridTemplateRows:"auto 1fr"},m:"md",mt:"xs",children:[T.jsx("div",{style:{borderBottom:"1px solid var(--mantine-color-dark-0)",borderRight:"1px solid var(--mantine-color-dark-0)"}}),T.jsx("div",{style:{height:"100%",display:"grid",gridTemplateColumns:`repeat(${v}, 1fr)`,alignItems:"center",justifyItems:"center",borderBottom:"1px solid var(--mantine-color-dark-0)"},children:h.map((E,_)=>T.jsx(Ve,{style:{fontWeight:"bold",textAlign:"center",fontSize:"0.8em"},mb:"sm",ml:"xs",mr:"xs",children:E.label},`choice-${_}-label`))}),T.jsx("div",{style:{height:"100%",display:"grid",gridTemplateRows:`repeat(${x}, 1fr)`},children:m.map((E,_)=>T.jsx(Ve,{style:{height:"80px",width:"100%",display:"flex",alignItems:"safe center",justifyContent:"end",borderRight:"1px solid var(--mantine-color-dark-0)",backgroundColor:`${(_+1)%2===0?"var(--mantine-color-gray-2)":"white"}`,overflowY:"auto"},ta:"right",p:"sm",miw:140,maw:400,children:E},`question-${_}-label`))}),T.jsx("div",{style:{height:"100%",display:"grid",gridTemplateRows:`repeat(${x},1fr)`},children:m.map((E,_)=>T.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",backgroundColor:`${(_+1)%2===0?"var(--mantine-color-gray-2)":"white"}`},children:e.type==="matrix-radio"?T.jsx(Hpt,{disabled:r,idx:_,question:E,answer:t,_choices:h,_n:v,onChange:g,response:e}):T.jsx(qpt,{disabled:r,idx:_,question:E,answer:t,_choices:h,_n:v,onChange:b})},`question-${_}`))})]})]})}const Vpt="_root_152zr_1",Gpt={root:Vpt};function Ypt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,secondaryText:a,options:l}=e,u=Y0(),c=D.useMemo(()=>u?u.optionOrders:{},[u]),d=D.useMemo(()=>c[e.id]||l,[c,l,e.id]),f=D.useMemo(()=>X0(e,n,d),[e,n,d]);return T.jsx(RC,{children:T.jsx(Au.Group,{name:`radioInput${e.id}`,label:T.jsxs(Dt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&T.jsx(Se,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${r}. `}),T.jsx(Se,{style:{display:"block"},className:"no-last-child-bottom-padding",children:T.jsx(Ws,{text:s,required:o})})]}),description:a,...n,error:f,style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:T.jsx(Dt,{justify:"space-between",align:"center",gap:"xl",mt:"xs",children:d.map((h,p)=>T.jsx(Au.Card,{value:h.value,disabled:t,ta:"center",className:Gpt.root,p:"xs",children:T.jsx(Ve,{children:h.label})},`radio-${p}`))})},e.id)})}function Kpt({response:e}){const{prompt:t}=e;return T.jsx(Dt,{direction:"row",wrap:"nowrap",gap:4,children:T.jsx(Se,{style:{display:"block"},className:"no-last-child-bottom-padding",children:T.jsx(Ws,{text:t,required:!1})})})}function Xpt({response:e,form:t,storedAnswer:n,index:r,configInUse:i,dontKnowCheckbox:s,otherInput:o,disabled:a}){const u=(K0()?{value:n[e.id]}:t)||{value:void 0},c=(Object.keys(n||{}).length>0?{checked:n[`${e.id}-dontKnow`]}:s)||{checked:void 0},d=(Object.keys(n||{}).length>0?{value:n[`${e.id}-other`]}:o)||{value:void 0},f=Object.keys(n||{}).length>0||a,[h]=Bf(),p=Ku(),m=D.useMemo(()=>(i==null?void 0:i.enumerateQuestions)??p.uiConfig.enumerateQuestions??!1,[i,p]),g=Wn(C=>C.sequence),b=Rf(g),v=Pa(),x=D.useMemo(()=>{if(typeof v=="number"){const C=b[v];for(let S=0;S<g.components.length;S+=1){const k=g.components[S];if(typeof k=="string"&&k===C){if(S+1<g.components.length&&typeof g.components[S+1]!="string")return!1;break}}}if(typeof v=="number"&&v+1<b.length){const C=b[v+1],S=p.components[C];if(S!=null&&S.previousButton)return!1}if(e.paramCapture){const C=h.get(e.paramCapture);return f||!!C}return a},[a,e.paramCapture,h,v,b,p.components,g,f]),E=D.useMemo(()=>e.paramCapture?h.get(e.paramCapture)||"":e.type==="reactive"||e.type==="checkbox"?[]:e.type==="matrix-radio"||e.type==="matrix-checkbox"?Object.fromEntries(e.questionOptions.map(C=>[C,""])):e.type==="slider"&&e.startingValue?e.startingValue.toString():"",[e.paramCapture,e.questionOptions,e.startingValue,e.type,h]),_=D.useMemo(()=>e.withDivider??(i==null?void 0:i.responseDividers)??p.uiConfig.responseDividers,[e,i,p]);return T.jsxs(Se,{mb:_?"xl":"lg",children:[e.type==="numerical"&&T.jsx(Lpt,{response:e,disabled:x||(s==null?void 0:s.checked),answer:u,index:r,enumerateQuestions:m}),e.type==="shortText"&&T.jsx(zpt,{response:e,disabled:x||(s==null?void 0:s.checked),answer:u,index:r,enumerateQuestions:m}),e.type==="longText"&&T.jsx(Upt,{response:e,disabled:x||(s==null?void 0:s.checked),answer:u,index:r,enumerateQuestions:m}),e.type==="likert"&&T.jsx(Mpt,{response:e,disabled:x||(s==null?void 0:s.checked),answer:u,index:r,enumerateQuestions:m}),e.type==="dropdown"&&T.jsx(Dpt,{response:e,disabled:x||(s==null?void 0:s.checked),answer:u,index:r,enumerateQuestions:m}),e.type==="slider"&&T.jsx(Bpt,{response:e,disabled:x||(s==null?void 0:s.checked),answer:u,index:r,enumerateQuestions:m}),e.type==="radio"&&T.jsx(KEe,{response:e,disabled:x||(s==null?void 0:s.checked),answer:u,index:r,enumerateQuestions:m,otherValue:d}),e.type==="checkbox"&&T.jsx(Rpt,{response:e,disabled:x||(s==null?void 0:s.checked),answer:u,index:r,enumerateQuestions:m,otherValue:d}),e.type==="reactive"&&T.jsx(Ppt,{response:e,answer:u,index:r,enumerateQuestions:m}),(e.type==="matrix-radio"||e.type==="matrix-checkbox")&&T.jsx(Wpt,{disabled:x||(s==null?void 0:s.checked),response:e,answer:u,index:r,enumerateQuestions:m}),e.type==="buttons"&&T.jsx(Ypt,{response:e,disabled:x||(s==null?void 0:s.checked),answer:u,index:r,enumerateQuestions:m}),e.type==="textOnly"&&T.jsx(Kpt,{response:e}),e.withDontKnow&&T.jsx(mo,{mt:"xs",disabled:x,label:"I don't know",classNames:{input:Sc.fixDisabled,label:Sc.fixDisabledLabel,icon:Sc.fixDisabledIcon},...s,checked:c.checked,onChange:C=>{s==null||s.onChange(C.currentTarget.checked),t.onChange(E)}}),_&&T.jsx(Rv,{mt:"xl",mb:"xs"})]})}function Qpt(e,t){const n=[];for(const r of e)t.includes(r)&&n.push(r);return n}function OP({config:e,location:t,status:n,style:r}){var be;const{storageEngine:i}=Ai(),s=ys(),{updateResponseBlockValidation:o,toggleShowHelpText:a,saveIncorrectAnswer:l,incrementHelpCounter:u}=Gi(),c=Pa(),d=Wn(te=>te.analysisProvState[t]),f=D.useMemo(()=>(d==null?void 0:d.form)||(n==null?void 0:n.answer),[d,n]),h=Y0(),p=D.useMemo(()=>(h==null?void 0:h.formOrder)||{},[h]),m=Ra(),g=e,b=D.useMemo(()=>p!=null&&p.response?p.response.map(te=>{var re;return(re=g==null?void 0:g.response)==null?void 0:re.find(we=>we.id===te)}).filter(te=>te!==void 0&&(te.location?te.location===t:t==="belowStimulus")):[],[g==null?void 0:g.response,t,p]),v=D.useMemo(()=>b.map(te=>te.type!=="textOnly"?{...te,required:te.required===void 0?!0:te.required}:te),[b]),x=Cpt(v,c,f||{}),{actions:E,trrack:_}=D.useMemo(()=>{const te=Lv.create(),re=te.register("update",(Ee,Fe)=>(Ee.form=Fe,Ee)),we=nS({registry:te,initialState:{form:null}});return{actions:{updateFormAction:re},trrack:we}},[]),C=Wn(te=>te.reactiveAnswers),S=Wn(te=>te.matrixAnswers),k=Ku(),O=D.useMemo(()=>(g==null?void 0:g.provideFeedback)??k.uiConfig.provideFeedback,[g,k])&&(((be=g==null?void 0:g.correctAnswer)==null?void 0:be.length)||0)>0,N=D.useMemo(()=>(g==null?void 0:g.allowFailedTraining)??k.uiConfig.allowFailedTraining??!0,[g,k]),[L,$]=D.useState(0),B=D.useMemo(()=>(g==null?void 0:g.trainingAttempts)??k.uiConfig.trainingAttempts??2,[g,k]),[H,Y]=D.useState(!1),[J,K]=D.useState(!1),U=L>=B&&B>=0||J,j=D.useMemo(()=>t===((g==null?void 0:g.nextButtonLocation)??k.uiConfig.nextButtonLocation??"belowStimulus"),[g,k,t]),V=Hv();D.useEffect(()=>{const te=v.find(re=>re.type==="reactive");if(C&&te){const re=te.id;x.setValues({...x.values,[re]:C[re]})}},[C]),D.useEffect(()=>{const te=v.filter(re=>re.type==="matrix-radio"||re.type==="matrix-checkbox");if(S&&te.length>0){const re={...x.values};te.forEach(we=>{const{id:Ee}=we;re[Ee]={...x.getInputProps(Ee).value,...S[Ee]}}),x.setValues(re)}},[S]),D.useEffect(()=>{_.apply("update",E.updateFormAction(structuredClone(x.values))),s(o({location:t,identifier:V,status:x.isValid(),values:structuredClone(x.values),provenanceGraph:_.graph.backend}))},[x.values,V,t,s,o]);const[z,G]=D.useState(Object.fromEntries(v.map(te=>[te.id,{visible:!1,title:"Correct Answer",message:"The correct answer is: ",color:"green"}]))),Q=(te,re,we,Ee,Fe)=>{G(We=>({...We,[te]:{visible:re,title:we,message:Ee,color:Fe}}))},ie=D.useCallback(()=>{const te=L+1;$(te);const re=Object.fromEntries(v.map(we=>{var We,Me;const Ee=(Me=(We=g==null?void 0:g.correctAnswer)==null?void 0:We.find(Be=>Be.id===we.id))==null?void 0:Me.answer,Fe=x.values[we.id];return[we.id,Array.isArray(Fe)?typeof Ee=="string"?Fe.length===1&&Ee===Fe[0]:Fe.length===Ee.length&&Fe.every(Be=>Ee.includes(Be)):Ee===Fe]}));O&&(v.forEach(we=>{var Ee,Fe,We;if(re[we.id]&&!((Ee=z[we.id])!=null&&Ee.message.includes("You've failed to answer this question correctly")))Q(we.id,!0,"Correct Answer","You have answered the question correctly.","green");else{s(l({question:V,identifier:we.id,answer:x.values[we.id]}));let Me="";if(B===-1?Me="Please try again.":te>=B?(Me=`You didn't answer this question correctly after ${B} attempts. ${N?"You can continue to the next question.":"Unfortunately you have not met the criteria for continuing this study."}`,!N&&i&&i.rejectCurrentParticipant("Failed training").then(()=>{setTimeout(()=>{m("./../__trainingFailed")},5e3)}).catch(()=>{console.error("Failed to reject participant who failed training"),setTimeout(()=>{m("./../__trainingFailed")},5e3)})):B-te===1?Me="Please try again. You have 1 attempt left.":Me=`Please try again. You have ${B-te} attempts left.`,we.type==="checkbox"){const Be=(We=(Fe=g==null?void 0:g.correctAnswer)==null?void 0:Fe.find(vt=>vt.id===we.id))==null?void 0:We.answer,Je=x.values[we.id],lt=Qpt(Je,Be),ht=Be.length===lt.length&&Je.length>Be.length?"However, you have selected too many boxes. ":"";Me=`You have successfully checked ${lt.length}/${Be.length} correct boxes. ${ht}${Me}`}Q(we.id,!0,"Incorrect Answer",Me,"red")}}),K(Object.values(re).every(we=>we)),Y(N&&te>=B||Object.values(re).every(we=>we)&&te<=B))},[L,v,g,O,B,N,i,m,V,s,x,z,l]),me=(g==null?void 0:g.nextOnEnter)??k.uiConfig.nextOnEnter;D.useEffect(()=>{if(me){const te=re=>{re.key==="Enter"&&ie()};return window.addEventListener("keydown",te),()=>{window.removeEventListener("keydown",te)}}return()=>{}},[ie,me]);const ae=D.useMemo(()=>(g==null?void 0:g.nextButtonText)??k.uiConfig.nextButtonText??"Next",[g,k]);let fe=0;return T.jsxs("div",{style:r,children:[v.map(te=>{var we,Ee,Fe;const re=(Ee=(we=g.correctAnswer)==null?void 0:we.find(We=>We.id===te.id))==null?void 0:Ee.answer;return te.type!=="textOnly"?fe+=1:te.restartEnumeration&&(fe=0),T.jsx(Jn.Fragment,{children:te.hidden?"":T.jsxs(T.Fragment,{children:[T.jsx(Xpt,{storedAnswer:f,form:{...x.getInputProps(te.id,{type:te.type==="checkbox"?"checkbox":"input"})},dontKnowCheckbox:{...x.getInputProps(`${te.id}-dontKnow`,{type:"checkbox"})},otherInput:{...x.getInputProps(`${te.id}-other`)},response:te,index:fe,configInUse:g,disabled:U}),((Fe=z[te.id])==null?void 0:Fe.visible)&&T.jsxs(Zh,{mb:"md",title:z[te.id].title,color:z[te.id].color,children:[z[te.id].message,z[te.id].message.includes("Please try again")&&T.jsxs(T.Fragment,{children:[T.jsx("br",{}),T.jsx("br",{}),"If you're unsure"," ",T.jsx(kv,{style:{fontSize:14},onClick:()=>{s(a()),s(u({identifier:V}))},children:"review the help text."})," "]}),T.jsx("br",{}),T.jsx("br",{}),L>=B&&B>=0&&re&&` The correct answer was: ${re}.`]})]})},`${te.id}-${c}`)}),j&&T.jsx(rpt,{disabled:O&&!H||!x.isValid(),label:ae,configInUse:g,location:t,checkAnswer:j&&O?T.jsx(Gt,{onClick:()=>ie(),px:t==="sidebar"?8:void 0,children:"Check Answer"}):null})]})}const v_="@REVISIT_COMMS",Jpt={width:"100%",border:0};function Zpt({currentConfig:e,provState:t,answers:n}){const{setReactiveAnswers:r,updateResponseBlockValidation:i}=Gi(),s=ys(),o=Wve(),a=Hv(),[l,u]=D.useState(800),c=D.useRef(null),d=D.useMemo(()=>crypto.randomUUID?crypto.randomUUID():`testID-${Date.now()}`,[]),f=pd(),h=D.useCallback((p,m)=>{var g,b;(b=(g=c.current)==null?void 0:g.contentWindow)==null||b.postMessage({error:!1,type:`${v_}/${p}`,iframeId:d,message:m},"*")},[c,d]);return D.useEffect(()=>{t&&h("PROVENANCE",t)},[t,h]),D.useEffect(()=>{n&&h("ANSWERS",n)},[n,h]),D.useEffect(()=>{const p=m=>{const{data:g}=m;if(typeof g=="object"&&d===g.iframeId)switch(g.type){case`${v_}/WINDOW_READY`:e.parameters&&h("STUDY_DATA",e.parameters);break;case`${v_}/READY`:if(c.current){const b=document.getElementById(g.iframeId);b&&b.contentWindow&&(c.current.style.height=`${b.contentWindow.document.body.scrollHeight.toString()}px`)}break;case`${v_}/ANSWERS`:s(r(g.message)),s(i({location:"stimulus",identifier:a,status:!0,values:g.message}));break;case`${v_}/PROVENANCE`:s(i({location:"stimulus",identifier:a,values:{},status:!0,provenanceGraph:g.message}));break}};return window.addEventListener("message",p),()=>window.removeEventListener("message",p)},[s,o,d,e,h,r,i,a]),T.jsx("iframe",{ref:c,id:d,src:e.path.startsWith("http")?e.path:`${Vi}${e.path}?trialid=${f}&id=${d}`,style:{...Jpt,height:l},onLoad:()=>{var p,m;return u((((m=(p=c.current)==null?void 0:p.contentWindow)==null?void 0:m.document.body.scrollHeight)||750)+20)}})}async function I$(e){const n=await(await fetch(e)).text();if(!n.includes("<title>ReVISit</title>"))return n}async function emt(e){const t=await fetch(`${Vi}${e}`);let n;try{n=await t.json()}catch(r){console.error("Invalid JSON:",r)}return n}function Cp({email:e,path:t}){const n=Wu();return T.jsxs(mp,{fluid:!0,my:50,maw:800,mx:"auto",children:[T.jsx(mi,{order:2,children:T.jsx(Ve,{span:!0,c:"orange",children:"404"})}),T.jsxs(Ve,{children:[T.jsx(Ve,{span:!0,fw:700,children:t||n.pathname})," ","not Found."]}),T.jsx(Ul,{h:"lg"}),T.jsxs(Hc,{children:[T.jsx(Hc.Item,{children:T.jsx(Ve,{children:"If you're trying to access your study please check the URL and verify that the global config file is correctly configured. Then try again."})}),T.jsx(Hc.Item,{children:T.jsxs(Ve,{children:["If you're a participant, please contact the study administrator"," ",e&&T.jsxs(T.Fragment,{children:["at"," ",T.jsxs(kv,{c:"blue",href:`mailto:${e}`,children:[e," "]})]}),"."]})})]})]})}const tmt={maxWidth:"100%"};function nmt({currentConfig:e}){const t={...tmt,...e.style},n=D.useMemo(()=>e.path.startsWith("http")?e.path:`${Vi}${e.path}`,[e.path]),[r,i]=D.useState(!0),[s,o]=D.useState(!1);return D.useEffect(()=>{async function a(){let l=await I$(n);l=l!=null&&l.includes("File not found")?void 0:l,o(!!l),i(!1)}a()},[n]),r||s?T.jsx(j0,{mx:"auto",src:n,style:t}):T.jsx(Cp,{path:e.path})}class rmt extends Jn.Component{constructor(t){super(t),this.state={hasError:!1,error:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}render(){return this.state.hasError?T.jsx(Ve,{children:this.state.error.toString()}):this.props.children}}const Qoe=Object.assign({"../public/libraries/mic-check/assets/AudioTest.tsx":Zve,"../public/libraries/test/assets/test.tsx":e1e,"../public/matrices/Stimuli.tsx":vEe,"../public/matrices/components/Background.tsx":Dxe,"../public/matrices/components/ControlPanel.tsx":mEe,"../public/matrices/components/EncodedCells.tsx":Bxe,"../public/matrices/components/Highlighting.tsx":Oxe,"../public/matrices/components/InteractionButtons.tsx":hEe,"../public/matrices/components/Legend.tsx":Fxe,"../public/matrices/components/Marks.tsx":Wxe,"../public/matrices/components/Matrix.tsx":yEe,"../public/matrices/components/Tooltip.tsx":Uxe,"../public/matrices/components/axis/DestinationAxis.tsx":Ixe,"../public/matrices/components/axis/OriginAxis.tsx":Axe,"../public/matrices/hooks/useCellScales.tsx":Xxe,"../public/matrices/hooks/useConfig.tsx":dEe,"../public/matrices/hooks/useOrdering.tsx":aEe,"../public/matrices/hooks/useRenderEncodeCells.tsx":Yxe,"../public/matrices/hooks/useReplay.tsx":uEe,"../public/matrices/utils/Accessors.tsx":$xe,"../public/matrices/utils/Constants.ts":Pxe,"../public/matrices/utils/Enums.ts":Mxe,"../public/matrices/utils/Interfaces.tsx":bEe,"../public/matrices/utils/MatrixContext.tsx":Txe});function imt({currentConfig:e,provState:t,answers:n}){const r=`../public/${e.path}`,i=r in Qoe?Qoe[r].default:null,s=Hv(),o=ys(),{updateResponseBlockValidation:a,setReactiveAnswers:l}=Gi(),u=D.useCallback(({status:c,provenanceGraph:d,answers:f})=>{o(a({location:"stimulus",identifier:s,status:c,values:f,provenanceGraph:d})),o(l(f))},[l,o,a,s]);return T.jsx(D.Suspense,{fallback:T.jsx("div",{children:"Loading..."}),children:i?T.jsx(rmt,{children:T.jsx(i,{parameters:e.parameters,setAnswer:u,answers:n,provenanceState:t})}):T.jsx(Cp,{path:e.path})})}function smt({currentConfig:e}){const[t,n]=D.useState(""),[r,i]=D.useState(!0);return D.useEffect(()=>{async function s(){const o=await I$(`${Vi}${e.path}`);o!==void 0&&n(o),i(!1)}s()},[e.path]),r||t?T.jsx(Ws,{text:t}):T.jsx(Cp,{path:e.path})}function XEe(){const e=Pa(),{setAlertModal:t}=Gi(),n=ys();D.useEffect(()=>{window.history.pushState(null,"",window.location.href),window.onpopstate=()=>{window.history.pushState(null,"",window.location.href),n(t({show:!0,message:"Using the browser's back button is prohibited during the study."}))}},[e,t,n])}var Joe=Object.prototype.hasOwnProperty;function Zoe(e,t,n){for(n of e.keys())if(X2(n,t))return n}function X2(e,t){var n,r,i;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((r=e.length)===t.length)for(;r--&&X2(e[r],t[r]););return r===-1}if(n===Set){if(e.size!==t.size)return!1;for(r of e)if(i=r,i&&typeof i=="object"&&(i=Zoe(t,i),!i)||!t.has(i))return!1;return!0}if(n===Map){if(e.size!==t.size)return!1;for(r of e)if(i=r[0],i&&typeof i=="object"&&(i=Zoe(t,i),!i)||!X2(r[1],t.get(i)))return!1;return!0}if(n===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(n===DataView){if((r=e.byteLength)===t.byteLength)for(;r--&&e.getInt8(r)===t.getInt8(r););return r===-1}if(ArrayBuffer.isView(e)){if((r=e.byteLength)===t.byteLength)for(;r--&&e[r]===t[r];);return r===-1}if(!n||typeof e=="object"){r=0;for(n in e)if(Joe.call(e,n)&&++r&&!Joe.call(t,n)||!(n in t)||!X2(e[n],t[n]))return!1;return Object.keys(t).length===r}}return e!==e&&t!==t}function omt(e){var t=D.useRef(e),n=D.useRef(0);return X2(e,t.current)||(t.current=e,n.current+=1),D.useMemo(function(){return t.current},[n.current])}function amt(e,t){return D.useEffect(e,omt(t))}const QEe=(e,t=null)=>{const[n,r]=D.useState("idle"),[i,s]=D.useState(null),[o,a]=D.useState(null),l=D.useRef(null),u=D.useRef(!1);D.useEffect(()=>(u.current=!0,()=>{u.current=!1}),[]);const c=D.useCallback((...d)=>{r("pending"),a(null);const f=Promise.resolve(e(...d)).then(h=>(u.current&&f===l.current&&(s(h),r("success")),h)).catch(h=>{throw u.current&&f===l.current&&(s(null),a(h),r("error")),h});return l.current=f,f},[e]);return amt(()=>{if(t)try{c(...t)}catch{}},[c,t]),{execute:c,status:n,value:i,error:o}};function JEe(e){const t=e.endTime===-1?void 0:e.endTime-e.startTime,n=(e.windowEvents||[]).filter(o=>o!==void 0).filter(([o,a,l])=>a==="visibility");let r=0,i=0;for(;i<n.length-1;){if(n[i][2]==="hidden"){for(let o=i+1;o<n.length;o+=1)if(n[o][2]==="visible"){r+=n[o][0]-n[i][0],i=o;break}}i+=1}return t?t-r:void 0}const lmt="_root_1spq0_1",umt="_description_1spq0_9",cmt="_title_1spq0_10",dmt="_closeButton_1spq0_14",fmt={root:lmt,description:umt,title:cmt,closeButton:dmt},XT=e=>{const{title:t,message:n,color:r}=e;Nv.show({title:t,message:n,position:"top-center",classNames:fmt,color:r||"blue",autoClose:r==="red"||r==="yellow"?!1:5e3})},eae=["status","rejectReason","rejectTime","percentComplete","description","instruction","responsePrompt","answer","correctAnswer","responseMin","responseMax","startTime","endTime","duration","cleanedDuration","meta","configHash"],ZEe=["participantId","trialId","trialOrder","responseId"];function hV(e,t){const n=`data:text/json;charset=utf-8,${encodeURIComponent(e)}`,r=document.createElement("a");r.setAttribute("href",n),r.setAttribute("download",t),document.body.appendChild(r),r.click(),r.remove()}function hmt(e,t,n){const r=(Object.entries(e.answers).filter(([s,o])=>o.endTime!==-1).length/Object.entries(e.answers).length*100).toFixed(2),i=new Set;return[[{participantId:e.participantId,trialId:"participantTags",trialOrder:null,responseId:"participantTags",answer:JSON.stringify(e.participantTags)},...Object.values(e.answers).map(s=>{const o=s.componentName,{trialOrder:a}=s,l=n.components[o],u=Iu(l,n),c=s.endTime===-1?void 0:s.endTime-s.startTime,d=JEe(s),f=Object.keys(s.answer).length===0?{"":void 0}:s.answer;return Object.entries(f).map(([p,m])=>{var v,x,E;const g={participantId:e.participantId,trialId:o,trialOrder:a,responseId:p};Object.entries(s.parameters).forEach(([_,C])=>{g[`parameters_${_}`]=C,i.add(`parameters_${_}`)});const b=u.response.find(_=>_.id===p);if(t.includes("status")&&(g.status=e.rejected?"rejected":e.completed?"completed":"in progress"),t.includes("rejectReason")&&(g.rejectReason=e.rejected?e.rejected.reason:void 0),t.includes("rejectTime")&&(g.rejectTime=e.rejected?new Date(e.rejected.timestamp).toISOString():void 0),t.includes("configHash")&&(g.configHash=e.participantConfigHash),t.includes("percentComplete")&&(g.percentComplete=r),t.includes("description")&&(g.description=u.description),t.includes("instruction")&&(g.instruction=u.instruction),t.includes("responsePrompt")&&(g.responsePrompt=b==null?void 0:b.prompt),t.includes("answer")&&(g.answer=m),t.includes("correctAnswer")){const _=(x=(v=u.correctAnswer)==null?void 0:v.find(k=>k.id===p))==null?void 0:x.answer,S=((E=s.correctAnswer.find(k=>k.id===p))==null?void 0:E.answer)||_;g.correctAnswer=typeof S=="object"?JSON.stringify(S):S}return t.includes("responseMin")&&(g.responseMin=(b==null?void 0:b.type)==="numerical"?b.min:void 0),t.includes("responseMax")&&(g.responseMax=(b==null?void 0:b.type)==="numerical"?b.max:void 0),t.includes("startTime")&&(g.startTime=new Date(s.startTime).toISOString()),t.includes("endTime")&&(g.endTime=new Date(s.endTime).toISOString()),t.includes("duration")&&(g.duration=c),t.includes("cleanedDuration")&&(g.cleanedDuration=d),t.includes("meta")&&(g.meta=JSON.stringify(u.meta,null,2)),g}).flat()}).flat()],Array.from(i)]}async function pmt(e,t,n,r){if(!n)return{header:[],rows:[]};const i=[...ZEe,...e],s=[...new Set(t.map(f=>f.participantConfigHash))],o=await n.getAllConfigsFromHash(s,r),a=i,l=await Promise.all(t.map(async f=>await hmt(f,i,o[f.participantConfigHash]))),u=l.map(f=>f[0]),c=new Set(l.map(f=>f[1]).flat()),d=u.flat().sort((f,h)=>f!==h?f.participantId.localeCompare(h.participantId):f.trialOrder-h.trialOrder);return{header:[...a,...c],rows:d}}function mmt({opened:e,close:t,filename:n,data:r,studyId:i}){const[s,o]=D.useState([...eae].filter(p=>p!=="meta")),a=Ai(),{value:l,status:u,error:c}=QEe(pmt,[s,r,a.storageEngine,i]),d=D.useCallback(()=>{if(!l)return;const p=[l.header.join(","),...l.rows.map(m=>l.header.map(g=>`"${`${m[g]}`.replace(/"/g,'""')}"`).join(","))].join(`
`);hV(p,n)},[n,l]),f=D.useCallback(()=>{l&&(window.parent.postMessage({type:"revisitWidget/PYTHON_EXPORT_TIDY",payload:l},"*"),XT({title:"Success",message:"Data sent to python notebook",color:"green"}))},[l]),h=D.useMemo(()=>{if(!l)return"";const p=l.rows.length>5?5:l.rows.length,m=p===1?"":"s";return`This is a preview of the first ${m?p:""} row${m} of the CSV. The full CSV contains ${l.rows.length} row${m}.`},[l]);return T.jsxs(ii,{opened:e,size:"90%",onClose:t,title:"Tidy CSV Exporter",centered:!0,withCloseButton:!1,children:[T.jsx(Pq,{searchable:!0,nothingFoundMessage:"Property not found",data:[...eae],value:s,onChange:p=>o(p),label:"Included optional columns:",leftSection:T.jsx(y7e,{}),variant:"filled"}),T.jsx(Ul,{h:"md"}),T.jsxs(Se,{mih:300,style:{width:"100%",overflow:"scroll"},children:[u==="success"&&l?T.jsxs(jt,{striped:!0,captionSide:"bottom",withTableBorder:!0,children:[T.jsx(jt.Thead,{children:T.jsx(jt.Tr,{children:l.header.map(p=>T.jsx(jt.Th,{style:{whiteSpace:"nowrap",minWidth:["description","instruction","participantId"].includes(p)?200:void 0},children:T.jsxs(Dt,{direction:"row",justify:"space-between",align:"center",children:[p,!ZEe.includes(p)&&T.jsx(L0,{onClick:()=>o(s.filter(m=>m!==p)),style:{marginBottom:-3,marginLeft:8},variant:"subtle",color:"gray",children:T.jsx($x,{size:16})})]})},p))})}),T.jsx(jt.Tbody,{children:l.rows.slice(0,5).map((p,m)=>T.jsx(jt.Tr,{children:l.header.map(g=>T.jsx(jt.Td,{style:{whiteSpace:["description","instruction","participantId"].includes(g)?"normal":"nowrap"},children:p[g]},`${m}-${g}`))},m))})]}):u==="error"&&c?T.jsx(Zh,{variant:"light",children:c.message}):null,T.jsx(Nu,{visible:u==="pending"||u==="idle"})]}),T.jsx(Ul,{h:"sm"}),T.jsx(Dt,{justify:"center",fz:"sm",c:"dimmed",children:T.jsx(Ve,{children:h})}),T.jsx(Ul,{h:"md"}),T.jsxs(yi,{justify:"right",children:[T.jsx(Gt,{onClick:t,color:"dark",variant:"subtle",children:"Close"}),T.jsx(Gt,{leftSection:T.jsx(Age,{}),onClick:d,"data-autofocus":!0,children:"Download"}),i==="__revisit-widget"&&T.jsx(Gt,{onClick:f,children:T.jsx(o7e,{})})]})]})}function gmt(){const e=Ku(),{storageEngine:t}=Ai(),n=K0(),[r,i]=D.useState(!1);D.useEffect(()=>{if(n){i(!0);return}const x=setInterval(async()=>{await t.verifyCompletion()&&(i(!0),clearInterval(x))},1e3)},[]),XEe();const[s,o]=D.useState(),[a,l]=D.useState(""),u=e.studyMetadata.title.replace(" ","_");D.useEffect(()=>{async function x(){if(t){const E=await t.getCurrentParticipantId(),_=await t.getParticipantData();l(E),o(_)}}x()},[t]);const c=D.useCallback(async()=>{hV(JSON.stringify(s,null,2),`${u}_${a}.json`)},[u,s,a]),d=e.uiConfig.autoDownloadStudy||!1,f=d&&e.uiConfig.autoDownloadTime||-1,[h,p]=D.useState(Math.floor(f/1e3));D.useEffect(()=>{if(r){const x=setInterval(()=>{p(E=>E-1)},1e3);return h<=0?(d&&c(),clearInterval(x),()=>clearInterval(x)):()=>clearInterval(x)}return()=>{}},[d,r,h,c]);const m=Wf(),[g,b]=D.useState(!1);D.useEffect(()=>{(async()=>{if(t){const E=await t.getModes(m);b(E.dataCollectionEnabled)}})()},[t,m]);const v=D.useMemo(()=>{const{studyEndMsg:x,urlParticipantIdParam:E}=e.uiConfig;return!E||!(x!=null&&x.includes("{PARTICIPANT_ID}"))?x:x.replace(/\{PARTICIPANT_ID\}/g,()=>a)},[e,a]);return T.jsx(Jc,{style:{height:"100%"},children:T.jsx(Dt,{direction:"column",children:r||!g?v?T.jsx(Ws,{text:v}):T.jsx(Ve,{size:"xl",display:"block",children:"Thank you for completing the study. You may close this window now."}):T.jsxs(T.Fragment,{children:[T.jsx(Ve,{size:"xl",display:"block",children:"Please wait while your answers are uploaded."}),T.jsx(Ul,{h:"lg"}),T.jsx(Jc,{children:T.jsx(ld,{color:"blue"})})]})})})}function ymt(){return T.jsx(Ve,{children:"Thank you for participating. Unfortunately you have didn't answer the training correctly, which means you are not eligible to participate in the study. You may close this window now."})}function vmt(){return T.jsx(Ve,{children:"Thank you for participating. Unfortunately, you have not answered the questions within the given time limit. Because of this, you are no longer eligible to participate in the study. You may close this window now."})}const tae={};function FB(e,t){e===void 0&&(e=tae),t===void 0&&(t=tae);const n=Object.keys(e),r=Object.keys(t);return e===t||n.length===r.length&&n.every(i=>e[i]===t[i])}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var bmt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),wmt=Object.prototype.hasOwnProperty;function jB(e,t){return wmt.call(e,t)}function BB(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)jB(e,i)&&r.push(i);return r}function jl(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function zB(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function Jg(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function e_e(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function UB(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(UB(e[t]))return!0}else if(typeof e=="object"){for(var r=BB(e),i=r.length,s=0;s<i;s++)if(UB(e[r[s]]))return!0}}return!1}function nae(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var t_e=function(e){bmt(t,e);function t(n,r,i,s,o){var a=this.constructor,l=e.call(this,nae(n,{name:r,index:i,operation:s,tree:o}))||this;return l.name=r,l.index=i,l.operation=s,l.tree=o,Object.setPrototypeOf(l,a.prototype),l.message=nae(n,{name:r,index:i,operation:s,tree:o}),l}return t}(Error),Ei=t_e,xmt=jl,Ob={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=$P(n,this.path);r&&(r=jl(r));var i=Py(n,{op:"remove",path:this.from}).removed;return Py(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=$P(n,this.from);return Py(n,{op:"add",path:this.path,value:jl(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:QT(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},Emt={add:function(e,t,n){return zB(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:Ob.move,copy:Ob.copy,test:Ob.test,_get:Ob._get};function $P(e,t){if(t=="")return e;var n={op:"_get",path:t};return Py(e,n),n.value}function Py(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):MP(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=$P(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=QT(e,t.value),o.test===!1)throw new Ei("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new Ei("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{r||(e=jl(e));var a=t.path||"",l=a.split("/"),u=e,c=1,d=l.length,f=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=MP;;){if(h=l[c],h&&h.indexOf("~")!=-1&&(h=e_e(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&l[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&f===void 0&&(u[h]===void 0?f=l.slice(0,c).join("/"):c==d-1&&(f=t.path),f!==void 0&&p(t,0,e,f)),c++,Array.isArray(u)){if(h==="-")h=u.length;else{if(n&&!zB(h))throw new Ei("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);zB(h)&&(h=~~h)}if(c>=d){if(n&&t.op==="add"&&h>u.length)throw new Ei("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=Emt[t.op].call(t,u,h,e);if(o.test===!1)throw new Ei("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(c>=d){var o=Ob[t.op].call(t,u,h,e);if(o.test===!1)throw new Ei("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(u=u[h],n&&c<d&&(!u||typeof u!="object"))throw new Ei("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function R$(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new Ei("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=jl(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=Py(e,t[o],n,!0,i,o),e=s[o].newDocument;return s.newDocument=e,s}function _mt(e,t,n){var r=Py(e,t);if(r.test===!1)throw new Ei("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function MP(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new Ei("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(Ob[e.op]){if(typeof e.path!="string")throw new Ei("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new Ei('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new Ei("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new Ei("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&UB(e.value))throw new Ei("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new Ei("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new Ei("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=n_e([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new Ei("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new Ei("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function n_e(e,t,n){try{if(!Array.isArray(e))throw new Ei("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)R$(jl(t),jl(e),n||!0);else{n=n||MP;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof Ei)return i;throw i}}function QT(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,o;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!QT(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!QT(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}const Tmt=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:Ei,_areEquals:QT,applyOperation:Py,applyPatch:R$,applyReducer:_mt,deepClone:xmt,getValueByPointer:$P,validate:n_e,validator:MP},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var pV=new WeakMap,Cmt=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),Smt=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function Amt(e){return pV.get(e)}function kmt(e,t){return e.observers.get(t)}function Imt(e,t){e.observers.delete(t.callback)}function Rmt(e,t){t.unobserve()}function Dmt(e,t){var n=[],r,i=Amt(e);if(!i)i=new Cmt(e),pV.set(e,i);else{var s=kmt(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=jl(e),t){r.callback=t,r.next=null;var o=function(){qB(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){qB(r),clearTimeout(r.next),Imt(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new Smt(t,r)),r}function qB(e,t){t===void 0&&(t=!1);var n=pV.get(e.object);mV(n.value,e.object,e.patches,"",t),e.patches.length&&R$(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function mV(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=BB(t),o=BB(e),a=!1,l=o.length-1;l>=0;l--){var u=o[l],c=e[u];if(jB(t,u)&&!(t[u]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var d=t[u];typeof c=="object"&&c!=null&&typeof d=="object"&&d!=null&&Array.isArray(c)===Array.isArray(d)?mV(c,d,n,r+"/"+Jg(u),i):c!==d&&(i&&n.push({op:"test",path:r+"/"+Jg(u),value:jl(c)}),n.push({op:"replace",path:r+"/"+Jg(u),value:jl(d)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+Jg(u),value:jl(c)}),n.push({op:"remove",path:r+"/"+Jg(u)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&s.length==o.length))for(var l=0;l<s.length;l++){var u=s[l];!jB(e,u)&&t[u]!==void 0&&n.push({op:"add",path:r+"/"+Jg(u),value:jl(t[u])})}}}function Pmt(e,t,n){n===void 0&&(n=!1);var r=[];return mV(e,t,r,"",n),r}const Nmt=Object.freeze(Object.defineProperty({__proto__:null,compare:Pmt,generate:qB,observe:Dmt,unobserve:Rmt},Symbol.toStringTag,{value:"Module"}));Object.assign({},Tmt,Nmt,{JsonPatchError:t_e,deepClone:jl,escapePathComponent:Jg,unescapePathComponent:e_e});var EL,rae;function Omt(){if(rae)return EL;rae=1;var e=/("(?:[^\\"]|\\.)*")|[:,]/g;return EL=function(n,r){var i,s,o;return r=r||{},i=JSON.stringify([1],void 0,r.indent===void 0?2:r.indent).slice(2,-3),s=i===""?1/0:r.maxLength===void 0?80:r.maxLength,o=r.replacer,function a(l,u,c){var d,f,h,p,m,g,b,v,x,E,_,C;if(l&&typeof l.toJSON=="function"&&(l=l.toJSON()),_=JSON.stringify(l,o),_===void 0)return _;if(b=s-u.length-c,_.length<=b&&(x=_.replace(e,function(S,k){return k||S+" "}),x.length<=b))return x;if(o!=null&&(l=JSON.parse(_),o=void 0),typeof l=="object"&&l!==null){if(v=u+i,h=[],f=0,Array.isArray(l))for(E="[",d="]",b=l.length;f<b;f++)h.push(a(l[f],v,f===b-1?0:1)||"null");else for(E="{",d="}",g=Object.keys(l),b=g.length;f<b;f++)p=g[f],m=JSON.stringify(p)+": ",C=a(l[p],v,m.length+(f===b-1?0:1)),C!==void 0&&h.push(m+C);if(h.length>0)return[E,i+h.join(`,
`+v),d].join(`
`+u)}return _}(n,"",0)},EL}var $mt=Omt();const _L=vl($mt);function wl(e,t,n){return e.fields=t||[],e.fname=n,e}function Ci(e){return e==null?null:e.fname}function Vo(e){return e==null?null:e.fields}function r_e(e){return e.length===1?Mmt(e[0]):Lmt(e)}const Mmt=e=>function(t){return t[e]},Lmt=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function He(e){throw Error(e)}function Vf(e){const t=[],n=e.length;let r=null,i=0,s="",o,a,l;e=e+"";function u(){t.push(s+e.substring(o,a)),s="",o=a+1}for(o=a=0;a<n;++a)if(l=e[a],l==="\\")s+=e.substring(o,a++),o=a;else if(l===r)u(),r=null,i=-1;else{if(r)continue;o===i&&l==='"'||o===i&&l==="'"?(o=a+1,r=l):l==="."&&!i?a>o?u():o=a+1:l==="["?(a>o&&u(),i=o=a+1):l==="]"&&(i||He("Access path missing open bracket: "+e),i>0&&u(),i=0,o=a+1)}return i&&He("Access path missing closing bracket: "+e),r&&He("Access path missing closing quote: "+e),a>o&&(a++,u()),t}function Zl(e,t,n){const r=Vf(e);return e=r.length===1?r[0]:e,wl((n&&n.get||r_e)(r),[e],t||e)}const fS=Zl("id"),Co=wl(e=>e,[],"identity"),qm=wl(()=>0,[],"zero"),Qx=wl(()=>1,[],"one"),fl=wl(()=>!0,[],"true"),Tm=wl(()=>!1,[],"false");function Fmt(e,t,n){const r=[t].concat([].slice.call(n));console[e].apply(console,r)}const i_e=0,gV=1,yV=2,s_e=3,o_e=4;function vV(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Fmt,r=e||i_e;return{level(i){return arguments.length?(r=+i,this):r},error(){return r>=gV&&n(t||"error","ERROR",arguments),this},warn(){return r>=yV&&n(t||"warn","WARN",arguments),this},info(){return r>=s_e&&n(t||"log","INFO",arguments),this},debug(){return r>=o_e&&n(t||"log","DEBUG",arguments),this}}}var Ge=Array.isArray;function At(e){return e===Object(e)}const iae=e=>e!=="__proto__";function Jx(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((r,i)=>{for(const s in i)if(s==="signals")r.signals=jmt(r.signals,i.signals);else{const o=s==="legend"?{layout:1}:s==="style"?!0:null;Zx(r,s,i[s],o)}return r},{})}function Zx(e,t,n,r){if(!iae(t))return;let i,s;if(At(n)&&!Ge(n)){s=At(e[t])?e[t]:e[t]={};for(i in n)r&&(r===!0||r[i])?Zx(s,i,n[i]):iae(i)&&(s[i]=n[i])}else e[t]=n}function jmt(e,t){if(e==null)return t;const n={},r=[];function i(s){n[s.name]||(n[s.name]=1,r.push(s))}return t.forEach(i),e.forEach(i),r}function Rn(e){return e[e.length-1]}function yo(e){return e==null||e===""?null:+e}const a_e=e=>t=>e*Math.exp(t),l_e=e=>t=>Math.log(e*t),u_e=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),c_e=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,LP=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function D$(e,t,n,r){const i=n(e[0]),s=n(Rn(e)),o=(s-i)*t;return[r(i-o),r(s-o)]}function bV(e,t){return D$(e,t,yo,Co)}function wV(e,t){var n=Math.sign(e[0]);return D$(e,t,l_e(n),a_e(n))}function xV(e,t,n){return D$(e,t,LP(n),LP(1/n))}function EV(e,t,n){return D$(e,t,u_e(n),c_e(n))}function P$(e,t,n,r,i){const s=r(e[0]),o=r(Rn(e)),a=t!=null?r(t):(s+o)/2;return[i(a+(s-a)*n),i(a+(o-a)*n)]}function N$(e,t,n){return P$(e,t,n,yo,Co)}function O$(e,t,n){const r=Math.sign(e[0]);return P$(e,t,n,l_e(r),a_e(r))}function JT(e,t,n,r){return P$(e,t,n,LP(r),LP(1/r))}function $$(e,t,n,r){return P$(e,t,n,u_e(r),c_e(r))}function _V(e){return 1+~~(new Date(e).getMonth()/3)}function TV(e){return 1+~~(new Date(e).getUTCMonth()/3)}function St(e){return e!=null?Ge(e)?e:[e]:[]}function CV(e,t,n){let r=e[0],i=e[1],s;return i<r&&(s=i,i=r,r=s),s=i-r,s>=n-t?[t,n]:[r=Math.min(Math.max(r,t),n-s),r+s]}function gn(e){return typeof e=="function"}const Bmt="descending";function SV(e,t,n){n=n||{},t=St(t)||[];const r=[],i=[],s={},o=n.comparator||zmt;return St(e).forEach((a,l)=>{a!=null&&(r.push(t[l]===Bmt?-1:1),i.push(a=gn(a)?a:Zl(a,null,n)),(Vo(a)||[]).forEach(u=>s[u]=1))}),i.length===0?null:wl(o(i,r),Object.keys(s))}const eE=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),zmt=(e,t)=>e.length===1?Umt(e[0],t[0]):qmt(e,t,e.length),Umt=(e,t)=>function(n,r){return eE(e(n),e(r))*t},qmt=(e,t,n)=>(t.push(0),function(r,i){let s,o=0,a=-1;for(;o===0&&++a<n;)s=e[a],o=eE(s(r),s(i));return o*t[a]});function Jo(e){return gn(e)?e:()=>e}function AV(e,t){let n;return r=>{n&&clearTimeout(n),n=setTimeout(()=>(t(r),n=null),e)}}function hn(e){for(let t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e}function Zc(e,t){let n=0,r,i,s,o;if(e&&(r=e.length))if(t==null){for(i=e[n];n<r&&(i==null||i!==i);i=e[++n]);for(s=o=i;n<r;++n)i=e[n],i!=null&&(i<s&&(s=i),i>o&&(o=i))}else{for(i=t(e[n]);n<r&&(i==null||i!==i);i=t(e[++n]));for(s=o=i;n<r;++n)i=t(e[n]),i!=null&&(i<s&&(s=i),i>o&&(o=i))}return[s,o]}function d_e(e,t){const n=e.length;let r=-1,i,s,o,a,l;if(t==null){for(;++r<n;)if(s=e[r],s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=l=r;++r<n;)s=e[r],s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,l=r))}else{for(;++r<n;)if(s=t(e[r],r,e),s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=l=r;++r<n;)s=t(e[r],r,e),s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,l=r))}return[a,l]}function It(e,t){return Object.hasOwn(e,t)}const Xk={};function tE(e){let t={},n;function r(s){return It(t,s)&&t[s]!==Xk}const i={size:0,empty:0,object:t,has:r,get(s){return r(s)?t[s]:void 0},set(s,o){return r(s)||(++i.size,t[s]===Xk&&--i.empty),t[s]=o,this},delete(s){return r(s)&&(--i.size,++i.empty,t[s]=Xk),this},clear(){i.size=i.empty=0,i.object=t={}},test(s){return arguments.length?(n=s,i):n},clean(){const s={};let o=0;for(const a in t){const l=t[a];l!==Xk&&(!n||!n(l))&&(s[a]=l,++o)}i.size=o,i.empty=0,i.object=t=s}};return e&&Object.keys(e).forEach(s=>{i.set(s,e[s])}),i}function kV(e,t,n,r,i,s){if(!n&&n!==0)return s;const o=+n;let a=e[0],l=Rn(e),u;l<a&&(u=a,a=l,l=u),u=Math.abs(t-a);const c=Math.abs(l-t);return u<c&&u<=o?r:c<=o?i:s}function bt(e,t,n){const r=e.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),hn(r,n)}function vy(e,t,n,r){let i=t[0],s=t[t.length-1],o;return i>s&&(o=i,i=s,s=o),n=n===void 0||n,r=r===void 0||r,(n?i<=e:i<e)&&(r?e<=s:e<s)}function Bp(e){return typeof e=="boolean"}function sp(e){return Object.prototype.toString.call(e)==="[object Date]"}function f_e(e){return e&&gn(e[Symbol.iterator])}function Zn(e){return typeof e=="number"}function hS(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function Tt(e){return typeof e=="string"}function IV(e,t,n){e&&(e=t?St(e).map(a=>a.replace(/\\(.)/g,"$1")):St(e));const r=e&&e.length,i=n&&n.get||r_e,s=a=>i(t?[a]:Vf(a));let o;if(!r)o=function(){return""};else if(r===1){const a=s(e[0]);o=function(l){return""+a(l)}}else{const a=e.map(s);o=function(l){let u=""+a[0](l),c=0;for(;++c<r;)u+="|"+a[c](l);return u}}return wl(o,e,"key")}function RV(e,t){const n=e[0],r=Rn(e),i=+t;return i?i===1?r:n+i*(r-n):n}const Hmt=1e4;function h_e(e){e=+e||Hmt;let t,n,r;const i=()=>{t={},n={},r=0},s=(o,a)=>(++r>e&&(n=t,t={},r=1),t[o]=a);return i(),{clear:i,has:o=>It(t,o)||It(n,o),get:o=>It(t,o)?t[o]:It(n,o)?s(o,n[o]):void 0,set:(o,a)=>It(t,o)?t[o]=a:s(o,a)}}function p_e(e,t,n,r){const i=t.length,s=n.length;if(!s)return t;if(!i)return n;const o=r||new t.constructor(i+s);let a=0,l=0,u=0;for(;a<i&&l<s;++u)o[u]=e(t[a],n[l])>0?n[l++]:t[a++];for(;a<i;++a,++u)o[u]=t[a];for(;l<s;++l,++u)o[u]=n[l];return o}function f2(e,t){let n="";for(;--t>=0;)n+=e;return n}function DV(e,t,n,r){const i=n||" ",s=e+"",o=t-s.length;return o<=0?s:r==="left"?f2(i,o)+s:r==="center"?f2(i,~~(o/2))+s+f2(i,Math.ceil(o/2)):s+f2(i,o)}function nE(e){return e&&Rn(e)-e[0]||0}function ft(e){return Ge(e)?"["+e.map(ft)+"]":At(e)||Tt(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function M$(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const Wmt=e=>Zn(e)||sp(e)?e:Date.parse(e);function L$(e,t){return t=t||Wmt,e==null||e===""?null:t(e)}function F$(e){return e==null||e===""?null:e+""}function ed(e){const t={},n=e.length;for(let r=0;r<n;++r)t[e[r]]=!0;return t}function PV(e,t,n,r){const i=r??"",s=e+"",o=s.length,a=Math.max(0,t-i.length);return o<=t?s:n==="left"?i+s.slice(o-a):n==="center"?s.slice(0,Math.ceil(a/2))+i+s.slice(o-~~(a/2)):s.slice(0,a)+i}function Dm(e,t,n){if(e)if(t){const r=e.length;for(let i=0;i<r;++i){const s=t(e[i]);s&&n(s,i,e)}}else e.forEach(n)}function Vmt(e){return e}function Gmt(e){if(e==null)return Vmt;var t,n,r=e.scale[0],i=e.scale[1],s=e.translate[0],o=e.translate[1];return function(a,l){l||(t=n=0);var u=2,c=a.length,d=new Array(c);for(d[0]=(t+=a[0])*r+s,d[1]=(n+=a[1])*i+o;u<c;)d[u]=a[u],++u;return d}}function Ymt(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function Kmt(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return sae(e,n)})}:sae(e,t)}function sae(e,t){var n=t.id,r=t.bbox,i=t.properties==null?{}:t.properties,s=m_e(e,t);return n==null&&r==null?{type:"Feature",properties:i,geometry:s}:r==null?{type:"Feature",id:n,properties:i,geometry:s}:{type:"Feature",id:n,bbox:r,properties:i,geometry:s}}function m_e(e,t){var n=Gmt(e.transform),r=e.arcs;function i(c,d){d.length&&d.pop();for(var f=r[c<0?~c:c],h=0,p=f.length;h<p;++h)d.push(n(f[h],h));c<0&&Ymt(d,p)}function s(c){return n(c)}function o(c){for(var d=[],f=0,h=c.length;f<h;++f)i(c[f],d);return d.length<2&&d.push(d[0]),d}function a(c){for(var d=o(c);d.length<4;)d.push(d[0]);return d}function l(c){return c.map(a)}function u(c){var d=c.type,f;switch(d){case"GeometryCollection":return{type:d,geometries:c.geometries.map(u)};case"Point":f=s(c.coordinates);break;case"MultiPoint":f=c.coordinates.map(s);break;case"LineString":f=o(c.arcs);break;case"MultiLineString":f=c.arcs.map(o);break;case"Polygon":f=l(c.arcs);break;case"MultiPolygon":f=c.arcs.map(l);break;default:return null}return{type:d,coordinates:f}}return u(t)}function Xmt(e,t){var n={},r={},i={},s=[],o=-1;t.forEach(function(u,c){var d=e.arcs[u<0?~u:u],f;d.length<3&&!d[1][0]&&!d[1][1]&&(f=t[++o],t[o]=u,t[c]=f)}),t.forEach(function(u){var c=a(u),d=c[0],f=c[1],h,p;if(h=i[d])if(delete i[h.end],h.push(u),h.end=f,p=r[f]){delete r[p.start];var m=p===h?h:h.concat(p);r[m.start=h.start]=i[m.end=p.end]=m}else r[h.start]=i[h.end]=h;else if(h=r[f])if(delete r[h.start],h.unshift(u),h.start=d,p=i[d]){delete i[p.end];var g=p===h?h:p.concat(h);r[g.start=p.start]=i[g.end=h.end]=g}else r[h.start]=i[h.end]=h;else h=[u],r[h.start=d]=i[h.end=f]=h});function a(u){var c=e.arcs[u<0?~u:u],d=c[0],f;return e.transform?(f=[0,0],c.forEach(function(h){f[0]+=h[0],f[1]+=h[1]})):f=c[c.length-1],u<0?[f,d]:[d,f]}function l(u,c){for(var d in u){var f=u[d];delete c[f.start],delete f.start,delete f.end,f.forEach(function(h){n[h<0?~h:h]=1}),s.push(f)}}return l(i,r),l(r,i),t.forEach(function(u){n[u<0?~u:u]||s.push([u])}),s}function Qmt(e){return m_e(e,Jmt.apply(this,arguments))}function Jmt(e,t,n){var r,i,s;if(arguments.length>1)r=Zmt(e,t,n);else for(i=0,r=new Array(s=e.arcs.length);i<s;++i)r[i]=i;return{type:"MultiLineString",arcs:Xmt(e,r)}}function Zmt(e,t,n){var r=[],i=[],s;function o(d){var f=d<0?~d:d;(i[f]||(i[f]=[])).push({i:d,g:s})}function a(d){d.forEach(o)}function l(d){d.forEach(a)}function u(d){d.forEach(l)}function c(d){switch(s=d,d.type){case"GeometryCollection":d.geometries.forEach(c);break;case"LineString":a(d.arcs);break;case"MultiLineString":case"Polygon":l(d.arcs);break;case"MultiPolygon":u(d.arcs);break}}return c(t),i.forEach(n==null?function(d){r.push(d[0].i)}:function(d){n(d[0].g,d[d.length-1].g)&&r.push(d[0].i)}),r}const Eo="year",hl="quarter",Go="month",ds="week",pl="date",Ho="day",Df="dayofyear",eu="hours",tu="minutes",Mu="seconds",td="milliseconds",NV=[Eo,hl,Go,ds,pl,Ho,Df,eu,tu,Mu,td],TL=NV.reduce((e,t,n)=>(e[t]=1+n,e),{});function OV(e){const t=St(e).slice(),n={};return t.length||He("Missing time unit."),t.forEach(i=>{It(TL,i)?n[i]=1:He(`Invalid time unit: ${i}.`)}),(n[ds]||n[Ho]?1:0)+(n[hl]||n[Go]||n[pl]?1:0)+(n[Df]?1:0)>1&&He(`Incompatible time units: ${e}`),t.sort((i,s)=>TL[i]-TL[s]),t}const e0t={[Eo]:"%Y ",[hl]:"Q%q ",[Go]:"%b ",[pl]:"%d ",[ds]:"W%U ",[Ho]:"%a ",[Df]:"%j ",[eu]:"%H:00",[tu]:"00:%M",[Mu]:":%S",[td]:".%L",[`${Eo}-${Go}`]:"%Y-%m ",[`${Eo}-${Go}-${pl}`]:"%Y-%m-%d ",[`${eu}-${tu}`]:"%H:%M"};function $V(e,t){const n=hn({},e0t,t),r=OV(e),i=r.length;let s="",o=0,a,l;for(o=0;o<i;)for(a=r.length;a>o;--a)if(l=r.slice(o,a).join("-"),n[l]!=null){s+=n[l],o=a;break}return s.trim()}const sy=new Date;function MV(e){return sy.setFullYear(e),sy.setMonth(0),sy.setDate(1),sy.setHours(0,0,0,0),sy}function LV(e){return g_e(new Date(e))}function FV(e){return HB(new Date(e))}function g_e(e){return rp.count(MV(e.getFullYear())-1,e)}function HB(e){return Kx.count(MV(e.getFullYear())-1,e)}function WB(e){return MV(e).getDay()}function t0t(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(-1,t,n,r,i,s,o);return a.setFullYear(e),a}return new Date(e,t,n,r,i,s,o)}function jV(e){return y_e(new Date(e))}function BV(e){return VB(new Date(e))}function y_e(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return o0.count(t-1,e)}function VB(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return Xx.count(t-1,e)}function GB(e){return sy.setTime(Date.UTC(e,0,1)),sy.getUTCDay()}function n0t(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(Date.UTC(-1,t,n,r,i,s,o));return a.setUTCFullYear(n.y),a}return new Date(Date.UTC(e,t,n,r,i,s,o))}function v_e(e,t,n,r,i){const s=t||1,o=Rn(e),a=(b,v,x)=>(x=x||b,r0t(n[x],r[x],b===o&&s,v)),l=new Date,u=ed(e),c=u[Eo]?a(Eo):Jo(2012),d=u[Go]?a(Go):u[hl]?a(hl):qm,f=u[ds]&&u[Ho]?a(Ho,1,ds+Ho):u[ds]?a(ds,1):u[Ho]?a(Ho,1):u[pl]?a(pl,1):u[Df]?a(Df,1):Qx,h=u[eu]?a(eu):qm,p=u[tu]?a(tu):qm,m=u[Mu]?a(Mu):qm,g=u[td]?a(td):qm;return function(b){l.setTime(+b);const v=c(l);return i(v,d(l),f(l,v),h(l),p(l),m(l),g(l))}}function r0t(e,t,n,r){const i=n<=1?e:r?(s,o)=>r+n*Math.floor((e(s,o)-r)/n):(s,o)=>n*Math.floor(e(s,o)/n);return t?(s,o)=>t(i(s,o),o):i}function zw(e,t,n){return t+e*7-(n+6)%7}const i0t={[Eo]:e=>e.getFullYear(),[hl]:e=>Math.floor(e.getMonth()/3),[Go]:e=>e.getMonth(),[pl]:e=>e.getDate(),[eu]:e=>e.getHours(),[tu]:e=>e.getMinutes(),[Mu]:e=>e.getSeconds(),[td]:e=>e.getMilliseconds(),[Df]:e=>g_e(e),[ds]:e=>HB(e),[ds+Ho]:(e,t)=>zw(HB(e),e.getDay(),WB(t)),[Ho]:(e,t)=>zw(1,e.getDay(),WB(t))},s0t={[hl]:e=>3*e,[ds]:(e,t)=>zw(e,0,WB(t))};function b_e(e,t){return v_e(e,t||1,i0t,s0t,t0t)}const o0t={[Eo]:e=>e.getUTCFullYear(),[hl]:e=>Math.floor(e.getUTCMonth()/3),[Go]:e=>e.getUTCMonth(),[pl]:e=>e.getUTCDate(),[eu]:e=>e.getUTCHours(),[tu]:e=>e.getUTCMinutes(),[Mu]:e=>e.getUTCSeconds(),[td]:e=>e.getUTCMilliseconds(),[Df]:e=>y_e(e),[ds]:e=>VB(e),[Ho]:(e,t)=>zw(1,e.getUTCDay(),GB(t)),[ds+Ho]:(e,t)=>zw(VB(e),e.getUTCDay(),GB(t))},a0t={[hl]:e=>3*e,[ds]:(e,t)=>zw(e,0,GB(t))};function w_e(e,t){return v_e(e,t||1,o0t,a0t,n0t)}const l0t={[Eo]:kf,[hl]:VT.every(3),[Go]:VT,[ds]:Kx,[pl]:rp,[Ho]:rp,[Df]:rp,[eu]:f$,[tu]:c$,[Mu]:Gh,[td]:Mw},u0t={[Eo]:If,[hl]:GT.every(3),[Go]:GT,[ds]:Xx,[pl]:o0,[Ho]:o0,[Df]:o0,[eu]:h$,[tu]:d$,[Mu]:Gh,[td]:Mw};function rE(e){return l0t[e]}function iE(e){return u0t[e]}function x_e(e,t,n){return e?e.offset(t,n):void 0}function zV(e,t,n){return x_e(rE(e),t,n)}function UV(e,t,n){return x_e(iE(e),t,n)}function E_e(e,t,n,r){return e?e.range(t,n,r):void 0}function qV(e,t,n,r){return E_e(rE(e),t,n,r)}function HV(e,t,n,r){return E_e(iE(e),t,n,r)}const h2=1e3,p2=h2*60,m2=p2*60,j$=m2*24,c0t=j$*7,oae=j$*30,YB=j$*365,__e=[Eo,Go,pl,eu,tu,Mu,td],g2=__e.slice(0,-1),y2=g2.slice(0,-1),v2=y2.slice(0,-1),d0t=v2.slice(0,-1),f0t=[Eo,ds],aae=[Eo,Go],T_e=[Eo],b_=[[g2,1,h2],[g2,5,5*h2],[g2,15,15*h2],[g2,30,30*h2],[y2,1,p2],[y2,5,5*p2],[y2,15,15*p2],[y2,30,30*p2],[v2,1,m2],[v2,3,3*m2],[v2,6,6*m2],[v2,12,12*m2],[d0t,1,j$],[f0t,1,c0t],[aae,1,oae],[aae,3,3*oae],[T_e,1,YB]];function C_e(e){const t=e.extent,n=e.maxbins||40,r=Math.abs(nE(t))/n;let i=Vx(a=>a[2]).right(b_,r),s,o;return i===b_.length?(s=T_e,o=b0(t[0]/YB,t[1]/YB,n)):i?(i=b_[r/b_[i-1][2]<b_[i][2]/r?i-1:i],s=i[0],o=i[1]):(s=__e,o=Math.max(b0(t[0],t[1],n),1)),{units:s,step:o}}function b2(e){const t={};return n=>t[n]||(t[n]=e(n))}function h0t(e,t){return n=>{const r=e(n),i=r.indexOf(t);if(i<0)return r;let s=p0t(r,i);const o=s<r.length?r.slice(s):"";for(;--s>i;)if(r[s]!=="0"){++s;break}return r.slice(0,s)+o}}function p0t(e,t){let n=e.lastIndexOf("e"),r;if(n>0)return n;for(n=e.length;--n>t;)if(r=e.charCodeAt(n),r>=48&&r<=57)return n+1}function S_e(e){const t=b2(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(r){const i=Yy(r||",");if(i.precision==null){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1;break}return h0t(t(i),t(".1f")(1)[1])}else return t(i)},formatSpan(r,i,s,o){o=Yy(o??",f");const a=b0(r,i,s),l=Math.max(Math.abs(r),Math.abs(i));let u;if(o.precision==null)switch(o.type){case"s":return isNaN(u=Lbe(a,l))||(o.precision=u),n(o,l);case"":case"e":case"g":case"p":case"r":{isNaN(u=Fbe(a,l))||(o.precision=u-(o.type==="e"));break}case"f":case"%":{isNaN(u=Mbe(a))||(o.precision=u-(o.type==="%")*2);break}}return t(o)}}}let KB;A_e();function A_e(){return KB=S_e({format:n$,formatPrefix:AW})}function k_e(e){return S_e($be(e))}function FP(e){return arguments.length?KB=k_e(e):KB}function lae(e,t,n){n=n||{},At(n)||He(`Invalid time multi-format specifier: ${n}`);const r=t(Mu),i=t(tu),s=t(eu),o=t(pl),a=t(ds),l=t(Go),u=t(hl),c=t(Eo),d=e(n[td]||".%L"),f=e(n[Mu]||":%S"),h=e(n[tu]||"%I:%M"),p=e(n[eu]||"%I %p"),m=e(n[pl]||n[Ho]||"%a %d"),g=e(n[ds]||"%b %d"),b=e(n[Go]||"%B"),v=e(n[hl]||"%B"),x=e(n[Eo]||"%Y");return E=>(r(E)<E?d:i(E)<E?f:s(E)<E?h:o(E)<E?p:l(E)<E?a(E)<E?m:g:c(E)<E?u(E)<E?b:v:x)(E)}function I_e(e){const t=b2(e.format),n=b2(e.utcFormat);return{timeFormat:r=>Tt(r)?t(r):lae(t,rE,r),utcFormat:r=>Tt(r)?n(r):lae(n,iE,r),timeParse:b2(e.parse),utcParse:b2(e.utcParse)}}let XB;R_e();function R_e(){return XB=I_e({format:zW,parse:Jwe,utcFormat:UW,utcParse:Zwe})}function D_e(e){return I_e(Gwe(e))}function ZT(e){return arguments.length?XB=D_e(e):XB}const QB=(e,t)=>hn({},e,t);function P_e(e,t){const n=e?k_e(e):FP(),r=t?D_e(t):ZT();return QB(n,r)}function WV(e,t){const n=arguments.length;return n&&n!==2&&He("defaultLocale expects either zero or two arguments."),n?QB(FP(e),ZT(t)):QB(FP(),ZT())}function m0t(){return A_e(),R_e(),WV()}const g0t=/^(data:|([A-Za-z]+:)?\/\/)/,y0t=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,v0t=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,uae="file://";function b0t(e,t){return n=>({options:n||{},sanitize:x0t,load:w0t,fileAccess:!1,file:E0t(t),http:T0t(e)})}async function w0t(e,t){const n=await this.sanitize(e,t),r=n.href;return n.localFile?this.file(r):this.http(r,t)}async function x0t(e,t){t=hn({},this.options,t);const n=this.fileAccess,r={href:null};let i,s,o;const a=y0t.test(e.replace(v0t,""));(e==null||typeof e!="string"||!a)&&He("Sanitize failure, invalid URI: "+ft(e));const l=g0t.test(e);return(o=t.baseURL)&&!l&&(!e.startsWith("/")&&!o.endsWith("/")&&(e="/"+e),e=o+e),s=(i=e.startsWith(uae))||t.mode==="file"||t.mode!=="http"&&!l&&n,i?e=e.slice(uae.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),s=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(r,"localFile",{value:!!s}),r.href=e,t.target&&(r.target=t.target+""),t.rel&&(r.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(r.crossOrigin=t.crossOrigin+""),r}function E0t(e){return e?t=>new Promise((n,r)=>{e.readFile(t,(i,s)=>{i?r(i):n(s)})}):_0t}async function _0t(){He("No file system access.")}function T0t(e){return e?async function(t,n){const r=hn({},this.options.http,n),i=n&&n.response,s=await e(t,r);return s.ok?gn(s[i])?s[i]():s.text():He(s.status+""+s.statusText)}:C0t}async function C0t(){He("No HTTP fetch method available.")}const S0t=e=>e!=null&&e===e,A0t=e=>e==="true"||e==="false"||e===!0||e===!1,k0t=e=>!Number.isNaN(Date.parse(e)),N_e=e=>!Number.isNaN(+e)&&!(e instanceof Date),I0t=e=>N_e(e)&&Number.isInteger(+e),JB={boolean:M$,integer:yo,number:yo,date:L$,string:F$,unknown:Co},Qk=[A0t,I0t,N_e,k0t],R0t=["boolean","integer","number","date"];function O_e(e,t){if(!e||!e.length)return"unknown";const n=e.length,r=Qk.length,i=Qk.map((s,o)=>o+1);for(let s=0,o=0,a,l;s<n;++s)for(l=t?e[s][t]:e[s],a=0;a<r;++a)if(i[a]&&S0t(l)&&!Qk[a](l)&&(i[a]=0,++o,o===Qk.length))return"string";return R0t[i.reduce((s,o)=>s===0?o:s,0)-1]}function $_e(e,t){return t.reduce((n,r)=>(n[r]=O_e(e,r),n),{})}function cae(e){const t=function(n,r){const i={delimiter:e};return VV(n,r?hn(r,i):i)};return t.responseType="text",t}function VV(e,t){return t.header&&(e=t.header.map(ft).join(t.delimiter)+`
`+e),Wit(t.delimiter).parse(e+"")}VV.responseType="text";function D0t(e){return typeof Buffer=="function"&&gn(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function GV(e,t){const n=t&&t.property?Zl(t.property):Co;return At(e)&&!D0t(e)?P0t(n(e),t):n(JSON.parse(e))}GV.responseType="json";function P0t(e,t){return!Ge(e)&&f_e(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const N0t={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function M_e(e,t){let n,r,i,s;return e=GV(e,t),t&&t.feature?(n=Kmt,i=t.feature):t&&t.mesh?(n=Qmt,i=t.mesh,s=N0t[t.filter]):He("Missing TopoJSON feature or mesh parameter."),r=(r=e.objects[i])?n(e,r,s):He("Invalid TopoJSON object: "+i),r&&r.features||[r]}M_e.responseType="json";const P3={dsv:VV,csv:cae(","),tsv:cae("	"),json:GV,topojson:M_e};function YV(e,t){return arguments.length>1?(P3[e]=t,this):It(P3,e)?P3[e]:null}function L_e(e){const t=YV(e);return t&&t.responseType||"text"}function F_e(e,t,n,r){t=t||{};const i=YV(t.type||"json");return i||He("Unknown data format type: "+t.type),e=i(e,t),t.parse&&O0t(e,t.parse,n,r),It(e,"columns")&&delete e.columns,e}function O0t(e,t,n,r){if(!e.length)return;const i=ZT();n=n||i.timeParse,r=r||i.utcParse;let s=e.columns||Object.keys(e[0]),o,a,l,u,c,d;t==="auto"&&(t=$_e(e,s)),s=Object.keys(t);const f=s.map(h=>{const p=t[h];let m,g;if(p&&(p.startsWith("date:")||p.startsWith("utc:")))return m=p.split(/:(.+)?/,2),g=m[1],(g[0]==="'"&&g[g.length-1]==="'"||g[0]==='"'&&g[g.length-1]==='"')&&(g=g.slice(1,-1)),(m[0]==="utc"?r:n)(g);if(!JB[p])throw Error("Illegal format pattern: "+h+":"+p);return JB[p]});for(l=0,c=e.length,d=s.length;l<c;++l)for(o=e[l],u=0;u<d;++u)a=s[u],o[a]=f[u](o[a])}const B$=b0t(typeof fetch<"u"&&fetch,null);function z$(e){const t=e||Co,n=[],r={};return n.add=i=>{const s=t(i);return r[s]||(r[s]=1,n.push(i)),n},n.remove=i=>{const s=t(i);if(r[s]){r[s]=0;const o=n.indexOf(i);o>=0&&n.splice(o,1)}return n},n}async function N3(e,t){try{await t(e)}catch(n){e.error(n)}}const j_e=Symbol("vega_id");let $0t=1;function sE(e){return!!(e&&Kt(e))}function Kt(e){return e[j_e]}function B_e(e,t){return e[j_e]=t,e}function hr(e){const t=e===Object(e)?e:{data:e};return Kt(t)?t:B_e(t,$0t++)}function KV(e){return U$(e,hr({}))}function U$(e,t){for(const n in e)t[n]=e[n];return t}function z_e(e,t){return B_e(t,Kt(e))}function Wv(e,t){return e?t?(n,r)=>e(n,r)||Kt(t(n))-Kt(t(r)):(n,r)=>e(n,r)||Kt(n)-Kt(r):null}function U_e(e){return e&&e.constructor===Vv}function Vv(){const e=[],t=[],n=[],r=[],i=[];let s=null,o=!1;return{constructor:Vv,insert(a){const l=St(a),u=l.length;for(let c=0;c<u;++c)e.push(l[c]);return this},remove(a){const l=gn(a)?r:t,u=St(a),c=u.length;for(let d=0;d<c;++d)l.push(u[d]);return this},modify(a,l,u){const c={field:l,value:Jo(u)};return gn(a)?(c.filter=a,i.push(c)):(c.tuple=a,n.push(c)),this},encode(a,l){return gn(a)?i.push({filter:a,field:l}):n.push({tuple:a,field:l}),this},clean(a){return s=a,this},reflow(){return o=!0,this},pulse(a,l){const u={},c={};let d,f,h,p,m,g;for(d=0,f=l.length;d<f;++d)u[Kt(l[d])]=1;for(d=0,f=t.length;d<f;++d)m=t[d],u[Kt(m)]=-1;for(d=0,f=r.length;d<f;++d)p=r[d],l.forEach(v=>{p(v)&&(u[Kt(v)]=-1)});for(d=0,f=e.length;d<f;++d)m=e[d],g=Kt(m),u[g]?u[g]=1:a.add.push(hr(e[d]));for(d=0,f=l.length;d<f;++d)m=l[d],u[Kt(m)]<0&&a.rem.push(m);function b(v,x,E){E?v[x]=E(v):a.encode=x,o||(c[Kt(v)]=v)}for(d=0,f=n.length;d<f;++d)h=n[d],m=h.tuple,p=h.field,g=u[Kt(m)],g>0&&(b(m,p,h.value),a.modifies(p));for(d=0,f=i.length;d<f;++d)h=i[d],p=h.filter,l.forEach(v=>{p(v)&&u[Kt(v)]>0&&b(v,h.field,h.value)}),a.modifies(h.field);if(o)a.mod=t.length||r.length?l.filter(v=>u[Kt(v)]>0):l.slice();else for(g in c)a.mod.push(c[g]);return(s||s==null&&(t.length||r.length))&&a.clean(!0),a}}}const O3="_:mod:_";function q$(){Object.defineProperty(this,O3,{writable:!0,value:{}})}q$.prototype={set(e,t,n,r){const i=this,s=i[e],o=i[O3];return t!=null&&t>=0?(s[t]!==n||r)&&(s[t]=n,o[t+":"+e]=-1,o[e]=-1):(s!==n||r)&&(i[e]=n,o[e]=Ge(n)?1+n.length:-1),i},modified(e,t){const n=this[O3];if(arguments.length){if(Ge(e)){for(let r=0;r<e.length;++r)if(n[e[r]])return!0;return!1}}else{for(const r in n)if(n[r])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[O3]={},this}};let M0t=0;const L0t="pulse",F0t=new q$,j0t=1,B0t=2;function Nr(e,t,n,r){this.id=++M0t,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function dae(e){return function(t){const n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}Nr.prototype={targets(){return this._targets||(this._targets=z$(fS))},set(e){return this.value!==e?(this.value=e,1):0},skip:dae(j0t),modified:dae(B0t),parameters(e,t,n){t=t!==!1;const r=this._argval=this._argval||new q$,i=this._argops=this._argops||[],s=[];let o,a,l,u;const c=(d,f,h)=>{h instanceof Nr?(h!==this&&(t&&h.targets().add(this),s.push(h)),i.push({op:h,name:d,index:f})):r.set(d,f,h)};for(o in e)if(a=e[o],o===L0t)St(a).forEach(d=>{d instanceof Nr?d!==this&&(d.targets().add(this),s.push(d)):He("Pulse parameters must be operator instances.")}),this.source=a;else if(Ge(a))for(r.set(o,-1,Array(l=a.length)),u=0;u<l;++u)c(o,u,a[u]);else c(o,-1,a);return this.marshall().clear(),n&&(i.initonly=!0),s},marshall(e){const t=this._argval||F0t,n=this._argops;let r,i,s,o;if(n){const a=n.length;for(i=0;i<a;++i)r=n[i],s=r.op,o=s.modified()&&s.stamp===e,t.set(r.name,r.index,s.value,o);if(n.initonly){for(i=0;i<a;++i)r=n[i],r.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,r,i;if(e)for(t=0,n=e.length;t<n;++t)r=e[t],i=r.op,i._targets&&i._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),r=t.call(this,n,e);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function z0t(e,t,n,r){let i=1,s;return e instanceof Nr?s=e:e&&e.prototype instanceof Nr?s=new e:gn(e)?s=new Nr(null,e):(i=0,s=new Nr(e,t)),this.rank(s),i&&(r=n,n=t),n&&this.connect(s,s.parameters(n,r)),this.touch(s),s}function U0t(e,t){const n=e.rank,r=t.length;for(let i=0;i<r;++i)if(n<t[i].rank){this.rerank(e);return}}let q0t=0;function H$(e,t,n){this.id=++q0t,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function Cm(e,t,n){return new H$(e,t,n)}H$.prototype={_filter:fl,_apply:Co,targets(){return this._targets||(this._targets=z$(fS))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,r=n?n.length:0;for(let i=0;i<r;++i)n[i].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=Cm(e);return this.targets().add(t),t},apply(e){const t=Cm(null,e);return this.targets().add(t),t},merge(){const e=Cm();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=Cm();return this.targets().add(Cm(null,null,AV(e,n=>{const r=n.dataflow;t.receive(n),r&&r.run&&r.run()}))),t},between(e,t){let n=!1;return e.targets().add(Cm(null,null,()=>n=!0)),t.targets().add(Cm(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=fl,this._targets=null}};function H0t(e,t,n,r){const i=this,s=Cm(n,r),o=function(u){u.dataflow=i;try{s.receive(u)}catch(c){i.error(c)}finally{i.run()}};let a;typeof e=="string"&&typeof document<"u"?a=document.querySelectorAll(e):a=St(e);const l=a.length;for(let u=0;u<l;++u)a[u].addEventListener(t,o);return s}function W0t(e,t){const n=this.locale();return F_e(e,t,n.timeParse,n.utcParse)}function V0t(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}async function G0t(e,t){const n=this;let r=0,i;try{i=await n.loader().load(e,{context:"dataflow",response:L_e(t&&t.type)});try{i=n.parse(i,t)}catch(s){r=-2,n.warn("Data ingestion failed",e,s)}}catch(s){r=-1,n.warn("Loading failed",e,s)}return{data:i,status:r}}async function Y0t(e,t,n){const r=this,i=r._pending||K0t(r);i.requests+=1;const s=await r.request(t,n);return r.pulse(e,r.changeset().remove(fl).insert(s.data||[])),i.done(),s}function K0t(e){let t;const n=new Promise(r=>t=r);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}const X0t={skip:!0};function Q0t(e,t,n,r,i){return(e instanceof Nr?Z0t:J0t)(this,e,t,n,r,i),this}function J0t(e,t,n,r,i,s){const o=hn({},s,X0t);let a,l;gn(n)||(n=Jo(n)),r===void 0?a=u=>e.touch(n(u)):gn(r)?(l=new Nr(null,r,i,!1),a=u=>{l.evaluate(u);const c=n(u),d=l.value;U_e(d)?e.pulse(c,d,s):e.update(c,d,o)}):a=u=>e.update(n(u),r,o),t.apply(a)}function Z0t(e,t,n,r,i,s){if(r===void 0)t.targets().add(n);else{const o=s||{},a=new Nr(null,egt(n,r),i,!1);a.modified(o.force),a.rank=t.rank,t.targets().add(a),n&&(a.skip(!0),a.value=n.value,a.targets().add(n),e.connect(n,[a]))}}function egt(e,t){return t=gn(t)?t:Jo(t),e?function(n,r){const i=t(n,r);return e.skip()||(e.skip(i!==this.value).value=i),i}:t}function tgt(e){e.rank=++this._rank}function ngt(e){const t=[e];let n,r,i;for(;t.length;)if(this.rank(n=t.pop()),r=n._targets)for(i=r.length;--i>=0;)t.push(n=r[i]),n===e&&He("Cycle detected in dataflow graph.")}const jP={},Wd=1,Pm=2,kh=4,rgt=Wd|Pm,fae=Wd|kh,Q1=Wd|Pm|kh,hae=8,w_=16,pae=32,mae=64;function a0(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function CL(e,t){const n=[];return Dm(e,t,r=>n.push(r)),n}function gae(e,t){const n={};return e.visit(t,r=>{n[Kt(r)]=1}),r=>n[Kt(r)]?null:r}function Jk(e,t){return e?(n,r)=>e(n,r)&&t(n,r):t}a0.prototype={StopPropagation:jP,ADD:Wd,REM:Pm,MOD:kh,ADD_REM:rgt,ADD_MOD:fae,ALL:Q1,REFLOW:hae,SOURCE:w_,NO_SOURCE:pae,NO_FIELDS:mae,fork(e){return new a0(this.dataflow).init(this,e)},clone(){const e=this.fork(Q1);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(Q1|w_)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new a0(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&mae)&&(n.fields=e.fields),t&Wd?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&Pm?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&kh?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&pae?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||Q1;return t&Wd&&this.add.length||t&Pm&&this.rem.length||t&kh&&this.mod.length},reflow(e){if(e)return this.fork(Q1).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(kh,gae(this,Wd))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return Ge(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return(t||this.mod.length)&&n?arguments.length?Ge(e)?e.some(r=>n[r]):n[e]:!!n:!1},filter(e,t){const n=this;return e&Wd&&(n.addF=Jk(n.addF,t)),e&Pm&&(n.remF=Jk(n.remF,t)),e&kh&&(n.modF=Jk(n.modF,t)),e&w_&&(n.srcF=Jk(n.srcF,t)),n},materialize(e){e=e||Q1;const t=this;return e&Wd&&t.addF&&(t.add=CL(t.add,t.addF),t.addF=null),e&Pm&&t.remF&&(t.rem=CL(t.rem,t.remF),t.remF=null),e&kh&&t.modF&&(t.mod=CL(t.mod,t.modF),t.modF=null),e&w_&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,r=t;if(e&w_)return Dm(n.source,n.srcF,r),n;e&Wd&&Dm(n.add,n.addF,r),e&Pm&&Dm(n.rem,n.remF,r),e&kh&&Dm(n.mod,n.modF,r);const i=n.source;if(e&hae&&i){const s=n.add.length+n.mod.length;s===i.length||(s?Dm(i,gae(n,fae),r):Dm(i,n.srcF,r))}return n}};function XV(e,t,n,r){const i=this;let s=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n;for(const o of n)if(o.stamp===t){if(o.fields){const a=i.fields||(i.fields={});for(const l in o.fields)a[l]=1}o.changed(i.ADD)&&(s|=i.ADD),o.changed(i.REM)&&(s|=i.REM),o.changed(i.MOD)&&(s|=i.MOD)}this.changes=s}bt(XV,a0,{fork(e){const t=new a0(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?Ge(e)?e.some(r=>n[r]):n[e]:0},filter(){He("MultiPulse does not support filtering.")},materialize(){He("MultiPulse does not support materialization.")},visit(e,t){const n=this,r=n.pulses,i=r.length;let s=0;if(e&n.SOURCE)for(;s<i;++s)r[s].visit(e,t);else for(;s<i;++s)r[s].stamp===n.stamp&&r[s].visit(e,t);return n}});async function igt(e,t,n){const r=this,i=[];if(r._pulse)return q_e(r);if(r._pending&&await r._pending,t&&await N3(r,t),!r._touched.length)return r.debug("Dataflow invoked, but nothing to do."),r;const s=++r._clock;r._pulse=new a0(r,s,e),r._touched.forEach(c=>r._enqueue(c,!0)),r._touched=z$(fS);let o=0,a,l,u;try{for(;r._heap.size()>0;){if(a=r._heap.pop(),a.rank!==a.qrank){r._enqueue(a,!0);continue}l=a.run(r._getPulse(a,e)),l.then?l=await l:l.async&&(i.push(l.async),l=jP),l!==jP&&a._targets&&a._targets.forEach(c=>r._enqueue(c)),++o}}catch(c){r._heap.clear(),u=c}if(r._input={},r._pulse=null,r.debug(`Pulse ${s}: ${o} operators`),u&&(r._postrun=[],r.error(u)),r._postrun.length){const c=r._postrun.sort((d,f)=>f.priority-d.priority);r._postrun=[];for(let d=0;d<c.length;++d)await N3(r,c[d].callback)}return n&&await N3(r,n),i.length&&Promise.all(i).then(c=>r.runAsync(null,()=>{c.forEach(d=>{try{d(r)}catch(f){r.error(f)}})})),r}async function sgt(e,t,n){for(;this._running;)await this._running;const r=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(r,r),this._running}function ogt(e,t,n){return this._pulse?q_e(this):(this.evaluate(e,t,n),this)}function agt(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(r){this.error(r)}}function q_e(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function lgt(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function ugt(e,t){const n=e.source,r=this._clock;return n&&Ge(n)?new XV(this,r,n.map(i=>i.pulse),t):this._input[e.id]||cgt(this._pulse,n&&n.pulse)}function cgt(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==jP&&(e.source=t.source),e)}const QV={skip:!1,force:!1};function dgt(e,t){const n=t||QV;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function fgt(e,t,n){const r=n||QV;return(e.set(t)||r.force)&&this.touch(e,r),this}function hgt(e,t,n){this.touch(e,n||QV);const r=new a0(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._input[e.id]=t.pulse(r,i),this}function pgt(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),H_e(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let r;return t.length?(r=t[0],t[0]=n,mgt(t,0,e)):r=n,r}}}function H_e(e,t,n,r){let i,s;const o=e[n];for(;n>t;){if(s=n-1>>1,i=e[s],r(o,i)<0){e[n]=i,n=s;continue}break}return e[n]=o}function mgt(e,t,n){const r=t,i=e.length,s=e[t];let o=(t<<1)+1,a;for(;o<i;)a=o+1,a<i&&n(e[o],e[a])>=0&&(o=a),e[t]=e[o],t=o,o=(t<<1)+1;return e[t]=s,H_e(e,r,t,n)}function aw(){this.logger(vV()),this.logLevel(gV),this._clock=0,this._rank=0,this._locale=WV();try{this._loader=B$()}catch{}this._touched=z$(fS),this._input={},this._pulse=null,this._heap=pgt((e,t)=>e.qrank-t.qrank),this._postrun=[]}function x_(e){return function(){return this._log[e].apply(this,arguments)}}aw.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:x_("error"),warn:x_("warn"),info:x_("info"),debug:x_("debug"),logLevel:x_("level"),cleanThreshold:1e4,add:z0t,connect:U0t,rank:tgt,rerank:ngt,pulse:hgt,touch:dgt,update:fgt,changeset:Vv,ingest:V0t,parse:W0t,preload:Y0t,request:G0t,events:H0t,on:Q0t,evaluate:igt,run:ogt,runAsync:sgt,runAfter:agt,_enqueue:lgt,_getPulse:ugt};function qe(e,t){Nr.call(this,e,null,t)}bt(qe,Nr,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const Uw={};function W_e(e){const t=V_e(e);return t&&t.Definition||null}function V_e(e){return e=e&&e.toLowerCase(),It(Uw,e)?Uw[e]:null}function*G_e(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)r=t(r,++n,e),r!=null&&r!==""&&(r=+r)>=r&&(yield r)}}function JV(e,t,n){const r=Float64Array.from(G_e(e,n));return r.sort(tp),t.map(i=>$1e(r,i))}function ZV(e,t){return JV(e,[.25,.5,.75],t)}function eG(e,t){const n=e.length,r=Det(e,t),i=ZV(e,t),s=(i[2]-i[0])/1.34;return 1.06*(Math.min(r,s)||r||Math.abs(i[0])||1)*Math.pow(n,-.2)}function Y_e(e){const t=e.maxbins||20,n=e.base||10,r=Math.log(n),i=e.divide||[5,2];let s=e.extent[0],o=e.extent[1],a,l,u,c,d,f;const h=e.span||o-s||Math.abs(s)||1;if(e.step)a=e.step;else if(e.steps){for(c=h/t,d=0,f=e.steps.length;d<f&&e.steps[d]<c;++d);a=e.steps[Math.max(0,d-1)]}else{for(l=Math.ceil(Math.log(t)/r),u=e.minstep||0,a=Math.max(u,Math.pow(n,Math.round(Math.log(h)/r)-l));Math.ceil(h/a)>t;)a*=n;for(d=0,f=i.length;d<f;++d)c=a/i[d],c>=u&&h/c<=t&&(a=c)}c=Math.log(a);const p=c>=0?0:~~(-c/r)+1,m=Math.pow(n,-p-1);return(e.nice||e.nice===void 0)&&(c=Math.floor(s/a+m)*a,s=s<c?c-a:c,o=Math.ceil(o/a)*a),{start:s,stop:o===s?s+a:o,step:a}}var nu=Math.random;function ggt(e){nu=e}function K_e(e,t,n,r){if(!e.length)return[void 0,void 0];const i=Float64Array.from(G_e(e,r)),s=i.length,o=t;let a,l,u,c;for(u=0,c=Array(o);u<o;++u){for(a=0,l=0;l<s;++l)a+=i[~~(nu()*s)];c[u]=a/s}return c.sort(tp),[qj(c,n/2),qj(c,1-n/2)]}function X_e(e,t,n,r){r=r||(f=>f);const i=e.length,s=new Float64Array(i);let o=0,a=1,l=r(e[0]),u=l,c=l+t,d;for(;a<i;++a){if(d=r(e[a]),d>=c){for(u=(l+u)/2;o<a;++o)s[o]=u;c=d+t,l=d}u=d}for(u=(l+u)/2;o<a;++o)s[o]=u;return n?ygt(s,t+t/4):s}function ygt(e,t){const n=e.length;let r=0,i=1,s,o;for(;e[r]===e[i];)++i;for(;i<n;){for(s=i+1;e[i]===e[s];)++s;if(e[i]-e[i-1]<t){for(o=i+(r+s-i-i>>1);o<i;)e[o++]=e[i];for(;o>i;)e[o--]=e[r]}r=i,i=s}return e}function vgt(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function bgt(e,t){t==null&&(t=e,e=0);let n,r,i;const s={min(o){return arguments.length?(n=o||0,i=r-n,s):n},max(o){return arguments.length?(r=o||0,i=r-n,s):r},sample(){return n+Math.floor(i*nu())},pdf(o){return o===Math.floor(o)&&o>=n&&o<r?1/i:0},cdf(o){const a=Math.floor(o);return a<n?0:a>=r?1:(a-n+1)/i},icdf(o){return o>=0&&o<=1?n-1+Math.floor(o*i):NaN}};return s.min(e).max(t)}const Q_e=Math.sqrt(2*Math.PI),wgt=Math.SQRT2;let E_=NaN;function pS(e,t){e=e||0,t=t??1;let n=0,r=0,i,s;if(E_===E_)n=E_,E_=NaN;else{do n=nu()*2-1,r=nu()*2-1,i=n*n+r*r;while(i===0||i>1);s=Math.sqrt(-2*Math.log(i)/i),n*=s,E_=r*s}return e+n*t}function W$(e,t,n){n=n??1;const r=(e-(t||0))/n;return Math.exp(-.5*r*r)/(n*Q_e)}function mS(e,t,n){t=t||0,n=n??1;const r=(e-t)/n,i=Math.abs(r);let s;if(i>37)s=0;else{const o=Math.exp(-i*i/2);let a;i<7.07106781186547?(a=.0352624965998911*i+.700383064443688,a=a*i+6.37396220353165,a=a*i+33.912866078383,a=a*i+112.079291497871,a=a*i+221.213596169931,a=a*i+220.206867912376,s=o*a,a=.0883883476483184*i+1.75566716318264,a=a*i+16.064177579207,a=a*i+86.7807322029461,a=a*i+296.564248779674,a=a*i+637.333633378831,a=a*i+793.826512519948,a=a*i+440.413735824752,s=s/a):(a=i+.65,a=i+4/a,a=i+3/a,a=i+2/a,a=i+1/a,s=o/a/2.506628274631)}return r>0?1-s:s}function gS(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*wgt*xgt(2*e-1)}function xgt(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function tG(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>pS(n,r),pdf:s=>W$(s,n,r),cdf:s=>mS(s,n,r),icdf:s=>gS(s,n,r)};return i.mean(e).stdev(t)}function nG(e,t){const n=tG();let r=0;const i={data(s){return arguments.length?(e=s,r=s?s.length:0,i.bandwidth(t)):e},bandwidth(s){return arguments.length?(t=s,!t&&e&&(t=eG(e)),i):t},sample(){return e[~~(nu()*r)]+t*n.sample()},pdf(s){let o=0,a=0;for(;a<r;++a)o+=n.pdf((s-e[a])/t);return o/t/r},cdf(s){let o=0,a=0;for(;a<r;++a)o+=n.cdf((s-e[a])/t);return o/r},icdf(){throw Error("KDE icdf not supported.")}};return i.data(e)}function V$(e,t){return e=e||0,t=t??1,Math.exp(e+pS()*t)}function G$(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;const r=(Math.log(e)-t)/n;return Math.exp(-.5*r*r)/(n*Q_e*e)}function Y$(e,t,n){return mS(Math.log(e),t,n)}function K$(e,t,n){return Math.exp(gS(e,t,n))}function J_e(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>V$(n,r),pdf:s=>G$(s,n,r),cdf:s=>Y$(s,n,r),icdf:s=>K$(s,n,r)};return i.mean(e).stdev(t)}function Z_e(e,t){let n=0,r;function i(o){const a=[];let l=0,u;for(u=0;u<n;++u)l+=a[u]=o[u]==null?1:+o[u];for(u=0;u<n;++u)a[u]/=l;return a}const s={weights(o){return arguments.length?(r=i(t=o||[]),s):t},distributions(o){return arguments.length?(o?(n=o.length,e=o):(n=0,e=[]),s.weights(t)):e},sample(){const o=nu();let a=e[n-1],l=r[0],u=0;for(;u<n-1;l+=r[++u])if(o<l){a=e[u];break}return a.sample()},pdf(o){let a=0,l=0;for(;l<n;++l)a+=r[l]*e[l].pdf(o);return a},cdf(o){let a=0,l=0;for(;l<n;++l)a+=r[l]*e[l].cdf(o);return a},icdf(){throw Error("Mixture icdf not supported.")}};return s.distributions(e).weights(t)}function X$(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*nu()}function Q$(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function J$(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function Z$(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function e2e(e,t){let n,r;const i={min(s){return arguments.length?(n=s||0,i):n},max(s){return arguments.length?(r=s??1,i):r},sample:()=>X$(n,r),pdf:s=>Q$(s,n,r),cdf:s=>J$(s,n,r),icdf:s=>Z$(s,n,r)};return t==null&&(t=e??1,e=0),i.min(e).max(t)}function rG(e,t,n){let r=0,i=0;for(const s of e){const o=n(s);t(s)==null||o==null||isNaN(o)||(r+=(o-r)/++i)}return{coef:[r],predict:()=>r,rSquared:0}}function yS(e,t,n,r){const i=r-e*e,s=Math.abs(i)<1e-24?0:(n-e*t)/i;return[t-s*e,s]}function e4(e,t,n,r){e=e.filter(h=>{let p=t(h),m=n(h);return p!=null&&(p=+p)>=p&&m!=null&&(m=+m)>=m}),r&&e.sort((h,p)=>t(h)-t(p));const i=e.length,s=new Float64Array(i),o=new Float64Array(i);let a=0,l=0,u=0,c,d,f;for(f of e)s[a]=c=+t(f),o[a]=d=+n(f),++a,l+=(c-l)/a,u+=(d-u)/a;for(a=0;a<i;++a)s[a]-=l,o[a]-=u;return[s,o,l,u]}function vS(e,t,n,r){let i=-1,s,o;for(const a of e)s=t(a),o=n(a),s!=null&&(s=+s)>=s&&o!=null&&(o=+o)>=o&&r(s,o,++i)}function oE(e,t,n,r,i){let s=0,o=0;return vS(e,t,n,(a,l)=>{const u=l-i(a),c=l-r;s+=u*u,o+=c*c}),1-s/o}function iG(e,t,n){let r=0,i=0,s=0,o=0,a=0;vS(e,t,n,(c,d)=>{++a,r+=(c-r)/a,i+=(d-i)/a,s+=(c*d-s)/a,o+=(c*c-o)/a});const l=yS(r,i,s,o),u=c=>l[0]+l[1]*c;return{coef:l,predict:u,rSquared:oE(e,t,n,i,u)}}function t2e(e,t,n){let r=0,i=0,s=0,o=0,a=0;vS(e,t,n,(c,d)=>{++a,c=Math.log(c),r+=(c-r)/a,i+=(d-i)/a,s+=(c*d-s)/a,o+=(c*c-o)/a});const l=yS(r,i,s,o),u=c=>l[0]+l[1]*Math.log(c);return{coef:l,predict:u,rSquared:oE(e,t,n,i,u)}}function n2e(e,t,n){const[r,i,s,o]=e4(e,t,n);let a=0,l=0,u=0,c=0,d=0,f,h,p;vS(e,t,n,(v,x)=>{f=r[d++],h=Math.log(x),p=f*x,a+=(x*h-a)/d,l+=(p-l)/d,u+=(p*h-u)/d,c+=(f*p-c)/d});const[m,g]=yS(l/o,a/o,u/o,c/o),b=v=>Math.exp(m+g*(v-s));return{coef:[Math.exp(m-g*s),g],predict:b,rSquared:oE(e,t,n,o,b)}}function r2e(e,t,n){let r=0,i=0,s=0,o=0,a=0,l=0;vS(e,t,n,(d,f)=>{const h=Math.log(d),p=Math.log(f);++l,r+=(h-r)/l,i+=(p-i)/l,s+=(h*p-s)/l,o+=(h*h-o)/l,a+=(f-a)/l});const u=yS(r,i,s,o),c=d=>u[0]*Math.pow(d,u[1]);return u[0]=Math.exp(u[0]),{coef:u,predict:c,rSquared:oE(e,t,n,a,c)}}function sG(e,t,n){const[r,i,s,o]=e4(e,t,n),a=r.length;let l=0,u=0,c=0,d=0,f=0,h,p,m,g;for(h=0;h<a;)p=r[h],m=i[h++],g=p*p,l+=(g-l)/h,u+=(g*p-u)/h,c+=(g*g-c)/h,d+=(p*m-d)/h,f+=(g*m-f)/h;const b=c-l*l,v=l*b-u*u,x=(f*l-d*u)/v,E=(d*b-f*u)/v,_=-x*l,C=S=>(S=S-s,x*S*S+E*S+_+o);return{coef:[_-E*s+x*s*s+o,E-2*x*s,x],predict:C,rSquared:oE(e,t,n,o,C)}}function i2e(e,t,n,r){if(r===0)return rG(e,t,n);if(r===1)return iG(e,t,n);if(r===2)return sG(e,t,n);const[i,s,o,a]=e4(e,t,n),l=i.length,u=[],c=[],d=r+1;let f,h,p,m,g;for(f=0;f<d;++f){for(p=0,m=0;p<l;++p)m+=Math.pow(i[p],f)*s[p];for(u.push(m),g=new Float64Array(d),h=0;h<d;++h){for(p=0,m=0;p<l;++p)m+=Math.pow(i[p],f+h);g[h]=m}c.push(g)}c.push(u);const b=_gt(c),v=x=>{x-=o;let E=a+b[0]+b[1]*x+b[2]*x*x;for(f=3;f<d;++f)E+=b[f]*Math.pow(x,f);return E};return{coef:Egt(d,b,-o,a),predict:v,rSquared:oE(e,t,n,a,v)}}function Egt(e,t,n,r){const i=Array(e);let s,o,a,l;for(s=0;s<e;++s)i[s]=0;for(s=e-1;s>=0;--s)for(a=t[s],l=1,i[s]+=a,o=1;o<=s;++o)l*=(s+1-o)/o,i[s-o]+=a*Math.pow(n,o)*l;return i[0]+=r,i}function _gt(e){const t=e.length-1,n=[];let r,i,s,o,a;for(r=0;r<t;++r){for(o=r,i=r+1;i<t;++i)Math.abs(e[r][i])>Math.abs(e[r][o])&&(o=i);for(s=r;s<t+1;++s)a=e[s][r],e[s][r]=e[s][o],e[s][o]=a;for(i=r+1;i<t;++i)for(s=t;s>=r;s--)e[s][i]-=e[s][r]*e[r][i]/e[r][r]}for(i=t-1;i>=0;--i){for(a=0,s=i+1;s<t;++s)a+=e[s][i]*n[s];n[i]=(e[t][i]-a)/e[i][i]}return n}const yae=2,vae=1e-12;function s2e(e,t,n,r){const[i,s,o,a]=e4(e,t,n,!0),l=i.length,u=Math.max(2,~~(r*l)),c=new Float64Array(l),d=new Float64Array(l),f=new Float64Array(l).fill(1);for(let h=-1;++h<=yae;){const p=[0,u-1];for(let g=0;g<l;++g){const b=i[g],v=p[0],x=p[1],E=b-i[v]>i[x]-b?v:x;let _=0,C=0,S=0,k=0,R=0;const O=1/Math.abs(i[E]-b||1);for(let $=v;$<=x;++$){const B=i[$],H=s[$],Y=Tgt(Math.abs(b-B)*O)*f[$],J=B*Y;_+=Y,C+=J,S+=H*Y,k+=H*J,R+=B*J}const[N,L]=yS(C/_,S/_,k/_,R/_);c[g]=N+L*b,d[g]=Math.abs(s[g]-c[g]),Cgt(i,g+1,p)}if(h===yae)break;const m=M1e(d);if(Math.abs(m)<vae)break;for(let g=0,b,v;g<l;++g)b=d[g]/(6*m),f[g]=b>=1?vae:(v=1-b*b)*v}return Sgt(i,c,o,a)}function Tgt(e){return(e=1-e*e*e)*e*e}function Cgt(e,t,n){const r=e[t];let i=n[0],s=n[1]+1;if(!(s>=e.length))for(;t>i&&e[s]-r<=r-e[i];)n[0]=++i,n[1]=s,++s}function Sgt(e,t,n,r){const i=e.length,s=[];let o=0,a=0,l=[],u;for(;o<i;++o)u=e[o]+n,l[0]===u?l[1]+=(t[o]-l[1])/++a:(a=0,l[1]+=r,l=[u,t[o]],s.push(l));return l[1]+=r,s}const Agt=.5*Math.PI/180;function t4(e,t,n,r){n=n||25,r=Math.max(n,r||200);const i=m=>[m,e(m)],s=t[0],o=t[1],a=o-s,l=a/r,u=[i(s)],c=[];if(n===r){for(let m=1;m<r;++m)u.push(i(s+m/n*a));return u.push(i(o)),u}else{c.push(i(o));for(let m=n;--m>0;)c.push(i(s+m/n*a))}let d=u[0],f=c[c.length-1];const h=1/a,p=kgt(d[1],c);for(;f;){const m=i((d[0]+f[0])/2);m[0]-d[0]>=l&&Igt(d,m,f,h,p)>Agt?c.push(m):(d=f,u.push(f),c.pop()),f=c[c.length-1]}return u}function kgt(e,t){let n=e,r=e;const i=t.length;for(let s=0;s<i;++s){const o=t[s][1];o<n&&(n=o),o>r&&(r=o)}return 1/(r-n)}function Igt(e,t,n,r,i){const s=Math.atan2(i*(n[1]-e[1]),r*(n[0]-e[0])),o=Math.atan2(i*(t[1]-e[1]),r*(t[0]-e[0]));return Math.abs(s-o)}function Rgt(e){return t=>{const n=e.length;let r=1,i=String(e[0](t));for(;r<n;++r)i+="|"+e[r](t);return i}}function ZB(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:Rgt(e)}function o2e(e,t,n){return n||e+(t?"_"+t:"")}const SL=()=>{},Dgt={init:SL,add:SL,rem:SL,idx:0},eC={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},bS=Object.keys(eC).filter(e=>e!=="__count__");function Pgt(e,t){return(n,r)=>hn({name:e,aggregate_param:r,out:n||e},Dgt,t)}[...bS,"__count__"].forEach(e=>{eC[e]=Pgt(e,eC[e])});function a2e(e,t,n){return eC[e](n,t)}function l2e(e,t){return e.idx-t.idx}function Ngt(e){const t={};e.forEach(r=>t[r.name]=r);const n=r=>{r.req&&r.req.forEach(i=>{t[i]||n(t[i]=eC[i]())})};return e.forEach(n),Object.values(t).sort(l2e)}function Ogt(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.aggregate_param==null?e.init(this):e.init(this,e.aggregate_param))}function $gt(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function Mgt(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function Lgt(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function u2e(e,t){const n=t||Co,r=Ngt(e),i=e.slice().sort(l2e);function s(o){this._ops=r,this._out=i,this.cell=o,this.init()}return s.prototype.init=Ogt,s.prototype.add=$gt,s.prototype.rem=Mgt,s.prototype.set=Lgt,s.prototype.get=n,s.fields=e.map(o=>o.out),s}function oG(e){this._key=e?Zl(e):Kt,this.reset()}const ko=oG.prototype;ko.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};ko.add=function(e){this._add.push(e)};ko.rem=function(e){this._rem.push(e)};ko.values=function(){if(this._get=null,this._rem.length===0)return this._add;const e=this._add,t=this._rem,n=this._key,r=e.length,i=t.length,s=Array(r-i),o={};let a,l,u;for(a=0;a<i;++a)o[n(t[a])]=1;for(a=0,l=0;a<r;++a)o[n(u=e[a])]?o[n(u)]=0:s[l++]=u;return this._rem=[],this._add=s};ko.distinct=function(e){const t=this.values(),n={};let r=t.length,i=0,s;for(;--r>=0;)s=e(t[r])+"",It(n,s)||(n[s]=1,++i);return i};ko.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=d_e(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};ko.argmin=function(e){return this.extent(e)[0]||{}};ko.argmax=function(e){return this.extent(e)[1]||{}};ko.min=function(e){const t=this.extent(e)[0];return t!=null?e(t):void 0};ko.max=function(e){const t=this.extent(e)[1];return t!=null?e(t):void 0};ko.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=ZV(this.values(),e),this._get=e),this._q};ko.q1=function(e){return this.quartile(e)[0]};ko.q2=function(e){return this.quartile(e)[1]};ko.q3=function(e){return this.quartile(e)[2]};ko.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=K_e(this.values(),1e3,.05,e),this._get=e),this._ci};ko.ci0=function(e){return this.ci(e)[0]};ko.ci1=function(e){return this.ci(e)[1]};function _0(e){qe.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}_0.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:bS},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};bt(_0,qe,{transform(e,t){const n=this,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.modified();return n.stamp=r.stamp,n.value&&(i||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(e):Object.create(null),t.visit(t.SOURCE,s=>n.add(s))):(n.value=n.value||n.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),r.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&r.clean(!0).runAfter(()=>this.clean()),n.changes(r)},cross(){const e=this,t=e.value,n=e._dnames,r=n.map(()=>({})),i=n.length;function s(a){let l,u,c,d;for(l in a)for(c=a[l].tuple,u=0;u<i;++u)r[u][d=c[n[u]]]=d}s(e._prev),s(t);function o(a,l,u){const c=n[u],d=r[u++];for(const f in d){const h=a?a+"|"+f:f;l[c]=d[f],u<i?o(h,l,u):t[h]||e.cell(h,l)}}o("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],r={};function i(v){const x=St(Vo(v)),E=x.length;let _=0,C;for(;_<E;++_)r[C=x[_]]||(r[C]=1,t.push(C))}this._dims=St(e.groupby),this._dnames=this._dims.map(v=>{const x=Ci(v);return i(v),n.push(x),x}),this.cellkey=e.key?e.key:ZB(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const s=e.fields||[null],o=e.ops||["count"],a=e.aggregate_params||[null],l=e.as||[],u=s.length,c={};let d,f,h,p,m,g,b;for(u!==o.length&&He("Unmatched number of fields and aggregate ops."),b=0;b<u;++b){if(d=s[b],f=o[b],h=a[b]||null,d==null&&f!=="count"&&He("Null aggregate field specified."),m=Ci(d),g=o2e(f,m,l[b]),n.push(g),f==="count"){this._counts.push(g);continue}p=c[m],p||(i(d),p=c[m]=[],p.field=d,this._measures.push(p)),f!=="count"&&(this._countOnly=!1),p.push(a2e(f,h,g))}return this._measures=this._measures.map(v=>u2e(v,v.field)),Object.create(null)},cellkey:ZB(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const r=this._measures,i=r.length;n.agg=Array(i);for(let s=0;s<i;++s)n.agg[s]=new r[s](n)}return n.store&&(n.data=new oG),n},newtuple(e,t){const n=this._dnames,r=this._dims,i=r.length,s={};for(let o=0;o<i;++o)s[n[o]]=r[o](e);return t?z_e(t.tuple,s):hr(s)},clean(){const e=this.value;for(const t in e)e[t].num===0&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].add(r[i].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].rem(r[i].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let r=0,i=n.length;r<i;++r)t[n[r]]=e.num;if(!this._countOnly){const r=e.agg;for(let i=0,s=r.length;i<s;++i)r[i].set(t)}return t},changes(e){const t=this._adds,n=this._mods,r=this._prev,i=this._drop,s=e.add,o=e.rem,a=e.mod;let l,u,c,d;if(r)for(u in r)l=r[u],(!i||l.num)&&o.push(l.tuple);for(c=0,d=this._alen;c<d;++c)s.push(this.celltuple(t[c])),t[c]=null;for(c=0,d=this._mlen;c<d;++c)l=n[c],(l.num===0&&i?o:a).push(this.celltuple(l)),n[c]=null;return this._alen=this._mlen=0,this._prev=null,e}});const Fgt=1e-14;function aG(e){qe.call(this,null,e)}aG.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};bt(aG,qe,{transform(e,t){const n=e.interval!==!1,r=this._bins(e),i=r.start,s=r.step,o=e.as||["bin0","bin1"],a=o[0],l=o[1];let u;return e.modified()?(t=t.reflow(!0),u=t.SOURCE):u=t.modified(Vo(e.field))?t.ADD_MOD:t.ADD,t.visit(u,n?c=>{const d=r(c);c[a]=d,c[l]=d==null?null:i+s*(1+(d-i)/s)}:c=>c[a]=r(c)),t.modifies(n?o:a)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=Y_e(e),r=n.step;let i=n.start,s=i+Math.ceil((n.stop-i)/r)*r,o,a;(o=e.anchor)!=null&&(a=o-(i+r*Math.floor((o-i)/r)),i+=a,s+=a);const l=function(u){let c=yo(t(u));return c==null?null:c<i?-1/0:c>s?1/0:(c=Math.max(i,Math.min(c,s-r)),i+r*Math.floor(Fgt+(c-i)/r))};return l.start=i,l.stop=n.stop,l.step=r,this.value=wl(l,Vo(t),e.name||"bin_"+Ci(t))}});function c2e(e,t,n){const r=e;let i=t||[],s=n||[],o={},a=0;return{add:l=>s.push(l),remove:l=>o[r(l)]=++a,size:()=>i.length,data:(l,u)=>(a&&(i=i.filter(c=>!o[r(c)]),o={},a=0),u&&l&&i.sort(l),s.length&&(i=l?p_e(l,i,s.sort(l)):i.concat(s),s=[]),i)}}function lG(e){qe.call(this,[],e)}lG.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};bt(lG,qe,{transform(e,t){const n=t.fork(t.ALL),r=c2e(Kt,this.value,n.materialize(n.ADD).add),i=e.sort,s=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(s),this.value=n.source=r.data(Wv(i),s),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function d2e(e){Nr.call(this,null,jgt,e)}bt(d2e,Nr);function jgt(e){return this.value&&!e.modified()?this.value:SV(e.fields,e.orders)}function uG(e){qe.call(this,null,e)}uG.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function Bgt(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}bt(uG,qe,{transform(e,t){const n=d=>f=>{for(var h=Bgt(a(f),e.case,s)||[],p,m=0,g=h.length;m<g;++m)o.test(p=h[m])||d(p)},r=this._parameterCheck(e,t),i=this._counts,s=this._match,o=this._stop,a=e.field,l=e.as||["text","count"],u=n(d=>i[d]=1+(i[d]||0)),c=n(d=>i[d]-=1);return r?t.visit(t.SOURCE,u):(t.visit(t.ADD,u),t.visit(t.REM,c)),this._finish(t,l)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,r=this._tuples||(this._tuples={}),i=t[0],s=t[1],o=e.fork(e.NO_SOURCE|e.NO_FIELDS);let a,l,u;for(a in n)l=r[a],u=n[a]||0,!l&&u?(r[a]=l=hr({}),l[i]=a,l[s]=u,o.add.push(l)):u===0?(l&&o.rem.push(l),n[a]=null,r[a]=null):l[s]!==u&&(l[s]=u,o.mod.push(l));return o.modifies(t)}});function cG(e){qe.call(this,null,e)}cG.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};bt(cG,qe,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.as||["a","b"],i=r[0],s=r[1],o=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let a=this.value;return o?(a&&(n.rem=a),a=t.materialize(t.SOURCE).source,n.add=this.value=zgt(a,i,s,e.filter||fl)):n.mod=a,n.source=this.value,n.modifies(r)}});function zgt(e,t,n,r){for(var i=[],s={},o=e.length,a=0,l,u;a<o;++a)for(s[t]=u=e[a],l=0;l<o;++l)s[n]=e[l],r(s)&&(i.push(hr(s)),s={},s[t]=u);return i}const bae={kde:nG,mixture:Z_e,normal:tG,lognormal:J_e,uniform:e2e},Ugt="distributions",wae="function",qgt="field";function f2e(e,t){const n=e[wae];It(bae,n)||He("Unknown distribution function: "+n);const r=bae[n]();for(const i in e)i===qgt?r.data((e.from||t()).map(e[i])):i===Ugt?r[i](e[i].map(s=>f2e(s,t))):typeof r[i]===wae&&r[i](e[i]);return r}function dG(e){qe.call(this,null,e)}const h2e=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],Hgt={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:h2e},{name:"weights",type:"number",array:!0}]};dG.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:h2e.concat(Hgt)},{name:"as",type:"string",array:!0,default:["value","density"]}]};bt(dG,qe,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=f2e(e.distribution,Wgt(t)),i=e.steps||e.minsteps||25,s=e.steps||e.maxsteps||200;let o=e.method||"pdf";o!=="pdf"&&o!=="cdf"&&He("Invalid density method: "+o),!e.extent&&!r.data&&He("Missing density extent parameter."),o=r[o];const a=e.as||["value","density"],l=e.extent||Zc(r.data()),u=t4(o,l,i,s).map(c=>{const d={};return d[a[0]]=c[0],d[a[1]]=c[1],hr(d)});this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});function Wgt(e){return()=>e.materialize(e.SOURCE).source}function p2e(e,t){return e?e.map((n,r)=>t[r]||Ci(n)):null}function fG(e,t,n){const r=[],i=d=>d(l);let s,o,a,l,u,c;if(t==null)r.push(e.map(n));else for(s={},o=0,a=e.length;o<a;++o)l=e[o],u=t.map(i),c=s[u],c||(s[u]=c=[],c.dims=u,r.push(c)),c.push(n(l));return r}const m2e="bin";function hG(e){qe.call(this,null,e)}hG.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:m2e}]};const Vgt=(e,t)=>nE(Zc(e,t))/30;bt(hG,qe,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;const n=t.materialize(t.SOURCE).source,r=fG(t.source,e.groupby,Co),i=e.smooth||!1,s=e.field,o=e.step||Vgt(n,s),a=Wv((p,m)=>s(p)-s(m)),l=e.as||m2e,u=r.length;let c=1/0,d=-1/0,f=0,h;for(;f<u;++f){const p=r[f].sort(a);h=-1;for(const m of X_e(p,o,i,s))m<c&&(c=m),m>d&&(d=m),p[++h][l]=m}return this.value={start:c,stop:d,step:o},t.reflow(!0).modifies(l)}});function g2e(e){Nr.call(this,null,Ggt,e),this.modified(!0)}bt(g2e,Nr);function Ggt(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:wl(n=>t(n,e),Vo(t),Ci(t))}function pG(e){qe.call(this,[void 0,void 0],e)}pG.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};bt(pG,qe,{transform(e,t){const n=this.value,r=e.field,i=t.changed()||t.modified(r.fields)||e.modified("field");let s=n[0],o=n[1];if((i||s==null)&&(s=1/0,o=-1/0),t.visit(i?t.SOURCE:t.ADD,a=>{const l=yo(r(a));l!=null&&(l<s&&(s=l),l>o&&(o=l))}),!Number.isFinite(s)||!Number.isFinite(o)){let a=Ci(r);a&&(a=` for field "${a}"`),t.dataflow.warn(`Infinite extent${a}: [${s}, ${o}]`),s=o=void 0}this.value=[s,o]}});function mG(e,t){Nr.call(this,e),this.parent=t,this.count=0}bt(mG,Nr,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function n4(e){qe.call(this,{},e),this._keys=tE();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let r=0,i=t.active;r<i;++r)n(t[r],r,t)}}bt(n4,qe,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,r){const i=this.value;let s=It(i,e)&&i[e],o,a;return s?s.value.stamp<n.stamp&&(s.init(n),this.activate(s)):(a=r||(a=this._group[e])&&a.tuple,o=n.dataflow,s=new mG(n.fork(n.NO_SOURCE),this),o.add(s).connect(t(o,e,a)),i[e]=s,this.activate(s)),s},clean(){const e=this.value;let t=0;for(const n in e)if(e[n].count===0){const r=e[n].detachSubflow;r&&r(),delete e[n],++t}if(t){const n=this._targets.filter(r=>r&&r.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,r=e?e.length:0;let i=0;for(;i<r;++i)t[i]=e[i];for(;i<n&&t[i]!=null;++i)t[i]=null;t.active=r},transform(e,t){const n=t.dataflow,r=e.key,i=e.subflow,s=this._keys,o=e.modified("key"),a=l=>this.subflow(l,i,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,l=>{const u=Kt(l),c=s.get(u);c!==void 0&&(s.delete(u),a(c).rem(l))}),t.visit(t.ADD,l=>{const u=r(l);s.set(Kt(l),u),a(u).add(l)}),o||t.modified(r.fields)?t.visit(t.MOD,l=>{const u=Kt(l),c=s.get(u),d=r(l);c===d?a(d).mod(l):(s.set(u,d),a(c).rem(l),a(d).add(l))}):t.changed(t.MOD)&&t.visit(t.MOD,l=>{a(s.get(Kt(l))).mod(l)}),o&&t.visit(t.REFLOW,l=>{const u=Kt(l),c=s.get(u),d=r(l);c!==d&&(s.set(u,d),a(c).rem(l),a(d).add(l))}),t.clean()?n.runAfter(()=>{this.clean(),s.clean()}):s.empty>n.cleanThreshold&&n.runAfter(s.clean),t}});function y2e(e){Nr.call(this,null,Ygt,e)}bt(y2e,Nr);function Ygt(e){return this.value&&!e.modified()?this.value:Ge(e.name)?St(e.name).map(t=>Zl(t)):Zl(e.name,e.as)}function gG(e){qe.call(this,tE(),e)}gG.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};bt(gG,qe,{transform(e,t){const n=t.dataflow,r=this.value,i=t.fork(),s=i.add,o=i.rem,a=i.mod,l=e.expr;let u=!0;t.visit(t.REM,d=>{const f=Kt(d);r.has(f)?r.delete(f):o.push(d)}),t.visit(t.ADD,d=>{l(d,e)?s.push(d):r.set(Kt(d),1)});function c(d){const f=Kt(d),h=l(d,e),p=r.get(f);h&&p?(r.delete(f),s.push(d)):!h&&!p?(r.set(f,1),o.push(d)):u&&h&&!p&&a.push(d)}return t.visit(t.MOD,c),e.modified()&&(u=!1,t.visit(t.REFLOW,c)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i}});function yG(e){qe.call(this,[],e)}yG.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};bt(yG,qe,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=p2e(r,e.as||[]),s=e.index||null,o=i.length;return n.rem=this.value,t.visit(t.SOURCE,a=>{const l=r.map(p=>p(a)),u=l.reduce((p,m)=>Math.max(p,m.length),0);let c=0,d,f,h;for(;c<u;++c){for(f=KV(a),d=0;d<o;++d)f[i[d]]=(h=l[d][c])==null?null:h;s&&(f[s]=c),n.add.push(f)}}),this.value=n.source=n.add,s&&n.modifies(s),n.modifies(i)}});function vG(e){qe.call(this,[],e)}vG.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};bt(vG,qe,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=r.map(Ci),s=e.as||["key","value"],o=s[0],a=s[1],l=r.length;return n.rem=this.value,t.visit(t.SOURCE,u=>{for(let c=0,d;c<l;++c)d=KV(u),d[o]=i[c],d[a]=r[c](u),n.add.push(d)}),this.value=n.source=n.add,n.modifies(s)}});function bG(e){qe.call(this,null,e)}bG.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};bt(bG,qe,{transform(e,t){const n=e.expr,r=e.as,i=e.modified(),s=e.initonly?t.ADD:i?t.SOURCE:t.modified(n.fields)||t.modified(r)?t.ADD_MOD:t.ADD;return i&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(s,o=>o[r]=n(o,e))}});function v2e(e){qe.call(this,[],e)}bt(v2e,qe,{transform(e,t){const n=t.fork(t.ALL),r=e.generator;let i=this.value,s=e.size-i.length,o,a,l;if(s>0){for(o=[];--s>=0;)o.push(l=hr(r(e))),i.push(l);n.add=n.add.length?n.materialize(n.ADD).add.concat(o):o}else a=i.slice(0,-s),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(a):a,i=i.slice(-s);return n.source=this.value=i,n}});const Zk={value:"value",median:M1e,mean:Fet,min:Uj,max:Iy},Kgt=[];function wG(e){qe.call(this,[],e)}wG.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function Xgt(e){var t=e.method||Zk.value,n;if(Zk[t]==null)He("Unrecognized imputation method: "+t);else return t===Zk.value?(n=e.value!==void 0?e.value:0,()=>n):Zk[t]}function Qgt(e){const t=e.field;return n=>n?t(n):NaN}bt(wG,qe,{transform(e,t){var n=t.fork(t.ALL),r=Xgt(e),i=Qgt(e),s=Ci(e.field),o=Ci(e.key),a=(e.groupby||[]).map(Ci),l=Jgt(t.source,e.groupby,e.key,e.keyvals),u=[],c=this.value,d=l.domain.length,f,h,p,m,g,b,v,x,E,_;for(g=0,x=l.length;g<x;++g)for(f=l[g],p=f.values,h=NaN,v=0;v<d;++v)if(f[v]==null){for(m=l.domain[v],_={_impute:!0},b=0,E=p.length;b<E;++b)_[a[b]]=p[b];_[o]=m,_[s]=Number.isNaN(h)?h=r(f,i):h,u.push(hr(_))}return u.length&&(n.add=n.materialize(n.ADD).add.concat(u)),c.length&&(n.rem=n.materialize(n.REM).rem.concat(c)),this.value=u,n}});function Jgt(e,t,n,r){var i=b=>b(g),s=[],o=r?r.slice():[],a={},l={},u,c,d,f,h,p,m,g;for(o.forEach((b,v)=>a[b]=v+1),f=0,m=e.length;f<m;++f)g=e[f],p=n(g),h=a[p]||(a[p]=o.push(p)),c=(u=t?t.map(i):Kgt)+"",(d=l[c])||(d=l[c]=[],s.push(d),d.values=u),d[h-1]=g;return s.domain=o,s}function xG(e){_0.call(this,e)}xG.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:bS},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};bt(xG,_0,{transform(e,t){const n=this,r=e.modified();let i;return n.value&&(r||t.modified(n._inputs,!0))?(i=n.value=r?n.init(e):{},t.visit(t.SOURCE,s=>n.add(s))):(i=n.value=n.value||this.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),n.changes(),t.visit(t.SOURCE,s=>{hn(s,i[n.cellkey(s)].tuple)}),t.reflow(r).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,r;for(n=0,r=this._alen;n<r;++n)this.celltuple(e[n]),e[n]=null;for(n=0,r=this._mlen;n<r;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function EG(e){qe.call(this,null,e)}EG.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};bt(EG,qe,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=fG(r,e.groupby,e.field),s=(e.groupby||[]).map(Ci),o=e.bandwidth,a=e.cumulative?"cdf":"pdf",l=e.as||["value","density"],u=[];let c=e.extent,d=e.steps||e.minsteps||25,f=e.steps||e.maxsteps||200;a!=="pdf"&&a!=="cdf"&&He("Invalid density method: "+a),e.resolve==="shared"&&(c||(c=Zc(r,e.field)),d=f=e.steps||f),i.forEach(h=>{const p=nG(h,o)[a],m=e.counts?h.length:1,g=c||Zc(h);t4(p,g,d,f).forEach(b=>{const v={};for(let x=0;x<s.length;++x)v[s[x]]=h.dims[x];v[l[0]]=b[0],v[l[1]]=b[1]*m,u.push(hr(v))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});function b2e(e){Nr.call(this,null,Zgt,e)}bt(b2e,Nr);function Zgt(e){return this.value&&!e.modified()?this.value:IV(e.fields,e.flat)}function w2e(e){qe.call(this,[],e),this._pending=null}bt(w2e,qe,{transform(e,t){const n=t.dataflow;return this._pending?AL(this,t,this._pending):eyt(e)?t.StopPropagation:e.values?AL(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(i=>(this._pending=St(i.data),s=>s.touch(this)))}:n.request(e.url,e.format).then(r=>AL(this,t,St(r.data)))}});function eyt(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function AL(e,t,n){n.forEach(hr);const r=t.fork(t.NO_FIELDS&t.NO_SOURCE);return r.rem=e.value,e.value=r.source=r.add=n,e._pending=null,r.rem.length&&r.clean(!0),r}function _G(e){qe.call(this,{},e)}_G.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};bt(_G,qe,{transform(e,t){const n=e.fields,r=e.index,i=e.values,s=e.default==null?null:e.default,o=e.modified(),a=n.length;let l=o?t.SOURCE:t.ADD,u=t,c=e.as,d,f,h;return i?(f=i.length,a>1&&!c&&He('Multi-field lookup requires explicit "as" parameter.'),c&&c.length!==a*f&&He('The "as" parameter has too few output field names.'),c=c||i.map(Ci),d=function(p){for(var m=0,g=0,b,v;m<a;++m)if(v=r.get(n[m](p)),v==null)for(b=0;b<f;++b,++g)p[c[g]]=s;else for(b=0;b<f;++b,++g)p[c[g]]=i[b](v)}):(c||He("Missing output field names."),d=function(p){for(var m=0,g;m<a;++m)g=r.get(n[m](p)),p[c[m]]=g??s}),o?u=t.reflow(!0):(h=n.some(p=>t.modified(p.fields)),l|=h?t.MOD:0),t.visit(l,d),u.modifies(c)}});function x2e(e){Nr.call(this,null,tyt,e)}bt(x2e,Nr);function tyt(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let r=1/0,i=-1/0,s,o;for(s=0;s<n;++s)o=t[s],o[0]<r&&(r=o[0]),o[1]>i&&(i=o[1]);return[r,i]}function E2e(e){Nr.call(this,null,nyt,e)}bt(E2e,Nr);function nyt(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function _2e(e){qe.call(this,null,e)}bt(_2e,qe,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function TG(e){_0.call(this,e)}TG.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:bS,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};bt(TG,_0,{_transform:_0.prototype.transform,transform(e,t){return this._transform(ryt(e,t),t)}});function ryt(e,t){const n=e.field,r=e.value,i=(e.op==="count"?"__count__":e.op)||"sum",s=Vo(n).concat(Vo(r)),o=syt(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:o.map(()=>i),fields:o.map(a=>iyt(a,n,r,s)),as:o.map(a=>a+""),modified:e.modified.bind(e)}}function iyt(e,t,n,r){return wl(i=>t(i)===e?n(i):NaN,r,e+"")}function syt(e,t,n){const r={},i=[];return n.visit(n.SOURCE,s=>{const o=e(s);r[o]||(r[o]=1,i.push(o))}),i.sort(eE),t?i.slice(0,t):i}function T2e(e){n4.call(this,e)}bt(T2e,n4,{transform(e,t){const n=e.subflow,r=e.field,i=s=>this.subflow(Kt(s),n,t,s);return(e.modified("field")||r&&t.modified(Vo(r)))&&He("PreFacet does not support field modification."),this.initTargets(),r?(t.visit(t.MOD,s=>{const o=i(s);r(s).forEach(a=>o.mod(a))}),t.visit(t.ADD,s=>{const o=i(s);r(s).forEach(a=>o.add(hr(a)))}),t.visit(t.REM,s=>{const o=i(s);r(s).forEach(a=>o.rem(a))})):(t.visit(t.MOD,s=>i(s).mod(s)),t.visit(t.ADD,s=>i(s).add(s)),t.visit(t.REM,s=>i(s).rem(s))),t.clean()&&t.runAfter(()=>this.clean()),t}});function CG(e){qe.call(this,null,e)}CG.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};bt(CG,qe,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=p2e(e.fields,e.as||[]),s=r?(a,l)=>oyt(a,l,r,i):U$;let o;return this.value?o=this.value:(t=t.addAll(),o=this.value={}),t.visit(t.REM,a=>{const l=Kt(a);n.rem.push(o[l]),o[l]=null}),t.visit(t.ADD,a=>{const l=s(a,hr({}));o[Kt(a)]=l,n.add.push(l)}),t.visit(t.MOD,a=>{n.mod.push(s(a,o[Kt(a)]))}),n}});function oyt(e,t,n,r){for(let i=0,s=n.length;i<s;++i)t[r[i]]=n[i](e);return t}function C2e(e){qe.call(this,null,e)}bt(C2e,qe,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function SG(e){qe.call(this,null,e)}SG.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const ayt=1e-14;bt(SG,qe,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const i=t.materialize(t.SOURCE).source,s=fG(i,e.groupby,e.field),o=(e.groupby||[]).map(Ci),a=[],l=e.step||.01,u=e.probs||va(l/2,1-ayt,l),c=u.length;return s.forEach(d=>{const f=JV(d,u);for(let h=0;h<c;++h){const p={};for(let m=0;m<o.length;++m)p[o[m]]=d.dims[m];p[r[0]]=u[h],p[r[1]]=f[h],a.push(hr(p))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=a,n}});function S2e(e){qe.call(this,null,e)}bt(S2e,qe,{transform(e,t){let n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,i=>{const s=Kt(i);n.rem.push(r[s]),r[s]=null}),t.visit(t.ADD,i=>{const s=KV(i);r[Kt(i)]=s,n.add.push(s)}),t.visit(t.MOD,i=>{const s=r[Kt(i)];for(const o in i)s[o]=i[o],n.modifies(o);n.mod.push(s)})),n}});function AG(e){qe.call(this,[],e),this.count=0}AG.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};bt(AG,qe,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.modified("size"),i=e.size,s=this.value.reduce((c,d)=>(c[Kt(d)]=1,c),{});let o=this.value,a=this.count,l=0;function u(c){let d,f;o.length<i?o.push(c):(f=~~((a+1)*nu()),f<o.length&&f>=l&&(d=o[f],s[Kt(d)]&&n.rem.push(d),o[f]=c)),++a}if(t.rem.length&&(t.visit(t.REM,c=>{const d=Kt(c);s[d]&&(s[d]=-1,n.rem.push(c)),--a}),o=o.filter(c=>s[Kt(c)]!==-1)),(t.rem.length||r)&&o.length<i&&t.source&&(l=a=o.length,t.visit(t.SOURCE,c=>{s[Kt(c)]||u(c)}),l=-1),r&&o.length>i){const c=o.length-i;for(let d=0;d<c;++d)s[Kt(o[d])]=-1,n.rem.push(o[d]);o=o.slice(c)}return t.mod.length&&t.visit(t.MOD,c=>{s[Kt(c)]&&n.mod.push(c)}),t.add.length&&t.visit(t.ADD,u),(t.add.length||l<0)&&(n.add=o.filter(c=>!s[Kt(c)])),this.count=a,this.value=n.source=o,n}});function kG(e){qe.call(this,null,e)}kG.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};bt(kG,qe,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),r=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=va(e.start,e.stop,e.step||1).map(i=>{const s={};return s[r]=i,hr(s)}),n.add=t.add.concat(this.value),n}});function A2e(e){qe.call(this,null,e),this.modified(!0)}bt(A2e,qe,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function IG(e){qe.call(this,null,e)}const k2e=["unit0","unit1"];IG.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:NV,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:k2e}]};bt(IG,qe,{transform(e,t){const n=e.field,r=e.interval!==!1,i=e.timezone==="utc",s=this._floor(e,t),o=(i?iE:rE)(s.unit).offset,a=e.as||k2e,l=a[0],u=a[1],c=s.step;let d=s.start||1/0,f=s.stop||-1/0,h=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(Vo(n)))&&(t=t.reflow(!0),h=t.SOURCE,d=1/0,f=-1/0),t.visit(h,p=>{const m=n(p);let g,b;m==null?(p[l]=null,r&&(p[u]=null)):(p[l]=g=b=s(m),r&&(p[u]=b=o(g,c)),g<d&&(d=g),b>f&&(f=b))}),s.start=d,s.stop=f,t.modifies(r?a:l)},_floor(e,t){const n=e.timezone==="utc",{units:r,step:i}=e.units?{units:e.units,step:e.step||1}:C_e({extent:e.extent||Zc(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),s=OV(r),o=this.value||{},a=(n?w_e:b_e)(s,i);return a.unit=Rn(s),a.units=s,a.step=i,a.start=o.start,a.stop=o.stop,this.value=a}});function I2e(e){qe.call(this,tE(),e)}bt(I2e,qe,{transform(e,t){const n=t.dataflow,r=e.field,i=this.value,s=a=>i.set(r(a),a);let o=!0;return e.modified("field")||t.modified(r.fields)?(i.clear(),t.visit(t.SOURCE,s)):t.changed()?(t.visit(t.REM,a=>i.delete(r(a))),t.visit(t.ADD,s)):o=!1,this.modified(o),i.empty>n.cleanThreshold&&n.runAfter(i.clean),t.fork()}});function R2e(e){qe.call(this,null,e)}bt(R2e,qe,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(Wv(e.sort)):t.source).map(e.field))}});function lyt(e,t,n,r){const i=tC[e](t,n);return{init:i.init||qm,update:function(s,o){o[r]=i.next(s)}}}const tC={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){const e=tC.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,r=t.compare;let i=t.index;if(e<i){for(;i+1<n.length&&!r(n[i],n[i+1]);)++i;e=i}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||He("ntile num must be greater than zero.");const n=tC.cume_dist(),r=n.next;return{init:n.init,next:i=>Math.ceil(t*r(i))}},lag:function(e,t){return t=+t||1,{next:n=>{const r=n.index-t;return r>=0?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||He("nth_value nth must be greater than zero."),{next:n=>{const r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const r=e(n.data[n.index]);return r!=null?t=r:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:r=>{const i=r.data;return r.index<=n?t:(n=uyt(e,i,r.index))<0?(n=i.length,t=null):t=e(i[n])}}}};function uyt(e,t,n){for(let r=t.length;n<r;++n)if(e(t[n])!=null)return n;return-1}const cyt=Object.keys(tC);function D2e(e){const t=St(e.ops),n=St(e.fields),r=St(e.params),i=St(e.aggregate_params),s=St(e.as),o=this.outputs=[],a=this.windows=[],l={},u={},c=[],d=[];let f=!0;function h(p){St(Vo(p)).forEach(m=>l[m]=1)}h(e.sort),t.forEach((p,m)=>{const g=n[m],b=r[m],v=i[m]||null,x=Ci(g),E=o2e(p,x,s[m]);if(h(g),o.push(E),It(tC,p))a.push(lyt(p,g,b,E));else{if(g==null&&p!=="count"&&He("Null aggregate field specified."),p==="count"){c.push(E);return}f=!1;let _=u[x];_||(_=u[x]=[],_.field=g,d.push(_)),_.push(a2e(p,v,E))}}),(c.length||d.length)&&(this.cell=dyt(d,c,f)),this.inputs=Object.keys(l)}const P2e=D2e.prototype;P2e.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};P2e.update=function(e,t){const n=this.cell,r=this.windows,i=e.data,s=r&&r.length;let o;if(n){for(o=e.p0;o<e.i0;++o)n.rem(i[o]);for(o=e.p1;o<e.i1;++o)n.add(i[o]);n.set(t)}for(o=0;o<s;++o)r[o].update(e,t)};function dyt(e,t,n){e=e.map(l=>u2e(l,l.field));const r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,s=r.agg=Array(i),o=0;o<i;++o)s[o]=new e[o](r);if(r.store)var a=r.data=new oG;return r.add=function(l){if(r.num+=1,!n){a&&a.add(l);for(let u=0;u<i;++u)s[u].add(s[u].get(l),l)}},r.rem=function(l){if(r.num-=1,!n){a&&a.rem(l);for(let u=0;u<i;++u)s[u].rem(s[u].get(l),l)}},r.set=function(l){let u,c;for(a&&a.values(),u=0,c=t.length;u<c;++u)l[t[u]]=r.num;if(!n)for(u=0,c=s.length;u<c;++u)s[u].set(l)},r.init=function(){r.num=0,a&&a.reset();for(let l=0;l<i;++l)s[l].init()},r}function RG(e){qe.call(this,{},e),this._mlen=0,this._mods=[]}RG.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:cyt.concat(bS)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};bt(RG,qe,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),r=Wv(e.sort),i=ZB(e.groupby),s=a=>this.group(i(a));let o=this.state;(!o||n)&&(o=this.state=new D2e(e)),n||t.modified(o.inputs)?(this.value={},t.visit(t.SOURCE,a=>s(a).add(a))):(t.visit(t.REM,a=>s(a).remove(a)),t.visit(t.ADD,a=>s(a).add(a)));for(let a=0,l=this._mlen;a<l;++a)fyt(this._mods[a],o,r,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(o.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=c2e(Kt),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function fyt(e,t,n,r){const i=r.sort,s=i&&!r.ignorePeers,o=r.frame||[null,0],a=e.data(n),l=a.length,u=s?Vx(i):null,c={i0:0,i1:0,p0:0,p1:0,index:0,data:a,compare:i||Jo(-1)};t.init();for(let d=0;d<l;++d)hyt(c,o,d,l),s&&pyt(c,u),t.update(c,a[d])}function hyt(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function pyt(e,t){const n=e.i0,r=e.i1-1,i=e.compare,s=e.data,o=s.length-1;n>0&&!i(s[n],s[n-1])&&(e.i0=t.left(s,s[n])),r<o&&!i(s[r],s[r+1])&&(e.i1=t.right(s,s[r]))}const myt=Object.freeze(Object.defineProperty({__proto__:null,aggregate:_0,bin:aG,collect:lG,compare:d2e,countpattern:uG,cross:cG,density:dG,dotbin:hG,expression:g2e,extent:pG,facet:n4,field:y2e,filter:gG,flatten:yG,fold:vG,formula:bG,generate:v2e,impute:wG,joinaggregate:xG,kde:EG,key:b2e,load:w2e,lookup:_G,multiextent:x2e,multivalues:E2e,params:_2e,pivot:TG,prefacet:T2e,project:CG,proxy:C2e,quantile:SG,relay:S2e,sample:AG,sequence:kG,sieve:A2e,subflow:mG,timeunit:IG,tupleindex:I2e,values:R2e,window:RG},Symbol.toStringTag,{value:"Module"}));function l0(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const gyt=()=>typeof Image<"u"?Image:null;function r4(e,t,n){const r=e-t+n*2;return e?r>0?r:1:0}const yyt="identity",qw="linear",Sp="log",wS="pow",xS="sqrt",i4="symlog",tv="time",nv="utc",yf="sequential",aE="diverging",Hw="quantile",s4="quantize",o4="threshold",DG="ordinal",e7="point",N2e="band",PG="bin-ordinal",vs="continuous",ES="discrete",_S="discretizing",Xu="interpolating",NG="temporal";function vyt(e){return function(t){let n=t[0],r=t[1],i;return r<n&&(i=n,n=r,r=i),[e.invert(n),e.invert(r)]}}function byt(e){return function(t){const n=e.range();let r=t[0],i=t[1],s=-1,o,a,l,u;for(i<r&&(a=r,r=i,i=a),l=0,u=n.length;l<u;++l)n[l]>=r&&n[l]<=i&&(s<0&&(s=l),o=l);if(!(s<0))return r=e.invertExtent(n[s]),i=e.invertExtent(n[o]),[r[0]===void 0?r[1]:r[0],i[1]===void 0?i[0]:i[1]]}}function OG(){const e=a$().unknown(void 0),t=e.domain,n=e.range;let r=[0,1],i,s,o=!1,a=0,l=0,u=.5;delete e.unknown;function c(){const d=t().length,f=r[1]<r[0],h=r[1-f],p=r4(d,a,l);let m=r[f-0];i=(h-m)/(p||1),o&&(i=Math.floor(i)),m+=(h-m-i*(d-a))*u,s=i*(1-a),o&&(m=Math.round(m),s=Math.round(s));const g=va(d).map(b=>m+i*b);return n(f?g.reverse():g)}return e.domain=function(d){return arguments.length?(t(d),c()):t()},e.range=function(d){return arguments.length?(r=[+d[0],+d[1]],c()):r.slice()},e.rangeRound=function(d){return r=[+d[0],+d[1]],o=!0,c()},e.bandwidth=function(){return s},e.step=function(){return i},e.round=function(d){return arguments.length?(o=!!d,c()):o},e.padding=function(d){return arguments.length?(l=Math.max(0,Math.min(1,d)),a=l,c()):a},e.paddingInner=function(d){return arguments.length?(a=Math.max(0,Math.min(1,d)),c()):a},e.paddingOuter=function(d){return arguments.length?(l=Math.max(0,Math.min(1,d)),c()):l},e.align=function(d){return arguments.length?(u=Math.max(0,Math.min(1,d)),c()):u},e.invertRange=function(d){if(d[0]==null||d[1]==null)return;const f=r[1]<r[0],h=f?n().reverse():n(),p=h.length-1;let m=+d[0],g=+d[1],b,v,x;if(!(m!==m||g!==g)&&(g<m&&(x=m,m=g,g=x),!(g<h[0]||m>r[1-f])))return b=Math.max(0,v0(h,m)-1),v=m===g?b:v0(h,g)-1,m-h[b]>s+1e-10&&++b,f&&(x=b,b=p-v,v=p-x),b>v?void 0:t().slice(b,v+1)},e.invert=function(d){const f=e.invertRange([d,d]);return f&&f[0]},e.copy=function(){return OG().domain(t()).range(r).round(o).paddingInner(a).paddingOuter(l).align(u)},c()}function O2e(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return O2e(t())},e}function wyt(){return O2e(OG().paddingInner(1))}var xyt=Array.prototype.map;function Eyt(e){return xyt.call(e,yo)}const _yt=Array.prototype.slice;function $2e(){let e=[],t=[];function n(r){return r==null||r!==r?void 0:t[(v0(e,r)-1)%t.length]}return n.domain=function(r){return arguments.length?(e=Eyt(r),n):e.slice()},n.range=function(r){return arguments.length?(t=_yt.call(r),n):t.slice()},n.tickFormat=function(r,i){return Fwe(e[0],Rn(e),r??10,i)},n.copy=function(){return $2e().domain(n.domain()).range(n.range())},n}const BP=new Map,M2e=Symbol("vega_scale");function L2e(e){return e[M2e]=!0,e}function t7(e){return e&&e[M2e]===!0}function Tyt(e,t,n){const r=function(){const s=t();return s.invertRange||(s.invertRange=s.invert?vyt(s):s.invertExtent?byt(s):void 0),s.type=e,L2e(s)};return r.metadata=ed(St(n)),r}function Vn(e,t,n){return arguments.length>1?(BP.set(e,Tyt(e,t,n)),this):F2e(e)?BP.get(e):void 0}Vn(yyt,jwe);Vn(qw,u$,vs);Vn(Sp,zwe,[vs,Sp]);Vn(wS,jW,vs);Vn(xS,Yat,vs);Vn(i4,Uwe,vs);Vn(tv,uut,[vs,NG]);Vn(nv,cut,[vs,NG]);Vn(yf,HW,[vs,Xu]);Vn(`${yf}-${qw}`,HW,[vs,Xu]);Vn(`${yf}-${Sp}`,exe,[vs,Xu,Sp]);Vn(`${yf}-${wS}`,WW,[vs,Xu]);Vn(`${yf}-${xS}`,dut,[vs,Xu]);Vn(`${yf}-${i4}`,txe,[vs,Xu]);Vn(`${aE}-${qw}`,nxe,[vs,Xu]);Vn(`${aE}-${Sp}`,rxe,[vs,Xu,Sp]);Vn(`${aE}-${wS}`,VW,[vs,Xu]);Vn(`${aE}-${xS}`,fut,[vs,Xu]);Vn(`${aE}-${i4}`,ixe,[vs,Xu]);Vn(Hw,qwe,[_S,Hw]);Vn(s4,K2,_S);Vn(o4,Hwe,_S);Vn(PG,$2e,[ES,_S]);Vn(DG,a$,ES);Vn(N2e,OG,ES);Vn(e7,wyt,ES);function F2e(e){return BP.has(e)}function Gv(e,t){const n=BP.get(e);return n&&n.metadata[t]}function $G(e){return Gv(e,vs)}function Ww(e){return Gv(e,ES)}function n7(e){return Gv(e,_S)}function j2e(e){return Gv(e,Sp)}function Cyt(e){return Gv(e,NG)}function B2e(e){return Gv(e,Xu)}function z2e(e){return Gv(e,Hw)}const Syt=["clamp","base","constant","exponent"];function U2e(e,t){const n=t[0],r=Rn(t)-n;return function(i){return e(n+i*r)}}function a4(e,t,n){return vW(LG(t||"rgb",n),e)}function q2e(e,t){const n=new Array(t),r=t+1;for(let i=0;i<t;)n[i]=e(++i/r);return n}function MG(e,t,n){const r=n-t;let i,s,o;return!r||!Number.isFinite(r)?Jo(.5):(i=(s=e.type).indexOf("-"),s=i<0?s:s.slice(i+1),o=Vn(s)().domain([t,n]).range([0,1]),Syt.forEach(a=>e[a]?o[a](e[a]()):0),o)}function LG(e,t){const n=ort[Ayt(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function Ayt(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const kyt={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},Iyt={accent:put,category10:hut,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:mut,observable10:gut,paired:yut,pastel1:vut,pastel2:but,set1:wut,set2:xut,set3:Eut,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"};function H2e(e){if(Ge(e))return e;const t=e.length/6|0,n=new Array(t);for(let r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}function W2e(e,t){for(const n in e)FG(n,t(e[n]))}const xae={};W2e(Iyt,H2e);W2e(kyt,e=>a4(H2e(e)));function FG(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(xae[e]=t,this):xae[e]}const $3="symbol",Ryt="discrete",Dyt="gradient",Pyt=e=>Ge(e)?e.map(t=>String(t)):String(e),Nyt=(e,t)=>e[1]-t[1],Oyt=(e,t)=>t[1]-e[1];function jG(e,t,n){let r;return Zn(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(nE(e.domain())/n||1)+1))),At(t)&&(r=t.step,t=t.interval),Tt(t)&&(t=e.type===tv?rE(t):e.type==nv?iE(t):He("Only time and utc scales accept interval strings."),r&&(t=t.every(r))),t}function V2e(e,t,n){let r=e.range(),i=r[0],s=Rn(r),o=Nyt;if(i>s&&(r=s,s=i,i=r,o=Oyt),i=Math.floor(i),s=Math.ceil(s),t=t.map(a=>[a,e(a)]).filter(a=>i<=a[1]&&a[1]<=s).sort(o).map(a=>a[0]),n>0&&t.length>1){const a=[t[0],Rn(t)];for(;t.length>n&&t.length>=3;)t=t.filter((l,u)=>!(u%2));t.length<3&&(t=a)}return t}function BG(e,t){return e.bins?V2e(e,e.bins,t):e.ticks?e.ticks(t):e.domain()}function G2e(e,t,n,r,i,s){const o=t.type;let a=Pyt;if(o===tv||i===tv)a=e.timeFormat(r);else if(o===nv||i===nv)a=e.utcFormat(r);else if(j2e(o)){const l=e.formatFloat(r);if(s||t.bins)a=l;else{const u=Y2e(t,n,!1);a=c=>u(c)?l(c):""}}else if(t.tickFormat){const l=t.domain();a=e.formatSpan(l[0],l[l.length-1],n,r)}else r&&(a=e.format(r));return a}function Y2e(e,t,n){const r=BG(e,t),i=e.base(),s=Math.log(i),o=Math.max(1,i*t/r.length),a=l=>{let u=l/Math.pow(i,Math.round(Math.log(l)/s));return u*i<i-.5&&(u*=i),u<=o};return n?r.filter(a):a}const r7={[Hw]:"quantiles",[s4]:"thresholds",[o4]:"domain"},K2e={[Hw]:"quantiles",[s4]:"domain"};function X2e(e,t){return e.bins?Lyt(e.bins):e.type===Sp?Y2e(e,t,!0):r7[e.type]?Myt(e[r7[e.type]]()):BG(e,t)}function $yt(e,t,n){const r=t[K2e[t.type]](),i=r.length;let s=i>1?r[1]-r[0]:r[0],o;for(o=1;o<i;++o)s=Math.min(s,r[o]-r[o-1]);return e.formatSpan(0,s,3*10,n)}function Myt(e){const t=[-1/0].concat(e);return t.max=1/0,t}function Lyt(e){const t=e.slice(0,-1);return t.max=Rn(e),t}const Fyt=e=>r7[e.type]||e.bins;function Q2e(e,t,n,r,i,s,o){const a=K2e[t.type]&&s!==tv&&s!==nv?$yt(e,t,i):G2e(e,t,n,i,s,o);return r===$3&&Fyt(t)?jyt(a):r===Ryt?Byt(a):zyt(a)}const jyt=e=>(t,n,r)=>{const i=Eae(r[n+1],Eae(r.max,1/0)),s=_ae(t,e),o=_ae(i,e);return s&&o?s+"  "+o:o?"< "+o:" "+s},Eae=(e,t)=>e??t,Byt=e=>(t,n)=>n?e(t):null,zyt=e=>t=>e(t),_ae=(e,t)=>Number.isFinite(e)?t(e):null;function Uyt(e){const t=e.domain(),n=t.length-1;let r=+t[0],i=+Rn(t),s=i-r;if(e.type===o4){const o=n?s/n:.1;r-=o,i+=o,s=i-r}return o=>(o-r)/s}function qyt(e,t,n,r){const i=r||t.type;return Tt(n)&&Cyt(i)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&i===tv?e.timeFormat("%A, %d %B %Y, %X"):!n&&i===nv?e.utcFormat("%A, %d %B %Y, %X UTC"):Q2e(e,t,5,null,n,r,!0)}function J2e(e,t,n){n=n||{};const r=Math.max(3,n.maxlen||7),i=qyt(e,t,n.format,n.formatType);if(n7(t.type)){const s=X2e(t).slice(1).map(i),o=s.length;return`${o} boundar${o===1?"y":"ies"}: ${s.join(", ")}`}else if(Ww(t.type)){const s=t.domain(),o=s.length,a=o>r?s.slice(0,r-2).map(i).join(", ")+", ending with "+s.slice(-1).map(i):s.map(i).join(", ");return`${o} value${o===1?"":"s"}: ${a}`}else{const s=t.domain();return`values from ${i(s[0])} to ${i(Rn(s))}`}}let Z2e=0;function Hyt(){Z2e=0}const zP="p_";function zG(e){return e&&e.gradient}function eTe(e,t,n){const r=e.gradient;let i=e.id,s=r==="radial"?zP:"";return i||(i=e.id="gradient_"+Z2e++,r==="radial"?(e.x1=Fd(e.x1,.5),e.y1=Fd(e.y1,.5),e.r1=Fd(e.r1,0),e.x2=Fd(e.x2,.5),e.y2=Fd(e.y2,.5),e.r2=Fd(e.r2,.5),s=zP):(e.x1=Fd(e.x1,0),e.y1=Fd(e.y1,0),e.x2=Fd(e.x2,1),e.y2=Fd(e.y2,0))),t[i]=e,"url("+(n||"")+"#"+s+i+")"}function Fd(e,t){return e??t}function UG(e,t){var n=[],r;return r={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(i,s){return n.push({offset:i,color:s}),r}}}const Tae={basis:{curve:Gut},"basis-closed":{curve:Yut},"basis-open":{curve:Kut},bundle:{curve:Xut,tension:"beta",value:.85},cardinal:{curve:Qut,tension:"tension",value:0},"cardinal-open":{curve:Zut,tension:"tension",value:0},"cardinal-closed":{curve:Jut,tension:"tension",value:0},"catmull-rom":{curve:ect,tension:"alpha",value:.5},"catmull-rom-closed":{curve:tct,tension:"alpha",value:.5},"catmull-rom-open":{curve:nct,tension:"alpha",value:.5},linear:{curve:YW},"linear-closed":{curve:rct},monotone:{horizontal:sct,vertical:ict},natural:{curve:oct},step:{curve:act},"step-after":{curve:uct},"step-before":{curve:lct}};function qG(e,t,n){var r=It(Tae,e)&&Tae[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&n!=null&&(i=i[r.tension](n))),i}const Wyt={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},Vyt=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,Gyt=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,Yyt=/^((\s+,?\s*)|(,\s*))/,Kyt=/^[01]/;function rv(e){const t=[];return(e.match(Vyt)||[]).forEach(r=>{let i=r[0];const s=i.toLowerCase(),o=Wyt[s],a=Xyt(s,o,r.slice(1).trim()),l=a.length;if(l<o||l&&l%o!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([i,...a.slice(0,o)]),l!==o){s==="m"&&(i=i==="M"?"L":"l");for(let u=o;u<l;u+=o)t.push([i,...a.slice(u,u+o)])}}),t}function Xyt(e,t,n){const r=[];for(let i=0;t&&i<n.length;)for(let s=0;s<t;++s){const o=e==="a"&&(s===3||s===4)?Kyt:Gyt,a=n.slice(i).match(o);if(a===null)throw Error("Invalid SVG path, incorrect parameter type");i+=a[0].length,r.push(+a[0]);const l=n.slice(i).match(Yyt);l!==null&&(i+=l[0].length)}return r}const T0=Math.PI/180,Qyt=1e-14,oy=Math.PI/2,tf=Math.PI*2,J1=Math.sqrt(3)/2;var kL={},IL={},tTe=[].join;function Jyt(e,t,n,r,i,s,o,a,l){const u=tTe.call(arguments);if(kL[u])return kL[u];const c=o*T0,d=Math.sin(c),f=Math.cos(c);n=Math.abs(n),r=Math.abs(r);const h=f*(a-e)*.5+d*(l-t)*.5,p=f*(l-t)*.5-d*(a-e)*.5;let m=h*h/(n*n)+p*p/(r*r);m>1&&(m=Math.sqrt(m),n*=m,r*=m);const g=f/n,b=d/n,v=-d/r,x=f/r,E=g*a+b*l,_=v*a+x*l,C=g*e+b*t,S=v*e+x*t;let R=1/((C-E)*(C-E)+(S-_)*(S-_))-.25;R<0&&(R=0);let O=Math.sqrt(R);s==i&&(O=-O);const N=.5*(E+C)-O*(S-_),L=.5*(_+S)+O*(C-E),$=Math.atan2(_-L,E-N);let H=Math.atan2(S-L,C-N)-$;H<0&&s===1?H+=tf:H>0&&s===0&&(H-=tf);const Y=Math.ceil(Math.abs(H/(oy+.001))),J=[];for(let K=0;K<Y;++K){const Z=$+K*H/Y,U=$+(K+1)*H/Y;J[K]=[N,L,Z,U,n,r,d,f]}return kL[u]=J}function Zyt(e){const t=tTe.call(e);if(IL[t])return IL[t];var n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7];const c=u*o,d=-l*a,f=l*o,h=u*a,p=Math.cos(i),m=Math.sin(i),g=Math.cos(s),b=Math.sin(s),v=.5*(s-i),x=Math.sin(v*.5),E=8/3*x*x/Math.sin(v),_=n+p-E*m,C=r+m+E*p,S=n+g,k=r+b,R=S+E*b,O=k-E*g;return IL[t]=[c*_+d*C,f*_+h*C,c*R+d*O,f*R+h*O,c*S+d*k,f*S+h*k]}const gu=["l",0,0,0,0,0,0,0];function evt(e,t,n){const r=gu[0]=e[0];if(r==="a"||r==="A")gu[1]=t*e[1],gu[2]=n*e[2],gu[3]=e[3],gu[4]=e[4],gu[5]=e[5],gu[6]=t*e[6],gu[7]=n*e[7];else if(r==="h"||r==="H")gu[1]=t*e[1];else if(r==="v"||r==="V")gu[1]=n*e[1];else for(var i=1,s=e.length;i<s;++i)gu[i]=(i%2==1?t:n)*e[i];return gu}function Vw(e,t,n,r,i,s){var o,a=null,l=0,u=0,c=0,d=0,f,h,p,m,g=0,b=0;n==null&&(n=0),r==null&&(r=0),i==null&&(i=1),s==null&&(s=i),e.beginPath&&e.beginPath();for(var v=0,x=t.length;v<x;++v){switch(o=t[v],(i!==1||s!==1)&&(o=evt(o,i,s)),o[0]){case"l":l+=o[1],u+=o[2],e.lineTo(l+n,u+r);break;case"L":l=o[1],u=o[2],e.lineTo(l+n,u+r);break;case"h":l+=o[1],e.lineTo(l+n,u+r);break;case"H":l=o[1],e.lineTo(l+n,u+r);break;case"v":u+=o[1],e.lineTo(l+n,u+r);break;case"V":u=o[1],e.lineTo(l+n,u+r);break;case"m":l+=o[1],u+=o[2],g=l,b=u,e.moveTo(l+n,u+r);break;case"M":l=o[1],u=o[2],g=l,b=u,e.moveTo(l+n,u+r);break;case"c":f=l+o[5],h=u+o[6],c=l+o[3],d=u+o[4],e.bezierCurveTo(l+o[1]+n,u+o[2]+r,c+n,d+r,f+n,h+r),l=f,u=h;break;case"C":l=o[5],u=o[6],c=o[3],d=o[4],e.bezierCurveTo(o[1]+n,o[2]+r,c+n,d+r,l+n,u+r);break;case"s":f=l+o[3],h=u+o[4],c=2*l-c,d=2*u-d,e.bezierCurveTo(c+n,d+r,l+o[1]+n,u+o[2]+r,f+n,h+r),c=l+o[1],d=u+o[2],l=f,u=h;break;case"S":f=o[3],h=o[4],c=2*l-c,d=2*u-d,e.bezierCurveTo(c+n,d+r,o[1]+n,o[2]+r,f+n,h+r),l=f,u=h,c=o[1],d=o[2];break;case"q":f=l+o[3],h=u+o[4],c=l+o[1],d=u+o[2],e.quadraticCurveTo(c+n,d+r,f+n,h+r),l=f,u=h;break;case"Q":f=o[3],h=o[4],e.quadraticCurveTo(o[1]+n,o[2]+r,f+n,h+r),l=f,u=h,c=o[1],d=o[2];break;case"t":f=l+o[1],h=u+o[2],a[0].match(/[QqTt]/)===null?(c=l,d=u):a[0]==="t"?(c=2*l-p,d=2*u-m):a[0]==="q"&&(c=2*l-c,d=2*u-d),p=c,m=d,e.quadraticCurveTo(c+n,d+r,f+n,h+r),l=f,u=h,c=l+o[1],d=u+o[2];break;case"T":f=o[1],h=o[2],c=2*l-c,d=2*u-d,e.quadraticCurveTo(c+n,d+r,f+n,h+r),l=f,u=h;break;case"a":Cae(e,l+n,u+r,[o[1],o[2],o[3],o[4],o[5],o[6]+l+n,o[7]+u+r]),l+=o[6],u+=o[7];break;case"A":Cae(e,l+n,u+r,[o[1],o[2],o[3],o[4],o[5],o[6]+n,o[7]+r]),l=o[6],u=o[7];break;case"z":case"Z":l=g,u=b,e.closePath();break}a=o}}function Cae(e,t,n,r){const i=Jyt(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n);for(let s=0;s<i.length;++s){const o=Zyt(i[s]);e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5])}}const Sae=.5773502691896257,Aae={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,tf)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,i=n/2.5,s=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-s),e.lineTo(i,-s),e.lineTo(0,-n),e.lineTo(-i,-s),e.lineTo(-r,-s),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=J1*n,i=r-n*Sae,s=n/4;e.moveTo(0,-r-i),e.lineTo(-s,r-i),e.lineTo(s,r-i),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=J1*n,i=r-n*Sae;e.moveTo(0,-r-i),e.lineTo(-n,r-i),e.lineTo(n,r-i),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=J1*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=J1*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=J1*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=J1*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function nTe(e){return It(Aae,e)?Aae[e]:tvt(e)}var RL={};function tvt(e){if(!It(RL,e)){const t=rv(e);RL[e]={draw:function(n,r){Vw(n,t,0,0,Math.sqrt(r)/2)}}}return RL[e]}const wm=.448084975506;function nvt(e){return e.x}function rvt(e){return e.y}function ivt(e){return e.width}function svt(e){return e.height}function bh(e){return typeof e=="function"?e:()=>+e}function eI(e,t,n){return Math.max(t,Math.min(e,n))}function rTe(){var e=nvt,t=rvt,n=ivt,r=svt,i=bh(0),s=i,o=i,a=i,l=null;function u(c,d,f){var h,p=d??+e.call(this,c),m=f??+t.call(this,c),g=+n.call(this,c),b=+r.call(this,c),v=Math.min(g,b)/2,x=eI(+i.call(this,c),0,v),E=eI(+s.call(this,c),0,v),_=eI(+o.call(this,c),0,v),C=eI(+a.call(this,c),0,v);if(l||(l=h=t$()),x<=0&&E<=0&&_<=0&&C<=0)l.rect(p,m,g,b);else{var S=p+g,k=m+b;l.moveTo(p+x,m),l.lineTo(S-E,m),l.bezierCurveTo(S-wm*E,m,S,m+wm*E,S,m+E),l.lineTo(S,k-C),l.bezierCurveTo(S,k-wm*C,S-wm*C,k,S-C,k),l.lineTo(p+_,k),l.bezierCurveTo(p+wm*_,k,p,k-wm*_,p,k-_),l.lineTo(p,m+x),l.bezierCurveTo(p,m+wm*x,p+wm*x,m,p+x,m),l.closePath()}if(h)return l=null,h+""||null}return u.x=function(c){return arguments.length?(e=bh(c),u):e},u.y=function(c){return arguments.length?(t=bh(c),u):t},u.width=function(c){return arguments.length?(n=bh(c),u):n},u.height=function(c){return arguments.length?(r=bh(c),u):r},u.cornerRadius=function(c,d,f,h){return arguments.length?(i=bh(c),s=d!=null?bh(d):i,a=f!=null?bh(f):i,o=h!=null?bh(h):s,u):i},u.context=function(c){return arguments.length?(l=c??null,u):l},u}function iTe(){var e,t,n,r,i=null,s,o,a,l;function u(d,f,h){const p=h/2;if(s){var m=a-f,g=d-o;if(m||g){var b=Math.hypot(m,g),v=(m/=b)*l,x=(g/=b)*l,E=Math.atan2(g,m);i.moveTo(o-v,a-x),i.lineTo(d-m*p,f-g*p),i.arc(d,f,p,E-Math.PI,E),i.lineTo(o+v,a+x),i.arc(o,a,l,E,E+Math.PI)}else i.arc(d,f,p,0,tf);i.closePath()}else s=1;o=d,a=f,l=p}function c(d){var f,h=d.length,p,m=!1,g;for(i==null&&(i=g=t$()),f=0;f<=h;++f)!(f<h&&r(p=d[f],f,d))===m&&(m=!m)&&(s=0),m&&u(+e(p,f,d),+t(p,f,d),+n(p,f,d));if(g)return i=null,g+""||null}return c.x=function(d){return arguments.length?(e=d,c):e},c.y=function(d){return arguments.length?(t=d,c):t},c.size=function(d){return arguments.length?(n=d,c):n},c.defined=function(d){return arguments.length?(r=d,c):r},c.context=function(d){return arguments.length?(d==null?i=null:i=d,c):i},c}function TS(e,t){return e??t}const CS=e=>e.x||0,SS=e=>e.y||0,ovt=e=>e.width||0,avt=e=>e.height||0,lvt=e=>(e.x||0)+(e.width||0),uvt=e=>(e.y||0)+(e.height||0),cvt=e=>e.startAngle||0,dvt=e=>e.endAngle||0,fvt=e=>e.padAngle||0,hvt=e=>e.innerRadius||0,pvt=e=>e.outerRadius||0,mvt=e=>e.cornerRadius||0,gvt=e=>TS(e.cornerRadiusTopLeft,e.cornerRadius)||0,yvt=e=>TS(e.cornerRadiusTopRight,e.cornerRadius)||0,vvt=e=>TS(e.cornerRadiusBottomRight,e.cornerRadius)||0,bvt=e=>TS(e.cornerRadiusBottomLeft,e.cornerRadius)||0,wvt=e=>TS(e.size,64),xvt=e=>e.size||1,l4=e=>e.defined!==!1,Evt=e=>nTe(e.shape||"circle"),_vt=Hut().startAngle(cvt).endAngle(dvt).padAngle(fvt).innerRadius(hvt).outerRadius(pvt).cornerRadius(mvt),Tvt=dxe().x(CS).y1(SS).y0(uvt).defined(l4),Cvt=dxe().y(SS).x1(CS).x0(lvt).defined(l4),Svt=cxe().x(CS).y(SS).defined(l4),Avt=rTe().x(CS).y(SS).width(ovt).height(avt).cornerRadius(gvt,yvt,vvt,bvt),kvt=Vut().type(Evt).size(wvt),Ivt=iTe().x(CS).y(SS).defined(l4).size(xvt);function HG(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function Rvt(e,t){return _vt.context(e)(t)}function Dvt(e,t){const n=t[0],r=n.interpolate||"linear";return(n.orient==="horizontal"?Cvt:Tvt).curve(qG(r,n.orient,n.tension)).context(e)(t)}function Pvt(e,t){const n=t[0],r=n.interpolate||"linear";return Svt.curve(qG(r,n.orient,n.tension)).context(e)(t)}function lE(e,t,n,r){return Avt.context(e)(t,n,r)}function Nvt(e,t){return(t.mark.shape||t.shape).context(e)(t)}function Ovt(e,t){return kvt.context(e)(t)}function $vt(e,t){return Ivt.context(e)(t)}var sTe=1;function oTe(){sTe=1}function WG(e,t,n){var r=t.clip,i=e._defs,s=t.clip_id||(t.clip_id="clip"+sTe++),o=i.clipping[s]||(i.clipping[s]={id:s});return gn(r)?o.path=r(null):HG(n)?o.path=lE(null,n,0,0):(o.width=n.width||0,o.height=n.height||0),"url(#"+s+")"}function Si(e){this.clear(),e&&this.union(e)}Si.prototype={clone(){return new Si(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints(e,t,n){var{x1:r,y1:i,x2:s,y2:o}=this,a=Math.cos(e),l=Math.sin(e),u=t-t*a+n*l,c=n-t*l-n*a;return[a*r-l*i+u,l*r+a*i+c,a*r-l*o+u,l*r+a*o+c,a*s-l*i+u,l*s+a*i+c,a*s-l*o+u,l*s+a*o+c]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function u4(e){this.mark=e,this.bounds=this.bounds||new Si}function c4(e){u4.call(this,e),this.items=this.items||[]}bt(c4,u4);class aTe{constructor(t){this._pending=0,this._loader=t||B$()}pending(){return this._pending}sanitizeURL(t){const n=this;return kae(n),n._loader.sanitize(t,{context:"href"}).then(r=>(__(n),r)).catch(()=>(__(n),null))}loadImage(t){const n=this,r=gyt();return kae(n),n._loader.sanitize(t,{context:"image"}).then(i=>{const s=i.href;if(!s||!r)throw{url:s};const o=new r,a=It(i,"crossOrigin")?i.crossOrigin:"anonymous";return a!=null&&(o.crossOrigin=a),o.onload=()=>__(n),o.onerror=()=>__(n),o.src=s,o}).catch(i=>(__(n),{complete:!1,width:0,height:0,src:i&&i.url||""}))}ready(){const t=this;return new Promise(n=>{function r(i){t.pending()?setTimeout(()=>{r(!0)},10):n(i)}r(!1)})}}function kae(e){e._pending+=1}function __(e){e._pending-=1}function zp(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const r=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(r+(n?Mvt(t,r):0))}return e}function Mvt(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const Lvt=tf-1e-8;let d4,M3,L3,by,i7,F3,s7,o7;const Gm=(e,t)=>d4.add(e,t),j3=(e,t)=>Gm(M3=e,L3=t),Iae=e=>Gm(e,d4.y1),Rae=e=>Gm(d4.x1,e),ay=(e,t)=>i7*e+s7*t,ly=(e,t)=>F3*e+o7*t,DL=(e,t)=>Gm(ay(e,t),ly(e,t)),PL=(e,t)=>j3(ay(e,t),ly(e,t));function AS(e,t){return d4=e,t?(by=t*T0,i7=o7=Math.cos(by),F3=Math.sin(by),s7=-F3):(i7=o7=1,by=F3=s7=0),Fvt}const Fvt={beginPath(){},closePath(){},moveTo:PL,lineTo:PL,rect(e,t,n,r){by?(DL(e+n,t),DL(e+n,t+r),DL(e,t+r),PL(e,t)):(Gm(e+n,t+r),j3(e,t))},quadraticCurveTo(e,t,n,r){const i=ay(e,t),s=ly(e,t),o=ay(n,r),a=ly(n,r);Dae(M3,i,o,Iae),Dae(L3,s,a,Rae),j3(o,a)},bezierCurveTo(e,t,n,r,i,s){const o=ay(e,t),a=ly(e,t),l=ay(n,r),u=ly(n,r),c=ay(i,s),d=ly(i,s);Pae(M3,o,l,c,Iae),Pae(L3,a,u,d,Rae),j3(c,d)},arc(e,t,n,r,i,s){if(r+=by,i+=by,M3=n*Math.cos(i)+e,L3=n*Math.sin(i)+t,Math.abs(i-r)>Lvt)Gm(e-n,t-n),Gm(e+n,t+n);else{const o=u=>Gm(n*Math.cos(u)+e,n*Math.sin(u)+t);let a,l;if(o(r),o(i),i!==r)if(r=r%tf,r<0&&(r+=tf),i=i%tf,i<0&&(i+=tf),i<r&&(s=!s,a=r,r=i,i=a),s)for(i-=tf,a=r-r%oy,l=0;l<4&&a>i;++l,a-=oy)o(a);else for(a=r-r%oy+oy,l=0;l<4&&a<i;++l,a=a+oy)o(a)}}};function Dae(e,t,n,r){const i=(e-t)/(e+n-2*t);0<i&&i<1&&r(e+(t-e)*i)}function Pae(e,t,n,r,i){const s=r-e+3*t-3*n,o=e+n-2*t,a=e-t;let l=0,u=0,c;Math.abs(s)>Qyt?(c=o*o+a*s,c>=0&&(c=Math.sqrt(c),l=(-o+c)/s,u=(-o-c)/s)):l=.5*a/o,0<l&&l<1&&i(Nae(l,e,t,n,r)),0<u&&u<1&&i(Nae(u,e,t,n,r))}function Nae(e,t,n,r,i){const s=1-e,o=s*s,a=e*e;return o*s*t+3*o*e*n+3*s*a*r+a*e*i}var u0=(u0=l0(1,1))?u0.getContext("2d"):null;const a7=new Si;function VG(e){return function(t,n){if(!u0)return!0;e(u0,t),a7.clear().union(t.bounds).intersect(n).round();const{x1:r,y1:i,x2:s,y2:o}=a7;for(let a=i;a<=o;++a)for(let l=r;l<=s;++l)if(u0.isPointInPath(l,a))return!0;return!1}}function GG(e,t){return t.contains(e.x||0,e.y||0)}function lTe(e,t){const n=e.x||0,r=e.y||0,i=e.width||0,s=e.height||0;return t.intersects(a7.set(n,r,n+i,r+s))}function uTe(e,t){const n=e.x||0,r=e.y||0,i=e.x2!=null?e.x2:n,s=e.y2!=null?e.y2:r;return $b(t,n,r,i,s)}function $b(e,t,n,r,i){const{x1:s,y1:o,x2:a,y2:l}=e,u=r-t,c=i-n;let d=0,f=1,h,p,m,g;for(g=0;g<4;++g){if(g===0&&(h=-u,p=-(s-t)),g===1&&(h=u,p=a-t),g===2&&(h=-c,p=-(o-n)),g===3&&(h=c,p=l-n),Math.abs(h)<1e-10&&p<0)return!1;if(m=p/h,h<0){if(m>f)return!1;m>d&&(d=m)}else if(h>0){if(m<d)return!1;m<f&&(f=m)}}return!0}function Gw(e,t){e.globalCompositeOperation=t.blend||"source-over"}function mc(e,t){return e??t}function Oae(e,t){const n=t.length;for(let r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}function jvt(e,t,n){const r=n.width(),i=n.height();let s;if(t.gradient==="radial")s=e.createRadialGradient(n.x1+mc(t.x1,.5)*r,n.y1+mc(t.y1,.5)*i,Math.max(r,i)*mc(t.r1,0),n.x1+mc(t.x2,.5)*r,n.y1+mc(t.y2,.5)*i,Math.max(r,i)*mc(t.r2,.5));else{const o=mc(t.x1,0),a=mc(t.y1,0),l=mc(t.x2,1),u=mc(t.y2,0);if(o===l||a===u||r===i)s=e.createLinearGradient(n.x1+o*r,n.y1+a*i,n.x1+l*r,n.y1+u*i);else{const c=l0(Math.ceil(r),Math.ceil(i)),d=c.getContext("2d");return d.scale(r,i),d.fillStyle=Oae(d.createLinearGradient(o,a,l,u),t.stops),d.fillRect(0,0,r,i),e.createPattern(c,"no-repeat")}}return Oae(s,t.stops)}function cTe(e,t,n){return zG(n)?jvt(e,n,t.bounds):n}function UP(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=cTe(e,t,t.fill),!0):!1}var Bvt=[];function Yw(e,t,n){var r=(r=t.strokeWidth)!=null?r:1;return r<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=cTe(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||Bvt),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function zvt(e,t){return e.zindex-t.zindex||e.index-t.index}function YG(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],r,i,s;for(i=0,s=t.length;i<s;++i)r=t[i],r.index=i,r.zindex&&n.push(r);return e.zdirty=!1,e.zitems=n.sort(zvt)}function nd(e,t){var n=e.items,r,i;if(!n||!n.length)return;const s=YG(e);if(s&&s.length){for(r=0,i=n.length;r<i;++r)n[r].zindex||t(n[r]);n=s}for(r=0,i=n.length;r<i;++r)t(n[r])}function qP(e,t){var n=e.items,r,i;if(!n||!n.length)return null;const s=YG(e);for(s&&s.length&&(n=s),i=n.length;--i>=0;)if(r=t(n[i]))return r;if(n===s){for(n=e.items,i=n.length;--i>=0;)if(!n[i].zindex&&(r=t(n[i])))return r}return null}function KG(e){return function(t,n,r){nd(n,i=>{(!r||r.intersects(i.bounds))&&dTe(e,t,i,i)})}}function Uvt(e){return function(t,n,r){n.items.length&&(!r||r.intersects(n.bounds))&&dTe(e,t,n.items[0],n.items)}}function dTe(e,t,n,r){var i=n.opacity==null?1:n.opacity;i!==0&&(e(t,r)||(Gw(t,n),n.fill&&UP(t,n,i)&&t.fill(),n.stroke&&Yw(t,n,i)&&t.stroke()))}function f4(e){return e=e||fl,function(t,n,r,i,s,o){return r*=t.pixelRatio,i*=t.pixelRatio,qP(n,a=>{const l=a.bounds;if(!(l&&!l.contains(s,o)||!l)&&e(t,a,r,i,s,o))return a})}}function kS(e,t){return function(n,r,i,s){var o=Array.isArray(r)?r[0]:r,a=t??o.fill,l=o.stroke&&n.isPointInStroke,u,c;return l&&(u=o.strokeWidth,c=o.strokeCap,n.lineWidth=u??1,n.lineCap=c??"butt"),e(n,r)?!1:a&&n.isPointInPath(i,s)||l&&n.isPointInStroke(i,s)}}function XG(e){return f4(kS(e))}function Ny(e,t){return"translate("+e+","+t+")"}function QG(e){return"rotate("+e+")"}function qvt(e,t){return"scale("+e+","+t+")"}function fTe(e){return Ny(e.x||0,e.y||0)}function Hvt(e){return Ny(e.x||0,e.y||0)+(e.angle?" "+QG(e.angle):"")}function Wvt(e){return Ny(e.x||0,e.y||0)+(e.angle?" "+QG(e.angle):"")+(e.scaleX||e.scaleY?" "+qvt(e.scaleX||1,e.scaleY||1):"")}function JG(e,t,n){function r(o,a){o("transform",Hvt(a)),o("d",t(null,a))}function i(o,a){return t(AS(o,a.angle),a),zp(o,a).translate(a.x||0,a.y||0)}function s(o,a){var l=a.x||0,u=a.y||0,c=a.angle||0;o.translate(l,u),c&&o.rotate(c*=T0),o.beginPath(),t(o,a),c&&o.rotate(-c),o.translate(-l,-u)}return{type:e,tag:"path",nested:!1,attr:r,bound:i,draw:KG(s),pick:XG(s),isect:n||VG(s)}}var Vvt=JG("arc",Rvt);function Gvt(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],r=e[0].orient==="horizontal"?"y":"x",i=e.length,s=1/0,o,a;--i>=0;)e[i].defined!==!1&&(a=Math.abs(e[i][r]-n),a<s&&(s=a,o=e[i]));return o}function Yvt(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),r=e.length,i,s,o;--r>=0;)if(e[r].defined!==!1&&(i=e[r].x-t[0],s=e[r].y-t[1],o=i*i+s*s,o<n))return e[r];return null}function Kvt(e,t){for(var n=e.length,r,i,s;--n>=0;)if(e[n].defined!==!1&&(r=e[n].x-t[0],i=e[n].y-t[1],s=r*r+i*i,r=e[n].size||1,s<r*r))return e[n];return null}function ZG(e,t,n){function r(l,u){var c=u.mark.items;c.length&&l("d",t(null,c))}function i(l,u){var c=u.items;return c.length===0?l:(t(AS(l),c),zp(l,c[0]))}function s(l,u){l.beginPath(),t(l,u)}const o=kS(s);function a(l,u,c,d,f,h){var p=u.items,m=u.bounds;return!p||!p.length||m&&!m.contains(f,h)?null:(c*=l.pixelRatio,d*=l.pixelRatio,o(l,p,c,d)?p[0]:null)}return{type:e,tag:"path",nested:!0,attr:r,bound:i,draw:Uvt(s),pick:a,isect:GG,tip:n}}var Xvt=ZG("area",Dvt,Gvt);function Qvt(e,t){var n=t.clip;e.save(),gn(n)?(e.beginPath(),n(e),e.clip()):hTe(e,t.group)}function hTe(e,t){e.beginPath(),HG(t)?lE(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function pTe(e){const t=mc(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function Jvt(e,t){e("transform",fTe(t))}function mTe(e,t){const n=pTe(t);e("d",lE(null,t,n,n))}function Zvt(e,t){e("class","background"),e("aria-hidden",!0),mTe(e,t)}function e1t(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?mTe(e,t):e("d","")}function t1t(e,t,n){const r=t.clip?WG(n,t,t):null;e("clip-path",r)}function n1t(e,t){if(!t.clip&&t.items){const n=t.items,r=n.length;for(let i=0;i<r;++i)e.union(n[i].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),zp(e,t),e.translate(t.x||0,t.y||0)}function nC(e,t,n,r){const i=pTe(t);e.beginPath(),lE(e,t,(n||0)+i,(r||0)+i)}const r1t=kS(nC),i1t=kS(nC,!1),s1t=kS(nC,!0);function o1t(e,t,n,r){nd(t,i=>{const s=i.x||0,o=i.y||0,a=i.strokeForeground,l=i.opacity==null?1:i.opacity;(i.stroke||i.fill)&&l&&(nC(e,i,s,o),Gw(e,i),i.fill&&UP(e,i,l)&&e.fill(),i.stroke&&!a&&Yw(e,i,l)&&e.stroke()),e.save(),e.translate(s,o),i.clip&&hTe(e,i),n&&n.translate(-s,-o),nd(i,u=>{(u.marktype==="group"||r==null||r.includes(u.marktype))&&this.draw(e,u,n,r)}),n&&n.translate(s,o),e.restore(),a&&i.stroke&&l&&(nC(e,i,s,o),Gw(e,i),Yw(e,i,l)&&e.stroke())})}function a1t(e,t,n,r,i,s){if(t.bounds&&!t.bounds.contains(i,s)||!t.items)return null;const o=n*e.pixelRatio,a=r*e.pixelRatio;return qP(t,l=>{let u,c,d;const f=l.bounds;if(f&&!f.contains(i,s))return;c=l.x||0,d=l.y||0;const h=c+(l.width||0),p=d+(l.height||0),m=l.clip;if(m&&(i<c||i>h||s<d||s>p))return;if(e.save(),e.translate(c,d),c=i-c,d=s-d,m&&HG(l)&&!s1t(e,l,o,a))return e.restore(),null;const g=l.strokeForeground,b=t.interactive!==!1;return b&&g&&l.stroke&&i1t(e,l,o,a)?(e.restore(),l):(u=qP(l,v=>l1t(v,c,d)?this.pick(v,n,r,c,d):null),!u&&b&&(l.fill||!g&&l.stroke)&&r1t(e,l,o,a)&&(u=l),e.restore(),u||null)})}function l1t(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var u1t={type:"group",tag:"g",nested:!1,attr:Jvt,bound:n1t,draw:o1t,pick:a1t,isect:lTe,content:t1t,background:Zvt,foreground:e1t},rC={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function eY(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(r=>{e.image=r,e.image.url=e.url})),n}function tY(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function nY(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function h4(e,t){return e==="center"?t/2:e==="right"?t:0}function p4(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function c1t(e,t,n){const r=eY(t,n),i=tY(t,r),s=nY(t,r),o=(t.x||0)-h4(t.align,i),a=(t.y||0)-p4(t.baseline,s),l=!r.src&&r.toDataURL?r.toDataURL():r.src||"";e("href",l,rC["xmlns:xlink"],"xlink:href"),e("transform",Ny(o,a)),e("width",i),e("height",s),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function d1t(e,t){const n=t.image,r=tY(t,n),i=nY(t,n),s=(t.x||0)-h4(t.align,r),o=(t.y||0)-p4(t.baseline,i);return e.set(s,o,s+r,o+i)}function f1t(e,t,n){nd(t,r=>{if(n&&!n.intersects(r.bounds))return;const i=eY(r,this);let s=tY(r,i),o=nY(r,i);if(s===0||o===0)return;let a=(r.x||0)-h4(r.align,s),l=(r.y||0)-p4(r.baseline,o),u,c,d,f;r.aspect!==!1&&(c=i.width/i.height,d=r.width/r.height,c===c&&d===d&&c!==d&&(d<c?(f=s/c,l+=(o-f)/2,o=f):(f=o*c,a+=(s-f)/2,s=f))),(i.complete||i.toDataURL)&&(Gw(e,r),e.globalAlpha=(u=r.opacity)!=null?u:1,e.imageSmoothingEnabled=r.smooth!==!1,e.drawImage(i,a,l,s,o))})}var h1t={type:"image",tag:"image",nested:!1,attr:c1t,bound:d1t,draw:f1t,pick:f4(),isect:fl,get:eY,xOffset:h4,yOffset:p4},p1t=ZG("line",Pvt,Yvt);function m1t(e,t){var n=t.scaleX||1,r=t.scaleY||1;(n!==1||r!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",Wvt(t)),e("d",t.path)}function B3(e,t){var n=t.path;if(n==null)return!0;var r=t.x||0,i=t.y||0,s=t.scaleX||1,o=t.scaleY||1,a=(t.angle||0)*T0,l=t.pathCache;(!l||l.path!==n)&&((t.pathCache=l=rv(n)).path=n),a&&e.rotate&&e.translate?(e.translate(r,i),e.rotate(a),Vw(e,l,0,0,s,o),e.rotate(-a),e.translate(-r,-i)):Vw(e,l,r,i,s,o)}function g1t(e,t){return B3(AS(e,t.angle),t)?e.set(0,0,0,0):zp(e,t,!0)}var y1t={type:"path",tag:"path",nested:!1,attr:m1t,bound:g1t,draw:KG(B3),pick:XG(B3),isect:VG(B3)};function v1t(e,t){e("d",lE(null,t))}function b1t(e,t){var n,r;return zp(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)}function $ae(e,t){e.beginPath(),lE(e,t)}var w1t={type:"rect",tag:"path",nested:!1,attr:v1t,bound:b1t,draw:KG($ae),pick:XG($ae),isect:lTe};function x1t(e,t){e("transform",fTe(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function E1t(e,t){var n,r;return zp(e.set(n=t.x||0,r=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:r),t)}function gTe(e,t,n){var r,i,s,o;return t.stroke&&Yw(e,t,n)?(r=t.x||0,i=t.y||0,s=t.x2!=null?t.x2:r,o=t.y2!=null?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(s,o),!0):!1}function _1t(e,t,n){nd(t,r=>{if(!(n&&!n.intersects(r.bounds))){var i=r.opacity==null?1:r.opacity;i&&gTe(e,r,i)&&(Gw(e,r),e.stroke())}})}function T1t(e,t,n,r){return e.isPointInStroke?gTe(e,t,1)&&e.isPointInStroke(n,r):!1}var C1t={type:"rule",tag:"line",nested:!1,attr:x1t,bound:E1t,draw:_1t,pick:f4(T1t),isect:uTe},S1t=JG("shape",Nvt),A1t=JG("symbol",Ovt,GG);const Mae=h_e();var ql={height:Gf,measureWidth:rY,estimateWidth:HP,width:HP,canvas:yTe};yTe(!0);function yTe(e){ql.width=e&&u0?rY:HP}function HP(e,t){return vTe(S0(e,t),Gf(e))}function vTe(e,t){return~~(.8*e.length*t)}function rY(e,t){return Gf(e)<=0||!(t=S0(e,t))?0:bTe(t,m4(e))}function bTe(e,t){const n=`(${t}) ${e}`;let r=Mae.get(n);return r===void 0&&(u0.font=t,r=u0.measureText(e).width,Mae.set(n,r)),r}function Gf(e){return e.fontSize!=null?+e.fontSize||0:11}function C0(e){return e.lineHeight!=null?e.lineHeight:Gf(e)+2}function k1t(e){return Ge(e)?e.length>1?e:e[0]:e}function IS(e){return k1t(e.lineBreak&&e.text&&!Ge(e.text)?e.text.split(e.lineBreak):e.text)}function iY(e){const t=IS(e);return(Ge(t)?t.length-1:0)*C0(e)}function S0(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?R1t(e,n):n}function I1t(e){if(ql.width===rY){const t=m4(e);return n=>bTe(n,t)}else if(ql.width===HP){const t=Gf(e);return n=>vTe(n,t)}else return t=>ql.width(e,t)}function R1t(e,t){var n=+e.limit,r=I1t(e);if(r(t)<n)return t;var i=e.ellipsis||"",s=e.dir==="rtl",o=0,a=t.length,l;if(n-=r(i),s){for(;o<a;)l=o+a>>>1,r(t.slice(l))>n?o=l+1:a=l;return i+t.slice(o)}else{for(;o<a;)l=1+(o+a>>>1),r(t.slice(0,l))<n?o=l:a=l-1;return t.slice(0,o)+i}}function RS(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function m4(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+Gf(e)+"px "+RS(e,t)}function sY(e){var t=e.baseline,n=Gf(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*C0(e):t==="line-bottom"?.29*n-.5*C0(e):0)}const D1t={left:"start",center:"middle",right:"end"},Q2=new Si;function g4(e){var t=e.x||0,n=e.y||0,r=e.radius||0,i;return r&&(i=(e.theta||0)-oy,t+=r*Math.cos(i),n+=r*Math.sin(i)),Q2.x1=t,Q2.y1=n,Q2}function P1t(e,t){var n=t.dx||0,r=(t.dy||0)+sY(t),i=g4(t),s=i.x1,o=i.y1,a=t.angle||0,l;e("text-anchor",D1t[t.align]||"start"),a?(l=Ny(s,o)+" "+QG(a),(n||r)&&(l+=" "+Ny(n,r))):l=Ny(s+n,o+r),e("transform",l)}function oY(e,t,n){var r=ql.height(t),i=t.align,s=g4(t),o=s.x1,a=s.y1,l=t.dx||0,u=(t.dy||0)+sY(t)-Math.round(.8*r),c=IS(t),d;if(Ge(c)?(r+=C0(t)*(c.length-1),d=c.reduce((f,h)=>Math.max(f,ql.width(t,h)),0)):d=ql.width(t,c),i==="center"?l-=d/2:i==="right"&&(l-=d),e.set(l+=o,u+=a,l+d,u+r),t.angle&&!n)e.rotate(t.angle*T0,o,a);else if(n===2)return e.rotatedPoints(t.angle*T0,o,a);return e}function N1t(e,t,n){nd(t,r=>{var i=r.opacity==null?1:r.opacity,s,o,a,l,u,c,d;if(!(n&&!n.intersects(r.bounds)||i===0||r.fontSize<=0||r.text==null||r.text.length===0)){if(e.font=m4(r),e.textAlign=r.align||"left",s=g4(r),o=s.x1,a=s.y1,r.angle&&(e.save(),e.translate(o,a),e.rotate(r.angle*T0),o=a=0),o+=r.dx||0,a+=(r.dy||0)+sY(r),c=IS(r),Gw(e,r),Ge(c))for(u=C0(r),l=0;l<c.length;++l)d=S0(r,c[l]),r.fill&&UP(e,r,i)&&e.fillText(d,o,a),r.stroke&&Yw(e,r,i)&&e.strokeText(d,o,a),a+=u;else d=S0(r,c),r.fill&&UP(e,r,i)&&e.fillText(d,o,a),r.stroke&&Yw(e,r,i)&&e.strokeText(d,o,a);r.angle&&e.restore()}})}function O1t(e,t,n,r,i,s){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var o=g4(t),a=o.x1,l=o.y1,u=oY(Q2,t,1),c=-t.angle*T0,d=Math.cos(c),f=Math.sin(c),h=d*i-f*s+(a-d*a+f*l),p=f*i+d*s+(l-f*a-d*l);return u.contains(h,p)}function $1t(e,t){const n=oY(Q2,e,2);return $b(t,n[0],n[1],n[2],n[3])||$b(t,n[0],n[1],n[4],n[5])||$b(t,n[4],n[5],n[6],n[7])||$b(t,n[2],n[3],n[6],n[7])}var M1t={type:"text",tag:"text",nested:!1,attr:P1t,bound:oY,draw:N1t,pick:f4(O1t),isect:$1t},L1t=ZG("trail",$vt,Kvt),ru={arc:Vvt,area:Xvt,group:u1t,image:h1t,line:p1t,path:y1t,rect:w1t,rule:C1t,shape:S1t,symbol:A1t,text:M1t,trail:L1t};function l7(e,t,n){var r=ru[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new Si),e,n)}var Lae={mark:null};function wTe(e,t,n){var r=ru[e.marktype],i=r.bound,s=e.items,o=s&&s.length,a,l,u,c;if(r.nested)return o?u=s[0]:(Lae.mark=e,u=Lae),c=l7(u,i,n),t=t&&t.union(c)||c,t;if(t=t||e.bounds&&e.bounds.clear()||new Si,o)for(a=0,l=s.length;a<l;++a)t.union(l7(s[a],i,n));return e.bounds=t}const F1t=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function xTe(e,t){return JSON.stringify(e,F1t,t)}function ETe(e){const t=typeof e=="string"?JSON.parse(e):e;return _Te(t)}function _Te(e){var t=e.marktype,n=e.items,r,i,s;if(n)for(i=0,s=n.length;i<s;++i)r=t?"mark":"group",n[i][r]=e,n[i].zindex&&(n[i][r].zdirty=!0),(t||r)==="group"&&_Te(n[i]);return t&&wTe(e),e}class TTe{constructor(t){arguments.length?this.root=ETe(t):(this.root=Fae({marktype:"group",name:"root",role:"frame"}),this.root.items=[new c4(this.root)])}toJSON(t){return xTe(this.root,t||0)}mark(t,n,r){n=n||this.root.items[0];const i=Fae(t,n);return n.items[r]=i,i.zindex&&(i.group.zdirty=!0),i}}function Fae(e,t){const n={bounds:new Si,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function Ym(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function aY(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function us(e,t,n,r){var i=e.childNodes[t],s;return(!i||i.tagName.toLowerCase()!==n.toLowerCase())&&(s=i||null,i=Ym(e.ownerDocument,n,r),e.insertBefore(i,s)),i}function wu(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function CTe(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function y4(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function j1t(e,t,n,r){var i=e&&e.mark,s,o;if(i&&(s=ru[i.marktype]).tip){for(o=y4(t,n),o[0]-=r[0],o[1]-=r[1];e=e.mark.group;)o[0]-=e.x||0,o[1]-=e.y||0;e=s.tip(i.items,o)}return e}let lY=class{constructor(t,n){this._active=null,this._handlers={},this._loader=t||B$(),this._tooltip=n||B1t}initialize(t,n,r){return this._el=t,this._obj=r||null,this.origin(n)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}origin(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()}scene(t){return arguments.length?(this._scene=t,this):this._scene}on(){}off(){}_handlerIndex(t,n,r){for(let i=t?t.length:0;--i>=0;)if(t[i].type===n&&(!r||t[i].handler===r))return i;return-1}handlers(t){const n=this._handlers,r=[];if(t)r.push(...n[this.eventName(t)]);else for(const i in n)r.push(...n[i]);return r}eventName(t){const n=t.indexOf(".");return n<0?t:t.slice(0,n)}handleHref(t,n,r){this._loader.sanitize(r,{context:"href"}).then(i=>{const s=new MouseEvent(t.type,t),o=Ym(null,"a");for(const a in i)o.setAttribute(a,i[a]);o.dispatchEvent(s)}).catch(()=>{})}handleTooltip(t,n,r){if(n&&n.tooltip!=null){n=j1t(n,t,this.canvas(),this._origin);const i=r&&n&&n.tooltip||null;this._tooltip.call(this._obj,this,t,n,i)}}getItemBoundingClientRect(t){const n=this.canvas();if(!n)return;const r=n.getBoundingClientRect(),i=this._origin,s=t.bounds,o=s.width(),a=s.height();let l=s.x1+i[0]+r.left,u=s.y1+i[1]+r.top;for(;t.mark&&(t=t.mark.group);)l+=t.x||0,u+=t.y||0;return{x:l,y:u,width:o,height:a,left:l,top:u,right:l+o,bottom:u+a}}};function B1t(e,t,n,r){e.element().setAttribute("title",r||"")}class DS{constructor(t){this._el=null,this._bgcolor=null,this._loader=new aTe(t)}initialize(t,n,r,i,s){return this._el=t,this.resize(n,r,i,s)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}background(t){return arguments.length===0?this._bgcolor:(this._bgcolor=t,this)}resize(t,n,r,i){return this._width=t,this._height=n,this._origin=r||[0,0],this._scale=i||1,this}dirty(){}render(t,n){const r=this;return r._call=function(){r._render(t,n)},r._call(),r._call=null,r}_render(){}renderAsync(t,n){const r=this.render(t,n);return this._ready?this._ready.then(()=>r):Promise.resolve(r)}_load(t,n){var r=this,i=r._loader[t](n);if(!r._ready){const s=r._call;r._ready=r._loader.ready().then(o=>{o&&s(),r._ready=null})}return i}sanitizeURL(t){return this._load("sanitizeURL",t)}loadImage(t){return this._load("loadImage",t)}}const z1t="keydown",U1t="keypress",q1t="keyup",STe="dragenter",z3="dragleave",ATe="dragover",u7="pointerdown",H1t="pointerup",WP="pointermove",U3="pointerout",kTe="pointerover",c7="mousedown",W1t="mouseup",ITe="mousemove",VP="mouseout",RTe="mouseover",GP="click",V1t="dblclick",G1t="wheel",DTe="mousewheel",YP="touchstart",KP="touchmove",XP="touchend",Y1t=[z1t,U1t,q1t,STe,z3,ATe,u7,H1t,WP,U3,kTe,c7,W1t,ITe,VP,RTe,GP,V1t,G1t,DTe,YP,KP,XP],d7=WP,J2=VP,f7=GP;class PS extends lY{constructor(t,n){super(t,n),this._down=null,this._touch=null,this._first=!0,this._events={},this.events=Y1t,this.pointermove=Bae([WP,ITe],[kTe,RTe],[U3,VP]),this.dragover=Bae([ATe],[STe],[z3]),this.pointerout=zae([U3,VP]),this.dragleave=zae([z3])}initialize(t,n,r){return this._canvas=t&&aY(t,"canvas"),[GP,c7,u7,WP,U3,z3].forEach(i=>jae(this,i)),super.initialize(t,n,r)}canvas(){return this._canvas}context(){return this._canvas.getContext("2d")}DOMMouseScroll(t){this.fire(DTe,t)}pointerdown(t){this._down=this._active,this.fire(u7,t)}mousedown(t){this._down=this._active,this.fire(c7,t)}click(t){this._down===this._active&&(this.fire(GP,t),this._down=null)}touchstart(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(YP,t,!0)}touchmove(t){this.fire(KP,t,!0)}touchend(t){this.fire(XP,t,!0),this._touch=null}fire(t,n,r){const i=r?this._touch:this._active,s=this._handlers[t];if(n.vegaType=t,t===f7&&i&&i.href?this.handleHref(n,i,i.href):(t===d7||t===J2)&&this.handleTooltip(n,i,t!==J2),s)for(let o=0,a=s.length;o<a;++o)s[o].handler.call(this._obj,n,i)}on(t,n){const r=this.eventName(t),i=this._handlers;return this._handlerIndex(i[r],t,n)<0&&(jae(this,t),(i[r]||(i[r]=[])).push({type:t,handler:n})),this}off(t,n){const r=this.eventName(t),i=this._handlers[r],s=this._handlerIndex(i,t,n);return s>=0&&i.splice(s,1),this}pickEvent(t){const n=y4(t,this._canvas),r=this._origin;return this.pick(this._scene,n[0],n[1],n[0]-r[0],n[1]-r[1])}pick(t,n,r,i,s){const o=this.context();return ru[t.marktype].pick.call(this,o,t,n,r,i,s)}}const K1t=e=>e===YP||e===KP||e===XP?[YP,KP,XP]:[e];function jae(e,t){K1t(t).forEach(n=>X1t(e,n))}function X1t(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?r=>e[t](r):r=>e.fire(t,r)))}function w2(e,t,n){t.forEach(r=>e.fire(r,n))}function Bae(e,t,n){return function(r){const i=this._active,s=this.pickEvent(r);s===i?w2(this,e,r):((!i||!i.exit)&&w2(this,n,r),this._active=s,w2(this,t,r),w2(this,e,r))}}function zae(e){return function(t){w2(this,e,t),this._active=null}}function Q1t(){return typeof window<"u"&&window.devicePixelRatio||1}function J1t(e,t,n,r,i,s){const o=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,a=e.getContext("2d"),l=o?Q1t():i;e.width=t*l,e.height=n*l;for(const u in s)a[u]=s[u];return o&&l!==1&&(e.style.width=t+"px",e.style.height=n+"px"),a.pixelRatio=l,a.setTransform(l,0,0,l,l*r[0],l*r[1]),e}class QP extends DS{constructor(t){super(t),this._options={},this._redraw=!1,this._dirty=new Si,this._tempb=new Si}initialize(t,n,r,i,s,o){return this._options=o||{},this._canvas=this._options.externalContext?null:l0(1,1,this._options.type),t&&this._canvas&&(wu(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),super.initialize(t,n,r,i,s)}resize(t,n,r,i){if(super.resize(t,n,r,i),this._canvas)J1t(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const s=this._options.externalContext;s||He("CanvasRenderer is missing a valid canvas or context"),s.scale(this._scale,this._scale),s.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this}canvas(){return this._canvas}context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)}dirty(t){const n=this._tempb.clear().union(t.bounds);let r=t.mark.group;for(;r;)n.translate(r.x||0,r.y||0),r=r.mark.group;this._dirty.union(n)}_render(t,n){const r=this.context(),i=this._origin,s=this._width,o=this._height,a=this._dirty,l=Z1t(i,s,o);r.save();const u=this._redraw||a.empty()?(this._redraw=!1,l.expand(1)):ebt(r,l.intersect(a),i);return this.clear(-i[0],-i[1],s,o),this.draw(r,t,u,n),r.restore(),a.clear(),this}draw(t,n,r,i){if(n.marktype!=="group"&&i!=null&&!i.includes(n.marktype))return;const s=ru[n.marktype];n.clip&&Qvt(t,n),s.draw.call(this,t,n,r,i),n.clip&&t.restore()}clear(t,n,r,i){const s=this._options,o=this.context();s.type!=="pdf"&&!s.externalContext&&o.clearRect(t,n,r,i),this._bgcolor!=null&&(o.fillStyle=this._bgcolor,o.fillRect(t,n,r,i))}}const Z1t=(e,t,n)=>new Si().set(0,0,t,n).translate(-e[0],-e[1]);function ebt(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}class PTe extends lY{constructor(t,n){super(t,n);const r=this;r._hrefHandler=NL(r,(i,s)=>{s&&s.href&&r.handleHref(i,s,s.href)}),r._tooltipHandler=NL(r,(i,s)=>{r.handleTooltip(i,s,i.type!==J2)})}initialize(t,n,r){let i=this._svg;return i&&(i.removeEventListener(f7,this._hrefHandler),i.removeEventListener(d7,this._tooltipHandler),i.removeEventListener(J2,this._tooltipHandler)),this._svg=i=t&&aY(t,"svg"),i&&(i.addEventListener(f7,this._hrefHandler),i.addEventListener(d7,this._tooltipHandler),i.addEventListener(J2,this._tooltipHandler)),super.initialize(t,n,r)}canvas(){return this._svg}on(t,n){const r=this.eventName(t),i=this._handlers;if(this._handlerIndex(i[r],t,n)<0){const o={type:t,handler:n,listener:NL(this,n)};(i[r]||(i[r]=[])).push(o),this._svg&&this._svg.addEventListener(r,o.listener)}return this}off(t,n){const r=this.eventName(t),i=this._handlers[r],s=this._handlerIndex(i,t,n);return s>=0&&(this._svg&&this._svg.removeEventListener(r,i[s].listener),i.splice(s,1)),this}}const NL=(e,t)=>n=>{let r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,t.call(e._obj,n,r)},NTe="aria-hidden",uY="aria-label",cY="role",dY="aria-roledescription",OTe="graphics-object",fY="graphics-symbol",$Te=(e,t,n)=>({[cY]:e,[dY]:t,[uY]:n||void 0}),tbt=ed(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),Uae={axis:{desc:"axis",caption:ibt},legend:{desc:"legend",caption:sbt},"title-text":{desc:"title",caption:e=>`Title text '${Hae(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${Hae(e)}'`}},qae={ariaRole:cY,ariaRoleDescription:dY,description:uY};function MTe(e,t){const n=t.aria===!1;if(e(NTe,n||void 0),n||t.description==null)for(const r in qae)e(qae[r],void 0);else{const r=t.mark.marktype;e(uY,t.description),e(cY,t.ariaRole||(r==="group"?OTe:fY)),e(dY,t.ariaRoleDescription||`${r} mark`)}}function LTe(e){return e.aria===!1?{[NTe]:!0}:tbt[e.role]?null:Uae[e.role]?rbt(e,Uae[e.role]):nbt(e)}function nbt(e){const t=e.marktype,n=t==="group"||t==="text"||e.items.some(r=>r.description!=null&&r.aria!==!1);return $Te(n?OTe:fY,`${t} mark container`,e.description)}function rbt(e,t){try{const n=e.items[0],r=t.caption||(()=>"");return $Te(t.role||fY,t.desc,n.description||r(n))}catch{return null}}function Hae(e){return St(e.text).join(" ")}function ibt(e){const t=e.datum,n=e.orient,r=t.title?FTe(e):null,i=e.context,s=i.scales[t.scale].value,o=i.dataflow.locale(),a=s.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(r?` titled '${r}'`:"")+` for a ${Ww(a)?"discrete":a} scale with ${J2e(o,s,e)}`}function sbt(e){const t=e.datum,n=t.title?FTe(e):null,r=`${t.type||""} legend`.trim(),i=t.scales,s=Object.keys(i),o=e.context,a=o.scales[i[s[0]]].value,l=o.dataflow.locale();return abt(r)+(n?` titled '${n}'`:"")+` for ${obt(s)} with ${J2e(l,a,e)}`}function FTe(e){try{return St(Rn(e.items).items[0].text).join(" ")}catch{return null}}function obt(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+Rn(e)}function abt(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const jTe=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),lbt=e=>jTe(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function hY(){let e="",t="",n="";const r=[],i=()=>t=n="",s=l=>{t&&(e+=`${t}>${n}`,i()),r.push(l)},o=(l,u)=>(u!=null&&(t+=` ${l}="${lbt(u)}"`),a),a={open(l){s(l),t="<"+l;for(var u=arguments.length,c=new Array(u>1?u-1:0),d=1;d<u;d++)c[d-1]=arguments[d];for(const f of c)for(const h in f)o(h,f[h]);return a},close(){const l=r.pop();return t?e+=t+(n?`>${n}</${l}>`:"/>"):e+=`</${l}>`,i(),a},attr:o,text:l=>(n+=jTe(l),a),toString:()=>e};return a}const BTe=e=>zTe(hY(),e)+"";function zTe(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,r=n.length;for(let i=0;i<r;++i)e.attr(n[i].name,n[i].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const r of n)r.nodeType===3?e.text(r.nodeValue):zTe(e,r)}return e.close()}const JP={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},ZP={blend:"mix-blend-mode"},UTe={fill:"none","stroke-miterlimit":10},T_=0,Wae="http://www.w3.org/2000/xmlns/",ls=rC.xmlns;class pY extends DS{constructor(t){super(t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}initialize(t,n,r,i,s){return this._defs={},this._clearDefs(),t&&(this._svg=us(t,0,"svg",ls),this._svg.setAttributeNS(Wae,"xmlns",ls),this._svg.setAttributeNS(Wae,"xmlns:xlink",rC["xmlns:xlink"]),this._svg.setAttribute("version",rC.version),this._svg.setAttribute("class","marks"),wu(t,1),this._root=us(this._svg,T_,"g",ls),Km(this._root,UTe),wu(this._svg,T_+1)),this.background(this._bgcolor),super.initialize(t,n,r,i,s)}background(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),super.background(...arguments)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svg&&(Km(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this}canvas(){return this._svg}svg(){const t=this._svg,n=this._bgcolor;if(!t)return null;let r;n&&(t.removeAttribute("style"),r=us(t,T_,"rect",ls),Km(r,{width:this._width,height:this._height,fill:n}));const i=BTe(t);return n&&(t.removeChild(r),this._svg.style.setProperty("background-color",n)),i}_render(t,n){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t,void 0,n),wu(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this}dirty(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))}isDirty(t){return this._dirtyAll||!t._svg||!t._svg.ownerSVGElement||t.dirty===this._dirtyID}_dirtyCheck(){this._dirtyAll=!0;const t=this._dirty;if(!t.length||!this._dirtyID)return!0;const n=++this._dirtyID;let r,i,s,o,a,l,u;for(a=0,l=t.length;a<l;++a)if(r=t[a],i=r.mark,i.marktype!==s&&(s=i.marktype,o=ru[s]),i.zdirty&&i.dirty!==n&&(this._dirtyAll=!1,Vae(r,n),i.items.forEach(c=>{c.dirty=n})),!i.zdirty){if(r.exit){o.nested&&i.items.length?(u=i.items[0],u._svg&&this._update(o,u._svg,u)):r._svg&&(u=r._svg.parentNode,u&&u.removeChild(r._svg)),r._svg=null;continue}r=o.nested?i.items[0]:r,r._update!==n&&(!r._svg||!r._svg.ownerSVGElement?(this._dirtyAll=!1,Vae(r,n)):this._update(o,r._svg,r),r._update=n)}return!this._dirtyAll}mark(t,n,r,i){if(!this.isDirty(n))return n._svg;const s=this._svg,o=n.marktype,a=ru[o],l=n.interactive===!1?"none":null,u=a.tag==="g",c=Gae(n,t,r,"g",s);if(o!=="group"&&i!=null&&!i.includes(o))return wu(c,0),n._svg;c.setAttribute("class",CTe(n));const d=LTe(n);for(const m in d)ca(c,m,d[m]);u||ca(c,"pointer-events",l),ca(c,"clip-path",n.clip?WG(this,n,n.group):null);let f=null,h=0;const p=m=>{const g=this.isDirty(m),b=Gae(m,c,f,a.tag,s);g&&(this._update(a,b,m),u&&dbt(this,b,m,i)),f=b,++h};return a.nested?n.items.length&&p(n.items[0]):nd(n,p),wu(c,h),c}_update(t,n,r){Yh=n,Bo=n.__values__,MTe(Z2,r),t.attr(Z2,r,this);const i=hbt[t.type];i&&i.call(this,t,n,r),Yh&&this.style(Yh,r)}style(t,n){if(n!=null){for(const r in JP){let i=r==="font"?RS(n):n[r];if(i===Bo[r])continue;const s=JP[r];i==null?t.removeAttribute(s):(zG(i)&&(i=eTe(i,this._defs.gradient,qTe())),t.setAttribute(s,i+"")),Bo[r]=i}for(const r in ZP)q3(t,ZP[r],n[r])}}defs(){const t=this._svg,n=this._defs;let r=n.el,i=0;for(const s in n.gradient)r||(n.el=r=us(t,T_+1,"defs",ls)),i=ubt(r,n.gradient[s],i);for(const s in n.clipping)r||(n.el=r=us(t,T_+1,"defs",ls)),i=cbt(r,n.clipping[s],i);r&&(i===0?(t.removeChild(r),n.el=null):wu(r,i))}_clearDefs(){const t=this._defs;t.gradient={},t.clipping={}}}function Vae(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function ubt(e,t,n){let r,i,s;if(t.gradient==="radial"){let o=us(e,n++,"pattern",ls);Km(o,{id:zP+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),o=us(o,0,"rect",ls),Km(o,{width:1,height:1,fill:`url(${qTe()}#${t.id})`}),e=us(e,n++,"radialGradient",ls),Km(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=us(e,n++,"linearGradient",ls),Km(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(r=0,i=t.stops.length;r<i;++r)s=us(e,r,"stop",ls),s.setAttribute("offset",t.stops[r].offset),s.setAttribute("stop-color",t.stops[r].color);return wu(e,r),n}function cbt(e,t,n){let r;return e=us(e,n,"clipPath",ls),e.setAttribute("id",t.id),t.path?(r=us(e,0,"path",ls),r.setAttribute("d",t.path)):(r=us(e,0,"rect",ls),Km(r,{x:0,y:0,width:t.width,height:t.height})),wu(e,1),n+1}function dbt(e,t,n,r){t=t.lastChild.previousSibling;let i,s=0;nd(n,o=>{i=e.mark(t,o,i,r),++s}),wu(t,1+s)}function Gae(e,t,n,r,i){let s=e._svg,o;if(!s&&(o=t.ownerDocument,s=Ym(o,r,ls),e._svg=s,e.mark&&(s.__data__=e,s.__values__={fill:"default"},r==="g"))){const a=Ym(o,"path",ls);s.appendChild(a),a.__data__=e;const l=Ym(o,"g",ls);s.appendChild(l),l.__data__=e;const u=Ym(o,"path",ls);s.appendChild(u),u.__data__=e,u.__values__={fill:"default"}}return(s.ownerSVGElement!==i||fbt(s,n))&&t.insertBefore(s,n?n.nextSibling:t.firstChild),s}function fbt(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}let Yh=null,Bo=null;const hbt={group(e,t,n){const r=Yh=t.childNodes[2];Bo=r.__values__,e.foreground(Z2,n,this),Bo=t.__values__,Yh=t.childNodes[1],e.content(Z2,n,this);const i=Yh=t.childNodes[0];e.background(Z2,n,this);const s=n.mark.interactive===!1?"none":null;if(s!==Bo.events&&(ca(r,"pointer-events",s),ca(i,"pointer-events",s),Bo.events=s),n.strokeForeground&&n.stroke){const o=n.fill;ca(r,"display",null),this.style(i,n),ca(i,"stroke",null),o&&(n.fill=null),Bo=r.__values__,this.style(r,n),o&&(n.fill=o),Yh=null}else ca(r,"display","none")},image(e,t,n){n.smooth===!1?(q3(t,"image-rendering","optimizeSpeed"),q3(t,"image-rendering","pixelated")):q3(t,"image-rendering",null)},text(e,t,n){const r=IS(n);let i,s,o,a;Ge(r)?(s=r.map(l=>S0(n,l)),i=s.join(`
`),i!==Bo.text&&(wu(t,0),o=t.ownerDocument,a=C0(n),s.forEach((l,u)=>{const c=Ym(o,"tspan",ls);c.__data__=n,c.textContent=l,u&&(c.setAttribute("x",0),c.setAttribute("dy",a)),t.appendChild(c)}),Bo.text=i)):(s=S0(n,r),s!==Bo.text&&(t.textContent=s,Bo.text=s)),ca(t,"font-family",RS(n)),ca(t,"font-size",Gf(n)+"px"),ca(t,"font-style",n.fontStyle),ca(t,"font-variant",n.fontVariant),ca(t,"font-weight",n.fontWeight)}};function Z2(e,t,n){t!==Bo[e]&&(n?pbt(Yh,e,t,n):ca(Yh,e,t),Bo[e]=t)}function q3(e,t,n){n!==Bo[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),Bo[t]=n)}function Km(e,t){for(const n in t)ca(e,n,t[n])}function ca(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function pbt(e,t,n,r){n!=null?e.setAttributeNS(r,t,n):e.removeAttributeNS(r,t)}function qTe(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}class HTe extends DS{constructor(t){super(t),this._text=null,this._defs={gradient:{},clipping:{}}}svg(){return this._text}_render(t){const n=hY();n.open("svg",hn({},rC,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const r=this._bgcolor;return r&&r!=="transparent"&&r!=="none"&&n.open("rect",{width:this._width,height:this._height,fill:r}).close(),n.open("g",UTe,{transform:"translate("+this._origin+")"}),this.mark(n,t),n.close(),this.defs(n),this._text=n.close()+"",this}mark(t,n){const r=ru[n.marktype],i=r.tag,s=[MTe,r.attr];t.open("g",{class:CTe(n),"clip-path":n.clip?WG(this,n,n.group):null},LTe(n),{"pointer-events":i!=="g"&&n.interactive===!1?"none":null});const o=a=>{const l=this.href(a);if(l&&t.open("a",l),t.open(i,this.attr(n,a,s,i!=="g"?i:null)),i==="text"){const u=IS(a);if(Ge(u)){const c={x:0,dy:C0(a)};for(let d=0;d<u.length;++d)t.open("tspan",d?c:null).text(S0(a,u[d])).close()}else t.text(S0(a,u))}else if(i==="g"){const u=a.strokeForeground,c=a.fill,d=a.stroke;u&&d&&(a.stroke=null),t.open("path",this.attr(n,a,r.background,"bgrect")).close(),t.open("g",this.attr(n,a,r.content)),nd(a,f=>this.mark(t,f)),t.close(),u&&d?(c&&(a.fill=null),a.stroke=d,t.open("path",this.attr(n,a,r.foreground,"bgrect")).close(),c&&(a.fill=c)):t.open("path",this.attr(n,a,r.foreground,"bgfore")).close()}t.close(),l&&t.close()};return r.nested?n.items&&n.items.length&&o(n.items[0]):nd(n,o),t.close()}href(t){const n=t.href;let r;if(n){if(r=this._hrefs&&this._hrefs[n])return r;this.sanitizeURL(n).then(i=>{i["xlink:href"]=i.href,i.href=null,(this._hrefs||(this._hrefs={}))[n]=i})}return null}attr(t,n,r,i){const s={},o=(a,l,u,c)=>{s[c||a]=l};return Array.isArray(r)?r.forEach(a=>a(o,n,this)):r(o,n,this),i&&mbt(s,n,t,i,this._defs),s}defs(t){const n=this._defs.gradient,r=this._defs.clipping;if(Object.keys(n).length+Object.keys(r).length!==0){t.open("defs");for(const s in n){const o=n[s],a=o.stops;o.gradient==="radial"?(t.open("pattern",{id:zP+s,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+s+")"}).close(),t.close(),t.open("radialGradient",{id:s,fx:o.x1,fy:o.y1,fr:o.r1,cx:o.x2,cy:o.y2,r:o.r2})):t.open("linearGradient",{id:s,x1:o.x1,x2:o.x2,y1:o.y1,y2:o.y2});for(let l=0;l<a.length;++l)t.open("stop",{offset:a[l].offset,"stop-color":a[l].color}).close();t.close()}for(const s in r){const o=r[s];t.open("clipPath",{id:s}),o.path?t.open("path",{d:o.path}).close():t.open("rect",{x:0,y:0,width:o.width,height:o.height}).close(),t.close()}t.close()}}}function mbt(e,t,n,r,i){let s;if(t==null||(r==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),r==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;r==="image"&&t.smooth===!1&&(s=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),r==="text"&&(e["font-family"]=RS(t),e["font-size"]=Gf(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const o in JP){let a=t[o];const l=JP[o];a==="transparent"&&(l==="fill"||l==="stroke")||a!=null&&(zG(a)&&(a=eTe(a,i.gradient,"")),e[l]=a)}for(const o in ZP){const a=t[o];a!=null&&(s=s||[],s.push(`${ZP[o]}: ${a};`))}return s&&(e.style=s.join(" ")),e}const xc={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function gbt(e){xc.svgMarkTypes=e.svgMarkTypes??["text"],xc.svgOnTop=e.svgOnTop??!0,xc.debug=e.debug??!1}class h7 extends DS{constructor(t){super(t),this._svgRenderer=new pY(t),this._canvasRenderer=new QP(t)}initialize(t,n,r,i,s){this._root_el=us(t,0,"div");const o=us(this._root_el,0,"div"),a=us(this._root_el,1,"div");return this._root_el.style.position="relative",xc.debug||(o.style.height="100%",a.style.position="absolute",a.style.top="0",a.style.left="0",a.style.height="100%",a.style.width="100%"),this._svgEl=xc.svgOnTop?a:o,this._canvasEl=xc.svgOnTop?o:a,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,n,r,i,s),this._svgRenderer.initialize(this._svgEl,n,r,i,s),super.initialize(t,n,r,i,s)}dirty(t){return xc.svgMarkTypes.includes(t.mark.marktype)?this._svgRenderer.dirty(t):this._canvasRenderer.dirty(t),this}_render(t,n){const i=(n??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(s=>!xc.svgMarkTypes.includes(s));this._svgRenderer.render(t,xc.svgMarkTypes),this._canvasRenderer.render(t,i)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svgRenderer.resize(t,n,r,i),this._canvasRenderer.resize(t,n,r,i),this}background(t){return xc.svgOnTop?this._canvasRenderer.background(t):this._svgRenderer.background(t),this}}class WTe extends PS{constructor(t,n){super(t,n)}initialize(t,n,r){const i=us(us(t,0,"div"),xc.svgOnTop?0:1,"div");return super.initialize(i,n,r)}}const VTe="canvas",GTe="hybrid",YTe="png",KTe="svg",XTe="none",Xm={Canvas:VTe,PNG:YTe,SVG:KTe,Hybrid:GTe,None:XTe},iv={};iv[VTe]=iv[YTe]={renderer:QP,headless:QP,handler:PS};iv[KTe]={renderer:pY,headless:HTe,handler:PTe};iv[GTe]={renderer:h7,headless:h7,handler:WTe};iv[XTe]={};function v4(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(iv[e]=t,this):iv[e]}function mY(e,t,n){const r=[],i=new Si().union(t),s=e.marktype;return s?QTe(e,i,n,r):s==="group"?JTe(e,i,n,r):He("Intersect scene must be mark node or group item.")}function QTe(e,t,n,r){if(ybt(e,t,n)){const i=e.items,s=e.marktype,o=i.length;let a=0;if(s==="group")for(;a<o;++a)JTe(i[a],t,n,r);else for(const l=ru[s].isect;a<o;++a){const u=i[a];ZTe(u,t,l)&&r.push(u)}}return r}function ybt(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function JTe(e,t,n,r){n&&n(e.mark)&&ZTe(e,t,ru.group.isect)&&r.push(e);const i=e.items,s=i&&i.length;if(s){const o=e.x||0,a=e.y||0;t.translate(-o,-a);for(let l=0;l<s;++l)QTe(i[l],t,n,r);t.translate(o,a)}return r}function ZTe(e,t,n){const r=e.bounds;return t.encloses(r)||t.intersects(r)&&n(e,t)}const OL=new Si;function eCe(e){const t=e.clip;if(gn(t))t(AS(OL.clear()));else if(t)OL.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(OL)}const vbt=1e-9;function gY(e,t,n){return e===t?!0:n==="path"?tCe(e,t):e instanceof Date&&t instanceof Date?+e==+t:Zn(e)&&Zn(t)?Math.abs(e-t)<=vbt:!e||!t||!At(e)&&!At(t)?e==t:bbt(e,t)}function tCe(e,t){return gY(rv(e),rv(t))}function bbt(e,t){var n=Object.keys(e),r=Object.keys(t),i,s;if(n.length!==r.length)return!1;for(n.sort(),r.sort(),s=n.length-1;s>=0;s--)if(n[s]!=r[s])return!1;for(s=n.length-1;s>=0;s--)if(i=n[s],!gY(e[i],t[i],i))return!1;return typeof e==typeof t}function wbt(){oTe(),Hyt()}const Kw="top",Dc="left",Fc="right",A0="bottom",xbt="top-left",Ebt="top-right",_bt="bottom-left",Tbt="bottom-right",yY="start",p7="middle",ha="end",Cbt="x",Sbt="y",b4="group",vY="axis",bY="title",Abt="frame",kbt="scope",wY="legend",nCe="row-header",rCe="row-footer",iCe="row-title",sCe="column-header",oCe="column-footer",aCe="column-title",Ibt="padding",Rbt="symbol",lCe="fit",uCe="fit-x",cCe="fit-y",Dbt="pad",xY="none",tI="all",m7="each",EY="flush",Qm="column",Jm="row";function dCe(e){qe.call(this,null,e)}bt(dCe,qe,{transform(e,t){const n=t.dataflow,r=e.mark,i=r.marktype,s=ru[i],o=s.bound;let a=r.bounds,l;if(s.nested)r.items.length&&n.dirty(r.items[0]),a=nI(r,o),r.items.forEach(u=>{u.bounds.clear().union(a)});else if(i===b4||e.modified())switch(t.visit(t.MOD,u=>n.dirty(u)),a.clear(),r.items.forEach(u=>a.union(nI(u,o))),r.role){case vY:case wY:case bY:t.reflow()}else l=t.changed(t.REM),t.visit(t.ADD,u=>{a.union(nI(u,o))}),t.visit(t.MOD,u=>{l=l||a.alignsWith(u.bounds),n.dirty(u),a.union(nI(u,o))}),l&&(a.clear(),r.items.forEach(u=>a.union(u.bounds)));return eCe(r),t.modifies("bounds")}});function nI(e,t,n){return t(e.bounds.clear(),e,n)}const Yae=":vega_identifier:";function _Y(e){qe.call(this,0,e)}_Y.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};bt(_Y,qe,{transform(e,t){const n=Pbt(t.dataflow),r=e.as;let i=n.value;return t.visit(t.ADD,s=>s[r]=s[r]||++i),n.set(this.value=i),t}});function Pbt(e){return e._signals[Yae]||(e._signals[Yae]=e.add(0))}function fCe(e){qe.call(this,null,e)}bt(fCe,qe,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,Nbt(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const r=n.marktype===b4?c4:u4;return t.visit(t.ADD,i=>r.call(i,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function Nbt(e){const t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function hCe(e){qe.call(this,null,e)}const Kae={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((r,i)=>!i||!pCe(n.bounds,r.bounds,t)?(n=r,1):r.opacity=0)}},pCe=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),Xae=(e,t)=>{for(var n=1,r=e.length,i=e[0].bounds,s;n<r;i=s,++n)if(pCe(i,s=e[n].bounds,t))return!0},Obt=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},$bt=(e,t,n)=>{var r=e.range(),i=new Si;return t===Kw||t===A0?i.set(r[0],-1/0,r[1],1/0):i.set(-1/0,r[0],1/0,r[1]),i.expand(n||1),s=>i.encloses(s.bounds)},Qae=e=>(e.forEach(t=>t.opacity=1),e),Jae=(e,t)=>e.reflow(t.modified()).modifies("opacity");bt(hCe,qe,{transform(e,t){const n=Kae[e.method]||Kae.parity,r=e.separation||0;let i=t.materialize(t.SOURCE).source,s,o;if(!i||!i.length)return;if(!e.method)return e.modified("method")&&(Qae(i),t=Jae(t,e)),t;if(i=i.filter(Obt),!i.length)return;if(e.sort&&(i=i.slice().sort(e.sort)),s=Qae(i),t=Jae(t,e),s.length>=3&&Xae(s,r)){do s=n(s,r);while(s.length>=3&&Xae(s,r));s.length<3&&!Rn(i).opacity&&(s.length>1&&(Rn(s).opacity=0),Rn(i).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(o=$bt(e.boundScale,e.boundOrient,+e.boundTolerance),i.forEach(l=>{o(l)||(l.opacity=0)}));const a=s[0].mark.bounds.clear();return i.forEach(l=>{l.opacity&&a.union(l.bounds)}),t}});function mCe(e){qe.call(this,null,e)}bt(mCe,qe,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,r=>n.dirty(r)),t.fields&&t.fields.zindex){const r=t.source&&t.source[0];r&&(r.mark.zdirty=!0)}}});const Fo=new Si;function Mb(e,t,n){return e[t]===n?0:(e[t]=n,1)}function Mbt(e){var t=e.items[0].orient;return t===Dc||t===Fc}function Lbt(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function Fbt(e,t,n,r){var i=t.items[0],s=i.datum,o=i.translate!=null?i.translate:.5,a=i.orient,l=Lbt(s),u=i.range,c=i.offset,d=i.position,f=i.minExtent,h=i.maxExtent,p=s.title&&i.items[l[2]].items[0],m=i.titlePadding,g=i.bounds,b=p&&iY(p),v=0,x=0,E,_;switch(Fo.clear().union(g),g.clear(),(E=l[0])>-1&&g.union(i.items[E].bounds),(E=l[1])>-1&&g.union(i.items[E].bounds),a){case Kw:v=d||0,x=-c,_=Math.max(f,Math.min(h,-g.y1)),g.add(0,-_).add(u,0),p&&rI(e,p,_,m,b,0,-1,g);break;case Dc:v=-c,x=d||0,_=Math.max(f,Math.min(h,-g.x1)),g.add(-_,0).add(0,u),p&&rI(e,p,_,m,b,1,-1,g);break;case Fc:v=n+c,x=d||0,_=Math.max(f,Math.min(h,g.x2)),g.add(0,0).add(_,u),p&&rI(e,p,_,m,b,1,1,g);break;case A0:v=d||0,x=r+c,_=Math.max(f,Math.min(h,g.y2)),g.add(0,0).add(u,_),p&&rI(e,p,_,m,0,0,1,g);break;default:v=i.x,x=i.y}return zp(g.translate(v,x),i),Mb(i,"x",v+o)|Mb(i,"y",x+o)&&(i.bounds=Fo,e.dirty(i),i.bounds=g,e.dirty(i)),i.mark.bounds.clear().union(g)}function rI(e,t,n,r,i,s,o,a){const l=t.bounds;if(t.auto){const u=o*(n+i+r);let c=0,d=0;e.dirty(t),s?c=(t.x||0)-(t.x=u):d=(t.y||0)-(t.y=u),t.mark.bounds.clear().union(l.translate(-c,-d)),e.dirty(t)}a.union(l)}const Zae=(e,t)=>Math.floor(Math.min(e,t)),ele=(e,t)=>Math.ceil(Math.max(e,t));function jbt(e){var t=e.items,n=t.length,r=0,i,s;const o={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;r<n;++r)if(i=t[r],s=i.items,i.marktype===b4)switch(i.role){case vY:case wY:case bY:break;case nCe:o.rowheaders.push(...s);break;case rCe:o.rowfooters.push(...s);break;case sCe:o.colheaders.push(...s);break;case oCe:o.colfooters.push(...s);break;case iCe:o.rowtitle=s[0];break;case aCe:o.coltitle=s[0];break;default:o.marks.push(...s)}return o}function Bbt(e){return new Si().set(0,0,e.width||0,e.height||0)}function zbt(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function ti(e,t,n){const r=At(e)?e[t]:e;return r??(n!==void 0?n:0)}function tle(e){return e<0?Math.ceil(-e):0}function gCe(e,t,n){var r=!n.nodirty,i=n.bounds===EY?Bbt:zbt,s=Fo.set(0,0,0,0),o=ti(n.align,Qm),a=ti(n.align,Jm),l=ti(n.padding,Qm),u=ti(n.padding,Jm),c=n.columns||t.length,d=c<=0?1:Math.ceil(t.length/c),f=t.length,h=Array(f),p=Array(c),m=0,g=Array(f),b=Array(d),v=0,x=Array(f),E=Array(f),_=Array(f),C,S,k,R,O,N,L,$,B,H,Y;for(S=0;S<c;++S)p[S]=0;for(S=0;S<d;++S)b[S]=0;for(S=0;S<f;++S)N=t[S],O=_[S]=i(N),N.x=N.x||0,x[S]=0,N.y=N.y||0,E[S]=0,k=S%c,R=~~(S/c),m=Math.max(m,L=Math.ceil(O.x2)),v=Math.max(v,$=Math.ceil(O.y2)),p[k]=Math.max(p[k],L),b[R]=Math.max(b[R],$),h[S]=l+tle(O.x1),g[S]=u+tle(O.y1),r&&e.dirty(t[S]);for(S=0;S<f;++S)S%c===0&&(h[S]=0),S<c&&(g[S]=0);if(o===m7)for(k=1;k<c;++k){for(Y=0,S=k;S<f;S+=c)Y<h[S]&&(Y=h[S]);for(S=k;S<f;S+=c)h[S]=Y+p[k-1]}else if(o===tI){for(Y=0,S=0;S<f;++S)S%c&&Y<h[S]&&(Y=h[S]);for(S=0;S<f;++S)S%c&&(h[S]=Y+m)}else for(o=!1,k=1;k<c;++k)for(S=k;S<f;S+=c)h[S]+=p[k-1];if(a===m7)for(R=1;R<d;++R){for(Y=0,S=R*c,C=S+c;S<C;++S)Y<g[S]&&(Y=g[S]);for(S=R*c;S<C;++S)g[S]=Y+b[R-1]}else if(a===tI){for(Y=0,S=c;S<f;++S)Y<g[S]&&(Y=g[S]);for(S=c;S<f;++S)g[S]=Y+v}else for(a=!1,R=1;R<d;++R)for(S=R*c,C=S+c;S<C;++S)g[S]+=b[R-1];for(B=0,S=0;S<f;++S)B=h[S]+(S%c?B:0),x[S]+=B-t[S].x;for(k=0;k<c;++k)for(H=0,S=k;S<f;S+=c)H+=g[S],E[S]+=H-t[S].y;if(o&&ti(n.center,Qm)&&d>1)for(S=0;S<f;++S)O=o===tI?m:p[S%c],B=O-_[S].x2-t[S].x-x[S],B>0&&(x[S]+=B/2);if(a&&ti(n.center,Jm)&&c!==1)for(S=0;S<f;++S)O=a===tI?v:b[~~(S/c)],H=O-_[S].y2-t[S].y-E[S],H>0&&(E[S]+=H/2);for(S=0;S<f;++S)s.union(_[S].translate(x[S],E[S]));switch(B=ti(n.anchor,Cbt),H=ti(n.anchor,Sbt),ti(n.anchor,Qm)){case ha:B-=s.width();break;case p7:B-=s.width()/2}switch(ti(n.anchor,Jm)){case ha:H-=s.height();break;case p7:H-=s.height()/2}for(B=Math.round(B),H=Math.round(H),s.clear(),S=0;S<f;++S)t[S].mark.bounds.clear();for(S=0;S<f;++S)N=t[S],N.x+=x[S]+=B,N.y+=E[S]+=H,s.union(N.mark.bounds.union(N.bounds.translate(x[S],E[S]))),r&&e.dirty(N);return s}function Ubt(e,t,n){var r=jbt(t),i=r.marks,s=n.bounds===EY?qbt:Hbt,o=n.offset,a=n.columns||i.length,l=a<=0?1:Math.ceil(i.length/a),u=l*a,c,d,f,h,p,m,g;const b=gCe(e,i,n);b.empty()&&b.set(0,0,0,0),r.rowheaders&&(m=ti(n.headerBand,Jm,null),c=iI(e,r.rowheaders,i,a,l,-ti(o,"rowHeader"),Zae,0,s,"x1",0,a,1,m)),r.colheaders&&(m=ti(n.headerBand,Qm,null),d=iI(e,r.colheaders,i,a,a,-ti(o,"columnHeader"),Zae,1,s,"y1",0,1,a,m)),r.rowfooters&&(m=ti(n.footerBand,Jm,null),f=iI(e,r.rowfooters,i,a,l,ti(o,"rowFooter"),ele,0,s,"x2",a-1,a,1,m)),r.colfooters&&(m=ti(n.footerBand,Qm,null),h=iI(e,r.colfooters,i,a,a,ti(o,"columnFooter"),ele,1,s,"y2",u-a,1,a,m)),r.rowtitle&&(p=ti(n.titleAnchor,Jm),g=ti(o,"rowTitle"),g=p===ha?f+g:c-g,m=ti(n.titleBand,Jm,.5),nle(e,r.rowtitle,g,0,b,m)),r.coltitle&&(p=ti(n.titleAnchor,Qm),g=ti(o,"columnTitle"),g=p===ha?h+g:d-g,m=ti(n.titleBand,Qm,.5),nle(e,r.coltitle,g,1,b,m))}function qbt(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function Hbt(e,t){return e.bounds[t]}function iI(e,t,n,r,i,s,o,a,l,u,c,d,f,h){var p=n.length,m=0,g=0,b,v,x,E,_,C,S,k,R;if(!p)return m;for(b=c;b<p;b+=d)n[b]&&(m=o(m,l(n[b],u)));if(!t.length)return m;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),m+=s,v=0,E=t.length;v<E;++v)e.dirty(t[v]),t[v].mark.bounds.clear();for(b=c,v=0,E=t.length;v<E;++v,b+=d){for(C=t[v],_=C.mark.bounds,x=b;x>=0&&(S=n[x])==null;x-=f);a?(k=h==null?S.x:Math.round(S.bounds.x1+h*S.bounds.width()),R=m):(k=m,R=h==null?S.y:Math.round(S.bounds.y1+h*S.bounds.height())),_.union(C.bounds.translate(k-(C.x||0),R-(C.y||0))),C.x=k,C.y=R,e.dirty(C),g=o(g,_[u])}return g}function nle(e,t,n,r,i,s){if(t){e.dirty(t);var o=n,a=n;r?o=Math.round(i.x1+s*i.width()):a=Math.round(i.y1+s*i.height()),t.bounds.translate(o-(t.x||0),a-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=o,t.y=a,e.dirty(t)}}function Wbt(e,t){const n=e[t]||{};return(r,i)=>n[r]!=null?n[r]:e[r]!=null?e[r]:i}function Vbt(e,t){let n=-1/0;return e.forEach(r=>{r.offset!=null&&(n=Math.max(n,r.offset))}),n>-1/0?n:t}function Gbt(e,t,n,r,i,s,o){const a=Wbt(n,t),l=Vbt(e,a("offset",0)),u=a("anchor",yY),c=u===ha?1:u===p7?.5:0,d={align:m7,bounds:a("bounds",EY),columns:a("direction")==="vertical"?1:e.length,padding:a("margin",8),center:a("center"),nodirty:!0};switch(t){case Dc:d.anchor={x:Math.floor(r.x1)-l,column:ha,y:c*(o||r.height()+2*r.y1),row:u};break;case Fc:d.anchor={x:Math.ceil(r.x2)+l,y:c*(o||r.height()+2*r.y1),row:u};break;case Kw:d.anchor={y:Math.floor(i.y1)-l,row:ha,x:c*(s||i.width()+2*i.x1),column:u};break;case A0:d.anchor={y:Math.ceil(i.y2)+l,x:c*(s||i.width()+2*i.x1),column:u};break;case xbt:d.anchor={x:l,y:l};break;case Ebt:d.anchor={x:s-l,y:l,column:ha};break;case _bt:d.anchor={x:l,y:o-l,row:ha};break;case Tbt:d.anchor={x:s-l,y:o-l,column:ha,row:ha};break}return d}function Ybt(e,t){var n=t.items[0],r=n.datum,i=n.orient,s=n.bounds,o=n.x,a=n.y,l,u;return n._bounds?n._bounds.clear().union(s):n._bounds=s.clone(),s.clear(),Xbt(e,n,n.items[0].items[0]),s=Kbt(n,s),l=2*n.padding,u=2*n.padding,s.empty()||(l=Math.ceil(s.width()+l),u=Math.ceil(s.height()+u)),r.type===Rbt&&Qbt(n.items[0].items[0].items[0].items),i!==xY&&(n.x=o=0,n.y=a=0),n.width=l,n.height=u,zp(s.set(o,a,o+l,a+u),n),n.mark.bounds.clear().union(s),n}function Kbt(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function Xbt(e,t,n){var r=t.padding,i=r-n.x,s=r-n.y;if(!t.datum.title)(i||s)&&C_(e,n,i,s);else{var o=t.items[1].items[0],a=o.anchor,l=t.titlePadding||0,u=r-o.x,c=r-o.y;switch(o.orient){case Dc:i+=Math.ceil(o.bounds.width())+l;break;case Fc:case A0:break;default:s+=o.bounds.height()+l}switch((i||s)&&C_(e,n,i,s),o.orient){case Dc:c+=Z1(t,n,o,a,1,1);break;case Fc:u+=Z1(t,n,o,ha,0,0)+l,c+=Z1(t,n,o,a,1,1);break;case A0:u+=Z1(t,n,o,a,0,0),c+=Z1(t,n,o,ha,-1,0,1)+l;break;default:u+=Z1(t,n,o,a,0,0)}(u||c)&&C_(e,o,u,c),(u=Math.round(o.bounds.x1-r))<0&&(C_(e,n,-u,0),C_(e,o,-u,0))}}function Z1(e,t,n,r,i,s,o){const a=e.datum.type!=="symbol",l=n.datum.vgrad,u=a&&(s||!l)&&!o?t.items[0]:t,c=u.bounds[i?"y2":"x2"]-e.padding,d=l&&s?c:0,f=l&&s?0:c,h=i<=0?0:iY(n);return Math.round(r===yY?d:r===ha?f-h:.5*(c-h))}function C_(e,t,n,r){t.x+=n,t.y+=r,t.bounds.translate(n,r),t.mark.bounds.translate(n,r),e.dirty(t)}function Qbt(e){const t=e.reduce((n,r)=>(n[r.column]=Math.max(r.bounds.x2-r.x,n[r.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function Jbt(e,t,n,r,i){var s=t.items[0],o=s.frame,a=s.orient,l=s.anchor,u=s.offset,c=s.padding,d=s.items[0].items[0],f=s.items[1]&&s.items[1].items[0],h=a===Dc||a===Fc?r:n,p=0,m=0,g=0,b=0,v=0,x;if(o!==b4?a===Dc?(p=i.y2,h=i.y1):a===Fc?(p=i.y1,h=i.y2):(p=i.x1,h=i.x2):a===Dc&&(p=r,h=0),x=l===yY?p:l===ha?h:(p+h)/2,f&&f.text){switch(a){case Kw:case A0:v=d.bounds.height()+c;break;case Dc:b=d.bounds.width()+c;break;case Fc:b=-d.bounds.width()-c;break}Fo.clear().union(f.bounds),Fo.translate(b-(f.x||0),v-(f.y||0)),Mb(f,"x",b)|Mb(f,"y",v)&&(e.dirty(f),f.bounds.clear().union(Fo),f.mark.bounds.clear().union(Fo),e.dirty(f)),Fo.clear().union(f.bounds)}else Fo.clear();switch(Fo.union(d.bounds),a){case Kw:m=x,g=i.y1-Fo.height()-u;break;case Dc:m=i.x1-Fo.width()-u,g=x;break;case Fc:m=i.x2+Fo.width()+u,g=x;break;case A0:m=x,g=i.y2+u;break;default:m=s.x,g=s.y}return Mb(s,"x",m)|Mb(s,"y",g)&&(Fo.translate(m,g),e.dirty(s),s.bounds.clear().union(Fo),t.bounds.clear().union(Fo),e.dirty(s)),s.bounds}function yCe(e){qe.call(this,null,e)}bt(yCe,qe,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(r=>{e.layout&&Ubt(n,r,e.layout),ewt(n,r,e)}),Zbt(e.mark.group)?t.reflow():t}});function Zbt(e){return e&&e.mark.role!=="legend-entry"}function ewt(e,t,n){var r=t.items,i=Math.max(0,t.width||0),s=Math.max(0,t.height||0),o=new Si().set(0,0,i,s),a=o.clone(),l=o.clone(),u=[],c,d,f,h,p,m;for(p=0,m=r.length;p<m;++p)switch(d=r[p],d.role){case vY:h=Mbt(d)?a:l,h.union(Fbt(e,d,i,s));break;case bY:c=d;break;case wY:u.push(Ybt(e,d));break;case Abt:case kbt:case nCe:case rCe:case iCe:case sCe:case oCe:case aCe:a.union(d.bounds),l.union(d.bounds);break;default:o.union(d.bounds)}if(u.length){const g={};u.forEach(b=>{f=b.orient||Fc,f!==xY&&(g[f]||(g[f]=[])).push(b)});for(const b in g){const v=g[b];gCe(e,v,Gbt(v,b,n.legends,a,l,i,s))}u.forEach(b=>{const v=b.bounds;if(v.equals(b._bounds)||(b.bounds=b._bounds,e.dirty(b),b.bounds=v,e.dirty(b)),n.autosize&&(n.autosize.type===lCe||n.autosize.type===uCe||n.autosize.type===cCe))switch(b.orient){case Dc:case Fc:o.add(v.x1,0).add(v.x2,0);break;case Kw:case A0:o.add(0,v.y1).add(0,v.y2)}else o.union(v)})}o.union(a).union(l),c&&o.union(Jbt(e,c,i,s,o)),t.clip&&o.set(0,0,t.width||0,t.height||0),twt(e,t,o,n)}function twt(e,t,n,r){const i=r.autosize||{},s=i.type;if(e._autosize<1||!s)return;let o=e._width,a=e._height,l=Math.max(0,t.width||0),u=Math.max(0,Math.ceil(-n.x1)),c=Math.max(0,t.height||0),d=Math.max(0,Math.ceil(-n.y1));const f=Math.max(0,Math.ceil(n.x2-l)),h=Math.max(0,Math.ceil(n.y2-c));if(i.contains===Ibt){const p=e.padding();o-=p.left+p.right,a-=p.top+p.bottom}s===xY?(u=0,d=0,l=o,c=a):s===lCe?(l=Math.max(0,o-u-f),c=Math.max(0,a-d-h)):s===uCe?(l=Math.max(0,o-u-f),a=c+d+h):s===cCe?(o=l+u+f,c=Math.max(0,a-d-h)):s===Dbt&&(o=l+u+f,a=c+d+h),e._resizeView(o,a,l,c,[u,d],i.resize)}const nwt=Object.freeze(Object.defineProperty({__proto__:null,bound:dCe,identifier:_Y,mark:fCe,overlap:hCe,render:mCe,viewlayout:yCe},Symbol.toStringTag,{value:"Module"}));function vCe(e){qe.call(this,null,e)}bt(vCe,qe,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.scale,o=e.count==null?e.values?e.values.length:10:e.count,a=jG(s,o,e.minstep),l=e.format||G2e(n,s,a,e.formatSpecifier,e.formatType,!!e.values),u=e.values?V2e(s,e.values,a):BG(s,a);return i&&(r.rem=i),i=u.map((c,d)=>hr({index:d/(u.length-1||1),value:c,label:l(c)})),e.extra&&i.length&&i.push(hr({index:-1,extra:{value:i[0].value},label:""})),r.source=i,r.add=i,this.value=i,r}});function bCe(e){qe.call(this,null,e)}function rwt(){return hr({})}function iwt(e){const t=tE().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}bt(bCe,qe,{transform(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||rwt,s=e.key||Kt,o=this.value;return Ge(r.encode)&&(r.encode=null),o&&(e.modified("key")||t.modified(s))&&He("DataJoin does not support modified key function or fields."),o||(t=t.addAll(),this.value=o=iwt(s)),t.visit(t.ADD,a=>{const l=s(a);let u=o.get(l);u?u.exit?(o.empty--,r.add.push(u)):r.mod.push(u):(u=i(a),o.set(l,u),r.add.push(u)),u.datum=a,u.exit=!1}),t.visit(t.MOD,a=>{const l=s(a),u=o.get(l);u&&(u.datum=a,r.mod.push(u))}),t.visit(t.REM,a=>{const l=s(a),u=o.get(l);a===u.datum&&!u.exit&&(r.rem.push(u),u.exit=!0,++o.empty)}),t.changed(t.ADD_MOD)&&r.modifies("datum"),(t.clean()||e.clean&&o.empty>n.cleanThreshold)&&n.runAfter(o.clean),r}});function wCe(e){qe.call(this,null,e)}bt(wCe,qe,{transform(e,t){var n=t.fork(t.ADD_REM),r=e.mod||!1,i=e.encoders,s=t.encode;if(Ge(s))if(n.changed()||s.every(d=>i[d]))s=s[0],n.encode=null;else return t.StopPropagation;var o=s==="enter",a=i.update||Tm,l=i.enter||Tm,u=i.exit||Tm,c=(s&&!o?i[s]:a)||Tm;if(t.changed(t.ADD)&&(t.visit(t.ADD,d=>{l(d,e),a(d,e)}),n.modifies(l.output),n.modifies(a.output),c!==Tm&&c!==a&&(t.visit(t.ADD,d=>{c(d,e)}),n.modifies(c.output))),t.changed(t.REM)&&u!==Tm&&(t.visit(t.REM,d=>{u(d,e)}),n.modifies(u.output)),o||c!==Tm){const d=t.MOD|(e.modified()?t.REFLOW:0);o?(t.visit(d,f=>{const h=l(f,e)||r;(c(f,e)||h)&&n.mod.push(f)}),n.mod.length&&n.modifies(l.output)):t.visit(d,f=>{(c(f,e)||r)&&n.mod.push(f)}),n.mod.length&&n.modifies(c.output)}return n.changed()?n:t.StopPropagation}});function xCe(e){qe.call(this,[],e)}bt(xCe,qe,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.type||$3,o=e.scale,a=+e.limit,l=jG(o,e.count==null?5:e.count,e.minstep),u=!!e.values||s===$3,c=e.format||Q2e(n,o,l,s,e.formatSpecifier,e.formatType,u),d=e.values||X2e(o,l),f,h,p,m,g;return i&&(r.rem=i),s===$3?(a&&d.length>a?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),i=d.slice(0,a-1),g=!0):i=d,gn(p=e.size)?(!e.values&&o(i[0])===0&&(i=i.slice(1)),m=i.reduce((b,v)=>Math.max(b,p(v,e)),0)):p=Jo(m=p||8),i=i.map((b,v)=>hr({index:v,label:c(b,v,i),value:b,offset:m,size:p(b,e)})),g&&(g=d[i.length],i.push(hr({index:i.length,label:`${d.length-i.length} entries`,value:g,offset:m,size:p(g,e)})))):s===Dyt?(f=o.domain(),h=MG(o,f[0],Rn(f)),d.length<3&&!e.values&&f[0]!==Rn(f)&&(d=[f[0],Rn(f)]),i=d.map((b,v)=>hr({index:v,label:c(b,v,d),value:b,perc:h(b)}))):(p=d.length-1,h=Uyt(o),i=d.map((b,v)=>hr({index:v,label:c(b,v,d),value:b,perc:v?h(b):0,perc2:v===p?1:h(d[v+1])}))),r.source=i,r.add=i,this.value=i,r}});const swt=e=>e.source.x,owt=e=>e.source.y,awt=e=>e.target.x,lwt=e=>e.target.y;function TY(e){qe.call(this,{},e)}TY.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};bt(TY,qe,{transform(e,t){var n=e.sourceX||swt,r=e.sourceY||owt,i=e.targetX||awt,s=e.targetY||lwt,o=e.as||"path",a=e.orient||"vertical",l=e.shape||"line",u=rle.get(l+"-"+a)||rle.get(l);return u||He("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,c=>{c[o]=u(n(c),r(c),i(c),s(c))}),t.reflow(e.modified()).modifies(o)}});const ECe=(e,t,n,r)=>"M"+e+","+t+"L"+n+","+r,uwt=(e,t,n,r)=>ECe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),_Ce=(e,t,n,r)=>{var i=n-e,s=r-t,o=Math.hypot(i,s)/2,a=180*Math.atan2(s,i)/Math.PI;return"M"+e+","+t+"A"+o+","+o+" "+a+" 0 1 "+n+","+r},cwt=(e,t,n,r)=>_Ce(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),TCe=(e,t,n,r)=>{const i=n-e,s=r-t,o=.2*(i+s),a=.2*(s-i);return"M"+e+","+t+"C"+(e+o)+","+(t+a)+" "+(n+a)+","+(r-o)+" "+n+","+r},dwt=(e,t,n,r)=>TCe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),fwt=(e,t,n,r)=>"M"+e+","+t+"V"+r+"H"+n,hwt=(e,t,n,r)=>"M"+e+","+t+"H"+n+"V"+r,pwt=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),l=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*i+","+t*s+"A"+t+","+t+" 0 0,"+(l?1:0)+" "+t*o+","+t*a+"L"+r*o+","+r*a},mwt=(e,t,n,r)=>{const i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r},gwt=(e,t,n,r)=>{const i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r},ywt=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),l=(t+r)/2;return"M"+t*i+","+t*s+"C"+l*i+","+l*s+" "+l*o+","+l*a+" "+r*o+","+r*a},rle=tE({line:ECe,"line-radial":uwt,arc:_Ce,"arc-radial":cwt,curve:TCe,"curve-radial":dwt,"orthogonal-horizontal":fwt,"orthogonal-vertical":hwt,"orthogonal-radial":pwt,"diagonal-horizontal":mwt,"diagonal-vertical":gwt,"diagonal-radial":ywt});function CY(e){qe.call(this,null,e)}CY.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};bt(CY,qe,{transform(e,t){var n=e.as||["startAngle","endAngle"],r=n[0],i=n[1],s=e.field||Qx,o=e.startAngle||0,a=e.endAngle!=null?e.endAngle:2*Math.PI,l=t.source,u=l.map(s),c=u.length,d=o,f=(a-o)/F1e(u),h=va(c),p,m,g;for(e.sort&&h.sort((b,v)=>u[b]-u[v]),p=0;p<c;++p)g=u[h[p]],m=l[h[p]],m[r]=d,m[i]=d+=g*f;return this.value=u,t.reflow(e.modified()).modifies(n)}});const vwt=5;function bwt(e){const t=e.type;return!e.bins&&(t===qw||t===wS||t===xS)}function CCe(e){return $G(e)&&e!==yf}const wwt=ed(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function SCe(e){qe.call(this,null,e),this.modified(!0)}bt(SCe,qe,{transform(e,t){var n=t.dataflow,r=this.value,i=xwt(e);(!r||i!==r.type)&&(this.value=r=Vn(i)());for(i in e)if(!wwt[i]){if(i==="padding"&&CCe(r.type))continue;gn(r[i])?r[i](e[i]):n.warn("Unsupported scale property: "+i)}return Awt(r,e,Swt(r,e,_wt(r,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function xwt(e){var t=e.type,n="",r;return t===yf?yf+"-"+qw:(Ewt(e)&&(r=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=r===2?yf+"-":r===3?aE+"-":""),(n+t||qw).toLowerCase())}function Ewt(e){const t=e.type;return $G(t)&&t!==tv&&t!==nv&&(e.scheme||e.range&&e.range.length&&e.range.every(Tt))}function _wt(e,t,n){const r=Twt(e,t.domainRaw,n);if(r>-1)return r;var i=t.domain,s=e.type,o=t.zero||t.zero===void 0&&bwt(e),a,l;if(!i)return 0;if((o||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(a=(i=i.slice()).length-1||1,o&&(i[0]>0&&(i[0]=0),i[a]<0&&(i[a]=0)),t.domainMin!=null&&(i[0]=t.domainMin),t.domainMax!=null&&(i[a]=t.domainMax),t.domainMid!=null)){l=t.domainMid;const u=l>i[a]?a+1:l<i[0]?0:a;u!==a&&n.warn("Scale domainMid exceeds domain min or max.",l),i.splice(u,0,l)}return CCe(s)&&t.padding&&i[0]!==Rn(i)&&(i=Cwt(s,i,t.range,t.padding,t.exponent,t.constant)),e.domain(ACe(s,i,n)),s===DG&&e.unknown(t.domainImplicit?EB:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&jG(e,t.nice)||null),i.length}function Twt(e,t,n){return t?(e.domain(ACe(e.type,t,n)),t.length):-1}function Cwt(e,t,n,r,i,s){var o=Math.abs(Rn(n)-n[0]),a=o/(o-2*r),l=e===Sp?O$(t,null,a):e===xS?JT(t,null,a,.5):e===wS?JT(t,null,a,i||1):e===i4?$$(t,null,a,s||1):N$(t,null,a);return t=t.slice(),t[0]=l[0],t[t.length-1]=l[1],t}function ACe(e,t,n){if(j2e(e)){var r=Math.abs(t.reduce((i,s)=>i+(s<0?-1:s>0?1:0),0));r!==t.length&&n.warn("Log scale domain includes zero: "+ft(t))}return t}function Swt(e,t,n){let r=t.bins;if(r&&!Ge(r)){const i=e.domain(),s=i[0],o=Rn(i),a=r.step;let l=r.start==null?s:r.start,u=r.stop==null?o:r.stop;a||He("Scale bins parameter missing step property."),l<s&&(l=a*Math.ceil(s/a)),u>o&&(u=a*Math.floor(o/a)),r=va(l,u+a/2,a)}return r?e.bins=r:e.bins&&delete e.bins,e.type===PG&&(r?!t.domain&&!t.domainRaw&&(e.domain(r),n=r.length):e.bins=e.domain()),n}function Awt(e,t,n){var r=e.type,i=t.round||!1,s=t.range;if(t.rangeStep!=null)s=kwt(r,t,n);else if(t.scheme&&(s=Iwt(r,t,n),gn(s))){if(e.interpolator)return e.interpolator(s);He(`Scale type ${r} does not support interpolating color schemes.`)}if(s&&B2e(r))return e.interpolator(a4(g7(s,t.reverse),t.interpolate,t.interpolateGamma));s&&t.interpolate&&e.interpolate?e.interpolate(LG(t.interpolate,t.interpolateGamma)):gn(e.round)?e.round(i):gn(e.rangeRound)&&e.interpolate(i?sS:q0),s&&e.range(g7(s,t.reverse))}function kwt(e,t,n){e!==N2e&&e!==e7&&He("Only band and point scales support rangeStep.");var r=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,i=e===e7?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*r4(n,i,r)]}function Iwt(e,t,n){var r=t.schemeExtent,i,s;return Ge(t.scheme)?s=a4(t.scheme,t.interpolate,t.interpolateGamma):(i=t.scheme.toLowerCase(),s=FG(i),s||He(`Unrecognized scheme name: ${t.scheme}`)),n=e===o4?n+1:e===PG?n-1:e===Hw||e===s4?+t.schemeCount||vwt:n,B2e(e)?ile(s,r,t.reverse):gn(s)?q2e(ile(s,r),n):e===DG?s:s.slice(0,n)}function ile(e,t,n){return gn(e)&&(t||n)?U2e(e,g7(t||[0,1],n)):e}function g7(e,t){return t?e.slice().reverse():e}function kCe(e){qe.call(this,null,e)}bt(kCe,qe,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(Wv(e.sort)),this.modified(n),t}});const sle="zero",ICe="center",RCe="normalize",DCe=["y0","y1"];function SY(e){qe.call(this,null,e)}SY.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:sle,values:[sle,ICe,RCe]},{name:"as",type:"string",array:!0,length:2,default:DCe}]};bt(SY,qe,{transform(e,t){var n=e.as||DCe,r=n[0],i=n[1],s=Wv(e.sort),o=e.field||Qx,a=e.offset===ICe?Rwt:e.offset===RCe?Dwt:Pwt,l,u,c,d;for(l=Nwt(t.source,e.groupby,s,o),u=0,c=l.length,d=l.max;u<c;++u)a(l[u],d,o,r,i);return t.reflow(e.modified()).modifies(n)}});function Rwt(e,t,n,r,i){for(var s=(t-e.sum)/2,o=e.length,a=0,l;a<o;++a)l=e[a],l[r]=s,l[i]=s+=Math.abs(n(l))}function Dwt(e,t,n,r,i){for(var s=1/e.sum,o=0,a=e.length,l=0,u=0,c;l<a;++l)c=e[l],c[r]=o,c[i]=o=s*(u+=Math.abs(n(c)))}function Pwt(e,t,n,r,i){for(var s=0,o=0,a=e.length,l=0,u,c;l<a;++l)c=e[l],u=+n(c),u<0?(c[r]=o,c[i]=o+=u):(c[r]=s,c[i]=s+=u)}function Nwt(e,t,n,r){var i=[],s=m=>m(c),o,a,l,u,c,d,f,h,p;if(t==null)i.push(e.slice());else for(o={},a=0,l=e.length;a<l;++a)c=e[a],d=t.map(s),f=o[d],f||(o[d]=f=[],i.push(f)),f.push(c);for(d=0,p=0,u=i.length;d<u;++d){for(f=i[d],a=0,h=0,l=f.length;a<l;++a)h+=Math.abs(r(f[a]));f.sum=h,h>p&&(p=h),n&&f.sort(n)}return i.max=p,i}const Owt=Object.freeze(Object.defineProperty({__proto__:null,axisticks:vCe,datajoin:bCe,encode:wCe,legendentries:xCe,linkpath:TY,pie:CY,scale:SCe,sortitems:kCe,stack:SY},Symbol.toStringTag,{value:"Module"}));var $wt=Math.abs,y7=Math.cos,eN=Math.sin,Mwt=1e-6,PCe=Math.PI,v7=PCe/2,ole=Lwt(2);function ale(e){return e>1?v7:e<-1?-v7:Math.asin(e)}function Lwt(e){return e>0?Math.sqrt(e):0}function Fwt(e,t){var n=e*eN(t),r=30,i;do t-=i=(t+eN(t)-n)/(1+y7(t));while($wt(i)>Mwt&&--r>0);return t/2}function jwt(e,t,n){function r(i,s){return[e*i*y7(s=Fwt(n,s)),t*eN(s)]}return r.invert=function(i,s){return s=ale(s/t),[i/(e*y7(s)),ale((2*s+eN(2*s))/n)]},r}var Bwt=jwt(ole/v7,ole,PCe);function zwt(){return Hf(Bwt).scale(169.529)}const Uwt=gwe(),b7=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function qwt(e,t){return function n(){const r=t();return r.type=e,r.path=gwe().projection(r),r.copy=r.copy||function(){const i=n();return b7.forEach(s=>{r[s]&&i[s](r[s]())}),i.path.pointRadius(r.path.pointRadius()),i},L2e(r)}}function AY(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(tN[e]=qwt(e,t),this):tN[e]||null}function NCe(e){return e&&e.path||Uwt}const tN={albers:vwe,albersusa:wot,azimuthalequalarea:xot,azimuthalequidistant:Eot,conicconformal:Cot,conicequalarea:wP,conicequidistant:kot,equalEarth:Rot,equirectangular:Sot,gnomonic:Dot,identity:Pot,mercator:_ot,mollweide:zwt,naturalEarth1:Not,orthographic:Oot,stereographic:$ot,transversemercator:Mot};for(const e in tN)AY(e,tN[e]);function Hwt(){}const wh=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function OCe(){var e=1,t=1,n=a;function r(l,u){return u.map(c=>i(l,c))}function i(l,u){var c=[],d=[];return s(l,u,f=>{n(f,l,u),Wwt(f)>0?c.push([f]):d.push(f)}),d.forEach(f=>{for(var h=0,p=c.length,m;h<p;++h)if(Vwt((m=c[h])[0],f)!==-1){m.push(f);return}}),{type:"MultiPolygon",value:u,coordinates:c}}function s(l,u,c){var d=[],f=[],h,p,m,g,b,v;for(h=p=-1,g=l[0]>=u,wh[g<<1].forEach(x);++h<e-1;)m=g,g=l[h+1]>=u,wh[m|g<<1].forEach(x);for(wh[g<<0].forEach(x);++p<t-1;){for(h=-1,g=l[p*e+e]>=u,b=l[p*e]>=u,wh[g<<1|b<<2].forEach(x);++h<e-1;)m=g,g=l[p*e+e+h+1]>=u,v=b,b=l[p*e+h+1]>=u,wh[m|g<<1|b<<2|v<<3].forEach(x);wh[g|b<<3].forEach(x)}for(h=-1,b=l[p*e]>=u,wh[b<<2].forEach(x);++h<e-1;)v=b,b=l[p*e+h+1]>=u,wh[b<<2|v<<3].forEach(x);wh[b<<3].forEach(x);function x(E){var _=[E[0][0]+h,E[0][1]+p],C=[E[1][0]+h,E[1][1]+p],S=o(_),k=o(C),R,O;(R=f[S])?(O=d[k])?(delete f[R.end],delete d[O.start],R===O?(R.ring.push(C),c(R.ring)):d[R.start]=f[O.end]={start:R.start,end:O.end,ring:R.ring.concat(O.ring)}):(delete f[R.end],R.ring.push(C),f[R.end=k]=R):(R=d[k])?(O=f[S])?(delete d[R.start],delete f[O.end],R===O?(R.ring.push(C),c(R.ring)):d[O.start]=f[R.end]={start:O.start,end:R.end,ring:O.ring.concat(R.ring)}):(delete d[R.start],R.ring.unshift(_),d[R.start=S]=R):d[S]=f[k]={start:S,end:k,ring:[_,C]}}}function o(l){return l[0]*2+l[1]*(e+1)*4}function a(l,u,c){l.forEach(d=>{var f=d[0],h=d[1],p=f|0,m=h|0,g,b=u[m*e+p];f>0&&f<e&&p===f&&(g=u[m*e+p-1],d[0]=f+(c-g)/(b-g)-.5),h>0&&h<t&&m===h&&(g=u[(m-1)*e+p],d[1]=h+(c-g)/(b-g)-.5)})}return r.contour=i,r.size=function(l){if(!arguments.length)return[e,t];var u=Math.floor(l[0]),c=Math.floor(l[1]);return u>=0&&c>=0||He("invalid size"),e=u,t=c,r},r.smooth=function(l){return arguments.length?(n=l?a:Hwt,r):n===a},r}function Wwt(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}function Vwt(e,t){for(var n=-1,r=t.length,i;++n<r;)if(i=Gwt(e,t[n]))return i;return 0}function Gwt(e,t){for(var n=t[0],r=t[1],i=-1,s=0,o=e.length,a=o-1;s<o;a=s++){var l=e[s],u=l[0],c=l[1],d=e[a],f=d[0],h=d[1];if(Ywt(l,d,t))return 0;c>r!=h>r&&n<(f-u)*(r-c)/(h-c)+u&&(i=-i)}return i}function Ywt(e,t,n){var r;return Kwt(e,t,n)&&Xwt(e[r=+(e[0]===t[0])],n[r],t[r])}function Kwt(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function Xwt(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function $Ce(e,t,n){return function(r){var i=Zc(r),s=n?Math.min(i[0],0):i[0],o=i[1],a=o-s,l=t?b0(s,o,e):a/(e+1);return va(s+l,o,l)}}function kY(e){qe.call(this,null,e)}kY.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};bt(kY,qe,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=e.field||Co,s=OCe().smooth(e.smooth!==!1),o=e.thresholds||Qwt(r,i,e),a=e.as===null?null:e.as||"contour",l=[];return r.forEach(u=>{const c=i(u),d=s.size([c.width,c.height])(c.values,Ge(o)?o:o(c.values));Jwt(d,c,u,e),d.forEach(f=>{l.push(U$(u,hr(a!=null?{[a]:f}:f)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=l,n}});function Qwt(e,t,n){const r=$Ce(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?r:r(e.map(i=>Iy(t(i).values)))}function Jwt(e,t,n,r){let i=r.scale||t.scale,s=r.translate||t.translate;if(gn(i)&&(i=i(n,r)),gn(s)&&(s=s(n,r)),(i===1||i==null)&&!s)return;const o=(Zn(i)?i:i[0])||1,a=(Zn(i)?i:i[1])||1,l=s&&s[0]||0,u=s&&s[1]||0;e.forEach(MCe(t,o,a,l,u))}function MCe(e,t,n,r,i){const s=e.x1||0,o=e.y1||0,a=t*n<0;function l(d){d.forEach(u)}function u(d){a&&d.reverse(),d.forEach(c)}function c(d){d[0]=(d[0]-s)*t+r,d[1]=(d[1]-o)*n+i}return function(d){return d.coordinates.forEach(l),d}}function lle(e,t,n){const r=e>=0?e:eG(t,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function $L(e){return gn(e)?e:Jo(+e)}function LCe(){var e=l=>l[0],t=l=>l[1],n=Qx,r=[-1,-1],i=960,s=500,o=2;function a(l,u){const c=lle(r[0],l,e)>>o,d=lle(r[1],l,t)>>o,f=c?c+2:0,h=d?d+2:0,p=2*f+(i>>o),m=2*h+(s>>o),g=new Float32Array(p*m),b=new Float32Array(p*m);let v=g;l.forEach(E=>{const _=f+(+e(E)>>o),C=h+(+t(E)>>o);_>=0&&_<p&&C>=0&&C<m&&(g[_+C*p]+=+n(E))}),c>0&&d>0?(eb(p,m,g,b,c),tb(p,m,b,g,d),eb(p,m,g,b,c),tb(p,m,b,g,d),eb(p,m,g,b,c),tb(p,m,b,g,d)):c>0?(eb(p,m,g,b,c),eb(p,m,b,g,c),eb(p,m,g,b,c),v=b):d>0&&(tb(p,m,g,b,d),tb(p,m,b,g,d),tb(p,m,g,b,d),v=b);const x=u?Math.pow(2,-2*o):1/F1e(v);for(let E=0,_=p*m;E<_;++E)v[E]*=x;return{values:v,scale:1<<o,width:p,height:m,x1:f,y1:h,x2:f+(i>>o),y2:h+(s>>o)}}return a.x=function(l){return arguments.length?(e=$L(l),a):e},a.y=function(l){return arguments.length?(t=$L(l),a):t},a.weight=function(l){return arguments.length?(n=$L(l),a):n},a.size=function(l){if(!arguments.length)return[i,s];var u=+l[0],c=+l[1];return u>=0&&c>=0||He("invalid size"),i=u,s=c,a},a.cellSize=function(l){return arguments.length?((l=+l)>=1||He("invalid cell size"),o=Math.floor(Math.log(l)/Math.LN2),a):1<<o},a.bandwidth=function(l){return arguments.length?(l=St(l),l.length===1&&(l=[+l[0],+l[0]]),l.length!==2&&He("invalid bandwidth"),r=l,a):r},a}function eb(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<t;++o)for(let a=0,l=0;a<e+i;++a)a<e&&(l+=n[a+o*e]),a>=i&&(a>=s&&(l-=n[a-s+o*e]),r[a-i+o*e]=l/Math.min(a+1,e-1+s-a,s))}function tb(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<e;++o)for(let a=0,l=0;a<t+i;++a)a<t&&(l+=n[o+a*e]),a>=i&&(a>=s&&(l-=n[o+(a-s)*e]),r[o+(a-i)*e]=l/Math.min(a+1,t-1+s-a,s))}function IY(e){qe.call(this,null,e)}IY.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const Zwt=["x","y","weight","size","cellSize","bandwidth"];function FCe(e,t){return Zwt.forEach(n=>t[n]!=null?e[n](t[n]):0),e}bt(IY,qe,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=ext(r,e.groupby),s=(e.groupby||[]).map(Ci),o=FCe(LCe(),e),a=e.as||"grid",l=[];function u(c,d){for(let f=0;f<s.length;++f)c[s[f]]=d[f];return c}return l=i.map(c=>hr(u({[a]:o(c,e.counts)},c.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=l,n}});function ext(e,t){var n=[],r=c=>c(a),i,s,o,a,l,u;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],l=t.map(r),u=i[l],u||(i[l]=u=[],u.dims=l,n.push(u)),u.push(a);return n}function RY(e){qe.call(this,null,e)}RY.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};bt(RY,qe,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=OCe().smooth(e.smooth!==!1),i=e.values,s=e.thresholds||$Ce(e.count||10,e.nice,!!i),o=e.size,a,l;return i||(i=t.materialize(t.SOURCE).source,a=FCe(LCe(),e)(i,!0),l=MCe(a,a.scale||1,a.scale||1,0,0),o=[a.width,a.height],i=a.values),s=Ge(s)?s:s(i),i=r.size(o)(i,s),l&&i.forEach(l),this.value&&(n.rem=this.value),this.value=n.source=n.add=(i||[]).map(hr),n}});const w7="Feature",DY="FeatureCollection",txt="MultiPoint";function PY(e){qe.call(this,null,e)}PY.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};bt(PY,qe,{transform(e,t){var n=this._features,r=this._points,i=e.fields,s=i&&i[0],o=i&&i[1],a=e.geojson||!i&&Co,l=t.ADD,u;u=e.modified()||t.changed(t.REM)||t.modified(Vo(a))||s&&t.modified(Vo(s))||o&&t.modified(Vo(o)),(!this.value||u)&&(l=t.SOURCE,this._features=n=[],this._points=r=[]),a&&t.visit(l,c=>n.push(a(c))),s&&o&&(t.visit(l,c=>{var d=s(c),f=o(c);d!=null&&f!=null&&(d=+d)===d&&(f=+f)===f&&r.push([d,f])}),n=n.concat({type:w7,geometry:{type:txt,coordinates:r}})),this.value={type:DY,features:n}}});function NY(e){qe.call(this,null,e)}NY.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};bt(NY,qe,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||Co,s=e.as||"path",o=n.SOURCE;!r||e.modified()?(this.value=r=NCe(e.projection),n.materialize().reflow()):o=i===Co||t.modified(i.fields)?n.ADD_MOD:n.ADD;const a=nxt(r,e.pointRadius);return n.visit(o,l=>l[s]=r(i(l))),r.pointRadius(a),n.modifies(s)}});function nxt(e,t){const n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function OY(e){qe.call(this,null,e)}OY.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};bt(OY,qe,{transform(e,t){var n=e.projection,r=e.fields[0],i=e.fields[1],s=e.as||["x","y"],o=s[0],a=s[1],l;function u(c){const d=n([r(c),i(c)]);d?(c[o]=d[0],c[a]=d[1]):(c[o]=void 0,c[a]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,u):(l=t.modified(r.fields)||t.modified(i.fields),t.visit(l?t.ADD_MOD:t.ADD,u)),t.modifies(s)}});function $Y(e){qe.call(this,null,e)}$Y.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};bt($Y,qe,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.as||"shape",s=n.ADD;return(!r||e.modified())&&(this.value=r=rxt(NCe(e.projection),e.field||Zl("datum"),e.pointRadius),n.materialize().reflow(),s=n.SOURCE),n.visit(s,o=>o[i]=r),n.modifies(i)}});function rxt(e,t,n){const r=n==null?i=>e(t(i)):i=>{var s=e.pointRadius(),o=e.pointRadius(n)(t(i));return e.pointRadius(s),o};return r.context=i=>(e.context(i),r),r}function MY(e){qe.call(this,[],e),this.generator=Zst()}MY.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};bt(MY,qe,{transform(e,t){var n=this.value,r=this.generator,i;if(!n.length||e.modified())for(const s in e)gn(r[s])&&r[s](e[s]);return i=r(),n.length?t.mod.push(z_e(n[0],i)):t.add.push(hr(i)),n[0]=i,t}});function LY(e){qe.call(this,null,e)}LY.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};bt(LY,qe,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,r=e.resolve==="shared",i=e.field||Co,s=sxt(e.opacity,e),o=ixt(e.color,e),a=e.as||"image",l={$x:0,$y:0,$value:0,$max:r?Iy(n.map(u=>Iy(i(u).values))):0};return n.forEach(u=>{const c=i(u),d=hn({},u,l);r||(d.$max=Iy(c.values||[])),u[a]=oxt(c,d,o.dep?o:Jo(o(d)),s.dep?s:Jo(s(d)))}),t.reflow(!0).modifies(a)}});function ixt(e,t){let n;return gn(e)?(n=r=>Sf(e(r,t)),n.dep=jCe(e)):n=Jo(Sf(e||"#888")),n}function sxt(e,t){let n;return gn(e)?(n=r=>e(r,t),n.dep=jCe(e)):e?n=Jo(e):(n=r=>r.$value/r.$max||0,n.dep=!0),n}function jCe(e){if(!gn(e))return!1;const t=ed(Vo(e));return t.$x||t.$y||t.$value||t.$max}function oxt(e,t,n,r){const i=e.width,s=e.height,o=e.x1||0,a=e.y1||0,l=e.x2||i,u=e.y2||s,c=e.values,d=c?g=>c[g]:qm,f=l0(l-o,u-a),h=f.getContext("2d"),p=h.getImageData(0,0,l-o,u-a),m=p.data;for(let g=a,b=0;g<u;++g){t.$y=g-a;for(let v=o,x=g*i;v<l;++v,b+=4){t.$x=v-o,t.$value=d(v+x);const E=n(t);m[b+0]=E.r,m[b+1]=E.g,m[b+2]=E.b,m[b+3]=~~(255*r(t))}}return h.putImageData(p,0,0),f}function BCe(e){qe.call(this,null,e),this.modified(!0)}bt(BCe,qe,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=lxt(e.type),b7.forEach(r=>{e[r]!=null&&ule(n,r,e[r])})):b7.forEach(r=>{e.modified(r)&&ule(n,r,e[r])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&axt(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function axt(e,t){const n=uxt(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function lxt(e){const t=AY((e||"mercator").toLowerCase());return t||He("Unrecognized projection type: "+e),t()}function ule(e,t,n){gn(e[t])&&e[t](n)}function uxt(e){return e=St(e),e.length===1?e[0]:{type:DY,features:e.reduce((t,n)=>t.concat(cxt(n)),[])}}function cxt(e){return e.type===DY?e.features:St(e).filter(t=>t!=null).map(t=>t.type===w7?t:{type:w7,geometry:t})}const dxt=Object.freeze(Object.defineProperty({__proto__:null,contour:RY,geojson:PY,geopath:NY,geopoint:OY,geoshape:$Y,graticule:MY,heatmap:LY,isocontour:kY,kde2d:IY,projection:BCe},Symbol.toStringTag,{value:"Module"})),cle={center:Vit,collide:dst,nbody:Est,link:hst,x:_st,y:Tst},x2="forces",x7=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],fxt=["static","iterations"],zCe=["x","y","vx","vy"];function FY(e){qe.call(this,null,e)}FY.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:zCe}]};bt(FY,qe,{transform(e,t){var n=this.value,r=t.changed(t.ADD_REM),i=e.modified(x7),s=e.iterations||300;if(n?(r&&(t.modifies("index"),n.nodes(t.source)),(i||t.changed(t.MOD))&&UCe(n,e,0,t)):(this.value=n=pxt(t.source,e),n.on("tick",hxt(t.dataflow,this)),e.static||(r=!0,n.tick()),t.modifies("index")),i||r||e.modified(fxt)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/s)),e.static)for(n.stop();--s>=0;)n.tick();else if(n.stopped()&&n.restart(),!r)return t.StopPropagation}return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let a=this._argops,l=0,u=a.length,c;l<u;++l)if(c=a[l],!(c.name!==x2||c.op._argval.force!=="link")){for(var r=c.op._argops,i=0,s=r.length,o;i<s;++i)if(r[i].name==="links"&&(o=r[i].op.source)){n.pulse(o,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(zCe)}});function hxt(e,t){return()=>e.touch(t).run()}function pxt(e,t){const n=xst(e),r=n.stop,i=n.restart;let s=!1;return n.stopped=()=>s,n.restart=()=>(s=!1,i()),n.stop=()=>(s=!0,r()),UCe(n,t,!0).on("end",()=>s=!0)}function UCe(e,t,n,r){var i=St(t.forces),s,o,a,l;for(s=0,o=x7.length;s<o;++s)a=x7[s],a!==x2&&t.modified(a)&&e[a](t[a]);for(s=0,o=i.length;s<o;++s)l=x2+s,a=n||t.modified(x2,s)?gxt(i[s]):r&&mxt(i[s],r)?e.force(l):null,a&&e.force(l,a);for(o=e.numForces||0;s<o;++s)e.force(x2+s,null);return e.numForces=i.length,e}function mxt(e,t){var n,r;for(n in e)if(gn(r=e[n])&&t.modified(Vo(r)))return 1;return 0}function gxt(e){var t,n;It(cle,e.force)||He("Unrecognized force: "+e.force),t=cle[e.force]();for(n in e)gn(t[n])&&yxt(t[n],e[n],e);return t}function yxt(e,t,n){e(gn(t)?r=>t(r,n):t)}const vxt=Object.freeze(Object.defineProperty({__proto__:null,force:FY},Symbol.toStringTag,{value:"Module"}));function E7(e,t,n){const r={};return e.each(i=>{const s=i.data;n(s)&&(r[t(s)]=i)}),e.lookup=r,e}function jY(e){qe.call(this,null,e)}jY.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const bxt=e=>e.values;bt(jY,qe,{transform(e,t){t.source||He("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),i=t.clone(),s=this.value;return(!s||r||t.changed())&&(s&&s.each(o=>{o.children&&sE(o.data)&&i.rem.push(o.data)}),this.value=s=$W({values:St(e.keys).reduce((o,a)=>(o.key(a),o),wxt()).entries(i.source)},bxt),n&&s.each(o=>{o.children&&(o=hr(o.data),i.add.push(o),i.source.push(o))}),E7(s,Kt,Kt)),i.source.root=s,i}});function wxt(){const e=[],t={entries:i=>r(n(i,0),0),key:i=>(e.push(i),t)};function n(i,s){if(s>=e.length)return i;const o=i.length,a=e[s++],l={},u={};let c=-1,d,f,h;for(;++c<o;)d=a(f=i[c])+"",(h=l[d])?h.push(f):l[d]=[f];for(d in l)u[d]=n(l[d],s);return u}function r(i,s){if(++s>e.length)return i;const o=[];for(const a in i)o.push({key:a,values:r(i[a],s)});return o}return t}function Up(e){qe.call(this,null,e)}const xxt=(e,t)=>e.parent===t.parent?1:2;bt(Up,qe,{transform(e,t){(!t.source||!t.source.root)&&He(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),r=this.fields,i=t.source.root,s=e.as||r;e.field?i.sum(e.field):i.count(),e.sort&&i.sort(Wv(e.sort,o=>o.data)),Ext(n,this.params,e),n.separation&&n.separation(e.separation!==!1?xxt:Qx);try{this.value=n(i)}catch(o){He(o)}return i.each(o=>_xt(o,r,s)),t.reflow(e.modified()).modifies(s).modifies("leaf")}});function Ext(e,t,n){for(let r,i=0,s=t.length;i<s;++i)r=t[i],r in n&&e[r](n[r])}function _xt(e,t,n){const r=e.data,i=t.length-1;for(let s=0;s<i;++s)r[n[s]]=e[t[s]];r[n[i]]=e.children?e.children.length:0}const _7=["x","y","r","depth","children"];function BY(e){Up.call(this,e)}BY.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:_7.length,default:_7}]};bt(BY,Up,{layout:xat,params:["radius","size","padding"],fields:_7});const T7=["x0","y0","x1","y1","depth","children"];function zY(e){Up.call(this,e)}zY.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:T7.length,default:T7}]};bt(zY,Up,{layout:Eat,params:["size","round","padding"],fields:T7});function UY(e){qe.call(this,null,e)}UY.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};bt(UY,qe,{transform(e,t){t.source||He("Stratify transform requires an upstream data source.");let n=this.value;const r=e.modified(),i=t.fork(t.ALL).materialize(t.SOURCE),s=!n||r||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return i.source=i.source.slice(),s&&(n=i.source.length?E7(use().id(e.key).parentId(e.parentKey)(i.source),e.key,fl):E7(use()([{}]),e.key,e.key)),i.source.root=this.value=n,i}});const dle={tidy:Pat,cluster:Hot},C7=["x","y","depth","children"];function qY(e){Up.call(this,e)}qY.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:C7.length,default:C7}]};bt(qY,Up,{layout(e){const t=e||"tidy";if(It(dle,t))return dle[t]();He("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:C7});function HY(e){qe.call(this,[],e)}HY.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};bt(HY,qe,{transform(e,t){const n=this.value,r=t.source&&t.source.root,i=t.fork(t.NO_SOURCE),s={};return r||He("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(i.rem=n,t.visit(t.SOURCE,o=>s[Kt(o)]=1),r.each(o=>{const a=o.data,l=o.parent&&o.parent.data;l&&s[Kt(a)]&&s[Kt(l)]&&i.add.push(hr({source:l,target:a}))}),this.value=i.add):t.changed(t.MOD)&&(t.visit(t.MOD,o=>s[Kt(o)]=1),n.forEach(o=>{(s[Kt(o.source)]||s[Kt(o.target)])&&i.mod.push(o)})),i}});const fle={binary:Oat,dice:uS,slice:o$,slicedice:$at,squarify:Mwe,resquarify:Mat},S7=["x0","y0","x1","y1","depth","children"];function WY(e){Up.call(this,e)}WY.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:S7.length,default:S7}]};bt(WY,Up,{layout(){const e=Nat();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{It(fle,t)?e.tile(fle[t]):He("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:S7});const Txt=Object.freeze(Object.defineProperty({__proto__:null,nest:jY,pack:BY,partition:zY,stratify:UY,tree:qY,treelinks:HY,treemap:WY},Symbol.toStringTag,{value:"Module"})),ML=4278190080;function Cxt(e,t){const n=e.bitmap();return(t||[]).forEach(r=>n.set(e(r.boundary[0]),e(r.boundary[3]))),[n,void 0]}function Sxt(e,t,n,r,i){const s=e.width,o=e.height,a=r||i,l=l0(s,o).getContext("2d"),u=l0(s,o).getContext("2d"),c=a&&l0(s,o).getContext("2d");n.forEach(k=>H3(l,k,!1)),H3(u,t,!1),a&&H3(c,t,!0);const d=LL(l,s,o),f=LL(u,s,o),h=a&&LL(c,s,o),p=e.bitmap(),m=a&&e.bitmap();let g,b,v,x,E,_,C,S;for(b=0;b<o;++b)for(g=0;g<s;++g)E=b*s+g,_=d[E]&ML,S=f[E]&ML,C=a&&h[E]&ML,(_||C||S)&&(v=e(g),x=e(b),!i&&(_||S)&&p.set(v,x),a&&(_||C)&&m.set(v,x));return[p,m]}function LL(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function H3(e,t,n){if(!t.length)return;const r=t[0].mark.marktype;r==="group"?t.forEach(i=>{i.items.forEach(s=>H3(e,s.items,n))}):ru[r].draw(e,{items:n?t.map(Axt):t})}function Axt(e){const t=U$(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const xh=5,la=31,iC=32,Nm=new Uint32Array(iC+1),Ac=new Uint32Array(iC+1);Ac[0]=0;Nm[0]=~Ac[0];for(let e=1;e<=iC;++e)Ac[e]=Ac[e-1]<<1|1,Nm[e]=~Ac[e];function kxt(e,t){const n=new Uint32Array(~~((e*t+iC)/iC));function r(s,o){n[s]|=o}function i(s,o){n[s]&=o}return{array:n,get:(s,o)=>{const a=o*e+s;return n[a>>>xh]&1<<(a&la)},set:(s,o)=>{const a=o*e+s;r(a>>>xh,1<<(a&la))},clear:(s,o)=>{const a=o*e+s;i(a>>>xh,~(1<<(a&la)))},getRange:(s,o,a,l)=>{let u=l,c,d,f,h;for(;u>=o;--u)if(c=u*e+s,d=u*e+a,f=c>>>xh,h=d>>>xh,f===h){if(n[f]&Nm[c&la]&Ac[(d&la)+1])return!0}else{if(n[f]&Nm[c&la]||n[h]&Ac[(d&la)+1])return!0;for(let p=f+1;p<h;++p)if(n[p])return!0}return!1},setRange:(s,o,a,l)=>{let u,c,d,f,h;for(;o<=l;++o)if(u=o*e+s,c=o*e+a,d=u>>>xh,f=c>>>xh,d===f)r(d,Nm[u&la]&Ac[(c&la)+1]);else for(r(d,Nm[u&la]),r(f,Ac[(c&la)+1]),h=d+1;h<f;++h)r(h,4294967295)},clearRange:(s,o,a,l)=>{let u,c,d,f,h;for(;o<=l;++o)if(u=o*e+s,c=o*e+a,d=u>>>xh,f=c>>>xh,d===f)i(d,Ac[u&la]|Nm[(c&la)+1]);else for(i(d,Ac[u&la]),i(f,Nm[(c&la)+1]),h=d+1;h<f;++h)i(h,0)},outOfBounds:(s,o,a,l)=>s<0||o<0||l>=t||a>=e}}function Ixt(e,t,n){const r=Math.max(1,Math.sqrt(e*t/1e6)),i=~~((e+2*n+r)/r),s=~~((t+2*n+r)/r),o=a=>~~((a+n)/r);return o.invert=a=>a*r-n,o.bitmap=()=>kxt(i,s),o.ratio=r,o.padding=n,o.width=e,o.height=t,o}function Rxt(e,t,n,r){const i=e.width,s=e.height;return function(o){const a=o.datum.datum.items[r].items,l=a.length,u=o.datum.fontSize,c=ql.width(o.datum,o.datum.text);let d=0,f,h,p,m,g,b,v;for(let x=0;x<l;++x)f=a[x].x,p=a[x].y,h=a[x].x2===void 0?f:a[x].x2,m=a[x].y2===void 0?p:a[x].y2,g=(f+h)/2,b=(p+m)/2,v=Math.abs(h-f+m-p),v>=d&&(d=v,o.x=g,o.y=b);return g=c/2,b=u/2,f=o.x-g,h=o.x+g,p=o.y-b,m=o.y+b,o.align="center",f<0&&h<=i?o.align="left":0<=f&&i<h&&(o.align="right"),o.baseline="middle",p<0&&m<=s?o.baseline="top":0<=p&&s<m&&(o.baseline="bottom"),!0}}function nN(e,t,n,r,i,s){let o=n/2;return e-o<0||e+o>i||t-(o=r/2)<0||t+o>s}function Zm(e,t,n,r,i,s,o,a){const l=i*s/(r*2),u=e(t-l),c=e(t+l),d=e(n-(s=s/2)),f=e(n+s);return o.outOfBounds(u,d,c,f)||o.getRange(u,d,c,f)||a&&a.getRange(u,d,c,f)}function Dxt(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1];function l(u,c,d,f,h){const p=e.invert(u),m=e.invert(c);let g=d,b=s,v;if(!nN(p,m,f,h,i,s)&&!Zm(e,p,m,h,f,g,o,a)&&!Zm(e,p,m,h,f,h,o,null)){for(;b-g>=1;)v=(g+b)/2,Zm(e,p,m,h,f,v,o,a)?b=v:g=v;if(g>d)return[p,m,g,!0]}}return function(u){const c=u.datum.datum.items[r].items,d=c.length,f=u.datum.fontSize,h=ql.width(u.datum,u.datum.text);let p=n?f:0,m=!1,g=!1,b=0,v,x,E,_,C,S,k,R,O,N,L,$,B,H,Y,J,K;for(let Z=0;Z<d;++Z){for(v=c[Z].x,E=c[Z].y,x=c[Z].x2===void 0?v:c[Z].x2,_=c[Z].y2===void 0?E:c[Z].y2,v>x&&(K=v,v=x,x=K),E>_&&(K=E,E=_,_=K),O=e(v),L=e(x),N=~~((O+L)/2),$=e(E),H=e(_),B=~~(($+H)/2),k=N;k>=O;--k)for(R=B;R>=$;--R)J=l(k,R,p,h,f),J&&([u.x,u.y,p,m]=J);for(k=N;k<=L;++k)for(R=B;R<=H;++R)J=l(k,R,p,h,f),J&&([u.x,u.y,p,m]=J);!m&&!n&&(Y=Math.abs(x-v+_-E),C=(v+x)/2,S=(E+_)/2,Y>=b&&!nN(C,S,h,f,i,s)&&!Zm(e,C,S,f,h,f,o,null)&&(b=Y,u.x=C,u.y=S,g=!0))}return m||g?(C=h/2,S=f/2,o.setRange(e(u.x-C),e(u.y-S),e(u.x+C),e(u.y+S)),u.align="center",u.baseline="middle",!0):!1}}const Pxt=[-1,-1,1,1],Nxt=[-1,1,-1,1];function Oxt(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],l=e.bitmap();return function(u){const c=u.datum.datum.items[r].items,d=c.length,f=u.datum.fontSize,h=ql.width(u.datum,u.datum.text),p=[];let m=n?f:0,g=!1,b=!1,v=0,x,E,_,C,S,k,R,O,N,L,$,B;for(let H=0;H<d;++H){for(x=c[H].x,_=c[H].y,E=c[H].x2===void 0?x:c[H].x2,C=c[H].y2===void 0?_:c[H].y2,p.push([e((x+E)/2),e((_+C)/2)]);p.length;)if([R,O]=p.pop(),!(o.get(R,O)||a.get(R,O)||l.get(R,O))){l.set(R,O);for(let Y=0;Y<4;++Y)S=R+Pxt[Y],k=O+Nxt[Y],l.outOfBounds(S,k,S,k)||p.push([S,k]);if(S=e.invert(R),k=e.invert(O),N=m,L=s,!nN(S,k,h,f,i,s)&&!Zm(e,S,k,f,h,N,o,a)&&!Zm(e,S,k,f,h,f,o,null)){for(;L-N>=1;)$=(N+L)/2,Zm(e,S,k,f,h,$,o,a)?L=$:N=$;N>m&&(u.x=S,u.y=k,m=N,g=!0)}}!g&&!n&&(B=Math.abs(E-x+C-_),S=(x+E)/2,k=(_+C)/2,B>=v&&!nN(S,k,h,f,i,s)&&!Zm(e,S,k,f,h,f,o,null)&&(v=B,u.x=S,u.y=k,b=!0))}return g||b?(S=h/2,k=f/2,o.setRange(e(u.x-S),e(u.y-k),e(u.x+S),e(u.y+k)),u.align="center",u.baseline="middle",!0):!1}}const $xt=["right","center","left"],Mxt=["bottom","middle","top"];function Lxt(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],l=r.length;return function(u){const c=u.boundary,d=u.datum.fontSize;if(c[2]<0||c[5]<0||c[0]>i||c[3]>s)return!1;let f=u.textWidth??0,h,p,m,g,b,v,x,E,_,C,S,k,R,O,N;for(let L=0;L<l;++L){if(h=(n[L]&3)-1,p=(n[L]>>>2&3)-1,m=h===0&&p===0||r[L]<0,g=h&&p?Math.SQRT1_2:1,b=r[L]<0?-1:1,v=c[1+h]+r[L]*h*g,S=c[4+p]+b*d*p/2+r[L]*p*g,E=S-d/2,_=S+d/2,k=e(v),O=e(E),N=e(_),!f)if(hle(k,k,O,N,o,a,v,v,E,_,c,m))f=ql.width(u.datum,u.datum.text);else continue;if(C=v+b*f*h/2,v=C-f/2,x=C+f/2,k=e(v),R=e(x),hle(k,R,O,N,o,a,v,x,E,_,c,m))return u.x=h?h*b<0?x:v:C,u.y=p?p*b<0?_:E:S,u.align=$xt[h*b+1],u.baseline=Mxt[p*b+1],o.setRange(k,O,R,N),!0}return!1}}function hle(e,t,n,r,i,s,o,a,l,u,c,d){return!(i.outOfBounds(e,n,t,r)||(d&&s||i).getRange(e,n,t,r))}const FL=0,jL=4,BL=8,zL=0,UL=1,qL=2,Fxt={"top-left":FL+zL,top:FL+UL,"top-right":FL+qL,left:jL+zL,middle:jL+UL,right:jL+qL,"bottom-left":BL+zL,bottom:BL+UL,"bottom-right":BL+qL},jxt={naive:Rxt,"reduced-search":Dxt,floodfill:Oxt};function Bxt(e,t,n,r,i,s,o,a,l,u,c){if(!e.length)return e;const d=Math.max(r.length,i.length),f=zxt(r,d),h=Uxt(i,d),p=qxt(e[0].datum),m=p==="group"&&e[0].datum.items[l].marktype,g=m==="area",b=Hxt(p,m,a,l),v=u===null||u===1/0,x=g&&c==="naive";let E=-1,_=-1;const C=e.map(O=>{const N=v?ql.width(O,O.text):void 0;return E=Math.max(E,N),_=Math.max(_,O.fontSize),{datum:O,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:b(O),textWidth:N}});u=u===null||u===1/0?Math.max(E,_)+Math.max(...r):u;const S=Ixt(t[0],t[1],u);let k;if(!x){n&&C.sort((L,$)=>n(L.datum,$.datum));let O=!1;for(let L=0;L<h.length&&!O;++L)O=h[L]===5||f[L]<0;const N=(p&&o||g)&&e.map(L=>L.datum);k=s.length||N?Sxt(S,N||[],s,O,g):Cxt(S,o&&C)}const R=g?jxt[c](S,k,o,l):Lxt(S,k,h,f);return C.forEach(O=>O.opacity=+R(O)),C}function zxt(e,t){const n=new Float64Array(t),r=e.length;for(let i=0;i<r;++i)n[i]=e[i]||0;for(let i=r;i<t;++i)n[i]=n[r-1];return n}function Uxt(e,t){const n=new Int8Array(t),r=e.length;for(let i=0;i<r;++i)n[i]|=Fxt[e[i]];for(let i=r;i<t;++i)n[i]=n[r-1];return n}function qxt(e){return e&&e.mark&&e.mark.marktype}function Hxt(e,t,n,r){const i=s=>[s.x,s.x,s.x,s.y,s.y,s.y];return e?e==="line"||e==="area"?s=>i(s.datum):t==="line"?s=>{const o=s.datum.items[r].items;return i(o.length?o[n==="start"?0:o.length-1]:{x:NaN,y:NaN})}:s=>{const o=s.datum.bounds;return[o.x1,(o.x1+o.x2)/2,o.x2,o.y1,(o.y1+o.y2)/2,o.y2]}:i}const A7=["x","y","opacity","align","baseline"],qCe=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function VY(e){qe.call(this,null,e)}VY.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:qCe},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:A7.length,default:A7}]};bt(VY,qe,{transform(e,t){function n(s){const o=e[s];return gn(o)&&t.modified(o.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&He("Size parameter should be specified as a [width, height] array.");const i=e.as||A7;return Bxt(t.materialize(t.SOURCE).source||[],e.size,e.sort,St(e.offset==null?1:e.offset),St(e.anchor||qCe),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(s=>{const o=s.datum;o[i[0]]=s.x,o[i[1]]=s.y,o[i[2]]=s.opacity,o[i[3]]=s.align,o[i[4]]=s.baseline}),t.reflow(r).modifies(i)}});const Wxt=Object.freeze(Object.defineProperty({__proto__:null,label:VY},Symbol.toStringTag,{value:"Module"}));function HCe(e,t){var n=[],r=function(c){return c(a)},i,s,o,a,l,u;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],l=t.map(r),u=i[l],u||(i[l]=u=[],u.dims=l,n.push(u)),u.push(a);return n}function GY(e){qe.call(this,null,e)}GY.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};bt(GY,qe,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=HCe(r,e.groupby),s=(e.groupby||[]).map(Ci),o=s.length,a=e.as||[Ci(e.x),Ci(e.y)],l=[];i.forEach(u=>{s2e(u,e.x,e.y,e.bandwidth||.3).forEach(c=>{const d={};for(let f=0;f<o;++f)d[s[f]]=u.dims[f];d[a[0]]=c[0],d[a[1]]=c[1],l.push(hr(d))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});const k7={constant:rG,linear:iG,log:t2e,exp:n2e,pow:r2e,quad:sG,poly:i2e},Vxt=(e,t)=>e==="poly"?t:e==="quad"?2:1;function YY(e){qe.call(this,null,e)}YY.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(k7)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};bt(YY,qe,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=HCe(r,e.groupby),s=(e.groupby||[]).map(Ci),o=e.method||"linear",a=e.order==null?3:e.order,l=Vxt(o,a),u=e.as||[Ci(e.x),Ci(e.y)],c=k7[o],d=[];let f=e.extent;It(k7,o)||He("Invalid regression method: "+o),f!=null&&o==="log"&&f[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),f=null),i.forEach(h=>{if(h.length<=l){t.dataflow.warn("Skipping regression with more parameters than data points.");return}const m=c(h,e.x,e.y,a);if(e.params){d.push(hr({keys:h.dims,coef:m.coef,rSquared:m.rSquared}));return}const g=f||Zc(h,e.x),b=v=>{const x={};for(let E=0;E<s.length;++E)x[s[E]]=h.dims[E];x[u[0]]=v[0],x[u[1]]=v[1],d.push(hr(x))};o==="linear"||o==="constant"?g.forEach(v=>b([v,m.predict(v)])):t4(m.predict,g,25,200).forEach(b)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=d}return n}});const Gxt=Object.freeze(Object.defineProperty({__proto__:null,loess:GY,regression:YY},Symbol.toStringTag,{value:"Module"}));function KY(e){qe.call(this,null,e)}KY.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const Yxt=[-1e5,-1e5,1e5,1e5];bt(KY,qe,{transform(e,t){const n=e.as||"path",r=t.source;if(!r||!r.length)return t;let i=e.size;i=i?[0,0,i[0],i[1]]:(i=e.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:Yxt;const s=this.value=_W.from(r,e.x,e.y).voronoi(i);for(let o=0,a=r.length;o<a;++o){const l=s.cellPolygon(o);r[o][n]=l&&!Xxt(l)?Kxt(l):null}return t.reflow(e.modified()).modifies(n)}});function Kxt(e){const t=e[0][0],n=e[0][1];let r=e.length-1;for(;e[r][0]===t&&e[r][1]===n;--r);return"M"+e.slice(0,r+1).join("L")+"Z"}function Xxt(e){return e.length===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}const Qxt=Object.freeze(Object.defineProperty({__proto__:null,voronoi:KY},Symbol.toStringTag,{value:"Module"}));var HL=Math.PI/180,E2=64,W3=2048;function Jxt(){var e=[256,256],t,n,r,i,s,o,a,l=WCe,u=[],c=Math.random,d={};d.layout=function(){for(var p=f(l0()),m=iEt((e[0]>>5)*e[1]),g=null,b=u.length,v=-1,x=[],E=u.map(C=>({text:t(C),font:n(C),style:i(C),weight:s(C),rotate:o(C),size:~~(r(C)+1e-14),padding:a(C),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:C})).sort((C,S)=>S.size-C.size);++v<b;){var _=E[v];_.x=e[0]*(c()+.5)>>1,_.y=e[1]*(c()+.5)>>1,Zxt(p,_,E,v),_.hasText&&h(m,_,g)&&(x.push(_),g?tEt(g,_):g=[{x:_.x+_.x0,y:_.y+_.y0},{x:_.x+_.x1,y:_.y+_.y1}],_.x-=e[0]>>1,_.y-=e[1]>>1)}return x};function f(p){p.width=p.height=1;var m=Math.sqrt(p.getContext("2d").getImageData(0,0,1,1).data.length>>2);p.width=(E2<<5)/m,p.height=W3/m;var g=p.getContext("2d");return g.fillStyle=g.strokeStyle="red",g.textAlign="center",{context:g,ratio:m}}function h(p,m,g){for(var b=m.x,v=m.y,x=Math.hypot(e[0],e[1]),E=l(e),_=c()<.5?1:-1,C=-_,S,k,R;(S=E(C+=_))&&(k=~~S[0],R=~~S[1],!(Math.min(Math.abs(k),Math.abs(R))>=x));)if(m.x=b+k,m.y=v+R,!(m.x+m.x0<0||m.y+m.y0<0||m.x+m.x1>e[0]||m.y+m.y1>e[1])&&(!g||!eEt(m,p,e[0]))&&(!g||nEt(m,g))){for(var O=m.sprite,N=m.width>>5,L=e[0]>>5,$=m.x-(N<<4),B=$&127,H=32-B,Y=m.y1-m.y0,J=(m.y+m.y0)*L+($>>5),K,Z=0;Z<Y;Z++){K=0;for(var U=0;U<=N;U++)p[J+U]|=K<<H|(U<N?(K=O[Z*N+U])>>>B:0);J+=L}return m.sprite=null,!0}return!1}return d.words=function(p){return arguments.length?(u=p,d):u},d.size=function(p){return arguments.length?(e=[+p[0],+p[1]],d):e},d.font=function(p){return arguments.length?(n=Ag(p),d):n},d.fontStyle=function(p){return arguments.length?(i=Ag(p),d):i},d.fontWeight=function(p){return arguments.length?(s=Ag(p),d):s},d.rotate=function(p){return arguments.length?(o=Ag(p),d):o},d.text=function(p){return arguments.length?(t=Ag(p),d):t},d.spiral=function(p){return arguments.length?(l=sEt[p]||p,d):l},d.fontSize=function(p){return arguments.length?(r=Ag(p),d):r},d.padding=function(p){return arguments.length?(a=Ag(p),d):a},d.random=function(p){return arguments.length?(c=p,d):c},d}function Zxt(e,t,n,r){if(!t.sprite){var i=e.context,s=e.ratio;i.clearRect(0,0,(E2<<5)/s,W3/s);var o=0,a=0,l=0,u=n.length,c,d,f,h,p;for(--r;++r<u;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/s)+"px "+t.font,c=i.measureText(t.text+"m").width*s,f=t.size<<1,t.rotate){var m=Math.sin(t.rotate*HL),g=Math.cos(t.rotate*HL),b=c*g,v=c*m,x=f*g,E=f*m;c=Math.max(Math.abs(b+E),Math.abs(b-E))+31>>5<<5,f=~~Math.max(Math.abs(v+x),Math.abs(v-x))}else c=c+31>>5<<5;if(f>l&&(l=f),o+c>=E2<<5&&(o=0,a+=l,l=0),a+f>=W3)break;i.translate((o+(c>>1))/s,(a+(f>>1))/s),t.rotate&&i.rotate(t.rotate*HL),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=c,t.height=f,t.xoff=o,t.yoff=a,t.x1=c>>1,t.y1=f>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,o+=c}for(var _=i.getImageData(0,0,(E2<<5)/s,W3/s).data,C=[];--r>=0;)if(t=n[r],!!t.hasText){for(c=t.width,d=c>>5,f=t.y1-t.y0,h=0;h<f*d;h++)C[h]=0;if(o=t.xoff,o==null)return;a=t.yoff;var S=0,k=-1;for(p=0;p<f;p++){for(h=0;h<c;h++){var R=d*p+(h>>5),O=_[(a+p)*(E2<<5)+(o+h)<<2]?1<<31-h%32:0;C[R]|=O,S|=O}S?k=p:(t.y0++,f--,p--,a++)}t.y1=t.y0+k,t.sprite=C.slice(0,(t.y1-t.y0)*d)}}}function eEt(e,t,n){n>>=5;for(var r=e.sprite,i=e.width>>5,s=e.x-(i<<4),o=s&127,a=32-o,l=e.y1-e.y0,u=(e.y+e.y0)*n+(s>>5),c,d=0;d<l;d++){c=0;for(var f=0;f<=i;f++)if((c<<a|(f<i?(c=r[d*i+f])>>>o:0))&t[u+f])return!0;u+=n}return!1}function tEt(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function nEt(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function WCe(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function rEt(e){var t=4,n=t*e[0]/e[1],r=0,i=0;return function(s){var o=s<0?-1:1;switch(Math.sqrt(1+4*o*s)-o&3){case 0:r+=n;break;case 1:i+=t;break;case 2:r-=n;break;default:i-=t;break}return[r,i]}}function iEt(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function Ag(e){return typeof e=="function"?e:function(){return e}}var sEt={archimedean:WCe,rectangular:rEt};const VCe=["x","y","font","fontSize","fontStyle","fontWeight","angle"],oEt=["text","font","rotate","fontSize","fontStyle","fontWeight"];function XY(e){qe.call(this,Jxt(),e)}XY.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:VCe}]};bt(XY,qe,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&He("Wordcloud size dimensions must be non-zero.");function n(p){const m=e[p];return gn(m)&&t.modified(m.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||oEt.some(n)))return;const i=t.materialize(t.SOURCE).source,s=this.value,o=e.as||VCe;let a=e.fontSize||14,l;if(gn(a)?l=e.fontSizeRange:a=Jo(a),l){const p=a,m=Vn("sqrt")().domain(Zc(i,p)).range(l);a=g=>m(p(g))}i.forEach(p=>{p[o[0]]=NaN,p[o[1]]=NaN,p[o[3]]=0});const u=s.words(i).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(a).random(nu).layout(),c=s.size(),d=c[0]>>1,f=c[1]>>1,h=u.length;for(let p=0,m,g;p<h;++p)m=u[p],g=m.datum,g[o[0]]=m.x+d,g[o[1]]=m.y+f,g[o[2]]=m.font,g[o[3]]=m.size,g[o[4]]=m.style,g[o[5]]=m.weight,g[o[6]]=m.rotate;return t.reflow(r).modifies(o)}});const aEt=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:XY},Symbol.toStringTag,{value:"Module"})),lEt=e=>new Uint8Array(e),uEt=e=>new Uint16Array(e),eT=e=>new Uint32Array(e);function cEt(){let e=8,t=[],n=eT(0),r=sI(0,e),i=sI(0,e);return{data:()=>t,seen:()=>n=dEt(n,t.length),add(s){for(let o=0,a=t.length,l=s.length,u;o<l;++o)u=s[o],u._index=a++,t.push(u)},remove(s,o){const a=t.length,l=Array(a-s),u=t;let c,d,f;for(d=0;!o[d]&&d<a;++d)l[d]=t[d],u[d]=d;for(f=d;d<a;++d)c=t[d],o[d]?u[d]=-1:(u[d]=f,r[f]=r[d],i[f]=i[d],l[f]=c,c._index=f++),r[d]=0;return t=l,u},size:()=>t.length,curr:()=>r,prev:()=>i,reset:s=>i[s]=r[s],all:()=>e<257?255:e<65537?65535:4294967295,set(s,o){r[s]|=o},clear(s,o){r[s]&=~o},resize(s,o){const a=r.length;(s>a||o>e)&&(e=Math.max(o,e),r=sI(s,e,r),i=sI(s,e))}}}function dEt(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function sI(e,t,n){const r=(t<257?lEt:t<65537?uEt:eT)(e);return n&&r.set(n),r}function ple(e,t,n){const r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(i,s){const o=this,a=o.bisect(o.range,i.value),l=i.index,u=a[0],c=a[1],d=l.length;let f;for(f=0;f<u;++f)s[l[f]]|=r;for(f=c;f<d;++f)s[l[f]]|=r;return o}}}function mle(){let e=eT(0),t=[],n=0;function r(a,l,u){if(!l.length)return[];const c=n,d=l.length,f=eT(d);let h=Array(d),p,m,g;for(g=0;g<d;++g)h[g]=a(l[g]),f[g]=g;if(h=fEt(h,f),c)p=t,m=e,t=Array(c+d),e=eT(c+d),hEt(u,p,m,c,h,f,d,t,e);else{if(u>0)for(g=0;g<d;++g)f[g]+=u;t=h,e=f}return n=c+d,{index:f,value:h}}function i(a,l){const u=n;let c,d,f;for(d=0;!l[e[d]]&&d<u;++d);for(f=d;d<u;++d)l[c=e[d]]||(e[f]=c,t[f]=t[d],++f);n=u-a}function s(a){for(let l=0,u=n;l<u;++l)e[l]=a[e[l]]}function o(a,l){let u;return l?u=l.length:(l=t,u=n),[Iet(l,a[0],0,u),v0(l,a[1],0,u)]}return{insert:r,remove:i,bisect:o,reindex:s,index:()=>e,size:()=>n}}function fEt(e,t){return e.sort.call(t,(n,r)=>{const i=e[n],s=e[r];return i<s?-1:i>s?1:0}),Net(e,t)}function hEt(e,t,n,r,i,s,o,a,l){let u=0,c=0,d;for(d=0;u<r&&c<o;++d)t[u]<i[c]?(a[d]=t[u],l[d]=n[u++]):(a[d]=i[c],l[d]=s[c++]+e);for(;u<r;++u,++d)a[d]=t[u],l[d]=n[u];for(;c<o;++c,++d)a[d]=i[c],l[d]=s[c]+e}function QY(e){qe.call(this,cEt(),e),this._indices=null,this._dims=null}QY.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};bt(QY,qe,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(r=>t.modified(r.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){const n=e.fields,r=e.query,i=this._indices={},s=this._dims=[],o=r.length;let a=0,l,u;for(;a<o;++a)l=n[a].fname,u=i[l]||(i[l]=mle()),s.push(ple(u,a,r[a]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),r=e.fields,i=e.query,s=this._indices,o=this._dims,a=this.value,l=a.curr(),u=a.prev(),c=a.all(),d=n.rem=n.add,f=n.mod,h=i.length,p={};let m,g,b,v,x,E,_,C,S;if(u.set(l),t.rem.length&&(x=this.remove(e,t,n)),t.add.length&&a.add(t.add),t.mod.length)for(E={},v=t.mod,_=0,C=v.length;_<C;++_)E[v[_]._index]=1;for(_=0;_<h;++_)S=r[_],(!o[_]||e.modified("fields",_)||t.modified(S.fields))&&(b=S.fname,(m=p[b])||(s[b]=g=mle(),p[b]=m=g.insert(S,t.source,0)),o[_]=ple(g,_,i[_]).onAdd(m,l));for(_=0,C=a.data().length;_<C;++_)x[_]||(u[_]!==l[_]?d.push(_):E[_]&&l[_]!==c&&f.push(_));return a.mask=(1<<h)-1,n},eval(e,t){const n=t.materialize().fork(),r=this._dims.length;let i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},insert(e,t,n){const r=t.add,i=this.value,s=this._dims,o=this._indices,a=e.fields,l={},u=n.add,c=i.size()+r.length,d=s.length;let f=i.size(),h,p,m;i.resize(c,d),i.add(r);const g=i.curr(),b=i.prev(),v=i.all();for(h=0;h<d;++h)p=a[h].fname,m=l[p]||(l[p]=o[p].insert(a[h],r,f)),s[h].onAdd(m,g);for(;f<c;++f)b[f]=v,g[f]!==v&&u.push(f)},modify(e,t){const n=t.mod,r=this.value,i=r.curr(),s=r.all(),o=e.mod;let a,l,u;for(a=0,l=o.length;a<l;++a)u=o[a]._index,i[u]!==s&&n.push(u)},remove(e,t,n){const r=this._indices,i=this.value,s=i.curr(),o=i.prev(),a=i.all(),l={},u=n.rem,c=t.rem;let d,f,h,p;for(d=0,f=c.length;d<f;++d)h=c[d]._index,l[h]=1,o[h]=p=s[h],s[h]=a,p!==a&&u.push(h);for(h in r)r[h].remove(f,l);return this.reindex(t,f,l),l},reindex(e,t,n){const r=this._indices,i=this.value;e.runAfter(()=>{const s=i.remove(t,n);for(const o in r)r[o].reindex(s)})},update(e,t,n){const r=this._dims,i=e.query,s=t.stamp,o=r.length;let a=0,l,u;for(n.filters=0,u=0;u<o;++u)e.modified("query",u)&&(l=u,++a);if(a===1)a=r[l].one,this.incrementOne(r[l],i[l],n.add,n.rem);else for(u=0,a=0;u<o;++u)e.modified("query",u)&&(a|=r[u].one,this.incrementAll(r[u],i[u],s,n.add),n.rem=n.add);return a},incrementAll(e,t,n,r){const i=this.value,s=i.seen(),o=i.curr(),a=i.prev(),l=e.index(),u=e.bisect(e.range),c=e.bisect(t),d=c[0],f=c[1],h=u[0],p=u[1],m=e.one;let g,b,v;if(d<h)for(g=d,b=Math.min(h,f);g<b;++g)v=l[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;else if(d>h)for(g=h,b=Math.min(d,p);g<b;++g)v=l[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;if(f>p)for(g=Math.max(d,p),b=f;g<b;++g)v=l[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;else if(f<p)for(g=Math.max(h,f),b=p;g<b;++g)v=l[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;e.range=t.slice()},incrementOne(e,t,n,r){const i=this.value,s=i.curr(),o=e.index(),a=e.bisect(e.range),l=e.bisect(t),u=l[0],c=l[1],d=a[0],f=a[1],h=e.one;let p,m,g;if(u<d)for(p=u,m=Math.min(d,c);p<m;++p)g=o[p],s[g]^=h,n.push(g);else if(u>d)for(p=d,m=Math.min(u,f);p<m;++p)g=o[p],s[g]^=h,r.push(g);if(c>f)for(p=Math.max(u,f),m=c;p<m;++p)g=o[p],s[g]^=h,n.push(g);else if(c<f)for(p=Math.max(d,c),m=f;p<m;++p)g=o[p],s[g]^=h,r.push(g);e.range=t.slice()}});function JY(e){qe.call(this,null,e)}JY.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};bt(JY,qe,{transform(e,t){const n=~(e.ignore||0),r=e.filter,i=r.mask;if((i&n)===0)return t.StopPropagation;const s=t.fork(t.ALL),o=r.data(),a=r.curr(),l=r.prev(),u=c=>a[c]&n?null:o[c];return s.filter(s.MOD,u),i&i-1?(s.filter(s.ADD,c=>{const d=a[c]&n;return!d&&d^l[c]&n?o[c]:null}),s.filter(s.REM,c=>{const d=a[c]&n;return d&&!(d^(d^l[c]&n))?o[c]:null})):(s.filter(s.ADD,u),s.filter(s.REM,c=>(a[c]&n)===i?o[c]:null)),s.filter(s.SOURCE,c=>u(c._index))}});const pEt=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:QY,resolvefilter:JY},Symbol.toStringTag,{value:"Module"})),mEt="RawCode",Lu="Literal",gEt="Property",yEt="Identifier",vEt="ArrayExpression",bEt="BinaryExpression",GCe="CallExpression",wEt="ConditionalExpression",xEt="LogicalExpression",EEt="MemberExpression",_Et="ObjectExpression",TEt="UnaryExpression";function md(e){this.type=e}md.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=CEt(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};function CEt(e){switch(e.type){case vEt:return e.elements;case bEt:case xEt:return[e.left,e.right];case GCe:return[e.callee].concat(e.arguments);case wEt:return[e.test,e.consequent,e.alternate];case EEt:return[e.object,e.property];case _Et:return e.properties;case gEt:return[e.key,e.value];case TEt:return[e.argument];case yEt:case Lu:case mEt:default:return[]}}var Yf,Bt,Ke,Yo,Er,w4=1,NS=2,sv=3,Q0=4,x4=5,Yv=6,Ja=7,OS=8,SEt=9;Yf={};Yf[w4]="Boolean";Yf[NS]="<end>";Yf[sv]="Identifier";Yf[Q0]="Keyword";Yf[x4]="Null";Yf[Yv]="Numeric";Yf[Ja]="Punctuator";Yf[OS]="String";Yf[SEt]="RegularExpression";var AEt="ArrayExpression",kEt="BinaryExpression",IEt="CallExpression",REt="ConditionalExpression",YCe="Identifier",DEt="Literal",PEt="LogicalExpression",NEt="MemberExpression",OEt="ObjectExpression",$Et="Property",MEt="UnaryExpression",js="Unexpected token %0",LEt="Unexpected number",FEt="Unexpected string",jEt="Unexpected identifier",BEt="Unexpected reserved word",zEt="Unexpected end of input",I7="Invalid regular expression",WL="Invalid regular expression: missing /",KCe="Octal literals are not allowed in strict mode.",UEt="Duplicate data property in object literal not allowed in strict mode",vo="ILLEGAL",sC="Disabled.",qEt=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),HEt=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function E4(e,t){if(!e)throw new Error("ASSERT: "+t)}function Ph(e){return e>=48&&e<=57}function ZY(e){return"0123456789abcdefABCDEF".includes(e)}function tT(e){return"01234567".includes(e)}function WEt(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(e)}function oC(e){return e===10||e===13||e===8232||e===8233}function $S(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&qEt.test(String.fromCharCode(e))}function rN(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&HEt.test(String.fromCharCode(e))}const VEt={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function XCe(){for(;Ke<Yo;){const e=Bt.charCodeAt(Ke);if(WEt(e)||oC(e))++Ke;else break}}function R7(e){var t,n,r,i=0;for(n=e==="u"?4:2,t=0;t<n;++t)Ke<Yo&&ZY(Bt[Ke])?(r=Bt[Ke++],i=i*16+"0123456789abcdef".indexOf(r.toLowerCase())):or({},js,vo);return String.fromCharCode(i)}function GEt(){var e,t,n,r;for(e=Bt[Ke],t=0,e==="}"&&or({},js,vo);Ke<Yo&&(e=Bt[Ke++],!!ZY(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&or({},js,vo),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,r=(t-65536&1023)+56320,String.fromCharCode(n,r))}function QCe(){var e,t;for(e=Bt.charCodeAt(Ke++),t=String.fromCharCode(e),e===92&&(Bt.charCodeAt(Ke)!==117&&or({},js,vo),++Ke,e=R7("u"),(!e||e==="\\"||!$S(e.charCodeAt(0)))&&or({},js,vo),t=e);Ke<Yo&&(e=Bt.charCodeAt(Ke),!!rN(e));)++Ke,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),Bt.charCodeAt(Ke)!==117&&or({},js,vo),++Ke,e=R7("u"),(!e||e==="\\"||!rN(e.charCodeAt(0)))&&or({},js,vo),t+=e);return t}function YEt(){var e,t;for(e=Ke++;Ke<Yo;){if(t=Bt.charCodeAt(Ke),t===92)return Ke=e,QCe();if(rN(t))++Ke;else break}return Bt.slice(e,Ke)}function KEt(){var e,t,n;return e=Ke,t=Bt.charCodeAt(Ke)===92?QCe():YEt(),t.length===1?n=sv:VEt.hasOwnProperty(t)?n=Q0:t==="null"?n=x4:t==="true"||t==="false"?n=w4:n=sv,{type:n,value:t,start:e,end:Ke}}function VL(){var e=Ke,t=Bt.charCodeAt(Ke),n,r=Bt[Ke],i,s,o;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++Ke,{type:Ja,value:String.fromCharCode(t),start:e,end:Ke};default:if(n=Bt.charCodeAt(Ke+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return Ke+=2,{type:Ja,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:Ke};case 33:case 61:return Ke+=2,Bt.charCodeAt(Ke)===61&&++Ke,{type:Ja,value:Bt.slice(e,Ke),start:e,end:Ke}}}if(o=Bt.substr(Ke,4),o===">>>=")return Ke+=4,{type:Ja,value:o,start:e,end:Ke};if(s=o.substr(0,3),s===">>>"||s==="<<="||s===">>=")return Ke+=3,{type:Ja,value:s,start:e,end:Ke};if(i=s.substr(0,2),r===i[1]&&"+-<>&|".includes(r)||i==="=>")return Ke+=2,{type:Ja,value:i,start:e,end:Ke};if(i==="//"&&or({},js,vo),"<>=!+-*%&|^/".includes(r))return++Ke,{type:Ja,value:r,start:e,end:Ke};or({},js,vo)}function XEt(e){let t="";for(;Ke<Yo&&ZY(Bt[Ke]);)t+=Bt[Ke++];return t.length===0&&or({},js,vo),$S(Bt.charCodeAt(Ke))&&or({},js,vo),{type:Yv,value:parseInt("0x"+t,16),start:e,end:Ke}}function QEt(e){let t="0"+Bt[Ke++];for(;Ke<Yo&&tT(Bt[Ke]);)t+=Bt[Ke++];return($S(Bt.charCodeAt(Ke))||Ph(Bt.charCodeAt(Ke)))&&or({},js,vo),{type:Yv,value:parseInt(t,8),octal:!0,start:e,end:Ke}}function gle(){var e,t,n;if(n=Bt[Ke],E4(Ph(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=Ke,e="",n!=="."){if(e=Bt[Ke++],n=Bt[Ke],e==="0"){if(n==="x"||n==="X")return++Ke,XEt(t);if(tT(n))return QEt(t);n&&Ph(n.charCodeAt(0))&&or({},js,vo)}for(;Ph(Bt.charCodeAt(Ke));)e+=Bt[Ke++];n=Bt[Ke]}if(n==="."){for(e+=Bt[Ke++];Ph(Bt.charCodeAt(Ke));)e+=Bt[Ke++];n=Bt[Ke]}if(n==="e"||n==="E")if(e+=Bt[Ke++],n=Bt[Ke],(n==="+"||n==="-")&&(e+=Bt[Ke++]),Ph(Bt.charCodeAt(Ke)))for(;Ph(Bt.charCodeAt(Ke));)e+=Bt[Ke++];else or({},js,vo);return $S(Bt.charCodeAt(Ke))&&or({},js,vo),{type:Yv,value:parseFloat(e),start:t,end:Ke}}function JEt(){var e="",t,n,r,i,s=!1;for(t=Bt[Ke],E4(t==="'"||t==='"',"String literal must starts with a quote"),n=Ke,++Ke;Ke<Yo;)if(r=Bt[Ke++],r===t){t="";break}else if(r==="\\")if(r=Bt[Ke++],!r||!oC(r.charCodeAt(0)))switch(r){case"u":case"x":Bt[Ke]==="{"?(++Ke,e+=GEt()):e+=R7(r);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:tT(r)?(i="01234567".indexOf(r),i!==0&&(s=!0),Ke<Yo&&tT(Bt[Ke])&&(s=!0,i=i*8+"01234567".indexOf(Bt[Ke++]),"0123".includes(r)&&Ke<Yo&&tT(Bt[Ke])&&(i=i*8+"01234567".indexOf(Bt[Ke++]))),e+=String.fromCharCode(i)):e+=r;break}else r==="\r"&&Bt[Ke]===`
`&&++Ke;else{if(oC(r.charCodeAt(0)))break;e+=r}return t!==""&&or({},js,vo),{type:OS,value:e,octal:s,start:n,end:Ke}}function ZEt(e,t){let n=e;t.includes("u")&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(r,i)=>{if(parseInt(i,16)<=1114111)return"x";or({},I7)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{or({},I7)}try{return new RegExp(e,t)}catch{return null}}function e_t(){var e,t,n,r,i;for(e=Bt[Ke],E4(e==="/","Regular expression literal must start with a slash"),t=Bt[Ke++],n=!1,r=!1;Ke<Yo;)if(e=Bt[Ke++],t+=e,e==="\\")e=Bt[Ke++],oC(e.charCodeAt(0))&&or({},WL),t+=e;else if(oC(e.charCodeAt(0)))or({},WL);else if(n)e==="]"&&(n=!1);else if(e==="/"){r=!0;break}else e==="["&&(n=!0);return r||or({},WL),i=t.substr(1,t.length-2),{value:i,literal:t}}function t_t(){var e,t,n;for(t="",n="";Ke<Yo&&(e=Bt[Ke],!!rN(e.charCodeAt(0)));)++Ke,e==="\\"&&Ke<Yo?or({},js,vo):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&or({},I7,n),{value:n,literal:t}}function n_t(){var e,t,n,r;return Er=null,XCe(),e=Ke,t=e_t(),n=t_t(),r=ZEt(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:Ke}}function r_t(e){return e.type===sv||e.type===Q0||e.type===w4||e.type===x4}function JCe(){if(XCe(),Ke>=Yo)return{type:NS,start:Ke,end:Ke};const e=Bt.charCodeAt(Ke);return $S(e)?KEt():e===40||e===41||e===59?VL():e===39||e===34?JEt():e===46?Ph(Bt.charCodeAt(Ke+1))?gle():VL():Ph(e)?gle():VL()}function nl(){const e=Er;return Ke=e.end,Er=JCe(),Ke=e.end,e}function ZCe(){const e=Ke;Er=JCe(),Ke=e}function i_t(e){const t=new md(AEt);return t.elements=e,t}function yle(e,t,n){const r=new md(e==="||"||e==="&&"?PEt:kEt);return r.operator=e,r.left=t,r.right=n,r}function s_t(e,t){const n=new md(IEt);return n.callee=e,n.arguments=t,n}function o_t(e,t,n){const r=new md(REt);return r.test=e,r.consequent=t,r.alternate=n,r}function eK(e){const t=new md(YCe);return t.name=e,t}function _2(e){const t=new md(DEt);return t.value=e.value,t.raw=Bt.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function vle(e,t,n){const r=new md(NEt);return r.computed=e==="[",r.object=t,r.property=n,r.computed||(n.member=!0),r}function a_t(e){const t=new md(OEt);return t.properties=e,t}function ble(e,t,n){const r=new md($Et);return r.key=t,r.value=n,r.kind=e,r}function l_t(e,t){const n=new md(MEt);return n.operator=e,n.argument=t,n.prefix=!0,n}function or(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,(s,o)=>(E4(o<r.length,"Message reference must be in range"),r[o]));throw n=new Error(i),n.index=Ke,n.description=i,n}function _4(e){e.type===NS&&or(e,zEt),e.type===Yv&&or(e,LEt),e.type===OS&&or(e,FEt),e.type===sv&&or(e,jEt),e.type===Q0&&or(e,BEt),or(e,js,e.value)}function Ko(e){const t=nl();(t.type!==Ja||t.value!==e)&&_4(t)}function Yr(e){return Er.type===Ja&&Er.value===e}function GL(e){return Er.type===Q0&&Er.value===e}function u_t(){const e=[];for(Ke=Er.start,Ko("[");!Yr("]");)Yr(",")?(nl(),e.push(null)):(e.push(ov()),Yr("]")||Ko(","));return nl(),i_t(e)}function wle(){Ke=Er.start;const e=nl();return e.type===OS||e.type===Yv?(e.octal&&or(e,KCe),_2(e)):eK(e.value)}function c_t(){var e,t,n,r;if(Ke=Er.start,e=Er,e.type===sv)return n=wle(),Ko(":"),r=ov(),ble("init",n,r);if(e.type===NS||e.type===Ja)_4(e);else return t=wle(),Ko(":"),r=ov(),ble("init",t,r)}function d_t(){var e=[],t,n,r,i={},s=String;for(Ke=Er.start,Ko("{");!Yr("}");)t=c_t(),t.key.type===YCe?n=t.key.name:n=s(t.key.value),r="$"+n,Object.prototype.hasOwnProperty.call(i,r)?or({},UEt):i[r]=!0,e.push(t),Yr("}")||Ko(",");return Ko("}"),a_t(e)}function f_t(){Ko("(");const e=tK();return Ko(")"),e}const h_t={if:1};function p_t(){var e,t,n;if(Yr("("))return f_t();if(Yr("["))return u_t();if(Yr("{"))return d_t();if(e=Er.type,Ke=Er.start,e===sv||h_t[Er.value])n=eK(nl().value);else if(e===OS||e===Yv)Er.octal&&or(Er,KCe),n=_2(nl());else{if(e===Q0)throw new Error(sC);e===w4?(t=nl(),t.value=t.value==="true",n=_2(t)):e===x4?(t=nl(),t.value=null,n=_2(t)):Yr("/")||Yr("/=")?(n=_2(n_t()),ZCe()):_4(nl())}return n}function m_t(){const e=[];if(Ko("("),!Yr(")"))for(;Ke<Yo&&(e.push(ov()),!Yr(")"));)Ko(",");return Ko(")"),e}function g_t(){Ke=Er.start;const e=nl();return r_t(e)||_4(e),eK(e.value)}function y_t(){return Ko("."),g_t()}function v_t(){Ko("[");const e=tK();return Ko("]"),e}function b_t(){var e,t,n;for(e=p_t();;)if(Yr("."))n=y_t(),e=vle(".",e,n);else if(Yr("("))t=m_t(),e=s_t(e,t);else if(Yr("["))n=v_t(),e=vle("[",e,n);else break;return e}function xle(){const e=b_t();if(Er.type===Ja&&(Yr("++")||Yr("--")))throw new Error(sC);return e}function V3(){var e,t;if(Er.type!==Ja&&Er.type!==Q0)t=xle();else{if(Yr("++")||Yr("--"))throw new Error(sC);if(Yr("+")||Yr("-")||Yr("~")||Yr("!"))e=nl(),t=V3(),t=l_t(e.value,t);else{if(GL("delete")||GL("void")||GL("typeof"))throw new Error(sC);t=xle()}}return t}function Ele(e){let t=0;if(e.type!==Ja&&e.type!==Q0)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function w_t(){var e,t,n,r,i,s,o,a,l,u;if(e=Er,l=V3(),r=Er,i=Ele(r),i===0)return l;for(r.prec=i,nl(),t=[e,Er],o=V3(),s=[l,r,o];(i=Ele(Er))>0;){for(;s.length>2&&i<=s[s.length-2].prec;)o=s.pop(),a=s.pop().value,l=s.pop(),t.pop(),n=yle(a,l,o),s.push(n);r=nl(),r.prec=i,s.push(r),t.push(Er),n=V3(),s.push(n)}for(u=s.length-1,n=s[u],t.pop();u>1;)t.pop(),n=yle(s[u-1].value,s[u-2],n),u-=2;return n}function ov(){var e,t,n;return e=w_t(),Yr("?")&&(nl(),t=ov(),Ko(":"),n=ov(),e=o_t(e,t,n)),e}function tK(){const e=ov();if(Yr(","))throw new Error(sC);return e}function eSe(e){Bt=e,Ke=0,Yo=Bt.length,Er=null,ZCe();const t=tK();if(Er.type!==NS)throw new Error("Unexpect token after expression.");return t}var nK={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function rK(e){function t(o,a,l,u){let c=e(a[0]);return l&&(c=l+"("+c+")",l.lastIndexOf("new ",0)===0&&(c="("+c+")")),c+"."+o+(u<0?"":u===0?"()":"("+a.slice(1).map(e).join(",")+")")}function n(o,a,l){return u=>t(o,u,a,l)}const r="new Date",i="String",s="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(o){o.length<3&&He("Missing arguments to clamp function."),o.length>3&&He("Too many arguments to clamp function.");const a=o.map(e);return"Math.max("+a[1]+", Math.min("+a[2]+","+a[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),split:n("split",i),trim:n("trim",i,0),btoa:"btoa",atob:"atob",regexp:s,test:n("test",s),if:function(o){o.length<3&&He("Missing arguments to if function."),o.length>3&&He("Too many arguments to if function.");const a=o.map(e);return"("+a[0]+"?"+a[1]+":"+a[2]+")"}}}function x_t(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function iK(e){e=e||{};const t=e.allowed?ed(e.allowed):{},n=e.forbidden?ed(e.forbidden):{},r=e.constants||nK,i=(e.functions||rK)(d),s=e.globalvar,o=e.fieldvar,a=gn(s)?s:p=>`${s}["${p}"]`;let l={},u={},c=0;function d(p){if(Tt(p))return p;const m=f[p.type];return m==null&&He("Unsupported type: "+p.type),m(p)}const f={Literal:p=>p.raw,Identifier:p=>{const m=p.name;return c>0?m:It(n,m)?He("Illegal identifier: "+m):It(r,m)?r[m]:It(t,m)?m:(l[m]=1,a(m))},MemberExpression:p=>{const m=!p.computed,g=d(p.object);m&&(c+=1);const b=d(p.property);return g===o&&(u[x_t(b)]=1),m&&(c-=1),g+(m?"."+b:"["+b+"]")},CallExpression:p=>{p.callee.type!=="Identifier"&&He("Illegal callee type: "+p.callee.type);const m=p.callee.name,g=p.arguments,b=It(i,m)&&i[m];return b||He("Unrecognized function: "+m),gn(b)?b(g):b+"("+g.map(d).join(",")+")"},ArrayExpression:p=>"["+p.elements.map(d).join(",")+"]",BinaryExpression:p=>"("+d(p.left)+" "+p.operator+" "+d(p.right)+")",UnaryExpression:p=>"("+p.operator+d(p.argument)+")",ConditionalExpression:p=>"("+d(p.test)+"?"+d(p.consequent)+":"+d(p.alternate)+")",LogicalExpression:p=>"("+d(p.left)+p.operator+d(p.right)+")",ObjectExpression:p=>"{"+p.properties.map(d).join(",")+"}",Property:p=>{c+=1;const m=d(p.key);return c-=1,m+":"+d(p.value)}};function h(p){const m={code:d(p),globals:Object.keys(l),fields:Object.keys(u)};return l={},u={},m}return h.functions=i,h.constants=r,h}const _le=Symbol("vega_selection_getter");function tSe(e){return(!e.getter||!e.getter[_le])&&(e.getter=Zl(e.field),e.getter[_le]=!0),e.getter}const sK="intersect",Tle="union",E_t="vlMulti",__t="vlPoint",Cle="or",T_t="and",Gd="_vgsid_",aC=Zl(Gd),C_t="E",S_t="R",A_t="R-E",k_t="R-LE",I_t="R-RE",R_t="E-LT",D_t="E-LTE",P_t="E-GT",N_t="E-GTE",O_t="E-VALID",$_t="E-ONE",iN="index:unit";function Sle(e,t){for(var n=t.fields,r=t.values,i=n.length,s=0,o,a;s<i;++s)if(a=n[s],o=tSe(a)(e),sp(o)&&(o=yo(o)),sp(r[s])&&(r[s]=yo(r[s])),Ge(r[s])&&sp(r[s][0])&&(r[s]=r[s].map(yo)),a.type===C_t){if(Ge(r[s])?!r[s].includes(o):o!==r[s])return!1}else if(a.type===S_t){if(!vy(o,r[s]))return!1}else if(a.type===I_t){if(!vy(o,r[s],!0,!1))return!1}else if(a.type===A_t){if(!vy(o,r[s],!1,!1))return!1}else if(a.type===k_t){if(!vy(o,r[s],!1,!0))return!1}else if(a.type===R_t){if(o>=r[s])return!1}else if(a.type===D_t){if(o>r[s])return!1}else if(a.type===P_t){if(o<=r[s])return!1}else if(a.type===N_t){if(o<r[s])return!1}else if(a.type===O_t){if(o===null||isNaN(o))return!1}else if(a.type===$_t&&r[s].indexOf(o)===-1)return!1;return!0}function nSe(e,t,n){for(var r=this.context.data[e],i=r?r.values.value:[],s=r?r[iN]&&r[iN].value:void 0,o=n===sK,a=i.length,l=0,u,c,d,f,h;l<a;++l)if(u=i[l],s&&o){if(c=c||{},d=c[f=u.unit]||0,d===-1)continue;if(h=Sle(t,u),c[f]=h?-1:++d,h&&s.size===1)return!0;if(!h&&d===s.get(f).count)return!1}else if(h=Sle(t,u),o^h)return h;return a&&o}const rSe=Vx(aC),M_t=rSe.left,L_t=rSe.right;function iSe(e,t,n){const r=this.context.data[e],i=r?r.values.value:[],s=r?r[iN]&&r[iN].value:void 0,o=n===sK,a=aC(t),l=M_t(i,a);if(l===i.length||aC(i[l])!==a)return!1;if(s&&o){if(s.size===1)return!0;if(L_t(i,a)-l<s.size)return!1}return!0}function sSe(e,t){return e.map(n=>hn(t.fields?{values:t.fields.map(r=>tSe(r)(n.datum))}:{[Gd]:aC(n.datum)},t))}function oSe(e,t,n,r){for(var i=this.context.data[e],s=i?i.values.value:[],o={},a={},l={},u,c,d,f,h,p,m,g,b,v,x=s.length,E=0,_,C;E<x;++E)if(u=s[E],f=u.unit,c=u.fields,d=u.values,c&&d){for(_=0,C=c.length;_<C;++_)h=c[_],m=o[h.field]||(o[h.field]={}),g=m[f]||(m[f]=[]),l[h.field]=b=h.type.charAt(0),v=YL[`${b}_union`],m[f]=v(g,St(d[_]));n&&(g=a[f]||(a[f]=[]),g.push(St(d).reduce((S,k,R)=>(S[c[R].field]=k,S),{})))}else h=Gd,p=aC(u),m=o[h]||(o[h]={}),g=m[f]||(m[f]=[]),g.push(p),n&&(g=a[f]||(a[f]=[]),g.push({[Gd]:p}));if(t=t||Tle,o[Gd]?o[Gd]=YL[`${Gd}_${t}`](...Object.values(o[Gd])):Object.keys(o).forEach(S=>{o[S]=Object.keys(o[S]).map(k=>o[S][k]).reduce((k,R)=>k===void 0?R:YL[`${l[S]}_${t}`](k,R))}),s=Object.keys(a),n&&s.length){const S=r?__t:E_t;o[S]=t===Tle?{[Cle]:s.reduce((k,R)=>(k.push(...a[R]),k),[])}:{[T_t]:s.map(k=>({[Cle]:a[k]}))}}return o}var YL={[`${Gd}_union`]:Uet,[`${Gd}_intersect`]:Bet,E_union:function(e,t){if(!e.length)return t;for(var n=0,r=t.length;n<r;++n)e.includes(t[n])||e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.includes(n)):t},R_union:function(e,t){var n=yo(t[0]),r=yo(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<r&&(e[1]=r),e):[n,r]},R_intersect:function(e,t){var n=yo(t[0]),r=yo(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?r<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>r&&(e[1]=r),e):[n,r]}};const F_t=":",j_t="@";function uE(e,t,n,r){t[0].type!==Lu&&He("First argument to selection functions must be a string literal.");const i=t[0].value,s=t.length>=2&&Rn(t).value,o="unit",a=j_t+o,l=F_t+i;s===sK&&!It(r,a)&&(r[a]=n.getData(i).indataRef(n,o)),It(r,l)||(r[l]=n.getData(i).tuplesRef())}function aSe(e){const t=this.context.data[e];return t?t.values.value:[]}function B_t(e,t,n){const r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i&&i.count}function z_t(e,t){const n=this.context.dataflow,r=this.context.data[e],i=r.input;return n.pulse(i,n.changeset().remove(fl).insert(t)),1}function U_t(e,t,n){if(e){const r=this.context.dataflow,i=e.mark.source;r.pulse(i,r.changeset().encode(e,t))}return n!==void 0?n:e}const MS=e=>function(t,n){const r=this.context.dataflow.locale();return t===null?"null":r[e](n)(t)},q_t=MS("format"),lSe=MS("timeFormat"),H_t=MS("utcFormat"),W_t=MS("timeParse"),V_t=MS("utcParse"),oI=new Date(2e3,0,1);function T4(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(oI.setYear(2e3),oI.setMonth(e),oI.setDate(t),lSe.call(this,oI,n))}function G_t(e){return T4.call(this,e,1,"%B")}function Y_t(e){return T4.call(this,e,1,"%b")}function K_t(e){return T4.call(this,0,2+e,"%A")}function X_t(e){return T4.call(this,0,2+e,"%a")}const Q_t=":",J_t="@",D7="%",uSe="$";function oK(e,t,n,r){t[0].type!==Lu&&He("First argument to data functions must be a string literal.");const i=t[0].value,s=Q_t+i;if(!It(s,r))try{r[s]=n.getData(i).tuplesRef()}catch{}}function Z_t(e,t,n,r){t[0].type!==Lu&&He("First argument to indata must be a string literal."),t[1].type!==Lu&&He("Second argument to indata must be a string literal.");const i=t[0].value,s=t[1].value,o=J_t+s;It(o,r)||(r[o]=n.getData(i).indataRef(n,s))}function Ea(e,t,n,r){if(t[0].type===Lu)Ale(n,r,t[0].value);else for(e in n.scales)Ale(n,r,e)}function Ale(e,t,n){const r=D7+n;if(!It(t,r))try{t[r]=e.scaleRef(n)}catch{}}function Kf(e,t){if(Tt(e)){const n=t.scales[e];return n&&t7(n.value)?n.value:void 0}else if(gn(e))return t7(e)?e:void 0}function e2t(e,t,n){t.__bandwidth=i=>i&&i.bandwidth?i.bandwidth():0,n._bandwidth=Ea,n._range=Ea,n._scale=Ea;const r=i=>"_["+(i.type===Lu?ft(D7+i.value):ft(D7)+"+"+e(i))+"]";return{_bandwidth:i=>`this.__bandwidth(${r(i[0])})`,_range:i=>`${r(i[0])}.range()`,_scale:i=>`${r(i[0])}(${e(i[1])})`}}function aK(e,t){return function(n,r,i){if(n){const s=Kf(n,(i||this).context);return s&&s.path[e](r)}else return t(r)}}const t2t=aK("area",Hbe),n2t=aK("bounds",Kbe),r2t=aK("centroid",Zbe);function i2t(e,t){const n=Kf(e,(t||this).context);return n&&n.scale()}function s2t(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function lK(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(r){e.warn(r)}return n[n.length-1]}function o2t(){return lK(this.context.dataflow,"warn",arguments)}function a2t(){return lK(this.context.dataflow,"info",arguments)}function l2t(){return lK(this.context.dataflow,"debug",arguments)}function KL(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function P7(e){const t=Sf(e),n=KL(t.r),r=KL(t.g),i=KL(t.b);return .2126*n+.7152*r+.0722*i}function u2t(e,t){const n=P7(e),r=P7(t),i=Math.max(n,r),s=Math.min(n,r);return(i+.05)/(s+.05)}function c2t(){const e=[].slice.call(arguments);return e.unshift({}),hn(...e)}function cSe(e,t){return e===t||e!==e&&t!==t?!0:Ge(e)?Ge(t)&&e.length===t.length?d2t(e,t):!1:At(e)&&At(t)?dSe(e,t):!1}function d2t(e,t){for(let n=0,r=e.length;n<r;++n)if(!cSe(e[n],t[n]))return!1;return!0}function dSe(e,t){for(const n in e)if(!cSe(e[n],t[n]))return!1;return!0}function kle(e){return t=>dSe(e,t)}function f2t(e,t,n,r,i,s){const o=this.context.dataflow,a=this.context.data[e],l=a.input,u=o.stamp();let c=a.changes,d,f;if(o._trigger===!1||!(l.value.length||t||r))return 0;if((!c||c.stamp<u)&&(a.changes=c=o.changeset(),c.stamp=u,o.runAfter(()=>{a.modified=!0,o.pulse(l,c).run()},!0,1)),n&&(d=n===!0?fl:Ge(n)||sE(n)?n:kle(n),c.remove(d)),t&&c.insert(t),r&&(d=kle(r),l.value.some(d)?c.remove(d):c.insert(r)),i)for(f in s)c.modify(i,f,s[f]);return 1}function h2t(e){const t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.hypot(n,r)}function p2t(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const Ile={};function m2t(e,t){const n=Ile[t]||(Ile[t]=Zl(t));return Ge(e)?e.map(n):n(e)}function C4(e){return Ge(e)||ArrayBuffer.isView(e)?e:null}function uK(e){return C4(e)||(Tt(e)?e:null)}function g2t(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return C4(e).join(...n)}function y2t(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return uK(e).indexOf(...n)}function v2t(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return uK(e).lastIndexOf(...n)}function b2t(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return uK(e).slice(...n)}function w2t(e,t,n){return gn(n)&&He("Function argument passed to replace."),!Tt(t)&&!hS(t)&&He("Please pass a string or RegExp argument to replace."),String(e).replace(t,n)}function x2t(e){return C4(e).slice().reverse()}function E2t(e){return C4(e).slice().sort(eE)}function _2t(e,t,n){return r4(e||0,t||0,n||0)}function T2t(e,t){const n=Kf(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function C2t(e,t){const n=Kf(e,(t||this).context);return n?n.copy():void 0}function S2t(e,t){const n=Kf(e,(t||this).context);return n?n.domain():[]}function A2t(e,t,n){const r=Kf(e,(n||this).context);return r?Ge(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0}function k2t(e,t){const n=Kf(e,(t||this).context);return n&&n.range?n.range():[]}function I2t(e,t,n){const r=Kf(e,(n||this).context);return r?r(t):void 0}function R2t(e,t,n,r,i){e=Kf(e,(i||this).context);const s=UG(t,n);let o=e.domain(),a=o[0],l=Rn(o),u=Co;return l-a?u=MG(e,a,l):e=(e.interpolator?Vn("sequential")().interpolator(e.interpolator()):Vn("linear")().interpolate(e.interpolate()).range(e.range())).domain([a=0,l=1]),e.ticks&&(o=e.ticks(+r||15),a!==o[0]&&o.unshift(a),l!==Rn(o)&&o.push(l)),o.forEach(c=>s.stop(u(c),e(c))),s}function D2t(e,t,n){const r=Kf(e,(n||this).context);return function(i){return r?r.path.context(i)(t):""}}function P2t(e){let t=null;return function(n){return n?Vw(n,t=t||rv(e)):e}}const fSe=e=>e.data;function hSe(e,t){const n=aSe.call(t,e);return n.root&&n.root.lookup||{}}function N2t(e,t,n){const r=hSe(e,this),i=r[t],s=r[n];return i&&s?i.path(s).map(fSe):void 0}function O2t(e,t){const n=hSe(e,this)[t];return n?n.ancestors().map(fSe):void 0}const pSe=()=>typeof window<"u"&&window||null;function $2t(){const e=pSe();return e?e.screen:{}}function M2t(){const e=pSe();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function L2t(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function mSe(e,t,n){if(!e)return[];const[r,i]=e,s=new Si().set(r[0],r[1],i[0],i[1]),o=n||this.context.dataflow.scenegraph().root;return mY(o,s,F2t(t))}function F2t(e){let t=null;if(e){const n=St(e.marktype),r=St(e.markname);t=i=>(!n.length||n.some(s=>i.marktype===s))&&(!r.length||r.some(s=>i.name===s))}return t}function j2t(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;e=St(e);const i=e[e.length-1];return i===void 0||Math.hypot(i[0]-t,i[1]-n)>r?[...e,[t,n]]:e}function B2t(e){return St(e).reduce((t,n,r)=>{let[i,s]=n;return t+=r==0?`M ${i},${s} `:r===e.length-1?" Z":`L ${i},${s} `},"")}function z2t(e,t,n){const{x:r,y:i,mark:s}=n,o=new Si().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[l,u]of t)l<o.x1&&(o.x1=l),l>o.x2&&(o.x2=l),u<o.y1&&(o.y1=u),u>o.y2&&(o.y2=u);return o.translate(r,i),mSe([[o.x1,o.y1],[o.x2,o.y2]],e,s).filter(l=>U2t(l.x,l.y,t))}function U2t(e,t,n){let r=0;for(let i=0,s=n.length-1;i<n.length;s=i++){const[o,a]=n[s],[l,u]=n[i];u>t!=a>t&&e<(o-l)*(t-u)/(a-u)+l&&r++}return r&1}const lC={random(){return nu()},cumulativeNormal:mS,cumulativeLogNormal:Y$,cumulativeUniform:J$,densityNormal:W$,densityLogNormal:G$,densityUniform:Q$,quantileNormal:gS,quantileLogNormal:K$,quantileUniform:Z$,sampleNormal:pS,sampleLogNormal:V$,sampleUniform:X$,isArray:Ge,isBoolean:Bp,isDate:sp,isDefined(e){return e!==void 0},isNumber:Zn,isObject:At,isRegExp:hS,isString:Tt,isTuple:sE,isValid(e){return e!=null&&e===e},toBoolean:M$,toDate(e){return L$(e)},toNumber:yo,toString:F$,indexof:y2t,join:g2t,lastindexof:v2t,replace:w2t,reverse:x2t,sort:E2t,slice:b2t,flush:kV,lerp:RV,merge:c2t,pad:DV,peek:Rn,pluck:m2t,span:nE,inrange:vy,truncate:PV,rgb:Sf,lab:Vy,hcl:FT,hsl:LT,luminance:P7,contrast:u2t,sequence:va,format:q_t,utcFormat:H_t,utcParse:V_t,utcOffset:UV,utcSequence:HV,timeFormat:lSe,timeParse:W_t,timeOffset:zV,timeSequence:qV,timeUnitSpecifier:$V,monthFormat:G_t,monthAbbrevFormat:Y_t,dayFormat:K_t,dayAbbrevFormat:X_t,quarter:_V,utcquarter:TV,week:FV,utcweek:BV,dayofyear:LV,utcdayofyear:jV,warn:o2t,info:a2t,debug:l2t,extent(e){return Zc(e)},inScope:s2t,intersect:mSe,clampRange:CV,pinchDistance:h2t,pinchAngle:p2t,screen:$2t,containerSize:L2t,windowSize:M2t,bandspace:_2t,setdata:z_t,pathShape:P2t,panLinear:bV,panLog:wV,panPow:xV,panSymlog:EV,zoomLinear:N$,zoomLog:O$,zoomPow:JT,zoomSymlog:$$,encode:U_t,modify:f2t,lassoAppend:j2t,lassoPath:B2t,intersectLasso:z2t},q2t=["view","item","group","xy","x","y"],H2t="event.vega.",gSe="this.",cK={},ySe={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${ft(uSe+e)}]`,functions:W2t,constants:nK,visitors:cK},N7=iK(ySe);function W2t(e){const t=rK(e);q2t.forEach(n=>t[n]=H2t+n);for(const n in lC)t[n]=gSe+n;return hn(t,e2t(e,lC,cK)),t}function Xi(e,t,n){return arguments.length===1?lC[e]:(lC[e]=t,n&&(cK[e]=n),N7&&(N7.functions[e]=gSe+e),this)}Xi("bandwidth",T2t,Ea);Xi("copy",C2t,Ea);Xi("domain",S2t,Ea);Xi("range",k2t,Ea);Xi("invert",A2t,Ea);Xi("scale",I2t,Ea);Xi("gradient",R2t,Ea);Xi("geoArea",t2t,Ea);Xi("geoBounds",n2t,Ea);Xi("geoCentroid",r2t,Ea);Xi("geoShape",D2t,Ea);Xi("geoScale",i2t,Ea);Xi("indata",B_t,Z_t);Xi("data",aSe,oK);Xi("treePath",N2t,oK);Xi("treeAncestors",O2t,oK);Xi("vlSelectionTest",nSe,uE);Xi("vlSelectionIdTest",iSe,uE);Xi("vlSelectionResolve",oSe,uE);Xi("vlSelectionTuples",sSe);function Pf(e,t){const n={};let r;try{e=Tt(e)?e:ft(e)+"",r=eSe(e)}catch{He("Expression parse error: "+e)}r.visit(s=>{if(s.type!==GCe)return;const o=s.callee.name,a=ySe.visitors[o];a&&a(o,s.arguments,t,n)});const i=N7(r);return i.globals.forEach(s=>{const o=uSe+s;!It(n,o)&&t.getSignal(s)&&(n[o]=t.signalRef(s))}),{$expr:hn({code:i.code},t.options.ast?{ast:r}:null),$fields:i.fields,$params:n}}function V2t(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(r=>t.parseOperator(r)),n.forEach(r=>t.parseOperatorParameters(r)),(e.streams||[]).forEach(r=>t.parseStream(r)),(e.updates||[]).forEach(r=>t.parseUpdate(r)),t.resolve()}const G2t=ed(["rule"]),Rle=ed(["group","image","rect"]);function Y2t(e,t){let n="";return G2t[t]||(e.x2&&(e.x?(Rle[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(Rle[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function dK(e){return(e+"").toLowerCase()}function K2t(e){return dK(e)==="operator"}function X2t(e){return dK(e)==="collect"}function S_(e,t,n){n.endsWith(";")||(n="return("+n+");");const r=Function(...t.concat(n));return e&&e.functions?r.bind(e.functions):r}function Q2t(e,t,n,r){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${r}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${r} : `}var J2t={operator:(e,t)=>S_(e,["_"],t.code),parameter:(e,t)=>S_(e,["datum","_"],t.code),event:(e,t)=>S_(e,["event"],t.code),handler:(e,t)=>{const n=`var datum=event.item&&event.item.datum;return ${t.code};`;return S_(e,["_","event"],n)},encode:(e,t)=>{const{marktype:n,channels:r}=t;let i="var o=item,datum=o.datum,m=0,$;";for(const s in r){const o="o["+ft(s)+"]";i+=`$=${r[s].code};if(${o}!==$)${o}=$,m=1;`}return i+=Y2t(r,n),i+="return m;",S_(e,["item","_"],i)},codegen:{get(e){const t=`[${e.map(ft).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n;const r=(s,o)=>{const a=t[o];let l,u;return s.path?(l=`a${s.path}`,u=`b${s.path}`):((n=n||{})["f"+o]=s,l=`this.f${o}(a)`,u=`this.f${o}(b)`),Q2t(l,u,-a,a)},i=Function("a","b","var u, v; return "+e.map(r).join("")+"0;");return n?i.bind(n):i}}};function Z2t(e){const t=this;K2t(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function eTt(e){const t=this;if(e.params){const n=t.get(e.id);n||He("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function tTt(e,t){t=t||{};const n=this;for(const r in e){const i=e[r];t[r]=Ge(i)?i.map(s=>Dle(s,n,t)):Dle(i,n,t)}return t}function Dle(e,t,n){if(!e||!At(e))return e;for(let r=0,i=Ple.length,s;r<i;++r)if(s=Ple[r],It(e,s.key))return s.parse(e,t,n);return e}var Ple=[{key:"$ref",parse:nTt},{key:"$key",parse:iTt},{key:"$expr",parse:rTt},{key:"$field",parse:sTt},{key:"$encode",parse:aTt},{key:"$compare",parse:oTt},{key:"$context",parse:lTt},{key:"$subflow",parse:uTt},{key:"$tupleid",parse:cTt}];function nTt(e,t){return t.get(e.$ref)||He("Operator not defined: "+e.$ref)}function rTt(e,t,n){e.$params&&t.parseParameters(e.$params,n);const r="e:"+e.$expr.code;return t.fn[r]||(t.fn[r]=wl(t.parameterExpression(e.$expr),e.$fields))}function iTt(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=IV(e.$key,e.$flat,t.expr.codegen))}function sTt(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=Zl(e.$field,e.$name,t.expr.codegen))}function oTt(e,t){const n="c:"+e.$compare+"_"+e.$order,r=St(e.$compare).map(i=>i&&i.$tupleid?Kt:i);return t.fn[n]||(t.fn[n]=SV(r,e.$order,t.expr.codegen))}function aTt(e,t){const n=e.$encode,r={};for(const i in n){const s=n[i];r[i]=wl(t.encodeExpression(s.$expr),s.$fields),r[i].output=s.$output}return r}function lTt(e,t){return t}function uTt(e,t){const n=e.$subflow;return function(r,i,s){const o=t.fork().parse(n),a=o.get(n.operators[0].id),l=o.signals.parent;return l&&l.set(s),a.detachSubflow=()=>t.detach(o),a}}function cTt(){return Kt}function dTt(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,r=e.stream!=null?t.get(e.stream):void 0,i;e.source?r=t.events(e.source,e.type,n):e.merge&&(i=e.merge.map(s=>t.get(s)),r=i[0].merge.apply(i[0],i.slice(1))),e.between&&(i=e.between.map(s=>t.get(s)),r=r.between(i[0],i[1])),e.filter&&(r=r.filter(n)),e.throttle!=null&&(r=r.throttle(+e.throttle)),e.debounce!=null&&(r=r.debounce(+e.debounce)),r==null&&He("Invalid stream definition: "+JSON.stringify(e)),e.consume&&r.consume(!0),t.stream(e,r)}function fTt(e){var t=this,n=At(n=e.source)?n.$ref:n,r=t.get(n),i=null,s=e.update,o=void 0;r||He("Source not defined: "+e.source),i=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),s&&s.$expr&&(s.$params&&(o=t.parseParameters(s.$params)),s=t.handlerExpression(s.$expr)),t.update(e,r,i,s,o)}const hTt={skip:!0};function pTt(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach(s=>{const o=t.signals[s];e.signals(s,o)&&(r[s]=o.value)})}if(e.data){var i=n.data={};Object.keys(t.data).forEach(s=>{const o=t.data[s];e.data(s,o)&&(i[s]=o.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(s=>s.getState(e))),n}function mTt(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach(s=>{n.update(t.signals[s],i[s],hTt)}),Object.keys(r||{}).forEach(s=>{n.pulse(t.data[s].input,n.changeset().remove(fl).insert(r[s]))}),(e.subcontext||[]).forEach((s,o)=>{const a=t.subcontext[o];a&&a.setState(s)})}function vSe(e,t,n,r){return new bSe(e,t,n,r)}function bSe(e,t,n,r){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=r||J2t,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function Nle(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}bSe.prototype=Nle.prototype={fork(){const e=new Nle(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,r=n.dataflow,i=e.value;if(n.set(e.id,t),X2t(e.type)&&i&&(i.$ingest?r.ingest(t,i.$ingest,i.$format):i.$request?r.preload(t,i.$request,i.$format):r.pulse(t,r.changeset().insert(i))),e.root&&(n.root=t),e.parent){let s=n.get(e.parent.$ref);s?(r.connect(s,[t]),t.targets().add(s)):(n.unresolved=n.unresolved||[]).push(()=>{s=n.get(e.parent.$ref),r.connect(s,[t]),t.targets().add(s)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const s in e.data){const o=n.data[s]||(n.data[s]={});e.data[s].forEach(a=>o[a]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[dK(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:V2t,parseOperator:Z2t,parseOperatorParameters:eTt,parseParameters:tTt,parseStream:dTt,parseUpdate:fTt,getState:pTt,setState:mTt};function gTt(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),wSe(t,e.description()))}function wSe(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function yTt(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}const XL="default";function vTt(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:XL,item:null}));e.on(e.events("view","pointermove"),t,(n,r)=>{const i=t.value,s=i?Tt(i)?i:i.user:XL,o=r.item&&r.item.cursor||null;return i&&s===i.user&&o==i.item?i:{user:s,item:o}}),e.add(null,function(n){let r=n.cursor,i=this.value;return Tt(r)||(i=r.item,r=r.user),O7(e,r&&r!==XL?r:i||r),i},{cursor:t})}function O7(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function sN(e,t){var n=e._runtime.data;return It(n,t)||He("Unrecognized data set: "+t),n[t]}function bTt(e,t){return arguments.length<2?sN(this,e).values.value:S4.call(this,e,Vv().remove(fl).insert(t))}function S4(e,t){U_e(t)||He("Second argument to changes must be a changeset.");const n=sN(this,e);return n.modified=!0,this.pulse(n.input,t)}function wTt(e,t){return S4.call(this,e,Vv().insert(t))}function xTt(e,t){return S4.call(this,e,Vv().remove(t))}function xSe(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function ESe(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function A4(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function ETt(e){var t=A4(e),n=xSe(e),r=ESe(e);e._renderer.background(e.background()),e._renderer.resize(n,r,t),e._handler.origin(t),e._resizeListeners.forEach(i=>{try{i(n,r)}catch(s){e.error(s)}})}function _Tt(e,t,n){var r=e._renderer,i=r&&r.canvas(),s,o,a;return i&&(a=A4(e),o=t.changedTouches?t.changedTouches[0]:t,s=y4(o,i),s[0]-=a[0],s[1]-=a[1]),t.dataflow=e,t.item=n,t.vega=TTt(e,n,s),t}function TTt(e,t,n){const r=t?t.mark.marktype==="group"?t:t.mark.group:null;function i(o){var a=r,l;if(o){for(l=t;l;l=l.mark.group)if(l.mark.name===o){a=l;break}}return a&&a.mark&&a.mark.interactive?a:{}}function s(o){if(!o)return n;Tt(o)&&(o=i(o));const a=n.slice();for(;o;)a[0]-=o.x||0,a[1]-=o.y||0,o=o.mark&&o.mark.group;return a}return{view:Jo(e),item:Jo(t||{}),group:i,xy:s,x:o=>s(o)[0],y:o=>s(o)[1]}}const Ole="view",CTt="timer",STt="window",ATt={trap:!1};function kTt(e){const t=hn({defaults:{}},e),n=(r,i)=>{i.forEach(s=>{Ge(r[s])&&(r[s]=ed(r[s]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function _Se(e,t,n,r){e._eventListeners.push({type:n,sources:St(t),handler:r})}function ITt(e,t){var n=e._eventConfig.defaults,r=n.prevent,i=n.allow;return r===!1||i===!0?!1:r===!0||i===!1?!0:r?r[t]:i?!i[t]:e.preventDefault()}function aI(e,t,n){const r=e._eventConfig&&e._eventConfig[t];return r===!1||At(r)&&!r[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0}function RTt(e,t,n){var r=this,i=new H$(n),s=function(u,c){r.runAsync(null,()=>{e===Ole&&ITt(r,t)&&u.preventDefault(),i.receive(_Tt(r,u,c))})},o;if(e===CTt)aI(r,"timer",t)&&r.timer(s,t);else if(e===Ole)aI(r,"view",t)&&r.addEventListener(t,s,ATt);else if(e===STt?aI(r,"window",t)&&typeof window<"u"&&(o=[window]):typeof document<"u"&&aI(r,"selector",t)&&(o=Array.from(document.querySelectorAll(e))),!o)r.warn("Can not resolve event source: "+e);else{for(var a=0,l=o.length;a<l;++a)o[a].addEventListener(t,s);_Se(r,o,t,s)}return i}function $le(e){return e.item}function Mle(e){return e.item.mark.source}function Lle(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function DTt(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","pointerover",$le),Mle,Lle(e)),this.on(this.events("view","pointerout",$le),Mle,Lle(t)),this}function PTt(){var e=this._tooltip,t=this._timers,n=this._handler.handlers(),r=this._eventListeners,i,s,o,a,l;for(i=t.length;--i>=0;)t[i].stop();for(i=r.length;--i>=0;)for(o=r[i],s=o.sources.length;--s>=0;)o.sources[s].removeEventListener(o.type,o.handler);for(e&&e.call(this,this._handler,null,null,null),i=n.length;--i>=0;)l=n[i].type,a=n[i].handler,this._handler.off(l,a);return this}function Hl(e,t,n){const r=document.createElement(e);for(const i in t)r.setAttribute(i,t[i]);return n!=null&&(r.textContent=n),r}const NTt="vega-bind",OTt="vega-bind-name",$Tt="vega-bind-radio";function MTt(e,t,n){if(!t)return;const r=n.param;let i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:o=>{o!=e.signal(r.signal)&&e.runAsync(null,()=>{i.source=!0,e.signal(r.signal,o)})}},r.debounce&&(i.update=AV(r.debounce,i.update))),(r.input==null&&r.element?LTt:jTt)(i,t,r,e),i.active||(e.on(e._signals[r.signal],null,()=>{i.source?i.source=!1:i.set(e.signal(r.signal))}),i.active=!0),i}function LTt(e,t,n,r){const i=n.event||"input",s=()=>e.update(t.value);r.signal(n.signal,t.value),t.addEventListener(i,s),_Se(r,t,i,s),e.set=o=>{t.value=o,t.dispatchEvent(FTt(i))}}function FTt(e){return typeof Event<"u"?new Event(e):{type:e}}function jTt(e,t,n,r){const i=r.signal(n.signal),s=Hl("div",{class:NTt}),o=n.input==="radio"?s:s.appendChild(Hl("label"));o.appendChild(Hl("span",{class:OTt},n.name||n.signal)),t.appendChild(s);let a=BTt;switch(n.input){case"checkbox":a=zTt;break;case"select":a=UTt;break;case"radio":a=qTt;break;case"range":a=HTt;break}a(e,o,n,i)}function BTt(e,t,n,r){const i=Hl("input");for(const s in n)s!=="signal"&&s!=="element"&&i.setAttribute(s==="input"?"type":s,n[s]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",()=>e.update(i.value)),e.elements=[i],e.set=s=>i.value=s}function zTt(e,t,n,r){const i={type:"checkbox",name:n.signal};r&&(i.checked=!0);const s=Hl("input",i);t.appendChild(s),s.addEventListener("change",()=>e.update(s.checked)),e.elements=[s],e.set=o=>s.checked=!!o||null}function UTt(e,t,n,r){const i=Hl("select",{name:n.signal}),s=n.labels||[];n.options.forEach((o,a)=>{const l={value:o};oN(o,r)&&(l.selected=!0),i.appendChild(Hl("option",l,(s[a]||o)+""))}),t.appendChild(i),i.addEventListener("change",()=>{e.update(n.options[i.selectedIndex])}),e.elements=[i],e.set=o=>{for(let a=0,l=n.options.length;a<l;++a)if(oN(n.options[a],o)){i.selectedIndex=a;return}}}function qTt(e,t,n,r){const i=Hl("span",{class:$Tt}),s=n.labels||[];t.appendChild(i),e.elements=n.options.map((o,a)=>{const l={type:"radio",name:n.signal,value:o};oN(o,r)&&(l.checked=!0);const u=Hl("input",l);u.addEventListener("change",()=>e.update(o));const c=Hl("label",{},(s[a]||o)+"");return c.prepend(u),i.appendChild(c),u}),e.set=o=>{const a=e.elements,l=a.length;for(let u=0;u<l;++u)oN(a[u].value,o)&&(a[u].checked=!0)}}function HTt(e,t,n,r){r=r!==void 0?r:(+n.max+ +n.min)/2;const i=n.max!=null?n.max:Math.max(100,+r)||100,s=n.min||Math.min(0,i,+r)||0,o=n.step||b0(s,i,100),a=Hl("input",{type:"range",name:n.signal,min:s,max:i,step:o});a.value=r;const l=Hl("span",{},+r);t.appendChild(a),t.appendChild(l);const u=()=>{l.textContent=a.value,e.update(+a.value)};a.addEventListener("input",u),a.addEventListener("change",u),e.elements=[a],e.set=c=>{a.value=c,l.textContent=c}}function oN(e,t){return e===t||e+""==t+""}function TSe(e,t,n,r,i,s){return t=t||new r(e.loader()),t.initialize(n,xSe(e),ESe(e),A4(e),i,s).background(e.background())}function fK(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function WTt(e,t,n,r){const i=new r(e.loader(),fK(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,A4(e),e);return t&&t.handlers().forEach(s=>{i.on(s.type,s.handler)}),i}function VTt(e,t){const n=this,r=n._renderType,i=n._eventConfig.bind,s=v4(r);e=n._el=e?QL(n,e,!0):null,gTt(n),s||n.error("Unrecognized renderer type: "+r);const o=s.handler||PS,a=e?s.renderer:s.headless;return n._renderer=a?TSe(n,n._renderer,e,a):null,n._handler=WTt(n,n._handler,e,o),n._redraw=!0,e&&i!=="none"&&(t=t?n._elBind=QL(n,t,!0):e.appendChild(Hl("form",{class:"vega-bindings"})),n._bind.forEach(l=>{l.param.element&&i!=="container"&&(l.element=QL(n,l.param.element,!!l.param.input))}),n._bind.forEach(l=>{MTt(n,l.element||t,l)})),n}function QL(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(r){t=null,e.error(r)}return t}const A_=e=>+e||0,GTt=e=>({top:e,bottom:e,left:e,right:e});function Fle(e){return At(e)?{top:A_(e.top),bottom:A_(e.bottom),left:A_(e.left),right:A_(e.right)}:GTt(A_(e))}async function hK(e,t,n,r){const i=v4(t),s=i&&i.headless;return s||He("Unrecognized renderer type: "+t),await e.runAsync(),TSe(e,null,null,s,n,r).renderAsync(e._scenegraph.root)}async function YTt(e,t){e!==Xm.Canvas&&e!==Xm.SVG&&e!==Xm.PNG&&He("Unrecognized image type: "+e);const n=await hK(this,e,t);return e===Xm.SVG?KTt(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function KTt(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}async function XTt(e,t){return(await hK(this,Xm.Canvas,e,t)).canvas()}async function QTt(e){return(await hK(this,Xm.SVG,e)).svg()}function JTt(e,t,n){return vSe(e,Uw,lC,n).parse(t)}function ZTt(e){var t=this._runtime.scales;return It(t,e)||He("Unrecognized scale or projection: "+e),t[e].value}var CSe="width",SSe="height",pK="padding",jle={skip:!0};function ASe(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===pK?r.left+r.right:0)}function kSe(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===pK?r.top+r.bottom:0)}function eCt(e){var t=e._signals,n=t[CSe],r=t[SSe],i=t[pK];function s(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,a=>{e._width=a.size,e._viewWidth=ASe(e,a.size),s()},{size:n}),e._resizeHeight=e.add(null,a=>{e._height=a.size,e._viewHeight=kSe(e,a.size),s()},{size:r});const o=e.add(null,s,{pad:i});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=r.rank+1,o.rank=i.rank+1}function tCt(e,t,n,r,i,s){this.runAfter(o=>{let a=0;o._autosize=0,o.width()!==n&&(a=1,o.signal(CSe,n,jle),o._resizeWidth.skip(!0)),o.height()!==r&&(a=1,o.signal(SSe,r,jle),o._resizeHeight.skip(!0)),o._viewWidth!==e&&(o._resize=1,o._viewWidth=e),o._viewHeight!==t&&(o._resize=1,o._viewHeight=t),(o._origin[0]!==i[0]||o._origin[1]!==i[1])&&(o._resize=1,o._origin=i),a&&o.run("enter"),s&&o.runAfter(l=>l.resize())},!1,1)}function nCt(e){return this._runtime.getState(e||{data:rCt,signals:iCt,recurse:!0})}function rCt(e,t){return t.modified&&Ge(t.input.value)&&!e.startsWith("_:vega:_")}function iCt(e,t){return!(e==="parent"||t instanceof Uw.proxy)}function sCt(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function oCt(e,t){function n(r){e({timestamp:Date.now(),elapsed:r})}this._timers.push(drt(n,t))}function aCt(e,t,n,r){const i=e.element();i&&i.setAttribute("title",lCt(r))}function lCt(e){return e==null?"":Ge(e)?ISe(e):At(e)&&!sp(e)?uCt(e):e+""}function uCt(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(Ge(n)?ISe(n):RSe(n))}).join(`
`)}function ISe(e){return"["+e.map(RSe).join(", ")+"]"}function RSe(e){return Ge(e)?"[]":At(e)&&!sp(e)?"{}":e}function cCt(){if(this.renderer()==="canvas"&&this._renderer._canvas){let e=null;const t=()=>{e!=null&&e();const n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",t),e=()=>{n.removeEventListener("change",t)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};t()}}function DSe(e,t){const n=this;if(t=t||{},aw.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){const s=hn({},e.locale,t.locale);n.locale(P_e(s.number,s.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||Xm.Canvas,n._scenegraph=new TTe;const r=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||aCt,n._redraw=!0,n._handler=new PS().scene(r),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=kTt(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const i=JTt(n,e,t.expr);n._runtime=i,n._signals=i.signals,n._bind=(e.bindings||[]).map(s=>({state:null,param:hn({},s)})),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=ASe(n,n._width),n._viewHeight=kSe(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,eCt(n),yTt(n),vTt(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind),t.watchPixelRatio&&n._watchPixelRatio()}function lI(e,t){return It(e._signals,t)?e._signals[t]:He("Unrecognized signal name: "+ft(t))}function PSe(e,t){const n=(e._targets||[]).filter(r=>r._update&&r._update.handler===t);return n.length?n[0]:null}function Ble(e,t,n,r){let i=PSe(n,r);return i||(i=fK(e,()=>r(t,n.value)),i.handler=r,e.on(n,null,i)),e}function zle(e,t,n){const r=PSe(t,n);return r&&t._targets.remove(r),e}bt(DSe,aw,{async evaluate(e,t,n){if(await aw.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,ETt(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(r){this.error(r)}return n&&N3(this,n),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=e!=null?e+"":null;return t!==this._desc&&wSe(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const r=lI(this,e);return arguments.length===1?r.value:this.update(r,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",Fle(e)):Fle(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(v4(e)||He("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(aw.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(lI(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:tCt,addEventListener(e,t,n){let r=t;return n&&n.trap===!1||(r=fK(this,t),r.raw=t),this._handler.on(e,r),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),r=n.length,i,s;--r>=0;)if(s=n[r].type,i=n[r].handler,e===s&&(t===i||t===i.raw)){this._handler.off(s,i);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.includes(e)||t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return Ble(this,e,lI(this,e),t)},removeSignalListener(e,t){return zle(this,lI(this,e),t)},addDataListener(e,t){return Ble(this,e,sN(this,e).values,t)},removeDataListener(e,t){return zle(this,sN(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=O7(this,null);this._globalCursor=!!e,t&&O7(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:oCt,events:RTt,finalize:PTt,hover:DTt,data:bTt,change:S4,insert:wTt,remove:xTt,scale:ZTt,initialize:VTt,toImageURL:YTt,toCanvas:XTt,toSVG:QTt,getState:nCt,setState:sCt,_watchPixelRatio:cCt});function NSe(e){const t=this.context.data[e];return t?t.values.value:[]}function dCt(e,t,n){const r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i&&i.count}function fCt(e,t){const n=this.context.dataflow,r=this.context.data[e],i=r.input;return n.pulse(i,n.changeset().remove(fl).insert(t)),1}function hCt(e,t,n){if(e){const r=this.context.dataflow,i=e.mark.source;r.pulse(i,r.changeset().encode(e,t))}return n!==void 0?n:e}const LS=e=>function(t,n){const r=this.context.dataflow.locale();return t===null?"null":r[e](n)(t)},pCt=LS("format"),OSe=LS("timeFormat"),mCt=LS("utcFormat"),gCt=LS("timeParse"),yCt=LS("utcParse"),uI=new Date(2e3,0,1);function k4(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(uI.setYear(2e3),uI.setMonth(e),uI.setDate(t),OSe.call(this,uI,n))}function vCt(e){return k4.call(this,e,1,"%B")}function bCt(e){return k4.call(this,e,1,"%b")}function wCt(e){return k4.call(this,0,2+e,"%A")}function xCt(e){return k4.call(this,0,2+e,"%a")}const ECt=":",_Ct="@",$7="%",TCt="$";function mK(e,t,n,r){t[0].type!==Lu&&He("First argument to data functions must be a string literal.");const i=t[0].value,s=ECt+i;if(!It(s,r))try{r[s]=n.getData(i).tuplesRef()}catch{}}function CCt(e,t,n,r){t[0].type!==Lu&&He("First argument to indata must be a string literal."),t[1].type!==Lu&&He("Second argument to indata must be a string literal.");const i=t[0].value,s=t[1].value,o=_Ct+s;It(o,r)||(r[o]=n.getData(i).indataRef(n,s))}function _a(e,t,n,r){if(t[0].type===Lu)Ule(n,r,t[0].value);else for(e in n.scales)Ule(n,r,e)}function Ule(e,t,n){const r=$7+n;if(!It(t,r))try{t[r]=e.scaleRef(n)}catch{}}function Xf(e,t){if(Tt(e)){const n=t.scales[e];return n&&t7(n.value)?n.value:void 0}}function SCt(e,t,n){t.__bandwidth=i=>i&&i.bandwidth?i.bandwidth():0,n._bandwidth=_a,n._range=_a,n._scale=_a;const r=i=>"_["+(i.type===Lu?ft($7+i.value):ft($7)+"+"+e(i))+"]";return{_bandwidth:i=>`this.__bandwidth(${r(i[0])})`,_range:i=>`${r(i[0])}.range()`,_scale:i=>`${r(i[0])}(${e(i[1])})`}}function gK(e,t){return function(n,r,i){if(n){const s=Xf(n,(i||this).context);return s&&s.path[e](r)}else return t(r)}}const ACt=gK("area",Hbe),kCt=gK("bounds",Kbe),ICt=gK("centroid",Zbe);function RCt(e,t){const n=Xf(e,(t||this).context);return n&&n.scale()}function DCt(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function yK(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(r){e.warn(r)}return n[n.length-1]}function PCt(){return yK(this.context.dataflow,"warn",arguments)}function NCt(){return yK(this.context.dataflow,"info",arguments)}function OCt(){return yK(this.context.dataflow,"debug",arguments)}function JL(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function M7(e){const t=Sf(e),n=JL(t.r),r=JL(t.g),i=JL(t.b);return .2126*n+.7152*r+.0722*i}function $Ct(e,t){const n=M7(e),r=M7(t),i=Math.max(n,r),s=Math.min(n,r);return(i+.05)/(s+.05)}function MCt(){const e=[].slice.call(arguments);return e.unshift({}),hn(...e)}function $Se(e,t){return e===t||e!==e&&t!==t?!0:Ge(e)?Ge(t)&&e.length===t.length?LCt(e,t):!1:At(e)&&At(t)?MSe(e,t):!1}function LCt(e,t){for(let n=0,r=e.length;n<r;++n)if(!$Se(e[n],t[n]))return!1;return!0}function MSe(e,t){for(const n in e)if(!$Se(e[n],t[n]))return!1;return!0}function qle(e){return t=>MSe(e,t)}function FCt(e,t,n,r,i,s){const o=this.context.dataflow,a=this.context.data[e],l=a.input,u=o.stamp();let c=a.changes,d,f;if(o._trigger===!1||!(l.value.length||t||r))return 0;if((!c||c.stamp<u)&&(a.changes=c=o.changeset(),c.stamp=u,o.runAfter(()=>{a.modified=!0,o.pulse(l,c).run()},!0,1)),n&&(d=n===!0?fl:Ge(n)||sE(n)?n:qle(n),c.remove(d)),t&&c.insert(t),r&&(d=qle(r),l.value.some(d)?c.remove(d):c.insert(r)),i)for(f in s)c.modify(i,f,s[f]);return 1}function jCt(e){const t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.hypot(n,r)}function BCt(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const Hle={};function zCt(e,t){const n=Hle[t]||(Hle[t]=Zl(t));return Ge(e)?e.map(n):n(e)}function I4(e){return Ge(e)||ArrayBuffer.isView(e)?e:null}function vK(e){return I4(e)||(Tt(e)?e:null)}function UCt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return I4(e).join(...n)}function qCt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return vK(e).indexOf(...n)}function HCt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return vK(e).lastIndexOf(...n)}function WCt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return vK(e).slice(...n)}function VCt(e,t,n){return gn(n)&&He("Function argument passed to replace."),!Tt(t)&&!hS(t)&&He("Please pass a string or RegExp argument to replace."),String(e).replace(t,n)}function GCt(e){return I4(e).slice().reverse()}function YCt(e){return I4(e).slice().sort(eE)}function KCt(e,t,n){return r4(e||0,t||0,n||0)}function XCt(e,t){const n=Xf(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function QCt(e,t){const n=Xf(e,(t||this).context);return n?n.copy():void 0}function JCt(e,t){const n=Xf(e,(t||this).context);return n?n.domain():[]}function ZCt(e,t,n){const r=Xf(e,(n||this).context);return r?Ge(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0}function eSt(e,t){const n=Xf(e,(t||this).context);return n&&n.range?n.range():[]}function tSt(e,t,n){const r=Xf(e,(n||this).context);return r?r(t):void 0}function nSt(e,t,n,r,i){let s=typeof e=="string"?Xf(e,(i||this).context):e;const o=UG(t,n);let a=s.domain(),l=a[0],u=Rn(a),c=Co;return u-l?c=MG(s,l,u):s=(s.interpolator?Vn("sequential")().interpolator(s.interpolator()):Vn("linear")().interpolate(s.interpolate()).range(s.range())).domain([l=0,u=1]),s.ticks&&(a=s.ticks(+r||15),l!==a[0]&&a.unshift(l),u!==Rn(a)&&a.push(u)),a.forEach(d=>o.stop(c(d),s(d))),o}function rSt(e,t,n){const r=Xf(e,(n||this).context);return function(i){return r?r.path.context(i)(t):""}}function iSt(e){let t=null;return function(n){return n?Vw(n,t=t||rv(e)):e}}const LSe=e=>e.data;function FSe(e,t){const n=NSe.call(t,e);return n.root&&n.root.lookup||{}}function sSt(e,t,n){const r=FSe(e,this),i=r[t],s=r[n];return i&&s?i.path(s).map(LSe):void 0}function oSt(e,t){const n=FSe(e,this)[t];return n?n.ancestors().map(LSe):void 0}const jSe=()=>typeof window<"u"&&window||null;function aSt(){const e=jSe();return e?e.screen:{}}function lSt(){const e=jSe();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function uSt(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function BSe(e,t,n){if(!e)return[];const[r,i]=e,s=new Si().set(r[0],r[1],i[0],i[1]),o=n||this.context.dataflow.scenegraph().root;return mY(o,s,cSt(t))}function cSt(e){let t=null;if(e){const n=St(e.marktype),r=St(e.markname);t=i=>(!n.length||n.some(s=>i.marktype===s))&&(!r.length||r.some(s=>i.name===s))}return t}function dSt(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;e=St(e);const i=e[e.length-1];return i===void 0||Math.hypot(i[0]-t,i[1]-n)>r?[...e,[t,n]]:e}function fSt(e){return St(e).reduce((t,n,r)=>{let[i,s]=n;return t+=r==0?`M ${i},${s} `:r===e.length-1?" Z":`L ${i},${s} `},"")}function hSt(e,t,n){const{x:r,y:i,mark:s}=n,o=new Si().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[l,u]of t)l<o.x1&&(o.x1=l),l>o.x2&&(o.x2=l),u<o.y1&&(o.y1=u),u>o.y2&&(o.y2=u);return o.translate(r,i),BSe([[o.x1,o.y1],[o.x2,o.y2]],e,s).filter(l=>pSt(l.x,l.y,t))}function pSt(e,t,n){let r=0;for(let i=0,s=n.length-1;i<n.length;s=i++){const[o,a]=n[s],[l,u]=n[i];u>t!=a>t&&e<(o-l)*(t-u)/(a-u)+l&&r++}return r&1}const aN={random(){return nu()},cumulativeNormal:mS,cumulativeLogNormal:Y$,cumulativeUniform:J$,densityNormal:W$,densityLogNormal:G$,densityUniform:Q$,quantileNormal:gS,quantileLogNormal:K$,quantileUniform:Z$,sampleNormal:pS,sampleLogNormal:V$,sampleUniform:X$,isArray:Ge,isBoolean:Bp,isDate:sp,isDefined(e){return e!==void 0},isNumber:Zn,isObject:At,isRegExp:hS,isString:Tt,isTuple:sE,isValid(e){return e!=null&&e===e},toBoolean:M$,toDate(e){return L$(e)},toNumber:yo,toString:F$,indexof:qCt,join:UCt,lastindexof:HCt,replace:VCt,reverse:GCt,sort:YCt,slice:WCt,flush:kV,lerp:RV,merge:MCt,pad:DV,peek:Rn,pluck:zCt,span:nE,inrange:vy,truncate:PV,rgb:Sf,lab:Vy,hcl:FT,hsl:LT,luminance:M7,contrast:$Ct,sequence:va,format:pCt,utcFormat:mCt,utcParse:yCt,utcOffset:UV,utcSequence:HV,timeFormat:OSe,timeParse:gCt,timeOffset:zV,timeSequence:qV,timeUnitSpecifier:$V,monthFormat:vCt,monthAbbrevFormat:bCt,dayFormat:wCt,dayAbbrevFormat:xCt,quarter:_V,utcquarter:TV,week:FV,utcweek:BV,dayofyear:LV,utcdayofyear:jV,warn:PCt,info:NCt,debug:OCt,extent(e){return Zc(e)},inScope:DCt,intersect:BSe,clampRange:CV,pinchDistance:jCt,pinchAngle:BCt,screen:aSt,containerSize:uSt,windowSize:lSt,bandspace:KCt,setdata:fCt,pathShape:iSt,panLinear:bV,panLog:wV,panPow:xV,panSymlog:EV,zoomLinear:N$,zoomLog:O$,zoomPow:JT,zoomSymlog:$$,encode:hCt,modify:FCt,lassoAppend:dSt,lassoPath:fSt,intersectLasso:hSt},mSt=["view","item","group","xy","x","y"],gSt="event.vega.",zSe="this.",bK={},ySt={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${ft(TCt+e)}]`,functions:vSt,constants:nK,visitors:bK},Wle=iK(ySt);function vSt(e){const t=rK(e);mSt.forEach(n=>t[n]=gSt+n);for(const n in aN)t[n]=zSe+n;return hn(t,SCt(e,aN,bK)),t}function Bi(e,t,n){return arguments.length===1?aN[e]:(aN[e]=t,n&&(bK[e]=n),Wle&&(Wle.functions[e]=zSe+e),this)}Bi("bandwidth",XCt,_a);Bi("copy",QCt,_a);Bi("domain",JCt,_a);Bi("range",eSt,_a);Bi("invert",ZCt,_a);Bi("scale",tSt,_a);Bi("gradient",nSt,_a);Bi("geoArea",ACt,_a);Bi("geoBounds",kCt,_a);Bi("geoCentroid",ICt,_a);Bi("geoShape",rSt,_a);Bi("geoScale",RCt,_a);Bi("indata",dCt,CCt);Bi("data",NSe,mK);Bi("treePath",sSt,mK);Bi("treeAncestors",oSt,mK);Bi("vlSelectionTest",nSe,uE);Bi("vlSelectionIdTest",iSe,uE);Bi("vlSelectionResolve",oSe,uE);Bi("vlSelectionTuples",sSe);const bSt="view",lN="[",uN="]",USe="{",qSe="}",wSt=":",HSe=",",xSt="@",ESt=">",_St=/[[\]{}]/,TSt={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let WSe,VSe;function J0(e,t,n){return WSe=t||bSt,VSe=n||TSt,GSe(e.trim()).map(L7)}function CSt(e){return VSe[e]}function nT(e,t,n,r,i){const s=e.length;let o=0,a;for(;t<s;++t){if(a=e[t],!o&&a===n)return t;i&&i.indexOf(a)>=0?--o:r&&r.indexOf(a)>=0&&++o}return t}function GSe(e){const t=[],n=e.length;let r=0,i=0;for(;i<n;)i=nT(e,i,HSe,lN+USe,uN+qSe),t.push(e.substring(r,i).trim()),r=++i;if(t.length===0)throw"Empty event selector: "+e;return t}function L7(e){return e[0]==="["?SSt(e):ASt(e)}function SSt(e){const t=e.length;let n=1,r;if(n=nT(e,n,uN,lN,uN),n===t)throw"Empty between selector: "+e;if(r=GSe(e.substring(1,n)),r.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==ESt)throw"Expected '>' after between selector: "+e;r=r.map(L7);const i=L7(e.slice(1).trim());return i.between?{between:r,stream:i}:(i.between=r,i)}function ASt(e){const t={source:WSe},n=[];let r=[0,0],i=0,s=0,o=e.length,a=0,l,u;if(e[o-1]===qSe){if(a=e.lastIndexOf(USe),a>=0){try{r=kSt(e.substring(a+1,o-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,a).trim(),o=e.length}else throw"Unmatched right brace: "+e;a=0}if(!o)throw e;if(e[0]===xSt&&(i=++a),l=nT(e,a,wSt),l<o&&(n.push(e.substring(s,l).trim()),s=a=++l),a=nT(e,a,lN),a===o)n.push(e.substring(s,o).trim());else if(n.push(e.substring(s,a).trim()),u=[],s=++a,s===o)throw"Unmatched left bracket: "+e;for(;a<o;){if(a=nT(e,a,uN),a===o)throw"Unmatched left bracket: "+e;if(u.push(e.substring(s,a).trim()),a<o-1&&e[++a]!==lN)throw"Expected left bracket: "+e;s=++a}if(!(o=n.length)||_St.test(n[o-1]))throw"Invalid event selector: "+e;return o>1?(t.type=n[1],i?t.markname=n[0].slice(1):CSt(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),u!=null&&(t.filter=u),r[0]&&(t.throttle=r[0]),r[1]&&(t.debounce=r[1]),t}function kSt(e){const t=e.split(HSe);if(!e.length||t.length>2)throw e;return t.map(n=>{const r=+n;if(r!==r)throw e;return r})}function ISt(e){return At(e)?e:{type:e||"pad"}}const k_=e=>+e||0,RSt=e=>({top:e,bottom:e,left:e,right:e});function DSt(e){return At(e)?e.signal?e:{top:k_(e.top),bottom:k_(e.bottom),left:k_(e.left),right:k_(e.right)}:RSt(k_(e))}const Bs=e=>At(e)&&!Ge(e)?hn({},e):{value:e};function Vle(e,t,n,r){return n!=null?(At(n)&&!Ge(n)||Ge(n)&&n.length&&At(n[0])?e.update[t]=n:e[r||"enter"][t]={value:n},1):0}function So(e,t,n){for(const r in t)Vle(e,r,t[r]);for(const r in n)Vle(e,r,n[r],"update")}function cE(e,t,n){for(const r in t)n&&It(n,r)||(e[r]=hn(e[r]||{},t[r]));return e}function Sb(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const wK="mark",xK="frame",EK="scope",PSt="axis",NSt="axis-domain",OSt="axis-grid",$St="axis-label",MSt="axis-tick",LSt="axis-title",FSt="legend",jSt="legend-band",BSt="legend-entry",zSt="legend-gradient",YSe="legend-label",USt="legend-symbol",qSt="legend-title",HSt="title",WSt="title-text",VSt="title-subtitle";function GSt(e,t,n,r,i){const s={},o={};let a,l,u,c;l="lineBreak",t==="text"&&i[l]!=null&&!Sb(l,e)&&ZL(s,l,i[l]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),c=n===xK?i.group:n===wK?hn({},i.mark,i[t]):null;for(l in c)u=Sb(l,e)||(l==="fill"||l==="stroke")&&(Sb("fill",e)||Sb("stroke",e)),u||ZL(s,l,c[l]);St(r).forEach(d=>{const f=i.style&&i.style[d];for(const h in f)Sb(h,e)||ZL(s,h,f[h])}),e=hn({},e);for(l in s)c=s[l],c.signal?(a=a||{})[l]=c:o[l]=c;return e.enter=hn(o,e.enter),a&&(e.update=hn(a,e.update)),e}function ZL(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const KSe=e=>Tt(e)?ft(e):e.signal?`(${e.signal})`:XSe(e);function R4(e){if(e.gradient!=null)return KSt(e);let t=e.signal?`(${e.signal})`:e.color?YSt(e.color):e.field!=null?XSe(e.field):e.value!==void 0?ft(e.value):void 0;return e.scale!=null&&(t=XSt(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${G3(e.exponent)})`),e.mult!=null&&(t+=`*${G3(e.mult)}`),e.offset!=null&&(t+=`+${G3(e.offset)}`),e.round&&(t=`round(${t})`),t}const cI=(e,t,n,r)=>`(${e}(${[t,n,r].map(R4).join(",")})+'')`;function YSt(e){return e.c?cI("hcl",e.h,e.c,e.l):e.h||e.s?cI("hsl",e.h,e.s,e.l):e.l||e.a?cI("lab",e.l,e.a,e.b):e.r||e.g||e.b?cI("rgb",e.r,e.g,e.b):null}function KSt(e){const t=[e.start,e.stop,e.count].map(n=>n==null?null:ft(n));for(;t.length&&Rn(t)==null;)t.pop();return t.unshift(KSe(e.gradient)),`gradient(${t.join(",")})`}function G3(e){return At(e)?"("+R4(e)+")":e}function XSe(e){return QSe(At(e)?e:{datum:e})}function QSe(e){let t,n,r;if(e.signal)t="datum",r=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(r=e.parent,t+=".datum"):r=e.group}else e.datum?(t="datum",r=e.datum):He("Invalid field reference: "+ft(e));return e.signal||(r=Tt(r)?Vf(r).map(ft).join("]["):QSe(r)),t+"["+r+"]"}function XSt(e,t){const n=KSe(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+G3(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function QSt(e){let t="";return e.forEach(n=>{const r=R4(n);t+=n.test?`(${n.test})?${r}:`:r}),Rn(t)===":"&&(t+="null"),t}function JSe(e,t,n,r,i,s){const o={};s=s||{},s.encoders={$encode:o},e=GSt(e,t,n,r,i.config);for(const a in e)o[a]=JSt(e[a],t,s,i);return s}function JSt(e,t,n,r){const i={},s={};for(const o in e)e[o]!=null&&(i[o]=eAt(ZSt(e[o]),r,n,s));return{$expr:{marktype:t,channels:i},$fields:Object.keys(s),$output:Object.keys(e)}}function ZSt(e){return Ge(e)?QSt(e):R4(e)}function eAt(e,t,n,r){const i=Pf(e,t);return i.$fields.forEach(s=>r[s]=1),hn(n,i.$params),i.$expr}const tAt="outer",nAt=["value","update","init","react","bind"];function Gle(e,t){He(e+' for "outer" push: '+ft(t))}function ZSe(e,t){const n=e.name;if(e.push===tAt)t.signals[n]||Gle("No prior signal definition",n),nAt.forEach(r=>{e[r]!==void 0&&Gle("Invalid property ",r)});else{const r=t.addSignal(n,e.value);e.react===!1&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}}function F7(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function D4(e,t,n,r){return new F7(e,t,n,r)}function cN(e,t){return D4("operator",e,t)}function Yt(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function uC(e,t){return t?{$field:e,$name:t}:{$field:e}}const j7=uC("key");function Yle(e,t){return{$compare:e,$order:t}}function rAt(e,t){const n={$key:e};return t&&(n.$flat=!0),n}const iAt="ascending",sAt="descending";function oAt(e){return At(e)?(e.order===sAt?"-":"+")+P4(e.op,e.field):""}function P4(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const _K="scope",B7="view";function hs(e){return e&&e.signal}function aAt(e){return e&&e.expr}function Y3(e){if(hs(e))return!0;if(At(e)){for(const t in e)if(Y3(e[t]))return!0}return!1}function Ec(e,t){return e??t}function Oy(e){return e&&e.signal||e}const Kle="timer";function cC(e,t){return(e.merge?uAt:e.stream?cAt:e.type?dAt:He("Invalid stream specification: "+ft(e)))(e,t)}function lAt(e){return e===_K?B7:e||B7}function uAt(e,t){const n=e.merge.map(i=>cC(i,t)),r=TK({merge:n},e,t);return t.addStream(r).id}function cAt(e,t){const n=cC(e.stream,t),r=TK({stream:n},e,t);return t.addStream(r).id}function dAt(e,t){let n;e.type===Kle?(n=t.event(Kle,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(lAt(e.source),e.type);const r=TK({stream:n},e,t);return Object.keys(r).length===1?n:t.addStream(r).id}function TK(e,t,n){let r=t.between;return r&&(r.length!==2&&He('Stream "between" parameter must have 2 entries: '+ft(t)),e.between=[cC(r[0],n),cC(r[1],n)]),r=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&r.push(fAt(t.marktype,t.markname,t.markrole)),t.source===_K&&r.push("inScope(event.item)"),r.length&&(e.filter=Pf("("+r.join(")&&(")+")",n).$expr),(r=t.throttle)!=null&&(e.throttle=+r),(r=t.debounce)!=null&&(e.debounce=+r),t.consume&&(e.consume=!0),e}function fAt(e,t,n){const r="event.item";return r+(e&&e!=="*"?"&&"+r+".mark.marktype==='"+e+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(t?"&&"+r+".mark.name==='"+t+"'":"")}const hAt={code:"_.$value",ast:{type:"Identifier",value:"value"}};function pAt(e,t,n){const r=e.encode,i={target:n};let s=e.events,o=e.update,a=[];s||He("Signal update missing events specification."),Tt(s)&&(s=J0(s,t.isSubscope()?_K:B7)),s=St(s).filter(l=>l.signal||l.scale?(a.push(l),0):1),a.length>1&&(a=[gAt(a)]),s.length&&a.push(s.length>1?{merge:s}:s[0]),r!=null&&(o&&He("Signal encode and update are mutually exclusive."),o="encode(item(),"+ft(r)+")"),i.update=Tt(o)?Pf(o,t):o.expr!=null?Pf(o.expr,t):o.value!=null?o.value:o.signal!=null?{$expr:hAt,$params:{$value:t.signalRef(o.signal)}}:He("Invalid signal update specification."),e.force&&(i.options={force:!0}),a.forEach(l=>t.addUpdate(hn(mAt(l,t),i)))}function mAt(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):cC(e,t)}}function gAt(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function yAt(e,t){const n=t.getSignal(e.name);let r=e.update;e.init&&(r?He("Signals can not include both init and update expressions."):(r=e.init,n.initonly=!0)),r&&(r=Pf(r,t),n.update=r.$expr,n.params=r.$params),e.on&&e.on.forEach(i=>pAt(i,t,n.id))}const Pr=e=>(t,n,r)=>D4(e,n,t||void 0,r),eAe=Pr("aggregate"),vAt=Pr("axisticks"),tAe=Pr("bound"),gd=Pr("collect"),Xle=Pr("compare"),bAt=Pr("datajoin"),nAe=Pr("encode"),wAt=Pr("expression"),xAt=Pr("facet"),EAt=Pr("field"),_At=Pr("key"),TAt=Pr("legendentries"),CAt=Pr("load"),SAt=Pr("mark"),AAt=Pr("multiextent"),kAt=Pr("multivalues"),IAt=Pr("overlap"),RAt=Pr("params"),rAe=Pr("prefacet"),DAt=Pr("projection"),PAt=Pr("proxy"),NAt=Pr("relay"),iAe=Pr("render"),OAt=Pr("scale"),Kv=Pr("sieve"),$At=Pr("sortitems"),sAe=Pr("viewlayout"),MAt=Pr("values");let LAt=0;const oAe={min:"min",max:"max",count:"sum"};function FAt(e,t){const n=e.type||"linear";F2e(n)||He("Unrecognized scale type: "+ft(n)),t.addScale(e.name,{type:n,domain:void 0})}function jAt(e,t){const n=t.getScale(e.name).params;let r;n.domain=aAe(e.domain,e,t),e.range!=null&&(n.range=uAe(e,t,n)),e.interpolate!=null&&KAt(e.interpolate,n),e.nice!=null&&(n.nice=YAt(e.nice,t)),e.bins!=null&&(n.bins=GAt(e.bins,t));for(r in e)It(n,r)||r==="name"||(n[r]=Cu(e[r],t))}function Cu(e,t){return At(e)?e.signal?t.signalRef(e.signal):He("Unsupported object: "+ft(e)):e}function K3(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>Cu(n,t))}function N4(e){He("Can not find data set: "+ft(e))}function aAe(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&He("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(Ge(e)?BAt:e.fields?UAt:zAt)(e,t,n)}function BAt(e,t,n){return e.map(r=>Cu(r,n))}function zAt(e,t,n){const r=n.getData(e.data);return r||N4(e.data),Ww(t.type)?r.valuesRef(n,e.field,lAe(e.sort,!1)):z2e(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)}function UAt(e,t,n){const r=e.data,i=e.fields.reduce((s,o)=>(o=Tt(o)?{data:r,field:o}:Ge(o)||o.signal?qAt(o,n):o,s.push(o),s),[]);return(Ww(t.type)?HAt:z2e(t.type)?WAt:VAt)(e,n,i)}function qAt(e,t){const n="_:vega:_"+LAt++,r=gd({});if(Ge(e))r.value={$ingest:e};else if(e.signal){const i="setdata("+ft(n)+","+e.signal+")";r.params.input=t.signalRef(i)}return t.addDataPipeline(n,[r,Kv({})]),{data:n,field:"data"}}function HAt(e,t,n){const r=lAe(e.sort,!0);let i,s;const o=n.map(u=>{const c=t.getData(u.data);return c||N4(u.data),c.countsRef(t,u.field,r)}),a={groupby:j7,pulse:o};r&&(i=r.op||"count",s=r.field?P4(i,r.field):"count",a.ops=[oAe[i]],a.fields=[t.fieldRef(s)],a.as=[s]),i=t.add(eAe(a));const l=t.add(gd({pulse:Yt(i)}));return s=t.add(MAt({field:j7,sort:t.sortRef(r),pulse:Yt(l)})),Yt(s)}function lAe(e,t){return e&&(!e.field&&!e.op?At(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?He("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!oAe[e.op]&&He("Multiple domain scales can not be sorted using "+e.op)),e}function WAt(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||N4(i.data),s.domainRef(t,i.field)});return Yt(t.add(kAt({values:r})))}function VAt(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||N4(i.data),s.extentRef(t,i.field)});return Yt(t.add(AAt({extents:r})))}function GAt(e,t){return e.signal||Ge(e)?K3(e,t):t.objectProperty(e)}function YAt(e,t){return e.signal?t.signalRef(e.signal):At(e)?{interval:Cu(e.interval),step:Cu(e.step)}:Cu(e)}function KAt(e,t){t.interpolate=Cu(e.type||e),e.gamma!=null&&(t.interpolateGamma=Cu(e.gamma))}function uAe(e,t,n){const r=t.config.range;let i=e.range;if(i.signal)return t.signalRef(i.signal);if(Tt(i)){if(r&&It(r,i))return e=hn({},e,{range:r[i]}),uAe(e,t,n);i==="width"?i=[0,{signal:"width"}]:i==="height"?i=Ww(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:He("Unrecognized scale range value: "+ft(i))}else if(i.scheme){n.scheme=Ge(i.scheme)?K3(i.scheme,t):Cu(i.scheme,t),i.extent&&(n.schemeExtent=K3(i.extent,t)),i.count&&(n.schemeCount=Cu(i.count,t));return}else if(i.step){n.rangeStep=Cu(i.step,t);return}else{if(Ww(e.type)&&!Ge(i))return aAe(i,e,t);Ge(i)||He("Unsupported range type: "+ft(i))}return i.map(s=>(Ge(s)?K3:Cu)(s,t))}function XAt(e,t){const n=t.config.projection||{},r={};for(const i in e)i!=="name"&&(r[i]=z7(e[i],i,t));for(const i in n)r[i]==null&&(r[i]=z7(n[i],i,t));t.addProjection(e.name,r)}function z7(e,t,n){return Ge(e)?e.map(r=>z7(r,t,n)):At(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:He("Unsupported parameter object: "+ft(e)):e}const yd="top",dE="left",fE="right",k0="bottom",cAe="center",QAt="vertical",JAt="start",ZAt="middle",ekt="end",U7="index",CK="label",tkt="offset",Xw="perc",nkt="perc2",Ru="value",FS="guide-label",SK="guide-title",rkt="group-title",ikt="group-subtitle",Qle="symbol",X3="gradient",q7="discrete",H7="size",skt="shape",okt="fill",akt="stroke",lkt="strokeWidth",ukt="strokeDash",ckt="opacity",AK=[H7,skt,okt,akt,lkt,ukt,ckt],jS={name:1,style:1,interactive:1},Hn={value:0},Du={value:1},O4="group",dAe="rect",kK="rule",dkt="symbol",Xv="text";function dC(e){return e.type=O4,e.interactive=e.interactive||!1,e}function xl(e,t){const n=(r,i)=>Ec(e[r],Ec(t[r],i));return n.isVertical=r=>QAt===Ec(e.direction,t.direction||(r?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>Ec(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>Ec(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>Ec(e.columns,Ec(t.columns,+n.isVertical(!0))),n}function fAe(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function fkt(e,t,n){const r=t.config.style[n];return r&&r[e]}function $4(e,t,n){return`item.anchor === '${JAt}' ? ${e} : item.anchor === '${ekt}' ? ${t} : ${n}`}const IK=$4(ft(dE),ft(fE),ft(cAe));function hkt(e){const t=e("tickBand");let n=e("tickOffset"),r,i;return t?t.signal?(r={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},i={signal:`(${t.signal}) === 'extent'`},At(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(r=1,i=!0,n=0):(r=.5,i=!1):(r=e("bandPosition"),i=e("tickExtra")),{extra:i,band:r,offset:n}}function hAe(e,t){return t?e?At(e)?Object.assign({},e,{offset:hAe(e.offset,t)}):{value:e,offset:t}:t:e}function iu(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=cE(e.encode,t,jS)):e.interactive=!1,e}function pkt(e,t,n,r){const i=xl(e,n),s=i.isVertical(),o=i.gradientThickness(),a=i.gradientLength();let l,u,c,d,f;s?(u=[0,1],c=[0,0],d=o,f=a):(u=[0,0],c=[1,0],d=a,f=o);const h={enter:l={opacity:Hn,x:Hn,y:Hn,width:Bs(d),height:Bs(f)},update:hn({},l,{opacity:Du,fill:{gradient:t,start:u,stop:c}}),exit:{opacity:Hn}};return So(h,{stroke:i("gradientStrokeColor"),strokeWidth:i("gradientStrokeWidth")},{opacity:i("gradientOpacity")}),iu({type:dAe,role:zSt,encode:h},r)}function mkt(e,t,n,r,i){const s=xl(e,n),o=s.isVertical(),a=s.gradientThickness(),l=s.gradientLength();let u,c,d,f,h="";o?(u="y",d="y2",c="x",f="width",h="1-"):(u="x",d="x2",c="y",f="height");const p={opacity:Hn,fill:{scale:t,field:Ru}};p[u]={signal:h+"datum."+Xw,mult:l},p[c]=Hn,p[d]={signal:h+"datum."+nkt,mult:l},p[f]=Bs(a);const m={enter:p,update:hn({},p,{opacity:Du}),exit:{opacity:Hn}};return So(m,{stroke:s("gradientStrokeColor"),strokeWidth:s("gradientStrokeWidth")},{opacity:s("gradientOpacity")}),iu({type:dAe,role:jSt,key:Ru,from:i,encode:m},r)}const gkt=`datum.${Xw}<=0?"${dE}":datum.${Xw}>=1?"${fE}":"${cAe}"`,ykt=`datum.${Xw}<=0?"${k0}":datum.${Xw}>=1?"${yd}":"${ZAt}"`;function Jle(e,t,n,r){const i=xl(e,t),s=i.isVertical(),o=Bs(i.gradientThickness()),a=i.gradientLength();let l=i("labelOverlap"),u,c,d,f,h="";const p={enter:u={opacity:Hn},update:c={opacity:Du,text:{field:CK}},exit:{opacity:Hn}};return So(p,{fill:i("labelColor"),fillOpacity:i("labelOpacity"),font:i("labelFont"),fontSize:i("labelFontSize"),fontStyle:i("labelFontStyle"),fontWeight:i("labelFontWeight"),limit:Ec(e.labelLimit,t.gradientLabelLimit)}),s?(u.align={value:"left"},u.baseline=c.baseline={signal:ykt},d="y",f="x",h="1-"):(u.align=c.align={signal:gkt},u.baseline={value:"top"},d="x",f="y"),u[d]=c[d]={signal:h+"datum."+Xw,mult:a},u[f]=c[f]=o,o.offset=Ec(e.labelOffset,t.gradientLabelOffset)||0,l=l?{separation:i("labelSeparation"),method:l,order:"datum."+U7}:void 0,iu({type:Xv,role:YSe,style:FS,key:Ru,from:r,encode:p,overlap:l},n)}function vkt(e,t,n,r,i){const s=xl(e,t),o=n.entries,a=!!(o&&o.interactive),l=o?o.name:void 0,u=s("clipHeight"),c=s("symbolOffset"),d={data:"value"},f=`(${i}) ? datum.${tkt} : datum.${H7}`,h=u?Bs(u):{field:H7},p=`datum.${U7}`,m=`max(1, ${i})`;let g,b,v,x,E;h.mult=.5,g={enter:b={opacity:Hn,x:{signal:f,mult:.5,offset:c},y:h},update:v={opacity:Du,x:b.x,y:b.y},exit:{opacity:Hn}};let _=null,C=null;e.fill||(_=t.symbolBaseFillColor,C=t.symbolBaseStrokeColor),So(g,{fill:s("symbolFillColor",_),shape:s("symbolType"),size:s("symbolSize"),stroke:s("symbolStrokeColor",C),strokeDash:s("symbolDash"),strokeDashOffset:s("symbolDashOffset"),strokeWidth:s("symbolStrokeWidth")},{opacity:s("symbolOpacity")}),AK.forEach(O=>{e[O]&&(v[O]=b[O]={scale:e[O],field:Ru})});const S=iu({type:dkt,role:USt,key:Ru,from:d,clip:u?!0:void 0,encode:g},n.symbols),k=Bs(c);k.offset=s("labelOffset"),g={enter:b={opacity:Hn,x:{signal:f,offset:k},y:h},update:v={opacity:Du,text:{field:CK},x:b.x,y:b.y},exit:{opacity:Hn}},So(g,{align:s("labelAlign"),baseline:s("labelBaseline"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontStyle:s("labelFontStyle"),fontWeight:s("labelFontWeight"),limit:s("labelLimit")});const R=iu({type:Xv,role:YSe,style:FS,key:Ru,from:d,encode:g},n.labels);return g={enter:{noBound:{value:!u},width:Hn,height:u?Bs(u):Hn,opacity:Hn},exit:{opacity:Hn},update:v={opacity:Du,row:{signal:null},column:{signal:null}}},s.isVertical(!0)?(x=`ceil(item.mark.items.length / ${m})`,v.row.signal=`${p}%${x}`,v.column.signal=`floor(${p} / ${x})`,E={field:["row",p]}):(v.row.signal=`floor(${p} / ${m})`,v.column.signal=`${p} % ${m}`,E={field:p}),v.column.signal=`(${i})?${v.column.signal}:${p}`,r={facet:{data:r,name:"value",groupby:U7}},dC({role:EK,from:r,encode:cE(g,o,jS),marks:[S,R],name:l,interactive:a,sort:E})}function bkt(e,t){const n=xl(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const RK='item.orient === "left"',DK='item.orient === "right"',M4=`(${RK} || ${DK})`,wkt=`datum.vgrad && ${M4}`,xkt=$4('"top"','"bottom"','"middle"'),Ekt=$4('"right"','"left"','"center"'),_kt=`datum.vgrad && ${DK} ? (${Ekt}) : (${M4} && !(datum.vgrad && ${RK})) ? "left" : ${IK}`,Tkt=`item._anchor || (${M4} ? "middle" : "start")`,Ckt=`${wkt} ? (${RK} ? -90 : 90) : 0`,Skt=`${M4} ? (datum.vgrad ? (${DK} ? "bottom" : "top") : ${xkt}) : "top"`;function Akt(e,t,n,r){const i=xl(e,t),s={enter:{opacity:Hn},update:{opacity:Du,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:Hn}};return So(s,{orient:i("titleOrient"),_anchor:i("titleAnchor"),anchor:{signal:Tkt},angle:{signal:Ckt},align:{signal:_kt},baseline:{signal:Skt},text:e.title,fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),baseline:i("titleBaseline")}),iu({type:Xv,role:qSt,style:SK,from:r,encode:s},n)}function kkt(e,t){let n;return At(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+Zle(e.path)+")":e.sphere&&(n="geoShape("+Zle(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function Zle(e){return At(e)&&e.signal?e.signal:ft(e)}function pAe(e){const t=e.role||"";return t.startsWith("axis")||t.startsWith("legend")||t.startsWith("title")?t:e.type===O4?EK:t||wK}function Ikt(e){return{marktype:e.type,name:e.name||void 0,role:e.role||pAe(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function Rkt(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function PK(e,t){const n=W_e(e.type);n||He("Unrecognized transform type: "+ft(e.type));const r=D4(n.type.toLowerCase(),null,mAe(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r}function mAe(e,t,n){const r={},i=e.params.length;for(let s=0;s<i;++s){const o=e.params[s];r[o.name]=Dkt(o,t,n)}return r}function Dkt(e,t,n){const r=e.type,i=t[e.name];if(r==="index")return Pkt(e,t,n);if(i===void 0){e.required&&He("Missing required "+ft(t.type)+" parameter: "+ft(e.name));return}else{if(r==="param")return Nkt(e,t,n);if(r==="projection")return n.projectionRef(t[e.name])}return e.array&&!hs(i)?i.map(s=>eue(e,s,n)):eue(e,i,n)}function eue(e,t,n){const r=e.type;if(hs(t))return nue(r)?He("Expression references can not be signals."):eF(r)?n.fieldRef(t):rue(r)?n.compareRef(t):n.signalRef(t.signal);{const i=e.expr||eF(r);return i&&Okt(t)?n.exprRef(t.expr,t.as):i&&$kt(t)?uC(t.field,t.as):nue(r)?Pf(t,n):Mkt(r)?Yt(n.getData(t).values):eF(r)?uC(t):rue(r)?n.compareRef(t):t}}function Pkt(e,t,n){return Tt(t.from)||He('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function Nkt(e,t,n){const r=t[e.name];return e.array?(Ge(r)||He("Expected an array of sub-parameters. Instead: "+ft(r)),r.map(i=>tue(e,i,n))):tue(e,r,n)}function tue(e,t,n){const r=e.params.length;let i;for(let o=0;o<r;++o){i=e.params[o];for(const a in i.key)if(i.key[a]!==t[a]){i=null;break}if(i)break}i||He("Unsupported parameter: "+ft(t));const s=hn(mAe(i,t,n),i.key);return Yt(n.add(RAt(s)))}const Okt=e=>e&&e.expr,$kt=e=>e&&e.field,Mkt=e=>e==="data",nue=e=>e==="expr",eF=e=>e==="field",rue=e=>e==="compare";function Lkt(e,t,n){let r,i,s,o,a;return e?(r=e.facet)&&(t||He("Only group marks can be faceted."),r.field!=null?o=a=Q3(r,n):(e.data?a=Yt(n.getData(e.data).aggregate):(s=PK(hn({type:"aggregate",groupby:St(r.groupby)},r.aggregate),n),s.params.key=n.keyRef(r.groupby),s.params.pulse=Q3(r,n),o=a=Yt(n.add(s))),i=n.keyRef(r.groupby,!0))):o=Yt(n.add(gd(null,[{}]))),o||(o=Q3(e,n)),{key:i,pulse:o,parent:a}}function Q3(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:Yt(t.getData(e.data).output)}function av(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}av.fromEntries=function(e,t){const n=t.length,r=t[n-1],i=t[n-2];let s=t[0],o=null,a=1;for(s&&s.type==="load"&&(s=t[1]),e.add(t[0]);a<n;++a)t[a].params.pulse=Yt(t[a-1]),e.add(t[a]),t[a].type==="aggregate"&&(o=t[a]);return new av(e,s,i,r,o)};function gAe(e){return Tt(e)?e:null}function iue(e,t,n){const r=P4(n.op,n.field);let i;if(t.ops){for(let s=0,o=t.as.length;s<o;++s)if(t.as[s]===r)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((i=n.op.signal)?e.signalRef(i):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(r))}function I_(e,t,n,r,i,s,o){const a=t[n]||(t[n]={}),l=oAt(s);let u=gAe(i),c,d;if(u!=null&&(e=t.scope,u=u+(l?"|"+l:""),c=a[u]),!c){const f=s?{field:j7,pulse:t.countsRef(e,i,s)}:{field:e.fieldRef(i),pulse:Yt(t.output)};l&&(f.sort=e.sortRef(s)),d=e.add(D4(r,void 0,f)),o&&(t.index[i]=d),c=Yt(d),u!=null&&(a[u]=c)}return c}av.prototype={countsRef(e,t,n){const r=this,i=r.counts||(r.counts={}),s=gAe(t);let o,a,l;return s!=null&&(e=r.scope,o=i[s]),o?n&&n.field&&iue(e,o.agg.params,n):(l={groupby:e.fieldRef(t,"key"),pulse:Yt(r.output)},n&&n.field&&iue(e,l,n),a=e.add(eAe(l)),o=e.add(gd({pulse:Yt(a)})),o={agg:a,ref:Yt(o)},s!=null&&(i[s]=o)),o.ref},tuplesRef(){return Yt(this.values)},extentRef(e,t){return I_(e,this,"extent","extent",t,!1)},domainRef(e,t){return I_(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return I_(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return I_(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return I_(e,this,"indata","tupleindex",t,!0,!0)}};function Fkt(e,t,n){const r=e.from.facet,i=r.name,s=Q3(r,t);let o;r.name||He("Facet must have a name: "+ft(r)),r.data||He("Facet must reference a data set: "+ft(r)),r.field?o=t.add(rAe({field:t.fieldRef(r.field),pulse:s})):r.groupby?o=t.add(xAt({key:t.keyRef(r.groupby),group:Yt(t.proxy(n.parent)),pulse:s})):He("Facet must specify groupby or field: "+ft(r));const a=t.fork(),l=a.add(gd()),u=a.add(Kv({pulse:Yt(l)}));a.addData(i,new av(a,l,l,u)),a.addSignal("parent",null),o.params.subflow={$subflow:a.parse(e).toRuntime()}}function jkt(e,t,n){const r=t.add(rAe({pulse:n.pulse})),i=t.fork();i.add(Kv()),i.addSignal("parent",null),r.params.subflow={$subflow:i.parse(e).toRuntime()}}function yAe(e,t,n){const r=e.remove,i=e.insert,s=e.toggle,o=e.modify,a=e.values,l=t.add(cN()),u="if("+e.trigger+',modify("'+n+'",'+[i,r,s,o,a].map(d=>d??"null").join(",")+"),0)",c=Pf(u,t);l.update=c.$expr,l.params=c.$params}function L4(e,t){const n=pAe(e),r=e.type===O4,i=e.from&&e.from.facet,s=e.overlap;let o=e.layout||n===EK||n===xK,a,l,u,c,d,f,h;const p=n===wK||o||i,m=Lkt(e.from,r,t);l=t.add(bAt({key:m.key||(e.key?uC(e.key):void 0),pulse:m.pulse,clean:!r}));const g=Yt(l);l=u=t.add(gd({pulse:g})),l=t.add(SAt({markdef:Ikt(e),interactive:Rkt(e.interactive,t),clip:kkt(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:Yt(l)}));const b=Yt(l);l=c=t.add(nAe(JSe(e.encode,e.type,n,e.style,t,{mod:!1,pulse:b}))),l.params.parent=t.encode(),e.transform&&e.transform.forEach(C=>{const S=PK(C,t),k=S.metadata;(k.generates||k.changes)&&He("Mark transforms should not generate new data."),k.nomod||(c.params.mod=!0),S.params.pulse=Yt(l),t.add(l=S)}),e.sort&&(l=t.add($At({sort:t.compareRef(e.sort),pulse:Yt(l)})));const v=Yt(l);(i||o)&&(o=t.add(sAe({layout:t.objectProperty(e.layout),legends:t.legends,mark:b,pulse:v})),f=Yt(o));const x=t.add(tAe({mark:b,pulse:f||v}));h=Yt(x),r&&(p&&(a=t.operators,a.pop(),o&&a.pop()),t.pushState(v,f||h,g),i?Fkt(e,t,m):p?jkt(e,t,m):t.parse(e),t.popState(),p&&(o&&a.push(o),a.push(x))),s&&(h=Bkt(s,h,t));const E=t.add(iAe({pulse:h})),_=t.add(Kv({pulse:Yt(E)},void 0,t.parent()));e.name!=null&&(d=e.name,t.addData(d,new av(t,u,E,_)),e.on&&e.on.forEach(C=>{(C.insert||C.remove||C.toggle)&&He("Marks only support modify triggers."),yAe(C,t,d)}))}function Bkt(e,t,n){const r=e.method,i=e.bound,s=e.separation,o={separation:hs(s)?n.signalRef(s.signal):s,method:hs(r)?n.signalRef(r.signal):r,pulse:t};if(e.order&&(o.sort=n.compareRef({field:e.order})),i){const a=i.tolerance;o.boundTolerance=hs(a)?n.signalRef(a.signal):+a,o.boundScale=n.scaleRef(i.scale),o.boundOrient=i.orient}return Yt(n.add(IAt(o)))}function zkt(e,t){const n=t.config.legend,r=e.encode||{},i=xl(e,n),s=r.legend||{},o=s.name||void 0,a=s.interactive,l=s.style,u={};let c=0,d,f,h;AK.forEach(x=>e[x]?(u[x]=e[x],c=c||e[x]):0),c||He("Missing valid scale for legend.");const p=Ukt(e,t.scaleType(c)),m={title:e.title!=null,scales:u,type:p,vgrad:p!=="symbol"&&i.isVertical()},g=Yt(t.add(gd(null,[m]))),b={enter:{x:{value:0},y:{value:0}}},v=Yt(t.add(TAt(f={type:p,scale:t.scaleRef(c),count:t.objectProperty(i("tickCount")),limit:t.property(i("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return p===X3?(h=[pkt(e,c,n,r.gradient),Jle(e,n,r.labels,v)],f.count=f.count||t.signalRef(`max(2,2*floor((${Oy(i.gradientLength())})/100))`)):p===q7?h=[mkt(e,c,n,r.gradient,v),Jle(e,n,r.labels,v)]:(d=bkt(e,n),h=[vkt(e,n,r,v,Oy(d.columns))],f.size=Wkt(e,t,h[0].marks)),h=[dC({role:BSt,from:g,encode:b,marks:h,layout:d,interactive:a})],m.title&&h.push(Akt(e,n,r.title,g)),L4(dC({role:FSt,from:g,encode:cE(Hkt(i,e,n),s,jS),marks:h,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:o,interactive:a,style:l}),t)}function Ukt(e,t){let n=e.type||Qle;return!e.type&&qkt(e)===1&&(e.fill||e.stroke)&&(n=$G(t)?X3:n7(t)?q7:Qle),n!==X3?n:n7(t)?q7:X3}function qkt(e){return AK.reduce((t,n)=>t+(e[n]?1:0),0)}function Hkt(e,t,n){const r={enter:{},update:{}};return So(r,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),r}function Wkt(e,t,n){const r=Oy(sue("size",e,n)),i=Oy(sue("strokeWidth",e,n)),s=Oy(Vkt(n[1].encode,t,FS));return Pf(`max(ceil(sqrt(${r})+${i}),${s})`,t)}function sue(e,t,n){return t[e]?`scale("${t[e]}",datum)`:fAe(e,n[0].encode)}function Vkt(e,t,n){return fAe("fontSize",e)||fkt("fontSize",t,n)}const Gkt=`item.orient==="${dE}"?-90:item.orient==="${fE}"?90:0`;function Ykt(e,t){e=Tt(e)?{text:e}:e;const n=xl(e,t.config.title),r=e.encode||{},i=r.group||{},s=i.name||void 0,o=i.interactive,a=i.style,l=[],u={},c=Yt(t.add(gd(null,[u])));return l.push(Qkt(e,n,Kkt(e),c)),e.subtitle&&l.push(Jkt(e,n,r.subtitle,c)),L4(dC({role:HSt,from:c,encode:Xkt(n,i),marks:l,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:s,interactive:o,style:a}),t)}function Kkt(e){const t=e.encode;return t&&t.title||hn({name:e.name,interactive:e.interactive,style:e.style},t)}function Xkt(e,t){const n={enter:{},update:{}};return So(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:IK},angle:{signal:Gkt},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),cE(n,t,jS)}function Qkt(e,t,n,r){const i={value:0},s=e.text,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return So(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),iu({type:Xv,role:WSt,style:rkt,from:r,encode:o},n)}function Jkt(e,t,n,r){const i={value:0},s=e.subtitle,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return So(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),iu({type:Xv,role:VSt,style:ikt,from:r,encode:o},n)}function Zkt(e,t){const n=[];e.transform&&e.transform.forEach(r=>{n.push(PK(r,t))}),e.on&&e.on.forEach(r=>{yAe(r,t,e.name)}),t.addDataPipeline(e.name,eIt(e,t,n))}function eIt(e,t,n){const r=[];let i=null,s=!1,o=!1,a,l,u,c,d;for(e.values?hs(e.values)||Y3(e.format)?(r.push(oue(t,e)),r.push(i=kg())):r.push(i=kg({$ingest:e.values,$format:e.format})):e.url?Y3(e.url)||Y3(e.format)?(r.push(oue(t,e)),r.push(i=kg())):r.push(i=kg({$request:e.url,$format:e.format})):e.source&&(i=a=St(e.source).map(f=>Yt(t.getData(f).output)),r.push(null)),l=0,u=n.length;l<u;++l)c=n[l],d=c.metadata,!i&&!d.source&&r.push(i=kg()),r.push(c),d.generates&&(o=!0),d.modifies&&!o&&(s=!0),d.source?i=c:d.changes&&(i=null);return a&&(u=a.length-1,r[0]=NAt({derive:s,pulse:u?a:a[0]}),(s||u)&&r.splice(1,0,kg())),i||r.push(kg()),r.push(Kv({})),r}function kg(e){const t=gd({},e);return t.metadata={source:!0},t}function oue(e,t){return CAt({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const vAe=e=>e===k0||e===yd,F4=(e,t,n)=>hs(e)?iIt(e.signal,t,n):e===dE||e===yd?t:n,zs=(e,t,n)=>hs(e)?nIt(e.signal,t,n):vAe(e)?t:n,Yc=(e,t,n)=>hs(e)?rIt(e.signal,t,n):vAe(e)?n:t,bAe=(e,t,n)=>hs(e)?sIt(e.signal,t,n):e===yd?{value:t}:{value:n},tIt=(e,t,n)=>hs(e)?oIt(e.signal,t,n):e===fE?{value:t}:{value:n},nIt=(e,t,n)=>wAe(`${e} === '${yd}' || ${e} === '${k0}'`,t,n),rIt=(e,t,n)=>wAe(`${e} !== '${yd}' && ${e} !== '${k0}'`,t,n),iIt=(e,t,n)=>NK(`${e} === '${dE}' || ${e} === '${yd}'`,t,n),sIt=(e,t,n)=>NK(`${e} === '${yd}'`,t,n),oIt=(e,t,n)=>NK(`${e} === '${fE}'`,t,n),wAe=(e,t,n)=>(t=t!=null?Bs(t):t,n=n!=null?Bs(n):n,aue(t)&&aue(n)?(t=t?t.signal||ft(t.value):null,n=n?n.signal||ft(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[hn({test:e},t)].concat(n||[])),aue=e=>e==null||Object.keys(e).length===1,NK=(e,t,n)=>({signal:`${e} ? (${Lb(t)}) : (${Lb(n)})`}),aIt=(e,t,n,r,i)=>({signal:(r!=null?`${e} === '${dE}' ? (${Lb(r)}) : `:"")+(n!=null?`${e} === '${k0}' ? (${Lb(n)}) : `:"")+(i!=null?`${e} === '${fE}' ? (${Lb(i)}) : `:"")+(t!=null?`${e} === '${yd}' ? (${Lb(t)}) : `:"")+"(null)"}),Lb=e=>hs(e)?e.signal:e==null?null:ft(e),lIt=(e,t)=>t===0?0:hs(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},lw=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function nb(e,t,n,r){let i;if(t&&It(t,e))return t[e];if(It(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":i="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":i=e[5].toLowerCase()+e.slice(6)}return r[SK][i]}else if(e.startsWith("label")){switch(e){case"labelColor":i="fill";break;case"labelFont":case"labelFontSize":i=e[5].toLowerCase()+e.slice(6)}return r[FS][i]}return null}function lue(e){const t={};for(const n of e)if(n)for(const r in n)t[r]=1;return Object.keys(t)}function uIt(e,t){var n=t.config,r=n.style,i=n.axis,s=t.scaleType(e.scale)==="band"&&n.axisBand,o=e.orient,a,l,u;if(hs(o)){const d=lue([n.axisX,n.axisY]),f=lue([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);a={};for(u of d)a[u]=zs(o,nb(u,n.axisX,i,r),nb(u,n.axisY,i,r));l={};for(u of f)l[u]=aIt(o.signal,nb(u,n.axisTop,i,r),nb(u,n.axisBottom,i,r),nb(u,n.axisLeft,i,r),nb(u,n.axisRight,i,r))}else a=o===yd||o===k0?n.axisX:n.axisY,l=n["axis"+o[0].toUpperCase()+o.slice(1)];return a||l||s?hn({},i,a,l,s):i}function cIt(e,t,n,r){const i=xl(e,t),s=e.orient;let o,a;const l={enter:o={opacity:Hn},update:a={opacity:Du},exit:{opacity:Hn}};So(l,{stroke:i("domainColor"),strokeCap:i("domainCap"),strokeDash:i("domainDash"),strokeDashOffset:i("domainDashOffset"),strokeWidth:i("domainWidth"),strokeOpacity:i("domainOpacity")});const u=uue(e,0),c=uue(e,1);return o.x=a.x=zs(s,u,Hn),o.x2=a.x2=zs(s,c),o.y=a.y=Yc(s,u,Hn),o.y2=a.y2=Yc(s,c),iu({type:kK,role:NSt,from:r,encode:l},n)}function uue(e,t){return{scale:e.scale,range:t}}function dIt(e,t,n,r,i){const s=xl(e,t),o=e.orient,a=e.gridScale,l=F4(o,1,-1),u=fIt(e.offset,l);let c,d,f;const h={enter:c={opacity:Hn},update:f={opacity:Du},exit:d={opacity:Hn}};So(h,{stroke:s("gridColor"),strokeCap:s("gridCap"),strokeDash:s("gridDash"),strokeDashOffset:s("gridDashOffset"),strokeOpacity:s("gridOpacity"),strokeWidth:s("gridWidth")});const p={scale:e.scale,field:Ru,band:i.band,extra:i.extra,offset:i.offset,round:s("tickRound")},m=zs(o,{signal:"height"},{signal:"width"}),g=a?{scale:a,range:0,mult:l,offset:u}:{value:0,offset:u},b=a?{scale:a,range:1,mult:l,offset:u}:hn(m,{mult:l,offset:u});return c.x=f.x=zs(o,p,g),c.y=f.y=Yc(o,p,g),c.x2=f.x2=Yc(o,b),c.y2=f.y2=zs(o,b),d.x=zs(o,p),d.y=Yc(o,p),iu({type:kK,role:OSt,key:Ru,from:r,encode:h},n)}function fIt(e,t){if(t!==1)if(!At(e))e=hs(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=hn({},e);for(;n.mult!=null;)if(At(n.mult))n=n.mult=hn({},n.mult);else return n.mult=hs(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function hIt(e,t,n,r,i,s){const o=xl(e,t),a=e.orient,l=F4(a,-1,1);let u,c,d;const f={enter:u={opacity:Hn},update:d={opacity:Du},exit:c={opacity:Hn}};So(f,{stroke:o("tickColor"),strokeCap:o("tickCap"),strokeDash:o("tickDash"),strokeDashOffset:o("tickDashOffset"),strokeOpacity:o("tickOpacity"),strokeWidth:o("tickWidth")});const h=Bs(i);h.mult=l;const p={scale:e.scale,field:Ru,band:s.band,extra:s.extra,offset:s.offset,round:o("tickRound")};return d.y=u.y=zs(a,Hn,p),d.y2=u.y2=zs(a,h),c.x=zs(a,p),d.x=u.x=Yc(a,Hn,p),d.x2=u.x2=Yc(a,h),c.y=Yc(a,p),iu({type:kK,role:MSt,key:Ru,from:r,encode:f},n)}function tF(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}function pIt(e,t,n,r,i,s){const o=xl(e,t),a=e.orient,l=e.scale,u=F4(a,-1,1),c=Oy(o("labelFlush")),d=Oy(o("labelFlushOffset")),f=o("labelAlign"),h=o("labelBaseline");let p=c===0||!!c,m;const g=Bs(i);g.mult=u,g.offset=Bs(o("labelPadding")||0),g.offset.mult=u;const b={scale:l,field:Ru,band:.5,offset:hAe(s.offset,o("labelOffset"))},v=zs(a,p?tF(l,c,'"left"','"right"','"center"'):{value:"center"},tIt(a,"left","right")),x=zs(a,bAe(a,"bottom","top"),p?tF(l,c,'"top"','"bottom"','"middle"'):{value:"middle"}),E=tF(l,c,`-(${d})`,d,0);p=p&&d;const _={opacity:Hn,x:zs(a,b,g),y:Yc(a,b,g)},C={enter:_,update:m={opacity:Du,text:{field:CK},x:_.x,y:_.y,align:v,baseline:x},exit:{opacity:Hn,x:_.x,y:_.y}};So(C,{dx:!f&&p?zs(a,E):null,dy:!h&&p?Yc(a,E):null}),So(C,{angle:o("labelAngle"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontWeight:o("labelFontWeight"),fontStyle:o("labelFontStyle"),limit:o("labelLimit"),lineHeight:o("labelLineHeight")},{align:f,baseline:h});const S=o("labelBound");let k=o("labelOverlap");return k=k||S?{separation:o("labelSeparation"),method:k,order:"datum.index",bound:S?{scale:l,orient:a,tolerance:S}:null}:void 0,m.align!==v&&(m.align=lw(m.align,v)),m.baseline!==x&&(m.baseline=lw(m.baseline,x)),iu({type:Xv,role:$St,style:FS,key:Ru,from:r,encode:C,overlap:k},n)}function mIt(e,t,n,r){const i=xl(e,t),s=e.orient,o=F4(s,-1,1);let a,l;const u={enter:a={opacity:Hn,anchor:Bs(i("titleAnchor",null)),align:{signal:IK}},update:l=hn({},a,{opacity:Du,text:Bs(e.title)}),exit:{opacity:Hn}},c={signal:`lerp(range("${e.scale}"), ${$4(0,1,.5)})`};return l.x=zs(s,c),l.y=Yc(s,c),a.angle=zs(s,Hn,lIt(o,90)),a.baseline=zs(s,bAe(s,k0,yd),{value:k0}),l.angle=a.angle,l.baseline=a.baseline,So(u,{fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),angle:i("titleAngle"),baseline:i("titleBaseline")}),gIt(i,s,u,n),u.update.align=lw(u.update.align,a.align),u.update.angle=lw(u.update.angle,a.angle),u.update.baseline=lw(u.update.baseline,a.baseline),iu({type:Xv,role:LSt,style:SK,from:r,encode:u},n)}function gIt(e,t,n,r){const i=(a,l)=>a!=null?(n.update[l]=lw(Bs(a),n.update[l]),!1):!Sb(l,r),s=i(e("titleX"),"x"),o=i(e("titleY"),"y");n.enter.auto=o===s?Bs(o):zs(t,Bs(o),Bs(s))}function yIt(e,t){const n=uIt(e,t),r=e.encode||{},i=r.axis||{},s=i.name||void 0,o=i.interactive,a=i.style,l=xl(e,n),u=hkt(l),c={scale:e.scale,ticks:!!l("ticks"),labels:!!l("labels"),grid:!!l("grid"),domain:!!l("domain"),title:e.title!=null},d=Yt(t.add(gd({},[c]))),f=Yt(t.add(vAt({scale:t.scaleRef(e.scale),extra:t.property(u.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),h=[];let p;return c.grid&&h.push(dIt(e,n,r.grid,f,u)),c.ticks&&(p=l("tickSize"),h.push(hIt(e,n,r.ticks,f,p,u))),c.labels&&(p=c.ticks?p:0,h.push(pIt(e,n,r.labels,f,p,u))),c.domain&&h.push(cIt(e,n,r.domain,d)),c.title&&h.push(mIt(e,n,r.title,d)),L4(dC({role:PSt,from:d,encode:cE(vIt(l,e),i,jS),marks:h,aria:l("aria"),description:l("description"),zindex:l("zindex"),name:s,interactive:o,style:a}),t)}function vIt(e,t){const n={enter:{},update:{}};return So(n,{orient:e("orient"),offset:e("offset")||0,position:Ec(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function xAe(e,t,n){const r=St(e.signals),i=St(e.scales);return n||r.forEach(s=>ZSe(s,t)),St(e.projections).forEach(s=>XAt(s,t)),i.forEach(s=>FAt(s,t)),St(e.data).forEach(s=>Zkt(s,t)),i.forEach(s=>jAt(s,t)),(n||r).forEach(s=>yAt(s,t)),St(e.axes).forEach(s=>yIt(s,t)),St(e.marks).forEach(s=>L4(s,t)),St(e.legends).forEach(s=>zkt(s,t)),e.title&&Ykt(e.title,t),t.parseLambdas(),t}const bIt=e=>cE({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function wIt(e,t){const n=t.config,r=Yt(t.root=t.add(cN())),i=xIt(e,n);i.forEach(u=>ZSe(u,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const s=t.add(gd()),o=t.add(nAe(JSe(bIt(e.encode),O4,xK,e.style,t,{pulse:Yt(s)}))),a=t.add(sAe({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:r,pulse:Yt(o)}));t.operators.pop(),t.pushState(Yt(o),Yt(a),null),xAe(e,t,i),t.operators.push(a);let l=t.add(tAe({mark:r,pulse:Yt(a)}));return l=t.add(iAe({pulse:Yt(l)})),l=t.add(Kv({pulse:Yt(l)})),t.addData("root",new av(t,s,s,l)),t}function R_(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function xIt(e,t){const n=o=>Ec(e[o],t[o]),r=[R_("background",n("background")),R_("autosize",ISt(n("autosize"))),R_("padding",DSt(n("padding"))),R_("width",n("width")||0),R_("height",n("height")||0)],i=r.reduce((o,a)=>(o[a.name]=a,o),{}),s={};return St(e.signals).forEach(o=>{It(i,o.name)?o=hn(i[o.name],o):r.push(o),s[o.name]=o}),St(t.signals).forEach(o=>{!It(s,o.name)&&!It(i,o.name)&&r.push(o)}),r}function EAe(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function cue(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}EAe.prototype=cue.prototype={parse(e){return xAe(e,this)},fork(){return new cue(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof F7?Yt(e):e;return this.add(PAt({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(r,i,s){let o,a;r&&(o=r.data||(r.data={}),a=o[i]||(o[i]=[]),a.push(s))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const r in t.index)n(t.index[r],e,"index:"+r)}return this},pushState(e,t,n){this._encode.push(Yt(this.add(Kv({pulse:e})))),this._parent.push(t),this._lookup.push(n?Yt(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return Rn(this._parent)},encode(){return Rn(this._encode)},lookup(){return Rn(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(Tt(e))return uC(e,t);e.signal||He("Unsupported field reference: "+ft(e));const n=e.signal;let r=this.field[n];if(!r){const i={name:this.signalRef(n)};t&&(i.as=t),this.field[n]=r=Yt(this.add(EAt(i)))}return r},compareRef(e){let t=!1;const n=s=>hs(s)?(t=!0,this.signalRef(s.signal)):aAt(s)?(t=!0,this.exprRef(s.expr)):s,r=St(e.field).map(n),i=St(e.order).map(n);return t?Yt(this.add(Xle({fields:r,orders:i}))):Yle(r,i)},keyRef(e,t){let n=!1;const r=s=>hs(s)?(n=!0,Yt(i[s.signal])):s,i=this.signals;return e=St(e).map(r),n?Yt(this.add(_At({fields:e,flat:t}))):rAt(e,t)},sortRef(e){if(!e)return e;const t=P4(e.op,e.field),n=e.order||iAt;return n.signal?Yt(this.add(Xle({fields:t,orders:this.signalRef(n.signal)}))):Yle(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},hasOwnSignal(e){return It(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&He("Duplicate signal name: "+ft(e));const n=t instanceof F7?t:this.add(cN(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||He("Unrecognized signal name: "+ft(e)),this.signals[e]},signalRef(e){return this.signals[e]?Yt(this.signals[e]):(It(this.lambdas,e)||(this.lambdas[e]=this.add(cN(null))),Yt(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const r=e[t],i=Pf(r,this),s=this.lambdas[r];s.params=i.$params,s.update=i.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!At(e)?e:this.signalRef(e.signal||OK(e))},exprRef(e,t){const n={expr:Pf(e,this)};return t&&(n.expr.$name=t),Yt(this.add(wAt(n)))},addBinding(e,t){this.bindings||He("Nested signals do not support binding: "+ft(e)),this.bindings.push(hn({signal:e},t))},addScaleProj(e,t){It(this.scales,e)&&He("Duplicate scale or projection name: "+ft(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,OAt(t))},addProjection(e,t){this.addScaleProj(e,DAt(t))},getScale(e){return this.scales[e]||He("Unrecognized scale name: "+ft(e)),this.scales[e]},scaleRef(e){return Yt(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return It(this.data,e)&&He("Duplicate data set name: "+ft(e)),this.data[e]=t},getData(e){return this.data[e]||He("Undefined data set name: "+ft(e)),this.data[e]},addDataPipeline(e,t){return It(this.data,e)&&He("Duplicate data set name: "+ft(e)),this.addData(e,av.fromEntries(this,t))}};function OK(e){return(Ge(e)?EIt:_It)(e)}function EIt(e){const t=e.length;let n="[";for(let r=0;r<t;++r){const i=e[r];n+=(r>0?",":"")+(At(i)?i.signal||OK(i):ft(i))}return n+"]"}function _It(e){let t="{",n=0,r,i;for(r in e)i=e[r],t+=(++n>1?",":"")+ft(r)+":"+(At(i)?i.signal||OK(i):ft(i));return t+"}"}function TIt(){const e="sans-serif",r="#4c78a8",i="#000",s="#888",o="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:r},area:{fill:r},image:null,line:{stroke:r,strokeWidth:2},path:{stroke:r},rect:{fill:r},rule:{stroke:i},shape:{stroke:r},symbol:{fill:r,size:64},text:{fill:i,font:e,fontSize:11},trail:{fill:r,size:2},style:{"guide-label":{fill:i,font:e,fontSize:10},"guide-title":{fill:i,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:i,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:i,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:o},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:s,grid:!1,gridWidth:1,gridColor:o,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:s,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:o,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:s,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function CIt(e,t,n){return At(e)||He("Input Vega specification must be an object."),t=Jx(TIt(),t,e.config),wIt(e,new EAe(t,n)).toRuntime()}var SIt="5.32.0";hn(Uw,myt,nwt,Owt,dxt,vxt,Wxt,Txt,Gxt,Qxt,aEt,pEt);const AIt=Object.freeze(Object.defineProperty({__proto__:null,Bounds:Si,CanvasHandler:PS,CanvasRenderer:QP,DATE:pl,DAY:Ho,DAYOFYEAR:Df,Dataflow:aw,Debug:o_e,Error:gV,EventStream:H$,Gradient:UG,GroupItem:c4,HOURS:eu,Handler:lY,HybridHandler:WTe,HybridRenderer:h7,Info:s_e,Item:u4,MILLISECONDS:td,MINUTES:tu,MONTH:Go,Marks:ru,MultiPulse:XV,None:i_e,Operator:Nr,Parameters:q$,Pulse:a0,QUARTER:hl,RenderType:Xm,Renderer:DS,ResourceLoader:aTe,SECONDS:Mu,SVGHandler:PTe,SVGRenderer:pY,SVGStringRenderer:HTe,Scenegraph:TTe,TIME_UNITS:NV,Transform:qe,View:DSe,WEEK:ds,Warn:yV,YEAR:Eo,accessor:wl,accessorFields:Vo,accessorName:Ci,array:St,ascending:eE,bandwidthNRD:eG,bin:Y_e,bootstrapCI:K_e,boundClip:eCe,boundContext:AS,boundItem:l7,boundMark:wTe,boundStroke:zp,changeset:Vv,clampRange:CV,codegenExpression:iK,compare:SV,constant:Jo,cumulativeLogNormal:Y$,cumulativeNormal:mS,cumulativeUniform:J$,dayofyear:LV,debounce:AV,defaultLocale:WV,definition:W_e,densityLogNormal:G$,densityNormal:W$,densityUniform:Q$,domChild:us,domClear:wu,domCreate:Ym,domFind:aY,dotbin:X_e,error:He,expressionFunction:Bi,extend:hn,extent:Zc,extentIndex:d_e,falsy:Tm,fastmap:tE,field:Zl,flush:kV,font:m4,fontFamily:RS,fontSize:Gf,format:P3,formatLocale:FP,formats:YV,hasOwnProperty:It,id:fS,identity:Co,inferType:O_e,inferTypes:$_e,ingest:hr,inherits:bt,inrange:vy,interpolate:LG,interpolateColors:a4,interpolateRange:U2e,intersect:mY,intersectBoxLine:$b,intersectPath:VG,intersectPoint:GG,intersectRule:uTe,isArray:Ge,isBoolean:Bp,isDate:sp,isFunction:gn,isIterable:f_e,isNumber:Zn,isObject:At,isRegExp:hS,isString:Tt,isTuple:sE,key:IV,lerp:RV,lineHeight:C0,loader:B$,locale:P_e,logger:vV,lruCache:h_e,markup:hY,merge:p_e,mergeConfig:Jx,multiLineOffset:iY,one:Qx,pad:DV,panLinear:bV,panLog:wV,panPow:xV,panSymlog:EV,parse:CIt,parseExpression:eSe,parseSelector:J0,path:t$,pathCurves:qG,pathEqual:tCe,pathParse:rv,pathRectangle:rTe,pathRender:Vw,pathSymbols:nTe,pathTrail:iTe,peek:Rn,point:y4,projection:AY,quantileLogNormal:K$,quantileNormal:gS,quantileUniform:Z$,quantiles:JV,quantizeInterpolator:q2e,quarter:_V,quartiles:ZV,get random(){return nu},randomInteger:bgt,randomKDE:nG,randomLCG:vgt,randomLogNormal:J_e,randomMixture:Z_e,randomNormal:tG,randomUniform:e2e,read:F_e,regressionConstant:rG,regressionExp:n2e,regressionLinear:iG,regressionLoess:s2e,regressionLog:t2e,regressionPoly:i2e,regressionPow:r2e,regressionQuad:sG,renderModule:v4,repeat:f2,resetDefaultLocale:m0t,resetSVGClipId:oTe,resetSVGDefIds:wbt,responseType:L_e,runtimeContext:vSe,sampleCurve:t4,sampleLogNormal:V$,sampleNormal:pS,sampleUniform:X$,scale:Vn,sceneEqual:gY,sceneFromJSON:ETe,scenePickVisit:qP,sceneToJSON:xTe,sceneVisit:nd,sceneZOrder:YG,scheme:FG,serializeXML:BTe,setHybridRendererOptions:gbt,setRandom:ggt,span:nE,splitAccessPath:Vf,stringValue:ft,textMetrics:ql,timeBin:C_e,timeFloor:b_e,timeFormatLocale:ZT,timeInterval:rE,timeOffset:zV,timeSequence:qV,timeUnitSpecifier:$V,timeUnits:OV,toBoolean:M$,toDate:L$,toNumber:yo,toSet:ed,toString:F$,transform:V_e,transforms:Uw,truncate:PV,truthy:fl,tupleid:Kt,typeParsers:JB,utcFloor:w_e,utcInterval:iE,utcOffset:UV,utcSequence:HV,utcdayofyear:jV,utcquarter:TV,utcweek:BV,version:SIt,visitArray:Dm,week:FV,writeConfig:Zx,zero:qm,zoomLinear:N$,zoomLog:O$,zoomPow:JT,zoomSymlog:$$},Symbol.toStringTag,{value:"Module"}));function kIt(e,t,n){let r;t.x2&&(t.x?(n&&e.x>e.x2&&(r=e.x,e.x=e.x2,e.x2=r),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(r=e.y,e.y=e.y2,e.y2=r),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}var IIt={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},RIt={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},DIt={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const PIt=Array.prototype.slice,Ig=(e,t,n)=>{const r=n?n(t[0]):t[0];return r[e].apply(r,PIt.call(t,1))},NIt=(e,t,n,r,i,s,o)=>new Date(e,t||0,n??1,r||0,i||0,s||0,o||0);var OIt={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:NIt,date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return Ig("join",arguments)},indexof:function(){return Ig("indexOf",arguments)},lastindexof:function(){return Ig("lastIndexOf",arguments)},slice:function(){return Ig("slice",arguments)},reverse:e=>e.slice().reverse(),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return Ig("substring",arguments,String)},split:function(){return Ig("split",arguments,String)},replace:function(){return Ig("replace",arguments,String)},trim:e=>String(e).trim(),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const $It=["view","item","group","xy","x","y"],W7=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&W7.add(setImmediate);const MIt={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const n=t.name;return e.memberDepth>0?n:n==="datum"?e.datum:n==="event"?e.event:n==="item"?e.item:IIt[n]||e.params["$"+n]},MemberExpression:(e,t)=>{const n=!t.computed,r=e(t.object);n&&(e.memberDepth+=1);const i=e(t.property);if(n&&(e.memberDepth-=1),W7.has(r[i])){console.error(`Prevented interpretation of member "${i}" which could lead to insecure code execution`);return}return r[i]},CallExpression:(e,t)=>{const n=t.arguments;let r=t.callee.name;return r.startsWith("_")&&(r=r.slice(1)),r==="if"?e(n[0])?e(n[1]):e(n[2]):(e.fn[r]||OIt[r]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>RIt[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>DIt[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,r)=>{e.memberDepth+=1;const i=e(r.key);return e.memberDepth-=1,W7.has(e(r.value))?console.error(`Prevented interpretation of property "${i}" which could lead to insecure code execution`):n[i]=e(r.value),n},{})};function D_(e,t,n,r,i,s){const o=a=>MIt[a.type](o,a);return o.memberDepth=0,o.fn=Object.create(t),o.params=n,o.datum=r,o.event=i,o.item=s,$It.forEach(a=>o.fn[a]=function(){return i.vega[a](...arguments)}),o(e)}var LIt={operator(e,t){const n=t.ast,r=e.functions;return i=>D_(n,r,i)},parameter(e,t){const n=t.ast,r=e.functions;return(i,s)=>D_(n,r,s,i)},event(e,t){const n=t.ast,r=e.functions;return i=>D_(n,r,void 0,void 0,i)},handler(e,t){const n=t.ast,r=e.functions;return(i,s)=>{const o=s.item&&s.item.datum;return D_(n,r,i,o,s)}},encode(e,t){const{marktype:n,channels:r}=t,i=e.functions,s=n==="group"||n==="image"||n==="rect";return(o,a)=>{const l=o.datum;let u=0,c;for(const d in r)c=D_(r[d].ast,i,a,l,void 0,o),o[d]!==c&&(o[d]=c,u=1);return n!=="rule"&&kIt(o,r,s),u}}};const FIt="5.23.0",jIt={version:FIt};function $K(e){return at(e,"or")}function MK(e){return at(e,"and")}function LK(e){return at(e,"not")}function J3(e,t){if(LK(e))J3(e.not,t);else if(MK(e))for(const n of e.and)J3(n,t);else if($K(e))for(const n of e.or)J3(n,t);else t(e)}function uw(e,t){return LK(e)?{not:uw(e.not,t)}:MK(e)?{and:e.and.map(n=>uw(n,t))}:$K(e)?{or:e.or.map(n=>uw(n,t))}:t(e)}const ln=structuredClone;function _Ae(e){throw new Error(e)}function Qw(e,t){const n={};for(const r of t)It(e,r)&&(n[r]=e[r]);return n}function al(e,t){const n={...e};for(const r of t)delete n[r];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>Rr(e)).join(",")})`};function Mn(e){if(Zn(e))return e;const t=Tt(e)?e:Rr(e);if(t.length<250)return t;let n=0;for(let r=0;r<t.length;r++){const i=t.charCodeAt(r);n=(n<<5)-n+i,n=n&n}return n}function V7(e){return e===!1||e===null}function Dn(e,t){return e.includes(t)}function Jw(e,t){let n=0;for(const[r,i]of e.entries())if(t(i,r,n++))return!0;return!1}function FK(e,t){let n=0;for(const[r,i]of e.entries())if(!t(i,r,n++))return!1;return!0}function TAe(e,...t){for(const n of t)BIt(e,n??{});return e}function BIt(e,t){for(const n of st(t))Zx(e,n,t[n],!0)}function of(e,t){const n=[],r={};let i;for(const s of e)i=t(s),!(i in r)&&(r[i]=1,n.push(s));return n}function zIt(e,t){const n=st(e),r=st(t);if(n.length!==r.length)return!1;for(const i of n)if(e[i]!==t[i])return!1;return!0}function CAe(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function jK(e,t){for(const n of e)if(t.has(n))return!0;return!1}function G7(e){const t=new Set;for(const n of e){const i=Vf(n).map((o,a)=>a===0?o:`[${o}]`),s=i.map((o,a)=>i.slice(0,a+1).join(""));for(const o of s)t.add(o)}return t}function BK(e,t){return e===void 0||t===void 0?!0:jK(G7(e),G7(t))}function Ir(e){return st(e).length===0}const st=Object.keys,_o=Object.values,I0=Object.entries;function fC(e){return e===!0||e===!1}function si(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function rT(e,t){return LK(e)?`!(${rT(e.not,t)})`:MK(e)?`(${e.and.map(n=>rT(n,t)).join(") && (")})`:$K(e)?`(${e.or.map(n=>rT(n,t)).join(") || (")})`:t(e)}function dN(e,t){if(t.length===0)return!0;const n=t.shift();return n in e&&dN(e[n],t)&&delete e[n],Ir(e)}function BS(e){return e.charAt(0).toUpperCase()+e.substr(1)}function zK(e,t="datum"){const n=Vf(e),r=[];for(let i=1;i<=n.length;i++){const s=`[${n.slice(0,i).map(ft).join("][")}]`;r.push(`${t}${s}`)}return r.join(" && ")}function SAe(e,t="datum"){return`${t}[${ft(Vf(e).join("."))}]`}function br(e){return`datum['${e.replaceAll("'","\\'")}']`}function UIt(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function Fu(e){return`${Vf(e).map(UIt).join("\\.")}`}function lv(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function hE(e){return`${Vf(e).join(".")}`}function Zw(e){return e?Vf(e).length:0}function Li(...e){return e.find(t=>t!==void 0)}let AAe=42;function kAe(e){const t=++AAe;return e?String(e)+t:t}function qIt(){AAe=42}function IAe(e){return RAe(e)?e:`__${e}`}function RAe(e){return e.startsWith("__")}function hC(e){if(e!==void 0)return(e%360+360)%360}function j4(e){return Zn(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}const due=Object.getPrototypeOf(structuredClone({}));function Bl(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor.name!==t.constructor.name)return!1;let n,r;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!Bl(e[r],t[r]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const s of e.entries())if(!t.has(s[0]))return!1;for(const s of e.entries())if(!Bl(s[1],t.get(s[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const s of e.entries())if(!t.has(s[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==due.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==due.toString)return e.toString()===t.toString();const i=Object.keys(e);if(n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!Bl(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function Rr(e){const t=[];return function n(r){if(r&&r.toJSON&&typeof r.toJSON=="function"&&(r=r.toJSON()),r===void 0)return;if(typeof r=="number")return isFinite(r)?""+r:"null";if(typeof r!="object")return JSON.stringify(r);let i,s;if(Array.isArray(r)){for(s="[",i=0;i<r.length;i++)i&&(s+=","),s+=n(r[i])||"null";return s+"]"}if(r===null)return"null";if(t.includes(r))throw new TypeError("Converting circular structure to JSON");const o=t.push(r)-1,a=Object.keys(r).sort();for(s="",i=0;i<a.length;i++){const l=a[i],u=n(r[l]);u&&(s&&(s+=","),s+=JSON.stringify(l)+":"+u)}return t.splice(o,1),`{${s}}`}(e)}function at(e,t){return At(e)&&It(e,t)&&e[t]!==void 0}const op="row",ap="column",B4="facet",ai="x",Xs="y",vd="x2",Qf="y2",Z0="xOffset",pE="yOffset",bd="radius",qp="radius2",Qu="theta",Hp="theta2",wd="latitude",xd="longitude",Ed="latitude2",ju="longitude2",eg="time",ml="color",Jf="fill",Zf="stroke",gl="shape",Wp="size",Qv="angle",Vp="opacity",tg="fillOpacity",ng="strokeOpacity",rg="strokeWidth",ig="strokeDash",zS="text",ex="order",US="detail",z4="key",uv="tooltip",U4="href",q4="url",H4="description",HIt={x:1,y:1,x2:1,y2:1},DAe={theta:1,theta2:1,radius:1,radius2:1};function PAe(e){return It(DAe,e)}const UK={longitude:1,longitude2:1,latitude:1,latitude2:1};function NAe(e){switch(e){case wd:return"y";case Ed:return"y2";case xd:return"x";case ju:return"x2"}}function OAe(e){return It(UK,e)}const WIt=st(UK),qK={...HIt,...DAe,...UK,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,time:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function cw(e){return e===ml||e===Jf||e===Zf}const $Ae={row:1,column:1,facet:1},Su=st($Ae),HK={...qK,...$Ae},VIt=st(HK),{order:wqt,detail:xqt,tooltip:Eqt,...GIt}=HK,{row:_qt,column:Tqt,facet:Cqt,...YIt}=GIt;function KIt(e){return It(YIt,e)}function MAe(e){return It(HK,e)}const XIt=[vd,Qf,Ed,ju,Hp,qp];function LAe(e){return Jv(e)!==e}function Jv(e){switch(e){case vd:return ai;case Qf:return Xs;case Ed:return wd;case ju:return xd;case Hp:return Qu;case qp:return bd}return e}function R0(e){if(PAe(e))switch(e){case Qu:return"startAngle";case Hp:return"endAngle";case bd:return"outerRadius";case qp:return"innerRadius"}return e}function eh(e){switch(e){case ai:return vd;case Xs:return Qf;case wd:return Ed;case xd:return ju;case Qu:return Hp;case bd:return qp}}function yl(e){switch(e){case ai:case vd:return"width";case Xs:case Qf:return"height"}}function FAe(e){switch(e){case ai:return"xOffset";case Xs:return"yOffset";case vd:return"x2Offset";case Qf:return"y2Offset";case Qu:return"thetaOffset";case bd:return"radiusOffset";case Hp:return"theta2Offset";case qp:return"radius2Offset"}}function WK(e){switch(e){case ai:return"xOffset";case Xs:return"yOffset"}}function QIt(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const JIt=st(qK),{x:Sqt,y:Aqt,x2:kqt,y2:Iqt,xOffset:Rqt,yOffset:Dqt,latitude:Pqt,longitude:Nqt,latitude2:Oqt,longitude2:$qt,theta:Mqt,theta2:Lqt,radius:Fqt,radius2:jqt,...VK}=qK,ZIt=st(VK),GK={x:1,y:1},Gp=st(GK);function Fi(e){return It(GK,e)}const YK={theta:1,radius:1},eRt=st(YK);function W4(e){return e==="width"?ai:Xs}const jAe={xOffset:1,yOffset:1};function qS(e){return It(jAe,e)}const tRt={time:1};function nF(e){return e in tRt}const{text:Bqt,tooltip:zqt,href:Uqt,url:qqt,description:Hqt,detail:Wqt,key:Vqt,order:Gqt,...BAe}=VK,nRt=st(BAe);function rRt(e){return It(VK,e)}function iRt(e){switch(e){case ml:case Jf:case Zf:case Wp:case gl:case Vp:case rg:case ig:return!0;case tg:case ng:case Qv:case eg:return!1}}const zAe={...GK,...YK,...jAe,...BAe},KK=st(zAe);function th(e){return It(zAe,e)}function sRt(e,t){return aRt(e)[t]}const UAe={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:Yqt,...oRt}=UAe;function aRt(e){switch(e){case ml:case Jf:case Zf:case H4:case US:case z4:case uv:case U4:case ex:case Vp:case tg:case ng:case rg:case B4:case op:case ap:return UAe;case ai:case Xs:case Z0:case pE:case wd:case xd:case eg:return oRt;case vd:case Qf:case Ed:case ju:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case Wp:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case ig:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case gl:return{point:"always",geoshape:"always"};case zS:return{text:"always"};case Qv:return{point:"always",square:"always",text:"always"};case q4:return{image:"always"};case Qu:return{text:"always",arc:"always"};case bd:return{text:"always",arc:"always"};case Hp:case qp:return{arc:"always"}}}function rF(e){switch(e){case ai:case Xs:case Qu:case bd:case Z0:case pE:case Wp:case Qv:case rg:case Vp:case tg:case ng:case eg:case vd:case Qf:case Hp:case qp:return;case B4:case op:case ap:case gl:case ig:case zS:case uv:case U4:case q4:case H4:return"discrete";case ml:case Jf:case Zf:return"flexible";case wd:case xd:case Ed:case ju:case US:case z4:case ex:return}}const lRt={argmax:1,argmin:1,average:1,count:1,distinct:1,exponential:1,exponentialb:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},uRt={count:1,min:1,max:1};function Ap(e){return at(e,"argmin")}function sg(e){return at(e,"argmax")}function XK(e){return Tt(e)&&It(lRt,e)}const cRt=new Set(["count","valid","missing","distinct"]);function V4(e){return Tt(e)&&cRt.has(e)}function dRt(e){return Tt(e)&&Dn(["min","max"],e)}const fRt=new Set(["count","sum","distinct","valid","missing"]),hRt=new Set(["mean","average","median","q1","q3","min","max"]);function qAe(e){return Bp(e)&&(e=i6(e,void 0)),"bin"+st(e).map(t=>G4(e[t])?si(`_${t}_${I0(e[t])}`):si(`_${t}_${e[t]}`)).join("")}function qr(e){return e===!0||Zv(e)&&!e.binned}function uo(e){return e==="binned"||Zv(e)&&e.binned===!0}function Zv(e){return At(e)}function G4(e){return at(e,"param")}function fue(e){switch(e){case op:case ap:case Wp:case ml:case Jf:case Zf:case rg:case Vp:case tg:case ng:case gl:return 6;case ig:return 4;default:return 10}}function HS(e){return at(e,"expr")}function co(e,{level:t}={level:0}){const n=st(e||{}),r={};for(const i of n)r[i]=t===0?Ll(e[i]):co(e[i],{level:t-1});return r}function HAe(e){const{anchor:t,frame:n,offset:r,orient:i,angle:s,limit:o,color:a,subtitleColor:l,subtitleFont:u,subtitleFontSize:c,subtitleFontStyle:d,subtitleFontWeight:f,subtitleLineHeight:h,subtitlePadding:p,...m}=e,g={...m,...a?{fill:a}:{}},b={...t?{anchor:t}:{},...n?{frame:n}:{},...r?{offset:r}:{},...i?{orient:i}:{},...s!==void 0?{angle:s}:{},...o!==void 0?{limit:o}:{}},v={...l?{subtitleColor:l}:{},...u?{subtitleFont:u}:{},...c?{subtitleFontSize:c}:{},...d?{subtitleFontStyle:d}:{},...f?{subtitleFontWeight:f}:{},...h?{subtitleLineHeight:h}:{},...p?{subtitlePadding:p}:{}},x=Qw(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:g,subtitleMarkConfig:x,nonMarkTitleProperties:b,subtitle:v}}function Om(e){return Tt(e)||Ge(e)&&Tt(e[0])}function Ut(e){return at(e,"signal")}function e1(e){return at(e,"step")}function pRt(e){return Ge(e)?!1:at(e,"fields")&&!at(e,"data")}function mRt(e){return Ge(e)?!1:at(e,"fields")&&at(e,"data")}function Kh(e){return Ge(e)?!1:at(e,"field")&&at(e,"data")}const gRt={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},yRt=st(gRt),vRt={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},Y7=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function WAe(e){const t=Ge(e.condition)?e.condition.map(hue):hue(e.condition);return{...Ll(e),condition:t}}function Ll(e){if(HS(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function hue(e){if(HS(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function Kr(e){if(HS(e)){const{expr:t,...n}=e;return{signal:t,...n}}return Ut(e)?e:e!==void 0?{value:e}:void 0}function bRt(e){return Ut(e)?e.signal:ft(e)}function pue(e){return Ut(e)?e.signal:ft(e.value)}function jc(e){return Ut(e)?e.signal:e==null?null:ft(e)}function wRt(e,t,n){for(const r of n){const i=Nf(r,t.markDef,t.config);i!==void 0&&(e[r]=Kr(i))}return e}function VAe(e){return[].concat(e.type,e.style??[])}function kr(e,t,n,r={}){const{vgChannel:i,ignoreVgConfig:s}=r;return i&&at(t,i)?t[i]:t[e]!==void 0?t[e]:s&&(!i||i===e)?void 0:Nf(e,t,n,r)}function Nf(e,t,n,{vgChannel:r}={}){const i=K7(e,t,n.style);return Li(r?i:void 0,i,r?n[t.type][r]:void 0,n[t.type][e],r?n.mark[r]:n.mark[e])}function K7(e,t,n){return GAe(e,VAe(t),n)}function GAe(e,t,n){t=St(t);let r;for(const i of t){const s=n[i];at(s,e)&&(r=s[e])}return r}function YAe(e,t){return St(e).reduce((n,r)=>(n.field.push(_t(r,t)),n.order.push(r.sort??"ascending"),n),{field:[],order:[]})}function KAe(e,t){const n=[...e];return t.forEach(r=>{for(const i of n)if(Bl(i,r))return;n.push(r)}),n}function XAe(e,t){return Bl(e,t)||!t?e:e?[...St(e),...St(t)].join(", "):t}function QAe(e,t){const n=e.value,r=t.value;if(n==null||r===null)return{explicit:e.explicit,value:null};if((Om(n)||Ut(n))&&(Om(r)||Ut(r)))return{explicit:e.explicit,value:XAe(n,r)};if(Om(n)||Ut(n))return{explicit:e.explicit,value:n};if(Om(r)||Ut(r))return{explicit:e.explicit,value:r};if(!Om(n)&&!Ut(n)&&!Om(r)&&!Ut(r))return{explicit:e.explicit,value:KAe(n,r)};throw new Error("It should never reach here")}function QK(e){return`Invalid specification ${Rr(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const xRt='Autosize "fit" only works for single views and layered views.';function mue(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function gue(e){const t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function yue(e){return e?`Dropping "fit-${e}" because spec has discrete ${yl(e)}.`:'Dropping "fit" because spec has discrete size.'}function JK(e){return`Unknown field for ${e}. Cannot calculate view size.`}function vue(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function ERt(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function _Rt(e){return`The "nearest" transform is not supported for ${e} marks.`}function JAe(e){return`Selection not supported for ${e} yet.`}function TRt(e){return`Cannot find a selection named "${e}".`}const CRt="Scale bindings are currently only supported for scales with unbinned, continuous domains.",SRt="Sequntial scales are deprecated. The available quantitative scale type values are linear, log, pow, sqrt, symlog, time and utc",ARt="Legend bindings are only supported for selections over an individual field or encoding channel.";function kRt(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function IRt(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}const RRt="The same selection must be used to override scale domains in a layered view.",DRt='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function PRt(e){return`Unknown repeated value "${e}".`}function bue(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}const NRt="Multiple timer selections in one unit spec are not supported. Ignoring all but the first.",ZK="Animation involving facet, layer, or concat is currently unsupported.";function ORt(e){return`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${ft(e)}.`}function $Rt(e,t,n,r){return(e.length?"Multiple ":"No ")+`matching ${ft(t)} encoding found for selection ${ft(n.param)}. Using "field": ${ft(r)}.`}const MRt="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function LRt(e){return`Unrecognized parse "${e}".`}function wue(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}const FRt="Attempt to add the same child twice.";function jRt(e){return`Ignoring an invalid transform: ${Rr(e)}.`}const BRt='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function xue(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function zRt(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${Rr(t)} is overridden by a child projection ${Rr(n)}.`}const URt="Arc marks uses theta channel rather than angle, replacing angle with theta.";function qRt(e){return`${e}Offset dropped because ${e} is continuous`}function HRt(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${Rr(n)}}.`}function ZAe(e){return`Invalid field type "${e}".`}function WRt(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function VRt(e){return`Invalid aggregation operator "${e}".`}function eke(e,t){const{fill:n,stroke:r}=t;return`Dropping color ${e} as the plot also has ${n&&r?"fill and stroke":n?"fill":"stroke"}.`}function GRt(e){return`Position range does not support relative band size for ${e}.`}function X7(e,t){return`Dropping ${Rr(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}const YRt="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function Y4(e,t,n){return`${e} dropped as it is incompatible with "${t}".`}function KRt(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function XRt(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function QRt(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function JRt(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function iF(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function ZRt(e){return`The ${e} for range marks cannot be an expression`}function e3t(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function t3t(e,t){return`Specified orient "${e}" overridden with "${t}".`}function n3t(e){return`Cannot use the scale property "${e}" with non-color channel.`}function r3t(e){return`Cannot use the relative band size with ${e} scale.`}function i3t(e){return`Using unaggregated domain with raw field has no effect (${Rr(e)}).`}function s3t(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function o3t(e){return`Unaggregated domain is currently unsupported for log scale (${Rr(e)}).`}function a3t(e){return`Cannot apply size to non-oriented mark "${e}".`}function l3t(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function u3t(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function tke(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function nke(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function c3t(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${Rr(n)} and ${Rr(r)}). Using ${Rr(n)}.`}function d3t(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${Rr(n)} and ${Rr(r)}). Using the union of the two domains.`}function f3t(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function h3t(e){return`Dropping sort property ${Rr(e)} as unioned domains only support boolean or op "count", "min", and "max".`}const Eue="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",p3t="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",m3t="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",g3t="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function y3t(e){return`Cannot stack "${e}" if there is already "${e}2".`}function v3t(e){return`Stack is applied to a non-linear scale (${e}).`}function b3t(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function fN(e,t){return`Invalid ${e}: ${Rr(t)}.`}function w3t(e){return`Dropping day from datetime ${Rr(e)} as day cannot be combined with other units.`}function x3t(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function E3t(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function _3t(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function _ue(e){return`1D error band does not support ${e}.`}function rke(e){return`Channel ${e} is required for "binned" bin.`}function T3t(e){return`Channel ${e} should not be used with "binned" bin.`}function C3t(e){return`Domain for ${e} is required for threshold scale.`}const ike=vV(yV);let cv=ike;function S3t(e){return cv=e,cv}function A3t(){return cv=ike,cv}function eX(...e){cv.error(...e)}function dt(...e){cv.warn(...e)}function k3t(...e){cv.debug(...e)}function t1(e){if(e&&At(e)){for(const t of nX)if(at(e,t))return!0}return!1}const ske=["january","february","march","april","may","june","july","august","september","october","november","december"],I3t=ske.map(e=>e.substr(0,3)),oke=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],R3t=oke.map(e=>e.substr(0,3));function D3t(e){if(j4(e)&&(e=+e),Zn(e))return e>4&&dt(fN("quarter",e)),e-1;throw new Error(fN("quarter",e))}function P3t(e){if(j4(e)&&(e=+e),Zn(e))return e-1;{const t=e.toLowerCase(),n=ske.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=I3t.indexOf(r);if(i!==-1)return i;throw new Error(fN("month",e))}}function N3t(e){if(j4(e)&&(e=+e),Zn(e))return e%7;{const t=e.toLowerCase(),n=oke.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=R3t.indexOf(r);if(i!==-1)return i;throw new Error(fN("day",e))}}function tX(e,t){const n=[];if(t&&e.day!==void 0&&st(e).length>1&&(dt(w3t(e)),e=ln(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){const r=t?P3t(e.month):e.month;n.push(r)}else if(e.quarter!==void 0){const r=t?D3t(e.quarter):e.quarter;n.push(Zn(r)?r*3:`${r}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){const r=t?N3t(e.day):e.day;n.push(Zn(r)?r+1:`${r}+1`)}else n.push(1);for(const r of["hours","minutes","seconds","milliseconds"]){const i=e[r];n.push(typeof i>"u"?0:i)}return n}function dv(e){const n=tX(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function O3t(e){const n=tX(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function $3t(e){const t=tX(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}const ake={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},nX=st(ake);function M3t(e){return It(ake,e)}function n1(e){return At(e)?e.binned:lke(e)}function lke(e){return e&&e.startsWith("binned")}function rX(e){return e.startsWith("utc")}function L3t(e){return e.substring(3)}const F3t={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function K4(e){return nX.filter(t=>cke(e,t))}function uke(e){const t=K4(e);return t[t.length-1]}function cke(e,t){const n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function j3t(e,t,{end:n}={end:!1}){const r=zK(t),i=rX(e)?"utc":"";function s(l){return l==="quarter"?`(${i}quarter(${r})-1)`:`${i}${l}(${r})`}let o;const a={};for(const l of nX)cke(e,l)&&(a[l]=s(l),o=l);return n&&(a[o]+="+1"),O3t(a)}function dke(e){if(!e)return;const t=K4(e);return`timeUnitSpecifier(${Rr(t)}, ${Rr(F3t)})`}function B3t(e,t,n){if(!e)return;const r=dke(e);return`${n||rX(e)?"utc":"time"}Format(${t}, ${r})`}function qs(e){if(!e)return;let t;return Tt(e)?lke(e)?t={unit:e.substring(6),binned:!0}:t={unit:e}:At(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),rX(t.unit)&&(t.utc=!0,t.unit=L3t(t.unit)),t}function z3t(e){const{utc:t,...n}=qs(e);return n.unit?(t?"utc":"")+st(n).map(r=>si(`${r==="unit"?"":`_${r}_`}${n[r]}`)).join(""):(t?"utc":"")+"timeunit"+st(n).map(r=>si(`_${r}_${n[r]}`)).join("")}function fke(e,t=n=>n){const n=qs(e),r=uke(n.unit);if(r&&r!=="day"){const i={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:s,part:o}=hke(r,n.step),a={...i,[o]:+i[o]+s};return`${t(dv(a))} - ${t(dv(i))}`}}const U3t={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function q3t(e){return It(U3t,e)}function hke(e,t=1){if(q3t(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:t*3};case"week":return{part:"date",step:t*7}}}function H3t(e){return at(e,"param")}function iX(e){return!!(e!=null&&e.field)&&e.equal!==void 0}function sX(e){return!!(e!=null&&e.field)&&e.lt!==void 0}function oX(e){return!!(e!=null&&e.field)&&e.lte!==void 0}function aX(e){return!!(e!=null&&e.field)&&e.gt!==void 0}function lX(e){return!!(e!=null&&e.field)&&e.gte!==void 0}function uX(e){if(e!=null&&e.field){if(Ge(e.range)&&e.range.length===2)return!0;if(Ut(e.range))return!0}return!1}function cX(e){return!!(e!=null&&e.field)&&(Ge(e.oneOf)||Ge(e.in))}function W3t(e){return!!(e!=null&&e.field)&&e.valid!==void 0}function pke(e){return cX(e)||iX(e)||uX(e)||sX(e)||aX(e)||oX(e)||lX(e)}function Bd(e,t){return s6(e,{timeUnit:t,wrapTime:!0})}function V3t(e,t){return e.map(n=>Bd(n,t))}function mke(e,t=!0){const{field:n}=e,r=qs(e.timeUnit),{unit:i,binned:s}=r||{},o=_t(e,{expr:"datum"}),a=i?`time(${s?o:j3t(i,n)})`:o;if(iX(e))return`${a}===${Bd(e.equal,i)}`;if(sX(e)){const l=e.lt;return`${a}<${Bd(l,i)}`}else if(aX(e)){const l=e.gt;return`${a}>${Bd(l,i)}`}else if(oX(e)){const l=e.lte;return`${a}<=${Bd(l,i)}`}else if(lX(e)){const l=e.gte;return`${a}>=${Bd(l,i)}`}else{if(cX(e))return`indexof([${V3t(e.oneOf,i).join(",")}], ${a}) !== -1`;if(W3t(e))return X4(a,e.valid);if(uX(e)){const{range:l}=co(e),u=Ut(l)?{signal:`${l.signal}[0]`}:l[0],c=Ut(l)?{signal:`${l.signal}[1]`}:l[1];if(u!==null&&c!==null&&t)return"inrange("+a+", ["+Bd(u,i)+", "+Bd(c,i)+"])";const d=[];return u!==null&&d.push(`${a} >= ${Bd(u,i)}`),c!==null&&d.push(`${a} <= ${Bd(c,i)}`),d.length>0?d.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${Rr(e)}`)}function X4(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function G3t(e){return pke(e)&&e.timeUnit?{...e,timeUnit:qs(e.timeUnit)}:e}const WS={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function Y3t(e){return e==="quantitative"||e==="temporal"}function gke(e){return e==="ordinal"||e==="nominal"}const fv=WS.quantitative,dX=WS.ordinal,tx=WS.temporal,fX=WS.nominal,mE=WS.geojson;function K3t(e){if(e)switch(e=e.toLowerCase(),e){case"q":case fv:return"quantitative";case"t":case tx:return"temporal";case"o":case dX:return"ordinal";case"n":case fX:return"nominal";case mE:return"geojson"}}const fo={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",TIME:"time",UTC:"utc",POINT:"point",BAND:"band"},Q7={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function X3t(e,t){const n=Q7[e],r=Q7[t];return n===r||n==="ordinal-position"&&r==="time"||r==="ordinal-position"&&n==="time"}const Q3t={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function Tue(e){return Q3t[e]}const yke=new Set(["linear","log","pow","sqrt","symlog"]),vke=new Set([...yke,"time","utc"]);function bke(e){return yke.has(e)}const wke=new Set(["quantile","quantize","threshold"]),J3t=new Set([...vke,...wke,"sequential","identity"]),Z3t=new Set(["ordinal","bin-ordinal","point","band"]);function Vs(e){return Z3t.has(e)}function rd(e){return J3t.has(e)}function af(e){return vke.has(e)}function nx(e){return wke.has(e)}const eDt={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,tickBandPaddingInner:.25,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:4,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0,framesPerSecond:2,animationDuration:5};function tDt(e){return!Tt(e)&&at(e,"name")}function xke(e){return at(e,"param")}function nDt(e){return at(e,"unionWith")}function rDt(e){return At(e)&&"field"in e}const iDt={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:Kqt,domain:Xqt,range:Qqt,rangeMax:Jqt,rangeMin:Zqt,scheme:eHt,...sDt}=iDt,oDt=st(sDt);function J7(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return af(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return af(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return af(e);case"nice":return af(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return rd(e)&&!Dn(["log","time","utc","threshold","quantile"],e)}}function Eke(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return cw(e)?void 0:n3t(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function aDt(e,t){return Dn([dX,fX],t)?e===void 0||Vs(e):t===tx?Dn([fo.TIME,fo.UTC,void 0],e):t===fv?bke(e)||nx(e)||e===void 0:!0}function lDt(e,t,n=!1){if(!th(e))return!1;switch(e){case ai:case Xs:case Z0:case pE:case Qu:case bd:return af(t)||t==="band"?!0:t==="point"?!n:!1;case eg:return Dn(["linear","band"],t);case Wp:case rg:case Vp:case tg:case ng:case Qv:return af(t)||nx(t)||Dn(["band","point","ordinal"],t);case ml:case Jf:case Zf:return t!=="band";case ig:case gl:return t==="ordinal"||nx(t)}}function uDt(e){return At(e)&&"value"in e}const Na={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},_ke=Na.arc,Q4=Na.area,J4=Na.bar,cDt=Na.image,Z4=Na.line,e6=Na.point,dDt=Na.rect,hN=Na.rule,Tke=Na.text,hX=Na.tick,fDt=Na.trail,pX=Na.circle,mX=Na.square,Cke=Na.geoshape;function og(e){return["line","area","trail"].includes(e)}function pC(e){return["rect","bar","image","arc","tick"].includes(e)}const hDt=new Set(st(Na));function Of(e){return at(e,"type")}const pDt=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],mDt=["fill","fillOpacity"],gDt=[...pDt,...mDt],yDt={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},Cue=st(yDt),sF=["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],vDt={area:["line","point"],bar:sF,rect:sF,line:["point"],tick:["bandSize","thickness",...sF]},bDt={color:"#4c78a8",invalid:"break-paths-show-path-domains",timeUnitBandSize:1},wDt={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},Ske=st(wDt);function hv(e){return at(e,"band")}const xDt={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},EDt=5,gX={binSpacing:0,continuousBandSize:EDt,minBandSize:.25,timeUnitBandPosition:.5},_Dt={...gX,binSpacing:1},TDt={...gX,thickness:1};function CDt(e){return Of(e)?e.type:e}function Ake(e,{isPath:t}){return e===void 0||e==="break-paths-show-path-domains"?t?"break-paths-show-domains":"filter":e===null?"show":e}function yX({markDef:e,config:t,scaleChannel:n,scaleType:r,isCountAggregate:i}){var a,l;if(!r||!rd(r)||i)return"always-valid";const s=Ake(kr("invalid",e,t),{isPath:og(e.type)});return((l=(a=t.scale)==null?void 0:a.invalid)==null?void 0:l[n])!==void 0?"show":s}function SDt(e){return e==="break-paths-filter-domains"||e==="break-paths-show-domains"}function kke({scaleName:e,scale:t,mode:n}){const r=`domain('${e}')`;if(!t||!e)return;const i=`${r}[0]`,s=`peek(${r})`,o=t.domainHasZero();return o==="definitely"?{scale:e,value:0}:o==="maybe"?{signal:`scale('${e}', inrange(0, ${r}) ? 0 : ${n==="zeroOrMin"?i:s})`}:{signal:`scale('${e}', ${n==="zeroOrMin"?i:s})`}}function Ike({scaleChannel:e,channelDef:t,scale:n,scaleName:r,markDef:i,config:s}){var c;const o=n==null?void 0:n.get("type"),a=sd(t),l=V4(a==null?void 0:a.aggregate),u=yX({scaleChannel:e,markDef:i,config:s,scaleType:o,isCountAggregate:l});if(a&&u==="show"){const d=((c=s.scale.invalid)==null?void 0:c[e])??"zero-or-min";return{test:X4(_t(a,{expr:"datum"}),!1),...ADt(d,n,r)}}}function ADt(e,t,n){if(uDt(e)){const{value:r}=e;return Ut(r)?{signal:r.signal}:{value:r}}return kke({scale:t,scaleName:n,mode:"zeroOrMin"})}function vX(e){const{channel:t,channelDef:n,markDef:r,scale:i,scaleName:s,config:o}=e,a=Jv(t),l=bX(e),u=Ike({scaleChannel:a,channelDef:n,scale:i,scaleName:s,markDef:r,config:o});return u!==void 0?[u,l]:l}function kDt(e){const{datum:t}=e;return t1(t)?dv(t):`${Rr(t)}`}function $y(e,t,n,r){const i={};if(t&&(i.scale=t),nh(e)){const{datum:s}=e;t1(s)?i.signal=dv(s):Ut(s)?i.signal=s.signal:HS(s)?i.signal=s.expr:i.value=s}else i.field=_t(e,n);if(r){const{offset:s,band:o}=r;s&&(i.offset=s),o&&(i.band=o)}return i}function pN({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:r,startSuffix:i,endSuffix:s="end",bandPosition:o=.5}){const a=!Ut(o)&&0<o&&o<1?"datum":void 0,l=_t(t,{expr:a,suffix:i}),u=n!==void 0?_t(n,{expr:a}):_t(t,{suffix:s,expr:a}),c={};if(o===0||o===1){c.scale=e;const d=o===0?l:u;c.field=d}else{const d=Ut(o)?`(1-${o.signal}) * ${l} + ${o.signal} * ${u}`:`${1-o} * ${l} + ${o} * ${u}`;c.signal=`scale("${e}", ${d})`}return r&&(c.offset=r),c}function IDt({scaleName:e,fieldDef:t}){const n=_t(t,{expr:"datum"}),r=_t(t,{expr:"datum",suffix:"end"});return`abs(scale("${e}", ${r}) - scale("${e}", ${n}))`}function bX({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:l,defaultRef:u,bandPosition:c}){if(t){if(fn(t)){const d=o==null?void 0:o.get("type");if(ka(t)){c??(c=D0({fieldDef:t,fieldDef2:n,markDef:r,config:i}));const{bin:f,timeUnit:h,type:p}=t;if(qr(f)||c&&h&&p===tx)return a!=null&&a.impute?$y(t,s,{binSuffix:"mid"},{offset:l}):c&&!Vs(d)?pN({scaleName:s,fieldOrDatumDef:t,bandPosition:c,offset:l}):$y(t,s,XS(t,e)?{binSuffix:"range"}:{},{offset:l});if(uo(f)){if(mt(n))return pN({scaleName:s,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:c,offset:l});dt(rke(e===ai?vd:Qf))}}return $y(t,s,Vs(d)?{binSuffix:"range"}:{},{offset:l,band:d==="band"?c??t.bandPosition??.5:void 0})}else if(id(t)){const d=t.value,f=l?{offset:l}:{};return{...iT(e,d),...f}}}return gn(u)&&(u=u()),u&&{...u,...l?{offset:l}:{}}}function iT(e,t){return Dn(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:Dn(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:Kr(t)}function pv(e){return e&&e!=="number"&&e!=="time"}function Rke(e,t,n){return`${e}(${t}${n?`, ${Rr(n)}`:""})`}const RDt="  ";function wX({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s}){var l,u;if(pv(n))return Bc({fieldOrDatumDef:e,format:t,formatType:n,expr:r,config:s});const o=Dke(e,r,i),a=rx(e);if(t===void 0&&n===void 0&&s.customFormatTypes){if(a==="quantitative"){if(i&&s.normalizedNumberFormatType)return Bc({fieldOrDatumDef:e,format:s.normalizedNumberFormat,formatType:s.normalizedNumberFormatType,expr:r,config:s});if(s.numberFormatType)return Bc({fieldOrDatumDef:e,format:s.numberFormat,formatType:s.numberFormatType,expr:r,config:s})}if(a==="temporal"&&s.timeFormatType&&mt(e)&&e.timeUnit===void 0)return Bc({fieldOrDatumDef:e,format:s.timeFormat,formatType:s.timeFormatType,expr:r,config:s})}if(sx(e)){const c=PDt({field:o,timeUnit:mt(e)?(l=qs(e.timeUnit))==null?void 0:l.unit:void 0,format:t,formatType:s.timeFormatType,rawTimeFormat:s.timeFormat,isUTCScale:r1(e)&&((u=e.scale)==null?void 0:u.type)===fo.UTC});return c?{signal:c}:void 0}if(t=Z7({type:a,specifiedFormat:t,config:s,normalizeStack:i}),mt(e)&&qr(e.bin)){const c=_t(e,{expr:r,binSuffix:"end"});return{signal:VS(o,c,t,n,s)}}else return t||rx(e)==="quantitative"?{signal:`${Oke(o,t)}`}:{signal:`isValid(${o}) ? ${o} : ""+${o}`}}function Dke(e,t,n){return mt(e)?n?`${_t(e,{expr:t,suffix:"end"})}-${_t(e,{expr:t,suffix:"start"})}`:_t(e,{expr:t}):kDt(e)}function Bc({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s,field:o}){if(o??(o=Dke(e,r,i)),o!=="datum.value"&&mt(e)&&qr(e.bin)){const a=_t(e,{expr:r,binSuffix:"end"});return{signal:VS(o,a,t,n,s)}}return{signal:Rke(n,o,t)}}function Pke(e,t,n,r,i,s){var o;if(!(Tt(r)&&pv(r))&&!(n===void 0&&r===void 0&&i.customFormatTypes&&rx(e)==="quantitative"&&(i.normalizedNumberFormatType&&ix(e)&&e.stack==="normalize"||i.numberFormatType))){if(ix(e)&&e.stack==="normalize"&&i.normalizedNumberFormat)return Z7({type:"quantitative",config:i,normalizeStack:!0});if(sx(e)){const a=mt(e)?(o=qs(e.timeUnit))==null?void 0:o.unit:void 0;return a===void 0&&i.customFormatTypes&&i.timeFormatType?void 0:DDt({specifiedFormat:n,timeUnit:a,config:i,omitTimeFormatConfig:s})}return Z7({type:t,specifiedFormat:n,config:i})}}function Nke(e,t,n){var r;if(e&&(Ut(e)||e==="number"||e==="time"))return e;if(sx(t)&&n!=="time"&&n!=="utc")return mt(t)&&((r=qs(t==null?void 0:t.timeUnit))!=null&&r.utc)?"utc":"time"}function Z7({type:e,specifiedFormat:t,config:n,normalizeStack:r}){if(Tt(t))return t;if(e===fv)return r?n.normalizedNumberFormat:n.numberFormat}function DDt({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:r}){return e||(t?{signal:dke(t)}:r?void 0:n.timeFormat)}function Oke(e,t){return`format(${e}, "${t||""}")`}function Sue(e,t,n,r){return pv(n)?Rke(n,e,t):Oke(e,(Tt(t)?t:void 0)??r.numberFormat)}function VS(e,t,n,r,i){if(n===void 0&&r===void 0&&i.customFormatTypes&&i.numberFormatType)return VS(e,t,i.numberFormat,i.numberFormatType,i);const s=Sue(e,n,r,i),o=Sue(t,n,r,i);return`${X4(e,!1)} ? "null" : ${s} + "${RDt}" + ${o}`}function PDt({field:e,timeUnit:t,format:n,formatType:r,rawTimeFormat:i,isUTCScale:s}){return!t||n?!t&&r?`${r}(${e}, '${n}')`:(n=Tt(n)?n:i,`${s?"utc":"time"}Format(${e}, '${n}')`):B3t(t,e,s)}const t6="min",NDt={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function Aue(e){return It(NDt,e)}function ODt(e){return at(e,"encoding")}function lp(e){return e&&(e.op==="count"||at(e,"field"))}function $ke(e){return e&&Ge(e)}function GS(e){return at(e,"row")||at(e,"column")}function xX(e){return at(e,"header")}function n6(e){return at(e,"facet")}function $Dt(e){return at(e,"param")}function MDt(e){return!Tt(e)&&at(e,"repeat")}function kue(e){const{field:t,timeUnit:n,bin:r,aggregate:i}=e;return{...n?{timeUnit:n}:{},...r?{bin:r}:{},...i?{aggregate:i}:{},field:t}}function EX(e){return at(e,"sort")}function D0({fieldDef:e,fieldDef2:t,markDef:n,config:r}){if(fn(e)&&e.bandPosition!==void 0)return e.bandPosition;if(mt(e)){const{timeUnit:i,bin:s}=e;if(i&&!t)return Nf("timeUnitBandPosition",n,r);if(qr(s))return .5}}function Mke({channel:e,fieldDef:t,fieldDef2:n,markDef:r,config:i,scaleType:s,useVlSizeChannel:o}){var u,c,d;const a=yl(e),l=kr(o?"size":a,r,i,{vgChannel:a});if(l!==void 0)return l;if(mt(t)){const{timeUnit:f,bin:h}=t;if(f&&!n)return{band:Nf("timeUnitBandSize",r,i)};if(qr(h)&&!Vs(s))return{band:1}}if(pC(r.type))return s?Vs(s)?((u=i[r.type])==null?void 0:u.discreteBandSize)||{band:1}:(c=i[r.type])==null?void 0:c.continuousBandSize:(d=i[r.type])==null?void 0:d.discreteBandSize}function Lke(e,t,n,r){return qr(e.bin)||e.timeUnit&&ka(e)&&e.type==="temporal"?D0({fieldDef:e,fieldDef2:t,markDef:n,config:r})!==void 0:!1}function Fke(e){return at(e,"sort")&&!at(e,"field")}function YS(e){return at(e,"condition")}function r6(e){const t=e==null?void 0:e.condition;return!!t&&!Ge(t)&&mt(t)}function KS(e){const t=e==null?void 0:e.condition;return!!t&&!Ge(t)&&fn(t)}function LDt(e){const t=e==null?void 0:e.condition;return!!t&&(Ge(t)||id(t))}function mt(e){return at(e,"field")||(e==null?void 0:e.aggregate)==="count"}function rx(e){return e==null?void 0:e.type}function nh(e){return at(e,"datum")}function e0(e){return ka(e)&&!gN(e)||mN(e)}function Iue(e){return ka(e)&&e.type==="quantitative"&&!e.bin||mN(e)}function mN(e){return nh(e)&&Zn(e.datum)}function fn(e){return mt(e)||nh(e)}function ka(e){return e&&(at(e,"field")||e.aggregate==="count")&&at(e,"type")}function id(e){return at(e,"value")}function r1(e){return at(e,"scale")||at(e,"sort")}function ix(e){return at(e,"axis")||at(e,"stack")||at(e,"impute")}function jke(e){return at(e,"legend")}function Bke(e){return at(e,"format")||at(e,"formatType")}function FDt(e){return al(e,["legend","axis","header","scale"])}function jDt(e){return at(e,"op")}function _t(e,t={}){let n=e.field;const r=t.prefix;let i=t.suffix,s="";if(zDt(e))n=IAe("count");else{let o;if(!t.nofn)if(jDt(e))o=e.op;else{const{bin:a,aggregate:l,timeUnit:u}=e;qr(a)?(o=qAe(a),i=(t.binSuffix??"")+(t.suffix??"")):l?sg(l)?(s=`["${n}"]`,n=`argmax_${l.argmax}`):Ap(l)?(s=`["${n}"]`,n=`argmin_${l.argmin}`):o=String(l):u&&!n1(u)&&(o=z3t(u),i=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}o&&(n=n?`${o}_${n}`:o)}return i&&(n=`${n}_${i}`),r&&(n=`${r}_${n}`),t.forAs?hE(n):t.expr?SAe(n,t.expr)+s:Fu(n)+s}function gN(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return mt(e)&&!!e.bin;case"temporal":return!1}throw new Error(ZAe(e.type))}function BDt(e){var t;return r1(e)&&nx((t=e.scale)==null?void 0:t.type)}function zDt(e){return e.aggregate==="count"}function UDt(e,t){var o;const{field:n,bin:r,timeUnit:i,aggregate:s}=e;if(s==="count")return t.countTitle;if(qr(r))return`${n} (binned)`;if(i&&!n1(i)){const a=(o=qs(i))==null?void 0:o.unit;if(a)return`${n} (${K4(a).join("-")})`}else if(s)return sg(s)?`${n} for max ${s.argmax}`:Ap(s)?`${n} for min ${s.argmin}`:`${BS(s)} of ${n}`;return n}function qDt(e){const{aggregate:t,bin:n,timeUnit:r,field:i}=e;if(sg(t))return`${i} for argmax(${t.argmax})`;if(Ap(t))return`${i} for argmin(${t.argmin})`;const s=r&&!n1(r)?qs(r):void 0,o=t||(s==null?void 0:s.unit)||(s==null?void 0:s.maxbins)&&"timeunit"||qr(n)&&"bin";return o?`${o.toUpperCase()}(${i})`:i}const zke=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return qDt(e);default:return UDt(e,t)}};let Uke=zke;function qke(e){Uke=e}function HDt(){qke(zke)}function dw(e,t,{allowDisabling:n,includeDefault:r=!0}){var a;const i=(a=_X(e))==null?void 0:a.title;if(!mt(e))return i??e.title;const s=e,o=r?TX(s,t):void 0;return n?Li(i,s.title,o):i??s.title??o}function _X(e){if(ix(e)&&e.axis)return e.axis;if(jke(e)&&e.legend)return e.legend;if(xX(e)&&e.header)return e.header}function TX(e,t){return Uke(e,t)}function yN(e){if(Bke(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}else{const t=_X(e)??{},{format:n,formatType:r}=t;return{format:n,formatType:r}}}function WDt(e,t){var s;switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(EX(e)&&Ge(e.sort))return"ordinal";const{aggregate:n,bin:r,timeUnit:i}=e;if(i)return"temporal";if(r||n&&!sg(n)&&!Ap(n))return"quantitative";if(r1(e)&&((s=e.scale)!=null&&s.type))switch(Q7[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function sd(e){if(mt(e))return e;if(r6(e))return e.condition}function fs(e){if(fn(e))return e;if(KS(e))return e.condition}function Hke(e,t,n,r={}){if(Tt(e)||Zn(e)||Bp(e)){const i=Tt(e)?"string":Zn(e)?"number":"boolean";return dt(HRt(t,i,e)),{value:e}}return fn(e)?vN(e,t,n,r):KS(e)?{...e,condition:vN(e.condition,t,n,r)}:e}function vN(e,t,n,r){if(Bke(e)){const{format:i,formatType:s,...o}=e;if(pv(s)&&!n.customFormatTypes)return dt(xue(t)),vN(o,t,n,r)}else{const i=ix(e)?"axis":jke(e)?"legend":xX(e)?"header":null;if(i&&e[i]){const{format:s,formatType:o,...a}=e[i];if(pv(o)&&!n.customFormatTypes)return dt(xue(t)),vN({...e,[i]:a},t,n,r)}}return mt(e)?CX(e,t,r):VDt(e)}function VDt(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=Zn(n)?"quantitative":Tt(n)?"nominal":t1(n)?"temporal":void 0,{...e,type:t}}function CX(e,t,{compositeMark:n=!1}={}){const{aggregate:r,timeUnit:i,bin:s,field:o}=e,a={...e};if(!n&&r&&!XK(r)&&!sg(r)&&!Ap(r)&&(dt(VRt(r)),delete a.aggregate),i&&(a.timeUnit=qs(i)),o&&(a.field=`${o}`),qr(s)&&(a.bin=i6(s,t)),uo(s)&&!Fi(t)&&dt(T3t(t)),ka(a)){const{type:l}=a,u=K3t(l);l!==u&&(a.type=u),l!=="quantitative"&&V4(r)&&(dt(WRt(l,r)),a.type="quantitative")}else if(!LAe(t)){const l=WDt(a,t);a.type=l}if(ka(a)){const{compatible:l,warning:u}=GDt(a,t)||{};l===!1&&dt(u)}if(EX(a)&&Tt(a.sort)){const{sort:l}=a;if(Aue(l))return{...a,sort:{encoding:l}};const u=l.substring(1);if(l.charAt(0)==="-"&&Aue(u))return{...a,sort:{encoding:u,order:"descending"}}}if(xX(a)){const{header:l}=a;if(l){const{orient:u,...c}=l;if(u)return{...a,header:{...c,labelOrient:l.labelOrient||u,titleOrient:l.titleOrient||u}}}}return a}function i6(e,t){return Bp(e)?{maxbins:fue(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?{...e,maxbins:fue(t)}:e}const rb={compatible:!0};function GDt(e,t){const n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case op:case ap:case B4:return gN(e)?rb:{compatible:!1,warning:XRt(t)};case ai:case Xs:case Z0:case pE:case ml:case Jf:case Zf:case zS:case US:case z4:case uv:case U4:case q4:case Qv:case Qu:case bd:case H4:return rb;case xd:case ju:case wd:case Ed:return n!==fv?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:rb;case Vp:case tg:case ng:case rg:case Wp:case Hp:case qp:case vd:case Qf:case eg:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:rb;case gl:case ig:return!gN(e)&&!BDt(e)?{compatible:!1,warning:QRt(t)}:rb;case ex:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:rb}}function sx(e){const{formatType:t}=yN(e);return t==="time"||!t&&YDt(e)}function YDt(e){return e&&(e.type==="temporal"||mt(e)&&!!e.timeUnit)}function s6(e,{timeUnit:t,type:n,wrapTime:r,undefinedIfExprNotRequired:i}){var l;const s=t&&((l=qs(t))==null?void 0:l.unit);let o=s||n==="temporal",a;return HS(e)?a=e.expr:Ut(e)?a=e.signal:t1(e)?(o=!0,a=dv(e)):(Tt(e)||Zn(e))&&o&&(a=`datetime(${Rr(e)})`,M3t(s)&&(Zn(e)&&e<1e4||Tt(e)&&isNaN(Date.parse(e)))&&(a=dv({[s]:e}))),a?r&&o?`time(${a})`:a:i?void 0:Rr(e)}function Wke(e,t){const{type:n}=e;return t.map(r=>{const i=mt(e)&&!n1(e.timeUnit)?e.timeUnit:void 0,s=s6(r,{timeUnit:i,type:n,undefinedIfExprNotRequired:!0});return s!==void 0?{signal:s}:r})}function XS(e,t){return qr(e.bin)?th(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const Rue={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function QS(e){return e==null?void 0:e.condition}const Vke=["domain","grid","labels","ticks","title"],KDt={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},Gke={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},XDt={...Gke,style:1,labelExpr:1,encoding:1};function Due(e){return It(XDt,e)}const QDt={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},Yke=st(QDt);function Yp(e){return at(e,"mark")}class o6{constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return Yp(t)?CDt(t.mark)===this.name:!1}}function My(e,t){const n=e&&e[t];return n?Ge(n)?Jw(n,r=>!!r.field):mt(n)||r6(n):!1}function Kke(e,t){const n=e&&e[t];return n?Ge(n)?Jw(n,r=>!!r.field):mt(n)||nh(n)||KS(n):!1}function Xke(e,t){if(Fi(t)){const n=e[t];if((mt(n)||nh(n))&&(gke(n.type)||mt(n)&&n.timeUnit)){const r=WK(t);return Kke(e,r)}}return!1}function Qke(e){return Jw(VIt,t=>{if(My(e,t)){const n=e[t];if(Ge(n))return Jw(n,r=>!!r.aggregate);{const r=sd(n);return r&&!!r.aggregate}}return!1})}function Jke(e,t){const n=[],r=[],i=[],s=[],o={};return SX(e,(a,l)=>{if(mt(a)){const{field:u,aggregate:c,bin:d,timeUnit:f,...h}=a;if(c||f||d){const p=_X(a),m=p==null?void 0:p.title;let g=_t(a,{forAs:!0});const b={...m?[]:{title:dw(a,t,{allowDisabling:!0})},...h,field:g};if(c){let v;if(sg(c)?(v="argmax",g=_t({op:"argmax",field:c.argmax},{forAs:!0}),b.field=`${g}.${u}`):Ap(c)?(v="argmin",g=_t({op:"argmin",field:c.argmin},{forAs:!0}),b.field=`${g}.${u}`):c!=="boxplot"&&c!=="errorbar"&&c!=="errorband"&&(v=c),v){const x={op:v,as:g};u&&(x.field=u),s.push(x)}}else if(n.push(g),ka(a)&&qr(d)){if(r.push({bin:d,field:u,as:g}),n.push(_t(a,{binSuffix:"end"})),XS(a,l)&&n.push(_t(a,{binSuffix:"range"})),Fi(l)){const v={field:`${g}_end`};o[`${l}2`]=v}b.bin="binned",LAe(l)||(b.type=fv)}else if(f&&!n1(f)){i.push({timeUnit:f,field:u,as:g});const v=ka(a)&&a.type!==tx&&"time";v&&(l===zS||l===uv?b.formatType=v:rRt(l)?b.legend={formatType:v,...b.legend}:Fi(l)&&(b.axis={formatType:v,...b.axis}))}o[l]=b}else n.push(u),o[l]=e[l]}else o[l]=e[l]}),{bins:r,timeUnits:i,aggregate:s,groupby:n,encoding:o}}function JDt(e,t,n){const r=sRt(t,n);if(r){if(r==="binned"){const i=e[t===vd?ai:Xs];return!!(mt(i)&&mt(e[t])&&uo(i.bin))}}else return!1;return!0}function ZDt(e,t,n,r){const i={};for(const s of st(e))MAe(s)||dt(KRt(s));for(let s of JIt){if(!e[s])continue;const o=e[s];if(qS(s)){const a=QIt(s),l=i[a];if(mt(l)&&Y3t(l.type)&&mt(o)&&!l.timeUnit){dt(qRt(a));continue}}if(s==="angle"&&t==="arc"&&!e.theta&&(dt(URt),s=Qu),!JDt(e,s,t)){dt(Y4(s,t));continue}if(s===Wp&&t==="line"){const a=sd(e[s]);if(a!=null&&a.aggregate){dt(YRt);continue}}if(s===ml&&(n?"fill"in e:"stroke"in e)){dt(eke("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(s===US||s===ex&&!Ge(o)&&!id(o)||s===uv&&Ge(o)){if(o){if(s===ex){const a=e[s];if(Fke(a)){i[s]=a;continue}}i[s]=St(o).reduce((a,l)=>(mt(l)?a.push(CX(l,s)):dt(X7(l,s)),a),[])}}else{if(s===uv&&o===null)i[s]=null;else if(!mt(o)&&!nh(o)&&!id(o)&&!YS(o)&&!Ut(o)){dt(X7(o,s));continue}i[s]=Hke(o,s,r)}}return i}function a6(e,t){const n={};for(const r of st(e)){const i=Hke(e[r],r,t,{compositeMark:!0});n[r]=i}return n}function ePt(e){const t=[];for(const n of st(e))if(My(e,n)){const r=e[n],i=St(r);for(const s of i)mt(s)?t.push(s):r6(s)&&t.push(s.condition)}return t}function SX(e,t,n){if(e)for(const r of st(e)){const i=e[r];if(Ge(i))for(const s of i)t.call(n,s,r);else t.call(n,i,r)}}function tPt(e,t,n,r){return e?st(e).reduce((i,s)=>{const o=e[s];return Ge(o)?o.reduce((a,l)=>t.call(r,a,l,s),i):t.call(r,i,o,s)},n):n}function Zke(e,t){return st(t).reduce((n,r)=>{switch(r){case ai:case Xs:case U4:case H4:case q4:case vd:case Qf:case Z0:case pE:case Qu:case Hp:case bd:case qp:case eg:case wd:case xd:case Ed:case ju:case zS:case gl:case Qv:case uv:return n;case ex:if(e==="line"||e==="trail")return n;case US:case z4:{const i=t[r];if(Ge(i)||mt(i))for(const s of St(i))s.aggregate||n.push(_t(s,{}));return n}case Wp:if(e==="trail")return n;case ml:case Jf:case Zf:case Vp:case tg:case ng:case ig:case rg:{const i=sd(t[r]);return i&&!i.aggregate&&n.push(_t(i,{})),n}}},[])}function nPt(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let r,i;if(Ge(t)){for(const s of t)s.aggregate?(r||(r=[]),r.push(s)):(i||(i=[]),i.push(s));r&&(n.tooltip=r)}else t.aggregate?n.tooltip=t:i=t;return Ge(i)&&i.length===1&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:n}}function ez(e,t,n,r=!0){if("tooltip"in n)return{tooltip:n.tooltip};const i=e.map(({fieldPrefix:o,titlePrefix:a})=>{const l=r?` of ${AX(t)}`:"";return{field:o+t.field,type:t.type,title:Ut(a)?{signal:`${a}"${escape(l)}"`}:a+l}}),s=ePt(n).map(FDt);return{tooltip:[...i,...of(s,Mn)]}}function AX(e){const{title:t,field:n}=e;return Li(t,n)}function kX(e,t,n,r,i){const{scale:s,axis:o}=n;return({partName:a,mark:l,positionPrefix:u,endPositionPrefix:c=void 0,extraEncoding:d={}})=>{const f=AX(n);return eIe(e,a,i,{mark:l,encoding:{[t]:{field:`${u}_${n.field}`,type:n.type,...f!==void 0?{title:f}:{},...s!==void 0?{scale:s}:{},...o!==void 0?{axis:o}:{}},...Tt(c)?{[`${t}2`]:{field:`${c}_${n.field}`}}:{},...r,...d}})}}function eIe(e,t,n,r){const{clip:i,color:s,opacity:o}=e,a=e.type;return e[t]||e[t]===void 0&&n[t]?[{...r,mark:{...n[t],...i?{clip:i}:{},...s?{color:s}:{},...o?{opacity:o}:{},...Of(r.mark)?r.mark:{type:r.mark},style:`${a}-${String(t)}`,...Bp(e[t])?{}:e[t]}}]:[]}function tIe(e,t,n){const{encoding:r}=e,i=t==="vertical"?"y":"x",s=r[i],o=r[`${i}2`],a=r[`${i}Error`],l=r[`${i}Error2`];return{continuousAxisChannelDef:dI(s,n),continuousAxisChannelDef2:dI(o,n),continuousAxisChannelDefError:dI(a,n),continuousAxisChannelDefError2:dI(l,n),continuousAxis:i}}function dI(e,t){if(e!=null&&e.aggregate){const{aggregate:n,...r}=e;return n!==t&&dt(_3t(n,t)),r}else return e}function nIe(e,t){const{mark:n,encoding:r}=e,{x:i,y:s}=r;if(Of(n)&&n.orient)return n.orient;if(e0(i)){if(e0(s)){const o=mt(i)&&i.aggregate,a=mt(s)&&s.aggregate;if(!o&&a===t)return"vertical";if(!a&&o===t)return"horizontal";if(o===t&&a===t)throw new Error("Both x and y cannot have aggregate");return sx(s)&&!sx(i)?"horizontal":"vertical"}return"horizontal"}else{if(e0(s))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}const bN="boxplot",rPt=["box","median","outliers","rule","ticks"],iPt=new o6(bN,iIe);function rIe(e){return Zn(e)?"tukey":e}function iIe(e,{config:t}){e={...e,encoding:a6(e.encoding,t)};const{mark:n,encoding:r,params:i,projection:s,...o}=e,a=Of(n)?n:{type:n};i&&dt(JAe("boxplot"));const l=a.extent??t.boxplot.extent,u=kr("size",a,t),c=a.invalid,d=rIe(l),{bins:f,timeUnits:h,transform:p,continuousAxisChannelDef:m,continuousAxis:g,groupby:b,aggregate:v,encodingWithoutContinuousAxis:x,ticksOrient:E,boxOrient:_,customTooltipWithoutAggregatedField:C}=sPt(e,l,t),S=hE(m.field),{color:k,size:R,...O}=x,N=Be=>kX(a,g,m,Be,t.boxplot),L=N(O),$=N(x),B=(At(t.boxplot.box)?t.boxplot.box.color:t.mark.color)||"#4c78a8",H=N({...O,...R?{size:R}:{},color:{condition:{test:`${br(`lower_box_${m.field}`)} >= ${br(`upper_box_${m.field}`)}`,...k||{value:B}}}}),Y=ez([{fieldPrefix:d==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:d==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],m,x),J={type:"tick",color:"black",opacity:1,orient:E,invalid:c,aria:!1},K=d==="min-max"?Y:ez([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],m,x),Z=[...L({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:K}),...L({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:K}),...L({partName:"ticks",mark:J,positionPrefix:"lower_whisker",extraEncoding:K}),...L({partName:"ticks",mark:J,positionPrefix:"upper_whisker",extraEncoding:K})],U=[...d!=="tukey"?Z:[],...$({partName:"box",mark:{type:"bar",...u?{size:u}:{},orient:_,invalid:c,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:Y}),...H({partName:"median",mark:{type:"tick",invalid:c,...At(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...u?{size:u}:{},orient:E,aria:!1},positionPrefix:"mid_box",extraEncoding:Y})];if(d==="min-max")return{...o,transform:(o.transform??[]).concat(p),layer:U};const j=br(`lower_box_${m.field}`),V=br(`upper_box_${m.field}`),z=`(${V} - ${j})`,G=`${j} - ${l} * ${z}`,Q=`${V} + ${l} * ${z}`,ie=br(m.field),me={joinaggregate:sIe(m.field),groupby:b},ae={transform:[{filter:`(${G} <= ${ie}) && (${ie} <= ${Q})`},{aggregate:[{op:"min",field:m.field,as:`lower_whisker_${S}`},{op:"max",field:m.field,as:`upper_whisker_${S}`},{op:"min",field:`lower_box_${m.field}`,as:`lower_box_${S}`},{op:"max",field:`upper_box_${m.field}`,as:`upper_box_${S}`},...v],groupby:b}],layer:Z},{tooltip:fe,...be}=O,{scale:te,axis:re}=m,we=AX(m),Ee=al(re,["title"]),Fe=eIe(a,"outliers",t.boxplot,{transform:[{filter:`(${ie} < ${G}) || (${ie} > ${Q})`}],mark:"point",encoding:{[g]:{field:m.field,type:m.type,...we!==void 0?{title:we}:{},...te!==void 0?{scale:te}:{},...Ir(Ee)?{}:{axis:Ee}},...be,...k?{color:k}:{},...C?{tooltip:C}:{}}})[0];let We;const Me=[...f,...h,me];return Fe?We={transform:Me,layer:[Fe,ae]}:(We=ae,We.transform.unshift(...Me)),{...o,layer:[We,{transform:p,layer:U}]}}function sIe(e){const t=hE(e);return[{op:"q1",field:e,as:`lower_box_${t}`},{op:"q3",field:e,as:`upper_box_${t}`}]}function sPt(e,t,n){const r=nIe(e,bN),{continuousAxisChannelDef:i,continuousAxis:s}=tIe(e,r,bN),o=i.field,a=hE(o),l=rIe(t),u=[...sIe(o),{op:"median",field:o,as:`mid_box_${a}`},{op:"min",field:o,as:(l==="min-max"?"lower_whisker_":"min_")+a},{op:"max",field:o,as:(l==="min-max"?"upper_whisker_":"max_")+a}],c=l==="min-max"||l==="tukey"?[]:[{calculate:`${br(`upper_box_${a}`)} - ${br(`lower_box_${a}`)}`,as:`iqr_${a}`},{calculate:`min(${br(`upper_box_${a}`)} + ${br(`iqr_${a}`)} * ${t}, ${br(`max_${a}`)})`,as:`upper_whisker_${a}`},{calculate:`max(${br(`lower_box_${a}`)} - ${br(`iqr_${a}`)} * ${t}, ${br(`min_${a}`)})`,as:`lower_whisker_${a}`}],{[s]:d,...f}=e.encoding,{customTooltipWithoutAggregatedField:h,filteredEncoding:p}=nPt(f),{bins:m,timeUnits:g,aggregate:b,groupby:v,encoding:x}=Jke(p,n),E=r==="vertical"?"horizontal":"vertical",_=r,C=[...m,...g,{aggregate:[...b,...u],groupby:v},...c];return{bins:m,timeUnits:g,transform:C,groupby:v,aggregate:b,continuousAxisChannelDef:i,continuousAxis:s,encodingWithoutContinuousAxis:x,ticksOrient:E,boxOrient:_,customTooltipWithoutAggregatedField:h}}const IX="errorbar",oPt=["ticks","rule"],aPt=new o6(IX,oIe);function oIe(e,{config:t}){e={...e,encoding:a6(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,ticksOrient:o,markDef:a,outerSpec:l,tooltipEncoding:u}=aIe(e,IX,t);delete s.size;const c=kX(a,i,r,s,t.errorbar),d=a.thickness,f=a.size,h={type:"tick",orient:o,aria:!1,...d!==void 0?{thickness:d}:{},...f!==void 0?{size:f}:{}},p=[...c({partName:"ticks",mark:h,positionPrefix:"lower",extraEncoding:u}),...c({partName:"ticks",mark:h,positionPrefix:"upper",extraEncoding:u}),...c({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...d!==void 0?{size:d}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u})];return{...l,transform:n,...p.length>1?{layer:p}:{...p[0]}}}function lPt(e,t){const{encoding:n}=e;if(uPt(n))return{orient:nIe(e,t),inputType:"raw"};const r=cPt(n),i=dPt(n),s=n.x,o=n.y;if(r){if(i)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const a=n.x2,l=n.y2;if(fn(a)&&fn(l))throw new Error(`${t} cannot have both x2 and y2`);if(fn(a)){if(e0(s))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(fn(l)){if(e0(o))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{const a=n.xError,l=n.xError2,u=n.yError,c=n.yError2;if(fn(l)&&!fn(a))throw new Error(`${t} cannot have xError2 without xError`);if(fn(c)&&!fn(u))throw new Error(`${t} cannot have yError2 without yError`);if(fn(a)&&fn(u))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(fn(a)){if(e0(s))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(fn(u)){if(e0(o))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function uPt(e){return(fn(e.x)||fn(e.y))&&!fn(e.x2)&&!fn(e.y2)&&!fn(e.xError)&&!fn(e.xError2)&&!fn(e.yError)&&!fn(e.yError2)}function cPt(e){return fn(e.x2)||fn(e.y2)}function dPt(e){return fn(e.xError)||fn(e.xError2)||fn(e.yError)||fn(e.yError2)}function aIe(e,t,n){const{mark:r,encoding:i,params:s,projection:o,...a}=e,l=Of(r)?r:{type:r};s&&dt(JAe(t));const{orient:u,inputType:c}=lPt(e,t),{continuousAxisChannelDef:d,continuousAxisChannelDef2:f,continuousAxisChannelDefError:h,continuousAxisChannelDefError2:p,continuousAxis:m}=tIe(e,u,t),{errorBarSpecificAggregate:g,postAggregateCalculates:b,tooltipSummary:v,tooltipTitleWithFieldName:x}=fPt(l,d,f,h,p,c,t,n),{[m]:E,[m==="x"?"x2":"y2"]:_,[m==="x"?"xError":"yError"]:C,[m==="x"?"xError2":"yError2"]:S,...k}=i,{bins:R,timeUnits:O,aggregate:N,groupby:L,encoding:$}=Jke(k,n),B=[...N,...g],H=c!=="raw"?[]:L,Y=ez(v,d,$,x);return{transform:[...a.transform??[],...R,...O,...B.length===0?[]:[{aggregate:B,groupby:H}],...b],groupby:H,continuousAxisChannelDef:d,continuousAxis:m,encodingWithoutContinuousAxis:$,ticksOrient:u==="vertical"?"horizontal":"vertical",markDef:l,outerSpec:a,tooltipEncoding:Y}}function fPt(e,t,n,r,i,s,o,a){let l=[],u=[];const c=t.field;let d,f=!1;if(s==="raw"){const h=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":a.errorbar.center,p=e.extent?e.extent:h==="mean"?"stderr":"iqr";if(h==="median"!=(p==="iqr")&&dt(E3t(h,p,o)),p==="stderr"||p==="stdev")l=[{op:p,field:c,as:`extent_${c}`},{op:h,field:c,as:`center_${c}`}],u=[{calculate:`${br(`center_${c}`)} + ${br(`extent_${c}`)}`,as:`upper_${c}`},{calculate:`${br(`center_${c}`)} - ${br(`extent_${c}`)}`,as:`lower_${c}`}],d=[{fieldPrefix:"center_",titlePrefix:BS(h)},{fieldPrefix:"upper_",titlePrefix:Pue(h,p,"+")},{fieldPrefix:"lower_",titlePrefix:Pue(h,p,"-")}],f=!0;else{let m,g,b;p==="ci"?(m="mean",g="ci0",b="ci1"):(m="median",g="q1",b="q3"),l=[{op:g,field:c,as:`lower_${c}`},{op:b,field:c,as:`upper_${c}`},{op:m,field:c,as:`center_${c}`}],d=[{fieldPrefix:"upper_",titlePrefix:dw({field:c,aggregate:b,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:dw({field:c,aggregate:g,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:dw({field:c,aggregate:m,type:"quantitative"},a,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&dt(x3t(e.center,e.extent)),s==="aggregated-upper-lower"?(d=[],u=[{calculate:br(n.field),as:`upper_${c}`},{calculate:br(c),as:`lower_${c}`}]):s==="aggregated-error"&&(d=[{fieldPrefix:"",titlePrefix:c}],u=[{calculate:`${br(c)} + ${br(r.field)}`,as:`upper_${c}`}],i?u.push({calculate:`${br(c)} + ${br(i.field)}`,as:`lower_${c}`}):u.push({calculate:`${br(c)} - ${br(r.field)}`,as:`lower_${c}`}));for(const h of u)d.push({fieldPrefix:h.as.substring(0,6),titlePrefix:lv(lv(h.calculate,"datum['",""),"']","")})}return{postAggregateCalculates:u,errorBarSpecificAggregate:l,tooltipSummary:d,tooltipTitleWithFieldName:f}}function Pue(e,t,n){return`${BS(e)} ${n} ${t}`}const RX="errorband",hPt=["band","borders"],pPt=new o6(RX,lIe);function lIe(e,{config:t}){e={...e,encoding:a6(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,markDef:o,outerSpec:a,tooltipEncoding:l}=aIe(e,RX,t),u=o,c=kX(u,i,r,s,t.errorband),d=e.encoding.x!==void 0&&e.encoding.y!==void 0;let f={type:d?"area":"rect"},h={type:d?"line":"rule"};const p={...u.interpolate?{interpolate:u.interpolate}:{},...u.tension&&u.interpolate?{tension:u.tension}:{}};return d?(f={...f,...p,ariaRoleDescription:"errorband"},h={...h,...p,aria:!1}):u.interpolate?dt(_ue("interpolate")):u.tension&&dt(_ue("tension")),{...a,transform:n,layer:[...c({partName:"band",mark:f,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l}),...c({partName:"borders",mark:h,positionPrefix:"lower",extraEncoding:l}),...c({partName:"borders",mark:h,positionPrefix:"upper",extraEncoding:l})]}}const uIe={};function DX(e,t,n){const r=new o6(e,t);uIe[e]={normalizer:r,parts:n}}function mPt(){return st(uIe)}DX(bN,iIe,rPt);DX(IX,oIe,oPt);DX(RX,lIe,hPt);const gPt=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],cIe={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},dIe={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},yPt=st(cIe),vPt=st(dIe),bPt={header:1,headerRow:1,headerColumn:1,headerFacet:1},fIe=st(bPt),hIe=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],wPt={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},xPt={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},od="_vgsid_",EPt={point:{on:"click",fields:[od],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function PX(e){return e==="legend"||!!(e!=null&&e.legend)}function oF(e){return PX(e)&&At(e)}function NX(e){return!!(e!=null&&e.select)}function pIe(e){const t=[];for(const n of e||[]){if(NX(n))continue;const{expr:r,bind:i,...s}=n;if(i&&r){const o={...s,bind:i,init:r};t.push(o)}else{const o={...s,...r?{update:r}:{},...i?{bind:i}:{}};t.push(o)}}return t}function _Pt(e){return l6(e)||$X(e)||OX(e)}function OX(e){return at(e,"concat")}function l6(e){return at(e,"vconcat")}function $X(e){return at(e,"hconcat")}function mIe({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function $f(e){return at(e,"step")}function Nue(e){return at(e,"view")||at(e,"width")||at(e,"height")}const Oue=20,TPt={align:1,bounds:1,center:1,columns:1,spacing:1},CPt=st(TPt);function SPt(e,t,n){const r=n[t],i={},{spacing:s,columns:o}=r;s!==void 0&&(i.spacing=s),o!==void 0&&(n6(e)&&!GS(e.facet)||OX(e))&&(i.columns=o),l6(e)&&(i.columns=1);for(const a of CPt)if(e[a]!==void 0)if(a==="spacing"){const l=e[a];i[a]=Zn(l)?l:{row:l.row??s,column:l.column??s}}else i[a]=e[a];return i}function tz(e,t){return e[t]??e[t==="width"?"continuousWidth":"continuousHeight"]}function nz(e,t){const n=wN(e,t);return $f(n)?n.step:gIe}function wN(e,t){const n=e[t]??e[t==="width"?"discreteWidth":"discreteHeight"];return Li(n,{step:e.step})}const gIe=20,APt={continuousWidth:200,continuousHeight:200,step:gIe},kPt={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:APt,mark:bDt,arc:{},area:{},bar:_Dt,circle:{},geoshape:{},image:{},line:{},point:{},rect:gX,rule:{color:"black"},square:{},text:{color:"black"},tick:TDt,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:eDt,projection:{},legend:wPt,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:EPt,style:{},title:{},facet:{spacing:Oue},concat:{spacing:Oue},normalizedNumberFormat:".0%"},Eh=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],$ue={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},Mue={blue:Eh[0],orange:Eh[1],red:Eh[2],teal:Eh[3],green:Eh[4],yellow:Eh[5],purple:Eh[6],pink:Eh[7],brown:Eh[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function IPt(e={}){return{signals:[{name:"color",value:At(e)?{...Mue,...e}:Mue}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function RPt(e){return{signals:[{name:"fontSize",value:At(e)?{...$ue,...e}:$ue}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function DPt(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function yIe(e){const t=st(e||{}),n={};for(const r of t){const i=e[r];n[r]=QS(i)?WAe(i):Ll(i)}return n}function PPt(e){const t=st(e),n={};for(const r of t)n[r]=yIe(e[r]);return n}const NPt=[...Ske,...Yke,...fIe,"background","padding","legend","lineBreak","scale","style","title","view"];function vIe(e={}){const{color:t,font:n,fontSize:r,selection:i,...s}=e,o=Jx({},ln(kPt),n?DPt(n):{},t?IPt(t):{},r?RPt(r):{},s||{});i&&Zx(o,"selection",i,!0);const a=al(o,NPt);for(const l of["background","lineBreak","padding"])o[l]&&(a[l]=Ll(o[l]));for(const l of Ske)o[l]&&(a[l]=co(o[l]));for(const l of Yke)o[l]&&(a[l]=yIe(o[l]));for(const l of fIe)o[l]&&(a[l]=co(o[l]));if(o.legend&&(a.legend=co(o.legend)),o.scale){const{invalid:l,...u}=o.scale,c=co(l,{level:1});a.scale={...co(u),...st(c).length>0?{invalid:c}:{}}}return o.style&&(a.style=PPt(o.style)),o.title&&(a.title=co(o.title)),o.view&&(a.view=co(o.view)),a}const OPt=new Set(["view",...hDt]),$Pt=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],MPt={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],...vDt};function LPt(e){e=ln(e);for(const t of $Pt)delete e[t];if(e.axis)for(const t in e.axis)QS(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of gPt)delete e.legend[t];if(e.mark){for(const t of Cue)delete e.mark[t];e.mark.tooltip&&At(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(pIe(e.params)),delete e.params);for(const t of OPt){for(const r of Cue)delete e[t][r];const n=MPt[t];if(n)for(const r of n)delete e[t][r];jPt(e,t)}for(const t of mPt())delete e[t];FPt(e);for(const t in e)At(e[t])&&Ir(e[t])&&delete e[t];return Ir(e)?void 0:e}function FPt(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:r}=HAe(e.title);Ir(t)||(e.style["group-title"]={...e.style["group-title"],...t}),Ir(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n}),Ir(r)?delete e.title:e.title=r}function jPt(e,t,n,r){const i=e[t];t==="view"&&(n="cell");const s={...i,...e.style[n??t]};Ir(s)||(e.style[n??t]=s),delete e[t]}function u6(e){return at(e,"layer")}function BPt(e){return at(e,"repeat")}function zPt(e){return!Ge(e.repeat)&&at(e.repeat,"layer")}class MX{map(t,n){return n6(t)?this.mapFacet(t,n):BPt(t)?this.mapRepeat(t,n):$X(t)?this.mapHConcat(t,n):l6(t)?this.mapVConcat(t,n):OX(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(u6(t))return this.mapLayer(t,n);if(Yp(t))return this.mapUnit(t,n);throw new Error(QK(t))}mapLayer(t,n){return{...t,layer:t.layer.map(r=>this.mapLayerOrUnit(r,n))}}mapHConcat(t,n){return{...t,hconcat:t.hconcat.map(r=>this.map(r,n))}}mapVConcat(t,n){return{...t,vconcat:t.vconcat.map(r=>this.map(r,n))}}mapConcat(t,n){const{concat:r,...i}=t;return{...i,concat:r.map(s=>this.map(s,n))}}mapFacet(t,n){return{...t,spec:this.map(t.spec,n)}}mapRepeat(t,n){return{...t,spec:this.map(t.spec,n)}}}const UPt={zero:1,center:1,normalize:1};function qPt(e){return It(UPt,e)}const HPt=new Set([_ke,J4,Q4,hN,e6,pX,mX,Z4,Tke,hX]),WPt=new Set([J4,Q4,_ke]);function ib(e){return mt(e)&&rx(e)==="quantitative"&&!e.bin}function Lue(e,t,{orient:n,type:r}){const i=t==="x"?"y":"radius",s=t==="x"&&["bar","area"].includes(r),o=e[t],a=e[i];if(mt(o)&&mt(a))if(ib(o)&&ib(a)){if(o.stack)return t;if(a.stack)return i;const l=mt(o)&&!!o.aggregate,u=mt(a)&&!!a.aggregate;if(l!==u)return l?t:i;if(s){if(n==="vertical")return i;if(n==="horizontal")return t}}else{if(ib(o))return t;if(ib(a))return i}else{if(ib(o))return s&&n==="vertical"?void 0:t;if(ib(a))return s&&n==="horizontal"?void 0:i}}function VPt(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function bIe(e,t){var m,g;const n=Of(e)?e:{type:e},r=n.type;if(!HPt.has(r))return null;const i=Lue(t,"x",n)||Lue(t,"theta",n);if(!i)return null;const s=t[i],o=mt(s)?_t(s,{}):void 0,a=VPt(i),l=[],u=new Set;if(t[a]){const b=t[a],v=mt(b)?_t(b,{}):void 0;v&&v!==o&&(l.push(a),u.add(v))}const c=a==="x"?"xOffset":"yOffset",d=t[c],f=mt(d)?_t(d,{}):void 0;f&&f!==o&&(l.push(c),u.add(f));const h=ZIt.reduce((b,v)=>{if(v!=="tooltip"&&My(t,v)){const x=t[v];for(const E of St(x)){const _=sd(E);if(_.aggregate)continue;const C=_t(_,{});(!C||!u.has(C))&&b.push({channel:v,fieldDef:_})}}return b},[]);let p;return s.stack!==void 0?Bp(s.stack)?p=s.stack?"zero":null:p=s.stack:WPt.has(r)&&(p="zero"),!p||!qPt(p)||Qke(t)&&h.length===0?null:((m=s==null?void 0:s.scale)!=null&&m.type&&((g=s==null?void 0:s.scale)==null?void 0:g.type)!==fo.LINEAR&&s!=null&&s.stack&&dt(v3t(s.scale.type)),fn(t[eh(i)])?(s.stack!==void 0&&dt(y3t(i)),null):(mt(s)&&s.aggregate&&!fRt.has(s.aggregate)&&dt(b3t(s.aggregate)),{groupbyChannels:l,groupbyFields:u,fieldChannel:i,impute:s.impute===null?!1:og(r),stackBy:h,offset:p}))}function wIe(e,t,n){const r=co(e),i=kr("orient",r,n);if(r.orient=XPt(r.type,t,i),i!==void 0&&i!==r.orient&&dt(t3t(r.orient,i)),r.type==="bar"&&r.orient){const l=kr("cornerRadiusEnd",r,n);if(l!==void 0){const u=r.orient==="horizontal"&&t.x2||r.orient==="vertical"&&t.y2?["cornerRadius"]:xDt[r.orient];for(const c of u)r[c]=l;r.cornerRadiusEnd!==void 0&&delete r.cornerRadiusEnd}}const s=kr("opacity",r,n),o=kr("fillOpacity",r,n);return s===void 0&&o===void 0&&(r.opacity=YPt(r.type,t)),kr("cursor",r,n)===void 0&&(r.cursor=GPt(r,t,n)),r}function GPt(e,t,n){return t.href||e.href||kr("href",e,n)?"pointer":e.cursor}function YPt(e,t){if(Dn([e6,hX,pX,mX],e)&&!Qke(t))return .7}function KPt(e,t,{graticule:n}){if(n)return!1;const r=Nf("filled",e,t),i=e.type;return Li(r,i!==e6&&i!==Z4&&i!==hN)}function XPt(e,t,n){switch(e){case e6:case pX:case mX:case Tke:case dDt:case cDt:return}const{x:r,y:i,x2:s,y2:o}=t;switch(e){case J4:if(mt(r)&&(uo(r.bin)||mt(i)&&i.aggregate&&!r.aggregate))return"vertical";if(mt(i)&&(uo(i.bin)||mt(r)&&r.aggregate&&!i.aggregate))return"horizontal";if(o||s){if(n)return n;if(!s)return(mt(r)&&r.type===fv&&!qr(r.bin)||mN(r))&&mt(i)&&uo(i.bin)?"horizontal":"vertical";if(!o)return(mt(i)&&i.type===fv&&!qr(i.bin)||mN(i))&&mt(r)&&uo(r.bin)?"vertical":"horizontal"}case hN:if(s&&!(mt(r)&&uo(r.bin))&&o&&!(mt(i)&&uo(i.bin)))return;case Q4:if(o)return mt(i)&&uo(i.bin)?"horizontal":"vertical";if(s)return mt(r)&&uo(r.bin)?"vertical":"horizontal";if(e===hN){if(r&&!i)return"vertical";if(i&&!r)return"horizontal"}case Z4:case hX:{const a=Iue(r),l=Iue(i);if(n)return n;if(a&&!l)return e!=="tick"?"horizontal":"vertical";if(!a&&l)return e!=="tick"?"vertical":"horizontal";if(a&&l)return"vertical";{const u=ka(r)&&r.type===tx,c=ka(i)&&i.type===tx;if(u&&!c)return"vertical";if(!u&&c)return"horizontal"}return}}return"vertical"}function QPt(e){const{point:t,line:n,...r}=e;return st(r).length>1?r:r.type}function JPt(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:al(e[t],["point","line"])});return e}function aF(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?At(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?At(t.point)?t.point:{}:void 0}function Fue(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}class ZPt{constructor(){this.name="path-overlay"}hasMatchingType(t,n){if(Yp(t)){const{mark:r,encoding:i}=t,s=Of(r)?r:{type:r};switch(s.type){case"line":case"rule":case"trail":return!!aF(s,n[s.type],i);case"area":return!!aF(s,n[s.type],i)||!!Fue(s,n[s.type])}}return!1}run(t,n,r){const{config:i}=n,{params:s,projection:o,mark:a,name:l,encoding:u,...c}=t,d=a6(u,i),f=Of(a)?a:{type:a},h=aF(f,i[f.type],d),p=f.type==="area"&&Fue(f,i[f.type]),m=[{name:l,...s?{params:s}:{},mark:QPt({...f.type==="area"&&f.opacity===void 0&&f.fillOpacity===void 0?{opacity:.7}:{},...f}),encoding:al(d,["shape"])}],g=bIe(wIe(f,d,i),d);let b=d;if(g){const{fieldChannel:v,offset:x}=g;b={...d,[v]:{...d[v],...x?{stack:x}:{}}}}return b=al(b,["y2","x2"]),p&&m.push({...o?{projection:o}:{},mark:{type:"line",...Qw(f,["clip","interpolate","tension","tooltip"]),...p},encoding:b}),h&&m.push({...o?{projection:o}:{},mark:{type:"point",opacity:1,filled:!0,...Qw(f,["clip","tooltip"]),...h},encoding:b}),r({...c,layer:m},{...n,config:JPt(i)})}}function eNt(e,t){return t?GS(e)?EIe(e,t):xIe(e,t):e}function lF(e,t){return t?EIe(e,t):e}function rz(e,t,n){const r=t[e];if(MDt(r)){if(r.repeat in n)return{...t,[e]:n[r.repeat]};dt(PRt(r.repeat));return}return t}function xIe(e,t){if(e=rz("field",e,t),e!==void 0){if(e===null)return null;if(EX(e)&&lp(e.sort)){const n=rz("field",e.sort,t);e={...e,...n?{sort:n}:{}}}return e}}function jue(e,t){if(mt(e))return xIe(e,t);{const n=rz("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function Bue(e,t){if(fn(e)){const n=jue(e,t);if(n)return n;if(YS(e))return{condition:e.condition}}else{if(KS(e)){const n=jue(e.condition,t);if(n)return{...e,condition:n};{const{condition:r,...i}=e;return i}}return e}}function EIe(e,t){const n={};for(const r in e)if(at(e,r)){const i=e[r];if(Ge(i))n[r]=i.map(s=>Bue(s,t)).filter(s=>s);else{const s=Bue(i,t);s!==void 0&&(n[r]=s)}}return n}class tNt{constructor(){this.name="RuleForRangedLine"}hasMatchingType(t){if(Yp(t)){const{encoding:n,mark:r}=t;if(r==="line"||Of(r)&&r.type==="line")for(const i of XIt){const s=Jv(i),o=n[s];if(n[i]&&(mt(o)&&!uo(o.bin)||nh(o)))return!0}}return!1}run(t,n,r){const{encoding:i,mark:s}=t;return dt(e3t(!!i.x2,!!i.y2)),r({...t,mark:At(s)?{...s,type:"rule"}:"rule"},n)}}class nNt extends MX{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[iPt,aPt,pPt,new ZPt,new tNt]}map(t,n){if(Yp(t)){const r=My(t.encoding,op),i=My(t.encoding,ap),s=My(t.encoding,B4);if(r||i||s)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){const{parentEncoding:r,parentProjection:i}=n,s=lF(t.encoding,n.repeater),o={...t,...t.name?{name:[n.repeaterPrefix,t.name].filter(l=>l).join("_")}:{},...s?{encoding:s}:{}};if(r||i)return this.mapUnitWithParentEncodingOrProjection(o,n);const a=this.mapLayerOrUnit.bind(this);for(const l of this.nonFacetUnitNormalizers)if(l.hasMatchingType(o,n.config))return l.run(o,n,a);return o}mapRepeat(t,n){return zPt(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){const{repeat:r,spec:i,...s}=t,{row:o,column:a,layer:l}=r,{repeater:u={},repeaterPrefix:c=""}=n;return o||a?this.mapRepeat({...t,repeat:{...o?{row:o}:{},...a?{column:a}:{}},spec:{repeat:{layer:l},spec:i}},n):{...s,layer:l.map(d=>{const f={...u,layer:d},h=`${(i.name?`${i.name}_`:"")+c}child__layer_${si(d)}`,p=this.mapLayerOrUnit(i,{...n,repeater:f,repeaterPrefix:h});return p.name=h,p})}}mapNonLayerRepeat(t,n){const{repeat:r,spec:i,data:s,...o}=t;!Ge(r)&&t.columns&&(t=al(t,["columns"]),dt(bue("repeat")));const a=[],{repeater:l={},repeaterPrefix:u=""}=n,c=!Ge(r)&&r.row||[l?l.row:null],d=!Ge(r)&&r.column||[l?l.column:null],f=Ge(r)&&r||[l?l.repeat:null];for(const p of f)for(const m of c)for(const g of d){const b={repeat:p,row:m,column:g,layer:l.layer},v=(i.name?`${i.name}_`:"")+u+"child__"+(Ge(r)?`${si(p)}`:(r.row?`row_${si(m)}`:"")+(r.column?`column_${si(g)}`:"")),x=this.map(i,{...n,repeater:b,repeaterPrefix:v});x.name=v,a.push(al(x,["data"]))}const h=Ge(r)?t.columns:r.column?r.column.length:1;return{data:i.data??s,align:"all",...o,columns:h,concat:a}}mapFacet(t,n){const{facet:r}=t;return GS(r)&&t.columns&&(t=al(t,["columns"]),dt(bue("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){const{encoding:r,projection:i}=t,{parentEncoding:s,parentProjection:o,config:a}=n,l=Uue({parentProjection:o,projection:i}),u=zue({parentEncoding:s,encoding:lF(r,n.repeater)});return this.mapUnit({...t,...l?{projection:l}:{},...u?{encoding:u}:{}},{config:a})}mapFacetedUnit(t,n){const{row:r,column:i,facet:s,...o}=t.encoding,{mark:a,width:l,projection:u,height:c,view:d,params:f,encoding:h,...p}=t,{facetMapping:m,layout:g}=this.getFacetMappingAndLayout({row:r,column:i,facet:s},n),b=lF(o,n.repeater);return this.mapFacet({...p,...g,facet:m,spec:{...l?{width:l}:{},...c?{height:c}:{},...d?{view:d}:{},...u?{projection:u}:{},mark:a,encoding:b,...f?{params:f}:{}}},n)}getFacetMappingAndLayout(t,n){const{row:r,column:i,facet:s}=t;if(r||i){s&&dt(JRt([...r?[op]:[],...i?[ap]:[]]));const o={},a={};for(const l of[op,ap]){const u=t[l];if(u){const{align:c,center:d,spacing:f,columns:h,...p}=u;o[l]=p;for(const m of["align","center","spacing"])u[m]!==void 0&&(a[m]??(a[m]={}),a[m][l]=u[m])}}return{facetMapping:o,layout:a}}else{const{align:o,center:a,spacing:l,columns:u,...c}=s;return{facetMapping:eNt(c,n.repeater),layout:{...o?{align:o}:{},...a?{center:a}:{},...l?{spacing:l}:{},...u?{columns:u}:{}}}}}mapLayer(t,{parentEncoding:n,parentProjection:r,...i}){const{encoding:s,projection:o,...a}=t,l={...i,parentEncoding:zue({parentEncoding:n,encoding:s,layer:!0}),parentProjection:Uue({parentProjection:r,projection:o})};return super.mapLayer({...a,...t.name?{name:[l.repeaterPrefix,t.name].filter(u=>u).join("_")}:{}},l)}}function zue({parentEncoding:e,encoding:t={},layer:n}){let r={};if(e){const i=new Set([...st(e),...st(t)]);for(const s of i){const o=t[s],a=e[s];if(fn(o)){const l={...a,...o};r[s]=l}else KS(o)?r[s]={...o,condition:{...a,...o.condition}}:o||o===null?r[s]=o:(n||id(a)||Ut(a)||fn(a)||Ge(a))&&(r[s]=a)}}else r=t;return!r||Ir(r)?void 0:r}function Uue(e){const{parentProjection:t,projection:n}=e;return t&&n&&dt(zRt({parentProjection:t,projection:n})),n??t}function LX(e){return at(e,"filter")}function rNt(e){return at(e,"stop")}function _Ie(e){return at(e,"lookup")}function iNt(e){return at(e,"data")}function sNt(e){return at(e,"param")}function oNt(e){return at(e,"pivot")}function aNt(e){return at(e,"density")}function lNt(e){return at(e,"quantile")}function uNt(e){return at(e,"regression")}function cNt(e){return at(e,"loess")}function dNt(e){return at(e,"sample")}function fNt(e){return at(e,"window")}function hNt(e){return at(e,"joinaggregate")}function pNt(e){return at(e,"flatten")}function mNt(e){return at(e,"calculate")}function TIe(e){return at(e,"bin")}function gNt(e){return at(e,"impute")}function yNt(e){return at(e,"timeUnit")}function vNt(e){return at(e,"aggregate")}function bNt(e){return at(e,"stack")}function wNt(e){return at(e,"fold")}function xNt(e){return at(e,"extent")&&!at(e,"density")&&!at(e,"regression")}function ENt(e){return e.map(t=>LX(t)?{filter:uw(t.filter,G3t)}:t)}class _Nt extends MX{map(t,n){return n.emptySelections??(n.emptySelections={}),n.selectionPredicates??(n.selectionPredicates={}),t=que(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=que(t,n),t.encoding){const r={};for(const[i,s]of I0(t.encoding))r[i]=CIe(s,n);t={...t,encoding:r}}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){const{selection:r,...i}=t;return r?{...i,params:I0(r).map(([s,o])=>{const{init:a,bind:l,empty:u,...c}=o;c.type==="single"?(c.type="point",c.toggle=!1):c.type==="multi"&&(c.type="point"),n.emptySelections[s]=u!=="none";for(const d of _o(n.selectionPredicates[s]??{}))d.empty=u!=="none";return{name:s,value:a,select:c,bind:l}})}:t}}function que(e,t){const{transform:n,...r}=e;if(n){const i=n.map(s=>{if(LX(s))return{filter:iz(s,t)};if(TIe(s)&&Zv(s.bin))return{...s,bin:SIe(s.bin)};if(_Ie(s)){const{selection:o,...a}=s.from;return o?{...s,from:{param:o,...a}}:s}return s});return{...r,transform:i}}return e}function CIe(e,t){var r,i;const n=ln(e);if(mt(n)&&Zv(n.bin)&&(n.bin=SIe(n.bin)),r1(n)&&((i=(r=n.scale)==null?void 0:r.domain)!=null&&i.selection)){const{selection:s,...o}=n.scale.domain;n.scale.domain={...o,...s?{param:s}:{}}}if(YS(n))if(Ge(n.condition))n.condition=n.condition.map(s=>{const{selection:o,param:a,test:l,...u}=s;return a?s:{...u,test:iz(s,t)}});else{const{selection:s,param:o,test:a,...l}=CIe(n.condition,t);n.condition=o?n.condition:{...l,test:iz(n.condition,t)}}return n}function SIe(e){const t=e.extent;if(t!=null&&t.selection){const{selection:n,...r}=t;return{...e,extent:{...r,param:n}}}return e}function iz(e,t){const n=r=>uw(r,i=>{var s;const o=t.emptySelections[i]??!0,a={param:i,empty:o};return(s=t.selectionPredicates)[i]??(s[i]=[]),t.selectionPredicates[i].push(a),a});return e.selection?n(e.selection):uw(e.test||e.filter,r=>r.selection?n(r.selection):r)}class sz extends MX{map(t,n){const r=n.selections??[];if(t.params&&!Yp(t)){const i=[];for(const s of t.params)NX(s)?r.push(s):i.push(s);t.params=i}return n.selections=r,super.map(t,n)}mapUnit(t,n){const r=n.selections;if(!r||!r.length)return t;const i=(n.path??[]).concat(t.name),s=[];for(const o of r)if(!o.views||!o.views.length)s.push(o);else for(const a of o.views)(Tt(a)&&(a===t.name||i.includes(a))||Ge(a)&&a.map(l=>i.indexOf(l)).every((l,u,c)=>l!==-1&&(u===0||l>c[u-1])))&&s.push(o);return s.length&&(t.params=s),t}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=sz.prototype[e];sz.prototype[e]=function(n,r){return t.call(this,n,TNt(n,r))}}function TNt(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function AIe(e,t){t===void 0&&(t=vIe(e.config));const n=kNt(e,t),{width:r,height:i}=e,s=INt(n,{width:r,height:i,autosize:e.autosize},t);return{...n,...s?{autosize:s}:{}}}const CNt=new nNt,SNt=new _Nt,ANt=new sz;function kNt(e,t={}){const n={config:t};return ANt.map(CNt.map(SNt.map(e,n),n),n)}function Hue(e){return Tt(e)?{type:e}:e??{}}function INt(e,t,n){let{width:r,height:i}=t;const s=Yp(e)||u6(e),o={};s?r=="container"&&i=="container"?(o.type="fit",o.contains="padding"):r=="container"?(o.type="fit-x",o.contains="padding"):i=="container"&&(o.type="fit-y",o.contains="padding"):(r=="container"&&(dt(mue("width")),r=void 0),i=="container"&&(dt(mue("height")),i=void 0));const a={type:"pad",...o,...n?Hue(n.autosize):{},...Hue(e.autosize)};if(a.type==="fit"&&!s&&(dt(xRt),a.type="pad"),r=="container"&&!(a.type=="fit"||a.type=="fit-x")&&dt(gue("width")),i=="container"&&!(a.type=="fit"||a.type=="fit-y")&&dt(gue("height")),!Bl(a,{type:"pad"}))return a}function RNt(e){return["fit","fit-x","fit-y"].includes(e)}function DNt(e){return e?`fit-${W4(e)}`:"fit"}const PNt=["background","padding"];function Wue(e,t){const n={};for(const r of PNt)e&&e[r]!==void 0&&(n[r]=Ll(e[r]));return t&&(n.params=e.params),n}class Kp{constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new Kp(ln(this.explicit),ln(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(t){return Li(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:r}){n!==void 0&&this.set(t,n,r)}set(t,n,r){return delete this[r?"implicit":"explicit"][t],this[r?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:r}){n[t]!==void 0?this.set(t,n[t],!0):r[t]!==void 0&&this.set(t,r[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(const n of st(t.combine())){const r=t.getWithExplicit(n);this.setWithExplicit(n,r)}}}function Vd(e){return{explicit:!0,value:e}}function Dl(e){return{explicit:!1,value:e}}function kIe(e){return(t,n,r,i)=>{const s=e(t.value,n.value);return s>0?t:s<0?n:c6(t,n,r,i)}}function c6(e,t,n,r){return e.explicit&&t.explicit&&dt(c3t(n,r,e.value,t.value)),e}function P0(e,t,n,r,i=c6){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:Bl(e.value,t.value)?e:i(e,t,n,r)}class NNt extends Kp{constructor(t={},n={},r=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=r}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function ox(e){return at(e,"url")}function mC(e){return at(e,"values")}function IIe(e){return at(e,"name")&&!ox(e)&&!mC(e)&&!c0(e)}function c0(e){return e&&(RIe(e)||DIe(e)||FX(e))}function RIe(e){return at(e,"sequence")}function DIe(e){return at(e,"sphere")}function FX(e){return at(e,"graticule")}var gi;(function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup",e[e.PreFilterInvalid=5]="PreFilterInvalid",e[e.PostFilterInvalid=6]="PostFilterInvalid"})(gi||(gi={}));function PIe({invalid:e,isPath:t}){switch(Ake(e,{isPath:t})){case"filter":return{marks:"exclude-invalid-values",scales:"exclude-invalid-values"};case"break-paths-show-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"include-invalid-values"};case"break-paths-filter-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"exclude-invalid-values"};case"show":return{marks:"include-invalid-values",scales:"include-invalid-values"}}}function ONt(e){const{marks:t,scales:n}=PIe(e);return t===n?gi.Main:n==="include-invalid-values"?gi.PreFilterInvalid:gi.PostFilterInvalid}class Cr{constructor(t,n){this.debugName=n,this._children=[],this._parent=null,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){dt(FRt);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const i of this._children)i.parent=t;this._children=[],t.removeChild(this);const r=t.parent.removeChild(t);this._parent=n,n.addChild(this,r),t.parent=this}}class ll extends Cr{clone(){const t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}constructor(t,n,r,i){super(t,n),this.type=r,this.refCounts=i,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${kAe()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}function uF(e){return e.as!==void 0}function Vue(e){return`${e}_end`}class vf extends Cr{clone(){return new vf(null,ln(this.timeUnits))}constructor(t,n){super(t),this.timeUnits=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{const{field:a,timeUnit:l}=s;if(l){let u;if(n1(l)){if(pi(n)){const{mark:c,markDef:d,config:f}=n,h=D0({fieldDef:s,markDef:d,config:f});(pC(c)||h)&&(u={timeUnit:qs(l),field:a})}}else u={as:_t(s,{forAs:!0}),field:a,timeUnit:l};if(pi(n)){const{mark:c,markDef:d,config:f}=n,h=D0({fieldDef:s,markDef:d,config:f});pC(c)&&Fi(o)&&h!==.5&&(u.rectBandPosition=h)}u&&(i[Mn(u)]=u)}return i},{});return Ir(r)?null:new vf(t,r)}static makeFromTransform(t,n){const{timeUnit:r,...i}={...n},s=qs(r),o={...i,timeUnit:s};return new vf(t,{[Mn(o)]:o})}merge(t){this.timeUnits={...this.timeUnits};for(const n in t.timeUnits)this.timeUnits[n]||(this.timeUnits[n]=t.timeUnits[n]);for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}removeFormulas(t){const n={};for(const[r,i]of I0(this.timeUnits)){const s=uF(i)?i.as:`${i.field}_end`;t.has(s)||(n[r]=i)}this.timeUnits=n}producedFields(){return new Set(_o(this.timeUnits).map(t=>uF(t)?t.as:Vue(t.field)))}dependentFields(){return new Set(_o(this.timeUnits).map(t=>t.field))}hash(){return`TimeUnit ${Mn(this.timeUnits)}`}assemble(){const t=[];for(const n of _o(this.timeUnits)){const{rectBandPosition:r}=n,i=qs(n.timeUnit);if(uF(n)){const{field:s,as:o}=n,{unit:a,utc:l,...u}=i,c=[o,`${o}_end`];t.push({field:Fu(s),type:"timeunit",...a?{units:K4(a)}:{},...l?{timezone:"utc"}:{},...u,as:c}),t.push(...Gue(c,r,i))}else if(n){const{field:s}=n,o=s.replaceAll("\\.","."),a=NIe({timeUnit:i,field:o}),l=Vue(o);t.push({type:"formula",expr:a,as:l}),t.push(...Gue([o,l],r,i))}}return t}}const d6="offsetted_rect_start",f6="offsetted_rect_end";function NIe({timeUnit:e,field:t,reverse:n}){const{unit:r,utc:i}=e,s=uke(r),{part:o,step:a}=hke(s,e.step);return`${i?"utcOffset":"timeOffset"}('${o}', ${br(t)}, ${n?-a:a})`}function Gue([e,t],n,r){if(n!==void 0&&n!==.5){const i=br(e),s=br(t);return[{type:"formula",expr:Yue([NIe({timeUnit:r,field:e,reverse:!0}),i],n+.5),as:`${e}_${d6}`},{type:"formula",expr:Yue([i,s],n+.5),as:`${e}_${f6}`}]}return[]}function Yue([e,t],n){return`${1-n} * ${e} + ${n} * ${t}`}const JS="_tuple_fields";class $Nt{constructor(...t){this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const MNt={defined:()=>!0,parse:(e,t,n)=>{const r=t.name,i=t.project??(t.project=new $Nt),s={},o={},a=new Set,l=(p,m)=>{const g=m==="visual"?p.channel:p.field;let b=si(`${r}_${g}`);for(let v=1;a.has(b);v++)b=si(`${r}_${g}_${v}`);return a.add(b),{[m]:b}},u=t.type,c=e.config.selection[u],d=n.value!==void 0?St(n.value):null;let{fields:f,encodings:h}=At(n.select)?n.select:{};if(!f&&!h&&d){for(const p of d)if(At(p))for(const m of st(p))KIt(m)?(h||(h=[])).push(m):u==="interval"?(dt(DRt),h=c.encodings):(f??(f=[])).push(m)}!f&&!h&&(h=c.encodings,"fields"in c&&(f=c.fields));for(const p of h??[]){const m=e.fieldDef(p);if(m){let g=m.field;if(m.aggregate){dt(ERt(p,m.aggregate));continue}else if(!g){dt(vue(p));continue}if(m.timeUnit&&!n1(m.timeUnit)){g=e.vgField(p);const b={timeUnit:m.timeUnit,as:g,field:m.field};o[Mn(b)]=b}if(!s[g]){const b=u==="interval"&&th(p)&&rd(e.getScaleComponent(p).get("type"))?"R":m.bin?"R-RE":"E",v={field:g,channel:p,type:b,index:i.items.length};v.signals={...l(v,"data"),...l(v,"visual")},i.items.push(s[g]=v),i.hasField[g]=s[g],i.hasSelectionId=i.hasSelectionId||g===od,OAe(p)?(v.geoChannel=p,v.channel=NAe(p),i.hasChannel[v.channel]=s[g]):i.hasChannel[p]=s[g]}}else dt(vue(p))}for(const p of f??[]){if(i.hasField[p])continue;const m={type:"E",field:p,index:i.items.length};m.signals={...l(m,"data")},i.items.push(m),i.hasField[p]=m,i.hasSelectionId=i.hasSelectionId||p===od}d&&(t.init=d.map(p=>i.items.map(m=>At(p)?p[m.geoChannel||m.channel]!==void 0?p[m.geoChannel||m.channel]:p[m.field]:p))),Ir(o)||(i.timeUnit=new vf(null,o))},signals:(e,t,n)=>{const r=t.name+JS;return n.filter(s=>s.name===r).length>0||t.project.hasSelectionId?n:n.concat({name:r,value:t.project.items.map(LIe)})}},OIe="_curr",Z3="anim_value",Ab="anim_clock",oz="eased_anim_clock",$Ie="min_extent",MIe="max_range_extent",cF="last_tick_at",dF="is_playing",LNt=1/60*1e3,FNt=(e,t)=>[{name:oz,update:Ab},{name:`${e}_domain`,init:`domain('${t}')`},{name:$Ie,init:`extent(${e}_domain)[0]`},{name:MIe,init:`extent(range('${t}'))[1]`},{name:Z3,update:`invert('${t}', ${oz})`}],jNt={defined:e=>e.type==="point",topLevelSignals:(e,t,n)=>(bf(t)&&(n=n.concat([{name:Ab,init:"0",on:[{events:{type:"timer",throttle:LNt},update:`${dF} ? (${Ab} + (now() - ${cF}) > ${MIe} ? 0 : ${Ab} + (now() - ${cF})) : ${Ab}`}]},{name:cF,init:"now()",on:[{events:[{signal:Ab},{signal:dF}],update:"now()"}]},{name:dF,init:"true"}])),n),signals:(e,t,n)=>{const r=t.name,i=r+JS,s=t.project,o="(item().isVoronoi ? datum.datum : datum)",a=_o(e.component.selection??{}).reduce((c,d)=>d.type==="interval"?c.concat(d.name+fw):c,[]).map(c=>`indexof(item().mark.name, '${c}') < 0`).join(" && "),l=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${a?` && ${a}`:""}`;let u=`unit: ${Ly(e)}, `;if(t.project.hasSelectionId)u+=`${od}: ${o}[${ft(od)}]`;else if(bf(t))u+=`fields: ${i}, values: [${Z3} ? ${Z3} : ${$Ie}]`;else{const c=s.items.map(d=>{const f=e.fieldDef(d.channel);return f!=null&&f.bin?`[${o}[${ft(e.vgField(d.channel,{}))}], ${o}[${ft(e.vgField(d.channel,{binSuffix:"end"}))}]]`:`${o}[${ft(d.field)}]`}).join(", ");u+=`fields: ${i}, values: [${c}]`}if(bf(t))return n.concat(FNt(t.name,e.scaleName(eg)),[{name:r+Ip,on:[{events:[{signal:oz},{signal:Z3}],update:`{${u}}`,force:!0}]}]);{const c=t.events;return n.concat([{name:r+Ip,on:c?[{events:c,update:`${l} ? {${u}} : null`,force:!0}]:[]}])}}};function LIe(e){const{signals:t,hasLegend:n,index:r,...i}=e;return i.field=Fu(i.field),i}function mv(e,t=!0,n=Co){if(Ge(e)){const r=e.map(i=>mv(i,t,n));return t?`[${r.join(", ")}]`:r}else if(t1(e))return n(t?dv(e):$3t(e));return t?n(Rr(e)):e}function BNt(e,t){for(const n of _o(e.component.selection??{})){const r=n.name;let i=`${r}${Ip}, ${n.resolve==="global"?"true":`{unit: ${Ly(e)}}`}`;for(const s of p6)s.defined(n)&&(s.signals&&(t=s.signals(e,n,t)),s.modifyExpr&&(i=s.modifyExpr(e,n,i)));t.push({name:r+hOt,on:[{events:{signal:n.name+Ip},update:`modify(${ft(n.name+gv)}, ${i})`}]})}return jX(t)}function zNt(e,t){if(e.component.selection&&st(e.component.selection).length){const n=ft(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:J0("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return jX(t)}function UNt(e,t){let n=!1;for(const r of _o(e.component.selection??{})){const i=r.name,s=ft(i+gv);if(t.filter(a=>a.name===i).length===0){const a=r.resolve==="global"?"union":r.resolve,l=r.type==="point"?", true, true)":")";t.push({name:r.name,update:`${eRe}(${s}, ${ft(a)}${l}`})}n=!0;for(const a of p6)a.defined(r)&&a.topLevelSignals&&(t=a.topLevelSignals(e,r,t))}return n&&t.filter(i=>i.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),jX(t)}function qNt(e,t){const n=[],r=[],i=Ly(e,{escape:!1});for(const s of _o(e.component.selection??{})){const o={name:s.name+gv};if(s.project.hasSelectionId&&(o.transform=[{type:"collect",sort:{field:od}}]),s.init){const l=s.project.items.map(LIe);o.values=s.project.hasSelectionId?s.init.map(u=>({unit:i,[od]:mv(u,!1)[0]})):s.init.map(u=>({unit:i,fields:l,values:mv(u,!1)}))}if([...n,...t].filter(l=>l.name===s.name+gv).length||n.push(o),bf(s)&&t.length){const l=e.lookupDataSource(e.getDataName(gi.Main)),u=t.find(d=>d.name===l),c=u.transform.find(d=>d.type==="filter"&&d.expr.includes("vlSelectionTest"));if(c){u.transform=u.transform.filter(f=>f!==c);const d={name:u.name+OIe,source:u.name,transform:[c]};r.push(d)}}}return n.concat(t,r)}function FIe(e,t){for(const n of _o(e.component.selection??{}))for(const r of p6)r.defined(n)&&r.marks&&(t=r.marks(e,n,t));return t}function HNt(e,t){for(const n of e.children)pi(n)&&(t=FIe(n,t));return t}function WNt(e,t,n,r){const i=dRe(e,t.param,t);return{signal:rd(n.get("type"))&&Ge(r)&&r[0]>r[1]?`isValid(${i}) && reverse(${i})`:i}}function jX(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}const up={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{const n=t.scales=[];for(const r of t.project.items){const i=r.channel;if(!th(i))continue;const s=e.getScaleComponent(i),o=s?s.get("type"):void 0;if(o=="sequential"&&dt(SRt),!s||!rd(o)){dt(CRt);continue}s.set("selectionExtent",{param:t.name,field:r.field},!0),n.push(r)}},topLevelSignals:(e,t,n)=>{const r=t.scales.filter(o=>n.filter(a=>a.name===o.signals.data).length===0);if(!e.parent||lz(e)||r.length===0)return n;const i=n.find(o=>o.name===t.name);let s=i.update;if(s.includes(eRe))i.update=`{${r.map(o=>`${ft(Fu(o.field))}: ${o.signals.data}`).join(", ")}}`;else{for(const o of r){const a=`${ft(Fu(o.field))}: ${o.signals.data}`;s.includes(a)||(s=`${s.substring(0,s.length-1)}, ${a}}`)}i.update=s}return n.concat(r.map(o=>({name:o.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!lz(e))for(const r of t.scales){const i=n.find(s=>s.name===r.signals.data);i.push="outer",delete i.value,delete i.update}return n}};function az(e,t){return`domain(${ft(e.scaleName(t))})`}function lz(e){return e.parent&&wE(e.parent)&&(!e.parent.parent||lz(e.parent.parent))}const fw="_brush",jIe="_scale_trigger",P_="geo_interval_init_tick",BIe="_init",VNt="_center",GNt={defined:e=>e.type==="interval",parse:(e,t,n)=>{var r;if(e.hasProjection){const i={...At(n.select)?n.select:{}};i.fields=[od],i.encodings||(i.encodings=n.value?st(n.value):[xd,wd]),n.select={type:"interval",...i}}if(t.translate&&!up.defined(t)){const i=`!event.item || event.item.mark.name !== ${ft(t.name+fw)}`;for(const s of t.events){if(!s.between){dt(`${s} is not an ordered event stream for interval selections.`);continue}const o=St((r=s.between[0]).filter??(r.filter=[]));o.includes(i)||o.push(i)}}},signals:(e,t,n)=>{const r=t.name,i=r+Ip,s=_o(t.project.hasChannel).filter(a=>a.channel===ai||a.channel===Xs),o=t.init?t.init[0]:null;if(n.push(...s.reduce((a,l)=>a.concat(YNt(e,t,l,o&&o[l.index])),[])),e.hasProjection){const a=ft(e.projectionName()),l=e.projectionName()+VNt,{x:u,y:c}=t.project.hasChannel,d=u&&u.signals.visual,f=c&&c.signals.visual,h=u?o&&o[u.index]:`${l}[0]`,p=c?o&&o[c.index]:`${l}[1]`,m=_=>e.getSizeSignalRef(_).signal,g=`[[${d?d+"[0]":"0"}, ${f?f+"[0]":"0"}],[${d?d+"[1]":m("width")}, ${f?f+"[1]":m("height")}]]`;o&&(n.unshift({name:r+BIe,init:`[scale(${a}, [${u?h[0]:h}, ${c?p[0]:p}]), scale(${a}, [${u?h[1]:h}, ${c?p[1]:p}])]`}),(!u||!c)&&(n.find(C=>C.name===l)||n.unshift({name:l,update:`invert(${a}, [${m("width")}/2, ${m("height")}/2])`})));const b=`intersect(${g}, {markname: ${ft(e.getName("marks"))}}, unit.mark)`,v=`{unit: ${Ly(e)}}`,x=`vlSelectionTuples(${b}, ${v})`,E=s.map(_=>_.signals.visual);return n.concat({name:i,on:[{events:[...E.length?[{signal:E.join(" || ")}]:[],...o?[{signal:P_}]:[]],update:x}]})}else{if(!up.defined(t)){const u=r+jIe,c=s.map(d=>{const f=d.channel,{data:h,visual:p}=d.signals,m=ft(e.scaleName(f)),g=e.getScaleComponent(f).get("type"),b=rd(g)?"+":"";return`(!isArray(${h}) || (${b}invert(${m}, ${p})[0] === ${b}${h}[0] && ${b}invert(${m}, ${p})[1] === ${b}${h}[1]))`});c.length&&n.push({name:u,value:{},on:[{events:s.map(d=>({scale:e.scaleName(d.channel)})),update:c.join(" && ")+` ? ${u} : {}`}]})}const a=s.map(u=>u.signals.data),l=`unit: ${Ly(e)}, fields: ${r+JS}, values`;return n.concat({name:i,...o?{init:`{${l}: ${mv(o)}}`}:{},...a.length?{on:[{events:[{signal:a.join(" || ")}],update:`${a.join(" && ")} ? {${l}: [${a}]} : null`}]}:{}})}},topLevelSignals:(e,t,n)=>(pi(e)&&e.hasProjection&&t.init&&(n.filter(i=>i.name===P_).length||n.unshift({name:P_,value:null,on:[{events:"timer{1}",update:`${P_} === null ? {} : ${P_}`}]})),n),marks:(e,t,n)=>{const r=t.name,{x:i,y:s}=t.project.hasChannel,o=i==null?void 0:i.signals.visual,a=s==null?void 0:s.signals.visual,l=`data(${ft(t.name+gv)})`;if(up.defined(t)||!i&&!s)return n;const u={x:i!==void 0?{signal:`${o}[0]`}:{value:0},y:s!==void 0?{signal:`${a}[0]`}:{value:0},x2:i!==void 0?{signal:`${o}[1]`}:{field:{group:"width"}},y2:s!==void 0?{signal:`${a}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const g of st(u))u[g]=[{test:`${l}.length && ${l}[0].unit === ${Ly(e)}`,...u[g]},{value:0}];const{fill:c,fillOpacity:d,cursor:f,...h}=t.mark,p=st(h).reduce((g,b)=>(g[b]=[{test:[i!==void 0&&`${o}[0] !== ${o}[1]`,s!==void 0&&`${a}[0] !== ${a}[1]`].filter(v=>v).join(" && "),value:h[b]},{value:null}],g),{}),m=f??(t.translate?"move":null);return[{name:`${r+fw}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:c},fillOpacity:{value:d}},update:u}},...n,{name:r+fw,type:"rect",clip:!0,encode:{enter:{...m?{cursor:{value:m}}:{},fill:{value:"transparent"}},update:{...u,...p}}}]}};function YNt(e,t,n,r){const i=!e.hasProjection,s=n.channel,o=n.signals.visual,a=ft(i?e.scaleName(s):e.projectionName()),l=f=>`scale(${a}, ${f})`,u=e.getSizeSignalRef(s===ai?"width":"height").signal,c=`${s}(unit)`,d=t.events.reduce((f,h)=>[...f,{events:h.between[0],update:`[${c}, ${c}]`},{events:h,update:`[${o}[0], clamp(${c}, 0, ${u})]`}],[]);if(i){const f=n.signals.data,h=up.defined(t),p=e.getScaleComponent(s),m=p?p.get("type"):void 0,g=r?{init:mv(r,!0,l)}:{value:[]};return d.push({events:{signal:t.name+jIe},update:rd(m)?`[${l(`${f}[0]`)}, ${l(`${f}[1]`)}]`:"[0, 0]"}),h?[{name:f,on:[]}]:[{name:o,...g,on:d},{name:f,...r?{init:mv(r)}:{},on:[{events:{signal:o},update:`${o}[0] === ${o}[1] ? null : invert(${a}, ${o})`}]}]}else{const f=s===ai?0:1,h=t.name+BIe,p=r?{init:`[${h}[0][${f}], ${h}[1][${f}]]`}:{value:[]};return[{name:o,...p,on:d}]}}function gE({model:e,channelDef:t,vgChannel:n,invalidValueRef:r,mainRefFn:i}){const s=YS(t)&&t.condition;let o=[];s&&(o=St(s).map(u=>{const c=i(u);if($Dt(u)){const{param:d,empty:f}=u;return{test:cRe(e,{param:d,empty:f}),...c}}else return{test:TN(e,u.test),...c}})),r!==void 0&&o.push(r);const a=i(t);return a!==void 0&&o.push(a),o.length>1||o.length===1&&o[0].test?{[n]:o}:o.length===1?{[n]:o[0]}:{}}function BX(e,t="text"){const n=e.encoding[t];return gE({model:e,channelDef:n,vgChannel:t,mainRefFn:r=>h6(r,e.config),invalidValueRef:void 0})}function h6(e,t,n="datum"){if(e){if(id(e))return Kr(e.value);if(fn(e)){const{format:r,formatType:i}=yN(e);return wX({fieldOrDatumDef:e,format:r,formatType:i,expr:n,config:t})}}}function zIe(e,t={}){const{encoding:n,markDef:r,config:i,stack:s}=e,o=n.tooltip;if(Ge(o))return{tooltip:Kue({tooltip:o},s,i,t)};{const a=t.reactiveGeom?"datum.datum":"datum";return gE({model:e,channelDef:o,vgChannel:"tooltip",mainRefFn:u=>{const c=h6(u,i,a);if(c)return c;if(u===null)return;let d=kr("tooltip",r,i);if(d===!0&&(d={content:"encoding"}),Tt(d))return{value:d};if(At(d))return Ut(d)?d:d.content==="encoding"?Kue(n,s,i,t):{signal:a}},invalidValueRef:void 0})}}function UIe(e,t,n,{reactiveGeom:r}={}){const i={...n,...n.tooltipFormat},s=new Set,o=r?"datum.datum":"datum",a=[];function l(c,d){const f=Jv(d),h=ka(c)?c:{...c,type:e[f].type},p=h.title||TX(h,i),m=St(p).join(", ").replaceAll(/"/g,'\\"');let g;if(Fi(d)){const b=d==="x"?"x2":"y2",v=sd(e[b]);if(uo(h.bin)&&v){const x=_t(h,{expr:o}),E=_t(v,{expr:o}),{format:_,formatType:C}=yN(h);g=VS(x,E,_,C,i),s.add(b)}}if((Fi(d)||d===Qu||d===bd)&&t&&t.fieldChannel===d&&t.offset==="normalize"){const{format:b,formatType:v}=yN(h);g=wX({fieldOrDatumDef:h,format:b,formatType:v,expr:o,config:i,normalizeStack:!0}).signal}g??(g=h6(h,i,o).signal),a.push({channel:d,key:m,value:g})}SX(e,(c,d)=>{mt(c)?l(c,d):r6(c)&&l(c.condition,d)});const u={};for(const{channel:c,key:d,value:f}of a)!s.has(c)&&!u[d]&&(u[d]=f);return u}function Kue(e,t,n,{reactiveGeom:r}={}){const i=UIe(e,t,n,{reactiveGeom:r}),s=I0(i).map(([o,a])=>`"${o}": ${a}`);return s.length>0?{signal:`{${s.join(", ")}}`}:void 0}function KNt(e){const{markDef:t,config:n}=e,r=kr("aria",t,n);return r===!1?{}:{...r?{aria:r}:{},...XNt(e),...QNt(e)}}function XNt(e){const{mark:t,markDef:n,config:r}=e;if(r.aria===!1)return{};const i=kr("ariaRoleDescription",n,r);return i!=null?{ariaRoleDescription:{value:i}}:It(vRt,t)?{}:{ariaRoleDescription:{value:t}}}function QNt(e){const{encoding:t,markDef:n,config:r,stack:i}=e,s=t.description;if(s)return gE({model:e,channelDef:s,vgChannel:"description",mainRefFn:l=>h6(l,e.config),invalidValueRef:void 0});const o=kr("description",n,r);if(o!=null)return{description:Kr(o)};if(r.aria===!1)return{};const a=UIe(t,i,r);if(!Ir(a))return{description:{signal:I0(a).map(([l,u],c)=>`"${c>0?"; ":""}${l}: " + (${u})`).join(" + ")}}}function po(e,t,n={}){const{markDef:r,encoding:i,config:s}=t,{vgChannel:o}=n;let{defaultRef:a,defaultValue:l}=n;const u=i[e];a===void 0&&(l??(l=kr(e,r,s,{vgChannel:o,ignoreVgConfig:!YS(u)})),l!==void 0&&(a=Kr(l)));const c={markDef:r,config:s,scaleName:t.scaleName(e),scale:t.getScaleComponent(e)},d=Ike({...c,scaleChannel:e,channelDef:u});return gE({model:t,channelDef:u,vgChannel:o??e,invalidValueRef:d,mainRefFn:h=>bX({...c,channel:e,channelDef:h,stack:null,defaultRef:a})})}function qIe(e,t={filled:void 0}){const{markDef:n,encoding:r,config:i}=e,{type:s}=n,o=t.filled??kr("filled",n,i),a=Dn(["bar","point","circle","square","geoshape"],s)?"transparent":void 0,l=kr(o===!0?"color":void 0,n,i,{vgChannel:"fill"})??i.mark[o===!0&&"color"]??a,u=kr(o===!1?"color":void 0,n,i,{vgChannel:"stroke"})??i.mark[o===!1&&"color"],c=o?"fill":"stroke",d={...l?{fill:Kr(l)}:{},...u?{stroke:Kr(u)}:{}};return n.color&&(o?n.fill:n.stroke)&&dt(eke("property",{fill:"fill"in n,stroke:"stroke"in n})),{...d,...po("color",e,{vgChannel:c,defaultValue:o?l:u}),...po("fill",e,{defaultValue:r.fill?l:void 0}),...po("stroke",e,{defaultValue:r.stroke?u:void 0})}}function JNt(e){const{encoding:t,mark:n}=e,r=t.order;return!og(n)&&id(r)?gE({model:e,channelDef:r,vgChannel:"zindex",mainRefFn:i=>Kr(i.value),invalidValueRef:void 0}):{}}function ax({channel:e,markDef:t,encoding:n={},model:r,bandPosition:i}){const s=`${e}Offset`,o=t[s],a=n[s];if((s==="xOffset"||s==="yOffset")&&a)return{offsetType:"encoding",offset:bX({channel:s,channelDef:a,markDef:t,config:r==null?void 0:r.config,scaleName:r.scaleName(s),scale:r.getScaleComponent(s),stack:null,defaultRef:Kr(o),bandPosition:i})};const l=t[s];return l?{offsetType:"visual",offset:l}:{}}function wa(e,t,{defaultPos:n,vgChannel:r}){const{encoding:i,markDef:s,config:o,stack:a}=t,l=i[e],u=i[eh(e)],c=t.scaleName(e),d=t.getScaleComponent(e),{offset:f,offsetType:h}=ax({channel:e,markDef:s,encoding:i,model:t,bandPosition:.5}),p=zX({model:t,defaultPos:n,channel:e,scaleName:c,scale:d}),m=!l&&Fi(e)&&(i.latitude||i.longitude)?{field:t.getName(e)}:ZNt({channel:e,channelDef:l,channel2Def:u,markDef:s,config:o,scaleName:c,scale:d,stack:a,offset:f,defaultRef:p,bandPosition:h==="encoding"?0:void 0});return m?{[r||e]:m}:void 0}function ZNt(e){const{channel:t,channelDef:n,scaleName:r,stack:i,offset:s,markDef:o}=e;if(fn(n)&&i&&t===i.fieldChannel){if(mt(n)){let a=n.bandPosition;if(a===void 0&&o.type==="text"&&(t==="radius"||t==="theta")&&(a=.5),a!==void 0)return pN({scaleName:r,fieldOrDatumDef:n,startSuffix:"start",bandPosition:a,offset:s})}return $y(n,r,{suffix:"end"},{offset:s})}return vX(e)}function zX({model:e,defaultPos:t,channel:n,scaleName:r,scale:i}){const{markDef:s,config:o}=e;return()=>{const a=Jv(n),l=R0(n),u=kr(n,s,o,{vgChannel:l});if(u!==void 0)return iT(n,u);switch(t){case"zeroOrMin":return Xue({scaleName:r,scale:i,mode:"zeroOrMin",mainChannel:a,config:o});case"zeroOrMax":return Xue({scaleName:r,scale:i,mode:{zeroOrMax:{widthSignal:e.width.signal,heightSignal:e.height.signal}},mainChannel:a,config:o});case"mid":return{...e[yl(n)],mult:.5}}}}function Xue({mainChannel:e,config:t,...n}){const r=kke(n),{mode:i}=n;if(r)return r;switch(e){case"radius":{if(i==="zeroOrMin")return{value:0};const{widthSignal:s,heightSignal:o}=i.zeroOrMax;return{signal:`min(${s},${o})/2`}}case"theta":return i==="zeroOrMin"?{value:0}:{signal:"2*PI"};case"x":return i==="zeroOrMin"?{value:0}:{field:{group:"width"}};case"y":return i==="zeroOrMin"?{field:{group:"height"}}:{value:0}}}const eOt={left:"x",center:"xc",right:"x2"},tOt={top:"y",middle:"yc",bottom:"y2"};function HIe(e,t,n,r="middle"){if(e==="radius"||e==="theta")return R0(e);const i=e==="x"?"align":"baseline",s=kr(i,t,n);let o;return Ut(s)?(dt(ZRt(i)),o=void 0):o=s,e==="x"?eOt[o||(r==="top"?"left":"center")]:tOt[o||r]}function xN(e,t,{defaultPos:n,defaultPos2:r,range:i}){return i?WIe(e,t,{defaultPos:n,defaultPos2:r}):wa(e,t,{defaultPos:n})}function WIe(e,t,{defaultPos:n,defaultPos2:r}){const{markDef:i,config:s}=t,o=eh(e),a=yl(e),l=nOt(t,r,o),u=l[a]?HIe(e,i,s):R0(e);return{...wa(e,t,{defaultPos:n,vgChannel:u}),...l}}function nOt(e,t,n){const{encoding:r,mark:i,markDef:s,stack:o,config:a}=e,l=Jv(n),u=yl(n),c=R0(n),d=r[l],f=e.scaleName(l),h=e.getScaleComponent(l),{offset:p}=n in r||n in s?ax({channel:n,markDef:s,encoding:r,model:e}):ax({channel:l,markDef:s,encoding:r,model:e});if(!d&&(n==="x2"||n==="y2")&&(r.latitude||r.longitude)){const g=yl(n),b=e.markDef[g];return b!=null?{[g]:{value:b}}:{[c]:{field:e.getName(n)}}}const m=rOt({channel:n,channelDef:d,channel2Def:r[n],markDef:s,config:a,scaleName:f,scale:h,stack:o,offset:p,defaultRef:void 0});return m!==void 0?{[c]:m}:fI(n,s)||fI(n,{[n]:K7(n,s,a.style),[u]:K7(u,s,a.style)})||fI(n,a[i])||fI(n,a.mark)||{[c]:zX({model:e,defaultPos:t,channel:n,scaleName:f,scale:h})()}}function rOt({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:l,defaultRef:u}){return fn(t)&&a&&e.charAt(0)===a.fieldChannel.charAt(0)?$y(t,s,{suffix:"start"},{offset:l}):vX({channel:e,channelDef:n,scaleName:s,scale:o,stack:a,markDef:r,config:i,offset:l,defaultRef:u})}function fI(e,t){const n=yl(e),r=R0(e);if(t[r]!==void 0)return{[r]:iT(e,t[r])};if(t[e]!==void 0)return{[r]:iT(e,t[e])};if(t[n]){const i=t[n];if(hv(i))dt(GRt(n));else return{[n]:iT(e,i)}}}function kp(e,t){const{config:n,encoding:r,markDef:i}=e,s=i.type,o=eh(t),a=yl(t),l=r[t],u=r[o],c=e.getScaleComponent(t),d=c?c.get("type"):void 0,f=i.orient,h=r[a]??r.size??kr("size",i,n,{vgChannel:a}),p=FAe(t),m=s==="bar"&&(t==="x"?f==="vertical":f==="horizontal")||s==="tick"&&(t==="y"?f==="vertical":f==="horizontal");return mt(l)&&(qr(l.bin)||uo(l.bin)||l.timeUnit&&!u)&&!(h&&!hv(h))&&!r[p]&&!Vs(d)?oOt({fieldDef:l,fieldDef2:u,channel:t,model:e}):(fn(l)&&Vs(d)||m)&&!u?sOt(l,t,e):WIe(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function iOt(e,t,n,r,i,s,o){if(hv(i))if(n){const l=n.get("type");if(l==="band"){let u=`bandwidth('${t}')`;i.band!==1&&(u=`${i.band} * ${u}`);const c=Nf("minBandSize",{type:o},r);return{signal:c?`max(${jc(c)}, ${u})`:u}}else i.band!==1&&(dt(r3t(l)),i=void 0)}else return{mult:i.band,field:{group:e}};else{if(Ut(i))return i;if(i)return{value:i}}if(n){const l=n.get("range");if(e1(l)&&Zn(l.step))return{value:l.step-2}}if(!s){const{bandPaddingInner:l,barBandPaddingInner:u,rectBandPaddingInner:c,tickBandPaddingInner:d}=r.scale,f=Li(l,o==="tick"?d:o==="bar"?u:c);if(Ut(f))return{signal:`(1 - (${f.signal})) * ${e}`};if(Zn(f))return{signal:`${1-f} * ${e}`}}return{value:nz(r.view,e)-2}}function sOt(e,t,n){var R,O;const{markDef:r,encoding:i,config:s,stack:o}=n,a=r.orient,l=n.scaleName(t),u=n.getScaleComponent(t),c=yl(t),d=eh(t),f=FAe(t),h=n.scaleName(f),p=n.getScaleComponent(WK(t)),m=r.type==="tick"||a==="horizontal"&&t==="y"||a==="vertical"&&t==="x";let g;(i.size||r.size)&&(m?g=po("size",n,{vgChannel:c,defaultRef:Kr(r.size)}):dt(a3t(r.type)));const b=!!g,v=Mke({channel:t,fieldDef:e,markDef:r,config:s,scaleType:(R=u||p)==null?void 0:R.get("type"),useVlSizeChannel:m});g=g||{[c]:iOt(c,h||l,p||u,s,v,!!e,r.type)};const x=((O=u||p)==null?void 0:O.get("type"))==="band"&&hv(v)&&!b?"top":"middle",E=HIe(t,r,s,x),_=E==="xc"||E==="yc",{offset:C,offsetType:S}=ax({channel:t,markDef:r,encoding:i,model:n,bandPosition:_?.5:0}),k=vX({channel:t,channelDef:e,markDef:r,config:s,scaleName:l,scale:u,stack:o,offset:C,defaultRef:zX({model:n,defaultPos:"mid",channel:t,scaleName:l,scale:u}),bandPosition:_?S==="encoding"?0:.5:Ut(v)?{signal:`(1-${v})/2`}:hv(v)?(1-v.band)/2:0});if(c)return{[E]:k,...g};{const N=R0(d),L=g[c],$=C?{...L,offset:C}:L;return{[E]:k,[N]:Ge(k)?[k[0],{...k[1],offset:$}]:{...k,offset:$}}}}function Que(e,t,n,r,i,s,o){if(PAe(e))return 0;const a=e==="x"||e==="y2",l=a?-t/2:t/2;if(Ut(n)||Ut(i)||Ut(r)||s){const u=jc(n),c=jc(i),d=jc(r),f=jc(s),p=s?`(${o} < ${f} ? ${a?"":"-"}0.5 * (${f} - (${o})) : ${l})`:l,m=d?`${d} + `:"",g=u?`(${u} ? -1 : 1) * `:"",b=c?`(${c} + ${p})`:p;return{signal:m+g+b}}else return i=i||0,r+(n?-i-l:+i+l)}function oOt({fieldDef:e,fieldDef2:t,channel:n,model:r}){var O;const{config:i,markDef:s,encoding:o}=r,a=r.getScaleComponent(n),l=r.scaleName(n),u=a?a.get("type"):void 0,c=a.get("reverse"),d=Mke({channel:n,fieldDef:e,markDef:s,config:i,scaleType:u}),f=(O=r.component.axes[n])==null?void 0:O[0],h=(f==null?void 0:f.get("translate"))??.5,p=Fi(n)?kr("binSpacing",s,i)??0:0,m=eh(n),g=R0(n),b=R0(m),v=Nf("minBandSize",s,i),{offset:x}=ax({channel:n,markDef:s,encoding:o,model:r,bandPosition:0}),{offset:E}=ax({channel:m,markDef:s,encoding:o,model:r,bandPosition:0}),_=IDt({fieldDef:e,scaleName:l}),C=Que(n,p,c,h,x,v,_),S=Que(m,p,c,h,E??x,v,_),k=Ut(d)?{signal:`(1-${d.signal})/2`}:hv(d)?(1-d.band)/2:.5,R=D0({fieldDef:e,fieldDef2:t,markDef:s,config:i});if(qr(e.bin)||e.timeUnit){const N=e.timeUnit&&R!==.5;return{[b]:Jue({fieldDef:e,scaleName:l,bandPosition:k,offset:S,useRectOffsetField:N}),[g]:Jue({fieldDef:e,scaleName:l,bandPosition:Ut(k)?{signal:`1-${k.signal}`}:1-k,offset:C,useRectOffsetField:N})}}else if(uo(e.bin)){const N=$y(e,l,{},{offset:S});if(mt(t))return{[b]:N,[g]:$y(t,l,{},{offset:C})};if(Zv(e.bin)&&e.bin.step)return{[b]:N,[g]:{signal:`scale("${l}", ${_t(e,{expr:"datum"})} + ${e.bin.step})`,offset:C}}}dt(rke(m))}function Jue({fieldDef:e,scaleName:t,bandPosition:n,offset:r,useRectOffsetField:i}){return pN({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:r,...i?{startSuffix:d6,endSuffix:f6}:{}})}const aOt=new Set(["aria","width","height"]);function Ju(e,t){const{fill:n=void 0,stroke:r=void 0}=t.color==="include"?qIe(e):{};return{...lOt(e.markDef,t),...Zue("fill",n),...Zue("stroke",r),...po("opacity",e),...po("fillOpacity",e),...po("strokeOpacity",e),...po("strokeWidth",e),...po("strokeDash",e),...JNt(e),...zIe(e),...BX(e,"href"),...KNt(e)}}function Zue(e,t){return t?{[e]:t}:{}}function lOt(e,t){return yRt.reduce((n,r)=>(!aOt.has(r)&&at(e,r)&&t[r]!=="ignore"&&(n[r]=Kr(e[r])),n),{})}function UX(e){const{config:t,markDef:n}=e,r=new Set;if(e.forEachFieldDef((i,s)=>{var u;let o;if(!th(s)||!(o=e.getScaleType(s)))return;const a=V4(i.aggregate),l=yX({scaleChannel:s,markDef:n,config:t,scaleType:o,isCountAggregate:a});if(SDt(l)){const c=e.vgField(s,{expr:"datum",binSuffix:(u=e.stack)!=null&&u.impute?"mid":void 0});c&&r.add(c)}}),r.size>0)return{defined:{signal:[...r].map(s=>X4(s,!0)).join(" && ")}}}function ece(e,t){if(t!==void 0)return{[e]:Kr(t)}}const fF="voronoi",VIe={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(fF)},marks:(e,t,n)=>{const{x:r,y:i}=t.project.hasChannel,s=e.mark;if(og(s))return dt(_Rt(s)),n;const o={name:e.getName(fF),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...zIe(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:r||!i?"datum.datum.x || 0":"0"},y:{expr:i||!r?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let a=0,l=!1;return n.forEach((u,c)=>{const d=u.name??"";d===e.component.mark[0].name?a=c:d.includes(fF)&&(l=!0)}),l||n.splice(a+1,0,o),n}},GIe={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!PX(e.bind),parse:(e,t,n)=>tRe(t,n),topLevelSignals:(e,t,n)=>{const r=t.name,i=t.project,s=t.bind,o=t.init&&t.init[0],a=VIe.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach((l,u)=>{const c=si(`${r}_${l.field}`);n.filter(f=>f.name===c).length||n.unshift({name:c,...o?{init:mv(o[u])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${a}[${ft(l.field)}] : null`}]:[],bind:s[l.field]??s[l.channel]??s})}),n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.find(u=>u.name===r+Ip),o=r+JS,a=i.items.map(u=>si(`${r}_${u.field}`)),l=a.map(u=>`${u} !== null`).join(" && ");return a.length&&(s.update=`${l} ? {fields: ${o}, values: [${a.join(", ")}]} : null`),delete s.value,delete s.on,n}},EN="_toggle",YIe={defined:e=>e.type==="point"&&!bf(e)&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+EN,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+Ip,r=t.name+EN;return`${r} ? null : ${n}, `+(t.resolve==="global"?`${r} ? null : true, `:`${r} ? null : {unit: ${Ly(e)}}, `)+`${r} ? ${n} : null`}},uOt={defined:e=>e.clear!==void 0&&e.clear!==!1&&!bf(e),parse:(e,t)=>{t.clear&&(t.clear=Tt(t.clear)?J0(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(GIe.defined(t))for(const r of t.project.items){const i=n.findIndex(s=>s.name===si(`${t.name}_${r.field}`));i!==-1&&n[i].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function r(i,s){i!==-1&&n[i].on&&n[i].on.push({events:t.clear,update:s})}if(t.type==="interval")for(const i of t.project.items){const s=n.findIndex(o=>o.name===i.signals.visual);if(r(s,"[0, 0]"),s===-1){const o=n.findIndex(a=>a.name===i.signals.data);r(o,"null")}}else{let i=n.findIndex(s=>s.name===t.name+Ip);r(i,"null"),YIe.defined(t)&&(i=n.findIndex(s=>s.name===t.name+EN),r(i,"false"))}return n}},KIe={defined:e=>{const t=e.resolve==="global"&&e.bind&&PX(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==od;return t&&!n&&dt(ARt),t&&n},parse:(e,t,n)=>{const r=ln(n);if(r.select=Tt(r.select)?{type:r.select,toggle:t.toggle}:{...r.select,toggle:t.toggle},tRe(t,r),At(n.select)&&(n.select.on||n.select.clear)){const o='event.item && indexof(event.item.mark.role, "legend") < 0';for(const a of t.events)a.filter=St(a.filter??[]),a.filter.includes(o)||a.filter.push(o)}const i=oF(t.bind)?t.bind.legend:"click",s=Tt(i)?J0(i,"view"):St(i);t.bind={legend:{merge:s}}},topLevelSignals:(e,t,n)=>{const r=t.name,i=oF(t.bind)&&t.bind.legend,s=o=>a=>{const l=ln(a);return l.markname=o,l};for(const o of t.project.items){if(!o.hasLegend)continue;const a=`${si(o.field)}_legend`,l=`${r}_${a}`;if(n.filter(c=>c.name===l).length===0){const c=i.merge.map(s(`${a}_symbols`)).concat(i.merge.map(s(`${a}_labels`))).concat(i.merge.map(s(`${a}_entries`)));n.unshift({name:l,...t.init?{}:{value:null},on:[{events:c,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:`!event.item || !datum ? null : ${l}`,force:!0}]})}}return n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.find(f=>f.name===r+Ip),o=r+JS,a=i.items.filter(f=>f.hasLegend).map(f=>si(`${r}_${si(f.field)}_legend`)),u=`${a.map(f=>`${f} !== null`).join(" && ")} ? {fields: ${o}, values: [${a.join(", ")}]} : null`;t.events&&a.length>0?s.on.push({events:a.map(f=>({signal:f})),update:u}):a.length>0&&(s.update=u,delete s.value,delete s.on);const c=n.find(f=>f.name===r+EN),d=oF(t.bind)&&t.bind.legend;return c&&(t.events?c.on.push({...c.on[0],events:d}):c.on[0].events=d),n}};function cOt(e,t,n){var i;const r=(i=e.fieldDef(t))==null?void 0:i.field;for(const s of _o(e.component.selection??{})){const o=s.project.hasField[r]??s.project.hasChannel[t];if(o&&KIe.defined(s)){const a=n.get("selections")??[];a.push(s.name),n.set("selections",a,!1),o.hasLegend=!0}}}const XIe="_translate_anchor",QIe="_translate_delta",dOt={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{const r=t.name,i=up.defined(t),s=r+XIe,{x:o,y:a}=t.project.hasChannel;let l=J0(t.translate,"scope");return i||(l=l.map(u=>(u.between[0].markname=r+fw,u))),n.push({name:s,value:{},on:[{events:l.map(u=>u.between[0]),update:"{x: x(unit), y: y(unit)"+(o!==void 0?`, extent_x: ${i?az(e,ai):`slice(${o.signals.visual})`}`:"")+(a!==void 0?`, extent_y: ${i?az(e,Xs):`slice(${a.signals.visual})`}`:"")+"}"}]},{name:r+QIe,value:{},on:[{events:l,update:`{x: ${s}.x - x(unit), y: ${s}.y - y(unit)}`}]}),o!==void 0&&tce(e,t,o,"width",n),a!==void 0&&tce(e,t,a,"height",n),n}};function tce(e,t,n,r,i){const s=t.name,o=s+XIe,a=s+QIe,l=n.channel,u=up.defined(t),c=i.find(_=>_.name===n.signals[u?"data":"visual"]),d=e.getSizeSignalRef(r).signal,f=e.getScaleComponent(l),h=f&&f.get("type"),p=f&&f.get("reverse"),m=u?l===ai?p?"":"-":p?"-":"":"",g=`${o}.extent_${l}`,b=`${m}${a}.${l} / ${u?`${d}`:`span(${g})`}`,v=!u||!f?"panLinear":h==="log"?"panLog":h==="symlog"?"panSymlog":h==="pow"?"panPow":"panLinear",x=u?h==="pow"?`, ${f.get("exponent")??1}`:h==="symlog"?`, ${f.get("constant")??1}`:"":"",E=`${v}(${g}, ${b}${x})`;c.on.push({events:{signal:a},update:u?E:`clampRange(${E}, 0, ${d})`})}const JIe="_zoom_anchor",ZIe="_zoom_delta",fOt={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{const r=t.name,i=up.defined(t),s=r+ZIe,{x:o,y:a}=t.project.hasChannel,l=ft(e.scaleName(ai)),u=ft(e.scaleName(Xs));let c=J0(t.zoom,"scope");return i||(c=c.map(d=>(d.markname=r+fw,d))),n.push({name:r+JIe,on:[{events:c,update:i?"{"+[l?`x: invert(${l}, x(unit))`:"",u?`y: invert(${u}, y(unit))`:""].filter(d=>d).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:s,on:[{events:c,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),o!==void 0&&nce(e,t,o,"width",n),a!==void 0&&nce(e,t,a,"height",n),n}};function nce(e,t,n,r,i){const s=t.name,o=n.channel,a=up.defined(t),l=i.find(v=>v.name===n.signals[a?"data":"visual"]),u=e.getSizeSignalRef(r).signal,c=e.getScaleComponent(o),d=c&&c.get("type"),f=a?az(e,o):l.name,h=s+ZIe,p=`${s}${JIe}.${o}`,m=!a||!c?"zoomLinear":d==="log"?"zoomLog":d==="symlog"?"zoomSymlog":d==="pow"?"zoomPow":"zoomLinear",g=a?d==="pow"?`, ${c.get("exponent")??1}`:d==="symlog"?`, ${c.get("constant")??1}`:"":"",b=`${m}(${f}, ${p}, ${h}${g})`;l.on.push({events:{signal:h},update:a?b:`clampRange(${b}, 0, ${u})`})}const gv="_store",Ip="_tuple",hOt="_modify",eRe="vlSelectionResolve",p6=[jNt,GNt,MNt,YIe,GIe,up,KIe,uOt,dOt,fOt,VIe];function pOt(e){let t=e.parent;for(;t&&!Wl(t);)t=t.parent;return t}function Ly(e,{escape:t}={escape:!0}){let n=t?ft(e.name):e.name;const r=pOt(e);if(r){const{facet:i}=r;for(const s of Su)i[s]&&(n+=` + '__facet_${s}_' + (facet[${ft(r.vgField(s))}])`)}return n}function qX(e){return _o(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1)}function tRe(e,t){(Tt(t.select)||!t.select.on)&&delete e.events,(Tt(t.select)||!t.select.clear)&&delete e.clear,(Tt(t.select)||!t.select.toggle)&&delete e.toggle}function bf(e){var t;return(t=e.events)==null?void 0:t.find(n=>"type"in n&&n.type==="timer")}const mOt="RawCode",gOt="Literal",yOt="Property",vOt="Identifier",bOt="ArrayExpression",wOt="BinaryExpression",xOt="CallExpression",EOt="ConditionalExpression",_Ot="LogicalExpression",TOt="MemberExpression",COt="ObjectExpression",SOt="UnaryExpression";function _d(e){this.type=e}_d.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=AOt(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};function AOt(e){switch(e.type){case bOt:return e.elements;case wOt:case _Ot:return[e.left,e.right];case xOt:return[e.callee].concat(e.arguments);case EOt:return[e.test,e.consequent,e.alternate];case TOt:return[e.object,e.property];case COt:return e.properties;case yOt:return[e.key,e.value];case SOt:return[e.argument];case vOt:case gOt:case mOt:default:return[]}}var rh,zt,Xe,Xo,_r,m6=1,ZS=2,yv=3,ag=4,g6=5,i1=6,Za=7,eA=8,kOt=9;rh={};rh[m6]="Boolean";rh[ZS]="<end>";rh[yv]="Identifier";rh[ag]="Keyword";rh[g6]="Null";rh[i1]="Numeric";rh[Za]="Punctuator";rh[eA]="String";rh[kOt]="RegularExpression";var IOt="ArrayExpression",ROt="BinaryExpression",DOt="CallExpression",POt="ConditionalExpression",nRe="Identifier",NOt="Literal",OOt="LogicalExpression",$Ot="MemberExpression",MOt="ObjectExpression",LOt="Property",FOt="UnaryExpression",Us="Unexpected token %0",jOt="Unexpected number",BOt="Unexpected string",zOt="Unexpected identifier",UOt="Unexpected reserved word",qOt="Unexpected end of input",uz="Invalid regular expression",hF="Invalid regular expression: missing /",rRe="Octal literals are not allowed in strict mode.",HOt="Duplicate data property in object literal not allowed in strict mode",bo="ILLEGAL",gC="Disabled.",WOt=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),VOt=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function y6(e,t){if(!e)throw new Error("ASSERT: "+t)}function Nh(e){return e>=48&&e<=57}function HX(e){return"0123456789abcdefABCDEF".includes(e)}function sT(e){return"01234567".includes(e)}function GOt(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(e)}function yC(e){return e===10||e===13||e===8232||e===8233}function tA(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&WOt.test(String.fromCharCode(e))}function _N(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&VOt.test(String.fromCharCode(e))}const YOt={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function iRe(){for(;Xe<Xo;){const e=zt.charCodeAt(Xe);if(GOt(e)||yC(e))++Xe;else break}}function cz(e){var t,n,r,i=0;for(n=e==="u"?4:2,t=0;t<n;++t)Xe<Xo&&HX(zt[Xe])?(r=zt[Xe++],i=i*16+"0123456789abcdef".indexOf(r.toLowerCase())):ar({},Us,bo);return String.fromCharCode(i)}function KOt(){var e,t,n,r;for(e=zt[Xe],t=0,e==="}"&&ar({},Us,bo);Xe<Xo&&(e=zt[Xe++],!!HX(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&ar({},Us,bo),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,r=(t-65536&1023)+56320,String.fromCharCode(n,r))}function sRe(){var e,t;for(e=zt.charCodeAt(Xe++),t=String.fromCharCode(e),e===92&&(zt.charCodeAt(Xe)!==117&&ar({},Us,bo),++Xe,e=cz("u"),(!e||e==="\\"||!tA(e.charCodeAt(0)))&&ar({},Us,bo),t=e);Xe<Xo&&(e=zt.charCodeAt(Xe),!!_N(e));)++Xe,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),zt.charCodeAt(Xe)!==117&&ar({},Us,bo),++Xe,e=cz("u"),(!e||e==="\\"||!_N(e.charCodeAt(0)))&&ar({},Us,bo),t+=e);return t}function XOt(){var e,t;for(e=Xe++;Xe<Xo;){if(t=zt.charCodeAt(Xe),t===92)return Xe=e,sRe();if(_N(t))++Xe;else break}return zt.slice(e,Xe)}function QOt(){var e,t,n;return e=Xe,t=zt.charCodeAt(Xe)===92?sRe():XOt(),t.length===1?n=yv:YOt.hasOwnProperty(t)?n=ag:t==="null"?n=g6:t==="true"||t==="false"?n=m6:n=yv,{type:n,value:t,start:e,end:Xe}}function pF(){var e=Xe,t=zt.charCodeAt(Xe),n,r=zt[Xe],i,s,o;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++Xe,{type:Za,value:String.fromCharCode(t),start:e,end:Xe};default:if(n=zt.charCodeAt(Xe+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return Xe+=2,{type:Za,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:Xe};case 33:case 61:return Xe+=2,zt.charCodeAt(Xe)===61&&++Xe,{type:Za,value:zt.slice(e,Xe),start:e,end:Xe}}}if(o=zt.substr(Xe,4),o===">>>=")return Xe+=4,{type:Za,value:o,start:e,end:Xe};if(s=o.substr(0,3),s===">>>"||s==="<<="||s===">>=")return Xe+=3,{type:Za,value:s,start:e,end:Xe};if(i=s.substr(0,2),r===i[1]&&"+-<>&|".includes(r)||i==="=>")return Xe+=2,{type:Za,value:i,start:e,end:Xe};if(i==="//"&&ar({},Us,bo),"<>=!+-*%&|^/".includes(r))return++Xe,{type:Za,value:r,start:e,end:Xe};ar({},Us,bo)}function JOt(e){let t="";for(;Xe<Xo&&HX(zt[Xe]);)t+=zt[Xe++];return t.length===0&&ar({},Us,bo),tA(zt.charCodeAt(Xe))&&ar({},Us,bo),{type:i1,value:parseInt("0x"+t,16),start:e,end:Xe}}function ZOt(e){let t="0"+zt[Xe++];for(;Xe<Xo&&sT(zt[Xe]);)t+=zt[Xe++];return(tA(zt.charCodeAt(Xe))||Nh(zt.charCodeAt(Xe)))&&ar({},Us,bo),{type:i1,value:parseInt(t,8),octal:!0,start:e,end:Xe}}function rce(){var e,t,n;if(n=zt[Xe],y6(Nh(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=Xe,e="",n!=="."){if(e=zt[Xe++],n=zt[Xe],e==="0"){if(n==="x"||n==="X")return++Xe,JOt(t);if(sT(n))return ZOt(t);n&&Nh(n.charCodeAt(0))&&ar({},Us,bo)}for(;Nh(zt.charCodeAt(Xe));)e+=zt[Xe++];n=zt[Xe]}if(n==="."){for(e+=zt[Xe++];Nh(zt.charCodeAt(Xe));)e+=zt[Xe++];n=zt[Xe]}if(n==="e"||n==="E")if(e+=zt[Xe++],n=zt[Xe],(n==="+"||n==="-")&&(e+=zt[Xe++]),Nh(zt.charCodeAt(Xe)))for(;Nh(zt.charCodeAt(Xe));)e+=zt[Xe++];else ar({},Us,bo);return tA(zt.charCodeAt(Xe))&&ar({},Us,bo),{type:i1,value:parseFloat(e),start:t,end:Xe}}function e$t(){var e="",t,n,r,i,s=!1;for(t=zt[Xe],y6(t==="'"||t==='"',"String literal must starts with a quote"),n=Xe,++Xe;Xe<Xo;)if(r=zt[Xe++],r===t){t="";break}else if(r==="\\")if(r=zt[Xe++],!r||!yC(r.charCodeAt(0)))switch(r){case"u":case"x":zt[Xe]==="{"?(++Xe,e+=KOt()):e+=cz(r);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:sT(r)?(i="01234567".indexOf(r),i!==0&&(s=!0),Xe<Xo&&sT(zt[Xe])&&(s=!0,i=i*8+"01234567".indexOf(zt[Xe++]),"0123".includes(r)&&Xe<Xo&&sT(zt[Xe])&&(i=i*8+"01234567".indexOf(zt[Xe++]))),e+=String.fromCharCode(i)):e+=r;break}else r==="\r"&&zt[Xe]===`
`&&++Xe;else{if(yC(r.charCodeAt(0)))break;e+=r}return t!==""&&ar({},Us,bo),{type:eA,value:e,octal:s,start:n,end:Xe}}function t$t(e,t){let n=e;t.includes("u")&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(r,i)=>{if(parseInt(i,16)<=1114111)return"x";ar({},uz)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{ar({},uz)}try{return new RegExp(e,t)}catch{return null}}function n$t(){var e,t,n,r,i;for(e=zt[Xe],y6(e==="/","Regular expression literal must start with a slash"),t=zt[Xe++],n=!1,r=!1;Xe<Xo;)if(e=zt[Xe++],t+=e,e==="\\")e=zt[Xe++],yC(e.charCodeAt(0))&&ar({},hF),t+=e;else if(yC(e.charCodeAt(0)))ar({},hF);else if(n)e==="]"&&(n=!1);else if(e==="/"){r=!0;break}else e==="["&&(n=!0);return r||ar({},hF),i=t.substr(1,t.length-2),{value:i,literal:t}}function r$t(){var e,t,n;for(t="",n="";Xe<Xo&&(e=zt[Xe],!!_N(e.charCodeAt(0)));)++Xe,e==="\\"&&Xe<Xo?ar({},Us,bo):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&ar({},uz,n),{value:n,literal:t}}function i$t(){var e,t,n,r;return _r=null,iRe(),e=Xe,t=n$t(),n=r$t(),r=t$t(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:Xe}}function s$t(e){return e.type===yv||e.type===ag||e.type===m6||e.type===g6}function oRe(){if(iRe(),Xe>=Xo)return{type:ZS,start:Xe,end:Xe};const e=zt.charCodeAt(Xe);return tA(e)?QOt():e===40||e===41||e===59?pF():e===39||e===34?e$t():e===46?Nh(zt.charCodeAt(Xe+1))?rce():pF():Nh(e)?rce():pF()}function rl(){const e=_r;return Xe=e.end,_r=oRe(),Xe=e.end,e}function aRe(){const e=Xe;_r=oRe(),Xe=e}function o$t(e){const t=new _d(IOt);return t.elements=e,t}function ice(e,t,n){const r=new _d(e==="||"||e==="&&"?OOt:ROt);return r.operator=e,r.left=t,r.right=n,r}function a$t(e,t){const n=new _d(DOt);return n.callee=e,n.arguments=t,n}function l$t(e,t,n){const r=new _d(POt);return r.test=e,r.consequent=t,r.alternate=n,r}function WX(e){const t=new _d(nRe);return t.name=e,t}function T2(e){const t=new _d(NOt);return t.value=e.value,t.raw=zt.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function sce(e,t,n){const r=new _d($Ot);return r.computed=e==="[",r.object=t,r.property=n,r.computed||(n.member=!0),r}function u$t(e){const t=new _d(MOt);return t.properties=e,t}function oce(e,t,n){const r=new _d(LOt);return r.key=t,r.value=n,r.kind=e,r}function c$t(e,t){const n=new _d(FOt);return n.operator=e,n.argument=t,n.prefix=!0,n}function ar(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,(s,o)=>(y6(o<r.length,"Message reference must be in range"),r[o]));throw n=new Error(i),n.index=Xe,n.description=i,n}function v6(e){e.type===ZS&&ar(e,qOt),e.type===i1&&ar(e,jOt),e.type===eA&&ar(e,BOt),e.type===yv&&ar(e,zOt),e.type===ag&&ar(e,UOt),ar(e,Us,e.value)}function Qo(e){const t=rl();(t.type!==Za||t.value!==e)&&v6(t)}function Xr(e){return _r.type===Za&&_r.value===e}function mF(e){return _r.type===ag&&_r.value===e}function d$t(){const e=[];for(Xe=_r.start,Qo("[");!Xr("]");)Xr(",")?(rl(),e.push(null)):(e.push(vv()),Xr("]")||Qo(","));return rl(),o$t(e)}function ace(){Xe=_r.start;const e=rl();return e.type===eA||e.type===i1?(e.octal&&ar(e,rRe),T2(e)):WX(e.value)}function f$t(){var e,t,n,r;if(Xe=_r.start,e=_r,e.type===yv)return n=ace(),Qo(":"),r=vv(),oce("init",n,r);if(e.type===ZS||e.type===Za)v6(e);else return t=ace(),Qo(":"),r=vv(),oce("init",t,r)}function h$t(){var e=[],t,n,r,i={},s=String;for(Xe=_r.start,Qo("{");!Xr("}");)t=f$t(),t.key.type===nRe?n=t.key.name:n=s(t.key.value),r="$"+n,Object.prototype.hasOwnProperty.call(i,r)?ar({},HOt):i[r]=!0,e.push(t),Xr("}")||Qo(",");return Qo("}"),u$t(e)}function p$t(){Qo("(");const e=VX();return Qo(")"),e}const m$t={if:1};function g$t(){var e,t,n;if(Xr("("))return p$t();if(Xr("["))return d$t();if(Xr("{"))return h$t();if(e=_r.type,Xe=_r.start,e===yv||m$t[_r.value])n=WX(rl().value);else if(e===eA||e===i1)_r.octal&&ar(_r,rRe),n=T2(rl());else{if(e===ag)throw new Error(gC);e===m6?(t=rl(),t.value=t.value==="true",n=T2(t)):e===g6?(t=rl(),t.value=null,n=T2(t)):Xr("/")||Xr("/=")?(n=T2(i$t()),aRe()):v6(rl())}return n}function y$t(){const e=[];if(Qo("("),!Xr(")"))for(;Xe<Xo&&(e.push(vv()),!Xr(")"));)Qo(",");return Qo(")"),e}function v$t(){Xe=_r.start;const e=rl();return s$t(e)||v6(e),WX(e.value)}function b$t(){return Qo("."),v$t()}function w$t(){Qo("[");const e=VX();return Qo("]"),e}function x$t(){var e,t,n;for(e=g$t();;)if(Xr("."))n=b$t(),e=sce(".",e,n);else if(Xr("("))t=y$t(),e=a$t(e,t);else if(Xr("["))n=w$t(),e=sce("[",e,n);else break;return e}function lce(){const e=x$t();if(_r.type===Za&&(Xr("++")||Xr("--")))throw new Error(gC);return e}function eD(){var e,t;if(_r.type!==Za&&_r.type!==ag)t=lce();else{if(Xr("++")||Xr("--"))throw new Error(gC);if(Xr("+")||Xr("-")||Xr("~")||Xr("!"))e=rl(),t=eD(),t=c$t(e.value,t);else{if(mF("delete")||mF("void")||mF("typeof"))throw new Error(gC);t=lce()}}return t}function uce(e){let t=0;if(e.type!==Za&&e.type!==ag)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function E$t(){var e,t,n,r,i,s,o,a,l,u;if(e=_r,l=eD(),r=_r,i=uce(r),i===0)return l;for(r.prec=i,rl(),t=[e,_r],o=eD(),s=[l,r,o];(i=uce(_r))>0;){for(;s.length>2&&i<=s[s.length-2].prec;)o=s.pop(),a=s.pop().value,l=s.pop(),t.pop(),n=ice(a,l,o),s.push(n);r=rl(),r.prec=i,s.push(r),t.push(_r),n=eD(),s.push(n)}for(u=s.length-1,n=s[u],t.pop();u>1;)t.pop(),n=ice(s[u-1].value,s[u-2],n),u-=2;return n}function vv(){var e,t,n;return e=E$t(),Xr("?")&&(rl(),t=vv(),Qo(":"),n=vv(),e=l$t(e,t,n)),e}function VX(){const e=vv();if(Xr(","))throw new Error(gC);return e}function _$t(e){zt=e,Xe=0,Xo=zt.length,_r=null,aRe();const t=VX();if(_r.type!==ZS)throw new Error("Unexpect token after expression.");return t}function dz(e){const t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...dz(e.object)),t.push(...dz(e.property))),t)}function lRe(e){return e.object.type==="MemberExpression"?lRe(e.object):e.object.name==="datum"}function uRe(e){const t=_$t(e),n=new Set;return t.visit(r=>{r.type==="MemberExpression"&&lRe(r)&&n.add(dz(r).slice(1).join("."))}),n}class yE extends Cr{clone(){return new yE(null,this.model,ln(this.filter))}constructor(t,n,r){super(t),this.model=n,this.filter=r,this.expr=TN(this.model,this.filter,this),this._dependentFields=uRe(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function T$t(e,t){const n={},r=e.config.selection;if(!t||!t.length)return n;let i=0;for(const s of t){const o=si(s.name),a=s.select,l=Tt(a)?a:a.type,u=At(a)?ln(a):{type:l},c=r[l];for(const h in c)h==="fields"||h==="encodings"||(h==="mark"&&(u.mark={...c.mark,...u.mark}),(u[h]===void 0||u[h]===!0)&&(u[h]=ln(c[h]??u[h])));const d=n[o]={...u,name:o,type:l,init:s.value,bind:s.bind,events:Tt(u.on)?J0(u.on,"scope"):St(ln(u.on))};if(bf(d)&&(i++,i>1)){delete n[o];continue}const f=ln(s);for(const h of p6)h.defined(d)&&h.parse&&h.parse(e,d,f)}return i>1&&dt(NRt),n}function cRe(e,t,n,r="datum"){const i=Tt(t)?t:t.param,s=si(i),o=ft(s+gv);let a;try{a=e.getSelectionComponent(s,i)}catch{return`!!${s}`}if(a.project.timeUnit){const f=n??e.component.data.raw,h=a.project.timeUnit.clone();f.parent?h.insertAsParentOf(f):f.parent=h}const l=a.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",u=a.resolve==="global"?")":`, ${ft(a.resolve)})`,c=`${l}${o}, ${r}${u}`,d=`length(data(${o}))`;return t.empty===!1?`${d} && ${c}`:`!${d} || ${c}`}function dRe(e,t,n){const r=si(t),i=n.encoding;let s=n.field,o;try{o=e.getSelectionComponent(r,t)}catch{return r}if(!i&&!s)s=o.project.items[0].field,o.project.items.length>1&&dt(ORt(s));else if(i&&!s){const a=o.project.items.filter(l=>l.channel===i);!a.length||a.length>1?(s=o.project.items[0].field,dt($Rt(a,i,n,s))):s=a[0].field}return`${o.name}[${ft(Fu(s))}]`}function C$t(e,t){for(const[n,r]of I0(e.component.selection??{})){const i=e.getName(`lookup_${n}`);e.component.data.outputNodes[i]=r.materialized=new ll(new yE(t,e,{param:n}),i,gi.Lookup,e.component.data.outputNodeRefCounts)}}function TN(e,t,n){return rT(t,r=>Tt(r)?r:H3t(r)?cRe(e,r,n):mke(r))}function S$t(e,t){if(e)return Ge(e)&&!Om(e)?e.map(n=>TX(n,t)).join(", "):e}function gF(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function C2(e,t,n,r={header:!1}){var d,f;const{disable:i,orient:s,scale:o,labelExpr:a,title:l,zindex:u,...c}=e.combine();if(!i){for(const h in c){const p=h,m=KDt[p],g=c[p];if(m&&m!==t&&m!=="both")delete c[p];else if(QS(g)){const{condition:b,...v}=g,x=St(b),E=Rue[p];if(E){const{vgProp:_,part:C}=E,S=[...x.map(k=>{const{test:R,...O}=k;return{test:TN(null,R),...O}}),v];gF(c,C,_,S),delete c[p]}else if(E===null){const _={signal:x.map(C=>{const{test:S,...k}=C;return`${TN(null,S)} ? ${pue(k)} : `}).join("")+pue(v)};c[p]=_}}else if(Ut(g)){const b=Rue[p];if(b){const{vgProp:v,part:x}=b;gF(c,x,v,g),delete c[p]}}Dn(["labelAlign","labelBaseline"],p)&&c[p]===null&&delete c[p]}if(t==="grid"){if(!c.grid)return;if(c.encode){const{grid:h}=c.encode;c.encode={...h?{grid:h}:{}},Ir(c.encode)&&delete c.encode}return{scale:o,orient:s,...c,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:Li(u,0)}}else{if(!r.header&&e.mainExtracted)return;if(a!==void 0){let p=a;(f=(d=c.encode)==null?void 0:d.labels)!=null&&f.update&&Ut(c.encode.labels.update.text)&&(p=lv(a,"datum.label",c.encode.labels.update.text.signal)),gF(c,"labels","text",{signal:p})}if(c.labelAlign===null&&delete c.labelAlign,c.encode){for(const p of Vke)e.hasAxisPart(p)||delete c.encode[p];Ir(c.encode)&&delete c.encode}const h=S$t(l,n);return{scale:o,orient:s,grid:!1,...h?{title:h}:{},...c,...n.aria===!1?{aria:!1}:{},zindex:Li(u,0)}}}}function fRe(e){const{axes:t}=e.component,n=[];for(const r of Gp)if(t[r]){for(const i of t[r])if(!i.get("disable")&&!i.get("gridScale")){const s=r==="x"?"height":"width",o=e.getSizeSignalRef(s).signal;s!==o&&n.push({name:s,update:o})}}return n}function A$t(e,t){const{x:n=[],y:r=[]}=e;return[...n.map(i=>C2(i,"grid",t)),...r.map(i=>C2(i,"grid",t)),...n.map(i=>C2(i,"main",t)),...r.map(i=>C2(i,"main",t))].filter(i=>i)}function cce(e,t,n,r){return Object.assign.apply(null,[{},...e.map(i=>{if(i==="axisOrient"){const s=n==="x"?"bottom":"left",o=t[n==="x"?"axisBottom":"axisLeft"]||{},a=t[n==="x"?"axisTop":"axisRight"]||{},l=new Set([...st(o),...st(a)]),u={};for(const c of l.values())u[c]={signal:`${r.signal} === "${s}" ? ${jc(o[c])} : ${jc(a[c])}`};return u}return t[i]})])}function k$t(e,t,n,r){const i=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:bke(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],s=e==="x"?"axisX":"axisY",o=Ut(n)?"axisOrient":`axis${BS(n)}`,a=[...i,...i.map(u=>s+u.substr(4))],l=["axis",o,s];return{vlOnlyAxisConfig:cce(a,r,e,n),vgAxisConfig:cce(l,r,e,n),axisConfigStyle:I$t([...l,...a],r)}}function I$t(e,t){var r;const n=[{}];for(const i of e){let s=(r=t[i])==null?void 0:r.style;if(s){s=St(s);for(const o of s)n.push(t.style[o])}}return Object.assign.apply(null,n)}function fz(e,t,n,r={}){var s;const i=GAe(e,n,t);if(i!==void 0)return{configFrom:"style",configValue:i};for(const o of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(((s=r[o])==null?void 0:s[e])!==void 0)return{configFrom:o,configValue:r[o][e]};return{}}const dce={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??R$t(n,e),gridScale:({model:e,channel:t})=>D$t(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelAlign||pRe(t,n,r),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelBaseline||hRe(t,n,r),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??N$t(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??O$t(t.type,n,mt(t)&&!!t.timeUnit,mt(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:r,scaleType:i})=>{const s=e==="x"?"width":e==="y"?"height":void 0,o=s?t.getSizeSignalRef(s):void 0;return n.tickCount??M$t({fieldOrDatumDef:r,scaleType:i,size:o,values:n.values})},tickMinStep:L$t,title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;const r=mRe(t,n);if(r!==void 0)return r;const i=t.typedFieldDef(n),s=n==="x"?"x2":"y2",o=t.fieldDef(s);return KAe(i?[kue(i)]:[],mt(o)?[kue(o)]:[])},values:({axis:e,fieldOrDatumDef:t})=>F$t(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??j$t(n,t)};function R$t(e,t){return!Vs(e)&&mt(t)&&!qr(t==null?void 0:t.bin)&&!uo(t==null?void 0:t.bin)}function D$t(e,t){const n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function P$t(e,t,n,r,i){const s=t==null?void 0:t.labelAngle;if(s!==void 0)return Ut(s)?s:hC(s);{const{configValue:o}=fz("labelAngle",r,t==null?void 0:t.style,i);return o!==void 0?hC(o):n===ai&&Dn([fX,dX],e.type)&&!(mt(e)&&e.timeUnit)?270:void 0}}function hz(e){return`(((${e.signal} % 360) + 360) % 360)`}function hRe(e,t,n,r){if(e!==void 0)if(n==="x"){if(Ut(e)){const i=hz(e),s=Ut(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${i} && ${i} < 135) || (225 < ${i} && ${i} < 315) ? "middle" :(${i} <= 45 || 315 <= ${i}) === ${s} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(Ut(t)){const i=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${i} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(Ut(e)){const i=hz(e),s=Ut(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${i} <= 45 || 315 <= ${i} || (135 <= ${i} && ${i} <= 225) ? ${r?'"middle"':"null"} : (45 <= ${i} && ${i} <= 135) === ${s} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return r?"middle":null;if(Ut(t)){const i=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${i} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function pRe(e,t,n){if(e===void 0)return;const r=n==="x",i=r?0:90,s=r?"bottom":"left";if(Ut(e)){const o=hz(e),a=Ut(t)?`(${t.signal} === "${s}")`:t===s;return{signal:`(${i?`(${o} + 90)`:o} % 180 === 0) ? ${r?null:'"center"'} :(${i} < ${o} && ${o} < ${180+i}) === ${a} ? "left" : "right"`}}if((e+i)%180===0)return r?null:"center";if(Ut(t)){const o=i<e&&e<180+i?"===":"!==";return{signal:`${`${t.signal} ${o} "${s}"`} ? "left" : "right"`}}return(i<e&&e<180+i)==(t===s)?"left":"right"}function N$t(e,t){if(t==="x"&&Dn(["quantitative","temporal"],e))return!0}function O$t(e,t,n,r){if(n&&!At(r)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function $$t(e){return e==="x"?"bottom":"left"}function M$t({fieldOrDatumDef:e,scaleType:t,size:n,values:r}){var i;if(!r&&!Vs(t)&&t!=="log"){if(mt(e)){if(qr(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&Dn(["month","hours","day","quarter"],(i=qs(e.timeUnit))==null?void 0:i.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function L$t({format:e,fieldOrDatumDef:t}){if(e==="d")return 1;if(mt(t)){const{timeUnit:n}=t;if(n){const r=fke(n);if(r)return{signal:r}}}}function mRe(e,t){const n=t==="x"?"x2":"y2",r=e.fieldDef(t),i=e.fieldDef(n),s=r?r.title:void 0,o=i?i.title:void 0;if(s&&o)return XAe(s,o);if(s)return s;if(o)return o;if(s!==void 0)return s;if(o!==void 0)return o}function F$t(e,t){const n=e.values;if(Ge(n))return Wke(t,n);if(Ut(n))return n}function j$t(e,t){return e==="rect"&&gN(t)?1:0}class lx extends Cr{clone(){return new lx(null,ln(this.transform))}constructor(t,n){super(t),this.transform=n,this._dependentFields=uRe(this.transform.calculate)}static parseAllForSortIndex(t,n){return n.forEachFieldDef((r,i)=>{if(r1(r)&&$ke(r.sort)){const{field:s,timeUnit:o}=r,a=r.sort,l=a.map((u,c)=>`${mke({field:s,timeUnit:o,equal:u})} ? ${c} : `).join("")+a.length;t=new lx(t,{calculate:l,as:ux(r,i,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${Mn(this.transform)}`}}function ux(e,t,n){return _t(e,{prefix:t,suffix:"sort_index",...n})}function b6(e,t){return Dn(["top","bottom"],t)?"column":Dn(["left","right"],t)||e==="row"?"row":"column"}function cx(e,t,n,r){const i=r==="row"?n.headerRow:r==="column"?n.headerColumn:n.headerFacet;return Li((t||{})[e],i[e],n.header[e])}function w6(e,t,n,r){const i={};for(const s of e){const o=cx(s,t||{},n,r);o!==void 0&&(i[s]=o)}return i}const GX=["row","column"],YX=["header","footer"];function B$t(e,t){const n=e.component.layoutHeaders[t].title,r=e.config?e.config:void 0,i=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:s,titleAngle:o,titleOrient:a}=w6(["titleAnchor","titleAngle","titleOrient"],i.header,r,t),l=b6(t,a),u=hC(o);return{name:`${t}-title`,type:"group",role:`${l}-title`,title:{text:n,...t==="row"?{orient:"left"}:{},style:"guide-title",...yRe(u,l),...gRe(l,u,s),...vRe(r,i,t,yPt,cIe)}}}function gRe(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const r=pRe(t,e==="row"?"left":"top",e==="row"?"y":"x");return r?{align:r}:{}}function yRe(e,t){const n=hRe(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function z$t(e,t){const n=e.component.layoutHeaders[t],r=[];for(const i of YX)if(n[i])for(const s of n[i]){const o=q$t(e,t,i,n,s);o!=null&&r.push(o)}return r}function U$t(e,t){const{sort:n}=e;return lp(n)?{field:_t(n,{expr:"datum"}),order:n.order??"ascending"}:Ge(n)?{field:ux(e,t,{expr:"datum"}),order:"ascending"}:{field:_t(e,{expr:"datum"}),order:n??"ascending"}}function pz(e,t,n){const{format:r,formatType:i,labelAngle:s,labelAnchor:o,labelOrient:a,labelExpr:l}=w6(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),u=wX({fieldOrDatumDef:e,format:r,formatType:i,expr:"parent",config:n}).signal,c=b6(t,a);return{text:{signal:l?lv(lv(l,"datum.label",u),"datum.value",_t(e,{expr:"parent"})):u},...t==="row"?{orient:"left"}:{},style:"guide-label",frame:"group",...yRe(s,c),...gRe(c,s,o),...vRe(n,e,t,vPt,dIe)}}function q$t(e,t,n,r,i){if(i){let s=null;const{facetFieldDef:o}=r,a=e.config?e.config:void 0;if(o&&i.labels){const{labelOrient:d}=w6(["labelOrient"],o.header,a,t);(t==="row"&&!Dn(["top","bottom"],d)||t==="column"&&!Dn(["left","right"],d))&&(s=pz(o,t,a))}const l=Wl(e)&&!GS(e.facet),u=i.axes,c=(u==null?void 0:u.length)>0;if(s||c){const d=t==="row"?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...r.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:U$t(o,t)}:{},...c&&l?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...s?{title:s}:{},...i.sizeSignal?{encode:{update:{[d]:i.sizeSignal}}}:{},...c?{axes:u}:{}}}}return null}const H$t={column:{start:0,end:1},row:{start:1,end:0}};function W$t(e,t){return H$t[t][e]}function V$t(e,t){const n={};for(const r of Su){const i=e[r];if(i!=null&&i.facetFieldDef){const{titleAnchor:s,titleOrient:o}=w6(["titleAnchor","titleOrient"],i.facetFieldDef.header,t,r),a=b6(r,o),l=W$t(s,a);l!==void 0&&(n[a]=l)}}return Ir(n)?void 0:n}function vRe(e,t,n,r,i){const s={};for(const o of r){if(!i[o])continue;const a=cx(o,t==null?void 0:t.header,e,n);a!==void 0&&(s[i[o]]=a)}return s}function KX(e){return[...hI(e,"width"),...hI(e,"height"),...hI(e,"childWidth"),...hI(e,"childHeight")]}function hI(e,t){const n=t==="width"?"x":"y",r=e.component.layoutSize.get(t);if(!r||r==="merged")return[];const i=e.getSizeSignalRef(t).signal;if(r==="step"){const s=e.getScaleComponent(n);if(s){const o=s.get("type"),a=s.get("range");if(Vs(o)&&e1(a)){const l=e.scaleName(n);return Wl(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[fce(l,a)]:[fce(l,a),{name:i,update:bRe(l,s,`domain('${l}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(r=="container"){const s=i.endsWith("width"),o=s?"containerSize()[0]":"containerSize()[1]",a=tz(e.config.view,s?"width":"height"),l=`isFinite(${o}) ? ${o} : ${a}`;return[{name:i,init:l,on:[{update:l,events:"window:resize"}]}]}else return[{name:i,value:r}]}function fce(e,t){const n=`${e}_step`;return Ut(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function bRe(e,t,n){const r=t.get("type"),i=t.get("padding"),s=Li(t.get("paddingOuter"),i);let o=t.get("paddingInner");return o=r==="band"?o!==void 0?o:i:1,`bandspace(${n}, ${jc(o)}, ${jc(s)}) * ${e}_step`}function wRe(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function xRe(e,t){return st(e).reduce((n,r)=>({...n,...gE({model:t,channelDef:e[r],vgChannel:r,mainRefFn:i=>Kr(i.value),invalidValueRef:void 0})}),{})}function ERe(e,t){if(Wl(t))return e==="theta"?"independent":"shared";if(wE(t))return"shared";if(nQ(t))return Fi(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function XX(e,t){const n=e.scale[t],r=Fi(t)?"axis":"legend";return n==="independent"?(e[r][t]==="shared"&&dt(f3t(t)),"independent"):e[r][t]||"shared"}const G$t={...xPt,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},_Re=st(G$t);class Y$t extends Kp{}const hce={symbols:K$t,gradient:X$t,labels:Q$t,entries:J$t};function K$t(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i,legendType:s}){if(s!=="symbol")return;const{markDef:o,encoding:a,config:l,mark:u}=n,c=o.filled&&u!=="trail";let d={...wRt({},n,gDt),...qIe(n,{filled:c})};const f=i.get("symbolOpacity")??l.legend.symbolOpacity,h=i.get("symbolFillColor")??l.legend.symbolFillColor,p=i.get("symbolStrokeColor")??l.legend.symbolStrokeColor,m=f===void 0?TRe(a.opacity)??o.opacity:void 0;if(d.fill){if(r==="fill"||c&&r===ml)delete d.fill;else if(at(d.fill,"field"))h?delete d.fill:(d.fill=Kr(l.legend.symbolBaseFillColor??"black"),d.fillOpacity=Kr(m??1));else if(Ge(d.fill)){const g=mz(a.fill??a.color)??o.fill??(c&&o.color);g&&(d.fill=Kr(g))}}if(d.stroke){if(r==="stroke"||!c&&r===ml)delete d.stroke;else if(at(d.stroke,"field")||p)delete d.stroke;else if(Ge(d.stroke)){const g=Li(mz(a.stroke||a.color),o.stroke,c?o.color:void 0);g&&(d.stroke={value:g})}}if(r!==Vp){const g=mt(t)&&SRe(n,i,t);g?d.opacity=[{test:g,...Kr(m??1)},Kr(l.legend.unselectedOpacity)]:m&&(d.opacity=Kr(m))}return d={...d,...e},Ir(d)?void 0:d}function X$t(e,{model:t,legendType:n,legendCmpt:r}){if(n!=="gradient")return;const{config:i,markDef:s,encoding:o}=t;let a={};const u=(r.get("gradientOpacity")??i.legend.gradientOpacity)===void 0?TRe(o.opacity)||s.opacity:void 0;return u&&(a.opacity=Kr(u)),a={...a,...e},Ir(a)?void 0:a}function Q$t(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i}){const s=n.legend(r)||{},o=n.config,a=mt(t)?SRe(n,i,t):void 0,l=a?[{test:a,value:1},{value:o.legend.unselectedOpacity}]:void 0,{format:u,formatType:c}=s;let d;pv(c)?d=Bc({fieldOrDatumDef:t,field:"datum.value",format:u,formatType:c,config:o}):u===void 0&&c===void 0&&o.customFormatTypes&&(t.type==="quantitative"&&o.numberFormatType?d=Bc({fieldOrDatumDef:t,field:"datum.value",format:o.numberFormat,formatType:o.numberFormatType,config:o}):t.type==="temporal"&&o.timeFormatType&&mt(t)&&t.timeUnit===void 0&&(d=Bc({fieldOrDatumDef:t,field:"datum.value",format:o.timeFormat,formatType:o.timeFormatType,config:o})));const f={...l?{opacity:l}:{},...d?{text:d}:{},...e};return Ir(f)?void 0:f}function J$t(e,{legendCmpt:t}){const n=t.get("selections");return n!=null&&n.length?{...e,fill:{value:"transparent"}}:e}function TRe(e){return CRe(e,(t,n)=>Math.max(t,n.value))}function mz(e){return CRe(e,(t,n)=>Li(t,n.value))}function CRe(e,t){if(LDt(e))return St(e.condition).reduce(t,e.value);if(id(e))return e.value}function SRe(e,t,n){const r=t.get("selections");if(!(r!=null&&r.length))return;const i=ft(n.field);return r.map(s=>`(!length(data(${ft(si(s)+gv)})) || (${s}[${i}] && indexof(${s}[${i}], datum.value) >= 0))`).join(" || ")}const pce={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:r,formatType:i}=t;return Pke(e,e.type,r,i,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:r}=e;return Nke(r,t,n)},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??s4t(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??o4t(n),symbolType:({legend:e,markDef:t,channel:n,encoding:r})=>e.symbolType??e4t(t.type,n,r.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>dw(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(cw(n)&&af(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>Z$t(t,e)};function Z$t(e,t){const n=e.values;if(Ge(n))return Wke(t,n);if(Ut(n))return n}function e4t(e,t,n,r){if(t!=="shape"){const i=mz(n)??r;if(i)return i}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function t4t(e){const{legend:t}=e;return Li(t.type,n4t(e))}function n4t({channel:e,timeUnit:t,scaleType:n}){if(cw(e)){if(Dn(["quarter","month","day"],t))return"symbol";if(af(n))return"gradient"}return"symbol"}function r4t({legendConfig:e,legendType:t,orient:n,legend:r}){return r.direction??e[t?"gradientDirection":"symbolDirection"]??i4t(n,t)}function i4t(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function s4t({legendConfig:e,model:t,direction:n,orient:r,scaleType:i}){const{gradientHorizontalMaxLength:s,gradientHorizontalMinLength:o,gradientVerticalMaxLength:a,gradientVerticalMinLength:l}=e;if(af(i))return n==="horizontal"?r==="top"||r==="bottom"?mce(t,"width",o,s):o:mce(t,"height",l,a)}function mce(e,t,n,r){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${r})`}}function o4t(e){if(Dn(["quantile","threshold","log","symlog"],e))return"greedy"}function ARe(e){const t=pi(e)?a4t(e):d4t(e);return e.component.legends=t,t}function a4t(e){const{encoding:t}=e,n={};for(const r of[ml,...hIe]){const i=fs(t[r]);!i||!e.getScaleComponent(r)||r===gl&&mt(i)&&i.type===mE||(n[r]=c4t(e,r))}return n}function l4t(e,t){const n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function u4t(e,t,n,r){switch(t){case"disable":return n!==void 0;case"values":return!!(n!=null&&n.values);case"title":if(t==="title"&&e===(r==null?void 0:r.title))return!0}return e===(n||{})[t]}function c4t(e,t){var E;let n=e.legend(t);const{markDef:r,encoding:i,config:s}=e,o=s.legend,a=new Y$t({},l4t(e,t));cOt(e,t,a);const l=n!==void 0?!n:o.disable;if(a.set("disable",l,n!==void 0),l)return a;n=n||{};const u=e.getScaleComponent(t).get("type"),c=fs(i[t]),d=mt(c)?(E=qs(c.timeUnit))==null?void 0:E.unit:void 0,f=n.orient||s.legend.orient||"right",h=t4t({legend:n,channel:t,timeUnit:d,scaleType:u}),p=r4t({legend:n,legendType:h,orient:f,legendConfig:o}),m={legend:n,channel:t,model:e,markDef:r,encoding:i,fieldOrDatumDef:c,legendConfig:o,config:s,scaleType:u,orient:f,legendType:h,direction:p};for(const _ of _Re){if(h==="gradient"&&_.startsWith("symbol")||h==="symbol"&&_.startsWith("gradient"))continue;const C=_ in pce?pce[_](m):n[_];if(C!==void 0){const S=u4t(C,_,n,e.fieldDef(t));(S||s.legend[_]===void 0)&&a.set(_,C,S)}}const g=(n==null?void 0:n.encoding)??{},b=a.get("selections"),v={},x={fieldOrDatumDef:c,model:e,channel:t,legendCmpt:a,legendType:h};for(const _ of["labels","legend","title","symbols","gradient","entries"]){const C=xRe(g[_]??{},e),S=_ in hce?hce[_](C,x):C;S!==void 0&&!Ir(S)&&(v[_]={...b!=null&&b.length&&mt(c)?{name:`${si(c.field)}_legend_${_}`}:{},...b!=null&&b.length?{interactive:!!b}:{},update:S})}return Ir(v)||a.set("encode",v,!!(n!=null&&n.encoding)),a}function d4t(e){const{legends:t,resolve:n}=e.component;for(const r of e.children){ARe(r);for(const i of st(r.component.legends))n.legend[i]=XX(e.component.resolve,i),n.legend[i]==="shared"&&(t[i]=kRe(t[i],r.component.legends[i]),t[i]||(n.legend[i]="independent",delete t[i]))}for(const r of st(t))for(const i of e.children)i.component.legends[r]&&n.legend[r]==="shared"&&delete i.component.legends[r];return t}function kRe(e,t){var s,o,a,l;if(!e)return t.clone();const n=e.getWithExplicit("orient"),r=t.getWithExplicit("orient");if(n.explicit&&r.explicit&&n.value!==r.value)return;let i=!1;for(const u of _Re){const c=P0(e.getWithExplicit(u),t.getWithExplicit(u),u,"legend",(d,f)=>{switch(u){case"symbolType":return f4t(d,f);case"title":return QAe(d,f);case"type":return i=!0,Dl("symbol")}return c6(d,f,u,"legend")});e.setWithExplicit(u,c)}return i&&((o=(s=e.implicit)==null?void 0:s.encode)!=null&&o.gradient&&dN(e.implicit,["encode","gradient"]),(l=(a=e.explicit)==null?void 0:a.encode)!=null&&l.gradient&&dN(e.explicit,["encode","gradient"])),e}function f4t(e,t){return t.value==="circle"?t:e}function h4t(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function IRe(e){const t=e.component.legends,n={};for(const i of st(t)){const s=e.getScaleComponent(i),o=Rr(s.get("domains"));if(n[o])for(const a of n[o])kRe(a,t[i])||n[o].push(t[i]);else n[o]=[t[i].clone()]}return _o(n).flat().map(i=>p4t(i,e.config)).filter(i=>i!==void 0)}function p4t(e,t){var o,a,l;const{disable:n,labelExpr:r,selections:i,...s}=e.combine();if(!n){if(t.aria===!1&&s.aria==null&&(s.aria=!1),(o=s.encode)!=null&&o.symbols){const u=s.encode.symbols.update;u.fill&&u.fill.value!=="transparent"&&!u.stroke&&!s.stroke&&(u.stroke={value:"transparent"});for(const c of hIe)s[c]&&delete u[c]}if(s.title||delete s.title,r!==void 0){let u=r;(l=(a=s.encode)==null?void 0:a.labels)!=null&&l.update&&Ut(s.encode.labels.update.text)&&(u=lv(r,"datum.label",s.encode.labels.update.text.signal)),h4t(s,"labels","text",{signal:u})}return s}}function m4t(e){return wE(e)||nQ(e)?g4t(e):RRe(e)}function g4t(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),RRe(e))}function RRe(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:r}=n;if(t.data){const i={signal:`[${t.size.map(o=>o.signal).join(", ")}]`},s=t.data.reduce((o,a)=>{const l=Ut(a)?a.signal:`data('${e.lookupDataSource(a)}')`;return Dn(o,l)||o.push(l),o},[]);if(s.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:r,size:i,fit:{signal:s.length>1?`[${s.join(", ")}]`:s[0]},...n}]}else return[{name:r,translate:{signal:"[width / 2, height / 2]"},...n}]}const y4t=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class DRe extends Kp{constructor(t,n,r,i){super({...n},{name:t}),this.specifiedProjection=n,this.size=r,this.data=i,this.merged=!1}get isFit(){return!!this.data}}function PRe(e){e.component.projection=pi(e)?v4t(e):x4t(e)}function v4t(e){if(e.hasProjection){const t=co(e.specifiedProjection),n=!(t&&(t.scale!=null||t.translate!=null)),r=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,i=n?b4t(e):void 0,s=new DRe(e.projectionName(!0),{...co(e.config.projection),...t},r,i);return s.get("type")||s.set("type","equalEarth",!1),s}}function b4t(e){const t=[],{encoding:n}=e;for(const r of[[xd,wd],[ju,Ed]])(fs(n[r[0]])||fs(n[r[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(gl)&&e.typedFieldDef(gl).type===mE&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(gi.Main)),t}function w4t(e,t){const n=FK(y4t,i=>!!(!It(e.explicit,i)&&!It(t.explicit,i)||It(e.explicit,i)&&It(t.explicit,i)&&Bl(e.get(i),t.get(i))));if(Bl(e.size,t.size)){if(n)return e;if(Bl(e.explicit,{}))return t;if(Bl(t.explicit,{}))return e}return null}function x4t(e){if(e.children.length===0)return;let t;for(const r of e.children)PRe(r);const n=FK(e.children,r=>{const i=r.component.projection;if(i)if(t){const s=w4t(t,i);return s&&(t=s),!!s}else return t=i,!0;else return!0});if(t&&n){const r=e.projectionName(!0),i=new DRe(r,t.specifiedProjection,t.size,ln(t.data));for(const s of e.children){const o=s.component.projection;o&&(o.isFit&&i.data.push(...s.component.projection.data),s.renameProjection(o.get("name"),r),o.merged=!0)}return i}}function E4t(e,t,n,r){if(XS(t,n)){const i=pi(e)?e.axis(n)??e.legend(n)??{}:{},s=_t(t,{expr:"datum"}),o=_t(t,{expr:"datum",binSuffix:"end"});return{formulaAs:_t(t,{binSuffix:"range",forAs:!0}),formula:VS(s,o,i.format,i.formatType,r)}}return{}}function NRe(e,t){return`${qAe(e)}_${t}`}function _4t(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function QX(e,t,n){const r=i6(n,void 0)??{},i=NRe(r,t);return e.getName(`${i}_bins`)}function T4t(e){return"as"in e}function gce(e,t,n){let r,i;T4t(e)?r=Tt(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:r=[_t(e,{forAs:!0}),_t(e,{binSuffix:"end",forAs:!0})];const s={...i6(t,void 0)},o=NRe(s,e.field),{signal:a,extentSignal:l}=_4t(n,o);if(G4(s.extent)){const c=s.extent;i=dRe(n,c.param,c),delete s.extent}const u={bin:s,field:e.field,as:[r],...a?{signal:a}:{},...l?{extentSignal:l}:{},...i?{span:i}:{}};return{key:o,binComponent:u}}class wf extends Cr{clone(){return new wf(null,ln(this.bins))}constructor(t,n){super(t),this.bins=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{if(ka(s)&&qr(s.bin)){const{key:a,binComponent:l}=gce(s,s.bin,n);i[a]={...l,...i[a],...E4t(n,s,o,n.config)}}return i},{});return Ir(r)?null:new wf(t,r)}static makeFromTransform(t,n,r){const{key:i,binComponent:s}=gce(n,n.bin,r);return new wf(t,{[i]:s})}merge(t,n){for(const r of st(t.bins))r in this.bins?(n(t.bins[r].signal,this.bins[r].signal),this.bins[r].as=of([...this.bins[r].as,...t.bins[r].as],Mn)):this.bins[r]=t.bins[r];for(const r of t.children)t.removeChild(r),r.parent=this;t.remove()}producedFields(){return new Set(_o(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(_o(this.bins).map(t=>t.field))}hash(){return`Bin ${Mn(this.bins)}`}assemble(){return _o(this.bins).flatMap(t=>{const n=[],[r,...i]=t.as,{extent:s,...o}=t.bin,a={type:"bin",field:Fu(t.field),as:r,signal:t.signal,...G4(s)?{extent:null}:{extent:s},...t.span?{span:{signal:`span(${t.span})`}}:{},...o};!s&&t.extentSignal&&(n.push({type:"extent",field:Fu(t.field),signal:t.extentSignal}),a.extent={signal:t.extentSignal}),n.push(a);for(const l of i)for(let u=0;u<2;u++)n.push({type:"formula",expr:_t({field:r[u]},{expr:"datum"}),as:l[u]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}}function C4t(e,t,n,r){var s;const i=pi(r)?r.encoding[eh(t)]:void 0;if(ka(n)&&pi(r)&&Lke(n,i,r.markDef,r.config)){e.add(_t(n,{})),e.add(_t(n,{suffix:"end"}));const{mark:o,markDef:a,config:l}=r,u=D0({fieldDef:n,markDef:a,config:l});pC(o)&&u!==.5&&Fi(t)&&(e.add(_t(n,{suffix:d6})),e.add(_t(n,{suffix:f6}))),n.bin&&XS(n,t)&&e.add(_t(n,{binSuffix:"range"}))}else if(OAe(t)){const o=NAe(t);e.add(r.getName(o))}else e.add(_t(n));return r1(n)&&rDt((s=n.scale)==null?void 0:s.range)&&e.add(n.scale.range.field),e}function S4t(e,t){for(const n of st(t)){const r=t[n];for(const i of st(r))n in e?e[n][i]=new Set([...e[n][i]??[],...r[i]]):e[n]={[i]:r[i]}}}class Kc extends Cr{clone(){return new Kc(null,new Set(this.dimensions),ln(this.measures))}constructor(t,n,r){super(t),this.dimensions=n,this.measures=r}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let r=!1;n.forEachFieldDef(o=>{o.aggregate&&(r=!0)});const i={},s=new Set;return!r||(n.forEachFieldDef((o,a)=>{const{aggregate:l,field:u}=o;if(l)if(l==="count")i["*"]??(i["*"]={}),i["*"].count=new Set([_t(o,{forAs:!0})]);else{if(Ap(l)||sg(l)){const c=Ap(l)?"argmin":"argmax",d=l[c];i[d]??(i[d]={}),i[d][c]=new Set([_t({op:c,field:d},{forAs:!0})])}else i[u]??(i[u]={}),i[u][l]=new Set([_t(o,{forAs:!0})]);th(a)&&n.scaleDomain(a)==="unaggregated"&&(i[u]??(i[u]={}),i[u].min=new Set([_t({field:u,aggregate:"min"},{forAs:!0})]),i[u].max=new Set([_t({field:u,aggregate:"max"},{forAs:!0})]))}else C4t(s,a,o,n)}),s.size+st(i).length===0)?null:new Kc(t,s,i)}static makeFromTransform(t,n){var r;const i=new Set,s={};for(const o of n.aggregate){const{op:a,field:l,as:u}=o;a&&(a==="count"?(s["*"]??(s["*"]={}),s["*"].count=new Set([u||_t(o,{forAs:!0})])):(s[l]??(s[l]={}),(r=s[l])[a]??(r[a]=new Set),s[l][a].add(u||_t(o,{forAs:!0}))))}for(const o of n.groupby??[])i.add(o);return i.size+st(s).length===0?null:new Kc(t,i,s)}merge(t){return CAe(this.dimensions,t.dimensions)?(S4t(this.measures,t.measures),!0):(k3t("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...st(this.measures)])}producedFields(){const t=new Set;for(const n of st(this.measures))for(const r of st(this.measures[n])){const i=this.measures[n][r];i.size===0?t.add(`${r}_${n}`):i.forEach(t.add,t)}return t}hash(){return`Aggregate ${Mn({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const t=[],n=[],r=[];for(const s of st(this.measures))for(const o of st(this.measures[s]))for(const a of this.measures[s][o])r.push(a),t.push(o),n.push(s==="*"?null:Fu(s));return{type:"aggregate",groupby:[...this.dimensions].map(Fu),ops:t,fields:n,as:r}}}class vE extends Cr{constructor(t,n,r,i){super(t),this.model=n,this.name=r,this.data=i;for(const s of Su){const o=n.facet[s];if(o){const{bin:a,sort:l}=o;this[s]={name:n.getName(`${s}_domain`),fields:[_t(o),...qr(a)?[_t(o,{binSuffix:"end"})]:[]],...lp(l)?{sortField:l}:Ge(l)?{sortIndexField:ux(o,s)}:{}}}}this.childModel=n.child}hash(){let t="Facet";for(const n of Su)this[n]&&(t+=` ${n.charAt(0)}:${Mn(this[n])}`);return t}get fields(){var n;const t=[];for(const r of Su)(n=this[r])!=null&&n.fields&&t.push(...this[r].fields);return t}dependentFields(){const t=new Set(this.fields);for(const n of Su)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const n of Gp){const r=this.childModel.component.scales[n];if(r&&!r.merged){const i=r.get("type"),s=r.get("range");if(Vs(i)&&e1(s)){const o=x6(this.childModel,n),a=tQ(o);a?t[n]=a:dt(JK(n))}}}return t}assembleRowColumnHeaderData(t,n,r){const i={row:"y",column:"x",facet:void 0}[t],s=[],o=[],a=[];i&&r&&r[i]&&(n?(s.push(`distinct_${r[i]}`),o.push("max")):(s.push(r[i]),o.push("distinct")),a.push(`distinct_${r[i]}`));const{sortField:l,sortIndexField:u}=this[t];if(l){const{op:c=t6,field:d}=l;s.push(d),o.push(c),a.push(_t(l,{forAs:!0}))}else u&&(s.push(u),o.push("max"),a.push(u));return{name:this[t].name,source:n??this.data,transform:[{type:"aggregate",groupby:this[t].fields,...s.length?{fields:s,ops:o,as:a}:{}}]}}assembleFacetHeaderData(t){var l;const{columns:n}=this.model.layout,{layoutHeaders:r}=this.model.component,i=[],s={};for(const u of GX){for(const c of YX){const d=(r[u]&&r[u][c])??[];for(const f of d)if(((l=f.axes)==null?void 0:l.length)>0){s[u]=!0;break}}if(s[u]){const c=`length(data("${this.facet.name}"))`,d=u==="row"?n?{signal:`ceil(${c} / ${n})`}:1:n?{signal:`min(${c}, ${n})`}:{signal:c};i.push({name:`${this.facet.name}_${u}`,transform:[{type:"sequence",start:0,stop:d}]})}}const{row:o,column:a}=s;return(o||a)&&i.unshift(this.assembleRowColumnHeaderData("facet",null,t)),i}assemble(){const t=[];let n=null;const r=this.getChildIndependentFieldsWithStep(),{column:i,row:s,facet:o}=this;if(i&&s&&(r.x||r.y)){n=`cross_${this.column.name}_${this.row.name}`;const a=[].concat(r.x??[],r.y??[]),l=a.map(()=>"distinct");t.push({name:n,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:a,ops:l}]})}for(const a of[ap,op])this[a]&&t.push(this.assembleRowColumnHeaderData(a,n,r));if(o){const a=this.assembleFacetHeaderData(r);a&&t.push(...a)}return t}}function yce(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function A4t(e,t){const n=zK(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){const r=yce(t.slice(5,t.length));return`timeParse(${n},'${r}')`}else if(t.startsWith("utc:")){const r=yce(t.slice(4,t.length));return`utcParse(${n},'${r}')`}else return dt(LRt(t)),null}function k4t(e){const t={};return J3(e.filter,n=>{if(pke(n)){let r=null;iX(n)?r=Ll(n.equal):oX(n)?r=Ll(n.lte):sX(n)?r=Ll(n.lt):aX(n)?r=Ll(n.gt):lX(n)?r=Ll(n.gte):uX(n)?r=n.range[0]:cX(n)&&(r=(n.oneOf??n.in)[0]),r&&(t1(r)?t[n.field]="date":Zn(r)?t[n.field]="number":Tt(r)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function I4t(e){const t={};function n(r){sx(r)?t[r.field]="date":r.type==="quantitative"&&dRt(r.aggregate)?t[r.field]="number":Zw(r.field)>1?r.field in t||(t[r.field]="flatten"):r1(r)&&lp(r.sort)&&Zw(r.sort.field)>1&&(r.sort.field in t||(t[r.sort.field]="flatten"))}if((pi(e)||Wl(e))&&e.forEachFieldDef((r,i)=>{if(ka(r))n(r);else{const s=Jv(i),o=e.fieldDef(s);n({...r,type:o.type})}}),pi(e)){const{mark:r,markDef:i,encoding:s}=e;if(og(r)&&!e.encoding.order){const o=i.orient==="horizontal"?"y":"x",a=s[o];mt(a)&&a.type==="quantitative"&&!(a.field in t)&&(t[a.field]="number")}}return t}function R4t(e){const t={};if(pi(e)&&e.component.selection)for(const n of st(e.component.selection)){const r=e.component.selection[n];for(const i of r.project.items)!i.channel&&Zw(i.field)>1&&(t[i.field]="flatten")}return t}class Wo extends Cr{clone(){return new Wo(null,ln(this._parse))}constructor(t,n){super(t),this._parse=n}hash(){return`Parse ${Mn(this._parse)}`}static makeExplicit(t,n,r){var o;let i={};const s=n.data;return!c0(s)&&((o=s==null?void 0:s.format)!=null&&o.parse)&&(i=s.format.parse),this.makeWithAncestors(t,i,{},r)}static makeWithAncestors(t,n,r,i){for(const a of st(r)){const l=i.getWithExplicit(a);l.value!==void 0&&(l.explicit||l.value===r[a]||l.value==="derived"||r[a]==="flatten"?delete r[a]:dt(wue(a,r[a],l.value)))}for(const a of st(n)){const l=i.get(a);l!==void 0&&(l===n[a]?delete n[a]:dt(wue(a,n[a],l)))}const s=new Kp(n,r);i.copyAll(s);const o={};for(const a of st(s.combine())){const l=s.get(a);l!==null&&(o[a]=l)}return st(o).length===0||i.parseNothing?null:new Wo(t,o)}get parse(){return this._parse}merge(t){this._parse={...this._parse,...t.parse},t.remove()}assembleFormatParse(){const t={};for(const n of st(this._parse)){const r=this._parse[n];Zw(n)===1&&(t[n]=r)}return t}producedFields(){return new Set(st(this._parse))}dependentFields(){return new Set(st(this._parse))}assembleTransforms(t=!1){return st(this._parse).filter(n=>t?Zw(n)>1:!0).map(n=>{const r=A4t(n,this._parse[n]);return r?{type:"formula",expr:r,as:hE(n)}:null}).filter(n=>n!==null)}}class N0 extends Cr{clone(){return new N0(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([od])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:od}}}class nA extends Cr{clone(){return new nA(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${Mn(this.params)}`}assemble(){return{type:"graticule",...this.params===!0?{}:this.params}}}class rA extends Cr{clone(){return new rA(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${Mn(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class bv extends Cr{constructor(t){super(null),t??(t={name:"source"});let n;if(c0(t)||(n=t.format?{...al(t.format,["parse"])}:{}),mC(t))this._data={values:t.values};else if(ox(t)){if(this._data={url:t.url},!n.type){let r=/(?:\.([^.]+))?$/.exec(t.url)[1];Dn(["json","csv","tsv","dsv","topojson"],r)||(r="json"),n.type=r}}else DIe(t)?this._data={values:[{type:"Sphere"}]}:(IIe(t)||c0(t))&&(this._data={});this._generator=c0(t),t.name&&(this._name=t.name),n&&!Ir(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}var vce=function(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},D4t=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},S2;function JX(e){return e instanceof bv||e instanceof nA||e instanceof rA}class ZX{constructor(){S2.set(this,void 0),vce(this,S2,!1,"f")}setModified(){vce(this,S2,!0,"f")}get modifiedFlag(){return D4t(this,S2,"f")}}S2=new WeakMap;class s1 extends ZX{getNodeDepths(t,n,r){r.set(t,n);for(const i of t.children)this.getNodeDepths(i,n+1,r);return r}optimize(t){const r=[...this.getNodeDepths(t,0,new Map).entries()].sort((i,s)=>s[1]-i[1]);for(const i of r)this.run(i[0]);return this.modifiedFlag}}class eQ extends ZX{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag}}class P4t extends eQ{mergeNodes(t,n){const r=n.shift();for(const i of n)t.removeChild(i),i.parent=r,i.remove()}run(t){const n=t.children.map(i=>i.hash()),r={};for(let i=0;i<n.length;i++)r[n[i]]===void 0?r[n[i]]=[t.children[i]]:r[n[i]].push(t.children[i]);for(const i of st(r))r[i].length>1&&(this.setModified(),this.mergeNodes(t,r[i]))}}class N4t extends eQ{constructor(t){super(),this.requiresSelectionId=t&&qX(t)}run(t){t instanceof N0&&(this.requiresSelectionId&&(JX(t.parent)||t.parent instanceof Kc||t.parent instanceof Wo)||(this.setModified(),t.remove()))}}class O4t extends ZX{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let r=new Set;t instanceof vf&&(r=t.producedFields(),jK(r,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(const i of t.children)this.run(i,new Set([...n,...r]))}}class $4t extends eQ{constructor(){super()}run(t){t instanceof ll&&!t.isRequired()&&(this.setModified(),t.remove())}}class M4t extends s1{run(t){if(!JX(t)&&!(t.numChildren()>1)){for(const n of t.children)if(n instanceof Wo)if(t instanceof Wo)this.setModified(),t.merge(n);else{if(BK(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}}class L4t extends s1{run(t){const n=[...t.children],r=t.children.filter(i=>i instanceof Wo);if(t.numChildren()>1&&r.length>=1){const i={},s=new Set;for(const o of r){const a=o.parse;for(const l of st(a))l in i?i[l]!==a[l]&&s.add(l):i[l]=a[l]}for(const o of s)delete i[o];if(!Ir(i)){this.setModified();const o=new Wo(t,i);for(const a of n){if(a instanceof Wo)for(const l of st(i))delete a.parse[l];t.removeChild(a),a.parent=o,a instanceof Wo&&st(a.parse).length===0&&a.remove()}}}}}class F4t extends s1{run(t){t instanceof ll||t.numChildren()>0||t instanceof vE||t instanceof bv||(this.setModified(),t.remove())}}class j4t extends s1{run(t){const n=t.children.filter(i=>i instanceof vf),r=n.pop();for(const i of n)this.setModified(),r.merge(i)}}class B4t extends s1{run(t){const n=t.children.filter(i=>i instanceof Kc),r={};for(const i of n){const s=Mn(i.groupBy);s in r||(r[s]=[]),r[s].push(i)}for(const i of st(r)){const s=r[i];if(s.length>1){const o=s.pop();for(const a of s)o.merge(a)&&(t.removeChild(a),a.parent=o,a.remove(),this.setModified())}}}}class z4t extends s1{constructor(t){super(),this.model=t}run(t){const n=!(JX(t)||t instanceof yE||t instanceof Wo||t instanceof N0),r=[],i=[];for(const s of t.children)s instanceof wf&&(n&&!BK(t.producedFields(),s.dependentFields())?r.push(s):i.push(s));if(r.length>0){const s=r.pop();for(const o of r)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof wf?t.merge(s,this.model.renameSignal.bind(this.model)):s.swapWithParent()}if(i.length>1){const s=i.pop();for(const o of i)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified()}}}class U4t extends s1{run(t){const n=[...t.children];if(!Jw(n,o=>o instanceof ll)||t.numChildren()<=1)return;const i=[];let s;for(const o of n)if(o instanceof ll){let a=o;for(;a.numChildren()===1;){const[l]=a.children;if(l instanceof ll)a=l;else break}i.push(...a.children),s?(t.removeChild(o),o.parent=s.parent,s.parent.removeChild(s),s.parent=a,this.setModified()):s=a}else i.push(o);if(i.length){this.setModified();for(const o of i)o.parent.removeChild(o),o.parent=s}}}class o1 extends Cr{clone(){return new o1(null,ln(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=of(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){return t.as??_t(t)}hash(){return`JoinAggregateTransform ${Mn(this.transform)}`}assemble(){const t=[],n=[],r=[];for(const s of this.transform.joinaggregate)n.push(s.op),r.push(this.getDefaultName(s)),t.push(s.field===void 0?null:s.field);const i=this.transform.groupby;return{type:"joinaggregate",as:r,ops:n,fields:t,...i!==void 0?{groupby:i}:{}}}}class dx extends Cr{clone(){return new dx(null,{...this.filter})}constructor(t,n){super(t),this.filter=n}static make(t,n,r){const{config:i,markDef:s}=n,{marks:o,scales:a}=r;if(o==="include-invalid-values"&&a==="include-invalid-values")return null;const l=n.reduceFieldDef((u,c,d)=>{const f=th(d)&&n.getScaleComponent(d);if(f){const h=f.get("type"),{aggregate:p}=c,m=yX({scaleChannel:d,markDef:s,config:i,scaleType:h,isCountAggregate:V4(p)});m!=="show"&&m!=="always-valid"&&(u[c.field]=c)}return u},{});return st(l).length?new dx(t,l):null}dependentFields(){return new Set(st(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${Mn(this.filter)}`}assemble(){const t=st(this.filter).reduce((n,r)=>{const i=this.filter[r],s=_t(i,{expr:"datum"});return i!==null&&(i.type==="temporal"?n.push(`(isDate(${s}) || (${gz(s)}))`):i.type==="quantitative"&&n.push(gz(s))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}function gz(e){return`isValid(${e}) && isFinite(+${e})`}function q4t(e){return e.stack.stackBy.reduce((t,n)=>{const r=n.fieldDef,i=_t(r);return i&&t.push(i),t},[])}function H4t(e){return Ge(e)&&e.every(t=>Tt(t))&&e.length>1}class cp extends Cr{clone(){return new cp(null,ln(this._stack))}constructor(t,n){super(t),this._stack=n}static makeFromTransform(t,n){const{stack:r,groupby:i,as:s,offset:o="zero"}=n,a=[],l=[];if(n.sort!==void 0)for(const d of n.sort)a.push(d.field),l.push(Li(d.order,"ascending"));const u={field:a,order:l};let c;return H4t(s)?c=s:Tt(s)?c=[s,`${s}_end`]:c=[`${n.stack}_start`,`${n.stack}_end`],new cp(t,{dimensionFieldDefs:[],stackField:r,groupby:i,offset:o,sort:u,facetby:[],as:c})}static makeFromEncoding(t,n){const r=n.stack,{encoding:i}=n;if(!r)return null;const{groupbyChannels:s,fieldChannel:o,offset:a,impute:l}=r,u=s.map(h=>{const p=i[h];return sd(p)}).filter(h=>!!h),c=q4t(n),d=n.encoding.order;let f;if(Ge(d)||mt(d))f=YAe(d);else{const h=Fke(d)?d.sort:o==="y"?"descending":"ascending";f=c.reduce((p,m)=>(p.field.includes(m)||(p.field.push(m),p.order.push(h)),p),{field:[],order:[]})}return new cp(t,{dimensionFieldDefs:u,stackField:n.vgField(o),facetby:[],stackby:c,sort:f,offset:a,impute:l,as:[n.vgField(o,{suffix:"start",forAs:!0}),n.vgField(o,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${Mn(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:t,impute:n,groupby:r}=this._stack;return t.length>0?t.map(i=>i.bin?n?[_t(i,{binSuffix:"mid"})]:[_t(i,{}),_t(i,{binSuffix:"end"})]:[_t(i)]).flat():r??[]}assemble(){const t=[],{facetby:n,dimensionFieldDefs:r,stackField:i,stackby:s,sort:o,offset:a,impute:l,as:u}=this._stack;if(l)for(const c of r){const{bandPosition:d=.5,bin:f}=c;if(f){const h=_t(c,{expr:"datum"}),p=_t(c,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${gz(h)} ? ${d}*${h}+${1-d}*${p} : ${h}`,as:_t(c,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:i,groupby:[...s,...n],key:_t(c,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:i,sort:o,as:u,offset:a}),t}}class bE extends Cr{clone(){return new bE(null,ln(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=of(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return(this.transform.groupby??[]).forEach(t.add,t),(this.transform.sort??[]).forEach(n=>t.add(n.field)),this.transform.window.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){return t.as??_t(t)}hash(){return`WindowTransform ${Mn(this.transform)}`}assemble(){const t=[],n=[],r=[],i=[];for(const d of this.transform.window)n.push(d.op),r.push(this.getDefaultName(d)),i.push(d.param===void 0?null:d.param),t.push(d.field===void 0?null:d.field);const s=this.transform.frame,o=this.transform.groupby;if(s&&s[0]===null&&s[1]===null&&n.every(d=>XK(d)))return{type:"joinaggregate",as:r,ops:n,fields:t,...o!==void 0?{groupby:o}:{}};const a=[],l=[];if(this.transform.sort!==void 0)for(const d of this.transform.sort)a.push(d.field),l.push(d.order??"ascending");const u={field:a,order:l},c=this.transform.ignorePeers;return{type:"window",params:i,as:r,ops:n,fields:t,sort:u,...c!==void 0?{ignorePeers:c}:{},...o!==void 0?{groupby:o}:{},...s!==void 0?{frame:s}:{}}}}function W4t(e){function t(n){if(!(n instanceof vE)){const r=n.clone();if(r instanceof ll){const i=vz+r.getSource();r.setSource(i),e.model.component.data.outputNodes[i]=r}else(r instanceof Kc||r instanceof cp||r instanceof bE||r instanceof o1)&&r.addDimensions(e.fields);for(const i of n.children.flatMap(t))i.parent=r;return[r]}return n.children.flatMap(t)}return t}function yz(e){if(e instanceof vE)if(e.numChildren()===1&&!(e.children[0]instanceof ll)){const t=e.children[0];(t instanceof Kc||t instanceof cp||t instanceof bE||t instanceof o1)&&t.addDimensions(e.fields),t.swapWithParent(),yz(e)}else{const t=e.model.component.data.main;ORe(t);const n=W4t(e),r=e.children.map(n).flat();for(const i of r)i.parent=t}else e.children.map(yz)}function ORe(e){if(e instanceof ll&&e.type===gi.Main&&e.numChildren()===1){const t=e.children[0];t instanceof vE||(t.swapWithParent(),ORe(e))}}const vz="scale_",pI=5;function bz(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!bz(t.children))return!1}return!0}function fc(e,t){let n=!1;for(const r of t)n=e.optimize(r)||n;return n}function bce(e,t,n){let r=e.sources,i=!1;return i=fc(new $4t,r)||i,i=fc(new N4t(t),r)||i,r=r.filter(s=>s.numChildren()>0),i=fc(new F4t,r)||i,r=r.filter(s=>s.numChildren()>0),n||(i=fc(new M4t,r)||i,i=fc(new z4t(t),r)||i,i=fc(new O4t,r)||i,i=fc(new L4t,r)||i,i=fc(new B4t,r)||i,i=fc(new j4t,r)||i,i=fc(new P4t,r)||i,i=fc(new U4t,r)||i),e.sources=r,i}function V4t(e,t){bz(e.sources);let n=0,r=0;for(let i=0;i<pI&&bce(e,t,!0);i++)n++;e.sources.map(yz);for(let i=0;i<pI&&bce(e,t,!1);i++)r++;bz(e.sources),Math.max(n,r)===pI&&dt(`Maximum optimization runs(${pI}) reached.`)}class Os{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,n){return new Os(()=>t(n))}}function $Re(e){pi(e)?G4t(e):Y4t(e)}function G4t(e){const t=e.component.scales;for(const n of st(t)){const r=X4t(e,n);if(t[n].setWithExplicit("domains",r),J4t(e,n),e.component.data.isFaceted){let s=e;for(;!Wl(s)&&s.parent;)s=s.parent;if(s.component.resolve.scale[n]==="shared")for(const a of r.value)Kh(a)&&(a.data=vz+a.data.replace(vz,""))}}}function Y4t(e){for(const n of e.children)$Re(n);const t=e.component.scales;for(const n of st(t)){let r,i=null;for(const s of e.children){const o=s.component.scales[n];if(o){r===void 0?r=o.getWithExplicit("domains"):r=P0(r,o.getWithExplicit("domains"),"domains","scale",wz);const a=o.get("selectionExtent");i&&a&&i.param!==a.param&&dt(RRt),i=a}}t[n].setWithExplicit("domains",r),i&&t[n].set("selectionExtent",i,!0)}}function K4t(e,t,n,r){if(e==="unaggregated"){const{valid:i,reason:s}=wce(t,n);if(!i){dt(s);return}}else if(e===void 0&&r.useUnaggregatedDomain){const{valid:i}=wce(t,n);if(i)return"unaggregated"}return e}function X4t(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:r}=e,i=K4t(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return i!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:i}),t==="x"&&fs(r.x2)?fs(r.x)?P0(Sm(n,i,e,"x"),Sm(n,i,e,"x2"),"domain","scale",wz):Sm(n,i,e,"x2"):t==="y"&&fs(r.y2)?fs(r.y)?P0(Sm(n,i,e,"y"),Sm(n,i,e,"y2"),"domain","scale",wz):Sm(n,i,e,"y2"):Sm(n,i,e,t)}function Q4t(e,t,n){return e.map(r=>({signal:`{data: ${s6(r,{timeUnit:n,type:t})}}`}))}function yF(e,t,n){var i;const r=(i=qs(n))==null?void 0:i.unit;return t==="temporal"||r?Q4t(e,t,r):[e]}function Sm(e,t,n,r){const{encoding:i,markDef:s,mark:o,config:a,stack:l}=n,u=fs(i[r]),{type:c}=u,d=u.timeUnit,f=ONt({invalid:Nf("invalid",s,a),isPath:og(o)});if(nDt(t)){const m=Sm(e,void 0,n,r),g=yF(t.unionWith,c,d);return Vd([...g,...m.value])}else{if(Ut(t))return Vd([t]);if(t&&t!=="unaggregated"&&!xke(t))return Vd(yF(t,c,d))}if(l&&r===l.fieldChannel){if(l.offset==="normalize")return Dl([[0,1]]);const m=n.requestDataName(f);return Dl([{data:m,field:n.vgField(r,{suffix:"start"})},{data:m,field:n.vgField(r,{suffix:"end"})}])}const h=th(r)&&mt(u)?Z4t(n,r,e):void 0;if(nh(u)){const m=yF([u.datum],c,d);return Dl(m)}const p=u;if(t==="unaggregated"){const{field:m}=u;return Dl([{data:n.requestDataName(f),field:_t({field:m,aggregate:"min"})},{data:n.requestDataName(f),field:_t({field:m,aggregate:"max"})}])}else if(qr(p.bin)){if(Vs(e))return Dl(e==="bin-ordinal"?[]:[{data:fC(h)?n.requestDataName(f):n.requestDataName(gi.Raw),field:n.vgField(r,XS(p,r)?{binSuffix:"range"}:{}),sort:h===!0||!At(h)?{field:n.vgField(r,{}),op:"min"}:h}]);{const{bin:m}=p;if(qr(m)){const g=QX(n,p.field,m);return Dl([new Os(()=>{const b=n.getSignalName(g);return`[${b}.start, ${b}.stop]`})])}else return Dl([{data:n.requestDataName(f),field:n.vgField(r,{})}])}}else if(p.timeUnit&&Dn(["time","utc"],e)){const m=i[eh(r)];if(Lke(p,m,s,a)){const g=n.requestDataName(f),b=D0({fieldDef:p,fieldDef2:m,markDef:s,config:a}),v=pC(o)&&b!==.5&&Fi(r);return Dl([{data:g,field:n.vgField(r,v?{suffix:d6}:{})},{data:g,field:n.vgField(r,{suffix:v?f6:"end"})}])}}return Dl(h?[{data:fC(h)?n.requestDataName(f):n.requestDataName(gi.Raw),field:n.vgField(r),sort:h}]:[{data:n.requestDataName(f),field:n.vgField(r)}])}function vF(e,t){const{op:n,field:r,order:i}=e;return{op:n??(t?"sum":t6),...r?{field:Fu(r)}:{},...i?{order:i}:{}}}function J4t(e,t){var a;const n=e.component.scales[t],r=e.specifiedScales[t].domain,i=(a=e.fieldDef(t))==null?void 0:a.bin,s=xke(r)?r:void 0,o=Zv(i)&&G4(i.extent)?i.extent:void 0;(s||o)&&n.set("selectionExtent",s??o,!0)}function Z4t(e,t,n){if(!Vs(n))return;const r=e.fieldDef(t),i=r.sort;if($ke(i))return{op:"min",field:ux(r,t),order:"ascending"};const{stack:s}=e,o=s?new Set([...s.groupbyFields,...s.stackBy.map(a=>a.fieldDef.field)]):void 0;if(lp(i)){const a=s&&!o.has(i.field);return vF(i,a)}else if(ODt(i)){const{encoding:a,order:l}=i,u=e.fieldDef(a),{aggregate:c,field:d}=u,f=s&&!o.has(d);if(Ap(c)||sg(c))return vF({field:_t(u),order:l},f);if(XK(c)||!c)return vF({op:c,field:d,order:l},f)}else{if(i==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if(Dn(["ascending",void 0],i))return!0}}function wce(e,t){const{aggregate:n,type:r}=e;return n?Tt(n)&&!hRt.has(n)?{valid:!1,reason:s3t(n)}:r==="quantitative"&&t==="log"?{valid:!1,reason:o3t(e)}:{valid:!0}:{valid:!1,reason:i3t(e)}}function wz(e,t,n,r){return e.explicit&&t.explicit&&dt(d3t(n,r,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function e6t(e){const t=of(e.map(o=>{if(Kh(o)){const{sort:a,...l}=o;return l}return o}),Mn),n=of(e.map(o=>{if(Kh(o)){const a=o.sort;return a!==void 0&&!fC(a)&&("op"in a&&a.op==="count"&&delete a.field,a.order==="ascending"&&delete a.order),a}}).filter(o=>o!==void 0),Mn);if(t.length===0)return;if(t.length===1){const o=e[0];if(Kh(o)&&n.length>0){let a=n[0];if(n.length>1){dt(Eue);const l=n.filter(u=>At(u)&&"op"in u&&u.op!=="min");n.every(u=>At(u)&&"op"in u)&&l.length===1?a=l[0]:a=!0}else if(At(a)&&"field"in a){const l=a.field;o.field===l&&(a=a.order?{order:a.order}:!0)}return{...o,sort:a}}return o}const r=of(n.map(o=>fC(o)||!("op"in o)||Tt(o.op)&&It(uRt,o.op)?o:(dt(h3t(o)),!0)),Mn);let i;r.length===1?i=r[0]:r.length>1&&(dt(Eue),i=!0);const s=of(e.map(o=>Kh(o)?o.data:null),o=>o);return s.length===1&&s[0]!==null?{data:s[0],fields:t.map(a=>a.field),...i?{sort:i}:{}}:{fields:t,...i?{sort:i}:{}}}function tQ(e){if(Kh(e)&&Tt(e.field))return e.field;if(pRt(e)){let t;for(const n of e.fields)if(Kh(n)&&Tt(n.field)){if(!t)t=n.field;else if(t!==n.field)return dt(p3t),t}return dt(m3t),t}else if(mRt(e)){dt(g3t);const t=e.fields[0];return Tt(t)?t:void 0}}function x6(e,t){const r=e.component.scales[t].get("domains").map(i=>(Kh(i)&&(i.data=e.lookupDataSource(i.data)),i));return e6t(r)}function MRe(e){return wE(e)||nQ(e)?e.children.reduce((t,n)=>t.concat(MRe(n)),xce(e)):xce(e)}function xce(e){return st(e.component.scales).reduce((t,n)=>{const r=e.component.scales[n];if(r.merged)return t;const i=r.combine(),{name:s,type:o,selectionExtent:a,domains:l,range:u,reverse:c,...d}=i,f=t6t(i.range,s,n,e),h=x6(e,n),p=a?WNt(e,a,r,h):null;return t.push({name:s,type:o,...h?{domain:h}:{},...p?{domainRaw:p}:{},range:f,...c!==void 0?{reverse:c}:{},...d}),t},[])}function t6t(e,t,n,r){if(Fi(n)){if(e1(e))return{step:{signal:`${t}_step`}}}else if(At(e)&&Kh(e))return{...e,data:r.lookupDataSource(e.data)};return e}class LRe extends Kp{constructor(t,n){super({},{name:t}),this.merged=!1,this.setWithExplicit("type",n)}domainHasZero(){const t=this.get("type");if(Dn([fo.LOG,fo.TIME,fo.UTC],t))return"definitely-not";const n=this.get("zero");if(n===!0||n===void 0&&Dn([fo.LINEAR,fo.SQRT,fo.POW],t))return"definitely";const r=this.get("domains");if(r.length>0){let i=!1,s=!1,o=!1;for(const a of r){if(Ge(a)){const l=a[0],u=a[a.length-1];if(Zn(l)&&Zn(u))if(l<=0&&u>=0){i=!0;continue}else{s=!0;continue}}o=!0}if(i)return"definitely";if(s&&!o)return"definitely-not"}return"maybe"}}const n6t=["range","scheme"];function r6t(e){const t=e.component.scales;for(const n of KK){const r=t[n];if(!r)continue;const i=i6t(n,e);r.setWithExplicit("range",i)}}function Ece(e,t){const n=e.fieldDef(t);if(n!=null&&n.bin){const{bin:r,field:i}=n,s=yl(t),o=e.getName(s);if(At(r)&&r.binned&&r.step!==void 0)return new Os(()=>{const a=e.scaleName(t),l=`(domain("${a}")[1] - domain("${a}")[0]) / ${r.step}`;return`${e.getSignalName(o)} / (${l})`});if(qr(r)){const a=QX(e,i,r);return new Os(()=>{const l=e.getSignalName(a),u=`(${l}.stop - ${l}.start) / ${l}.step`;return`${e.getSignalName(o)} / (${u})`})}}}function i6t(e,t){const n=t.specifiedScales[e],{size:r}=t,s=t.getScaleComponent(e).get("type");for(const d of n6t)if(n[d]!==void 0){const f=J7(s,d),h=Eke(e,d);if(!f)dt(tke(s,d,e));else if(h)dt(h);else switch(d){case"range":{const p=n.range;if(Ge(p)){if(Fi(e))return Vd(p.map(m=>{if(m==="width"||m==="height"){const g=t.getName(m),b=t.getSignalName.bind(t);return Os.fromName(b,g)}return m}))}else if(At(p))return Vd({data:t.requestDataName(gi.Main),field:p.field,sort:{op:"min",field:t.vgField(e)}});return Vd(p)}case"scheme":return Vd(s6t(n[d]))}}const o=e===ai||e==="xOffset"?"width":"height",a=r[o];if($f(a)){if(Fi(e))if(Vs(s)){const d=jRe(a,t,e);if(d)return Vd({step:d})}else dt(nke(o));else if(qS(e)){const d=e===Z0?"x":"y";if(t.getScaleComponent(d).get("type")==="band"){const p=BRe(a,s);if(p)return Vd(p)}}}const{rangeMin:l,rangeMax:u}=n,c=o6t(e,t);return(l!==void 0||u!==void 0)&&J7(s,"rangeMin")&&Ge(c)&&c.length===2?Vd([l??c[0],u??c[1]]):Dl(c)}function s6t(e){return tDt(e)?{scheme:e.name,...al(e,["name"])}:{scheme:e}}function FRe(e,t,n,{center:r}={}){const i=yl(e),s=t.getName(i),o=t.getSignalName.bind(t);return e===Xs&&rd(n)?r?[Os.fromName(a=>`${o(a)}/2`,s),Os.fromName(a=>`-${o(a)}/2`,s)]:[Os.fromName(o,s),0]:r?[Os.fromName(a=>`-${o(a)}/2`,s),Os.fromName(a=>`${o(a)}/2`,s)]:[0,Os.fromName(o,s)]}function o6t(e,t){const{size:n,config:r,mark:i,encoding:s}=t,{type:o}=fs(s[e]),l=t.getScaleComponent(e).get("type"),{domain:u,domainMid:c}=t.specifiedScales[e];switch(e){case ai:case Xs:{if(Dn(["point","band"],l)){const d=zRe(e,n,r.view);if($f(d))return{step:jRe(d,t,e)}}return FRe(e,t,l)}case Z0:case pE:return a6t(e,t,l);case Wp:{const d=c6t(i,r),f=d6t(i,n,t,r);return nx(l)?u6t(d,f,l6t(l,r,u,e)):[d,f]}case Qu:return[0,Math.PI*2];case Qv:return[0,360];case bd:return[0,new Os(()=>{const d=t.getSignalName(Wl(t.parent)?"child_width":"width"),f=t.getSignalName(Wl(t.parent)?"child_height":"height");return`min(${d},${f})/2`})];case eg:return{step:1e3/r.scale.framesPerSecond};case rg:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case ig:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case gl:return"symbol";case ml:case Jf:case Zf:return l==="ordinal"?o==="nominal"?"category":"ordinal":c!==void 0?"diverging":i==="rect"||i==="geoshape"?"heatmap":"ramp";case Vp:case tg:case ng:return[r.scale.minOpacity,r.scale.maxOpacity]}}function jRe(e,t,n){const{encoding:r}=t,i=t.getScaleComponent(n),s=WK(n),o=r[s];if(mIe({step:e,offsetIsDiscrete:fn(o)&&gke(o.type)})==="offset"&&Kke(r,s)){const l=t.getScaleComponent(s);let c=`domain('${t.scaleName(s)}').length`;if(l.get("type")==="band"){const f=l.get("paddingInner")??l.get("padding")??0,h=l.get("paddingOuter")??l.get("padding")??0;c=`bandspace(${c}, ${f}, ${h})`}const d=i.get("paddingInner")??i.get("padding");return{signal:`${e.step} * ${c} / (1-${bRt(d)})`}}else return e.step}function BRe(e,t){if(mIe({step:e,offsetIsDiscrete:Vs(t)})==="offset")return{step:e.step}}function a6t(e,t,n){const r=e===Z0?"x":"y",i=t.getScaleComponent(r);if(!i)return FRe(r,t,n,{center:!0});const s=i.get("type"),o=t.scaleName(r),{markDef:a,config:l}=t;if(s==="band"){const u=zRe(r,t.size,t.config.view);if($f(u)){const c=BRe(u,n);if(c)return c}return[0,{signal:`bandwidth('${o}')`}]}else{const u=t.encoding[r];if(mt(u)&&u.timeUnit){const c=fke(u.timeUnit,p=>`scale('${o}', ${p})`),d=t.config.scale.bandWithNestedOffsetPaddingInner,f=D0({fieldDef:u,markDef:a,config:l})-.5,h=f!==0?` + ${f}`:"";if(d){const p=Ut(d)?`${d.signal}/2`+h:`${d/2+f}`,m=Ut(d)?`(1 - ${d.signal}/2)`+h:`${1-d/2+f}`;return[{signal:`${p} * (${c})`},{signal:`${m} * (${c})`}]}return[0,{signal:c}]}return _Ae(`Cannot use ${e} scale if ${r} scale is not discrete.`)}}function zRe(e,t,n){const r=e===ai?"width":"height",i=t[r];return i||wN(n,r)}function l6t(e,t,n,r){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&Ge(n)?n.length+1:(dt(C3t(r)),3)}}function u6t(e,t,n){const r=()=>{const i=jc(t),s=jc(e),o=`(${i} - ${s}) / (${n} - 1)`;return`sequence(${s}, ${i} + ${o}, ${o})`};return Ut(t)?new Os(r):{signal:r()}}function c6t(e,t){switch(e){case"bar":case"tick":return t.scale.minBandSize;case"line":case"trail":case"rule":return t.scale.minStrokeWidth;case"text":return t.scale.minFontSize;case"point":case"square":case"circle":return t.scale.minSize}throw new Error(Y4("size",e))}const _ce=.95;function d6t(e,t,n,r){const i={x:Ece(n,"x"),y:Ece(n,"y")};switch(e){case"bar":case"tick":{if(r.scale.maxBandSize!==void 0)return r.scale.maxBandSize;const s=Tce(t,i,r.view);return Zn(s)?s-1:new Os(()=>`${s.signal} - 1`)}case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":{if(r.scale.maxSize)return r.scale.maxSize;const s=Tce(t,i,r.view);return Zn(s)?Math.pow(_ce*s,2):new Os(()=>`pow(${_ce} * ${s.signal}, 2)`)}}throw new Error(Y4("size",e))}function Tce(e,t,n){const r=$f(e.width)?e.width.step:nz(n,"width"),i=$f(e.height)?e.height.step:nz(n,"height");return t.x||t.y?new Os(()=>`min(${[t.x?t.x.signal:r,t.y?t.y.signal:i].join(", ")})`):Math.min(r,i)}function URe(e,t){pi(e)?f6t(e,t):HRe(e,t)}function f6t(e,t){const n=e.component.scales,{config:r,encoding:i,markDef:s,specifiedScales:o}=e;for(const a of st(n)){const l=o[a],u=n[a],c=e.getScaleComponent(a),d=fs(i[a]),f=l[t],h=c.get("type"),p=c.get("padding"),m=c.get("paddingInner"),g=J7(h,t),b=Eke(a,t);if(f!==void 0&&(g?b&&dt(b):dt(tke(h,t,a))),g&&b===void 0)if(f!==void 0){const v=d.timeUnit,x=d.type;switch(t){case"domainMax":case"domainMin":t1(l[t])||x==="temporal"||v?u.set(t,{signal:s6(l[t],{type:x,timeUnit:v})},!0):u.set(t,l[t],!0);break;default:u.copyKeyFromObject(t,l)}}else{const v=at(Cce,t)?Cce[t]({model:e,channel:a,fieldOrDatumDef:d,scaleType:h,scalePadding:p,scalePaddingInner:m,domain:l.domain,domainMin:l.domainMin,domainMax:l.domainMax,markDef:s,config:r,hasNestedOffsetScale:Xke(i,a),hasSecondaryRangeChannel:!!i[eh(a)]}):r.scale[t];v!==void 0&&u.set(t,v,!1)}}}const Cce={bins:({model:e,fieldOrDatumDef:t})=>mt(t)?h6t(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>p6t(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:r,domainMax:i,fieldOrDatumDef:s})=>m6t(e,t,n,r,i,s),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:r,config:i})=>g6t(e,t,i.scale,n,r,i.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:r,config:i,hasNestedOffsetScale:s})=>y6t(e,t,n.type,r,i.scale,s),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:r,config:i,hasNestedOffsetScale:s})=>v6t(e,t,n,r,i.scale,s),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:r})=>{const i=mt(e)?e.sort:void 0;return b6t(t,i,n,r.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:r,scaleType:i,config:s,hasSecondaryRangeChannel:o})=>w6t(e,t,n,r,i,s.scale,o)};function qRe(e){pi(e)?r6t(e):HRe(e,"range")}function HRe(e,t){const n=e.component.scales;for(const r of e.children)t==="range"?qRe(r):URe(r,t);for(const r of st(n)){let i;for(const s of e.children){const o=s.component.scales[r];if(o){const a=o.getWithExplicit(t);i=P0(i,a,t,"scale",kIe((l,u)=>{switch(t){case"range":return l.step&&u.step?l.step-u.step:0}return 0}))}}n[r].setWithExplicit(t,i)}}function h6t(e,t){const n=t.bin;if(qr(n)){const r=QX(e,t.field,n);return new Os(()=>e.getSignalName(r))}else if(uo(n)&&Zv(n)&&n.step!==void 0)return{step:n.step}}function p6t(e,t){if(Dn([ml,Jf,Zf],e)&&t!=="nominal")return"hcl"}function m6t(e,t,n,r,i,s){var o;if(!((o=sd(s))!=null&&o.bin||Ge(n)||i!=null||r!=null||Dn([fo.TIME,fo.UTC],e)))return Fi(t)?!0:void 0}function g6t(e,t,n,r,i,s){if(Fi(e)){if(af(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:o,orient:a}=i;if(o==="bar"&&!(mt(r)&&(r.bin||r.timeUnit))&&(a==="vertical"&&e==="x"||a==="horizontal"&&e==="y"))return s.continuousBandSize}if(t===fo.POINT)return n.pointPadding}}function y6t(e,t,n,r,i,s=!1){if(e===void 0){if(Fi(t)){const{bandPaddingInner:o,barBandPaddingInner:a,rectBandPaddingInner:l,tickBandPaddingInner:u,bandWithNestedOffsetPaddingInner:c}=i;return s?c:Li(o,n==="bar"?a:n==="tick"?u:l)}else if(qS(t)&&r===fo.BAND)return i.offsetBandPaddingInner}}function v6t(e,t,n,r,i,s=!1){if(e===void 0){if(Fi(t)){const{bandPaddingOuter:o,bandWithNestedOffsetPaddingOuter:a}=i;if(s)return a;if(n===fo.BAND)return Li(o,Ut(r)?{signal:`${r.signal}/2`}:r/2)}else if(qS(t)){if(n===fo.POINT)return .5;if(n===fo.BAND)return i.offsetBandPaddingOuter}}}function b6t(e,t,n,r){if(n==="x"&&r.xReverse!==void 0)return rd(e)&&t==="descending"?Ut(r.xReverse)?{signal:`!${r.xReverse.signal}`}:!r.xReverse:r.xReverse;if(rd(e)&&t==="descending")return!0}function w6t(e,t,n,r,i,s,o){if(!!n&&n!=="unaggregated"&&rd(i)){if(Ge(n)){const l=n[0],u=n[n.length-1];if(Zn(l)&&l<=0&&Zn(u)&&u>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!nx(i))return!0;if(!(mt(t)&&t.bin)&&Dn([...Gp,...eRt],e)){const{orient:l,type:u}=r;return Dn(["bar","area","line","trail"],u)&&(l==="horizontal"&&e==="y"||l==="vertical"&&e==="x")?!1:Dn(["bar","area"],u)&&!o?!0:s==null?void 0:s.zero}return!1}function x6t(e,t,n,r,i=!1){const s=E6t(t,n,r,i),{type:o}=e;return th(t)?o!==void 0?lDt(t,o)?mt(n)&&!aDt(o,n.type)?(dt(u3t(o,s)),s):o:(dt(l3t(t,o,s)),s):s:null}function E6t(e,t,n,r){var i;switch(t.type){case"nominal":case"ordinal":{if(cw(e)||rF(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&dt(iF(e,"ordinal")),"ordinal";if(nF(e))return"band";if(Fi(e)||qS(e)){if(Dn(["rect","bar","image","rule","tick"],n.type)||r)return"band"}else if(n.type==="arc"&&e in YK)return"band";const s=n[yl(e)];return hv(s)||ix(t)&&((i=t.axis)!=null&&i.tickBand)?"band":"point"}case"temporal":return cw(e)?"time":rF(e)==="discrete"?(dt(iF(e,"temporal")),"ordinal"):mt(t)&&t.timeUnit&&qs(t.timeUnit).utc?"utc":nF(e)?"band":"time";case"quantitative":return cw(e)?mt(t)&&qr(t.bin)?"bin-ordinal":"linear":rF(e)==="discrete"?(dt(iF(e,"quantitative")),"ordinal"):nF(e)?"band":"linear";case"geojson":return}throw new Error(ZAe(t.type))}function _6t(e,{ignoreRange:t}={}){WRe(e),$Re(e);for(const n of oDt)URe(e,n);t||qRe(e)}function WRe(e){pi(e)?e.component.scales=T6t(e):e.component.scales=S6t(e)}function T6t(e){const{encoding:t,mark:n,markDef:r}=e,i={};for(const s of KK){const o=fs(t[s]);if(o&&n===Cke&&s===gl&&o.type===mE)continue;let a=o&&o.scale;if(o&&a!==null&&a!==!1){a??(a={});const l=Xke(t,s),u=x6t(a,s,o,r,l);i[s]=new LRe(e.scaleName(`${s}`,!0),{value:u,explicit:a.type===u})}}return i}const C6t=kIe((e,t)=>Tue(e)-Tue(t));function S6t(e){var t;const n=e.component.scales={},r={},i=e.component.resolve;for(const s of e.children){WRe(s);for(const o of st(s.component.scales))if((t=i.scale)[o]??(t[o]=ERe(o,e)),i.scale[o]==="shared"){const a=r[o],l=s.component.scales[o].getWithExplicit("type");a?X3t(a.value,l.value)?r[o]=P0(a,l,"type","scale",C6t):(i.scale[o]="independent",delete r[o]):r[o]=l}}for(const s of st(r)){const o=e.scaleName(s,!0),a=r[s];n[s]=new LRe(o,a);for(const l of e.children){const u=l.component.scales[s];u&&(l.renameScale(u.get("name"),o),u.merged=!0)}}return n}class bF{constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function pi(e){return(e==null?void 0:e.type)==="unit"}function Wl(e){return(e==null?void 0:e.type)==="facet"}function nQ(e){return(e==null?void 0:e.type)==="concat"}function wE(e){return(e==null?void 0:e.type)==="layer"}class rQ{constructor(t,n,r,i,s,o,a){this.type=n,this.parent=r,this.config=s,this.parent=r,this.config=s,this.view=co(a),this.name=t.name??i,this.title=Om(t.title)?{text:t.title}:t.title?co(t.title):void 0,this.scaleNameMap=r?r.scaleNameMap:new bF,this.projectionNameMap=r?r.projectionNameMap:new bF,this.signalNameMap=r?r.signalNameMap:new bF,this.data=t.data,this.description=t.description,this.transforms=ENt(t.transform??[]),this.layout=n==="layer"||n==="unit"?{}:SPt(t,n,s),this.component={data:{sources:r?r.component.data.sources:[],outputNodes:r?r.component.data.outputNodes:{},outputNodeRefCounts:r?r.component.data.outputNodeRefCounts:{},isFaceted:n6(t)||(r==null?void 0:r.component.data.isFaceted)&&t.data===void 0},layoutSize:new Kp,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...o?ln(o):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){_6t(this)}parseProjection(){PRe(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){ARe(this)}assembleEncodeFromView(t){const{style:n,...r}=t,i={};for(const s of st(r)){const o=r[s];o!==void 0&&(i[s]=Kr(o))}return i}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=Kr(this.description)),this.type==="unit"||this.type==="layer")?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...n}:Ir(n)?void 0:n}assembleLayout(){if(!this.layout)return;const{spacing:t,...n}=this.layout,{component:r,config:i}=this,s=V$t(r.layoutHeaders,i);return{padding:t,...this.assembleDefaultLayout(),...n,...s?{titleBand:s}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const r of Su)t[r].title&&n.push(B$t(this,r));for(const r of GX)n=n.concat(z$t(this,r));return n}assembleAxes(){return A$t(this.component.axes,this.config)}assembleLegends(){return IRe(this)}assembleProjections(){return m4t(this)}assembleTitle(){const{encoding:t,...n}=this.title??{},r={...HAe(this.config.title).nonMarkTitleProperties,...n,...t?{encode:{update:t}}:{}};if(r.text)return Dn(["unit","layer"],this.type)?Dn(["middle",void 0],r.anchor)&&(r.frame??(r.frame="group")):r.anchor??(r.anchor="start"),Ir(r)?void 0:r}assembleGroup(t=[]){const n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);const r=this.assembleLayout();r&&(n.layout=r),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const i=!this.parent||Wl(this.parent)?MRe(this):[];i.length>0&&(n.scales=i);const s=this.assembleAxes();s.length>0&&(n.axes=s);const o=this.assembleLegends();return o.length>0&&(n.legends=o),n}getName(t){return si((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(gi[t].toLowerCase())}requestDataName(t){const n=this.getDataName(t),r=this.component.data.outputNodeRefCounts;return r[n]=(r[n]||0)+1,n}getSizeSignalRef(t){if(Wl(this.parent)){const n=wRe(t),r=W4(n),i=this.component.scales[r];if(i&&!i.merged){const s=i.get("type"),o=i.get("range");if(Vs(s)&&e1(o)){const a=i.get("name"),l=x6(this,r),u=tQ(l);if(u){const c=_t({aggregate:"distinct",field:u},{expr:"datum"});return{signal:bRe(a,i,c)}}else return dt(JK(r)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(MAe(t)&&th(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getScaleType(t){const n=this.getScaleComponent(t);return n?n.get("type"):void 0}getSelectionComponent(t,n){let r=this.component.selection[t];if(!r&&this.parent&&(r=this.parent.getSelectionComponent(t,n)),!r)throw new Error(TRt(n));return r}hasAxisOrientSignalRef(){var t,n;return((t=this.component.axes.x)==null?void 0:t.some(r=>r.hasOrientSignalRef()))||((n=this.component.axes.y)==null?void 0:n.some(r=>r.hasOrientSignalRef()))}}class VRe extends rQ{vgField(t,n={}){const r=this.fieldDef(t);if(r)return _t(r,n)}reduceFieldDef(t,n){return tPt(this.getMapping(),(r,i,s)=>{const o=sd(i);return o?t(r,o,s):r},n)}forEachFieldDef(t,n){SX(this.getMapping(),(r,i)=>{const s=sd(r);s&&t(s,i)},n)}}class E6 extends Cr{clone(){return new E6(null,ln(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=ln(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"value",r[1]??"density"];const i=this.transform.resolve??"shared";this.transform.resolve=i}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${Mn(this.transform)}`}assemble(){const{density:t,...n}=this.transform,r={type:"kde",field:t,...n};return r.resolve=this.transform.resolve,r}}class _6 extends Cr{clone(){return new _6(null,ln(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=ln(n)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${Mn(this.transform)}`}assemble(){const{extent:t,param:n}=this.transform;return{type:"extent",field:t,signal:n}}}class T6 extends Cr{clone(){return new T6(this.parent,ln(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=ln(n);const{flatten:r,as:i=[]}=this.transform;this.transform.as=r.map((s,o)=>i[o]??s)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${Mn(this.transform)}`}assemble(){const{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}}class C6 extends Cr{clone(){return new C6(null,ln(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=ln(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"key",r[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${Mn(this.transform)}`}assemble(){const{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}}class hw extends Cr{clone(){return new hw(null,ln(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let r=0;for(const i of[[xd,wd],[ju,Ed]]){const s=i.map(o=>{const a=fs(n.encoding[o]);return mt(a)?a.field:nh(a)?{expr:`${a.datum}`}:id(a)?{expr:`${a.value}`}:void 0});(s[0]||s[1])&&(t=new hw(t,s,null,n.getName(`geojson_${r++}`)))}if(n.channelHasField(gl)){const i=n.typedFieldDef(gl);i.type===mE&&(t=new hw(t,null,i.field,n.getName(`geojson_${r++}`)))}return t}constructor(t,n,r,i){super(t),this.fields=n,this.geojson=r,this.signal=i}dependentFields(){const t=(this.fields??[]).filter(Tt);return new Set([...this.geojson?[this.geojson]:[],...t])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${Mn(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class vC extends Cr{clone(){return new vC(null,this.projection,ln(this.fields),ln(this.as))}constructor(t,n,r,i){super(t),this.projection=n,this.fields=r,this.as=i}static parseAll(t,n){if(!n.projectionName())return t;for(const r of[[xd,wd],[ju,Ed]]){const i=r.map(o=>{const a=fs(n.encoding[o]);return mt(a)?a.field:nh(a)?{expr:`${a.datum}`}:id(a)?{expr:`${a.value}`}:void 0}),s=r[0]===ju?"2":"";(i[0]||i[1])&&(t=new vC(t,n.projectionName(),i,[n.getName(`x${s}`),n.getName(`y${s}`)]))}return t}dependentFields(){return new Set(this.fields.filter(Tt))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${Mn(this.fields)} ${Mn(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class Fy extends Cr{clone(){return new Fy(null,ln(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:n=0,stop:r,step:i}=t;return{signal:`sequence(${[n,r,...i?[i]:[]].join(",")})`}}static makeFromTransform(t,n){return new Fy(t,n)}static makeFromEncoding(t,n){const r=n.encoding,i=r.x,s=r.y;if(mt(i)&&mt(s)){const o=i.impute?i:s.impute?s:void 0;if(o===void 0)return;const a=i.impute?s:s.impute?i:void 0,{method:l,value:u,frame:c,keyvals:d}=o.impute,f=Zke(n.mark,r);return new Fy(t,{impute:o.field,key:a.field,...l?{method:l}:{},...u!==void 0?{value:u}:{},...c?{frame:c}:{},...d!==void 0?{keyvals:d}:{},...f.length?{groupby:f}:{}})}return null}hash(){return`Impute ${Mn(this.transform)}`}assemble(){const{impute:t,key:n,keyvals:r,method:i,groupby:s,value:o,frame:a=[null,null]}=this.transform,l={type:"impute",field:t,key:n,...r?{keyvals:rNt(r)?this.processSequence(r):r}:{},method:"value",...s?{groupby:s}:{},value:!i||i==="value"?o:null};if(i&&i!=="value"){const u={type:"window",as:[`imputed_${t}_value`],ops:[i],fields:[t],frame:a,ignorePeers:!1,...s?{groupby:s}:{}},c={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[l,u,c]}else return[l]}}class S6 extends Cr{clone(){return new S6(null,ln(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=ln(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${Mn(this.transform)}`}assemble(){const{loess:t,on:n,...r}=this.transform;return{type:"loess",x:n,y:t,...r}}}class bC extends Cr{clone(){return new bC(null,ln(this.transform),this.secondary)}constructor(t,n,r){super(t),this.transform=n,this.secondary=r}static make(t,n,r,i){const s=n.component.data.sources,{from:o}=r;let a=null;if(iNt(o)){let l=KRe(o.data,s);l||(l=new bv(o.data),s.push(l));const u=n.getName(`lookup_${i}`);a=new ll(l,u,gi.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[u]=a}else if(sNt(o)){const l=o.param;r={as:l,...r};let u;try{u=n.getSelectionComponent(si(l),l)}catch{throw new Error(kRt(l))}if(a=u.materialized,!a)throw new Error(IRt(l))}return new bC(t,r,a.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?St(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${Mn({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t={values:this.transform.from.fields,...this.transform.as?{as:St(this.transform.as)}:{}};else{let n=this.transform.as;Tt(n)||(dt(BRt),n="_lookup"),t={as:[n]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...t,...this.transform.default?{default:this.transform.default}:{}}}}class A6 extends Cr{clone(){return new A6(null,ln(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=ln(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"prob",r[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${Mn(this.transform)}`}assemble(){const{quantile:t,...n}=this.transform;return{type:"quantile",field:t,...n}}}class k6 extends Cr{clone(){return new k6(null,ln(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=ln(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${Mn(this.transform)}`}assemble(){const{regression:t,on:n,...r}=this.transform;return{type:"regression",x:n,y:t,...r}}}class I6 extends Cr{clone(){return new I6(null,ln(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=of((this.transform.groupby??[]).concat(t),n=>n)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${Mn(this.transform)}`}assemble(){const{pivot:t,value:n,groupby:r,limit:i,op:s}=this.transform;return{type:"pivot",field:t,value:n,...i!==void 0?{limit:i}:{},...s!==void 0?{op:s}:{},...r!==void 0?{groupby:r}:{}}}}class R6 extends Cr{clone(){return new R6(null,ln(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${Mn(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function GRe(e){let t=0;function n(r,i){if(r instanceof bv&&!r.isGenerator&&!ox(r.data)&&(e.push(i),i={name:null,source:i.name,transform:[]}),r instanceof Wo&&(r.parent instanceof bv&&!i.source?(i.format={...i.format,parse:r.assembleFormatParse()},i.transform.push(...r.assembleTransforms(!0))):i.transform.push(...r.assembleTransforms())),r instanceof vE){i.name||(i.name=`data_${t++}`),!i.source||i.transform.length>0?(e.push(i),r.data=i.name):r.data=i.source,e.push(...r.assemble());return}switch((r instanceof nA||r instanceof rA||r instanceof dx||r instanceof yE||r instanceof lx||r instanceof vC||r instanceof Kc||r instanceof bC||r instanceof bE||r instanceof o1||r instanceof C6||r instanceof T6||r instanceof E6||r instanceof S6||r instanceof A6||r instanceof k6||r instanceof N0||r instanceof R6||r instanceof I6||r instanceof _6)&&i.transform.push(r.assemble()),(r instanceof wf||r instanceof vf||r instanceof Fy||r instanceof cp||r instanceof hw)&&i.transform.push(...r.assemble()),r instanceof ll&&(i.source&&i.transform.length===0?r.setSource(i.source):r.parent instanceof ll?r.setSource(i.name):(i.name||(i.name=`data_${t++}`),r.setSource(i.name),r.numChildren()===1&&(e.push(i),i={name:null,source:i.name,transform:[]}))),r.numChildren()){case 0:r instanceof ll&&(!i.source||i.transform.length>0)&&e.push(i);break;case 1:n(r.children[0],i);break;default:{i.name||(i.name=`data_${t++}`);let s=i.name;!i.source||i.transform.length>0?e.push(i):s=i.source;for(const o of r.children)n(o,{name:null,source:s,transform:[]});break}}}return n}function A6t(e){const t=[],n=GRe(t);for(const r of e.children)n(r,{source:e.name,name:null,transform:[]});return t}function k6t(e,t){const n=[],r=GRe(n);let i=0;for(const o of e.sources){o.hasName()||(o.dataName=`source_${i++}`);const a=o.assemble();r(o,a)}for(const o of n)o.transform.length===0&&delete o.transform;let s=0;for(const[o,a]of n.entries())(a.transform??[]).length===0&&!a.source&&n.splice(s++,0,n.splice(o,1)[0]);for(const o of n)for(const a of o.transform??[])a.type==="lookup"&&(a.from=e.outputNodes[a.from].getSource());for(const o of n)o.name in t&&(o.values=t[o.name]);return n}function I6t(e){return e==="top"||e==="left"||Ut(e)?"header":"footer"}function R6t(e){for(const t of Su)D6t(e,t);Sce(e,"x"),Sce(e,"y")}function D6t(e,t){var o;const{facet:n,config:r,child:i,component:s}=e;if(e.channelHasField(t)){const a=n[t],l=cx("title",null,r,t);let u=dw(a,r,{allowDisabling:!0,includeDefault:l===void 0||!!l});i.component.layoutHeaders[t].title&&(u=Ge(u)?u.join(", "):u,u+=` / ${i.component.layoutHeaders[t].title}`,i.component.layoutHeaders[t].title=null);const c=cx("labelOrient",a.header,r,t),d=a.header!==null?Li((o=a.header)==null?void 0:o.labels,r.header.labels,!0):!1,f=Dn(["bottom","right"],c)?"footer":"header";s.layoutHeaders[t]={title:a.header!==null?u:null,facetFieldDef:a,[f]:t==="facet"?[]:[YRe(e,t,d)]}}}function YRe(e,t,n){const r=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(r)?e.child.getSizeSignalRef(r):void 0,axes:[]}}function Sce(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:r,resolve:i}=e.component;if(i.axis[t]=XX(i,t),i.axis[t]==="shared"){const s=t==="x"?"column":"row",o=r[s];for(const a of n.component.axes[t]){const l=I6t(a.get("orient"));o[l]??(o[l]=[YRe(e,s,!1)]);const u=C2(a,"main",e.config,{header:!0});u&&o[l][0].axes.push(u),a.mainExtracted=!0}}}}function P6t(e){iQ(e),CN(e,"width"),CN(e,"height")}function N6t(e){iQ(e);const t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";CN(e,t),CN(e,n)}function iQ(e){for(const t of e.children)t.parseLayoutSize()}function CN(e,t){const n=wRe(t),r=W4(n),i=e.component.resolve,s=e.component.layoutSize;let o;for(const a of e.children){const l=a.component.layoutSize.getWithExplicit(n),u=i.scale[r]??ERe(r,e);if(u==="independent"&&l.value==="step"){o=void 0;break}if(o){if(u==="independent"&&o.value!==l.value){o=void 0;break}o=P0(o,l,n,"")}else o=l}if(o){for(const a of e.children)e.renameSignal(a.getName(n),e.getName(t)),a.component.layoutSize.set(n,"merged",!1);s.setWithExplicit(t,o)}else s.setWithExplicit(t,{explicit:!1,value:void 0})}function O6t(e){const{size:t,component:n}=e;for(const r of Gp){const i=yl(r);if(t[i]){const s=t[i];n.layoutSize.set(i,$f(s)?"step":s,!0)}else{const s=$6t(e,i);n.layoutSize.set(i,s,!1)}}}function $6t(e,t){const n=t==="width"?"x":"y",r=e.config,i=e.getScaleComponent(n);if(i){const s=i.get("type"),o=i.get("range");if(Vs(s)){const a=wN(r.view,t);return e1(o)||$f(a)?"step":a}else return tz(r.view,t)}else{if(e.hasProjection||e.mark==="arc")return tz(r.view,t);{const s=wN(r.view,t);return $f(s)?s.step:s}}}function xz(e,t,n){return _t(t,{suffix:`by_${_t(e)}`,...n})}class oT extends VRe{constructor(t,n,r,i){super(t,"facet",n,r,i,t.resolve),this.child=uQ(t.spec,this,this.getName("child"),void 0,i),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!GS(t))return{facet:this.initFacetFieldDef(t,"facet")};const n=st(t),r={};for(const i of n){if(![op,ap].includes(i)){dt(Y4(i,"facet"));break}const s=t[i];if(s.field===void 0){dt(X7(s,i));break}r[i]=this.initFacetFieldDef(s,i)}return r}initFacetFieldDef(t,n){const r=CX(t,n);return r.header?r.header=co(r.header):r.header===null&&(r.header=null),r}channelHasField(t){return at(this.facet,t)}fieldDef(t){return this.facet[t]}parseData(){this.component.data=D6(this),this.child.parseData()}parseLayoutSize(){iQ(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection,Object.values(this.component.selection).some(t=>bf(t))&&eX(ZK)}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),R6t(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){const t={};for(const n of Su)for(const r of YX){const i=this.component.layoutHeaders[n],s=i[r],{facetFieldDef:o}=i;if(o){const a=cx("titleOrient",o.header,this.config,n);if(["right","bottom"].includes(a)){const l=b6(n,a);t.titleAnchor??(t.titleAnchor={}),t.titleAnchor[l]="end"}}if(s!=null&&s[0]){const a=n==="row"?"height":"width",l=r==="header"?"headerBand":"footerBand";n!=="facet"&&!this.child.component.layoutSize.get(a)&&(t[l]??(t[l]={}),t[l][n]=.5),i.title&&(t.offset??(t.offset={}),t.offset[n==="row"?"rowTitle":"columnTitle"]=10)}}return t}assembleDefaultLayout(){const{column:t,row:n}=this.facet,r=t?this.columnDistinctSignal():n?1:void 0;let i="all";return(!n&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(i="none"),{...this.getHeaderLayoutMixins(),...r?{columns:r}:{},bounds:"full",align:i}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof oT))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof oT?{...this.channelHasField("column")?{encode:{update:{columns:{field:_t(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(t)}:super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],n=[],r=[];if(this.child instanceof oT){if(this.child.channelHasField("column")){const i=_t(this.child.facet.column);t.push(i),n.push("distinct"),r.push(`distinct_${i}`)}}else for(const i of Gp){const s=this.child.component.scales[i];if(s&&!s.merged){const o=s.get("type"),a=s.get("range");if(Vs(o)&&e1(a)){const l=x6(this.child,i),u=tQ(l);u?(t.push(u),n.push("distinct"),r.push(`distinct_${u}`)):dt(JK(i))}}}return{fields:t,ops:n,as:r}}assembleFacet(){const{name:t,data:n}=this.component.data.facetRoot,{row:r,column:i}=this.facet,{fields:s,ops:o,as:a}=this.getCardinalityAggregateForChild(),l=[];for(const c of Su){const d=this.facet[c];if(d){l.push(_t(d));const{bin:f,sort:h}=d;if(qr(f)&&l.push(_t(d,{binSuffix:"end"})),lp(h)){const{field:p,op:m=t6}=h,g=xz(d,h);r&&i?(s.push(g),o.push("max"),a.push(g)):(s.push(p),o.push(m),a.push(g))}else if(Ge(h)){const p=ux(d,c);s.push(p),o.push("max"),a.push(p)}}}const u=!!r&&!!i;return{name:t,data:n,groupby:l,...u||s.length>0?{aggregate:{...u?{cross:u}:{},...s.length?{fields:s,ops:o,as:a}:{}}}:{}}}facetSortFields(t){const{facet:n}=this,r=n[t];return r?lp(r.sort)?[xz(r,r.sort,{expr:"datum"})]:Ge(r.sort)?[ux(r,t,{expr:"datum"})]:[_t(r,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:n}=this,r=n[t];if(r){const{sort:i}=r;return[(lp(i)?i.order:!Ge(i)&&i)||"ascending"]}return[]}assembleLabelTitle(){var i;const{facet:t,config:n}=this;if(t.facet)return pz(t.facet,"facet",n);const r={row:["top","bottom"],column:["left","right"]};for(const s of GX)if(t[s]){const o=cx("labelOrient",(i=t[s])==null?void 0:i.header,n,s);if(r[s].includes(o))return pz(t[s],s,n)}}assembleMarks(){const{child:t}=this,n=this.component.data.facetRoot,r=A6t(n),i=t.assembleGroupEncodeEntry(!1),s=this.assembleLabelTitle()||t.assembleTitle(),o=t.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...s?{title:s}:{},...o?{style:o}:{},from:{facet:this.assembleFacet()},sort:{field:Su.map(l=>this.facetSortFields(l)).flat(),order:Su.map(l=>this.facetSortOrder(l)).flat()},...r.length>0?{data:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup(zNt(this,[]))}]}getMapping(){return this.facet}}function M6t(e,t){const{row:n,column:r}=t;if(n&&r){let i=null;for(const s of[n,r])if(lp(s.sort)){const{field:o,op:a=t6}=s.sort;e=i=new o1(e,{joinaggregate:[{op:a,field:o,as:xz(s,s.sort,{forAs:!0})}],groupby:[_t(s)]})}return i}return null}function KRe(e,t){var n,r,i,s;for(const o of t){const a=o.data;if(e.name&&o.hasName()&&e.name!==o.dataName)continue;const l=(n=e.format)==null?void 0:n.mesh,u=(r=a.format)==null?void 0:r.feature;if(l&&u)continue;const c=(i=e.format)==null?void 0:i.feature;if((c||u)&&c!==u)continue;const d=(s=a.format)==null?void 0:s.mesh;if(!((l||d)&&l!==d)){if(mC(e)&&mC(a)){if(Bl(e.values,a.values))return o}else if(ox(e)&&ox(a)){if(e.url===a.url)return o}else if(IIe(e)&&e.name===o.dataName)return o}}return null}function L6t(e,t){if(e.data||!e.parent){if(e.data===null){const r=new bv({values:[]});return t.push(r),r}const n=KRe(e.data,t);if(n)return c0(e.data)||(n.data.format=TAe({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const r=new bv(e.data);return t.push(r),r}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function F6t(e,t,n){let r=0;for(const i of t.transforms){let s,o;if(mNt(i))o=e=new lx(e,i),s="derived";else if(LX(i)){const a=k4t(i);o=e=Wo.makeWithAncestors(e,{},a,n)??e,e=new yE(e,t,i.filter)}else if(TIe(i))o=e=wf.makeFromTransform(e,i,t),s="number";else if(yNt(i))s="date",n.getWithExplicit(i.field).value===void 0&&(e=new Wo(e,{[i.field]:s}),n.set(i.field,s,!1)),o=e=vf.makeFromTransform(e,i);else if(vNt(i))o=e=Kc.makeFromTransform(e,i),s="number",qX(t)&&(e=new N0(e));else if(_Ie(i))o=e=bC.make(e,t,i,r++),s="derived";else if(fNt(i))o=e=new bE(e,i),s="number";else if(hNt(i))o=e=new o1(e,i),s="number";else if(bNt(i))o=e=cp.makeFromTransform(e,i),s="derived";else if(wNt(i))o=e=new C6(e,i),s="derived";else if(xNt(i))o=e=new _6(e,i),s="derived";else if(pNt(i))o=e=new T6(e,i),s="derived";else if(oNt(i))o=e=new I6(e,i),s="derived";else if(dNt(i))e=new R6(e,i);else if(gNt(i))o=e=Fy.makeFromTransform(e,i),s="derived";else if(aNt(i))o=e=new E6(e,i),s="derived";else if(lNt(i))o=e=new A6(e,i),s="derived";else if(uNt(i))o=e=new k6(e,i),s="derived";else if(cNt(i))o=e=new S6(e,i),s="derived";else{dt(jRt(i));continue}if(o&&s!==void 0)for(const a of o.producedFields()??[])n.set(a,s,!1)}return e}function D6(e){var g;let t=L6t(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:r}=e.component.data,i=e.data,o=!(i&&(c0(i)||ox(i)||mC(i)))&&e.parent?e.parent.component.data.ancestorParse.clone():new NNt;c0(i)?(RIe(i)?t=new rA(t,i.sequence):FX(i)&&(t=new nA(t,i.graticule)),o.parseNothing=!0):((g=i==null?void 0:i.format)==null?void 0:g.parse)===null&&(o.parseNothing=!0),t=Wo.makeExplicit(t,e,o)??t,t=new N0(t);const a=e.parent&&wE(e.parent);(pi(e)||Wl(e))&&a&&(t=wf.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=F6t(t,e,o));const l=R4t(e),u=I4t(e);t=Wo.makeWithAncestors(t,{},{...l,...u},o)??t,pi(e)&&(t=hw.parseAll(t,e),t=vC.parseAll(t,e)),(pi(e)||Wl(e))&&(a||(t=wf.makeFromEncoding(t,e)??t),t=vf.makeFromEncoding(t,e)??t,t=lx.parseAllForSortIndex(t,e));const c=t=mI(gi.Raw,e,t);if(pi(e)){const b=Kc.makeFromEncoding(t,e);b&&(t=b,qX(e)&&(t=new N0(t))),t=Fy.makeFromEncoding(t,e)??t,t=cp.makeFromEncoding(t,e)??t}let d,f;if(pi(e)){const{markDef:b,mark:v,config:x}=e,E=kr("invalid",b,x),{marks:_,scales:C}=f=PIe({invalid:E,isPath:og(v)});_!==C&&C==="include-invalid-values"&&(d=t=mI(gi.PreFilterInvalid,e,t)),_==="exclude-invalid-values"&&(t=dx.make(t,e,f)??t)}const h=t=mI(gi.Main,e,t);let p;if(pi(e)&&f){const{marks:b,scales:v}=f;b==="include-invalid-values"&&v==="exclude-invalid-values"&&(t=dx.make(t,e,f)??t,p=t=mI(gi.PostFilterInvalid,e,t))}pi(e)&&C$t(e,h);let m=null;if(Wl(e)){const b=e.getName("facet");t=M6t(t,e.facet)??t,m=new vE(t,e,b,h.getSource()),n[b]=m}return{...e.component.data,outputNodes:n,outputNodeRefCounts:r,raw:c,main:h,facetRoot:m,ancestorParse:o,preFilterInvalid:d,postFilterInvalid:p}}function mI(e,t,n){const{outputNodes:r,outputNodeRefCounts:i}=t.component.data,s=t.getDataName(e),o=new ll(n,s,e,i);return r[s]=o,o}class j6t extends rQ{constructor(t,n,r,i){var s,o,a,l;super(t,"concat",n,r,i,t.resolve),(((o=(s=t.resolve)==null?void 0:s.axis)==null?void 0:o.x)==="shared"||((l=(a=t.resolve)==null?void 0:a.axis)==null?void 0:l.y)==="shared")&&dt(MRt),this.children=this.getChildren(t).map((u,c)=>uQ(u,this,this.getName(`concat_${c}`),void 0,i))}parseData(){this.component.data=D6(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of st(t.component.selection))this.component.selection[n]=t.component.selection[n]}Object.values(this.component.selection).some(t=>bf(t))&&eX(ZK)}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return l6(t)?t.vconcat:$X(t)?t.hconcat:t.concat}parseLayoutSize(){N6t(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=KX(this);for(const n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{const n=t.assembleTitle(),r=t.assembleGroupStyle(),i=t.assembleGroupEncodeEntry(!1);return{type:"group",name:t.getName("group"),...n?{title:n}:{},...r?{style:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){const t=this.layout.columns;return{...t!=null?{columns:t}:{},bounds:"full",align:"each"}}}function B6t(e){return e===!1||e===null}const z6t={disable:1,gridScale:1,scale:1,...Gke,labelExpr:1,encode:1},XRe=st(z6t);class sQ extends Kp{constructor(t={},n={},r=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=r}clone(){return new sQ(ln(this.explicit),ln(this.implicit),this.mainExtracted)}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!B6t(this.get(t))}hasOrientSignalRef(){return Ut(this.explicit.orient)}}function U6t(e,t,n){const{encoding:r,config:i}=e,s=fs(r[t])??fs(r[eh(t)]),o=e.axis(t)||{},{format:a,formatType:l}=o;if(pv(l))return{text:Bc({fieldOrDatumDef:s,field:"datum.value",format:a,formatType:l,config:i}),...n};if(a===void 0&&l===void 0&&i.customFormatTypes){if(rx(s)==="quantitative"){if(ix(s)&&s.stack==="normalize"&&i.normalizedNumberFormatType)return{text:Bc({fieldOrDatumDef:s,field:"datum.value",format:i.normalizedNumberFormat,formatType:i.normalizedNumberFormatType,config:i}),...n};if(i.numberFormatType)return{text:Bc({fieldOrDatumDef:s,field:"datum.value",format:i.numberFormat,formatType:i.numberFormatType,config:i}),...n}}if(rx(s)==="temporal"&&i.timeFormatType&&mt(s)&&!s.timeUnit)return{text:Bc({fieldOrDatumDef:s,field:"datum.value",format:i.timeFormat,formatType:i.timeFormatType,config:i}),...n}}return n}function q6t(e){return Gp.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[X6t(n,e)]),t),{})}const H6t={bottom:"top",top:"bottom",left:"right",right:"left"};function W6t(e){const{axes:t,resolve:n}=e.component,r={top:0,bottom:0,right:0,left:0};for(const i of e.children){i.parseAxesAndHeaders();for(const s of st(i.component.axes))n.axis[s]=XX(e.component.resolve,s),n.axis[s]==="shared"&&(t[s]=V6t(t[s],i.component.axes[s]),t[s]||(n.axis[s]="independent",delete t[s]))}for(const i of Gp){for(const s of e.children)if(s.component.axes[i]){if(n.axis[i]==="independent"){t[i]=(t[i]??[]).concat(s.component.axes[i]);for(const o of s.component.axes[i]){const{value:a,explicit:l}=o.getWithExplicit("orient");if(!Ut(a)){if(r[a]>0&&!l){const u=H6t[a];r[a]>r[u]&&o.set("orient",u,!1)}r[a]++}}}delete s.component.axes[i]}if(n.axis[i]==="independent"&&t[i]&&t[i].length>1)for(const[s,o]of(t[i]||[]).entries())s>0&&o.get("grid")&&!o.explicit.grid&&(o.implicit.grid=!1)}}function V6t(e,t){if(e){if(e.length!==t.length)return;const n=e.length;for(let r=0;r<n;r++){const i=e[r],s=t[r];if(!!i!=!!s)return;if(i&&s){const o=i.getWithExplicit("orient"),a=s.getWithExplicit("orient");if(o.explicit&&a.explicit&&o.value!==a.value)return;e[r]=G6t(i,s)}}}else return t.map(n=>n.clone());return e}function G6t(e,t){for(const n of XRe){const r=P0(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(i,s)=>{switch(n){case"title":return QAe(i,s);case"gridScale":return{explicit:i.explicit,value:Li(i.value,s.value)}}return c6(i,s,n,"axis")});e.setWithExplicit(n,r)}return e}function Y6t(e,t,n,r,i){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(Ut(n.labelAngle)?n.labelAngle:hC(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===mRe(r,i))return!0}return e===n[t]}const K6t=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function X6t(e,t){var b,v;let n=t.axis(e);const r=new sQ,i=fs(t.encoding[e]),{mark:s,config:o}=t,a=(n==null?void 0:n.orient)||((b=o[e==="x"?"axisX":"axisY"])==null?void 0:b.orient)||((v=o.axis)==null?void 0:v.orient)||$$t(e),l=t.getScaleComponent(e).get("type"),u=k$t(e,l,a,t.config),c=n!==void 0?!n:fz("disable",o.style,n==null?void 0:n.style,u).configValue;if(r.set("disable",c,n!==void 0),c)return r;n=n||{};const d=P$t(i,n,e,o.style,u),f=Nke(n.formatType,i,l),h=Pke(i,i.type,n.format,n.formatType,o,!0),p={fieldOrDatumDef:i,axis:n,channel:e,model:t,scaleType:l,orient:a,labelAngle:d,format:h,formatType:f,mark:s,config:o};for(const x of XRe){const E=x in dce?dce[x](p):Due(x)?n[x]:void 0,_=E!==void 0,C=Y6t(E,x,n,t,e);if(_&&C)r.set(x,E,C);else{const{configValue:S=void 0,configFrom:k=void 0}=Due(x)&&x!=="values"?fz(x,o.style,n.style,u):{},R=S!==void 0;_&&!R?r.set(x,E,C):(k!=="vgAxisConfig"||K6t.has(x)&&R||QS(S)||Ut(S))&&r.set(x,S,!1)}}const m=n.encoding??{},g=Vke.reduce((x,E)=>{if(!r.hasAxisPart(E))return x;const _=xRe(m[E]??{},t),C=E==="labels"?U6t(t,e,_):_;return C!==void 0&&!Ir(C)&&(x[E]={update:C}),x},{});return Ir(g)||r.set("encode",g,!!n.encoding||n.labelAngle!==void 0),r}function Q6t({encoding:e,size:t}){for(const n of Gp){const r=yl(n);$f(t[r])&&e0(e[n])&&(delete t[r],dt(nke(r)))}return t}const J6t={vgMark:"arc",encodeEntry:e=>({...Ju(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...wa("x",e,{defaultPos:"mid"}),...wa("y",e,{defaultPos:"mid"}),...kp(e,"radius"),...kp(e,"theta")})},Z6t={vgMark:"area",encodeEntry:e=>({...Ju(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...xN("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"}),...xN("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"}),...UX(e)})},e5t={vgMark:"rect",encodeEntry:e=>({...Ju(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...kp(e,"x"),...kp(e,"y")})},t5t={vgMark:"shape",encodeEntry:e=>({...Ju(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[{type:"geoshape",projection:e.projectionName(),...n&&mt(n)&&n.type===mE?{field:_t(n,{expr:"datum"})}:{}}]}},n5t={vgMark:"image",encodeEntry:e=>({...Ju(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...kp(e,"x"),...kp(e,"y"),...BX(e,"url")})},r5t={vgMark:"line",encodeEntry:e=>({...Ju(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...wa("x",e,{defaultPos:"mid"}),...wa("y",e,{defaultPos:"mid"}),...po("size",e,{vgChannel:"strokeWidth"}),...UX(e)})},i5t={vgMark:"trail",encodeEntry:e=>({...Ju(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...wa("x",e,{defaultPos:"mid"}),...wa("y",e,{defaultPos:"mid"}),...po("size",e),...UX(e)})};function oQ(e,t){const{config:n}=e;return{...Ju(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...wa("x",e,{defaultPos:"mid"}),...wa("y",e,{defaultPos:"mid"}),...po("size",e),...po("angle",e),...s5t(e,n,t)}}function s5t(e,t,n){return n?{shape:{value:n}}:po("shape",e)}const o5t={vgMark:"symbol",encodeEntry:e=>oQ(e)},a5t={vgMark:"symbol",encodeEntry:e=>oQ(e,"circle")},l5t={vgMark:"symbol",encodeEntry:e=>oQ(e,"square")},u5t={vgMark:"rect",encodeEntry:e=>({...Ju(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...kp(e,"x"),...kp(e,"y")})},c5t={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:{...Ju(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...xN("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"}),...xN("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"}),...po("size",e,{vgChannel:"strokeWidth"})}}},d5t={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...Ju(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...wa("x",e,{defaultPos:"mid"}),...wa("y",e,{defaultPos:"mid"}),...BX(e),...po("size",e,{vgChannel:"fontSize"}),...po("angle",e),...ece("align",f5t(e.markDef,n,t)),...ece("baseline",h5t(e.markDef,n,t)),...wa("radius",e,{defaultPos:null}),...wa("theta",e,{defaultPos:null})}}};function f5t(e,t,n){if(kr("align",e,n)===void 0)return"center"}function h5t(e,t,n){if(kr("baseline",e,n)===void 0)return"middle"}const p5t={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,r=n.orient,i=r==="horizontal"?"x":"y",s=r==="horizontal"?"y":"x",o=r==="horizontal"?"height":"width";return{...Ju(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...kp(e,i),...wa(s,e,{defaultPos:"mid",vgChannel:s==="y"?"yc":"xc"}),[o]:Kr(kr("thickness",n,t))}}},gI={arc:J6t,area:Z6t,bar:e5t,circle:a5t,geoshape:t5t,image:n5t,line:r5t,point:o5t,rect:u5t,rule:c5t,square:l5t,text:d5t,tick:p5t,trail:i5t};function m5t(e){if(Dn([Z4,Q4,fDt],e.mark)){const t=Zke(e.mark,e.encoding);if(t.length>0)return g5t(e,t)}else if(e.mark===J4){const t=Y7.some(n=>kr(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return y5t(e)}return aQ(e)}const Ace="faceted_path_";function g5t(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:Ace+e.requestDataName(gi.Main),data:e.requestDataName(gi.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:aQ(e,{fromPrefix:Ace})}]}const kce="stack_group_";function y5t(e){var u;const[t]=aQ(e,{fromPrefix:kce}),n=e.scaleName(e.stack.fieldChannel),r=(c={})=>e.vgField(e.stack.fieldChannel,c),i=(c,d)=>{const f=[r({prefix:"min",suffix:"start",expr:d}),r({prefix:"max",suffix:"start",expr:d}),r({prefix:"min",suffix:"end",expr:d}),r({prefix:"max",suffix:"end",expr:d})];return`${c}(${f.map(h=>`scale('${n}',${h})`).join(",")})`};let s,o;e.stack.fieldChannel==="x"?(s={...Qw(t.encode.update,["y","yc","y2","height",...Y7]),x:{signal:i("min","datum")},x2:{signal:i("max","datum")},clip:{value:!0}},o={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...al(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(s={...Qw(t.encode.update,["x","xc","x2","width"]),y:{signal:i("min","datum")},y2:{signal:i("max","datum")},clip:{value:!0}},o={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...al(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const c of Y7){const d=Nf(c,e.markDef,e.config);t.encode.update[c]?(s[c]=t.encode.update[c],delete t.encode.update[c]):d&&(s[c]=Kr(d)),d&&(t.encode.update[c]={value:0})}const a=[];if(((u=e.stack.groupbyChannels)==null?void 0:u.length)>0)for(const c of e.stack.groupbyChannels){const d=e.fieldDef(c),f=_t(d);f&&a.push(f),(d!=null&&d.bin||d!=null&&d.timeUnit)&&a.push(_t(d,{binSuffix:"end"}))}return s=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((c,d)=>{if(t.encode.update[d])return{...c,[d]:t.encode.update[d]};{const f=Nf(d,e.markDef,e.config);return f!==void 0?{...c,[d]:Kr(f)}:c}},s),s.stroke&&(s.strokeForeground={value:!0},s.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(gi.Main),name:kce+e.requestDataName(gi.Main),groupby:a,aggregate:{fields:[r({suffix:"start"}),r({suffix:"start"}),r({suffix:"end"}),r({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:s},marks:[{type:"group",encode:{update:o},marks:[t]}]}]}function v5t(e){const{encoding:t,stack:n,mark:r,markDef:i,config:s}=e,o=t.order;if(!(!Ge(o)&&id(o)&&V7(o.value)||!o&&V7(kr("order",i,s)))){if((Ge(o)||mt(o))&&!n)return YAe(o,{expr:"datum"});if(og(r)){const a=i.orient==="horizontal"?"y":"x",l=t[a];if(mt(l))return{field:a}}}}function aQ(e,t={fromPrefix:""}){const{mark:n,markDef:r,encoding:i,config:s}=e,o=Li(r.clip,b5t(e),w5t(e)),a=VAe(r),l=i.key,u=v5t(e),c=x5t(e),d=kr("aria",r,s),f=gI[n].postEncodingTransform?gI[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:gI[n].vgMark,...o?{clip:o}:{},...a?{style:a}:{},...l?{key:l.field}:{},...u?{sort:u}:{},...c||{},...d===!1?{aria:d}:{},from:{data:t.fromPrefix+e.requestDataName(gi.Main)},encode:{update:gI[n].encodeEntry(e)},...f?{transform:f}:{}}]}function b5t(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t!=null&&t.get("selectionExtent")||n!=null&&n.get("selectionExtent")?!0:void 0}function w5t(e){const t=e.component.projection;return t&&!t.isFit?!0:void 0}function x5t(e){if(!e.component.selection)return null;const t=st(e.component.selection).length;let n=t,r=e.parent;for(;r&&n===0;)n=st(r.component.selection).length,r=r.parent;return n?{interactive:t>0||e.mark==="geoshape"||!!e.encoding.tooltip||!!e.markDef.tooltip}:null}class QRe extends VRe{constructor(t,n,r,i={},s){super(t,"unit",n,r,s,void 0,Nue(t)?t.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[],this.correctDataNames=u=>{var c,d,f;return(c=u.from)!=null&&c.data&&(u.from.data=this.lookupDataSource(u.from.data),"time"in this.encoding&&(u.from.data=u.from.data+OIe)),(f=(d=u.from)==null?void 0:d.facet)!=null&&f.data&&(u.from.facet.data=this.lookupDataSource(u.from.facet.data)),u};const o=Of(t.mark)?{...t.mark}:{type:t.mark},a=o.type;o.filled===void 0&&(o.filled=KPt(o,s,{graticule:t.data&&FX(t.data)}));const l=this.encoding=ZDt(t.encoding||{},a,o.filled,s);this.markDef=wIe(o,l,s),this.size=Q6t({encoding:l,size:Nue(t)?{...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}}:i}),this.stack=bIe(this.markDef,l),this.specifiedScales=this.initScales(a,l),this.specifiedAxes=this.initAxes(l),this.specifiedLegends=this.initLegends(l),this.specifiedProjection=t.projection,this.selection=(t.params??[]).filter(u=>NX(u))}get hasProjection(){const{encoding:t}=this,n=this.mark===Cke,r=t&&WIt.some(i=>fn(t[i]));return n||r}scaleDomain(t){const n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return KK.reduce((r,i)=>{const s=fs(n[i]);return s&&(r[i]=this.initScale(s.scale??{})),r},{})}initScale(t){const{domain:n,range:r}=t,i=co(t);return Ge(n)&&(i.domain=n.map(Ll)),Ge(r)&&(i.range=r.map(Ll)),i}initAxes(t){return Gp.reduce((n,r)=>{const i=t[r];if(fn(i)||r===ai&&fn(t.x2)||r===Xs&&fn(t.y2)){const s=fn(i)?i.axis:void 0;n[r]=s&&this.initAxis({...s})}return n},{})}initAxis(t){const n=st(t),r={};for(const i of n){const s=t[i];r[i]=QS(s)?WAe(s):Ll(s)}return r}initLegends(t){return nRt.reduce((n,r)=>{const i=fs(t[r]);if(i&&iRt(r)){const s=i.legend;n[r]=s&&co(s)}return n},{})}parseData(){this.component.data=D6(this)}parseLayoutSize(){O6t(this)}parseSelections(){this.component.selection=T$t(this,this.selection)}parseMarkGroup(){this.component.mark=m5t(this)}parseAxesAndHeaders(){this.component.axes=q6t(this)}assembleSelectionTopLevelSignals(t){return UNt(this,t)}assembleSignals(){return[...fRe(this),...BNt(this,[])]}assembleSelectionData(t){return qNt(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return KX(this)}assembleMarks(){let t=this.component.mark??[];return(!this.parent||!wE(this.parent))&&(t=FIe(this,t)),t.map(this.correctDataNames)}assembleGroupStyle(){const{style:t}=this.view||{};return t!==void 0?t:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return My(this.encoding,t)}fieldDef(t){const n=this.encoding[t];return sd(n)}typedFieldDef(t){const n=this.fieldDef(t);return ka(n)?n:null}}class lQ extends rQ{constructor(t,n,r,i,s){super(t,"layer",n,r,s,t.resolve,t.view);const o={...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}};this.children=t.layer.map((a,l)=>{if(u6(a))return new lQ(a,this,this.getName(`layer_${l}`),o,s);if(Yp(a))return new QRe(a,this,this.getName(`layer_${l}`),o,s);throw new Error(QK(a))})}parseData(){this.component.data=D6(this);for(const t of this.children)t.parseData()}parseLayoutSize(){P6t(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of st(t.component.selection))this.component.selection[n]=t.component.selection[n]}Object.values(this.component.selection).some(t=>bf(t))&&eX(ZK)}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){W6t(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),fRe(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),KX(this))}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleGroupStyle(){const t=new Set;for(const r of this.children)for(const i of St(r.assembleGroupStyle()))t.add(i);const n=Array.from(t);return n.length>1?n:n.length===1?n[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return HNt(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),IRe(this))}}function uQ(e,t,n,r,i){if(n6(e))return new oT(e,t,n,i);if(u6(e))return new lQ(e,t,n,r,i);if(Yp(e))return new QRe(e,t,n,r,i);if(_Pt(e))return new j6t(e,t,n,i);throw new Error(QK(e))}function E5t(e,t={}){t.logger&&S3t(t.logger),t.fieldTitle&&qke(t.fieldTitle);try{const n=vIe(Jx(t.config,e.config)),r=AIe(e,n),i=uQ(r,null,"",void 0,n);return i.parse(),V4t(i.component.data,i),{spec:T5t(i,_5t(e,r.autosize,n,i),e.datasets,e.usermeta),normalized:r}}finally{t.logger&&A3t(),t.fieldTitle&&HDt()}}function _5t(e,t,n,r){const i=r.component.layoutSize.get("width"),s=r.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},r.hasAxisOrientSignalRef()&&(t.resize=!0)):Tt(t)&&(t={type:t}),i&&s&&RNt(t.type)){if(i==="step"&&s==="step")dt(yue()),t.type="pad";else if(i==="step"||s==="step"){const o=i==="step"?"width":"height";dt(yue(W4(o)));const a=o==="width"?"height":"width";t.type=DNt(a)}}return{...st(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t},...Wue(n,!1),...Wue(e,!0)}}function T5t(e,t,n={},r){const i=e.config?LPt(e.config):void 0,s=k6t(e.component.data,n),o=e.assembleSelectionData(s),a=e.assembleProjections(),l=e.assembleTitle(),u=e.assembleGroupStyle(),c=e.assembleGroupEncodeEntry(!0);let d=e.assembleLayoutSignals();d=d.filter(p=>(p.name==="width"||p.name==="height")&&p.value!==void 0?(t[p.name]=+p.value,!1):!0);const{params:f,...h}=t;return{$schema:"https://vega.github.io/schema/vega/v5.json",...e.description?{description:e.description}:{},...h,...l?{title:l}:{},...u?{style:u}:{},...c?{encode:{update:c}}:{},data:o,...a.length>0?{projections:a}:{},...e.assembleGroup([...d,...e.assembleSelectionTopLevelSignals([]),...pIe(f)]),...i?{config:i}:{},...r?{usermeta:r}:{}}}const C5t=jIt.version,S5t=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth:Zw,accessPathWithDatum:zK,accessWithDatumToUnescapedPath:br,compile:E5t,contains:Dn,deepEqual:Bl,deleteNestedProperty:dN,duplicate:ln,entries:I0,every:FK,fieldIntersection:BK,flatAccessWithDatum:SAe,getFirstDefined:Li,hasIntersection:jK,hasProperty:at,hash:Mn,internalField:IAe,isBoolean:fC,isEmpty:Ir,isEqual:zIt,isInternalField:RAe,isNullOrFalse:V7,isNumeric:j4,keys:st,logicalExpr:rT,mergeDeep:TAe,never:_Ae,normalize:AIe,normalizeAngle:hC,omit:al,pick:Qw,prefixGenerator:G7,removePathFromField:hE,replaceAll:lv,replacePathInField:Fu,resetIdCounter:qIt,setEqual:CAe,some:Jw,stringify:Rr,titleCase:BS,unique:of,uniqueId:kAe,vals:_o,varName:si,version:C5t},Symbol.toStringTag,{value:"Module"}));function JRe(e){const[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}}var A5t="2.15.0",k5t={version:A5t};const sb="#fff",Ice="#888",I5t={background:"#333",view:{stroke:Ice},title:{color:sb,subtitleColor:sb},style:{"guide-label":{fill:sb},"guide-title":{fill:sb}},axis:{domainColor:sb,gridColor:Ice,tickColor:sb}},Rg="#4572a7",R5t={background:"#fff",arc:{fill:Rg},area:{fill:Rg},line:{stroke:Rg,strokeWidth:2},path:{stroke:Rg},rect:{fill:Rg},shape:{stroke:Rg},symbol:{fill:Rg,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},Dg="#30a2da",wF="#cbcbcb",D5t="#999",P5t="#333",Rce="#f0f0f0",Dce="#333",N5t={arc:{fill:Dg},area:{fill:Dg},axis:{domainColor:wF,grid:!0,gridColor:wF,gridWidth:1,labelColor:D5t,labelFontSize:10,titleColor:P5t,tickColor:wF,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:Rce,group:{fill:Rce},legend:{labelColor:Dce,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:Dce,titleFontSize:14,titlePadding:10},line:{stroke:Dg,strokeWidth:2},path:{stroke:Dg,strokeWidth:.5},rect:{fill:Dg},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:Dg},bar:{binSpacing:2,fill:Dg,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},Pg="#000",O5t={group:{fill:"#e5e5e5"},arc:{fill:Pg},area:{fill:Pg},line:{stroke:Pg},path:{stroke:Pg},rect:{fill:Pg},shape:{stroke:Pg},symbol:{fill:Pg,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},$5t=22,M5t="normal",Pce="Benton Gothic, sans-serif",Nce=11.5,L5t="normal",Ng="#82c6df",xF="Benton Gothic Bold, sans-serif",Oce="normal",$ce=13,N_={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"]},F5t={background:"#ffffff",title:{anchor:"start",color:"#000000",font:xF,fontSize:$5t,fontWeight:M5t},arc:{fill:Ng},area:{fill:Ng},line:{stroke:Ng,strokeWidth:2},path:{stroke:Ng},rect:{fill:Ng},shape:{stroke:Ng},symbol:{fill:Ng,size:30},axis:{labelFont:Pce,labelFontSize:Nce,labelFontWeight:L5t,titleFont:xF,titleFontSize:$ce,titleFontWeight:Oce},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:Pce,labelFontSize:Nce,symbolType:"square",titleFont:xF,titleFontSize:$ce,titleFontWeight:Oce},range:{category:N_["category-6"],diverging:N_["fireandice-6"],heatmap:N_["fire-7"],ordinal:N_["fire-7"],ramp:N_["fire-7"]}},Og="#ab5787",yI="#979797",j5t={background:"#f9f9f9",arc:{fill:Og},area:{fill:Og},line:{stroke:Og},path:{stroke:Og},rect:{fill:Og},shape:{stroke:Og},symbol:{fill:Og,size:30},axis:{domainColor:yI,domainWidth:.5,gridWidth:.2,labelColor:yI,tickColor:yI,tickWidth:.2,titleColor:yI},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},$g="#3e5c69",B5t={background:"#fff",arc:{fill:$g},area:{fill:$g},line:{stroke:$g},path:{stroke:$g},rect:{fill:$g},shape:{stroke:$g},symbol:{fill:$g},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},yu="#1696d2",Mce="#000000",z5t="#FFFFFF",vI="Lato",EF="Lato",U5t="Lato",q5t="#DEDDDD",H5t=18,O_={"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},W5t={background:z5t,title:{anchor:"start",fontSize:H5t,font:vI},axisX:{domain:!0,domainColor:Mce,domainWidth:1,grid:!1,labelFontSize:12,labelFont:EF,labelAngle:0,tickColor:Mce,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:vI},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:q5t,gridWidth:1,labelFontSize:12,labelFont:EF,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:vI,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:EF,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:vI,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:O_["six-groups-cat-1"],diverging:O_["diverging-colors"],heatmap:O_["diverging-colors"],ordinal:O_["six-groups-seq"],ramp:O_["shades-blue"]},area:{fill:yu},rect:{fill:yu},line:{color:yu,stroke:yu,strokeWidth:5},trail:{color:yu,stroke:yu,strokeWidth:0,size:1},path:{stroke:yu,strokeWidth:.5},point:{filled:!0},text:{font:U5t,color:yu,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:yu,stroke:null}},arc:{fill:yu},shape:{stroke:yu},symbol:{fill:yu,size:30}},Mg="#3366CC",Lce="#ccc",bI="Arial, sans-serif",V5t={arc:{fill:Mg},area:{fill:Mg},path:{stroke:Mg},rect:{fill:Mg},shape:{stroke:Mg},symbol:{stroke:Mg},circle:{fill:Mg},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:bI,fontSize:12},"guide-title":{font:bI,fontSize:12},"group-title":{font:bI,fontSize:12}},title:{font:bI,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:Lce,tickColor:Lce,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},cQ=e=>e*(1/3+1),Fce=cQ(9),jce=cQ(10),Bce=cQ(12),$_="Segoe UI",zce="wf_standard-font, helvetica, arial, sans-serif",Uce="#252423",M_="#605E5C",qce="transparent",G5t="#C8C6C4",gc="#118DFF",Y5t="#12239E",K5t="#E66C37",X5t="#6B007B",Q5t="#E044A7",J5t="#744EC2",Z5t="#D9B300",e8t="#D64550",ZRe=gc,e3e="#DEEFFF",Hce=[e3e,ZRe],t8t=[e3e,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",ZRe],n8t={view:{stroke:qce},background:qce,font:$_,header:{titleFont:zce,titleFontSize:Bce,titleColor:Uce,labelFont:$_,labelFontSize:jce,labelColor:M_},axis:{ticks:!1,grid:!1,domain:!1,labelColor:M_,labelFontSize:Fce,titleFont:zce,titleColor:Uce,titleFontSize:Bce,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:G5t,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:gc},line:{stroke:gc,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:$_,fontSize:Fce,fill:M_},arc:{fill:gc},area:{fill:gc,line:!0,opacity:.6},path:{stroke:gc},rect:{fill:gc},point:{fill:gc,filled:!0,size:75},shape:{stroke:gc},symbol:{fill:gc,strokeWidth:1.5,size:50},legend:{titleFont:$_,titleFontWeight:"bold",titleColor:M_,labelFont:$_,labelFontSize:jce,labelColor:M_,symbolType:"circle",symbolSize:75},range:{category:[gc,Y5t,K5t,X5t,Q5t,J5t,Z5t,e8t],diverging:Hce,heatmap:Hce,ordinal:t8t}},_F='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',r8t='IBM Plex Sans Condensed, system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", sans-serif',TF=400,wI={textPrimary:{g90:"#f4f4f4",g100:"#f4f4f4",white:"#161616",g10:"#161616"},textSecondary:{g90:"#c6c6c6",g100:"#c6c6c6",white:"#525252",g10:"#525252"},layerAccent01:{white:"#e0e0e0",g10:"#e0e0e0",g90:"#525252",g100:"#393939"},gridBg:{white:"#ffffff",g10:"#ffffff",g90:"#161616",g100:"#161616"}},i8t=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],s8t=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function P6({theme:e,background:t}){const n=["white","g10"].includes(e)?"light":"dark",r=wI.gridBg[e],i=wI.textPrimary[e],s=wI.textSecondary[e],o=n==="dark"?i8t:s8t,a=n==="dark"?"#d4bbff":"#6929c4";return{background:t,arc:{fill:a},area:{fill:a},path:{stroke:a},rect:{fill:a},shape:{stroke:a},symbol:{stroke:a},circle:{fill:a},view:{fill:r,stroke:r},group:{fill:r},title:{color:i,anchor:"start",dy:-15,fontSize:16,font:_F,fontWeight:600},axis:{labelColor:s,labelFontSize:12,labelFont:r8t,labelFontWeight:TF,titleColor:i,titleFontWeight:600,titleFontSize:12,grid:!0,gridColor:wI.layerAccent01[e],labelAngle:0},axisX:{titlePadding:10},axisY:{titlePadding:2.5},style:{"guide-label":{font:_F,fill:s,fontWeight:TF},"guide-title":{font:_F,fill:s,fontWeight:TF}},range:{category:o,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const o8t=P6({theme:"white",background:"#ffffff"}),a8t=P6({theme:"g10",background:"#f4f4f4"}),l8t=P6({theme:"g90",background:"#262626"}),u8t=P6({theme:"g100",background:"#161616"}),c8t=k5t.version,d8t=Object.freeze(Object.defineProperty({__proto__:null,carbong10:a8t,carbong100:u8t,carbong90:l8t,carbonwhite:o8t,dark:I5t,excel:R5t,fivethirtyeight:N5t,ggplot2:O5t,googlecharts:V5t,latimes:F5t,powerbi:n8t,quartz:j5t,urbaninstitute:W5t,version:c8t,vox:B5t},Symbol.toStringTag,{value:"Module"}));function f8t(e,t,n,r){if(Ge(e))return`[${e.map(i=>t(Tt(i)?i:Wce(i,n))).join(", ")}]`;if(At(e)){let i="";const{title:s,image:o,...a}=e;s&&(i+=`<h2>${t(s)}</h2>`),o&&(i+=`<img src="${new URL(t(o),r||location.href).href}">`);const l=Object.keys(a);if(l.length>0){i+="<table>";for(const u of l){let c=a[u];c!==void 0&&(At(c)&&(c=Wce(c,n)),i+=`<tr><td class="key">${t(u)}</td><td class="value">${t(c)}</td></tr>`)}i+="</table>"}return i||"{}"}return t(e)}function h8t(e){const t=[];return function(n,r){if(typeof r!="object"||r===null)return r;const i=t.indexOf(this)+1;return t.length=i,t.length>e?"[Object]":t.indexOf(r)>=0?"[Circular]":(t.push(r),r)}}function Wce(e,t){return JSON.stringify(e,h8t(t))}var p8t=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const t3e="vg-tooltip-element",m8t={offsetX:10,offsetY:10,id:t3e,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:g8t,maxDepth:2,formatTooltip:f8t,baseURL:""};function g8t(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function y8t(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return p8t.toString().replace(t3e,e)}function v8t(e,t,n,r){let i=e.clientX+n;i+t.width>window.innerWidth&&(i=+e.clientX-n-t.width);let s=e.clientY+r;return s+t.height>window.innerHeight&&(s=+e.clientY-r-t.height),{x:i,y:s}}class b8t{constructor(t){this.options={...m8t,...t};const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const r=document.createElement("style");r.setAttribute("id",this.options.styleId),r.innerHTML=y8t(n);const i=document.head;i.childNodes.length>0?i.insertBefore(r,i.childNodes[0]):i.appendChild(r)}}tooltipHandler(t,n,r,i){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),i==null||i===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(i,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:s,y:o}=v8t(n,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.style.top=`${o}px`,this.el.style.left=`${s}px`}}var CF={};function w8t(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var SF,Vce;function x8t(){return Vce||(Vce=1,SF=function(e){e.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}),SF}var E8t=ur;ur.Node=wv;ur.create=ur;function ur(e){var t=this;if(t instanceof ur||(t=new ur),t.tail=null,t.head=null,t.length=0,e&&typeof e.forEach=="function")e.forEach(function(i){t.push(i)});else if(arguments.length>0)for(var n=0,r=arguments.length;n<r;n++)t.push(arguments[n]);return t}ur.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t};ur.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}};ur.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}};ur.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)T8t(this,arguments[e]);return this.length};ur.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)C8t(this,arguments[e]);return this.length};ur.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}};ur.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}};ur.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,r=0;n!==null;r++)e.call(t,n.value,r,this),n=n.next};ur.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,r=this.length-1;n!==null;r--)e.call(t,n.value,r,this),n=n.prev};ur.prototype.get=function(e){for(var t=0,n=this.head;n!==null&&t<e;t++)n=n.next;if(t===e&&n!==null)return n.value};ur.prototype.getReverse=function(e){for(var t=0,n=this.tail;n!==null&&t<e;t++)n=n.prev;if(t===e&&n!==null)return n.value};ur.prototype.map=function(e,t){t=t||this;for(var n=new ur,r=this.head;r!==null;)n.push(e.call(t,r.value,this)),r=r.next;return n};ur.prototype.mapReverse=function(e,t){t=t||this;for(var n=new ur,r=this.tail;r!==null;)n.push(e.call(t,r.value,this)),r=r.prev;return n};ur.prototype.reduce=function(e,t){var n,r=this.head;if(arguments.length>1)n=t;else if(this.head)r=this.head.next,n=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;r!==null;i++)n=e(n,r.value,i),r=r.next;return n};ur.prototype.reduceReverse=function(e,t){var n,r=this.tail;if(arguments.length>1)n=t;else if(this.tail)r=this.tail.prev,n=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;r!==null;i--)n=e(n,r.value,i),r=r.prev;return n};ur.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;n!==null;t++)e[t]=n.value,n=n.next;return e};ur.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;n!==null;t++)e[t]=n.value,n=n.prev;return e};ur.prototype.slice=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new ur;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(;i!==null&&r<t;r++,i=i.next)n.push(i.value);return n};ur.prototype.sliceReverse=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new ur;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=this.length,i=this.tail;i!==null&&r>t;r--)i=i.prev;for(;i!==null&&r>e;r--,i=i.prev)n.push(i.value);return n};ur.prototype.splice=function(e,t,...n){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(var s=[],r=0;i&&r<t;r++)s.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var r=0;r<n.length;r++)i=_8t(this,i,n[r]);return s};ur.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;n!==null;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=t,this.tail=e,this};function _8t(e,t,n){var r=t===e.head?new wv(n,null,t,e):new wv(n,t,t.next,e);return r.next===null&&(e.tail=r),r.prev===null&&(e.head=r),e.length++,r}function T8t(e,t){e.tail=new wv(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function C8t(e,t){e.head=new wv(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function wv(e,t,n,r){if(!(this instanceof wv))return new wv(e,t,n,r);this.list=r,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}try{x8t()(ur)}catch{}const S8t=E8t,uy=Symbol("max"),Oh=Symbol("length"),ob=Symbol("lengthCalculator"),aT=Symbol("allowStale"),wy=Symbol("maxAge"),Ih=Symbol("dispose"),Gce=Symbol("noDisposeOnSet"),Rs=Symbol("lruList"),vc=Symbol("cache"),n3e=Symbol("updateAgeOnGet"),AF=()=>1;class A8t{constructor(t){if(typeof t=="number"&&(t={max:t}),t||(t={}),t.max&&(typeof t.max!="number"||t.max<0))throw new TypeError("max must be a non-negative number");this[uy]=t.max||1/0;const n=t.length||AF;if(this[ob]=typeof n!="function"?AF:n,this[aT]=t.stale||!1,t.maxAge&&typeof t.maxAge!="number")throw new TypeError("maxAge must be a number");this[wy]=t.maxAge||0,this[Ih]=t.dispose,this[Gce]=t.noDisposeOnSet||!1,this[n3e]=t.updateAgeOnGet||!1,this.reset()}set max(t){if(typeof t!="number"||t<0)throw new TypeError("max must be a non-negative number");this[uy]=t||1/0,L_(this)}get max(){return this[uy]}set allowStale(t){this[aT]=!!t}get allowStale(){return this[aT]}set maxAge(t){if(typeof t!="number")throw new TypeError("maxAge must be a non-negative number");this[wy]=t,L_(this)}get maxAge(){return this[wy]}set lengthCalculator(t){typeof t!="function"&&(t=AF),t!==this[ob]&&(this[ob]=t,this[Oh]=0,this[Rs].forEach(n=>{n.length=this[ob](n.value,n.key),this[Oh]+=n.length})),L_(this)}get lengthCalculator(){return this[ob]}get length(){return this[Oh]}get itemCount(){return this[Rs].length}rforEach(t,n){n=n||this;for(let r=this[Rs].tail;r!==null;){const i=r.prev;Yce(this,t,r,n),r=i}}forEach(t,n){n=n||this;for(let r=this[Rs].head;r!==null;){const i=r.next;Yce(this,t,r,n),r=i}}keys(){return this[Rs].toArray().map(t=>t.key)}values(){return this[Rs].toArray().map(t=>t.value)}reset(){this[Ih]&&this[Rs]&&this[Rs].length&&this[Rs].forEach(t=>this[Ih](t.key,t.value)),this[vc]=new Map,this[Rs]=new S8t,this[Oh]=0}dump(){return this[Rs].map(t=>SN(this,t)?!1:{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[Rs]}set(t,n,r){if(r=r||this[wy],r&&typeof r!="number")throw new TypeError("maxAge must be a number");const i=r?Date.now():0,s=this[ob](n,t);if(this[vc].has(t)){if(s>this[uy])return pw(this,this[vc].get(t)),!1;const l=this[vc].get(t).value;return this[Ih]&&(this[Gce]||this[Ih](t,l.value)),l.now=i,l.maxAge=r,l.value=n,this[Oh]+=s-l.length,l.length=s,this.get(t),L_(this),!0}const o=new k8t(t,n,s,i,r);return o.length>this[uy]?(this[Ih]&&this[Ih](t,n),!1):(this[Oh]+=o.length,this[Rs].unshift(o),this[vc].set(t,this[Rs].head),L_(this),!0)}has(t){if(!this[vc].has(t))return!1;const n=this[vc].get(t).value;return!SN(this,n)}get(t){return kF(this,t,!0)}peek(t){return kF(this,t,!1)}pop(){const t=this[Rs].tail;return t?(pw(this,t),t.value):null}del(t){pw(this,this[vc].get(t))}load(t){this.reset();const n=Date.now();for(let r=t.length-1;r>=0;r--){const i=t[r],s=i.e||0;if(s===0)this.set(i.k,i.v);else{const o=s-n;o>0&&this.set(i.k,i.v,o)}}}prune(){this[vc].forEach((t,n)=>kF(this,n,!1))}}const kF=(e,t,n)=>{const r=e[vc].get(t);if(r){const i=r.value;if(SN(e,i)){if(pw(e,r),!e[aT])return}else n&&(e[n3e]&&(r.value.now=Date.now()),e[Rs].unshiftNode(r));return i.value}},SN=(e,t)=>{if(!t||!t.maxAge&&!e[wy])return!1;const n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[wy]&&n>e[wy]},L_=e=>{if(e[Oh]>e[uy])for(let t=e[Rs].tail;e[Oh]>e[uy]&&t!==null;){const n=t.prev;pw(e,t),t=n}},pw=(e,t)=>{if(t){const n=t.value;e[Ih]&&e[Ih](n.key,n.value),e[Oh]-=n.length,e[vc].delete(n.key),e[Rs].removeNode(t)}};class k8t{constructor(t,n,r,i,s){this.key=t,this.value=n,this.length=r,this.now=i,this.maxAge=s||0}}const Yce=(e,t,n,r)=>{let i=n.value;SN(e,i)&&(pw(e,n),e[aT]||(i=void 0)),i&&t.call(r,i.value,i.key,e)};var I8t=A8t;const R8t=Object.freeze({loose:!0}),D8t=Object.freeze({}),P8t=e=>e?typeof e!="object"?R8t:e:D8t;var dQ=P8t,Ez={exports:{}};const r3e=256,N8t=Number.MAX_SAFE_INTEGER||9007199254740991,O8t=16,$8t=r3e-6;var fQ={MAX_LENGTH:r3e,MAX_SAFE_COMPONENT_LENGTH:O8t,MAX_SAFE_BUILD_LENGTH:$8t,MAX_SAFE_INTEGER:N8t,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const M8t=typeof process=="object"&&CF&&CF.NODE_DEBUG&&/\bsemver\b/i.test(CF.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var N6=M8t;(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:i}=fQ,s=N6;t=e.exports={};const o=t.re=[],a=t.safeRe=[],l=t.src=[],u=t.t={};let c=0;const d="[a-zA-Z0-9-]",f=[["\\s",1],["\\d",i],[d,r]],h=m=>{for(const[g,b]of f)m=m.split(`${g}*`).join(`${g}{0,${b}}`).split(`${g}+`).join(`${g}{1,${b}}`);return m},p=(m,g,b)=>{const v=h(g),x=c++;s(m,x,g),u[m]=x,l[x]=g,o[x]=new RegExp(g,b?"g":void 0),a[x]=new RegExp(v,b?"g":void 0)};p("NUMERICIDENTIFIER","0|[1-9]\\d*"),p("NUMERICIDENTIFIERLOOSE","\\d+"),p("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${d}*`),p("MAINVERSION",`(${l[u.NUMERICIDENTIFIER]})\\.(${l[u.NUMERICIDENTIFIER]})\\.(${l[u.NUMERICIDENTIFIER]})`),p("MAINVERSIONLOOSE",`(${l[u.NUMERICIDENTIFIERLOOSE]})\\.(${l[u.NUMERICIDENTIFIERLOOSE]})\\.(${l[u.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASEIDENTIFIER",`(?:${l[u.NUMERICIDENTIFIER]}|${l[u.NONNUMERICIDENTIFIER]})`),p("PRERELEASEIDENTIFIERLOOSE",`(?:${l[u.NUMERICIDENTIFIERLOOSE]}|${l[u.NONNUMERICIDENTIFIER]})`),p("PRERELEASE",`(?:-(${l[u.PRERELEASEIDENTIFIER]}(?:\\.${l[u.PRERELEASEIDENTIFIER]})*))`),p("PRERELEASELOOSE",`(?:-?(${l[u.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${l[u.PRERELEASEIDENTIFIERLOOSE]})*))`),p("BUILDIDENTIFIER",`${d}+`),p("BUILD",`(?:\\+(${l[u.BUILDIDENTIFIER]}(?:\\.${l[u.BUILDIDENTIFIER]})*))`),p("FULLPLAIN",`v?${l[u.MAINVERSION]}${l[u.PRERELEASE]}?${l[u.BUILD]}?`),p("FULL",`^${l[u.FULLPLAIN]}$`),p("LOOSEPLAIN",`[v=\\s]*${l[u.MAINVERSIONLOOSE]}${l[u.PRERELEASELOOSE]}?${l[u.BUILD]}?`),p("LOOSE",`^${l[u.LOOSEPLAIN]}$`),p("GTLT","((?:<|>)?=?)"),p("XRANGEIDENTIFIERLOOSE",`${l[u.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),p("XRANGEIDENTIFIER",`${l[u.NUMERICIDENTIFIER]}|x|X|\\*`),p("XRANGEPLAIN",`[v=\\s]*(${l[u.XRANGEIDENTIFIER]})(?:\\.(${l[u.XRANGEIDENTIFIER]})(?:\\.(${l[u.XRANGEIDENTIFIER]})(?:${l[u.PRERELEASE]})?${l[u.BUILD]}?)?)?`),p("XRANGEPLAINLOOSE",`[v=\\s]*(${l[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[u.XRANGEIDENTIFIERLOOSE]})(?:${l[u.PRERELEASELOOSE]})?${l[u.BUILD]}?)?)?`),p("XRANGE",`^${l[u.GTLT]}\\s*${l[u.XRANGEPLAIN]}$`),p("XRANGELOOSE",`^${l[u.GTLT]}\\s*${l[u.XRANGEPLAINLOOSE]}$`),p("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),p("COERCE",`${l[u.COERCEPLAIN]}(?:$|[^\\d])`),p("COERCEFULL",l[u.COERCEPLAIN]+`(?:${l[u.PRERELEASE]})?(?:${l[u.BUILD]})?(?:$|[^\\d])`),p("COERCERTL",l[u.COERCE],!0),p("COERCERTLFULL",l[u.COERCEFULL],!0),p("LONETILDE","(?:~>?)"),p("TILDETRIM",`(\\s*)${l[u.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",p("TILDE",`^${l[u.LONETILDE]}${l[u.XRANGEPLAIN]}$`),p("TILDELOOSE",`^${l[u.LONETILDE]}${l[u.XRANGEPLAINLOOSE]}$`),p("LONECARET","(?:\\^)"),p("CARETTRIM",`(\\s*)${l[u.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",p("CARET",`^${l[u.LONECARET]}${l[u.XRANGEPLAIN]}$`),p("CARETLOOSE",`^${l[u.LONECARET]}${l[u.XRANGEPLAINLOOSE]}$`),p("COMPARATORLOOSE",`^${l[u.GTLT]}\\s*(${l[u.LOOSEPLAIN]})$|^$`),p("COMPARATOR",`^${l[u.GTLT]}\\s*(${l[u.FULLPLAIN]})$|^$`),p("COMPARATORTRIM",`(\\s*)${l[u.GTLT]}\\s*(${l[u.LOOSEPLAIN]}|${l[u.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",p("HYPHENRANGE",`^\\s*(${l[u.XRANGEPLAIN]})\\s+-\\s+(${l[u.XRANGEPLAIN]})\\s*$`),p("HYPHENRANGELOOSE",`^\\s*(${l[u.XRANGEPLAINLOOSE]})\\s+-\\s+(${l[u.XRANGEPLAINLOOSE]})\\s*$`),p("STAR","(<|>)?=?\\s*\\*"),p("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),p("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(Ez,Ez.exports);var hQ=Ez.exports;const Kce=/^[0-9]+$/,L8t=(e,t)=>{const n=Kce.test(e),r=Kce.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1};var F8t={compareIdentifiers:L8t};const xI=N6,{MAX_LENGTH:Xce,MAX_SAFE_INTEGER:EI}=fQ,{safeRe:Qce,t:Jce}=hQ,j8t=dQ,{compareIdentifiers:ab}=F8t;let B8t=class zd{constructor(t,n){if(n=j8t(n),t instanceof zd){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>Xce)throw new TypeError(`version is longer than ${Xce} characters`);xI("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;const r=t.trim().match(n.loose?Qce[Jce.LOOSE]:Qce[Jce.FULL]);if(!r)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>EI||this.major<0)throw new TypeError("Invalid major version");if(this.minor>EI||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>EI||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){const s=+i;if(s>=0&&s<EI)return s}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(xI("SemVer.compare",this.version,this.options,t),!(t instanceof zd)){if(typeof t=="string"&&t===this.version)return 0;t=new zd(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof zd||(t=new zd(t,this.options)),ab(this.major,t.major)||ab(this.minor,t.minor)||ab(this.patch,t.patch)}comparePre(t){if(t instanceof zd||(t=new zd(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let n=0;do{const r=this.prerelease[n],i=t.prerelease[n];if(xI("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return ab(r,i)}while(++n)}compareBuild(t){t instanceof zd||(t=new zd(t,this.options));let n=0;do{const r=this.build[n],i=t.build[n];if(xI("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return ab(r,i)}while(++n)}inc(t,n,r){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,r),this.inc("pre",n,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,r),this.inc("pre",n,r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const i=Number(r)?1:0;if(!n&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(n===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(n){let s=[n,i];r===!1&&(s=[n]),ab(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var pQ=B8t;const Zce=pQ,z8t=(e,t,n)=>new Zce(e,n).compare(new Zce(t,n));var xE=z8t;const U8t=xE,q8t=(e,t,n)=>U8t(e,t,n)===0;var H8t=q8t;const W8t=xE,V8t=(e,t,n)=>W8t(e,t,n)!==0;var G8t=V8t;const Y8t=xE,K8t=(e,t,n)=>Y8t(e,t,n)>0;var X8t=K8t;const Q8t=xE,J8t=(e,t,n)=>Q8t(e,t,n)>=0;var Z8t=J8t;const eMt=xE,tMt=(e,t,n)=>eMt(e,t,n)<0;var nMt=tMt;const rMt=xE,iMt=(e,t,n)=>rMt(e,t,n)<=0;var sMt=iMt;const oMt=H8t,aMt=G8t,lMt=X8t,uMt=Z8t,cMt=nMt,dMt=sMt,fMt=(e,t,n,r)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return oMt(e,n,r);case"!=":return aMt(e,n,r);case">":return lMt(e,n,r);case">=":return uMt(e,n,r);case"<":return cMt(e,n,r);case"<=":return dMt(e,n,r);default:throw new TypeError(`Invalid operator: ${t}`)}};var hMt=fMt,IF,ede;function pMt(){if(ede)return IF;ede=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(c,d){if(d=n(d),c instanceof t){if(c.loose===!!d.loose)return c;c=c.value}c=c.trim().split(/\s+/).join(" "),o("comparator",c,d),this.options=d,this.loose=!!d.loose,this.parse(c),this.semver===e?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(c){const d=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],f=c.match(d);if(!f)throw new TypeError(`Invalid comparator: ${c}`);this.operator=f[1]!==void 0?f[1]:"",this.operator==="="&&(this.operator=""),f[2]?this.semver=new a(f[2],this.options.loose):this.semver=e}toString(){return this.value}test(c){if(o("Comparator.test",c,this.options.loose),this.semver===e||c===e)return!0;if(typeof c=="string")try{c=new a(c,this.options)}catch{return!1}return s(c,this.operator,this.semver,this.options)}intersects(c,d){if(!(c instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new l(c.value,d).test(this.value):c.operator===""?c.value===""?!0:new l(this.value,d).test(c.semver):(d=n(d),d.includePrerelease&&(this.value==="<0.0.0-0"||c.value==="<0.0.0-0")||!d.includePrerelease&&(this.value.startsWith("<0.0.0")||c.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&c.operator.startsWith(">")||this.operator.startsWith("<")&&c.operator.startsWith("<")||this.semver.version===c.semver.version&&this.operator.includes("=")&&c.operator.includes("=")||s(this.semver,"<",c.semver,d)&&this.operator.startsWith(">")&&c.operator.startsWith("<")||s(this.semver,">",c.semver,d)&&this.operator.startsWith("<")&&c.operator.startsWith(">")))}}IF=t;const n=dQ,{safeRe:r,t:i}=hQ,s=hMt,o=N6,a=pQ,l=i3e();return IF}var RF,tde;function i3e(){if(tde)return RF;tde=1;class e{constructor(B,H){if(H=r(H),B instanceof e)return B.loose===!!H.loose&&B.includePrerelease===!!H.includePrerelease?B:new e(B.raw,H);if(B instanceof i)return this.raw=B.value,this.set=[[B]],this.format(),this;if(this.options=H,this.loose=!!H.loose,this.includePrerelease=!!H.includePrerelease,this.raw=B.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(Y=>this.parseRange(Y.trim())).filter(Y=>Y.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const Y=this.set[0];if(this.set=this.set.filter(J=>!p(J[0])),this.set.length===0)this.set=[Y];else if(this.set.length>1){for(const J of this.set)if(J.length===1&&m(J[0])){this.set=[J];break}}}this.format()}format(){return this.range=this.set.map(B=>B.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(B){const Y=((this.options.includePrerelease&&f)|(this.options.loose&&h))+":"+B,J=n.get(Y);if(J)return J;const K=this.options.loose,Z=K?a[l.HYPHENRANGELOOSE]:a[l.HYPHENRANGE];B=B.replace(Z,N(this.options.includePrerelease)),s("hyphen replace",B),B=B.replace(a[l.COMPARATORTRIM],u),s("comparator trim",B),B=B.replace(a[l.TILDETRIM],c),s("tilde trim",B),B=B.replace(a[l.CARETTRIM],d),s("caret trim",B);let U=B.split(" ").map(G=>b(G,this.options)).join(" ").split(/\s+/).map(G=>O(G,this.options));K&&(U=U.filter(G=>(s("loose invalid filter",G,this.options),!!G.match(a[l.COMPARATORLOOSE])))),s("range list",U);const j=new Map,V=U.map(G=>new i(G,this.options));for(const G of V){if(p(G))return[G];j.set(G.value,G)}j.size>1&&j.has("")&&j.delete("");const z=[...j.values()];return n.set(Y,z),z}intersects(B,H){if(!(B instanceof e))throw new TypeError("a Range is required");return this.set.some(Y=>g(Y,H)&&B.set.some(J=>g(J,H)&&Y.every(K=>J.every(Z=>K.intersects(Z,H)))))}test(B){if(!B)return!1;if(typeof B=="string")try{B=new o(B,this.options)}catch{return!1}for(let H=0;H<this.set.length;H++)if(L(this.set[H],B,this.options))return!0;return!1}}RF=e;const t=I8t,n=new t({max:1e3}),r=dQ,i=pMt(),s=N6,o=pQ,{safeRe:a,t:l,comparatorTrimReplace:u,tildeTrimReplace:c,caretTrimReplace:d}=hQ,{FLAG_INCLUDE_PRERELEASE:f,FLAG_LOOSE:h}=fQ,p=$=>$.value==="<0.0.0-0",m=$=>$.value==="",g=($,B)=>{let H=!0;const Y=$.slice();let J=Y.pop();for(;H&&Y.length;)H=Y.every(K=>J.intersects(K,B)),J=Y.pop();return H},b=($,B)=>(s("comp",$,B),$=_($,B),s("caret",$),$=x($,B),s("tildes",$),$=S($,B),s("xrange",$),$=R($,B),s("stars",$),$),v=$=>!$||$.toLowerCase()==="x"||$==="*",x=($,B)=>$.trim().split(/\s+/).map(H=>E(H,B)).join(" "),E=($,B)=>{const H=B.loose?a[l.TILDELOOSE]:a[l.TILDE];return $.replace(H,(Y,J,K,Z,U)=>{s("tilde",$,Y,J,K,Z,U);let j;return v(J)?j="":v(K)?j=`>=${J}.0.0 <${+J+1}.0.0-0`:v(Z)?j=`>=${J}.${K}.0 <${J}.${+K+1}.0-0`:U?(s("replaceTilde pr",U),j=`>=${J}.${K}.${Z}-${U} <${J}.${+K+1}.0-0`):j=`>=${J}.${K}.${Z} <${J}.${+K+1}.0-0`,s("tilde return",j),j})},_=($,B)=>$.trim().split(/\s+/).map(H=>C(H,B)).join(" "),C=($,B)=>{s("caret",$,B);const H=B.loose?a[l.CARETLOOSE]:a[l.CARET],Y=B.includePrerelease?"-0":"";return $.replace(H,(J,K,Z,U,j)=>{s("caret",$,J,K,Z,U,j);let V;return v(K)?V="":v(Z)?V=`>=${K}.0.0${Y} <${+K+1}.0.0-0`:v(U)?K==="0"?V=`>=${K}.${Z}.0${Y} <${K}.${+Z+1}.0-0`:V=`>=${K}.${Z}.0${Y} <${+K+1}.0.0-0`:j?(s("replaceCaret pr",j),K==="0"?Z==="0"?V=`>=${K}.${Z}.${U}-${j} <${K}.${Z}.${+U+1}-0`:V=`>=${K}.${Z}.${U}-${j} <${K}.${+Z+1}.0-0`:V=`>=${K}.${Z}.${U}-${j} <${+K+1}.0.0-0`):(s("no pr"),K==="0"?Z==="0"?V=`>=${K}.${Z}.${U}${Y} <${K}.${Z}.${+U+1}-0`:V=`>=${K}.${Z}.${U}${Y} <${K}.${+Z+1}.0-0`:V=`>=${K}.${Z}.${U} <${+K+1}.0.0-0`),s("caret return",V),V})},S=($,B)=>(s("replaceXRanges",$,B),$.split(/\s+/).map(H=>k(H,B)).join(" ")),k=($,B)=>{$=$.trim();const H=B.loose?a[l.XRANGELOOSE]:a[l.XRANGE];return $.replace(H,(Y,J,K,Z,U,j)=>{s("xRange",$,Y,J,K,Z,U,j);const V=v(K),z=V||v(Z),G=z||v(U),Q=G;return J==="="&&Q&&(J=""),j=B.includePrerelease?"-0":"",V?J===">"||J==="<"?Y="<0.0.0-0":Y="*":J&&Q?(z&&(Z=0),U=0,J===">"?(J=">=",z?(K=+K+1,Z=0,U=0):(Z=+Z+1,U=0)):J==="<="&&(J="<",z?K=+K+1:Z=+Z+1),J==="<"&&(j="-0"),Y=`${J+K}.${Z}.${U}${j}`):z?Y=`>=${K}.0.0${j} <${+K+1}.0.0-0`:G&&(Y=`>=${K}.${Z}.0${j} <${K}.${+Z+1}.0-0`),s("xRange return",Y),Y})},R=($,B)=>(s("replaceStars",$,B),$.trim().replace(a[l.STAR],"")),O=($,B)=>(s("replaceGTE0",$,B),$.trim().replace(a[B.includePrerelease?l.GTE0PRE:l.GTE0],"")),N=$=>(B,H,Y,J,K,Z,U,j,V,z,G,Q,ie)=>(v(Y)?H="":v(J)?H=`>=${Y}.0.0${$?"-0":""}`:v(K)?H=`>=${Y}.${J}.0${$?"-0":""}`:Z?H=`>=${H}`:H=`>=${H}${$?"-0":""}`,v(V)?j="":v(z)?j=`<${+V+1}.0.0-0`:v(G)?j=`<${V}.${+z+1}.0-0`:Q?j=`<=${V}.${z}.${G}-${Q}`:$?j=`<${V}.${z}.${+G+1}-0`:j=`<=${j}`,`${H} ${j}`.trim()),L=($,B,H)=>{for(let Y=0;Y<$.length;Y++)if(!$[Y].test(B))return!1;if(B.prerelease.length&&!H.includePrerelease){for(let Y=0;Y<$.length;Y++)if(s($[Y].semver),$[Y].semver!==i.ANY&&$[Y].semver.prerelease.length>0){const J=$[Y].semver;if(J.major===B.major&&J.minor===B.minor&&J.patch===B.patch)return!0}return!1}return!0};return RF}const mMt=i3e(),gMt=(e,t,n)=>{try{t=new mMt(t,n)}catch{return!1}return t.test(e)};var yMt=gMt,s3e=w8t(yMt);function vMt(e,t,n){const r=e.open(t),i=250,{origin:s}=new URL(t);let o=40;function a(u){u.source===r&&(o=0,e.removeEventListener("message",a,!1))}e.addEventListener("message",a,!1);function l(){o<=0||(r.postMessage(n,s),setTimeout(l,i),o-=1)}setTimeout(l,i)}var bMt=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function o3e(e,...t){for(const n of t)wMt(e,n);return e}function wMt(e,t){for(const n of Object.keys(t))Zx(e,n,t[n],!0)}const wc=AIt;let wC=S5t;const _I=typeof window<"u"?window:void 0;var epe;wC===void 0&&((epe=_I==null?void 0:_I.vl)!=null&&epe.compile)&&(wC=_I.vl);const xMt={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},EMt={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},A2={vega:"Vega","vega-lite":"Vega-Lite"},AN={vega:wc.version,"vega-lite":wC?wC.version:"not available"},_Mt={vega:e=>e,"vega-lite":(e,t)=>wC.compile(e,{config:t}).spec},TMt=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,CMt="chart-wrapper";function SMt(e){return typeof e=="function"}function nde(e,t,n,r){const i=`<html><head>${t}</head><body><pre><code class="json">`,s=`</code></pre>${n}</body></html>`,o=window.open("");o.document.write(i+e+s),o.document.title=`${A2[r]} JSON Source`}function AMt(e,t){if(e.$schema){const n=JRe(e.$schema);t&&t!==n.library&&console.warn(`The given visualization spec is written in ${A2[n.library]}, but mode argument sets ${A2[t]??t}.`);const r=n.library;return s3e(AN[r],`^${n.version.slice(1)}`)||console.warn(`The input spec uses ${A2[r]} ${n.version}, but the current version of ${A2[r]} is v${AN[r]}.`),r}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}function a3e(e){return!!(e&&"load"in e)}function rde(e){return a3e(e)?e:wc.loader(e)}function kMt(e){var n;const t=((n=e.usermeta)==null?void 0:n.embedOptions)??{};return Tt(t.defaultStyle)&&(t.defaultStyle=!1),t}async function IMt(e,t,n={}){let r,i;Tt(t)?(i=rde(n.loader),r=JSON.parse(await i.load(t))):r=t;const s=kMt(r),o=s.loader;(!i||o)&&(i=rde(n.loader??o));const a=await ide(s,i),l=await ide(n,i),u={...o3e(l,a),config:Jx(l.config??{},a.config??{})};return await DMt(e,r,u,i)}async function ide(e,t){const n=Tt(e.config)?JSON.parse(await t.load(e.config)):e.config??{},r=Tt(e.patch)?JSON.parse(await t.load(e.patch)):e.patch;return{...e,...r?{patch:r}:{},...n?{config:n}:{}}}function RMt(e){const t=e.getRootNode?e.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}async function DMt(e,t,n={},r){const i=n.theme?Jx(d8t[n.theme],n.config??{}):n.config,s=Bp(n.actions)?n.actions:o3e({},xMt,n.actions??{}),o={...EMt,...n.i18n},a=n.renderer??"canvas",l=n.logLevel??wc.Warn,u=n.downloadFileName??"visualization",c=typeof e=="string"?document.querySelector(e):e;if(!c)throw new Error(`${e} does not exist`);if(n.defaultStyle!==!1){const _="vega-embed-style",{root:C,rootContainer:S}=RMt(c);if(!C.getElementById(_)){const k=document.createElement("style");k.id=_,k.innerHTML=n.defaultStyle===void 0||n.defaultStyle===!0?bMt.toString():n.defaultStyle,S.appendChild(k)}}const d=AMt(t,n.mode);let f=_Mt[d](t,i);if(d==="vega-lite"&&f.$schema){const _=JRe(f.$schema);s3e(AN.vega,`^${_.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${_.version}, but current version is v${AN.vega}.`)}c.classList.add("vega-embed"),s&&c.classList.add("has-actions"),c.innerHTML="";let h=c;if(s){const _=document.createElement("div");_.classList.add(CMt),c.appendChild(_),h=_}const p=n.patch;if(p&&(f=p instanceof Function?p(f):R$(f,p,!0,!1).newDocument),n.formatLocale&&wc.formatLocale(n.formatLocale),n.timeFormatLocale&&wc.timeFormatLocale(n.timeFormatLocale),n.expressionFunctions)for(const _ in n.expressionFunctions){const C=n.expressionFunctions[_];"fn"in C?wc.expressionFunction(_,C.fn,C.visitor):C instanceof Function&&wc.expressionFunction(_,C)}const{ast:m}=n,g=wc.parse(f,d==="vega-lite"?{}:i,{ast:m}),b=new(n.viewClass||wc.View)(g,{loader:r,logLevel:l,renderer:a,...m?{expr:wc.expressionInterpreter??n.expr??LIt}:{}});if(b.addSignalListener("autosize",(_,C)=>{const{type:S}=C;S=="fit-x"?(h.classList.add("fit-x"),h.classList.remove("fit-y")):S=="fit-y"?(h.classList.remove("fit-x"),h.classList.add("fit-y")):S=="fit"?h.classList.add("fit-x","fit-y"):h.classList.remove("fit-x","fit-y")}),n.tooltip!==!1){const{loader:_,tooltip:C}=n,S=_&&!a3e(_)?_==null?void 0:_.baseURL:void 0,k=SMt(C)?C:new b8t({baseURL:S,...C===!0?{}:C}).call;b.tooltip(k)}let{hover:v}=n;if(v===void 0&&(v=d==="vega"),v){const{hoverSet:_,updateSet:C}=typeof v=="boolean"?{}:v;b.hover(_,C)}n&&(n.width!=null&&b.width(n.width),n.height!=null&&b.height(n.height),n.padding!=null&&b.padding(n.padding)),await b.initialize(h,n.bind).runAsync();let x;if(s!==!1){let _=c;if(n.defaultStyle!==!1||n.forceActionsMenu){const S=document.createElement("details");S.title=o.CLICK_TO_VIEW_ACTIONS,c.append(S),_=S;const k=document.createElement("summary");k.innerHTML=TMt,S.append(k),x=R=>{S.contains(R.target)||S.removeAttribute("open")},document.addEventListener("click",x)}const C=document.createElement("div");if(_.append(C),C.classList.add("vega-actions"),s===!0||s.export!==!1){for(const S of["svg","png"])if(s===!0||s.export===!0||s.export[S]){const k=o[`${S.toUpperCase()}_ACTION`],R=document.createElement("a"),O=At(n.scaleFactor)?n.scaleFactor[S]:n.scaleFactor;R.text=k,R.href="#",R.target="_blank",R.download=`${u}.${S}`,R.addEventListener("mousedown",async function(N){N.preventDefault();const L=await b.toImageURL(S,O);this.href=L}),C.append(R)}}if(s===!0||s.source!==!1){const S=document.createElement("a");S.text=o.SOURCE_ACTION,S.href="#",S.addEventListener("click",function(k){nde(_L(t),n.sourceHeader??"",n.sourceFooter??"",d),k.preventDefault()}),C.append(S)}if(d==="vega-lite"&&(s===!0||s.compiled!==!1)){const S=document.createElement("a");S.text=o.COMPILED_ACTION,S.href="#",S.addEventListener("click",function(k){nde(_L(f),n.sourceHeader??"",n.sourceFooter??"","vega"),k.preventDefault()}),C.append(S)}if(s===!0||s.editor!==!1){const S=n.editorUrl??"https://vega.github.io/editor/",k=document.createElement("a");k.text=o.EDITOR_ACTION,k.href="#",k.addEventListener("click",function(R){vMt(window,S,{config:i,mode:d,renderer:a,spec:_L(t)}),R.preventDefault()}),C.append(k)}}function E(){x&&document.removeEventListener("click",x),b.finalize()}return{view:b,spec:t,vgSpec:f,finalize:E,embedOptions:n}}function PMt(e){return!!e&&{}.toString.call(e)==="[object Function]"}function NMt(e,t,n){n&&(PMt(n)?n(e.data(t)):e.change(t,wc.changeset().remove(()=>!0).insert(n)))}function OMt(e,t){Object.keys(t).forEach(n=>{NMt(e,n,t[n])})}function l3e(e){const t=new Set;return e.forEach(n=>{Object.keys(n).forEach(r=>{t.add(r)})}),t}const u3e=()=>{};function DF(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.addSignalListener(r,t[r])}catch(i){console.warn("Cannot add invalid signal listener.",i)}}),n.length>0}function $Mt(e,t){if(e===t)return!1;const n={width:!1,height:!1,isExpensive:!1},r=l3e([e,t]);return r.has("width")&&(!("width"in e)||!("width"in t)||e.width!==t.width)&&("width"in e&&typeof e.width=="number"?n.width=e.width:n.isExpensive=!0),r.has("height")&&(!("height"in e)||!("height"in t)||e.height!==t.height)&&("height"in e&&typeof e.height=="number"?n.height=e.height:n.isExpensive=!0),r.delete("width"),r.delete("height"),[...r].some(i=>!(i in e)||!(i in t)||!d2(e[i],t[i]))&&(n.isExpensive=!0),n.width!==!1||n.height!==!1||n.isExpensive?n:!1}function sde(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.removeSignalListener(r,t[r])}catch(i){console.warn("Cannot remove invalid signal listener.",i)}}),n.length>0}function PF(e){const{spec:t,width:n,height:r}=e;return typeof n<"u"&&typeof r<"u"?{...t,width:n,height:r}:typeof n<"u"?{...t,width:n}:typeof r<"u"?{...t,height:r}:t}function k2(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class c3e extends Jn.PureComponent{constructor(){super(...arguments),k2(this,"containerRef",Jn.createRef()),k2(this,"resultPromise",void 0),k2(this,"handleError",t=>{const{onError:n=u3e}=this.props;n(t,this.containerRef.current),console.warn(t)}),k2(this,"modifyView",t=>{this.resultPromise&&this.resultPromise.then(n=>(n&&t(n.view),!0)).catch(this.handleError)})}componentDidMount(){this.createView()}componentDidUpdate(t){const n=l3e([this.props,t]);if(n.delete("className"),n.delete("signalListeners"),n.delete("spec"),n.delete("style"),n.delete("width"),n.delete("height"),Array.from(n).some(r=>this.props[r]!==t[r]))this.clearView(),this.createView();else{const r=$Mt(PF(this.props),PF(t)),{signalListeners:i}=this.props,{signalListeners:s}=t;if(r)if(r.isExpensive)this.clearView(),this.createView();else{const o=!FB(i,s);this.modifyView(a=>{r.width!==!1&&a.width(r.width),r.height!==!1&&a.height(r.height),o&&(s&&sde(a,s),i&&DF(a,i)),a.run()})}else FB(i,s)||this.modifyView(o=>{s&&sde(o,s),i&&DF(o,i),o.run()})}}componentWillUnmount(){this.clearView()}createView(){const{spec:t,onNewView:n,signalListeners:r={},width:i,height:s,...o}=this.props;if(this.containerRef.current){const a=PF(this.props);this.resultPromise=IMt(this.containerRef.current,a,o).then(l=>{if(l){const{view:u}=l;DF(u,r)&&u.run()}return l}).catch(this.handleError),n&&this.modifyView(n)}}clearView(){return this.resultPromise&&this.resultPromise.then(t=>{t&&t.finalize()}).catch(this.handleError),this.resultPromise=void 0,this}render(){const{className:t,style:n}=this.props;return Jn.createElement("div",{ref:this.containerRef,className:t,style:n})}}k2(c3e,"propTypes",{className:wD.string,onError:wD.func});function _z(){return _z=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_z.apply(this,arguments)}function Tz(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const MMt={};class mQ extends Jn.PureComponent{constructor(){super(...arguments),Tz(this,"vegaEmbed",Jn.createRef()),Tz(this,"handleNewView",t=>{this.update();const{onNewView:n=u3e}=this.props;n(t)})}componentDidMount(){this.update()}componentDidUpdate(t){FB(this.props.data,t.data)||this.update()}update(){const{data:t}=this.props;this.vegaEmbed.current&&t&&Object.keys(t).length>0&&this.vegaEmbed.current.modifyView(n=>{OMt(n,t),n.resize().run()})}render(){const{data:t,...n}=this.props;return Jn.createElement(c3e,_z({ref:this.vegaEmbed},n,{onNewView:this.handleNewView}))}}Tz(mQ,"defaultProps",{data:MMt});function Cz(){return Cz=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Cz.apply(this,arguments)}function ode(e){return Jn.createElement(mQ,Cz({},e,{mode:"vega-lite"}))}const LMt=mQ;function FMt({currentConfig:e,provState:t}){const n=ys(),[r,i]=D.useState(null),[s,o]=D.useState(!0),a=Hv(),{updateResponseBlockValidation:l,setReactiveAnswers:u}=Gi(),[c,d]=D.useState(),{actions:f,trrack:h}=D.useMemo(()=>{const v=Lv.create(),x=v.register("signal",(_,C)=>(_.event=C,_)),E=nS({registry:v,initialState:{event:{}}});return{actions:{signalAction:x},trrack:E}},[]),p=D.useCallback(({status:v,provenanceGraph:x,answers:E})=>{n(l({location:"stimulus",identifier:a,status:v,values:E,provenanceGraph:x})),n(u(E))},[n,l,a,u]),m=D.useCallback((v,x)=>{h.apply(v,f.signalAction({key:v,value:x}))},[f,h]),g=D.useCallback((v,x)=>{const{responseId:E,response:_}=x;p({status:!0,provenanceGraph:h.graph.backend,answers:{[E]:_}})},[p,h.graph.backend]),b=D.useMemo(()=>{var x;const v=(x=r==null?void 0:r.config)==null?void 0:x.signals;return v?v.reduce((E,_)=>(_.name==="revisitAnswer"?E[_.name]=g:E[_.name]=m,E),{}):{}},[g,m,r]);return D.useEffect(()=>{async function v(){o(!0);let x;"path"in e?x=await emt(e.path):x=e.config,x!==void 0&&i(x),o(!1)}e&&v()},[e]),D.useEffect(()=>{c&&t&&t.event&&t.event.key&&c.signal(t.event.key,t.event.value).run()},[c,t]),s?T.jsx("div",{children:"Loading..."}):"path"in e&&!r?T.jsx(Cp,{path:e.path}):r?T.jsx(LMt,{spec:structuredClone(r),signalListeners:b,onNewView:v=>d(v),actions:e.withActions}):T.jsx("div",{children:"Failed to load vega config"})}function Rt(e,t,n){return(t=BMt(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jMt(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function BMt(e){var t=jMt(e,"string");return typeof t=="symbol"?t:String(t)}function zMt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ade(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function UMt(e,t,n){return t&&ade(e.prototype,t),n&&ade(e,n),e}function qMt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lde(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ude(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?lde(Object(n),!0).forEach(function(r){qMt(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lde(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var cde={addCSS:!0,thumbWidth:15,watch:!0};function HMt(e,t){return(function(){return Array.from(document.querySelectorAll(t)).includes(this)}).call(e,t)}function WMt(e,t){if(e&&t){var n=new Event(t,{bubbles:!0});e.dispatchEvent(n)}}var iA=function(e){return e!=null?e.constructor:null},gQ=function(e,t){return!!(e&&t&&e instanceof t)},d3e=function(e){return e==null},f3e=function(e){return iA(e)===Object},VMt=function(e){return iA(e)===Number&&!Number.isNaN(e)},h3e=function(e){return iA(e)===String},GMt=function(e){return iA(e)===Boolean},YMt=function(e){return iA(e)===Function},p3e=function(e){return Array.isArray(e)},m3e=function(e){return gQ(e,NodeList)},KMt=function(e){return gQ(e,Element)},XMt=function(e){return gQ(e,Event)},QMt=function(e){return d3e(e)||(h3e(e)||p3e(e)||m3e(e))&&!e.length||f3e(e)&&!Object.keys(e).length},$o={nullOrUndefined:d3e,object:f3e,number:VMt,string:h3e,boolean:GMt,function:YMt,array:p3e,nodeList:m3e,element:KMt,event:XMt,empty:QMt};function JMt(e){var t="".concat(e).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return t?Math.max(0,(t[1]?t[1].length:0)-(t[2]?+t[2]:0)):0}function ZMt(e,t){if(1>t){var n=JMt(t);return parseFloat(e.toFixed(n))}return Math.round(e/t)*t}var eLt=function(){function e(t,n){zMt(this,e),$o.element(t)?this.element=t:$o.string(t)&&(this.element=document.querySelector(t)),$o.element(this.element)&&$o.empty(this.element.rangeTouch)&&(this.config=ude({},cde,{},n),this.init())}return UMt(e,[{key:"init",value:function(){e.enabled&&(this.config.addCSS&&(this.element.style.userSelect="none",this.element.style.webKitUserSelect="none",this.element.style.touchAction="manipulation"),this.listeners(!0),this.element.rangeTouch=this)}},{key:"destroy",value:function(){e.enabled&&(this.config.addCSS&&(this.element.style.userSelect="",this.element.style.webKitUserSelect="",this.element.style.touchAction=""),this.listeners(!1),this.element.rangeTouch=null)}},{key:"listeners",value:function(t){var n=this,r=t?"addEventListener":"removeEventListener";["touchstart","touchmove","touchend"].forEach(function(i){n.element[r](i,function(s){return n.set(s)},!1)})}},{key:"get",value:function(t){if(!e.enabled||!$o.event(t))return null;var n,r=t.target,i=t.changedTouches[0],s=parseFloat(r.getAttribute("min"))||0,o=parseFloat(r.getAttribute("max"))||100,a=parseFloat(r.getAttribute("step"))||1,l=r.getBoundingClientRect(),u=100/l.width*(this.config.thumbWidth/2)/100;return 0>(n=100/l.width*(i.clientX-l.left))?n=0:100<n&&(n=100),50>n?n-=(100-2*n)*u:50<n&&(n+=2*(n-50)*u),s+ZMt(n/100*(o-s),a)}},{key:"set",value:function(t){e.enabled&&$o.event(t)&&!t.target.disabled&&(t.preventDefault(),t.target.value=this.get(t),WMt(t.target,t.type==="touchend"?"change":"input"))}}],[{key:"setup",value:function(t){var n=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},r=null;if($o.empty(t)||$o.string(t)?r=Array.from(document.querySelectorAll($o.string(t)?t:'input[type="range"]')):$o.element(t)?r=[t]:$o.nodeList(t)?r=Array.from(t):$o.array(t)&&(r=t.filter($o.element)),$o.empty(r))return null;var i=ude({},cde,{},n);if($o.string(t)&&i.watch){var s=new MutationObserver(function(o){Array.from(o).forEach(function(a){Array.from(a.addedNodes).forEach(function(l){$o.element(l)&&HMt(l,t)&&new e(l,i)})})});s.observe(document.body,{childList:!0,subtree:!0})}return r.map(function(o){return new e(o,n)})}},{key:"enabled",get:function(){return"ontouchstart"in document.documentElement}}]),e}();const sA=e=>e!=null?e.constructor:null,Rp=(e,t)=>!!(e&&t&&e instanceof t),yQ=e=>e==null,g3e=e=>sA(e)===Object,tLt=e=>sA(e)===Number&&!Number.isNaN(e),O6=e=>sA(e)===String,nLt=e=>sA(e)===Boolean,y3e=e=>typeof e=="function",v3e=e=>Array.isArray(e),rLt=e=>Rp(e,WeakMap),b3e=e=>Rp(e,NodeList),iLt=e=>sA(e)===Text,sLt=e=>Rp(e,Event),oLt=e=>Rp(e,KeyboardEvent),aLt=e=>Rp(e,window.TextTrackCue)||Rp(e,window.VTTCue),lLt=e=>Rp(e,TextTrack)||!yQ(e)&&O6(e.kind),uLt=e=>Rp(e,Promise)&&y3e(e.then),cLt=e=>e!==null&&typeof e=="object"&&e.nodeType===1&&typeof e.style=="object"&&typeof e.ownerDocument=="object",w3e=e=>yQ(e)||(O6(e)||v3e(e)||b3e(e))&&!e.length||g3e(e)&&!Object.keys(e).length,dLt=e=>{if(Rp(e,window.URL))return!0;if(!O6(e))return!1;let t=e;e.startsWith("http://")&&e.startsWith("https://")||(t=`http://${e}`);try{return!w3e(new URL(t).hostname)}catch{return!1}};var de={nullOrUndefined:yQ,object:g3e,number:tLt,string:O6,boolean:nLt,function:y3e,array:v3e,weakMap:rLt,nodeList:b3e,element:cLt,textNode:iLt,event:sLt,keyboardEvent:oLt,cue:aLt,track:lLt,promise:uLt,url:dLt,empty:w3e};const Sz=(()=>{const e=document.createElement("span"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},n=Object.keys(t).find(r=>e.style[r]!==void 0);return!!de.string(n)&&t[n]})();function x3e(e,t){setTimeout(()=>{try{e.hidden=!0,e.offsetHeight,e.hidden=!1}catch{}},t)}const fLt=!!window.document.documentMode,hLt=/Edge/g.test(navigator.userAgent),pLt="WebkitAppearance"in document.documentElement.style&&!/Edge/g.test(navigator.userAgent),mLt=/iPhone|iPod/gi.test(navigator.userAgent)&&navigator.maxTouchPoints>1,gLt=navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1,yLt=/iPad|iPhone|iPod/gi.test(navigator.userAgent)&&navigator.maxTouchPoints>1;var Ns={isIE:fLt,isEdge:hLt,isWebKit:pLt,isIPhone:mLt,isIPadOS:gLt,isIos:yLt};function vLt(e){return JSON.parse(JSON.stringify(e))}function E3e(e,t){return t.split(".").reduce((n,r)=>n&&n[r],e)}function Ii(e={},...t){if(!t.length)return e;const n=t.shift();return de.object(n)?(Object.keys(n).forEach(r=>{de.object(n[r])?(Object.keys(e).includes(r)||Object.assign(e,{[r]:{}}),Ii(e[r],n[r])):Object.assign(e,{[r]:n[r]})}),Ii(e,...t)):e}function _3e(e,t){const n=e.length?e:[e];Array.from(n).reverse().forEach((r,i)=>{const s=i>0?t.cloneNode(!0):t,o=r.parentNode,a=r.nextSibling;s.appendChild(r),a?o.insertBefore(s,a):o.appendChild(s)})}function Az(e,t){de.element(e)&&!de.empty(t)&&Object.entries(t).filter(([,n])=>!de.nullOrUndefined(n)).forEach(([n,r])=>e.setAttribute(n,r))}function sn(e,t,n){const r=document.createElement(e);return de.object(t)&&Az(r,t),de.string(n)&&(r.innerText=n),r}function bLt(e,t){de.element(e)&&de.element(t)&&t.parentNode.insertBefore(e,t.nextSibling)}function dde(e,t,n,r){de.element(t)&&t.appendChild(sn(e,n,r))}function Xh(e){de.nodeList(e)||de.array(e)?Array.from(e).forEach(Xh):de.element(e)&&de.element(e.parentNode)&&e.parentNode.removeChild(e)}function tD(e){if(!de.element(e))return;let{length:t}=e.childNodes;for(;t>0;)e.removeChild(e.lastChild),t-=1}function kN(e,t){return de.element(t)&&de.element(t.parentNode)&&de.element(e)?(t.parentNode.replaceChild(e,t),e):null}function Hd(e,t){if(!de.string(e)||de.empty(e))return{};const n={},r=Ii({},t);return e.split(",").forEach(i=>{const s=i.trim(),o=s.replace(".",""),a=s.replace(/[[\]]/g,"").split("="),[l]=a,u=a.length>1?a[1].replace(/["']/g,""):"";switch(s.charAt(0)){case".":de.string(r.class)?n.class=`${r.class} ${o}`:n.class=o;break;case"#":n.id=s.replace("#","");break;case"[":n[l]=u}}),Ii(r,n)}function Lg(e,t){if(!de.element(e))return;let n=t;de.boolean(n)||(n=!e.hidden),e.hidden=n}function gr(e,t,n){if(de.nodeList(e))return Array.from(e).map(r=>gr(r,t,n));if(de.element(e)){let r="toggle";return n!==void 0&&(r=n?"add":"remove"),e.classList[r](t),e.classList.contains(t)}return!1}function IN(e,t){return de.element(e)&&e.classList.contains(t)}function xy(e,t){const{prototype:n}=Element;return(n.matches||n.webkitMatchesSelector||n.mozMatchesSelector||n.msMatchesSelector||function(){return Array.from(document.querySelectorAll(t)).includes(this)}).call(e,t)}function wLt(e,t){const{prototype:n}=Element;return(n.closest||function(){let r=this;do{if(xy.matches(r,t))return r;r=r.parentElement||r.parentNode}while(r!==null&&r.nodeType===1);return null}).call(e,t)}function xC(e){return this.elements.container.querySelectorAll(e)}function as(e){return this.elements.container.querySelector(e)}function NF(e=null,t=!1){de.element(e)&&e.focus({preventScroll:!0,focusVisible:t})}const fde={"audio/ogg":"vorbis","audio/wav":"1","video/webm":"vp8, vorbis","video/mp4":"avc1.42E01E, mp4a.40.2","video/ogg":"theora"},Di={audio:"canPlayType"in document.createElement("audio"),video:"canPlayType"in document.createElement("video"),check(e,t){const n=Di[e]||t!=="html5";return{api:n,ui:n&&Di.rangeInput}},pip:!(Ns.isIPhone||!de.function(sn("video").webkitSetPresentationMode)&&(!document.pictureInPictureEnabled||sn("video").disablePictureInPicture)),airplay:de.function(window.WebKitPlaybackTargetAvailabilityEvent),playsinline:"playsInline"in document.createElement("video"),mime(e){if(de.empty(e))return!1;const[t]=e.split("/");let n=e;if(!this.isHTML5||t!==this.type)return!1;Object.keys(fde).includes(n)&&(n+=`; codecs="${fde[e]}"`);try{return!!(n&&this.media.canPlayType(n).replace(/no/,""))}catch{return!1}},textTracks:"textTracks"in document.createElement("video"),rangeInput:(()=>{const e=document.createElement("input");return e.type="range",e.type==="range"})(),touch:"ontouchstart"in document.documentElement,transitions:Sz!==!1,reducedMotion:"matchMedia"in window&&window.matchMedia("(prefers-reduced-motion)").matches},xLt=(()=>{let e=!1;try{const t=Object.defineProperty({},"passive",{get:()=>(e=!0,null)});window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch{}return e})();function EC(e,t,n,r=!1,i=!0,s=!1){if(!e||!("addEventListener"in e)||de.empty(t)||!de.function(n))return;const o=t.split(" ");let a=s;xLt&&(a={passive:i,capture:s}),o.forEach(l=>{this&&this.eventListeners&&r&&this.eventListeners.push({element:e,type:l,callback:n,options:a}),e[r?"addEventListener":"removeEventListener"](l,n,a)})}function Xn(e,t="",n,r=!0,i=!1){EC.call(this,e,t,n,!0,r,i)}function $6(e,t="",n,r=!0,i=!1){EC.call(this,e,t,n,!1,r,i)}function vQ(e,t="",n,r=!0,i=!1){const s=(...o)=>{$6(e,t,s,r,i),n.apply(this,o)};EC.call(this,e,t,s,!0,r,i)}function on(e,t="",n=!1,r={}){if(!de.element(e)||de.empty(t))return;const i=new CustomEvent(t,{bubbles:n,detail:{...r,plyr:this}});e.dispatchEvent(i)}function ELt(){this&&this.eventListeners&&(this.eventListeners.forEach(e=>{const{element:t,type:n,callback:r,options:i}=e;t.removeEventListener(n,r,i)}),this.eventListeners=[])}function _Lt(){return new Promise(e=>this.ready?setTimeout(e,0):Xn.call(this,this.elements.container,"ready",e)).then(()=>{})}function nf(e){de.promise(e)&&e.then(null,()=>{})}function kz(e){return de.array(e)?e.filter((t,n)=>e.indexOf(t)===n):e}function T3e(e,t){return de.array(e)&&e.length?e.reduce((n,r)=>Math.abs(r-t)<Math.abs(n-t)?r:n):null}function C3e(e){return!(!window||!window.CSS)&&window.CSS.supports(e)}const hde=[[1,1],[4,3],[3,4],[5,4],[4,5],[3,2],[2,3],[16,10],[10,16],[16,9],[9,16],[21,9],[9,21],[32,9],[9,32]].reduce((e,[t,n])=>({...e,[t/n]:[t,n]}),{});function S3e(e){return de.array(e)||de.string(e)&&e.includes(":")?(de.array(e)?e:e.split(":")).map(Number).every(de.number):!1}function RN(e){if(!de.array(e)||!e.every(de.number))return null;const[t,n]=e,r=(s,o)=>o===0?s:r(o,s%o),i=r(t,n);return[t/i,n/i]}function bQ(e){const t=r=>S3e(r)?r.split(":").map(Number):null;let n=t(e);if(n===null&&(n=t(this.config.ratio)),n===null&&!de.empty(this.embed)&&de.array(this.embed.ratio)&&({ratio:n}=this.embed),n===null&&this.isHTML5){const{videoWidth:r,videoHeight:i}=this.media;n=[r,i]}return RN(n)}function fx(e){if(!this.isVideo)return{};const{wrapper:t}=this.elements,n=bQ.call(this,e);if(!de.array(n))return{};const[r,i]=RN(n),s=100/r*i;if(C3e(`aspect-ratio: ${r}/${i}`)?t.style.aspectRatio=`${r}/${i}`:t.style.paddingBottom=`${s}%`,this.isVimeo&&!this.config.vimeo.premium&&this.supported.ui){const o=100/this.media.offsetWidth*parseInt(window.getComputedStyle(this.media).paddingBottom,10),a=(o-s)/(o/50);this.fullscreen.active?t.style.paddingBottom=null:this.media.style.transform=`translateY(-${a}%)`}else this.isHTML5&&t.classList.add(this.config.classNames.videoFixedRatio);return{padding:s,ratio:n}}function A3e(e,t,n=.05){const r=e/t,i=T3e(Object.keys(hde),r);return Math.abs(i-r)<=n?hde[i]:[e,t]}function TLt(){return[Math.max(document.documentElement.clientWidth||0,window.innerWidth||0),Math.max(document.documentElement.clientHeight||0,window.innerHeight||0)]}const t0={getSources(){return this.isHTML5?Array.from(this.media.querySelectorAll("source")).filter(e=>{const t=e.getAttribute("type");return!!de.empty(t)||Di.mime.call(this,t)}):[]},getQualityOptions(){return this.config.quality.forced?this.config.quality.options:t0.getSources.call(this).map(e=>Number(e.getAttribute("size"))).filter(Boolean)},setup(){if(!this.isHTML5)return;const e=this;e.options.speed=e.config.speed.options,de.empty(this.config.ratio)||fx.call(e),Object.defineProperty(e.media,"quality",{get(){const t=t0.getSources.call(e).find(n=>n.getAttribute("src")===e.source);return t&&Number(t.getAttribute("size"))},set(t){if(e.quality!==t){if(e.config.quality.forced&&de.function(e.config.quality.onChange))e.config.quality.onChange(t);else{const n=t0.getSources.call(e).find(l=>Number(l.getAttribute("size"))===t);if(!n)return;const{currentTime:r,paused:i,preload:s,readyState:o,playbackRate:a}=e.media;e.media.src=n.getAttribute("src"),(s!=="none"||o)&&(e.once("loadedmetadata",()=>{e.speed=a,e.currentTime=r,i||nf(e.play())}),e.media.load())}on.call(e,e.media,"qualitychange",!1,{quality:t})}}})},cancelRequests(){this.isHTML5&&(Xh(t0.getSources.call(this)),this.media.setAttribute("src",this.config.blankVideo),this.media.load(),this.debug.log("Cancelled network requests"))}};function CLt(e){return`${e}-${Math.floor(1e4*Math.random())}`}function Iz(e,...t){return de.empty(e)?e:e.toString().replace(/{(\d+)}/g,(n,r)=>t[r].toString())}function SLt(e,t){return e===0||t===0||Number.isNaN(e)||Number.isNaN(t)?0:(e/t*100).toFixed(2)}const lT=(e="",t="",n="")=>e.replace(new RegExp(t.toString().replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1"),"g"),n.toString()),k3e=(e="")=>e.toString().replace(/\w\S*/g,t=>t.charAt(0).toUpperCase()+t.slice(1).toLowerCase());function ALt(e=""){let t=e.toString();return t=lT(t,"-"," "),t=lT(t,"_"," "),t=k3e(t),lT(t," ","")}function kLt(e=""){let t=e.toString();return t=ALt(t),t.charAt(0).toLowerCase()+t.slice(1)}function ILt(e){const t=document.createDocumentFragment(),n=document.createElement("div");return t.appendChild(n),n.innerHTML=e,t.firstChild.innerText}function RLt(e){const t=document.createElement("div");return t.appendChild(e),t.innerHTML}const pde={pip:"PIP",airplay:"AirPlay",html5:"HTML5",vimeo:"Vimeo",youtube:"YouTube"},Ds={get(e="",t={}){if(de.empty(e)||de.empty(t))return"";let n=E3e(t.i18n,e);if(de.empty(n))return Object.keys(pde).includes(e)?pde[e]:"";const r={"{seektime}":t.seekTime,"{title}":t.title};return Object.entries(r).forEach(([i,s])=>{n=lT(n,i,s)}),n}};class _C{constructor(t){Rt(this,"get",n=>{if(!_C.supported||!this.enabled)return null;const r=window.localStorage.getItem(this.key);if(de.empty(r))return null;const i=JSON.parse(r);return de.string(n)&&n.length?i[n]:i}),Rt(this,"set",n=>{if(!_C.supported||!this.enabled||!de.object(n))return;let r=this.get();de.empty(r)&&(r={}),Ii(r,n);try{window.localStorage.setItem(this.key,JSON.stringify(r))}catch{}}),this.enabled=t.config.storage.enabled,this.key=t.config.storage.key}static get supported(){try{if(!("localStorage"in window))return!1;const t="___test";return window.localStorage.setItem(t,t),window.localStorage.removeItem(t),!0}catch{return!1}}}function oA(e,t="text"){return new Promise((n,r)=>{try{const i=new XMLHttpRequest;if(!("withCredentials"in i))return;i.addEventListener("load",()=>{if(t==="text")try{n(JSON.parse(i.responseText))}catch{n(i.responseText)}else n(i.response)}),i.addEventListener("error",()=>{throw new Error(i.status)}),i.open("GET",e,!0),i.responseType=t,i.send()}catch(i){r(i)}})}function I3e(e,t){if(!de.string(e))return;const n="cache",r=de.string(t);let i=!1;const s=()=>document.getElementById(t)!==null,o=(a,l)=>{a.innerHTML=l,r&&s()||document.body.insertAdjacentElement("afterbegin",a)};if(!r||!s()){const a=_C.supported,l=document.createElement("div");if(l.setAttribute("hidden",""),r&&l.setAttribute("id",t),a){const u=window.localStorage.getItem(`${n}-${t}`);if(i=u!==null,i){const c=JSON.parse(u);o(l,c.content)}}oA(e).then(u=>{if(!de.empty(u)){if(a)try{window.localStorage.setItem(`${n}-${t}`,JSON.stringify({content:u}))}catch{}o(l,u)}}).catch(()=>{})}}const R3e=e=>Math.trunc(e/60/60%60,10),DLt=e=>Math.trunc(e/60%60,10),PLt=e=>Math.trunc(e%60,10);function M6(e=0,t=!1,n=!1){if(!de.number(e))return M6(void 0,t,n);const r=a=>`0${a}`.slice(-2);let i=R3e(e);const s=DLt(e),o=PLt(e);return i=t||i>0?`${i}:`:"",`${n&&e>0?"-":""}${i}${r(s)}:${r(o)}`}const kt={getIconUrl(){const e=new URL(this.config.iconUrl,window.location),t=window.location.host?window.location.host:window.top.location.host,n=e.host!==t||Ns.isIE&&!window.svg4everybody;return{url:this.config.iconUrl,cors:n}},findElements(){try{return this.elements.controls=as.call(this,this.config.selectors.controls.wrapper),this.elements.buttons={play:xC.call(this,this.config.selectors.buttons.play),pause:as.call(this,this.config.selectors.buttons.pause),restart:as.call(this,this.config.selectors.buttons.restart),rewind:as.call(this,this.config.selectors.buttons.rewind),fastForward:as.call(this,this.config.selectors.buttons.fastForward),mute:as.call(this,this.config.selectors.buttons.mute),pip:as.call(this,this.config.selectors.buttons.pip),airplay:as.call(this,this.config.selectors.buttons.airplay),settings:as.call(this,this.config.selectors.buttons.settings),captions:as.call(this,this.config.selectors.buttons.captions),fullscreen:as.call(this,this.config.selectors.buttons.fullscreen)},this.elements.progress=as.call(this,this.config.selectors.progress),this.elements.inputs={seek:as.call(this,this.config.selectors.inputs.seek),volume:as.call(this,this.config.selectors.inputs.volume)},this.elements.display={buffer:as.call(this,this.config.selectors.display.buffer),currentTime:as.call(this,this.config.selectors.display.currentTime),duration:as.call(this,this.config.selectors.display.duration)},de.element(this.elements.progress)&&(this.elements.display.seekTooltip=this.elements.progress.querySelector(`.${this.config.classNames.tooltip}`)),!0}catch(e){return this.debug.warn("It looks like there is a problem with your custom controls HTML",e),this.toggleNativeControls(!0),!1}},createIcon(e,t){const n="http://www.w3.org/2000/svg",r=kt.getIconUrl.call(this),i=`${r.cors?"":r.url}#${this.config.iconPrefix}`,s=document.createElementNS(n,"svg");Az(s,Ii(t,{"aria-hidden":"true",focusable:"false"}));const o=document.createElementNS(n,"use"),a=`${i}-${e}`;return"href"in o&&o.setAttributeNS("http://www.w3.org/1999/xlink","href",a),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a),s.appendChild(o),s},createLabel(e,t={}){const n=Ds.get(e,this.config);return sn("span",{...t,class:[t.class,this.config.classNames.hidden].filter(Boolean).join(" ")},n)},createBadge(e){if(de.empty(e))return null;const t=sn("span",{class:this.config.classNames.menu.value});return t.appendChild(sn("span",{class:this.config.classNames.menu.badge},e)),t},createButton(e,t){const n=Ii({},t);let r=kLt(e);const i={element:"button",toggle:!1,label:null,icon:null,labelPressed:null,iconPressed:null};switch(["element","icon","label"].forEach(o=>{Object.keys(n).includes(o)&&(i[o]=n[o],delete n[o])}),i.element!=="button"||Object.keys(n).includes("type")||(n.type="button"),Object.keys(n).includes("class")?n.class.split(" ").some(o=>o===this.config.classNames.control)||Ii(n,{class:`${n.class} ${this.config.classNames.control}`}):n.class=this.config.classNames.control,e){case"play":i.toggle=!0,i.label="play",i.labelPressed="pause",i.icon="play",i.iconPressed="pause";break;case"mute":i.toggle=!0,i.label="mute",i.labelPressed="unmute",i.icon="volume",i.iconPressed="muted";break;case"captions":i.toggle=!0,i.label="enableCaptions",i.labelPressed="disableCaptions",i.icon="captions-off",i.iconPressed="captions-on";break;case"fullscreen":i.toggle=!0,i.label="enterFullscreen",i.labelPressed="exitFullscreen",i.icon="enter-fullscreen",i.iconPressed="exit-fullscreen";break;case"play-large":n.class+=` ${this.config.classNames.control}--overlaid`,r="play",i.label="play",i.icon="play";break;default:de.empty(i.label)&&(i.label=r),de.empty(i.icon)&&(i.icon=e)}const s=sn(i.element);return i.toggle?(s.appendChild(kt.createIcon.call(this,i.iconPressed,{class:"icon--pressed"})),s.appendChild(kt.createIcon.call(this,i.icon,{class:"icon--not-pressed"})),s.appendChild(kt.createLabel.call(this,i.labelPressed,{class:"label--pressed"})),s.appendChild(kt.createLabel.call(this,i.label,{class:"label--not-pressed"}))):(s.appendChild(kt.createIcon.call(this,i.icon)),s.appendChild(kt.createLabel.call(this,i.label))),Ii(n,Hd(this.config.selectors.buttons[r],n)),Az(s,n),r==="play"?(de.array(this.elements.buttons[r])||(this.elements.buttons[r]=[]),this.elements.buttons[r].push(s)):this.elements.buttons[r]=s,s},createRange(e,t){const n=sn("input",Ii(Hd(this.config.selectors.inputs[e]),{type:"range",min:0,max:100,step:.01,value:0,autocomplete:"off",role:"slider","aria-label":Ds.get(e,this.config),"aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":0},t));return this.elements.inputs[e]=n,kt.updateRangeFill.call(this,n),eLt.setup(n),n},createProgress(e,t){const n=sn("progress",Ii(Hd(this.config.selectors.display[e]),{min:0,max:100,value:0,role:"progressbar","aria-hidden":!0},t));if(e!=="volume"){n.appendChild(sn("span",null,"0"));const r={played:"played",buffer:"buffered"}[e],i=r?Ds.get(r,this.config):"";n.innerText=`% ${i.toLowerCase()}`}return this.elements.display[e]=n,n},createTime(e,t){const n=Hd(this.config.selectors.display[e],t),r=sn("div",Ii(n,{class:`${n.class?n.class:""} ${this.config.classNames.display.time} `.trim(),"aria-label":Ds.get(e,this.config),role:"timer"}),"00:00");return this.elements.display[e]=r,r},bindMenuItemShortcuts(e,t){Xn.call(this,e,"keydown keyup",n=>{if(![" ","ArrowUp","ArrowDown","ArrowRight"].includes(n.key)||(n.preventDefault(),n.stopPropagation(),n.type==="keydown"))return;const r=xy(e,'[role="menuitemradio"]');if(!r&&[" ","ArrowRight"].includes(n.key))kt.showMenuPanel.call(this,t,!0);else{let i;n.key!==" "&&(n.key==="ArrowDown"||r&&n.key==="ArrowRight"?(i=e.nextElementSibling,de.element(i)||(i=e.parentNode.firstElementChild)):(i=e.previousElementSibling,de.element(i)||(i=e.parentNode.lastElementChild)),NF.call(this,i,!0))}},!1),Xn.call(this,e,"keyup",n=>{n.key==="Return"&&kt.focusFirstMenuItem.call(this,null,!0)})},createMenuItem({value:e,list:t,type:n,title:r,badge:i=null,checked:s=!1}){const o=Hd(this.config.selectors.inputs[n]),a=sn("button",Ii(o,{type:"button",role:"menuitemradio",class:`${this.config.classNames.control} ${o.class?o.class:""}`.trim(),"aria-checked":s,value:e})),l=sn("span");l.innerHTML=r,de.element(i)&&l.appendChild(i),a.appendChild(l),Object.defineProperty(a,"checked",{enumerable:!0,get:()=>a.getAttribute("aria-checked")==="true",set(u){u&&Array.from(a.parentNode.children).filter(c=>xy(c,'[role="menuitemradio"]')).forEach(c=>c.setAttribute("aria-checked","false")),a.setAttribute("aria-checked",u?"true":"false")}}),this.listeners.bind(a,"click keyup",u=>{if(!de.keyboardEvent(u)||u.key===" "){switch(u.preventDefault(),u.stopPropagation(),a.checked=!0,n){case"language":this.currentTrack=Number(e);break;case"quality":this.quality=e;break;case"speed":this.speed=parseFloat(e)}kt.showMenuPanel.call(this,"home",de.keyboardEvent(u))}},n,!1),kt.bindMenuItemShortcuts.call(this,a,n),t.appendChild(a)},formatTime(e=0,t=!1){return de.number(e)?M6(e,R3e(this.duration)>0,t):e},updateTimeDisplay(e=null,t=0,n=!1){de.element(e)&&de.number(t)&&(e.innerText=kt.formatTime(t,n))},updateVolume(){this.supported.ui&&(de.element(this.elements.inputs.volume)&&kt.setRange.call(this,this.elements.inputs.volume,this.muted?0:this.volume),de.element(this.elements.buttons.mute)&&(this.elements.buttons.mute.pressed=this.muted||this.volume===0))},setRange(e,t=0){de.element(e)&&(e.value=t,kt.updateRangeFill.call(this,e))},updateProgress(e){if(!this.supported.ui||!de.event(e))return;let t=0;const n=(r,i)=>{const s=de.number(i)?i:0,o=de.element(r)?r:this.elements.display.buffer;if(de.element(o)){o.value=s;const a=o.getElementsByTagName("span")[0];de.element(a)&&(a.childNodes[0].nodeValue=s)}};if(e)switch(e.type){case"timeupdate":case"seeking":case"seeked":t=SLt(this.currentTime,this.duration),e.type==="timeupdate"&&kt.setRange.call(this,this.elements.inputs.seek,t);break;case"playing":case"progress":n(this.elements.display.buffer,100*this.buffered)}},updateRangeFill(e){const t=de.event(e)?e.target:e;if(de.element(t)&&t.getAttribute("type")==="range"){if(xy(t,this.config.selectors.inputs.seek)){t.setAttribute("aria-valuenow",this.currentTime);const n=kt.formatTime(this.currentTime),r=kt.formatTime(this.duration),i=Ds.get("seekLabel",this.config);t.setAttribute("aria-valuetext",i.replace("{currentTime}",n).replace("{duration}",r))}else if(xy(t,this.config.selectors.inputs.volume)){const n=100*t.value;t.setAttribute("aria-valuenow",n),t.setAttribute("aria-valuetext",`${n.toFixed(1)}%`)}else t.setAttribute("aria-valuenow",t.value);(Ns.isWebKit||Ns.isIPadOS)&&t.style.setProperty("--value",t.value/t.max*100+"%")}},updateSeekTooltip(e){var t,n;if(!this.config.tooltips.seek||!de.element(this.elements.inputs.seek)||!de.element(this.elements.display.seekTooltip)||this.duration===0)return;const r=this.elements.display.seekTooltip,i=`${this.config.classNames.tooltip}--visible`,s=c=>gr(r,i,c);if(this.touch)return void s(!1);let o=0;const a=this.elements.progress.getBoundingClientRect();if(de.event(e))o=100/a.width*(e.pageX-a.left);else{if(!IN(r,i))return;o=parseFloat(r.style.left,10)}o<0?o=0:o>100&&(o=100);const l=this.duration/100*o;r.innerText=kt.formatTime(l);const u=(t=this.config.markers)===null||t===void 0||(n=t.points)===null||n===void 0?void 0:n.find(({time:c})=>c===Math.round(l));u&&r.insertAdjacentHTML("afterbegin",`${u.label}<br>`),r.style.left=`${o}%`,de.event(e)&&["mouseenter","mouseleave"].includes(e.type)&&s(e.type==="mouseenter")},timeUpdate(e){const t=!de.element(this.elements.display.duration)&&this.config.invertTime;kt.updateTimeDisplay.call(this,this.elements.display.currentTime,t?this.duration-this.currentTime:this.currentTime,t),e&&e.type==="timeupdate"&&this.media.seeking||kt.updateProgress.call(this,e)},durationUpdate(){if(!this.supported.ui||!this.config.invertTime&&this.currentTime)return;if(this.duration>=2**32)return Lg(this.elements.display.currentTime,!0),void Lg(this.elements.progress,!0);de.element(this.elements.inputs.seek)&&this.elements.inputs.seek.setAttribute("aria-valuemax",this.duration);const e=de.element(this.elements.display.duration);!e&&this.config.displayDuration&&this.paused&&kt.updateTimeDisplay.call(this,this.elements.display.currentTime,this.duration),e&&kt.updateTimeDisplay.call(this,this.elements.display.duration,this.duration),this.config.markers.enabled&&kt.setMarkers.call(this),kt.updateSeekTooltip.call(this)},toggleMenuButton(e,t){Lg(this.elements.settings.buttons[e],!t)},updateSetting(e,t,n){const r=this.elements.settings.panels[e];let i=null,s=t;if(e==="captions")i=this.currentTrack;else{if(i=de.empty(n)?this[e]:n,de.empty(i)&&(i=this.config[e].default),!de.empty(this.options[e])&&!this.options[e].includes(i))return void this.debug.warn(`Unsupported value of '${i}' for ${e}`);if(!this.config[e].options.includes(i))return void this.debug.warn(`Disabled value of '${i}' for ${e}`)}if(de.element(s)||(s=r&&r.querySelector('[role="menu"]')),!de.element(s))return;this.elements.settings.buttons[e].querySelector(`.${this.config.classNames.menu.value}`).innerHTML=kt.getLabel.call(this,e,i);const o=s&&s.querySelector(`[value="${i}"]`);de.element(o)&&(o.checked=!0)},getLabel(e,t){switch(e){case"speed":return t===1?Ds.get("normal",this.config):`${t}&times;`;case"quality":if(de.number(t)){const n=Ds.get(`qualityLabel.${t}`,this.config);return n.length?n:`${t}p`}return k3e(t);case"captions":return sr.getLabel.call(this);default:return null}},setQualityMenu(e){if(!de.element(this.elements.settings.panels.quality))return;const t="quality",n=this.elements.settings.panels.quality.querySelector('[role="menu"]');de.array(e)&&(this.options.quality=kz(e).filter(s=>this.config.quality.options.includes(s)));const r=!de.empty(this.options.quality)&&this.options.quality.length>1;if(kt.toggleMenuButton.call(this,t,r),tD(n),kt.checkMenu.call(this),!r)return;const i=s=>{const o=Ds.get(`qualityBadge.${s}`,this.config);return o.length?kt.createBadge.call(this,o):null};this.options.quality.sort((s,o)=>{const a=this.config.quality.options;return a.indexOf(s)>a.indexOf(o)?1:-1}).forEach(s=>{kt.createMenuItem.call(this,{value:s,list:n,type:t,title:kt.getLabel.call(this,"quality",s),badge:i(s)})}),kt.updateSetting.call(this,t,n)},setCaptionsMenu(){if(!de.element(this.elements.settings.panels.captions))return;const e="captions",t=this.elements.settings.panels.captions.querySelector('[role="menu"]'),n=sr.getTracks.call(this),r=!!n.length;if(kt.toggleMenuButton.call(this,e,r),tD(t),kt.checkMenu.call(this),!r)return;const i=n.map((s,o)=>({value:o,checked:this.captions.toggled&&this.currentTrack===o,title:sr.getLabel.call(this,s),badge:s.language&&kt.createBadge.call(this,s.language.toUpperCase()),list:t,type:"language"}));i.unshift({value:-1,checked:!this.captions.toggled,title:Ds.get("disabled",this.config),list:t,type:"language"}),i.forEach(kt.createMenuItem.bind(this)),kt.updateSetting.call(this,e,t)},setSpeedMenu(){if(!de.element(this.elements.settings.panels.speed))return;const e="speed",t=this.elements.settings.panels.speed.querySelector('[role="menu"]');this.options.speed=this.options.speed.filter(r=>r>=this.minimumSpeed&&r<=this.maximumSpeed);const n=!de.empty(this.options.speed)&&this.options.speed.length>1;kt.toggleMenuButton.call(this,e,n),tD(t),kt.checkMenu.call(this),n&&(this.options.speed.forEach(r=>{kt.createMenuItem.call(this,{value:r,list:t,type:e,title:kt.getLabel.call(this,"speed",r)})}),kt.updateSetting.call(this,e,t))},checkMenu(){const{buttons:e}=this.elements.settings,t=!de.empty(e)&&Object.values(e).some(n=>!n.hidden);Lg(this.elements.settings.menu,!t)},focusFirstMenuItem(e,t=!1){if(this.elements.settings.popup.hidden)return;let n=e;de.element(n)||(n=Object.values(this.elements.settings.panels).find(i=>!i.hidden));const r=n.querySelector('[role^="menuitem"]');NF.call(this,r,t)},toggleMenu(e){const{popup:t}=this.elements.settings,n=this.elements.buttons.settings;if(!de.element(t)||!de.element(n))return;const{hidden:r}=t;let i=r;if(de.boolean(e))i=e;else if(de.keyboardEvent(e)&&e.key==="Escape")i=!1;else if(de.event(e)){const s=de.function(e.composedPath)?e.composedPath()[0]:e.target,o=t.contains(s);if(o||!o&&e.target!==n&&i)return}n.setAttribute("aria-expanded",i),Lg(t,!i),gr(this.elements.container,this.config.classNames.menu.open,i),i&&de.keyboardEvent(e)?kt.focusFirstMenuItem.call(this,null,!0):i||r||NF.call(this,n,de.keyboardEvent(e))},getMenuSize(e){const t=e.cloneNode(!0);t.style.position="absolute",t.style.opacity=0,t.removeAttribute("hidden"),e.parentNode.appendChild(t);const n=t.scrollWidth,r=t.scrollHeight;return Xh(t),{width:n,height:r}},showMenuPanel(e="",t=!1){const n=this.elements.container.querySelector(`#plyr-settings-${this.id}-${e}`);if(!de.element(n))return;const r=n.parentNode,i=Array.from(r.children).find(s=>!s.hidden);if(Di.transitions&&!Di.reducedMotion){r.style.width=`${i.scrollWidth}px`,r.style.height=`${i.scrollHeight}px`;const s=kt.getMenuSize.call(this,n),o=a=>{a.target===r&&["width","height"].includes(a.propertyName)&&(r.style.width="",r.style.height="",$6.call(this,r,Sz,o))};Xn.call(this,r,Sz,o),r.style.width=`${s.width}px`,r.style.height=`${s.height}px`}Lg(i,!0),Lg(n,!1),kt.focusFirstMenuItem.call(this,n,t)},setDownloadUrl(){const e=this.elements.buttons.download;de.element(e)&&e.setAttribute("href",this.download)},create(e){const{bindMenuItemShortcuts:t,createButton:n,createProgress:r,createRange:i,createTime:s,setQualityMenu:o,setSpeedMenu:a,showMenuPanel:l}=kt;this.elements.controls=null,de.array(this.config.controls)&&this.config.controls.includes("play-large")&&this.elements.container.appendChild(n.call(this,"play-large"));const u=sn("div",Hd(this.config.selectors.controls.wrapper));this.elements.controls=u;const c={class:"plyr__controls__item"};return kz(de.array(this.config.controls)?this.config.controls:[]).forEach(d=>{if(d==="restart"&&u.appendChild(n.call(this,"restart",c)),d==="rewind"&&u.appendChild(n.call(this,"rewind",c)),d==="play"&&u.appendChild(n.call(this,"play",c)),d==="fast-forward"&&u.appendChild(n.call(this,"fast-forward",c)),d==="progress"){const f=sn("div",{class:`${c.class} plyr__progress__container`}),h=sn("div",Hd(this.config.selectors.progress));if(h.appendChild(i.call(this,"seek",{id:`plyr-seek-${e.id}`})),h.appendChild(r.call(this,"buffer")),this.config.tooltips.seek){const p=sn("span",{class:this.config.classNames.tooltip},"00:00");h.appendChild(p),this.elements.display.seekTooltip=p}this.elements.progress=h,f.appendChild(this.elements.progress),u.appendChild(f)}if(d==="current-time"&&u.appendChild(s.call(this,"currentTime",c)),d==="duration"&&u.appendChild(s.call(this,"duration",c)),d==="mute"||d==="volume"){let{volume:f}=this.elements;if(de.element(f)&&u.contains(f)||(f=sn("div",Ii({},c,{class:`${c.class} plyr__volume`.trim()})),this.elements.volume=f,u.appendChild(f)),d==="mute"&&f.appendChild(n.call(this,"mute")),d==="volume"&&!Ns.isIos&&!Ns.isIPadOS){const h={max:1,step:.05,value:this.config.volume};f.appendChild(i.call(this,"volume",Ii(h,{id:`plyr-volume-${e.id}`})))}}if(d==="captions"&&u.appendChild(n.call(this,"captions",c)),d==="settings"&&!de.empty(this.config.settings)){const f=sn("div",Ii({},c,{class:`${c.class} plyr__menu`.trim(),hidden:""}));f.appendChild(n.call(this,"settings",{"aria-haspopup":!0,"aria-controls":`plyr-settings-${e.id}`,"aria-expanded":!1}));const h=sn("div",{class:"plyr__menu__container",id:`plyr-settings-${e.id}`,hidden:""}),p=sn("div"),m=sn("div",{id:`plyr-settings-${e.id}-home`}),g=sn("div",{role:"menu"});m.appendChild(g),p.appendChild(m),this.elements.settings.panels.home=m,this.config.settings.forEach(b=>{const v=sn("button",Ii(Hd(this.config.selectors.buttons.settings),{type:"button",class:`${this.config.classNames.control} ${this.config.classNames.control}--forward`,role:"menuitem","aria-haspopup":!0,hidden:""}));t.call(this,v,b),Xn.call(this,v,"click",()=>{l.call(this,b,!1)});const x=sn("span",null,Ds.get(b,this.config)),E=sn("span",{class:this.config.classNames.menu.value});E.innerHTML=e[b],x.appendChild(E),v.appendChild(x),g.appendChild(v);const _=sn("div",{id:`plyr-settings-${e.id}-${b}`,hidden:""}),C=sn("button",{type:"button",class:`${this.config.classNames.control} ${this.config.classNames.control}--back`});C.appendChild(sn("span",{"aria-hidden":!0},Ds.get(b,this.config))),C.appendChild(sn("span",{class:this.config.classNames.hidden},Ds.get("menuBack",this.config))),Xn.call(this,_,"keydown",S=>{S.key==="ArrowLeft"&&(S.preventDefault(),S.stopPropagation(),l.call(this,"home",!0))},!1),Xn.call(this,C,"click",()=>{l.call(this,"home",!1)}),_.appendChild(C),_.appendChild(sn("div",{role:"menu"})),p.appendChild(_),this.elements.settings.buttons[b]=v,this.elements.settings.panels[b]=_}),h.appendChild(p),f.appendChild(h),u.appendChild(f),this.elements.settings.popup=h,this.elements.settings.menu=f}if(d==="pip"&&Di.pip&&u.appendChild(n.call(this,"pip",c)),d==="airplay"&&Di.airplay&&u.appendChild(n.call(this,"airplay",c)),d==="download"){const f=Ii({},c,{element:"a",href:this.download,target:"_blank"});this.isHTML5&&(f.download="");const{download:h}=this.config.urls;!de.url(h)&&this.isEmbed&&Ii(f,{icon:`logo-${this.provider}`,label:this.provider}),u.appendChild(n.call(this,"download",f))}d==="fullscreen"&&u.appendChild(n.call(this,"fullscreen",c))}),this.isHTML5&&o.call(this,t0.getQualityOptions.call(this)),a.call(this),u},inject(){if(this.config.loadSprite){const i=kt.getIconUrl.call(this);i.cors&&I3e(i.url,"sprite-plyr")}this.id=Math.floor(1e4*Math.random());let e=null;this.elements.controls=null;const t={id:this.id,seektime:this.config.seekTime,title:this.config.title};let n=!0;de.function(this.config.controls)&&(this.config.controls=this.config.controls.call(this,t)),this.config.controls||(this.config.controls=[]),de.element(this.config.controls)||de.string(this.config.controls)?e=this.config.controls:(e=kt.create.call(this,{id:this.id,seektime:this.config.seekTime,speed:this.speed,quality:this.quality,captions:sr.getLabel.call(this)}),n=!1);let r;if(n&&de.string(this.config.controls)&&(e=(i=>{let s=i;return Object.entries(t).forEach(([o,a])=>{s=lT(s,`{${o}}`,a)}),s})(e)),de.string(this.config.selectors.controls.container)&&(r=document.querySelector(this.config.selectors.controls.container)),de.element(r)||(r=this.elements.container),r[de.element(e)?"insertAdjacentElement":"insertAdjacentHTML"]("afterbegin",e),de.element(this.elements.controls)||kt.findElements.call(this),!de.empty(this.elements.buttons)){const i=s=>{const o=this.config.classNames.controlPressed;s.setAttribute("aria-pressed","false"),Object.defineProperty(s,"pressed",{configurable:!0,enumerable:!0,get:()=>IN(s,o),set(a=!1){gr(s,o,a),s.setAttribute("aria-pressed",a?"true":"false")}})};Object.values(this.elements.buttons).filter(Boolean).forEach(s=>{de.array(s)||de.nodeList(s)?Array.from(s).filter(Boolean).forEach(i):i(s)})}if(Ns.isEdge&&x3e(r),this.config.tooltips.controls){const{classNames:i,selectors:s}=this.config,o=`${s.controls.wrapper} ${s.labels} .${i.hidden}`,a=xC.call(this,o);Array.from(a).forEach(l=>{gr(l,this.config.classNames.hidden,!1),gr(l,this.config.classNames.tooltip,!0)})}},setMediaMetadata(){try{"mediaSession"in navigator&&(navigator.mediaSession.metadata=new window.MediaMetadata({title:this.config.mediaMetadata.title,artist:this.config.mediaMetadata.artist,album:this.config.mediaMetadata.album,artwork:this.config.mediaMetadata.artwork}))}catch{}},setMarkers(){var e,t;if(!this.duration||this.elements.markers)return;const n=(e=this.config.markers)===null||e===void 0||(t=e.points)===null||t===void 0?void 0:t.filter(({time:l})=>l>0&&l<this.duration);if(n==null||!n.length)return;const r=document.createDocumentFragment(),i=document.createDocumentFragment();let s=null;const o=`${this.config.classNames.tooltip}--visible`,a=l=>gr(s,o,l);n.forEach(l=>{const u=sn("span",{class:this.config.classNames.marker},""),c=l.time/this.duration*100+"%";s&&(u.addEventListener("mouseenter",()=>{l.label||(s.style.left=c,s.innerHTML=l.label,a(!0))}),u.addEventListener("mouseleave",()=>{a(!1)})),u.addEventListener("click",()=>{this.currentTime=l.time}),u.style.left=c,i.appendChild(u)}),r.appendChild(i),this.config.tooltips.seek||(s=sn("span",{class:this.config.classNames.tooltip},""),r.appendChild(s)),this.elements.markers={points:i,tip:s},this.elements.progress.appendChild(r)}};function D3e(e,t=!0){let n=e;if(t){const r=document.createElement("a");r.href=n,n=r.href}try{return new URL(n)}catch{return null}}function P3e(e){const t=new URLSearchParams;return de.object(e)&&Object.entries(e).forEach(([n,r])=>{t.set(n,r)}),t}const sr={setup(){if(!this.supported.ui)return;if(!this.isVideo||this.isYouTube||this.isHTML5&&!Di.textTracks)return void(de.array(this.config.controls)&&this.config.controls.includes("settings")&&this.config.settings.includes("captions")&&kt.setCaptionsMenu.call(this));if(de.element(this.elements.captions)||(this.elements.captions=sn("div",Hd(this.config.selectors.captions)),this.elements.captions.setAttribute("dir","auto"),bLt(this.elements.captions,this.elements.wrapper)),Ns.isIE&&window.URL){const r=this.media.querySelectorAll("track");Array.from(r).forEach(i=>{const s=i.getAttribute("src"),o=D3e(s);o!==null&&o.hostname!==window.location.href.hostname&&["http:","https:"].includes(o.protocol)&&oA(s,"blob").then(a=>{i.setAttribute("src",window.URL.createObjectURL(a))}).catch(()=>{Xh(i)})})}const e=kz((navigator.languages||[navigator.language||navigator.userLanguage||"en"]).map(r=>r.split("-")[0]));let t=(this.storage.get("language")||this.config.captions.language||"auto").toLowerCase();t==="auto"&&([t]=e);let n=this.storage.get("captions");if(de.boolean(n)||({active:n}=this.config.captions),Object.assign(this.captions,{toggled:!1,active:n,language:t,languages:e}),this.isHTML5){const r=this.config.captions.update?"addtrack removetrack":"removetrack";Xn.call(this,this.media.textTracks,r,sr.update.bind(this))}setTimeout(sr.update.bind(this),0)},update(){const e=sr.getTracks.call(this,!0),{active:t,language:n,meta:r,currentTrackNode:i}=this.captions,s=!!e.find(o=>o.language===n);this.isHTML5&&this.isVideo&&e.filter(o=>!r.get(o)).forEach(o=>{this.debug.log("Track added",o),r.set(o,{default:o.mode==="showing"}),o.mode==="showing"&&(o.mode="hidden"),Xn.call(this,o,"cuechange",()=>sr.updateCues.call(this))}),(s&&this.language!==n||!e.includes(i))&&(sr.setLanguage.call(this,n),sr.toggle.call(this,t&&s)),this.elements&&gr(this.elements.container,this.config.classNames.captions.enabled,!de.empty(e)),de.array(this.config.controls)&&this.config.controls.includes("settings")&&this.config.settings.includes("captions")&&kt.setCaptionsMenu.call(this)},toggle(e,t=!0){if(!this.supported.ui)return;const{toggled:n}=this.captions,r=this.config.classNames.captions.active,i=de.nullOrUndefined(e)?!n:e;if(i!==n){if(t||(this.captions.active=i,this.storage.set({captions:i})),!this.language&&i&&!t){const s=sr.getTracks.call(this),o=sr.findTrack.call(this,[this.captions.language,...this.captions.languages],!0);return this.captions.language=o.language,void sr.set.call(this,s.indexOf(o))}this.elements.buttons.captions&&(this.elements.buttons.captions.pressed=i),gr(this.elements.container,r,i),this.captions.toggled=i,kt.updateSetting.call(this,"captions"),on.call(this,this.media,i?"captionsenabled":"captionsdisabled")}setTimeout(()=>{i&&this.captions.toggled&&(this.captions.currentTrackNode.mode="hidden")})},set(e,t=!0){const n=sr.getTracks.call(this);if(e!==-1)if(de.number(e))if(e in n){if(this.captions.currentTrack!==e){this.captions.currentTrack=e;const r=n[e],{language:i}=r||{};this.captions.currentTrackNode=r,kt.updateSetting.call(this,"captions"),t||(this.captions.language=i,this.storage.set({language:i})),this.isVimeo&&this.embed.enableTextTrack(i),on.call(this,this.media,"languagechange")}sr.toggle.call(this,!0,t),this.isHTML5&&this.isVideo&&sr.updateCues.call(this)}else this.debug.warn("Track not found",e);else this.debug.warn("Invalid caption argument",e);else sr.toggle.call(this,!1,t)},setLanguage(e,t=!0){if(!de.string(e))return void this.debug.warn("Invalid language argument",e);const n=e.toLowerCase();this.captions.language=n;const r=sr.getTracks.call(this),i=sr.findTrack.call(this,[n]);sr.set.call(this,r.indexOf(i),t)},getTracks(e=!1){return Array.from((this.media||{}).textTracks||[]).filter(t=>!this.isHTML5||e||this.captions.meta.has(t)).filter(t=>["captions","subtitles"].includes(t.kind))},findTrack(e,t=!1){const n=sr.getTracks.call(this),r=o=>Number((this.captions.meta.get(o)||{}).default),i=Array.from(n).sort((o,a)=>r(a)-r(o));let s;return e.every(o=>(s=i.find(a=>a.language===o),!s)),s||(t?i[0]:void 0)},getCurrentTrack(){return sr.getTracks.call(this)[this.currentTrack]},getLabel(e){let t=e;return!de.track(t)&&Di.textTracks&&this.captions.toggled&&(t=sr.getCurrentTrack.call(this)),de.track(t)?de.empty(t.label)?de.empty(t.language)?Ds.get("enabled",this.config):e.language.toUpperCase():t.label:Ds.get("disabled",this.config)},updateCues(e){if(!this.supported.ui)return;if(!de.element(this.elements.captions))return void this.debug.warn("No captions element to render to");if(!de.nullOrUndefined(e)&&!Array.isArray(e))return void this.debug.warn("updateCues: Invalid input",e);let t=e;if(!t){const r=sr.getCurrentTrack.call(this);t=Array.from((r||{}).activeCues||[]).map(i=>i.getCueAsHTML()).map(RLt)}const n=t.map(r=>r.trim()).join(`
`);if(n!==this.elements.captions.innerHTML){tD(this.elements.captions);const r=sn("span",Hd(this.config.selectors.caption));r.innerHTML=n,this.elements.captions.appendChild(r),on.call(this,this.media,"cuechange")}}},N3e={enabled:!0,title:"",debug:!1,autoplay:!1,autopause:!0,playsinline:!0,seekTime:10,volume:1,muted:!1,duration:null,displayDuration:!0,invertTime:!0,toggleInvert:!0,ratio:null,clickToPlay:!0,hideControls:!0,resetOnEnd:!1,disableContextMenu:!0,loadSprite:!0,iconPrefix:"plyr",iconUrl:"https://cdn.plyr.io/3.7.8/plyr.svg",blankVideo:"https://cdn.plyr.io/static/blank.mp4",quality:{default:576,options:[4320,2880,2160,1440,1080,720,576,480,360,240],forced:!1,onChange:null},loop:{active:!1},speed:{selected:1,options:[.5,.75,1,1.25,1.5,1.75,2,4]},keyboard:{focused:!0,global:!1},tooltips:{controls:!1,seek:!0},captions:{active:!1,language:"auto",update:!1},fullscreen:{enabled:!0,fallback:!0,iosNative:!1},storage:{enabled:!0,key:"plyr"},controls:["play-large","play","progress","current-time","mute","volume","captions","settings","pip","airplay","fullscreen"],settings:["captions","quality","speed"],i18n:{restart:"Restart",rewind:"Rewind {seektime}s",play:"Play",pause:"Pause",fastForward:"Forward {seektime}s",seek:"Seek",seekLabel:"{currentTime} of {duration}",played:"Played",buffered:"Buffered",currentTime:"Current time",duration:"Duration",volume:"Volume",mute:"Mute",unmute:"Unmute",enableCaptions:"Enable captions",disableCaptions:"Disable captions",download:"Download",enterFullscreen:"Enter fullscreen",exitFullscreen:"Exit fullscreen",frameTitle:"Player for {title}",captions:"Captions",settings:"Settings",pip:"PIP",menuBack:"Go back to previous menu",speed:"Speed",normal:"Normal",quality:"Quality",loop:"Loop",start:"Start",end:"End",all:"All",reset:"Reset",disabled:"Disabled",enabled:"Enabled",advertisement:"Ad",qualityBadge:{2160:"4K",1440:"HD",1080:"HD",720:"HD",576:"SD",480:"SD"}},urls:{download:null,vimeo:{sdk:"https://player.vimeo.com/api/player.js",iframe:"https://player.vimeo.com/video/{0}?{1}",api:"https://vimeo.com/api/oembed.json?url={0}"},youtube:{sdk:"https://www.youtube.com/iframe_api",api:"https://noembed.com/embed?url=https://www.youtube.com/watch?v={0}"},googleIMA:{sdk:"https://imasdk.googleapis.com/js/sdkloader/ima3.js"}},listeners:{seek:null,play:null,pause:null,restart:null,rewind:null,fastForward:null,mute:null,volume:null,captions:null,download:null,fullscreen:null,pip:null,airplay:null,speed:null,quality:null,loop:null,language:null},events:["ended","progress","stalled","playing","waiting","canplay","canplaythrough","loadstart","loadeddata","loadedmetadata","timeupdate","volumechange","play","pause","error","seeking","seeked","emptied","ratechange","cuechange","download","enterfullscreen","exitfullscreen","captionsenabled","captionsdisabled","languagechange","controlshidden","controlsshown","ready","statechange","qualitychange","adsloaded","adscontentpause","adscontentresume","adstarted","adsmidpoint","adscomplete","adsallcomplete","adsimpression","adsclick"],selectors:{editable:"input, textarea, select, [contenteditable]",container:".plyr",controls:{container:null,wrapper:".plyr__controls"},labels:"[data-plyr]",buttons:{play:'[data-plyr="play"]',pause:'[data-plyr="pause"]',restart:'[data-plyr="restart"]',rewind:'[data-plyr="rewind"]',fastForward:'[data-plyr="fast-forward"]',mute:'[data-plyr="mute"]',captions:'[data-plyr="captions"]',download:'[data-plyr="download"]',fullscreen:'[data-plyr="fullscreen"]',pip:'[data-plyr="pip"]',airplay:'[data-plyr="airplay"]',settings:'[data-plyr="settings"]',loop:'[data-plyr="loop"]'},inputs:{seek:'[data-plyr="seek"]',volume:'[data-plyr="volume"]',speed:'[data-plyr="speed"]',language:'[data-plyr="language"]',quality:'[data-plyr="quality"]'},display:{currentTime:".plyr__time--current",duration:".plyr__time--duration",buffer:".plyr__progress__buffer",loop:".plyr__progress__loop",volume:".plyr__volume--display"},progress:".plyr__progress",captions:".plyr__captions",caption:".plyr__caption"},classNames:{type:"plyr--{0}",provider:"plyr--{0}",video:"plyr__video-wrapper",embed:"plyr__video-embed",videoFixedRatio:"plyr__video-wrapper--fixed-ratio",embedContainer:"plyr__video-embed__container",poster:"plyr__poster",posterEnabled:"plyr__poster-enabled",ads:"plyr__ads",control:"plyr__control",controlPressed:"plyr__control--pressed",playing:"plyr--playing",paused:"plyr--paused",stopped:"plyr--stopped",loading:"plyr--loading",hover:"plyr--hover",tooltip:"plyr__tooltip",cues:"plyr__cues",marker:"plyr__progress__marker",hidden:"plyr__sr-only",hideControls:"plyr--hide-controls",isTouch:"plyr--is-touch",uiSupported:"plyr--full-ui",noTransition:"plyr--no-transition",display:{time:"plyr__time"},menu:{value:"plyr__menu__value",badge:"plyr__badge",open:"plyr--menu-open"},captions:{enabled:"plyr--captions-enabled",active:"plyr--captions-active"},fullscreen:{enabled:"plyr--fullscreen-enabled",fallback:"plyr--fullscreen-fallback"},pip:{supported:"plyr--pip-supported",active:"plyr--pip-active"},airplay:{supported:"plyr--airplay-supported",active:"plyr--airplay-active"},previewThumbnails:{thumbContainer:"plyr__preview-thumb",thumbContainerShown:"plyr__preview-thumb--is-shown",imageContainer:"plyr__preview-thumb__image-container",timeContainer:"plyr__preview-thumb__time-container",scrubbingContainer:"plyr__preview-scrubbing",scrubbingContainerShown:"plyr__preview-scrubbing--is-shown"}},attributes:{embed:{provider:"data-plyr-provider",id:"data-plyr-embed-id",hash:"data-plyr-embed-hash"}},ads:{enabled:!1,publisherId:"",tagUrl:""},previewThumbnails:{enabled:!1,src:""},vimeo:{byline:!1,portrait:!1,title:!1,speed:!0,transparent:!1,customControls:!0,referrerPolicy:null,premium:!1},youtube:{rel:0,showinfo:0,iv_load_policy:3,modestbranding:1,customControls:!0,noCookie:!1},mediaMetadata:{title:"",artist:"",album:"",artwork:[]},markers:{enabled:!1,points:[]}},OF={active:"picture-in-picture",inactive:"inline"},Hm={html5:"html5",youtube:"youtube",vimeo:"vimeo"},$F={audio:"audio",video:"video"};function NLt(e){return/^(https?:\/\/)?(www\.)?(youtube\.com|youtube-nocookie\.com|youtu\.?be)\/.+$/.test(e)?Hm.youtube:/^https?:\/\/player.vimeo.com\/video\/\d{0,9}(?=\b|\/)/.test(e)?Hm.vimeo:null}const MF=()=>{};class OLt{constructor(t=!1){this.enabled=window.console&&t,this.enabled&&this.log("Debugging enabled")}get log(){return this.enabled?Function.prototype.bind.call(console.log,console):MF}get warn(){return this.enabled?Function.prototype.bind.call(console.warn,console):MF}get error(){return this.enabled?Function.prototype.bind.call(console.error,console):MF}}class bc{constructor(t){Rt(this,"onChange",()=>{if(!this.supported)return;const n=this.player.elements.buttons.fullscreen;de.element(n)&&(n.pressed=this.active);const r=this.target===this.player.media?this.target:this.player.elements.container;on.call(this.player,r,this.active?"enterfullscreen":"exitfullscreen",!0)}),Rt(this,"toggleFallback",(n=!1)=>{if(n?this.scrollPosition={x:window.scrollX??0,y:window.scrollY??0}:window.scrollTo(this.scrollPosition.x,this.scrollPosition.y),document.body.style.overflow=n?"hidden":"",gr(this.target,this.player.config.classNames.fullscreen.fallback,n),Ns.isIos){let r=document.head.querySelector('meta[name="viewport"]');const i="viewport-fit=cover";r||(r=document.createElement("meta"),r.setAttribute("name","viewport"));const s=de.string(r.content)&&r.content.includes(i);n?(this.cleanupViewport=!s,s||(r.content+=`,${i}`)):this.cleanupViewport&&(r.content=r.content.split(",").filter(o=>o.trim()!==i).join(","))}this.onChange()}),Rt(this,"trapFocus",n=>{if(Ns.isIos||Ns.isIPadOS||!this.active||n.key!=="Tab")return;const r=document.activeElement,i=xC.call(this.player,"a[href], button:not(:disabled), input:not(:disabled), [tabindex]"),[s]=i,o=i[i.length-1];r!==o||n.shiftKey?r===s&&n.shiftKey&&(o.focus(),n.preventDefault()):(s.focus(),n.preventDefault())}),Rt(this,"update",()=>{if(this.supported){let n;n=this.forceFallback?"Fallback (forced)":bc.nativeSupported?"Native":"Fallback",this.player.debug.log(`${n} fullscreen enabled`)}else this.player.debug.log("Fullscreen not supported and fallback disabled");gr(this.player.elements.container,this.player.config.classNames.fullscreen.enabled,this.supported)}),Rt(this,"enter",()=>{this.supported&&(Ns.isIos&&this.player.config.fullscreen.iosNative?this.player.isVimeo?this.player.embed.requestFullscreen():this.target.webkitEnterFullscreen():!bc.nativeSupported||this.forceFallback?this.toggleFallback(!0):this.prefix?de.empty(this.prefix)||this.target[`${this.prefix}Request${this.property}`]():this.target.requestFullscreen({navigationUI:"hide"}))}),Rt(this,"exit",()=>{if(this.supported)if(Ns.isIos&&this.player.config.fullscreen.iosNative)this.player.isVimeo?this.player.embed.exitFullscreen():this.target.webkitEnterFullscreen(),nf(this.player.play());else if(!bc.nativeSupported||this.forceFallback)this.toggleFallback(!1);else if(this.prefix){if(!de.empty(this.prefix)){const n=this.prefix==="moz"?"Cancel":"Exit";document[`${this.prefix}${n}${this.property}`]()}}else(document.cancelFullScreen||document.exitFullscreen).call(document)}),Rt(this,"toggle",()=>{this.active?this.exit():this.enter()}),this.player=t,this.prefix=bc.prefix,this.property=bc.property,this.scrollPosition={x:0,y:0},this.forceFallback=t.config.fullscreen.fallback==="force",this.player.elements.fullscreen=t.config.fullscreen.container&&wLt(this.player.elements.container,t.config.fullscreen.container),Xn.call(this.player,document,this.prefix==="ms"?"MSFullscreenChange":`${this.prefix}fullscreenchange`,()=>{this.onChange()}),Xn.call(this.player,this.player.elements.container,"dblclick",n=>{de.element(this.player.elements.controls)&&this.player.elements.controls.contains(n.target)||this.player.listeners.proxy(n,this.toggle,"fullscreen")}),Xn.call(this,this.player.elements.container,"keydown",n=>this.trapFocus(n)),this.update()}static get nativeSupported(){return!!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled)}get useNative(){return bc.nativeSupported&&!this.forceFallback}static get prefix(){if(de.function(document.exitFullscreen))return"";let t="";return["webkit","moz","ms"].some(n=>!(!de.function(document[`${n}ExitFullscreen`])&&!de.function(document[`${n}CancelFullScreen`]))&&(t=n,!0)),t}static get property(){return this.prefix==="moz"?"FullScreen":"Fullscreen"}get supported(){return[this.player.config.fullscreen.enabled,this.player.isVideo,bc.nativeSupported||this.player.config.fullscreen.fallback,!this.player.isYouTube||bc.nativeSupported||!Ns.isIos||this.player.config.playsinline&&!this.player.config.fullscreen.iosNative].every(Boolean)}get active(){if(!this.supported)return!1;if(!bc.nativeSupported||this.forceFallback)return IN(this.target,this.player.config.classNames.fullscreen.fallback);const t=this.prefix?this.target.getRootNode()[`${this.prefix}${this.property}Element`]:this.target.getRootNode().fullscreenElement;return t&&t.shadowRoot?t===this.target.getRootNode().host:t===this.target}get target(){return Ns.isIos&&this.player.config.fullscreen.iosNative?this.player.media:this.player.elements.fullscreen??this.player.elements.container}}function nD(e,t=1){return new Promise((n,r)=>{const i=new Image,s=()=>{delete i.onload,delete i.onerror,(i.naturalWidth>=t?n:r)(i)};Object.assign(i,{onload:s,onerror:s,src:e})})}const Sr={addStyleHook(){gr(this.elements.container,this.config.selectors.container.replace(".",""),!0),gr(this.elements.container,this.config.classNames.uiSupported,this.supported.ui)},toggleNativeControls(e=!1){e&&this.isHTML5?this.media.setAttribute("controls",""):this.media.removeAttribute("controls")},build(){if(this.listeners.media(),!this.supported.ui)return this.debug.warn(`Basic support only for ${this.provider} ${this.type}`),void Sr.toggleNativeControls.call(this,!0);de.element(this.elements.controls)||(kt.inject.call(this),this.listeners.controls()),Sr.toggleNativeControls.call(this),this.isHTML5&&sr.setup.call(this),this.volume=null,this.muted=null,this.loop=null,this.quality=null,this.speed=null,kt.updateVolume.call(this),kt.timeUpdate.call(this),kt.durationUpdate.call(this),Sr.checkPlaying.call(this),gr(this.elements.container,this.config.classNames.pip.supported,Di.pip&&this.isHTML5&&this.isVideo),gr(this.elements.container,this.config.classNames.airplay.supported,Di.airplay&&this.isHTML5),gr(this.elements.container,this.config.classNames.isTouch,this.touch),this.ready=!0,setTimeout(()=>{on.call(this,this.media,"ready")},0),Sr.setTitle.call(this),this.poster&&Sr.setPoster.call(this,this.poster,!1).catch(()=>{}),this.config.duration&&kt.durationUpdate.call(this),this.config.mediaMetadata&&kt.setMediaMetadata.call(this)},setTitle(){let e=Ds.get("play",this.config);if(de.string(this.config.title)&&!de.empty(this.config.title)&&(e+=`, ${this.config.title}`),Array.from(this.elements.buttons.play||[]).forEach(t=>{t.setAttribute("aria-label",e)}),this.isEmbed){const t=as.call(this,"iframe");if(!de.element(t))return;const n=de.empty(this.config.title)?"video":this.config.title,r=Ds.get("frameTitle",this.config);t.setAttribute("title",r.replace("{title}",n))}},togglePoster(e){gr(this.elements.container,this.config.classNames.posterEnabled,e)},setPoster(e,t=!0){return t&&this.poster?Promise.reject(new Error("Poster already set")):(this.media.setAttribute("data-poster",e),this.elements.poster.removeAttribute("hidden"),_Lt.call(this).then(()=>nD(e)).catch(n=>{throw e===this.poster&&Sr.togglePoster.call(this,!1),n}).then(()=>{if(e!==this.poster)throw new Error("setPoster cancelled by later call to setPoster")}).then(()=>(Object.assign(this.elements.poster.style,{backgroundImage:`url('${e}')`,backgroundSize:""}),Sr.togglePoster.call(this,!0),e)))},checkPlaying(e){gr(this.elements.container,this.config.classNames.playing,this.playing),gr(this.elements.container,this.config.classNames.paused,this.paused),gr(this.elements.container,this.config.classNames.stopped,this.stopped),Array.from(this.elements.buttons.play||[]).forEach(t=>{Object.assign(t,{pressed:this.playing}),t.setAttribute("aria-label",Ds.get(this.playing?"pause":"play",this.config))}),de.event(e)&&e.type==="timeupdate"||Sr.toggleControls.call(this)},checkLoading(e){this.loading=["stalled","waiting"].includes(e.type),clearTimeout(this.timers.loading),this.timers.loading=setTimeout(()=>{gr(this.elements.container,this.config.classNames.loading,this.loading),Sr.toggleControls.call(this)},this.loading?250:0)},toggleControls(e){const{controls:t}=this.elements;if(t&&this.config.hideControls){const n=this.touch&&this.lastSeekTime+2e3>Date.now();this.toggleControls(!!(e||this.loading||this.paused||t.pressed||t.hover||n))}},migrateStyles(){Object.values({...this.media.style}).filter(e=>!de.empty(e)&&de.string(e)&&e.startsWith("--plyr")).forEach(e=>{this.elements.container.style.setProperty(e,this.media.style.getPropertyValue(e)),this.media.style.removeProperty(e)}),de.empty(this.media.style)&&this.media.removeAttribute("style")}};class $Lt{constructor(t){Rt(this,"firstTouch",()=>{const{player:n}=this,{elements:r}=n;n.touch=!0,gr(r.container,n.config.classNames.isTouch,!0)}),Rt(this,"global",(n=!0)=>{const{player:r}=this;r.config.keyboard.global&&EC.call(r,window,"keydown keyup",this.handleKey,n,!1),EC.call(r,document.body,"click",this.toggleMenu,n),vQ.call(r,document.body,"touchstart",this.firstTouch)}),Rt(this,"container",()=>{const{player:n}=this,{config:r,elements:i,timers:s}=n;!r.keyboard.global&&r.keyboard.focused&&Xn.call(n,i.container,"keydown keyup",this.handleKey,!1),Xn.call(n,i.container,"mousemove mouseleave touchstart touchmove enterfullscreen exitfullscreen",l=>{const{controls:u}=i;u&&l.type==="enterfullscreen"&&(u.pressed=!1,u.hover=!1);let c=0;["touchstart","touchmove","mousemove"].includes(l.type)&&(Sr.toggleControls.call(n,!0),c=n.touch?3e3:2e3),clearTimeout(s.controls),s.controls=setTimeout(()=>Sr.toggleControls.call(n,!1),c)});const o=()=>{if(!n.isVimeo||n.config.vimeo.premium)return;const l=i.wrapper,{active:u}=n.fullscreen,[c,d]=bQ.call(n),f=C3e(`aspect-ratio: ${c} / ${d}`);if(!u)return void(f?(l.style.width=null,l.style.height=null):(l.style.maxWidth=null,l.style.margin=null));const[h,p]=TLt(),m=h/p>c/d;f?(l.style.width=m?"auto":"100%",l.style.height=m?"100%":"auto"):(l.style.maxWidth=m?p/d*c+"px":null,l.style.margin=m?"0 auto":null)},a=()=>{clearTimeout(s.resized),s.resized=setTimeout(o,50)};Xn.call(n,i.container,"enterfullscreen exitfullscreen",l=>{const{target:u}=n.fullscreen;u===i.container&&(!n.isEmbed&&de.empty(n.config.ratio)||(o(),(l.type==="enterfullscreen"?Xn:$6).call(n,window,"resize",a)))})}),Rt(this,"media",()=>{const{player:n}=this,{elements:r}=n;if(Xn.call(n,n.media,"timeupdate seeking seeked",s=>kt.timeUpdate.call(n,s)),Xn.call(n,n.media,"durationchange loadeddata loadedmetadata",s=>kt.durationUpdate.call(n,s)),Xn.call(n,n.media,"ended",()=>{n.isHTML5&&n.isVideo&&n.config.resetOnEnd&&(n.restart(),n.pause())}),Xn.call(n,n.media,"progress playing seeking seeked",s=>kt.updateProgress.call(n,s)),Xn.call(n,n.media,"volumechange",s=>kt.updateVolume.call(n,s)),Xn.call(n,n.media,"playing play pause ended emptied timeupdate",s=>Sr.checkPlaying.call(n,s)),Xn.call(n,n.media,"waiting canplay seeked playing",s=>Sr.checkLoading.call(n,s)),n.supported.ui&&n.config.clickToPlay&&!n.isAudio){const s=as.call(n,`.${n.config.classNames.video}`);if(!de.element(s))return;Xn.call(n,r.container,"click",o=>{([r.container,s].includes(o.target)||s.contains(o.target))&&(n.touch&&n.config.hideControls||(n.ended?(this.proxy(o,n.restart,"restart"),this.proxy(o,()=>{nf(n.play())},"play")):this.proxy(o,()=>{nf(n.togglePlay())},"play")))})}n.supported.ui&&n.config.disableContextMenu&&Xn.call(n,r.wrapper,"contextmenu",s=>{s.preventDefault()},!1),Xn.call(n,n.media,"volumechange",()=>{n.storage.set({volume:n.volume,muted:n.muted})}),Xn.call(n,n.media,"ratechange",()=>{kt.updateSetting.call(n,"speed"),n.storage.set({speed:n.speed})}),Xn.call(n,n.media,"qualitychange",s=>{kt.updateSetting.call(n,"quality",null,s.detail.quality)}),Xn.call(n,n.media,"ready qualitychange",()=>{kt.setDownloadUrl.call(n)});const i=n.config.events.concat(["keyup","keydown"]).join(" ");Xn.call(n,n.media,i,s=>{let{detail:o={}}=s;s.type==="error"&&(o=n.media.error),on.call(n,r.container,s.type,!0,o)})}),Rt(this,"proxy",(n,r,i)=>{const{player:s}=this,o=s.config.listeners[i];let a=!0;de.function(o)&&(a=o.call(s,n)),a!==!1&&de.function(r)&&r.call(s,n)}),Rt(this,"bind",(n,r,i,s,o=!0)=>{const{player:a}=this,l=a.config.listeners[s],u=de.function(l);Xn.call(a,n,r,c=>this.proxy(c,i,s),o&&!u)}),Rt(this,"controls",()=>{const{player:n}=this,{elements:r}=n,i=Ns.isIE?"change":"input";if(r.buttons.play&&Array.from(r.buttons.play).forEach(s=>{this.bind(s,"click",()=>{nf(n.togglePlay())},"play")}),this.bind(r.buttons.restart,"click",n.restart,"restart"),this.bind(r.buttons.rewind,"click",()=>{n.lastSeekTime=Date.now(),n.rewind()},"rewind"),this.bind(r.buttons.fastForward,"click",()=>{n.lastSeekTime=Date.now(),n.forward()},"fastForward"),this.bind(r.buttons.mute,"click",()=>{n.muted=!n.muted},"mute"),this.bind(r.buttons.captions,"click",()=>n.toggleCaptions()),this.bind(r.buttons.download,"click",()=>{on.call(n,n.media,"download")},"download"),this.bind(r.buttons.fullscreen,"click",()=>{n.fullscreen.toggle()},"fullscreen"),this.bind(r.buttons.pip,"click",()=>{n.pip="toggle"},"pip"),this.bind(r.buttons.airplay,"click",n.airplay,"airplay"),this.bind(r.buttons.settings,"click",s=>{s.stopPropagation(),s.preventDefault(),kt.toggleMenu.call(n,s)},null,!1),this.bind(r.buttons.settings,"keyup",s=>{[" ","Enter"].includes(s.key)&&(s.key!=="Enter"?(s.preventDefault(),s.stopPropagation(),kt.toggleMenu.call(n,s)):kt.focusFirstMenuItem.call(n,null,!0))},null,!1),this.bind(r.settings.menu,"keydown",s=>{s.key==="Escape"&&kt.toggleMenu.call(n,s)}),this.bind(r.inputs.seek,"mousedown mousemove",s=>{const o=r.progress.getBoundingClientRect(),a=100/o.width*(s.pageX-o.left);s.currentTarget.setAttribute("seek-value",a)}),this.bind(r.inputs.seek,"mousedown mouseup keydown keyup touchstart touchend",s=>{const o=s.currentTarget,a="play-on-seeked";if(de.keyboardEvent(s)&&!["ArrowLeft","ArrowRight"].includes(s.key))return;n.lastSeekTime=Date.now();const l=o.hasAttribute(a),u=["mouseup","touchend","keyup"].includes(s.type);l&&u?(o.removeAttribute(a),nf(n.play())):!u&&n.playing&&(o.setAttribute(a,""),n.pause())}),Ns.isIos){const s=xC.call(n,'input[type="range"]');Array.from(s).forEach(o=>this.bind(o,i,a=>x3e(a.target)))}this.bind(r.inputs.seek,i,s=>{const o=s.currentTarget;let a=o.getAttribute("seek-value");de.empty(a)&&(a=o.value),o.removeAttribute("seek-value"),n.currentTime=a/o.max*n.duration},"seek"),this.bind(r.progress,"mouseenter mouseleave mousemove",s=>kt.updateSeekTooltip.call(n,s)),this.bind(r.progress,"mousemove touchmove",s=>{const{previewThumbnails:o}=n;o&&o.loaded&&o.startMove(s)}),this.bind(r.progress,"mouseleave touchend click",()=>{const{previewThumbnails:s}=n;s&&s.loaded&&s.endMove(!1,!0)}),this.bind(r.progress,"mousedown touchstart",s=>{const{previewThumbnails:o}=n;o&&o.loaded&&o.startScrubbing(s)}),this.bind(r.progress,"mouseup touchend",s=>{const{previewThumbnails:o}=n;o&&o.loaded&&o.endScrubbing(s)}),Ns.isWebKit&&Array.from(xC.call(n,'input[type="range"]')).forEach(s=>{this.bind(s,"input",o=>kt.updateRangeFill.call(n,o.target))}),n.config.toggleInvert&&!de.element(r.display.duration)&&this.bind(r.display.currentTime,"click",()=>{n.currentTime!==0&&(n.config.invertTime=!n.config.invertTime,kt.timeUpdate.call(n))}),this.bind(r.inputs.volume,i,s=>{n.volume=s.target.value},"volume"),this.bind(r.controls,"mouseenter mouseleave",s=>{r.controls.hover=!n.touch&&s.type==="mouseenter"}),r.fullscreen&&Array.from(r.fullscreen.children).filter(s=>!s.contains(r.container)).forEach(s=>{this.bind(s,"mouseenter mouseleave",o=>{r.controls&&(r.controls.hover=!n.touch&&o.type==="mouseenter")})}),this.bind(r.controls,"mousedown mouseup touchstart touchend touchcancel",s=>{r.controls.pressed=["mousedown","touchstart"].includes(s.type)}),this.bind(r.controls,"focusin",()=>{const{config:s,timers:o}=n;gr(r.controls,s.classNames.noTransition,!0),Sr.toggleControls.call(n,!0),setTimeout(()=>{gr(r.controls,s.classNames.noTransition,!1)},0);const a=this.touch?3e3:4e3;clearTimeout(o.controls),o.controls=setTimeout(()=>Sr.toggleControls.call(n,!1),a)}),this.bind(r.inputs.volume,"wheel",s=>{const o=s.webkitDirectionInvertedFromDevice,[a,l]=[s.deltaX,-s.deltaY].map(d=>o?-d:d),u=Math.sign(Math.abs(a)>Math.abs(l)?a:l);n.increaseVolume(u/50);const{volume:c}=n.media;(u===1&&c<1||u===-1&&c>0)&&s.preventDefault()},"volume",!1)}),this.player=t,this.lastKey=null,this.focusTimer=null,this.lastKeyDown=null,this.handleKey=this.handleKey.bind(this),this.toggleMenu=this.toggleMenu.bind(this),this.firstTouch=this.firstTouch.bind(this)}handleKey(t){const{player:n}=this,{elements:r}=n,{key:i,type:s,altKey:o,ctrlKey:a,metaKey:l,shiftKey:u}=t,c=s==="keydown",d=c&&i===this.lastKey;if(!(o||a||l||u)&&i){if(c){const h=document.activeElement;if(de.element(h)){const{editable:p}=n.config.selectors,{seek:m}=r.inputs;if(h!==m&&xy(h,p)||t.key===" "&&xy(h,'button, [role^="menuitem"]'))return}switch([" ","ArrowLeft","ArrowUp","ArrowRight","ArrowDown","0","1","2","3","4","5","6","7","8","9","c","f","k","l","m"].includes(i)&&(t.preventDefault(),t.stopPropagation()),i){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":d||(f=parseInt(i,10),n.currentTime=n.duration/10*f);break;case" ":case"k":d||nf(n.togglePlay());break;case"ArrowUp":n.increaseVolume(.1);break;case"ArrowDown":n.decreaseVolume(.1);break;case"m":d||(n.muted=!n.muted);break;case"ArrowRight":n.forward();break;case"ArrowLeft":n.rewind();break;case"f":n.fullscreen.toggle();break;case"c":d||n.toggleCaptions();break;case"l":n.loop=!n.loop}i==="Escape"&&!n.fullscreen.usingNative&&n.fullscreen.active&&n.fullscreen.toggle(),this.lastKey=i}else this.lastKey=null;var f}}toggleMenu(t){kt.toggleMenu.call(this.player,t)}}function MLt(e,t){return e(t={exports:{}},t.exports),t.exports}var LLt=MLt(function(e,t){e.exports=function(){var n=function(){},r={},i={},s={};function o(f,h){f=f.push?f:[f];var p,m,g,b=[],v=f.length,x=v;for(p=function(E,_){_.length&&b.push(E),--x||h(b)};v--;)m=f[v],(g=i[m])?p(m,g):(s[m]=s[m]||[]).push(p)}function a(f,h){if(f){var p=s[f];if(i[f]=h,p)for(;p.length;)p[0](f,h),p.splice(0,1)}}function l(f,h){f.call&&(f={success:f}),h.length?(f.error||n)(h):(f.success||n)(f)}function u(f,h,p,m){var g,b,v=document,x=p.async,E=(p.numRetries||0)+1,_=p.before||n,C=f.replace(/[\?|#].*$/,""),S=f.replace(/^(css|img)!/,"");m=m||0,/(^css!|\.css$)/.test(C)?((b=v.createElement("link")).rel="stylesheet",b.href=S,(g="hideFocus"in b)&&b.relList&&(g=0,b.rel="preload",b.as="style")):/(^img!|\.(png|gif|jpg|svg|webp)$)/.test(C)?(b=v.createElement("img")).src=S:((b=v.createElement("script")).src=f,b.async=x===void 0||x),b.onload=b.onerror=b.onbeforeload=function(k){var R=k.type[0];if(g)try{b.sheet.cssText.length||(R="e")}catch(O){O.code!=18&&(R="e")}if(R=="e"){if((m+=1)<E)return u(f,h,p,m)}else if(b.rel=="preload"&&b.as=="style")return b.rel="stylesheet";h(f,R,k.defaultPrevented)},_(f,b)!==!1&&v.head.appendChild(b)}function c(f,h,p){var m,g,b=(f=f.push?f:[f]).length,v=b,x=[];for(m=function(E,_,C){if(_=="e"&&x.push(E),_=="b"){if(!C)return;x.push(E)}--b||h(x)},g=0;g<v;g++)u(f[g],m,p)}function d(f,h,p){var m,g;if(h&&h.trim&&(m=h),g=(m?p:h)||{},m){if(m in r)throw"LoadJS";r[m]=!0}function b(v,x){c(f,function(E){l(g,E),v&&l({success:v,error:x},E),a(m,E)},g)}if(g.returnPromise)return new Promise(b);b()}return d.ready=function(f,h){return o(f,function(p){l(h,p)}),d},d.done=function(f){a(f,[])},d.reset=function(){r={},i={},s={}},d.isDefined=function(f){return f in r},d}()});function wQ(e){return new Promise((t,n)=>{LLt(e,{success:t,error:n})})}function FLt(e){return de.empty(e)?null:de.number(Number(e))?e:e.match(/^.*(vimeo.com\/|video\/)(\d+).*/)?RegExp.$2:e}function jLt(e){const t=e.match(/^.*(vimeo.com\/|video\/)(\d+)(\?.*&*h=|\/)+([\d,a-f]+)/);return t&&t.length===5?t[4]:null}function F_(e){e&&!this.embed.hasPlayed&&(this.embed.hasPlayed=!0),this.media.paused===e&&(this.media.paused=!e,on.call(this,this.media,e?"play":"pause"))}const Rz={setup(){const e=this;gr(e.elements.wrapper,e.config.classNames.embed,!0),e.options.speed=e.config.speed.options,fx.call(e),de.object(window.Vimeo)?Rz.ready.call(e):wQ(e.config.urls.vimeo.sdk).then(()=>{Rz.ready.call(e)}).catch(t=>{e.debug.warn("Vimeo SDK (player.js) failed to load",t)})},ready(){const e=this,t=e.config.vimeo,{premium:n,referrerPolicy:r,...i}=t;let s=e.media.getAttribute("src"),o="";de.empty(s)?(s=e.media.getAttribute(e.config.attributes.embed.id),o=e.media.getAttribute(e.config.attributes.embed.hash)):o=jLt(s);const a=o?{h:o}:{};n&&Object.assign(i,{controls:!1,sidedock:!1});const l=P3e({loop:e.config.loop.active,autoplay:e.autoplay,muted:e.muted,gesture:"media",playsinline:e.config.playsinline,...a,...i}),u=FLt(s),c=sn("iframe"),d=Iz(e.config.urls.vimeo.iframe,u,l);if(c.setAttribute("src",d),c.setAttribute("allowfullscreen",""),c.setAttribute("allow",["autoplay","fullscreen","picture-in-picture","encrypted-media","accelerometer","gyroscope"].join("; ")),de.empty(r)||c.setAttribute("referrerPolicy",r),n||!t.customControls)c.setAttribute("data-poster",e.poster),e.media=kN(c,e.media);else{const v=sn("div",{class:e.config.classNames.embedContainer,"data-poster":e.poster});v.appendChild(c),e.media=kN(v,e.media)}t.customControls||oA(Iz(e.config.urls.vimeo.api,d)).then(v=>{!de.empty(v)&&v.thumbnail_url&&Sr.setPoster.call(e,v.thumbnail_url).catch(()=>{})}),e.embed=new window.Vimeo.Player(c,{autopause:e.config.autopause,muted:e.muted}),e.media.paused=!0,e.media.currentTime=0,e.supported.ui&&e.embed.disableTextTrack(),e.media.play=()=>(F_.call(e,!0),e.embed.play()),e.media.pause=()=>(F_.call(e,!1),e.embed.pause()),e.media.stop=()=>{e.pause(),e.currentTime=0};let{currentTime:f}=e.media;Object.defineProperty(e.media,"currentTime",{get:()=>f,set(v){const{embed:x,media:E,paused:_,volume:C}=e,S=_&&!x.hasPlayed;E.seeking=!0,on.call(e,E,"seeking"),Promise.resolve(S&&x.setVolume(0)).then(()=>x.setCurrentTime(v)).then(()=>S&&x.pause()).then(()=>S&&x.setVolume(C)).catch(()=>{})}});let h=e.config.speed.selected;Object.defineProperty(e.media,"playbackRate",{get:()=>h,set(v){e.embed.setPlaybackRate(v).then(()=>{h=v,on.call(e,e.media,"ratechange")}).catch(()=>{e.options.speed=[1]})}});let{volume:p}=e.config;Object.defineProperty(e.media,"volume",{get:()=>p,set(v){e.embed.setVolume(v).then(()=>{p=v,on.call(e,e.media,"volumechange")})}});let{muted:m}=e.config;Object.defineProperty(e.media,"muted",{get:()=>m,set(v){const x=!!de.boolean(v)&&v;e.embed.setMuted(!!x||e.config.muted).then(()=>{m=x,on.call(e,e.media,"volumechange")})}});let g,{loop:b}=e.config;Object.defineProperty(e.media,"loop",{get:()=>b,set(v){const x=de.boolean(v)?v:e.config.loop.active;e.embed.setLoop(x).then(()=>{b=x})}}),e.embed.getVideoUrl().then(v=>{g=v,kt.setDownloadUrl.call(e)}).catch(v=>{this.debug.warn(v)}),Object.defineProperty(e.media,"currentSrc",{get:()=>g}),Object.defineProperty(e.media,"ended",{get:()=>e.currentTime===e.duration}),Promise.all([e.embed.getVideoWidth(),e.embed.getVideoHeight()]).then(v=>{const[x,E]=v;e.embed.ratio=A3e(x,E),fx.call(this)}),e.embed.setAutopause(e.config.autopause).then(v=>{e.config.autopause=v}),e.embed.getVideoTitle().then(v=>{e.config.title=v,Sr.setTitle.call(this)}),e.embed.getCurrentTime().then(v=>{f=v,on.call(e,e.media,"timeupdate")}),e.embed.getDuration().then(v=>{e.media.duration=v,on.call(e,e.media,"durationchange")}),e.embed.getTextTracks().then(v=>{e.media.textTracks=v,sr.setup.call(e)}),e.embed.on("cuechange",({cues:v=[]})=>{const x=v.map(E=>ILt(E.text));sr.updateCues.call(e,x)}),e.embed.on("loaded",()=>{e.embed.getPaused().then(v=>{F_.call(e,!v),v||on.call(e,e.media,"playing")}),de.element(e.embed.element)&&e.supported.ui&&e.embed.element.setAttribute("tabindex",-1)}),e.embed.on("bufferstart",()=>{on.call(e,e.media,"waiting")}),e.embed.on("bufferend",()=>{on.call(e,e.media,"playing")}),e.embed.on("play",()=>{F_.call(e,!0),on.call(e,e.media,"playing")}),e.embed.on("pause",()=>{F_.call(e,!1)}),e.embed.on("timeupdate",v=>{e.media.seeking=!1,f=v.seconds,on.call(e,e.media,"timeupdate")}),e.embed.on("progress",v=>{e.media.buffered=v.percent,on.call(e,e.media,"progress"),parseInt(v.percent,10)===1&&on.call(e,e.media,"canplaythrough"),e.embed.getDuration().then(x=>{x!==e.media.duration&&(e.media.duration=x,on.call(e,e.media,"durationchange"))})}),e.embed.on("seeked",()=>{e.media.seeking=!1,on.call(e,e.media,"seeked")}),e.embed.on("ended",()=>{e.media.paused=!0,on.call(e,e.media,"ended")}),e.embed.on("error",v=>{e.media.error=v,on.call(e,e.media,"error")}),t.customControls&&setTimeout(()=>Sr.build.call(e),0)}};function BLt(e){return de.empty(e)?null:e.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/)?RegExp.$2:e}function j_(e){e&&!this.embed.hasPlayed&&(this.embed.hasPlayed=!0),this.media.paused===e&&(this.media.paused=!e,on.call(this,this.media,e?"play":"pause"))}function zLt(e){return e.noCookie?"https://www.youtube-nocookie.com":window.location.protocol==="http:"?"http://www.youtube.com":void 0}const rD={setup(){if(gr(this.elements.wrapper,this.config.classNames.embed,!0),de.object(window.YT)&&de.function(window.YT.Player))rD.ready.call(this);else{const e=window.onYouTubeIframeAPIReady;window.onYouTubeIframeAPIReady=()=>{de.function(e)&&e(),rD.ready.call(this)},wQ(this.config.urls.youtube.sdk).catch(t=>{this.debug.warn("YouTube API failed to load",t)})}},getTitle(e){oA(Iz(this.config.urls.youtube.api,e)).then(t=>{if(de.object(t)){const{title:n,height:r,width:i}=t;this.config.title=n,Sr.setTitle.call(this),this.embed.ratio=A3e(i,r)}fx.call(this)}).catch(()=>{fx.call(this)})},ready(){const e=this,t=e.config.youtube,n=e.media&&e.media.getAttribute("id");if(!de.empty(n)&&n.startsWith("youtube-"))return;let r=e.media.getAttribute("src");de.empty(r)&&(r=e.media.getAttribute(this.config.attributes.embed.id));const i=BLt(r),s=sn("div",{id:CLt(e.provider),"data-poster":t.customControls?e.poster:void 0});if(e.media=kN(s,e.media),t.customControls){const o=a=>`https://i.ytimg.com/vi/${i}/${a}default.jpg`;nD(o("maxres"),121).catch(()=>nD(o("sd"),121)).catch(()=>nD(o("hq"))).then(a=>Sr.setPoster.call(e,a.src)).then(a=>{a.includes("maxres")||(e.elements.poster.style.backgroundSize="cover")}).catch(()=>{})}e.embed=new window.YT.Player(e.media,{videoId:i,host:zLt(t),playerVars:Ii({},{autoplay:e.config.autoplay?1:0,hl:e.config.hl,controls:e.supported.ui&&t.customControls?0:1,disablekb:1,playsinline:e.config.playsinline&&!e.config.fullscreen.iosNative?1:0,cc_load_policy:e.captions.active?1:0,cc_lang_pref:e.config.captions.language,widget_referrer:window?window.location.href:null},t),events:{onError(o){if(!e.media.error){const a=o.data,l={2:"The request contains an invalid parameter value. For example, this error occurs if you specify a video ID that does not have 11 characters, or if the video ID contains invalid characters, such as exclamation points or asterisks.",5:"The requested content cannot be played in an HTML5 player or another error related to the HTML5 player has occurred.",100:"The video requested was not found. This error occurs when a video has been removed (for any reason) or has been marked as private.",101:"The owner of the requested video does not allow it to be played in embedded players.",150:"The owner of the requested video does not allow it to be played in embedded players."}[a]||"An unknown error occurred";e.media.error={code:a,message:l},on.call(e,e.media,"error")}},onPlaybackRateChange(o){const a=o.target;e.media.playbackRate=a.getPlaybackRate(),on.call(e,e.media,"ratechange")},onReady(o){if(de.function(e.media.play))return;const a=o.target;rD.getTitle.call(e,i),e.media.play=()=>{j_.call(e,!0),a.playVideo()},e.media.pause=()=>{j_.call(e,!1),a.pauseVideo()},e.media.stop=()=>{a.stopVideo()},e.media.duration=a.getDuration(),e.media.paused=!0,e.media.currentTime=0,Object.defineProperty(e.media,"currentTime",{get:()=>Number(a.getCurrentTime()),set(d){e.paused&&!e.embed.hasPlayed&&e.embed.mute(),e.media.seeking=!0,on.call(e,e.media,"seeking"),a.seekTo(d)}}),Object.defineProperty(e.media,"playbackRate",{get:()=>a.getPlaybackRate(),set(d){a.setPlaybackRate(d)}});let{volume:l}=e.config;Object.defineProperty(e.media,"volume",{get:()=>l,set(d){l=d,a.setVolume(100*l),on.call(e,e.media,"volumechange")}});let{muted:u}=e.config;Object.defineProperty(e.media,"muted",{get:()=>u,set(d){const f=de.boolean(d)?d:u;u=f,a[f?"mute":"unMute"](),a.setVolume(100*l),on.call(e,e.media,"volumechange")}}),Object.defineProperty(e.media,"currentSrc",{get:()=>a.getVideoUrl()}),Object.defineProperty(e.media,"ended",{get:()=>e.currentTime===e.duration});const c=a.getAvailablePlaybackRates();e.options.speed=c.filter(d=>e.config.speed.options.includes(d)),e.supported.ui&&t.customControls&&e.media.setAttribute("tabindex",-1),on.call(e,e.media,"timeupdate"),on.call(e,e.media,"durationchange"),clearInterval(e.timers.buffering),e.timers.buffering=setInterval(()=>{e.media.buffered=a.getVideoLoadedFraction(),(e.media.lastBuffered===null||e.media.lastBuffered<e.media.buffered)&&on.call(e,e.media,"progress"),e.media.lastBuffered=e.media.buffered,e.media.buffered===1&&(clearInterval(e.timers.buffering),on.call(e,e.media,"canplaythrough"))},200),t.customControls&&setTimeout(()=>Sr.build.call(e),50)},onStateChange(o){const a=o.target;switch(clearInterval(e.timers.playing),e.media.seeking&&[1,2].includes(o.data)&&(e.media.seeking=!1,on.call(e,e.media,"seeked")),o.data){case-1:on.call(e,e.media,"timeupdate"),e.media.buffered=a.getVideoLoadedFraction(),on.call(e,e.media,"progress");break;case 0:j_.call(e,!1),e.media.loop?(a.stopVideo(),a.playVideo()):on.call(e,e.media,"ended");break;case 1:t.customControls&&!e.config.autoplay&&e.media.paused&&!e.embed.hasPlayed?e.media.pause():(j_.call(e,!0),on.call(e,e.media,"playing"),e.timers.playing=setInterval(()=>{on.call(e,e.media,"timeupdate")},50),e.media.duration!==a.getDuration()&&(e.media.duration=a.getDuration(),on.call(e,e.media,"durationchange")));break;case 2:e.muted||e.embed.unMute(),j_.call(e,!1);break;case 3:on.call(e,e.media,"waiting")}on.call(e,e.elements.container,"statechange",!1,{code:o.data})}}})}},O3e={setup(){this.media?(gr(this.elements.container,this.config.classNames.type.replace("{0}",this.type),!0),gr(this.elements.container,this.config.classNames.provider.replace("{0}",this.provider),!0),this.isEmbed&&gr(this.elements.container,this.config.classNames.type.replace("{0}","video"),!0),this.isVideo&&(this.elements.wrapper=sn("div",{class:this.config.classNames.video}),_3e(this.media,this.elements.wrapper),this.elements.poster=sn("div",{class:this.config.classNames.poster}),this.elements.wrapper.appendChild(this.elements.poster)),this.isHTML5?t0.setup.call(this):this.isYouTube?rD.setup.call(this):this.isVimeo&&Rz.setup.call(this)):this.debug.warn("No media element found!")}};class ULt{constructor(t){Rt(this,"load",()=>{this.enabled&&(de.object(window.google)&&de.object(window.google.ima)?this.ready():wQ(this.player.config.urls.googleIMA.sdk).then(()=>{this.ready()}).catch(()=>{this.trigger("error",new Error("Google IMA SDK failed to load"))}))}),Rt(this,"ready",()=>{var n;this.enabled||((n=this).manager&&n.manager.destroy(),n.elements.displayContainer&&n.elements.displayContainer.destroy(),n.elements.container.remove()),this.startSafetyTimer(12e3,"ready()"),this.managerPromise.then(()=>{this.clearSafetyTimer("onAdsManagerLoaded()")}),this.listeners(),this.setupIMA()}),Rt(this,"setupIMA",()=>{this.elements.container=sn("div",{class:this.player.config.classNames.ads}),this.player.elements.container.appendChild(this.elements.container),google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED),google.ima.settings.setLocale(this.player.config.ads.language),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(this.player.config.playsinline),this.elements.displayContainer=new google.ima.AdDisplayContainer(this.elements.container,this.player.media),this.loader=new google.ima.AdsLoader(this.elements.displayContainer),this.loader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,n=>this.onAdsManagerLoaded(n),!1),this.loader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,n=>this.onAdError(n),!1),this.requestAds()}),Rt(this,"requestAds",()=>{const{container:n}=this.player.elements;try{const r=new google.ima.AdsRequest;r.adTagUrl=this.tagUrl,r.linearAdSlotWidth=n.offsetWidth,r.linearAdSlotHeight=n.offsetHeight,r.nonLinearAdSlotWidth=n.offsetWidth,r.nonLinearAdSlotHeight=n.offsetHeight,r.forceNonLinearFullSlot=!1,r.setAdWillPlayMuted(!this.player.muted),this.loader.requestAds(r)}catch(r){this.onAdError(r)}}),Rt(this,"pollCountdown",(n=!1)=>{if(!n)return clearInterval(this.countdownTimer),void this.elements.container.removeAttribute("data-badge-text");this.countdownTimer=setInterval(()=>{const r=M6(Math.max(this.manager.getRemainingTime(),0)),i=`${Ds.get("advertisement",this.player.config)} - ${r}`;this.elements.container.setAttribute("data-badge-text",i)},100)}),Rt(this,"onAdsManagerLoaded",n=>{if(!this.enabled)return;const r=new google.ima.AdsRenderingSettings;r.restoreCustomPlaybackStateOnAdBreakComplete=!0,r.enablePreloading=!0,this.manager=n.getAdsManager(this.player,r),this.cuePoints=this.manager.getCuePoints(),this.manager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,i=>this.onAdError(i)),Object.keys(google.ima.AdEvent.Type).forEach(i=>{this.manager.addEventListener(google.ima.AdEvent.Type[i],s=>this.onAdEvent(s))}),this.trigger("loaded")}),Rt(this,"addCuePoints",()=>{de.empty(this.cuePoints)||this.cuePoints.forEach(n=>{if(n!==0&&n!==-1&&n<this.player.duration){const r=this.player.elements.progress;if(de.element(r)){const i=100/this.player.duration*n,s=sn("span",{class:this.player.config.classNames.cues});s.style.left=`${i.toString()}%`,r.appendChild(s)}}})}),Rt(this,"onAdEvent",n=>{const{container:r}=this.player.elements,i=n.getAd(),s=n.getAdData();switch((o=>{on.call(this.player,this.player.media,`ads${o.replace(/_/g,"").toLowerCase()}`)})(n.type),n.type){case google.ima.AdEvent.Type.LOADED:this.trigger("loaded"),this.pollCountdown(!0),i.isLinear()||(i.width=r.offsetWidth,i.height=r.offsetHeight);break;case google.ima.AdEvent.Type.STARTED:this.manager.setVolume(this.player.volume);break;case google.ima.AdEvent.Type.ALL_ADS_COMPLETED:this.player.ended?this.loadAds():this.loader.contentComplete();break;case google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED:this.pauseContent();break;case google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED:this.pollCountdown(),this.resumeContent();break;case google.ima.AdEvent.Type.LOG:s.adError&&this.player.debug.warn(`Non-fatal ad error: ${s.adError.getMessage()}`)}}),Rt(this,"onAdError",n=>{this.cancel(),this.player.debug.warn("Ads error",n)}),Rt(this,"listeners",()=>{const{container:n}=this.player.elements;let r;this.player.on("canplay",()=>{this.addCuePoints()}),this.player.on("ended",()=>{this.loader.contentComplete()}),this.player.on("timeupdate",()=>{r=this.player.currentTime}),this.player.on("seeked",()=>{const i=this.player.currentTime;de.empty(this.cuePoints)||this.cuePoints.forEach((s,o)=>{r<s&&s<i&&(this.manager.discardAdBreak(),this.cuePoints.splice(o,1))})}),window.addEventListener("resize",()=>{this.manager&&this.manager.resize(n.offsetWidth,n.offsetHeight,google.ima.ViewMode.NORMAL)})}),Rt(this,"play",()=>{const{container:n}=this.player.elements;this.managerPromise||this.resumeContent(),this.managerPromise.then(()=>{this.manager.setVolume(this.player.volume),this.elements.displayContainer.initialize();try{this.initialized||(this.manager.init(n.offsetWidth,n.offsetHeight,google.ima.ViewMode.NORMAL),this.manager.start()),this.initialized=!0}catch(r){this.onAdError(r)}}).catch(()=>{})}),Rt(this,"resumeContent",()=>{this.elements.container.style.zIndex="",this.playing=!1,nf(this.player.media.play())}),Rt(this,"pauseContent",()=>{this.elements.container.style.zIndex=3,this.playing=!0,this.player.media.pause()}),Rt(this,"cancel",()=>{this.initialized&&this.resumeContent(),this.trigger("error"),this.loadAds()}),Rt(this,"loadAds",()=>{this.managerPromise.then(()=>{this.manager&&this.manager.destroy(),this.managerPromise=new Promise(n=>{this.on("loaded",n),this.player.debug.log(this.manager)}),this.initialized=!1,this.requestAds()}).catch(()=>{})}),Rt(this,"trigger",(n,...r)=>{const i=this.events[n];de.array(i)&&i.forEach(s=>{de.function(s)&&s.apply(this,r)})}),Rt(this,"on",(n,r)=>(de.array(this.events[n])||(this.events[n]=[]),this.events[n].push(r),this)),Rt(this,"startSafetyTimer",(n,r)=>{this.player.debug.log(`Safety timer invoked from: ${r}`),this.safetyTimer=setTimeout(()=>{this.cancel(),this.clearSafetyTimer("startSafetyTimer()")},n)}),Rt(this,"clearSafetyTimer",n=>{de.nullOrUndefined(this.safetyTimer)||(this.player.debug.log(`Safety timer cleared from: ${n}`),clearTimeout(this.safetyTimer),this.safetyTimer=null)}),this.player=t,this.config=t.config.ads,this.playing=!1,this.initialized=!1,this.elements={container:null,displayContainer:null},this.manager=null,this.loader=null,this.cuePoints=null,this.events={},this.safetyTimer=null,this.countdownTimer=null,this.managerPromise=new Promise((n,r)=>{this.on("loaded",n),this.on("error",r)}),this.load()}get enabled(){const{config:t}=this;return this.player.isHTML5&&this.player.isVideo&&t.enabled&&(!de.empty(t.publisherId)||de.url(t.tagUrl))}get tagUrl(){const{config:t}=this;return de.url(t.tagUrl)?t.tagUrl:`https://go.aniview.com/api/adserver6/vast/?${P3e({AV_PUBLISHERID:"58c25bb0073ef448b1087ad6",AV_CHANNELID:"5a0458dc28a06145e4519d21",AV_URL:window.location.hostname,cb:Date.now(),AV_WIDTH:640,AV_HEIGHT:480,AV_CDIM2:t.publisherId})}`}}function $3e(e=0,t=0,n=255){return Math.min(Math.max(e,t),n)}const qLt=e=>{const t=[];return e.split(/\r\n\r\n|\n\n|\r\r/).forEach(n=>{const r={};n.split(/\r\n|\n|\r/).forEach(i=>{if(de.number(r.startTime)){if(!de.empty(i.trim())&&de.empty(r.text)){const s=i.trim().split("#xywh=");[r.text]=s,s[1]&&([r.x,r.y,r.w,r.h]=s[1].split(","))}}else{const s=i.match(/([0-9]{2})?:?([0-9]{2}):([0-9]{2}).([0-9]{2,3})( ?--> ?)([0-9]{2})?:?([0-9]{2}):([0-9]{2}).([0-9]{2,3})/);s&&(r.startTime=60*Number(s[1]||0)*60+60*Number(s[2])+Number(s[3])+ +`0.${s[4]}`,r.endTime=60*Number(s[6]||0)*60+60*Number(s[7])+Number(s[8])+ +`0.${s[9]}`)}}),r.text&&t.push(r)}),t},mde=(e,t)=>{const n={};return e>t.width/t.height?(n.width=t.width,n.height=1/e*t.width):(n.height=t.height,n.width=e*t.height),n};class Dz{constructor(t){Rt(this,"load",()=>{this.player.elements.display.seekTooltip&&(this.player.elements.display.seekTooltip.hidden=this.enabled),this.enabled&&this.getThumbnails().then(()=>{this.enabled&&(this.render(),this.determineContainerAutoSizing(),this.listeners(),this.loaded=!0)})}),Rt(this,"getThumbnails",()=>new Promise(n=>{const{src:r}=this.player.config.previewThumbnails;if(de.empty(r))throw new Error("Missing previewThumbnails.src config attribute");const i=()=>{this.thumbnails.sort((s,o)=>s.height-o.height),this.player.debug.log("Preview thumbnails",this.thumbnails),n()};if(de.function(r))r(s=>{this.thumbnails=s,i()});else{const s=(de.string(r)?[r]:r).map(o=>this.getThumbnail(o));Promise.all(s).then(i)}})),Rt(this,"getThumbnail",n=>new Promise(r=>{oA(n).then(i=>{const s={frames:qLt(i),height:null,urlPrefix:""};s.frames[0].text.startsWith("/")||s.frames[0].text.startsWith("http://")||s.frames[0].text.startsWith("https://")||(s.urlPrefix=n.substring(0,n.lastIndexOf("/")+1));const o=new Image;o.onload=()=>{s.height=o.naturalHeight,s.width=o.naturalWidth,this.thumbnails.push(s),r()},o.src=s.urlPrefix+s.frames[0].text})})),Rt(this,"startMove",n=>{if(this.loaded&&de.event(n)&&["touchmove","mousemove"].includes(n.type)&&this.player.media.duration){if(n.type==="touchmove")this.seekTime=this.player.media.duration*(this.player.elements.inputs.seek.value/100);else{var r,i;const s=this.player.elements.progress.getBoundingClientRect(),o=100/s.width*(n.pageX-s.left);this.seekTime=this.player.media.duration*(o/100),this.seekTime<0&&(this.seekTime=0),this.seekTime>this.player.media.duration-1&&(this.seekTime=this.player.media.duration-1),this.mousePosX=n.pageX,this.elements.thumb.time.innerText=M6(this.seekTime);const a=(r=this.player.config.markers)===null||r===void 0||(i=r.points)===null||i===void 0?void 0:i.find(({time:l})=>l===Math.round(this.seekTime));a&&this.elements.thumb.time.insertAdjacentHTML("afterbegin",`${a.label}<br>`)}this.showImageAtCurrentTime()}}),Rt(this,"endMove",()=>{this.toggleThumbContainer(!1,!0)}),Rt(this,"startScrubbing",n=>{(de.nullOrUndefined(n.button)||n.button===!1||n.button===0)&&(this.mouseDown=!0,this.player.media.duration&&(this.toggleScrubbingContainer(!0),this.toggleThumbContainer(!1,!0),this.showImageAtCurrentTime()))}),Rt(this,"endScrubbing",()=>{this.mouseDown=!1,Math.ceil(this.lastTime)===Math.ceil(this.player.media.currentTime)?this.toggleScrubbingContainer(!1):vQ.call(this.player,this.player.media,"timeupdate",()=>{this.mouseDown||this.toggleScrubbingContainer(!1)})}),Rt(this,"listeners",()=>{this.player.on("play",()=>{this.toggleThumbContainer(!1,!0)}),this.player.on("seeked",()=>{this.toggleThumbContainer(!1)}),this.player.on("timeupdate",()=>{this.lastTime=this.player.media.currentTime})}),Rt(this,"render",()=>{this.elements.thumb.container=sn("div",{class:this.player.config.classNames.previewThumbnails.thumbContainer}),this.elements.thumb.imageContainer=sn("div",{class:this.player.config.classNames.previewThumbnails.imageContainer}),this.elements.thumb.container.appendChild(this.elements.thumb.imageContainer);const n=sn("div",{class:this.player.config.classNames.previewThumbnails.timeContainer});this.elements.thumb.time=sn("span",{},"00:00"),n.appendChild(this.elements.thumb.time),this.elements.thumb.imageContainer.appendChild(n),de.element(this.player.elements.progress)&&this.player.elements.progress.appendChild(this.elements.thumb.container),this.elements.scrubbing.container=sn("div",{class:this.player.config.classNames.previewThumbnails.scrubbingContainer}),this.player.elements.wrapper.appendChild(this.elements.scrubbing.container)}),Rt(this,"destroy",()=>{this.elements.thumb.container&&this.elements.thumb.container.remove(),this.elements.scrubbing.container&&this.elements.scrubbing.container.remove()}),Rt(this,"showImageAtCurrentTime",()=>{this.mouseDown?this.setScrubbingContainerSize():this.setThumbContainerSizeAndPos();const n=this.thumbnails[0].frames.findIndex(s=>this.seekTime>=s.startTime&&this.seekTime<=s.endTime),r=n>=0;let i=0;this.mouseDown||this.toggleThumbContainer(r),r&&(this.thumbnails.forEach((s,o)=>{this.loadedImages.includes(s.frames[n].text)&&(i=o)}),n!==this.showingThumb&&(this.showingThumb=n,this.loadImage(i)))}),Rt(this,"loadImage",(n=0)=>{const r=this.showingThumb,i=this.thumbnails[n],{urlPrefix:s}=i,o=i.frames[r],a=i.frames[r].text,l=s+a;if(this.currentImageElement&&this.currentImageElement.dataset.filename===a)this.showImage(this.currentImageElement,o,n,r,a,!1),this.currentImageElement.dataset.index=r,this.removeOldImages(this.currentImageElement);else{this.loadingImage&&this.usingSprites&&(this.loadingImage.onload=null);const u=new Image;u.src=l,u.dataset.index=r,u.dataset.filename=a,this.showingThumbFilename=a,this.player.debug.log(`Loading image: ${l}`),u.onload=()=>this.showImage(u,o,n,r,a,!0),this.loadingImage=u,this.removeOldImages(u)}}),Rt(this,"showImage",(n,r,i,s,o,a=!0)=>{this.player.debug.log(`Showing thumb: ${o}. num: ${s}. qual: ${i}. newimg: ${a}`),this.setImageSizeAndOffset(n,r),a&&(this.currentImageContainer.appendChild(n),this.currentImageElement=n,this.loadedImages.includes(o)||this.loadedImages.push(o)),this.preloadNearby(s,!0).then(this.preloadNearby(s,!1)).then(this.getHigherQuality(i,n,r,o))}),Rt(this,"removeOldImages",n=>{Array.from(this.currentImageContainer.children).forEach(r=>{if(r.tagName.toLowerCase()!=="img")return;const i=this.usingSprites?500:1e3;if(r.dataset.index!==n.dataset.index&&!r.dataset.deleting){r.dataset.deleting=!0;const{currentImageContainer:s}=this;setTimeout(()=>{s.removeChild(r),this.player.debug.log(`Removing thumb: ${r.dataset.filename}`)},i)}})}),Rt(this,"preloadNearby",(n,r=!0)=>new Promise(i=>{setTimeout(()=>{const s=this.thumbnails[0].frames[n].text;if(this.showingThumbFilename===s){let o;o=r?this.thumbnails[0].frames.slice(n):this.thumbnails[0].frames.slice(0,n).reverse();let a=!1;o.forEach(l=>{const u=l.text;if(u!==s&&!this.loadedImages.includes(u)){a=!0,this.player.debug.log(`Preloading thumb filename: ${u}`);const{urlPrefix:c}=this.thumbnails[0],d=c+u,f=new Image;f.src=d,f.onload=()=>{this.player.debug.log(`Preloaded thumb filename: ${u}`),this.loadedImages.includes(u)||this.loadedImages.push(u),i()}}}),a||i()}},300)})),Rt(this,"getHigherQuality",(n,r,i,s)=>{if(n<this.thumbnails.length-1){let o=r.naturalHeight;this.usingSprites&&(o=i.h),o<this.thumbContainerHeight&&setTimeout(()=>{this.showingThumbFilename===s&&(this.player.debug.log(`Showing higher quality thumb for: ${s}`),this.loadImage(n+1))},300)}}),Rt(this,"toggleThumbContainer",(n=!1,r=!1)=>{const i=this.player.config.classNames.previewThumbnails.thumbContainerShown;this.elements.thumb.container.classList.toggle(i,n),!n&&r&&(this.showingThumb=null,this.showingThumbFilename=null)}),Rt(this,"toggleScrubbingContainer",(n=!1)=>{const r=this.player.config.classNames.previewThumbnails.scrubbingContainerShown;this.elements.scrubbing.container.classList.toggle(r,n),n||(this.showingThumb=null,this.showingThumbFilename=null)}),Rt(this,"determineContainerAutoSizing",()=>{(this.elements.thumb.imageContainer.clientHeight>20||this.elements.thumb.imageContainer.clientWidth>20)&&(this.sizeSpecifiedInCSS=!0)}),Rt(this,"setThumbContainerSizeAndPos",()=>{const{imageContainer:n}=this.elements.thumb;if(this.sizeSpecifiedInCSS){if(n.clientHeight>20&&n.clientWidth<20){const r=Math.floor(n.clientHeight*this.thumbAspectRatio);n.style.width=`${r}px`}else if(n.clientHeight<20&&n.clientWidth>20){const r=Math.floor(n.clientWidth/this.thumbAspectRatio);n.style.height=`${r}px`}}else{const r=Math.floor(this.thumbContainerHeight*this.thumbAspectRatio);n.style.height=`${this.thumbContainerHeight}px`,n.style.width=`${r}px`}this.setThumbContainerPos()}),Rt(this,"setThumbContainerPos",()=>{const n=this.player.elements.progress.getBoundingClientRect(),r=this.player.elements.container.getBoundingClientRect(),{container:i}=this.elements.thumb,s=r.left-n.left+10,o=r.right-n.left-i.clientWidth-10,a=this.mousePosX-n.left-i.clientWidth/2,l=$3e(a,s,o);i.style.left=`${l}px`,i.style.setProperty("--preview-arrow-offset",a-l+"px")}),Rt(this,"setScrubbingContainerSize",()=>{const{width:n,height:r}=mde(this.thumbAspectRatio,{width:this.player.media.clientWidth,height:this.player.media.clientHeight});this.elements.scrubbing.container.style.width=`${n}px`,this.elements.scrubbing.container.style.height=`${r}px`}),Rt(this,"setImageSizeAndOffset",(n,r)=>{if(!this.usingSprites)return;const i=this.thumbContainerHeight/r.h;n.style.height=n.naturalHeight*i+"px",n.style.width=n.naturalWidth*i+"px",n.style.left=`-${r.x*i}px`,n.style.top=`-${r.y*i}px`}),this.player=t,this.thumbnails=[],this.loaded=!1,this.lastMouseMoveTime=Date.now(),this.mouseDown=!1,this.loadedImages=[],this.elements={thumb:{},scrubbing:{}},this.load()}get enabled(){return this.player.isHTML5&&this.player.isVideo&&this.player.config.previewThumbnails.enabled}get currentImageContainer(){return this.mouseDown?this.elements.scrubbing.container:this.elements.thumb.imageContainer}get usingSprites(){return Object.keys(this.thumbnails[0].frames[0]).includes("w")}get thumbAspectRatio(){return this.usingSprites?this.thumbnails[0].frames[0].w/this.thumbnails[0].frames[0].h:this.thumbnails[0].width/this.thumbnails[0].height}get thumbContainerHeight(){if(this.mouseDown){const{height:t}=mde(this.thumbAspectRatio,{width:this.player.media.clientWidth,height:this.player.media.clientHeight});return t}return this.sizeSpecifiedInCSS?this.elements.thumb.imageContainer.clientHeight:Math.floor(this.player.media.clientWidth/this.thumbAspectRatio/4)}get currentImageElement(){return this.mouseDown?this.currentScrubbingImageElement:this.currentThumbnailImageElement}set currentImageElement(t){this.mouseDown?this.currentScrubbingImageElement=t:this.currentThumbnailImageElement=t}}const Pz={insertElements(e,t){de.string(t)?dde(e,this.media,{src:t}):de.array(t)&&t.forEach(n=>{dde(e,this.media,n)})},change(e){E3e(e,"sources.length")?(t0.cancelRequests.call(this),this.destroy.call(this,()=>{this.options.quality=[],Xh(this.media),this.media=null,de.element(this.elements.container)&&this.elements.container.removeAttribute("class");const{sources:t,type:n}=e,[{provider:r=Hm.html5,src:i}]=t,s=r==="html5"?n:"div",o=r==="html5"?{}:{src:i};Object.assign(this,{provider:r,type:n,supported:Di.check(n,r,this.config.playsinline),media:sn(s,o)}),this.elements.container.appendChild(this.media),de.boolean(e.autoplay)&&(this.config.autoplay=e.autoplay),this.isHTML5&&(this.config.crossorigin&&this.media.setAttribute("crossorigin",""),this.config.autoplay&&this.media.setAttribute("autoplay",""),de.empty(e.poster)||(this.poster=e.poster),this.config.loop.active&&this.media.setAttribute("loop",""),this.config.muted&&this.media.setAttribute("muted",""),this.config.playsinline&&this.media.setAttribute("playsinline","")),Sr.addStyleHook.call(this),this.isHTML5&&Pz.insertElements.call(this,"source",t),this.config.title=e.title,O3e.setup.call(this),this.isHTML5&&Object.keys(e).includes("tracks")&&Pz.insertElements.call(this,"track",e.tracks),(this.isHTML5||this.isEmbed&&!this.supported.ui)&&Sr.build.call(this),this.isHTML5&&this.media.load(),de.empty(e.previewThumbnails)||(Object.assign(this.config.previewThumbnails,e.previewThumbnails),this.previewThumbnails&&this.previewThumbnails.loaded&&(this.previewThumbnails.destroy(),this.previewThumbnails=null),this.config.previewThumbnails.enabled&&(this.previewThumbnails=new Dz(this))),this.fullscreen.update()},!0)):this.debug.warn("Invalid source format")}};let M3e=class Nz{constructor(t,n){if(Rt(this,"play",()=>de.function(this.media.play)?(this.ads&&this.ads.enabled&&this.ads.managerPromise.then(()=>this.ads.play()).catch(()=>nf(this.media.play())),this.media.play()):null),Rt(this,"pause",()=>this.playing&&de.function(this.media.pause)?this.media.pause():null),Rt(this,"togglePlay",a=>(de.boolean(a)?a:!this.playing)?this.play():this.pause()),Rt(this,"stop",()=>{this.isHTML5?(this.pause(),this.restart()):de.function(this.media.stop)&&this.media.stop()}),Rt(this,"restart",()=>{this.currentTime=0}),Rt(this,"rewind",a=>{this.currentTime-=de.number(a)?a:this.config.seekTime}),Rt(this,"forward",a=>{this.currentTime+=de.number(a)?a:this.config.seekTime}),Rt(this,"increaseVolume",a=>{const l=this.media.muted?0:this.volume;this.volume=l+(de.number(a)?a:0)}),Rt(this,"decreaseVolume",a=>{this.increaseVolume(-a)}),Rt(this,"airplay",()=>{Di.airplay&&this.media.webkitShowPlaybackTargetPicker()}),Rt(this,"toggleControls",a=>{if(this.supported.ui&&!this.isAudio){const l=IN(this.elements.container,this.config.classNames.hideControls),u=a===void 0?void 0:!a,c=gr(this.elements.container,this.config.classNames.hideControls,u);if(c&&de.array(this.config.controls)&&this.config.controls.includes("settings")&&!de.empty(this.config.settings)&&kt.toggleMenu.call(this,!1),c!==l){const d=c?"controlshidden":"controlsshown";on.call(this,this.media,d)}return!c}return!1}),Rt(this,"on",(a,l)=>{Xn.call(this,this.elements.container,a,l)}),Rt(this,"once",(a,l)=>{vQ.call(this,this.elements.container,a,l)}),Rt(this,"off",(a,l)=>{$6(this.elements.container,a,l)}),Rt(this,"destroy",(a,l=!1)=>{if(!this.ready)return;const u=()=>{document.body.style.overflow="",this.embed=null,l?(Object.keys(this.elements).length&&(Xh(this.elements.buttons.play),Xh(this.elements.captions),Xh(this.elements.controls),Xh(this.elements.wrapper),this.elements.buttons.play=null,this.elements.captions=null,this.elements.controls=null,this.elements.wrapper=null),de.function(a)&&a()):(ELt.call(this),t0.cancelRequests.call(this),kN(this.elements.original,this.elements.container),on.call(this,this.elements.original,"destroyed",!0),de.function(a)&&a.call(this.elements.original),this.ready=!1,setTimeout(()=>{this.elements=null,this.media=null},200))};this.stop(),clearTimeout(this.timers.loading),clearTimeout(this.timers.controls),clearTimeout(this.timers.resized),this.isHTML5?(Sr.toggleNativeControls.call(this,!0),u()):this.isYouTube?(clearInterval(this.timers.buffering),clearInterval(this.timers.playing),this.embed!==null&&de.function(this.embed.destroy)&&this.embed.destroy(),u()):this.isVimeo&&(this.embed!==null&&this.embed.unload().then(u),setTimeout(u,200))}),Rt(this,"supports",a=>Di.mime.call(this,a)),this.timers={},this.ready=!1,this.loading=!1,this.failed=!1,this.touch=Di.touch,this.media=t,de.string(this.media)&&(this.media=document.querySelectorAll(this.media)),(window.jQuery&&this.media instanceof jQuery||de.nodeList(this.media)||de.array(this.media))&&(this.media=this.media[0]),this.config=Ii({},N3e,Nz.defaults,n||{},(()=>{try{return JSON.parse(this.media.getAttribute("data-plyr-config"))}catch{return{}}})()),this.elements={container:null,fullscreen:null,captions:null,buttons:{},display:{},progress:{},inputs:{},settings:{popup:null,menu:null,panels:{},buttons:{}}},this.captions={active:null,currentTrack:-1,meta:new WeakMap},this.fullscreen={active:!1},this.options={speed:[],quality:[]},this.debug=new OLt(this.config.debug),this.debug.log("Config",this.config),this.debug.log("Support",Di),de.nullOrUndefined(this.media)||!de.element(this.media))return void this.debug.error("Setup failed: no suitable element passed");if(this.media.plyr)return void this.debug.warn("Target already setup");if(!this.config.enabled)return void this.debug.error("Setup failed: disabled by config");if(!Di.check().api)return void this.debug.error("Setup failed: no support");const r=this.media.cloneNode(!0);r.autoplay=!1,this.elements.original=r;const i=this.media.tagName.toLowerCase();let s=null,o=null;switch(i){case"div":if(s=this.media.querySelector("iframe"),de.element(s)){if(o=D3e(s.getAttribute("src")),this.provider=NLt(o.toString()),this.elements.container=this.media,this.media=s,this.elements.container.className="",o.search.length){const a=["1","true"];a.includes(o.searchParams.get("autoplay"))&&(this.config.autoplay=!0),a.includes(o.searchParams.get("loop"))&&(this.config.loop.active=!0),this.isYouTube?(this.config.playsinline=a.includes(o.searchParams.get("playsinline")),this.config.youtube.hl=o.searchParams.get("hl")):this.config.playsinline=!0}}else this.provider=this.media.getAttribute(this.config.attributes.embed.provider),this.media.removeAttribute(this.config.attributes.embed.provider);if(de.empty(this.provider)||!Object.values(Hm).includes(this.provider))return void this.debug.error("Setup failed: Invalid provider");this.type=$F.video;break;case"video":case"audio":this.type=i,this.provider=Hm.html5,this.media.hasAttribute("crossorigin")&&(this.config.crossorigin=!0),this.media.hasAttribute("autoplay")&&(this.config.autoplay=!0),(this.media.hasAttribute("playsinline")||this.media.hasAttribute("webkit-playsinline"))&&(this.config.playsinline=!0),this.media.hasAttribute("muted")&&(this.config.muted=!0),this.media.hasAttribute("loop")&&(this.config.loop.active=!0);break;default:return void this.debug.error("Setup failed: unsupported type")}this.supported=Di.check(this.type,this.provider),this.supported.api?(this.eventListeners=[],this.listeners=new $Lt(this),this.storage=new _C(this),this.media.plyr=this,de.element(this.elements.container)||(this.elements.container=sn("div"),_3e(this.media,this.elements.container)),Sr.migrateStyles.call(this),Sr.addStyleHook.call(this),O3e.setup.call(this),this.config.debug&&Xn.call(this,this.elements.container,this.config.events.join(" "),a=>{this.debug.log(`event: ${a.type}`)}),this.fullscreen=new bc(this),(this.isHTML5||this.isEmbed&&!this.supported.ui)&&Sr.build.call(this),this.listeners.container(),this.listeners.global(),this.config.ads.enabled&&(this.ads=new ULt(this)),this.isHTML5&&this.config.autoplay&&this.once("canplay",()=>nf(this.play())),this.lastSeekTime=0,this.config.previewThumbnails.enabled&&(this.previewThumbnails=new Dz(this))):this.debug.error("Setup failed: no support")}get isHTML5(){return this.provider===Hm.html5}get isEmbed(){return this.isYouTube||this.isVimeo}get isYouTube(){return this.provider===Hm.youtube}get isVimeo(){return this.provider===Hm.vimeo}get isVideo(){return this.type===$F.video}get isAudio(){return this.type===$F.audio}get playing(){return!!(this.ready&&!this.paused&&!this.ended)}get paused(){return!!this.media.paused}get stopped(){return!!(this.paused&&this.currentTime===0)}get ended(){return!!this.media.ended}set currentTime(t){if(!this.duration)return;const n=de.number(t)&&t>0;this.media.currentTime=n?Math.min(t,this.duration):0,this.debug.log(`Seeking to ${this.currentTime} seconds`)}get currentTime(){return Number(this.media.currentTime)}get buffered(){const{buffered:t}=this.media;return de.number(t)?t:t&&t.length&&this.duration>0?t.end(0)/this.duration:0}get seeking(){return!!this.media.seeking}get duration(){const t=parseFloat(this.config.duration),n=(this.media||{}).duration,r=de.number(n)&&n!==1/0?n:0;return t||r}set volume(t){let n=t;de.string(n)&&(n=Number(n)),de.number(n)||(n=this.storage.get("volume")),de.number(n)||({volume:n}=this.config),n>1&&(n=1),n<0&&(n=0),this.config.volume=n,this.media.volume=n,!de.empty(t)&&this.muted&&n>0&&(this.muted=!1)}get volume(){return Number(this.media.volume)}set muted(t){let n=t;de.boolean(n)||(n=this.storage.get("muted")),de.boolean(n)||(n=this.config.muted),this.config.muted=n,this.media.muted=n}get muted(){return!!this.media.muted}get hasAudio(){return!this.isHTML5||!!this.isAudio||!!this.media.mozHasAudio||!!this.media.webkitAudioDecodedByteCount||!!(this.media.audioTracks&&this.media.audioTracks.length)}set speed(t){let n=null;de.number(t)&&(n=t),de.number(n)||(n=this.storage.get("speed")),de.number(n)||(n=this.config.speed.selected);const{minimumSpeed:r,maximumSpeed:i}=this;n=$3e(n,r,i),this.config.speed.selected=n,setTimeout(()=>{this.media&&(this.media.playbackRate=n)},0)}get speed(){return Number(this.media.playbackRate)}get minimumSpeed(){return this.isYouTube?Math.min(...this.options.speed):this.isVimeo?.5:.0625}get maximumSpeed(){return this.isYouTube?Math.max(...this.options.speed):this.isVimeo?2:16}set quality(t){const n=this.config.quality,r=this.options.quality;if(!r.length)return;let i=[!de.empty(t)&&Number(t),this.storage.get("quality"),n.selected,n.default].find(de.number),s=!0;if(!r.includes(i)){const o=T3e(r,i);this.debug.warn(`Unsupported quality option: ${i}, using ${o} instead`),i=o,s=!1}n.selected=i,this.media.quality=i,s&&this.storage.set({quality:i})}get quality(){return this.media.quality}set loop(t){const n=de.boolean(t)?t:this.config.loop.active;this.config.loop.active=n,this.media.loop=n}get loop(){return!!this.media.loop}set source(t){Pz.change.call(this,t)}get source(){return this.media.currentSrc}get download(){const{download:t}=this.config.urls;return de.url(t)?t:this.source}set download(t){de.url(t)&&(this.config.urls.download=t,kt.setDownloadUrl.call(this))}set poster(t){this.isVideo?Sr.setPoster.call(this,t,!1).catch(()=>{}):this.debug.warn("Poster can only be set for video")}get poster(){return this.isVideo?this.media.getAttribute("poster")||this.media.getAttribute("data-poster"):null}get ratio(){if(!this.isVideo)return null;const t=RN(bQ.call(this));return de.array(t)?t.join(":"):t}set ratio(t){this.isVideo?de.string(t)&&S3e(t)?(this.config.ratio=RN(t),fx.call(this)):this.debug.error(`Invalid aspect ratio specified (${t})`):this.debug.warn("Aspect ratio can only be set for video")}set autoplay(t){this.config.autoplay=de.boolean(t)?t:this.config.autoplay}get autoplay(){return!!this.config.autoplay}toggleCaptions(t){sr.toggle.call(this,t,!1)}set currentTrack(t){sr.set.call(this,t,!1),sr.setup.call(this)}get currentTrack(){const{toggled:t,currentTrack:n}=this.captions;return t?n:-1}set language(t){sr.setLanguage.call(this,t,!1)}get language(){return(sr.getCurrentTrack.call(this)||{}).language}set pip(t){if(!Di.pip)return;const n=de.boolean(t)?t:!this.pip;de.function(this.media.webkitSetPresentationMode)&&this.media.webkitSetPresentationMode(n?OF.active:OF.inactive),de.function(this.media.requestPictureInPicture)&&(!this.pip&&n?this.media.requestPictureInPicture():this.pip&&!n&&document.exitPictureInPicture())}get pip(){return Di.pip?de.empty(this.media.webkitPresentationMode)?this.media===document.pictureInPictureElement:this.media.webkitPresentationMode===OF.active:null}setPreviewThumbnails(t){this.previewThumbnails&&this.previewThumbnails.loaded&&(this.previewThumbnails.destroy(),this.previewThumbnails=null),Object.assign(this.config.previewThumbnails,t),this.config.previewThumbnails.enabled&&(this.previewThumbnails=new Dz(this))}static supported(t,n){return Di.check(t,n)}static loadSprite(t,n){return I3e(t,n)}static setup(t,n={}){let r=null;return de.string(t)?r=Array.from(document.querySelectorAll(t)):de.nodeList(t)?r=Array.from(t):de.array(t)&&(r=t.filter(de.element)),de.empty(r)?null:r.map(i=>new Nz(i,n))}};M3e.defaults=vLt(N3e);function HLt(e,t,n=[]){const[r,i]=D.useState(null),s=D.useRef(null),{instantiate:o,destroy:a,getAPI:l,params:u}=t;D.useEffect(()=>{const d=o(s.current,u);return i(d),()=>{a&&a(d,u)}},n);const c=D.useMemo(()=>l(r,u),[r]);return D.useImperativeHandle(e,c,[c]),s}const WLt={},VLt=(e,t)=>{const n=new M3e(".plyr-react",t.options||{});return t.source&&(n.source=t.source),n},GLt=e=>{e&&e.destroy()},YLt=()=>{},KLt=e=>e?()=>({plyr:e}):()=>new Proxy({plyr:{source:null}},{get:(t,n)=>n==="plyr"?t[n]:YLt});function L3e(e,t,n=null){return HLt(e,{instantiate:VLt,getAPI:KLt,destroy:GLt,params:t},n||[t.options,t.source])}const LF=D.forwardRef((e,t)=>{const{source:n,options:r=null,...i}=e,s=L3e(t,{source:n,options:r});return T.jsx("video",{ref:s,className:"plyr-react plyr",...i})});(WLt&&"production")!=="production"&&(LF.displayName="Plyr",LF.defaultProps={options:{controls:["rewind","play","fast-forward","progress","current-time","duration","mute","volume","settings","fullscreen"],i18n:{restart:"Restart",rewind:"Rewind {seektime}s",play:"Play",pause:"Pause",fastForward:"Forward {seektime}s",seek:"Seek",seekLabel:"{currentTime} of {duration}",played:"Played",buffered:"Buffered",currentTime:"Current time",duration:"Duration",volume:"Volume",mute:"Mute",unmute:"Unmute",enableCaptions:"Enable captions",disableCaptions:"Disable captions",download:"Download",enterFullscreen:"Enter fullscreen",exitFullscreen:"Exit fullscreen",frameTitle:"Player for {title}",captions:"Captions",settings:"Settings",menuBack:"Go back to previous menu",speed:"Speed",normal:"Normal",quality:"Quality",loop:"Loop"}},source:{type:"video",sources:[{src:"https://cdn.plyr.io/static/blank.mp4",type:"video/mp4",size:720},{src:"https://cdn.plyr.io/static/blank.mp4",type:"video/mp4",size:1080}]}},LF.propTypes={options:wD.object,source:wD.any});const XLt=D.forwardRef((e,t)=>{const{source:n,options:r=null,endedCallback:i,errorCallback:s}=e,o=L3e(t,{options:r,source:n});return D.useEffect(()=>{const{current:a}=t;a.plyr.source!==null&&(a.plyr.on("ended",i),a.plyr.on("error",s))}),T.jsx("video",{ref:o,className:"plyr-react plyr"})});function QLt({currentConfig:e}){const t=D.useMemo(()=>e.path.startsWith("http")?e.path:`${Vi}${e.path}`,[e.path]),[n,r]=D.useState(!0),[i,s]=D.useState(!1);D.useEffect(()=>{async function m(){if(t.startsWith("http"))s(!0);else{const g=await I$(t);s(!!g)}r(!1)}m()},[t]);const o=D.useMemo(()=>t.includes("youtube")?[{src:t,provider:"youtube"}]:t.includes("vimeo")?[{src:t,provider:"vimeo"}]:[{src:t,type:"video/mp4"}],[t]),a=D.useMemo(()=>({controls:[e.forceCompletion!==!1?"play-large":"play","current-time",...e.withTimeline?["progress"]:[],"volume","fullscreen"]}),[e.forceCompletion,e.withTimeline]),l=pd(),u=Pa(),c=ys(),{updateResponseBlockValidation:d}=Gi();D.useEffect(()=>{e.forceCompletion&&c(d({location:"stimulus",identifier:`${l}_${u}`,status:!1,values:{}}))},[l,e.forceCompletion,u,c,d]);const f=D.useCallback(()=>{e.forceCompletion&&c(d({location:"stimulus",identifier:`${l}_${u}`,status:!0,values:{}}))},[l,e.forceCompletion,u,c,d]),h=D.useCallback(()=>{s(!1)},[]),p=D.useRef(null);return n||i?T.jsx(Se,{mb:"md",children:T.jsx(XLt,{ref:p,source:{type:"video",sources:o},options:a,endedCallback:f,errorCallback:h})}):T.jsx(Cp,{path:e.path})}function JLt(){const e=Ku(),t=Pa(),n=pd(),r=e.components[n],{storageEngine:i}=Ai(),s=Wn(N=>N.answers),o=D.useRef(null),[a,l]=D.useState(null),{setIsRecording:u}=Gi(),c=Wn(N=>N.analysisProvState.stimulus),d=K0(),f=Y0(),h=Wn(N=>N.sequence),[p]=Bf(),m=Wn(N=>N.participantId),g=D.useMemo(()=>p.get("participantId"),[p]);XEe();const b=ys(),{setAlertModal:v}=Gi();D.useEffect(()=>{(i==null?void 0:i.getEngine())!=="supabase"&&b(v({show:!0,message:"There was an issue connecting to the supabase database. This could be caused by a network issue or your adblocker. If you are using an adblocker, please disable it for this website and refresh."}))},[v,i,b]),D.useEffect(()=>{!e||!e.uiConfig.recordAudio||!i||f&&f.endTime>0||d||(o.current&&a&&i.saveAudio(o.current,a),o.current&&(o.current.stream.getTracks().forEach(N=>{var L;N.stop(),(L=o.current)==null||L.stream.removeTrack(N)}),o.current.stream.getAudioTracks().forEach(N=>{var L;N.stop(),(L=o.current)==null||L.stream.removeTrack(N)}),o.current.stop(),o.current=null),r&&r.recordAudio!==void 0&&!r.recordAudio||n==="end"?(l(null),b(u(!1))):navigator.mediaDevices.getUserMedia({audio:!0}).then(N=>{const L=new MediaRecorder(N);o.current=L,o.current.start(),b(u(!0)),l(`${n}_${t}`)}))},[n,t]);const[x,E]=D.useState([]),_=D.useRef([]);D.useEffect(()=>{async function N(){var B;const $=((B=lV(h,t))==null?void 0:B.map(H=>H.currentBlock.id).filter(H=>H!==void 0))||[];E($)}async function L(){const $=_.current;JSON.stringify($)!==JSON.stringify(x)&&x.length>0&&i&&await i.addParticipantTags(x),_.current=x}N().then(L)},[t,i,h]);const C=Hv(),S=D.useMemo(()=>{var L,$;const N=n&&n!=="end"&&!n.startsWith("__")&&Iu(r,e);if(typeof N=="object"){const B=(L=s[C])==null?void 0:L.parameters,H=($=s[C])==null?void 0:$.correctAnswer;return{...N,parameters:B||N.parameters||{},correctAnswer:H||N.correctAnswer||void 0}}return N},[s,n,C,r,e]);if(n==="end")return T.jsx(gmt,{});if(n==="__dynamicLoading")return null;if(n==="__trainingFailed")return T.jsx(ymt,{});if(n==="__timedOut")return T.jsx(vmt,{});if(n==="Notfound")return T.jsx(Cp,{email:e.uiConfig.contactEmail});if(g&&m!==g)return T.jsx(Jc,{style:{height:"80vh"},children:T.jsx(ld,{})});const k=(S==null?void 0:S.instruction)||"",R=S.instructionLocation??e.uiConfig.instructionLocation??"sidebar",O=R==="sidebar";return T.jsxs(T.Fragment,{children:[R==="aboveStimulus"&&T.jsx(Ws,{text:k}),T.jsx(OP,{status:f,config:S,location:"aboveStimulus"},`${t}-above-response-block`),T.jsxs(D.Suspense,{fallback:T.jsx("div",{children:"Loading..."}),children:[S.type==="markdown"&&T.jsx(smt,{currentConfig:S}),S.type==="website"&&T.jsx(Zpt,{currentConfig:S,provState:c,answers:s}),S.type==="image"&&T.jsx(nmt,{currentConfig:S}),S.type==="react-component"&&T.jsx(imt,{currentConfig:S,provState:c,answers:s}),S.type==="vega"&&T.jsx(FMt,{currentConfig:S,provState:c}),S.type==="video"&&T.jsx(QLt,{currentConfig:S})]},`${t}-stimulus`),(R==="belowStimulus"||R===void 0&&!O)&&T.jsx(Ws,{text:k}),T.jsx(OP,{status:f,config:S,location:"belowStimulus"},`${t}-below-response-block`)]})}function F3e(e){const[t]=Bf();return T.jsx(sH,{...e,to:{pathname:e.to,search:t.toString()}})}var FF,gde;function ZLt(){if(gde)return FF;gde=1;var e="Expected a function",t=NaN,n="[object Symbol]",r=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,o=/^0o[0-7]+$/i,a=parseInt,l=typeof cs=="object"&&cs&&cs.Object===Object&&cs,u=typeof self=="object"&&self&&self.Object===Object&&self,c=l||u||Function("return this")(),d=Object.prototype,f=d.toString,h=Math.max,p=Math.min,m=function(){return c.Date.now()};function g(_,C,S){var k,R,O,N,L,$,B=0,H=!1,Y=!1,J=!0;if(typeof _!="function")throw new TypeError(e);C=E(C)||0,b(S)&&(H=!!S.leading,Y="maxWait"in S,O=Y?h(E(S.maxWait)||0,C):O,J="trailing"in S?!!S.trailing:J);function K(me){var ae=k,fe=R;return k=R=void 0,B=me,N=_.apply(fe,ae),N}function Z(me){return B=me,L=setTimeout(V,C),H?K(me):N}function U(me){var ae=me-$,fe=me-B,be=C-ae;return Y?p(be,O-fe):be}function j(me){var ae=me-$,fe=me-B;return $===void 0||ae>=C||ae<0||Y&&fe>=O}function V(){var me=m();if(j(me))return z(me);L=setTimeout(V,U(me))}function z(me){return L=void 0,J&&k?K(me):(k=R=void 0,N)}function G(){L!==void 0&&clearTimeout(L),B=0,k=$=R=L=void 0}function Q(){return L===void 0?N:z(m())}function ie(){var me=m(),ae=j(me);if(k=arguments,R=this,$=me,ae){if(L===void 0)return Z($);if(Y)return L=setTimeout(V,C),K($)}return L===void 0&&(L=setTimeout(V,C)),N}return ie.cancel=G,ie.flush=Q,ie}function b(_){var C=typeof _;return!!_&&(C=="object"||C=="function")}function v(_){return!!_&&typeof _=="object"}function x(_){return typeof _=="symbol"||v(_)&&f.call(_)==n}function E(_){if(typeof _=="number")return _;if(x(_))return t;if(b(_)){var C=typeof _.valueOf=="function"?_.valueOf():_;_=b(C)?C+"":C}if(typeof _!="string")return _===0?_:+_;_=_.replace(r,"");var S=s.test(_);return S||o.test(_)?a(_.slice(2),S?2:8):i.test(_)?t:+_}return FF=g,FF}var eFt=ZLt();const jd=vl(eFt);function j3e(e,t,n,r){let i=0;for(let s=0;s<e.components.length;s+=1){const o=e.components[s];if(typeof o=="string"){if(r===e.orderPath&&o===t&&s>=n)break;i+=1}else if(o.order==="dynamic"?i+=1:i+=j3e(o,t,n,r),r.includes(o.orderPath))break}return i}function B3e(e,t){let n=0;return t.components.forEach(r=>{var i;if(typeof r=="string"&&((i=e.interruptions)!=null&&i.flatMap(s=>s.components).includes(r)))n+=1;else if(typeof r!="string"){const s=e.components.find(o=>typeof o!="string"&&o.orderPath===r.orderPath);n+=B3e(s,r)}}),n}function tFt(e,t){const n=[];return t.forEach(r=>{const i=e.findIndex(s=>typeof s=="string"?s===r:typeof r!="string"&&s.orderPath===r.orderPath);i!==-1&&(n.push(e[i]),e.splice(i,1)),i===-1&&typeof r=="string"&&n.push(r)}),e&&n.push(...e),n}function nFt({step:e,disabled:t,fullSequence:n,startIndex:r,interruption:i,participantView:s,studyConfig:o,subSequence:a,analysisNavigation:l,parentBlock:u,parentActive:c,answers:d}){const f=Wf(),h=Ra(),p=Pa(),m=o.components[e]&&Iu(o.components[e],o),g=a&&a.components.slice(r).includes(e)?j3e(n,e,r,a.orderPath):-1,{trialId:b,funcIndex:v,analysisTab:x}=To(),[E]=Bf(),_=D.useMemo(()=>E.get("participantId"),[E]),C=x?[]:zv(),S=b===e,k=c&&u&&v?r===gf(v):!1,R=s?p===g||k:p===`reviewer-${e}`,O=l?S:R,N=b?`./../${e}`:`./${e}`,L=u.order==="dynamic"?`/${f}/${ri(C.indexOf(u.id))}/${ri(r)}`:"",$=s?u.order==="dynamic"?L:`/${f}/${ri(g)}`:`/${f}/reviewer-${e}`,B=l?()=>h(N):()=>h(`${$}${_?`?participantId=${_}`:""}`),H=e.includes(".co.")?".co.":e.includes(".components.")?".components.":!1,Y=e.includes("$")&&H&&e.includes(H)?e.split(H).at(-1):e,J=u.order==="dynamic"?Object.entries(d).find(([fe,be])=>fe===`${u.id}_${C.indexOf(u.id)}_${Y}_${r}`):Object.entries(d).find(([fe,be])=>fe===`${Y}_${r}`||fe===`${e}_${r}`),K=J?J[1]:null,Z=K&&K.correctAnswer.length>0&&Object.keys(K.answer).length>0&&K.correctAnswer,U=Z&&K&&Object.values(Z).every(fe=>K.answer[fe.id]===fe.answer),j=K&&Z?U?T.jsx(zC,{size:16,style:{marginRight:4,marginBottom:-3},color:"green"}):T.jsx($x,{size:16,style:{marginRight:4,marginBottom:-3},color:"red"}):null,V=6,z=m&&JSON.stringify(m.response,null,2),[G,Q]=D.useState(V),ie=K&&K.correctAnswer.length>0?JSON.stringify(K.correctAnswer,null,2):m&&m.correctAnswer?JSON.stringify(m.correctAnswer,null,2):void 0,[me,ae]=D.useState(V);return T.jsxs(Cy,{withinPortal:!0,position:"left",withArrow:!0,arrowSize:10,shadow:"md",offset:0,children:[T.jsx(Cy.Target,{children:T.jsx(_O,{active:O,style:{lineHeight:"32px",height:"32px"},label:T.jsxs(Se,{children:[i&&T.jsx(xn,{label:"Interruption",position:"right",withArrow:!0,children:T.jsx(s7e,{size:16,style:{marginRight:4,marginBottom:-2},color:"orange"})}),e!==Y&&T.jsx(xn,{label:"Package import",position:"right",withArrow:!0,children:T.jsx(w7e,{size:16,style:{marginRight:4,marginBottom:-2},color:"blue"})}),(m==null?void 0:m.responseOrder)==="random"&&T.jsx(xn,{label:"Random responses",position:"right",withArrow:!0,children:T.jsx(f7e,{size:16,opacity:.8,style:{marginRight:4,marginTop:-4,verticalAlign:"middle"},color:"black"})}),j,T.jsx(Ve,{size:"sm",span:O,fw:O?"700":void 0,display:"inline",style:{textWrap:"nowrap"},children:Y})]}),onClick:B,disabled:t&&u.order!=="dynamic"})}),m&&T.jsx(Cy.Dropdown,{children:T.jsxs(Se,{mah:700,maw:500,style:{overflow:"auto"},children:[T.jsxs(Se,{children:[T.jsx(Ve,{fw:900,display:"inline-block",mr:2,children:"Name:"})," ",T.jsx(Ve,{fw:400,component:"span",children:Y})]}),m.description&&T.jsxs(Se,{children:[T.jsx(Ve,{fw:900,display:"inline-block",mr:2,children:"Description:"})," ",T.jsx(Ve,{fw:400,component:"span",children:m.description})]}),("parameters"in m||K)&&T.jsxs(Se,{children:[T.jsx(Ve,{fw:900,display:"inline-block",mr:2,children:"Parameters:"})," ",T.jsx(Xd,{block:!0,children:K&&JSON.stringify(Object.keys(K).length>0?K.parameters:"parameters"in m?m.parameters:{},null,2)})]}),K&&Object.keys(K.answer).length>0&&T.jsxs(Se,{children:[T.jsxs(Ve,{fw:900,display:"inline-block",mr:2,children:[j,"Participant Answer:"]})," ",T.jsx(Xd,{block:!0,children:JSON.stringify(K.answer,null,2)})]}),ie&&T.jsxs(Se,{children:[T.jsx(Ve,{fw:900,display:"inline-block",mr:2,children:"Correct Answer:"})," ",T.jsxs(Xd,{block:!0,children:[T.jsx(Ve,{size:"xs",lineClamp:me,children:ie}),ie.split(`
`).length>V&&T.jsx(Dt,{justify:"flex-end",children:(me===void 0||ie.split(`
`).length>me)&&T.jsx(Gt,{variant:"light",size:"xs",onClick:()=>{ae(fe=>fe===V?void 0:V)},children:me!==void 0?"Show more":"Show less"})})]})]}),T.jsxs(Se,{children:[T.jsx(Ve,{fw:900,display:"inline-block",mr:2,children:"Response:"})," ",T.jsxs(Xd,{block:!0,children:[T.jsx(Ve,{size:"xs",lineClamp:G,children:z}),z.split(`
`).length>V&&T.jsx(Dt,{justify:"flex-end",children:(G===void 0||z.split(`
`).length>G)&&T.jsx(Gt,{variant:"light",size:"xs",onClick:()=>{Q(fe=>fe===V?void 0:V)},children:G!==void 0?"Show more":"Show less"})})]})]}),m.meta&&T.jsxs(Se,{children:[T.jsx(Ve,{fw:"900",component:"span",children:"Task Meta: "}),T.jsx(Xd,{block:!0,children:JSON.stringify(m.meta,null,2)})]})]})})]})}function DN({configSequence:e,fullSequence:t,participantSequence:n,participantView:r,studyConfig:i,analysisNavigation:s}){var S;let o=structuredClone(e.components);n&&r&&(o=tFt(structuredClone(e.components),structuredClone(n.components)));const{analysisTab:a}=To();let l={};a||(l=Wn(k=>k.answers)),r||(o=[...((S=e.interruptions)==null?void 0:S.flatMap(k=>k.components))||[],...o||[]]);const u=D.useMemo(()=>n?Rf(n).length-B3e(e,n):0,[e,n]),c=D.useMemo(()=>Rf(e),[e]),[d,f]=D.useState(u>0),[h]=Bf(),p=D.useMemo(()=>h.get("participantId"),[h]),m=Pa(),g=a?[]:zv(),b=typeof m=="number"&&e.order==="dynamic"&&g[m]===e.id,v=e.id&&g.indexOf(e.id)||-1,x=Wf(),E=Ra(),_=()=>E(`/${x}/${ri(v)}/${ri(0)}${p?`?participantId=${p}`:""}`),C=[...o,...Object.entries(l).filter(([k,R])=>k.startsWith(`${e.id}_${v}_`)).map(([k,R])=>R.componentName)];return T.jsx(_O,{active:b,label:T.jsxs(Se,{style:{opacity:u>0?1:.5},children:[T.jsx(Ve,{size:"sm",display:"inline",fw:b?900:700,children:e.id?e.id:e.order}),e.order==="random"||e.order==="latinSquare"?T.jsx(xn,{label:e.order,position:"right",withArrow:!0,children:T.jsx(r7e,{size:"15",opacity:.5,style:{marginLeft:"5px",verticalAlign:"middle"}})}):null,r&&T.jsx(qc,{ml:5,variant:"light",children:e.order==="dynamic"?`${Object.keys(l).filter(k=>k.startsWith(`${e.id}_`)).length} / ?`:`${u}/${c.length}`}),r&&e.interruptions&&T.jsx(qc,{ml:5,color:"orange",variant:"light",children:(n==null?void 0:n.components.filter(k=>{var R;return typeof k=="string"&&((R=e.interruptions)==null?void 0:R.flatMap(O=>O.components).includes(k))}).length)||0})]}),opened:d,onClick:()=>e.order==="dynamic"&&!s&&r?_():f(!d),childrenOffset:32,style:{lineHeight:"32px",height:"32px"},children:d?T.jsx(Se,{style:{borderLeft:"1px solid #e9ecef"},children:C.map((k,R)=>{if(typeof k=="string")return T.jsx(nFt,{step:k,disabled:r&&(n==null?void 0:n.components[R])!==k,fullSequence:t,startIndex:R,interruption:e.interruptions&&e.interruptions.findIndex(N=>N.components.includes(k))>-1||!1,participantView:r,studyConfig:i,subSequence:n,analysisNavigation:s,parentBlock:e,parentActive:b,answers:l},R);const O=n==null?void 0:n.components.find(N=>typeof N!="string"&&N.orderPath===k.orderPath);return T.jsx(DN,{configSequence:k,participantSequence:O,fullSequence:t,participantView:r,studyConfig:i,analysisNavigation:s},R)})}):null},e.id)}function z3e(e,t){e==null||e.clearCurrentParticipantId().then(()=>{window.location.href=t}).catch(n=>{console.error(n)})}function yde({text:e}){return T.jsx(xn,{label:e,multiline:!0,w:200,style:{whiteSpace:"normal"},withinPortal:!0,position:"bottom",children:T.jsx(cH,{size:16,style:{marginBottom:-3,marginLeft:4}})})}function rFt(){const e=Wn(h=>h.sequence),{toggleStudyBrowser:t}=Gi(),n=Ku(),r=ys(),i=Wf(),s=nH(`/${i}`),{storageEngine:o}=Ai(),a=K0(),l=D.useMemo(()=>{let h=structuredClone(n.sequence);return h=uV(h,"root"),h.components.push("end"),h},[n.sequence]),[u,c]=D.useState("participant"),d=D.useMemo(()=>u==="allTrials"||a,[u,a]),f=Wn(h=>h.modes);return T.jsxs(Ar.Aside,{p:"0",children:[T.jsxs(Ar.Section,{p:"sm",pb:0,children:[T.jsxs(Dt,{direction:"row",justify:"space-between",children:[T.jsx(Ve,{size:"md",fw:700,pt:3,children:"Study Browser"}),T.jsx(xn,{label:"Go to the sequence of the next participant in the experiment. Sequences can be different between participants due to randomization, etc.",w:280,multiline:!0,disabled:d,children:T.jsx(Gt,{variant:"light",leftSection:T.jsx(dH,{size:14}),onClick:()=>z3e(o,s),size:"xs",disabled:d,children:"Next Participant"})}),a?T.jsx(xn,{label:"The study browser cannot be closed in replay mode",withinPortal:!0,children:T.jsx(pp,{onClick:()=>r(t()),mt:1,disabled:a})}):T.jsx(pp,{onClick:()=>r(t()),mt:1,disabled:a})]}),T.jsxs(Dt,{direction:"row",justify:"space-between",mt:"xs",opacity:.7,children:[T.jsxs(Ve,{size:"sm",children:["Study Status:"," ",f!=null&&f.dataCollectionEnabled?"Collecting Data":"Data Collection Disabled"]}),T.jsxs(Dt,{gap:"sm",children:[f!=null&&f.analyticsInterfacePubliclyAccessible?T.jsx(xn,{label:"Analytics interface publicly accessible",multiline:!0,w:200,style:{whiteSpace:"normal"},withinPortal:!0,position:"bottom",children:T.jsx(Ege,{size:16,color:"green"})}):T.jsx(xn,{label:"Analytics interface not publicly accessible",multiline:!0,w:200,style:{whiteSpace:"normal"},withinPortal:!0,position:"bottom",children:T.jsx(xge,{size:16,color:"red"})}),(o==null?void 0:o.getEngine())==="localStorage"?T.jsx(xn,{label:"Local storage enabled",withinPortal:!0,position:"bottom",children:T.jsx(vge,{size:16,color:"green"})}):T.jsx(xn,{label:"Firebase enabled",withinPortal:!0,position:"bottom",children:T.jsx(wge,{size:16,color:"green"})})]})]})]}),T.jsx(Ar.Section,{grow:!0,component:fp,p:"xs",pt:8,children:T.jsxs(Ln,{value:u,onChange:c,children:[T.jsx(Se,{style:{position:"sticky",top:0,backgroundColor:"white",zIndex:1},children:T.jsxs(Ln.List,{grow:!0,children:[T.jsxs(Ln.Tab,{value:"participant",children:["Participant View",T.jsx(yde,{text:"The Participants View shows items just as a participants would see them, considering randomization, omissions, etc. You can navigate between multiple participants using the next participant button."})]}),T.jsxs(Ln.Tab,{value:"allTrials",disabled:a,children:["All Trials View",T.jsx(yde,{text:"The All Trials View shows all items in the order defined in the config."})]})]})}),T.jsx(Ln.Panel,{value:"participant",children:T.jsx(DN,{configSequence:l,participantSequence:e,fullSequence:e,participantView:!0,studyConfig:n})}),T.jsx(Ln.Panel,{value:"allTrials",children:T.jsx(DN,{configSequence:l,participantSequence:e,fullSequence:e,participantView:!1,studyConfig:n})})]})})]})}function iFt({studyNavigatorEnabled:e,dataCollectionEnabled:t}){const n=Wn(R=>R.config),r=Wn(R=>R.answers),i=zv(),s=ys(),{toggleShowHelpText:o,toggleStudyBrowser:a,incrementHelpCounter:l}=Gi(),{storageEngine:u}=Ai(),c=pd(),d=D.useMemo(()=>Iu(n.components[c]||{},n),[c,n]),f=Pa(),h=D.useMemo(()=>{const R=Object.values(r).filter(N=>N.endTime>-1).length,O=i.map((N,L)=>n.components[N]?1:typeof f=="number"&&f<=L&&N!=="end"?55:Object.entries(r).filter(([$,B])=>$.includes(`${N}_`)).length).reduce((N,L)=>N+L,0);return R/O*100},[r,f,i,n.components]),[p,m]=D.useState(!1),g=n==null?void 0:n.uiConfig.logoPath,b=D.useMemo(()=>d.withProgressBar??n.uiConfig.withProgressBar,[d,n]),v=D.useMemo(()=>d.showTitle??n.uiConfig.showTitle??!0,[d,n]),x=Wf(),E=nH(`/${x}`),_=D.useRef(null),[C,S]=D.useState(!1),k=Wn(R=>R.isRecording);return D.useEffect(()=>{const R=_.current;R&&S(R.scrollWidth>R.offsetWidth)},[n]),T.jsx(Ar.Header,{p:"md",children:T.jsxs(rf,{mt:-7,align:"center",children:[T.jsx(rf.Col,{span:4,children:T.jsxs(Dt,{align:"center",children:[T.jsx(j0,{w:40,src:`${Vi}${g}`,alt:"Study Logo"}),T.jsx(Ul,{w:"md"}),v?T.jsx(mi,{ref:_,order:4,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},title:C?n==null?void 0:n.studyMetadata.title:void 0,children:n==null?void 0:n.studyMetadata.title}):null]})}),T.jsx(rf.Col,{span:4,children:b&&T.jsx(Ix,{radius:"md",size:"lg",value:h})}),T.jsx(rf.Col,{span:4,children:T.jsxs(yi,{wrap:"nowrap",justify:"right",children:[k?T.jsxs(yi,{ml:"xl",gap:20,wrap:"nowrap",children:[T.jsx(Ve,{color:"red",children:"Recording audio"}),T.jsx(Jve,{})]}):null,!t&&T.jsx(xn,{multiline:!0,withArrow:!0,arrowSize:6,w:300,label:"This is a demo version of the study, were not collecting any data.",children:T.jsx(qc,{size:"lg",color:"orange",children:"Demo Mode"})}),(n==null?void 0:n.uiConfig.helpTextPath)!==void 0&&T.jsx(Gt,{variant:"outline",onClick:()=>{s(o()),s(l({identifier:`${c}_${f}`}))},children:"Help"}),T.jsxs(fa,{shadow:"md",width:200,withinPortal:!0,opened:p,onChange:m,children:[T.jsx(fa.Target,{children:T.jsx(L0,{size:"lg",className:"studyBrowserMenuDropdown",variant:"subtle",color:"gray",children:T.jsx(h7e,{})})}),T.jsxs(fa.Dropdown,{children:[e&&T.jsx(fa.Item,{leftSection:T.jsx(Cge,{size:14}),onClick:()=>s(a()),children:"Study Browser"}),T.jsx(fa.Item,{component:"a",href:n!==null?`mailto:${n.uiConfig.contactEmail}`:void 0,leftSection:T.jsx(v7e,{size:14}),children:"Contact"}),e&&T.jsx(fa.Item,{leftSection:T.jsx(dH,{size:14}),onClick:()=>z3e(u,E),children:"Next Participant"}),e&&T.jsx(fa.Item,{leftSection:T.jsx(yge,{size:14}),component:"a",href:`${Vi}analysis/stats/${x}`,children:"Analyze & Manage"})]})]})]})})]})})}function sFt(){const e=Ku(),t=pd(),n=e.components[t],r=D.useMemo(()=>n?Iu(n,e):null,[n,e]),i=Y0(),s=(r==null?void 0:r.withSidebar)??e.uiConfig.withSidebar,o=(r==null?void 0:r.instruction)||"",l=D.useMemo(()=>(r==null?void 0:r.instructionLocation)??e.uiConfig.instructionLocation??"sidebar",[r,e])==="sidebar";return s&&r?T.jsxs(Ar.Navbar,{bg:"gray.1",display:"block",style:{zIndex:0,overflowY:"scroll"},children:[l&&o!==""&&T.jsxs(Ar.Section,{bg:"gray.3",p:"md",children:[T.jsx(Ve,{span:!0,c:"orange.8",fw:700,inherit:!0,children:"Task:"}),T.jsx(Ws,{text:o})]}),T.jsx(Ar.Section,{p:"md",children:T.jsx(OP,{status:i,config:r,location:"sidebar"},`${t}-sidebar-response-block`)})]}):T.jsx(Ar.Navbar,{bg:"gray.1",display:"block",style:{zIndex:0,overflowY:"scroll"},children:T.jsx(OP,{status:i,config:r,location:"sidebar",style:{display:"hidden"}},`${t}-sidebar-response-block`)})}function oFt(){const e=Wn(d=>d.showHelpText),t=Wn(d=>d.config),n=ys(),{toggleShowHelpText:r}=Gi(),[i,s]=D.useState(""),[o,a]=D.useState(!0),l=pd(),u=D.useMemo(()=>Iu(t.components[l]||{},t),[l,t]),c=D.useMemo(()=>u.helpTextPath??t.uiConfig.helpTextPath,[u.helpTextPath,t.uiConfig.helpTextPath]);return D.useEffect(()=>{async function d(){if(!c){a(!1);return}const f=await I$(`${Vi}${c}`);f!==void 0&&s(f),a(!1)}d()},[c]),T.jsx(ii,{size:"70%",opened:e,withCloseButton:!1,onClose:()=>n(r()),children:o||i?T.jsx(Ws,{text:i}):T.jsx(Cp,{path:t.uiConfig.helpTextPath})})}function aFt(){const e=Wn(o=>o.alertModal),{setAlertModal:t}=Gi(),n=ys(),[r,i]=D.useState(e.show),s=D.useCallback(()=>n(t({...e,show:!1})),[e,t,n]);return D.useEffect(()=>i(e.show),[e.show]),T.jsx(ii,{opened:r,centered:!0,size:"lg",withCloseButton:!1,onClose:s,children:T.jsxs(Zh,{color:"red",radius:"xs",title:"Alert",icon:T.jsx(n7e,{}),onClose:s,styles:{root:{backgroundColor:"unset"}},children:[T.jsx(Ve,{my:"md",children:e.message}),T.jsx(yi,{w:"100%",justify:"end",children:T.jsx(Gt,{onClick:s,color:"red",variant:"filled",m:"xs",children:"Continue Study"})})]})})}const TI=15,CI=3,vde=["#4269d0","#ff725c","#6cc5b0","#3ca951","#ff8ab7","#a463f2","#97bbf5","#9c6b4e"];function lFt({xScale:e,height:t,currentNode:n,provenance:r,answer:i}){const s=D.useMemo(()=>{var a;const o=new Map;if(o.set("Root","#efb118"),i.provenanceGraph){let l=0;Object.entries(((a=i.provenanceGraph.stimulus)==null?void 0:a.nodes)||{}).forEach(u=>{const[,c]=u;o.has(c.label)||(o.set(c.label,vde[l]),l=(l+1)%vde.length)})}return o},[i]);return T.jsxs("g",{style:{cursor:"pointer"},children:[r?Object.entries(r.nodes||{}).map(o=>{const[a,l]=o;return T.jsx("g",{children:T.jsx("rect",{fill:s.get(l.label)||"#9498a0",opacity:l.id===n?1:.7,x:e(l.createdOn)-CI/2,y:t/2-TI/2,width:CI,height:TI})},a)}):null,n&&r&&r.nodes[n]&&T.jsx("rect",{fill:s.get(r.nodes[n].label)||"#9498a0",x:e(r.nodes[n].createdOn)-CI/2,y:t/2-TI/2,width:CI,height:TI}),T.jsx(WU,{position:{bottom:10,left:10},children:T.jsxs(xo,{width:200,position:"bottom",withArrow:!0,shadow:"md",children:[T.jsx(xo.Target,{children:T.jsx(Gt,{children:"Show Legend"})}),T.jsx(xo.Dropdown,{children:T.jsx(Ms,{children:Array.from(s.keys()).map(o=>T.jsxs(yi,{children:[T.jsx(vq,{color:s.get(o)}),T.jsx("span",{children:o})]},o))})})]})})]})}const bde={left:5};function uFt({xScale:e,answers:t,width:n,height:r,currentNode:i,trialName:s}){const o=D.useMemo(()=>Object.entries(t).filter(a=>s?s===a[0]:!0).map(a=>{const[l,u]=a;return Object.keys(u.provenanceGraph).map(d=>{const f=u.provenanceGraph[d];return f?T.jsx(lFt,{answer:t[s],height:r,currentNode:i,xScale:e,provenance:f},l+d):null})}),[i,r,t,s,e]);return T.jsxs("svg",{style:{width:n,height:r},children:[T.jsx("line",{stroke:"black",strokeWidth:1,x1:bde.left,x2:n+bde.left,y1:r/2,y2:r/2}),o]})}function U3e(e){const t=D.useRef(()=>{throw new Error("Cannot call an event handler while rendering.")});return D.useLayoutEffect(()=>{t.current=e}),D.useCallback((...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function cFt({width:e,height:t,updateTimer:n,duration:r,isPlaying:i,xScale:s,startTime:o}){const a=D.useRef(0),l=D.useRef(Date.now()),[u,c]=D.useState(0);D.useEffect(()=>{o&&(a.current=0,n(o,0))},[o,n]);const d=U3e(()=>{if(a.current>=r)return;const h=Date.now();a.current=h-l.current,n(o+a.current,void 0),c(u+1)});D.useEffect(()=>{i&&a.current>=r&&(n(o,0),l.current=Date.now()-a.current,a.current=0)},[o,i,r,n]),D.useEffect(()=>{let h=null;return i&&a.current<r&&(l.current=Date.now()-a.current,h=setInterval(()=>{i&&d()},30)),()=>{h&&clearInterval(h)}},[r,d,i]);const f=D.useCallback(h=>{a.current=s.invert(h.clientX-10)-s.domain()[0],l.current=Date.now()-a.current,c(u+1),n(o+a.current,a.current/r)},[r,u,o,n,s]);return T.jsx("svg",{onClick:f,style:{width:e,height:t,position:"absolute",zIndex:1e4},children:T.jsx("line",{stroke:"#e15759",strokeWidth:3,y1:0,y2:t,x1:s(o+a.current),x2:s(o+a.current)})})}function Oz(e){const t=Math.floor(e/1e3/60/60),n=Math.floor((e/1e3/60/60-t)*60),r=Math.floor(((e/1e3/60/60-t)*60-n)*60),i=r<10?`0${r}`:`${r}`,s=n<10?`0${n}`:`${n}`,o=t<10?`0${t}`:`${t}`;return`${t>0?`${o}h`:""} ${n>0?`${s}m`:""} ${i}s`}function jF(e,t,n,r,i){const{saveAnalysisState:s}=Gi(),o=ys(),a=D.useMemo(()=>{const l=Lv.create(),u=nS({registry:l,initialState:{}});return n&&u.importObject(structuredClone(n)),u},[n]);D.useEffect(()=>{if(!n){r&&(i(null,e),o(s({prov:null,location:e})));return}if(!r||!n.nodes[r]){i(n.root,e),o(s({prov:a.getState(n.nodes[n.root]),location:e}));return}let l=n.nodes[r];for(;;)if(t<l.createdOn){if(w1e(l))break;{const u=l.parent;l=n.nodes[u]}}else if(l.children.length>0){const u=l.children[0];if(t>n.nodes[u].createdOn)l=n.nodes[u];else break}else break;l.id!==r&&(i(l.id,e),o(s({prov:a.getState(l),location:e})))},[r,t,n,o,s,e,i,a])}const BF={left:0,right:0};function dFt({setTimeString:e}){var G,Q,ie,me;const[t]=Bf(),n=D.useMemo(()=>t.get("participantId")||void 0,[t]),{storageEngine:r}=Ai(),i=Wn(ae=>ae.analysisIsPlaying),s=Wn(ae=>ae.analysisHasAudio),{saveAnalysisState:o,setAnalysisHasAudio:a,setAnalysisIsPlaying:l}=Gi(),u=ys(),c=pd(),d=Pa();D.useEffect(()=>{u(o({prov:void 0,location:"stimulus"}))},[d,o,u]);const[f,{width:h}]=gx(),[p,m]=D.useState(0),[g,b]=D.useState(null),[v,x]=D.useState({aboveStimulus:void 0,belowStimulus:void 0,sidebar:void 0,stimulus:void 0}),[E,_]=D.useState(null),[C,S]=D.useState(0),k=Wn(ae=>ae.answers),[R,O]=D.useState(0),N=D.useRef(null),[L,$]=D.useState(!0),B=D.useRef(null),H=Hv(),Y=U3e((ae,fe)=>{var te;const be=(te=k[H])==null?void 0:te.provenanceGraph[fe];be&&ae&&(!E||be.nodes[ae].createdOn>E.time||R<E.time)&&_({name:ae||"",time:be.nodes[ae].createdOn}),x({...v,[fe]:ae})});jF("aboveStimulus",R,(G=k[H])==null?void 0:G.provenanceGraph.aboveStimulus,v.aboveStimulus,Y),jF("belowStimulus",R,(Q=k[H])==null?void 0:Q.provenanceGraph.belowStimulus,v.belowStimulus,Y),jF("sidebar",R,(ie=k[H])==null?void 0:ie.provenanceGraph.sidebar,v.sidebar,Y),D.useEffect(()=>{u(l(!1))},[n,c,d,u,l]),D.useEffect(()=>{var ae,fe,be;if(H&&((ae=k[H])!=null&&ae.provenanceGraph)){const te=Lv.create(),re=nS({registry:te,initialState:{}});(fe=k[H])!=null&&fe.provenanceGraph.stimulus&&(re.importObject(structuredClone((be=k[H])==null?void 0:be.provenanceGraph.stimulus)),B.current=re)}},[k,H,u]);const J=D.useCallback(ae=>{var fe,be;ae&&(H&&B.current&&(u(o({prov:B.current.getState((be=(fe=k[H])==null?void 0:fe.provenanceGraph.stimulus)==null?void 0:be.nodes[ae]),location:"stimulus"})),B.current.to(ae)),Y(ae,"stimulus"),b(ae))},[H,Y,u,o,k]);D.useEffect(()=>{var be,te;if(!H||!B.current||!((be=k[H])!=null&&be.provenanceGraph))return;const ae=(te=k[H])==null?void 0:te.provenanceGraph;if(!ae.stimulus)return;if(!g||!ae.stimulus.nodes[g]){J(ae.stimulus.root);return}let fe=ae.stimulus.nodes[g];for(;;)if(R<fe.createdOn){if(w1e(fe))break;{const re=fe.parent;fe=ae.stimulus.nodes[re]}}else if(fe.children.length>0){const re=fe.children[0];if(R>ae.stimulus.nodes[re].createdOn)fe=ae.stimulus.nodes[re];else break}else break;fe.id!==g&&J(fe.id)},[J,g,n,R,H,k]);const K=D.useMemo(()=>{var ae;return((ae=k[H])==null?void 0:ae.startTime)||0},[k,H]);D.useEffect(()=>{C===0?e(""):R!==0&&e(`${Oz(R-K)} / ${Oz(C*1e3)}`)},[H,R,e,K,C]),D.useEffect(()=>{var ae,fe;if(!s){const be=((ae=k[H])==null?void 0:ae.endTime)-((fe=k[H])==null?void 0:fe.startTime);S(be>-1?be/1e3:0)}},[s,k,H]);const Z=K0(),U=D.useRef(null),j=D.useCallback(async ae=>{if(U.current=ae,ae&&Z&&H&&r)try{if(!n)throw new Error("Participant ID is required to load audio");const fe=await r.getAudio(H,n);await ae.load(fe),$(!1),u(a(!0)),S(ae.getDuration()),m(ae.getWidth()),ae.seekTo(0),ae.on("redrawcomplete",()=>m(ae.getWidth()))}catch(fe){throw u(a(!1)),new Error(fe)}else u(a(!1)),S(0)},[Z,H,r,n,u,a]),V=XOe((ae,fe)=>{const be=C*1e3+K;if(ae>be){u(l(!1)),O(ae);return}O(ae),U.current&&fe!==void 0&&setTimeout(()=>{var te;(te=U.current)==null||te.seekTo(fe)})},100);D.useEffect(()=>{U.current&&(i?U.current.play():U.current.pause())},[U,i,C,K,O]);const z=D.useMemo(()=>{var be,te,re,we,Ee;if(!((be=k[H])!=null&&be.startTime)||!((te=k[H])!=null&&te.endTime))return null;const ae=C>0?((re=k[H])==null?void 0:re.startTime)+C*1e3:(we=k[H])==null?void 0:we.endTime;return u$([BF.left,h+BF.left+BF.right]).domain([(Ee=k[H])==null?void 0:Ee.startTime,ae]).clamp(!0)},[k,H,C,h]);return D.useEffect(()=>{j(U.current)},[V,j,n,U]),T.jsx(yi,{wrap:"nowrap",gap:10,mx:10,children:T.jsxs(Ms,{ref:f,style:{width:"100%"},gap:0,children:[T.jsx(Jc,{}),n!==void 0&&H?T.jsxs(Se,{ref:N,style:{overflow:"hidden",width:"100%",pointerEvents:"none"},display:s?"block":"none",id:"waveformDiv",children:[T.jsx(Yve,{onMount:j,plugins:[],container:"#waveformDiv",height:50,waveColor:"#484848",progressColor:"#e15759",barHeight:0,cursorColor:"rgba(0, 0, 0, 0)",children:T.jsx(Kve,{id:"waveform",height:50})}),L?T.jsx(ld,{}):null]}):null,z&&H&&((me=k[H])!=null&&me.provenanceGraph)?T.jsx(uFt,{xScale:z,trialName:H,currentNode:(E==null?void 0:E.name)||"",answers:k,width:p||h,height:25}):null,z?T.jsx(cFt,{duration:C*1e3,height:(s?50:0)+25,isPlaying:i,startTime:K,width:h,xScale:z,updateTimer:V}):null]})})}function fFt(e){return e?e.getAllParticipantIds():null}function hFt(){const[e]=Bf(),t=D.useMemo(()=>e.get("participantId")||void 0,[e]),n=pd(),r=Pa(),{funcIndex:i}=To(),s=Ra(),{setAnalysisIsPlaying:o}=Gi(),a=ys(),l=Wn(m=>m.analysisIsPlaying),{storageEngine:u}=Ai(),{value:c}=QEe(fFt,[u]),[d,f]=D.useMemo(()=>{if(c&&t&&n){const m=c.findIndex(v=>v===t),g=m<c.length-1?c[m+1]:c[0],b=m>0?c[m-1]:c[c.length-1];return[[g,r],[b,r]]}return[["",0],["",0]]},[c,n,r,t]),[h,p]=D.useState("");return T.jsx(Ar.Footer,{zIndex:101,withBorder:!1,children:T.jsxs(Se,{style:{backgroundColor:"var(--mantine-color-blue-1)",height:"150px"},children:[T.jsx(dFt,{setTimeString:p}),T.jsx(Jc,{children:T.jsxs(yi,{gap:"xs",style:{height:"50px"},children:[T.jsx(Ve,{size:"sm",ff:"monospace",children:h}),T.jsx(L0,{variant:"filled",size:30,onClick:()=>a(o(!l)),children:l?T.jsx(D7e,{}):T.jsx(P7e,{})}),T.jsx(Ve,{mx:"0",children:"Participant:"}),T.jsx(Rx,{style:{width:"300px"},value:t||"",onChange:m=>{s(`./../${ri(0)}?participantId=${m}`)},data:c||[]}),T.jsx(Gt,{onClick:()=>s(`../${i?"..":""}${ri(+r-1)}?participantId=${t}`,{relative:"path"}),children:T.jsx(V9,{})}),T.jsx(Gt,{onClick:()=>s(`../${i?"..":""}${ri(+r+1)}?participantId=${t}`,{relative:"path"}),children:T.jsx(Ote,{})}),T.jsxs(Gt,{px:"xs",disabled:f[0]===t,onClick:()=>s(`./../${i?"..":""}${ri(f[1])}?participantId=${f[0]}`),children:[T.jsx(V9,{}),T.jsx($te,{})]}),T.jsxs(Gt,{px:"xs",disabled:d[0]===t,onClick:()=>s(`./../${i?"..":""}${ri(d[1])}?participantId=${d[0]}`),children:[T.jsx($te,{}),T.jsx(Ote,{})]})]})})]})})}function pFt(){const e=Ku(),t=e.uiConfig.minWidthSize,n=e.uiConfig.minHeightSize,[r,i]=D.useState(!1),[s,o]=D.useState(!1),[a,l]=D.useState(60),[u,c]=D.useState(!1),d=D.useRef(null),{storageEngine:f}=Ai(),h=Wf(),p=Ra();return D.useEffect(()=>{const m=()=>{if(t===void 0||n===void 0)return;const g=window.innerWidth<t,b=window.innerHeight<n,v=g||b,x=()=>{l(60),d.current&&(clearInterval(d.current),d.current=null),d.current=setInterval(()=>{l(E=>E<=1?(d.current&&(clearInterval(d.current),d.current=null),f&&!s&&(o(!0),c(!0),f.rejectCurrentParticipant("Screen resolution too small").catch(()=>{console.error("Failed to reject participant who failed training")})),0):E-1)},1e3)};s||(v?(i(!0),d.current===null&&x()):(i(!1),x()))};return m(),window.addEventListener("resize",m),()=>{window.removeEventListener("resize",m),d.current&&clearInterval(d.current)}},[t,n,f,h,p,s]),r?T.jsx(ii,{opened:r,onClose:()=>{},fullScreen:!0,withCloseButton:!1,children:T.jsxs(Ms,{align:"center",justify:"center",children:[T.jsx(Vb,{size:64,color:"orange"}),T.jsx(mi,{order:3,children:" Screen Resolution Warning "}),T.jsx(Ve,{size:"md",ta:"center",children:u?T.jsxs(T.Fragment,{children:["Thank you for participating in this study. You have been timed out and will not be able to continue.",T.jsx("br",{}),"You may now close this page."]}):T.jsxs(T.Fragment,{children:["Your screen resolution is below the minimum requirement:",T.jsx("br",{}),t!==void 0&&` Width: ${t}px`,n!==void 0&&` Height: ${n}px`,T.jsx("br",{}),"Please resize your browser window to the minimum required size within"," ",a," ","seconds."]})})]})}):null}function mFt(){const e=D.useRef([]),t=ys(),{toggleStudyBrowser:n}=Gi(),r=Ku(),i=pd(),s=D.useMemo(()=>Iu(r.components[i]||{},r),[i,r]),o=D.useMemo(()=>s.windowEventDebounceTime??r.uiConfig.windowEventDebounceTime??100,[s,r]),a=Wn(b=>b.showStudyBrowser),l=Wn(b=>b.analysisHasAudio),u=Wn(b=>b.modes);D.useEffect(()=>{const b=jd(N=>{e.current.push([Date.now(),"focus",N.target instanceof HTMLElement?N.target.tagName:""])},o,{maxWait:o}),v=jd(N=>{e.current.push([Date.now(),"input",N.data??""])},o,{maxWait:o}),x=jd(N=>{e.current.push([Date.now(),"keydown",N.key])},o,{maxWait:o}),E=jd(N=>{e.current.push([Date.now(),"keyup",N.key])},o,{maxWait:o}),_=jd(N=>{e.current.push([Date.now(),"mousedown",[N.clientX,N.clientY]])},o,{maxWait:o}),C=jd(N=>{e.current.push([Date.now(),"mouseup",[N.clientX,N.clientY]])},o,{maxWait:o}),S=jd(()=>{e.current.push([Date.now(),"resize",[window.innerWidth,window.innerHeight]])},o,{maxWait:o}),k=jd(N=>{e.current.push([Date.now(),"mousemove",[N.clientX,N.clientY]])},o,{maxWait:o}),R=jd(()=>{e.current.push([Date.now(),"scroll",[window.scrollX,window.scrollY]])},o,{maxWait:o}),O=jd(()=>{e.current.push([Date.now(),"visibility",document.visibilityState])},o,{maxWait:o});return window.addEventListener("focus",b,!0),window.addEventListener("input",v),window.addEventListener("keydown",x),window.addEventListener("keyup",E),window.addEventListener("mousedown",_),window.addEventListener("mouseup",C),window.addEventListener("resize",S),window.addEventListener("mousemove",k),window.addEventListener("scroll",R),document.addEventListener("visibilitychange",O),()=>{window.removeEventListener("focus",b,!0),window.removeEventListener("input",v),window.removeEventListener("keydown",x),window.removeEventListener("keyup",E),window.removeEventListener("mousedown",_),window.removeEventListener("mouseup",C),window.removeEventListener("resize",S),window.removeEventListener("mousemove",k),window.removeEventListener("scroll",R),document.removeEventListener("visibilitychange",O)}},[]);const{studyNavigatorEnabled:c,dataCollectionEnabled:d}=D.useMemo(()=>u,[u]),f=D.useMemo(()=>s.withSidebar??r.uiConfig.withSidebar,[s,r]),h=D.useMemo(()=>(s==null?void 0:s.sidebarWidth)??r.uiConfig.sidebarWidth??300,[s,r]),p=D.useMemo(()=>s.showTitleBar??r.uiConfig.showTitleBar??!0,[s,r]),m=K0(),g=D.useMemo(()=>m?!0:c&&a,[c,a,m]);return T.jsx(HEe.Provider,{value:e,children:T.jsxs(Ar,{padding:"md",header:{height:p?70:0},navbar:{width:h,breakpoint:"xs",collapsed:{desktop:!f,mobile:!f}},aside:{width:360,breakpoint:"xs",collapsed:{desktop:!g,mobile:!g}},footer:{height:(m?75:0)+(l?50:0)},children:[T.jsx(sFt,{}),T.jsx(rFt,{}),p&&T.jsx(iFt,{studyNavigatorEnabled:c,dataCollectionEnabled:d}),T.jsx(pFt,{}),T.jsx(oFt,{}),T.jsx(aFt,{}),T.jsxs(Ar.Main,{children:[!p&&!a&&c&&T.jsx(Gt,{variant:"transparent",leftSection:T.jsx(V9,{size:14}),onClick:()=>t(n()),size:"xs",style:{position:"fixed",top:"10px",right:"10px"},children:"Study Browser"}),T.jsx(dBe,{})]}),m&&T.jsx(hFt,{})]})})}function gFt(e,t=!1){return typeof e=="number"?wde(e,t):wde(e.length,t).map(r=>r.map(i=>e[i]))}function wde(e,t){if(e<0)throw new Error("Latin square size must be > 0");if(e==0)return[];if(e==1)return[[0]];let n=new Array(e);for(let s=0;s<e;s++)s<2?n[s]=s:s%2==0?n[s]=e-s/2:n[s]=Math.floor(s/2)+1;let r=[n],i=n;for(let s=1;s<e;s+=1){let o=i.map(a=>(a+1)%e);r.push(o),i=o}if(t&&e%2>0)for(let s=0;s<e;s+=1)r.push(r[s].slice().reverse());return r}function q3e(e,t,n){if(Jl(e))return{id:e.id,orderPath:n,order:e.order,components:[],skip:[]};let r=e.components;e.order==="random"?r=e.components.sort(()=>.5-Math.random()):e.order==="latinSquare"&&t&&(r=t[n].pop().map(i=>i.startsWith("_componentBlock")?e.components[+i.slice(15)]:i)),r=r.slice(0,e.numSamples);for(let i=0;i<r.length;i+=1){const s=r[i];if(typeof s!="string"&&!Array.isArray(s)){const o=e.components.indexOf(s);r[i]=q3e(s,t,`${n}-${o}`)}}return e.interruptions&&e.interruptions.forEach(i=>{const s=[];if(i.spacing!=="random")for(let o=0;o<r.length;o+=1)(o===i.firstLocation||o>i.firstLocation&&o%i.spacing===0)&&s.push(...i.components),s.push(r[o]);if(i.spacing==="random"){const o=new Set;if(i.numInterruptions>r.length-1)throw new Error("Number of interruptions cannot be greater than the number of components");for(;o.size<i.numInterruptions;){const u=Math.floor(Math.random()*r.length-1)+1;o.add(u)}const a=Array.from(o).sort((u,c)=>u-c);let l=0;for(let u=0;u<r.length;u+=1)u===a[l]&&(s.push(...i.components),l+=1),s.push(r[u])}r=s}),{id:e.id,orderPath:n,order:e.order,components:r.flat(),skip:e.skip}}function yFt(e,t){const n=structuredClone(e);return q3e(n,t,"root")}function H3e(e,t,n,r=0){const i=n.length>0?`${n}-${r}`:"root";e.order==="latinSquare"&&t.push(i),!Jl(e)&&e.components.forEach((s,o)=>{typeof s!="string"&&!Jl(s)&&H3e(s,t,i,o)})}function vFt(e){const t=[];return H3e(e,t,"",0),t}function xde(e,t){const n=t.split("-");let r={};n.forEach(o=>{if(o==="root")r=e.sequence;else{if(Jl(r))return;r=r.components[+o]}});const i=r.components.map((o,a)=>typeof o=="string"?o:`_componentBlock${a}`);return gFt(i.sort(()=>.5-Math.random()),!0)}function Ede(e){const n=vFt(e.sequence).map(s=>({[s]:xde(e,s)})).reduce((s,o)=>({...s,...o}),{}),r=e.uiConfig.numSequences||1e3,i=[];return Array.from({length:r}).forEach(()=>{const s=yFt(e.sequence,n);s.components.push("end"),i.push(s),Object.entries(n).forEach(([o,a])=>{a.length===0&&(n[o]=xde(e,o))})}),i}var SI={exports:{}},zF={},_h={},Fg={},UF={},qF={},HF={},_de;function PN(){return _de||(_de=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class n extends t{constructor(v){if(super(),!e.IDENTIFIER.test(v))throw new Error("CodeGen: name must be a valid identifier");this.str=v}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=n;class r extends t{constructor(v){super(),this._items=typeof v=="string"?[v]:v}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const v=this._items[0];return v===""||v==='""'}get str(){var v;return(v=this._str)!==null&&v!==void 0?v:this._str=this._items.reduce((x,E)=>`${x}${E}`,"")}get names(){var v;return(v=this._names)!==null&&v!==void 0?v:this._names=this._items.reduce((x,E)=>(E instanceof n&&(x[E.str]=(x[E.str]||0)+1),x),{})}}e._Code=r,e.nil=new r("");function i(b,...v){const x=[b[0]];let E=0;for(;E<v.length;)a(x,v[E]),x.push(b[++E]);return new r(x)}e._=i;const s=new r("+");function o(b,...v){const x=[h(b[0])];let E=0;for(;E<v.length;)x.push(s),a(x,v[E]),x.push(s,h(b[++E]));return l(x),new r(x)}e.str=o;function a(b,v){v instanceof r?b.push(...v._items):v instanceof n?b.push(v):b.push(d(v))}e.addCodeArg=a;function l(b){let v=1;for(;v<b.length-1;){if(b[v]===s){const x=u(b[v-1],b[v+1]);if(x!==void 0){b.splice(v-1,3,x);continue}b[v++]="+"}v++}}function u(b,v){if(v==='""')return b;if(b==='""')return v;if(typeof b=="string")return v instanceof n||b[b.length-1]!=='"'?void 0:typeof v!="string"?`${b.slice(0,-1)}${v}"`:v[0]==='"'?b.slice(0,-1)+v.slice(1):void 0;if(typeof v=="string"&&v[0]==='"'&&!(b instanceof n))return`"${b}${v.slice(1)}`}function c(b,v){return v.emptyStr()?b:b.emptyStr()?v:o`${b}${v}`}e.strConcat=c;function d(b){return typeof b=="number"||typeof b=="boolean"||b===null?b:h(Array.isArray(b)?b.join(","):b)}function f(b){return new r(h(b))}e.stringify=f;function h(b){return JSON.stringify(b).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=h;function p(b){return typeof b=="string"&&e.IDENTIFIER.test(b)?new r(`.${b}`):i`[${b}]`}e.getProperty=p;function m(b){if(typeof b=="string"&&e.IDENTIFIER.test(b))return new r(`${b}`);throw new Error(`CodeGen: invalid export name: ${b}, use explicit $id name mapping`)}e.getEsmExportName=m;function g(b){return new r(b.toString())}e.regexpCode=g}(HF)),HF}var WF={},Tde;function Cde(){return Tde||(Tde=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=PN();class n extends Error{constructor(u){super(`CodeGen: "code" for ${u} not defined`),this.value=u.value}}var r;(function(l){l[l.Started=0]="Started",l[l.Completed=1]="Completed"})(r||(e.UsedValueState=r={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class i{constructor({prefixes:u,parent:c}={}){this._names={},this._prefixes=u,this._parent=c}toName(u){return u instanceof t.Name?u:this.name(u)}name(u){return new t.Name(this._newName(u))}_newName(u){const c=this._names[u]||this._nameGroup(u);return`${u}${c.index++}`}_nameGroup(u){var c,d;if(!((d=(c=this._parent)===null||c===void 0?void 0:c._prefixes)===null||d===void 0)&&d.has(u)||this._prefixes&&!this._prefixes.has(u))throw new Error(`CodeGen: prefix "${u}" is not allowed in this scope`);return this._names[u]={prefix:u,index:0}}}e.Scope=i;class s extends t.Name{constructor(u,c){super(c),this.prefix=u}setValue(u,{property:c,itemIndex:d}){this.value=u,this.scopePath=(0,t._)`.${new t.Name(c)}[${d}]`}}e.ValueScopeName=s;const o=(0,t._)`\n`;class a extends i{constructor(u){super(u),this._values={},this._scope=u.scope,this.opts={...u,_n:u.lines?o:t.nil}}get(){return this._scope}name(u){return new s(u,this._newName(u))}value(u,c){var d;if(c.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const f=this.toName(u),{prefix:h}=f,p=(d=c.key)!==null&&d!==void 0?d:c.ref;let m=this._values[h];if(m){const v=m.get(p);if(v)return v}else m=this._values[h]=new Map;m.set(p,f);const g=this._scope[h]||(this._scope[h]=[]),b=g.length;return g[b]=c.ref,f.setValue(c,{property:h,itemIndex:b}),f}getValue(u,c){const d=this._values[u];if(d)return d.get(c)}scopeRefs(u,c=this._values){return this._reduceValues(c,d=>{if(d.scopePath===void 0)throw new Error(`CodeGen: name "${d}" has no value`);return(0,t._)`${u}${d.scopePath}`})}scopeCode(u=this._values,c,d){return this._reduceValues(u,f=>{if(f.value===void 0)throw new Error(`CodeGen: name "${f}" has no value`);return f.value.code},c,d)}_reduceValues(u,c,d={},f){let h=t.nil;for(const p in u){const m=u[p];if(!m)continue;const g=d[p]=d[p]||new Map;m.forEach(b=>{if(g.has(b))return;g.set(b,r.Started);let v=c(b);if(v){const x=this.opts.es5?e.varKinds.var:e.varKinds.const;h=(0,t._)`${h}${x} ${b} = ${v};${this.opts._n}`}else if(v=f==null?void 0:f(b))h=(0,t._)`${h}${v}${this.opts._n}`;else throw new n(b);g.set(b,r.Completed)})}return h}}e.ValueScope=a}(WF)),WF}var Sde;function Nn(){return Sde||(Sde=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=PN(),n=Cde();var r=PN();Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return r.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return r.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return r.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}});var i=Cde();Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return i.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return i.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return i.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return i.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class s{optimizeNodes(){return this}optimizeNames(G,Q){return this}}class o extends s{constructor(G,Q,ie){super(),this.varKind=G,this.name=Q,this.rhs=ie}render({es5:G,_n:Q}){const ie=G?n.varKinds.var:this.varKind,me=this.rhs===void 0?"":` = ${this.rhs}`;return`${ie} ${this.name}${me};`+Q}optimizeNames(G,Q){if(G[this.name.str])return this.rhs&&(this.rhs=B(this.rhs,G,Q)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class a extends s{constructor(G,Q,ie){super(),this.lhs=G,this.rhs=Q,this.sideEffects=ie}render({_n:G}){return`${this.lhs} = ${this.rhs};`+G}optimizeNames(G,Q){if(!(this.lhs instanceof t.Name&&!G[this.lhs.str]&&!this.sideEffects))return this.rhs=B(this.rhs,G,Q),this}get names(){const G=this.lhs instanceof t.Name?{}:{...this.lhs.names};return $(G,this.rhs)}}class l extends a{constructor(G,Q,ie,me){super(G,ie,me),this.op=Q}render({_n:G}){return`${this.lhs} ${this.op}= ${this.rhs};`+G}}class u extends s{constructor(G){super(),this.label=G,this.names={}}render({_n:G}){return`${this.label}:`+G}}class c extends s{constructor(G){super(),this.label=G,this.names={}}render({_n:G}){return`break${this.label?` ${this.label}`:""};`+G}}class d extends s{constructor(G){super(),this.error=G}render({_n:G}){return`throw ${this.error};`+G}get names(){return this.error.names}}class f extends s{constructor(G){super(),this.code=G}render({_n:G}){return`${this.code};`+G}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(G,Q){return this.code=B(this.code,G,Q),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class h extends s{constructor(G=[]){super(),this.nodes=G}render(G){return this.nodes.reduce((Q,ie)=>Q+ie.render(G),"")}optimizeNodes(){const{nodes:G}=this;let Q=G.length;for(;Q--;){const ie=G[Q].optimizeNodes();Array.isArray(ie)?G.splice(Q,1,...ie):ie?G[Q]=ie:G.splice(Q,1)}return G.length>0?this:void 0}optimizeNames(G,Q){const{nodes:ie}=this;let me=ie.length;for(;me--;){const ae=ie[me];ae.optimizeNames(G,Q)||(H(G,ae.names),ie.splice(me,1))}return ie.length>0?this:void 0}get names(){return this.nodes.reduce((G,Q)=>L(G,Q.names),{})}}class p extends h{render(G){return"{"+G._n+super.render(G)+"}"+G._n}}class m extends h{}class g extends p{}g.kind="else";class b extends p{constructor(G,Q){super(Q),this.condition=G}render(G){let Q=`if(${this.condition})`+super.render(G);return this.else&&(Q+="else "+this.else.render(G)),Q}optimizeNodes(){super.optimizeNodes();const G=this.condition;if(G===!0)return this.nodes;let Q=this.else;if(Q){const ie=Q.optimizeNodes();Q=this.else=Array.isArray(ie)?new g(ie):ie}if(Q)return G===!1?Q instanceof b?Q:Q.nodes:this.nodes.length?this:new b(Y(G),Q instanceof b?[Q]:Q.nodes);if(!(G===!1||!this.nodes.length))return this}optimizeNames(G,Q){var ie;if(this.else=(ie=this.else)===null||ie===void 0?void 0:ie.optimizeNames(G,Q),!!(super.optimizeNames(G,Q)||this.else))return this.condition=B(this.condition,G,Q),this}get names(){const G=super.names;return $(G,this.condition),this.else&&L(G,this.else.names),G}}b.kind="if";class v extends p{}v.kind="for";class x extends v{constructor(G){super(),this.iteration=G}render(G){return`for(${this.iteration})`+super.render(G)}optimizeNames(G,Q){if(super.optimizeNames(G,Q))return this.iteration=B(this.iteration,G,Q),this}get names(){return L(super.names,this.iteration.names)}}class E extends v{constructor(G,Q,ie,me){super(),this.varKind=G,this.name=Q,this.from=ie,this.to=me}render(G){const Q=G.es5?n.varKinds.var:this.varKind,{name:ie,from:me,to:ae}=this;return`for(${Q} ${ie}=${me}; ${ie}<${ae}; ${ie}++)`+super.render(G)}get names(){const G=$(super.names,this.from);return $(G,this.to)}}class _ extends v{constructor(G,Q,ie,me){super(),this.loop=G,this.varKind=Q,this.name=ie,this.iterable=me}render(G){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(G)}optimizeNames(G,Q){if(super.optimizeNames(G,Q))return this.iterable=B(this.iterable,G,Q),this}get names(){return L(super.names,this.iterable.names)}}class C extends p{constructor(G,Q,ie){super(),this.name=G,this.args=Q,this.async=ie}render(G){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(G)}}C.kind="func";class S extends h{render(G){return"return "+super.render(G)}}S.kind="return";class k extends p{render(G){let Q="try"+super.render(G);return this.catch&&(Q+=this.catch.render(G)),this.finally&&(Q+=this.finally.render(G)),Q}optimizeNodes(){var G,Q;return super.optimizeNodes(),(G=this.catch)===null||G===void 0||G.optimizeNodes(),(Q=this.finally)===null||Q===void 0||Q.optimizeNodes(),this}optimizeNames(G,Q){var ie,me;return super.optimizeNames(G,Q),(ie=this.catch)===null||ie===void 0||ie.optimizeNames(G,Q),(me=this.finally)===null||me===void 0||me.optimizeNames(G,Q),this}get names(){const G=super.names;return this.catch&&L(G,this.catch.names),this.finally&&L(G,this.finally.names),G}}class R extends p{constructor(G){super(),this.error=G}render(G){return`catch(${this.error})`+super.render(G)}}R.kind="catch";class O extends p{render(G){return"finally"+super.render(G)}}O.kind="finally";class N{constructor(G,Q={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...Q,_n:Q.lines?`
`:""},this._extScope=G,this._scope=new n.Scope({parent:G}),this._nodes=[new m]}toString(){return this._root.render(this.opts)}name(G){return this._scope.name(G)}scopeName(G){return this._extScope.name(G)}scopeValue(G,Q){const ie=this._extScope.value(G,Q);return(this._values[ie.prefix]||(this._values[ie.prefix]=new Set)).add(ie),ie}getScopeValue(G,Q){return this._extScope.getValue(G,Q)}scopeRefs(G){return this._extScope.scopeRefs(G,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(G,Q,ie,me){const ae=this._scope.toName(Q);return ie!==void 0&&me&&(this._constants[ae.str]=ie),this._leafNode(new o(G,ae,ie)),ae}const(G,Q,ie){return this._def(n.varKinds.const,G,Q,ie)}let(G,Q,ie){return this._def(n.varKinds.let,G,Q,ie)}var(G,Q,ie){return this._def(n.varKinds.var,G,Q,ie)}assign(G,Q,ie){return this._leafNode(new a(G,Q,ie))}add(G,Q){return this._leafNode(new l(G,e.operators.ADD,Q))}code(G){return typeof G=="function"?G():G!==t.nil&&this._leafNode(new f(G)),this}object(...G){const Q=["{"];for(const[ie,me]of G)Q.length>1&&Q.push(","),Q.push(ie),(ie!==me||this.opts.es5)&&(Q.push(":"),(0,t.addCodeArg)(Q,me));return Q.push("}"),new t._Code(Q)}if(G,Q,ie){if(this._blockNode(new b(G)),Q&&ie)this.code(Q).else().code(ie).endIf();else if(Q)this.code(Q).endIf();else if(ie)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(G){return this._elseNode(new b(G))}else(){return this._elseNode(new g)}endIf(){return this._endBlockNode(b,g)}_for(G,Q){return this._blockNode(G),Q&&this.code(Q).endFor(),this}for(G,Q){return this._for(new x(G),Q)}forRange(G,Q,ie,me,ae=this.opts.es5?n.varKinds.var:n.varKinds.let){const fe=this._scope.toName(G);return this._for(new E(ae,fe,Q,ie),()=>me(fe))}forOf(G,Q,ie,me=n.varKinds.const){const ae=this._scope.toName(G);if(this.opts.es5){const fe=Q instanceof t.Name?Q:this.var("_arr",Q);return this.forRange("_i",0,(0,t._)`${fe}.length`,be=>{this.var(ae,(0,t._)`${fe}[${be}]`),ie(ae)})}return this._for(new _("of",me,ae,Q),()=>ie(ae))}forIn(G,Q,ie,me=this.opts.es5?n.varKinds.var:n.varKinds.const){if(this.opts.ownProperties)return this.forOf(G,(0,t._)`Object.keys(${Q})`,ie);const ae=this._scope.toName(G);return this._for(new _("in",me,ae,Q),()=>ie(ae))}endFor(){return this._endBlockNode(v)}label(G){return this._leafNode(new u(G))}break(G){return this._leafNode(new c(G))}return(G){const Q=new S;if(this._blockNode(Q),this.code(G),Q.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(S)}try(G,Q,ie){if(!Q&&!ie)throw new Error('CodeGen: "try" without "catch" and "finally"');const me=new k;if(this._blockNode(me),this.code(G),Q){const ae=this.name("e");this._currNode=me.catch=new R(ae),Q(ae)}return ie&&(this._currNode=me.finally=new O,this.code(ie)),this._endBlockNode(R,O)}throw(G){return this._leafNode(new d(G))}block(G,Q){return this._blockStarts.push(this._nodes.length),G&&this.code(G).endBlock(Q),this}endBlock(G){const Q=this._blockStarts.pop();if(Q===void 0)throw new Error("CodeGen: not in self-balancing block");const ie=this._nodes.length-Q;if(ie<0||G!==void 0&&ie!==G)throw new Error(`CodeGen: wrong number of nodes: ${ie} vs ${G} expected`);return this._nodes.length=Q,this}func(G,Q=t.nil,ie,me){return this._blockNode(new C(G,Q,ie)),me&&this.code(me).endFunc(),this}endFunc(){return this._endBlockNode(C)}optimize(G=1){for(;G-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(G){return this._currNode.nodes.push(G),this}_blockNode(G){this._currNode.nodes.push(G),this._nodes.push(G)}_endBlockNode(G,Q){const ie=this._currNode;if(ie instanceof G||Q&&ie instanceof Q)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${Q?`${G.kind}/${Q.kind}`:G.kind}"`)}_elseNode(G){const Q=this._currNode;if(!(Q instanceof b))throw new Error('CodeGen: "else" without "if"');return this._currNode=Q.else=G,this}get _root(){return this._nodes[0]}get _currNode(){const G=this._nodes;return G[G.length-1]}set _currNode(G){const Q=this._nodes;Q[Q.length-1]=G}}e.CodeGen=N;function L(z,G){for(const Q in G)z[Q]=(z[Q]||0)+(G[Q]||0);return z}function $(z,G){return G instanceof t._CodeOrName?L(z,G.names):z}function B(z,G,Q){if(z instanceof t.Name)return ie(z);if(!me(z))return z;return new t._Code(z._items.reduce((ae,fe)=>(fe instanceof t.Name&&(fe=ie(fe)),fe instanceof t._Code?ae.push(...fe._items):ae.push(fe),ae),[]));function ie(ae){const fe=Q[ae.str];return fe===void 0||G[ae.str]!==1?ae:(delete G[ae.str],fe)}function me(ae){return ae instanceof t._Code&&ae._items.some(fe=>fe instanceof t.Name&&G[fe.str]===1&&Q[fe.str]!==void 0)}}function H(z,G){for(const Q in G)z[Q]=(z[Q]||0)-(G[Q]||0)}function Y(z){return typeof z=="boolean"||typeof z=="number"||z===null?!z:(0,t._)`!${V(z)}`}e.not=Y;const J=j(e.operators.AND);function K(...z){return z.reduce(J)}e.and=K;const Z=j(e.operators.OR);function U(...z){return z.reduce(Z)}e.or=U;function j(z){return(G,Q)=>G===t.nil?Q:Q===t.nil?G:(0,t._)`${V(G)} ${z} ${V(Q)}`}function V(z){return z instanceof t.Name?z:(0,t._)`(${z})`}}(qF)),qF}var Tn={},Ade;function cr(){if(Ade)return Tn;Ade=1,Object.defineProperty(Tn,"__esModule",{value:!0}),Tn.checkStrictMode=Tn.getErrorPath=Tn.Type=Tn.useFunc=Tn.setEvaluated=Tn.evaluatedPropsToName=Tn.mergeEvaluated=Tn.eachItem=Tn.unescapeJsonPointer=Tn.escapeJsonPointer=Tn.escapeFragment=Tn.unescapeFragment=Tn.schemaRefOrVal=Tn.schemaHasRulesButRef=Tn.schemaHasRules=Tn.checkUnknownRules=Tn.alwaysValidSchema=Tn.toHash=void 0;const e=Nn(),t=PN();function n(_){const C={};for(const S of _)C[S]=!0;return C}Tn.toHash=n;function r(_,C){return typeof C=="boolean"?C:Object.keys(C).length===0?!0:(i(_,C),!s(C,_.self.RULES.all))}Tn.alwaysValidSchema=r;function i(_,C=_.schema){const{opts:S,self:k}=_;if(!S.strictSchema||typeof C=="boolean")return;const R=k.RULES.keywords;for(const O in C)R[O]||E(_,`unknown keyword: "${O}"`)}Tn.checkUnknownRules=i;function s(_,C){if(typeof _=="boolean")return!_;for(const S in _)if(C[S])return!0;return!1}Tn.schemaHasRules=s;function o(_,C){if(typeof _=="boolean")return!_;for(const S in _)if(S!=="$ref"&&C.all[S])return!0;return!1}Tn.schemaHasRulesButRef=o;function a({topSchemaRef:_,schemaPath:C},S,k,R){if(!R){if(typeof S=="number"||typeof S=="boolean")return S;if(typeof S=="string")return(0,e._)`${S}`}return(0,e._)`${_}${C}${(0,e.getProperty)(k)}`}Tn.schemaRefOrVal=a;function l(_){return d(decodeURIComponent(_))}Tn.unescapeFragment=l;function u(_){return encodeURIComponent(c(_))}Tn.escapeFragment=u;function c(_){return typeof _=="number"?`${_}`:_.replace(/~/g,"~0").replace(/\//g,"~1")}Tn.escapeJsonPointer=c;function d(_){return _.replace(/~1/g,"/").replace(/~0/g,"~")}Tn.unescapeJsonPointer=d;function f(_,C){if(Array.isArray(_))for(const S of _)C(S);else C(_)}Tn.eachItem=f;function h({mergeNames:_,mergeToName:C,mergeValues:S,resultToName:k}){return(R,O,N,L)=>{const $=N===void 0?O:N instanceof e.Name?(O instanceof e.Name?_(R,O,N):C(R,O,N),N):O instanceof e.Name?(C(R,N,O),O):S(O,N);return L===e.Name&&!($ instanceof e.Name)?k(R,$):$}}Tn.mergeEvaluated={props:h({mergeNames:(_,C,S)=>_.if((0,e._)`${S} !== true && ${C} !== undefined`,()=>{_.if((0,e._)`${C} === true`,()=>_.assign(S,!0),()=>_.assign(S,(0,e._)`${S} || {}`).code((0,e._)`Object.assign(${S}, ${C})`))}),mergeToName:(_,C,S)=>_.if((0,e._)`${S} !== true`,()=>{C===!0?_.assign(S,!0):(_.assign(S,(0,e._)`${S} || {}`),m(_,S,C))}),mergeValues:(_,C)=>_===!0?!0:{..._,...C},resultToName:p}),items:h({mergeNames:(_,C,S)=>_.if((0,e._)`${S} !== true && ${C} !== undefined`,()=>_.assign(S,(0,e._)`${C} === true ? true : ${S} > ${C} ? ${S} : ${C}`)),mergeToName:(_,C,S)=>_.if((0,e._)`${S} !== true`,()=>_.assign(S,C===!0?!0:(0,e._)`${S} > ${C} ? ${S} : ${C}`)),mergeValues:(_,C)=>_===!0?!0:Math.max(_,C),resultToName:(_,C)=>_.var("items",C)})};function p(_,C){if(C===!0)return _.var("props",!0);const S=_.var("props",(0,e._)`{}`);return C!==void 0&&m(_,S,C),S}Tn.evaluatedPropsToName=p;function m(_,C,S){Object.keys(S).forEach(k=>_.assign((0,e._)`${C}${(0,e.getProperty)(k)}`,!0))}Tn.setEvaluated=m;const g={};function b(_,C){return _.scopeValue("func",{ref:C,code:g[C.code]||(g[C.code]=new t._Code(C.code))})}Tn.useFunc=b;var v;(function(_){_[_.Num=0]="Num",_[_.Str=1]="Str"})(v||(Tn.Type=v={}));function x(_,C,S){if(_ instanceof e.Name){const k=C===v.Num;return S?k?(0,e._)`"[" + ${_} + "]"`:(0,e._)`"['" + ${_} + "']"`:k?(0,e._)`"/" + ${_}`:(0,e._)`"/" + ${_}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return S?(0,e.getProperty)(_).toString():"/"+c(_)}Tn.getErrorPath=x;function E(_,C,S=_.opts.strictSchema){if(S){if(C=`strict mode: ${C}`,S===!0)throw new Error(C);_.self.logger.warn(C)}}return Tn.checkStrictMode=E,Tn}var AI={},kde;function lg(){if(kde)return AI;kde=1,Object.defineProperty(AI,"__esModule",{value:!0});const e=Nn(),t={data:new e.Name("data"),valCxt:new e.Name("valCxt"),instancePath:new e.Name("instancePath"),parentData:new e.Name("parentData"),parentDataProperty:new e.Name("parentDataProperty"),rootData:new e.Name("rootData"),dynamicAnchors:new e.Name("dynamicAnchors"),vErrors:new e.Name("vErrors"),errors:new e.Name("errors"),this:new e.Name("this"),self:new e.Name("self"),scope:new e.Name("scope"),json:new e.Name("json"),jsonPos:new e.Name("jsonPos"),jsonLen:new e.Name("jsonLen"),jsonPart:new e.Name("jsonPart")};return AI.default=t,AI}var Ide;function L6(){return Ide||(Ide=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=Nn(),n=cr(),r=lg();e.keywordError={message:({keyword:g})=>(0,t.str)`must pass "${g}" keyword validation`},e.keyword$DataError={message:({keyword:g,schemaType:b})=>b?(0,t.str)`"${g}" keyword must be ${b} ($data)`:(0,t.str)`"${g}" keyword is invalid ($data)`};function i(g,b=e.keywordError,v,x){const{it:E}=g,{gen:_,compositeRule:C,allErrors:S}=E,k=d(g,b,v);x??(C||S)?l(_,k):u(E,(0,t._)`[${k}]`)}e.reportError=i;function s(g,b=e.keywordError,v){const{it:x}=g,{gen:E,compositeRule:_,allErrors:C}=x,S=d(g,b,v);l(E,S),_||C||u(x,r.default.vErrors)}e.reportExtraError=s;function o(g,b){g.assign(r.default.errors,b),g.if((0,t._)`${r.default.vErrors} !== null`,()=>g.if(b,()=>g.assign((0,t._)`${r.default.vErrors}.length`,b),()=>g.assign(r.default.vErrors,null)))}e.resetErrorsCount=o;function a({gen:g,keyword:b,schemaValue:v,data:x,errsCount:E,it:_}){if(E===void 0)throw new Error("ajv implementation error");const C=g.name("err");g.forRange("i",E,r.default.errors,S=>{g.const(C,(0,t._)`${r.default.vErrors}[${S}]`),g.if((0,t._)`${C}.instancePath === undefined`,()=>g.assign((0,t._)`${C}.instancePath`,(0,t.strConcat)(r.default.instancePath,_.errorPath))),g.assign((0,t._)`${C}.schemaPath`,(0,t.str)`${_.errSchemaPath}/${b}`),_.opts.verbose&&(g.assign((0,t._)`${C}.schema`,v),g.assign((0,t._)`${C}.data`,x))})}e.extendErrors=a;function l(g,b){const v=g.const("err",b);g.if((0,t._)`${r.default.vErrors} === null`,()=>g.assign(r.default.vErrors,(0,t._)`[${v}]`),(0,t._)`${r.default.vErrors}.push(${v})`),g.code((0,t._)`${r.default.errors}++`)}function u(g,b){const{gen:v,validateName:x,schemaEnv:E}=g;E.$async?v.throw((0,t._)`new ${g.ValidationError}(${b})`):(v.assign((0,t._)`${x}.errors`,b),v.return(!1))}const c={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function d(g,b,v){const{createErrors:x}=g.it;return x===!1?(0,t._)`{}`:f(g,b,v)}function f(g,b,v={}){const{gen:x,it:E}=g,_=[h(E,v),p(g,v)];return m(g,b,_),x.object(..._)}function h({errorPath:g},{instancePath:b}){const v=b?(0,t.str)`${g}${(0,n.getErrorPath)(b,n.Type.Str)}`:g;return[r.default.instancePath,(0,t.strConcat)(r.default.instancePath,v)]}function p({keyword:g,it:{errSchemaPath:b}},{schemaPath:v,parentSchema:x}){let E=x?b:(0,t.str)`${b}/${g}`;return v&&(E=(0,t.str)`${E}${(0,n.getErrorPath)(v,n.Type.Str)}`),[c.schemaPath,E]}function m(g,{params:b,message:v},x){const{keyword:E,data:_,schemaValue:C,it:S}=g,{opts:k,propertyName:R,topSchemaRef:O,schemaPath:N}=S;x.push([c.keyword,E],[c.params,typeof b=="function"?b(g):b||(0,t._)`{}`]),k.messages&&x.push([c.message,typeof v=="function"?v(g):v]),k.verbose&&x.push([c.schema,C],[c.parentSchema,(0,t._)`${O}${N}`],[r.default.data,_]),R&&x.push([c.propertyName,R])}}(UF)),UF}var Rde;function bFt(){if(Rde)return Fg;Rde=1,Object.defineProperty(Fg,"__esModule",{value:!0}),Fg.boolOrEmptySchema=Fg.topBoolOrEmptySchema=void 0;const e=L6(),t=Nn(),n=lg(),r={message:"boolean schema is false"};function i(a){const{gen:l,schema:u,validateName:c}=a;u===!1?o(a,!1):typeof u=="object"&&u.$async===!0?l.return(n.default.data):(l.assign((0,t._)`${c}.errors`,null),l.return(!0))}Fg.topBoolOrEmptySchema=i;function s(a,l){const{gen:u,schema:c}=a;c===!1?(u.var(l,!1),o(a)):u.var(l,!0)}Fg.boolOrEmptySchema=s;function o(a,l){const{gen:u,data:c}=a,d={gen:u,keyword:"false schema",data:c,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:a};(0,e.reportError)(d,r,void 0,l)}return Fg}var so={},jg={},Dde;function W3e(){if(Dde)return jg;Dde=1,Object.defineProperty(jg,"__esModule",{value:!0}),jg.getRules=jg.isJSONType=void 0;const e=["string","number","integer","boolean","null","object","array"],t=new Set(e);function n(i){return typeof i=="string"&&t.has(i)}jg.isJSONType=n;function r(){const i={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...i,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},i.number,i.string,i.array,i.object],post:{rules:[]},all:{},keywords:{}}}return jg.getRules=r,jg}var Th={},Pde;function V3e(){if(Pde)return Th;Pde=1,Object.defineProperty(Th,"__esModule",{value:!0}),Th.shouldUseRule=Th.shouldUseGroup=Th.schemaHasRulesForType=void 0;function e({schema:r,self:i},s){const o=i.RULES.types[s];return o&&o!==!0&&t(r,o)}Th.schemaHasRulesForType=e;function t(r,i){return i.rules.some(s=>n(r,s))}Th.shouldUseGroup=t;function n(r,i){var s;return r[i.keyword]!==void 0||((s=i.definition.implements)===null||s===void 0?void 0:s.some(o=>r[o]!==void 0))}return Th.shouldUseRule=n,Th}var Nde;function NN(){if(Nde)return so;Nde=1,Object.defineProperty(so,"__esModule",{value:!0}),so.reportTypeError=so.checkDataTypes=so.checkDataType=so.coerceAndCheckDataType=so.getJSONTypes=so.getSchemaTypes=so.DataType=void 0;const e=W3e(),t=V3e(),n=L6(),r=Nn(),i=cr();var s;(function(v){v[v.Correct=0]="Correct",v[v.Wrong=1]="Wrong"})(s||(so.DataType=s={}));function o(v){const x=a(v.type);if(x.includes("null")){if(v.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!x.length&&v.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');v.nullable===!0&&x.push("null")}return x}so.getSchemaTypes=o;function a(v){const x=Array.isArray(v)?v:v?[v]:[];if(x.every(e.isJSONType))return x;throw new Error("type must be JSONType or JSONType[]: "+x.join(","))}so.getJSONTypes=a;function l(v,x){const{gen:E,data:_,opts:C}=v,S=c(x,C.coerceTypes),k=x.length>0&&!(S.length===0&&x.length===1&&(0,t.schemaHasRulesForType)(v,x[0]));if(k){const R=p(x,_,C.strictNumbers,s.Wrong);E.if(R,()=>{S.length?d(v,x,S):g(v)})}return k}so.coerceAndCheckDataType=l;const u=new Set(["string","number","integer","boolean","null"]);function c(v,x){return x?v.filter(E=>u.has(E)||x==="array"&&E==="array"):[]}function d(v,x,E){const{gen:_,data:C,opts:S}=v,k=_.let("dataType",(0,r._)`typeof ${C}`),R=_.let("coerced",(0,r._)`undefined`);S.coerceTypes==="array"&&_.if((0,r._)`${k} == 'object' && Array.isArray(${C}) && ${C}.length == 1`,()=>_.assign(C,(0,r._)`${C}[0]`).assign(k,(0,r._)`typeof ${C}`).if(p(x,C,S.strictNumbers),()=>_.assign(R,C))),_.if((0,r._)`${R} !== undefined`);for(const N of E)(u.has(N)||N==="array"&&S.coerceTypes==="array")&&O(N);_.else(),g(v),_.endIf(),_.if((0,r._)`${R} !== undefined`,()=>{_.assign(C,R),f(v,R)});function O(N){switch(N){case"string":_.elseIf((0,r._)`${k} == "number" || ${k} == "boolean"`).assign(R,(0,r._)`"" + ${C}`).elseIf((0,r._)`${C} === null`).assign(R,(0,r._)`""`);return;case"number":_.elseIf((0,r._)`${k} == "boolean" || ${C} === null
              || (${k} == "string" && ${C} && ${C} == +${C})`).assign(R,(0,r._)`+${C}`);return;case"integer":_.elseIf((0,r._)`${k} === "boolean" || ${C} === null
              || (${k} === "string" && ${C} && ${C} == +${C} && !(${C} % 1))`).assign(R,(0,r._)`+${C}`);return;case"boolean":_.elseIf((0,r._)`${C} === "false" || ${C} === 0 || ${C} === null`).assign(R,!1).elseIf((0,r._)`${C} === "true" || ${C} === 1`).assign(R,!0);return;case"null":_.elseIf((0,r._)`${C} === "" || ${C} === 0 || ${C} === false`),_.assign(R,null);return;case"array":_.elseIf((0,r._)`${k} === "string" || ${k} === "number"
              || ${k} === "boolean" || ${C} === null`).assign(R,(0,r._)`[${C}]`)}}}function f({gen:v,parentData:x,parentDataProperty:E},_){v.if((0,r._)`${x} !== undefined`,()=>v.assign((0,r._)`${x}[${E}]`,_))}function h(v,x,E,_=s.Correct){const C=_===s.Correct?r.operators.EQ:r.operators.NEQ;let S;switch(v){case"null":return(0,r._)`${x} ${C} null`;case"array":S=(0,r._)`Array.isArray(${x})`;break;case"object":S=(0,r._)`${x} && typeof ${x} == "object" && !Array.isArray(${x})`;break;case"integer":S=k((0,r._)`!(${x} % 1) && !isNaN(${x})`);break;case"number":S=k();break;default:return(0,r._)`typeof ${x} ${C} ${v}`}return _===s.Correct?S:(0,r.not)(S);function k(R=r.nil){return(0,r.and)((0,r._)`typeof ${x} == "number"`,R,E?(0,r._)`isFinite(${x})`:r.nil)}}so.checkDataType=h;function p(v,x,E,_){if(v.length===1)return h(v[0],x,E,_);let C;const S=(0,i.toHash)(v);if(S.array&&S.object){const k=(0,r._)`typeof ${x} != "object"`;C=S.null?k:(0,r._)`!${x} || ${k}`,delete S.null,delete S.array,delete S.object}else C=r.nil;S.number&&delete S.integer;for(const k in S)C=(0,r.and)(C,h(k,x,E,_));return C}so.checkDataTypes=p;const m={message:({schema:v})=>`must be ${v}`,params:({schema:v,schemaValue:x})=>typeof v=="string"?(0,r._)`{type: ${v}}`:(0,r._)`{type: ${x}}`};function g(v){const x=b(v);(0,n.reportError)(x,m)}so.reportTypeError=g;function b(v){const{gen:x,data:E,schema:_}=v,C=(0,i.schemaRefOrVal)(v,_,"type");return{gen:x,keyword:"type",data:E,schema:_.type,schemaCode:C,schemaValue:C,parentSchema:_,params:{},it:v}}return so}var B_={},Ode;function wFt(){if(Ode)return B_;Ode=1,Object.defineProperty(B_,"__esModule",{value:!0}),B_.assignDefaults=void 0;const e=Nn(),t=cr();function n(i,s){const{properties:o,items:a}=i.schema;if(s==="object"&&o)for(const l in o)r(i,l,o[l].default);else s==="array"&&Array.isArray(a)&&a.forEach((l,u)=>r(i,u,l.default))}B_.assignDefaults=n;function r(i,s,o){const{gen:a,compositeRule:l,data:u,opts:c}=i;if(o===void 0)return;const d=(0,e._)`${u}${(0,e.getProperty)(s)}`;if(l){(0,t.checkStrictMode)(i,`default is ignored for: ${d}`);return}let f=(0,e._)`${d} === undefined`;c.useDefaults==="empty"&&(f=(0,e._)`${f} || ${d} === null || ${d} === ""`),a.if(f,(0,e._)`${d} = ${(0,e.stringify)(o)}`)}return B_}var hc={},vr={},$de;function Td(){if($de)return vr;$de=1,Object.defineProperty(vr,"__esModule",{value:!0}),vr.validateUnion=vr.validateArray=vr.usePattern=vr.callValidateCode=vr.schemaProperties=vr.allSchemaProperties=vr.noPropertyInData=vr.propertyInData=vr.isOwnProperty=vr.hasPropFunc=vr.reportMissingProp=vr.checkMissingProp=vr.checkReportMissingProp=void 0;const e=Nn(),t=cr(),n=lg(),r=cr();function i(v,x){const{gen:E,data:_,it:C}=v;E.if(c(E,_,x,C.opts.ownProperties),()=>{v.setParams({missingProperty:(0,e._)`${x}`},!0),v.error()})}vr.checkReportMissingProp=i;function s({gen:v,data:x,it:{opts:E}},_,C){return(0,e.or)(..._.map(S=>(0,e.and)(c(v,x,S,E.ownProperties),(0,e._)`${C} = ${S}`)))}vr.checkMissingProp=s;function o(v,x){v.setParams({missingProperty:x},!0),v.error()}vr.reportMissingProp=o;function a(v){return v.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,e._)`Object.prototype.hasOwnProperty`})}vr.hasPropFunc=a;function l(v,x,E){return(0,e._)`${a(v)}.call(${x}, ${E})`}vr.isOwnProperty=l;function u(v,x,E,_){const C=(0,e._)`${x}${(0,e.getProperty)(E)} !== undefined`;return _?(0,e._)`${C} && ${l(v,x,E)}`:C}vr.propertyInData=u;function c(v,x,E,_){const C=(0,e._)`${x}${(0,e.getProperty)(E)} === undefined`;return _?(0,e.or)(C,(0,e.not)(l(v,x,E))):C}vr.noPropertyInData=c;function d(v){return v?Object.keys(v).filter(x=>x!=="__proto__"):[]}vr.allSchemaProperties=d;function f(v,x){return d(x).filter(E=>!(0,t.alwaysValidSchema)(v,x[E]))}vr.schemaProperties=f;function h({schemaCode:v,data:x,it:{gen:E,topSchemaRef:_,schemaPath:C,errorPath:S},it:k},R,O,N){const L=N?(0,e._)`${v}, ${x}, ${_}${C}`:x,$=[[n.default.instancePath,(0,e.strConcat)(n.default.instancePath,S)],[n.default.parentData,k.parentData],[n.default.parentDataProperty,k.parentDataProperty],[n.default.rootData,n.default.rootData]];k.opts.dynamicRef&&$.push([n.default.dynamicAnchors,n.default.dynamicAnchors]);const B=(0,e._)`${L}, ${E.object(...$)}`;return O!==e.nil?(0,e._)`${R}.call(${O}, ${B})`:(0,e._)`${R}(${B})`}vr.callValidateCode=h;const p=(0,e._)`new RegExp`;function m({gen:v,it:{opts:x}},E){const _=x.unicodeRegExp?"u":"",{regExp:C}=x.code,S=C(E,_);return v.scopeValue("pattern",{key:S.toString(),ref:S,code:(0,e._)`${C.code==="new RegExp"?p:(0,r.useFunc)(v,C)}(${E}, ${_})`})}vr.usePattern=m;function g(v){const{gen:x,data:E,keyword:_,it:C}=v,S=x.name("valid");if(C.allErrors){const R=x.let("valid",!0);return k(()=>x.assign(R,!1)),R}return x.var(S,!0),k(()=>x.break()),S;function k(R){const O=x.const("len",(0,e._)`${E}.length`);x.forRange("i",0,O,N=>{v.subschema({keyword:_,dataProp:N,dataPropType:t.Type.Num},S),x.if((0,e.not)(S),R)})}}vr.validateArray=g;function b(v){const{gen:x,schema:E,keyword:_,it:C}=v;if(!Array.isArray(E))throw new Error("ajv implementation error");if(E.some(O=>(0,t.alwaysValidSchema)(C,O))&&!C.opts.unevaluated)return;const k=x.let("valid",!1),R=x.name("_valid");x.block(()=>E.forEach((O,N)=>{const L=v.subschema({keyword:_,schemaProp:N,compositeRule:!0},R);x.assign(k,(0,e._)`${k} || ${R}`),v.mergeValidEvaluated(L,R)||x.if((0,e.not)(k))})),v.result(k,()=>v.reset(),()=>v.error(!0))}return vr.validateUnion=b,vr}var Mde;function xFt(){if(Mde)return hc;Mde=1,Object.defineProperty(hc,"__esModule",{value:!0}),hc.validateKeywordUsage=hc.validSchemaType=hc.funcKeywordCode=hc.macroKeywordCode=void 0;const e=Nn(),t=lg(),n=Td(),r=L6();function i(f,h){const{gen:p,keyword:m,schema:g,parentSchema:b,it:v}=f,x=h.macro.call(v.self,g,b,v),E=u(p,m,x);v.opts.validateSchema!==!1&&v.self.validateSchema(x,!0);const _=p.name("valid");f.subschema({schema:x,schemaPath:e.nil,errSchemaPath:`${v.errSchemaPath}/${m}`,topSchemaRef:E,compositeRule:!0},_),f.pass(_,()=>f.error(!0))}hc.macroKeywordCode=i;function s(f,h){var p;const{gen:m,keyword:g,schema:b,parentSchema:v,$data:x,it:E}=f;l(E,h);const _=!x&&h.compile?h.compile.call(E.self,b,v,E):h.validate,C=u(m,g,_),S=m.let("valid");f.block$data(S,k),f.ok((p=h.valid)!==null&&p!==void 0?p:S);function k(){if(h.errors===!1)N(),h.modifying&&o(f),L(()=>f.error());else{const $=h.async?R():O();h.modifying&&o(f),L(()=>a(f,$))}}function R(){const $=m.let("ruleErrs",null);return m.try(()=>N((0,e._)`await `),B=>m.assign(S,!1).if((0,e._)`${B} instanceof ${E.ValidationError}`,()=>m.assign($,(0,e._)`${B}.errors`),()=>m.throw(B))),$}function O(){const $=(0,e._)`${C}.errors`;return m.assign($,null),N(e.nil),$}function N($=h.async?(0,e._)`await `:e.nil){const B=E.opts.passContext?t.default.this:t.default.self,H=!("compile"in h&&!x||h.schema===!1);m.assign(S,(0,e._)`${$}${(0,n.callValidateCode)(f,C,B,H)}`,h.modifying)}function L($){var B;m.if((0,e.not)((B=h.valid)!==null&&B!==void 0?B:S),$)}}hc.funcKeywordCode=s;function o(f){const{gen:h,data:p,it:m}=f;h.if(m.parentData,()=>h.assign(p,(0,e._)`${m.parentData}[${m.parentDataProperty}]`))}function a(f,h){const{gen:p}=f;p.if((0,e._)`Array.isArray(${h})`,()=>{p.assign(t.default.vErrors,(0,e._)`${t.default.vErrors} === null ? ${h} : ${t.default.vErrors}.concat(${h})`).assign(t.default.errors,(0,e._)`${t.default.vErrors}.length`),(0,r.extendErrors)(f)},()=>f.error())}function l({schemaEnv:f},h){if(h.async&&!f.$async)throw new Error("async keyword in sync schema")}function u(f,h,p){if(p===void 0)throw new Error(`keyword "${h}" failed to compile`);return f.scopeValue("keyword",typeof p=="function"?{ref:p}:{ref:p,code:(0,e.stringify)(p)})}function c(f,h,p=!1){return!h.length||h.some(m=>m==="array"?Array.isArray(f):m==="object"?f&&typeof f=="object"&&!Array.isArray(f):typeof f==m||p&&typeof f>"u")}hc.validSchemaType=c;function d({schema:f,opts:h,self:p,errSchemaPath:m},g,b){if(Array.isArray(g.keyword)?!g.keyword.includes(b):g.keyword!==b)throw new Error("ajv implementation error");const v=g.dependencies;if(v!=null&&v.some(x=>!Object.prototype.hasOwnProperty.call(f,x)))throw new Error(`parent schema must have dependencies of ${b}: ${v.join(",")}`);if(g.validateSchema&&!g.validateSchema(f[b])){const E=`keyword "${b}" value is invalid at path "${m}": `+p.errorsText(g.validateSchema.errors);if(h.validateSchema==="log")p.logger.error(E);else throw new Error(E)}}return hc.validateKeywordUsage=d,hc}var Ch={},Lde;function EFt(){if(Lde)return Ch;Lde=1,Object.defineProperty(Ch,"__esModule",{value:!0}),Ch.extendSubschemaMode=Ch.extendSubschemaData=Ch.getSubschema=void 0;const e=Nn(),t=cr();function n(s,{keyword:o,schemaProp:a,schema:l,schemaPath:u,errSchemaPath:c,topSchemaRef:d}){if(o!==void 0&&l!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(o!==void 0){const f=s.schema[o];return a===void 0?{schema:f,schemaPath:(0,e._)`${s.schemaPath}${(0,e.getProperty)(o)}`,errSchemaPath:`${s.errSchemaPath}/${o}`}:{schema:f[a],schemaPath:(0,e._)`${s.schemaPath}${(0,e.getProperty)(o)}${(0,e.getProperty)(a)}`,errSchemaPath:`${s.errSchemaPath}/${o}/${(0,t.escapeFragment)(a)}`}}if(l!==void 0){if(u===void 0||c===void 0||d===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:l,schemaPath:u,topSchemaRef:d,errSchemaPath:c}}throw new Error('either "keyword" or "schema" must be passed')}Ch.getSubschema=n;function r(s,o,{dataProp:a,dataPropType:l,data:u,dataTypes:c,propertyName:d}){if(u!==void 0&&a!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:f}=o;if(a!==void 0){const{errorPath:p,dataPathArr:m,opts:g}=o,b=f.let("data",(0,e._)`${o.data}${(0,e.getProperty)(a)}`,!0);h(b),s.errorPath=(0,e.str)`${p}${(0,t.getErrorPath)(a,l,g.jsPropertySyntax)}`,s.parentDataProperty=(0,e._)`${a}`,s.dataPathArr=[...m,s.parentDataProperty]}if(u!==void 0){const p=u instanceof e.Name?u:f.let("data",u,!0);h(p),d!==void 0&&(s.propertyName=d)}c&&(s.dataTypes=c);function h(p){s.data=p,s.dataLevel=o.dataLevel+1,s.dataTypes=[],o.definedProperties=new Set,s.parentData=o.data,s.dataNames=[...o.dataNames,p]}}Ch.extendSubschemaData=r;function i(s,{jtdDiscriminator:o,jtdMetadata:a,compositeRule:l,createErrors:u,allErrors:c}){l!==void 0&&(s.compositeRule=l),u!==void 0&&(s.createErrors=u),c!==void 0&&(s.allErrors=c),s.jtdDiscriminator=o,s.jtdMetadata=a}return Ch.extendSubschemaMode=i,Ch}var ua={},VF={exports:{}},Fde;function _Ft(){if(Fde)return VF.exports;Fde=1;var e=VF.exports=function(r,i,s){typeof i=="function"&&(s=i,i={}),s=i.cb||s;var o=typeof s=="function"?s:s.pre||function(){},a=s.post||function(){};t(i,o,a,r,"",r)};e.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0},e.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},e.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},e.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function t(r,i,s,o,a,l,u,c,d,f){if(o&&typeof o=="object"&&!Array.isArray(o)){i(o,a,l,u,c,d,f);for(var h in o){var p=o[h];if(Array.isArray(p)){if(h in e.arrayKeywords)for(var m=0;m<p.length;m++)t(r,i,s,p[m],a+"/"+h+"/"+m,l,a,h,o,m)}else if(h in e.propsKeywords){if(p&&typeof p=="object")for(var g in p)t(r,i,s,p[g],a+"/"+h+"/"+n(g),l,a,h,o,g)}else(h in e.keywords||r.allKeys&&!(h in e.skipKeywords))&&t(r,i,s,p,a+"/"+h,l,a,h,o)}s(o,a,l,u,c,d,f)}}function n(r){return r.replace(/~/g,"~0").replace(/\//g,"~1")}return VF.exports}var jde;function F6(){if(jde)return ua;jde=1,Object.defineProperty(ua,"__esModule",{value:!0}),ua.getSchemaRefs=ua.resolveUrl=ua.normalizeId=ua._getFullPath=ua.getFullPath=ua.inlineRef=void 0;const e=cr(),t=fV(),n=_Ft(),r=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function i(m,g=!0){return typeof m=="boolean"?!0:g===!0?!o(m):g?a(m)<=g:!1}ua.inlineRef=i;const s=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function o(m){for(const g in m){if(s.has(g))return!0;const b=m[g];if(Array.isArray(b)&&b.some(o)||typeof b=="object"&&o(b))return!0}return!1}function a(m){let g=0;for(const b in m){if(b==="$ref")return 1/0;if(g++,!r.has(b)&&(typeof m[b]=="object"&&(0,e.eachItem)(m[b],v=>g+=a(v)),g===1/0))return 1/0}return g}function l(m,g="",b){b!==!1&&(g=d(g));const v=m.parse(g);return u(m,v)}ua.getFullPath=l;function u(m,g){return m.serialize(g).split("#")[0]+"#"}ua._getFullPath=u;const c=/#\/?$/;function d(m){return m?m.replace(c,""):""}ua.normalizeId=d;function f(m,g,b){return b=d(b),m.resolve(g,b)}ua.resolveUrl=f;const h=/^[a-z_][-a-z0-9._]*$/i;function p(m,g){if(typeof m=="boolean")return{};const{schemaId:b,uriResolver:v}=this.opts,x=d(m[b]||g),E={"":x},_=l(v,x,!1),C={},S=new Set;return n(m,{allKeys:!0},(O,N,L,$)=>{if($===void 0)return;const B=_+N;let H=E[$];typeof O[b]=="string"&&(H=Y.call(this,O[b])),J.call(this,O.$anchor),J.call(this,O.$dynamicAnchor),E[N]=H;function Y(K){const Z=this.opts.uriResolver.resolve;if(K=d(H?Z(H,K):K),S.has(K))throw R(K);S.add(K);let U=this.refs[K];return typeof U=="string"&&(U=this.refs[U]),typeof U=="object"?k(O,U.schema,K):K!==d(B)&&(K[0]==="#"?(k(O,C[K],K),C[K]=O):this.refs[K]=B),K}function J(K){if(typeof K=="string"){if(!h.test(K))throw new Error(`invalid anchor "${K}"`);Y.call(this,`#${K}`)}}}),C;function k(O,N,L){if(N!==void 0&&!t(O,N))throw R(L)}function R(O){return new Error(`reference "${O}" resolves to more than one schema`)}}return ua.getSchemaRefs=p,ua}var Bde;function j6(){if(Bde)return _h;Bde=1,Object.defineProperty(_h,"__esModule",{value:!0}),_h.getData=_h.KeywordCxt=_h.validateFunctionCode=void 0;const e=bFt(),t=NN(),n=V3e(),r=NN(),i=wFt(),s=xFt(),o=EFt(),a=Nn(),l=lg(),u=F6(),c=cr(),d=L6();function f(te){if(_(te)&&(S(te),E(te))){g(te);return}h(te,()=>(0,e.topBoolOrEmptySchema)(te))}_h.validateFunctionCode=f;function h({gen:te,validateName:re,schema:we,schemaEnv:Ee,opts:Fe},We){Fe.code.es5?te.func(re,(0,a._)`${l.default.data}, ${l.default.valCxt}`,Ee.$async,()=>{te.code((0,a._)`"use strict"; ${v(we,Fe)}`),m(te,Fe),te.code(We)}):te.func(re,(0,a._)`${l.default.data}, ${p(Fe)}`,Ee.$async,()=>te.code(v(we,Fe)).code(We))}function p(te){return(0,a._)`{${l.default.instancePath}="", ${l.default.parentData}, ${l.default.parentDataProperty}, ${l.default.rootData}=${l.default.data}${te.dynamicRef?(0,a._)`, ${l.default.dynamicAnchors}={}`:a.nil}}={}`}function m(te,re){te.if(l.default.valCxt,()=>{te.var(l.default.instancePath,(0,a._)`${l.default.valCxt}.${l.default.instancePath}`),te.var(l.default.parentData,(0,a._)`${l.default.valCxt}.${l.default.parentData}`),te.var(l.default.parentDataProperty,(0,a._)`${l.default.valCxt}.${l.default.parentDataProperty}`),te.var(l.default.rootData,(0,a._)`${l.default.valCxt}.${l.default.rootData}`),re.dynamicRef&&te.var(l.default.dynamicAnchors,(0,a._)`${l.default.valCxt}.${l.default.dynamicAnchors}`)},()=>{te.var(l.default.instancePath,(0,a._)`""`),te.var(l.default.parentData,(0,a._)`undefined`),te.var(l.default.parentDataProperty,(0,a._)`undefined`),te.var(l.default.rootData,l.default.data),re.dynamicRef&&te.var(l.default.dynamicAnchors,(0,a._)`{}`)})}function g(te){const{schema:re,opts:we,gen:Ee}=te;h(te,()=>{we.$comment&&re.$comment&&$(te),O(te),Ee.let(l.default.vErrors,null),Ee.let(l.default.errors,0),we.unevaluated&&b(te),k(te),B(te)})}function b(te){const{gen:re,validateName:we}=te;te.evaluated=re.const("evaluated",(0,a._)`${we}.evaluated`),re.if((0,a._)`${te.evaluated}.dynamicProps`,()=>re.assign((0,a._)`${te.evaluated}.props`,(0,a._)`undefined`)),re.if((0,a._)`${te.evaluated}.dynamicItems`,()=>re.assign((0,a._)`${te.evaluated}.items`,(0,a._)`undefined`))}function v(te,re){const we=typeof te=="object"&&te[re.schemaId];return we&&(re.code.source||re.code.process)?(0,a._)`/*# sourceURL=${we} */`:a.nil}function x(te,re){if(_(te)&&(S(te),E(te))){C(te,re);return}(0,e.boolOrEmptySchema)(te,re)}function E({schema:te,self:re}){if(typeof te=="boolean")return!te;for(const we in te)if(re.RULES.all[we])return!0;return!1}function _(te){return typeof te.schema!="boolean"}function C(te,re){const{schema:we,gen:Ee,opts:Fe}=te;Fe.$comment&&we.$comment&&$(te),N(te),L(te);const We=Ee.const("_errs",l.default.errors);k(te,We),Ee.var(re,(0,a._)`${We} === ${l.default.errors}`)}function S(te){(0,c.checkUnknownRules)(te),R(te)}function k(te,re){if(te.opts.jtd)return Y(te,[],!1,re);const we=(0,t.getSchemaTypes)(te.schema),Ee=(0,t.coerceAndCheckDataType)(te,we);Y(te,we,!Ee,re)}function R(te){const{schema:re,errSchemaPath:we,opts:Ee,self:Fe}=te;re.$ref&&Ee.ignoreKeywordsWithRef&&(0,c.schemaHasRulesButRef)(re,Fe.RULES)&&Fe.logger.warn(`$ref: keywords ignored in schema at path "${we}"`)}function O(te){const{schema:re,opts:we}=te;re.default!==void 0&&we.useDefaults&&we.strictSchema&&(0,c.checkStrictMode)(te,"default is ignored in the schema root")}function N(te){const re=te.schema[te.opts.schemaId];re&&(te.baseId=(0,u.resolveUrl)(te.opts.uriResolver,te.baseId,re))}function L(te){if(te.schema.$async&&!te.schemaEnv.$async)throw new Error("async schema in sync schema")}function $({gen:te,schemaEnv:re,schema:we,errSchemaPath:Ee,opts:Fe}){const We=we.$comment;if(Fe.$comment===!0)te.code((0,a._)`${l.default.self}.logger.log(${We})`);else if(typeof Fe.$comment=="function"){const Me=(0,a.str)`${Ee}/$comment`,Be=te.scopeValue("root",{ref:re.root});te.code((0,a._)`${l.default.self}.opts.$comment(${We}, ${Me}, ${Be}.schema)`)}}function B(te){const{gen:re,schemaEnv:we,validateName:Ee,ValidationError:Fe,opts:We}=te;we.$async?re.if((0,a._)`${l.default.errors} === 0`,()=>re.return(l.default.data),()=>re.throw((0,a._)`new ${Fe}(${l.default.vErrors})`)):(re.assign((0,a._)`${Ee}.errors`,l.default.vErrors),We.unevaluated&&H(te),re.return((0,a._)`${l.default.errors} === 0`))}function H({gen:te,evaluated:re,props:we,items:Ee}){we instanceof a.Name&&te.assign((0,a._)`${re}.props`,we),Ee instanceof a.Name&&te.assign((0,a._)`${re}.items`,Ee)}function Y(te,re,we,Ee){const{gen:Fe,schema:We,data:Me,allErrors:Be,opts:Je,self:lt}=te,{RULES:ht}=lt;if(We.$ref&&(Je.ignoreKeywordsWithRef||!(0,c.schemaHasRulesButRef)(We,ht))){Fe.block(()=>me(te,"$ref",ht.all.$ref.definition));return}Je.jtd||K(te,re),Fe.block(()=>{for(const Pe of ht.rules)vt(Pe);vt(ht.post)});function vt(Pe){(0,n.shouldUseGroup)(We,Pe)&&(Pe.type?(Fe.if((0,r.checkDataType)(Pe.type,Me,Je.strictNumbers)),J(te,Pe),re.length===1&&re[0]===Pe.type&&we&&(Fe.else(),(0,r.reportTypeError)(te)),Fe.endIf()):J(te,Pe),Be||Fe.if((0,a._)`${l.default.errors} === ${Ee||0}`))}}function J(te,re){const{gen:we,schema:Ee,opts:{useDefaults:Fe}}=te;Fe&&(0,i.assignDefaults)(te,re.type),we.block(()=>{for(const We of re.rules)(0,n.shouldUseRule)(Ee,We)&&me(te,We.keyword,We.definition,re.type)})}function K(te,re){te.schemaEnv.meta||!te.opts.strictTypes||(Z(te,re),te.opts.allowUnionTypes||U(te,re),j(te,te.dataTypes))}function Z(te,re){if(re.length){if(!te.dataTypes.length){te.dataTypes=re;return}re.forEach(we=>{z(te.dataTypes,we)||Q(te,`type "${we}" not allowed by context "${te.dataTypes.join(",")}"`)}),G(te,re)}}function U(te,re){re.length>1&&!(re.length===2&&re.includes("null"))&&Q(te,"use allowUnionTypes to allow union type keyword")}function j(te,re){const we=te.self.RULES.all;for(const Ee in we){const Fe=we[Ee];if(typeof Fe=="object"&&(0,n.shouldUseRule)(te.schema,Fe)){const{type:We}=Fe.definition;We.length&&!We.some(Me=>V(re,Me))&&Q(te,`missing type "${We.join(",")}" for keyword "${Ee}"`)}}}function V(te,re){return te.includes(re)||re==="number"&&te.includes("integer")}function z(te,re){return te.includes(re)||re==="integer"&&te.includes("number")}function G(te,re){const we=[];for(const Ee of te.dataTypes)z(re,Ee)?we.push(Ee):re.includes("integer")&&Ee==="number"&&we.push("integer");te.dataTypes=we}function Q(te,re){const we=te.schemaEnv.baseId+te.errSchemaPath;re+=` at "${we}" (strictTypes)`,(0,c.checkStrictMode)(te,re,te.opts.strictTypes)}class ie{constructor(re,we,Ee){if((0,s.validateKeywordUsage)(re,we,Ee),this.gen=re.gen,this.allErrors=re.allErrors,this.keyword=Ee,this.data=re.data,this.schema=re.schema[Ee],this.$data=we.$data&&re.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,c.schemaRefOrVal)(re,this.schema,Ee,this.$data),this.schemaType=we.schemaType,this.parentSchema=re.schema,this.params={},this.it=re,this.def=we,this.$data)this.schemaCode=re.gen.const("vSchema",be(this.$data,re));else if(this.schemaCode=this.schemaValue,!(0,s.validSchemaType)(this.schema,we.schemaType,we.allowUndefined))throw new Error(`${Ee} value must be ${JSON.stringify(we.schemaType)}`);("code"in we?we.trackErrors:we.errors!==!1)&&(this.errsCount=re.gen.const("_errs",l.default.errors))}result(re,we,Ee){this.failResult((0,a.not)(re),we,Ee)}failResult(re,we,Ee){this.gen.if(re),Ee?Ee():this.error(),we?(this.gen.else(),we(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(re,we){this.failResult((0,a.not)(re),void 0,we)}fail(re){if(re===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(re),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(re){if(!this.$data)return this.fail(re);const{schemaCode:we}=this;this.fail((0,a._)`${we} !== undefined && (${(0,a.or)(this.invalid$data(),re)})`)}error(re,we,Ee){if(we){this.setParams(we),this._error(re,Ee),this.setParams({});return}this._error(re,Ee)}_error(re,we){(re?d.reportExtraError:d.reportError)(this,this.def.error,we)}$dataError(){(0,d.reportError)(this,this.def.$dataError||d.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,d.resetErrorsCount)(this.gen,this.errsCount)}ok(re){this.allErrors||this.gen.if(re)}setParams(re,we){we?Object.assign(this.params,re):this.params=re}block$data(re,we,Ee=a.nil){this.gen.block(()=>{this.check$data(re,Ee),we()})}check$data(re=a.nil,we=a.nil){if(!this.$data)return;const{gen:Ee,schemaCode:Fe,schemaType:We,def:Me}=this;Ee.if((0,a.or)((0,a._)`${Fe} === undefined`,we)),re!==a.nil&&Ee.assign(re,!0),(We.length||Me.validateSchema)&&(Ee.elseIf(this.invalid$data()),this.$dataError(),re!==a.nil&&Ee.assign(re,!1)),Ee.else()}invalid$data(){const{gen:re,schemaCode:we,schemaType:Ee,def:Fe,it:We}=this;return(0,a.or)(Me(),Be());function Me(){if(Ee.length){if(!(we instanceof a.Name))throw new Error("ajv implementation error");const Je=Array.isArray(Ee)?Ee:[Ee];return(0,a._)`${(0,r.checkDataTypes)(Je,we,We.opts.strictNumbers,r.DataType.Wrong)}`}return a.nil}function Be(){if(Fe.validateSchema){const Je=re.scopeValue("validate$data",{ref:Fe.validateSchema});return(0,a._)`!${Je}(${we})`}return a.nil}}subschema(re,we){const Ee=(0,o.getSubschema)(this.it,re);(0,o.extendSubschemaData)(Ee,this.it,re),(0,o.extendSubschemaMode)(Ee,re);const Fe={...this.it,...Ee,items:void 0,props:void 0};return x(Fe,we),Fe}mergeEvaluated(re,we){const{it:Ee,gen:Fe}=this;Ee.opts.unevaluated&&(Ee.props!==!0&&re.props!==void 0&&(Ee.props=c.mergeEvaluated.props(Fe,re.props,Ee.props,we)),Ee.items!==!0&&re.items!==void 0&&(Ee.items=c.mergeEvaluated.items(Fe,re.items,Ee.items,we)))}mergeValidEvaluated(re,we){const{it:Ee,gen:Fe}=this;if(Ee.opts.unevaluated&&(Ee.props!==!0||Ee.items!==!0))return Fe.if(we,()=>this.mergeEvaluated(re,a.Name)),!0}}_h.KeywordCxt=ie;function me(te,re,we,Ee){const Fe=new ie(te,we,re);"code"in we?we.code(Fe,Ee):Fe.$data&&we.validate?(0,s.funcKeywordCode)(Fe,we):"macro"in we?(0,s.macroKeywordCode)(Fe,we):(we.compile||we.validate)&&(0,s.funcKeywordCode)(Fe,we)}const ae=/^\/(?:[^~]|~0|~1)*$/,fe=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function be(te,{dataLevel:re,dataNames:we,dataPathArr:Ee}){let Fe,We;if(te==="")return l.default.rootData;if(te[0]==="/"){if(!ae.test(te))throw new Error(`Invalid JSON-pointer: ${te}`);Fe=te,We=l.default.rootData}else{const lt=fe.exec(te);if(!lt)throw new Error(`Invalid JSON-pointer: ${te}`);const ht=+lt[1];if(Fe=lt[2],Fe==="#"){if(ht>=re)throw new Error(Je("property/index",ht));return Ee[re-ht]}if(ht>re)throw new Error(Je("data",ht));if(We=we[re-ht],!Fe)return We}let Me=We;const Be=Fe.split("/");for(const lt of Be)lt&&(We=(0,a._)`${We}${(0,a.getProperty)((0,c.unescapeJsonPointer)(lt))}`,Me=(0,a._)`${Me} && ${We}`);return Me;function Je(lt,ht){return`Cannot access ${lt} ${ht} levels up, current level is ${re}`}}return _h.getData=be,_h}var kI={},zde;function xQ(){if(zde)return kI;zde=1,Object.defineProperty(kI,"__esModule",{value:!0});class e extends Error{constructor(n){super("validation failed"),this.errors=n,this.ajv=this.validation=!0}}return kI.default=e,kI}var II={},Ude;function B6(){if(Ude)return II;Ude=1,Object.defineProperty(II,"__esModule",{value:!0});const e=F6();class t extends Error{constructor(r,i,s,o){super(o||`can't resolve reference ${s} from id ${i}`),this.missingRef=(0,e.resolveUrl)(r,i,s),this.missingSchema=(0,e.normalizeId)((0,e.getFullPath)(r,this.missingRef))}}return II.default=t,II}var Il={},qde;function EQ(){if(qde)return Il;qde=1,Object.defineProperty(Il,"__esModule",{value:!0}),Il.resolveSchema=Il.getCompilingSchema=Il.resolveRef=Il.compileSchema=Il.SchemaEnv=void 0;const e=Nn(),t=xQ(),n=lg(),r=F6(),i=cr(),s=j6();class o{constructor(b){var v;this.refs={},this.dynamicAnchors={};let x;typeof b.schema=="object"&&(x=b.schema),this.schema=b.schema,this.schemaId=b.schemaId,this.root=b.root||this,this.baseId=(v=b.baseId)!==null&&v!==void 0?v:(0,r.normalizeId)(x==null?void 0:x[b.schemaId||"$id"]),this.schemaPath=b.schemaPath,this.localRefs=b.localRefs,this.meta=b.meta,this.$async=x==null?void 0:x.$async,this.refs={}}}Il.SchemaEnv=o;function a(g){const b=c.call(this,g);if(b)return b;const v=(0,r.getFullPath)(this.opts.uriResolver,g.root.baseId),{es5:x,lines:E}=this.opts.code,{ownProperties:_}=this.opts,C=new e.CodeGen(this.scope,{es5:x,lines:E,ownProperties:_});let S;g.$async&&(S=C.scopeValue("Error",{ref:t.default,code:(0,e._)`require("ajv/dist/runtime/validation_error").default`}));const k=C.scopeName("validate");g.validateName=k;const R={gen:C,allErrors:this.opts.allErrors,data:n.default.data,parentData:n.default.parentData,parentDataProperty:n.default.parentDataProperty,dataNames:[n.default.data],dataPathArr:[e.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:C.scopeValue("schema",this.opts.code.source===!0?{ref:g.schema,code:(0,e.stringify)(g.schema)}:{ref:g.schema}),validateName:k,ValidationError:S,schema:g.schema,schemaEnv:g,rootId:v,baseId:g.baseId||v,schemaPath:e.nil,errSchemaPath:g.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,e._)`""`,opts:this.opts,self:this};let O;try{this._compilations.add(g),(0,s.validateFunctionCode)(R),C.optimize(this.opts.code.optimize);const N=C.toString();O=`${C.scopeRefs(n.default.scope)}return ${N}`,this.opts.code.process&&(O=this.opts.code.process(O,g));const $=new Function(`${n.default.self}`,`${n.default.scope}`,O)(this,this.scope.get());if(this.scope.value(k,{ref:$}),$.errors=null,$.schema=g.schema,$.schemaEnv=g,g.$async&&($.$async=!0),this.opts.code.source===!0&&($.source={validateName:k,validateCode:N,scopeValues:C._values}),this.opts.unevaluated){const{props:B,items:H}=R;$.evaluated={props:B instanceof e.Name?void 0:B,items:H instanceof e.Name?void 0:H,dynamicProps:B instanceof e.Name,dynamicItems:H instanceof e.Name},$.source&&($.source.evaluated=(0,e.stringify)($.evaluated))}return g.validate=$,g}catch(N){throw delete g.validate,delete g.validateName,O&&this.logger.error("Error compiling schema, function code:",O),N}finally{this._compilations.delete(g)}}Il.compileSchema=a;function l(g,b,v){var x;v=(0,r.resolveUrl)(this.opts.uriResolver,b,v);const E=g.refs[v];if(E)return E;let _=f.call(this,g,v);if(_===void 0){const C=(x=g.localRefs)===null||x===void 0?void 0:x[v],{schemaId:S}=this.opts;C&&(_=new o({schema:C,schemaId:S,root:g,baseId:b}))}if(_!==void 0)return g.refs[v]=u.call(this,_)}Il.resolveRef=l;function u(g){return(0,r.inlineRef)(g.schema,this.opts.inlineRefs)?g.schema:g.validate?g:a.call(this,g)}function c(g){for(const b of this._compilations)if(d(b,g))return b}Il.getCompilingSchema=c;function d(g,b){return g.schema===b.schema&&g.root===b.root&&g.baseId===b.baseId}function f(g,b){let v;for(;typeof(v=this.refs[b])=="string";)b=v;return v||this.schemas[b]||h.call(this,g,b)}function h(g,b){const v=this.opts.uriResolver.parse(b),x=(0,r._getFullPath)(this.opts.uriResolver,v);let E=(0,r.getFullPath)(this.opts.uriResolver,g.baseId,void 0);if(Object.keys(g.schema).length>0&&x===E)return m.call(this,v,g);const _=(0,r.normalizeId)(x),C=this.refs[_]||this.schemas[_];if(typeof C=="string"){const S=h.call(this,g,C);return typeof(S==null?void 0:S.schema)!="object"?void 0:m.call(this,v,S)}if(typeof(C==null?void 0:C.schema)=="object"){if(C.validate||a.call(this,C),_===(0,r.normalizeId)(b)){const{schema:S}=C,{schemaId:k}=this.opts,R=S[k];return R&&(E=(0,r.resolveUrl)(this.opts.uriResolver,E,R)),new o({schema:S,schemaId:k,root:g,baseId:E})}return m.call(this,v,C)}}Il.resolveSchema=h;const p=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function m(g,{baseId:b,schema:v,root:x}){var E;if(((E=g.fragment)===null||E===void 0?void 0:E[0])!=="/")return;for(const S of g.fragment.slice(1).split("/")){if(typeof v=="boolean")return;const k=v[(0,i.unescapeFragment)(S)];if(k===void 0)return;v=k;const R=typeof v=="object"&&v[this.opts.schemaId];!p.has(S)&&R&&(b=(0,r.resolveUrl)(this.opts.uriResolver,b,R))}let _;if(typeof v!="boolean"&&v.$ref&&!(0,i.schemaHasRulesButRef)(v,this.RULES)){const S=(0,r.resolveUrl)(this.opts.uriResolver,b,v.$ref);_=h.call(this,x,S)}const{schemaId:C}=this.opts;if(_=_||new o({schema:v,schemaId:C,root:x,baseId:b}),_.schema!==_.root.schema)return _}return Il}const TFt="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",CFt="Meta-schema for $data reference (JSON AnySchema extension proposal)",SFt="object",AFt=["$data"],kFt={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},IFt=!1,RFt={$id:TFt,description:CFt,type:SFt,required:AFt,properties:kFt,additionalProperties:IFt};var RI={},z_={exports:{}},GF,Hde;function DFt(){return Hde||(Hde=1,GF={HEX:{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15}}),GF}var YF,Wde;function PFt(){if(Wde)return YF;Wde=1;const{HEX:e}=DFt(),t=/^(?:(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)$/u;function n(m){if(a(m,".")<3)return{host:m,isIPV4:!1};const g=m.match(t)||[],[b]=g;return b?{host:o(b,"."),isIPV4:!0}:{host:m,isIPV4:!1}}function r(m,g=!1){let b="",v=!0;for(const x of m){if(e[x]===void 0)return;x!=="0"&&v===!0&&(v=!1),v||(b+=x)}return g&&b.length===0&&(b="0"),b}function i(m){let g=0;const b={error:!1,address:"",zone:""},v=[],x=[];let E=!1,_=!1,C=!1;function S(){if(x.length){if(E===!1){const k=r(x);if(k!==void 0)v.push(k);else return b.error=!0,!1}x.length=0}return!0}for(let k=0;k<m.length;k++){const R=m[k];if(!(R==="["||R==="]"))if(R===":"){if(_===!0&&(C=!0),!S())break;if(g++,v.push(":"),g>7){b.error=!0;break}k-1>=0&&m[k-1]===":"&&(_=!0);continue}else if(R==="%"){if(!S())break;E=!0}else{x.push(R);continue}}return x.length&&(E?b.zone=x.join(""):C?v.push(x.join("")):v.push(r(x))),b.address=v.join(""),b}function s(m){if(a(m,":")<2)return{host:m,isIPV6:!1};const g=i(m);if(g.error)return{host:m,isIPV6:!1};{let b=g.address,v=g.address;return g.zone&&(b+="%"+g.zone,v+="%25"+g.zone),{host:b,escapedHost:v,isIPV6:!0}}}function o(m,g){let b="",v=!0;const x=m.length;for(let E=0;E<x;E++){const _=m[E];_==="0"&&v?(E+1<=x&&m[E+1]===g||E+1===x)&&(b+=_,v=!1):(_===g?v=!0:v=!1,b+=_)}return b}function a(m,g){let b=0;for(let v=0;v<m.length;v++)m[v]===g&&b++;return b}const l=/^\.\.?\//u,u=/^\/\.(?:\/|$)/u,c=/^\/\.\.(?:\/|$)/u,d=/^\/?(?:.|\n)*?(?=\/|$)/u;function f(m){const g=[];for(;m.length;)if(m.match(l))m=m.replace(l,"");else if(m.match(u))m=m.replace(u,"/");else if(m.match(c))m=m.replace(c,"/"),g.pop();else if(m==="."||m==="..")m="";else{const b=m.match(d);if(b){const v=b[0];m=m.slice(v.length),g.push(v)}else throw new Error("Unexpected dot segment condition")}return g.join("")}function h(m,g){const b=g!==!0?escape:unescape;return m.scheme!==void 0&&(m.scheme=b(m.scheme)),m.userinfo!==void 0&&(m.userinfo=b(m.userinfo)),m.host!==void 0&&(m.host=b(m.host)),m.path!==void 0&&(m.path=b(m.path)),m.query!==void 0&&(m.query=b(m.query)),m.fragment!==void 0&&(m.fragment=b(m.fragment)),m}function p(m){const g=[];if(m.userinfo!==void 0&&(g.push(m.userinfo),g.push("@")),m.host!==void 0){let b=unescape(m.host);const v=n(b);if(v.isIPV4)b=v.host;else{const x=s(v.host);x.isIPV6===!0?b=`[${x.escapedHost}]`:b=m.host}g.push(b)}return(typeof m.port=="number"||typeof m.port=="string")&&(g.push(":"),g.push(String(m.port))),g.length?g.join(""):void 0}return YF={recomposeAuthority:p,normalizeComponentEncoding:h,removeDotSegments:f,normalizeIPv4:n,normalizeIPv6:s,stringArrayToHexStripped:r},YF}var KF,Vde;function NFt(){if(Vde)return KF;Vde=1;const e=/^[\da-f]{8}\b-[\da-f]{4}\b-[\da-f]{4}\b-[\da-f]{4}\b-[\da-f]{12}$/iu,t=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu;function n(v){return typeof v.secure=="boolean"?v.secure:String(v.scheme).toLowerCase()==="wss"}function r(v){return v.host||(v.error=v.error||"HTTP URIs must have a host."),v}function i(v){const x=String(v.scheme).toLowerCase()==="https";return(v.port===(x?443:80)||v.port==="")&&(v.port=void 0),v.path||(v.path="/"),v}function s(v){return v.secure=n(v),v.resourceName=(v.path||"/")+(v.query?"?"+v.query:""),v.path=void 0,v.query=void 0,v}function o(v){if((v.port===(n(v)?443:80)||v.port==="")&&(v.port=void 0),typeof v.secure=="boolean"&&(v.scheme=v.secure?"wss":"ws",v.secure=void 0),v.resourceName){const[x,E]=v.resourceName.split("?");v.path=x&&x!=="/"?x:void 0,v.query=E,v.resourceName=void 0}return v.fragment=void 0,v}function a(v,x){if(!v.path)return v.error="URN can not be parsed",v;const E=v.path.match(t);if(E){const _=x.scheme||v.scheme||"urn";v.nid=E[1].toLowerCase(),v.nss=E[2];const C=`${_}:${x.nid||v.nid}`,S=b[C];v.path=void 0,S&&(v=S.parse(v,x))}else v.error=v.error||"URN can not be parsed.";return v}function l(v,x){const E=x.scheme||v.scheme||"urn",_=v.nid.toLowerCase(),C=`${E}:${x.nid||_}`,S=b[C];S&&(v=S.serialize(v,x));const k=v,R=v.nss;return k.path=`${_||x.nid}:${R}`,x.skipEscape=!0,k}function u(v,x){const E=v;return E.uuid=E.nss,E.nss=void 0,!x.tolerant&&(!E.uuid||!e.test(E.uuid))&&(E.error=E.error||"UUID is not valid."),E}function c(v){const x=v;return x.nss=(v.uuid||"").toLowerCase(),x}const d={scheme:"http",domainHost:!0,parse:r,serialize:i},f={scheme:"https",domainHost:d.domainHost,parse:r,serialize:i},h={scheme:"ws",domainHost:!0,parse:s,serialize:o},p={scheme:"wss",domainHost:h.domainHost,parse:h.parse,serialize:h.serialize},b={http:d,https:f,ws:h,wss:p,urn:{scheme:"urn",parse:a,serialize:l,skipNormalize:!0},"urn:uuid":{scheme:"urn:uuid",parse:u,serialize:c,skipNormalize:!0}};return KF=b,KF}var Gde;function OFt(){if(Gde)return z_.exports;Gde=1;const{normalizeIPv6:e,normalizeIPv4:t,removeDotSegments:n,recomposeAuthority:r,normalizeComponentEncoding:i}=PFt(),s=NFt();function o(g,b){return typeof g=="string"?g=c(p(g,b),b):typeof g=="object"&&(g=p(c(g,b),b)),g}function a(g,b,v){const x=Object.assign({scheme:"null"},v),E=l(p(g,x),p(b,x),x,!0);return c(E,{...x,skipEscape:!0})}function l(g,b,v,x){const E={};return x||(g=p(c(g,v),v),b=p(c(b,v),v)),v=v||{},!v.tolerant&&b.scheme?(E.scheme=b.scheme,E.userinfo=b.userinfo,E.host=b.host,E.port=b.port,E.path=n(b.path||""),E.query=b.query):(b.userinfo!==void 0||b.host!==void 0||b.port!==void 0?(E.userinfo=b.userinfo,E.host=b.host,E.port=b.port,E.path=n(b.path||""),E.query=b.query):(b.path?(b.path.charAt(0)==="/"?E.path=n(b.path):((g.userinfo!==void 0||g.host!==void 0||g.port!==void 0)&&!g.path?E.path="/"+b.path:g.path?E.path=g.path.slice(0,g.path.lastIndexOf("/")+1)+b.path:E.path=b.path,E.path=n(E.path)),E.query=b.query):(E.path=g.path,b.query!==void 0?E.query=b.query:E.query=g.query),E.userinfo=g.userinfo,E.host=g.host,E.port=g.port),E.scheme=g.scheme),E.fragment=b.fragment,E}function u(g,b,v){return typeof g=="string"?(g=unescape(g),g=c(i(p(g,v),!0),{...v,skipEscape:!0})):typeof g=="object"&&(g=c(i(g,!0),{...v,skipEscape:!0})),typeof b=="string"?(b=unescape(b),b=c(i(p(b,v),!0),{...v,skipEscape:!0})):typeof b=="object"&&(b=c(i(b,!0),{...v,skipEscape:!0})),g.toLowerCase()===b.toLowerCase()}function c(g,b){const v={host:g.host,scheme:g.scheme,userinfo:g.userinfo,port:g.port,path:g.path,query:g.query,nid:g.nid,nss:g.nss,uuid:g.uuid,fragment:g.fragment,reference:g.reference,resourceName:g.resourceName,secure:g.secure,error:""},x=Object.assign({},b),E=[],_=s[(x.scheme||v.scheme||"").toLowerCase()];_&&_.serialize&&_.serialize(v,x),v.path!==void 0&&(x.skipEscape?v.path=unescape(v.path):(v.path=escape(v.path),v.scheme!==void 0&&(v.path=v.path.split("%3A").join(":")))),x.reference!=="suffix"&&v.scheme&&E.push(v.scheme,":");const C=r(v);if(C!==void 0&&(x.reference!=="suffix"&&E.push("//"),E.push(C),v.path&&v.path.charAt(0)!=="/"&&E.push("/")),v.path!==void 0){let S=v.path;!x.absolutePath&&(!_||!_.absolutePath)&&(S=n(S)),C===void 0&&(S=S.replace(/^\/\//u,"/%2F")),E.push(S)}return v.query!==void 0&&E.push("?",v.query),v.fragment!==void 0&&E.push("#",v.fragment),E.join("")}const d=Array.from({length:127},(g,b)=>/[^!"$&'()*+,\-.;=_`a-z{}~]/u.test(String.fromCharCode(b)));function f(g){let b=0;for(let v=0,x=g.length;v<x;++v)if(b=g.charCodeAt(v),b>126||d[b])return!0;return!1}const h=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function p(g,b){const v=Object.assign({},b),x={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0},E=g.indexOf("%")!==-1;let _=!1;v.reference==="suffix"&&(g=(v.scheme?v.scheme+":":"")+"//"+g);const C=g.match(h);if(C){if(x.scheme=C[1],x.userinfo=C[3],x.host=C[4],x.port=parseInt(C[5],10),x.path=C[6]||"",x.query=C[7],x.fragment=C[8],isNaN(x.port)&&(x.port=C[5]),x.host){const k=t(x.host);if(k.isIPV4===!1){const R=e(k.host);x.host=R.host.toLowerCase(),_=R.isIPV6}else x.host=k.host,_=!0}x.scheme===void 0&&x.userinfo===void 0&&x.host===void 0&&x.port===void 0&&!x.path&&x.query===void 0?x.reference="same-document":x.scheme===void 0?x.reference="relative":x.fragment===void 0?x.reference="absolute":x.reference="uri",v.reference&&v.reference!=="suffix"&&v.reference!==x.reference&&(x.error=x.error||"URI is not a "+v.reference+" reference.");const S=s[(v.scheme||x.scheme||"").toLowerCase()];if(!v.unicodeSupport&&(!S||!S.unicodeSupport)&&x.host&&(v.domainHost||S&&S.domainHost)&&_===!1&&f(x.host))try{x.host=URL.domainToASCII(x.host.toLowerCase())}catch(k){x.error=x.error||"Host's domain name can not be converted to ASCII: "+k}(!S||S&&!S.skipNormalize)&&(E&&x.scheme!==void 0&&(x.scheme=unescape(x.scheme)),E&&x.host!==void 0&&(x.host=unescape(x.host)),x.path&&x.path.length&&(x.path=escape(unescape(x.path))),x.fragment&&x.fragment.length&&(x.fragment=encodeURI(decodeURIComponent(x.fragment)))),S&&S.parse&&S.parse(x,v)}else x.error=x.error||"URI can not be parsed.";return x}const m={SCHEMES:s,normalize:o,resolve:a,resolveComponents:l,equal:u,serialize:c,parse:p};return z_.exports=m,z_.exports.default=m,z_.exports.fastUri=m,z_.exports}var Yde;function $Ft(){if(Yde)return RI;Yde=1,Object.defineProperty(RI,"__esModule",{value:!0});const e=OFt();return e.code='require("ajv/dist/runtime/uri").default',RI.default=e,RI}var Kde;function MFt(){return Kde||(Kde=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=j6();Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var n=Nn();Object.defineProperty(e,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return n.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return n.CodeGen}});const r=xQ(),i=B6(),s=W3e(),o=EQ(),a=Nn(),l=F6(),u=NN(),c=cr(),d=RFt,f=$Ft(),h=(U,j)=>new RegExp(U,j);h.code="new RegExp";const p=["removeAdditional","useDefaults","coerceTypes"],m=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),g={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},b={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},v=200;function x(U){var j,V,z,G,Q,ie,me,ae,fe,be,te,re,we,Ee,Fe,We,Me,Be,Je,lt,ht,vt,Pe,wt,Wt;const Ce=U.strict,Ne=(j=U.code)===null||j===void 0?void 0:j.optimize,ot=Ne===!0||Ne===void 0?1:Ne||0,xt=(z=(V=U.code)===null||V===void 0?void 0:V.regExp)!==null&&z!==void 0?z:h,Ct=(G=U.uriResolver)!==null&&G!==void 0?G:f.default;return{strictSchema:(ie=(Q=U.strictSchema)!==null&&Q!==void 0?Q:Ce)!==null&&ie!==void 0?ie:!0,strictNumbers:(ae=(me=U.strictNumbers)!==null&&me!==void 0?me:Ce)!==null&&ae!==void 0?ae:!0,strictTypes:(be=(fe=U.strictTypes)!==null&&fe!==void 0?fe:Ce)!==null&&be!==void 0?be:"log",strictTuples:(re=(te=U.strictTuples)!==null&&te!==void 0?te:Ce)!==null&&re!==void 0?re:"log",strictRequired:(Ee=(we=U.strictRequired)!==null&&we!==void 0?we:Ce)!==null&&Ee!==void 0?Ee:!1,code:U.code?{...U.code,optimize:ot,regExp:xt}:{optimize:ot,regExp:xt},loopRequired:(Fe=U.loopRequired)!==null&&Fe!==void 0?Fe:v,loopEnum:(We=U.loopEnum)!==null&&We!==void 0?We:v,meta:(Me=U.meta)!==null&&Me!==void 0?Me:!0,messages:(Be=U.messages)!==null&&Be!==void 0?Be:!0,inlineRefs:(Je=U.inlineRefs)!==null&&Je!==void 0?Je:!0,schemaId:(lt=U.schemaId)!==null&&lt!==void 0?lt:"$id",addUsedSchema:(ht=U.addUsedSchema)!==null&&ht!==void 0?ht:!0,validateSchema:(vt=U.validateSchema)!==null&&vt!==void 0?vt:!0,validateFormats:(Pe=U.validateFormats)!==null&&Pe!==void 0?Pe:!0,unicodeRegExp:(wt=U.unicodeRegExp)!==null&&wt!==void 0?wt:!0,int32range:(Wt=U.int32range)!==null&&Wt!==void 0?Wt:!0,uriResolver:Ct}}class E{constructor(j={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,j=this.opts={...j,...x(j)};const{es5:V,lines:z}=this.opts.code;this.scope=new a.ValueScope({scope:{},prefixes:m,es5:V,lines:z}),this.logger=L(j.logger);const G=j.validateFormats;j.validateFormats=!1,this.RULES=(0,s.getRules)(),_.call(this,g,j,"NOT SUPPORTED"),_.call(this,b,j,"DEPRECATED","warn"),this._metaOpts=O.call(this),j.formats&&k.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),j.keywords&&R.call(this,j.keywords),typeof j.meta=="object"&&this.addMetaSchema(j.meta),S.call(this),j.validateFormats=G}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:j,meta:V,schemaId:z}=this.opts;let G=d;z==="id"&&(G={...d},G.id=G.$id,delete G.$id),V&&j&&this.addMetaSchema(G,G[z],!1)}defaultMeta(){const{meta:j,schemaId:V}=this.opts;return this.opts.defaultMeta=typeof j=="object"?j[V]||j:void 0}validate(j,V){let z;if(typeof j=="string"){if(z=this.getSchema(j),!z)throw new Error(`no schema with key or ref "${j}"`)}else z=this.compile(j);const G=z(V);return"$async"in z||(this.errors=z.errors),G}compile(j,V){const z=this._addSchema(j,V);return z.validate||this._compileSchemaEnv(z)}compileAsync(j,V){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:z}=this.opts;return G.call(this,j,V);async function G(be,te){await Q.call(this,be.$schema);const re=this._addSchema(be,te);return re.validate||ie.call(this,re)}async function Q(be){be&&!this.getSchema(be)&&await G.call(this,{$ref:be},!0)}async function ie(be){try{return this._compileSchemaEnv(be)}catch(te){if(!(te instanceof i.default))throw te;return me.call(this,te),await ae.call(this,te.missingSchema),ie.call(this,be)}}function me({missingSchema:be,missingRef:te}){if(this.refs[be])throw new Error(`AnySchema ${be} is loaded but ${te} cannot be resolved`)}async function ae(be){const te=await fe.call(this,be);this.refs[be]||await Q.call(this,te.$schema),this.refs[be]||this.addSchema(te,be,V)}async function fe(be){const te=this._loading[be];if(te)return te;try{return await(this._loading[be]=z(be))}finally{delete this._loading[be]}}}addSchema(j,V,z,G=this.opts.validateSchema){if(Array.isArray(j)){for(const ie of j)this.addSchema(ie,void 0,z,G);return this}let Q;if(typeof j=="object"){const{schemaId:ie}=this.opts;if(Q=j[ie],Q!==void 0&&typeof Q!="string")throw new Error(`schema ${ie} must be string`)}return V=(0,l.normalizeId)(V||Q),this._checkUnique(V),this.schemas[V]=this._addSchema(j,z,V,G,!0),this}addMetaSchema(j,V,z=this.opts.validateSchema){return this.addSchema(j,V,!0,z),this}validateSchema(j,V){if(typeof j=="boolean")return!0;let z;if(z=j.$schema,z!==void 0&&typeof z!="string")throw new Error("$schema must be a string");if(z=z||this.opts.defaultMeta||this.defaultMeta(),!z)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const G=this.validate(z,j);if(!G&&V){const Q="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(Q);else throw new Error(Q)}return G}getSchema(j){let V;for(;typeof(V=C.call(this,j))=="string";)j=V;if(V===void 0){const{schemaId:z}=this.opts,G=new o.SchemaEnv({schema:{},schemaId:z});if(V=o.resolveSchema.call(this,G,j),!V)return;this.refs[j]=V}return V.validate||this._compileSchemaEnv(V)}removeSchema(j){if(j instanceof RegExp)return this._removeAllSchemas(this.schemas,j),this._removeAllSchemas(this.refs,j),this;switch(typeof j){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const V=C.call(this,j);return typeof V=="object"&&this._cache.delete(V.schema),delete this.schemas[j],delete this.refs[j],this}case"object":{const V=j;this._cache.delete(V);let z=j[this.opts.schemaId];return z&&(z=(0,l.normalizeId)(z),delete this.schemas[z],delete this.refs[z]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(j){for(const V of j)this.addKeyword(V);return this}addKeyword(j,V){let z;if(typeof j=="string")z=j,typeof V=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),V.keyword=z);else if(typeof j=="object"&&V===void 0){if(V=j,z=V.keyword,Array.isArray(z)&&!z.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(B.call(this,z,V),!V)return(0,c.eachItem)(z,Q=>H.call(this,Q)),this;J.call(this,V);const G={...V,type:(0,u.getJSONTypes)(V.type),schemaType:(0,u.getJSONTypes)(V.schemaType)};return(0,c.eachItem)(z,G.type.length===0?Q=>H.call(this,Q,G):Q=>G.type.forEach(ie=>H.call(this,Q,G,ie))),this}getKeyword(j){const V=this.RULES.all[j];return typeof V=="object"?V.definition:!!V}removeKeyword(j){const{RULES:V}=this;delete V.keywords[j],delete V.all[j];for(const z of V.rules){const G=z.rules.findIndex(Q=>Q.keyword===j);G>=0&&z.rules.splice(G,1)}return this}addFormat(j,V){return typeof V=="string"&&(V=new RegExp(V)),this.formats[j]=V,this}errorsText(j=this.errors,{separator:V=", ",dataVar:z="data"}={}){return!j||j.length===0?"No errors":j.map(G=>`${z}${G.instancePath} ${G.message}`).reduce((G,Q)=>G+V+Q)}$dataMetaSchema(j,V){const z=this.RULES.all;j=JSON.parse(JSON.stringify(j));for(const G of V){const Q=G.split("/").slice(1);let ie=j;for(const me of Q)ie=ie[me];for(const me in z){const ae=z[me];if(typeof ae!="object")continue;const{$data:fe}=ae.definition,be=ie[me];fe&&be&&(ie[me]=Z(be))}}return j}_removeAllSchemas(j,V){for(const z in j){const G=j[z];(!V||V.test(z))&&(typeof G=="string"?delete j[z]:G&&!G.meta&&(this._cache.delete(G.schema),delete j[z]))}}_addSchema(j,V,z,G=this.opts.validateSchema,Q=this.opts.addUsedSchema){let ie;const{schemaId:me}=this.opts;if(typeof j=="object")ie=j[me];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof j!="boolean")throw new Error("schema must be object or boolean")}let ae=this._cache.get(j);if(ae!==void 0)return ae;z=(0,l.normalizeId)(ie||z);const fe=l.getSchemaRefs.call(this,j,z);return ae=new o.SchemaEnv({schema:j,schemaId:me,meta:V,baseId:z,localRefs:fe}),this._cache.set(ae.schema,ae),Q&&!z.startsWith("#")&&(z&&this._checkUnique(z),this.refs[z]=ae),G&&this.validateSchema(j,!0),ae}_checkUnique(j){if(this.schemas[j]||this.refs[j])throw new Error(`schema with key or id "${j}" already exists`)}_compileSchemaEnv(j){if(j.meta?this._compileMetaSchema(j):o.compileSchema.call(this,j),!j.validate)throw new Error("ajv implementation error");return j.validate}_compileMetaSchema(j){const V=this.opts;this.opts=this._metaOpts;try{o.compileSchema.call(this,j)}finally{this.opts=V}}}E.ValidationError=r.default,E.MissingRefError=i.default,e.default=E;function _(U,j,V,z="error"){for(const G in U){const Q=G;Q in j&&this.logger[z](`${V}: option ${G}. ${U[Q]}`)}}function C(U){return U=(0,l.normalizeId)(U),this.schemas[U]||this.refs[U]}function S(){const U=this.opts.schemas;if(U)if(Array.isArray(U))this.addSchema(U);else for(const j in U)this.addSchema(U[j],j)}function k(){for(const U in this.opts.formats){const j=this.opts.formats[U];j&&this.addFormat(U,j)}}function R(U){if(Array.isArray(U)){this.addVocabulary(U);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const j in U){const V=U[j];V.keyword||(V.keyword=j),this.addKeyword(V)}}function O(){const U={...this.opts};for(const j of p)delete U[j];return U}const N={log(){},warn(){},error(){}};function L(U){if(U===!1)return N;if(U===void 0)return console;if(U.log&&U.warn&&U.error)return U;throw new Error("logger must implement log, warn and error methods")}const $=/^[a-z_$][a-z0-9_$:-]*$/i;function B(U,j){const{RULES:V}=this;if((0,c.eachItem)(U,z=>{if(V.keywords[z])throw new Error(`Keyword ${z} is already defined`);if(!$.test(z))throw new Error(`Keyword ${z} has invalid name`)}),!!j&&j.$data&&!("code"in j||"validate"in j))throw new Error('$data keyword must have "code" or "validate" function')}function H(U,j,V){var z;const G=j==null?void 0:j.post;if(V&&G)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:Q}=this;let ie=G?Q.post:Q.rules.find(({type:ae})=>ae===V);if(ie||(ie={type:V,rules:[]},Q.rules.push(ie)),Q.keywords[U]=!0,!j)return;const me={keyword:U,definition:{...j,type:(0,u.getJSONTypes)(j.type),schemaType:(0,u.getJSONTypes)(j.schemaType)}};j.before?Y.call(this,ie,me,j.before):ie.rules.push(me),Q.all[U]=me,(z=j.implements)===null||z===void 0||z.forEach(ae=>this.addKeyword(ae))}function Y(U,j,V){const z=U.rules.findIndex(G=>G.keyword===V);z>=0?U.rules.splice(z,0,j):(U.rules.push(j),this.logger.warn(`rule ${V} is not defined`))}function J(U){let{metaSchema:j}=U;j!==void 0&&(U.$data&&this.opts.$data&&(j=Z(j)),U.validateSchema=this.compile(j,!0))}const K={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function Z(U){return{anyOf:[U,K]}}}(zF)),zF}var DI={},PI={},NI={},Xde;function LFt(){if(Xde)return NI;Xde=1,Object.defineProperty(NI,"__esModule",{value:!0});const e={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};return NI.default=e,NI}var xm={},Qde;function FFt(){if(Qde)return xm;Qde=1,Object.defineProperty(xm,"__esModule",{value:!0}),xm.callRef=xm.getValidate=void 0;const e=B6(),t=Td(),n=Nn(),r=lg(),i=EQ(),s=cr(),o={keyword:"$ref",schemaType:"string",code(u){const{gen:c,schema:d,it:f}=u,{baseId:h,schemaEnv:p,validateName:m,opts:g,self:b}=f,{root:v}=p;if((d==="#"||d==="#/")&&h===v.baseId)return E();const x=i.resolveRef.call(b,v,h,d);if(x===void 0)throw new e.default(f.opts.uriResolver,h,d);if(x instanceof i.SchemaEnv)return _(x);return C(x);function E(){if(p===v)return l(u,m,p,p.$async);const S=c.scopeValue("root",{ref:v});return l(u,(0,n._)`${S}.validate`,v,v.$async)}function _(S){const k=a(u,S);l(u,k,S,S.$async)}function C(S){const k=c.scopeValue("schema",g.code.source===!0?{ref:S,code:(0,n.stringify)(S)}:{ref:S}),R=c.name("valid"),O=u.subschema({schema:S,dataTypes:[],schemaPath:n.nil,topSchemaRef:k,errSchemaPath:d},R);u.mergeEvaluated(O),u.ok(R)}}};function a(u,c){const{gen:d}=u;return c.validate?d.scopeValue("validate",{ref:c.validate}):(0,n._)`${d.scopeValue("wrapper",{ref:c})}.validate`}xm.getValidate=a;function l(u,c,d,f){const{gen:h,it:p}=u,{allErrors:m,schemaEnv:g,opts:b}=p,v=b.passContext?r.default.this:n.nil;f?x():E();function x(){if(!g.$async)throw new Error("async schema referenced by sync schema");const S=h.let("valid");h.try(()=>{h.code((0,n._)`await ${(0,t.callValidateCode)(u,c,v)}`),C(c),m||h.assign(S,!0)},k=>{h.if((0,n._)`!(${k} instanceof ${p.ValidationError})`,()=>h.throw(k)),_(k),m||h.assign(S,!1)}),u.ok(S)}function E(){u.result((0,t.callValidateCode)(u,c,v),()=>C(c),()=>_(c))}function _(S){const k=(0,n._)`${S}.errors`;h.assign(r.default.vErrors,(0,n._)`${r.default.vErrors} === null ? ${k} : ${r.default.vErrors}.concat(${k})`),h.assign(r.default.errors,(0,n._)`${r.default.vErrors}.length`)}function C(S){var k;if(!p.opts.unevaluated)return;const R=(k=d==null?void 0:d.validate)===null||k===void 0?void 0:k.evaluated;if(p.props!==!0)if(R&&!R.dynamicProps)R.props!==void 0&&(p.props=s.mergeEvaluated.props(h,R.props,p.props));else{const O=h.var("props",(0,n._)`${S}.evaluated.props`);p.props=s.mergeEvaluated.props(h,O,p.props,n.Name)}if(p.items!==!0)if(R&&!R.dynamicItems)R.items!==void 0&&(p.items=s.mergeEvaluated.items(h,R.items,p.items));else{const O=h.var("items",(0,n._)`${S}.evaluated.items`);p.items=s.mergeEvaluated.items(h,O,p.items,n.Name)}}}return xm.callRef=l,xm.default=o,xm}var Jde;function jFt(){if(Jde)return PI;Jde=1,Object.defineProperty(PI,"__esModule",{value:!0});const e=LFt(),t=FFt(),n=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",e.default,t.default];return PI.default=n,PI}var OI={},$I={},Zde;function BFt(){if(Zde)return $I;Zde=1,Object.defineProperty($I,"__esModule",{value:!0});const e=Nn(),t=e.operators,n={maximum:{okStr:"<=",ok:t.LTE,fail:t.GT},minimum:{okStr:">=",ok:t.GTE,fail:t.LT},exclusiveMaximum:{okStr:"<",ok:t.LT,fail:t.GTE},exclusiveMinimum:{okStr:">",ok:t.GT,fail:t.LTE}},r={message:({keyword:s,schemaCode:o})=>(0,e.str)`must be ${n[s].okStr} ${o}`,params:({keyword:s,schemaCode:o})=>(0,e._)`{comparison: ${n[s].okStr}, limit: ${o}}`},i={keyword:Object.keys(n),type:"number",schemaType:"number",$data:!0,error:r,code(s){const{keyword:o,data:a,schemaCode:l}=s;s.fail$data((0,e._)`${a} ${n[o].fail} ${l} || isNaN(${a})`)}};return $I.default=i,$I}var MI={},efe;function zFt(){if(efe)return MI;efe=1,Object.defineProperty(MI,"__esModule",{value:!0});const e=Nn(),n={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:{message:({schemaCode:r})=>(0,e.str)`must be multiple of ${r}`,params:({schemaCode:r})=>(0,e._)`{multipleOf: ${r}}`},code(r){const{gen:i,data:s,schemaCode:o,it:a}=r,l=a.opts.multipleOfPrecision,u=i.let("res"),c=l?(0,e._)`Math.abs(Math.round(${u}) - ${u}) > 1e-${l}`:(0,e._)`${u} !== parseInt(${u})`;r.fail$data((0,e._)`(${o} === 0 || (${u} = ${s}/${o}, ${c}))`)}};return MI.default=n,MI}var LI={},FI={},tfe;function UFt(){if(tfe)return FI;tfe=1,Object.defineProperty(FI,"__esModule",{value:!0});function e(t){const n=t.length;let r=0,i=0,s;for(;i<n;)r++,s=t.charCodeAt(i++),s>=55296&&s<=56319&&i<n&&(s=t.charCodeAt(i),(s&64512)===56320&&i++);return r}return FI.default=e,e.code='require("ajv/dist/runtime/ucs2length").default',FI}var nfe;function qFt(){if(nfe)return LI;nfe=1,Object.defineProperty(LI,"__esModule",{value:!0});const e=Nn(),t=cr(),n=UFt(),i={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:{message({keyword:s,schemaCode:o}){const a=s==="maxLength"?"more":"fewer";return(0,e.str)`must NOT have ${a} than ${o} characters`},params:({schemaCode:s})=>(0,e._)`{limit: ${s}}`},code(s){const{keyword:o,data:a,schemaCode:l,it:u}=s,c=o==="maxLength"?e.operators.GT:e.operators.LT,d=u.opts.unicode===!1?(0,e._)`${a}.length`:(0,e._)`${(0,t.useFunc)(s.gen,n.default)}(${a})`;s.fail$data((0,e._)`${d} ${c} ${l}`)}};return LI.default=i,LI}var jI={},rfe;function HFt(){if(rfe)return jI;rfe=1,Object.defineProperty(jI,"__esModule",{value:!0});const e=Td(),t=Nn(),r={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:{message:({schemaCode:i})=>(0,t.str)`must match pattern "${i}"`,params:({schemaCode:i})=>(0,t._)`{pattern: ${i}}`},code(i){const{data:s,$data:o,schema:a,schemaCode:l,it:u}=i,c=u.opts.unicodeRegExp?"u":"",d=o?(0,t._)`(new RegExp(${l}, ${c}))`:(0,e.usePattern)(i,a);i.fail$data((0,t._)`!${d}.test(${s})`)}};return jI.default=r,jI}var BI={},ife;function WFt(){if(ife)return BI;ife=1,Object.defineProperty(BI,"__esModule",{value:!0});const e=Nn(),n={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:{message({keyword:r,schemaCode:i}){const s=r==="maxProperties"?"more":"fewer";return(0,e.str)`must NOT have ${s} than ${i} properties`},params:({schemaCode:r})=>(0,e._)`{limit: ${r}}`},code(r){const{keyword:i,data:s,schemaCode:o}=r,a=i==="maxProperties"?e.operators.GT:e.operators.LT;r.fail$data((0,e._)`Object.keys(${s}).length ${a} ${o}`)}};return BI.default=n,BI}var zI={},sfe;function VFt(){if(sfe)return zI;sfe=1,Object.defineProperty(zI,"__esModule",{value:!0});const e=Td(),t=Nn(),n=cr(),i={keyword:"required",type:"object",schemaType:"array",$data:!0,error:{message:({params:{missingProperty:s}})=>(0,t.str)`must have required property '${s}'`,params:({params:{missingProperty:s}})=>(0,t._)`{missingProperty: ${s}}`},code(s){const{gen:o,schema:a,schemaCode:l,data:u,$data:c,it:d}=s,{opts:f}=d;if(!c&&a.length===0)return;const h=a.length>=f.loopRequired;if(d.allErrors?p():m(),f.strictRequired){const v=s.parentSchema.properties,{definedProperties:x}=s.it;for(const E of a)if((v==null?void 0:v[E])===void 0&&!x.has(E)){const _=d.schemaEnv.baseId+d.errSchemaPath,C=`required property "${E}" is not defined at "${_}" (strictRequired)`;(0,n.checkStrictMode)(d,C,d.opts.strictRequired)}}function p(){if(h||c)s.block$data(t.nil,g);else for(const v of a)(0,e.checkReportMissingProp)(s,v)}function m(){const v=o.let("missing");if(h||c){const x=o.let("valid",!0);s.block$data(x,()=>b(v,x)),s.ok(x)}else o.if((0,e.checkMissingProp)(s,a,v)),(0,e.reportMissingProp)(s,v),o.else()}function g(){o.forOf("prop",l,v=>{s.setParams({missingProperty:v}),o.if((0,e.noPropertyInData)(o,u,v,f.ownProperties),()=>s.error())})}function b(v,x){s.setParams({missingProperty:v}),o.forOf(v,l,()=>{o.assign(x,(0,e.propertyInData)(o,u,v,f.ownProperties)),o.if((0,t.not)(x),()=>{s.error(),o.break()})},t.nil)}}};return zI.default=i,zI}var UI={},ofe;function GFt(){if(ofe)return UI;ofe=1,Object.defineProperty(UI,"__esModule",{value:!0});const e=Nn(),n={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:{message({keyword:r,schemaCode:i}){const s=r==="maxItems"?"more":"fewer";return(0,e.str)`must NOT have ${s} than ${i} items`},params:({schemaCode:r})=>(0,e._)`{limit: ${r}}`},code(r){const{keyword:i,data:s,schemaCode:o}=r,a=i==="maxItems"?e.operators.GT:e.operators.LT;r.fail$data((0,e._)`${s}.length ${a} ${o}`)}};return UI.default=n,UI}var qI={},HI={},afe;function _Q(){if(afe)return HI;afe=1,Object.defineProperty(HI,"__esModule",{value:!0});const e=fV();return e.code='require("ajv/dist/runtime/equal").default',HI.default=e,HI}var lfe;function YFt(){if(lfe)return qI;lfe=1,Object.defineProperty(qI,"__esModule",{value:!0});const e=NN(),t=Nn(),n=cr(),r=_Q(),s={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:{message:({params:{i:o,j:a}})=>(0,t.str)`must NOT have duplicate items (items ## ${a} and ${o} are identical)`,params:({params:{i:o,j:a}})=>(0,t._)`{i: ${o}, j: ${a}}`},code(o){const{gen:a,data:l,$data:u,schema:c,parentSchema:d,schemaCode:f,it:h}=o;if(!u&&!c)return;const p=a.let("valid"),m=d.items?(0,e.getSchemaTypes)(d.items):[];o.block$data(p,g,(0,t._)`${f} === false`),o.ok(p);function g(){const E=a.let("i",(0,t._)`${l}.length`),_=a.let("j");o.setParams({i:E,j:_}),a.assign(p,!0),a.if((0,t._)`${E} > 1`,()=>(b()?v:x)(E,_))}function b(){return m.length>0&&!m.some(E=>E==="object"||E==="array")}function v(E,_){const C=a.name("item"),S=(0,e.checkDataTypes)(m,C,h.opts.strictNumbers,e.DataType.Wrong),k=a.const("indices",(0,t._)`{}`);a.for((0,t._)`;${E}--;`,()=>{a.let(C,(0,t._)`${l}[${E}]`),a.if(S,(0,t._)`continue`),m.length>1&&a.if((0,t._)`typeof ${C} == "string"`,(0,t._)`${C} += "_"`),a.if((0,t._)`typeof ${k}[${C}] == "number"`,()=>{a.assign(_,(0,t._)`${k}[${C}]`),o.error(),a.assign(p,!1).break()}).code((0,t._)`${k}[${C}] = ${E}`)})}function x(E,_){const C=(0,n.useFunc)(a,r.default),S=a.name("outer");a.label(S).for((0,t._)`;${E}--;`,()=>a.for((0,t._)`${_} = ${E}; ${_}--;`,()=>a.if((0,t._)`${C}(${l}[${E}], ${l}[${_}])`,()=>{o.error(),a.assign(p,!1).break(S)})))}}};return qI.default=s,qI}var WI={},ufe;function KFt(){if(ufe)return WI;ufe=1,Object.defineProperty(WI,"__esModule",{value:!0});const e=Nn(),t=cr(),n=_Q(),i={keyword:"const",$data:!0,error:{message:"must be equal to constant",params:({schemaCode:s})=>(0,e._)`{allowedValue: ${s}}`},code(s){const{gen:o,data:a,$data:l,schemaCode:u,schema:c}=s;l||c&&typeof c=="object"?s.fail$data((0,e._)`!${(0,t.useFunc)(o,n.default)}(${a}, ${u})`):s.fail((0,e._)`${c} !== ${a}`)}};return WI.default=i,WI}var VI={},cfe;function XFt(){if(cfe)return VI;cfe=1,Object.defineProperty(VI,"__esModule",{value:!0});const e=Nn(),t=cr(),n=_Q(),i={keyword:"enum",schemaType:"array",$data:!0,error:{message:"must be equal to one of the allowed values",params:({schemaCode:s})=>(0,e._)`{allowedValues: ${s}}`},code(s){const{gen:o,data:a,$data:l,schema:u,schemaCode:c,it:d}=s;if(!l&&u.length===0)throw new Error("enum must have non-empty array");const f=u.length>=d.opts.loopEnum;let h;const p=()=>h??(h=(0,t.useFunc)(o,n.default));let m;if(f||l)m=o.let("valid"),s.block$data(m,g);else{if(!Array.isArray(u))throw new Error("ajv implementation error");const v=o.const("vSchema",c);m=(0,e.or)(...u.map((x,E)=>b(v,E)))}s.pass(m);function g(){o.assign(m,!1),o.forOf("v",c,v=>o.if((0,e._)`${p()}(${a}, ${v})`,()=>o.assign(m,!0).break()))}function b(v,x){const E=u[x];return typeof E=="object"&&E!==null?(0,e._)`${p()}(${a}, ${v}[${x}])`:(0,e._)`${a} === ${E}`}}};return VI.default=i,VI}var dfe;function QFt(){if(dfe)return OI;dfe=1,Object.defineProperty(OI,"__esModule",{value:!0});const e=BFt(),t=zFt(),n=qFt(),r=HFt(),i=WFt(),s=VFt(),o=GFt(),a=YFt(),l=KFt(),u=XFt(),c=[e.default,t.default,n.default,r.default,i.default,s.default,o.default,a.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},l.default,u.default];return OI.default=c,OI}var GI={},lb={},ffe;function G3e(){if(ffe)return lb;ffe=1,Object.defineProperty(lb,"__esModule",{value:!0}),lb.validateAdditionalItems=void 0;const e=Nn(),t=cr(),r={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:{message:({params:{len:s}})=>(0,e.str)`must NOT have more than ${s} items`,params:({params:{len:s}})=>(0,e._)`{limit: ${s}}`},code(s){const{parentSchema:o,it:a}=s,{items:l}=o;if(!Array.isArray(l)){(0,t.checkStrictMode)(a,'"additionalItems" is ignored when "items" is not an array of schemas');return}i(s,l)}};function i(s,o){const{gen:a,schema:l,data:u,keyword:c,it:d}=s;d.items=!0;const f=a.const("len",(0,e._)`${u}.length`);if(l===!1)s.setParams({len:o.length}),s.pass((0,e._)`${f} <= ${o.length}`);else if(typeof l=="object"&&!(0,t.alwaysValidSchema)(d,l)){const p=a.var("valid",(0,e._)`${f} <= ${o.length}`);a.if((0,e.not)(p),()=>h(p)),s.ok(p)}function h(p){a.forRange("i",o.length,f,m=>{s.subschema({keyword:c,dataProp:m,dataPropType:t.Type.Num},p),d.allErrors||a.if((0,e.not)(p),()=>a.break())})}}return lb.validateAdditionalItems=i,lb.default=r,lb}var YI={},ub={},hfe;function Y3e(){if(hfe)return ub;hfe=1,Object.defineProperty(ub,"__esModule",{value:!0}),ub.validateTuple=void 0;const e=Nn(),t=cr(),n=Td(),r={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(s){const{schema:o,it:a}=s;if(Array.isArray(o))return i(s,"additionalItems",o);a.items=!0,!(0,t.alwaysValidSchema)(a,o)&&s.ok((0,n.validateArray)(s))}};function i(s,o,a=s.schema){const{gen:l,parentSchema:u,data:c,keyword:d,it:f}=s;m(u),f.opts.unevaluated&&a.length&&f.items!==!0&&(f.items=t.mergeEvaluated.items(l,a.length,f.items));const h=l.name("valid"),p=l.const("len",(0,e._)`${c}.length`);a.forEach((g,b)=>{(0,t.alwaysValidSchema)(f,g)||(l.if((0,e._)`${p} > ${b}`,()=>s.subschema({keyword:d,schemaProp:b,dataProp:b},h)),s.ok(h))});function m(g){const{opts:b,errSchemaPath:v}=f,x=a.length,E=x===g.minItems&&(x===g.maxItems||g[o]===!1);if(b.strictTuples&&!E){const _=`"${d}" is ${x}-tuple, but minItems or maxItems/${o} are not specified or different at path "${v}"`;(0,t.checkStrictMode)(f,_,b.strictTuples)}}}return ub.validateTuple=i,ub.default=r,ub}var pfe;function JFt(){if(pfe)return YI;pfe=1,Object.defineProperty(YI,"__esModule",{value:!0});const e=Y3e(),t={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:n=>(0,e.validateTuple)(n,"items")};return YI.default=t,YI}var KI={},mfe;function ZFt(){if(mfe)return KI;mfe=1,Object.defineProperty(KI,"__esModule",{value:!0});const e=Nn(),t=cr(),n=Td(),r=G3e(),s={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:{message:({params:{len:o}})=>(0,e.str)`must NOT have more than ${o} items`,params:({params:{len:o}})=>(0,e._)`{limit: ${o}}`},code(o){const{schema:a,parentSchema:l,it:u}=o,{prefixItems:c}=l;u.items=!0,!(0,t.alwaysValidSchema)(u,a)&&(c?(0,r.validateAdditionalItems)(o,c):o.ok((0,n.validateArray)(o)))}};return KI.default=s,KI}var XI={},gfe;function e9t(){if(gfe)return XI;gfe=1,Object.defineProperty(XI,"__esModule",{value:!0});const e=Nn(),t=cr(),r={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:{message:({params:{min:i,max:s}})=>s===void 0?(0,e.str)`must contain at least ${i} valid item(s)`:(0,e.str)`must contain at least ${i} and no more than ${s} valid item(s)`,params:({params:{min:i,max:s}})=>s===void 0?(0,e._)`{minContains: ${i}}`:(0,e._)`{minContains: ${i}, maxContains: ${s}}`},code(i){const{gen:s,schema:o,parentSchema:a,data:l,it:u}=i;let c,d;const{minContains:f,maxContains:h}=a;u.opts.next?(c=f===void 0?1:f,d=h):c=1;const p=s.const("len",(0,e._)`${l}.length`);if(i.setParams({min:c,max:d}),d===void 0&&c===0){(0,t.checkStrictMode)(u,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(d!==void 0&&c>d){(0,t.checkStrictMode)(u,'"minContains" > "maxContains" is always invalid'),i.fail();return}if((0,t.alwaysValidSchema)(u,o)){let x=(0,e._)`${p} >= ${c}`;d!==void 0&&(x=(0,e._)`${x} && ${p} <= ${d}`),i.pass(x);return}u.items=!0;const m=s.name("valid");d===void 0&&c===1?b(m,()=>s.if(m,()=>s.break())):c===0?(s.let(m,!0),d!==void 0&&s.if((0,e._)`${l}.length > 0`,g)):(s.let(m,!1),g()),i.result(m,()=>i.reset());function g(){const x=s.name("_valid"),E=s.let("count",0);b(x,()=>s.if(x,()=>v(E)))}function b(x,E){s.forRange("i",0,p,_=>{i.subschema({keyword:"contains",dataProp:_,dataPropType:t.Type.Num,compositeRule:!0},x),E()})}function v(x){s.code((0,e._)`${x}++`),d===void 0?s.if((0,e._)`${x} >= ${c}`,()=>s.assign(m,!0).break()):(s.if((0,e._)`${x} > ${d}`,()=>s.assign(m,!1).break()),c===1?s.assign(m,!0):s.if((0,e._)`${x} >= ${c}`,()=>s.assign(m,!0)))}}};return XI.default=r,XI}var XF={},yfe;function t9t(){return yfe||(yfe=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=Nn(),n=cr(),r=Td();e.error={message:({params:{property:l,depsCount:u,deps:c}})=>{const d=u===1?"property":"properties";return(0,t.str)`must have ${d} ${c} when property ${l} is present`},params:({params:{property:l,depsCount:u,deps:c,missingProperty:d}})=>(0,t._)`{property: ${l},
    missingProperty: ${d},
    depsCount: ${u},
    deps: ${c}}`};const i={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(l){const[u,c]=s(l);o(l,u),a(l,c)}};function s({schema:l}){const u={},c={};for(const d in l){if(d==="__proto__")continue;const f=Array.isArray(l[d])?u:c;f[d]=l[d]}return[u,c]}function o(l,u=l.schema){const{gen:c,data:d,it:f}=l;if(Object.keys(u).length===0)return;const h=c.let("missing");for(const p in u){const m=u[p];if(m.length===0)continue;const g=(0,r.propertyInData)(c,d,p,f.opts.ownProperties);l.setParams({property:p,depsCount:m.length,deps:m.join(", ")}),f.allErrors?c.if(g,()=>{for(const b of m)(0,r.checkReportMissingProp)(l,b)}):(c.if((0,t._)`${g} && (${(0,r.checkMissingProp)(l,m,h)})`),(0,r.reportMissingProp)(l,h),c.else())}}e.validatePropertyDeps=o;function a(l,u=l.schema){const{gen:c,data:d,keyword:f,it:h}=l,p=c.name("valid");for(const m in u)(0,n.alwaysValidSchema)(h,u[m])||(c.if((0,r.propertyInData)(c,d,m,h.opts.ownProperties),()=>{const g=l.subschema({keyword:f,schemaProp:m},p);l.mergeValidEvaluated(g,p)},()=>c.var(p,!0)),l.ok(p))}e.validateSchemaDeps=a,e.default=i}(XF)),XF}var QI={},vfe;function n9t(){if(vfe)return QI;vfe=1,Object.defineProperty(QI,"__esModule",{value:!0});const e=Nn(),t=cr(),r={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:{message:"property name must be valid",params:({params:i})=>(0,e._)`{propertyName: ${i.propertyName}}`},code(i){const{gen:s,schema:o,data:a,it:l}=i;if((0,t.alwaysValidSchema)(l,o))return;const u=s.name("valid");s.forIn("key",a,c=>{i.setParams({propertyName:c}),i.subschema({keyword:"propertyNames",data:c,dataTypes:["string"],propertyName:c,compositeRule:!0},u),s.if((0,e.not)(u),()=>{i.error(!0),l.allErrors||s.break()})}),i.ok(u)}};return QI.default=r,QI}var JI={},bfe;function K3e(){if(bfe)return JI;bfe=1,Object.defineProperty(JI,"__esModule",{value:!0});const e=Td(),t=Nn(),n=lg(),r=cr(),s={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:{message:"must NOT have additional properties",params:({params:o})=>(0,t._)`{additionalProperty: ${o.additionalProperty}}`},code(o){const{gen:a,schema:l,parentSchema:u,data:c,errsCount:d,it:f}=o;if(!d)throw new Error("ajv implementation error");const{allErrors:h,opts:p}=f;if(f.props=!0,p.removeAdditional!=="all"&&(0,r.alwaysValidSchema)(f,l))return;const m=(0,e.allSchemaProperties)(u.properties),g=(0,e.allSchemaProperties)(u.patternProperties);b(),o.ok((0,t._)`${d} === ${n.default.errors}`);function b(){a.forIn("key",c,C=>{!m.length&&!g.length?E(C):a.if(v(C),()=>E(C))})}function v(C){let S;if(m.length>8){const k=(0,r.schemaRefOrVal)(f,u.properties,"properties");S=(0,e.isOwnProperty)(a,k,C)}else m.length?S=(0,t.or)(...m.map(k=>(0,t._)`${C} === ${k}`)):S=t.nil;return g.length&&(S=(0,t.or)(S,...g.map(k=>(0,t._)`${(0,e.usePattern)(o,k)}.test(${C})`))),(0,t.not)(S)}function x(C){a.code((0,t._)`delete ${c}[${C}]`)}function E(C){if(p.removeAdditional==="all"||p.removeAdditional&&l===!1){x(C);return}if(l===!1){o.setParams({additionalProperty:C}),o.error(),h||a.break();return}if(typeof l=="object"&&!(0,r.alwaysValidSchema)(f,l)){const S=a.name("valid");p.removeAdditional==="failing"?(_(C,S,!1),a.if((0,t.not)(S),()=>{o.reset(),x(C)})):(_(C,S),h||a.if((0,t.not)(S),()=>a.break()))}}function _(C,S,k){const R={keyword:"additionalProperties",dataProp:C,dataPropType:r.Type.Str};k===!1&&Object.assign(R,{compositeRule:!0,createErrors:!1,allErrors:!1}),o.subschema(R,S)}}};return JI.default=s,JI}var ZI={},wfe;function r9t(){if(wfe)return ZI;wfe=1,Object.defineProperty(ZI,"__esModule",{value:!0});const e=j6(),t=Td(),n=cr(),r=K3e(),i={keyword:"properties",type:"object",schemaType:"object",code(s){const{gen:o,schema:a,parentSchema:l,data:u,it:c}=s;c.opts.removeAdditional==="all"&&l.additionalProperties===void 0&&r.default.code(new e.KeywordCxt(c,r.default,"additionalProperties"));const d=(0,t.allSchemaProperties)(a);for(const g of d)c.definedProperties.add(g);c.opts.unevaluated&&d.length&&c.props!==!0&&(c.props=n.mergeEvaluated.props(o,(0,n.toHash)(d),c.props));const f=d.filter(g=>!(0,n.alwaysValidSchema)(c,a[g]));if(f.length===0)return;const h=o.name("valid");for(const g of f)p(g)?m(g):(o.if((0,t.propertyInData)(o,u,g,c.opts.ownProperties)),m(g),c.allErrors||o.else().var(h,!0),o.endIf()),s.it.definedProperties.add(g),s.ok(h);function p(g){return c.opts.useDefaults&&!c.compositeRule&&a[g].default!==void 0}function m(g){s.subschema({keyword:"properties",schemaProp:g,dataProp:g},h)}}};return ZI.default=i,ZI}var eR={},xfe;function i9t(){if(xfe)return eR;xfe=1,Object.defineProperty(eR,"__esModule",{value:!0});const e=Td(),t=Nn(),n=cr(),r=cr(),i={keyword:"patternProperties",type:"object",schemaType:"object",code(s){const{gen:o,schema:a,data:l,parentSchema:u,it:c}=s,{opts:d}=c,f=(0,e.allSchemaProperties)(a),h=f.filter(E=>(0,n.alwaysValidSchema)(c,a[E]));if(f.length===0||h.length===f.length&&(!c.opts.unevaluated||c.props===!0))return;const p=d.strictSchema&&!d.allowMatchingProperties&&u.properties,m=o.name("valid");c.props!==!0&&!(c.props instanceof t.Name)&&(c.props=(0,r.evaluatedPropsToName)(o,c.props));const{props:g}=c;b();function b(){for(const E of f)p&&v(E),c.allErrors?x(E):(o.var(m,!0),x(E),o.if(m))}function v(E){for(const _ in p)new RegExp(E).test(_)&&(0,n.checkStrictMode)(c,`property ${_} matches pattern ${E} (use allowMatchingProperties)`)}function x(E){o.forIn("key",l,_=>{o.if((0,t._)`${(0,e.usePattern)(s,E)}.test(${_})`,()=>{const C=h.includes(E);C||s.subschema({keyword:"patternProperties",schemaProp:E,dataProp:_,dataPropType:r.Type.Str},m),c.opts.unevaluated&&g!==!0?o.assign((0,t._)`${g}[${_}]`,!0):!C&&!c.allErrors&&o.if((0,t.not)(m),()=>o.break())})})}}};return eR.default=i,eR}var tR={},Efe;function s9t(){if(Efe)return tR;Efe=1,Object.defineProperty(tR,"__esModule",{value:!0});const e=cr(),t={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(n){const{gen:r,schema:i,it:s}=n;if((0,e.alwaysValidSchema)(s,i)){n.fail();return}const o=r.name("valid");n.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},o),n.failResult(o,()=>n.reset(),()=>n.error())},error:{message:"must NOT be valid"}};return tR.default=t,tR}var nR={},_fe;function o9t(){if(_fe)return nR;_fe=1,Object.defineProperty(nR,"__esModule",{value:!0});const t={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:Td().validateUnion,error:{message:"must match a schema in anyOf"}};return nR.default=t,nR}var rR={},Tfe;function a9t(){if(Tfe)return rR;Tfe=1,Object.defineProperty(rR,"__esModule",{value:!0});const e=Nn(),t=cr(),r={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:{message:"must match exactly one schema in oneOf",params:({params:i})=>(0,e._)`{passingSchemas: ${i.passing}}`},code(i){const{gen:s,schema:o,parentSchema:a,it:l}=i;if(!Array.isArray(o))throw new Error("ajv implementation error");if(l.opts.discriminator&&a.discriminator)return;const u=o,c=s.let("valid",!1),d=s.let("passing",null),f=s.name("_valid");i.setParams({passing:d}),s.block(h),i.result(c,()=>i.reset(),()=>i.error(!0));function h(){u.forEach((p,m)=>{let g;(0,t.alwaysValidSchema)(l,p)?s.var(f,!0):g=i.subschema({keyword:"oneOf",schemaProp:m,compositeRule:!0},f),m>0&&s.if((0,e._)`${f} && ${c}`).assign(c,!1).assign(d,(0,e._)`[${d}, ${m}]`).else(),s.if(f,()=>{s.assign(c,!0),s.assign(d,m),g&&i.mergeEvaluated(g,e.Name)})})}}};return rR.default=r,rR}var iR={},Cfe;function l9t(){if(Cfe)return iR;Cfe=1,Object.defineProperty(iR,"__esModule",{value:!0});const e=cr(),t={keyword:"allOf",schemaType:"array",code(n){const{gen:r,schema:i,it:s}=n;if(!Array.isArray(i))throw new Error("ajv implementation error");const o=r.name("valid");i.forEach((a,l)=>{if((0,e.alwaysValidSchema)(s,a))return;const u=n.subschema({keyword:"allOf",schemaProp:l},o);n.ok(o),n.mergeEvaluated(u)})}};return iR.default=t,iR}var sR={},Sfe;function u9t(){if(Sfe)return sR;Sfe=1,Object.defineProperty(sR,"__esModule",{value:!0});const e=Nn(),t=cr(),r={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:{message:({params:s})=>(0,e.str)`must match "${s.ifClause}" schema`,params:({params:s})=>(0,e._)`{failingKeyword: ${s.ifClause}}`},code(s){const{gen:o,parentSchema:a,it:l}=s;a.then===void 0&&a.else===void 0&&(0,t.checkStrictMode)(l,'"if" without "then" and "else" is ignored');const u=i(l,"then"),c=i(l,"else");if(!u&&!c)return;const d=o.let("valid",!0),f=o.name("_valid");if(h(),s.reset(),u&&c){const m=o.let("ifClause");s.setParams({ifClause:m}),o.if(f,p("then",m),p("else",m))}else u?o.if(f,p("then")):o.if((0,e.not)(f),p("else"));s.pass(d,()=>s.error(!0));function h(){const m=s.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},f);s.mergeEvaluated(m)}function p(m,g){return()=>{const b=s.subschema({keyword:m},f);o.assign(d,f),s.mergeValidEvaluated(b,d),g?o.assign(g,(0,e._)`${m}`):s.setParams({ifClause:m})}}}};function i(s,o){const a=s.schema[o];return a!==void 0&&!(0,t.alwaysValidSchema)(s,a)}return sR.default=r,sR}var oR={},Afe;function c9t(){if(Afe)return oR;Afe=1,Object.defineProperty(oR,"__esModule",{value:!0});const e=cr(),t={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:n,parentSchema:r,it:i}){r.if===void 0&&(0,e.checkStrictMode)(i,`"${n}" without "if" is ignored`)}};return oR.default=t,oR}var kfe;function d9t(){if(kfe)return GI;kfe=1,Object.defineProperty(GI,"__esModule",{value:!0});const e=G3e(),t=JFt(),n=Y3e(),r=ZFt(),i=e9t(),s=t9t(),o=n9t(),a=K3e(),l=r9t(),u=i9t(),c=s9t(),d=o9t(),f=a9t(),h=l9t(),p=u9t(),m=c9t();function g(b=!1){const v=[c.default,d.default,f.default,h.default,p.default,m.default,o.default,a.default,s.default,l.default,u.default];return b?v.push(t.default,r.default):v.push(e.default,n.default),v.push(i.default),v}return GI.default=g,GI}var aR={},lR={},Ife;function f9t(){if(Ife)return lR;Ife=1,Object.defineProperty(lR,"__esModule",{value:!0});const e=Nn(),n={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:{message:({schemaCode:r})=>(0,e.str)`must match format "${r}"`,params:({schemaCode:r})=>(0,e._)`{format: ${r}}`},code(r,i){const{gen:s,data:o,$data:a,schema:l,schemaCode:u,it:c}=r,{opts:d,errSchemaPath:f,schemaEnv:h,self:p}=c;if(!d.validateFormats)return;a?m():g();function m(){const b=s.scopeValue("formats",{ref:p.formats,code:d.code.formats}),v=s.const("fDef",(0,e._)`${b}[${u}]`),x=s.let("fType"),E=s.let("format");s.if((0,e._)`typeof ${v} == "object" && !(${v} instanceof RegExp)`,()=>s.assign(x,(0,e._)`${v}.type || "string"`).assign(E,(0,e._)`${v}.validate`),()=>s.assign(x,(0,e._)`"string"`).assign(E,v)),r.fail$data((0,e.or)(_(),C()));function _(){return d.strictSchema===!1?e.nil:(0,e._)`${u} && !${E}`}function C(){const S=h.$async?(0,e._)`(${v}.async ? await ${E}(${o}) : ${E}(${o}))`:(0,e._)`${E}(${o})`,k=(0,e._)`(typeof ${E} == "function" ? ${S} : ${E}.test(${o}))`;return(0,e._)`${E} && ${E} !== true && ${x} === ${i} && !${k}`}}function g(){const b=p.formats[l];if(!b){_();return}if(b===!0)return;const[v,x,E]=C(b);v===i&&r.pass(S());function _(){if(d.strictSchema===!1){p.logger.warn(k());return}throw new Error(k());function k(){return`unknown format "${l}" ignored in schema at path "${f}"`}}function C(k){const R=k instanceof RegExp?(0,e.regexpCode)(k):d.code.formats?(0,e._)`${d.code.formats}${(0,e.getProperty)(l)}`:void 0,O=s.scopeValue("formats",{key:l,ref:k,code:R});return typeof k=="object"&&!(k instanceof RegExp)?[k.type||"string",k.validate,(0,e._)`${O}.validate`]:["string",k,O]}function S(){if(typeof b=="object"&&!(b instanceof RegExp)&&b.async){if(!h.$async)throw new Error("async format in sync schema");return(0,e._)`await ${E}(${o})`}return typeof x=="function"?(0,e._)`${E}(${o})`:(0,e._)`${E}.test(${o})`}}}};return lR.default=n,lR}var Rfe;function h9t(){if(Rfe)return aR;Rfe=1,Object.defineProperty(aR,"__esModule",{value:!0});const t=[f9t().default];return aR.default=t,aR}var Bg={},Dfe;function p9t(){return Dfe||(Dfe=1,Object.defineProperty(Bg,"__esModule",{value:!0}),Bg.contentVocabulary=Bg.metadataVocabulary=void 0,Bg.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],Bg.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]),Bg}var Pfe;function m9t(){if(Pfe)return DI;Pfe=1,Object.defineProperty(DI,"__esModule",{value:!0});const e=jFt(),t=QFt(),n=d9t(),r=h9t(),i=p9t(),s=[e.default,t.default,(0,n.default)(),r.default,i.metadataVocabulary,i.contentVocabulary];return DI.default=s,DI}var uR={},U_={},Nfe;function g9t(){if(Nfe)return U_;Nfe=1,Object.defineProperty(U_,"__esModule",{value:!0}),U_.DiscrError=void 0;var e;return function(t){t.Tag="tag",t.Mapping="mapping"}(e||(U_.DiscrError=e={})),U_}var Ofe;function y9t(){if(Ofe)return uR;Ofe=1,Object.defineProperty(uR,"__esModule",{value:!0});const e=Nn(),t=g9t(),n=EQ(),r=B6(),i=cr(),o={keyword:"discriminator",type:"object",schemaType:"object",error:{message:({params:{discrError:a,tagName:l}})=>a===t.DiscrError.Tag?`tag "${l}" must be string`:`value of tag "${l}" must be in oneOf`,params:({params:{discrError:a,tag:l,tagName:u}})=>(0,e._)`{error: ${a}, tag: ${u}, tagValue: ${l}}`},code(a){const{gen:l,data:u,schema:c,parentSchema:d,it:f}=a,{oneOf:h}=d;if(!f.opts.discriminator)throw new Error("discriminator: requires discriminator option");const p=c.propertyName;if(typeof p!="string")throw new Error("discriminator: requires propertyName");if(c.mapping)throw new Error("discriminator: mapping is not supported");if(!h)throw new Error("discriminator: requires oneOf keyword");const m=l.let("valid",!1),g=l.const("tag",(0,e._)`${u}${(0,e.getProperty)(p)}`);l.if((0,e._)`typeof ${g} == "string"`,()=>b(),()=>a.error(!1,{discrError:t.DiscrError.Tag,tag:g,tagName:p})),a.ok(m);function b(){const E=x();l.if(!1);for(const _ in E)l.elseIf((0,e._)`${g} === ${_}`),l.assign(m,v(E[_]));l.else(),a.error(!1,{discrError:t.DiscrError.Mapping,tag:g,tagName:p}),l.endIf()}function v(E){const _=l.name("valid"),C=a.subschema({keyword:"oneOf",schemaProp:E},_);return a.mergeEvaluated(C,e.Name),_}function x(){var E;const _={},C=k(d);let S=!0;for(let N=0;N<h.length;N++){let L=h[N];if(L!=null&&L.$ref&&!(0,i.schemaHasRulesButRef)(L,f.self.RULES)){const B=L.$ref;if(L=n.resolveRef.call(f.self,f.schemaEnv.root,f.baseId,B),L instanceof n.SchemaEnv&&(L=L.schema),L===void 0)throw new r.default(f.opts.uriResolver,f.baseId,B)}const $=(E=L==null?void 0:L.properties)===null||E===void 0?void 0:E[p];if(typeof $!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${p}"`);S=S&&(C||k(L)),R($,N)}if(!S)throw new Error(`discriminator: "${p}" must be required`);return _;function k({required:N}){return Array.isArray(N)&&N.includes(p)}function R(N,L){if(N.const)O(N.const,L);else if(N.enum)for(const $ of N.enum)O($,L);else throw new Error(`discriminator: "properties/${p}" must have "const" or "enum"`)}function O(N,L){if(typeof N!="string"||N in _)throw new Error(`discriminator: "${p}" values must be unique strings`);_[N]=L}}}};return uR.default=o,uR}const v9t="http://json-schema.org/draft-07/schema#",b9t="http://json-schema.org/draft-07/schema#",w9t="Core schema meta-schema",x9t={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},E9t=["object","boolean"],_9t={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},T9t={$schema:v9t,$id:b9t,title:w9t,definitions:x9t,type:E9t,properties:_9t,default:!0};var $fe;function C9t(){return $fe||($fe=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;const n=MFt(),r=m9t(),i=y9t(),s=T9t,o=["/properties"],a="http://json-schema.org/draft-07/schema";class l extends n.default{_addVocabularies(){super._addVocabularies(),r.default.forEach(p=>this.addVocabulary(p)),this.opts.discriminator&&this.addKeyword(i.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const p=this.opts.$data?this.$dataMetaSchema(s,o):s;this.addMetaSchema(p,a,!1),this.refs["http://json-schema.org/schema"]=a}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(a)?a:void 0)}}t.Ajv=l,e.exports=t=l,e.exports.Ajv=l,Object.defineProperty(t,"__esModule",{value:!0}),t.default=l;var u=j6();Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return u.KeywordCxt}});var c=Nn();Object.defineProperty(t,"_",{enumerable:!0,get:function(){return c._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return c.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return c.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return c.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return c.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return c.CodeGen}});var d=xQ();Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return d.default}});var f=B6();Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return f.default}})}(SI,SI.exports)),SI.exports}var S9t=C9t();const TQ=vl(S9t),CQ=Symbol.for("yaml.alias"),$z=Symbol.for("yaml.document"),d0=Symbol.for("yaml.map"),X3e=Symbol.for("yaml.pair"),Mf=Symbol.for("yaml.scalar"),EE=Symbol.for("yaml.seq"),Bu=Symbol.for("yaml.node.type"),a1=e=>!!e&&typeof e=="object"&&e[Bu]===CQ,z6=e=>!!e&&typeof e=="object"&&e[Bu]===$z,aA=e=>!!e&&typeof e=="object"&&e[Bu]===d0,ji=e=>!!e&&typeof e=="object"&&e[Bu]===X3e,Hr=e=>!!e&&typeof e=="object"&&e[Bu]===Mf,lA=e=>!!e&&typeof e=="object"&&e[Bu]===EE;function Oi(e){if(e&&typeof e=="object")switch(e[Bu]){case d0:case EE:return!0}return!1}function $i(e){if(e&&typeof e=="object")switch(e[Bu]){case CQ:case d0:case Mf:case EE:return!0}return!1}const Q3e=e=>(Hr(e)||Oi(e))&&!!e.anchor,Zg=Symbol("break visit"),A9t=Symbol("skip children"),uT=Symbol("remove node");function _E(e,t){const n=k9t(t);z6(e)?Fb(null,e.contents,n,Object.freeze([e]))===uT&&(e.contents=null):Fb(null,e,n,Object.freeze([]))}_E.BREAK=Zg;_E.SKIP=A9t;_E.REMOVE=uT;function Fb(e,t,n,r){const i=I9t(e,t,n,r);if($i(i)||ji(i))return R9t(e,r,i),Fb(e,i,n,r);if(typeof i!="symbol"){if(Oi(t)){r=Object.freeze(r.concat(t));for(let s=0;s<t.items.length;++s){const o=Fb(s,t.items[s],n,r);if(typeof o=="number")s=o-1;else{if(o===Zg)return Zg;o===uT&&(t.items.splice(s,1),s-=1)}}}else if(ji(t)){r=Object.freeze(r.concat(t));const s=Fb("key",t.key,n,r);if(s===Zg)return Zg;s===uT&&(t.key=null);const o=Fb("value",t.value,n,r);if(o===Zg)return Zg;o===uT&&(t.value=null)}}return i}function k9t(e){return typeof e=="object"&&(e.Collection||e.Node||e.Value)?Object.assign({Alias:e.Node,Map:e.Node,Scalar:e.Node,Seq:e.Node},e.Value&&{Map:e.Value,Scalar:e.Value,Seq:e.Value},e.Collection&&{Map:e.Collection,Seq:e.Collection},e):e}function I9t(e,t,n,r){var i,s,o,a,l;if(typeof n=="function")return n(e,t,r);if(aA(t))return(i=n.Map)==null?void 0:i.call(n,e,t,r);if(lA(t))return(s=n.Seq)==null?void 0:s.call(n,e,t,r);if(ji(t))return(o=n.Pair)==null?void 0:o.call(n,e,t,r);if(Hr(t))return(a=n.Scalar)==null?void 0:a.call(n,e,t,r);if(a1(t))return(l=n.Alias)==null?void 0:l.call(n,e,t,r)}function R9t(e,t,n){const r=t[t.length-1];if(Oi(r))r.items[e]=n;else if(ji(r))e==="key"?r.key=n:r.value=n;else if(z6(r))r.contents=n;else{const i=a1(r)?"alias":"scalar";throw new Error(`Cannot replace node with ${i} parent`)}}const D9t={"!":"%21",",":"%2C","[":"%5B","]":"%5D","{":"%7B","}":"%7D"},P9t=e=>e.replace(/[!,[\]{}]/g,t=>D9t[t]);class da{constructor(t,n){this.docStart=null,this.docEnd=!1,this.yaml=Object.assign({},da.defaultYaml,t),this.tags=Object.assign({},da.defaultTags,n)}clone(){const t=new da(this.yaml,this.tags);return t.docStart=this.docStart,t}atDocument(){const t=new da(this.yaml,this.tags);switch(this.yaml.version){case"1.1":this.atNextDocument=!0;break;case"1.2":this.atNextDocument=!1,this.yaml={explicit:da.defaultYaml.explicit,version:"1.2"},this.tags=Object.assign({},da.defaultTags);break}return t}add(t,n){this.atNextDocument&&(this.yaml={explicit:da.defaultYaml.explicit,version:"1.1"},this.tags=Object.assign({},da.defaultTags),this.atNextDocument=!1);const r=t.trim().split(/[ \t]+/),i=r.shift();switch(i){case"%TAG":{if(r.length!==2&&(n(0,"%TAG directive should contain exactly two parts"),r.length<2))return!1;const[s,o]=r;return this.tags[s]=o,!0}case"%YAML":{if(this.yaml.explicit=!0,r.length!==1)return n(0,"%YAML directive should contain exactly one part"),!1;const[s]=r;if(s==="1.1"||s==="1.2")return this.yaml.version=s,!0;{const o=/^\d+\.\d+$/.test(s);return n(6,`Unsupported YAML version ${s}`,o),!1}}default:return n(0,`Unknown directive ${i}`,!0),!1}}tagName(t,n){if(t==="!")return"!";if(t[0]!=="!")return n(`Not a valid tag: ${t}`),null;if(t[1]==="<"){const o=t.slice(2,-1);return o==="!"||o==="!!"?(n(`Verbatim tags aren't resolved, so ${t} is invalid.`),null):(t[t.length-1]!==">"&&n("Verbatim tags must end with a >"),o)}const[,r,i]=t.match(/^(.*!)([^!]*)$/s);i||n(`The ${t} tag has no suffix`);const s=this.tags[r];if(s)try{return s+decodeURIComponent(i)}catch(o){return n(String(o)),null}return r==="!"?t:(n(`Could not resolve tag: ${t}`),null)}tagString(t){for(const[n,r]of Object.entries(this.tags))if(t.startsWith(r))return n+P9t(t.substring(r.length));return t[0]==="!"?t:`!<${t}>`}toString(t){const n=this.yaml.explicit?[`%YAML ${this.yaml.version||"1.2"}`]:[],r=Object.entries(this.tags);let i;if(t&&r.length>0&&$i(t.contents)){const s={};_E(t.contents,(o,a)=>{$i(a)&&a.tag&&(s[a.tag]=!0)}),i=Object.keys(s)}else i=[];for(const[s,o]of r)s==="!!"&&o==="tag:yaml.org,2002:"||(!t||i.some(a=>a.startsWith(o)))&&n.push(`%TAG ${s} ${o}`);return n.join(`
`)}}da.defaultYaml={explicit:!1,version:"1.2"};da.defaultTags={"!!":"tag:yaml.org,2002:"};function J3e(e){if(/[\x00-\x19\s,[\]{}]/.test(e)){const n=`Anchor must not contain whitespace or control characters: ${JSON.stringify(e)}`;throw new Error(n)}return!0}function Z3e(e){const t=new Set;return _E(e,{Value(n,r){r.anchor&&t.add(r.anchor)}}),t}function eDe(e,t){for(let n=1;;++n){const r=`${e}${n}`;if(!t.has(r))return r}}function N9t(e,t){const n=[],r=new Map;let i=null;return{onAnchor:s=>{n.push(s),i??(i=Z3e(e));const o=eDe(t,i);return i.add(o),o},setAnchors:()=>{for(const s of n){const o=r.get(s);if(typeof o=="object"&&o.anchor&&(Hr(o.node)||Oi(o.node)))o.node.anchor=o.anchor;else{const a=new Error("Failed to resolve repeated object (this should not happen)");throw a.source=s,a}}},sourceObjects:r}}function jb(e,t,n,r){if(r&&typeof r=="object")if(Array.isArray(r))for(let i=0,s=r.length;i<s;++i){const o=r[i],a=jb(e,r,String(i),o);a===void 0?delete r[i]:a!==o&&(r[i]=a)}else if(r instanceof Map)for(const i of Array.from(r.keys())){const s=r.get(i),o=jb(e,r,i,s);o===void 0?r.delete(i):o!==s&&r.set(i,o)}else if(r instanceof Set)for(const i of Array.from(r)){const s=jb(e,r,i,i);s===void 0?r.delete(i):s!==i&&(r.delete(i),r.add(s))}else for(const[i,s]of Object.entries(r)){const o=jb(e,r,i,s);o===void 0?delete r[i]:o!==s&&(r[i]=o)}return e.call(t,n,r)}function Pu(e,t,n){if(Array.isArray(e))return e.map((r,i)=>Pu(r,String(i),n));if(e&&typeof e.toJSON=="function"){if(!n||!Q3e(e))return e.toJSON(t,n);const r={aliasCount:0,count:1,res:void 0};n.anchors.set(e,r),n.onCreate=s=>{r.res=s,delete n.onCreate};const i=e.toJSON(t,n);return n.onCreate&&n.onCreate(i),i}return typeof e=="bigint"&&!(n!=null&&n.keep)?Number(e):e}class SQ{constructor(t){Object.defineProperty(this,Bu,{value:t})}clone(){const t=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return this.range&&(t.range=this.range.slice()),t}toJS(t,{mapAsMap:n,maxAliasCount:r,onAnchor:i,reviver:s}={}){if(!z6(t))throw new TypeError("A document argument is required");const o={anchors:new Map,doc:t,keep:!0,mapAsMap:n===!0,mapKeyWarned:!1,maxAliasCount:typeof r=="number"?r:100},a=Pu(this,"",o);if(typeof i=="function")for(const{count:l,res:u}of o.anchors.values())i(u,l);return typeof s=="function"?jb(s,{"":a},"",a):a}}class AQ extends SQ{constructor(t){super(CQ),this.source=t,Object.defineProperty(this,"tag",{set(){throw new Error("Alias nodes cannot have tags")}})}resolve(t,n){let r;n!=null&&n.aliasResolveCache?r=n.aliasResolveCache:(r=[],_E(t,{Node:(s,o)=>{(a1(o)||Q3e(o))&&r.push(o)}}),n&&(n.aliasResolveCache=r));let i;for(const s of r){if(s===this)break;s.anchor===this.source&&(i=s)}return i}toJSON(t,n){if(!n)return{source:this.source};const{anchors:r,doc:i,maxAliasCount:s}=n,o=this.resolve(i,n);if(!o){const l=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new ReferenceError(l)}let a=r.get(o);if(a||(Pu(o,null,n),a=r.get(o)),!a||a.res===void 0){const l="This should not happen: Alias anchor was not resolved?";throw new ReferenceError(l)}if(s>=0&&(a.count+=1,a.aliasCount===0&&(a.aliasCount=iD(i,o,r)),a.count*a.aliasCount>s)){const l="Excessive alias count indicates a resource exhaustion attack";throw new ReferenceError(l)}return a.res}toString(t,n,r){const i=`*${this.source}`;if(t){if(J3e(this.source),t.options.verifyAliasOrder&&!t.anchors.has(this.source)){const s=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new Error(s)}if(t.implicitKey)return`${i} `}return i}}function iD(e,t,n){if(a1(t)){const r=t.resolve(e),i=n&&r&&n.get(r);return i?i.count*i.aliasCount:0}else if(Oi(t)){let r=0;for(const i of t.items){const s=iD(e,i,n);s>r&&(r=s)}return r}else if(ji(t)){const r=iD(e,t.key,n),i=iD(e,t.value,n);return Math.max(r,i)}return 1}const tDe=e=>!e||typeof e!="function"&&typeof e!="object";class mn extends SQ{constructor(t){super(Mf),this.value=t}toJSON(t,n){return n!=null&&n.keep?this.value:Pu(this.value,t,n)}toString(){return String(this.value)}}mn.BLOCK_FOLDED="BLOCK_FOLDED";mn.BLOCK_LITERAL="BLOCK_LITERAL";mn.PLAIN="PLAIN";mn.QUOTE_DOUBLE="QUOTE_DOUBLE";mn.QUOTE_SINGLE="QUOTE_SINGLE";const O9t="tag:yaml.org,2002:";function $9t(e,t,n){if(t){const r=n.filter(s=>s.tag===t),i=r.find(s=>!s.format)??r[0];if(!i)throw new Error(`Tag ${t} not found`);return i}return n.find(r=>{var i;return((i=r.identify)==null?void 0:i.call(r,e))&&!r.format})}function TC(e,t,n){var d,f,h;if(z6(e)&&(e=e.contents),$i(e))return e;if(ji(e)){const p=(f=(d=n.schema[d0]).createNode)==null?void 0:f.call(d,n.schema,null,n);return p.items.push(e),p}(e instanceof String||e instanceof Number||e instanceof Boolean||typeof BigInt<"u"&&e instanceof BigInt)&&(e=e.valueOf());const{aliasDuplicateObjects:r,onAnchor:i,onTagObj:s,schema:o,sourceObjects:a}=n;let l;if(r&&e&&typeof e=="object"){if(l=a.get(e),l)return l.anchor??(l.anchor=i(e)),new AQ(l.anchor);l={anchor:null,node:null},a.set(e,l)}t!=null&&t.startsWith("!!")&&(t=O9t+t.slice(2));let u=$9t(e,t,o.tags);if(!u){if(e&&typeof e.toJSON=="function"&&(e=e.toJSON()),!e||typeof e!="object"){const p=new mn(e);return l&&(l.node=p),p}u=e instanceof Map?o[d0]:Symbol.iterator in Object(e)?o[EE]:o[d0]}s&&(s(u),delete n.onTagObj);const c=u!=null&&u.createNode?u.createNode(n.schema,e,n):typeof((h=u==null?void 0:u.nodeClass)==null?void 0:h.from)=="function"?u.nodeClass.from(n.schema,e,n):new mn(e);return t?c.tag=t:u.default||(c.tag=u.tag),l&&(l.node=c),c}function ON(e,t,n){let r=n;for(let i=t.length-1;i>=0;--i){const s=t[i];if(typeof s=="number"&&Number.isInteger(s)&&s>=0){const o=[];o[s]=r,r=o}else r=new Map([[s,r]])}return TC(r,void 0,{aliasDuplicateObjects:!1,keepUndefined:!1,onAnchor:()=>{throw new Error("This should not happen, please report a bug.")},schema:e,sourceObjects:new Map})}const I2=e=>e==null||typeof e=="object"&&!!e[Symbol.iterator]().next().done;class nDe extends SQ{constructor(t,n){super(t),Object.defineProperty(this,"schema",{value:n,configurable:!0,enumerable:!1,writable:!0})}clone(t){const n=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return t&&(n.schema=t),n.items=n.items.map(r=>$i(r)||ji(r)?r.clone(t):r),this.range&&(n.range=this.range.slice()),n}addIn(t,n){if(I2(t))this.add(n);else{const[r,...i]=t,s=this.get(r,!0);if(Oi(s))s.addIn(i,n);else if(s===void 0&&this.schema)this.set(r,ON(this.schema,i,n));else throw new Error(`Expected YAML collection at ${r}. Remaining path: ${i}`)}}deleteIn(t){const[n,...r]=t;if(r.length===0)return this.delete(n);const i=this.get(n,!0);if(Oi(i))return i.deleteIn(r);throw new Error(`Expected YAML collection at ${n}. Remaining path: ${r}`)}getIn(t,n){const[r,...i]=t,s=this.get(r,!0);return i.length===0?!n&&Hr(s)?s.value:s:Oi(s)?s.getIn(i,n):void 0}hasAllNullValues(t){return this.items.every(n=>{if(!ji(n))return!1;const r=n.value;return r==null||t&&Hr(r)&&r.value==null&&!r.commentBefore&&!r.comment&&!r.tag})}hasIn(t){const[n,...r]=t;if(r.length===0)return this.has(n);const i=this.get(n,!0);return Oi(i)?i.hasIn(r):!1}setIn(t,n){const[r,...i]=t;if(i.length===0)this.set(r,n);else{const s=this.get(r,!0);if(Oi(s))s.setIn(i,n);else if(s===void 0&&this.schema)this.set(r,ON(this.schema,i,n));else throw new Error(`Expected YAML collection at ${r}. Remaining path: ${i}`)}}}const M9t=e=>e.replace(/^(?!$)(?: $)?/gm,"#");function Qh(e,t){return/^\n+$/.test(e)?e.substring(1):t?e.replace(/^(?! *$)/gm,t):e}const Ey=(e,t,n)=>e.endsWith(`
`)?Qh(n,t):n.includes(`
`)?`
`+Qh(n,t):(e.endsWith(" ")?"":" ")+n,rDe="flow",Mz="block",sD="quoted";function U6(e,t,n="flow",{indentAtStart:r,lineWidth:i=80,minContentWidth:s=20,onFold:o,onOverflow:a}={}){if(!i||i<0)return e;i<s&&(s=0);const l=Math.max(1+s,1+i-t.length);if(e.length<=l)return e;const u=[],c={};let d=i-t.length;typeof r=="number"&&(r>i-Math.max(2,s)?u.push(0):d=i-r);let f,h,p=!1,m=-1,g=-1,b=-1;n===Mz&&(m=Mfe(e,m,t.length),m!==-1&&(d=m+l));for(let x;x=e[m+=1];){if(n===sD&&x==="\\"){switch(g=m,e[m+1]){case"x":m+=3;break;case"u":m+=5;break;case"U":m+=9;break;default:m+=1}b=m}if(x===`
`)n===Mz&&(m=Mfe(e,m,t.length)),d=m+t.length+l,f=void 0;else{if(x===" "&&h&&h!==" "&&h!==`
`&&h!=="	"){const E=e[m+1];E&&E!==" "&&E!==`
`&&E!=="	"&&(f=m)}if(m>=d)if(f)u.push(f),d=f+l,f=void 0;else if(n===sD){for(;h===" "||h==="	";)h=x,x=e[m+=1],p=!0;const E=m>b+1?m-2:g-1;if(c[E])return e;u.push(E),c[E]=!0,d=E+l,f=void 0}else p=!0}h=x}if(p&&a&&a(),u.length===0)return e;o&&o();let v=e.slice(0,u[0]);for(let x=0;x<u.length;++x){const E=u[x],_=u[x+1]||e.length;E===0?v=`
${t}${e.slice(0,_)}`:(n===sD&&c[E]&&(v+=`${e[E]}\\`),v+=`
${t}${e.slice(E+1,_)}`)}return v}function Mfe(e,t,n){let r=t,i=t+1,s=e[i];for(;s===" "||s==="	";)if(t<i+n)s=e[++t];else{do s=e[++t];while(s&&s!==`
`);r=t,i=t+1,s=e[i]}return r}const q6=(e,t)=>({indentAtStart:t?e.indent.length:e.indentAtStart,lineWidth:e.options.lineWidth,minContentWidth:e.options.minContentWidth}),H6=e=>/^(%|---|\.\.\.)/m.test(e);function L9t(e,t,n){if(!t||t<0)return!1;const r=t-n,i=e.length;if(i<=r)return!1;for(let s=0,o=0;s<i;++s)if(e[s]===`
`){if(s-o>r)return!0;if(o=s+1,i-o<=r)return!1}return!0}function cT(e,t){const n=JSON.stringify(e);if(t.options.doubleQuotedAsJSON)return n;const{implicitKey:r}=t,i=t.options.doubleQuotedMinMultiLineLength,s=t.indent||(H6(e)?"  ":"");let o="",a=0;for(let l=0,u=n[l];u;u=n[++l])if(u===" "&&n[l+1]==="\\"&&n[l+2]==="n"&&(o+=n.slice(a,l)+"\\ ",l+=1,a=l,u="\\"),u==="\\")switch(n[l+1]){case"u":{o+=n.slice(a,l);const c=n.substr(l+2,4);switch(c){case"0000":o+="\\0";break;case"0007":o+="\\a";break;case"000b":o+="\\v";break;case"001b":o+="\\e";break;case"0085":o+="\\N";break;case"00a0":o+="\\_";break;case"2028":o+="\\L";break;case"2029":o+="\\P";break;default:c.substr(0,2)==="00"?o+="\\x"+c.substr(2):o+=n.substr(l,6)}l+=5,a=l+1}break;case"n":if(r||n[l+2]==='"'||n.length<i)l+=1;else{for(o+=n.slice(a,l)+`

`;n[l+2]==="\\"&&n[l+3]==="n"&&n[l+4]!=='"';)o+=`
`,l+=2;o+=s,n[l+2]===" "&&(o+="\\"),l+=1,a=l+1}break;default:l+=1}return o=a?o+n.slice(a):n,r?o:U6(o,s,sD,q6(t,!1))}function Lz(e,t){if(t.options.singleQuote===!1||t.implicitKey&&e.includes(`
`)||/[ \t]\n|\n[ \t]/.test(e))return cT(e,t);const n=t.indent||(H6(e)?"  ":""),r="'"+e.replace(/'/g,"''").replace(/\n+/g,`$&
${n}`)+"'";return t.implicitKey?r:U6(r,n,rDe,q6(t,!1))}function Bb(e,t){const{singleQuote:n}=t.options;let r;if(n===!1)r=cT;else{const i=e.includes('"'),s=e.includes("'");i&&!s?r=Lz:s&&!i?r=cT:r=n?Lz:cT}return r(e,t)}let Fz;try{Fz=new RegExp(`(^|(?<!
))
+(?!
|$)`,"g")}catch{Fz=/\n+(?!\n|$)/g}function oD({comment:e,type:t,value:n},r,i,s){const{blockQuote:o,commentString:a,lineWidth:l}=r.options;if(!o||/\n[\t ]+$/.test(n)||/^\s*$/.test(n))return Bb(n,r);const u=r.indent||(r.forceBlockIndent||H6(n)?"  ":""),c=o==="literal"?!0:o==="folded"||t===mn.BLOCK_FOLDED?!1:t===mn.BLOCK_LITERAL?!0:!L9t(n,l,u.length);if(!n)return c?`|
`:`>
`;let d,f;for(f=n.length;f>0;--f){const _=n[f-1];if(_!==`
`&&_!=="	"&&_!==" ")break}let h=n.substring(f);const p=h.indexOf(`
`);p===-1?d="-":n===h||p!==h.length-1?(d="+",s&&s()):d="",h&&(n=n.slice(0,-h.length),h[h.length-1]===`
`&&(h=h.slice(0,-1)),h=h.replace(Fz,`$&${u}`));let m=!1,g,b=-1;for(g=0;g<n.length;++g){const _=n[g];if(_===" ")m=!0;else if(_===`
`)b=g;else break}let v=n.substring(0,b<g?b+1:g);v&&(n=n.substring(v.length),v=v.replace(/\n+/g,`$&${u}`));let E=(m?u?"2":"1":"")+d;if(e&&(E+=" "+a(e.replace(/ ?[\r\n]+/g," ")),i&&i()),!c){const _=n.replace(/\n+/g,`
$&`).replace(/(?:^|\n)([\t ].*)(?:([\n\t ]*)\n(?![\n\t ]))?/g,"$1$2").replace(/\n+/g,`$&${u}`);let C=!1;const S=q6(r,!0);o!=="folded"&&t!==mn.BLOCK_FOLDED&&(S.onOverflow=()=>{C=!0});const k=U6(`${v}${_}${h}`,u,Mz,S);if(!C)return`>${E}
${u}${k}`}return n=n.replace(/\n+/g,`$&${u}`),`|${E}
${u}${v}${n}${h}`}function F9t(e,t,n,r){const{type:i,value:s}=e,{actualString:o,implicitKey:a,indent:l,indentStep:u,inFlow:c}=t;if(a&&s.includes(`
`)||c&&/[[\]{},]/.test(s))return Bb(s,t);if(/^[\n\t ,[\]{}#&*!|>'"%@`]|^[?-]$|^[?-][ \t]|[\n:][ \t]|[ \t]\n|[\n\t ]#|[\n\t :]$/.test(s))return a||c||!s.includes(`
`)?Bb(s,t):oD(e,t,n,r);if(!a&&!c&&i!==mn.PLAIN&&s.includes(`
`))return oD(e,t,n,r);if(H6(s)){if(l==="")return t.forceBlockIndent=!0,oD(e,t,n,r);if(a&&l===u)return Bb(s,t)}const d=s.replace(/\n+/g,`$&
${l}`);if(o){const f=m=>{var g;return m.default&&m.tag!=="tag:yaml.org,2002:str"&&((g=m.test)==null?void 0:g.test(d))},{compat:h,tags:p}=t.doc.schema;if(p.some(f)||h!=null&&h.some(f))return Bb(s,t)}return a?d:U6(d,l,rDe,q6(t,!1))}function kQ(e,t,n,r){const{implicitKey:i,inFlow:s}=t,o=typeof e.value=="string"?e:Object.assign({},e,{value:String(e.value)});let{type:a}=e;a!==mn.QUOTE_DOUBLE&&/[\x00-\x08\x0b-\x1f\x7f-\x9f\u{D800}-\u{DFFF}]/u.test(o.value)&&(a=mn.QUOTE_DOUBLE);const l=c=>{switch(c){case mn.BLOCK_FOLDED:case mn.BLOCK_LITERAL:return i||s?Bb(o.value,t):oD(o,t,n,r);case mn.QUOTE_DOUBLE:return cT(o.value,t);case mn.QUOTE_SINGLE:return Lz(o.value,t);case mn.PLAIN:return F9t(o,t,n,r);default:return null}};let u=l(a);if(u===null){const{defaultKeyType:c,defaultStringType:d}=t.options,f=i&&c||d;if(u=l(f),u===null)throw new Error(`Unsupported default string type ${f}`)}return u}function iDe(e,t){const n=Object.assign({blockQuote:!0,commentString:M9t,defaultKeyType:null,defaultStringType:"PLAIN",directives:null,doubleQuotedAsJSON:!1,doubleQuotedMinMultiLineLength:40,falseStr:"false",flowCollectionPadding:!0,indentSeq:!0,lineWidth:80,minContentWidth:20,nullStr:"null",simpleKeys:!1,singleQuote:null,trueStr:"true",verifyAliasOrder:!0},e.schema.toStringOptions,t);let r;switch(n.collectionStyle){case"block":r=!1;break;case"flow":r=!0;break;default:r=null}return{anchors:new Set,doc:e,flowCollectionPadding:n.flowCollectionPadding?" ":"",indent:"",indentStep:typeof n.indent=="number"?" ".repeat(n.indent):"  ",inFlow:r,options:n}}function j9t(e,t){var i;if(t.tag){const s=e.filter(o=>o.tag===t.tag);if(s.length>0)return s.find(o=>o.format===t.format)??s[0]}let n,r;if(Hr(t)){r=t.value;let s=e.filter(o=>{var a;return(a=o.identify)==null?void 0:a.call(o,r)});if(s.length>1){const o=s.filter(a=>a.test);o.length>0&&(s=o)}n=s.find(o=>o.format===t.format)??s.find(o=>!o.format)}else r=t,n=e.find(s=>s.nodeClass&&r instanceof s.nodeClass);if(!n){const s=((i=r==null?void 0:r.constructor)==null?void 0:i.name)??(r===null?"null":typeof r);throw new Error(`Tag not resolved for ${s} value`)}return n}function B9t(e,t,{anchors:n,doc:r}){if(!r.directives)return"";const i=[],s=(Hr(e)||Oi(e))&&e.anchor;s&&J3e(s)&&(n.add(s),i.push(`&${s}`));const o=e.tag??(t.default?null:t.tag);return o&&i.push(r.directives.tagString(o)),i.join(" ")}function hx(e,t,n,r){var l;if(ji(e))return e.toString(t,n,r);if(a1(e)){if(t.doc.directives)return e.toString(t);if((l=t.resolvedAliases)!=null&&l.has(e))throw new TypeError("Cannot stringify circular structure without alias nodes");t.resolvedAliases?t.resolvedAliases.add(e):t.resolvedAliases=new Set([e]),e=e.resolve(t.doc)}let i;const s=$i(e)?e:t.doc.createNode(e,{onTagObj:u=>i=u});i??(i=j9t(t.doc.schema.tags,s));const o=B9t(s,i,t);o.length>0&&(t.indentAtStart=(t.indentAtStart??0)+o.length+1);const a=typeof i.stringify=="function"?i.stringify(s,t,n,r):Hr(s)?kQ(s,t,n,r):s.toString(t,n,r);return o?Hr(s)||a[0]==="{"||a[0]==="["?`${o} ${a}`:`${o}
${t.indent}${a}`:a}function z9t({key:e,value:t},n,r,i){const{allNullValues:s,doc:o,indent:a,indentStep:l,options:{commentString:u,indentSeq:c,simpleKeys:d}}=n;let f=$i(e)&&e.comment||null;if(d){if(f)throw new Error("With simple keys, key nodes cannot have comments");if(Oi(e)||!$i(e)&&typeof e=="object"){const S="With simple keys, collection cannot be used as a key value";throw new Error(S)}}let h=!d&&(!e||f&&t==null&&!n.inFlow||Oi(e)||(Hr(e)?e.type===mn.BLOCK_FOLDED||e.type===mn.BLOCK_LITERAL:typeof e=="object"));n=Object.assign({},n,{allNullValues:!1,implicitKey:!h&&(d||!s),indent:a+l});let p=!1,m=!1,g=hx(e,n,()=>p=!0,()=>m=!0);if(!h&&!n.inFlow&&g.length>1024){if(d)throw new Error("With simple keys, single line scalar must not span more than 1024 characters");h=!0}if(n.inFlow){if(s||t==null)return p&&r&&r(),g===""?"?":h?`? ${g}`:g}else if(s&&!d||t==null&&h)return g=`? ${g}`,f&&!p?g+=Ey(g,n.indent,u(f)):m&&i&&i(),g;p&&(f=null),h?(f&&(g+=Ey(g,n.indent,u(f))),g=`? ${g}
${a}:`):(g=`${g}:`,f&&(g+=Ey(g,n.indent,u(f))));let b,v,x;$i(t)?(b=!!t.spaceBefore,v=t.commentBefore,x=t.comment):(b=!1,v=null,x=null,t&&typeof t=="object"&&(t=o.createNode(t))),n.implicitKey=!1,!h&&!f&&Hr(t)&&(n.indentAtStart=g.length+1),m=!1,!c&&l.length>=2&&!n.inFlow&&!h&&lA(t)&&!t.flow&&!t.tag&&!t.anchor&&(n.indent=n.indent.substring(2));let E=!1;const _=hx(t,n,()=>E=!0,()=>m=!0);let C=" ";if(f||b||v){if(C=b?`
`:"",v){const S=u(v);C+=`
${Qh(S,n.indent)}`}_===""&&!n.inFlow?C===`
`&&(C=`

`):C+=`
${n.indent}`}else if(!h&&Oi(t)){const S=_[0],k=_.indexOf(`
`),R=k!==-1,O=n.inFlow??t.flow??t.items.length===0;if(R||!O){let N=!1;if(R&&(S==="&"||S==="!")){let L=_.indexOf(" ");S==="&"&&L!==-1&&L<k&&_[L+1]==="!"&&(L=_.indexOf(" ",L+1)),(L===-1||k<L)&&(N=!0)}N||(C=`
${n.indent}`)}}else(_===""||_[0]===`
`)&&(C="");return g+=C+_,n.inFlow?E&&r&&r():x&&!E?g+=Ey(g,n.indent,u(x)):m&&i&&i(),g}function U9t(e,t){(e==="debug"||e==="warn")&&console.warn(t)}const cR="<<",dp={identify:e=>e===cR||typeof e=="symbol"&&e.description===cR,default:"key",tag:"tag:yaml.org,2002:merge",test:/^<<$/,resolve:()=>Object.assign(new mn(Symbol(cR)),{addToJSMap:sDe}),stringify:()=>cR},q9t=(e,t)=>(dp.identify(t)||Hr(t)&&(!t.type||t.type===mn.PLAIN)&&dp.identify(t.value))&&(e==null?void 0:e.doc.schema.tags.some(n=>n.tag===dp.tag&&n.default));function sDe(e,t,n){if(n=e&&a1(n)?n.resolve(e.doc):n,lA(n))for(const r of n.items)QF(e,t,r);else if(Array.isArray(n))for(const r of n)QF(e,t,r);else QF(e,t,n)}function QF(e,t,n){const r=e&&a1(n)?n.resolve(e.doc):n;if(!aA(r))throw new Error("Merge sources must be maps or map aliases");const i=r.toJSON(null,e,Map);for(const[s,o]of i)t instanceof Map?t.has(s)||t.set(s,o):t instanceof Set?t.add(s):Object.prototype.hasOwnProperty.call(t,s)||Object.defineProperty(t,s,{value:o,writable:!0,enumerable:!0,configurable:!0});return t}function oDe(e,t,{key:n,value:r}){if($i(n)&&n.addToJSMap)n.addToJSMap(e,t,r);else if(q9t(e,n))sDe(e,t,r);else{const i=Pu(n,"",e);if(t instanceof Map)t.set(i,Pu(r,i,e));else if(t instanceof Set)t.add(i);else{const s=H9t(n,i,e),o=Pu(r,s,e);s in t?Object.defineProperty(t,s,{value:o,writable:!0,enumerable:!0,configurable:!0}):t[s]=o}}return t}function H9t(e,t,n){if(t===null)return"";if(typeof t!="object")return String(t);if($i(e)&&(n!=null&&n.doc)){const r=iDe(n.doc,{});r.anchors=new Set;for(const s of n.anchors.keys())r.anchors.add(s.anchor);r.inFlow=!0,r.inStringifyKey=!0;const i=e.toString(r);if(!n.mapKeyWarned){let s=JSON.stringify(i);s.length>40&&(s=s.substring(0,36)+'..."'),U9t(n.doc.options.logLevel,`Keys with collection values will be stringified due to JS Object restrictions: ${s}. Set mapAsMap: true to use object keys.`),n.mapKeyWarned=!0}return i}return JSON.stringify(t)}function IQ(e,t,n){const r=TC(e,void 0,n),i=TC(t,void 0,n);return new Ta(r,i)}class Ta{constructor(t,n=null){Object.defineProperty(this,Bu,{value:X3e}),this.key=t,this.value=n}clone(t){let{key:n,value:r}=this;return $i(n)&&(n=n.clone(t)),$i(r)&&(r=r.clone(t)),new Ta(n,r)}toJSON(t,n){const r=n!=null&&n.mapAsMap?new Map:{};return oDe(n,r,this)}toString(t,n,r){return t!=null&&t.doc?z9t(this,t,n,r):JSON.stringify(this)}}function aDe(e,t,n){return(t.inFlow??e.flow?V9t:W9t)(e,t,n)}function W9t({comment:e,items:t},n,{blockItemPrefix:r,flowChars:i,itemIndent:s,onChompKeep:o,onComment:a}){const{indent:l,options:{commentString:u}}=n,c=Object.assign({},n,{indent:s,type:null});let d=!1;const f=[];for(let p=0;p<t.length;++p){const m=t[p];let g=null;if($i(m))!d&&m.spaceBefore&&f.push(""),$N(n,f,m.commentBefore,d),m.comment&&(g=m.comment);else if(ji(m)){const v=$i(m.key)?m.key:null;v&&(!d&&v.spaceBefore&&f.push(""),$N(n,f,v.commentBefore,d))}d=!1;let b=hx(m,c,()=>g=null,()=>d=!0);g&&(b+=Ey(b,s,u(g))),d&&g&&(d=!1),f.push(r+b)}let h;if(f.length===0)h=i.start+i.end;else{h=f[0];for(let p=1;p<f.length;++p){const m=f[p];h+=m?`
${l}${m}`:`
`}}return e?(h+=`
`+Qh(u(e),l),a&&a()):d&&o&&o(),h}function V9t({items:e},t,{flowChars:n,itemIndent:r}){const{indent:i,indentStep:s,flowCollectionPadding:o,options:{commentString:a}}=t;r+=s;const l=Object.assign({},t,{indent:r,inFlow:!0,type:null});let u=!1,c=0;const d=[];for(let p=0;p<e.length;++p){const m=e[p];let g=null;if($i(m))m.spaceBefore&&d.push(""),$N(t,d,m.commentBefore,!1),m.comment&&(g=m.comment);else if(ji(m)){const v=$i(m.key)?m.key:null;v&&(v.spaceBefore&&d.push(""),$N(t,d,v.commentBefore,!1),v.comment&&(u=!0));const x=$i(m.value)?m.value:null;x?(x.comment&&(g=x.comment),x.commentBefore&&(u=!0)):m.value==null&&(v!=null&&v.comment)&&(g=v.comment)}g&&(u=!0);let b=hx(m,l,()=>g=null);p<e.length-1&&(b+=","),g&&(b+=Ey(b,r,a(g))),!u&&(d.length>c||b.includes(`
`))&&(u=!0),d.push(b),c=d.length}const{start:f,end:h}=n;if(d.length===0)return f+h;if(!u){const p=d.reduce((m,g)=>m+g.length+2,2);u=t.options.lineWidth>0&&p>t.options.lineWidth}if(u){let p=f;for(const m of d)p+=m?`
${s}${i}${m}`:`
`;return`${p}
${i}${h}`}else return`${f}${o}${d.join(" ")}${o}${h}`}function $N({indent:e,options:{commentString:t}},n,r,i){if(r&&i&&(r=r.replace(/^\n+/,"")),r){const s=Qh(t(r),e);n.push(s.trimStart())}}function _y(e,t){const n=Hr(t)?t.value:t;for(const r of e)if(ji(r)&&(r.key===t||r.key===n||Hr(r.key)&&r.key.value===n))return r}class Eu extends nDe{static get tagName(){return"tag:yaml.org,2002:map"}constructor(t){super(d0,t),this.items=[]}static from(t,n,r){const{keepUndefined:i,replacer:s}=r,o=new this(t),a=(l,u)=>{if(typeof s=="function")u=s.call(n,l,u);else if(Array.isArray(s)&&!s.includes(l))return;(u!==void 0||i)&&o.items.push(IQ(l,u,r))};if(n instanceof Map)for(const[l,u]of n)a(l,u);else if(n&&typeof n=="object")for(const l of Object.keys(n))a(l,n[l]);return typeof t.sortMapEntries=="function"&&o.items.sort(t.sortMapEntries),o}add(t,n){var o;let r;ji(t)?r=t:!t||typeof t!="object"||!("key"in t)?r=new Ta(t,t==null?void 0:t.value):r=new Ta(t.key,t.value);const i=_y(this.items,r.key),s=(o=this.schema)==null?void 0:o.sortMapEntries;if(i){if(!n)throw new Error(`Key ${r.key} already set`);Hr(i.value)&&tDe(r.value)?i.value.value=r.value:i.value=r.value}else if(s){const a=this.items.findIndex(l=>s(r,l)<0);a===-1?this.items.push(r):this.items.splice(a,0,r)}else this.items.push(r)}delete(t){const n=_y(this.items,t);return n?this.items.splice(this.items.indexOf(n),1).length>0:!1}get(t,n){const r=_y(this.items,t),i=r==null?void 0:r.value;return(!n&&Hr(i)?i.value:i)??void 0}has(t){return!!_y(this.items,t)}set(t,n){this.add(new Ta(t,n),!0)}toJSON(t,n,r){const i=r?new r:n!=null&&n.mapAsMap?new Map:{};n!=null&&n.onCreate&&n.onCreate(i);for(const s of this.items)oDe(n,i,s);return i}toString(t,n,r){if(!t)return JSON.stringify(this);for(const i of this.items)if(!ji(i))throw new Error(`Map items must all be pairs; found ${JSON.stringify(i)} instead`);return!t.allNullValues&&this.hasAllNullValues(!1)&&(t=Object.assign({},t,{allNullValues:!0})),aDe(this,t,{blockItemPrefix:"",flowChars:{start:"{",end:"}"},itemIndent:t.indent||"",onChompKeep:r,onComment:n})}}const TE={collection:"map",default:!0,nodeClass:Eu,tag:"tag:yaml.org,2002:map",resolve(e,t){return aA(e)||t("Expected a mapping for this tag"),e},createNode:(e,t,n)=>Eu.from(e,t,n)};class xv extends nDe{static get tagName(){return"tag:yaml.org,2002:seq"}constructor(t){super(EE,t),this.items=[]}add(t){this.items.push(t)}delete(t){const n=dR(t);return typeof n!="number"?!1:this.items.splice(n,1).length>0}get(t,n){const r=dR(t);if(typeof r!="number")return;const i=this.items[r];return!n&&Hr(i)?i.value:i}has(t){const n=dR(t);return typeof n=="number"&&n<this.items.length}set(t,n){const r=dR(t);if(typeof r!="number")throw new Error(`Expected a valid index, not ${t}.`);const i=this.items[r];Hr(i)&&tDe(n)?i.value=n:this.items[r]=n}toJSON(t,n){const r=[];n!=null&&n.onCreate&&n.onCreate(r);let i=0;for(const s of this.items)r.push(Pu(s,String(i++),n));return r}toString(t,n,r){return t?aDe(this,t,{blockItemPrefix:"- ",flowChars:{start:"[",end:"]"},itemIndent:(t.indent||"")+"  ",onChompKeep:r,onComment:n}):JSON.stringify(this)}static from(t,n,r){const{replacer:i}=r,s=new this(t);if(n&&Symbol.iterator in Object(n)){let o=0;for(let a of n){if(typeof i=="function"){const l=n instanceof Set?a:String(o++);a=i.call(n,l,a)}s.items.push(TC(a,void 0,r))}}return s}}function dR(e){let t=Hr(e)?e.value:e;return t&&typeof t=="string"&&(t=Number(t)),typeof t=="number"&&Number.isInteger(t)&&t>=0?t:null}const CE={collection:"seq",default:!0,nodeClass:xv,tag:"tag:yaml.org,2002:seq",resolve(e,t){return lA(e)||t("Expected a sequence for this tag"),e},createNode:(e,t,n)=>xv.from(e,t,n)},W6={identify:e=>typeof e=="string",default:!0,tag:"tag:yaml.org,2002:str",resolve:e=>e,stringify(e,t,n,r){return t=Object.assign({actualString:!0},t),kQ(e,t,n,r)}},V6={identify:e=>e==null,createNode:()=>new mn(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^(?:~|[Nn]ull|NULL)?$/,resolve:()=>new mn(null),stringify:({source:e},t)=>typeof e=="string"&&V6.test.test(e)?e:t.options.nullStr},RQ={identify:e=>typeof e=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:[Tt]rue|TRUE|[Ff]alse|FALSE)$/,resolve:e=>new mn(e[0]==="t"||e[0]==="T"),stringify({source:e,value:t},n){if(e&&RQ.test.test(e)){const r=e[0]==="t"||e[0]==="T";if(t===r)return e}return t?n.options.trueStr:n.options.falseStr}};function Cd({format:e,minFractionDigits:t,tag:n,value:r}){if(typeof r=="bigint")return String(r);const i=typeof r=="number"?r:Number(r);if(!isFinite(i))return isNaN(i)?".nan":i<0?"-.inf":".inf";let s=JSON.stringify(r);if(!e&&t&&(!n||n==="tag:yaml.org,2002:float")&&/^\d/.test(s)){let o=s.indexOf(".");o<0&&(o=s.length,s+=".");let a=t-(s.length-o-1);for(;a-- >0;)s+="0"}return s}const lDe={identify:e=>typeof e=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF)|\.nan|\.NaN|\.NAN)$/,resolve:e=>e.slice(-3).toLowerCase()==="nan"?NaN:e[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:Cd},uDe={identify:e=>typeof e=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:\.[0-9]+|[0-9]+(?:\.[0-9]*)?)[eE][-+]?[0-9]+$/,resolve:e=>parseFloat(e),stringify(e){const t=Number(e.value);return isFinite(t)?t.toExponential():Cd(e)}},cDe={identify:e=>typeof e=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:\.[0-9]+|[0-9]+\.[0-9]*)$/,resolve(e){const t=new mn(parseFloat(e)),n=e.indexOf(".");return n!==-1&&e[e.length-1]==="0"&&(t.minFractionDigits=e.length-n-1),t},stringify:Cd},G6=e=>typeof e=="bigint"||Number.isInteger(e),DQ=(e,t,n,{intAsBigInt:r})=>r?BigInt(e):parseInt(e.substring(t),n);function dDe(e,t,n){const{value:r}=e;return G6(r)&&r>=0?n+r.toString(t):Cd(e)}const fDe={identify:e=>G6(e)&&e>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^0o[0-7]+$/,resolve:(e,t,n)=>DQ(e,2,8,n),stringify:e=>dDe(e,8,"0o")},hDe={identify:G6,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9]+$/,resolve:(e,t,n)=>DQ(e,0,10,n),stringify:Cd},pDe={identify:e=>G6(e)&&e>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^0x[0-9a-fA-F]+$/,resolve:(e,t,n)=>DQ(e,2,16,n),stringify:e=>dDe(e,16,"0x")},G9t=[TE,CE,W6,V6,RQ,fDe,hDe,pDe,lDe,uDe,cDe];function Lfe(e){return typeof e=="bigint"||Number.isInteger(e)}const fR=({value:e})=>JSON.stringify(e),Y9t=[{identify:e=>typeof e=="string",default:!0,tag:"tag:yaml.org,2002:str",resolve:e=>e,stringify:fR},{identify:e=>e==null,createNode:()=>new mn(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^null$/,resolve:()=>null,stringify:fR},{identify:e=>typeof e=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^true$|^false$/,resolve:e=>e==="true",stringify:fR},{identify:Lfe,default:!0,tag:"tag:yaml.org,2002:int",test:/^-?(?:0|[1-9][0-9]*)$/,resolve:(e,t,{intAsBigInt:n})=>n?BigInt(e):parseInt(e,10),stringify:({value:e})=>Lfe(e)?e.toString():JSON.stringify(e)},{identify:e=>typeof e=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^-?(?:0|[1-9][0-9]*)(?:\.[0-9]*)?(?:[eE][-+]?[0-9]+)?$/,resolve:e=>parseFloat(e),stringify:fR}],K9t={default:!0,tag:"",test:/^/,resolve(e,t){return t(`Unresolved plain scalar ${JSON.stringify(e)}`),e}},X9t=[TE,CE].concat(Y9t,K9t),PQ={identify:e=>e instanceof Uint8Array,default:!1,tag:"tag:yaml.org,2002:binary",resolve(e,t){if(typeof atob=="function"){const n=atob(e.replace(/[\n\r]/g,"")),r=new Uint8Array(n.length);for(let i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}else return t("This environment does not support reading binary tags; either Buffer or atob is required"),e},stringify({comment:e,type:t,value:n},r,i,s){if(!n)return"";const o=n;let a;if(typeof btoa=="function"){let l="";for(let u=0;u<o.length;++u)l+=String.fromCharCode(o[u]);a=btoa(l)}else throw new Error("This environment does not support writing binary tags; either Buffer or btoa is required");if(t??(t=mn.BLOCK_LITERAL),t!==mn.QUOTE_DOUBLE){const l=Math.max(r.options.lineWidth-r.indent.length,r.options.minContentWidth),u=Math.ceil(a.length/l),c=new Array(u);for(let d=0,f=0;d<u;++d,f+=l)c[d]=a.substr(f,l);a=c.join(t===mn.BLOCK_LITERAL?`
`:" ")}return kQ({comment:e,type:t,value:a},r,i,s)}};function mDe(e,t){if(lA(e))for(let n=0;n<e.items.length;++n){let r=e.items[n];if(!ji(r)){if(aA(r)){r.items.length>1&&t("Each pair must have its own sequence indicator");const i=r.items[0]||new Ta(new mn(null));if(r.commentBefore&&(i.key.commentBefore=i.key.commentBefore?`${r.commentBefore}
${i.key.commentBefore}`:r.commentBefore),r.comment){const s=i.value??i.key;s.comment=s.comment?`${r.comment}
${s.comment}`:r.comment}r=i}e.items[n]=ji(r)?r:new Ta(r)}}else t("Expected a sequence for this tag");return e}function gDe(e,t,n){const{replacer:r}=n,i=new xv(e);i.tag="tag:yaml.org,2002:pairs";let s=0;if(t&&Symbol.iterator in Object(t))for(let o of t){typeof r=="function"&&(o=r.call(t,String(s++),o));let a,l;if(Array.isArray(o))if(o.length===2)a=o[0],l=o[1];else throw new TypeError(`Expected [key, value] tuple: ${o}`);else if(o&&o instanceof Object){const u=Object.keys(o);if(u.length===1)a=u[0],l=o[a];else throw new TypeError(`Expected tuple with one key, not ${u.length} keys`)}else a=o;i.items.push(IQ(a,l,n))}return i}const NQ={collection:"seq",default:!1,tag:"tag:yaml.org,2002:pairs",resolve:mDe,createNode:gDe};class mw extends xv{constructor(){super(),this.add=Eu.prototype.add.bind(this),this.delete=Eu.prototype.delete.bind(this),this.get=Eu.prototype.get.bind(this),this.has=Eu.prototype.has.bind(this),this.set=Eu.prototype.set.bind(this),this.tag=mw.tag}toJSON(t,n){if(!n)return super.toJSON(t);const r=new Map;n!=null&&n.onCreate&&n.onCreate(r);for(const i of this.items){let s,o;if(ji(i)?(s=Pu(i.key,"",n),o=Pu(i.value,s,n)):s=Pu(i,"",n),r.has(s))throw new Error("Ordered maps must not include duplicate keys");r.set(s,o)}return r}static from(t,n,r){const i=gDe(t,n,r),s=new this;return s.items=i.items,s}}mw.tag="tag:yaml.org,2002:omap";const OQ={collection:"seq",identify:e=>e instanceof Map,nodeClass:mw,default:!1,tag:"tag:yaml.org,2002:omap",resolve(e,t){const n=mDe(e,t),r=[];for(const{key:i}of n.items)Hr(i)&&(r.includes(i.value)?t(`Ordered maps must not include duplicate keys: ${i.value}`):r.push(i.value));return Object.assign(new mw,n)},createNode:(e,t,n)=>mw.from(e,t,n)};function yDe({value:e,source:t},n){return t&&(e?vDe:bDe).test.test(t)?t:e?n.options.trueStr:n.options.falseStr}const vDe={identify:e=>e===!0,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:Y|y|[Yy]es|YES|[Tt]rue|TRUE|[Oo]n|ON)$/,resolve:()=>new mn(!0),stringify:yDe},bDe={identify:e=>e===!1,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:N|n|[Nn]o|NO|[Ff]alse|FALSE|[Oo]ff|OFF)$/,resolve:()=>new mn(!1),stringify:yDe},Q9t={identify:e=>typeof e=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF)|\.nan|\.NaN|\.NAN)$/,resolve:e=>e.slice(-3).toLowerCase()==="nan"?NaN:e[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:Cd},J9t={identify:e=>typeof e=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:[0-9][0-9_]*)?(?:\.[0-9_]*)?[eE][-+]?[0-9]+$/,resolve:e=>parseFloat(e.replace(/_/g,"")),stringify(e){const t=Number(e.value);return isFinite(t)?t.toExponential():Cd(e)}},Z9t={identify:e=>typeof e=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:[0-9][0-9_]*)?\.[0-9_]*$/,resolve(e){const t=new mn(parseFloat(e.replace(/_/g,""))),n=e.indexOf(".");if(n!==-1){const r=e.substring(n+1).replace(/_/g,"");r[r.length-1]==="0"&&(t.minFractionDigits=r.length)}return t},stringify:Cd},uA=e=>typeof e=="bigint"||Number.isInteger(e);function Y6(e,t,n,{intAsBigInt:r}){const i=e[0];if((i==="-"||i==="+")&&(t+=1),e=e.substring(t).replace(/_/g,""),r){switch(n){case 2:e=`0b${e}`;break;case 8:e=`0o${e}`;break;case 16:e=`0x${e}`;break}const o=BigInt(e);return i==="-"?BigInt(-1)*o:o}const s=parseInt(e,n);return i==="-"?-1*s:s}function $Q(e,t,n){const{value:r}=e;if(uA(r)){const i=r.toString(t);return r<0?"-"+n+i.substr(1):n+i}return Cd(e)}const ejt={identify:uA,default:!0,tag:"tag:yaml.org,2002:int",format:"BIN",test:/^[-+]?0b[0-1_]+$/,resolve:(e,t,n)=>Y6(e,2,2,n),stringify:e=>$Q(e,2,"0b")},tjt={identify:uA,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^[-+]?0[0-7_]+$/,resolve:(e,t,n)=>Y6(e,1,8,n),stringify:e=>$Q(e,8,"0")},njt={identify:uA,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9][0-9_]*$/,resolve:(e,t,n)=>Y6(e,0,10,n),stringify:Cd},rjt={identify:uA,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^[-+]?0x[0-9a-fA-F_]+$/,resolve:(e,t,n)=>Y6(e,2,16,n),stringify:e=>$Q(e,16,"0x")};class gw extends Eu{constructor(t){super(t),this.tag=gw.tag}add(t){let n;ji(t)?n=t:t&&typeof t=="object"&&"key"in t&&"value"in t&&t.value===null?n=new Ta(t.key,null):n=new Ta(t,null),_y(this.items,n.key)||this.items.push(n)}get(t,n){const r=_y(this.items,t);return!n&&ji(r)?Hr(r.key)?r.key.value:r.key:r}set(t,n){if(typeof n!="boolean")throw new Error(`Expected boolean value for set(key, value) in a YAML set, not ${typeof n}`);const r=_y(this.items,t);r&&!n?this.items.splice(this.items.indexOf(r),1):!r&&n&&this.items.push(new Ta(t))}toJSON(t,n){return super.toJSON(t,n,Set)}toString(t,n,r){if(!t)return JSON.stringify(this);if(this.hasAllNullValues(!0))return super.toString(Object.assign({},t,{allNullValues:!0}),n,r);throw new Error("Set items must all have null values")}static from(t,n,r){const{replacer:i}=r,s=new this(t);if(n&&Symbol.iterator in Object(n))for(let o of n)typeof i=="function"&&(o=i.call(n,o,o)),s.items.push(IQ(o,null,r));return s}}gw.tag="tag:yaml.org,2002:set";const MQ={collection:"map",identify:e=>e instanceof Set,nodeClass:gw,default:!1,tag:"tag:yaml.org,2002:set",createNode:(e,t,n)=>gw.from(e,t,n),resolve(e,t){if(aA(e)){if(e.hasAllNullValues(!0))return Object.assign(new gw,e);t("Set items must all have null values")}else t("Expected a mapping for this tag");return e}};function LQ(e,t){const n=e[0],r=n==="-"||n==="+"?e.substring(1):e,i=o=>t?BigInt(o):Number(o),s=r.replace(/_/g,"").split(":").reduce((o,a)=>o*i(60)+i(a),i(0));return n==="-"?i(-1)*s:s}function wDe(e){let{value:t}=e,n=o=>o;if(typeof t=="bigint")n=o=>BigInt(o);else if(isNaN(t)||!isFinite(t))return Cd(e);let r="";t<0&&(r="-",t*=n(-1));const i=n(60),s=[t%i];return t<60?s.unshift(0):(t=(t-s[0])/i,s.unshift(t%i),t>=60&&(t=(t-s[0])/i,s.unshift(t))),r+s.map(o=>String(o).padStart(2,"0")).join(":").replace(/000000\d*$/,"")}const xDe={identify:e=>typeof e=="bigint"||Number.isInteger(e),default:!0,tag:"tag:yaml.org,2002:int",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+$/,resolve:(e,t,{intAsBigInt:n})=>LQ(e,n),stringify:wDe},EDe={identify:e=>typeof e=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\.[0-9_]*$/,resolve:e=>LQ(e,!1),stringify:wDe},K6={identify:e=>e instanceof Date,default:!0,tag:"tag:yaml.org,2002:timestamp",test:RegExp("^([0-9]{4})-([0-9]{1,2})-([0-9]{1,2})(?:(?:t|T|[ \\t]+)([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2}(\\.[0-9]+)?)(?:[ \\t]*(Z|[-+][012]?[0-9](?::[0-9]{2})?))?)?$"),resolve(e){const t=e.match(K6.test);if(!t)throw new Error("!!timestamp expects a date, starting with yyyy-mm-dd");const[,n,r,i,s,o,a]=t.map(Number),l=t[7]?Number((t[7]+"00").substr(1,3)):0;let u=Date.UTC(n,r-1,i,s||0,o||0,a||0,l);const c=t[8];if(c&&c!=="Z"){let d=LQ(c,!1);Math.abs(d)<30&&(d*=60),u-=6e4*d}return new Date(u)},stringify:({value:e})=>(e==null?void 0:e.toISOString().replace(/(T00:00:00)?\.000Z$/,""))??""},Ffe=[TE,CE,W6,V6,vDe,bDe,ejt,tjt,njt,rjt,Q9t,J9t,Z9t,PQ,dp,OQ,NQ,MQ,xDe,EDe,K6],jfe=new Map([["core",G9t],["failsafe",[TE,CE,W6]],["json",X9t],["yaml11",Ffe],["yaml-1.1",Ffe]]),Bfe={binary:PQ,bool:RQ,float:cDe,floatExp:uDe,floatNaN:lDe,floatTime:EDe,int:hDe,intHex:pDe,intOct:fDe,intTime:xDe,map:TE,merge:dp,null:V6,omap:OQ,pairs:NQ,seq:CE,set:MQ,timestamp:K6},ijt={"tag:yaml.org,2002:binary":PQ,"tag:yaml.org,2002:merge":dp,"tag:yaml.org,2002:omap":OQ,"tag:yaml.org,2002:pairs":NQ,"tag:yaml.org,2002:set":MQ,"tag:yaml.org,2002:timestamp":K6};function JF(e,t,n){const r=jfe.get(t);if(r&&!e)return n&&!r.includes(dp)?r.concat(dp):r.slice();let i=r;if(!i)if(Array.isArray(e))i=[];else{const s=Array.from(jfe.keys()).filter(o=>o!=="yaml11").map(o=>JSON.stringify(o)).join(", ");throw new Error(`Unknown schema "${t}"; use one of ${s} or define customTags array`)}if(Array.isArray(e))for(const s of e)i=i.concat(s);else typeof e=="function"&&(i=e(i.slice()));return n&&(i=i.concat(dp)),i.reduce((s,o)=>{const a=typeof o=="string"?Bfe[o]:o;if(!a){const l=JSON.stringify(o),u=Object.keys(Bfe).map(c=>JSON.stringify(c)).join(", ");throw new Error(`Unknown custom tag ${l}; use one of ${u}`)}return s.includes(a)||s.push(a),s},[])}const sjt=(e,t)=>e.key<t.key?-1:e.key>t.key?1:0;class FQ{constructor({compat:t,customTags:n,merge:r,resolveKnownTags:i,schema:s,sortMapEntries:o,toStringDefaults:a}){this.compat=Array.isArray(t)?JF(t,"compat"):t?JF(null,t):null,this.name=typeof s=="string"&&s||"core",this.knownTags=i?ijt:{},this.tags=JF(n,this.name,r),this.toStringOptions=a??null,Object.defineProperty(this,d0,{value:TE}),Object.defineProperty(this,Mf,{value:W6}),Object.defineProperty(this,EE,{value:CE}),this.sortMapEntries=typeof o=="function"?o:o===!0?sjt:null}clone(){const t=Object.create(FQ.prototype,Object.getOwnPropertyDescriptors(this));return t.tags=this.tags.slice(),t}}function ojt(e,t){var l;const n=[];let r=t.directives===!0;if(t.directives!==!1&&e.directives){const u=e.directives.toString(e);u?(n.push(u),r=!0):e.directives.docStart&&(r=!0)}r&&n.push("---");const i=iDe(e,t),{commentString:s}=i.options;if(e.commentBefore){n.length!==1&&n.unshift("");const u=s(e.commentBefore);n.unshift(Qh(u,""))}let o=!1,a=null;if(e.contents){if($i(e.contents)){if(e.contents.spaceBefore&&r&&n.push(""),e.contents.commentBefore){const d=s(e.contents.commentBefore);n.push(Qh(d,""))}i.forceBlockIndent=!!e.comment,a=e.contents.comment}const u=a?void 0:()=>o=!0;let c=hx(e.contents,i,()=>a=null,u);a&&(c+=Ey(c,"",s(a))),(c[0]==="|"||c[0]===">")&&n[n.length-1]==="---"?n[n.length-1]=`--- ${c}`:n.push(c)}else n.push(hx(e.contents,i));if((l=e.directives)!=null&&l.docEnd)if(e.comment){const u=s(e.comment);u.includes(`
`)?(n.push("..."),n.push(Qh(u,""))):n.push(`... ${u}`)}else n.push("...");else{let u=e.comment;u&&o&&(u=u.replace(/^\n+/,"")),u&&((!o||a)&&n[n.length-1]!==""&&n.push(""),n.push(Qh(s(u),"")))}return n.join(`
`)+`
`}class X6{constructor(t,n,r){this.commentBefore=null,this.comment=null,this.errors=[],this.warnings=[],Object.defineProperty(this,Bu,{value:$z});let i=null;typeof n=="function"||Array.isArray(n)?i=n:r===void 0&&n&&(r=n,n=void 0);const s=Object.assign({intAsBigInt:!1,keepSourceTokens:!1,logLevel:"warn",prettyErrors:!0,strict:!0,stringKeys:!1,uniqueKeys:!0,version:"1.2"},r);this.options=s;let{version:o}=s;r!=null&&r._directives?(this.directives=r._directives.atDocument(),this.directives.yaml.explicit&&(o=this.directives.yaml.version)):this.directives=new da({version:o}),this.setSchema(o,r),this.contents=t===void 0?null:this.createNode(t,i,r)}clone(){const t=Object.create(X6.prototype,{[Bu]:{value:$z}});return t.commentBefore=this.commentBefore,t.comment=this.comment,t.errors=this.errors.slice(),t.warnings=this.warnings.slice(),t.options=Object.assign({},this.options),this.directives&&(t.directives=this.directives.clone()),t.schema=this.schema.clone(),t.contents=$i(this.contents)?this.contents.clone(t.schema):this.contents,this.range&&(t.range=this.range.slice()),t}add(t){cb(this.contents)&&this.contents.add(t)}addIn(t,n){cb(this.contents)&&this.contents.addIn(t,n)}createAlias(t,n){if(!t.anchor){const r=Z3e(this);t.anchor=!n||r.has(n)?eDe(n||"a",r):n}return new AQ(t.anchor)}createNode(t,n,r){let i;if(typeof n=="function")t=n.call({"":t},"",t),i=n;else if(Array.isArray(n)){const g=v=>typeof v=="number"||v instanceof String||v instanceof Number,b=n.filter(g).map(String);b.length>0&&(n=n.concat(b)),i=n}else r===void 0&&n&&(r=n,n=void 0);const{aliasDuplicateObjects:s,anchorPrefix:o,flow:a,keepUndefined:l,onTagObj:u,tag:c}=r??{},{onAnchor:d,setAnchors:f,sourceObjects:h}=N9t(this,o||"a"),p={aliasDuplicateObjects:s??!0,keepUndefined:l??!1,onAnchor:d,onTagObj:u,replacer:i,schema:this.schema,sourceObjects:h},m=TC(t,c,p);return a&&Oi(m)&&(m.flow=!0),f(),m}createPair(t,n,r={}){const i=this.createNode(t,null,r),s=this.createNode(n,null,r);return new Ta(i,s)}delete(t){return cb(this.contents)?this.contents.delete(t):!1}deleteIn(t){return I2(t)?this.contents==null?!1:(this.contents=null,!0):cb(this.contents)?this.contents.deleteIn(t):!1}get(t,n){return Oi(this.contents)?this.contents.get(t,n):void 0}getIn(t,n){return I2(t)?!n&&Hr(this.contents)?this.contents.value:this.contents:Oi(this.contents)?this.contents.getIn(t,n):void 0}has(t){return Oi(this.contents)?this.contents.has(t):!1}hasIn(t){return I2(t)?this.contents!==void 0:Oi(this.contents)?this.contents.hasIn(t):!1}set(t,n){this.contents==null?this.contents=ON(this.schema,[t],n):cb(this.contents)&&this.contents.set(t,n)}setIn(t,n){I2(t)?this.contents=n:this.contents==null?this.contents=ON(this.schema,Array.from(t),n):cb(this.contents)&&this.contents.setIn(t,n)}setSchema(t,n={}){typeof t=="number"&&(t=String(t));let r;switch(t){case"1.1":this.directives?this.directives.yaml.version="1.1":this.directives=new da({version:"1.1"}),r={resolveKnownTags:!1,schema:"yaml-1.1"};break;case"1.2":case"next":this.directives?this.directives.yaml.version=t:this.directives=new da({version:t}),r={resolveKnownTags:!0,schema:"core"};break;case null:this.directives&&delete this.directives,r=null;break;default:{const i=JSON.stringify(t);throw new Error(`Expected '1.1', '1.2' or null as first argument, but found: ${i}`)}}if(n.schema instanceof Object)this.schema=n.schema;else if(r)this.schema=new FQ(Object.assign(r,n));else throw new Error("With a null YAML version, the { schema: Schema } option is required")}toJS({json:t,jsonArg:n,mapAsMap:r,maxAliasCount:i,onAnchor:s,reviver:o}={}){const a={anchors:new Map,doc:this,keep:!t,mapAsMap:r===!0,mapKeyWarned:!1,maxAliasCount:typeof i=="number"?i:100},l=Pu(this.contents,n??"",a);if(typeof s=="function")for(const{count:u,res:c}of a.anchors.values())s(c,u);return typeof o=="function"?jb(o,{"":l},"",l):l}toJSON(t,n){return this.toJS({json:!0,jsonArg:t,mapAsMap:!1,onAnchor:n})}toString(t={}){if(this.errors.length>0)throw new Error("Document with errors cannot be stringified");if("indent"in t&&(!Number.isInteger(t.indent)||Number(t.indent)<=0)){const n=JSON.stringify(t.indent);throw new Error(`"indent" option must be a positive integer, not ${n}`)}return ojt(this,t)}}function cb(e){if(Oi(e))return!0;throw new Error("Expected a YAML collection as document contents")}class _De extends Error{constructor(t,n,r,i){super(),this.name=t,this.code=r,this.message=i,this.pos=n}}class R2 extends _De{constructor(t,n,r){super("YAMLParseError",t,n,r)}}class ajt extends _De{constructor(t,n,r){super("YAMLWarning",t,n,r)}}const zfe=(e,t)=>n=>{if(n.pos[0]===-1)return;n.linePos=n.pos.map(a=>t.linePos(a));const{line:r,col:i}=n.linePos[0];n.message+=` at line ${r}, column ${i}`;let s=i-1,o=e.substring(t.lineStarts[r-1],t.lineStarts[r]).replace(/[\n\r]+$/,"");if(s>=60&&o.length>80){const a=Math.min(s-39,o.length-79);o=""+o.substring(a),s-=a-1}if(o.length>80&&(o=o.substring(0,79)+""),r>1&&/^ *$/.test(o.substring(0,s))){let a=e.substring(t.lineStarts[r-2],t.lineStarts[r-1]);a.length>80&&(a=a.substring(0,79)+`
`),o=a+o}if(/[^ ]/.test(o)){let a=1;const l=n.linePos[1];l&&l.line===r&&l.col>i&&(a=Math.max(1,Math.min(l.col-i,80-s)));const u=" ".repeat(s)+"^".repeat(a);n.message+=`:

${o}
${u}
`}};function px(e,{flow:t,indicator:n,next:r,offset:i,onError:s,parentIndent:o,startOnNewline:a}){let l=!1,u=a,c=a,d="",f="",h=!1,p=!1,m=null,g=null,b=null,v=null,x=null,E=null,_=null;for(const k of e)switch(p&&(k.type!=="space"&&k.type!=="newline"&&k.type!=="comma"&&s(k.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),p=!1),m&&(u&&k.type!=="comment"&&k.type!=="newline"&&s(m,"TAB_AS_INDENT","Tabs are not allowed as indentation"),m=null),k.type){case"space":!t&&(n!=="doc-start"||(r==null?void 0:r.type)!=="flow-collection")&&k.source.includes("	")&&(m=k),c=!0;break;case"comment":{c||s(k,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");const R=k.source.substring(1)||" ";d?d+=f+R:d=R,f="",u=!1;break}case"newline":u?d?d+=k.source:(!E||n!=="seq-item-ind")&&(l=!0):f+=k.source,u=!0,h=!0,(g||b)&&(v=k),c=!0;break;case"anchor":g&&s(k,"MULTIPLE_ANCHORS","A node can have at most one anchor"),k.source.endsWith(":")&&s(k.offset+k.source.length-1,"BAD_ALIAS","Anchor ending in : is ambiguous",!0),g=k,_??(_=k.offset),u=!1,c=!1,p=!0;break;case"tag":{b&&s(k,"MULTIPLE_TAGS","A node can have at most one tag"),b=k,_??(_=k.offset),u=!1,c=!1,p=!0;break}case n:(g||b)&&s(k,"BAD_PROP_ORDER",`Anchors and tags must be after the ${k.source} indicator`),E&&s(k,"UNEXPECTED_TOKEN",`Unexpected ${k.source} in ${t??"collection"}`),E=k,u=n==="seq-item-ind"||n==="explicit-key-ind",c=!1;break;case"comma":if(t){x&&s(k,"UNEXPECTED_TOKEN",`Unexpected , in ${t}`),x=k,u=!1,c=!1;break}default:s(k,"UNEXPECTED_TOKEN",`Unexpected ${k.type} token`),u=!1,c=!1}const C=e[e.length-1],S=C?C.offset+C.source.length:i;return p&&r&&r.type!=="space"&&r.type!=="newline"&&r.type!=="comma"&&(r.type!=="scalar"||r.source!=="")&&s(r.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),m&&(u&&m.indent<=o||(r==null?void 0:r.type)==="block-map"||(r==null?void 0:r.type)==="block-seq")&&s(m,"TAB_AS_INDENT","Tabs are not allowed as indentation"),{comma:x,found:E,spaceBefore:l,comment:d,hasNewline:h,anchor:g,tag:b,newlineAfterProp:v,end:S,start:_??S}}function CC(e){if(!e)return null;switch(e.type){case"alias":case"scalar":case"double-quoted-scalar":case"single-quoted-scalar":if(e.source.includes(`
`))return!0;if(e.end){for(const t of e.end)if(t.type==="newline")return!0}return!1;case"flow-collection":for(const t of e.items){for(const n of t.start)if(n.type==="newline")return!0;if(t.sep){for(const n of t.sep)if(n.type==="newline")return!0}if(CC(t.key)||CC(t.value))return!0}return!1;default:return!0}}function jz(e,t,n){if((t==null?void 0:t.type)==="flow-collection"){const r=t.end[0];r.indent===e&&(r.source==="]"||r.source==="}")&&CC(t)&&n(r,"BAD_INDENT","Flow end indicator should be more indented than parent",!0)}}function TDe(e,t,n){const{uniqueKeys:r}=e.options;if(r===!1)return!1;const i=typeof r=="function"?r:(s,o)=>s===o||Hr(s)&&Hr(o)&&s.value===o.value;return t.some(s=>i(s.key,n))}const Ufe="All mapping items must start at the same column";function ljt({composeNode:e,composeEmptyNode:t},n,r,i,s){var c;const o=(s==null?void 0:s.nodeClass)??Eu,a=new o(n.schema);n.atRoot&&(n.atRoot=!1);let l=r.offset,u=null;for(const d of r.items){const{start:f,key:h,sep:p,value:m}=d,g=px(f,{indicator:"explicit-key-ind",next:h??(p==null?void 0:p[0]),offset:l,onError:i,parentIndent:r.indent,startOnNewline:!0}),b=!g.found;if(b){if(h&&(h.type==="block-seq"?i(l,"BLOCK_AS_IMPLICIT_KEY","A block sequence may not be used as an implicit map key"):"indent"in h&&h.indent!==r.indent&&i(l,"BAD_INDENT",Ufe)),!g.anchor&&!g.tag&&!p){u=g.end,g.comment&&(a.comment?a.comment+=`
`+g.comment:a.comment=g.comment);continue}(g.newlineAfterProp||CC(h))&&i(h??f[f.length-1],"MULTILINE_IMPLICIT_KEY","Implicit keys need to be on a single line")}else((c=g.found)==null?void 0:c.indent)!==r.indent&&i(l,"BAD_INDENT",Ufe);n.atKey=!0;const v=g.end,x=h?e(n,h,g,i):t(n,v,f,null,g,i);n.schema.compat&&jz(r.indent,h,i),n.atKey=!1,TDe(n,a.items,x)&&i(v,"DUPLICATE_KEY","Map keys must be unique");const E=px(p??[],{indicator:"map-value-ind",next:m,offset:x.range[2],onError:i,parentIndent:r.indent,startOnNewline:!h||h.type==="block-scalar"});if(l=E.end,E.found){b&&((m==null?void 0:m.type)==="block-map"&&!E.hasNewline&&i(l,"BLOCK_AS_IMPLICIT_KEY","Nested mappings are not allowed in compact mappings"),n.options.strict&&g.start<E.found.offset-1024&&i(x.range,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit block mapping key"));const _=m?e(n,m,E,i):t(n,l,p,null,E,i);n.schema.compat&&jz(r.indent,m,i),l=_.range[2];const C=new Ta(x,_);n.options.keepSourceTokens&&(C.srcToken=d),a.items.push(C)}else{b&&i(x.range,"MISSING_CHAR","Implicit map keys need to be followed by map values"),E.comment&&(x.comment?x.comment+=`
`+E.comment:x.comment=E.comment);const _=new Ta(x);n.options.keepSourceTokens&&(_.srcToken=d),a.items.push(_)}}return u&&u<l&&i(u,"IMPOSSIBLE","Map comment with trailing content"),a.range=[r.offset,l,u??l],a}function ujt({composeNode:e,composeEmptyNode:t},n,r,i,s){const o=(s==null?void 0:s.nodeClass)??xv,a=new o(n.schema);n.atRoot&&(n.atRoot=!1),n.atKey&&(n.atKey=!1);let l=r.offset,u=null;for(const{start:c,value:d}of r.items){const f=px(c,{indicator:"seq-item-ind",next:d,offset:l,onError:i,parentIndent:r.indent,startOnNewline:!0});if(!f.found)if(f.anchor||f.tag||d)d&&d.type==="block-seq"?i(f.end,"BAD_INDENT","All sequence items must start at the same column"):i(l,"MISSING_CHAR","Sequence item without - indicator");else{u=f.end,f.comment&&(a.comment=f.comment);continue}const h=d?e(n,d,f,i):t(n,f.end,c,null,f,i);n.schema.compat&&jz(r.indent,d,i),l=h.range[2],a.items.push(h)}return a.range=[r.offset,l,u??l],a}function cA(e,t,n,r){let i="";if(e){let s=!1,o="";for(const a of e){const{source:l,type:u}=a;switch(u){case"space":s=!0;break;case"comment":{n&&!s&&r(a,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");const c=l.substring(1)||" ";i?i+=o+c:i=c,o="";break}case"newline":i&&(o+=l),s=!0;break;default:r(a,"UNEXPECTED_TOKEN",`Unexpected ${u} at node end`)}t+=l.length}}return{comment:i,offset:t}}const ZF="Block collections are not allowed within flow collections",e9=e=>e&&(e.type==="block-map"||e.type==="block-seq");function cjt({composeNode:e,composeEmptyNode:t},n,r,i,s){const o=r.start.source==="{",a=o?"flow map":"flow sequence",l=(s==null?void 0:s.nodeClass)??(o?Eu:xv),u=new l(n.schema);u.flow=!0;const c=n.atRoot;c&&(n.atRoot=!1),n.atKey&&(n.atKey=!1);let d=r.offset+r.start.source.length;for(let g=0;g<r.items.length;++g){const b=r.items[g],{start:v,key:x,sep:E,value:_}=b,C=px(v,{flow:a,indicator:"explicit-key-ind",next:x??(E==null?void 0:E[0]),offset:d,onError:i,parentIndent:r.indent,startOnNewline:!1});if(!C.found){if(!C.anchor&&!C.tag&&!E&&!_){g===0&&C.comma?i(C.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${a}`):g<r.items.length-1&&i(C.start,"UNEXPECTED_TOKEN",`Unexpected empty item in ${a}`),C.comment&&(u.comment?u.comment+=`
`+C.comment:u.comment=C.comment),d=C.end;continue}!o&&n.options.strict&&CC(x)&&i(x,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line")}if(g===0)C.comma&&i(C.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${a}`);else if(C.comma||i(C.start,"MISSING_CHAR",`Missing , between ${a} items`),C.comment){let S="";e:for(const k of v)switch(k.type){case"comma":case"space":break;case"comment":S=k.source.substring(1);break e;default:break e}if(S){let k=u.items[u.items.length-1];ji(k)&&(k=k.value??k.key),k.comment?k.comment+=`
`+S:k.comment=S,C.comment=C.comment.substring(S.length+1)}}if(!o&&!E&&!C.found){const S=_?e(n,_,C,i):t(n,C.end,E,null,C,i);u.items.push(S),d=S.range[2],e9(_)&&i(S.range,"BLOCK_IN_FLOW",ZF)}else{n.atKey=!0;const S=C.end,k=x?e(n,x,C,i):t(n,S,v,null,C,i);e9(x)&&i(k.range,"BLOCK_IN_FLOW",ZF),n.atKey=!1;const R=px(E??[],{flow:a,indicator:"map-value-ind",next:_,offset:k.range[2],onError:i,parentIndent:r.indent,startOnNewline:!1});if(R.found){if(!o&&!C.found&&n.options.strict){if(E)for(const L of E){if(L===R.found)break;if(L.type==="newline"){i(L,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line");break}}C.start<R.found.offset-1024&&i(R.found,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit flow sequence key")}}else _&&("source"in _&&_.source&&_.source[0]===":"?i(_,"MISSING_CHAR",`Missing space after : in ${a}`):i(R.start,"MISSING_CHAR",`Missing , or : between ${a} items`));const O=_?e(n,_,R,i):R.found?t(n,R.end,E,null,R,i):null;O?e9(_)&&i(O.range,"BLOCK_IN_FLOW",ZF):R.comment&&(k.comment?k.comment+=`
`+R.comment:k.comment=R.comment);const N=new Ta(k,O);if(n.options.keepSourceTokens&&(N.srcToken=b),o){const L=u;TDe(n,L.items,k)&&i(S,"DUPLICATE_KEY","Map keys must be unique"),L.items.push(N)}else{const L=new Eu(n.schema);L.flow=!0,L.items.push(N);const $=(O??k).range;L.range=[k.range[0],$[1],$[2]],u.items.push(L)}d=O?O.range[2]:R.end}}const f=o?"}":"]",[h,...p]=r.end;let m=d;if(h&&h.source===f)m=h.offset+h.source.length;else{const g=a[0].toUpperCase()+a.substring(1),b=c?`${g} must end with a ${f}`:`${g} in block collection must be sufficiently indented and end with a ${f}`;i(d,c?"MISSING_CHAR":"BAD_INDENT",b),h&&h.source.length!==1&&p.unshift(h)}if(p.length>0){const g=cA(p,m,n.options.strict,i);g.comment&&(u.comment?u.comment+=`
`+g.comment:u.comment=g.comment),u.range=[r.offset,m,g.offset]}else u.range=[r.offset,m,m];return u}function t9(e,t,n,r,i,s){const o=n.type==="block-map"?ljt(e,t,n,r,s):n.type==="block-seq"?ujt(e,t,n,r,s):cjt(e,t,n,r,s),a=o.constructor;return i==="!"||i===a.tagName?(o.tag=a.tagName,o):(i&&(o.tag=i),o)}function djt(e,t,n,r,i){var f;const s=r.tag,o=s?t.directives.tagName(s.source,h=>i(s,"TAG_RESOLVE_FAILED",h)):null;if(n.type==="block-seq"){const{anchor:h,newlineAfterProp:p}=r,m=h&&s?h.offset>s.offset?h:s:h??s;m&&(!p||p.offset<m.offset)&&i(m,"MISSING_CHAR","Missing newline after block sequence props")}const a=n.type==="block-map"?"map":n.type==="block-seq"?"seq":n.start.source==="{"?"map":"seq";if(!s||!o||o==="!"||o===Eu.tagName&&a==="map"||o===xv.tagName&&a==="seq")return t9(e,t,n,i,o);let l=t.schema.tags.find(h=>h.tag===o&&h.collection===a);if(!l){const h=t.schema.knownTags[o];if(h&&h.collection===a)t.schema.tags.push(Object.assign({},h,{default:!1})),l=h;else return h?i(s,"BAD_COLLECTION_TYPE",`${h.tag} used for ${a} collection, but expects ${h.collection??"scalar"}`,!0):i(s,"TAG_RESOLVE_FAILED",`Unresolved tag: ${o}`,!0),t9(e,t,n,i,o)}const u=t9(e,t,n,i,o,l),c=((f=l.resolve)==null?void 0:f.call(l,u,h=>i(s,"TAG_RESOLVE_FAILED",h),t.options))??u,d=$i(c)?c:new mn(c);return d.range=u.range,d.tag=o,l!=null&&l.format&&(d.format=l.format),d}function fjt(e,t,n){const r=t.offset,i=hjt(t,e.options.strict,n);if(!i)return{value:"",type:null,comment:"",range:[r,r,r]};const s=i.mode===">"?mn.BLOCK_FOLDED:mn.BLOCK_LITERAL,o=t.source?pjt(t.source):[];let a=o.length;for(let m=o.length-1;m>=0;--m){const g=o[m][1];if(g===""||g==="\r")a=m;else break}if(a===0){const m=i.chomp==="+"&&o.length>0?`
`.repeat(Math.max(1,o.length-1)):"";let g=r+i.length;return t.source&&(g+=t.source.length),{value:m,type:s,comment:i.comment,range:[r,g,g]}}let l=t.indent+i.indent,u=t.offset+i.length,c=0;for(let m=0;m<a;++m){const[g,b]=o[m];if(b===""||b==="\r")i.indent===0&&g.length>l&&(l=g.length);else{g.length<l&&n(u+g.length,"MISSING_CHAR","Block scalars with more-indented leading empty lines must use an explicit indentation indicator"),i.indent===0&&(l=g.length),c=m,l===0&&!e.atRoot&&n(u,"BAD_INDENT","Block scalar values in collections must be indented");break}u+=g.length+b.length+1}for(let m=o.length-1;m>=a;--m)o[m][0].length>l&&(a=m+1);let d="",f="",h=!1;for(let m=0;m<c;++m)d+=o[m][0].slice(l)+`
`;for(let m=c;m<a;++m){let[g,b]=o[m];u+=g.length+b.length+1;const v=b[b.length-1]==="\r";if(v&&(b=b.slice(0,-1)),b&&g.length<l){const E=`Block scalar lines must not be less indented than their ${i.indent?"explicit indentation indicator":"first line"}`;n(u-b.length-(v?2:1),"BAD_INDENT",E),g=""}s===mn.BLOCK_LITERAL?(d+=f+g.slice(l)+b,f=`
`):g.length>l||b[0]==="	"?(f===" "?f=`
`:!h&&f===`
`&&(f=`

`),d+=f+g.slice(l)+b,f=`
`,h=!0):b===""?f===`
`?d+=`
`:f=`
`:(d+=f+b,f=" ",h=!1)}switch(i.chomp){case"-":break;case"+":for(let m=a;m<o.length;++m)d+=`
`+o[m][0].slice(l);d[d.length-1]!==`
`&&(d+=`
`);break;default:d+=`
`}const p=r+i.length+t.source.length;return{value:d,type:s,comment:i.comment,range:[r,p,p]}}function hjt({offset:e,props:t},n,r){if(t[0].type!=="block-scalar-header")return r(t[0],"IMPOSSIBLE","Block scalar header not found"),null;const{source:i}=t[0],s=i[0];let o=0,a="",l=-1;for(let f=1;f<i.length;++f){const h=i[f];if(!a&&(h==="-"||h==="+"))a=h;else{const p=Number(h);!o&&p?o=p:l===-1&&(l=e+f)}}l!==-1&&r(l,"UNEXPECTED_TOKEN",`Block scalar header includes extra characters: ${i}`);let u=!1,c="",d=i.length;for(let f=1;f<t.length;++f){const h=t[f];switch(h.type){case"space":u=!0;case"newline":d+=h.source.length;break;case"comment":n&&!u&&r(h,"MISSING_CHAR","Comments must be separated from other tokens by white space characters"),d+=h.source.length,c=h.source.substring(1);break;case"error":r(h,"UNEXPECTED_TOKEN",h.message),d+=h.source.length;break;default:{const p=`Unexpected token in block scalar header: ${h.type}`;r(h,"UNEXPECTED_TOKEN",p);const m=h.source;m&&typeof m=="string"&&(d+=m.length)}}}return{mode:s,indent:o,chomp:a,comment:c,length:d}}function pjt(e){const t=e.split(/\n( *)/),n=t[0],r=n.match(/^( *)/),s=[r!=null&&r[1]?[r[1],n.slice(r[1].length)]:["",n]];for(let o=1;o<t.length;o+=2)s.push([t[o],t[o+1]]);return s}function mjt(e,t,n){const{offset:r,type:i,source:s,end:o}=e;let a,l;const u=(f,h,p)=>n(r+f,h,p);switch(i){case"scalar":a=mn.PLAIN,l=gjt(s,u);break;case"single-quoted-scalar":a=mn.QUOTE_SINGLE,l=yjt(s,u);break;case"double-quoted-scalar":a=mn.QUOTE_DOUBLE,l=vjt(s,u);break;default:return n(e,"UNEXPECTED_TOKEN",`Expected a flow scalar value, but found: ${i}`),{value:"",type:null,comment:"",range:[r,r+s.length,r+s.length]}}const c=r+s.length,d=cA(o,c,t,n);return{value:l,type:a,comment:d.comment,range:[r,c,d.offset]}}function gjt(e,t){let n="";switch(e[0]){case"	":n="a tab character";break;case",":n="flow indicator character ,";break;case"%":n="directive indicator character %";break;case"|":case">":{n=`block scalar indicator ${e[0]}`;break}case"@":case"`":{n=`reserved character ${e[0]}`;break}}return n&&t(0,"BAD_SCALAR_START",`Plain value cannot start with ${n}`),CDe(e)}function yjt(e,t){return(e[e.length-1]!=="'"||e.length===1)&&t(e.length,"MISSING_CHAR","Missing closing 'quote"),CDe(e.slice(1,-1)).replace(/''/g,"'")}function CDe(e){let t,n;try{t=new RegExp(`(.*?)(?<![ 	])[ 	]*\r?
`,"sy"),n=new RegExp(`[ 	]*(.*?)(?:(?<![ 	])[ 	]*)?\r?
`,"sy")}catch{t=/(.*?)[ \t]*\r?\n/sy,n=/[ \t]*(.*?)[ \t]*\r?\n/sy}let r=t.exec(e);if(!r)return e;let i=r[1],s=" ",o=t.lastIndex;for(n.lastIndex=o;r=n.exec(e);)r[1]===""?s===`
`?i+=s:s=`
`:(i+=s+r[1],s=" "),o=n.lastIndex;const a=/[ \t]*(.*)/sy;return a.lastIndex=o,r=a.exec(e),i+s+((r==null?void 0:r[1])??"")}function vjt(e,t){let n="";for(let r=1;r<e.length-1;++r){const i=e[r];if(!(i==="\r"&&e[r+1]===`
`))if(i===`
`){const{fold:s,offset:o}=bjt(e,r);n+=s,r=o}else if(i==="\\"){let s=e[++r];const o=wjt[s];if(o)n+=o;else if(s===`
`)for(s=e[r+1];s===" "||s==="	";)s=e[++r+1];else if(s==="\r"&&e[r+1]===`
`)for(s=e[++r+1];s===" "||s==="	";)s=e[++r+1];else if(s==="x"||s==="u"||s==="U"){const a={x:2,u:4,U:8}[s];n+=xjt(e,r+1,a,t),r+=a}else{const a=e.substr(r-1,2);t(r-1,"BAD_DQ_ESCAPE",`Invalid escape sequence ${a}`),n+=a}}else if(i===" "||i==="	"){const s=r;let o=e[r+1];for(;o===" "||o==="	";)o=e[++r+1];o!==`
`&&!(o==="\r"&&e[r+2]===`
`)&&(n+=r>s?e.slice(s,r+1):i)}else n+=i}return(e[e.length-1]!=='"'||e.length===1)&&t(e.length,"MISSING_CHAR",'Missing closing "quote'),n}function bjt(e,t){let n="",r=e[t+1];for(;(r===" "||r==="	"||r===`
`||r==="\r")&&!(r==="\r"&&e[t+2]!==`
`);)r===`
`&&(n+=`
`),t+=1,r=e[t+1];return n||(n=" "),{fold:n,offset:t}}const wjt={0:"\0",a:"\x07",b:"\b",e:"\x1B",f:"\f",n:`
`,r:"\r",t:"	",v:"\v",N:"",_:"",L:"\u2028",P:"\u2029"," ":" ",'"':'"',"/":"/","\\":"\\","	":"	"};function xjt(e,t,n,r){const i=e.substr(t,n),o=i.length===n&&/^[0-9a-fA-F]+$/.test(i)?parseInt(i,16):NaN;if(isNaN(o)){const a=e.substr(t-2,n+2);return r(t-2,"BAD_DQ_ESCAPE",`Invalid escape sequence ${a}`),a}return String.fromCodePoint(o)}function SDe(e,t,n,r){const{value:i,type:s,comment:o,range:a}=t.type==="block-scalar"?fjt(e,t,r):mjt(t,e.options.strict,r),l=n?e.directives.tagName(n.source,d=>r(n,"TAG_RESOLVE_FAILED",d)):null;let u;e.options.stringKeys&&e.atKey?u=e.schema[Mf]:l?u=Ejt(e.schema,i,l,n,r):t.type==="scalar"?u=_jt(e,i,t,r):u=e.schema[Mf];let c;try{const d=u.resolve(i,f=>r(n??t,"TAG_RESOLVE_FAILED",f),e.options);c=Hr(d)?d:new mn(d)}catch(d){const f=d instanceof Error?d.message:String(d);r(n??t,"TAG_RESOLVE_FAILED",f),c=new mn(i)}return c.range=a,c.source=i,s&&(c.type=s),l&&(c.tag=l),u.format&&(c.format=u.format),o&&(c.comment=o),c}function Ejt(e,t,n,r,i){var a;if(n==="!")return e[Mf];const s=[];for(const l of e.tags)if(!l.collection&&l.tag===n)if(l.default&&l.test)s.push(l);else return l;for(const l of s)if((a=l.test)!=null&&a.test(t))return l;const o=e.knownTags[n];return o&&!o.collection?(e.tags.push(Object.assign({},o,{default:!1,test:void 0})),o):(i(r,"TAG_RESOLVE_FAILED",`Unresolved tag: ${n}`,n!=="tag:yaml.org,2002:str"),e[Mf])}function _jt({atKey:e,directives:t,schema:n},r,i,s){const o=n.tags.find(a=>{var l;return(a.default===!0||e&&a.default==="key")&&((l=a.test)==null?void 0:l.test(r))})||n[Mf];if(n.compat){const a=n.compat.find(l=>{var u;return l.default&&((u=l.test)==null?void 0:u.test(r))})??n[Mf];if(o.tag!==a.tag){const l=t.tagString(o.tag),u=t.tagString(a.tag),c=`Value may be parsed as either ${l} or ${u}`;s(i,"TAG_RESOLVE_FAILED",c,!0)}}return o}function Tjt(e,t,n){if(t){n??(n=t.length);for(let r=n-1;r>=0;--r){let i=t[r];switch(i.type){case"space":case"comment":case"newline":e-=i.source.length;continue}for(i=t[++r];(i==null?void 0:i.type)==="space";)e+=i.source.length,i=t[++r];break}}return e}const Cjt={composeNode:ADe,composeEmptyNode:jQ};function ADe(e,t,n,r){const i=e.atKey,{spaceBefore:s,comment:o,anchor:a,tag:l}=n;let u,c=!0;switch(t.type){case"alias":u=Sjt(e,t,r),(a||l)&&r(t,"ALIAS_PROPS","An alias node must not specify any properties");break;case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"block-scalar":u=SDe(e,t,l,r),a&&(u.anchor=a.source.substring(1));break;case"block-map":case"block-seq":case"flow-collection":u=djt(Cjt,e,t,n,r),a&&(u.anchor=a.source.substring(1));break;default:{const d=t.type==="error"?t.message:`Unsupported token (type: ${t.type})`;r(t,"UNEXPECTED_TOKEN",d),u=jQ(e,t.offset,void 0,null,n,r),c=!1}}return a&&u.anchor===""&&r(a,"BAD_ALIAS","Anchor cannot be an empty string"),i&&e.options.stringKeys&&(!Hr(u)||typeof u.value!="string"||u.tag&&u.tag!=="tag:yaml.org,2002:str")&&r(l??t,"NON_STRING_KEY","With stringKeys, all keys must be strings"),s&&(u.spaceBefore=!0),o&&(t.type==="scalar"&&t.source===""?u.comment=o:u.commentBefore=o),e.options.keepSourceTokens&&c&&(u.srcToken=t),u}function jQ(e,t,n,r,{spaceBefore:i,comment:s,anchor:o,tag:a,end:l},u){const c={type:"scalar",offset:Tjt(t,n,r),indent:-1,source:""},d=SDe(e,c,a,u);return o&&(d.anchor=o.source.substring(1),d.anchor===""&&u(o,"BAD_ALIAS","Anchor cannot be an empty string")),i&&(d.spaceBefore=!0),s&&(d.comment=s,d.range[2]=l),d}function Sjt({options:e},{offset:t,source:n,end:r},i){const s=new AQ(n.substring(1));s.source===""&&i(t,"BAD_ALIAS","Alias cannot be an empty string"),s.source.endsWith(":")&&i(t+n.length-1,"BAD_ALIAS","Alias ending in : is ambiguous",!0);const o=t+n.length,a=cA(r,o,e.strict,i);return s.range=[t,o,a.offset],a.comment&&(s.comment=a.comment),s}function Ajt(e,t,{offset:n,start:r,value:i,end:s},o){const a=Object.assign({_directives:t},e),l=new X6(void 0,a),u={atKey:!1,atRoot:!0,directives:l.directives,options:l.options,schema:l.schema},c=px(r,{indicator:"doc-start",next:i??(s==null?void 0:s[0]),offset:n,onError:o,parentIndent:0,startOnNewline:!0});c.found&&(l.directives.docStart=!0,i&&(i.type==="block-map"||i.type==="block-seq")&&!c.hasNewline&&o(c.end,"MISSING_CHAR","Block collection cannot start on same line with directives-end marker")),l.contents=i?ADe(u,i,c,o):jQ(u,c.end,r,null,c,o);const d=l.contents.range[2],f=cA(s,d,!1,o);return f.comment&&(l.comment=f.comment),l.range=[n,d,f.offset],l}function q_(e){if(typeof e=="number")return[e,e+1];if(Array.isArray(e))return e.length===2?e:[e[0],e[1]];const{offset:t,source:n}=e;return[t,t+(typeof n=="string"?n.length:1)]}function qfe(e){var i;let t="",n=!1,r=!1;for(let s=0;s<e.length;++s){const o=e[s];switch(o[0]){case"#":t+=(t===""?"":r?`

`:`
`)+(o.substring(1)||" "),n=!0,r=!1;break;case"%":((i=e[s+1])==null?void 0:i[0])!=="#"&&(s+=1),n=!1;break;default:n||(r=!0),n=!1}}return{comment:t,afterEmptyLine:r}}class kjt{constructor(t={}){this.doc=null,this.atDirectives=!1,this.prelude=[],this.errors=[],this.warnings=[],this.onError=(n,r,i,s)=>{const o=q_(n);s?this.warnings.push(new ajt(o,r,i)):this.errors.push(new R2(o,r,i))},this.directives=new da({version:t.version||"1.2"}),this.options=t}decorate(t,n){const{comment:r,afterEmptyLine:i}=qfe(this.prelude);if(r){const s=t.contents;if(n)t.comment=t.comment?`${t.comment}
${r}`:r;else if(i||t.directives.docStart||!s)t.commentBefore=r;else if(Oi(s)&&!s.flow&&s.items.length>0){let o=s.items[0];ji(o)&&(o=o.key);const a=o.commentBefore;o.commentBefore=a?`${r}
${a}`:r}else{const o=s.commentBefore;s.commentBefore=o?`${r}
${o}`:r}}n?(Array.prototype.push.apply(t.errors,this.errors),Array.prototype.push.apply(t.warnings,this.warnings)):(t.errors=this.errors,t.warnings=this.warnings),this.prelude=[],this.errors=[],this.warnings=[]}streamInfo(){return{comment:qfe(this.prelude).comment,directives:this.directives,errors:this.errors,warnings:this.warnings}}*compose(t,n=!1,r=-1){for(const i of t)yield*this.next(i);yield*this.end(n,r)}*next(t){switch(t.type){case"directive":this.directives.add(t.source,(n,r,i)=>{const s=q_(t);s[0]+=n,this.onError(s,"BAD_DIRECTIVE",r,i)}),this.prelude.push(t.source),this.atDirectives=!0;break;case"document":{const n=Ajt(this.options,this.directives,t,this.onError);this.atDirectives&&!n.directives.docStart&&this.onError(t,"MISSING_CHAR","Missing directives-end/doc-start indicator line"),this.decorate(n,!1),this.doc&&(yield this.doc),this.doc=n,this.atDirectives=!1;break}case"byte-order-mark":case"space":break;case"comment":case"newline":this.prelude.push(t.source);break;case"error":{const n=t.source?`${t.message}: ${JSON.stringify(t.source)}`:t.message,r=new R2(q_(t),"UNEXPECTED_TOKEN",n);this.atDirectives||!this.doc?this.errors.push(r):this.doc.errors.push(r);break}case"doc-end":{if(!this.doc){const r="Unexpected doc-end without preceding document";this.errors.push(new R2(q_(t),"UNEXPECTED_TOKEN",r));break}this.doc.directives.docEnd=!0;const n=cA(t.end,t.offset+t.source.length,this.doc.options.strict,this.onError);if(this.decorate(this.doc,!0),n.comment){const r=this.doc.comment;this.doc.comment=r?`${r}
${n.comment}`:n.comment}this.doc.range[2]=n.offset;break}default:this.errors.push(new R2(q_(t),"UNEXPECTED_TOKEN",`Unsupported token ${t.type}`))}}*end(t=!1,n=-1){if(this.doc)this.decorate(this.doc,!0),yield this.doc,this.doc=null;else if(t){const r=Object.assign({_directives:this.directives},this.options),i=new X6(void 0,r);this.atDirectives&&this.onError(n,"MISSING_CHAR","Missing directives-end indicator line"),i.range=[0,n,n],this.decorate(i,!1),yield i}}}const kDe="\uFEFF",IDe="",RDe="",Bz="";function Ijt(e){switch(e){case kDe:return"byte-order-mark";case IDe:return"doc-mode";case RDe:return"flow-error-end";case Bz:return"scalar";case"---":return"doc-start";case"...":return"doc-end";case"":case`
`:case`\r
`:return"newline";case"-":return"seq-item-ind";case"?":return"explicit-key-ind";case":":return"map-value-ind";case"{":return"flow-map-start";case"}":return"flow-map-end";case"[":return"flow-seq-start";case"]":return"flow-seq-end";case",":return"comma"}switch(e[0]){case" ":case"	":return"space";case"#":return"comment";case"%":return"directive-line";case"*":return"alias";case"&":return"anchor";case"!":return"tag";case"'":return"single-quoted-scalar";case'"':return"double-quoted-scalar";case"|":case">":return"block-scalar-header"}return null}function pc(e){switch(e){case void 0:case" ":case`
`:case"\r":case"	":return!0;default:return!1}}const Hfe=new Set("0123456789ABCDEFabcdef"),Rjt=new Set("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-#;/?:@&=+$_.!~*'()"),hR=new Set(",[]{}"),Djt=new Set(` ,[]{}
\r	`),n9=e=>!e||Djt.has(e);class Pjt{constructor(){this.atEnd=!1,this.blockScalarIndent=-1,this.blockScalarKeep=!1,this.buffer="",this.flowKey=!1,this.flowLevel=0,this.indentNext=0,this.indentValue=0,this.lineEndPos=null,this.next=null,this.pos=0}*lex(t,n=!1){if(t){if(typeof t!="string")throw TypeError("source is not a string");this.buffer=this.buffer?this.buffer+t:t,this.lineEndPos=null}this.atEnd=!n;let r=this.next??"stream";for(;r&&(n||this.hasChars(1));)r=yield*this.parseNext(r)}atLineEnd(){let t=this.pos,n=this.buffer[t];for(;n===" "||n==="	";)n=this.buffer[++t];return!n||n==="#"||n===`
`?!0:n==="\r"?this.buffer[t+1]===`
`:!1}charAt(t){return this.buffer[this.pos+t]}continueScalar(t){let n=this.buffer[t];if(this.indentNext>0){let r=0;for(;n===" ";)n=this.buffer[++r+t];if(n==="\r"){const i=this.buffer[r+t+1];if(i===`
`||!i&&!this.atEnd)return t+r+1}return n===`
`||r>=this.indentNext||!n&&!this.atEnd?t+r:-1}if(n==="-"||n==="."){const r=this.buffer.substr(t,3);if((r==="---"||r==="...")&&pc(this.buffer[t+3]))return-1}return t}getLine(){let t=this.lineEndPos;return(typeof t!="number"||t!==-1&&t<this.pos)&&(t=this.buffer.indexOf(`
`,this.pos),this.lineEndPos=t),t===-1?this.atEnd?this.buffer.substring(this.pos):null:(this.buffer[t-1]==="\r"&&(t-=1),this.buffer.substring(this.pos,t))}hasChars(t){return this.pos+t<=this.buffer.length}setNext(t){return this.buffer=this.buffer.substring(this.pos),this.pos=0,this.lineEndPos=null,this.next=t,null}peek(t){return this.buffer.substr(this.pos,t)}*parseNext(t){switch(t){case"stream":return yield*this.parseStream();case"line-start":return yield*this.parseLineStart();case"block-start":return yield*this.parseBlockStart();case"doc":return yield*this.parseDocument();case"flow":return yield*this.parseFlowCollection();case"quoted-scalar":return yield*this.parseQuotedScalar();case"block-scalar":return yield*this.parseBlockScalar();case"plain-scalar":return yield*this.parsePlainScalar()}}*parseStream(){let t=this.getLine();if(t===null)return this.setNext("stream");if(t[0]===kDe&&(yield*this.pushCount(1),t=t.substring(1)),t[0]==="%"){let n=t.length,r=t.indexOf("#");for(;r!==-1;){const s=t[r-1];if(s===" "||s==="	"){n=r-1;break}else r=t.indexOf("#",r+1)}for(;;){const s=t[n-1];if(s===" "||s==="	")n-=1;else break}const i=(yield*this.pushCount(n))+(yield*this.pushSpaces(!0));return yield*this.pushCount(t.length-i),this.pushNewline(),"stream"}if(this.atLineEnd()){const n=yield*this.pushSpaces(!0);return yield*this.pushCount(t.length-n),yield*this.pushNewline(),"stream"}return yield IDe,yield*this.parseLineStart()}*parseLineStart(){const t=this.charAt(0);if(!t&&!this.atEnd)return this.setNext("line-start");if(t==="-"||t==="."){if(!this.atEnd&&!this.hasChars(4))return this.setNext("line-start");const n=this.peek(3);if((n==="---"||n==="...")&&pc(this.charAt(3)))return yield*this.pushCount(3),this.indentValue=0,this.indentNext=0,n==="---"?"doc":"stream"}return this.indentValue=yield*this.pushSpaces(!1),this.indentNext>this.indentValue&&!pc(this.charAt(1))&&(this.indentNext=this.indentValue),yield*this.parseBlockStart()}*parseBlockStart(){const[t,n]=this.peek(2);if(!n&&!this.atEnd)return this.setNext("block-start");if((t==="-"||t==="?"||t===":")&&pc(n)){const r=(yield*this.pushCount(1))+(yield*this.pushSpaces(!0));return this.indentNext=this.indentValue+1,this.indentValue+=r,yield*this.parseBlockStart()}return"doc"}*parseDocument(){yield*this.pushSpaces(!0);const t=this.getLine();if(t===null)return this.setNext("doc");let n=yield*this.pushIndicators();switch(t[n]){case"#":yield*this.pushCount(t.length-n);case void 0:return yield*this.pushNewline(),yield*this.parseLineStart();case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel=1,"flow";case"}":case"]":return yield*this.pushCount(1),"doc";case"*":return yield*this.pushUntil(n9),"doc";case'"':case"'":return yield*this.parseQuotedScalar();case"|":case">":return n+=yield*this.parseBlockScalarHeader(),n+=yield*this.pushSpaces(!0),yield*this.pushCount(t.length-n),yield*this.pushNewline(),yield*this.parseBlockScalar();default:return yield*this.parsePlainScalar()}}*parseFlowCollection(){let t,n,r=-1;do t=yield*this.pushNewline(),t>0?(n=yield*this.pushSpaces(!1),this.indentValue=r=n):n=0,n+=yield*this.pushSpaces(!0);while(t+n>0);const i=this.getLine();if(i===null)return this.setNext("flow");if((r!==-1&&r<this.indentNext&&i[0]!=="#"||r===0&&(i.startsWith("---")||i.startsWith("..."))&&pc(i[3]))&&!(r===this.indentNext-1&&this.flowLevel===1&&(i[0]==="]"||i[0]==="}")))return this.flowLevel=0,yield RDe,yield*this.parseLineStart();let s=0;for(;i[s]===",";)s+=yield*this.pushCount(1),s+=yield*this.pushSpaces(!0),this.flowKey=!1;switch(s+=yield*this.pushIndicators(),i[s]){case void 0:return"flow";case"#":return yield*this.pushCount(i.length-s),"flow";case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel+=1,"flow";case"}":case"]":return yield*this.pushCount(1),this.flowKey=!0,this.flowLevel-=1,this.flowLevel?"flow":"doc";case"*":return yield*this.pushUntil(n9),"flow";case'"':case"'":return this.flowKey=!0,yield*this.parseQuotedScalar();case":":{const o=this.charAt(1);if(this.flowKey||pc(o)||o===",")return this.flowKey=!1,yield*this.pushCount(1),yield*this.pushSpaces(!0),"flow"}default:return this.flowKey=!1,yield*this.parsePlainScalar()}}*parseQuotedScalar(){const t=this.charAt(0);let n=this.buffer.indexOf(t,this.pos+1);if(t==="'")for(;n!==-1&&this.buffer[n+1]==="'";)n=this.buffer.indexOf("'",n+2);else for(;n!==-1;){let s=0;for(;this.buffer[n-1-s]==="\\";)s+=1;if(s%2===0)break;n=this.buffer.indexOf('"',n+1)}const r=this.buffer.substring(0,n);let i=r.indexOf(`
`,this.pos);if(i!==-1){for(;i!==-1;){const s=this.continueScalar(i+1);if(s===-1)break;i=r.indexOf(`
`,s)}i!==-1&&(n=i-(r[i-1]==="\r"?2:1))}if(n===-1){if(!this.atEnd)return this.setNext("quoted-scalar");n=this.buffer.length}return yield*this.pushToIndex(n+1,!1),this.flowLevel?"flow":"doc"}*parseBlockScalarHeader(){this.blockScalarIndent=-1,this.blockScalarKeep=!1;let t=this.pos;for(;;){const n=this.buffer[++t];if(n==="+")this.blockScalarKeep=!0;else if(n>"0"&&n<="9")this.blockScalarIndent=Number(n)-1;else if(n!=="-")break}return yield*this.pushUntil(n=>pc(n)||n==="#")}*parseBlockScalar(){let t=this.pos-1,n=0,r;e:for(let s=this.pos;r=this.buffer[s];++s)switch(r){case" ":n+=1;break;case`
`:t=s,n=0;break;case"\r":{const o=this.buffer[s+1];if(!o&&!this.atEnd)return this.setNext("block-scalar");if(o===`
`)break}default:break e}if(!r&&!this.atEnd)return this.setNext("block-scalar");if(n>=this.indentNext){this.blockScalarIndent===-1?this.indentNext=n:this.indentNext=this.blockScalarIndent+(this.indentNext===0?1:this.indentNext);do{const s=this.continueScalar(t+1);if(s===-1)break;t=this.buffer.indexOf(`
`,s)}while(t!==-1);if(t===-1){if(!this.atEnd)return this.setNext("block-scalar");t=this.buffer.length}}let i=t+1;for(r=this.buffer[i];r===" ";)r=this.buffer[++i];if(r==="	"){for(;r==="	"||r===" "||r==="\r"||r===`
`;)r=this.buffer[++i];t=i-1}else if(!this.blockScalarKeep)do{let s=t-1,o=this.buffer[s];o==="\r"&&(o=this.buffer[--s]);const a=s;for(;o===" ";)o=this.buffer[--s];if(o===`
`&&s>=this.pos&&s+1+n>a)t=s;else break}while(!0);return yield Bz,yield*this.pushToIndex(t+1,!0),yield*this.parseLineStart()}*parsePlainScalar(){const t=this.flowLevel>0;let n=this.pos-1,r=this.pos-1,i;for(;i=this.buffer[++r];)if(i===":"){const s=this.buffer[r+1];if(pc(s)||t&&hR.has(s))break;n=r}else if(pc(i)){let s=this.buffer[r+1];if(i==="\r"&&(s===`
`?(r+=1,i=`
`,s=this.buffer[r+1]):n=r),s==="#"||t&&hR.has(s))break;if(i===`
`){const o=this.continueScalar(r+1);if(o===-1)break;r=Math.max(r,o-2)}}else{if(t&&hR.has(i))break;n=r}return!i&&!this.atEnd?this.setNext("plain-scalar"):(yield Bz,yield*this.pushToIndex(n+1,!0),t?"flow":"doc")}*pushCount(t){return t>0?(yield this.buffer.substr(this.pos,t),this.pos+=t,t):0}*pushToIndex(t,n){const r=this.buffer.slice(this.pos,t);return r?(yield r,this.pos+=r.length,r.length):(n&&(yield""),0)}*pushIndicators(){switch(this.charAt(0)){case"!":return(yield*this.pushTag())+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case"&":return(yield*this.pushUntil(n9))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case"-":case"?":case":":{const t=this.flowLevel>0,n=this.charAt(1);if(pc(n)||t&&hR.has(n))return t?this.flowKey&&(this.flowKey=!1):this.indentNext=this.indentValue+1,(yield*this.pushCount(1))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators())}}return 0}*pushTag(){if(this.charAt(1)==="<"){let t=this.pos+2,n=this.buffer[t];for(;!pc(n)&&n!==">";)n=this.buffer[++t];return yield*this.pushToIndex(n===">"?t+1:t,!1)}else{let t=this.pos+1,n=this.buffer[t];for(;n;)if(Rjt.has(n))n=this.buffer[++t];else if(n==="%"&&Hfe.has(this.buffer[t+1])&&Hfe.has(this.buffer[t+2]))n=this.buffer[t+=3];else break;return yield*this.pushToIndex(t,!1)}}*pushNewline(){const t=this.buffer[this.pos];return t===`
`?yield*this.pushCount(1):t==="\r"&&this.charAt(1)===`
`?yield*this.pushCount(2):0}*pushSpaces(t){let n=this.pos-1,r;do r=this.buffer[++n];while(r===" "||t&&r==="	");const i=n-this.pos;return i>0&&(yield this.buffer.substr(this.pos,i),this.pos=n),i}*pushUntil(t){let n=this.pos,r=this.buffer[n];for(;!t(r);)r=this.buffer[++n];return yield*this.pushToIndex(n,!1)}}class Njt{constructor(){this.lineStarts=[],this.addNewLine=t=>this.lineStarts.push(t),this.linePos=t=>{let n=0,r=this.lineStarts.length;for(;n<r;){const s=n+r>>1;this.lineStarts[s]<t?n=s+1:r=s}if(this.lineStarts[n]===t)return{line:n+1,col:1};if(n===0)return{line:0,col:t};const i=this.lineStarts[n-1];return{line:n,col:t-i+1}}}}function $m(e,t){for(let n=0;n<e.length;++n)if(e[n].type===t)return!0;return!1}function Wfe(e){for(let t=0;t<e.length;++t)switch(e[t].type){case"space":case"comment":case"newline":break;default:return t}return-1}function DDe(e){switch(e==null?void 0:e.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"flow-collection":return!0;default:return!1}}function pR(e){switch(e.type){case"document":return e.start;case"block-map":{const t=e.items[e.items.length-1];return t.sep??t.start}case"block-seq":return e.items[e.items.length-1].start;default:return[]}}function db(e){var n;if(e.length===0)return[];let t=e.length;e:for(;--t>=0;)switch(e[t].type){case"doc-start":case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":case"newline":break e}for(;((n=e[++t])==null?void 0:n.type)==="space";);return e.splice(t,e.length)}function Vfe(e){if(e.start.type==="flow-seq-start")for(const t of e.items)t.sep&&!t.value&&!$m(t.start,"explicit-key-ind")&&!$m(t.sep,"map-value-ind")&&(t.key&&(t.value=t.key),delete t.key,DDe(t.value)?t.value.end?Array.prototype.push.apply(t.value.end,t.sep):t.value.end=t.sep:Array.prototype.push.apply(t.start,t.sep),delete t.sep)}class Ojt{constructor(t){this.atNewLine=!0,this.atScalar=!1,this.indent=0,this.offset=0,this.onKeyLine=!1,this.stack=[],this.source="",this.type="",this.lexer=new Pjt,this.onNewLine=t}*parse(t,n=!1){this.onNewLine&&this.offset===0&&this.onNewLine(0);for(const r of this.lexer.lex(t,n))yield*this.next(r);n||(yield*this.end())}*next(t){if(this.source=t,this.atScalar){this.atScalar=!1,yield*this.step(),this.offset+=t.length;return}const n=Ijt(t);if(n)if(n==="scalar")this.atNewLine=!1,this.atScalar=!0,this.type="scalar";else{switch(this.type=n,yield*this.step(),n){case"newline":this.atNewLine=!0,this.indent=0,this.onNewLine&&this.onNewLine(this.offset+t.length);break;case"space":this.atNewLine&&t[0]===" "&&(this.indent+=t.length);break;case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":this.atNewLine&&(this.indent+=t.length);break;case"doc-mode":case"flow-error-end":return;default:this.atNewLine=!1}this.offset+=t.length}else{const r=`Not a YAML token: ${t}`;yield*this.pop({type:"error",offset:this.offset,message:r,source:t}),this.offset+=t.length}}*end(){for(;this.stack.length>0;)yield*this.pop()}get sourceToken(){return{type:this.type,offset:this.offset,indent:this.indent,source:this.source}}*step(){const t=this.peek(1);if(this.type==="doc-end"&&(!t||t.type!=="doc-end")){for(;this.stack.length>0;)yield*this.pop();this.stack.push({type:"doc-end",offset:this.offset,source:this.source});return}if(!t)return yield*this.stream();switch(t.type){case"document":return yield*this.document(t);case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return yield*this.scalar(t);case"block-scalar":return yield*this.blockScalar(t);case"block-map":return yield*this.blockMap(t);case"block-seq":return yield*this.blockSequence(t);case"flow-collection":return yield*this.flowCollection(t);case"doc-end":return yield*this.documentEnd(t)}yield*this.pop()}peek(t){return this.stack[this.stack.length-t]}*pop(t){const n=t??this.stack.pop();if(!n)yield{type:"error",offset:this.offset,source:"",message:"Tried to pop an empty stack"};else if(this.stack.length===0)yield n;else{const r=this.peek(1);switch(n.type==="block-scalar"?n.indent="indent"in r?r.indent:0:n.type==="flow-collection"&&r.type==="document"&&(n.indent=0),n.type==="flow-collection"&&Vfe(n),r.type){case"document":r.value=n;break;case"block-scalar":r.props.push(n);break;case"block-map":{const i=r.items[r.items.length-1];if(i.value){r.items.push({start:[],key:n,sep:[]}),this.onKeyLine=!0;return}else if(i.sep)i.value=n;else{Object.assign(i,{key:n,sep:[]}),this.onKeyLine=!i.explicitKey;return}break}case"block-seq":{const i=r.items[r.items.length-1];i.value?r.items.push({start:[],value:n}):i.value=n;break}case"flow-collection":{const i=r.items[r.items.length-1];!i||i.value?r.items.push({start:[],key:n,sep:[]}):i.sep?i.value=n:Object.assign(i,{key:n,sep:[]});return}default:yield*this.pop(),yield*this.pop(n)}if((r.type==="document"||r.type==="block-map"||r.type==="block-seq")&&(n.type==="block-map"||n.type==="block-seq")){const i=n.items[n.items.length-1];i&&!i.sep&&!i.value&&i.start.length>0&&Wfe(i.start)===-1&&(n.indent===0||i.start.every(s=>s.type!=="comment"||s.indent<n.indent))&&(r.type==="document"?r.end=i.start:r.items.push({start:i.start}),n.items.splice(-1,1))}}}*stream(){switch(this.type){case"directive-line":yield{type:"directive",offset:this.offset,source:this.source};return;case"byte-order-mark":case"space":case"comment":case"newline":yield this.sourceToken;return;case"doc-mode":case"doc-start":{const t={type:"document",offset:this.offset,start:[]};this.type==="doc-start"&&t.start.push(this.sourceToken),this.stack.push(t);return}}yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML stream`,source:this.source}}*document(t){if(t.value)return yield*this.lineEnd(t);switch(this.type){case"doc-start":{Wfe(t.start)!==-1?(yield*this.pop(),yield*this.step()):t.start.push(this.sourceToken);return}case"anchor":case"tag":case"space":case"comment":case"newline":t.start.push(this.sourceToken);return}const n=this.startBlockValue(t);n?this.stack.push(n):yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML document`,source:this.source}}*scalar(t){if(this.type==="map-value-ind"){const n=pR(this.peek(2)),r=db(n);let i;t.end?(i=t.end,i.push(this.sourceToken),delete t.end):i=[this.sourceToken];const s={type:"block-map",offset:t.offset,indent:t.indent,items:[{start:r,key:t,sep:i}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=s}else yield*this.lineEnd(t)}*blockScalar(t){switch(this.type){case"space":case"comment":case"newline":t.props.push(this.sourceToken);return;case"scalar":if(t.source=this.source,this.atNewLine=!0,this.indent=0,this.onNewLine){let n=this.source.indexOf(`
`)+1;for(;n!==0;)this.onNewLine(this.offset+n),n=this.source.indexOf(`
`,n)+1}yield*this.pop();break;default:yield*this.pop(),yield*this.step()}}*blockMap(t){var r;const n=t.items[t.items.length-1];switch(this.type){case"newline":if(this.onKeyLine=!1,n.value){const i="end"in n.value?n.value.end:void 0,s=Array.isArray(i)?i[i.length-1]:void 0;(s==null?void 0:s.type)==="comment"?i==null||i.push(this.sourceToken):t.items.push({start:[this.sourceToken]})}else n.sep?n.sep.push(this.sourceToken):n.start.push(this.sourceToken);return;case"space":case"comment":if(n.value)t.items.push({start:[this.sourceToken]});else if(n.sep)n.sep.push(this.sourceToken);else{if(this.atIndentedComment(n.start,t.indent)){const i=t.items[t.items.length-2],s=(r=i==null?void 0:i.value)==null?void 0:r.end;if(Array.isArray(s)){Array.prototype.push.apply(s,n.start),s.push(this.sourceToken),t.items.pop();return}}n.start.push(this.sourceToken)}return}if(this.indent>=t.indent){const i=!this.onKeyLine&&this.indent===t.indent,s=i&&(n.sep||n.explicitKey)&&this.type!=="seq-item-ind";let o=[];if(s&&n.sep&&!n.value){const a=[];for(let l=0;l<n.sep.length;++l){const u=n.sep[l];switch(u.type){case"newline":a.push(l);break;case"space":break;case"comment":u.indent>t.indent&&(a.length=0);break;default:a.length=0}}a.length>=2&&(o=n.sep.splice(a[1]))}switch(this.type){case"anchor":case"tag":s||n.value?(o.push(this.sourceToken),t.items.push({start:o}),this.onKeyLine=!0):n.sep?n.sep.push(this.sourceToken):n.start.push(this.sourceToken);return;case"explicit-key-ind":!n.sep&&!n.explicitKey?(n.start.push(this.sourceToken),n.explicitKey=!0):s||n.value?(o.push(this.sourceToken),t.items.push({start:o,explicitKey:!0})):this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken],explicitKey:!0}]}),this.onKeyLine=!0;return;case"map-value-ind":if(n.explicitKey)if(n.sep)if(n.value)t.items.push({start:[],key:null,sep:[this.sourceToken]});else if($m(n.sep,"map-value-ind"))this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:o,key:null,sep:[this.sourceToken]}]});else if(DDe(n.key)&&!$m(n.sep,"newline")){const a=db(n.start),l=n.key,u=n.sep;u.push(this.sourceToken),delete n.key,delete n.sep,this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:a,key:l,sep:u}]})}else o.length>0?n.sep=n.sep.concat(o,this.sourceToken):n.sep.push(this.sourceToken);else if($m(n.start,"newline"))Object.assign(n,{key:null,sep:[this.sourceToken]});else{const a=db(n.start);this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:a,key:null,sep:[this.sourceToken]}]})}else n.sep?n.value||s?t.items.push({start:o,key:null,sep:[this.sourceToken]}):$m(n.sep,"map-value-ind")?this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[],key:null,sep:[this.sourceToken]}]}):n.sep.push(this.sourceToken):Object.assign(n,{key:null,sep:[this.sourceToken]});this.onKeyLine=!0;return;case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{const a=this.flowScalar(this.type);s||n.value?(t.items.push({start:o,key:a,sep:[]}),this.onKeyLine=!0):n.sep?this.stack.push(a):(Object.assign(n,{key:a,sep:[]}),this.onKeyLine=!0);return}default:{const a=this.startBlockValue(t);if(a){if(a.type==="block-seq"){if(!n.explicitKey&&n.sep&&!$m(n.sep,"newline")){yield*this.pop({type:"error",offset:this.offset,message:"Unexpected block-seq-ind on same line with key",source:this.source});return}}else i&&t.items.push({start:o});this.stack.push(a);return}}}}yield*this.pop(),yield*this.step()}*blockSequence(t){var r;const n=t.items[t.items.length-1];switch(this.type){case"newline":if(n.value){const i="end"in n.value?n.value.end:void 0,s=Array.isArray(i)?i[i.length-1]:void 0;(s==null?void 0:s.type)==="comment"?i==null||i.push(this.sourceToken):t.items.push({start:[this.sourceToken]})}else n.start.push(this.sourceToken);return;case"space":case"comment":if(n.value)t.items.push({start:[this.sourceToken]});else{if(this.atIndentedComment(n.start,t.indent)){const i=t.items[t.items.length-2],s=(r=i==null?void 0:i.value)==null?void 0:r.end;if(Array.isArray(s)){Array.prototype.push.apply(s,n.start),s.push(this.sourceToken),t.items.pop();return}}n.start.push(this.sourceToken)}return;case"anchor":case"tag":if(n.value||this.indent<=t.indent)break;n.start.push(this.sourceToken);return;case"seq-item-ind":if(this.indent!==t.indent)break;n.value||$m(n.start,"seq-item-ind")?t.items.push({start:[this.sourceToken]}):n.start.push(this.sourceToken);return}if(this.indent>t.indent){const i=this.startBlockValue(t);if(i){this.stack.push(i);return}}yield*this.pop(),yield*this.step()}*flowCollection(t){const n=t.items[t.items.length-1];if(this.type==="flow-error-end"){let r;do yield*this.pop(),r=this.peek(1);while(r&&r.type==="flow-collection")}else if(t.end.length===0){switch(this.type){case"comma":case"explicit-key-ind":!n||n.sep?t.items.push({start:[this.sourceToken]}):n.start.push(this.sourceToken);return;case"map-value-ind":!n||n.value?t.items.push({start:[],key:null,sep:[this.sourceToken]}):n.sep?n.sep.push(this.sourceToken):Object.assign(n,{key:null,sep:[this.sourceToken]});return;case"space":case"comment":case"newline":case"anchor":case"tag":!n||n.value?t.items.push({start:[this.sourceToken]}):n.sep?n.sep.push(this.sourceToken):n.start.push(this.sourceToken);return;case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{const i=this.flowScalar(this.type);!n||n.value?t.items.push({start:[],key:i,sep:[]}):n.sep?this.stack.push(i):Object.assign(n,{key:i,sep:[]});return}case"flow-map-end":case"flow-seq-end":t.end.push(this.sourceToken);return}const r=this.startBlockValue(t);r?this.stack.push(r):(yield*this.pop(),yield*this.step())}else{const r=this.peek(2);if(r.type==="block-map"&&(this.type==="map-value-ind"&&r.indent===t.indent||this.type==="newline"&&!r.items[r.items.length-1].sep))yield*this.pop(),yield*this.step();else if(this.type==="map-value-ind"&&r.type!=="flow-collection"){const i=pR(r),s=db(i);Vfe(t);const o=t.end.splice(1,t.end.length);o.push(this.sourceToken);const a={type:"block-map",offset:t.offset,indent:t.indent,items:[{start:s,key:t,sep:o}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=a}else yield*this.lineEnd(t)}}flowScalar(t){if(this.onNewLine){let n=this.source.indexOf(`
`)+1;for(;n!==0;)this.onNewLine(this.offset+n),n=this.source.indexOf(`
`,n)+1}return{type:t,offset:this.offset,indent:this.indent,source:this.source}}startBlockValue(t){switch(this.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return this.flowScalar(this.type);case"block-scalar-header":return{type:"block-scalar",offset:this.offset,indent:this.indent,props:[this.sourceToken],source:""};case"flow-map-start":case"flow-seq-start":return{type:"flow-collection",offset:this.offset,indent:this.indent,start:this.sourceToken,items:[],end:[]};case"seq-item-ind":return{type:"block-seq",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken]}]};case"explicit-key-ind":{this.onKeyLine=!0;const n=pR(t),r=db(n);return r.push(this.sourceToken),{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:r,explicitKey:!0}]}}case"map-value-ind":{this.onKeyLine=!0;const n=pR(t),r=db(n);return{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:r,key:null,sep:[this.sourceToken]}]}}}return null}atIndentedComment(t,n){return this.type!=="comment"||this.indent<=n?!1:t.every(r=>r.type==="newline"||r.type==="space")}*documentEnd(t){this.type!=="doc-mode"&&(t.end?t.end.push(this.sourceToken):t.end=[this.sourceToken],this.type==="newline"&&(yield*this.pop()))}*lineEnd(t){switch(this.type){case"comma":case"doc-start":case"doc-end":case"flow-seq-end":case"flow-map-end":case"map-value-ind":yield*this.pop(),yield*this.step();break;case"newline":this.onKeyLine=!1;case"space":case"comment":default:t.end?t.end.push(this.sourceToken):t.end=[this.sourceToken],this.type==="newline"&&(yield*this.pop())}}}function $jt(e){const t=e.prettyErrors!==!1;return{lineCounter:e.lineCounter||t&&new Njt||null,prettyErrors:t}}function Mjt(e,t={}){const{lineCounter:n,prettyErrors:r}=$jt(t),i=new Ojt(n==null?void 0:n.addNewLine),s=new kjt(t);let o=null;for(const a of s.compose(i.parse(e),!0,e.length))if(!o)o=a;else if(o.options.logLevel!=="silent"){o.errors.push(new R2(a.range.slice(0,2),"MULTIPLE_DOCS","Source contains multiple documents; please use YAML.parseAllDocuments()"));break}return r&&n&&(o.errors.forEach(zfe(e,n)),o.warnings.forEach(zfe(e,n))),o}const Ljt="#/definitions/StudyConfig",Fjt="http://json-schema.org/draft-07/schema#",jjt=JSON.parse('{"Answer":{"additionalProperties":false,"description":"The Answer interface is used to define the properties of an answer. Answers are used to define the correct answer for a task. These are generally used in training tasks or if skip logic is required based on the answer.\\n\\nAnswers are used to defined correct answers for a task. These are generally used in training tasks or if skip logic is required based on the answer. The answer field is used to define the correct answer to the question. The acceptableLow and acceptableHigh fields are used to define a range of acceptable answers (these are currently only used for training). For example, if the correct answer is 5, and the acceptableLow is 4 and the acceptableHigh is 6, then any answer between 4 and 6 will be considered correct.\\n\\nHere\'s an example of how to use the Answer interface to define the correct answer to a question:\\n\\n```js { \\"type\\": \\"markdown\\", \\"path\\": \\"<study-name>/assets/question.md\\", \\"response\\": [  {    \\"id\\": \\"response1\\",    \\"prompt\\": \\"What is 2 + 2?\\",    \\"location\\": \\"belowStimulus\\",    \\"type\\": \\"numerical\\"  } ] \\"correctAnswer\\": [{  \\"id\\": \\"response1\\",  \\"answer\\": 4 }] } ```\\n\\nIn this example, the correct answer to the question \\"What is 2 + 2?\\" is 4. If the participant answers 4, they will be considered correct. If they answer anything other than 4, they will be considered incorrect.","properties":{"acceptableHigh":{"description":"The acceptable high value for the answer. This is used to define a range of acceptable answers.","type":"number"},"acceptableLow":{"description":"The acceptable low value for the answer. This is used to define a range of acceptable answers.","type":"number"},"answer":{"description":"The correct answer to the question."},"id":{"description":"The id of the answer. This is used to identify the answer in the data file.","type":"string"}},"required":["id","answer"],"type":"object"},"BaseComponents":{"additionalProperties":{"additionalProperties":false,"properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If present, will override the allow failed training setting in the uiConfig.","type":"boolean"},"config":{"description":"The vega or vega-lite configuration.","type":"object"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"enumerateQuestions":{"description":"Whether to prepend questions with their index (+ 1). This should only be used when all questions are in the same location, e.g. all are in the side bar. If present, will override the enumeration of questions setting in the uiConfig.","type":"boolean"},"forceCompletion":{"description":"Whether to force the video to play until the end. Defaults to true.","type":"boolean"},"helpTextPath":{"description":"The path to the help text file. This is displayed when a participant clicks help. Markdown is supported. If present, will override the help text path set in the uiConfig.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the instructions. If present, will override the instruction location setting in the uiConfig."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"The time in milliseconds to wait before the next button is disabled. If present, will override the next button disable time setting in the uiConfig.","type":"number"},"nextButtonEnableTime":{"description":"The time in milliseconds to wait before the next button is enabled. If present, will override the next button enable time setting in the uiConfig.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the next button. If present, will override the  next button location setting in the uiConfig."},"nextButtonText":{"description":"The text to display on the next button. If present, will override the next button text setting in the uiConfig.","type":"string"},"nextOnEnter":{"description":"Whether enter key should move to the next question. If present, will override the enter key setting in the uiConfig.","type":"boolean"},"parameters":{"anyOf":[{"additionalProperties":{},"description":"The parameters that are passed to the react component. These can be used within your react component to render different things.","type":"object"},{"additionalProperties":{},"description":"The parameters that are passed to the website (iframe). These can be used within your website to render different things.","type":"object"}],"description":"The parameters that are passed to the react component. These can be used within your react component to render different things."},"path":{"anyOf":[{"description":"The path to the markdown file. This should be a relative path from the public folder.","type":"string"},{"description":"The path to the react component. This should be a relative path from the src/public folder.","type":"string"},{"description":"The path to the image. This could be a relative path from the public folder or a url to an external image.","type":"string"},{"description":"The path to the website. This should be a relative path from the public folder or could be an external website.","type":"string"},{"description":"The path to the vega file. This should be a relative path from the public folder.","type":"string"},{"description":"The path to the video. This could be a relative path from the public folder or might be a url to an external website.","type":"string"}],"description":"The path to the markdown file. This should be a relative path from the public folder."},"previousButton":{"description":"Whether to show the previous button. If present, will override the previous button setting in the uiConfig.","type":"boolean"},"previousButtonText":{"description":"The text that is displayed on the previous button. If present, will override the previous button text setting in the uiConfig.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If present, will override the provide feedback setting in the uiConfig.","type":"boolean"},"recordAudio":{"description":"Whether or not we want to utilize think-aloud features. If present, will override the record audio setting in the uiConfig.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. If present, will override the response dividers setting in the uiConfig.","type":"boolean"},"responseOrder":{"description":"The order of the responses. Defaults to \'fixed\'.","enum":["fixed","random"],"type":"string"},"showTitle":{"description":"Controls whether the title should be hidden in the study. If present, will override the title setting in the uiConfig.","type":"boolean"},"showTitleBar":{"description":"Controls whether the title bar should be hidden in the study. If present, will override the title bar setting in the uiConfig.","type":"boolean"},"sidebarWidth":{"description":"The width of the left sidebar. If present, will override the sidebar width setting in the uiConfig.","type":"number"},"style":{"additionalProperties":{"type":"string"},"description":"The style of the image. This is an object with css properties as keys and css values as values.","type":"object"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. If present, will override the training attempts setting in the uiConfig.","type":"number"},"type":{"enum":["markdown","react-component","image","website","questionnaire","vega","video"],"type":"string"},"windowEventDebounceTime":{"description":"Debounce time in milliseconds for automatically tracked window events. If present, will override the window event debounce time setting in the uiConfig.","type":"number"},"withProgressBar":{"description":"Controls whether the progress bar is rendered. If present, will override the progress bar setting in the uiConfig.","type":"boolean"},"withSidebar":{"description":"Controls whether the left sidebar is rendered at all. Required to be true if your response\'s location is set to sidebar for any question. If present, will override the sidebar setting in the uiConfig.","type":"boolean"},"withActions":{"description":"Whether to include vega actions. Defaults to true.","type":"boolean"},"withTimeline":{"description":"Whether to show the video timeline. Defaults to false.","type":"boolean"}},"type":"object"},"description":"The baseComponents is an optional set of components which can help template other components. For example, suppose you have a single HTML file that you want to display to the user several times. Instead of having the same component twice in the `components` list, you can have a single baseComponent with all the information that the two HTML components will share. A great example is showing the same HTML component but with two different questions;\\n\\n Using baseComponents:\\n\\n```js \\"baseComponents\\": { \\"my-image-component\\": { \\"instructionLocation\\": \\"sidebar\\", \\"nextButtonLocation\\": \\"sidebar\\", \\"path\\": \\"<study-name>/assets/my-image.jpg\\", \\"response\\": [   {     \\"id\\": \\"my-image-id\\",     \\"options\\": [\\"Europe\\", \\"Japan\\", \\"USA\\"],     \\"prompt\\": \\"Your Selected Answer:\\",     \\"type\\": \\"dropdown\\"   } ], \\"type\\": \\"image\\" } } ``` In the above code snippet, we have a single base component which holds the information about the type of component, the path to the image, and the response (which is a dropdown containing three choices). Any component which contains the `\\"baseComponent\\":\\"my-image-component\\"` key-value pair will inherit each of these properties. Thus, if we have three different questions which have the same choices and are concerning the same image, we can define our components like below: ```js \\"components\\": { \\"q1\\": { \\"baseComponent\\": \\"my-image-component\\", \\"description\\": \\"Choosing section with largest GDP\\", \\"instruction\\": \\"Which region has the largest GDP?\\" }, \\"q2\\": { \\"baseComponent\\": \\"my-image-component\\", \\"description\\": \\"Choosing section with lowest GDP\\", \\"instruction\\": \\"Which region has the lowest GDP?\\" }, \\"q3\\": { \\"baseComponent\\": \\"my-image-component\\", \\"description\\": \\"Choosing section with highest exports of Wheat\\", \\"instruction\\": \\"Which region had the most Wheat exported in 2022?\\" } } ```","type":"object"},"ButtonsResponse":{"additionalProperties":false,"description":"The ButtonsResponse interface is used to define the properties of a buttons response. ButtonsResponses render as a list of buttons that the participant can click. When a button is clicked, the value of the button is stored in the data file. Participants can cycle through the options using the arrow keys.\\n\\nExample: ```js {   \\"id\\": \\"buttonsResponse\\",   \\"type\\": \\"buttons\\",   \\"prompt\\": \\"Click a button\\",   \\"location\\": \\"belowStimulus\\",   \\"options\\": [     \\"Option 1\\",     \\"Option 2\\",     \\"Option 3\\"   ] } ``` In this example, the participant can click one of the buttons labeled \\"Option 1\\", \\"Option 2\\", or \\"Option 3\\".","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"optionOrder":{"description":"The order in which the buttons are displayed. Defaults to fixed.","enum":["fixed","random"],"type":"string"},"options":{"items":{"anyOf":[{"$ref":"#/definitions/StringOption"},{"type":"string"}]},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"buttons","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider. If present, will override the divider setting in the components or uiConfig.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","options","prompt","type"],"type":"object"},"CheckboxResponse":{"additionalProperties":false,"description":"The CheckboxResponse interface is used to define the properties of a checkbox response. CheckboxResponses render as a checkbox input with user specified options.\\n\\n```js { \\"id\\": \\"q7\\", \\"prompt\\": \\"Checkbox example (not required)\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"checkbox\\", \\"options\\": [\\"Option 1\\", \\"Option 2\\", \\"Option 3\\"] } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"horizontal":{"description":"Whether to render the checkboxes horizontally. Defaults to false, so they render horizontally.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"maxSelections":{"description":"The maximum number of selections that are required.","type":"number"},"minSelections":{"description":"The minimum number of selections that are required.","type":"number"},"optionOrder":{"description":"The order in which the checkboxes are displayed. Defaults to fixed.","enum":["fixed","random"],"type":"string"},"options":{"description":"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.","items":{"anyOf":[{"$ref":"#/definitions/StringOption"},{"type":"string"}]},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"checkbox","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider. If present, will override the divider setting in the components or uiConfig.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"},"withOther":{"description":"Whether to render the checkboxes with an \\"other\\" option.","type":"boolean"}},"required":["id","options","prompt","type"],"type":"object"},"ComponentBlock":{"additionalProperties":false,"description":"The ComponentBlock interface is used to define order properties within the sequence. This is used to define the order of components in a study and the skip logic. It supports random assignment of trials using a pure random assignment and a [latin square](https://en.wikipedia.org/wiki/Latin_square).\\n\\nThe pure random assignment is a random assignment with no guarantees. For example, one component _could_ show up in the first position 10 times in a row. However, this situation is unlikely.\\n\\nHere\'s a snippet that shows how to use the random order:\\n\\n```js { \\"order\\": \\"random\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\" ] } ``` This snippet would produce a random order of the components in the sequence array. For example, the resulting sequence array could be :\\n\\n```js [ [\\"component2\\", \\"component3\\", \\"component1\\"], [\\"component1\\", \\"component3\\", \\"component2\\"], [\\"component3\\", \\"component1\\", \\"component2\\"], ... ] ```\\n\\nThe latin square assignment is a random assignment with some guarantees. It ensures that each component is shown an equal number of times in each position. Here\'s a snippet that shows how to use the latin square order:\\n\\n```js { \\"order\\": \\"latinSquare\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\" ] } ```\\n\\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\\n\\n```js [ [\\"component1\\", \\"component2\\", \\"component3\\"], [\\"component2\\", \\"component3\\", \\"component1\\"], [\\"component3\\", \\"component1\\", \\"component2\\"], ... ] ```\\n\\nThe fixed assignment is a fixed assignment of components. This is used when you want to show the components in a specific order. Here\'s a snippet that shows how to use the fixed order:\\n\\n```js { \\"order\\": \\"fixed\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\" ] } ```\\n\\nThis snippet would produce a fixed order of the components in the sequence array. The resulting sequence array would be:\\n\\n```js [ [\\"component1\\", \\"component2\\", \\"component3\\"], [\\"component1\\", \\"component2\\", \\"component3\\"], [\\"component1\\", \\"component2\\", \\"component3\\"], ... ] ```\\n\\nIn addition to the order property, the ComponentBlock interface also includes the `\\"numSamples\\"` property. This is used to reduce the number of components shown to a participant. This property respects the order property and the guarantees provided by the order property. For example, if you have three components in the components array and you set `\\"numSamples\\"` to 2, you would randomize across the three components while only showing a participant two of them. Here\'s a snippet that shows how to use the numSamples property:\\n\\n```js { \\"order\\": \\"latinSquare\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\" ], \\"numSamples\\": 2 } ```\\n\\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\\n\\n```js [ [\\"component1\\", \\"component2\\"], [\\"component2\\", \\"component3\\"], [\\"component3\\", \\"component1\\"], ... ] ```\\n\\nThe interruptions property specifies an array of interruptions. These can be used for breaks or attention checks. Interruptions can be deterministic or random. Please see [InterruptionBlock](../../type-aliases/InterruptionBlock) for more specific information.\\n\\nThe skip property is used to define skip conditions. This is used to skip to a different component or block based on the response to a component or the number of correct or incorrect responses in a block. Please see [SkipConditions](../../type-aliases/SkipConditions) for more specific information.","properties":{"components":{"description":"The components that are included in the order.","items":{"anyOf":[{"type":"string"},{"$ref":"#/definitions/ComponentBlock"},{"$ref":"#/definitions/DynamicBlock"}]},"type":"array"},"id":{"description":"The id of the block. This is used to identify the block in the SkipConditions and is only required if you want to refer to the whole block in the condition.to property.","type":"string"},"interruptions":{"description":"The interruptions property specifies an array of interruptions. These can be used for breaks or attention checks.","items":{"$ref":"#/definitions/InterruptionBlock"},"type":"array"},"numSamples":{"description":"The number of samples to use for the random assignments. This means you can randomize across 3 components while only showing a participant 2 at a time.","type":"number"},"order":{"description":"The type of order. This can be random (pure random), latinSquare (random with some guarantees), or fixed.","enum":["random","latinSquare","fixed"],"type":"string"},"skip":{"$ref":"#/definitions/SkipConditions","description":"The skip conditions for the block."}},"required":["order","components"],"type":"object"},"ComponentBlockCondition":{"additionalProperties":false,"description":"The ComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect components in a block. All answers on all components in the block are checked.\\n\\nAnswers are checked against the correct answers defined in the IndividualComponent\'s [CorrectAnswer](../Answer). If no correct answers are defined, the component is considered correct by default.\\n\\nYou might use this if a participant answers two questions in a block incorrectly. Here\'s an example of how to use the ComponentBlockCondition:\\n\\n```js { ... \\"skip\\": [ {   \\"check\\": \\"block\\",   \\"condition\\": \\"numIncorrect\\",   \\"value\\": 2,   \\"to\\": \\"end\\" } ] ... } ```\\n\\nIn this example, when the number of components with incorrect responses in the block is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.\\n\\nWhen the condition is met, the participant will immediately be redirected to the component or block specified in the `\\"to\\"` property. If no conditions are met, the participant will continue to the next component in the sequence.","properties":{"check":{"const":"block","description":"The check we\'ll perform.","type":"string"},"condition":{"description":"The condition to check.","enum":["numCorrect","numIncorrect"],"type":"string"},"to":{"description":"The id of the component or block to skip to","type":"string"},"value":{"description":"The number of correct or incorrect responses to check for.","type":"number"}},"required":["check","condition","value","to"],"type":"object"},"ConfigResponseBlockLocation":{"enum":["sidebar","aboveStimulus","belowStimulus"],"type":"string"},"DeterministicInterruption":{"additionalProperties":false,"description":"The DeterministicInterruption interface is used to define an interruption that will be shown at a specific location in the block.\\n\\nFor example, if you want to show an interruption after the second component in the block, you would set firstLocation to 2. If you want to show an interruption after every 3 components, you would set spacing to 3. If you want to show an interruption after the second component and then every 3 components, you would set firstLocation to 2 and spacing to 3.\\n\\nThe components property is an array of the components that will be inserted at the location specified by firstLocation and spacing. These components should reference components in the StudyConfig.components section of the config.\\n\\nHere\'s an example of how to use the DeterministicInterruption:\\n\\n```js { \\"order\\": \\"fixed\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"component6\\" ], \\"interruptions\\": [ {   \\"firstLocation\\": 2,   \\"spacing\\": 3,   \\"components\\": [     \\"interruption1\\",     \\"interruption2\\"   ] } ] } ```\\n\\nThe resulting sequence array could be:\\n\\n```js [ [\\"component1\\", \\"component2\\", \\"interruption1\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"interruption2\\", \\"component6\\"], [\\"component1\\", \\"component2\\", \\"interruption1\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"interruption2\\", \\"component6\\"], [\\"component1\\", \\"component2\\", \\"interruption1\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"interruption2\\", \\"component6\\"], ... ] ```","properties":{"components":{"description":"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.","items":{"type":"string"},"type":"array"},"firstLocation":{"description":"The Location of the first instance of the interruption. If this is set to 2, the interruption will be shown after the second component (inserted at index 2).","type":"number"},"spacing":{"description":"The number of components between breaks.","type":"number"}},"required":["firstLocation","spacing","components"],"type":"object"},"DropdownResponse":{"additionalProperties":false,"description":"The DropdownResponse interface is used to define the properties of a dropdown response. DropdownResponses render as a select input with user specified options.\\n\\nExample: ```js { \\"id\\": \\"q-color\\", \\"prompt\\": \\"What is your favorite color?\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"dropdown\\", \\"placeholder\\": \\"Please choose your favorite color\\", \\"options\\": [\\"Red\\", \\"Blue\\"] } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"options":{"description":"The options that are displayed in the dropdown.","items":{"anyOf":[{"$ref":"#/definitions/StringOption"},{"type":"string"}]},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"placeholder":{"description":"The placeholder text that is displayed in the input.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"dropdown","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider. If present, will override the divider setting in the components or uiConfig.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","options","prompt","type"],"type":"object"},"DynamicBlock":{"additionalProperties":false,"description":"The DynamicBlock interface is used to define a block where displayed components are controlled by a function. This is useful when you want to generate the sequence based on answers to previous questions or other factors.\\n\\nThe functionPath property is a path to the function that generates the components. This should be a relative path from the src/public folder.\\n\\nHere\'s an example of how to use the DynamicBlock:\\n\\n```js {   \\"id\\": \\"funcBlock\\",   \\"order\\": \\"dynamic\\",   \\"functionPath\\": \\"<study-name>/assets/function.js\\",   \\"parameters\\": {     \\"param1\\": \\"value1\\",     \\"param2\\": \\"value2\\"   } } ```","properties":{"functionPath":{"description":"The path to the function that generates the components. This should be a relative path from the src/public folder.","type":"string"},"id":{"description":"The id of the block. This is used to identify the block in the SkipConditions and is only required if you want to refer to the whole block in the condition.to property.","type":"string"},"order":{"const":"dynamic","description":"The type of order. This can be random (pure random), latinSquare (random with some guarantees), or fixed.","type":"string"},"parameters":{"additionalProperties":{},"description":"The parameters that are passed to the function. These can be used within your function to render different things.","type":"object"}},"required":["id","order","functionPath"],"type":"object"},"ImageComponent":{"additionalProperties":false,"description":"The ImageComponent interface is used to define the properties of an image component. This component is used to render an image with optional styling.\\n\\nFor example, to render an image with a path of `path/to/study/assets/image.jpg` and a max width of 50%, you would use the following snippet: ```js { \\"type\\": \\"image\\", \\"path\\": \\"<study-name>/assets/image.jpg\\", \\"style\\": { \\"maxWidth\\": \\"50%\\" } } ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If present, will override the allow failed training setting in the uiConfig.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"enumerateQuestions":{"description":"Whether to prepend questions with their index (+ 1). This should only be used when all questions are in the same location, e.g. all are in the side bar. If present, will override the enumeration of questions setting in the uiConfig.","type":"boolean"},"helpTextPath":{"description":"The path to the help text file. This is displayed when a participant clicks help. Markdown is supported. If present, will override the help text path set in the uiConfig.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the instructions. If present, will override the instruction location setting in the uiConfig."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"The time in milliseconds to wait before the next button is disabled. If present, will override the next button disable time setting in the uiConfig.","type":"number"},"nextButtonEnableTime":{"description":"The time in milliseconds to wait before the next button is enabled. If present, will override the next button enable time setting in the uiConfig.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the next button. If present, will override the  next button location setting in the uiConfig."},"nextButtonText":{"description":"The text to display on the next button. If present, will override the next button text setting in the uiConfig.","type":"string"},"nextOnEnter":{"description":"Whether enter key should move to the next question. If present, will override the enter key setting in the uiConfig.","type":"boolean"},"path":{"description":"The path to the image. This could be a relative path from the public folder or a url to an external image.","type":"string"},"previousButton":{"description":"Whether to show the previous button. If present, will override the previous button setting in the uiConfig.","type":"boolean"},"previousButtonText":{"description":"The text that is displayed on the previous button. If present, will override the previous button text setting in the uiConfig.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If present, will override the provide feedback setting in the uiConfig.","type":"boolean"},"recordAudio":{"description":"Whether or not we want to utilize think-aloud features. If present, will override the record audio setting in the uiConfig.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. If present, will override the response dividers setting in the uiConfig.","type":"boolean"},"responseOrder":{"description":"The order of the responses. Defaults to \'fixed\'.","enum":["fixed","random"],"type":"string"},"showTitle":{"description":"Controls whether the title should be hidden in the study. If present, will override the title setting in the uiConfig.","type":"boolean"},"showTitleBar":{"description":"Controls whether the title bar should be hidden in the study. If present, will override the title bar setting in the uiConfig.","type":"boolean"},"sidebarWidth":{"description":"The width of the left sidebar. If present, will override the sidebar width setting in the uiConfig.","type":"number"},"style":{"additionalProperties":{"type":"string"},"description":"The style of the image. This is an object with css properties as keys and css values as values.","type":"object"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. If present, will override the training attempts setting in the uiConfig.","type":"number"},"type":{"const":"image","type":"string"},"windowEventDebounceTime":{"description":"Debounce time in milliseconds for automatically tracked window events. If present, will override the window event debounce time setting in the uiConfig.","type":"number"},"withProgressBar":{"description":"Controls whether the progress bar is rendered. If present, will override the progress bar setting in the uiConfig.","type":"boolean"},"withSidebar":{"description":"Controls whether the left sidebar is rendered at all. Required to be true if your response\'s location is set to sidebar for any question. If present, will override the sidebar setting in the uiConfig.","type":"boolean"}},"required":["path","response","type"],"type":"object"},"IndividualComponent":{"anyOf":[{"$ref":"#/definitions/MarkdownComponent"},{"$ref":"#/definitions/ReactComponent"},{"$ref":"#/definitions/ImageComponent"},{"$ref":"#/definitions/WebsiteComponent"},{"$ref":"#/definitions/QuestionnaireComponent"},{"$ref":"#/definitions/VegaComponent"},{"$ref":"#/definitions/VideoComponent"}]},"IndividualComponentAllResponsesCondition":{"additionalProperties":false,"description":"The IndividualComponentAllResponsesCondition interface is used to define a SkipCondition based on all answers to a specific component. The skip logic will be checked for every component in the block that has the specified name.\\n\\n:::info\\n\\nIf you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.\\n\\n:::\\n\\n\\nHere\'s an example of how to use the IndividualComponentAllResponsesCondition:\\n\\n```js { ... \\"skip\\": [ {   \\"name\\": \\"attentionCheck\\",   \\"check\\": \\"responses\\",   \\"to\\": \\"end\\" } ] ... } ```\\n\\nIn this example, if all responses to the component with the ID \\"attentionCheck\\" are correct, the participant will be redirected to the end of the study. If any response is incorrect, the participant will continue to the next component in the sequence.","properties":{"check":{"const":"responses","description":"The check we\'ll perform.","type":"string"},"name":{"description":"The name of the component to check.","type":"string"},"to":{"description":"The id of the component or block to skip to","type":"string"}},"required":["name","check","to"],"type":"object"},"IndividualComponentSingleResponseCondition":{"additionalProperties":false,"description":"The IndividualComponentSingleResponseCondition interface is used to define a SkipCondition based on a single answer to a specific component. The skip logic will be checked for every component in the block that has the specified name.\\n\\n:::info\\n\\nIf you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.\\n\\n:::\\n\\nFor example, if you want to skip to a different component based on a response to a specific component, you would use the IndividualComponentSingleResponseCondition. Here\'s an example of how to use the IndividualComponentSingleResponseCondition:\\n\\n```js { ... \\"skip\\": [ {   \\"name\\": \\"attentionCheck\\",   \\"check\\": \\"response\\",   \\"responseId\\": \\"attentionCheckResponse\\",   \\"value\\": \\"the right answer\\",   \\"comparison\\": \\"equal\\",   \\"to\\": \\"end\\" } ] ... } ```\\n\\nIn this example, we assign our skip logic to the component whose ID is \\"attentionCheck\\". If the answer given to the response \\"attentionCheckResponse\\" is equal to \\"the right answer\\", then the user will be redirected to the end of the study. If the response is _not_ equal to \\"the right answer\\", then the participant will continue to the next component in the sequence.","properties":{"check":{"const":"response","description":"The check we\'ll perform.","type":"string"},"comparison":{"description":"The comparison to use.","enum":["equal","notEqual"],"type":"string"},"name":{"description":"The name of the component to check.","type":"string"},"responseId":{"description":"The response id to check.","type":"string"},"to":{"description":"The id of the component or block to skip to","type":"string"},"value":{"description":"The value to check.","type":["string","number"]}},"required":["name","check","responseId","value","comparison","to"],"type":"object"},"InheritedComponent":{"additionalProperties":false,"description":"An InheritedComponent is a component that inherits properties from a baseComponent. This is used to avoid repeating properties in components. This also means that components in the baseComponents object can be partially defined, while components in the components object can inherit from them and must be fully defined and include all properties (after potentially merging with a base component).","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If present, will override the allow failed training setting in the uiConfig.","type":"boolean"},"baseComponent":{"type":"string"},"config":{"description":"The vega or vega-lite configuration.","type":"object"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"enumerateQuestions":{"description":"Whether to prepend questions with their index (+ 1). This should only be used when all questions are in the same location, e.g. all are in the side bar. If present, will override the enumeration of questions setting in the uiConfig.","type":"boolean"},"forceCompletion":{"description":"Whether to force the video to play until the end. Defaults to true.","type":"boolean"},"helpTextPath":{"description":"The path to the help text file. This is displayed when a participant clicks help. Markdown is supported. If present, will override the help text path set in the uiConfig.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the instructions. If present, will override the instruction location setting in the uiConfig."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"The time in milliseconds to wait before the next button is disabled. If present, will override the next button disable time setting in the uiConfig.","type":"number"},"nextButtonEnableTime":{"description":"The time in milliseconds to wait before the next button is enabled. If present, will override the next button enable time setting in the uiConfig.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the next button. If present, will override the  next button location setting in the uiConfig."},"nextButtonText":{"description":"The text to display on the next button. If present, will override the next button text setting in the uiConfig.","type":"string"},"nextOnEnter":{"description":"Whether enter key should move to the next question. If present, will override the enter key setting in the uiConfig.","type":"boolean"},"parameters":{"anyOf":[{"additionalProperties":{},"description":"The parameters that are passed to the react component. These can be used within your react component to render different things.","type":"object"},{"additionalProperties":{},"description":"The parameters that are passed to the website (iframe). These can be used within your website to render different things.","type":"object"}],"description":"The parameters that are passed to the react component. These can be used within your react component to render different things."},"path":{"anyOf":[{"description":"The path to the markdown file. This should be a relative path from the public folder.","type":"string"},{"description":"The path to the react component. This should be a relative path from the src/public folder.","type":"string"},{"description":"The path to the image. This could be a relative path from the public folder or a url to an external image.","type":"string"},{"description":"The path to the website. This should be a relative path from the public folder or could be an external website.","type":"string"},{"description":"The path to the vega file. This should be a relative path from the public folder.","type":"string"},{"description":"The path to the video. This could be a relative path from the public folder or might be a url to an external website.","type":"string"}],"description":"The path to the markdown file. This should be a relative path from the public folder."},"previousButton":{"description":"Whether to show the previous button. If present, will override the previous button setting in the uiConfig.","type":"boolean"},"previousButtonText":{"description":"The text that is displayed on the previous button. If present, will override the previous button text setting in the uiConfig.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If present, will override the provide feedback setting in the uiConfig.","type":"boolean"},"recordAudio":{"description":"Whether or not we want to utilize think-aloud features. If present, will override the record audio setting in the uiConfig.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. If present, will override the response dividers setting in the uiConfig.","type":"boolean"},"responseOrder":{"description":"The order of the responses. Defaults to \'fixed\'.","enum":["fixed","random"],"type":"string"},"showTitle":{"description":"Controls whether the title should be hidden in the study. If present, will override the title setting in the uiConfig.","type":"boolean"},"showTitleBar":{"description":"Controls whether the title bar should be hidden in the study. If present, will override the title bar setting in the uiConfig.","type":"boolean"},"sidebarWidth":{"description":"The width of the left sidebar. If present, will override the sidebar width setting in the uiConfig.","type":"number"},"style":{"additionalProperties":{"type":"string"},"description":"The style of the image. This is an object with css properties as keys and css values as values.","type":"object"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. If present, will override the training attempts setting in the uiConfig.","type":"number"},"type":{"enum":["markdown","react-component","image","website","questionnaire","vega","video"],"type":"string"},"windowEventDebounceTime":{"description":"Debounce time in milliseconds for automatically tracked window events. If present, will override the window event debounce time setting in the uiConfig.","type":"number"},"withProgressBar":{"description":"Controls whether the progress bar is rendered. If present, will override the progress bar setting in the uiConfig.","type":"boolean"},"withSidebar":{"description":"Controls whether the left sidebar is rendered at all. Required to be true if your response\'s location is set to sidebar for any question. If present, will override the sidebar setting in the uiConfig.","type":"boolean"},"withActions":{"description":"Whether to include vega actions. Defaults to true.","type":"boolean"},"withTimeline":{"description":"Whether to show the video timeline. Defaults to false.","type":"boolean"}},"required":["baseComponent"],"type":"object"},"InterruptionBlock":{"anyOf":[{"$ref":"#/definitions/DeterministicInterruption"},{"$ref":"#/definitions/RandomInterruption"}],"description":"The InterruptionBlock interface is used to define interruptions in a block. These can be used for breaks or attention checks. Interruptions can be deterministic or random."},"LikertResponse":{"additionalProperties":false,"description":"The LikertResponse interface is used to define the properties of a likert response. LikertResponses render as radio buttons with a user specified number of options, which can be controlled through the numItems. For example, numItems: 5 will render 5 radio buttons, and numItems: 7 will render 7 radio buttons. LikertResponses can also have a description, and left and right labels. The left and right labels are used to label the left and right ends of the likert scale with values such as \'Strongly Disagree\' and \'Strongly Agree\'.\\n\\nExample for a five-point Likert Scale:\\n\\n```js { \\"id\\": \\"q-satisfaction\\", \\"prompt\\": \\"Rate your satisfaction from 1 (not enjoyable) to 5 (very enjoyable).\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"likert\\", \\"leftLabel\\": \\"Not Enjoyable\\", \\"rightLabel\\": \\"Very Enjoyable\\", \\"numItems\\": 5 } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"leftLabel":{"description":"The left label of the likert scale. E.g Strongly Disagree","type":"string"},"location":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"numItems":{"description":"The number of options to render.","type":"number"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"rightLabel":{"description":"The right label of the likert scale. E.g Strongly Agree","type":"string"},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"likert","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider. If present, will override the divider setting in the components or uiConfig.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","numItems","prompt","type"],"type":"object"},"LongTextResponse":{"additionalProperties":false,"description":"The LongTextResponse interface is used to define the properties of a long text response. LongTextResponses render as a text area that accepts any text and can optionally have a placeholder. ```js { \\"id\\": \\"q-name\\", \\"prompt\\": \\"What is your first name?\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"longText\\", \\"placeholder\\": \\"Please enter your first name\\" } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"placeholder":{"description":"The placeholder text that is displayed in the input.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"longText","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider. If present, will override the divider setting in the components or uiConfig.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","prompt","type"],"type":"object"},"MarkdownComponent":{"additionalProperties":false,"description":"The MarkdownComponent interface is used to define the properties of a markdown component. The components can be used to render many different things, such as consent forms, instructions, and debriefs. Additionally, you can use the markdown component to render images, videos, and other media, with supporting text. Markdown components can have responses (e.g. in a consent form), or no responses (e.g. in a help text file). Here\'s an example with no responses for a simple help text file:\\n\\n```js { \\"type\\": \\"markdown\\", \\"path\\": \\"<study-name>/assets/help.md\\", \\"response\\": [] } ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If present, will override the allow failed training setting in the uiConfig.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"enumerateQuestions":{"description":"Whether to prepend questions with their index (+ 1). This should only be used when all questions are in the same location, e.g. all are in the side bar. If present, will override the enumeration of questions setting in the uiConfig.","type":"boolean"},"helpTextPath":{"description":"The path to the help text file. This is displayed when a participant clicks help. Markdown is supported. If present, will override the help text path set in the uiConfig.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the instructions. If present, will override the instruction location setting in the uiConfig."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"The time in milliseconds to wait before the next button is disabled. If present, will override the next button disable time setting in the uiConfig.","type":"number"},"nextButtonEnableTime":{"description":"The time in milliseconds to wait before the next button is enabled. If present, will override the next button enable time setting in the uiConfig.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the next button. If present, will override the  next button location setting in the uiConfig."},"nextButtonText":{"description":"The text to display on the next button. If present, will override the next button text setting in the uiConfig.","type":"string"},"nextOnEnter":{"description":"Whether enter key should move to the next question. If present, will override the enter key setting in the uiConfig.","type":"boolean"},"path":{"description":"The path to the markdown file. This should be a relative path from the public folder.","type":"string"},"previousButton":{"description":"Whether to show the previous button. If present, will override the previous button setting in the uiConfig.","type":"boolean"},"previousButtonText":{"description":"The text that is displayed on the previous button. If present, will override the previous button text setting in the uiConfig.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If present, will override the provide feedback setting in the uiConfig.","type":"boolean"},"recordAudio":{"description":"Whether or not we want to utilize think-aloud features. If present, will override the record audio setting in the uiConfig.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. If present, will override the response dividers setting in the uiConfig.","type":"boolean"},"responseOrder":{"description":"The order of the responses. Defaults to \'fixed\'.","enum":["fixed","random"],"type":"string"},"showTitle":{"description":"Controls whether the title should be hidden in the study. If present, will override the title setting in the uiConfig.","type":"boolean"},"showTitleBar":{"description":"Controls whether the title bar should be hidden in the study. If present, will override the title bar setting in the uiConfig.","type":"boolean"},"sidebarWidth":{"description":"The width of the left sidebar. If present, will override the sidebar width setting in the uiConfig.","type":"number"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. If present, will override the training attempts setting in the uiConfig.","type":"number"},"type":{"const":"markdown","type":"string"},"windowEventDebounceTime":{"description":"Debounce time in milliseconds for automatically tracked window events. If present, will override the window event debounce time setting in the uiConfig.","type":"number"},"withProgressBar":{"description":"Controls whether the progress bar is rendered. If present, will override the progress bar setting in the uiConfig.","type":"boolean"},"withSidebar":{"description":"Controls whether the left sidebar is rendered at all. Required to be true if your response\'s location is set to sidebar for any question. If present, will override the sidebar setting in the uiConfig.","type":"boolean"}},"required":["path","response","type"],"type":"object"},"MatrixResponse":{"additionalProperties":false,"description":"The MatrixResponse interface is used to define the properties of a matrix radio or matrix checkbox response. Question options are rendered as rows of the matrix, each row containing its own radio/checkbox group. Answer options are rendered as column headers of the matrix. These can be customized by passing in the custom strings into the answer options. Alternatively, `answerOptions` can be set to one of the following custom strings: \'satisfaction5\',\'satisfaction7\', \'likely5\', \'likely7\'. This will automatically generate the appropriate headers for the matrix.\\n\\nExample for a 5-scale satisfaction matrix with three questions:\\n\\n```js { \\"id\\": \\"multi-satisfaction\\", \\"prompt\\": \\"Rate your satisfaction from 1 (not enjoyable) to 5 (very enjoyable) for the following items.\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"matrix-radio\\", \\"answerOptions\\": \\"satisfaction5\\", \\"questionOptions\\": [  \\"The tool we created\\",  \\"The technique we developed\\",  \\"The authors of the tools\\" ] } ```\\n\\nHere\'s an example using custom columns (answerOptions):\\n\\n```js { \\"id\\": \\"multi-custom\\", \\"prompt\\": \\"Which categories do the following items belong to?\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"matrix-checkbox\\", \\"answerOptions\\": [  \\"Has Legs\\",  \\"Has Wings\\",  \\"Can Swim\\" ], \\"questionOptions\\": [  \\"Dog\\",  \\"Snake\\",  \\"Eagle\\",  \\"Salmon\\",  \\"Platypus\\" ]\\n\\n} ```","properties":{"answerOptions":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"const":"likely5","type":"string"},{"const":"likely7","type":"string"},{"const":"satisfaction5","type":"string"},{"const":"satisfaction7","type":"string"}],"description":"The answer options (columns). We provide some shortcuts for a likelihood scale (ranging from highly unlikely to highly likely) and a satisfaction scale (ranging from highly unsatisfied to highly satisfied) with either 5 or 7 options to choose from."},"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"questionOptions":{"description":"The question options (rows) are the prompts for each response you\'d like to record.","items":{"type":"string"},"type":"array"},"questionOrder":{"description":"The order in which the questions are displayed. Defaults to fixed.","enum":["fixed","random"],"type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"enum":["matrix-radio","matrix-checkbox"],"type":"string"},"withDivider":{"description":"Renders the response with a trailing divider. If present, will override the divider setting in the components or uiConfig.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["answerOptions","id","prompt","questionOptions","type"],"type":"object"},"NumberOption":{"additionalProperties":false,"description":"The NumberOption interface is used to define the options for a slider response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.","properties":{"label":{"description":"The label displayed to participants.","type":"string"},"value":{"description":"The value stored in the participant\'s data.","type":"number"}},"required":["label","value"],"type":"object"},"NumericalResponse":{"additionalProperties":false,"description":"The NumericalResponse interface is used to define the properties of a numerical response. NumericalResponses render as a text input that only accepts numbers, and can optionally have a min and max value, or a placeholder.\\n\\nExample: ```js { \\"id\\": \\"q-numerical\\", \\"prompt\\": \\"Numerical example\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"numerical\\", \\"placeholder\\": \\"Enter your age, range from 0 - 120\\", \\"max\\": 120, \\"min\\": 0 } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"max":{"description":"The maximum value that is accepted in the input.","type":"number"},"min":{"description":"The minimum value that is accepted in the input.","type":"number"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"placeholder":{"description":"The placeholder text that is displayed in the input.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"numerical","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider. If present, will override the divider setting in the components or uiConfig.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","prompt","type"],"type":"object"},"QuestionnaireComponent":{"additionalProperties":false,"description":"A QuestionnaireComponent is used to render simple questions that require a response. The main use case of this component type is to ask participants questions when you don\'t need to render a stimulus. Please note, that even though we\'re not using a stimulus, the responses still require a `location`. For example this could be used to collect demographic information from a participant using the following snippet:\\n\\n```js { \\"type\\": \\"questionnaire\\", \\"response\\": [  {    \\"id\\": \\"gender\\",    \\"prompt\\": \\"Gender:\\",    \\"location\\": \\"belowStimulus\\",    \\"type\\": \\"checkbox\\",    \\"options\\": [\\"Man\\", \\"Woman\\", \\"Genderqueer\\", \\"Third-gender\\", ...]  } ] } ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If present, will override the allow failed training setting in the uiConfig.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"enumerateQuestions":{"description":"Whether to prepend questions with their index (+ 1). This should only be used when all questions are in the same location, e.g. all are in the side bar. If present, will override the enumeration of questions setting in the uiConfig.","type":"boolean"},"helpTextPath":{"description":"The path to the help text file. This is displayed when a participant clicks help. Markdown is supported. If present, will override the help text path set in the uiConfig.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the instructions. If present, will override the instruction location setting in the uiConfig."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"The time in milliseconds to wait before the next button is disabled. If present, will override the next button disable time setting in the uiConfig.","type":"number"},"nextButtonEnableTime":{"description":"The time in milliseconds to wait before the next button is enabled. If present, will override the next button enable time setting in the uiConfig.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the next button. If present, will override the  next button location setting in the uiConfig."},"nextButtonText":{"description":"The text to display on the next button. If present, will override the next button text setting in the uiConfig.","type":"string"},"nextOnEnter":{"description":"Whether enter key should move to the next question. If present, will override the enter key setting in the uiConfig.","type":"boolean"},"previousButton":{"description":"Whether to show the previous button. If present, will override the previous button setting in the uiConfig.","type":"boolean"},"previousButtonText":{"description":"The text that is displayed on the previous button. If present, will override the previous button text setting in the uiConfig.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If present, will override the provide feedback setting in the uiConfig.","type":"boolean"},"recordAudio":{"description":"Whether or not we want to utilize think-aloud features. If present, will override the record audio setting in the uiConfig.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. If present, will override the response dividers setting in the uiConfig.","type":"boolean"},"responseOrder":{"description":"The order of the responses. Defaults to \'fixed\'.","enum":["fixed","random"],"type":"string"},"showTitle":{"description":"Controls whether the title should be hidden in the study. If present, will override the title setting in the uiConfig.","type":"boolean"},"showTitleBar":{"description":"Controls whether the title bar should be hidden in the study. If present, will override the title bar setting in the uiConfig.","type":"boolean"},"sidebarWidth":{"description":"The width of the left sidebar. If present, will override the sidebar width setting in the uiConfig.","type":"number"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. If present, will override the training attempts setting in the uiConfig.","type":"number"},"type":{"const":"questionnaire","type":"string"},"windowEventDebounceTime":{"description":"Debounce time in milliseconds for automatically tracked window events. If present, will override the window event debounce time setting in the uiConfig.","type":"number"},"withProgressBar":{"description":"Controls whether the progress bar is rendered. If present, will override the progress bar setting in the uiConfig.","type":"boolean"},"withSidebar":{"description":"Controls whether the left sidebar is rendered at all. Required to be true if your response\'s location is set to sidebar for any question. If present, will override the sidebar setting in the uiConfig.","type":"boolean"}},"required":["response","type"],"type":"object"},"RadioResponse":{"additionalProperties":false,"description":"The RadioResponse interface is used to define the properties of a radio response. Radios have only one allowable selection. RadioResponses render as a radio input with user specified options, and optionally left and right labels.\\n\\nExample: ```js { \\"id\\": \\"q-radio\\", \\"prompt\\": \\"Radio button example\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"radio\\", \\"options\\": [\\"Option 1\\", \\"Option 2\\"] } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"horizontal":{"description":"Whether to render the radio buttons horizontally. Defaults to false, so they render horizontally.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"leftLabel":{"description":"The left label of the radio group. Used in Likert scales for example","type":"string"},"location":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"optionOrder":{"description":"The order in which the radio buttons are displayed. Defaults to fixed.","enum":["fixed","random"],"type":"string"},"options":{"description":"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.","items":{"anyOf":[{"$ref":"#/definitions/StringOption"},{"type":"string"}]},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"rightLabel":{"description":"The right label of the radio group. Used in Likert scales for example","type":"string"},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"radio","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider. If present, will override the divider setting in the components or uiConfig.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"},"withOther":{"description":"Whether to render the radios with an \\"other\\" option.","type":"boolean"}},"required":["id","options","prompt","type"],"type":"object"},"RandomInterruption":{"additionalProperties":false,"description":"The RandomInterruption interface is used to define an interruption that will be shown randomly in the block.\\n\\nFor example, if you want to show a single interruption randomly in the block, you would set `\\"spacing\\"` to \\"random\\" and `\\"numInterruptions\\"` to 1. If you want to show 3 interruptions randomly in the block, you would set `\\"spacing\\"` to \\"random\\" and `\\"numInterruptions\\"` to 3.\\n\\nThe components property is an array of the components that will be inserted randomly in the block. These components should reference components in the StudyConfig.components section of the config.\\n\\nHere\'s an example of how to use the RandomInterruption:\\n\\n```js { \\"order\\": \\"fixed\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"component6\\" ], \\"interruptions\\": [ {   \\"spacing\\": \\"random\\",   \\"numInterruptions\\": 3,   \\"components\\": [     \\"interruption1\\",     \\"interruption2\\"   ] } ] } ```\\n\\nThe resulting sequence array could be:\\n\\n```js [ [\\"component1\\", \\"interruption1\\", \\"interruption2\\", \\"component2\\", \\"interruption1\\", \\"interruption2\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"interruption1\\", \\"interruption2\\", \\"component6\\"], [\\"component1\\", \\"interruption1\\", \\"interruption2\\", \\"component2\\", \\"interruption1\\", \\"interruption2\\", \\"component3\\", \\"component4\\", \\"interruption1\\", \\"interruption2\\", \\"component5\\", \\"component6\\"], [\\"component1\\", \\"component2\\" \\"interruption1\\", \\"interruption2\\", \\"component3\\", \\"interruption1\\", \\"interruption2\\", \\"component4\\", \\"component5\\", \\"interruption1\\", \\"interruption2\\", \\"component6\\"], ... ] ```","properties":{"components":{"description":"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.","items":{"type":"string"},"type":"array"},"numInterruptions":{"description":"The number of times the interruption will be randomly added","type":"number"},"spacing":{"const":"random","description":"If spacing is set to random, reVISit will add interruptions randomly. These interruptions will not ever be displayed as the first component in the block.","type":"string"}},"required":["spacing","numInterruptions","components"],"type":"object"},"ReactComponent":{"additionalProperties":false,"description":"The ReactComponent interface is used to define the properties of a react component. This component is used to render react code with certain parameters. These parameters can be used within your react code to render different things.\\n\\nUnlike other types of components, the path for a React component is relative to the `src/public/` folder. Similar to our standard assets, we suggest creating a folder named `src/public/{studyName}/assets` to house all of the React component assets for a particular study. Your React component which you link to in the path must be default exported from its file.\\n\\nReact components created this way have a generic prop type passed to the component on render, `<StimulusParams<T>>`, which has the following types.\\n\\n```ts { parameters: T; setAnswer: ({ status, provenanceGraph, answers }: { status: boolean, provenanceGraph?: TrrackedProvenance, answers: Record<string, any> }) => void } ```\\n\\nparameters is the same object passed in from the ReactComponent type below, allowing you to pass options in from the config to your component. setAnswer is a callback function allowing the creator of the ReactComponent to programmatically set the answer, as well as the provenance graph. This can be useful if you don\'t use the default answer interface, and instead have something more unique.\\n\\nSo, for example, if I had the following ReactComponent in my config ```js { type: \'react-component\'; path: \'my_study/CoolComponent.tsx\'; parameters: {  name: \'Zach\';  age: 26; } } ```\\n\\nMy react component, CoolComponent.tsx, would exist in src/public/my_study/assets, and look something like this\\n\\n```ts export default function CoolComponent({ parameters, setAnswer }: StimulusParams<{name: string, age: number}>) { // render something } ```\\n\\nFor in depth examples, see the following studies, and their associated codebases. https://revisit.dev/study/demo-click-accuracy-test (https://github.com/revisit-studies/study/tree/v2.1.1/src/public/demo-click-accuracy-test/assets) https://revisit.dev/study/example-brush-interactions (https://github.com/revisit-studies/study/tree/v2.1.1/src/public/example-brush-interactions/assets)","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If present, will override the allow failed training setting in the uiConfig.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"enumerateQuestions":{"description":"Whether to prepend questions with their index (+ 1). This should only be used when all questions are in the same location, e.g. all are in the side bar. If present, will override the enumeration of questions setting in the uiConfig.","type":"boolean"},"helpTextPath":{"description":"The path to the help text file. This is displayed when a participant clicks help. Markdown is supported. If present, will override the help text path set in the uiConfig.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the instructions. If present, will override the instruction location setting in the uiConfig."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"The time in milliseconds to wait before the next button is disabled. If present, will override the next button disable time setting in the uiConfig.","type":"number"},"nextButtonEnableTime":{"description":"The time in milliseconds to wait before the next button is enabled. If present, will override the next button enable time setting in the uiConfig.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the next button. If present, will override the  next button location setting in the uiConfig."},"nextButtonText":{"description":"The text to display on the next button. If present, will override the next button text setting in the uiConfig.","type":"string"},"nextOnEnter":{"description":"Whether enter key should move to the next question. If present, will override the enter key setting in the uiConfig.","type":"boolean"},"parameters":{"additionalProperties":{},"description":"The parameters that are passed to the react component. These can be used within your react component to render different things.","type":"object"},"path":{"description":"The path to the react component. This should be a relative path from the src/public folder.","type":"string"},"previousButton":{"description":"Whether to show the previous button. If present, will override the previous button setting in the uiConfig.","type":"boolean"},"previousButtonText":{"description":"The text that is displayed on the previous button. If present, will override the previous button text setting in the uiConfig.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If present, will override the provide feedback setting in the uiConfig.","type":"boolean"},"recordAudio":{"description":"Whether or not we want to utilize think-aloud features. If present, will override the record audio setting in the uiConfig.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. If present, will override the response dividers setting in the uiConfig.","type":"boolean"},"responseOrder":{"description":"The order of the responses. Defaults to \'fixed\'.","enum":["fixed","random"],"type":"string"},"showTitle":{"description":"Controls whether the title should be hidden in the study. If present, will override the title setting in the uiConfig.","type":"boolean"},"showTitleBar":{"description":"Controls whether the title bar should be hidden in the study. If present, will override the title bar setting in the uiConfig.","type":"boolean"},"sidebarWidth":{"description":"The width of the left sidebar. If present, will override the sidebar width setting in the uiConfig.","type":"number"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. If present, will override the training attempts setting in the uiConfig.","type":"number"},"type":{"const":"react-component","type":"string"},"windowEventDebounceTime":{"description":"Debounce time in milliseconds for automatically tracked window events. If present, will override the window event debounce time setting in the uiConfig.","type":"number"},"withProgressBar":{"description":"Controls whether the progress bar is rendered. If present, will override the progress bar setting in the uiConfig.","type":"boolean"},"withSidebar":{"description":"Controls whether the left sidebar is rendered at all. Required to be true if your response\'s location is set to sidebar for any question. If present, will override the sidebar setting in the uiConfig.","type":"boolean"}},"required":["path","response","type"],"type":"object"},"ReactiveResponse":{"additionalProperties":false,"description":"The ReactiveResponse interface is used to define the properties of a reactive response. ReactiveResponses render as a list, that is connected to a WebsiteComponent, VegaComponent, or ReactComponent. When data is sent from the components, it is displayed in the list.\\n\\n```js { \\"id\\": \\"reactiveResponse\\", \\"prompt\\": \\"Answer clicked in the stimulus\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"reactive\\" } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"reactive","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider. If present, will override the divider setting in the components or uiConfig.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","prompt","type"],"type":"object"},"RepeatedComponentBlockCondition":{"additionalProperties":false,"description":"The RepeatedComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect repeated components. You might use this if you need to check if an attention check was failed multiple times. This is similar to the [ComponentBlockCondition](../ComponentBlockCondition), but it only checks a specific repeated component.\\n\\nHere\'s an example of how to use the RepeatedComponentBlockCondition:\\n\\n```js { ... \\"skip\\": [ {   \\"name\\": \\"attentionCheck\\",   \\"check\\": \\"repeatedComponent\\",   \\"condition\\": \\"numIncorrect\\",   \\"value\\": 2,   \\"to\\": \\"end\\" } ] ... } ```\\n\\nIn this example, when the number of incorrect responses to the repeated component with the name \\"attentionCheck\\" is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.","properties":{"check":{"const":"repeatedComponent","description":"The check we\'ll perform.","type":"string"},"condition":{"description":"The condition to check.","enum":["numCorrect","numIncorrect"],"type":"string"},"name":{"description":"The name of the repeated component to check (e.g. attentionCheck).","type":"string"},"to":{"description":"The id of the component or block to skip to","type":"string"},"value":{"description":"The number of correct or incorrect responses to check for.","type":"number"}},"required":["name","check","condition","value","to"],"type":"object"},"Response":{"anyOf":[{"$ref":"#/definitions/NumericalResponse"},{"$ref":"#/definitions/ShortTextResponse"},{"$ref":"#/definitions/LongTextResponse"},{"$ref":"#/definitions/LikertResponse"},{"$ref":"#/definitions/DropdownResponse"},{"$ref":"#/definitions/SliderResponse"},{"$ref":"#/definitions/RadioResponse"},{"$ref":"#/definitions/CheckboxResponse"},{"$ref":"#/definitions/ReactiveResponse"},{"$ref":"#/definitions/MatrixResponse"},{"$ref":"#/definitions/ButtonsResponse"},{"$ref":"#/definitions/TextOnlyResponse"}]},"ShortTextResponse":{"additionalProperties":false,"description":"The ShortTextResponse interface is used to define the properties of a short text response. ShortTextResponses render as a text input that accepts any text and can optionally have a placeholder.\\n\\n```js { \\"id\\": \\"q-short-text\\", \\"prompt\\": \\"Short text example\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"shortText\\", \\"placeholder\\": \\"Enter your answer here\\" } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"placeholder":{"description":"The placeholder text that is displayed in the input.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"shortText","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider. If present, will override the divider setting in the components or uiConfig.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","prompt","type"],"type":"object"},"SkipConditions":{"description":"The SkipConditions interface is used to define skip conditions. This is used to skip to a different component/block based on the response to a component or based on the number of correct/incorrect responses in a block. Skip conditions work recursively: if you have a nested block, the parent blocks\' skip conditions will be considered when computing the skip logic.\\n\\nSkip conditions are evaluated in the order they are defined in the array. If a condition is met, the participant will be redirected to the component or block specified in the `\\"to\\"` property. If no conditions are met, the participant will continue to the next component in the sequence.\\n\\nSkip conditions allow you to jump to a different component or block. If you intend to skip to a block, you should specify a block id in the sequence. If you intend to skip to a component, you should specify a component id. Skipping backwards is not supported. Skipping to a repeated component will skip to the first instance of the component after the component that triggered the skip.\\n\\nPlease see the interface definitions for more specific information on the different types of skip conditions.","items":{"anyOf":[{"$ref":"#/definitions/IndividualComponentSingleResponseCondition"},{"$ref":"#/definitions/IndividualComponentAllResponsesCondition"},{"$ref":"#/definitions/ComponentBlockCondition"},{"$ref":"#/definitions/RepeatedComponentBlockCondition"}]},"type":"array"},"SliderResponse":{"additionalProperties":false,"description":"The SliderResponse interface is used to define the properties of a slider response. SliderResponses render as a slider input with user specified steps. For example, you could have steps of 0, 50, and 100.\\n\\nExample: ```js { \\"id\\": \\"q-slider\\", \\"prompt\\": \\"How are you feeling?\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"slider\\", \\"options\\": [  {    \\"label\\": \\"Bad\\",    \\"value\\": 0  },  {    \\"label\\": \\"OK\\",    \\"value\\": 50  },  {    \\"label\\": \\"Good\\",    \\"value\\": 100  } ] } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"options":{"description":"This defines the steps in the slider and the extent of the slider as an array of objects that have a label and a value.","items":{"$ref":"#/definitions/NumberOption"},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"snap":{"description":"Whether the slider should snap between values. Defaults to false. Slider snapping disables the label above the handle.","type":"boolean"},"startingValue":{"description":"The starting value of the slider. Defaults to the minimum value.","type":"number"},"step":{"description":"The step value of the slider. If not provided (and snap not enabled), the step value is calculated as the range of the slider divided by 100.","type":"number"},"tlxStyle":{"description":"Whether to render the slider with a NASA-tlx style. Defaults to false.","type":"boolean"},"type":{"const":"slider","type":"string"},"withBar":{"description":"Whether to render the slider with a bar to the left. Defaults to true.","type":"boolean"},"withDivider":{"description":"Renders the response with a trailing divider. If present, will override the divider setting in the components or uiConfig.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","options","prompt","type"],"type":"object"},"StringOption":{"additionalProperties":false,"description":"The StringOption interface is used to define the options for a dropdown, radio, buttons, or checkbox response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.","properties":{"label":{"description":"The label displayed to participants.","type":"string"},"value":{"description":"The value stored in the participant\'s data.","type":"string"}},"required":["label","value"],"type":"object"},"StudyConfig":{"additionalProperties":false,"description":"The StudyConfig interface is used to define the properties of a study configuration. This is a JSON object with four main components: the StudyMetadata, the UIConfig, the Components, and the Sequence. Below is the general template that should be followed when constructing a Study configuration file.\\n\\n```js { \\"$schema\\": \\"https://raw.githubusercontent.com/revisit-studies/study/v2.1.1/src/parser/StudyConfigSchema.json\\", \\"studyMetadata\\": {  ... }, \\"uiConfig\\": {  ... }, \\"components\\": {  ... }, \\"sequence\\": {  ... } } ```\\n\\n:::info For information about each of the individual pieces of the study configuration file, you can visit the documentation for each one individually. ::: <br/>\\n\\nThe `$schema` line is used to verify the schema. If you\'re using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration.","properties":{"$schema":{"description":"A required json schema property. This should point to the github link for the version of the schema you would like. The `$schema` line is used to verify the schema. If you\'re using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration. See examples for more information","type":"string"},"baseComponents":{"$ref":"#/definitions/BaseComponents","description":"The base components that are used in the study. These components can be used to template other components. See [BaseComponents](../../type-aliases/BaseComponents) for more information."},"components":{"additionalProperties":{"anyOf":[{"$ref":"#/definitions/IndividualComponent"},{"$ref":"#/definitions/InheritedComponent"}]},"description":"The components that are used in the study. They must be fully defined here with all properties. Some properties may be inherited from baseComponents.","type":"object"},"importedLibraries":{"description":"A list of libraries that are used in the study. This is used to import external libraries into the study. Library names are valid namespaces to be used later.","items":{"type":"string"},"type":"array"},"sequence":{"anyOf":[{"$ref":"#/definitions/ComponentBlock"},{"$ref":"#/definitions/DynamicBlock"}],"description":"The order of the components in the study. This might include some randomness."},"studyMetadata":{"$ref":"#/definitions/StudyMetadata","description":"The metadata for the study. This is used to identify the study and version in the data file."},"uiConfig":{"$ref":"#/definitions/UIConfig","description":"The UI configuration for the study. This is used to configure the UI of the app."}},"required":["$schema","studyMetadata","uiConfig","components","sequence"],"type":"object"},"StudyMetadata":{"additionalProperties":false,"description":"The StudyMetadata is used to describe certain properties of a study. Some of this data is displayed on the landing page when running the app, such as the title and description. Below is an example of a StudyMetadata entry in your study configuration file:\\n\\n```js \\"studyMetadata\\" : { \\"title\\": \\"My New Study\\", \\"version\\": \\"pilot\\", \\"authors\\": [  \\"Jane Doe\\",  \\"John Doe\\" ], \\"date\\": \\"2024-04-01\\", \\"description\\": \\"This study is meant to test your ability.\\", \\"organizations\\": [  \\"The reVISit Team\\",  \\"The Other Team\\" ] } ```","properties":{"authors":{"description":"The authors of your study.","items":{"type":"string"},"type":"array"},"date":{"description":"The date of your study, may be useful for the researcher.","type":"string"},"description":{"description":"The description of your study, shown on the landing page.","type":"string"},"organizations":{"description":"The organizations that are associated with your study.","items":{"type":"string"},"type":"array"},"title":{"description":"The title of your study, shown on the landing page.","type":"string"},"version":{"description":"The version of your study. When you change a configuration file after a study has already been distributed to participants, you can change the version number so that the participants who see this new configuration file can be identified.","type":"string"}},"required":["title","version","authors","date","description","organizations"],"type":"object"},"TextOnlyResponse":{"additionalProperties":false,"description":"The TextOnlyResponse interface is used to define the properties of a text only response. TextOnlyResponses render as a block of text that is displayed to the user. This can be used to display instructions or other information. It does not accept any input from the user.\\n\\nExample: ```js {   \\"id\\": \\"textOnlyResponse\\",   \\"type\\": \\"textOnly\\",   \\"prompt\\": \\"This is a text only response, it accepts markdown so you can **bold** or _italicize_ text.\\",   \\"location\\": \\"belowStimulus\\",   \\"restartEnumeration\\": true } ```\\n\\nIn this example, the text only response is displayed below the stimulus and the enumeration of the questions is restarted.","properties":{"hidden":{"not":{}},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"paramCapture":{"not":{}},"prompt":{"description":"The markdown text that is displayed to the user.","type":"string"},"required":{"not":{}},"requiredLabel":{"not":{}},"requiredValue":{"not":{}},"restartEnumeration":{"description":"Whether to restart the enumeration of the questions. Defaults to false.","type":"boolean"},"secondaryText":{"not":{}},"type":{"const":"textOnly","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider. If present, will override the divider setting in the components or uiConfig.","type":"boolean"},"withDontKnow":{"not":{}}},"required":["id","prompt","type"],"type":"object"},"UIConfig":{"additionalProperties":false,"description":"The UIConfig is used to configure the UI of the app. This includes the logo, contact email, and whether to show a progress bar. The UIConfig is also used to configure the sidebar, which can be used to display the task instructions and capture responses. Below is an example of how the UI Config would look in your study configuration (note, there are optional fields that are not shown here): ```js uiConfig:{ \\"contactEmail\\": \\"contact@revisit.dev\\", \\"helpTextPath\\": \\"<study-name>/assets/help.md\\", \\"logoPath\\": \\"<study-name>/assets/logo.jpg\\", \\"withProgressBar\\": true, \\"autoDownloadStudy\\": true \\"autoDownloadTime\\": 5000, \\"studyEndMsg\\": \\"Thank you for completing this study. You\'re the best!\\", \\"withSidebar\\": true, \\"windowEventDebounceTime\\": 500, \\"urlParticipantIdParam\\": \\"PROLIFIC_ID\\", \\"numSequences\\": 500 } ``` In the above, the `<study-name>/assets/` path is referring to the path to your individual study assets. It is common practice to have your study directory contain an `assets` directory where all components and images relevant to your study reside. Note that this path is relative to the `public` folder of the repository - as is all other paths you define in reVISit (aside from React components whose paths are relative to `src/public`.)","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. Defaults to true.","type":"boolean"},"autoDownloadStudy":{"description":"Controls whether the study data is automatically downloaded at the end of the study.","type":"boolean"},"autoDownloadTime":{"description":"The time in milliseconds to wait before automatically downloading the study data.","type":"number"},"contactEmail":{"description":"The email address that used during the study if a participant clicks contact.","type":"string"},"enumerateQuestions":{"description":"Whether to prepend questions with their index (+ 1). This should only be used when all questions are in the same location, e.g. all are in the side bar.","type":"boolean"},"helpTextPath":{"description":"The path to the help text file. This is displayed when a participant clicks help. Markdown is supported.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the instructions."},"logoPath":{"description":"The path to the logo image. This is displayed on the landing page and the header.","type":"string"},"minHeightSize":{"description":"The minimum screen height size for the study","type":"number"},"minWidthSize":{"description":"The minimum screen width size for the study","type":"number"},"nextButtonDisableTime":{"description":"The time in milliseconds to wait before the next button is disabled.","type":"number"},"nextButtonEnableTime":{"description":"The time in milliseconds to wait before the next button is enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text to display on the next button.","type":"string"},"nextOnEnter":{"description":"Whether enter key should move to the next question. Defaults to false.","type":"boolean"},"numSequences":{"description":"The number of sequences to generate for the study. This is used to generate the random sequences for the study. Defaults to 1000.","type":"number"},"participantNameField":{"description":"The default name field for a participant. Directs revisit to use the task and response id as a name in UI elements. For example, if you wanted the response \'prolificId\' from the task \'introduction\' to be the name, this field would be \'introduction.prolificId\'","type":"string"},"previousButtonText":{"description":"The text that is displayed on the previous button.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. Defaults to false.","type":"boolean"},"recordAudio":{"description":"Whether or not we want to utilize think-aloud features. If true, will record audio on all components unless deactivated on individual components. Defaults to false.","type":"boolean"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"showTitle":{"description":"Controls whether the title should be hidden in the study.","type":"boolean"},"showTitleBar":{"description":"Controls whether the title bar should be hidden in the study.","type":"boolean"},"sidebarWidth":{"description":"The width of the left sidebar. Defaults to 300.","type":"number"},"studyEndMsg":{"description":"The message to display when the study ends. Supports templating with the participant ID. e.g. \\"Thank you for completing the study. You may click this link and return to Prolific: [Go to Prolific](https://app.prolific.com/submissions/complete?cc=StudyID&PROLIFIC_ID={PROLIFIC_ID}))\\"","type":"string"},"timeoutReject":{"description":"Whether to redirect a timed out participant to a rejection page. This only works for components where the `nextButtonDisableTime` field is set.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"urlParticipantIdParam":{"description":"If the participant ID is passed in the URL, this is the name of the querystring parameter that is used to capture the participant ID (e.g. PROLIFIC_ID). This will allow a user to continue a study on different devices and browsers.","type":"string"},"windowEventDebounceTime":{"description":"Debounce time in milliseconds for automatically tracked window events. Defaults to 100. E.g 100 here means 1000ms / 100ms = 10 times a second, 200 here means 1000ms / 200ms = 5 times per second","type":"number"},"withProgressBar":{"description":"Controls whether the progress bar is rendered in the study.","type":"boolean"},"withSidebar":{"description":"Controls whether the left sidebar is rendered at all. Required to be true if your response\'s location is set to sidebar for any question.","type":"boolean"}},"required":["logoPath","contactEmail","withProgressBar","withSidebar"],"type":"object"},"VegaComponent":{"anyOf":[{"$ref":"#/definitions/VegaComponentPath"},{"$ref":"#/definitions/VegaComponentConfig"}]},"VegaComponentConfig":{"additionalProperties":false,"description":"The VegaComponentConfig interface is used to define the properties of a Vega Component. This component is used to render a Vega/Vega-Lite Component by adding Vega/Vega-Lite specs within the reVISit config itself.\\n\\nTo do this, would use the following snippet: ```js { \\"type\\": \\"vega\\", \\"config\\": { ... vega specs here ...}, }\\n\\nIIf you are using Vega, you can use signals with `revisitAnswer` to send the user\'s responses back to the reVISit. For example, you can use the following snippet in your Vega spec\'s signals section: ```js { \\"signals\\": [  {    \\"name\\": \\"revisitAnswer\\",    \\"value\\": {},    \\"on\\": [      {        \\"events\\": \\"rect:click\\",        \\"update\\": \\"{responseId: \'vegaDemoResponse1\', response: datum.category}\\"      }    ]  } ] } In this example, when a user clicks on a rectangle in the Vega chart, the `revisitAnswer` signal is updated with the responseId and response. ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If present, will override the allow failed training setting in the uiConfig.","type":"boolean"},"config":{"description":"The vega or vega-lite configuration.","type":"object"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"enumerateQuestions":{"description":"Whether to prepend questions with their index (+ 1). This should only be used when all questions are in the same location, e.g. all are in the side bar. If present, will override the enumeration of questions setting in the uiConfig.","type":"boolean"},"helpTextPath":{"description":"The path to the help text file. This is displayed when a participant clicks help. Markdown is supported. If present, will override the help text path set in the uiConfig.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the instructions. If present, will override the instruction location setting in the uiConfig."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"The time in milliseconds to wait before the next button is disabled. If present, will override the next button disable time setting in the uiConfig.","type":"number"},"nextButtonEnableTime":{"description":"The time in milliseconds to wait before the next button is enabled. If present, will override the next button enable time setting in the uiConfig.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the next button. If present, will override the  next button location setting in the uiConfig."},"nextButtonText":{"description":"The text to display on the next button. If present, will override the next button text setting in the uiConfig.","type":"string"},"nextOnEnter":{"description":"Whether enter key should move to the next question. If present, will override the enter key setting in the uiConfig.","type":"boolean"},"previousButton":{"description":"Whether to show the previous button. If present, will override the previous button setting in the uiConfig.","type":"boolean"},"previousButtonText":{"description":"The text that is displayed on the previous button. If present, will override the previous button text setting in the uiConfig.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If present, will override the provide feedback setting in the uiConfig.","type":"boolean"},"recordAudio":{"description":"Whether or not we want to utilize think-aloud features. If present, will override the record audio setting in the uiConfig.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. If present, will override the response dividers setting in the uiConfig.","type":"boolean"},"responseOrder":{"description":"The order of the responses. Defaults to \'fixed\'.","enum":["fixed","random"],"type":"string"},"showTitle":{"description":"Controls whether the title should be hidden in the study. If present, will override the title setting in the uiConfig.","type":"boolean"},"showTitleBar":{"description":"Controls whether the title bar should be hidden in the study. If present, will override the title bar setting in the uiConfig.","type":"boolean"},"sidebarWidth":{"description":"The width of the left sidebar. If present, will override the sidebar width setting in the uiConfig.","type":"number"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. If present, will override the training attempts setting in the uiConfig.","type":"number"},"type":{"const":"vega","type":"string"},"windowEventDebounceTime":{"description":"Debounce time in milliseconds for automatically tracked window events. If present, will override the window event debounce time setting in the uiConfig.","type":"number"},"withProgressBar":{"description":"Controls whether the progress bar is rendered. If present, will override the progress bar setting in the uiConfig.","type":"boolean"},"withSidebar":{"description":"Controls whether the left sidebar is rendered at all. Required to be true if your response\'s location is set to sidebar for any question. If present, will override the sidebar setting in the uiConfig.","type":"boolean"},"withActions":{"description":"Whether to include vega actions. Defaults to true.","type":"boolean"}},"required":["config","response","type"],"type":"object"},"VegaComponentPath":{"additionalProperties":false,"description":"The VegaComponentPath interface is used to define the properties of a Vega Component. This component is used to render a Vega/Vega-Lite Component with path pointing to your Vega/Vega-Lite specs file.\\n\\nFor example, to render a vega based stimuli with a path of `<study-name>/assets/vega.spec.json`, you would use the following snippet: ```js { \\"type\\": \\"vega\\", \\"path\\": \\"<study-name>/assets/vega.spec.json\\", } ```\\n\\nIf you are using Vega, you can use signals with `revisitAnswer` to send the user\'s responses back to the reVISit. For example, you can use the following snippet in your Vega spec file\'s signals section: ```js { \\"signals\\": [  {    \\"name\\": \\"revisitAnswer\\",    \\"value\\": {},    \\"on\\": [      {        \\"events\\": \\"rect:click\\",        \\"update\\": \\"{responseId: \'vegaDemoResponse1\', response: datum.category}\\"      }    ]  } ] } In this example, when a user clicks on a rectangle in the Vega chart, the `revisitAnswer` signal is updated with the responseId and response. This signal is then passed to reVISit as the participant\'s response. ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If present, will override the allow failed training setting in the uiConfig.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"enumerateQuestions":{"description":"Whether to prepend questions with their index (+ 1). This should only be used when all questions are in the same location, e.g. all are in the side bar. If present, will override the enumeration of questions setting in the uiConfig.","type":"boolean"},"helpTextPath":{"description":"The path to the help text file. This is displayed when a participant clicks help. Markdown is supported. If present, will override the help text path set in the uiConfig.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the instructions. If present, will override the instruction location setting in the uiConfig."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"The time in milliseconds to wait before the next button is disabled. If present, will override the next button disable time setting in the uiConfig.","type":"number"},"nextButtonEnableTime":{"description":"The time in milliseconds to wait before the next button is enabled. If present, will override the next button enable time setting in the uiConfig.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the next button. If present, will override the  next button location setting in the uiConfig."},"nextButtonText":{"description":"The text to display on the next button. If present, will override the next button text setting in the uiConfig.","type":"string"},"nextOnEnter":{"description":"Whether enter key should move to the next question. If present, will override the enter key setting in the uiConfig.","type":"boolean"},"path":{"description":"The path to the vega file. This should be a relative path from the public folder.","type":"string"},"previousButton":{"description":"Whether to show the previous button. If present, will override the previous button setting in the uiConfig.","type":"boolean"},"previousButtonText":{"description":"The text that is displayed on the previous button. If present, will override the previous button text setting in the uiConfig.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If present, will override the provide feedback setting in the uiConfig.","type":"boolean"},"recordAudio":{"description":"Whether or not we want to utilize think-aloud features. If present, will override the record audio setting in the uiConfig.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. If present, will override the response dividers setting in the uiConfig.","type":"boolean"},"responseOrder":{"description":"The order of the responses. Defaults to \'fixed\'.","enum":["fixed","random"],"type":"string"},"showTitle":{"description":"Controls whether the title should be hidden in the study. If present, will override the title setting in the uiConfig.","type":"boolean"},"showTitleBar":{"description":"Controls whether the title bar should be hidden in the study. If present, will override the title bar setting in the uiConfig.","type":"boolean"},"sidebarWidth":{"description":"The width of the left sidebar. If present, will override the sidebar width setting in the uiConfig.","type":"number"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. If present, will override the training attempts setting in the uiConfig.","type":"number"},"type":{"const":"vega","type":"string"},"windowEventDebounceTime":{"description":"Debounce time in milliseconds for automatically tracked window events. If present, will override the window event debounce time setting in the uiConfig.","type":"number"},"withProgressBar":{"description":"Controls whether the progress bar is rendered. If present, will override the progress bar setting in the uiConfig.","type":"boolean"},"withSidebar":{"description":"Controls whether the left sidebar is rendered at all. Required to be true if your response\'s location is set to sidebar for any question. If present, will override the sidebar setting in the uiConfig.","type":"boolean"},"withActions":{"description":"Whether to include vega actions. Defaults to true.","type":"boolean"}},"required":["path","response","type"],"type":"object"},"VideoComponent":{"additionalProperties":false,"description":"The VideoComponent interface is used to define the properties of a video component. This component is used to render a video with optional controls.\\n\\nMost often, video components will be used for trainings, and will have a `forceCompletion` field set to true. This will prevent the participant from moving on until the video has finished playing.\\n\\nAs such, the `forceCompletion` field is set to true by default, and the `withTimeline` field is set to false by default.\\n\\nFor example, to render a training video with a path of `<study-name>/assets/video.mp4`, you would use the following snippet: ```js {   \\"type\\": \\"video\\",   \\"path\\": \\"<study-name>/assets/video.mp4\\", } ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If present, will override the allow failed training setting in the uiConfig.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"enumerateQuestions":{"description":"Whether to prepend questions with their index (+ 1). This should only be used when all questions are in the same location, e.g. all are in the side bar. If present, will override the enumeration of questions setting in the uiConfig.","type":"boolean"},"forceCompletion":{"description":"Whether to force the video to play until the end. Defaults to true.","type":"boolean"},"helpTextPath":{"description":"The path to the help text file. This is displayed when a participant clicks help. Markdown is supported. If present, will override the help text path set in the uiConfig.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the instructions. If present, will override the instruction location setting in the uiConfig."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"The time in milliseconds to wait before the next button is disabled. If present, will override the next button disable time setting in the uiConfig.","type":"number"},"nextButtonEnableTime":{"description":"The time in milliseconds to wait before the next button is enabled. If present, will override the next button enable time setting in the uiConfig.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the next button. If present, will override the  next button location setting in the uiConfig."},"nextButtonText":{"description":"The text to display on the next button. If present, will override the next button text setting in the uiConfig.","type":"string"},"nextOnEnter":{"description":"Whether enter key should move to the next question. If present, will override the enter key setting in the uiConfig.","type":"boolean"},"path":{"description":"The path to the video. This could be a relative path from the public folder or might be a url to an external website.","type":"string"},"previousButton":{"description":"Whether to show the previous button. If present, will override the previous button setting in the uiConfig.","type":"boolean"},"previousButtonText":{"description":"The text that is displayed on the previous button. If present, will override the previous button text setting in the uiConfig.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If present, will override the provide feedback setting in the uiConfig.","type":"boolean"},"recordAudio":{"description":"Whether or not we want to utilize think-aloud features. If present, will override the record audio setting in the uiConfig.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. If present, will override the response dividers setting in the uiConfig.","type":"boolean"},"responseOrder":{"description":"The order of the responses. Defaults to \'fixed\'.","enum":["fixed","random"],"type":"string"},"showTitle":{"description":"Controls whether the title should be hidden in the study. If present, will override the title setting in the uiConfig.","type":"boolean"},"showTitleBar":{"description":"Controls whether the title bar should be hidden in the study. If present, will override the title bar setting in the uiConfig.","type":"boolean"},"sidebarWidth":{"description":"The width of the left sidebar. If present, will override the sidebar width setting in the uiConfig.","type":"number"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. If present, will override the training attempts setting in the uiConfig.","type":"number"},"type":{"const":"video","type":"string"},"windowEventDebounceTime":{"description":"Debounce time in milliseconds for automatically tracked window events. If present, will override the window event debounce time setting in the uiConfig.","type":"number"},"withProgressBar":{"description":"Controls whether the progress bar is rendered. If present, will override the progress bar setting in the uiConfig.","type":"boolean"},"withSidebar":{"description":"Controls whether the left sidebar is rendered at all. Required to be true if your response\'s location is set to sidebar for any question. If present, will override the sidebar setting in the uiConfig.","type":"boolean"},"withTimeline":{"description":"Whether to show the video timeline. Defaults to false.","type":"boolean"}},"required":["path","response","type"],"type":"object"},"WebsiteComponent":{"additionalProperties":false,"description":"The WebsiteComponent interface is used to define the properties of a website component. A WebsiteComponent is used to render an iframe with a website inside of it. This can be used to display an external website or an html file that is located in the public folder.\\n\\n```js { \\"type\\": \\"website\\", \\"path\\": \\"<study-name>/assets/website.html\\", } ```\\n\\nTo pass a data from the config to the website, you can use the `parameters` field as below:\\n\\n```js { \\"type\\": \\"website\\", \\"path\\": \\"<study-name>/website.html\\", \\"parameters\\": {  \\"barData\\": [0.32, 0.01, 1.2, 1.3, 0.82, 0.4, 0.3] }, \\"response\\": [  {    \\"id\\": \\"barChart\\",    \\"prompt\\": \\"Your selected answer:\\",    \\"location\\": \\"belowStimulus\\",    \\"type\\": \\"reactive\\"  } ] } ``` In the `website.html` file, by including `revisit-communicate.js`, you can use the `Revisit.onDataReceive` method to retrieve the data, and `Revisit.postAnswers` to send the user\'s responses back to the reVISit as shown in the example below:\\n\\n```html <script src=\\"../../revisitUtilities/revisit-communicate.js\\"><\/script> <script> Revisit.onDataReceive((data) => {  const barData = data[\'barData\'];  ... });\\n\\n// Call out that \'barChart\' needs to match ID in \'response\' object Revisit.postAnswers({ barChart: userAnswer }); <\/script> ```\\n\\n If the html website implements Trrack library for provenance tracking, you can send the provenance graph back to reVISit by calling `Revisit.postProvenanceGraph` as shown in the example below. You need to call this each time the Trrack state is updated so that reVISit is kept aware of the changes in the provenance graph.\\n\\n```js const trrack = initializeTrrack({ initialState, registry });\\n\\n... Revisit.postProvenance(trrack.graph.backend); ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If present, will override the allow failed training setting in the uiConfig.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"enumerateQuestions":{"description":"Whether to prepend questions with their index (+ 1). This should only be used when all questions are in the same location, e.g. all are in the side bar. If present, will override the enumeration of questions setting in the uiConfig.","type":"boolean"},"helpTextPath":{"description":"The path to the help text file. This is displayed when a participant clicks help. Markdown is supported. If present, will override the help text path set in the uiConfig.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the instructions. If present, will override the instruction location setting in the uiConfig."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"The time in milliseconds to wait before the next button is disabled. If present, will override the next button disable time setting in the uiConfig.","type":"number"},"nextButtonEnableTime":{"description":"The time in milliseconds to wait before the next button is enabled. If present, will override the next button enable time setting in the uiConfig.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the next button. If present, will override the  next button location setting in the uiConfig."},"nextButtonText":{"description":"The text to display on the next button. If present, will override the next button text setting in the uiConfig.","type":"string"},"nextOnEnter":{"description":"Whether enter key should move to the next question. If present, will override the enter key setting in the uiConfig.","type":"boolean"},"parameters":{"additionalProperties":{},"description":"The parameters that are passed to the website (iframe). These can be used within your website to render different things.","type":"object"},"path":{"description":"The path to the website. This should be a relative path from the public folder or could be an external website.","type":"string"},"previousButton":{"description":"Whether to show the previous button. If present, will override the previous button setting in the uiConfig.","type":"boolean"},"previousButtonText":{"description":"The text that is displayed on the previous button. If present, will override the previous button text setting in the uiConfig.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If present, will override the provide feedback setting in the uiConfig.","type":"boolean"},"recordAudio":{"description":"Whether or not we want to utilize think-aloud features. If present, will override the record audio setting in the uiConfig.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. If present, will override the response dividers setting in the uiConfig.","type":"boolean"},"responseOrder":{"description":"The order of the responses. Defaults to \'fixed\'.","enum":["fixed","random"],"type":"string"},"showTitle":{"description":"Controls whether the title should be hidden in the study. If present, will override the title setting in the uiConfig.","type":"boolean"},"showTitleBar":{"description":"Controls whether the title bar should be hidden in the study. If present, will override the title bar setting in the uiConfig.","type":"boolean"},"sidebarWidth":{"description":"The width of the left sidebar. If present, will override the sidebar width setting in the uiConfig.","type":"number"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. If present, will override the training attempts setting in the uiConfig.","type":"number"},"type":{"const":"website","type":"string"},"windowEventDebounceTime":{"description":"Debounce time in milliseconds for automatically tracked window events. If present, will override the window event debounce time setting in the uiConfig.","type":"number"},"withProgressBar":{"description":"Controls whether the progress bar is rendered. If present, will override the progress bar setting in the uiConfig.","type":"boolean"},"withSidebar":{"description":"Controls whether the left sidebar is rendered at all. Required to be true if your response\'s location is set to sidebar for any question. If present, will override the sidebar setting in the uiConfig.","type":"boolean"}},"required":["path","response","type"],"type":"object"}}'),Bjt={$ref:Ljt,$schema:Fjt,definitions:jjt},zjt="#/definitions/GlobalConfig",Ujt="http://json-schema.org/draft-07/schema#",qjt={GlobalConfig:{additionalProperties:!1,description:"The GlobalConfig is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",properties:{$schema:{description:"A required json schema property. This should point to the github link for the version of the schema you would like. See examples in the public folder for more information",type:"string"},configs:{additionalProperties:{additionalProperties:!1,description:"The key is used to identify the study config file. This key is used in the configList property.",properties:{path:{description:"The path to the study config file. This should be a relative path from the public folder.",type:"string"},test:{description:"Indicates whether the study is a test study. This is used to hide the study from the landing page.",type:"boolean"}},required:["path"],type:"object"},description:"A required property that specifies the options for the configList property.",type:"object"},configsList:{description:"A required property that is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",items:{type:"string"},type:"array"}},required:["$schema","configs","configsList"],type:"object"}},Hjt={$ref:zjt,$schema:Ujt,definitions:qjt},Wjt="#/definitions/LibraryConfig",Vjt="http://json-schema.org/draft-07/schema#",Gjt=JSON.parse('{"Answer":{"additionalProperties":false,"description":"The Answer interface is used to define the properties of an answer. Answers are used to define the correct answer for a task. These are generally used in training tasks or if skip logic is required based on the answer.\\n\\nAnswers are used to defined correct answers for a task. These are generally used in training tasks or if skip logic is required based on the answer. The answer field is used to define the correct answer to the question. The acceptableLow and acceptableHigh fields are used to define a range of acceptable answers (these are currently only used for training). For example, if the correct answer is 5, and the acceptableLow is 4 and the acceptableHigh is 6, then any answer between 4 and 6 will be considered correct.\\n\\nHere\'s an example of how to use the Answer interface to define the correct answer to a question:\\n\\n```js { \\"type\\": \\"markdown\\", \\"path\\": \\"<study-name>/assets/question.md\\", \\"response\\": [  {    \\"id\\": \\"response1\\",    \\"prompt\\": \\"What is 2 + 2?\\",    \\"location\\": \\"belowStimulus\\",    \\"type\\": \\"numerical\\"  } ] \\"correctAnswer\\": [{  \\"id\\": \\"response1\\",  \\"answer\\": 4 }] } ```\\n\\nIn this example, the correct answer to the question \\"What is 2 + 2?\\" is 4. If the participant answers 4, they will be considered correct. If they answer anything other than 4, they will be considered incorrect.","properties":{"acceptableHigh":{"description":"The acceptable high value for the answer. This is used to define a range of acceptable answers.","type":"number"},"acceptableLow":{"description":"The acceptable low value for the answer. This is used to define a range of acceptable answers.","type":"number"},"answer":{"description":"The correct answer to the question."},"id":{"description":"The id of the answer. This is used to identify the answer in the data file.","type":"string"}},"required":["id","answer"],"type":"object"},"BaseComponents":{"additionalProperties":{"additionalProperties":false,"properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If present, will override the allow failed training setting in the uiConfig.","type":"boolean"},"config":{"description":"The vega or vega-lite configuration.","type":"object"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"enumerateQuestions":{"description":"Whether to prepend questions with their index (+ 1). This should only be used when all questions are in the same location, e.g. all are in the side bar. If present, will override the enumeration of questions setting in the uiConfig.","type":"boolean"},"forceCompletion":{"description":"Whether to force the video to play until the end. Defaults to true.","type":"boolean"},"helpTextPath":{"description":"The path to the help text file. This is displayed when a participant clicks help. Markdown is supported. If present, will override the help text path set in the uiConfig.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the instructions. If present, will override the instruction location setting in the uiConfig."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"The time in milliseconds to wait before the next button is disabled. If present, will override the next button disable time setting in the uiConfig.","type":"number"},"nextButtonEnableTime":{"description":"The time in milliseconds to wait before the next button is enabled. If present, will override the next button enable time setting in the uiConfig.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the next button. If present, will override the  next button location setting in the uiConfig."},"nextButtonText":{"description":"The text to display on the next button. If present, will override the next button text setting in the uiConfig.","type":"string"},"nextOnEnter":{"description":"Whether enter key should move to the next question. If present, will override the enter key setting in the uiConfig.","type":"boolean"},"parameters":{"anyOf":[{"additionalProperties":{},"description":"The parameters that are passed to the react component. These can be used within your react component to render different things.","type":"object"},{"additionalProperties":{},"description":"The parameters that are passed to the website (iframe). These can be used within your website to render different things.","type":"object"}],"description":"The parameters that are passed to the react component. These can be used within your react component to render different things."},"path":{"anyOf":[{"description":"The path to the markdown file. This should be a relative path from the public folder.","type":"string"},{"description":"The path to the react component. This should be a relative path from the src/public folder.","type":"string"},{"description":"The path to the image. This could be a relative path from the public folder or a url to an external image.","type":"string"},{"description":"The path to the website. This should be a relative path from the public folder or could be an external website.","type":"string"},{"description":"The path to the vega file. This should be a relative path from the public folder.","type":"string"},{"description":"The path to the video. This could be a relative path from the public folder or might be a url to an external website.","type":"string"}],"description":"The path to the markdown file. This should be a relative path from the public folder."},"previousButton":{"description":"Whether to show the previous button. If present, will override the previous button setting in the uiConfig.","type":"boolean"},"previousButtonText":{"description":"The text that is displayed on the previous button. If present, will override the previous button text setting in the uiConfig.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If present, will override the provide feedback setting in the uiConfig.","type":"boolean"},"recordAudio":{"description":"Whether or not we want to utilize think-aloud features. If present, will override the record audio setting in the uiConfig.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. If present, will override the response dividers setting in the uiConfig.","type":"boolean"},"responseOrder":{"description":"The order of the responses. Defaults to \'fixed\'.","enum":["fixed","random"],"type":"string"},"showTitle":{"description":"Controls whether the title should be hidden in the study. If present, will override the title setting in the uiConfig.","type":"boolean"},"showTitleBar":{"description":"Controls whether the title bar should be hidden in the study. If present, will override the title bar setting in the uiConfig.","type":"boolean"},"sidebarWidth":{"description":"The width of the left sidebar. If present, will override the sidebar width setting in the uiConfig.","type":"number"},"style":{"additionalProperties":{"type":"string"},"description":"The style of the image. This is an object with css properties as keys and css values as values.","type":"object"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. If present, will override the training attempts setting in the uiConfig.","type":"number"},"type":{"enum":["markdown","react-component","image","website","questionnaire","vega","video"],"type":"string"},"windowEventDebounceTime":{"description":"Debounce time in milliseconds for automatically tracked window events. If present, will override the window event debounce time setting in the uiConfig.","type":"number"},"withProgressBar":{"description":"Controls whether the progress bar is rendered. If present, will override the progress bar setting in the uiConfig.","type":"boolean"},"withSidebar":{"description":"Controls whether the left sidebar is rendered at all. Required to be true if your response\'s location is set to sidebar for any question. If present, will override the sidebar setting in the uiConfig.","type":"boolean"},"withActions":{"description":"Whether to include vega actions. Defaults to true.","type":"boolean"},"withTimeline":{"description":"Whether to show the video timeline. Defaults to false.","type":"boolean"}},"type":"object"},"description":"The baseComponents is an optional set of components which can help template other components. For example, suppose you have a single HTML file that you want to display to the user several times. Instead of having the same component twice in the `components` list, you can have a single baseComponent with all the information that the two HTML components will share. A great example is showing the same HTML component but with two different questions;\\n\\n Using baseComponents:\\n\\n```js \\"baseComponents\\": { \\"my-image-component\\": { \\"instructionLocation\\": \\"sidebar\\", \\"nextButtonLocation\\": \\"sidebar\\", \\"path\\": \\"<study-name>/assets/my-image.jpg\\", \\"response\\": [   {     \\"id\\": \\"my-image-id\\",     \\"options\\": [\\"Europe\\", \\"Japan\\", \\"USA\\"],     \\"prompt\\": \\"Your Selected Answer:\\",     \\"type\\": \\"dropdown\\"   } ], \\"type\\": \\"image\\" } } ``` In the above code snippet, we have a single base component which holds the information about the type of component, the path to the image, and the response (which is a dropdown containing three choices). Any component which contains the `\\"baseComponent\\":\\"my-image-component\\"` key-value pair will inherit each of these properties. Thus, if we have three different questions which have the same choices and are concerning the same image, we can define our components like below: ```js \\"components\\": { \\"q1\\": { \\"baseComponent\\": \\"my-image-component\\", \\"description\\": \\"Choosing section with largest GDP\\", \\"instruction\\": \\"Which region has the largest GDP?\\" }, \\"q2\\": { \\"baseComponent\\": \\"my-image-component\\", \\"description\\": \\"Choosing section with lowest GDP\\", \\"instruction\\": \\"Which region has the lowest GDP?\\" }, \\"q3\\": { \\"baseComponent\\": \\"my-image-component\\", \\"description\\": \\"Choosing section with highest exports of Wheat\\", \\"instruction\\": \\"Which region had the most Wheat exported in 2022?\\" } } ```","type":"object"},"ButtonsResponse":{"additionalProperties":false,"description":"The ButtonsResponse interface is used to define the properties of a buttons response. ButtonsResponses render as a list of buttons that the participant can click. When a button is clicked, the value of the button is stored in the data file. Participants can cycle through the options using the arrow keys.\\n\\nExample: ```js {   \\"id\\": \\"buttonsResponse\\",   \\"type\\": \\"buttons\\",   \\"prompt\\": \\"Click a button\\",   \\"location\\": \\"belowStimulus\\",   \\"options\\": [     \\"Option 1\\",     \\"Option 2\\",     \\"Option 3\\"   ] } ``` In this example, the participant can click one of the buttons labeled \\"Option 1\\", \\"Option 2\\", or \\"Option 3\\".","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"optionOrder":{"description":"The order in which the buttons are displayed. Defaults to fixed.","enum":["fixed","random"],"type":"string"},"options":{"items":{"anyOf":[{"$ref":"#/definitions/StringOption"},{"type":"string"}]},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"buttons","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider. If present, will override the divider setting in the components or uiConfig.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","options","prompt","type"],"type":"object"},"CheckboxResponse":{"additionalProperties":false,"description":"The CheckboxResponse interface is used to define the properties of a checkbox response. CheckboxResponses render as a checkbox input with user specified options.\\n\\n```js { \\"id\\": \\"q7\\", \\"prompt\\": \\"Checkbox example (not required)\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"checkbox\\", \\"options\\": [\\"Option 1\\", \\"Option 2\\", \\"Option 3\\"] } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"horizontal":{"description":"Whether to render the checkboxes horizontally. Defaults to false, so they render horizontally.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"maxSelections":{"description":"The maximum number of selections that are required.","type":"number"},"minSelections":{"description":"The minimum number of selections that are required.","type":"number"},"optionOrder":{"description":"The order in which the checkboxes are displayed. Defaults to fixed.","enum":["fixed","random"],"type":"string"},"options":{"description":"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.","items":{"anyOf":[{"$ref":"#/definitions/StringOption"},{"type":"string"}]},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"checkbox","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider. If present, will override the divider setting in the components or uiConfig.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"},"withOther":{"description":"Whether to render the checkboxes with an \\"other\\" option.","type":"boolean"}},"required":["id","options","prompt","type"],"type":"object"},"ComponentBlock":{"additionalProperties":false,"description":"The ComponentBlock interface is used to define order properties within the sequence. This is used to define the order of components in a study and the skip logic. It supports random assignment of trials using a pure random assignment and a [latin square](https://en.wikipedia.org/wiki/Latin_square).\\n\\nThe pure random assignment is a random assignment with no guarantees. For example, one component _could_ show up in the first position 10 times in a row. However, this situation is unlikely.\\n\\nHere\'s a snippet that shows how to use the random order:\\n\\n```js { \\"order\\": \\"random\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\" ] } ``` This snippet would produce a random order of the components in the sequence array. For example, the resulting sequence array could be :\\n\\n```js [ [\\"component2\\", \\"component3\\", \\"component1\\"], [\\"component1\\", \\"component3\\", \\"component2\\"], [\\"component3\\", \\"component1\\", \\"component2\\"], ... ] ```\\n\\nThe latin square assignment is a random assignment with some guarantees. It ensures that each component is shown an equal number of times in each position. Here\'s a snippet that shows how to use the latin square order:\\n\\n```js { \\"order\\": \\"latinSquare\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\" ] } ```\\n\\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\\n\\n```js [ [\\"component1\\", \\"component2\\", \\"component3\\"], [\\"component2\\", \\"component3\\", \\"component1\\"], [\\"component3\\", \\"component1\\", \\"component2\\"], ... ] ```\\n\\nThe fixed assignment is a fixed assignment of components. This is used when you want to show the components in a specific order. Here\'s a snippet that shows how to use the fixed order:\\n\\n```js { \\"order\\": \\"fixed\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\" ] } ```\\n\\nThis snippet would produce a fixed order of the components in the sequence array. The resulting sequence array would be:\\n\\n```js [ [\\"component1\\", \\"component2\\", \\"component3\\"], [\\"component1\\", \\"component2\\", \\"component3\\"], [\\"component1\\", \\"component2\\", \\"component3\\"], ... ] ```\\n\\nIn addition to the order property, the ComponentBlock interface also includes the `\\"numSamples\\"` property. This is used to reduce the number of components shown to a participant. This property respects the order property and the guarantees provided by the order property. For example, if you have three components in the components array and you set `\\"numSamples\\"` to 2, you would randomize across the three components while only showing a participant two of them. Here\'s a snippet that shows how to use the numSamples property:\\n\\n```js { \\"order\\": \\"latinSquare\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\" ], \\"numSamples\\": 2 } ```\\n\\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\\n\\n```js [ [\\"component1\\", \\"component2\\"], [\\"component2\\", \\"component3\\"], [\\"component3\\", \\"component1\\"], ... ] ```\\n\\nThe interruptions property specifies an array of interruptions. These can be used for breaks or attention checks. Interruptions can be deterministic or random. Please see [InterruptionBlock](../../type-aliases/InterruptionBlock) for more specific information.\\n\\nThe skip property is used to define skip conditions. This is used to skip to a different component or block based on the response to a component or the number of correct or incorrect responses in a block. Please see [SkipConditions](../../type-aliases/SkipConditions) for more specific information.","properties":{"components":{"description":"The components that are included in the order.","items":{"anyOf":[{"type":"string"},{"$ref":"#/definitions/ComponentBlock"},{"$ref":"#/definitions/DynamicBlock"}]},"type":"array"},"id":{"description":"The id of the block. This is used to identify the block in the SkipConditions and is only required if you want to refer to the whole block in the condition.to property.","type":"string"},"interruptions":{"description":"The interruptions property specifies an array of interruptions. These can be used for breaks or attention checks.","items":{"$ref":"#/definitions/InterruptionBlock"},"type":"array"},"numSamples":{"description":"The number of samples to use for the random assignments. This means you can randomize across 3 components while only showing a participant 2 at a time.","type":"number"},"order":{"description":"The type of order. This can be random (pure random), latinSquare (random with some guarantees), or fixed.","enum":["random","latinSquare","fixed"],"type":"string"},"skip":{"$ref":"#/definitions/SkipConditions","description":"The skip conditions for the block."}},"required":["order","components"],"type":"object"},"ComponentBlockCondition":{"additionalProperties":false,"description":"The ComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect components in a block. All answers on all components in the block are checked.\\n\\nAnswers are checked against the correct answers defined in the IndividualComponent\'s [CorrectAnswer](../Answer). If no correct answers are defined, the component is considered correct by default.\\n\\nYou might use this if a participant answers two questions in a block incorrectly. Here\'s an example of how to use the ComponentBlockCondition:\\n\\n```js { ... \\"skip\\": [ {   \\"check\\": \\"block\\",   \\"condition\\": \\"numIncorrect\\",   \\"value\\": 2,   \\"to\\": \\"end\\" } ] ... } ```\\n\\nIn this example, when the number of components with incorrect responses in the block is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.\\n\\nWhen the condition is met, the participant will immediately be redirected to the component or block specified in the `\\"to\\"` property. If no conditions are met, the participant will continue to the next component in the sequence.","properties":{"check":{"const":"block","description":"The check we\'ll perform.","type":"string"},"condition":{"description":"The condition to check.","enum":["numCorrect","numIncorrect"],"type":"string"},"to":{"description":"The id of the component or block to skip to","type":"string"},"value":{"description":"The number of correct or incorrect responses to check for.","type":"number"}},"required":["check","condition","value","to"],"type":"object"},"ConfigResponseBlockLocation":{"enum":["sidebar","aboveStimulus","belowStimulus"],"type":"string"},"DeterministicInterruption":{"additionalProperties":false,"description":"The DeterministicInterruption interface is used to define an interruption that will be shown at a specific location in the block.\\n\\nFor example, if you want to show an interruption after the second component in the block, you would set firstLocation to 2. If you want to show an interruption after every 3 components, you would set spacing to 3. If you want to show an interruption after the second component and then every 3 components, you would set firstLocation to 2 and spacing to 3.\\n\\nThe components property is an array of the components that will be inserted at the location specified by firstLocation and spacing. These components should reference components in the StudyConfig.components section of the config.\\n\\nHere\'s an example of how to use the DeterministicInterruption:\\n\\n```js { \\"order\\": \\"fixed\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"component6\\" ], \\"interruptions\\": [ {   \\"firstLocation\\": 2,   \\"spacing\\": 3,   \\"components\\": [     \\"interruption1\\",     \\"interruption2\\"   ] } ] } ```\\n\\nThe resulting sequence array could be:\\n\\n```js [ [\\"component1\\", \\"component2\\", \\"interruption1\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"interruption2\\", \\"component6\\"], [\\"component1\\", \\"component2\\", \\"interruption1\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"interruption2\\", \\"component6\\"], [\\"component1\\", \\"component2\\", \\"interruption1\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"interruption2\\", \\"component6\\"], ... ] ```","properties":{"components":{"description":"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.","items":{"type":"string"},"type":"array"},"firstLocation":{"description":"The Location of the first instance of the interruption. If this is set to 2, the interruption will be shown after the second component (inserted at index 2).","type":"number"},"spacing":{"description":"The number of components between breaks.","type":"number"}},"required":["firstLocation","spacing","components"],"type":"object"},"DropdownResponse":{"additionalProperties":false,"description":"The DropdownResponse interface is used to define the properties of a dropdown response. DropdownResponses render as a select input with user specified options.\\n\\nExample: ```js { \\"id\\": \\"q-color\\", \\"prompt\\": \\"What is your favorite color?\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"dropdown\\", \\"placeholder\\": \\"Please choose your favorite color\\", \\"options\\": [\\"Red\\", \\"Blue\\"] } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"options":{"description":"The options that are displayed in the dropdown.","items":{"anyOf":[{"$ref":"#/definitions/StringOption"},{"type":"string"}]},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"placeholder":{"description":"The placeholder text that is displayed in the input.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"dropdown","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider. If present, will override the divider setting in the components or uiConfig.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","options","prompt","type"],"type":"object"},"DynamicBlock":{"additionalProperties":false,"description":"The DynamicBlock interface is used to define a block where displayed components are controlled by a function. This is useful when you want to generate the sequence based on answers to previous questions or other factors.\\n\\nThe functionPath property is a path to the function that generates the components. This should be a relative path from the src/public folder.\\n\\nHere\'s an example of how to use the DynamicBlock:\\n\\n```js {   \\"id\\": \\"funcBlock\\",   \\"order\\": \\"dynamic\\",   \\"functionPath\\": \\"<study-name>/assets/function.js\\",   \\"parameters\\": {     \\"param1\\": \\"value1\\",     \\"param2\\": \\"value2\\"   } } ```","properties":{"functionPath":{"description":"The path to the function that generates the components. This should be a relative path from the src/public folder.","type":"string"},"id":{"description":"The id of the block. This is used to identify the block in the SkipConditions and is only required if you want to refer to the whole block in the condition.to property.","type":"string"},"order":{"const":"dynamic","description":"The type of order. This can be random (pure random), latinSquare (random with some guarantees), or fixed.","type":"string"},"parameters":{"additionalProperties":{},"description":"The parameters that are passed to the function. These can be used within your function to render different things.","type":"object"}},"required":["id","order","functionPath"],"type":"object"},"ImageComponent":{"additionalProperties":false,"description":"The ImageComponent interface is used to define the properties of an image component. This component is used to render an image with optional styling.\\n\\nFor example, to render an image with a path of `path/to/study/assets/image.jpg` and a max width of 50%, you would use the following snippet: ```js { \\"type\\": \\"image\\", \\"path\\": \\"<study-name>/assets/image.jpg\\", \\"style\\": { \\"maxWidth\\": \\"50%\\" } } ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If present, will override the allow failed training setting in the uiConfig.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"enumerateQuestions":{"description":"Whether to prepend questions with their index (+ 1). This should only be used when all questions are in the same location, e.g. all are in the side bar. If present, will override the enumeration of questions setting in the uiConfig.","type":"boolean"},"helpTextPath":{"description":"The path to the help text file. This is displayed when a participant clicks help. Markdown is supported. If present, will override the help text path set in the uiConfig.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the instructions. If present, will override the instruction location setting in the uiConfig."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"The time in milliseconds to wait before the next button is disabled. If present, will override the next button disable time setting in the uiConfig.","type":"number"},"nextButtonEnableTime":{"description":"The time in milliseconds to wait before the next button is enabled. If present, will override the next button enable time setting in the uiConfig.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the next button. If present, will override the  next button location setting in the uiConfig."},"nextButtonText":{"description":"The text to display on the next button. If present, will override the next button text setting in the uiConfig.","type":"string"},"nextOnEnter":{"description":"Whether enter key should move to the next question. If present, will override the enter key setting in the uiConfig.","type":"boolean"},"path":{"description":"The path to the image. This could be a relative path from the public folder or a url to an external image.","type":"string"},"previousButton":{"description":"Whether to show the previous button. If present, will override the previous button setting in the uiConfig.","type":"boolean"},"previousButtonText":{"description":"The text that is displayed on the previous button. If present, will override the previous button text setting in the uiConfig.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If present, will override the provide feedback setting in the uiConfig.","type":"boolean"},"recordAudio":{"description":"Whether or not we want to utilize think-aloud features. If present, will override the record audio setting in the uiConfig.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. If present, will override the response dividers setting in the uiConfig.","type":"boolean"},"responseOrder":{"description":"The order of the responses. Defaults to \'fixed\'.","enum":["fixed","random"],"type":"string"},"showTitle":{"description":"Controls whether the title should be hidden in the study. If present, will override the title setting in the uiConfig.","type":"boolean"},"showTitleBar":{"description":"Controls whether the title bar should be hidden in the study. If present, will override the title bar setting in the uiConfig.","type":"boolean"},"sidebarWidth":{"description":"The width of the left sidebar. If present, will override the sidebar width setting in the uiConfig.","type":"number"},"style":{"additionalProperties":{"type":"string"},"description":"The style of the image. This is an object with css properties as keys and css values as values.","type":"object"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. If present, will override the training attempts setting in the uiConfig.","type":"number"},"type":{"const":"image","type":"string"},"windowEventDebounceTime":{"description":"Debounce time in milliseconds for automatically tracked window events. If present, will override the window event debounce time setting in the uiConfig.","type":"number"},"withProgressBar":{"description":"Controls whether the progress bar is rendered. If present, will override the progress bar setting in the uiConfig.","type":"boolean"},"withSidebar":{"description":"Controls whether the left sidebar is rendered at all. Required to be true if your response\'s location is set to sidebar for any question. If present, will override the sidebar setting in the uiConfig.","type":"boolean"}},"required":["path","response","type"],"type":"object"},"IndividualComponent":{"anyOf":[{"$ref":"#/definitions/MarkdownComponent"},{"$ref":"#/definitions/ReactComponent"},{"$ref":"#/definitions/ImageComponent"},{"$ref":"#/definitions/WebsiteComponent"},{"$ref":"#/definitions/QuestionnaireComponent"},{"$ref":"#/definitions/VegaComponent"},{"$ref":"#/definitions/VideoComponent"}]},"IndividualComponentAllResponsesCondition":{"additionalProperties":false,"description":"The IndividualComponentAllResponsesCondition interface is used to define a SkipCondition based on all answers to a specific component. The skip logic will be checked for every component in the block that has the specified name.\\n\\n:::info\\n\\nIf you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.\\n\\n:::\\n\\n\\nHere\'s an example of how to use the IndividualComponentAllResponsesCondition:\\n\\n```js { ... \\"skip\\": [ {   \\"name\\": \\"attentionCheck\\",   \\"check\\": \\"responses\\",   \\"to\\": \\"end\\" } ] ... } ```\\n\\nIn this example, if all responses to the component with the ID \\"attentionCheck\\" are correct, the participant will be redirected to the end of the study. If any response is incorrect, the participant will continue to the next component in the sequence.","properties":{"check":{"const":"responses","description":"The check we\'ll perform.","type":"string"},"name":{"description":"The name of the component to check.","type":"string"},"to":{"description":"The id of the component or block to skip to","type":"string"}},"required":["name","check","to"],"type":"object"},"IndividualComponentSingleResponseCondition":{"additionalProperties":false,"description":"The IndividualComponentSingleResponseCondition interface is used to define a SkipCondition based on a single answer to a specific component. The skip logic will be checked for every component in the block that has the specified name.\\n\\n:::info\\n\\nIf you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.\\n\\n:::\\n\\nFor example, if you want to skip to a different component based on a response to a specific component, you would use the IndividualComponentSingleResponseCondition. Here\'s an example of how to use the IndividualComponentSingleResponseCondition:\\n\\n```js { ... \\"skip\\": [ {   \\"name\\": \\"attentionCheck\\",   \\"check\\": \\"response\\",   \\"responseId\\": \\"attentionCheckResponse\\",   \\"value\\": \\"the right answer\\",   \\"comparison\\": \\"equal\\",   \\"to\\": \\"end\\" } ] ... } ```\\n\\nIn this example, we assign our skip logic to the component whose ID is \\"attentionCheck\\". If the answer given to the response \\"attentionCheckResponse\\" is equal to \\"the right answer\\", then the user will be redirected to the end of the study. If the response is _not_ equal to \\"the right answer\\", then the participant will continue to the next component in the sequence.","properties":{"check":{"const":"response","description":"The check we\'ll perform.","type":"string"},"comparison":{"description":"The comparison to use.","enum":["equal","notEqual"],"type":"string"},"name":{"description":"The name of the component to check.","type":"string"},"responseId":{"description":"The response id to check.","type":"string"},"to":{"description":"The id of the component or block to skip to","type":"string"},"value":{"description":"The value to check.","type":["string","number"]}},"required":["name","check","responseId","value","comparison","to"],"type":"object"},"InheritedComponent":{"additionalProperties":false,"description":"An InheritedComponent is a component that inherits properties from a baseComponent. This is used to avoid repeating properties in components. This also means that components in the baseComponents object can be partially defined, while components in the components object can inherit from them and must be fully defined and include all properties (after potentially merging with a base component).","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If present, will override the allow failed training setting in the uiConfig.","type":"boolean"},"baseComponent":{"type":"string"},"config":{"description":"The vega or vega-lite configuration.","type":"object"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"enumerateQuestions":{"description":"Whether to prepend questions with their index (+ 1). This should only be used when all questions are in the same location, e.g. all are in the side bar. If present, will override the enumeration of questions setting in the uiConfig.","type":"boolean"},"forceCompletion":{"description":"Whether to force the video to play until the end. Defaults to true.","type":"boolean"},"helpTextPath":{"description":"The path to the help text file. This is displayed when a participant clicks help. Markdown is supported. If present, will override the help text path set in the uiConfig.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the instructions. If present, will override the instruction location setting in the uiConfig."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"The time in milliseconds to wait before the next button is disabled. If present, will override the next button disable time setting in the uiConfig.","type":"number"},"nextButtonEnableTime":{"description":"The time in milliseconds to wait before the next button is enabled. If present, will override the next button enable time setting in the uiConfig.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the next button. If present, will override the  next button location setting in the uiConfig."},"nextButtonText":{"description":"The text to display on the next button. If present, will override the next button text setting in the uiConfig.","type":"string"},"nextOnEnter":{"description":"Whether enter key should move to the next question. If present, will override the enter key setting in the uiConfig.","type":"boolean"},"parameters":{"anyOf":[{"additionalProperties":{},"description":"The parameters that are passed to the react component. These can be used within your react component to render different things.","type":"object"},{"additionalProperties":{},"description":"The parameters that are passed to the website (iframe). These can be used within your website to render different things.","type":"object"}],"description":"The parameters that are passed to the react component. These can be used within your react component to render different things."},"path":{"anyOf":[{"description":"The path to the markdown file. This should be a relative path from the public folder.","type":"string"},{"description":"The path to the react component. This should be a relative path from the src/public folder.","type":"string"},{"description":"The path to the image. This could be a relative path from the public folder or a url to an external image.","type":"string"},{"description":"The path to the website. This should be a relative path from the public folder or could be an external website.","type":"string"},{"description":"The path to the vega file. This should be a relative path from the public folder.","type":"string"},{"description":"The path to the video. This could be a relative path from the public folder or might be a url to an external website.","type":"string"}],"description":"The path to the markdown file. This should be a relative path from the public folder."},"previousButton":{"description":"Whether to show the previous button. If present, will override the previous button setting in the uiConfig.","type":"boolean"},"previousButtonText":{"description":"The text that is displayed on the previous button. If present, will override the previous button text setting in the uiConfig.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If present, will override the provide feedback setting in the uiConfig.","type":"boolean"},"recordAudio":{"description":"Whether or not we want to utilize think-aloud features. If present, will override the record audio setting in the uiConfig.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. If present, will override the response dividers setting in the uiConfig.","type":"boolean"},"responseOrder":{"description":"The order of the responses. Defaults to \'fixed\'.","enum":["fixed","random"],"type":"string"},"showTitle":{"description":"Controls whether the title should be hidden in the study. If present, will override the title setting in the uiConfig.","type":"boolean"},"showTitleBar":{"description":"Controls whether the title bar should be hidden in the study. If present, will override the title bar setting in the uiConfig.","type":"boolean"},"sidebarWidth":{"description":"The width of the left sidebar. If present, will override the sidebar width setting in the uiConfig.","type":"number"},"style":{"additionalProperties":{"type":"string"},"description":"The style of the image. This is an object with css properties as keys and css values as values.","type":"object"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. If present, will override the training attempts setting in the uiConfig.","type":"number"},"type":{"enum":["markdown","react-component","image","website","questionnaire","vega","video"],"type":"string"},"windowEventDebounceTime":{"description":"Debounce time in milliseconds for automatically tracked window events. If present, will override the window event debounce time setting in the uiConfig.","type":"number"},"withProgressBar":{"description":"Controls whether the progress bar is rendered. If present, will override the progress bar setting in the uiConfig.","type":"boolean"},"withSidebar":{"description":"Controls whether the left sidebar is rendered at all. Required to be true if your response\'s location is set to sidebar for any question. If present, will override the sidebar setting in the uiConfig.","type":"boolean"},"withActions":{"description":"Whether to include vega actions. Defaults to true.","type":"boolean"},"withTimeline":{"description":"Whether to show the video timeline. Defaults to false.","type":"boolean"}},"required":["baseComponent"],"type":"object"},"InterruptionBlock":{"anyOf":[{"$ref":"#/definitions/DeterministicInterruption"},{"$ref":"#/definitions/RandomInterruption"}],"description":"The InterruptionBlock interface is used to define interruptions in a block. These can be used for breaks or attention checks. Interruptions can be deterministic or random."},"LibraryConfig":{"additionalProperties":false,"description":"LibraryConfig is used to define the properties of a library configuration. This is a JSON object with three main components: baseComponents, components, and the sequences. Libraries are useful for defining components and sequences of these components that are to be reused across multiple studies. We (the reVISit team) provide several libraries that can be used in your study configurations. Check the public/libraries folder in the reVISit-studies repository for available libraries. We also plan to accept community contributions for libraries. If you have a library that you think would be useful for others, please reach out to us. We would love to include it in our repository.\\n\\nBelow is the general template that should be followed when constructing a Library configuration file.\\n\\n```js {  \\"$schema\\": \\"https://raw.githubusercontent.com/revisit-studies/study/v2.1.1/src/parser/LibraryConfigSchema.json\\",  \\"baseComponents\\": {    // BaseComponents here are defined exactly as is in the StudyConfig  },  \\"components\\": {    // Components here are defined exactly as is in the StudyConfig  },  \\"sequences\\": {   // Sequences here are defined as \\"key\\": \\"value\\" pairs where the key is the name of the sequence and the value is a ComponentBlock, just like in the StudyConfig  } } ```","properties":{"$schema":{"description":"A required json schema property. This should point to the github link for the version of the schema you would like. The `$schema` line is used to verify the schema. If you\'re using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration. See examples for more information","type":"string"},"baseComponents":{"$ref":"#/definitions/BaseComponents","description":"The base components that are used in the study. These components can be used to template other components. See [BaseComponents](../../type-aliases/BaseComponents) for more information."},"components":{"additionalProperties":{"anyOf":[{"$ref":"#/definitions/IndividualComponent"},{"$ref":"#/definitions/InheritedComponent"}]},"description":"The components that are used in the study. They must be fully defined here with all properties. Some properties may be inherited from baseComponents.","type":"object"},"description":{"description":"A description of the library.","type":"string"},"doi":{"description":"The DOI of the paper where the content of the library is based on.","type":"string"},"externalLink":{"description":"The external link to the paper/website where the content of the library is based on.","type":"string"},"reference":{"description":"The reference to the paper where the content of the library is based on.","type":"string"},"sequences":{"additionalProperties":{"anyOf":[{"$ref":"#/definitions/ComponentBlock"},{"$ref":"#/definitions/DynamicBlock"}],"description":"The order of the components in the study. This might include some randomness."},"description":"The order of the components in the study. This might include some randomness.","type":"object"}},"required":["$schema","description","components","sequences"],"type":"object"},"LikertResponse":{"additionalProperties":false,"description":"The LikertResponse interface is used to define the properties of a likert response. LikertResponses render as radio buttons with a user specified number of options, which can be controlled through the numItems. For example, numItems: 5 will render 5 radio buttons, and numItems: 7 will render 7 radio buttons. LikertResponses can also have a description, and left and right labels. The left and right labels are used to label the left and right ends of the likert scale with values such as \'Strongly Disagree\' and \'Strongly Agree\'.\\n\\nExample for a five-point Likert Scale:\\n\\n```js { \\"id\\": \\"q-satisfaction\\", \\"prompt\\": \\"Rate your satisfaction from 1 (not enjoyable) to 5 (very enjoyable).\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"likert\\", \\"leftLabel\\": \\"Not Enjoyable\\", \\"rightLabel\\": \\"Very Enjoyable\\", \\"numItems\\": 5 } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"leftLabel":{"description":"The left label of the likert scale. E.g Strongly Disagree","type":"string"},"location":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"numItems":{"description":"The number of options to render.","type":"number"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"rightLabel":{"description":"The right label of the likert scale. E.g Strongly Agree","type":"string"},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"likert","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider. If present, will override the divider setting in the components or uiConfig.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","numItems","prompt","type"],"type":"object"},"LongTextResponse":{"additionalProperties":false,"description":"The LongTextResponse interface is used to define the properties of a long text response. LongTextResponses render as a text area that accepts any text and can optionally have a placeholder. ```js { \\"id\\": \\"q-name\\", \\"prompt\\": \\"What is your first name?\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"longText\\", \\"placeholder\\": \\"Please enter your first name\\" } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"placeholder":{"description":"The placeholder text that is displayed in the input.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"longText","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider. If present, will override the divider setting in the components or uiConfig.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","prompt","type"],"type":"object"},"MarkdownComponent":{"additionalProperties":false,"description":"The MarkdownComponent interface is used to define the properties of a markdown component. The components can be used to render many different things, such as consent forms, instructions, and debriefs. Additionally, you can use the markdown component to render images, videos, and other media, with supporting text. Markdown components can have responses (e.g. in a consent form), or no responses (e.g. in a help text file). Here\'s an example with no responses for a simple help text file:\\n\\n```js { \\"type\\": \\"markdown\\", \\"path\\": \\"<study-name>/assets/help.md\\", \\"response\\": [] } ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If present, will override the allow failed training setting in the uiConfig.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"enumerateQuestions":{"description":"Whether to prepend questions with their index (+ 1). This should only be used when all questions are in the same location, e.g. all are in the side bar. If present, will override the enumeration of questions setting in the uiConfig.","type":"boolean"},"helpTextPath":{"description":"The path to the help text file. This is displayed when a participant clicks help. Markdown is supported. If present, will override the help text path set in the uiConfig.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the instructions. If present, will override the instruction location setting in the uiConfig."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"The time in milliseconds to wait before the next button is disabled. If present, will override the next button disable time setting in the uiConfig.","type":"number"},"nextButtonEnableTime":{"description":"The time in milliseconds to wait before the next button is enabled. If present, will override the next button enable time setting in the uiConfig.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the next button. If present, will override the  next button location setting in the uiConfig."},"nextButtonText":{"description":"The text to display on the next button. If present, will override the next button text setting in the uiConfig.","type":"string"},"nextOnEnter":{"description":"Whether enter key should move to the next question. If present, will override the enter key setting in the uiConfig.","type":"boolean"},"path":{"description":"The path to the markdown file. This should be a relative path from the public folder.","type":"string"},"previousButton":{"description":"Whether to show the previous button. If present, will override the previous button setting in the uiConfig.","type":"boolean"},"previousButtonText":{"description":"The text that is displayed on the previous button. If present, will override the previous button text setting in the uiConfig.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If present, will override the provide feedback setting in the uiConfig.","type":"boolean"},"recordAudio":{"description":"Whether or not we want to utilize think-aloud features. If present, will override the record audio setting in the uiConfig.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. If present, will override the response dividers setting in the uiConfig.","type":"boolean"},"responseOrder":{"description":"The order of the responses. Defaults to \'fixed\'.","enum":["fixed","random"],"type":"string"},"showTitle":{"description":"Controls whether the title should be hidden in the study. If present, will override the title setting in the uiConfig.","type":"boolean"},"showTitleBar":{"description":"Controls whether the title bar should be hidden in the study. If present, will override the title bar setting in the uiConfig.","type":"boolean"},"sidebarWidth":{"description":"The width of the left sidebar. If present, will override the sidebar width setting in the uiConfig.","type":"number"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. If present, will override the training attempts setting in the uiConfig.","type":"number"},"type":{"const":"markdown","type":"string"},"windowEventDebounceTime":{"description":"Debounce time in milliseconds for automatically tracked window events. If present, will override the window event debounce time setting in the uiConfig.","type":"number"},"withProgressBar":{"description":"Controls whether the progress bar is rendered. If present, will override the progress bar setting in the uiConfig.","type":"boolean"},"withSidebar":{"description":"Controls whether the left sidebar is rendered at all. Required to be true if your response\'s location is set to sidebar for any question. If present, will override the sidebar setting in the uiConfig.","type":"boolean"}},"required":["path","response","type"],"type":"object"},"MatrixResponse":{"additionalProperties":false,"description":"The MatrixResponse interface is used to define the properties of a matrix radio or matrix checkbox response. Question options are rendered as rows of the matrix, each row containing its own radio/checkbox group. Answer options are rendered as column headers of the matrix. These can be customized by passing in the custom strings into the answer options. Alternatively, `answerOptions` can be set to one of the following custom strings: \'satisfaction5\',\'satisfaction7\', \'likely5\', \'likely7\'. This will automatically generate the appropriate headers for the matrix.\\n\\nExample for a 5-scale satisfaction matrix with three questions:\\n\\n```js { \\"id\\": \\"multi-satisfaction\\", \\"prompt\\": \\"Rate your satisfaction from 1 (not enjoyable) to 5 (very enjoyable) for the following items.\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"matrix-radio\\", \\"answerOptions\\": \\"satisfaction5\\", \\"questionOptions\\": [  \\"The tool we created\\",  \\"The technique we developed\\",  \\"The authors of the tools\\" ] } ```\\n\\nHere\'s an example using custom columns (answerOptions):\\n\\n```js { \\"id\\": \\"multi-custom\\", \\"prompt\\": \\"Which categories do the following items belong to?\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"matrix-checkbox\\", \\"answerOptions\\": [  \\"Has Legs\\",  \\"Has Wings\\",  \\"Can Swim\\" ], \\"questionOptions\\": [  \\"Dog\\",  \\"Snake\\",  \\"Eagle\\",  \\"Salmon\\",  \\"Platypus\\" ]\\n\\n} ```","properties":{"answerOptions":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"const":"likely5","type":"string"},{"const":"likely7","type":"string"},{"const":"satisfaction5","type":"string"},{"const":"satisfaction7","type":"string"}],"description":"The answer options (columns). We provide some shortcuts for a likelihood scale (ranging from highly unlikely to highly likely) and a satisfaction scale (ranging from highly unsatisfied to highly satisfied) with either 5 or 7 options to choose from."},"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"questionOptions":{"description":"The question options (rows) are the prompts for each response you\'d like to record.","items":{"type":"string"},"type":"array"},"questionOrder":{"description":"The order in which the questions are displayed. Defaults to fixed.","enum":["fixed","random"],"type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"enum":["matrix-radio","matrix-checkbox"],"type":"string"},"withDivider":{"description":"Renders the response with a trailing divider. If present, will override the divider setting in the components or uiConfig.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["answerOptions","id","prompt","questionOptions","type"],"type":"object"},"NumberOption":{"additionalProperties":false,"description":"The NumberOption interface is used to define the options for a slider response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.","properties":{"label":{"description":"The label displayed to participants.","type":"string"},"value":{"description":"The value stored in the participant\'s data.","type":"number"}},"required":["label","value"],"type":"object"},"NumericalResponse":{"additionalProperties":false,"description":"The NumericalResponse interface is used to define the properties of a numerical response. NumericalResponses render as a text input that only accepts numbers, and can optionally have a min and max value, or a placeholder.\\n\\nExample: ```js { \\"id\\": \\"q-numerical\\", \\"prompt\\": \\"Numerical example\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"numerical\\", \\"placeholder\\": \\"Enter your age, range from 0 - 120\\", \\"max\\": 120, \\"min\\": 0 } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"max":{"description":"The maximum value that is accepted in the input.","type":"number"},"min":{"description":"The minimum value that is accepted in the input.","type":"number"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"placeholder":{"description":"The placeholder text that is displayed in the input.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"numerical","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider. If present, will override the divider setting in the components or uiConfig.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","prompt","type"],"type":"object"},"QuestionnaireComponent":{"additionalProperties":false,"description":"A QuestionnaireComponent is used to render simple questions that require a response. The main use case of this component type is to ask participants questions when you don\'t need to render a stimulus. Please note, that even though we\'re not using a stimulus, the responses still require a `location`. For example this could be used to collect demographic information from a participant using the following snippet:\\n\\n```js { \\"type\\": \\"questionnaire\\", \\"response\\": [  {    \\"id\\": \\"gender\\",    \\"prompt\\": \\"Gender:\\",    \\"location\\": \\"belowStimulus\\",    \\"type\\": \\"checkbox\\",    \\"options\\": [\\"Man\\", \\"Woman\\", \\"Genderqueer\\", \\"Third-gender\\", ...]  } ] } ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If present, will override the allow failed training setting in the uiConfig.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"enumerateQuestions":{"description":"Whether to prepend questions with their index (+ 1). This should only be used when all questions are in the same location, e.g. all are in the side bar. If present, will override the enumeration of questions setting in the uiConfig.","type":"boolean"},"helpTextPath":{"description":"The path to the help text file. This is displayed when a participant clicks help. Markdown is supported. If present, will override the help text path set in the uiConfig.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the instructions. If present, will override the instruction location setting in the uiConfig."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"The time in milliseconds to wait before the next button is disabled. If present, will override the next button disable time setting in the uiConfig.","type":"number"},"nextButtonEnableTime":{"description":"The time in milliseconds to wait before the next button is enabled. If present, will override the next button enable time setting in the uiConfig.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the next button. If present, will override the  next button location setting in the uiConfig."},"nextButtonText":{"description":"The text to display on the next button. If present, will override the next button text setting in the uiConfig.","type":"string"},"nextOnEnter":{"description":"Whether enter key should move to the next question. If present, will override the enter key setting in the uiConfig.","type":"boolean"},"previousButton":{"description":"Whether to show the previous button. If present, will override the previous button setting in the uiConfig.","type":"boolean"},"previousButtonText":{"description":"The text that is displayed on the previous button. If present, will override the previous button text setting in the uiConfig.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If present, will override the provide feedback setting in the uiConfig.","type":"boolean"},"recordAudio":{"description":"Whether or not we want to utilize think-aloud features. If present, will override the record audio setting in the uiConfig.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. If present, will override the response dividers setting in the uiConfig.","type":"boolean"},"responseOrder":{"description":"The order of the responses. Defaults to \'fixed\'.","enum":["fixed","random"],"type":"string"},"showTitle":{"description":"Controls whether the title should be hidden in the study. If present, will override the title setting in the uiConfig.","type":"boolean"},"showTitleBar":{"description":"Controls whether the title bar should be hidden in the study. If present, will override the title bar setting in the uiConfig.","type":"boolean"},"sidebarWidth":{"description":"The width of the left sidebar. If present, will override the sidebar width setting in the uiConfig.","type":"number"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. If present, will override the training attempts setting in the uiConfig.","type":"number"},"type":{"const":"questionnaire","type":"string"},"windowEventDebounceTime":{"description":"Debounce time in milliseconds for automatically tracked window events. If present, will override the window event debounce time setting in the uiConfig.","type":"number"},"withProgressBar":{"description":"Controls whether the progress bar is rendered. If present, will override the progress bar setting in the uiConfig.","type":"boolean"},"withSidebar":{"description":"Controls whether the left sidebar is rendered at all. Required to be true if your response\'s location is set to sidebar for any question. If present, will override the sidebar setting in the uiConfig.","type":"boolean"}},"required":["response","type"],"type":"object"},"RadioResponse":{"additionalProperties":false,"description":"The RadioResponse interface is used to define the properties of a radio response. Radios have only one allowable selection. RadioResponses render as a radio input with user specified options, and optionally left and right labels.\\n\\nExample: ```js { \\"id\\": \\"q-radio\\", \\"prompt\\": \\"Radio button example\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"radio\\", \\"options\\": [\\"Option 1\\", \\"Option 2\\"] } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"horizontal":{"description":"Whether to render the radio buttons horizontally. Defaults to false, so they render horizontally.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"leftLabel":{"description":"The left label of the radio group. Used in Likert scales for example","type":"string"},"location":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"optionOrder":{"description":"The order in which the radio buttons are displayed. Defaults to fixed.","enum":["fixed","random"],"type":"string"},"options":{"description":"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.","items":{"anyOf":[{"$ref":"#/definitions/StringOption"},{"type":"string"}]},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"rightLabel":{"description":"The right label of the radio group. Used in Likert scales for example","type":"string"},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"radio","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider. If present, will override the divider setting in the components or uiConfig.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"},"withOther":{"description":"Whether to render the radios with an \\"other\\" option.","type":"boolean"}},"required":["id","options","prompt","type"],"type":"object"},"RandomInterruption":{"additionalProperties":false,"description":"The RandomInterruption interface is used to define an interruption that will be shown randomly in the block.\\n\\nFor example, if you want to show a single interruption randomly in the block, you would set `\\"spacing\\"` to \\"random\\" and `\\"numInterruptions\\"` to 1. If you want to show 3 interruptions randomly in the block, you would set `\\"spacing\\"` to \\"random\\" and `\\"numInterruptions\\"` to 3.\\n\\nThe components property is an array of the components that will be inserted randomly in the block. These components should reference components in the StudyConfig.components section of the config.\\n\\nHere\'s an example of how to use the RandomInterruption:\\n\\n```js { \\"order\\": \\"fixed\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"component6\\" ], \\"interruptions\\": [ {   \\"spacing\\": \\"random\\",   \\"numInterruptions\\": 3,   \\"components\\": [     \\"interruption1\\",     \\"interruption2\\"   ] } ] } ```\\n\\nThe resulting sequence array could be:\\n\\n```js [ [\\"component1\\", \\"interruption1\\", \\"interruption2\\", \\"component2\\", \\"interruption1\\", \\"interruption2\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"interruption1\\", \\"interruption2\\", \\"component6\\"], [\\"component1\\", \\"interruption1\\", \\"interruption2\\", \\"component2\\", \\"interruption1\\", \\"interruption2\\", \\"component3\\", \\"component4\\", \\"interruption1\\", \\"interruption2\\", \\"component5\\", \\"component6\\"], [\\"component1\\", \\"component2\\" \\"interruption1\\", \\"interruption2\\", \\"component3\\", \\"interruption1\\", \\"interruption2\\", \\"component4\\", \\"component5\\", \\"interruption1\\", \\"interruption2\\", \\"component6\\"], ... ] ```","properties":{"components":{"description":"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.","items":{"type":"string"},"type":"array"},"numInterruptions":{"description":"The number of times the interruption will be randomly added","type":"number"},"spacing":{"const":"random","description":"If spacing is set to random, reVISit will add interruptions randomly. These interruptions will not ever be displayed as the first component in the block.","type":"string"}},"required":["spacing","numInterruptions","components"],"type":"object"},"ReactComponent":{"additionalProperties":false,"description":"The ReactComponent interface is used to define the properties of a react component. This component is used to render react code with certain parameters. These parameters can be used within your react code to render different things.\\n\\nUnlike other types of components, the path for a React component is relative to the `src/public/` folder. Similar to our standard assets, we suggest creating a folder named `src/public/{studyName}/assets` to house all of the React component assets for a particular study. Your React component which you link to in the path must be default exported from its file.\\n\\nReact components created this way have a generic prop type passed to the component on render, `<StimulusParams<T>>`, which has the following types.\\n\\n```ts { parameters: T; setAnswer: ({ status, provenanceGraph, answers }: { status: boolean, provenanceGraph?: TrrackedProvenance, answers: Record<string, any> }) => void } ```\\n\\nparameters is the same object passed in from the ReactComponent type below, allowing you to pass options in from the config to your component. setAnswer is a callback function allowing the creator of the ReactComponent to programmatically set the answer, as well as the provenance graph. This can be useful if you don\'t use the default answer interface, and instead have something more unique.\\n\\nSo, for example, if I had the following ReactComponent in my config ```js { type: \'react-component\'; path: \'my_study/CoolComponent.tsx\'; parameters: {  name: \'Zach\';  age: 26; } } ```\\n\\nMy react component, CoolComponent.tsx, would exist in src/public/my_study/assets, and look something like this\\n\\n```ts export default function CoolComponent({ parameters, setAnswer }: StimulusParams<{name: string, age: number}>) { // render something } ```\\n\\nFor in depth examples, see the following studies, and their associated codebases. https://revisit.dev/study/demo-click-accuracy-test (https://github.com/revisit-studies/study/tree/v2.1.1/src/public/demo-click-accuracy-test/assets) https://revisit.dev/study/example-brush-interactions (https://github.com/revisit-studies/study/tree/v2.1.1/src/public/example-brush-interactions/assets)","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If present, will override the allow failed training setting in the uiConfig.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"enumerateQuestions":{"description":"Whether to prepend questions with their index (+ 1). This should only be used when all questions are in the same location, e.g. all are in the side bar. If present, will override the enumeration of questions setting in the uiConfig.","type":"boolean"},"helpTextPath":{"description":"The path to the help text file. This is displayed when a participant clicks help. Markdown is supported. If present, will override the help text path set in the uiConfig.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the instructions. If present, will override the instruction location setting in the uiConfig."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"The time in milliseconds to wait before the next button is disabled. If present, will override the next button disable time setting in the uiConfig.","type":"number"},"nextButtonEnableTime":{"description":"The time in milliseconds to wait before the next button is enabled. If present, will override the next button enable time setting in the uiConfig.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the next button. If present, will override the  next button location setting in the uiConfig."},"nextButtonText":{"description":"The text to display on the next button. If present, will override the next button text setting in the uiConfig.","type":"string"},"nextOnEnter":{"description":"Whether enter key should move to the next question. If present, will override the enter key setting in the uiConfig.","type":"boolean"},"parameters":{"additionalProperties":{},"description":"The parameters that are passed to the react component. These can be used within your react component to render different things.","type":"object"},"path":{"description":"The path to the react component. This should be a relative path from the src/public folder.","type":"string"},"previousButton":{"description":"Whether to show the previous button. If present, will override the previous button setting in the uiConfig.","type":"boolean"},"previousButtonText":{"description":"The text that is displayed on the previous button. If present, will override the previous button text setting in the uiConfig.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If present, will override the provide feedback setting in the uiConfig.","type":"boolean"},"recordAudio":{"description":"Whether or not we want to utilize think-aloud features. If present, will override the record audio setting in the uiConfig.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. If present, will override the response dividers setting in the uiConfig.","type":"boolean"},"responseOrder":{"description":"The order of the responses. Defaults to \'fixed\'.","enum":["fixed","random"],"type":"string"},"showTitle":{"description":"Controls whether the title should be hidden in the study. If present, will override the title setting in the uiConfig.","type":"boolean"},"showTitleBar":{"description":"Controls whether the title bar should be hidden in the study. If present, will override the title bar setting in the uiConfig.","type":"boolean"},"sidebarWidth":{"description":"The width of the left sidebar. If present, will override the sidebar width setting in the uiConfig.","type":"number"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. If present, will override the training attempts setting in the uiConfig.","type":"number"},"type":{"const":"react-component","type":"string"},"windowEventDebounceTime":{"description":"Debounce time in milliseconds for automatically tracked window events. If present, will override the window event debounce time setting in the uiConfig.","type":"number"},"withProgressBar":{"description":"Controls whether the progress bar is rendered. If present, will override the progress bar setting in the uiConfig.","type":"boolean"},"withSidebar":{"description":"Controls whether the left sidebar is rendered at all. Required to be true if your response\'s location is set to sidebar for any question. If present, will override the sidebar setting in the uiConfig.","type":"boolean"}},"required":["path","response","type"],"type":"object"},"ReactiveResponse":{"additionalProperties":false,"description":"The ReactiveResponse interface is used to define the properties of a reactive response. ReactiveResponses render as a list, that is connected to a WebsiteComponent, VegaComponent, or ReactComponent. When data is sent from the components, it is displayed in the list.\\n\\n```js { \\"id\\": \\"reactiveResponse\\", \\"prompt\\": \\"Answer clicked in the stimulus\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"reactive\\" } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"reactive","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider. If present, will override the divider setting in the components or uiConfig.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","prompt","type"],"type":"object"},"RepeatedComponentBlockCondition":{"additionalProperties":false,"description":"The RepeatedComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect repeated components. You might use this if you need to check if an attention check was failed multiple times. This is similar to the [ComponentBlockCondition](../ComponentBlockCondition), but it only checks a specific repeated component.\\n\\nHere\'s an example of how to use the RepeatedComponentBlockCondition:\\n\\n```js { ... \\"skip\\": [ {   \\"name\\": \\"attentionCheck\\",   \\"check\\": \\"repeatedComponent\\",   \\"condition\\": \\"numIncorrect\\",   \\"value\\": 2,   \\"to\\": \\"end\\" } ] ... } ```\\n\\nIn this example, when the number of incorrect responses to the repeated component with the name \\"attentionCheck\\" is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.","properties":{"check":{"const":"repeatedComponent","description":"The check we\'ll perform.","type":"string"},"condition":{"description":"The condition to check.","enum":["numCorrect","numIncorrect"],"type":"string"},"name":{"description":"The name of the repeated component to check (e.g. attentionCheck).","type":"string"},"to":{"description":"The id of the component or block to skip to","type":"string"},"value":{"description":"The number of correct or incorrect responses to check for.","type":"number"}},"required":["name","check","condition","value","to"],"type":"object"},"Response":{"anyOf":[{"$ref":"#/definitions/NumericalResponse"},{"$ref":"#/definitions/ShortTextResponse"},{"$ref":"#/definitions/LongTextResponse"},{"$ref":"#/definitions/LikertResponse"},{"$ref":"#/definitions/DropdownResponse"},{"$ref":"#/definitions/SliderResponse"},{"$ref":"#/definitions/RadioResponse"},{"$ref":"#/definitions/CheckboxResponse"},{"$ref":"#/definitions/ReactiveResponse"},{"$ref":"#/definitions/MatrixResponse"},{"$ref":"#/definitions/ButtonsResponse"},{"$ref":"#/definitions/TextOnlyResponse"}]},"ShortTextResponse":{"additionalProperties":false,"description":"The ShortTextResponse interface is used to define the properties of a short text response. ShortTextResponses render as a text input that accepts any text and can optionally have a placeholder.\\n\\n```js { \\"id\\": \\"q-short-text\\", \\"prompt\\": \\"Short text example\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"shortText\\", \\"placeholder\\": \\"Enter your answer here\\" } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"placeholder":{"description":"The placeholder text that is displayed in the input.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"shortText","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider. If present, will override the divider setting in the components or uiConfig.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","prompt","type"],"type":"object"},"SkipConditions":{"description":"The SkipConditions interface is used to define skip conditions. This is used to skip to a different component/block based on the response to a component or based on the number of correct/incorrect responses in a block. Skip conditions work recursively: if you have a nested block, the parent blocks\' skip conditions will be considered when computing the skip logic.\\n\\nSkip conditions are evaluated in the order they are defined in the array. If a condition is met, the participant will be redirected to the component or block specified in the `\\"to\\"` property. If no conditions are met, the participant will continue to the next component in the sequence.\\n\\nSkip conditions allow you to jump to a different component or block. If you intend to skip to a block, you should specify a block id in the sequence. If you intend to skip to a component, you should specify a component id. Skipping backwards is not supported. Skipping to a repeated component will skip to the first instance of the component after the component that triggered the skip.\\n\\nPlease see the interface definitions for more specific information on the different types of skip conditions.","items":{"anyOf":[{"$ref":"#/definitions/IndividualComponentSingleResponseCondition"},{"$ref":"#/definitions/IndividualComponentAllResponsesCondition"},{"$ref":"#/definitions/ComponentBlockCondition"},{"$ref":"#/definitions/RepeatedComponentBlockCondition"}]},"type":"array"},"SliderResponse":{"additionalProperties":false,"description":"The SliderResponse interface is used to define the properties of a slider response. SliderResponses render as a slider input with user specified steps. For example, you could have steps of 0, 50, and 100.\\n\\nExample: ```js { \\"id\\": \\"q-slider\\", \\"prompt\\": \\"How are you feeling?\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"slider\\", \\"options\\": [  {    \\"label\\": \\"Bad\\",    \\"value\\": 0  },  {    \\"label\\": \\"OK\\",    \\"value\\": 50  },  {    \\"label\\": \\"Good\\",    \\"value\\": 100  } ] } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"options":{"description":"This defines the steps in the slider and the extent of the slider as an array of objects that have a label and a value.","items":{"$ref":"#/definitions/NumberOption"},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"snap":{"description":"Whether the slider should snap between values. Defaults to false. Slider snapping disables the label above the handle.","type":"boolean"},"startingValue":{"description":"The starting value of the slider. Defaults to the minimum value.","type":"number"},"step":{"description":"The step value of the slider. If not provided (and snap not enabled), the step value is calculated as the range of the slider divided by 100.","type":"number"},"tlxStyle":{"description":"Whether to render the slider with a NASA-tlx style. Defaults to false.","type":"boolean"},"type":{"const":"slider","type":"string"},"withBar":{"description":"Whether to render the slider with a bar to the left. Defaults to true.","type":"boolean"},"withDivider":{"description":"Renders the response with a trailing divider. If present, will override the divider setting in the components or uiConfig.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","options","prompt","type"],"type":"object"},"StringOption":{"additionalProperties":false,"description":"The StringOption interface is used to define the options for a dropdown, radio, buttons, or checkbox response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.","properties":{"label":{"description":"The label displayed to participants.","type":"string"},"value":{"description":"The value stored in the participant\'s data.","type":"string"}},"required":["label","value"],"type":"object"},"TextOnlyResponse":{"additionalProperties":false,"description":"The TextOnlyResponse interface is used to define the properties of a text only response. TextOnlyResponses render as a block of text that is displayed to the user. This can be used to display instructions or other information. It does not accept any input from the user.\\n\\nExample: ```js {   \\"id\\": \\"textOnlyResponse\\",   \\"type\\": \\"textOnly\\",   \\"prompt\\": \\"This is a text only response, it accepts markdown so you can **bold** or _italicize_ text.\\",   \\"location\\": \\"belowStimulus\\",   \\"restartEnumeration\\": true } ```\\n\\nIn this example, the text only response is displayed below the stimulus and the enumeration of the questions is restarted.","properties":{"hidden":{"not":{}},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"paramCapture":{"not":{}},"prompt":{"description":"The markdown text that is displayed to the user.","type":"string"},"required":{"not":{}},"requiredLabel":{"not":{}},"requiredValue":{"not":{}},"restartEnumeration":{"description":"Whether to restart the enumeration of the questions. Defaults to false.","type":"boolean"},"secondaryText":{"not":{}},"type":{"const":"textOnly","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider. If present, will override the divider setting in the components or uiConfig.","type":"boolean"},"withDontKnow":{"not":{}}},"required":["id","prompt","type"],"type":"object"},"VegaComponent":{"anyOf":[{"$ref":"#/definitions/VegaComponentPath"},{"$ref":"#/definitions/VegaComponentConfig"}]},"VegaComponentConfig":{"additionalProperties":false,"description":"The VegaComponentConfig interface is used to define the properties of a Vega Component. This component is used to render a Vega/Vega-Lite Component by adding Vega/Vega-Lite specs within the reVISit config itself.\\n\\nTo do this, would use the following snippet: ```js { \\"type\\": \\"vega\\", \\"config\\": { ... vega specs here ...}, }\\n\\nIIf you are using Vega, you can use signals with `revisitAnswer` to send the user\'s responses back to the reVISit. For example, you can use the following snippet in your Vega spec\'s signals section: ```js { \\"signals\\": [  {    \\"name\\": \\"revisitAnswer\\",    \\"value\\": {},    \\"on\\": [      {        \\"events\\": \\"rect:click\\",        \\"update\\": \\"{responseId: \'vegaDemoResponse1\', response: datum.category}\\"      }    ]  } ] } In this example, when a user clicks on a rectangle in the Vega chart, the `revisitAnswer` signal is updated with the responseId and response. ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If present, will override the allow failed training setting in the uiConfig.","type":"boolean"},"config":{"description":"The vega or vega-lite configuration.","type":"object"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"enumerateQuestions":{"description":"Whether to prepend questions with their index (+ 1). This should only be used when all questions are in the same location, e.g. all are in the side bar. If present, will override the enumeration of questions setting in the uiConfig.","type":"boolean"},"helpTextPath":{"description":"The path to the help text file. This is displayed when a participant clicks help. Markdown is supported. If present, will override the help text path set in the uiConfig.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the instructions. If present, will override the instruction location setting in the uiConfig."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"The time in milliseconds to wait before the next button is disabled. If present, will override the next button disable time setting in the uiConfig.","type":"number"},"nextButtonEnableTime":{"description":"The time in milliseconds to wait before the next button is enabled. If present, will override the next button enable time setting in the uiConfig.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the next button. If present, will override the  next button location setting in the uiConfig."},"nextButtonText":{"description":"The text to display on the next button. If present, will override the next button text setting in the uiConfig.","type":"string"},"nextOnEnter":{"description":"Whether enter key should move to the next question. If present, will override the enter key setting in the uiConfig.","type":"boolean"},"previousButton":{"description":"Whether to show the previous button. If present, will override the previous button setting in the uiConfig.","type":"boolean"},"previousButtonText":{"description":"The text that is displayed on the previous button. If present, will override the previous button text setting in the uiConfig.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If present, will override the provide feedback setting in the uiConfig.","type":"boolean"},"recordAudio":{"description":"Whether or not we want to utilize think-aloud features. If present, will override the record audio setting in the uiConfig.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. If present, will override the response dividers setting in the uiConfig.","type":"boolean"},"responseOrder":{"description":"The order of the responses. Defaults to \'fixed\'.","enum":["fixed","random"],"type":"string"},"showTitle":{"description":"Controls whether the title should be hidden in the study. If present, will override the title setting in the uiConfig.","type":"boolean"},"showTitleBar":{"description":"Controls whether the title bar should be hidden in the study. If present, will override the title bar setting in the uiConfig.","type":"boolean"},"sidebarWidth":{"description":"The width of the left sidebar. If present, will override the sidebar width setting in the uiConfig.","type":"number"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. If present, will override the training attempts setting in the uiConfig.","type":"number"},"type":{"const":"vega","type":"string"},"windowEventDebounceTime":{"description":"Debounce time in milliseconds for automatically tracked window events. If present, will override the window event debounce time setting in the uiConfig.","type":"number"},"withProgressBar":{"description":"Controls whether the progress bar is rendered. If present, will override the progress bar setting in the uiConfig.","type":"boolean"},"withSidebar":{"description":"Controls whether the left sidebar is rendered at all. Required to be true if your response\'s location is set to sidebar for any question. If present, will override the sidebar setting in the uiConfig.","type":"boolean"},"withActions":{"description":"Whether to include vega actions. Defaults to true.","type":"boolean"}},"required":["config","response","type"],"type":"object"},"VegaComponentPath":{"additionalProperties":false,"description":"The VegaComponentPath interface is used to define the properties of a Vega Component. This component is used to render a Vega/Vega-Lite Component with path pointing to your Vega/Vega-Lite specs file.\\n\\nFor example, to render a vega based stimuli with a path of `<study-name>/assets/vega.spec.json`, you would use the following snippet: ```js { \\"type\\": \\"vega\\", \\"path\\": \\"<study-name>/assets/vega.spec.json\\", } ```\\n\\nIf you are using Vega, you can use signals with `revisitAnswer` to send the user\'s responses back to the reVISit. For example, you can use the following snippet in your Vega spec file\'s signals section: ```js { \\"signals\\": [  {    \\"name\\": \\"revisitAnswer\\",    \\"value\\": {},    \\"on\\": [      {        \\"events\\": \\"rect:click\\",        \\"update\\": \\"{responseId: \'vegaDemoResponse1\', response: datum.category}\\"      }    ]  } ] } In this example, when a user clicks on a rectangle in the Vega chart, the `revisitAnswer` signal is updated with the responseId and response. This signal is then passed to reVISit as the participant\'s response. ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If present, will override the allow failed training setting in the uiConfig.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"enumerateQuestions":{"description":"Whether to prepend questions with their index (+ 1). This should only be used when all questions are in the same location, e.g. all are in the side bar. If present, will override the enumeration of questions setting in the uiConfig.","type":"boolean"},"helpTextPath":{"description":"The path to the help text file. This is displayed when a participant clicks help. Markdown is supported. If present, will override the help text path set in the uiConfig.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the instructions. If present, will override the instruction location setting in the uiConfig."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"The time in milliseconds to wait before the next button is disabled. If present, will override the next button disable time setting in the uiConfig.","type":"number"},"nextButtonEnableTime":{"description":"The time in milliseconds to wait before the next button is enabled. If present, will override the next button enable time setting in the uiConfig.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the next button. If present, will override the  next button location setting in the uiConfig."},"nextButtonText":{"description":"The text to display on the next button. If present, will override the next button text setting in the uiConfig.","type":"string"},"nextOnEnter":{"description":"Whether enter key should move to the next question. If present, will override the enter key setting in the uiConfig.","type":"boolean"},"path":{"description":"The path to the vega file. This should be a relative path from the public folder.","type":"string"},"previousButton":{"description":"Whether to show the previous button. If present, will override the previous button setting in the uiConfig.","type":"boolean"},"previousButtonText":{"description":"The text that is displayed on the previous button. If present, will override the previous button text setting in the uiConfig.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If present, will override the provide feedback setting in the uiConfig.","type":"boolean"},"recordAudio":{"description":"Whether or not we want to utilize think-aloud features. If present, will override the record audio setting in the uiConfig.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. If present, will override the response dividers setting in the uiConfig.","type":"boolean"},"responseOrder":{"description":"The order of the responses. Defaults to \'fixed\'.","enum":["fixed","random"],"type":"string"},"showTitle":{"description":"Controls whether the title should be hidden in the study. If present, will override the title setting in the uiConfig.","type":"boolean"},"showTitleBar":{"description":"Controls whether the title bar should be hidden in the study. If present, will override the title bar setting in the uiConfig.","type":"boolean"},"sidebarWidth":{"description":"The width of the left sidebar. If present, will override the sidebar width setting in the uiConfig.","type":"number"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. If present, will override the training attempts setting in the uiConfig.","type":"number"},"type":{"const":"vega","type":"string"},"windowEventDebounceTime":{"description":"Debounce time in milliseconds for automatically tracked window events. If present, will override the window event debounce time setting in the uiConfig.","type":"number"},"withProgressBar":{"description":"Controls whether the progress bar is rendered. If present, will override the progress bar setting in the uiConfig.","type":"boolean"},"withSidebar":{"description":"Controls whether the left sidebar is rendered at all. Required to be true if your response\'s location is set to sidebar for any question. If present, will override the sidebar setting in the uiConfig.","type":"boolean"},"withActions":{"description":"Whether to include vega actions. Defaults to true.","type":"boolean"}},"required":["path","response","type"],"type":"object"},"VideoComponent":{"additionalProperties":false,"description":"The VideoComponent interface is used to define the properties of a video component. This component is used to render a video with optional controls.\\n\\nMost often, video components will be used for trainings, and will have a `forceCompletion` field set to true. This will prevent the participant from moving on until the video has finished playing.\\n\\nAs such, the `forceCompletion` field is set to true by default, and the `withTimeline` field is set to false by default.\\n\\nFor example, to render a training video with a path of `<study-name>/assets/video.mp4`, you would use the following snippet: ```js {   \\"type\\": \\"video\\",   \\"path\\": \\"<study-name>/assets/video.mp4\\", } ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If present, will override the allow failed training setting in the uiConfig.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"enumerateQuestions":{"description":"Whether to prepend questions with their index (+ 1). This should only be used when all questions are in the same location, e.g. all are in the side bar. If present, will override the enumeration of questions setting in the uiConfig.","type":"boolean"},"forceCompletion":{"description":"Whether to force the video to play until the end. Defaults to true.","type":"boolean"},"helpTextPath":{"description":"The path to the help text file. This is displayed when a participant clicks help. Markdown is supported. If present, will override the help text path set in the uiConfig.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the instructions. If present, will override the instruction location setting in the uiConfig."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"The time in milliseconds to wait before the next button is disabled. If present, will override the next button disable time setting in the uiConfig.","type":"number"},"nextButtonEnableTime":{"description":"The time in milliseconds to wait before the next button is enabled. If present, will override the next button enable time setting in the uiConfig.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the next button. If present, will override the  next button location setting in the uiConfig."},"nextButtonText":{"description":"The text to display on the next button. If present, will override the next button text setting in the uiConfig.","type":"string"},"nextOnEnter":{"description":"Whether enter key should move to the next question. If present, will override the enter key setting in the uiConfig.","type":"boolean"},"path":{"description":"The path to the video. This could be a relative path from the public folder or might be a url to an external website.","type":"string"},"previousButton":{"description":"Whether to show the previous button. If present, will override the previous button setting in the uiConfig.","type":"boolean"},"previousButtonText":{"description":"The text that is displayed on the previous button. If present, will override the previous button text setting in the uiConfig.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If present, will override the provide feedback setting in the uiConfig.","type":"boolean"},"recordAudio":{"description":"Whether or not we want to utilize think-aloud features. If present, will override the record audio setting in the uiConfig.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. If present, will override the response dividers setting in the uiConfig.","type":"boolean"},"responseOrder":{"description":"The order of the responses. Defaults to \'fixed\'.","enum":["fixed","random"],"type":"string"},"showTitle":{"description":"Controls whether the title should be hidden in the study. If present, will override the title setting in the uiConfig.","type":"boolean"},"showTitleBar":{"description":"Controls whether the title bar should be hidden in the study. If present, will override the title bar setting in the uiConfig.","type":"boolean"},"sidebarWidth":{"description":"The width of the left sidebar. If present, will override the sidebar width setting in the uiConfig.","type":"number"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. If present, will override the training attempts setting in the uiConfig.","type":"number"},"type":{"const":"video","type":"string"},"windowEventDebounceTime":{"description":"Debounce time in milliseconds for automatically tracked window events. If present, will override the window event debounce time setting in the uiConfig.","type":"number"},"withProgressBar":{"description":"Controls whether the progress bar is rendered. If present, will override the progress bar setting in the uiConfig.","type":"boolean"},"withSidebar":{"description":"Controls whether the left sidebar is rendered at all. Required to be true if your response\'s location is set to sidebar for any question. If present, will override the sidebar setting in the uiConfig.","type":"boolean"},"withTimeline":{"description":"Whether to show the video timeline. Defaults to false.","type":"boolean"}},"required":["path","response","type"],"type":"object"},"WebsiteComponent":{"additionalProperties":false,"description":"The WebsiteComponent interface is used to define the properties of a website component. A WebsiteComponent is used to render an iframe with a website inside of it. This can be used to display an external website or an html file that is located in the public folder.\\n\\n```js { \\"type\\": \\"website\\", \\"path\\": \\"<study-name>/assets/website.html\\", } ```\\n\\nTo pass a data from the config to the website, you can use the `parameters` field as below:\\n\\n```js { \\"type\\": \\"website\\", \\"path\\": \\"<study-name>/website.html\\", \\"parameters\\": {  \\"barData\\": [0.32, 0.01, 1.2, 1.3, 0.82, 0.4, 0.3] }, \\"response\\": [  {    \\"id\\": \\"barChart\\",    \\"prompt\\": \\"Your selected answer:\\",    \\"location\\": \\"belowStimulus\\",    \\"type\\": \\"reactive\\"  } ] } ``` In the `website.html` file, by including `revisit-communicate.js`, you can use the `Revisit.onDataReceive` method to retrieve the data, and `Revisit.postAnswers` to send the user\'s responses back to the reVISit as shown in the example below:\\n\\n```html <script src=\\"../../revisitUtilities/revisit-communicate.js\\"><\/script> <script> Revisit.onDataReceive((data) => {  const barData = data[\'barData\'];  ... });\\n\\n// Call out that \'barChart\' needs to match ID in \'response\' object Revisit.postAnswers({ barChart: userAnswer }); <\/script> ```\\n\\n If the html website implements Trrack library for provenance tracking, you can send the provenance graph back to reVISit by calling `Revisit.postProvenanceGraph` as shown in the example below. You need to call this each time the Trrack state is updated so that reVISit is kept aware of the changes in the provenance graph.\\n\\n```js const trrack = initializeTrrack({ initialState, registry });\\n\\n... Revisit.postProvenance(trrack.graph.backend); ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If present, will override the allow failed training setting in the uiConfig.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"enumerateQuestions":{"description":"Whether to prepend questions with their index (+ 1). This should only be used when all questions are in the same location, e.g. all are in the side bar. If present, will override the enumeration of questions setting in the uiConfig.","type":"boolean"},"helpTextPath":{"description":"The path to the help text file. This is displayed when a participant clicks help. Markdown is supported. If present, will override the help text path set in the uiConfig.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the instructions. If present, will override the instruction location setting in the uiConfig."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"The time in milliseconds to wait before the next button is disabled. If present, will override the next button disable time setting in the uiConfig.","type":"number"},"nextButtonEnableTime":{"description":"The time in milliseconds to wait before the next button is enabled. If present, will override the next button enable time setting in the uiConfig.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the next button. If present, will override the  next button location setting in the uiConfig."},"nextButtonText":{"description":"The text to display on the next button. If present, will override the next button text setting in the uiConfig.","type":"string"},"nextOnEnter":{"description":"Whether enter key should move to the next question. If present, will override the enter key setting in the uiConfig.","type":"boolean"},"parameters":{"additionalProperties":{},"description":"The parameters that are passed to the website (iframe). These can be used within your website to render different things.","type":"object"},"path":{"description":"The path to the website. This should be a relative path from the public folder or could be an external website.","type":"string"},"previousButton":{"description":"Whether to show the previous button. If present, will override the previous button setting in the uiConfig.","type":"boolean"},"previousButtonText":{"description":"The text that is displayed on the previous button. If present, will override the previous button text setting in the uiConfig.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If present, will override the provide feedback setting in the uiConfig.","type":"boolean"},"recordAudio":{"description":"Whether or not we want to utilize think-aloud features. If present, will override the record audio setting in the uiConfig.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. If present, will override the response dividers setting in the uiConfig.","type":"boolean"},"responseOrder":{"description":"The order of the responses. Defaults to \'fixed\'.","enum":["fixed","random"],"type":"string"},"showTitle":{"description":"Controls whether the title should be hidden in the study. If present, will override the title setting in the uiConfig.","type":"boolean"},"showTitleBar":{"description":"Controls whether the title bar should be hidden in the study. If present, will override the title bar setting in the uiConfig.","type":"boolean"},"sidebarWidth":{"description":"The width of the left sidebar. If present, will override the sidebar width setting in the uiConfig.","type":"number"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. If present, will override the training attempts setting in the uiConfig.","type":"number"},"type":{"const":"website","type":"string"},"windowEventDebounceTime":{"description":"Debounce time in milliseconds for automatically tracked window events. If present, will override the window event debounce time setting in the uiConfig.","type":"number"},"withProgressBar":{"description":"Controls whether the progress bar is rendered. If present, will override the progress bar setting in the uiConfig.","type":"boolean"},"withSidebar":{"description":"Controls whether the left sidebar is rendered at all. Required to be true if your response\'s location is set to sidebar for any question. If present, will override the sidebar setting in the uiConfig.","type":"boolean"}},"required":["path","response","type"],"type":"object"}}'),Yjt={$ref:Wjt,$schema:Vjt,definitions:Gjt},PDe=new TQ;PDe.addSchema(Yjt);const Kjt=PDe.getSchema("#/definitions/LibraryConfig");function NDe(e,t){return Jl(e)?e:{...e,components:e.components.map(n=>typeof n=="object"?NDe(n,t):`$${t}.components.${n}`)}}function ODe(e,t,n=[]){return Jl(e)?e:{...e,components:(e.components||[]).map(r=>{if(typeof r=="object")return ODe(r,t);const i=r.includes(".se.")?".se.":r.includes(".sequences.")?".sequences.":!1;if(typeof r=="string"&&r.startsWith("$")&&i){const[s,o]=r.split(i),a=s.slice(1);if(!t[a]){const c={message:`Library ${a} not found in imported libraries`,instancePath:"",params:{action:"check the library name"}};return n.push(c),r}let u=t[a].sequences[o];if(!u){const c={message:`Sequence ${o} not found in library ${s}`,instancePath:"",params:{action:"check the sequence name"}};return n.push(c),r}return u=NDe(u,a),u}return r})}}function Xjt(e,t,n){Object.entries(n).forEach(([r,i])=>{Object.entries(i.components).forEach(([s,o])=>{var a;A$(o)&&!((a=i.baseComponents)!=null&&a[o.baseComponent])&&t.push({message:`Base component \`${o.baseComponent}\` is not defined in baseComponents object in library \`${r}\``,instancePath:`/importedLibraries/${r}/components/${s}`,params:{action:"add the base component to the baseComponents object"}})})})}function Qjt(e,t){let n=!1,r;try{r=JSON.parse(e),n=Kjt(r)}catch{n=!1}const i=[],s=[];return r?n||i.push({message:"Library config is not valid",instancePath:"",params:{action:"fix the errors in the library config"}}):i.push({message:`Could not find library \`${t}\``,instancePath:"/importedLibraries/",params:{action:"make sure the library is in the correct location"}}),{...r,errors:i,warnings:s}}async function Jjt(e){const t=await(await fetch(`${Vi}libraries/${e}/config.json`)).text();return Qjt(t,e)}async function Zjt(e,t,n){const r=e.map(async s=>{const o=await Jjt(s);return o.errors&&t.push(...o.errors),o.warnings&&n.push(...o.warnings),[s,o]}),i=Object.fromEntries(await Promise.all(r));return Object.entries(i).forEach(([s,o])=>{o.components||delete i[s]}),e.forEach(s=>{i[s]&&(i[s].components=Object.fromEntries(Object.entries(i[s].components).map(([o,a])=>{if(A$(a)){const l=FEe({},i[s].baseComponents[a.baseComponent],a);return delete l.baseComponent,[[`$${s}.components.${o}`,l],[`$${s}.co.${o}`,l]]}return[[`$${s}.components.${o}`,a],[`$${s}.co.${o}`,a]]}).reduce((o,[a,l])=>(o.push(a,l),o),[])))}),i}const $De=new TQ;$De.addSchema(Hjt);const Gfe=$De.getSchema("#/definitions/GlobalConfig"),MDe=new TQ;MDe.addSchema(Bjt);const r9=MDe.getSchema("#/definitions/StudyConfig");function eBt(e){const t=[];return[e.configsList.every(r=>e.configs[r]===void 0?(t.push({message:`Config ${r} is not defined in configs object, but is present in configsList`}),!1):!0),t]}function tBt(e){const t=JSON.parse(e),n=Gfe(t),r=eBt(t);if(n&&r[0])return t;throw console.error("Global config parsing errors",[...Gfe.errors||[],...r[1]]),Error("There was an issue validating your file global.json")}function LDe(e,t,n=[]){if(!Jl(e)){if(e.components.length===0){n.push({message:"Sequence has an empty components array",instancePath:"/sequence/",params:{action:"remove empty components block"}});return}e.id&&t.map((i,s)=>i===e.id?s:null).forEach(i=>{i!==null&&t.splice(i,1)}),e.components.forEach(r=>{typeof r=="string"?t.includes(r)&&t.map((s,o)=>s===r?o:null).forEach(s=>{s!==null&&t.splice(s,1)}):LDe(r,t,n)}),e.skip&&t.push(...e.skip.map(r=>r.to).filter(r=>r!=="end"))}}function nBt(e,t){const n=[],r=[];Xjt(e,n,t),Object.entries(e.components).forEach(([o,a])=>{var l;A$(a)&&!((l=e.baseComponents)!=null&&l[a.baseComponent])&&n.push({message:`Base component \`${a.baseComponent}\` is not defined in baseComponents object`,instancePath:`/components/${o}`,params:{action:"add the base component to the baseComponents object"}})});const i=OEe(e.sequence);i.forEach(o=>{var a;e.components[o]||n.push({message:(a=e.baseComponents)!=null&&a[o]?`Component \`${o}\` is a base component and cannot be used in the sequence`:`Component \`${o}\` is not defined in components object`,instancePath:"/sequence/",params:{action:"add the component to the components object"}})}),Object.keys(e.components).filter(o=>!i.includes(o)&&!o.includes(".se.")&&!o.includes(".sequences.")&&!o.includes(".co.")&&!o.includes(".components.")).forEach(o=>{r.push({message:`Component \`${o}\` is defined in components object but not used deterministically in the sequence`,instancePath:"/components/",params:{action:"remove the component from the components object or add it to the sequence"}})});const s=[];return LDe(e.sequence,s),s.forEach(o=>{n.push({message:`Skip target \`${o}\` does not occur after the skip block it is used in`,instancePath:"/sequence/",params:{action:"add the target to the sequence after the skip block"}})}),{errors:n,warnings:r}}async function BQ(e){let t=!1,n;try{n=JSON.parse(e),t=r9(n)}catch{try{n=Mjt(e).toJSON(),t=r9(n)}catch(s){console.error("Error parsing study config file:",s),t=!1}}let r=r9.errors||[],i=[];if(t&&n){const s=n.importedLibraries||[],o=await Zjt(s,r,i);Object.values(o).forEach(u=>{n.components={...n.components,...u.components},n.baseComponents={...n.baseComponents,...u.components}}),n.sequence=ODe(n.sequence,o,r);const{errors:a,warnings:l}=nBt(n,o);r=[...r,...a],i=[...i,...l]}else r=[...r,{message:"There was an issue validating your config file",instancePath:"root",params:{action:"fix the errors in your file or make sure the global config references the right file path"}}];return{...n,errors:r,warnings:i}}async function rBt(e){const t=await(await fetch(`${Vi}${e}`)).text();return await BQ(t)}async function zQ(e,t){const n=t.configsList.find(r=>Ige(r)===e);if(n){const r=t.configs[n];return await rBt(`${r.path}`)}return null}async function iBt(e){const t={},n=e.configsList.map(async i=>zQ(i,e)),r=await Promise.all(n);return e.configsList.forEach((i,s)=>{t[i]=r[s]}),t}function sBt({globalConfig:e}){const t=Wf(),[n,r]=D.useState(null),i=e.configsList.includes(t)||t==="__revisit-widget";D.useEffect(()=>{if(t!=="__revisit-widget")return zQ(t,e).then(p=>{r(p)}),()=>{};if(e&&t){const p=m=>{m.data.type==="revisitWidget/CONFIG"&&BQ(m.data.payload).then(async g=>{r(g);const b=await Ede(g);window.parent.postMessage({type:"revisitWidget/SEQUENCE_ARRAY",payload:b},"*")})};return window.addEventListener("message",p),window.parent.postMessage({type:"revisitWidget/READY"},"*"),()=>{window.removeEventListener("message",p)}}return()=>{}},[e,t]);const[s,o]=D.useState([]),[a,l]=D.useState(null),{storageEngine:u}=Ai(),[c]=Bf(),d=D.useMemo(()=>c.get("participantId"),[c]);D.useEffect(()=>{async function p(){if(!u||!n||!t)return;await u.initializeStudyDb(t),await u.saveConfig(n),await u.getSequenceArray()||await u.setSequenceArray(await Ede(n));const g=n.uiConfig.urlParticipantIdParam&&c.get(n.uiConfig.urlParticipantIdParam)||void 0,b=Object.fromEntries(c.entries()),v=await fetch("https://api.ipify.org?format=json").catch(O=>""),x=v instanceof Response?await v.json():{ip:""},E={language:navigator.language,userAgent:navigator.userAgent,resolution:{width:window.screen.width,height:window.screen.height,availHeight:window.screen.availHeight,availWidth:window.screen.availWidth,colorDepth:window.screen.colorDepth,orientation:window.screen.orientation.type,pixelDepth:window.screen.pixelDepth},ip:x.ip},_=await u.initializeParticipantSession(b,n,E,d||g),C=await u.getModes(t),S=await yj(JSON.stringify(n));let k=n;_.participantConfigHash!==S&&(k=(await u.getAllConfigsFromHash([_.participantConfigHash],t))[_.participantConfigHash]);const R=await Bft(t,k,_.sequence,E,_.answers,C,_.participantId);l(R),o([{element:T.jsx(mFt,{}),children:[{path:"/",element:T.jsx(F3e,{to:ri(0),replace:!0})},{path:"/:index/:funcIndex?",element:n.errors.length>0?T.jsxs(T.Fragment,{children:[T.jsx(mi,{order:2,mb:8,children:"Error loading config"}),T.jsx(LR,{issues:n.errors,type:"error"})]}):T.jsx(JLt,{})}]}])}p()},[u,n,t,c,d]);const f=lge(s);let h=null;return i?s.length===0?h=T.jsx(Nu,{visible:!0}):h=f&&a?T.jsx(jEe.Provider,{value:a,children:T.jsx(mJe,{store:a.store,children:f})}):T.jsx(Cp,{}):h=T.jsx(Cp,{}),h}function aD({studyIds:e}){const t=Ra(),{studyId:n}=To(),r=Wu(),i=e.map(o=>({value:o,label:o})).sort((o,a)=>o.label.localeCompare(a.label)),s=r.pathname.includes("analysis");return T.jsx(Ar.Header,{p:"md",children:T.jsxs(rf,{mt:-7,align:"center",children:[T.jsx(rf.Col,{span:6,children:T.jsxs(Dt,{align:"center",onClick:()=>t("/"),style:{cursor:"pointer"},children:[T.jsx(j0,{w:40,src:`${Vi}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),T.jsx(Ul,{w:"md"}),T.jsx(mi,{order:4,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:s?"ReVISit Analytics Platform":"ReVISit Studies"})]})}),T.jsx(rf.Col,{span:6,children:T.jsxs(Dt,{justify:"flex-end",direction:"row",children:[s&&T.jsxs(T.Fragment,{children:[T.jsx(Rx,{allowDeselect:!1,placeholder:"Select Study",data:i,value:n,onChange:o=>t(`/analysis/stats/${o}`),mr:16}),T.jsx(Gt,{component:"a",href:`${Vi}${n}`,target:"_blank",leftSection:T.jsx(_ge,{}),mr:"sm",children:"Go to Study"})]}),T.jsx(Sge,{onClick:()=>t("/settings"),style:{cursor:"pointer",marginTop:s?6:void 0}})]})})]})})}function FDe({visibleParticipants:e,studyId:t,gap:n,fileName:r}){const[i,{open:s,close:o}]=nU(!1),[a,l]=D.useState([]),u=async()=>typeof e=="function"?await e():e,c=async()=>{const f=await u(),h=r?`${r}.json`:`${t}_all.json`;hV(JSON.stringify(f,null,2),h)},d=async()=>{const f=await u();l(f),s()};return T.jsxs(T.Fragment,{children:[T.jsxs(yi,{style:{gap:n},children:[T.jsx(xn,{label:"Download all participants data as JSON",children:T.jsx(Gt,{variant:"light",disabled:e.length===0&&typeof e!="function",onClick:c,px:4,children:T.jsx(d7e,{})})}),T.jsx(xn,{label:"Download all participants data as a tidy CSV",children:T.jsx(Gt,{variant:"light",disabled:e.length===0&&typeof e!="function",onClick:d,px:4,children:T.jsx(Age,{})})})]}),i&&a.length>0&&T.jsx(mmt,{opened:i,close:o,filename:r?`${r}_tidy.csv`:`${t}_all_tidy.csv`,data:a,studyId:t})]})}function jDe(e,t){if(!e)return null;if(t!=null&&t.uiConfig&&t.uiConfig.participantNameField){const[n,r]=t.uiConfig.participantNameField.split("."),i=Object.keys(e.answers).find(s=>s.startsWith(n));if(i)return`${e.answers[i].answer[r]}`}return null}function oBt({cellData:e}){return Number.isFinite(e.endTime)&&Number.isFinite(e.startTime)?T.jsx(jt.Td,{children:T.jsx(Ms,{miw:100,children:e.timedOut?T.jsx(Ve,{children:"Timed out"}):Object.entries(e.answer).map(([t,n])=>T.jsxs(Se,{children:[T.jsxs(Ve,{fw:700,span:!0,children:[" ",`${t}: `]}),typeof n=="object"?T.jsx(Ve,{size:"xs",component:"pre",span:!0,children:`${JSON.stringify(n,null,2)}`}):T.jsx(Ve,{span:!0,children:n})]},`cell-${t}`))})}):T.jsx(jt.Td,{children:"N/A"})}function Yfe({cellData:e}){const t=e.endTime&&e.startTime?(e.endTime-e.startTime)/1e3:NaN,n=e.endTime&&e.startTime?JEe(e):NaN;return Number.isFinite(e.endTime)&&Number.isFinite(e.startTime)?T.jsxs(jt.Td,{children:[t.toFixed(1)," ","s",n&&T.jsxs(T.Fragment,{children:[T.jsx("br",{})," ","(",(n/1e3).toFixed(1)," ","s)"]})]}):T.jsx(jt.Td,{children:"N/A"})}function aBt(e){const{metaData:t}=e;return T.jsx(jt.Td,{children:T.jsx(Hq,{w:200,hideLabel:"hide",maxHeight:50,showLabel:"more",children:T.jsxs(Ms,{gap:"xs",children:[T.jsxs(Se,{children:["IP:"," ",t.ip]}),T.jsxs(Se,{children:["Language:"," ",t.language]}),T.jsxs(Se,{children:["Resolution:"," ",JSON.stringify(t.resolution)]}),T.jsxs(Se,{children:["User Agent:"," ",t.userAgent]})]})})})}function lBt({visibleParticipants:e,studyConfig:t,refresh:n}){const{storageEngine:r}=Ai(),{studyId:i}=To(),{user:s}=Hx(),o=async(E,_)=>{if(r&&i)if(s.isAdmin){const C=_===""?"Rejected by admin":_;await r.rejectParticipant(E,C,i),await n()}else console.warn("You are not authorized to perform this action.")},[a,l]=D.useState([]),[u,c]=D.useState(!1),[d,f]=D.useState(!1),[h,p]=D.useState(""),m=async()=>{c(!0),f(!1);const E=a.map(async _=>await o(_,h));await Promise.all(E),l([]),await n(),c(!1)};function g(E){E==="all"?a.length===e.length?l([]):l(e.map(_=>_.participantId)):a.includes(E)?l(a.filter(_=>_!==E)):l([...a,E])}const b=LEe(t.sequence),v=[T.jsx(jt.Th,{children:T.jsx(Dt,{justify:"center",children:T.jsx(mo,{mb:-4,checked:a.length===e.length,onChange:()=>g("all")})})},"action"),T.jsx(jt.Th,{children:"Index"},"index"),T.jsx(jt.Th,{children:"Name"},"name"),T.jsx(jt.Th,{children:"ID"},"ID"),T.jsx(jt.Th,{children:"Start Time"},"startTime"),T.jsx(jt.Th,{children:"End Time"},"endTime"),T.jsx(jt.Th,{children:"Total Duration (clean)"},"total-duration"),T.jsx(jt.Th,{children:"Status"},"status"),T.jsx(jt.Th,{children:"Tags"},"tags"),T.jsx(jt.Th,{children:"Meta"},"meta"),...b.flatMap(E=>[T.jsx(jt.Th,{children:E.componentName},`header-${E.componentName}-${E.timesSeenInBlock}`),T.jsxs(jt.Th,{children:[T.jsx("span",{style:{whiteSpace:"nowrap"},children:E.componentName})," ","Duration (clean)"]},`header-${E.componentName}-${E.timesSeenInBlock}-duration`)])],x=e.map(E=>{const _=jDe(E,t),C=E.answers&&Object.values(E.answers).filter(R=>R.startTime).sort((R,O)=>R.startTime-O.startTime),S=C&&C.length>0?C[0].startTime:void 0,k=C&&C.length>0?C[C.length-1].endTime:void 0;return T.jsxs(jt.Tr,{children:[T.jsx(jt.Td,{children:T.jsx(Dt,{justify:"center",children:T.jsx(mo,{mb:-4,checked:a.includes(E.participantId),onChange:()=>g(E.participantId)})})}),T.jsx(jt.Td,{children:`P-${E.participantIndex.toString().padStart(3,"0")}`}),T.jsx(jt.Td,{children:_}),T.jsx(jt.Td,{style:{whiteSpace:"nowrap"},children:E.participantId}),T.jsx(jt.Td,{miw:110,children:S?new Date(S).toLocaleString():"N/A"}),T.jsx(jt.Td,{miw:110,children:E.completed&&k?new Date(k).toLocaleString():"N/A"}),T.jsx(Yfe,{cellData:{startTime:S,endTime:k,windowEvents:Object.values(E.answers).flatMap(R=>R.windowEvents)}},`cell-${E.participantId}-total-duration`),T.jsx(jt.Td,{children:T.jsxs(Dt,{direction:"column",miw:100,children:[T.jsxs(Dt,{direction:"row",align:"center",children:[E.rejected?T.jsx(xn,{label:"Rejected",children:T.jsx($x,{size:16,color:"red",style:{marginBottom:-3}})}):E.completed?T.jsx(xn,{label:"Completed",children:T.jsx(zC,{size:16,color:"teal",style:{marginBottom:-3}})}):T.jsx(xn,{label:"In Progress",children:T.jsx(Tge,{size:16,color:"orange",style:{marginBottom:-3}})}),!E.completed&&T.jsxs(Ve,{size:"sm",mb:-1,ml:4,children:[(Object.entries(E.answers).filter(([R,O])=>O.endTime!==-1&&O.endTime!==void 0).length/(Rf(E.sequence).length-1)*100).toFixed(2),"%"]})]}),E.rejected&&T.jsx(Ve,{mt:5,fz:10,children:E.rejected.reason})]})}),T.jsx(jt.Td,{children:T.jsx(Dt,{direction:"column",miw:100,children:(E.participantTags||[]).map(R=>T.jsxs(Ve,{fz:10,children:["-"," ",R]},`tag-${R}`))})}),E.metadata?T.jsx(aBt,{metaData:E.metadata}):T.jsx(jt.Td,{children:"N/A"}),b.map(R=>{const O=lV(E.sequence,R.orderPath),N=O&&Object.entries(E.answers).sort((L,$)=>{const B=parseInt(L[0].slice(L[0].lastIndexOf("_")+1),10),H=parseInt($[0].slice($[0].lastIndexOf("_")+1),10);return B-H}).filter(([L])=>{const $=L.slice(0,L.lastIndexOf("_")),B=parseInt(L.slice(L.lastIndexOf("_")+1),10);return $===R.componentName&&B<=O[0].lastIndex&&B>=O[0].firstIndex});return N!==null&&N.length>=R.timesSeenInBlock+1&&N[R.timesSeenInBlock][1].endTime!==-1?T.jsxs(Jn.Fragment,{children:[T.jsx(oBt,{cellData:N[R.timesSeenInBlock][1]}),T.jsx(Yfe,{cellData:N[R.timesSeenInBlock][1]})]},`cellgroup-${E.participantId}-${R.componentName}-${R.timesSeenInBlock}`):T.jsxs(Jn.Fragment,{children:[T.jsx(jt.Td,{children:"N/A"}),T.jsx(jt.Td,{children:"N/A"})]},`cellgroup-${E.participantId}-${R.componentName}-${R.timesSeenInBlock}`)})]},E.participantId)});return e.length>0?T.jsxs(T.Fragment,{children:[T.jsx(Nu,{visible:u,overlayProps:{blur:2}}),T.jsxs(Dt,{justify:"space-between",mb:8,p:8,children:[T.jsx(yi,{children:T.jsx(Rx,{w:350,variant:"filled",placeholder:"Search for a participant ID",data:[...new Set(e.map(E=>E.participantId))],searchable:!0,value:null,leftSection:T.jsx(S7e,{size:14}),onChange:E=>E&&g(E)})}),T.jsxs(yi,{children:[T.jsx(FDe,{visibleParticipants:e,studyId:i||""}),T.jsxs(Gt,{disabled:a.length===0||!s.isAdmin,onClick:()=>f(!0),color:"red",children:["Reject Participants (",a.length,")"]})]})]}),T.jsx(Dt,{direction:"column",style:{width:"100%",overflow:"auto"},children:T.jsxs(jt,{striped:!0,withTableBorder:!0,children:[T.jsx(jt.Thead,{children:T.jsx(jt.Tr,{children:v})}),T.jsx(jt.Tbody,{children:x})]})}),T.jsxs(ii,{opened:d,onClose:()=>f(!1),title:T.jsxs(Ve,{children:["Reject Participants (",a.length,")"]}),children:[T.jsx(jh,{label:"Please enter the reason for rejection.",onChange:E=>p(E.target.value)}),T.jsxs(Dt,{mt:"sm",justify:"right",children:[T.jsx(Gt,{mr:5,variant:"subtle",color:"dark",onClick:()=>{f(!1),p("")},children:"Cancel"}),T.jsx(Gt,{color:"red",onClick:()=>m(),children:"Reject Participants"})]})]})]}):T.jsxs(T.Fragment,{children:[T.jsx(Ul,{h:"xl"}),T.jsx(Dt,{justify:"center",align:"center",children:T.jsx(Ve,{children:"No data available"})})]})}function uBt({studyId:e,refresh:t}){const[n,r]=D.useState(!1),[i,s]=D.useState(!1),[o,a]=D.useState(!1),[l,u]=D.useState(!1),[c,d]=D.useState(""),[f,h]=D.useState({}),[p,m]=D.useState(""),[g,b]=D.useState(""),[v,x]=D.useState(!1),[E,_]=D.useState(!1),{storageEngine:C}=Ai(),S=D.useCallback(async()=>{if(!C)return;_(!0);const Z=await C.getSnapshots(e);h(Z),_(!1)},[C,e]);if(D.useEffect(()=>{S()},[S]),!C)return null;const k=async Z=>{var j;x(!0);let U;switch(Z.type){case"create":U=await C.createSnapshot(e,Z.archive);break;case"rename":U=await C.renameSnapshot(Z.snapshot,Z.newName,e);break;case"restore":U=await C.restoreSnapshot(e,Z.snapshot);break;case"deleteSnapshot":U=await C.removeSnapshotOrLive(Z.snapshot,e);break;case"deleteLive":U=await C.removeSnapshotOrLive(e,e);break;default:throw x(!1),new Error("Unknown action")}U.status==="SUCCESS"?(await S(),x(!1),await t(),(j=U.notifications)==null||j.forEach(V=>XT(V))):(x(!1),XT({title:U.error.title,message:U.error.message,color:"red"}))},R=()=>k({type:"create",archive:!1}),O=()=>{m(""),r(!1),k({type:"create",archive:!0})},N=()=>{a(!1),k({type:"rename",snapshot:c,newName:g})},L=Z=>k({type:"restore",snapshot:Z}),$=()=>{m(""),s(!1),k({type:"deleteSnapshot",snapshot:c})},B=()=>{m(""),u(!1),k({type:"deleteLive"})},H=()=>Pte({title:"Create a Snapshot",children:T.jsx(Ve,{mb:30,children:"This will create a snapshot of the live database without impacting the live data."}),labels:{confirm:"Create",cancel:"Cancel"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:()=>R()}),Y=Z=>Pte({title:"Restore Snapshot",children:T.jsx(Ve,{mb:30,children:"Restoring this snapshot will perform 2 actions. First, we will create a snapshot of the current live database, then we will restore the selected snapshot into the live database."}),labels:{confirm:"Restore",cancel:"Cancel"},confirmProps:{color:"red"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:()=>L(Z)}),J=Z=>{const U=/-snapshot-(.+)$/,j=Z.match(U);return j&&j[1]?j[1].replace("T"," "):null},K=async Z=>{const U=Z.slice(Z.indexOf("-")+1);return await C.getAllParticipantsData(U)};return T.jsxs(T.Fragment,{children:[T.jsx(Nu,{visible:v}),T.jsxs(Dt,{justify:"space-between",align:"center",children:[T.jsxs(Se,{style:{width:"70%"},children:[T.jsx(mi,{order:5,children:"Create a Snapshot"}),T.jsxs(Ve,{children:["This will create a snapshot of the live"," ",T.jsx(Ve,{span:!0,fw:700,children:e})," ","database. It will"," ",T.jsx(Ve,{span:!0,fw:700,fs:"italic",children:"not"})," ","remove this data from the live database. The current study data can be restored from a snapshot at any time."]})]}),T.jsx(xn,{label:"Create a snapshot",children:T.jsx(Gt,{onClick:H,children:"Snapshot"})})]}),T.jsx(Ul,{h:"lg"}),T.jsxs(Dt,{justify:"space-between",align:"center",children:[T.jsxs(Se,{style:{width:"70%"},children:[T.jsx(mi,{order:5,children:"Archive Data"}),T.jsxs(Ve,{children:["This will create a snapshot of the live"," ",T.jsx(Ve,{span:!0,fw:700,children:e})," ","database. It will then remove this data from the live database. The current study data can be restored from a snapshot at any time."]})]}),T.jsx(xn,{label:"Snapshot and Delete Data",children:T.jsx(Gt,{color:"red",onClick:()=>r(!0),children:"Archive"})})]}),T.jsx(Ul,{h:"lg"}),T.jsxs(Dt,{justify:"space-between",align:"center",children:[T.jsxs(Se,{style:{width:"70%"},children:[T.jsx(mi,{order:5,children:"Delete Data"}),T.jsxs(Ve,{children:["This will delete the live"," ",T.jsx(Ve,{span:!0,fw:700,children:e})," ","database. Since this does not create a snapshot the data will be permanently deleted and cannot be restored."]})]}),T.jsx(xn,{label:"Delete Data",children:T.jsx(Gt,{color:"red",onClick:()=>u(!0),children:"Delete"})})]}),T.jsx(Ul,{h:"xl"}),T.jsxs(Dt,{direction:"column",children:[T.jsx(Dt,{style:{borderBottom:"1px solid #dedede"},direction:"row",justify:"space-between",mb:"xs",pb:"sm",children:T.jsx(mi,{order:5,children:"Snapshots"})}),T.jsxs(Se,{style:{position:"relative"},children:[T.jsx(Nu,{visible:E}),Object.keys(f).length>0?T.jsxs(jt,{children:[T.jsx(jt.Thead,{children:T.jsxs(jt.Tr,{children:[T.jsx(jt.Th,{children:"Snapshot Name"}),T.jsx(jt.Th,{children:"Date Created"}),T.jsx(jt.Th,{children:"Actions"})]})}),T.jsx(jt.Tbody,{children:Object.entries(f).map(([Z,U])=>T.jsxs(jt.Tr,{children:[T.jsx(jt.Td,{children:U.name}),T.jsx(jt.Td,{children:J(Z)}),T.jsx(jt.Td,{children:T.jsxs(Dt,{children:[T.jsx(xn,{label:"Rename",children:T.jsx(Gt,{color:"green",variant:"light",px:4,style:{margin:"0px 5px"},onClick:()=>{a(!0),d(Z)},children:T.jsx(x7e,{})})}),T.jsx(xn,{label:"Restore Snapshot",children:T.jsx(Gt,{color:"blue",variant:"light",px:4,style:{margin:"0px 5px"},onClick:()=>{Y(Z)},children:T.jsx(T7e,{})})}),T.jsx(xn,{label:"Delete Snapshot",children:T.jsx(Gt,{color:"red",px:4,variant:"light",style:{margin:"0px 10px 0px 5px"},onClick:()=>{s(!0),d(Z)},children:T.jsx(kge,{})})}),T.jsx(FDe,{visibleParticipants:()=>K(Z),studyId:e,gap:"10px",fileName:U.name})]})})]},Z))})]}):T.jsx(Ve,{children:"No snapshots."})]})]}),T.jsxs(ii,{opened:n,onClose:()=>{r(!1),m("")},title:T.jsx(Ve,{children:"Archive Data"}),children:[T.jsx(Ve,{mb:"sm",children:"This will create a snapshot of the live database and remove the data from the live database."}),T.jsx(jh,{label:"To archive this data, please enter the name of the study.",placeholder:e,onChange:Z=>m(Z.target.value)}),T.jsxs(Dt,{mt:"sm",justify:"right",children:[T.jsx(Gt,{mr:5,variant:"subtle",color:"dark",onClick:()=>{r(!1),m("")},children:"Cancel"}),T.jsx(Gt,{color:"red",onClick:O,disabled:p!==e,children:"Archive"})]})]}),T.jsxs(ii,{opened:i,onClose:()=>{s(!1),m("")},title:T.jsx(Ve,{children:"Delete Snapshot"}),children:[T.jsxs(Ve,{mb:"sm",children:["This will permanently remove this snapshot. This action is"," ",T.jsx(Ve,{span:!0,fw:700,children:"irreversible"}),"."]}),T.jsx(jh,{label:"To delete this snapshot, please enter the name of the study.",placeholder:e,onChange:Z=>m(Z.target.value)}),T.jsxs(Dt,{mt:"sm",justify:"right",children:[T.jsx(Gt,{mr:5,variant:"subtle",color:"dark",onClick:()=>{s(!1),m("")},children:"Cancel"}),T.jsx(Gt,{color:"red",onClick:$,disabled:p!==e,children:"Delete"})]})]}),T.jsxs(ii,{opened:o,onClose:()=>{a(!1),b("")},title:T.jsx(Ve,{children:"Rename Snapshot"}),children:[T.jsx(jh,{label:"Enter the new name of the snapshot.",placeholder:c,onChange:Z=>b(Z.target.value)}),T.jsxs(Dt,{mt:"sm",justify:"right",children:[T.jsx(Gt,{mr:5,variant:"subtle",color:"dark",onClick:()=>{a(!1),b("")},children:"Cancel"}),T.jsx(Gt,{color:"green",onClick:N,disabled:!g||g.length===0,children:"Rename"})]})]}),T.jsxs(ii,{opened:l,onClose:()=>{u(!1),m("")},title:T.jsx(Ve,{children:"Delete Live Data"}),children:[T.jsxs(Ve,{mb:"sm",children:["This will permanently delete the live"," ",T.jsx(Ve,{span:!0,fw:700,children:e})," ","data. This action is"," ",T.jsx(Ve,{span:!0,fw:700,children:"irreversible"}),". Please consider using archive data to create a snapshot of the live data before deleting."]}),T.jsx(jh,{label:"To delete this live data, please enter the name of the study.",placeholder:e,onChange:Z=>m(Z.target.value)}),T.jsxs(Dt,{mt:"sm",justify:"right",children:[T.jsx(Gt,{mr:5,variant:"subtle",color:"dark",onClick:()=>{u(!1),m("")},children:"Cancel"}),T.jsx(Gt,{color:"red",onClick:B,disabled:p!==e,children:"Delete"})]})]})]})}function cBt({studyId:e}){const{storageEngine:t}=Ai(),[n,r]=D.useState(!1),[i,s]=D.useState(!1),[o,a]=D.useState(!1),[l,u]=D.useState(!1);D.useEffect(()=>{(async()=>{if(t){const f=await t.getModes(e);s(f.dataCollectionEnabled),a(f.studyNavigatorEnabled),u(f.analyticsInterfacePubliclyAccessible),r(!0)}})()},[t,e]);const c=async(d,f)=>{t&&(await t.setMode(e,d,f),d==="dataCollectionEnabled"?s(f):d==="studyNavigatorEnabled"?a(f):d==="analyticsInterfacePubliclyAccessible"&&u(f))};return n&&T.jsxs(Ms,{children:[T.jsx(Sy,{label:"Data Collection Enabled",checked:i,onChange:d=>c("dataCollectionEnabled",d.currentTarget.checked)}),T.jsx(Sy,{label:"Study Navigator Enabled",checked:o,onChange:d=>c("studyNavigatorEnabled",d.currentTarget.checked)}),T.jsx(Sy,{label:"Analytics Interface Publicly Accessible",checked:l,onChange:d=>c("analyticsInterfacePubliclyAccessible",d.currentTarget.checked)})]})}function dBt({studyId:e,refresh:t}){return T.jsx(mp,{children:T.jsxs(zo,{multiple:!0,variant:"contained",children:[T.jsxs(zo.Item,{value:"ReVISit Modes",children:[T.jsx(zo.Control,{children:T.jsx(mi,{order:5,children:"ReVISit Modes"})}),T.jsx(zo.Panel,{children:T.jsx(cBt,{studyId:e})})]},"modes"),T.jsxs(zo.Item,{value:"Data Management",children:[T.jsx(zo.Control,{children:T.jsx(mi,{order:5,children:"Data Management"})}),T.jsx(zo.Panel,{children:T.jsx(uBt,{studyId:e,refresh:t})})]},"dataManagement")]})})}function fBt({response:e,participantData:t,trialId:n,trialConfig:r}){const[i,{toggle:s}]=nU(!0),[o,a]=gx(),l=D.useMemo(()=>e.type==="metadata"?[]:t.map(f=>Object.entries(f.answers).filter(([h])=>h.slice(0,h.lastIndexOf("_"))===n)).map(f=>f.map(([,h])=>h.answer)).flat(),[t,e.type,n]),u=D.useMemo(()=>{var f;return e.type==="metadata"||(f=r.correctAnswer)==null?void 0:f.find(h=>h.id===e.id)},[e.id,e.type,r.correctAnswer]),c=D.useMemo(()=>{const d={height:"container",width:"container"};if(e.type==="shortText"||e.type==="longText")return{};if(e.type==="metadata"){const h=t.map(m=>Object.entries(m.answers).filter(([g])=>g.slice(0,g.lastIndexOf("_"))===n)).map(m=>m.filter(([g,b])=>b.endTime!==-1).map(([g,b])=>(b.endTime-b.startTime)/1e3)).flat();return{...d,data:{values:h},mark:"bar",encoding:{x:{field:"data",bin:!0,type:"quantitative",title:"Time (s)"},y:{aggregate:"count",type:"quantitative",title:"Count"}}}}const f={params:[{name:"correctAnswer",value:u==null?void 0:u.answer},{name:"variable",value:e.id}],transform:[{calculate:"datum[variable] === correctAnswer ? 'correct' : 'incorrect'",as:"result"},{calculate:"if(datum.result === 'correct', 0, if(datum.result === 'incorrect', 1, 2))",as:"order"}],color:{field:"result",type:"nominal",scale:{domain:["correct","incorrect"],range:["#69DB7C","#ADB5BD"]}},order:{field:"order"}};if(e.type==="numerical"||e.type==="slider"||e.type==="likert"){let h,p;return e.type==="numerical"&&(h=e.min,p=e.max),e.type==="slider"&&(h=Math.min(...e.options.map(g=>g.value)),p=Math.max(...e.options.map(g=>g.value))),e.type==="likert"&&(h=1,p=e.numItems),{...d,data:{values:l},mark:"bar",params:u!==void 0?f.params:void 0,transform:[{bin:e.type==="likert"?{step:1}:{maxbins:10},field:e.id,as:"bins"},...u!==void 0?f.transform:[]],encoding:{x:{field:"bins",scale:h!==void 0&&p!==void 0?{domain:[h,p]}:void 0,type:"quantitative",title:"Answer"},x2:{field:"bins_end"},y:{aggregate:"count",type:"quantitative",title:"Count",stack:!0},color:u!==void 0?f.color:void 0,order:u!==void 0?f.order:void 0}}}if(e.type==="radio"||e.type==="dropdown"||e.type==="checkbox")return{...d,data:{values:l},mark:"bar",params:u!==void 0?f.params:void 0,transform:u!==void 0?f.transform:void 0,encoding:{x:{field:e.id,type:"ordinal",title:"Answer"},y:{aggregate:"count",type:"quantitative",title:"Count"},color:u!==void 0?f.color:void 0}}},[t,l,e.id,e.max,e.min,e.numItems,e.options,e.type,n,u]);return T.jsxs(vx,{p:"lg",withBorder:!0,ref:o,children:[T.jsxs(Dt,{direction:"row",justify:"space-between",onClick:s,children:[T.jsxs(Dt,{align:"center",children:[e.type==="metadata"&&T.jsx(c7e,{size:20}),e.type==="numerical"&&T.jsx(b7e,{size:20}),(e.type==="shortText"||e.type==="longText")&&T.jsx(a7e,{size:20}),e.type==="likert"&&T.jsx(p7e,{size:20}),e.type==="dropdown"&&T.jsx(A7e,{size:20}),e.type==="slider"&&T.jsx(t7e,{size:20}),e.type==="radio"&&T.jsx(_7e,{size:20}),e.type==="checkbox"&&T.jsx(k7e,{size:20}),e.type==="reactive"&&T.jsx(g7e,{size:20}),T.jsx(mi,{order:5,ml:4,children:e.id})]}),T.jsx(u7e,{style:{rotate:i?"180deg":"none",transition:"rotate 200ms"}})]}),T.jsxs(XN,{in:i,mah:400,children:[T.jsx(Se,{style:{top:0,position:"sticky",backgroundColor:"white",zIndex:2},py:"md",children:T.jsx(Rv,{})}),T.jsxs(qq,{cols:2,h:360,children:[T.jsx(fp,{mih:200,children:e.type!=="metadata"&&e.type!=="shortText"&&e.type!=="longText"&&e.type!=="reactive"?T.jsx(ode,{spec:c,actions:!1,height:270,width:a.width/2-60-(u===void 0?0:60),padding:0,style:{justifySelf:"center"},renderer:"svg"}):T.jsxs(Dt,{direction:"column",gap:"xs",style:{overflowX:"clip"},children:[e.type==="metadata"&&T.jsx(Xd,{block:!0,children:`${JSON.stringify(r,null,2)}`}),e.type!=="metadata"&&T.jsxs(T.Fragment,{children:[T.jsx(Ve,{fw:700,children:"Response Values: "}),l.map((d,f)=>T.jsx(Dt,{align:"center",gap:"xs",children:T.jsx(Ve,{children:d[e.id]})},f))]})]})}),T.jsx(fp,{mih:200,children:e.type==="metadata"?T.jsx(ode,{spec:c,actions:!1,width:a.width/2-60,height:270,padding:0,style:{justifySelf:"center"}}):T.jsxs(T.Fragment,{children:[T.jsx(Ve,{fw:700,children:"Response Specification: "}),T.jsx(Xd,{block:!0,children:JSON.stringify(e,null,2)}),T.jsx("br",{}),u&&T.jsxs(T.Fragment,{children:[T.jsx(Ve,{fw:700,children:"Correct Answer: "}),T.jsx(Xd,{block:!0,children:JSON.stringify(u,null,2)})]})]})})]})]})]})}function hBt({participantData:e,studyConfig:t,trialId:n}){const r=n&&n!=="end"&&Iu(t.components[n],t),i=D.useMemo(()=>[{id:"Config and Timing",type:"metadata"},...r?r.response:[]],[r]);return r?T.jsx(Dt,{w:"100%",direction:"column",gap:"xs",children:i.map(s=>T.jsx(fBt,{response:s,participantData:e,trialId:n,trialConfig:r},s.id))}):T.jsx(Dt,{justify:"center",align:"center",pt:"lg",pb:"md",w:"100%",children:T.jsx(Ve,{children:n!=="end"?"No trial selected":"The end component has no data."})})}function pBt({studyConfig:e,visibleParticipants:t}){const n=D.useMemo(()=>{let i=structuredClone(e.sequence);return i=uV(i,"root"),i.components.push("end"),i},[e.sequence]),{trialId:r}=To();return T.jsx(vx,{shadow:"sm",p:"md",withBorder:!0,children:t.length===0?T.jsx(Dt,{justify:"center",align:"center",pt:"lg",pb:"md",children:T.jsx(Ve,{children:"No data available."})}):T.jsxs(Dt,{direction:"row",children:[T.jsx(Se,{w:340,children:T.jsx(DN,{configSequence:n,participantSequence:n,fullSequence:n,participantView:!1,studyConfig:e,analysisNavigation:!0})}),T.jsx(Rv,{orientation:"vertical",mx:"md"}),T.jsx(hBt,{participantData:t,studyConfig:e,trialId:r})]})})}function mBt({xScale:e,answer:t,height:n,labelHeight:r=0}){return T.jsx("g",{children:T.jsx("line",{stroke:"gray",strokeWidth:1,x1:e(t.startTime)+2,x2:e(t.startTime)+2,y1:n-45-r,y2:n-25})})}const mR=3,fb=25,gR=25,yR=20,Kfe=1,i9=15;function gBt({xScale:e,answer:t,name:n,height:r,setSelectedTask:i,isSelected:s,labelHeight:o=0,isCorrect:a,hasCorrect:l}){const[u,c]=D.useState(!1),[d,{width:f}]=gx();return T.jsxs("g",{onClick:()=>i(n),onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),style:{cursor:"pointer"},children:[T.jsx("rect",{opacity:1,fill:u||s?"cornflowerblue":"lightgray",x:e(t.startTime)+Kfe,width:e(t.endTime)-e(t.startTime)-Kfe*2,y:r-fb,height:fb}),T.jsx("rect",{rx:3,opacity:1,x:e(t.startTime)-mR,width:f+mR*2+(l?i9:0),y:r-fb-gR-o,height:yR,fill:"whitesmoke"}),T.jsx("line",{stroke:"black",strokeWidth:1,x1:e(t.startTime)-mR,x2:f+e(t.startTime)+mR+(l?i9:0),y1:r-fb-gR+yR-o,y2:r-fb-gR+yR-o}),T.jsx("foreignObject",{x:e(t.startTime),width:f+(l?i9:0),y:r-fb-gR-o,height:yR,children:T.jsx(Jc,{style:{width:"fit-content"},children:T.jsxs(yi,{wrap:"nowrap",gap:2,children:[T.jsx(Ve,{lineClamp:1,ref:d,mx:0,style:{width:"fit-content",fontWeight:600},size:"12px",children:n}),l?a?T.jsx(zC,{color:"var(--mantine-color-green-6)",style:{marginTop:2,strokeWidth:4},size:"14"}):T.jsx($x,{color:"var(--mantine-color-red-6)",style:{marginTop:2,strokeWidth:4},size:14}):""]})})})]})}const Xfe=25,yBt=8,s9={left:20,right:20};function vBt({participantData:e,width:t,height:n,selectedTask:r,studyId:i,studyConfig:s,maxLength:o}){const a=D.useCallback(g=>{const b=g.split("_"),v=+b[b.length-1];window.open(`${Vi}${i}/${ri(v)}?participantId=${e.participantId}`,"_blank")},[e.participantId,i]),l=D.useMemo(()=>{const g=Object.values(e.answers||{}).filter(x=>x.startTime).map(x=>[x.startTime,x.endTime]).flat(),b=Pet(g);return u$([s9.left,t-s9.left-s9.right]).domain([b[0],o?b[0]+o:b[1]]).clamp(!0)},[o,e.answers,t]),[u,c,d]=D.useMemo(()=>{let g=0;const b=Object.entries(e.answers||{}).filter(_=>!!_[1].startTime).sort((_,C)=>_[1].startTime-C[1].startTime);let v=0,x=0;const E=b.map((_,C)=>{const[S,k]=_,R=C>0?b[C-g-1]:null;R&&R[0].length*(yBt+1)+l(R[1].startTime)>l(k.startTime)?g+=1:g=0;const O=S.split("_"),N=O.slice(0,O.length-1).join("_"),L=s==null?void 0:s.components[N];let $=!0,B=!1;return L&&L.correctAnswer?(L.correctAnswer.forEach(H=>{const{id:Y,answer:J}=H;(!L||!L.correctAnswer||k.answer[Y]!==J)&&($=!1)}),B=!0):B=!1,B&&(x+=1,$&&(v+=1)),{line:T.jsx(mBt,{labelHeight:g*Xfe,answer:k,height:n,xScale:l},S),label:T.jsx(xn,{withinPortal:!0,position:"bottom-start",px:4,py:0,withArrow:!0,label:T.jsx(Ms,{gap:0,children:Object.entries(k.answer).map(H=>{var Z,U;const[Y,J]=H,K=(U=(Z=L==null?void 0:L.correctAnswer)==null?void 0:Z.find(j=>j.id===Y))==null?void 0:U.answer;return T.jsx(Ve,{children:`${Y}: ${J} ${K?`[${K}]`:""}`},Y)})}),children:T.jsx("g",{children:T.jsx(gBt,{isCorrect:$,hasCorrect:B,labelHeight:g*Xfe,isSelected:r===S,setSelectedTask:a,answer:k,height:n,name:S,xScale:l},S)})},`${S}-tooltip`)}});return[v,x,E]},[e.answers,l,s==null?void 0:s.components,n,r,a]),f=D.useMemo(()=>{if(!e.answers||Object.entries(e.answers).length===0)return 0;const g=Object.values(e.answers).filter(b=>b.startTime).sort((b,v)=>b.startTime-v.startTime);return new Date(g[g.length-1].endTime-(g[0]?g[0].startTime:0)).getTime()},[e]),h=D.useMemo(()=>Object.entries(e.answers||{}).sort((b,v)=>b[1].startTime-v[1].startTime).map(b=>{const[v,x]=b,E=[];let _=[-1,-1],C="visible";if(x.windowEvents)for(let S=0;S<x.windowEvents.length;S+=1)x.windowEvents[S][1]==="visibility"&&(x.windowEvents[S][2]==="hidden"&&C==="visible"?(_=[x.windowEvents[S][0],-1],C="hidden"):x.windowEvents[S][2]==="visible"&&C==="hidden"&&(_[1]=x.windowEvents[S][0],E.push(_),_=[-1,-1],C="visible"));return E.map((S,k)=>T.jsx(xn,{withinPortal:!0,label:"Browsed away",children:T.jsx("rect",{x:l(S[0]),width:l(S[1])-l(S[0]),y:n-5,height:10})},k))}),[l,n,e.answers]),p=D.useMemo(()=>jDe(e,s),[e,s]),m=D.useMemo(()=>{if(!e.answers||Object.entries(e.answers).length===0)return"";const g=Object.values(e.answers).filter(v=>v.startTime).sort((v,x)=>v.startTime-x.startTime),b=new Date(g[g.length-1].endTime);return e.completed?`${b.toLocaleDateString()} ${b.toLocaleTimeString()}`:""},[e]);return T.jsx(Jc,{children:T.jsxs(Ms,{gap:15,style:{width:"100%"},children:[T.jsx(Rv,{size:"md"}),T.jsxs(yi,{justify:"space-between",children:[T.jsxs(yi,{justify:"center",children:[e.participantIndex?T.jsx(Ve,{children:`P-${e.participantIndex.toString().padStart(3,"0")}`}):null,T.jsx(Ve,{size:"md",fw:700,children:p||e.participantId}),T.jsx(Ve,{size:"md",children:m}),e.completed?null:T.jsx(Ve,{size:"xl",c:"red",children:"Not completed"}),T.jsxs(yi,{gap:10,children:[T.jsx(qc,{variant:"light",size:"lg",color:"green",leftSection:T.jsx(zC,{width:18,height:18,style:{paddingTop:1}}),pb:1,children:u}),T.jsx(qc,{variant:"light",size:"lg",color:"red",leftSection:T.jsx($x,{width:18,height:18,style:{paddingTop:1}}),pb:1,children:c-u}),T.jsx(qc,{variant:"light",size:"lg",color:"gray",leftSection:T.jsx(m7e,{width:18,height:18,style:{paddingTop:1}}),pb:1,children:Oz(f)})]})]}),T.jsx(Gt,{rightSection:T.jsx(bge,{size:14}),component:"a",href:`${Vi}${i}/${ri(0)}?participantId=${e.participantId}`,target:"_blank",children:"Go to replay"})]}),e.completed?T.jsxs("svg",{style:{width:t,height:n,overflow:"visible"},children:[d.map(g=>g.line),d.map(g=>g.label),h]}):null]})})}function bBt({visibleParticipants:e,studyConfig:t}){const{studyId:n}=To(),[r,{width:i}]=gx(),[s,o]=D.useState(!1),a=D.useMemo(()=>s?Math.max(...e.map(u=>{const c=Math.min(...Object.values(u.answers).map(f=>f.startTime||0)),d=Math.max(...Object.values(u.answers).map(f=>f.endTime||0));return d&&c?d-c:0})):void 0,[s,e]);return T.jsxs(Ms,{ref:r,style:{width:"100%"},children:[T.jsx(yi,{children:T.jsx(Sy,{checked:s,label:"Scale by time",onChange:l=>o(l.currentTarget.checked)})}),e.map(l=>T.jsx(vBt,{maxLength:a,studyConfig:t,studyId:n||"",height:200,participantData:l,width:i},l.participantId))]})}function Qfe(e,t){const n=Object.values(e.answers).map(i=>i.startTime).filter(i=>i!==void 0).sort(),r=Object.values(t.answers).map(i=>i.startTime).filter(i=>i!==void 0).sort();return n.length===0||r.length===0?n.length>0?-1:r.length>0?1:t.participantIndex-e.participantIndex:r[0]-n[0]}function wBt({globalConfig:e}){const{studyId:t}=To(),[n,r]=D.useState([]),[i,s]=D.useState(void 0),[o,a]=D.useState(!1),{storageEngine:l}=Ai(),u=Ra(),{analysisTab:c}=To(),{user:d}=Hx();D.useEffect(()=>{if(!t)return()=>{};if(t==="__revisit-widget"){const x=async E=>{if(E.data.type==="revisitWidget/CONFIG"&&l){const _=await BQ(E.data.payload);s(_)}};return window.addEventListener("message",x),window.parent.postMessage({type:"revisitWidget/READY"},"*"),()=>{window.removeEventListener("message",x)}}return zQ(t,e).then(x=>{x&&s(x)}),()=>{}},[t,e,l]);const f=D.useCallback(async()=>{if(a(!0),t){if(!i||!l)return;await l.initializeStudyDb(t),await l.saveConfig(i);const x=await l.getAllParticipantsData(t);r(x),a(!1)}},[l,t,i]);D.useEffect(()=>{f()},[e,l,t,f]);const[h,p]=D.useState([]),[m,g,b]=D.useMemo(()=>{const x=n.filter(C=>!C.rejected&&C.completed),E=n.filter(C=>!C.rejected&&!C.completed),_=n.filter(C=>C.rejected);return p([...x,...E,..._].sort(Qfe)),[x,E,_]},[n]),v=D.useCallback(x=>{const E=[];x.includes("completed")&&E.push(...m),x.includes("inprogress")&&E.push(...g),x.includes("rejected")&&E.push(...b),p(E.sort(Qfe))},[m,g,b]);return T.jsxs(T.Fragment,{children:[T.jsx(aD,{studyIds:e.configsList}),T.jsx(Ar.Main,{children:T.jsxs(mp,{fluid:!0,style:{height:"100%",position:"relative"},children:[T.jsx(Nu,{visible:o}),T.jsxs(Dt,{direction:"row",align:"center",justify:"space-between",children:[T.jsx(mi,{order:5,children:t}),T.jsxs(Dt,{direction:"row",align:"center",children:[T.jsx(Ve,{mt:-2,size:"sm",children:"Participants: "}),T.jsx(mo.Group,{defaultValue:["completed","inprogress","rejected"],onChange:v,mb:"xs",mt:8,ml:"xs",children:T.jsxs(yi,{children:[T.jsx(mo,{value:"completed",label:"Completed"}),T.jsx(mo,{value:"inprogress",label:"In Progress"}),T.jsx(mo,{value:"rejected",label:"Rejected"})]})})]})]}),T.jsx(Ul,{h:"xs"}),T.jsxs(Ln,{variant:"outline",value:c,onChange:x=>u(`/analysis/stats/${t}/${x}`),style:{height:"100%"},children:[T.jsxs(Ln.List,{children:[T.jsx(Ln.Tab,{value:"table",leftSection:T.jsx(I7e,{size:16}),children:"Table View"}),T.jsx(Ln.Tab,{value:"stats",leftSection:T.jsx(l7e,{size:16}),children:"Trial Stats"}),T.jsx(Ln.Tab,{value:"replay",leftSection:T.jsx(E7e,{size:16}),children:"Participant Replay"}),T.jsx(Ln.Tab,{value:"manage",leftSection:T.jsx(Sge,{size:16}),disabled:!d.isAdmin,children:"Manage"})]}),T.jsx(Ln.Panel,{value:"table",pt:"xs",children:i&&T.jsx(lBt,{visibleParticipants:h,studyConfig:i,refresh:f})}),T.jsx(Ln.Panel,{value:"stats",pt:"xs",children:i&&T.jsx(pBt,{studyConfig:i,visibleParticipants:h})}),T.jsx(Ln.Panel,{value:"replay",pt:"xs",children:T.jsx(bBt,{visibleParticipants:h,studyConfig:i})}),T.jsx(Ln.Panel,{value:"manage",pt:"xs",children:t&&d.isAdmin?T.jsx(dBt,{studyId:t,refresh:f}):T.jsx(mp,{mt:20,children:T.jsx(Zh,{title:"Unauthorized Access",variant:"light",color:"red",icon:T.jsx(cH,{}),children:"You are not authorized to manage the data for this study."})})})]})]})})]})}function Jfe({children:e,paramToCheck:t,paramCallback:n}){const{user:r,verifyAdminStatus:i,logout:s}=Hx(),{storageEngine:o}=Ai(),[a,l]=D.useState(!1),u=To();return D.useEffect(()=>{(async()=>{if(a===!1)if(t&&n&&u[t]){const d=await n(u[t]);d&&l(d)}else l(!0);if(a)try{r&&await i(r)||s()}catch(d){s(),console.warn(d)}})()},[r.isAdmin,a]),r.determiningStatus||!o?T.jsx(Nu,{visible:r.determiningStatus||!(o!=null&&o.getEngine())}):a&&!r.isAdmin&&!r.determiningStatus?T.jsx(sH,{to:"/login"}):T.jsx(T.Fragment,{children:e})}async function BDe(e,t){if(e&&vu(e)){t(!0);const n=new Mh,r=gj();try{await aQe(r,n,zve)}catch(i){XT({title:"Error",message:i.message,color:"red"})}finally{t(!1)}return r.currentUser}return null}function xBt(){const{user:e}=Hx(),[t,n]=D.useState(!1),{storageEngine:r}=Ai();return D.useEffect(()=>{!e.determiningStatus&&!e.isAdmin&&e.adminVerification&&XT({title:"Unauthorized",message:"You are not authorized to use this application.",color:"red"})},[e.adminVerification]),!e.determiningStatus&&e.isAdmin?T.jsx(sH,{to:"/"}):T.jsx(mp,{children:T.jsx(Iv,{padding:"lg",children:T.jsxs(Dt,{align:"center",direction:"column",justify:"center",children:[T.jsx(j0,{maw:200,mt:50,mb:100,src:`${Vi}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),T.jsxs(T.Fragment,{children:[T.jsx(Ve,{mb:20,children:"To access admin settings, please sign in using your Google account."}),T.jsx(Gt,{onClick:()=>BDe(r,n),leftSection:T.jsx(R7e,{}),variant:"filled",children:"Sign In With Google"})]}),T.jsx(Nu,{visible:t})]})})})}function EBt(){const{user:e,triggerAuth:t,logout:n}=Hx(),{storageEngine:r}=Ai(),[i,s]=D.useState(!1),[o,a]=D.useState([]),[l,u]=D.useState(!1),[c,d]=D.useState(!1),[f,h]=D.useState(!1),[p,m]=D.useState(!1),[g,b]=D.useState(!1),[v,x]=D.useState(""),[E,_]=D.useState(null),C=VEe({initialValues:{email:""},validate:{email:xpt("Invalid email")}});D.useEffect(()=>{(async()=>{if(u(!0),r&&vu(r)){const B=await(r==null?void 0:r.getUserManagementData("authentication"));s((B==null?void 0:B.isEnabled)||!1);const H=await(r==null?void 0:r.getUserManagementData("adminUsers"));H&&H.adminUsersList&&a(H==null?void 0:H.adminUsersList.map(Y=>Y.email))}else s(!1);u(!1)})()},[r]);const S=async()=>{if(u(!0),r&&vu(r)){const $=await BDe(r,u);$&&$.email?(_({email:$.email,uid:$.uid}),m(!0)):b(!0)}u(!1)},k=async $=>{u(!0),r&&vu(r)&&$&&(await r.changeAuth(!0),await r.addAdminUser($),a([$.email]),s(!0),t()),m(!1),u(!1)},R=async()=>{if(u(!0),r&&vu(r)){await r.addAdminUser({email:C.values.email,uid:null});const $=await r.getUserManagementData("adminUsers");a(($==null?void 0:$.adminUsersList.map(B=>B.email))||[])}u(!1),d(!1),C.setValues({email:""})},O=$=>{h(!0),x($)},N=async()=>{if(u(!0),r&&vu(r)){await r.removeAdminUser(v);const $=await r.getUserManagementData("adminUsers");a(($==null?void 0:$.adminUsersList.map(B=>B.email))||[])}h(!1),u(!1)},L=D.useMemo(()=>r&&vu(r),[r]);return T.jsxs(T.Fragment,{children:[T.jsx(mp,{children:T.jsxs(Iv,{withBorder:!0,style:{backgroundColor:"#FAFAFA"},children:[T.jsx(mi,{mb:20,order:3,children:"Authentication"}),i?T.jsx(Dt,{children:T.jsx(Ve,{children:"Authentication is enabled."})}):T.jsxs(Dt,{justify:"space-between",children:[T.jsx(Se,{children:T.jsx(Ve,{children:"Authentication is currently disabled."})}),T.jsx(xn,{label:"You can only enable auth when using Firebase",disabled:L,children:T.jsx(Gt,{onClick:$=>L?S():$.preventDefault(),color:"green","data-disabled":L?void 0:!0,style:{"&[dataDisabled]":{pointerEvents:"all"}},children:"Enable Authentication"})})]}),i?T.jsxs(Dt,{mt:40,direction:"column",children:[T.jsxs(Dt,{style:{borderBottom:"1px solid #dedede"},direction:"row",justify:"space-between",mb:15,pb:15,children:[T.jsx(mi,{order:6,children:"Enabled Users"}),T.jsx(dH,{style:{cursor:"pointer"},onClick:()=>d(!0)})]}),o.length>0?o.map($=>{var B;return T.jsxs(Dt,{justify:"space-between",mb:10,children:[T.jsx(Ve,{children:$}),$===((B=e.user)==null?void 0:B.email)?T.jsx(Ve,{color:"blue",size:"xs",children:"You"}):T.jsx(L0,{variant:"subtle",onClick:()=>O($),children:T.jsx(kge,{color:"red"})})]},$)}):null,T.jsx(Dt,{direction:"row",justify:"left",children:T.jsx(Gt,{onClick:()=>n(),mt:20,children:"Log out"})})]}):null]})}),T.jsx(ii,{opened:c,onClose:()=>d(!1),title:"Add Admin User",children:T.jsxs(Se,{component:"form",onSubmit:C.onSubmit(()=>R()),children:[T.jsx(jh,{leftSection:T.jsx(i7e,{}),placeholder:"User Gmail Account",...C.getInputProps("email")}),T.jsxs(Dt,{mt:30,justify:"right",children:[T.jsx(Gt,{mr:5,variant:"subtle",color:"red",onClick:()=>d(!1),children:"Cancel"}),T.jsx(Gt,{type:"submit",children:"Save"})]})]})}),T.jsxs(ii,{opened:f,size:"large",onClose:()=>h(!1),title:T.jsxs(Ve,{fw:700,children:["Remove",v,"?"]}),children:[T.jsxs(Ve,{mt:40,children:["Are you sure you want to remove",T.jsx("b",{children:v})," ","as an administrator?"]}),T.jsxs(Dt,{mt:40,justify:"right",children:[T.jsx(Gt,{mr:5,variant:"subtle",color:"red",onClick:()=>h(!1),children:"Cancel"}),T.jsx(Gt,{onClick:()=>N(),children:"Yes, I'm sure."})]})]}),T.jsxs(ii,{opened:p,size:"md",onClose:()=>m(!1),title:T.jsx(Ve,{fw:700,children:"Enable Authentication?"}),children:[T.jsxs(Ve,{mt:40,children:["User"," ",T.jsx("b",{children:E==null?void 0:E.email})," ","will be added as an administrator to this application. After enabling authentication, you'll be able to add additional users below. This action cannot be undone."]}),T.jsxs(Dt,{mt:40,justify:"right",children:[T.jsx(Gt,{mr:5,variant:"subtle",color:"red",onClick:()=>m(!1),children:"Cancel"}),T.jsx(Gt,{onClick:()=>k(E),children:"Yes, I'm sure."})]})]}),T.jsxs(ii,{opened:g,size:"md",onClose:()=>b(!1),title:T.jsx(Ve,{fw:700,children:"An Error Occurred."}),children:[T.jsxs(Ve,{mt:40,children:["An error has occurred when trying to enable authentication. Please consult the"," ",T.jsx("a",{href:"https://revisit.dev/docs/data-and-deployment/authentication-authorization/adding-removing-ui/",target:"_blank",rel:"noreferrer",children:"documentation"})," ","for more information."]}),T.jsx(Dt,{mt:40,justify:"right",children:T.jsx(Gt,{mr:5,onClick:()=>b(!1),children:"Okay"})})]}),T.jsx(Nu,{visible:l})]})}var o9={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/var Zfe;function _Bt(){return Zfe||(Zfe=1,function(e,t){(function(n){e.exports=n()})(function(){return function n(r,i,s){function o(u,c){if(!i[u]){if(!r[u]){var d=typeof c2=="function"&&c2;if(!c&&d)return d(u,!0);if(a)return a(u,!0);var f=new Error("Cannot find module '"+u+"'");throw f.code="MODULE_NOT_FOUND",f}var h=i[u]={exports:{}};r[u][0].call(h.exports,function(p){var m=r[u][1][p];return o(m||p)},h,h.exports,n,r,i,s)}return i[u].exports}for(var a=typeof c2=="function"&&c2,l=0;l<s.length;l++)o(s[l]);return o}({1:[function(n,r,i){(function(s){var o=s.MutationObserver||s.WebKitMutationObserver,a;if(o){var l=0,u=new o(p),c=s.document.createTextNode("");u.observe(c,{characterData:!0}),a=function(){c.data=l=++l%2}}else if(!s.setImmediate&&typeof s.MessageChannel<"u"){var d=new s.MessageChannel;d.port1.onmessage=p,a=function(){d.port2.postMessage(0)}}else"document"in s&&"onreadystatechange"in s.document.createElement("script")?a=function(){var g=s.document.createElement("script");g.onreadystatechange=function(){p(),g.onreadystatechange=null,g.parentNode.removeChild(g),g=null},s.document.documentElement.appendChild(g)}:a=function(){setTimeout(p,0)};var f,h=[];function p(){f=!0;for(var g,b,v=h.length;v;){for(b=h,h=[],g=-1;++g<v;)b[g]();v=h.length}f=!1}r.exports=m;function m(g){h.push(g)===1&&!f&&a()}}).call(this,typeof cs<"u"?cs:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(n,r,i){var s=n(1);function o(){}var a={},l=["REJECTED"],u=["FULFILLED"],c=["PENDING"];r.exports=d;function d(_){if(typeof _!="function")throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,_!==o&&m(this,_)}d.prototype.catch=function(_){return this.then(null,_)},d.prototype.then=function(_,C){if(typeof _!="function"&&this.state===u||typeof C!="function"&&this.state===l)return this;var S=new this.constructor(o);if(this.state!==c){var k=this.state===u?_:C;h(S,k,this.outcome)}else this.queue.push(new f(S,_,C));return S};function f(_,C,S){this.promise=_,typeof C=="function"&&(this.onFulfilled=C,this.callFulfilled=this.otherCallFulfilled),typeof S=="function"&&(this.onRejected=S,this.callRejected=this.otherCallRejected)}f.prototype.callFulfilled=function(_){a.resolve(this.promise,_)},f.prototype.otherCallFulfilled=function(_){h(this.promise,this.onFulfilled,_)},f.prototype.callRejected=function(_){a.reject(this.promise,_)},f.prototype.otherCallRejected=function(_){h(this.promise,this.onRejected,_)};function h(_,C,S){s(function(){var k;try{k=C(S)}catch(R){return a.reject(_,R)}k===_?a.reject(_,new TypeError("Cannot resolve promise with itself")):a.resolve(_,k)})}a.resolve=function(_,C){var S=g(p,C);if(S.status==="error")return a.reject(_,S.value);var k=S.value;if(k)m(_,k);else{_.state=u,_.outcome=C;for(var R=-1,O=_.queue.length;++R<O;)_.queue[R].callFulfilled(C)}return _},a.reject=function(_,C){_.state=l,_.outcome=C;for(var S=-1,k=_.queue.length;++S<k;)_.queue[S].callRejected(C);return _};function p(_){var C=_&&_.then;if(_&&(typeof _=="object"||typeof _=="function")&&typeof C=="function")return function(){C.apply(_,arguments)}}function m(_,C){var S=!1;function k(L){S||(S=!0,a.reject(_,L))}function R(L){S||(S=!0,a.resolve(_,L))}function O(){C(R,k)}var N=g(O);N.status==="error"&&k(N.value)}function g(_,C){var S={};try{S.value=_(C),S.status="success"}catch(k){S.status="error",S.value=k}return S}d.resolve=b;function b(_){return _ instanceof this?_:a.resolve(new this(o),_)}d.reject=v;function v(_){var C=new this(o);return a.reject(C,_)}d.all=x;function x(_){var C=this;if(Object.prototype.toString.call(_)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=_.length,k=!1;if(!S)return this.resolve([]);for(var R=new Array(S),O=0,N=-1,L=new this(o);++N<S;)$(_[N],N);return L;function $(B,H){C.resolve(B).then(Y,function(J){k||(k=!0,a.reject(L,J))});function Y(J){R[H]=J,++O===S&&!k&&(k=!0,a.resolve(L,R))}}}d.race=E;function E(_){var C=this;if(Object.prototype.toString.call(_)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=_.length,k=!1;if(!S)return this.resolve([]);for(var R=-1,O=new this(o);++R<S;)N(_[R]);return O;function N(L){C.resolve(L).then(function($){k||(k=!0,a.resolve(O,$))},function($){k||(k=!0,a.reject(O,$))})}}},{1:1}],3:[function(n,r,i){(function(s){typeof s.Promise!="function"&&(s.Promise=n(2))}).call(this,typeof cs<"u"?cs:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(n,r,i){var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ne){return typeof ne}:function(ne){return ne&&typeof Symbol=="function"&&ne.constructor===Symbol&&ne!==Symbol.prototype?"symbol":typeof ne};function o(ne,ge){if(!(ne instanceof ge))throw new TypeError("Cannot call a class as a function")}function a(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var l=a();function u(){try{if(!l||!l.open)return!1;var ne=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),ge=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!ne||ge)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function c(ne,ge){ne=ne||[],ge=ge||{};try{return new Blob(ne,ge)}catch(xe){if(xe.name!=="TypeError")throw xe;for(var ue=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,_e=new ue,Ae=0;Ae<ne.length;Ae+=1)_e.append(ne[Ae]);return _e.getBlob(ge.type)}}typeof Promise>"u"&&n(3);var d=Promise;function f(ne,ge){ge&&ne.then(function(ue){ge(null,ue)},function(ue){ge(ue)})}function h(ne,ge,ue){typeof ge=="function"&&ne.then(ge),typeof ue=="function"&&ne.catch(ue)}function p(ne){return typeof ne!="string"&&(console.warn(ne+" used as a key, but it is not a string."),ne=String(ne)),ne}function m(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var g="local-forage-detect-blob-support",b=void 0,v={},x=Object.prototype.toString,E="readonly",_="readwrite";function C(ne){for(var ge=ne.length,ue=new ArrayBuffer(ge),_e=new Uint8Array(ue),Ae=0;Ae<ge;Ae++)_e[Ae]=ne.charCodeAt(Ae);return ue}function S(ne){return new d(function(ge){var ue=ne.transaction(g,_),_e=c([""]);ue.objectStore(g).put(_e,"key"),ue.onabort=function(Ae){Ae.preventDefault(),Ae.stopPropagation(),ge(!1)},ue.oncomplete=function(){var Ae=navigator.userAgent.match(/Chrome\/(\d+)/),xe=navigator.userAgent.match(/Edge\//);ge(xe||!Ae||parseInt(Ae[1],10)>=43)}}).catch(function(){return!1})}function k(ne){return typeof b=="boolean"?d.resolve(b):S(ne).then(function(ge){return b=ge,b})}function R(ne){var ge=v[ne.name],ue={};ue.promise=new d(function(_e,Ae){ue.resolve=_e,ue.reject=Ae}),ge.deferredOperations.push(ue),ge.dbReady?ge.dbReady=ge.dbReady.then(function(){return ue.promise}):ge.dbReady=ue.promise}function O(ne){var ge=v[ne.name],ue=ge.deferredOperations.pop();if(ue)return ue.resolve(),ue.promise}function N(ne,ge){var ue=v[ne.name],_e=ue.deferredOperations.pop();if(_e)return _e.reject(ge),_e.promise}function L(ne,ge){return new d(function(ue,_e){if(v[ne.name]=v[ne.name]||V(),ne.db)if(ge)R(ne),ne.db.close();else return ue(ne.db);var Ae=[ne.name];ge&&Ae.push(ne.version);var xe=l.open.apply(l,Ae);ge&&(xe.onupgradeneeded=function(Ye){var et=xe.result;try{et.createObjectStore(ne.storeName),Ye.oldVersion<=1&&et.createObjectStore(g)}catch(nt){if(nt.name==="ConstraintError")console.warn('The database "'+ne.name+'" has been upgraded from version '+Ye.oldVersion+" to version "+Ye.newVersion+', but the storage "'+ne.storeName+'" already exists.');else throw nt}}),xe.onerror=function(Ye){Ye.preventDefault(),_e(xe.error)},xe.onsuccess=function(){var Ye=xe.result;Ye.onversionchange=function(et){et.target.close()},ue(Ye),O(ne)}})}function $(ne){return L(ne,!1)}function B(ne){return L(ne,!0)}function H(ne,ge){if(!ne.db)return!0;var ue=!ne.db.objectStoreNames.contains(ne.storeName),_e=ne.version<ne.db.version,Ae=ne.version>ne.db.version;if(_e&&(ne.version!==ge&&console.warn('The database "'+ne.name+`" can't be downgraded from version `+ne.db.version+" to version "+ne.version+"."),ne.version=ne.db.version),Ae||ue){if(ue){var xe=ne.db.version+1;xe>ne.version&&(ne.version=xe)}return!0}return!1}function Y(ne){return new d(function(ge,ue){var _e=new FileReader;_e.onerror=ue,_e.onloadend=function(Ae){var xe=btoa(Ae.target.result||"");ge({__local_forage_encoded_blob:!0,data:xe,type:ne.type})},_e.readAsBinaryString(ne)})}function J(ne){var ge=C(atob(ne.data));return c([ge],{type:ne.type})}function K(ne){return ne&&ne.__local_forage_encoded_blob}function Z(ne){var ge=this,ue=ge._initReady().then(function(){var _e=v[ge._dbInfo.name];if(_e&&_e.dbReady)return _e.dbReady});return h(ue,ne,ne),ue}function U(ne){R(ne);for(var ge=v[ne.name],ue=ge.forages,_e=0;_e<ue.length;_e++){var Ae=ue[_e];Ae._dbInfo.db&&(Ae._dbInfo.db.close(),Ae._dbInfo.db=null)}return ne.db=null,$(ne).then(function(xe){return ne.db=xe,H(ne)?B(ne):xe}).then(function(xe){ne.db=ge.db=xe;for(var Ye=0;Ye<ue.length;Ye++)ue[Ye]._dbInfo.db=xe}).catch(function(xe){throw N(ne,xe),xe})}function j(ne,ge,ue,_e){_e===void 0&&(_e=1);try{var Ae=ne.db.transaction(ne.storeName,ge);ue(null,Ae)}catch(xe){if(_e>0&&(!ne.db||xe.name==="InvalidStateError"||xe.name==="NotFoundError"))return d.resolve().then(function(){if(!ne.db||xe.name==="NotFoundError"&&!ne.db.objectStoreNames.contains(ne.storeName)&&ne.version<=ne.db.version)return ne.db&&(ne.version=ne.db.version+1),B(ne)}).then(function(){return U(ne).then(function(){j(ne,ge,ue,_e-1)})}).catch(ue);ue(xe)}}function V(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function z(ne){var ge=this,ue={db:null};if(ne)for(var _e in ne)ue[_e]=ne[_e];var Ae=v[ue.name];Ae||(Ae=V(),v[ue.name]=Ae),Ae.forages.push(ge),ge._initReady||(ge._initReady=ge.ready,ge.ready=Z);var xe=[];function Ye(){return d.resolve()}for(var et=0;et<Ae.forages.length;et++){var nt=Ae.forages[et];nt!==ge&&xe.push(nt._initReady().catch(Ye))}var tt=Ae.forages.slice(0);return d.all(xe).then(function(){return ue.db=Ae.db,$(ue)}).then(function(pt){return ue.db=pt,H(ue,ge._defaultConfig.version)?B(ue):pt}).then(function(pt){ue.db=Ae.db=pt,ge._dbInfo=ue;for(var Pt=0;Pt<tt.length;Pt++){var rn=tt[Pt];rn!==ge&&(rn._dbInfo.db=ue.db,rn._dbInfo.version=ue.version)}})}function G(ne,ge){var ue=this;ne=p(ne);var _e=new d(function(Ae,xe){ue.ready().then(function(){j(ue._dbInfo,E,function(Ye,et){if(Ye)return xe(Ye);try{var nt=et.objectStore(ue._dbInfo.storeName),tt=nt.get(ne);tt.onsuccess=function(){var pt=tt.result;pt===void 0&&(pt=null),K(pt)&&(pt=J(pt)),Ae(pt)},tt.onerror=function(){xe(tt.error)}}catch(pt){xe(pt)}})}).catch(xe)});return f(_e,ge),_e}function Q(ne,ge){var ue=this,_e=new d(function(Ae,xe){ue.ready().then(function(){j(ue._dbInfo,E,function(Ye,et){if(Ye)return xe(Ye);try{var nt=et.objectStore(ue._dbInfo.storeName),tt=nt.openCursor(),pt=1;tt.onsuccess=function(){var Pt=tt.result;if(Pt){var rn=Pt.value;K(rn)&&(rn=J(rn));var qt=ne(rn,Pt.key,pt++);qt!==void 0?Ae(qt):Pt.continue()}else Ae()},tt.onerror=function(){xe(tt.error)}}catch(Pt){xe(Pt)}})}).catch(xe)});return f(_e,ge),_e}function ie(ne,ge,ue){var _e=this;ne=p(ne);var Ae=new d(function(xe,Ye){var et;_e.ready().then(function(){return et=_e._dbInfo,x.call(ge)==="[object Blob]"?k(et.db).then(function(nt){return nt?ge:Y(ge)}):ge}).then(function(nt){j(_e._dbInfo,_,function(tt,pt){if(tt)return Ye(tt);try{var Pt=pt.objectStore(_e._dbInfo.storeName);nt===null&&(nt=void 0);var rn=Pt.put(nt,ne);pt.oncomplete=function(){nt===void 0&&(nt=null),xe(nt)},pt.onabort=pt.onerror=function(){var qt=rn.error?rn.error:rn.transaction.error;Ye(qt)}}catch(qt){Ye(qt)}})}).catch(Ye)});return f(Ae,ue),Ae}function me(ne,ge){var ue=this;ne=p(ne);var _e=new d(function(Ae,xe){ue.ready().then(function(){j(ue._dbInfo,_,function(Ye,et){if(Ye)return xe(Ye);try{var nt=et.objectStore(ue._dbInfo.storeName),tt=nt.delete(ne);et.oncomplete=function(){Ae()},et.onerror=function(){xe(tt.error)},et.onabort=function(){var pt=tt.error?tt.error:tt.transaction.error;xe(pt)}}catch(pt){xe(pt)}})}).catch(xe)});return f(_e,ge),_e}function ae(ne){var ge=this,ue=new d(function(_e,Ae){ge.ready().then(function(){j(ge._dbInfo,_,function(xe,Ye){if(xe)return Ae(xe);try{var et=Ye.objectStore(ge._dbInfo.storeName),nt=et.clear();Ye.oncomplete=function(){_e()},Ye.onabort=Ye.onerror=function(){var tt=nt.error?nt.error:nt.transaction.error;Ae(tt)}}catch(tt){Ae(tt)}})}).catch(Ae)});return f(ue,ne),ue}function fe(ne){var ge=this,ue=new d(function(_e,Ae){ge.ready().then(function(){j(ge._dbInfo,E,function(xe,Ye){if(xe)return Ae(xe);try{var et=Ye.objectStore(ge._dbInfo.storeName),nt=et.count();nt.onsuccess=function(){_e(nt.result)},nt.onerror=function(){Ae(nt.error)}}catch(tt){Ae(tt)}})}).catch(Ae)});return f(ue,ne),ue}function be(ne,ge){var ue=this,_e=new d(function(Ae,xe){if(ne<0){Ae(null);return}ue.ready().then(function(){j(ue._dbInfo,E,function(Ye,et){if(Ye)return xe(Ye);try{var nt=et.objectStore(ue._dbInfo.storeName),tt=!1,pt=nt.openKeyCursor();pt.onsuccess=function(){var Pt=pt.result;if(!Pt){Ae(null);return}ne===0||tt?Ae(Pt.key):(tt=!0,Pt.advance(ne))},pt.onerror=function(){xe(pt.error)}}catch(Pt){xe(Pt)}})}).catch(xe)});return f(_e,ge),_e}function te(ne){var ge=this,ue=new d(function(_e,Ae){ge.ready().then(function(){j(ge._dbInfo,E,function(xe,Ye){if(xe)return Ae(xe);try{var et=Ye.objectStore(ge._dbInfo.storeName),nt=et.openKeyCursor(),tt=[];nt.onsuccess=function(){var pt=nt.result;if(!pt){_e(tt);return}tt.push(pt.key),pt.continue()},nt.onerror=function(){Ae(nt.error)}}catch(pt){Ae(pt)}})}).catch(Ae)});return f(ue,ne),ue}function re(ne,ge){ge=m.apply(this,arguments);var ue=this.config();ne=typeof ne!="function"&&ne||{},ne.name||(ne.name=ne.name||ue.name,ne.storeName=ne.storeName||ue.storeName);var _e=this,Ae;if(!ne.name)Ae=d.reject("Invalid arguments");else{var xe=ne.name===ue.name&&_e._dbInfo.db,Ye=xe?d.resolve(_e._dbInfo.db):$(ne).then(function(et){var nt=v[ne.name],tt=nt.forages;nt.db=et;for(var pt=0;pt<tt.length;pt++)tt[pt]._dbInfo.db=et;return et});ne.storeName?Ae=Ye.then(function(et){if(et.objectStoreNames.contains(ne.storeName)){var nt=et.version+1;R(ne);var tt=v[ne.name],pt=tt.forages;et.close();for(var Pt=0;Pt<pt.length;Pt++){var rn=pt[Pt];rn._dbInfo.db=null,rn._dbInfo.version=nt}var qt=new d(function(_n,Vt){var rr=l.open(ne.name,nt);rr.onerror=function(ns){var $a=rr.result;$a.close(),Vt(ns)},rr.onupgradeneeded=function(){var ns=rr.result;ns.deleteObjectStore(ne.storeName)},rr.onsuccess=function(){var ns=rr.result;ns.close(),_n(ns)}});return qt.then(function(_n){tt.db=_n;for(var Vt=0;Vt<pt.length;Vt++){var rr=pt[Vt];rr._dbInfo.db=_n,O(rr._dbInfo)}}).catch(function(_n){throw(N(ne,_n)||d.resolve()).catch(function(){}),_n})}}):Ae=Ye.then(function(et){R(ne);var nt=v[ne.name],tt=nt.forages;et.close();for(var pt=0;pt<tt.length;pt++){var Pt=tt[pt];Pt._dbInfo.db=null}var rn=new d(function(qt,_n){var Vt=l.deleteDatabase(ne.name);Vt.onerror=function(){var rr=Vt.result;rr&&rr.close(),_n(Vt.error)},Vt.onblocked=function(){console.warn('dropInstance blocked for database "'+ne.name+'" until all open connections are closed')},Vt.onsuccess=function(){var rr=Vt.result;rr&&rr.close(),qt(rr)}});return rn.then(function(qt){nt.db=qt;for(var _n=0;_n<tt.length;_n++){var Vt=tt[_n];O(Vt._dbInfo)}}).catch(function(qt){throw(N(ne,qt)||d.resolve()).catch(function(){}),qt})})}return f(Ae,ge),Ae}var we={_driver:"asyncStorage",_initStorage:z,_support:u(),iterate:Q,getItem:G,setItem:ie,removeItem:me,clear:ae,length:fe,key:be,keys:te,dropInstance:re};function Ee(){return typeof openDatabase=="function"}var Fe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",We="~~local_forage_type~",Me=/^~~local_forage_type~([^~]+)~/,Be="__lfsc__:",Je=Be.length,lt="arbf",ht="blob",vt="si08",Pe="ui08",wt="uic8",Wt="si16",Ce="si32",Ne="ur16",ot="ui32",xt="fl32",Ct="fl64",Qt=Je+lt.length,yn=Object.prototype.toString;function er(ne){var ge=ne.length*.75,ue=ne.length,_e,Ae=0,xe,Ye,et,nt;ne[ne.length-1]==="="&&(ge--,ne[ne.length-2]==="="&&ge--);var tt=new ArrayBuffer(ge),pt=new Uint8Array(tt);for(_e=0;_e<ue;_e+=4)xe=Fe.indexOf(ne[_e]),Ye=Fe.indexOf(ne[_e+1]),et=Fe.indexOf(ne[_e+2]),nt=Fe.indexOf(ne[_e+3]),pt[Ae++]=xe<<2|Ye>>4,pt[Ae++]=(Ye&15)<<4|et>>2,pt[Ae++]=(et&3)<<6|nt&63;return tt}function Wr(ne){var ge=new Uint8Array(ne),ue="",_e;for(_e=0;_e<ge.length;_e+=3)ue+=Fe[ge[_e]>>2],ue+=Fe[(ge[_e]&3)<<4|ge[_e+1]>>4],ue+=Fe[(ge[_e+1]&15)<<2|ge[_e+2]>>6],ue+=Fe[ge[_e+2]&63];return ge.length%3===2?ue=ue.substring(0,ue.length-1)+"=":ge.length%3===1&&(ue=ue.substring(0,ue.length-2)+"=="),ue}function pn(ne,ge){var ue="";if(ne&&(ue=yn.call(ne)),ne&&(ue==="[object ArrayBuffer]"||ne.buffer&&yn.call(ne.buffer)==="[object ArrayBuffer]")){var _e,Ae=Be;ne instanceof ArrayBuffer?(_e=ne,Ae+=lt):(_e=ne.buffer,ue==="[object Int8Array]"?Ae+=vt:ue==="[object Uint8Array]"?Ae+=Pe:ue==="[object Uint8ClampedArray]"?Ae+=wt:ue==="[object Int16Array]"?Ae+=Wt:ue==="[object Uint16Array]"?Ae+=Ne:ue==="[object Int32Array]"?Ae+=Ce:ue==="[object Uint32Array]"?Ae+=ot:ue==="[object Float32Array]"?Ae+=xt:ue==="[object Float64Array]"?Ae+=Ct:ge(new Error("Failed to get type for BinaryArray"))),ge(Ae+Wr(_e))}else if(ue==="[object Blob]"){var xe=new FileReader;xe.onload=function(){var Ye=We+ne.type+"~"+Wr(this.result);ge(Be+ht+Ye)},xe.readAsArrayBuffer(ne)}else try{ge(JSON.stringify(ne))}catch(Ye){console.error("Couldn't convert value into a JSON string: ",ne),ge(null,Ye)}}function En(ne){if(ne.substring(0,Je)!==Be)return JSON.parse(ne);var ge=ne.substring(Qt),ue=ne.substring(Je,Qt),_e;if(ue===ht&&Me.test(ge)){var Ae=ge.match(Me);_e=Ae[1],ge=ge.substring(Ae[0].length)}var xe=er(ge);switch(ue){case lt:return xe;case ht:return c([xe],{type:_e});case vt:return new Int8Array(xe);case Pe:return new Uint8Array(xe);case wt:return new Uint8ClampedArray(xe);case Wt:return new Int16Array(xe);case Ne:return new Uint16Array(xe);case Ce:return new Int32Array(xe);case ot:return new Uint32Array(xe);case xt:return new Float32Array(xe);case Ct:return new Float64Array(xe);default:throw new Error("Unkown type: "+ue)}}var Mr={serialize:pn,deserialize:En,stringToBuffer:er,bufferToString:Wr};function On(ne,ge,ue,_e){ne.executeSql("CREATE TABLE IF NOT EXISTS "+ge.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],ue,_e)}function bs(ne){var ge=this,ue={db:null};if(ne)for(var _e in ne)ue[_e]=typeof ne[_e]!="string"?ne[_e].toString():ne[_e];var Ae=new d(function(xe,Ye){try{ue.db=openDatabase(ue.name,String(ue.version),ue.description,ue.size)}catch(et){return Ye(et)}ue.db.transaction(function(et){On(et,ue,function(){ge._dbInfo=ue,xe()},function(nt,tt){Ye(tt)})},Ye)});return ue.serializer=Mr,Ae}function Qr(ne,ge,ue,_e,Ae,xe){ne.executeSql(ue,_e,Ae,function(Ye,et){et.code===et.SYNTAX_ERR?Ye.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[ge.storeName],function(nt,tt){tt.rows.length?xe(nt,et):On(nt,ge,function(){nt.executeSql(ue,_e,Ae,xe)},xe)},xe):xe(Ye,et)},xe)}function Lr(ne,ge){var ue=this;ne=p(ne);var _e=new d(function(Ae,xe){ue.ready().then(function(){var Ye=ue._dbInfo;Ye.db.transaction(function(et){Qr(et,Ye,"SELECT * FROM "+Ye.storeName+" WHERE key = ? LIMIT 1",[ne],function(nt,tt){var pt=tt.rows.length?tt.rows.item(0).value:null;pt&&(pt=Ye.serializer.deserialize(pt)),Ae(pt)},function(nt,tt){xe(tt)})})}).catch(xe)});return f(_e,ge),_e}function Jr(ne,ge){var ue=this,_e=new d(function(Ae,xe){ue.ready().then(function(){var Ye=ue._dbInfo;Ye.db.transaction(function(et){Qr(et,Ye,"SELECT * FROM "+Ye.storeName,[],function(nt,tt){for(var pt=tt.rows,Pt=pt.length,rn=0;rn<Pt;rn++){var qt=pt.item(rn),_n=qt.value;if(_n&&(_n=Ye.serializer.deserialize(_n)),_n=ne(_n,qt.key,rn+1),_n!==void 0){Ae(_n);return}}Ae()},function(nt,tt){xe(tt)})})}).catch(xe)});return f(_e,ge),_e}function tr(ne,ge,ue,_e){var Ae=this;ne=p(ne);var xe=new d(function(Ye,et){Ae.ready().then(function(){ge===void 0&&(ge=null);var nt=ge,tt=Ae._dbInfo;tt.serializer.serialize(ge,function(pt,Pt){Pt?et(Pt):tt.db.transaction(function(rn){Qr(rn,tt,"INSERT OR REPLACE INTO "+tt.storeName+" (key, value) VALUES (?, ?)",[ne,pt],function(){Ye(nt)},function(qt,_n){et(_n)})},function(rn){if(rn.code===rn.QUOTA_ERR){if(_e>0){Ye(tr.apply(Ae,[ne,nt,ue,_e-1]));return}et(rn)}})})}).catch(et)});return f(xe,ue),xe}function Qs(ne,ge,ue){return tr.apply(this,[ne,ge,ue,1])}function su(ne,ge){var ue=this;ne=p(ne);var _e=new d(function(Ae,xe){ue.ready().then(function(){var Ye=ue._dbInfo;Ye.db.transaction(function(et){Qr(et,Ye,"DELETE FROM "+Ye.storeName+" WHERE key = ?",[ne],function(){Ae()},function(nt,tt){xe(tt)})})}).catch(xe)});return f(_e,ge),_e}function ta(ne){var ge=this,ue=new d(function(_e,Ae){ge.ready().then(function(){var xe=ge._dbInfo;xe.db.transaction(function(Ye){Qr(Ye,xe,"DELETE FROM "+xe.storeName,[],function(){_e()},function(et,nt){Ae(nt)})})}).catch(Ae)});return f(ue,ne),ue}function El(ne){var ge=this,ue=new d(function(_e,Ae){ge.ready().then(function(){var xe=ge._dbInfo;xe.db.transaction(function(Ye){Qr(Ye,xe,"SELECT COUNT(key) as c FROM "+xe.storeName,[],function(et,nt){var tt=nt.rows.item(0).c;_e(tt)},function(et,nt){Ae(nt)})})}).catch(Ae)});return f(ue,ne),ue}function nr(ne,ge){var ue=this,_e=new d(function(Ae,xe){ue.ready().then(function(){var Ye=ue._dbInfo;Ye.db.transaction(function(et){Qr(et,Ye,"SELECT key FROM "+Ye.storeName+" WHERE id = ? LIMIT 1",[ne+1],function(nt,tt){var pt=tt.rows.length?tt.rows.item(0).key:null;Ae(pt)},function(nt,tt){xe(tt)})})}).catch(xe)});return f(_e,ge),_e}function Fr(ne){var ge=this,ue=new d(function(_e,Ae){ge.ready().then(function(){var xe=ge._dbInfo;xe.db.transaction(function(Ye){Qr(Ye,xe,"SELECT key FROM "+xe.storeName,[],function(et,nt){for(var tt=[],pt=0;pt<nt.rows.length;pt++)tt.push(nt.rows.item(pt).key);_e(tt)},function(et,nt){Ae(nt)})})}).catch(Ae)});return f(ue,ne),ue}function dr(ne){return new d(function(ge,ue){ne.transaction(function(_e){_e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(Ae,xe){for(var Ye=[],et=0;et<xe.rows.length;et++)Ye.push(xe.rows.item(et).name);ge({db:ne,storeNames:Ye})},function(Ae,xe){ue(xe)})},function(_e){ue(_e)})})}function ws(ne,ge){ge=m.apply(this,arguments);var ue=this.config();ne=typeof ne!="function"&&ne||{},ne.name||(ne.name=ne.name||ue.name,ne.storeName=ne.storeName||ue.storeName);var _e=this,Ae;return ne.name?Ae=new d(function(xe){var Ye;ne.name===ue.name?Ye=_e._dbInfo.db:Ye=openDatabase(ne.name,"","",0),ne.storeName?xe({db:Ye,storeNames:[ne.storeName]}):xe(dr(Ye))}).then(function(xe){return new d(function(Ye,et){xe.db.transaction(function(nt){function tt(qt){return new d(function(_n,Vt){nt.executeSql("DROP TABLE IF EXISTS "+qt,[],function(){_n()},function(rr,ns){Vt(ns)})})}for(var pt=[],Pt=0,rn=xe.storeNames.length;Pt<rn;Pt++)pt.push(tt(xe.storeNames[Pt]));d.all(pt).then(function(){Ye()}).catch(function(qt){et(qt)})},function(nt){et(nt)})})}):Ae=d.reject("Invalid arguments"),f(Ae,ge),Ae}var Gn={_driver:"webSQLStorage",_initStorage:bs,_support:Ee(),iterate:Jr,getItem:Lr,setItem:Qs,removeItem:su,clear:ta,length:El,key:nr,keys:Fr,dropInstance:ws};function li(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function xs(ne,ge){var ue=ne.name+"/";return ne.storeName!==ge.storeName&&(ue+=ne.storeName+"/"),ue}function Qi(){var ne="_localforage_support_test";try{return localStorage.setItem(ne,!0),localStorage.removeItem(ne),!1}catch{return!0}}function Js(){return!Qi()||localStorage.length>0}function _l(ne){var ge=this,ue={};if(ne)for(var _e in ne)ue[_e]=ne[_e];return ue.keyPrefix=xs(ne,ge._defaultConfig),Js()?(ge._dbInfo=ue,ue.serializer=Mr,d.resolve()):d.reject()}function ih(ne){var ge=this,ue=ge.ready().then(function(){for(var _e=ge._dbInfo.keyPrefix,Ae=localStorage.length-1;Ae>=0;Ae--){var xe=localStorage.key(Ae);xe.indexOf(_e)===0&&localStorage.removeItem(xe)}});return f(ue,ne),ue}function Yn(ne,ge){var ue=this;ne=p(ne);var _e=ue.ready().then(function(){var Ae=ue._dbInfo,xe=localStorage.getItem(Ae.keyPrefix+ne);return xe&&(xe=Ae.serializer.deserialize(xe)),xe});return f(_e,ge),_e}function Zu(ne,ge){var ue=this,_e=ue.ready().then(function(){for(var Ae=ue._dbInfo,xe=Ae.keyPrefix,Ye=xe.length,et=localStorage.length,nt=1,tt=0;tt<et;tt++){var pt=localStorage.key(tt);if(pt.indexOf(xe)===0){var Pt=localStorage.getItem(pt);if(Pt&&(Pt=Ae.serializer.deserialize(Pt)),Pt=ne(Pt,pt.substring(Ye),nt++),Pt!==void 0)return Pt}}});return f(_e,ge),_e}function ui(ne,ge){var ue=this,_e=ue.ready().then(function(){var Ae=ue._dbInfo,xe;try{xe=localStorage.key(ne)}catch{xe=null}return xe&&(xe=xe.substring(Ae.keyPrefix.length)),xe});return f(_e,ge),_e}function Oa(ne){var ge=this,ue=ge.ready().then(function(){for(var _e=ge._dbInfo,Ae=localStorage.length,xe=[],Ye=0;Ye<Ae;Ye++){var et=localStorage.key(Ye);et.indexOf(_e.keyPrefix)===0&&xe.push(et.substring(_e.keyPrefix.length))}return xe});return f(ue,ne),ue}function Zs(ne){var ge=this,ue=ge.keys().then(function(_e){return _e.length});return f(ue,ne),ue}function Xp(ne,ge){var ue=this;ne=p(ne);var _e=ue.ready().then(function(){var Ae=ue._dbInfo;localStorage.removeItem(Ae.keyPrefix+ne)});return f(_e,ge),_e}function sh(ne,ge,ue){var _e=this;ne=p(ne);var Ae=_e.ready().then(function(){ge===void 0&&(ge=null);var xe=ge;return new d(function(Ye,et){var nt=_e._dbInfo;nt.serializer.serialize(ge,function(tt,pt){if(pt)et(pt);else try{localStorage.setItem(nt.keyPrefix+ne,tt),Ye(xe)}catch(Pt){(Pt.name==="QuotaExceededError"||Pt.name==="NS_ERROR_DOM_QUOTA_REACHED")&&et(Pt),et(Pt)}})})});return f(Ae,ue),Ae}function Sd(ne,ge){if(ge=m.apply(this,arguments),ne=typeof ne!="function"&&ne||{},!ne.name){var ue=this.config();ne.name=ne.name||ue.name,ne.storeName=ne.storeName||ue.storeName}var _e=this,Ae;return ne.name?Ae=new d(function(xe){ne.storeName?xe(xs(ne,_e._defaultConfig)):xe(ne.name+"/")}).then(function(xe){for(var Ye=localStorage.length-1;Ye>=0;Ye--){var et=localStorage.key(Ye);et.indexOf(xe)===0&&localStorage.removeItem(et)}}):Ae=d.reject("Invalid arguments"),f(Ae,ge),Ae}var Ad={_driver:"localStorageWrapper",_initStorage:_l,_support:li(),iterate:Zu,getItem:Yn,setItem:sh,removeItem:Xp,clear:ih,length:Zs,key:ui,keys:Oa,dropInstance:Sd},ec=function(ge,ue){return ge===ue||typeof ge=="number"&&typeof ue=="number"&&isNaN(ge)&&isNaN(ue)},Qp=function(ge,ue){for(var _e=ge.length,Ae=0;Ae<_e;){if(ec(ge[Ae],ue))return!0;Ae++}return!1},tc=Array.isArray||function(ne){return Object.prototype.toString.call(ne)==="[object Array]"},$n={},oh={},Ji={INDEXEDDB:we,WEBSQL:Gn,LOCALSTORAGE:Ad},Tl=[Ji.INDEXEDDB._driver,Ji.WEBSQL._driver,Ji.LOCALSTORAGE._driver],Zi=["dropInstance"],nc=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Zi),Jp={description:"",driver:Tl.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function ou(ne,ge){ne[ge]=function(){var ue=arguments;return ne.ready().then(function(){return ne[ge].apply(ne,ue)})}}function es(){for(var ne=1;ne<arguments.length;ne++){var ge=arguments[ne];if(ge)for(var ue in ge)ge.hasOwnProperty(ue)&&(tc(ge[ue])?arguments[0][ue]=ge[ue].slice():arguments[0][ue]=ge[ue])}return arguments[0]}var Zp=function(){function ne(ge){o(this,ne);for(var ue in Ji)if(Ji.hasOwnProperty(ue)){var _e=Ji[ue],Ae=_e._driver;this[ue]=Ae,$n[Ae]||this.defineDriver(_e)}this._defaultConfig=es({},Jp),this._config=es({},this._defaultConfig,ge),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return ne.prototype.config=function(ue){if((typeof ue>"u"?"undefined":s(ue))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var _e in ue){if(_e==="storeName"&&(ue[_e]=ue[_e].replace(/\W/g,"_")),_e==="version"&&typeof ue[_e]!="number")return new Error("Database version must be a number.");this._config[_e]=ue[_e]}return"driver"in ue&&ue.driver?this.setDriver(this._config.driver):!0}else return typeof ue=="string"?this._config[ue]:this._config},ne.prototype.defineDriver=function(ue,_e,Ae){var xe=new d(function(Ye,et){try{var nt=ue._driver,tt=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!ue._driver){et(tt);return}for(var pt=nc.concat("_initStorage"),Pt=0,rn=pt.length;Pt<rn;Pt++){var qt=pt[Pt],_n=!Qp(Zi,qt);if((_n||ue[qt])&&typeof ue[qt]!="function"){et(tt);return}}var Vt=function(){for(var $a=function(eo){return function(){var ci=new Error("Method "+eo+" is not implemented by the current driver"),Es=d.reject(ci);return f(Es,arguments[arguments.length-1]),Es}},au=0,em=Zi.length;au<em;au++){var kd=Zi[au];ue[kd]||(ue[kd]=$a(kd))}};Vt();var rr=function($a){$n[nt]&&console.info("Redefining LocalForage driver: "+nt),$n[nt]=ue,oh[nt]=$a,Ye()};"_support"in ue?ue._support&&typeof ue._support=="function"?ue._support().then(rr,et):rr(!!ue._support):rr(!0)}catch(ns){et(ns)}});return h(xe,_e,Ae),xe},ne.prototype.driver=function(){return this._driver||null},ne.prototype.getDriver=function(ue,_e,Ae){var xe=$n[ue]?d.resolve($n[ue]):d.reject(new Error("Driver not found."));return h(xe,_e,Ae),xe},ne.prototype.getSerializer=function(ue){var _e=d.resolve(Mr);return h(_e,ue),_e},ne.prototype.ready=function(ue){var _e=this,Ae=_e._driverSet.then(function(){return _e._ready===null&&(_e._ready=_e._initDriver()),_e._ready});return h(Ae,ue,ue),Ae},ne.prototype.setDriver=function(ue,_e,Ae){var xe=this;tc(ue)||(ue=[ue]);var Ye=this._getSupportedDrivers(ue);function et(){xe._config.driver=xe.driver()}function nt(Pt){return xe._extend(Pt),et(),xe._ready=xe._initStorage(xe._config),xe._ready}function tt(Pt){return function(){var rn=0;function qt(){for(;rn<Pt.length;){var _n=Pt[rn];return rn++,xe._dbInfo=null,xe._ready=null,xe.getDriver(_n).then(nt).catch(qt)}et();var Vt=new Error("No available storage method found.");return xe._driverSet=d.reject(Vt),xe._driverSet}return qt()}}var pt=this._driverSet!==null?this._driverSet.catch(function(){return d.resolve()}):d.resolve();return this._driverSet=pt.then(function(){var Pt=Ye[0];return xe._dbInfo=null,xe._ready=null,xe.getDriver(Pt).then(function(rn){xe._driver=rn._driver,et(),xe._wrapLibraryMethodsWithReady(),xe._initDriver=tt(Ye)})}).catch(function(){et();var Pt=new Error("No available storage method found.");return xe._driverSet=d.reject(Pt),xe._driverSet}),h(this._driverSet,_e,Ae),this._driverSet},ne.prototype.supports=function(ue){return!!oh[ue]},ne.prototype._extend=function(ue){es(this,ue)},ne.prototype._getSupportedDrivers=function(ue){for(var _e=[],Ae=0,xe=ue.length;Ae<xe;Ae++){var Ye=ue[Ae];this.supports(Ye)&&_e.push(Ye)}return _e},ne.prototype._wrapLibraryMethodsWithReady=function(){for(var ue=0,_e=nc.length;ue<_e;ue++)ou(this,nc[ue])},ne.prototype.createInstance=function(ue){return new ne(ue)},ne}(),ts=new Zp;r.exports=ts},{3:3}]},{},[4])(4)})}(o9)),o9.exports}var TBt=_Bt();const zDe=vl(TBt),ao=[];for(let e=0;e<256;++e)ao.push((e+256).toString(16).slice(1));function CBt(e,t=0){return(ao[e[t+0]]+ao[e[t+1]]+ao[e[t+2]]+ao[e[t+3]]+"-"+ao[e[t+4]]+ao[e[t+5]]+"-"+ao[e[t+6]]+ao[e[t+7]]+"-"+ao[e[t+8]]+ao[e[t+9]]+"-"+ao[e[t+10]]+ao[e[t+11]]+ao[e[t+12]]+ao[e[t+13]]+ao[e[t+14]]+ao[e[t+15]]).toLowerCase()}let a9;const SBt=new Uint8Array(16);function ABt(){if(!a9){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");a9=crypto.getRandomValues.bind(crypto)}return a9(SBt)}const kBt=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),ehe={randomUUID:kBt};function IBt(e,t,n){var i;if(ehe.randomUUID&&!e)return ehe.randomUUID();e=e||{};const r=e.random??((i=e.rng)==null?void 0:i.call(e))??ABt();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,CBt(r)}var l9,the;function RBt(){if(the)return l9;the=1;var e="Expected a function",t=NaN,n="[object Symbol]",r=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,o=/^0o[0-7]+$/i,a=parseInt,l=typeof cs=="object"&&cs&&cs.Object===Object&&cs,u=typeof self=="object"&&self&&self.Object===Object&&self,c=l||u||Function("return this")(),d=Object.prototype,f=d.toString,h=Math.max,p=Math.min,m=function(){return c.Date.now()};function g(C,S,k){var R,O,N,L,$,B,H=0,Y=!1,J=!1,K=!0;if(typeof C!="function")throw new TypeError(e);S=_(S)||0,v(k)&&(Y=!!k.leading,J="maxWait"in k,N=J?h(_(k.maxWait)||0,S):N,K="trailing"in k?!!k.trailing:K);function Z(ae){var fe=R,be=O;return R=O=void 0,H=ae,L=C.apply(be,fe),L}function U(ae){return H=ae,$=setTimeout(z,S),Y?Z(ae):L}function j(ae){var fe=ae-B,be=ae-H,te=S-fe;return J?p(te,N-be):te}function V(ae){var fe=ae-B,be=ae-H;return B===void 0||fe>=S||fe<0||J&&be>=N}function z(){var ae=m();if(V(ae))return G(ae);$=setTimeout(z,j(ae))}function G(ae){return $=void 0,K&&R?Z(ae):(R=O=void 0,L)}function Q(){$!==void 0&&clearTimeout($),H=0,R=B=O=$=void 0}function ie(){return $===void 0?L:G(m())}function me(){var ae=m(),fe=V(ae);if(R=arguments,O=this,B=ae,fe){if($===void 0)return U(B);if(J)return $=setTimeout(z,S),Z(B)}return $===void 0&&($=setTimeout(z,S)),L}return me.cancel=Q,me.flush=ie,me}function b(C,S,k){var R=!0,O=!0;if(typeof C!="function")throw new TypeError(e);return v(k)&&(R="leading"in k?!!k.leading:R,O="trailing"in k?!!k.trailing:O),g(C,S,{leading:R,maxWait:S,trailing:O})}function v(C){var S=typeof C;return!!C&&(S=="object"||S=="function")}function x(C){return!!C&&typeof C=="object"}function E(C){return typeof C=="symbol"||x(C)&&f.call(C)==n}function _(C){if(typeof C=="number")return C;if(E(C))return t;if(v(C)){var S=typeof C.valueOf=="function"?C.valueOf():C;C=v(S)?S+"":S}if(typeof C!="string")return C===0?C:+C;C=C.replace(r,"");var k=s.test(C);return k||o.test(C)?a(C.slice(2),k?2:8):i.test(C)?t:+C}return l9=b,l9}var DBt=RBt();const nhe=vl(DBt);class UDe{constructor(t,n){Wa(this,"engine");Wa(this,"testing");Wa(this,"cloudEngine",!1);Wa(this,"connected",!1);Wa(this,"localForage",zDe.createInstance({name:"revisit"}));Wa(this,"collectionPrefix","prod-");Wa(this,"studyId");Wa(this,"currentParticipantId");Wa(this,"participantData");Wa(this,"__throttleVerifyStudyDatabase",nhe(async()=>{await this._verifyStudyDatabase()},1e4));Wa(this,"__throttleSaveAnswers",nhe(async()=>{await this._saveAnswers()},3e3));this.engine=t,this.testing=n}isConnected(){return this.connected}getEngine(){return this.engine}isCloudEngine(){return this.cloudEngine}async verifyStudyDatabase(){return await this.__throttleVerifyStudyDatabase()}async saveConfig(t){const n=await this._getCurrentConfigHash(),r=await yj(JSON.stringify(t));if(await this._pushToStorage(`configs/${r}`,"config",t),await this._cacheStorageObject(`configs/${r}`,"config"),n&&n!==r){try{await this._deleteFromStorage("","sequenceArray")}catch{}await this.clearCurrentParticipantId()}await this._setCurrentConfigHash(r)}async getAllConfigsFromHash(t,n){const r=t.map(async s=>[s,await this._getFromStorage(`configs/${s}`,"config",n)]),i=await Promise.all(r);return Object.fromEntries(i)}async getCurrentParticipantId(t){if(t)return this.currentParticipantId=t,t;if(this.currentParticipantId)return this.currentParticipantId;if(!this.studyId)throw new Error("Study ID is not set");const n=await this.localForage.getItem(`${this.collectionPrefix}${this.studyId}/currentParticipantId`);return n?(this.currentParticipantId=n,n):(this.currentParticipantId=IBt(),await this.localForage.setItem(`${this.collectionPrefix}${this.studyId}/currentParticipantId`,this.currentParticipantId),this.currentParticipantId)}async clearCurrentParticipantId(){if(this.currentParticipantId=void 0,!this.studyId)throw new Error("Study ID is not set");return await this.localForage.removeItem(`${this.collectionPrefix}${this.studyId}/currentParticipantId`)}async _getSequence(){if(!this.currentParticipantId)throw new Error("Participant not initialized");if(this.studyId===void 0)throw new Error("Study ID is not set");let t=await this._getAllSequenceAssignments(this.studyId);const n=await this.getModes(this.studyId),r=t.filter(u=>u.rejected&&!u.claimed);if(r.length>0){const u=r[0],c=u.timestamp;if(n.dataCollectionEnabled){const d={participantId:this.currentParticipantId,timestamp:c,rejected:!1,claimed:!1,completed:null,createdTime:new Date().getTime()};await this._claimSequenceAssignment(u.participantId,u),await this._createSequenceAssignment(this.currentParticipantId,d,!1)}}else if(n.dataCollectionEnabled){const u=new Date().getTime(),c={participantId:this.currentParticipantId,timestamp:u,rejected:!1,claimed:!1,completed:null,createdTime:u};await this._createSequenceAssignment(this.currentParticipantId,c,!0)}t=await this._getAllSequenceAssignments(this.studyId);const i=await this.getSequenceArray();if(!i)throw new Error("Latin square not initialized");const s=t.filter(u=>!u.rejected).findIndex(u=>u.participantId===this.currentParticipantId)%i.length;if(i.length===0)throw new Error("Something really bad happened with sequence assignment");if(s===-1)return{currentRow:i[Math.floor(Math.random()*i.length)],creationIndex:1};const o=i[s];if(!o)throw new Error("Latin square is empty");const l=t.sort((u,c)=>u.createdTime-c.createdTime).findIndex(u=>u.participantId===this.currentParticipantId)+1;return{currentRow:o,creationIndex:l}}async initializeParticipantSession(t,n,r,i){if(await this.verifyStudyDatabase(),await this.getCurrentParticipantId(i),!this.currentParticipantId)throw new Error("Participant not initialized");const s=await this._getFromStorage(`participants/${this.currentParticipantId}`,"participantData");if(this.studyId===void 0)throw new Error("Study ID is not set");const o=await this.getModes(this.studyId);if(Ak(s))return this.participantData=s,s;const a=await yj(JSON.stringify(n)),{currentRow:l,creationIndex:u}=await this._getSequence();return this.participantData={participantId:this.currentParticipantId,participantConfigHash:a,sequence:l,participantIndex:u,answers:{},searchParams:t,metadata:r,completed:!1,rejected:!1,participantTags:[]},o.dataCollectionEnabled&&await this._pushToStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData),this.participantData}async getAllParticipantIds(t){if(!this.studyId)throw new Error("Study ID is not set");return(await this._getAllSequenceAssignments(t||this.studyId)).map(r=>r.participantId)}async getParticipantData(t){if(await this.verifyStudyDatabase(),this.currentParticipantId===null&&!t)throw new Error("Participant not initialized");const n=await this._getFromStorage(`participants/${t||this.currentParticipantId}`,"participantData");return Ak(n)?n:null}async getParticipantTags(){await this.verifyStudyDatabase();const t=await this.getParticipantData();if(!t)throw new Error("Participant not initialized");return t.participantTags}async addParticipantTags(t){if(await this.verifyStudyDatabase(),!this.participantData)throw new Error("Participant data not initialized");this.participantData.participantTags=[...new Set([...this.participantData.participantTags,...t])],await this._pushToStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData)}async removeParticipantTags(t){if(await this.verifyStudyDatabase(),!this.participantData)throw new Error("Participant data not initialized");this.participantData.participantTags=this.participantData.participantTags.filter(n=>!t.includes(n)),await this._pushToStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData)}async rejectParticipant(t,n,r){const i=await this._getFromStorage(`participants/${t}`,"participantData",r);try{if(!i||!Ak(i)||i.rejected)return;i.rejected={reason:n,timestamp:new Date().getTime()},await this._pushToStorage(`participants/${t}`,"participantData",i),await this._rejectParticipantRealtime(t)}catch(s){console.warn("Error rejecting participant:",s)}}async rejectCurrentParticipant(t){if(!this.currentParticipantId)throw new Error("Participant not initialized");return await this.rejectParticipant(this.currentParticipantId,t)}async getAllParticipantsData(t){await this.verifyStudyDatabase();const n=await this.getAllParticipantIds(t),r=[],i=n.map(async s=>{const o=await this._getFromStorage(`participants/${s}`,"participantData",t);Ak(o)&&r.push(o)});return await Promise.all(i),r}async getParticipantsStatusCounts(t){const n=await this._getAllSequenceAssignments(t),r=n.filter(l=>l.completed&&!l.rejected).length,i=n.filter(l=>l.rejected).length,s=n.length-r-i,o=n.length>0?n[0].timestamp:null,a=n.length>0?n.at(-1).timestamp:null;return{completed:r,rejected:i,inProgress:s,minTime:o,maxTime:a}}async _saveAnswers(){if(await this.verifyStudyDatabase(),!this.currentParticipantId||this.participantData===void 0)throw new Error("Participant not initialized");await this._pushToStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData)}async saveAnswers(t){if(!this.currentParticipantId||this.participantData===void 0)throw new Error("Participant not initialized");this.participantData={...this.participantData,answers:t},await this.__throttleSaveAnswers(t)}async verifyCompletion(){var s;if(await this.verifyStudyDatabase(),!this.studyId)throw new Error("Study not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const t=await this.getParticipantData();if(!t)throw new Error("Participant not initialized");if(t.completed)return!0;const n=await this.getModes(this.studyId),r=Object.values(t.answers).map(o=>o.endTime).reduce((o,a)=>Math.max(o,a),0),i=Object.values(((s=this.participantData)==null?void 0:s.answers)||{}).map(o=>o.endTime).reduce((o,a)=>Math.max(o,a),0);return this.participantData&&r===i?(this.participantData.completed=!0,n.dataCollectionEnabled&&(await this._pushToStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData),await this._cacheStorageObject(`participants/${this.currentParticipantId}`,"participantData"),await this._completeCurrentParticipantRealtime()),!0):!1}async getAudio(t,n){const r=await this._getAudioUrl(t,n);return r?new Promise(s=>{const o=new XMLHttpRequest;o.responseType="blob",o.onload=()=>{const a=o.response,l=URL.createObjectURL(a);s(l)},o.open("GET",r),o.send()}):null}async saveAudio(t,n){let r=null;const i=async s=>{r||(r=setTimeout(async()=>{await this._pushToStorage(`audio/${this.currentParticipantId}`,n,s.data),await this._cacheStorageObject(`audio/${this.currentParticipantId}`,n)},500))};t.addEventListener("dataavailable",i),t.requestData()}async getSequenceArray(){await this.verifyStudyDatabase();const t=await this._getFromStorage("","sequenceArray");return Array.isArray(t)?t:null}async setSequenceArray(t){await this.verifyStudyDatabase(),await this._pushToStorage("","sequenceArray",t)}async __testingReset(){this.currentParticipantId=void 0,this.participantData=void 0,this.localForage.setItem(`${this.collectionPrefix}${this.studyId}/currentParticipantId`,void 0)}async createSnapshot(t,n){const r=`${this.collectionPrefix}${t}`;if(!await this._directoryExists(`${r}/participants`))return console.warn(`Source directory ${r} does not exist.`),{status:"FAILED",error:{message:"There is currently no data in your study. A snapshot could not be created.",title:"Failed to Create Snapshot."}};const i=new Date,s=i.getUTCFullYear(),o=(i.getUTCMonth()+1).toString().padStart(2,"0"),a=i.getUTCDate().toString().padStart(2,"0"),l=i.getUTCHours().toString().padStart(2,"0"),u=i.getUTCMinutes().toString().padStart(2,"0"),c=i.getUTCSeconds().toString().padStart(2,"0"),d=`${s}-${o}-${a}T${l}:${u}:${c}`,f=`${this.collectionPrefix}${t}-snapshot-${d}`;this.getEngine()==="localStorage"?await this._copyDirectory(`${r}/`,`${f}/`):(await this._copyDirectory(`${r}/configs`,`${f}/configs`),await this._copyDirectory(`${r}/participants`,`${f}/participants`),await this._copyDirectory(`${r}/audio`,`${f}/audio`),await this._copyDirectory(r,f),await this._copyRealtimeData(r,f)),await this._addDirectoryNameToSnapshots(f,t);const h=[];if(n){const p=await this.removeSnapshotOrLive(r,t);p.status==="FAILED"?h.push({title:p.error.title,message:p.error.message,color:"red"}):h.push({title:"Success!",message:"Successfully deleted live data.",color:"green"})}return h.push({message:"Successfully created snapshot",title:"Success!",color:"green"}),{status:"SUCCESS",notifications:h}}async removeSnapshotOrLive(t,n){const r=t.startsWith(this.collectionPrefix)?t:`${this.collectionPrefix}${t}`;try{return this.getEngine()==="localStorage"?await this._deleteDirectory(`${r}/`):(await this._deleteDirectory(`${r}/configs`),await this._deleteDirectory(`${r}/participants`),await this._deleteDirectory(`${r}/audio`),await this._deleteDirectory(r),await this._deleteRealtimeData(r)),await this._removeDirectoryNameFromSnapshots(r,n),{status:"SUCCESS",notifications:[{message:"Successfully deleted snapshot or live data.",title:"Success!",color:"green"}]}}catch{return{status:"FAILED",error:{title:"Failed to delete live data or snapshot",message:"There was an unspecified error when trying to remove a snapshot or live data."}}}}async restoreSnapshot(t,n){const r=`${this.collectionPrefix}${t}`,i=[];try{const s=await this.createSnapshot(t,!0);return s.status==="FAILED"?(console.warn("No live data to capture."),i.push({title:s.error.title,message:s.error.message,color:"yellow"})):i.push({title:"Success!",message:"Successfully created snapshot of live data.",color:"green"}),await this._copyDirectory(`${n}/configs`,`${r}/configs`),await this._copyDirectory(`${n}/participants`,`${r}/participants`),await this._copyDirectory(`${n}/audio`,`${r}/audio`),await this._copyDirectory(n,r),await this._copyRealtimeData(n,r),i.push({message:"Successfully restored snapshot to live data.",title:"Success!",color:"green"}),{status:"SUCCESS",notifications:i}}catch(s){return console.error("Error trying to delete a snapshot",s),{status:"FAILED",error:{title:"Failed to restore a snapshot fully.",message:"There was an unspecified error when trying to restore this snapshot."}}}}async renameSnapshot(t,n,r){try{return await this._changeDirectoryNameInSnapshots(t,n,r),{status:"SUCCESS",notifications:[{message:"Successfully renamed snapshot.",title:"Success!",color:"green"}]}}catch(i){return console.error("Error renaming collection in metadata",i),{status:"FAILED",error:{title:"Failed to Rename Snapshot.",message:"There was an error when trying to rename the snapshot."}}}}}class PBt extends UDe{constructor(n=!1){super("localStorage",n);Wa(this,"studyDatabase",zDe.createInstance({name:"revisit"}))}async _getFromStorage(n,r,i){const s=`${this.collectionPrefix}${i||this.studyId}/${n}_${r}`;return await this.studyDatabase.getItem(s)}async _pushToStorage(n,r,i){await this.verifyStudyDatabase();const s=`${this.collectionPrefix}${this.studyId}/${n}_${r}`;await this.studyDatabase.setItem(s,i)}async _deleteFromStorage(n,r){await this.verifyStudyDatabase();const i=`${this.collectionPrefix}${this.studyId}/${n}_${r}`;await this.studyDatabase.removeItem(i)}async _cacheStorageObject(){}async _verifyStudyDatabase(){if(!this.studyDatabase||!this.studyId)throw new Error("Study database not initialized")}async _getCurrentConfigHash(){await this.verifyStudyDatabase();const n=`${this.collectionPrefix}${this.studyId}/configHash`;return await this.studyDatabase.getItem(n)||null}async _setCurrentConfigHash(n){await this.verifyStudyDatabase();const r=`${this.collectionPrefix}${this.studyId}/configHash`;await this.studyDatabase.setItem(r,n)}async _getAllSequenceAssignments(n){const r=`${this.collectionPrefix}${n}/sequenceAssignment`,i=await this.studyDatabase.getItem(r);return i?Object.values(i).sort((s,o)=>s.timestamp-o.timestamp):[]}async _createSequenceAssignment(n,r){if(await this.verifyStudyDatabase(),this.studyId===void 0)throw new Error("Study ID is not set");const i=`${this.collectionPrefix}${this.studyId}/sequenceAssignment`,s=await this.studyDatabase.getItem(i)||{};s[n]=r,await this.studyDatabase.setItem(i,s)}async _completeCurrentParticipantRealtime(){if(!this.currentParticipantId)throw new Error("Participant not initialized");if(this.studyId===void 0)throw new Error("Study ID is not set");const n=`${this.collectionPrefix}${this.studyId}/sequenceAssignment`,r=await this.studyDatabase.getItem(n)||{};if(r[this.currentParticipantId])r[this.currentParticipantId]={...r[this.currentParticipantId],completed:new Date().getTime()};else throw new Error("Participant sequence assignment not found");await this.studyDatabase.setItem(n,r)}async _rejectParticipantRealtime(n){await this.verifyStudyDatabase();const r=`${this.collectionPrefix}${this.studyId}/sequenceAssignment`,i=await this.studyDatabase.getItem(r)||{},s=i[n],o=Object.values(i).find(a=>a.claimed&&a.timestamp===s.timestamp);if(s&&o){o.claimed=!1,o.rejected=!0,await this.studyDatabase.setItem(r,i),i[n]={...s,timestamp:new Date().getTime(),rejected:!0},await this.studyDatabase.setItem(r,i);return}s&&(s.rejected=!0,await this.studyDatabase.setItem(r,i))}async _claimSequenceAssignment(n,r){await this.verifyStudyDatabase();const i=`${this.collectionPrefix}${this.studyId}/sequenceAssignment`,s=await this.studyDatabase.getItem(i)||{};if(s[n])s[n]={...r,claimed:!0},await this.studyDatabase.setItem(i,s);else throw new Error(`Sequence assignment for participant ${n} not found`)}async initializeStudyDb(n){this.studyId=n}async connect(){this.connected=!0}async getModes(n){const r=`${this.collectionPrefix}${n}/modes`,i=await this.studyDatabase.getItem(r);if(i)return i;const s={dataCollectionEnabled:!0,studyNavigatorEnabled:!0,analyticsInterfacePubliclyAccessible:!0};return this.studyDatabase.setItem(r,s),s}async setMode(n,r,i){const s=`${this.collectionPrefix}${n}/modes`,o=await this.studyDatabase.getItem(s);if(!o)throw new Error("Modes not initialized");o[r]=i,this.studyDatabase.setItem(s,o)}async _getAudioUrl(n,r){if(await this.verifyStudyDatabase(),this.studyId===void 0)throw new Error("Study ID is not set");const i=await this._getFromStorage(`audio/${r||this.currentParticipantId}`,n);if(!i)throw new Error(`Audio for task ${n} and participant ${r||this.currentParticipantId} not found`);return URL.createObjectURL(i)}async _testingReset(n){if(!n)throw new Error("Study ID is required for reset");const i=(await this.studyDatabase.keys()).filter(s=>s.startsWith(`${this.collectionPrefix}${n}/`));await Promise.all(i.map(s=>this.studyDatabase.removeItem(s))),await super.__testingReset()}async getSnapshots(n){const r=`${this.collectionPrefix}${n}/snapshots`;return await this.studyDatabase.getItem(r)||{}}async _directoryExists(n){return(await this.studyDatabase.keys()).some(i=>i.startsWith(n))}async _copyDirectory(n,r){const o=(await this.studyDatabase.keys()).filter(a=>a.startsWith(n)).map(async a=>{if(a.endsWith("/snapshots")||a.endsWith("modes")||a.endsWith("configHash")||a.endsWith("currentParticipantId"))return;const l=await this.studyDatabase.getItem(a),u=a.replace(n,r);await this.studyDatabase.setItem(u,l)});await Promise.all(o)}async _deleteDirectory(n){const s=(await this.studyDatabase.keys()).filter(o=>o.startsWith(n)&&!o.includes("snapshots")).map(o=>this.studyDatabase.removeItem(o));await Promise.all(s)}async _copyRealtimeData(n,r){await this._copyDirectory(n,r)}async _deleteRealtimeData(n){await this._deleteDirectory(n)}async _addDirectoryNameToSnapshots(n,r){await this.verifyStudyDatabase();const i=`${this.collectionPrefix}${r}/snapshots`,s=await this.studyDatabase.getItem(i)||{};s[n]||(s[n]={name:n},await this.studyDatabase.setItem(i,s))}async _removeDirectoryNameFromSnapshots(n,r){await this.verifyStudyDatabase();const i=`${this.collectionPrefix}${r}/snapshots`,s=await this.studyDatabase.getItem(i)||{};s[n]&&(delete s[n],await this.studyDatabase.setItem(i,s))}async _changeDirectoryNameInSnapshots(n,r,i){await this.verifyStudyDatabase();const s=`${this.collectionPrefix}${i}/snapshots`,o=await this.studyDatabase.getItem(s)||{};if(o[n])o[n]={name:r},await this.studyDatabase.setItem(s,o);else throw new Error(`Snapshot with name ${n} does not exist`)}}var u9,rhe;function Q6(){if(rhe)return u9;rhe=1;var e=BEe;function t(o,a){var l,u="",c=0,d=!0,f=0,h;function p(){return h=o.charAt(f),f++,h}for(p(),h==="-"&&(u="-",p());h>="0"&&h<="9";)d&&(h=="0"?c++:d=!1),u+=h,p();if(d&&c--,h===".")for(u+=".";p()&&h>="0"&&h<="9";)u+=h;if(h==="e"||h==="E")for(u+=h,p(),(h==="-"||h==="+")&&(u+=h,p());h>="0"&&h<="9";)u+=h,p();for(;h&&h<=" ";)p();if(a&&(h===","||h==="}"||h==="]"||h==="#"||h==="/"&&(o[f]==="/"||o[f]==="*"))&&(h=0),l=+u,!(h||c||!isFinite(l)))return l}function n(o,a){return Object.defineProperty&&Object.defineProperty(o,"__COMMENTS__",{enumerable:!1,writable:!0}),o.__COMMENTS__=a||{}}function r(o){Object.defineProperty(o,"__COMMENTS__",{value:void 0})}function i(o){return o.__COMMENTS__}function s(o){if(!o)return"";var a=o.split(`
`),l,u,c,d;for(c=0;c<a.length;c++)for(l=a[c],d=l.length,u=0;u<d;u++){var f=l[u];if(f==="#")break;if(f==="/"&&(l[u+1]==="/"||l[u+1]==="*")){l[u+1]==="*"&&(c=a.length);break}else if(f>" "){a[c]="# "+l;break}}return a.join(`
`)}return u9={EOL:e.EOL||`
`,tryParseNumber:t,createComment:n,removeComment:r,getComment:i,forceComment:s},u9}var c9,ihe;function NBt(){return ihe||(ihe=1,c9="3.2.1"),c9}var d9,she;function UQ(){if(she)return d9;she=1;function e(a,l){if(Object.prototype.toString.apply(a)!=="[object Array]"){if(a)throw new Error("dsf option must contain an array!");return n}else if(a.length===0)return n;var u=[];function c(d){return{}.toString.call(d)==="[object Function]"}return a.forEach(function(d){if(!d.name||!c(d.parse)||!c(d.stringify))throw new Error("extension does not match the DSF interface");u.push(function(){try{if(l=="parse")return d.parse.apply(null,arguments);if(l=="stringify"){var f=d.stringify.apply(null,arguments);if(f!==void 0&&(typeof f!="string"||f.length===0||f[0]==='"'||[].some.call(f,function(h){return r(h)})))throw new Error("value may not be empty, start with a quote or contain a punctuator character except colon: "+f);return f}else throw new Error("Invalid type")}catch(h){throw new Error("DSF-"+d.name+" failed; "+h.message)}})}),t.bind(null,u)}function t(a,l){if(a)for(var u=0;u<a.length;u++){var c=a[u](l);if(c!==void 0)return c}}function n(){}function r(a){return a==="{"||a==="}"||a==="["||a==="]"||a===","}function i(){return{name:"math",parse:function(a){switch(a){case"+inf":case"inf":case"+Inf":case"Inf":return 1/0;case"-inf":case"-Inf":return-1/0;case"nan":case"NaN":return NaN}},stringify:function(a){if(typeof a=="number"){if(1/a===-1/0)return"-0";if(a===1/0)return"Inf";if(a===-1/0)return"-Inf";if(isNaN(a))return"NaN"}}}}i.description="support for Inf/inf, -Inf/-inf, Nan/naN and -0";function s(a){var l=a&&a.out;return{name:"hex",parse:function(u){if(/^0x[0-9A-Fa-f]+$/.test(u))return parseInt(u,16)},stringify:function(u){if(l&&Number.isInteger(u))return"0x"+u.toString(16)}}}s.description="parse hexadecimal numbers prefixed with 0x";function o(){return{name:"date",parse:function(a){if(/^\d{4}-\d{2}-\d{2}$/.test(a)||/^\d{4}-\d{2}-\d{2}T\d{2}\:\d{2}\:\d{2}(?:.\d+)(?:Z|[+-]\d{2}:\d{2})$/.test(a)){var l=Date.parse(a);if(!isNaN(l))return new Date(l)}},stringify:function(a){if(Object.prototype.toString.call(a)==="[object Date]"){var l=a.toISOString();return l.indexOf("T00:00:00.000Z",l.length-14)!==-1?l.substr(0,10):l}}}}return o.description="support ISO dates",d9={loadDsf:e,std:{math:i,hex:s,date:o}},d9}var f9,ohe;function OBt(){return ohe||(ohe=1,f9=function(e,t){var n=Q6(),r=UQ(),i,s,o,a={'"':'"',"'":"'","\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},l,u;function c(){s=0,o=" "}function d(B){return B==="{"||B==="}"||B==="["||B==="]"||B===","||B===":"}function f(B){var H,Y=0,J=1;for(H=s-1;H>0&&i[H]!==`
`;H--,Y++);for(;H>0;H--)i[H]===`
`&&J++;throw new Error(B+" at line "+J+","+Y+" >>>"+i.substr(s-Y,20)+" ...")}function h(){return o=i.charAt(s),s++,o}function p(B){return i.charAt(s+B)}function m(B){for(var H="",Y=o;h();){if(o===Y)return h(),B&&Y==="'"&&o==="'"&&H.length===0?(h(),g()):H;if(o==="\\")if(h(),o==="u"){for(var J=0,K=0;K<4;K++){h();var Z=o.charCodeAt(0),U;o>="0"&&o<="9"?U=Z-48:o>="a"&&o<="f"?U=Z-97+10:o>="A"&&o<="F"?U=Z-65+10:f("Bad \\u char "+o),J=J*16+U}H+=String.fromCharCode(J)}else if(typeof a[o]=="string")H+=a[o];else break;else o===`
`||o==="\r"?f("Bad string containing newline"):H+=o}f("Bad string")}function g(){for(var B="",H=0,Y=0;;){var J=p(-Y-5);if(!J||J===`
`)break;Y++}function K(){for(var Z=Y;o&&o<=" "&&o!==`
`&&Z-- >0;)h()}for(;o&&o<=" "&&o!==`
`;)h();for(o===`
`&&(h(),K());;){if(!o)f("Bad multiline string");else if(o==="'"){if(H++,h(),H===3)return B.slice(-1)===`
`&&(B=B.slice(0,-1)),B;continue}else for(;H>0;)B+="'",H--;o===`
`?(B+=`
`,h(),K()):(o!=="\r"&&(B+=o),h())}}function b(){if(o==='"'||o==="'")return m(!1);for(var B="",H=s,Y=-1;;){if(o===":")return B?Y>=0&&Y!==B.length&&(s=H+Y,f("Found whitespace in your key name (use quotes to include)")):f("Found ':' but no key name (for an empty key name use quotes)"),B;o<=" "?o?Y<0&&(Y=B.length):f("Found EOF while looking for a key name (check your syntax)"):d(o)?f("Found '"+o+"' where a key name was expected (check your syntax or use quotes if the key name includes {}[],: or whitespace)"):B+=o,h()}}function v(){for(;o;){for(;o&&o<=" ";)h();if(o==="#"||o==="/"&&p(0)==="/")for(;o&&o!==`
`;)h();else if(o==="/"&&p(0)==="*"){for(h(),h();o&&!(o==="*"&&p(0)==="/");)h();o&&(h(),h())}else break}}function x(){var B=o;for(d(o)&&f("Found a punctuator character '"+o+"' when expecting a quoteless string (check your syntax)");;){h();var H=o==="\r"||o===`
`||o==="";if(H||o===","||o==="}"||o==="]"||o==="#"||o==="/"&&(p(0)==="/"||p(0)==="*")){var Y=B[0];switch(Y){case"f":if(B.trim()==="false")return!1;break;case"n":if(B.trim()==="null")return null;break;case"t":if(B.trim()==="true")return!0;break;default:if(Y==="-"||Y>="0"&&Y<="9"){var J=n.tryParseNumber(B);if(J!==void 0)return J}}if(H){B=B.trim();var K=u(B);return K!==void 0?K:B}}B+=o}}function E(B,H){var Y;for(B--,Y=s-2;Y>B&&i[Y]<=" "&&i[Y]!==`
`;Y--);i[Y]===`
`&&Y--,i[Y]==="\r"&&Y--;var J=i.substr(B,Y-B+1);for(Y=0;Y<J.length;Y++)if(J[Y]>" "){var K=J.indexOf(`
`);if(K>=0){var Z=[J.substr(0,K),J.substr(K+1)];return H&&Z[0].trim().length===0&&Z.shift(),Z}else return[J]}return[]}function _(B){function H(J,K){var Z,U,j,V;switch(typeof J){case"string":J.indexOf(K)>=0&&(V=J);break;case"object":if(Object.prototype.toString.apply(J)==="[object Array]")for(Z=0,j=J.length;Z<j;Z++)V=H(J[Z],K)||V;else for(U in J)Object.prototype.hasOwnProperty.call(J,U)&&(V=H(J[U],K)||V)}return V}function Y(J){var K=H(B,J);return K?"found '"+J+`' in a string value, your mistake could be with:
  > `+K+`
  (unquoted strings contain everything up to the next line!)`:""}return Y("}")||Y("]")}function C(){var B=[],H,Y,J;try{if(l&&(H=n.createComment(B,{a:[]})),h(),Y=s,v(),H&&(J=E(Y,!0).join(`
`)),o==="]")return h(),H&&(H.e=[J]),B;for(;o;){if(B.push(k()),Y=s,v(),o===","&&(h(),Y=s,v()),H){var K=E(Y);H.a.push([J||"",K[0]||""]),J=K[1]}if(o==="]")return h(),H&&(H.a[H.a.length-1][1]+=J||""),B;v()}f("End of input while parsing an array (missing ']')")}catch(Z){throw Z.hint=Z.hint||_(B),Z}}function S(B){var H="",Y={},J,K,Z;try{if(l&&(J=n.createComment(Y,{c:{},o:[]})),B?K=1:(h(),K=s),v(),J&&(Z=E(K,!0).join(`
`)),o==="}"&&!B)return J&&(J.e=[Z]),h(),Y;for(;o;){if(H=b(),v(),o!==":"&&f("Expected ':' instead of '"+o+"'"),h(),Y[H]=k(),K=s,v(),o===","&&(h(),K=s,v()),J){var U=E(K);J.c[H]=[Z||"",U[0]||""],Z=U[1],J.o.push(H)}if(o==="}"&&!B)return h(),J&&(J.c[H][1]+=Z||""),Y;v()}if(B)return Y;f("End of input while parsing an object (missing '}')")}catch(j){throw j.hint=j.hint||_(Y),j}}function k(){switch(v(),o){case"{":return S();case"[":return C();case"'":case'"':return m(!0);default:return x()}}function R(B,H){var Y=s;if(v(),o&&f("Syntax error, found trailing characters"),l){var J=H.join(`
`),K=E(Y).join(`
`);if(K||J){var Z=n.createComment(B,n.getComment(B));Z.r=[J,K]}}return B}function O(){v();var B=l?E(1):null;switch(o){case"{":return R(S(),B);case"[":return R(C(),B);default:return R(k(),B)}}function N(){v();var B=l?E(1):null;switch(o){case"{":return R(S(),B);case"[":return R(C(),B)}try{return R(S(!0),B)}catch(H){c();try{return R(k(),B)}catch{throw H}}}if(typeof e!="string")throw new Error("source is not a string");var L=null,$=!0;return t&&typeof t=="object"&&(l=t.keepWsc,L=t.dsf,$=t.legacyRoot!==!1),u=r.loadDsf(L,"parse"),i=e,c(),$?N():O()}),f9}var h9,ahe;function $Bt(){return ahe||(ahe=1,h9=function(e,t){var n=Q6(),r=UQ(),i={obj:["{","}"],arr:["[","]"],key:["",""],qkey:['"','"'],col:[":",""],com:[",",""],str:["",""],qstr:['"','"'],mstr:["'''","'''"],num:["",""],lit:["",""],dsf:["",""],esc:["\\",""],uni:["\\u",""],rem:["",""]},s=n.EOL,o="  ",a=!1,l=!1,u=!1,c=!1,d=0,f=1,h="",p=null,m=!1,g=i;if(t&&typeof t=="object"){t.quotes=t.quotes==="always"?"strings":t.quotes,(t.eol===`
`||t.eol===`\r
`)&&(s=t.eol),a=t.keepWsc,d=t.condense||0,l=t.bracesSameLine,u=t.quotes==="all"||t.quotes==="keys",c=t.quotes==="all"||t.quotes==="strings"||t.separator===!0,c||t.multiline=="off"?f=0:f=t.multiline=="no-tabs"?2:1,h=t.separator===!0?g.com[0]:"",p=t.dsf,m=t.sortProps,typeof t.space=="number"?o=new Array(t.space+1).join(" "):typeof t.space=="string"&&(o=t.space),t.colors===!0&&(g={obj:["\x1B[37m{\x1B[0m","\x1B[37m}\x1B[0m"],arr:["\x1B[37m[\x1B[0m","\x1B[37m]\x1B[0m"],key:["\x1B[33m","\x1B[0m"],qkey:['\x1B[33m"','"\x1B[0m'],col:["\x1B[37m:\x1B[0m",""],com:["\x1B[37m,\x1B[0m",""],str:["\x1B[37;1m","\x1B[0m"],qstr:['\x1B[37;1m"','"\x1B[0m'],mstr:["\x1B[37;1m'''","'''\x1B[0m"],num:["\x1B[36;1m","\x1B[0m"],lit:["\x1B[36m","\x1B[0m"],dsf:["\x1B[37m","\x1B[0m"],esc:["\x1B[31m\\","\x1B[0m"],uni:["\x1B[31m\\u","\x1B[0m"],rem:["\x1B[35m","\x1B[0m"]});var b,v=Object.keys(i);for(b=v.length-1;b>=0;b--){var x=v[b];g[x].push(i[x][0].length,i[x][1].length)}}var E,_="---\u2028--\uFEFF-",C=new RegExp('[\\\\\\"\0-'+_+"]","g"),S=new RegExp(`^\\s|^"|^'|^#|^\\/\\*|^\\/\\/|^\\{|^\\}|^\\[|^\\]|^:|^,|\\s$|[\0-`+_+"]","g"),k=new RegExp("'''|^[\\s]+$|[\0-"+(f===2?"	":"\b")+"\v\f-"+_+"]","g"),R=new RegExp("^(true|false|null)\\s*((,|\\]|\\}|#|//|/\\*).*)?$"),O={"\b":"b","	":"t","\n":"n","\f":"f","\r":"r",'"':'"',"\\":"\\"},N=/[,\{\[\}\]\s:#"']|\/\/|\/\*/,L="",$=0;function B(V,z){return $+=V[0].length+V[1].length-V[2]-V[3],V[0]+z+V[1]}function H(V){return V.replace(C,function(z){var G=O[z];return typeof G=="string"?B(g.esc,G):B(g.uni,("0000"+z.charCodeAt(0).toString(16)).slice(-4))})}function Y(V,z,G,Q){return V?(S.lastIndex=0,R.lastIndex=0,c||G||S.test(V)||n.tryParseNumber(V,!0)!==void 0||R.test(V)?(C.lastIndex=0,k.lastIndex=0,C.test(V)?!k.test(V)&&!Q&&f?J(V,z):B(g.qstr,H(V)):B(g.qstr,V)):B(g.str,V)):B(g.qstr,"")}function J(V,z){var G,Q=V.replace(/\r/g,"").split(`
`);if(z+=o,Q.length===1)return B(g.mstr,Q[0]);var ie=s+z+g.mstr[0];for(G=0;G<Q.length;G++)ie+=s,Q[G]&&(ie+=z+Q[G]);return ie+s+z+g.mstr[1]}function K(V){return V?u||N.test(V)?(C.lastIndex=0,B(g.qkey,C.test(V)?H(V):V)):B(g.key,V):'""'}function Z(V,z,G,Q){function ie(pn){return pn&&pn[pn[0]==="\r"?1:0]===`
`}function me(pn){return pn&&!ie(pn)}function ae(pn,En,Mr){if(!pn)return"";pn=n.forceComment(pn);var On,bs=pn.length;for(On=0;On<bs&&pn[On]<=" ";On++);return Mr&&On>0&&(pn=pn.substr(On)),On<bs?En+B(g.rem,pn):pn}var fe=E(V);if(fe!==void 0)return B(g.dsf,fe);switch(typeof V){case"string":return Y(V,L,z,Q);case"number":return isFinite(V)?B(g.num,String(V)):B(g.lit,"null");case"boolean":return B(g.lit,String(V));case"object":if(!V)return B(g.lit,"null");var be;a&&(be=n.getComment(V));var te=Object.prototype.toString.apply(V)==="[object Array]",re=L;L+=o;var we=s+re,Ee=s+L,Fe=G||l?"":we,We=[],Me,Be=d?[]:null,Je=c,lt=f,ht=h?"":g.com[0],vt=0,Pe,wt,Wt,Ce,Ne,ot,xt,Ct,Qt;if(te){for(Pe=0,wt=V.length;Pe<wt;Pe++){if(Me=Pe<wt-1,be?(ot=be.a[Pe]||[],xt=me(ot[1]),We.push(ae(ot[0],`
`)+Ee),Be&&(ot[0]||ot[1]||xt)&&(Be=null)):We.push(Ee),$=0,Ce=V[Pe],We.push(Z(Ce,be?xt:!1,!0)+(Me?h:"")),Be){switch(typeof Ce){case"string":$=0,c=!0,f=0,Be.push(Z(Ce,!1,!0)+(Me?g.com[0]:"")),c=Je,f=lt;break;case"object":if(Ce){Be=null;break}default:Be.push(We[We.length-1]+(Me?ht:""));break}Me&&($+=g.com[0].length-g.com[2]),vt+=$}be&&ot[1]&&We.push(ae(ot[1],xt?" ":`
`,xt))}wt===0?be&&be.e&&We.push(ae(be.e[0],`
`)+we):We.push(we),We.length===0?Ct=B(g.arr,""):(Ct=Fe+B(g.arr,We.join("")),Be&&(Qt=Be.join(" "),Qt.length-vt<=d&&(Ct=B(g.arr,Qt))))}else{var yn=be?be.o.slice():[],er=[];for(Wt in V)Object.prototype.hasOwnProperty.call(V,Wt)&&yn.indexOf(Wt)<0&&er.push(Wt);m&&er.sort();var Wr=yn.concat(er);for(Pe=0,wt=Wr.length;Pe<wt;Pe++)if(Me=Pe<wt-1,Wt=Wr[Pe],be?(ot=be.c[Wt]||[],xt=me(ot[1]),We.push(ae(ot[0],`
`)+Ee),Be&&(ot[0]||ot[1]||xt)&&(Be=null)):We.push(Ee),$=0,Ce=V[Wt],Ne=Z(Ce,be&&xt),We.push(K(Wt)+g.col[0]+(ie(Ne)?"":" ")+Ne+(Me?h:"")),be&&ot[1]&&We.push(ae(ot[1],xt?" ":`
`,xt)),Be){switch(typeof Ce){case"string":$=0,c=!0,f=0,Ne=Z(Ce,!1),c=Je,f=lt,Be.push(K(Wt)+g.col[0]+" "+Ne+(Me?g.com[0]:""));break;case"object":if(Ce){Be=null;break}default:Be.push(We[We.length-1]+(Me?ht:""));break}$+=g.col[0].length-g.col[2],Me&&($+=g.com[0].length-g.com[2]),vt+=$}wt===0?be&&be.e&&We.push(ae(be.e[0],`
`)+we):We.push(we),We.length===0?Ct=B(g.obj,""):(Ct=Fe+B(g.obj,We.join("")),Be&&(Qt=Be.join(" "),Qt.length-vt<=d&&(Ct=B(g.obj,Qt))))}return L=re,Ct}}E=r.loadDsf(p,"stringify");var U="",j=a?j=(n.getComment(e)||{}).r:null;return j&&j[0]&&(U=j[0]+`
`),U+=Z(e,null,!0,!0),j&&(U+=j[1]||""),U}),h9}var p9,lhe;function MBt(){if(lhe)return p9;lhe=1;var e=Q6();function t(c,d,f){var h;return c&&(h={b:c}),d&&((h=h||{}).a=d),f&&((h=h||{}).x=f),h}function n(c,d){if(!(c===null||typeof c!="object")){var f=e.getComment(c);f&&e.removeComment(c);var h,p,m,g;if(Object.prototype.toString.apply(c)==="[object Array]"){for(g={a:{}},h=0,p=c.length;h<p;h++)s(g.a,h,f.a[h],n(c[h]))&&(m=!0);!m&&f.e&&(g.e=t(f.e[0],f.e[1]),m=!0)}else{g={s:{}};var b,v=Object.keys(c);for(f&&f.o?(b=[],f.o.concat(v).forEach(function(E){Object.prototype.hasOwnProperty.call(c,E)&&b.indexOf(E)<0&&b.push(E)})):b=v,g.o=b,h=0,p=b.length;h<p;h++){var x=b[h];s(g.s,x,f.c[x],n(c[x]))&&(m=!0)}!m&&f.e&&(g.e=t(f.e[0],f.e[1]),m=!0)}return d&&f&&f.r&&(g.r=t(f.r[0],f.r[1])),m?g:void 0}}function r(){var c="";return[].forEach.call(arguments,function(d){d&&d.trim()!==""&&(c&&(c+="; "),c+=d.trim())}),c}function i(c,d){var f=[];if(l(c,d,f,[]),f.length>0){var h=u(d,null,1);h+=`
# Orphaned comments:
`,f.forEach(function(p){h+=("# "+p.path.join("/")+": "+r(p.b,p.a,p.e)).replace(`
`,"\\n ")+`
`}),u(d,h,1)}}function s(c,d,f,h){var p=t(f?f[0]:void 0,f?f[1]:void 0,h);return p&&(c[d]=p),p}function o(c,d){var f=t(d.b,d.a);return f.path=c,f}function a(c,d,f){if(c){var h,p;if(c.a)for(h=0,p=c.a.length;h<p;h++){var m=f.slice().concat([h]),g=c.a[h];g&&(d.push(o(m,g)),a(g.x,d,m))}else c.o&&c.o.forEach(function(b){var v=f.slice().concat([b]),x=c.s[b];x&&(d.push(o(v,x)),a(x.x,d,v))});c.e&&d.push(o(f,c.e))}}function l(c,d,f,h){if(c){if(d===null||typeof d!="object"){a(c,f,h);return}var p,m=e.createComment(d);if(h.length===0&&c.r&&(m.r=[c.r.b,c.r.a]),Object.prototype.toString.apply(d)==="[object Array]"){m.a=[];var g=c.a||{};for(var b in g)if(g.hasOwnProperty(b)){p=parseInt(b);var v=c.a[b];if(v){var x=h.slice().concat([p]);p<d.length?(m.a[p]=[v.b,v.a],l(v.x,d[p],f,x)):(f.push(o(x,v)),a(v.x,f,x))}}p===0&&c.e&&(m.e=[c.e.b,c.e.a])}else m.c={},m.o=[],(c.o||[]).forEach(function(E){var _=h.slice().concat([E]),C=c.s[E];Object.prototype.hasOwnProperty.call(d,E)?(m.o.push(E),C&&(m.c[E]=[C.b,C.a],l(C.x,d[E],f,_))):C&&(f.push(o(_,C)),a(C.x,f,_))}),c.e&&(m.e=[c.e.b,c.e.a])}}function u(c,d,f){var h=e.createComment(c,e.getComment(c));return h.r||(h.r=["",""]),(d||d==="")&&(h.r[f]=e.forceComment(d)),h.r[f]||""}return p9={extract:function(c){return n(c,!0)},merge:i,header:function(c,d){return u(c,d,0)},footer:function(c,d){return u(c,d,1)}},p9}/*!
 * Hjson v3.2.1
 * https://hjson.github.io
 *
 * Copyright 2014-2017 Christian Zangl, MIT license
 * Details and documentation:
 * https://github.com/hjson/hjson-js
 *
 * This code is based on the the JSON version by Douglas Crockford:
 * https://github.com/douglascrockford/JSON-js (json_parse.js, json2.js)
 */var m9,uhe;function LBt(){if(uhe)return m9;uhe=1;var e=Q6(),t=NBt(),n=OBt(),r=$Bt(),i=MBt(),s=UQ();return m9={parse:n,stringify:r,endOfLine:function(){return e.EOL},setEndOfLine:function(o){(o===`
`||o===`\r
`)&&(e.EOL=o)},version:t,rt:{parse:function(o,a){return(a=a||{}).keepWsc=!0,n(o,a)},stringify:function(o,a){return(a=a||{}).keepWsc=!0,r(o,a)}},comments:i,dsf:s.std},m9}LBt();var FBt="firebase",jBt="11.2.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Wc(FBt,jBt,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qDe="firebasestorage.googleapis.com",BBt="storageBucket",zBt=2*60*1e3,UBt=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ug=class HDe extends Uf{constructor(t,n,r=0){super(g9(t),`Firebase Storage: ${n} (${g9(t)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,HDe.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return g9(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}};var Lf;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Lf||(Lf={}));function g9(e){return"storage/"+e}function qBt(){const e="An unknown error occurred, please check the error payload for server response.";return new ug(Lf.UNKNOWN,e)}function HBt(){return new ug(Lf.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function WBt(){return new ug(Lf.CANCELED,"User canceled the upload/download.")}function VBt(e){return new ug(Lf.INVALID_URL,"Invalid URL '"+e+"'.")}function GBt(e){return new ug(Lf.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function che(e){return new ug(Lf.INVALID_ARGUMENT,e)}function WDe(){return new ug(Lf.APP_DELETED,"The Firebase app was deleted.")}function YBt(e){return new ug(Lf.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc{constructor(t,n){this.bucket=t,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,n){let r;try{r=zc.makeFromUrl(t,n)}catch{return new zc(t,"")}if(r.path==="")return r;throw GBt(t)}static makeFromUrl(t,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(E){E.path.charAt(E.path.length-1)==="/"&&(E.path_=E.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function u(E){E.path_=decodeURIComponent(E.path)}const c="v[A-Za-z0-9_]+",d=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",h=new RegExp(`^https?://${d}/${c}/b/${i}/o${f}`,"i"),p={bucket:1,path:3},m=n===qDe?"(?:storage.googleapis.com|storage.cloud.google.com)":n,g="([^?#]*)",b=new RegExp(`^https?://${m}/${i}/${g}`,"i"),x=[{regex:a,indices:l,postModify:s},{regex:h,indices:p,postModify:u},{regex:b,indices:{bucket:1,path:2},postModify:u}];for(let E=0;E<x.length;E++){const _=x[E],C=_.regex.exec(t);if(C){const S=C[_.indices.bucket];let k=C[_.indices.path];k||(k=""),r=new zc(S,k),_.postModify(r);break}}if(r==null)throw VBt(t);return r}}class KBt{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XBt(e,t,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return a===2}let u=!1;function c(...g){u||(u=!0,t.apply(null,g))}function d(g){i=setTimeout(()=>{i=null,e(h,l())},g)}function f(){s&&clearTimeout(s)}function h(g,...b){if(u){f();return}if(g){f(),c.call(null,g,...b);return}if(l()||o){f(),c.call(null,g,...b);return}r<64&&(r*=2);let x;a===1?(a=2,x=0):x=(r+Math.random())*1e3,d(x)}let p=!1;function m(g){p||(p=!0,f(),!u&&(i!==null?(g||(a=2),clearTimeout(i),d(0)):g||(a=1)))}return d(0),s=setTimeout(()=>{o=!0,m(!0)},n),m}function QBt(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JBt(e){return e!==void 0}function dhe(e,t,n,r){if(r<t)throw che(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw che(`Invalid value for '${e}'. Expected ${n} or less.`)}function ZBt(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){const i=t(r)+"="+t(e[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var MN;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(MN||(MN={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e7t(e,t){const n=e>=500&&e<600,i=[408,429].indexOf(e)!==-1,s=t.indexOf(e)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t7t{constructor(t,n,r,i,s,o,a,l,u,c,d,f=!0){this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=c,this.connectionFactory_=d,this.retry=f,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((h,p)=>{this.resolve_=h,this.reject_=p,this.start_()})}start_(){const t=(r,i)=>{if(i){r(!1,new vR(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===MN.NO_ERROR,l=s.getStatus();if(!a||e7t(l,this.additionalRetryCodes_)&&this.retry){const c=s.getErrorCode()===MN.ABORT;r(!1,new vR(!1,null,c));return}const u=this.successCodes_.indexOf(l)!==-1;r(!0,new vR(u,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());JBt(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=qBt();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){const l=this.appDelete_?WDe():WBt();o(l)}else{const l=HBt();o(l)}};this.canceled_?n(!1,new vR(!1,null,!0)):this.backoffId_=XBt(t,n,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&QBt(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class vR{constructor(t,n,r){this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}}function n7t(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function r7t(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function i7t(e,t){t&&(e["X-Firebase-GMPID"]=t)}function s7t(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function o7t(e,t,n,r,i,s,o=!0){const a=ZBt(e.urlParams),l=e.url+a,u=Object.assign({},e.headers);return i7t(u,t),n7t(u,n),r7t(u,s),s7t(u,r),new t7t(l,e.method,u,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a7t(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function l7t(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LN{constructor(t,n){this._service=t,n instanceof zc?this._location=n:this._location=zc.makeFromUrl(n,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,n){return new LN(t,n)}get root(){const t=new zc(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return l7t(this._location.path)}get storage(){return this._service}get parent(){const t=a7t(this._location.path);if(t===null)return null;const n=new zc(this._location.bucket,t);return new LN(this._service,n)}_throwIfRoot(t){if(this._location.path==="")throw YBt(t)}}function fhe(e,t){const n=t==null?void 0:t[BBt];return n==null?null:zc.makeFromBucketSpec(n,e)}class u7t{constructor(t,n,r,i,s){this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=qDe,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=zBt,this._maxUploadRetryTime=UBt,this._requests=new Set,i!=null?this._bucket=zc.makeFromBucketSpec(i,this._host):this._bucket=fhe(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=zc.makeFromBucketSpec(this._url,t):this._bucket=fhe(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){dhe("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){dhe("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const n=await t.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new LN(this,t)}_makeRequest(t,n,r,i,s=!0){if(this._deleted)return new KBt(WDe());{const o=o7t(t,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(t,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,n,r,i).getPromise()}}const hhe="@firebase/storage",phe="0.13.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c7t="storage";function d7t(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return new u7t(n,r,i,t,Mv)}function f7t(){vp(new Tf(c7t,d7t,"PUBLIC").setMultipleInstances(!0)),Wc(hhe,phe,""),Wc(hhe,phe,"esm2017")}f7t();var mhe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var VDe;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(S,k){function R(){}R.prototype=k.prototype,S.D=k.prototype,S.prototype=new R,S.prototype.constructor=S,S.C=function(O,N,L){for(var $=Array(arguments.length-2),B=2;B<arguments.length;B++)$[B-2]=arguments[B];return k.prototype[N].apply(O,$)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(S,k,R){R||(R=0);var O=Array(16);if(typeof k=="string")for(var N=0;16>N;++N)O[N]=k.charCodeAt(R++)|k.charCodeAt(R++)<<8|k.charCodeAt(R++)<<16|k.charCodeAt(R++)<<24;else for(N=0;16>N;++N)O[N]=k[R++]|k[R++]<<8|k[R++]<<16|k[R++]<<24;k=S.g[0],R=S.g[1],N=S.g[2];var L=S.g[3],$=k+(L^R&(N^L))+O[0]+3614090360&4294967295;k=R+($<<7&4294967295|$>>>25),$=L+(N^k&(R^N))+O[1]+3905402710&4294967295,L=k+($<<12&4294967295|$>>>20),$=N+(R^L&(k^R))+O[2]+606105819&4294967295,N=L+($<<17&4294967295|$>>>15),$=R+(k^N&(L^k))+O[3]+3250441966&4294967295,R=N+($<<22&4294967295|$>>>10),$=k+(L^R&(N^L))+O[4]+4118548399&4294967295,k=R+($<<7&4294967295|$>>>25),$=L+(N^k&(R^N))+O[5]+1200080426&4294967295,L=k+($<<12&4294967295|$>>>20),$=N+(R^L&(k^R))+O[6]+2821735955&4294967295,N=L+($<<17&4294967295|$>>>15),$=R+(k^N&(L^k))+O[7]+4249261313&4294967295,R=N+($<<22&4294967295|$>>>10),$=k+(L^R&(N^L))+O[8]+1770035416&4294967295,k=R+($<<7&4294967295|$>>>25),$=L+(N^k&(R^N))+O[9]+2336552879&4294967295,L=k+($<<12&4294967295|$>>>20),$=N+(R^L&(k^R))+O[10]+4294925233&4294967295,N=L+($<<17&4294967295|$>>>15),$=R+(k^N&(L^k))+O[11]+2304563134&4294967295,R=N+($<<22&4294967295|$>>>10),$=k+(L^R&(N^L))+O[12]+1804603682&4294967295,k=R+($<<7&4294967295|$>>>25),$=L+(N^k&(R^N))+O[13]+4254626195&4294967295,L=k+($<<12&4294967295|$>>>20),$=N+(R^L&(k^R))+O[14]+2792965006&4294967295,N=L+($<<17&4294967295|$>>>15),$=R+(k^N&(L^k))+O[15]+1236535329&4294967295,R=N+($<<22&4294967295|$>>>10),$=k+(N^L&(R^N))+O[1]+4129170786&4294967295,k=R+($<<5&4294967295|$>>>27),$=L+(R^N&(k^R))+O[6]+3225465664&4294967295,L=k+($<<9&4294967295|$>>>23),$=N+(k^R&(L^k))+O[11]+643717713&4294967295,N=L+($<<14&4294967295|$>>>18),$=R+(L^k&(N^L))+O[0]+3921069994&4294967295,R=N+($<<20&4294967295|$>>>12),$=k+(N^L&(R^N))+O[5]+3593408605&4294967295,k=R+($<<5&4294967295|$>>>27),$=L+(R^N&(k^R))+O[10]+38016083&4294967295,L=k+($<<9&4294967295|$>>>23),$=N+(k^R&(L^k))+O[15]+3634488961&4294967295,N=L+($<<14&4294967295|$>>>18),$=R+(L^k&(N^L))+O[4]+3889429448&4294967295,R=N+($<<20&4294967295|$>>>12),$=k+(N^L&(R^N))+O[9]+568446438&4294967295,k=R+($<<5&4294967295|$>>>27),$=L+(R^N&(k^R))+O[14]+3275163606&4294967295,L=k+($<<9&4294967295|$>>>23),$=N+(k^R&(L^k))+O[3]+4107603335&4294967295,N=L+($<<14&4294967295|$>>>18),$=R+(L^k&(N^L))+O[8]+1163531501&4294967295,R=N+($<<20&4294967295|$>>>12),$=k+(N^L&(R^N))+O[13]+2850285829&4294967295,k=R+($<<5&4294967295|$>>>27),$=L+(R^N&(k^R))+O[2]+4243563512&4294967295,L=k+($<<9&4294967295|$>>>23),$=N+(k^R&(L^k))+O[7]+1735328473&4294967295,N=L+($<<14&4294967295|$>>>18),$=R+(L^k&(N^L))+O[12]+2368359562&4294967295,R=N+($<<20&4294967295|$>>>12),$=k+(R^N^L)+O[5]+4294588738&4294967295,k=R+($<<4&4294967295|$>>>28),$=L+(k^R^N)+O[8]+2272392833&4294967295,L=k+($<<11&4294967295|$>>>21),$=N+(L^k^R)+O[11]+1839030562&4294967295,N=L+($<<16&4294967295|$>>>16),$=R+(N^L^k)+O[14]+4259657740&4294967295,R=N+($<<23&4294967295|$>>>9),$=k+(R^N^L)+O[1]+2763975236&4294967295,k=R+($<<4&4294967295|$>>>28),$=L+(k^R^N)+O[4]+1272893353&4294967295,L=k+($<<11&4294967295|$>>>21),$=N+(L^k^R)+O[7]+4139469664&4294967295,N=L+($<<16&4294967295|$>>>16),$=R+(N^L^k)+O[10]+3200236656&4294967295,R=N+($<<23&4294967295|$>>>9),$=k+(R^N^L)+O[13]+681279174&4294967295,k=R+($<<4&4294967295|$>>>28),$=L+(k^R^N)+O[0]+3936430074&4294967295,L=k+($<<11&4294967295|$>>>21),$=N+(L^k^R)+O[3]+3572445317&4294967295,N=L+($<<16&4294967295|$>>>16),$=R+(N^L^k)+O[6]+76029189&4294967295,R=N+($<<23&4294967295|$>>>9),$=k+(R^N^L)+O[9]+3654602809&4294967295,k=R+($<<4&4294967295|$>>>28),$=L+(k^R^N)+O[12]+3873151461&4294967295,L=k+($<<11&4294967295|$>>>21),$=N+(L^k^R)+O[15]+530742520&4294967295,N=L+($<<16&4294967295|$>>>16),$=R+(N^L^k)+O[2]+3299628645&4294967295,R=N+($<<23&4294967295|$>>>9),$=k+(N^(R|~L))+O[0]+4096336452&4294967295,k=R+($<<6&4294967295|$>>>26),$=L+(R^(k|~N))+O[7]+1126891415&4294967295,L=k+($<<10&4294967295|$>>>22),$=N+(k^(L|~R))+O[14]+2878612391&4294967295,N=L+($<<15&4294967295|$>>>17),$=R+(L^(N|~k))+O[5]+4237533241&4294967295,R=N+($<<21&4294967295|$>>>11),$=k+(N^(R|~L))+O[12]+1700485571&4294967295,k=R+($<<6&4294967295|$>>>26),$=L+(R^(k|~N))+O[3]+2399980690&4294967295,L=k+($<<10&4294967295|$>>>22),$=N+(k^(L|~R))+O[10]+4293915773&4294967295,N=L+($<<15&4294967295|$>>>17),$=R+(L^(N|~k))+O[1]+2240044497&4294967295,R=N+($<<21&4294967295|$>>>11),$=k+(N^(R|~L))+O[8]+1873313359&4294967295,k=R+($<<6&4294967295|$>>>26),$=L+(R^(k|~N))+O[15]+4264355552&4294967295,L=k+($<<10&4294967295|$>>>22),$=N+(k^(L|~R))+O[6]+2734768916&4294967295,N=L+($<<15&4294967295|$>>>17),$=R+(L^(N|~k))+O[13]+1309151649&4294967295,R=N+($<<21&4294967295|$>>>11),$=k+(N^(R|~L))+O[4]+4149444226&4294967295,k=R+($<<6&4294967295|$>>>26),$=L+(R^(k|~N))+O[11]+3174756917&4294967295,L=k+($<<10&4294967295|$>>>22),$=N+(k^(L|~R))+O[2]+718787259&4294967295,N=L+($<<15&4294967295|$>>>17),$=R+(L^(N|~k))+O[9]+3951481745&4294967295,S.g[0]=S.g[0]+k&4294967295,S.g[1]=S.g[1]+(N+($<<21&4294967295|$>>>11))&4294967295,S.g[2]=S.g[2]+N&4294967295,S.g[3]=S.g[3]+L&4294967295}r.prototype.u=function(S,k){k===void 0&&(k=S.length);for(var R=k-this.blockSize,O=this.B,N=this.h,L=0;L<k;){if(N==0)for(;L<=R;)i(this,S,L),L+=this.blockSize;if(typeof S=="string"){for(;L<k;)if(O[N++]=S.charCodeAt(L++),N==this.blockSize){i(this,O),N=0;break}}else for(;L<k;)if(O[N++]=S[L++],N==this.blockSize){i(this,O),N=0;break}}this.h=N,this.o+=k},r.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var k=1;k<S.length-8;++k)S[k]=0;var R=8*this.o;for(k=S.length-8;k<S.length;++k)S[k]=R&255,R/=256;for(this.u(S),S=Array(16),k=R=0;4>k;++k)for(var O=0;32>O;O+=8)S[R++]=this.g[k]>>>O&255;return S};function s(S,k){var R=a;return Object.prototype.hasOwnProperty.call(R,S)?R[S]:R[S]=k(S)}function o(S,k){this.h=k;for(var R=[],O=!0,N=S.length-1;0<=N;N--){var L=S[N]|0;O&&L==k||(R[N]=L,O=!1)}this.g=R}var a={};function l(S){return-128<=S&&128>S?s(S,function(k){return new o([k|0],0>k?-1:0)}):new o([S|0],0>S?-1:0)}function u(S){if(isNaN(S)||!isFinite(S))return d;if(0>S)return g(u(-S));for(var k=[],R=1,O=0;S>=R;O++)k[O]=S/R|0,R*=4294967296;return new o(k,0)}function c(S,k){if(S.length==0)throw Error("number format error: empty string");if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(S.charAt(0)=="-")return g(c(S.substring(1),k));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=u(Math.pow(k,8)),O=d,N=0;N<S.length;N+=8){var L=Math.min(8,S.length-N),$=parseInt(S.substring(N,N+L),k);8>L?(L=u(Math.pow(k,L)),O=O.j(L).add(u($))):(O=O.j(R),O=O.add(u($)))}return O}var d=l(0),f=l(1),h=l(16777216);e=o.prototype,e.m=function(){if(m(this))return-g(this).m();for(var S=0,k=1,R=0;R<this.g.length;R++){var O=this.i(R);S+=(0<=O?O:4294967296+O)*k,k*=4294967296}return S},e.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(p(this))return"0";if(m(this))return"-"+g(this).toString(S);for(var k=u(Math.pow(S,6)),R=this,O="";;){var N=E(R,k).g;R=b(R,N.j(k));var L=((0<R.g.length?R.g[0]:R.h)>>>0).toString(S);if(R=N,p(R))return L+O;for(;6>L.length;)L="0"+L;O=L+O}},e.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function p(S){if(S.h!=0)return!1;for(var k=0;k<S.g.length;k++)if(S.g[k]!=0)return!1;return!0}function m(S){return S.h==-1}e.l=function(S){return S=b(this,S),m(S)?-1:p(S)?0:1};function g(S){for(var k=S.g.length,R=[],O=0;O<k;O++)R[O]=~S.g[O];return new o(R,~S.h).add(f)}e.abs=function(){return m(this)?g(this):this},e.add=function(S){for(var k=Math.max(this.g.length,S.g.length),R=[],O=0,N=0;N<=k;N++){var L=O+(this.i(N)&65535)+(S.i(N)&65535),$=(L>>>16)+(this.i(N)>>>16)+(S.i(N)>>>16);O=$>>>16,L&=65535,$&=65535,R[N]=$<<16|L}return new o(R,R[R.length-1]&-2147483648?-1:0)};function b(S,k){return S.add(g(k))}e.j=function(S){if(p(this)||p(S))return d;if(m(this))return m(S)?g(this).j(g(S)):g(g(this).j(S));if(m(S))return g(this.j(g(S)));if(0>this.l(h)&&0>S.l(h))return u(this.m()*S.m());for(var k=this.g.length+S.g.length,R=[],O=0;O<2*k;O++)R[O]=0;for(O=0;O<this.g.length;O++)for(var N=0;N<S.g.length;N++){var L=this.i(O)>>>16,$=this.i(O)&65535,B=S.i(N)>>>16,H=S.i(N)&65535;R[2*O+2*N]+=$*H,v(R,2*O+2*N),R[2*O+2*N+1]+=L*H,v(R,2*O+2*N+1),R[2*O+2*N+1]+=$*B,v(R,2*O+2*N+1),R[2*O+2*N+2]+=L*B,v(R,2*O+2*N+2)}for(O=0;O<k;O++)R[O]=R[2*O+1]<<16|R[2*O];for(O=k;O<2*k;O++)R[O]=0;return new o(R,0)};function v(S,k){for(;(S[k]&65535)!=S[k];)S[k+1]+=S[k]>>>16,S[k]&=65535,k++}function x(S,k){this.g=S,this.h=k}function E(S,k){if(p(k))throw Error("division by zero");if(p(S))return new x(d,d);if(m(S))return k=E(g(S),k),new x(g(k.g),g(k.h));if(m(k))return k=E(S,g(k)),new x(g(k.g),k.h);if(30<S.g.length){if(m(S)||m(k))throw Error("slowDivide_ only works with positive integers.");for(var R=f,O=k;0>=O.l(S);)R=_(R),O=_(O);var N=C(R,1),L=C(O,1);for(O=C(O,2),R=C(R,2);!p(O);){var $=L.add(O);0>=$.l(S)&&(N=N.add(R),L=$),O=C(O,1),R=C(R,1)}return k=b(S,N.j(k)),new x(N,k)}for(N=d;0<=S.l(k);){for(R=Math.max(1,Math.floor(S.m()/k.m())),O=Math.ceil(Math.log(R)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),L=u(R),$=L.j(k);m($)||0<$.l(S);)R-=O,L=u(R),$=L.j(k);p(L)&&(L=f),N=N.add(L),S=b(S,$)}return new x(N,S)}e.A=function(S){return E(this,S).h},e.and=function(S){for(var k=Math.max(this.g.length,S.g.length),R=[],O=0;O<k;O++)R[O]=this.i(O)&S.i(O);return new o(R,this.h&S.h)},e.or=function(S){for(var k=Math.max(this.g.length,S.g.length),R=[],O=0;O<k;O++)R[O]=this.i(O)|S.i(O);return new o(R,this.h|S.h)},e.xor=function(S){for(var k=Math.max(this.g.length,S.g.length),R=[],O=0;O<k;O++)R[O]=this.i(O)^S.i(O);return new o(R,this.h^S.h)};function _(S){for(var k=S.g.length+1,R=[],O=0;O<k;O++)R[O]=S.i(O)<<1|S.i(O-1)>>>31;return new o(R,S.h)}function C(S,k){var R=k>>5;k%=32;for(var O=S.g.length-R,N=[],L=0;L<O;L++)N[L]=0<k?S.i(L+R)>>>k|S.i(L+R+1)<<32-k:S.i(L+R);return new o(N,S.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=c,VDe=o}).apply(typeof mhe<"u"?mhe:typeof self<"u"?self:typeof window<"u"?window:{});var bR=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(I,q,X){return I==Array.prototype||I==Object.prototype||(I[q]=X.value),I};function n(I){I=[typeof globalThis=="object"&&globalThis,I,typeof window=="object"&&window,typeof self=="object"&&self,typeof bR=="object"&&bR];for(var q=0;q<I.length;++q){var X=I[q];if(X&&X.Math==Math)return X}throw Error("Cannot find global object")}var r=n(this);function i(I,q){if(q)e:{var X=r;I=I.split(".");for(var oe=0;oe<I.length-1;oe++){var ke=I[oe];if(!(ke in X))break e;X=X[ke]}I=I[I.length-1],oe=X[I],q=q(oe),q!=oe&&q!=null&&t(X,I,{configurable:!0,writable:!0,value:q})}}function s(I,q){I instanceof String&&(I+="");var X=0,oe=!1,ke={next:function(){if(!oe&&X<I.length){var Ue=X++;return{value:q(Ue,I[Ue]),done:!1}}return oe=!0,{done:!0,value:void 0}}};return ke[Symbol.iterator]=function(){return ke},ke}i("Array.prototype.values",function(I){return I||function(){return s(this,function(q,X){return X})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(I){var q=typeof I;return q=q!="object"?q:I?Array.isArray(I)?"array":q:"null",q=="array"||q=="object"&&typeof I.length=="number"}function u(I){var q=typeof I;return q=="object"&&I!=null||q=="function"}function c(I,q,X){return I.call.apply(I.bind,arguments)}function d(I,q,X){if(!I)throw Error();if(2<arguments.length){var oe=Array.prototype.slice.call(arguments,2);return function(){var ke=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ke,oe),I.apply(q,ke)}}return function(){return I.apply(q,arguments)}}function f(I,q,X){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?c:d,f.apply(null,arguments)}function h(I,q){var X=Array.prototype.slice.call(arguments,1);return function(){var oe=X.slice();return oe.push.apply(oe,arguments),I.apply(this,oe)}}function p(I,q){function X(){}X.prototype=q.prototype,I.aa=q.prototype,I.prototype=new X,I.prototype.constructor=I,I.Qb=function(oe,ke,Ue){for(var Et=Array(arguments.length-2),yr=2;yr<arguments.length;yr++)Et[yr-2]=arguments[yr];return q.prototype[ke].apply(oe,Et)}}function m(I){const q=I.length;if(0<q){const X=Array(q);for(let oe=0;oe<q;oe++)X[oe]=I[oe];return X}return[]}function g(I,q){for(let X=1;X<arguments.length;X++){const oe=arguments[X];if(l(oe)){const ke=I.length||0,Ue=oe.length||0;I.length=ke+Ue;for(let Et=0;Et<Ue;Et++)I[ke+Et]=oe[Et]}else I.push(oe)}}class b{constructor(q,X){this.i=q,this.j=X,this.h=0,this.g=null}get(){let q;return 0<this.h?(this.h--,q=this.g,this.g=q.next,q.next=null):q=this.i(),q}}function v(I){return/^[\s\xa0]*$/.test(I)}function x(){var I=a.navigator;return I&&(I=I.userAgent)?I:""}function E(I){return E[" "](I),I}E[" "]=function(){};var _=x().indexOf("Gecko")!=-1&&!(x().toLowerCase().indexOf("webkit")!=-1&&x().indexOf("Edge")==-1)&&!(x().indexOf("Trident")!=-1||x().indexOf("MSIE")!=-1)&&x().indexOf("Edge")==-1;function C(I,q,X){for(const oe in I)q.call(X,I[oe],oe,I)}function S(I,q){for(const X in I)q.call(void 0,I[X],X,I)}function k(I){const q={};for(const X in I)q[X]=I[X];return q}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(I,q){let X,oe;for(let ke=1;ke<arguments.length;ke++){oe=arguments[ke];for(X in oe)I[X]=oe[X];for(let Ue=0;Ue<R.length;Ue++)X=R[Ue],Object.prototype.hasOwnProperty.call(oe,X)&&(I[X]=oe[X])}}function N(I){var q=1;I=I.split(":");const X=[];for(;0<q&&I.length;)X.push(I.shift()),q--;return I.length&&X.push(I.join(":")),X}function L(I){a.setTimeout(()=>{throw I},0)}function $(){var I=Z;let q=null;return I.g&&(q=I.g,I.g=I.g.next,I.g||(I.h=null),q.next=null),q}class B{constructor(){this.h=this.g=null}add(q,X){const oe=H.get();oe.set(q,X),this.h?this.h.next=oe:this.g=oe,this.h=oe}}var H=new b(()=>new Y,I=>I.reset());class Y{constructor(){this.next=this.g=this.h=null}set(q,X){this.h=q,this.g=X,this.next=null}reset(){this.next=this.g=this.h=null}}let J,K=!1,Z=new B,U=()=>{const I=a.Promise.resolve(void 0);J=()=>{I.then(j)}};var j=()=>{for(var I;I=$();){try{I.h.call(I.g)}catch(X){L(X)}var q=H;q.j(I),100>q.h&&(q.h++,I.next=q.g,q.g=I)}K=!1};function V(){this.s=this.s,this.C=this.C}V.prototype.s=!1,V.prototype.ma=function(){this.s||(this.s=!0,this.N())},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function z(I,q){this.type=I,this.g=this.target=q,this.defaultPrevented=!1}z.prototype.h=function(){this.defaultPrevented=!0};var G=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var I=!1,q=Object.defineProperty({},"passive",{get:function(){I=!0}});try{const X=()=>{};a.addEventListener("test",X,q),a.removeEventListener("test",X,q)}catch{}return I}();function Q(I,q){if(z.call(this,I?I.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,I){var X=this.type=I.type,oe=I.changedTouches&&I.changedTouches.length?I.changedTouches[0]:null;if(this.target=I.target||I.srcElement,this.g=q,q=I.relatedTarget){if(_){e:{try{E(q.nodeName);var ke=!0;break e}catch{}ke=!1}ke||(q=null)}}else X=="mouseover"?q=I.fromElement:X=="mouseout"&&(q=I.toElement);this.relatedTarget=q,oe?(this.clientX=oe.clientX!==void 0?oe.clientX:oe.pageX,this.clientY=oe.clientY!==void 0?oe.clientY:oe.pageY,this.screenX=oe.screenX||0,this.screenY=oe.screenY||0):(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0),this.button=I.button,this.key=I.key||"",this.ctrlKey=I.ctrlKey,this.altKey=I.altKey,this.shiftKey=I.shiftKey,this.metaKey=I.metaKey,this.pointerId=I.pointerId||0,this.pointerType=typeof I.pointerType=="string"?I.pointerType:ie[I.pointerType]||"",this.state=I.state,this.i=I,I.defaultPrevented&&Q.aa.h.call(this)}}p(Q,z);var ie={2:"touch",3:"pen",4:"mouse"};Q.prototype.h=function(){Q.aa.h.call(this);var I=this.i;I.preventDefault?I.preventDefault():I.returnValue=!1};var me="closure_listenable_"+(1e6*Math.random()|0),ae=0;function fe(I,q,X,oe,ke){this.listener=I,this.proxy=null,this.src=q,this.type=X,this.capture=!!oe,this.ha=ke,this.key=++ae,this.da=this.fa=!1}function be(I){I.da=!0,I.listener=null,I.proxy=null,I.src=null,I.ha=null}function te(I){this.src=I,this.g={},this.h=0}te.prototype.add=function(I,q,X,oe,ke){var Ue=I.toString();I=this.g[Ue],I||(I=this.g[Ue]=[],this.h++);var Et=we(I,q,oe,ke);return-1<Et?(q=I[Et],X||(q.fa=!1)):(q=new fe(q,this.src,Ue,!!oe,ke),q.fa=X,I.push(q)),q};function re(I,q){var X=q.type;if(X in I.g){var oe=I.g[X],ke=Array.prototype.indexOf.call(oe,q,void 0),Ue;(Ue=0<=ke)&&Array.prototype.splice.call(oe,ke,1),Ue&&(be(q),I.g[X].length==0&&(delete I.g[X],I.h--))}}function we(I,q,X,oe){for(var ke=0;ke<I.length;++ke){var Ue=I[ke];if(!Ue.da&&Ue.listener==q&&Ue.capture==!!X&&Ue.ha==oe)return ke}return-1}var Ee="closure_lm_"+(1e6*Math.random()|0),Fe={};function We(I,q,X,oe,ke){if(Array.isArray(q)){for(var Ue=0;Ue<q.length;Ue++)We(I,q[Ue],X,oe,ke);return null}return X=Wt(X),I&&I[me]?I.K(q,X,u(oe)?!!oe.capture:!1,ke):Me(I,q,X,!1,oe,ke)}function Me(I,q,X,oe,ke,Ue){if(!q)throw Error("Invalid event type");var Et=u(ke)?!!ke.capture:!!ke,yr=Pe(I);if(yr||(I[Ee]=yr=new te(I)),X=yr.add(q,X,oe,Et,Ue),X.proxy)return X;if(oe=Be(),X.proxy=oe,oe.src=I,oe.listener=X,I.addEventListener)G||(ke=Et),ke===void 0&&(ke=!1),I.addEventListener(q.toString(),oe,ke);else if(I.attachEvent)I.attachEvent(ht(q.toString()),oe);else if(I.addListener&&I.removeListener)I.addListener(oe);else throw Error("addEventListener and attachEvent are unavailable.");return X}function Be(){function I(X){return q.call(I.src,I.listener,X)}const q=vt;return I}function Je(I,q,X,oe,ke){if(Array.isArray(q))for(var Ue=0;Ue<q.length;Ue++)Je(I,q[Ue],X,oe,ke);else oe=u(oe)?!!oe.capture:!!oe,X=Wt(X),I&&I[me]?(I=I.i,q=String(q).toString(),q in I.g&&(Ue=I.g[q],X=we(Ue,X,oe,ke),-1<X&&(be(Ue[X]),Array.prototype.splice.call(Ue,X,1),Ue.length==0&&(delete I.g[q],I.h--)))):I&&(I=Pe(I))&&(q=I.g[q.toString()],I=-1,q&&(I=we(q,X,oe,ke)),(X=-1<I?q[I]:null)&&lt(X))}function lt(I){if(typeof I!="number"&&I&&!I.da){var q=I.src;if(q&&q[me])re(q.i,I);else{var X=I.type,oe=I.proxy;q.removeEventListener?q.removeEventListener(X,oe,I.capture):q.detachEvent?q.detachEvent(ht(X),oe):q.addListener&&q.removeListener&&q.removeListener(oe),(X=Pe(q))?(re(X,I),X.h==0&&(X.src=null,q[Ee]=null)):be(I)}}}function ht(I){return I in Fe?Fe[I]:Fe[I]="on"+I}function vt(I,q){if(I.da)I=!0;else{q=new Q(q,this);var X=I.listener,oe=I.ha||I.src;I.fa&&lt(I),I=X.call(oe,q)}return I}function Pe(I){return I=I[Ee],I instanceof te?I:null}var wt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Wt(I){return typeof I=="function"?I:(I[wt]||(I[wt]=function(q){return I.handleEvent(q)}),I[wt])}function Ce(){V.call(this),this.i=new te(this),this.M=this,this.F=null}p(Ce,V),Ce.prototype[me]=!0,Ce.prototype.removeEventListener=function(I,q,X,oe){Je(this,I,q,X,oe)};function Ne(I,q){var X,oe=I.F;if(oe)for(X=[];oe;oe=oe.F)X.push(oe);if(I=I.M,oe=q.type||q,typeof q=="string")q=new z(q,I);else if(q instanceof z)q.target=q.target||I;else{var ke=q;q=new z(oe,I),O(q,ke)}if(ke=!0,X)for(var Ue=X.length-1;0<=Ue;Ue--){var Et=q.g=X[Ue];ke=ot(Et,oe,!0,q)&&ke}if(Et=q.g=I,ke=ot(Et,oe,!0,q)&&ke,ke=ot(Et,oe,!1,q)&&ke,X)for(Ue=0;Ue<X.length;Ue++)Et=q.g=X[Ue],ke=ot(Et,oe,!1,q)&&ke}Ce.prototype.N=function(){if(Ce.aa.N.call(this),this.i){var I=this.i,q;for(q in I.g){for(var X=I.g[q],oe=0;oe<X.length;oe++)be(X[oe]);delete I.g[q],I.h--}}this.F=null},Ce.prototype.K=function(I,q,X,oe){return this.i.add(String(I),q,!1,X,oe)},Ce.prototype.L=function(I,q,X,oe){return this.i.add(String(I),q,!0,X,oe)};function ot(I,q,X,oe){if(q=I.i.g[String(q)],!q)return!0;q=q.concat();for(var ke=!0,Ue=0;Ue<q.length;++Ue){var Et=q[Ue];if(Et&&!Et.da&&Et.capture==X){var yr=Et.listener,is=Et.ha||Et.src;Et.fa&&re(I.i,Et),ke=yr.call(is,oe)!==!1&&ke}}return ke&&!oe.defaultPrevented}function xt(I,q,X){if(typeof I=="function")X&&(I=f(I,X));else if(I&&typeof I.handleEvent=="function")I=f(I.handleEvent,I);else throw Error("Invalid listener argument");return 2147483647<Number(q)?-1:a.setTimeout(I,q||0)}function Ct(I){I.g=xt(()=>{I.g=null,I.i&&(I.i=!1,Ct(I))},I.l);const q=I.h;I.h=null,I.m.apply(null,q)}class Qt extends V{constructor(q,X){super(),this.m=q,this.l=X,this.h=null,this.i=!1,this.g=null}j(q){this.h=arguments,this.g?this.i=!0:Ct(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function yn(I){V.call(this),this.h=I,this.g={}}p(yn,V);var er=[];function Wr(I){C(I.g,function(q,X){this.g.hasOwnProperty(X)&&lt(q)},I),I.g={}}yn.prototype.N=function(){yn.aa.N.call(this),Wr(this)},yn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var pn=a.JSON.stringify,En=a.JSON.parse,Mr=class{stringify(I){return a.JSON.stringify(I,void 0)}parse(I){return a.JSON.parse(I,void 0)}};function On(){}On.prototype.h=null;function bs(I){return I.h||(I.h=I.i())}function Qr(){}var Lr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Jr(){z.call(this,"d")}p(Jr,z);function tr(){z.call(this,"c")}p(tr,z);var Qs={},su=null;function ta(){return su=su||new Ce}Qs.La="serverreachability";function El(I){z.call(this,Qs.La,I)}p(El,z);function nr(I){const q=ta();Ne(q,new El(q))}Qs.STAT_EVENT="statevent";function Fr(I,q){z.call(this,Qs.STAT_EVENT,I),this.stat=q}p(Fr,z);function dr(I){const q=ta();Ne(q,new Fr(q,I))}Qs.Ma="timingevent";function ws(I,q){z.call(this,Qs.Ma,I),this.size=q}p(ws,z);function Gn(I,q){if(typeof I!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){I()},q)}function li(){this.g=!0}li.prototype.xa=function(){this.g=!1};function xs(I,q,X,oe,ke,Ue){I.info(function(){if(I.g)if(Ue)for(var Et="",yr=Ue.split("&"),is=0;is<yr.length;is++){var Un=yr[is].split("=");if(1<Un.length){var _s=Un[0];Un=Un[1];var Ts=_s.split("_");Et=2<=Ts.length&&Ts[1]=="type"?Et+(_s+"="+Un+"&"):Et+(_s+"=redacted&")}}else Et=null;else Et=Ue;return"XMLHTTP REQ ("+oe+") [attempt "+ke+"]: "+q+`
`+X+`
`+Et})}function Qi(I,q,X,oe,ke,Ue,Et){I.info(function(){return"XMLHTTP RESP ("+oe+") [ attempt "+ke+"]: "+q+`
`+X+`
`+Ue+" "+Et})}function Js(I,q,X,oe){I.info(function(){return"XMLHTTP TEXT ("+q+"): "+ih(I,X)+(oe?" "+oe:"")})}function _l(I,q){I.info(function(){return"TIMEOUT: "+q})}li.prototype.info=function(){};function ih(I,q){if(!I.g)return q;if(!q)return null;try{var X=JSON.parse(q);if(X){for(I=0;I<X.length;I++)if(Array.isArray(X[I])){var oe=X[I];if(!(2>oe.length)){var ke=oe[1];if(Array.isArray(ke)&&!(1>ke.length)){var Ue=ke[0];if(Ue!="noop"&&Ue!="stop"&&Ue!="close")for(var Et=1;Et<ke.length;Et++)ke[Et]=""}}}}return pn(X)}catch{return q}}var Yn={NO_ERROR:0,TIMEOUT:8},Zu={},ui;function Oa(){}p(Oa,On),Oa.prototype.g=function(){return new XMLHttpRequest},Oa.prototype.i=function(){return{}},ui=new Oa;function Zs(I,q,X,oe){this.j=I,this.i=q,this.l=X,this.R=oe||1,this.U=new yn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Xp}function Xp(){this.i=null,this.g="",this.h=!1}var sh={},Sd={};function Ad(I,q,X){I.L=1,I.v=_n(tt(q)),I.m=X,I.P=!0,ec(I,null)}function ec(I,q){I.F=Date.now(),$n(I),I.A=tt(I.v);var X=I.A,oe=I.R;Array.isArray(oe)||(oe=[String(oe)]),Id(X.i,"t",oe),I.C=0,X=I.j.J,I.h=new Xp,I.g=yA(I.j,X?q:null,!I.m),0<I.O&&(I.M=new Qt(f(I.Y,I,I.g),I.O)),q=I.U,X=I.g,oe=I.ca;var ke="readystatechange";Array.isArray(ke)||(ke&&(er[0]=ke.toString()),ke=er);for(var Ue=0;Ue<ke.length;Ue++){var Et=We(X,ke[Ue],oe||q.handleEvent,!1,q.h||q);if(!Et)break;q.g[Et.key]=Et}q=I.H?k(I.H):{},I.m?(I.u||(I.u="POST"),q["Content-Type"]="application/x-www-form-urlencoded",I.g.ea(I.A,I.u,I.m,q)):(I.u="GET",I.g.ea(I.A,I.u,null,q)),nr(),xs(I.i,I.u,I.A,I.l,I.R,I.m)}Zs.prototype.ca=function(I){I=I.target;const q=this.M;q&&jr(I)==3?q.j():this.Y(I)},Zs.prototype.Y=function(I){try{if(I==this.g)e:{const Ts=jr(this.g);var q=this.g.Ba();const Pd=this.g.Z();if(!(3>Ts)&&(Ts!=3||this.g&&(this.h.h||this.g.oa()||rs(this.g)))){this.J||Ts!=4||q==7||(q==8||0>=Pd?nr(3):nr(2)),Ji(this);var X=this.g.Z();this.X=X;t:if(Qp(this)){var oe=rs(this.g);I="";var ke=oe.length,Ue=jr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Zi(this),Tl(this);var Et="";break t}this.h.i=new a.TextDecoder}for(q=0;q<ke;q++)this.h.h=!0,I+=this.h.i.decode(oe[q],{stream:!(Ue&&q==ke-1)});oe.length=0,this.h.g+=I,this.C=0,Et=this.h.g}else Et=this.g.oa();if(this.o=X==200,Qi(this.i,this.u,this.A,this.l,this.R,Ts,X),this.o){if(this.T&&!this.K){t:{if(this.g){var yr,is=this.g;if((yr=is.g?is.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(yr)){var Un=yr;break t}}Un=null}if(X=Un)Js(this.i,this.l,X,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,nc(this,X);else{this.o=!1,this.s=3,dr(12),Zi(this),Tl(this);break e}}if(this.P){X=!0;let to;for(;!this.J&&this.C<Et.length;)if(to=tc(this,Et),to==Sd){Ts==4&&(this.s=4,dr(14),X=!1),Js(this.i,this.l,null,"[Incomplete Response]");break}else if(to==sh){this.s=4,dr(15),Js(this.i,this.l,Et,"[Invalid Chunk]"),X=!1;break}else Js(this.i,this.l,to,null),nc(this,to);if(Qp(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ts!=4||Et.length!=0||this.h.h||(this.s=1,dr(16),X=!1),this.o=this.o&&X,!X)Js(this.i,this.l,Et,"[Invalid Chunked Response]"),Zi(this),Tl(this);else if(0<Et.length&&!this.W){this.W=!0;var _s=this.j;_s.g==this&&_s.ba&&!_s.M&&(_s.j.info("Great, no buffering proxy detected. Bytes received: "+Et.length),AE(_s),_s.M=!0,dr(11))}}else Js(this.i,this.l,Et,null),nc(this,Et);Ts==4&&Zi(this),this.o&&!this.J&&(Ts==4?m1(this.j,this):(this.o=!1,$n(this)))}else uu(this.g),X==400&&0<Et.indexOf("Unknown SID")?(this.s=3,dr(12)):(this.s=0,dr(13)),Zi(this),Tl(this)}}}catch{}finally{}};function Qp(I){return I.g?I.u=="GET"&&I.L!=2&&I.j.Ca:!1}function tc(I,q){var X=I.C,oe=q.indexOf(`
`,X);return oe==-1?Sd:(X=Number(q.substring(X,oe)),isNaN(X)?sh:(oe+=1,oe+X>q.length?Sd:(q=q.slice(oe,oe+X),I.C=oe+X,q)))}Zs.prototype.cancel=function(){this.J=!0,Zi(this)};function $n(I){I.S=Date.now()+I.I,oh(I,I.I)}function oh(I,q){if(I.B!=null)throw Error("WatchDog timer not null");I.B=Gn(f(I.ba,I),q)}function Ji(I){I.B&&(a.clearTimeout(I.B),I.B=null)}Zs.prototype.ba=function(){this.B=null;const I=Date.now();0<=I-this.S?(_l(this.i,this.A),this.L!=2&&(nr(),dr(17)),Zi(this),this.s=2,Tl(this)):oh(this,this.S-I)};function Tl(I){I.j.G==0||I.J||m1(I.j,I)}function Zi(I){Ji(I);var q=I.M;q&&typeof q.ma=="function"&&q.ma(),I.M=null,Wr(I.U),I.g&&(q=I.g,I.g=null,q.abort(),q.ma())}function nc(I,q){try{var X=I.j;if(X.G!=0&&(X.g==I||ts(X.h,I))){if(!I.K&&ts(X.h,I)&&X.G==3){try{var oe=X.Da.g.parse(q)}catch{oe=null}if(Array.isArray(oe)&&oe.length==3){var ke=oe;if(ke[0]==0){e:if(!X.u){if(X.g)if(X.g.F+3e3<I.F)p1(X),sc(X);else break e;h1(X),dr(18)}}else X.za=ke[1],0<X.za-X.T&&37500>ke[2]&&X.F&&X.v==0&&!X.C&&(X.C=Gn(f(X.Za,X),6e3));if(1>=Zp(X.h)&&X.ca){try{X.ca()}catch{}X.ca=void 0}}else uh(X,11)}else if((I.K||X.g==I)&&p1(X),!v(q))for(ke=X.Da.g.parse(q),q=0;q<ke.length;q++){let Un=ke[q];if(X.T=Un[0],Un=Un[1],X.G==2)if(Un[0]=="c"){X.K=Un[1],X.ia=Un[2];const _s=Un[3];_s!=null&&(X.la=_s,X.j.info("VER="+X.la));const Ts=Un[4];Ts!=null&&(X.Aa=Ts,X.j.info("SVER="+X.Aa));const Pd=Un[5];Pd!=null&&typeof Pd=="number"&&0<Pd&&(oe=1.5*Pd,X.L=oe,X.j.info("backChannelRequestTimeoutMs_="+oe)),oe=X;const to=I.g;if(to){const g1=to.g?to.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(g1){var Ue=oe.h;Ue.g||g1.indexOf("spdy")==-1&&g1.indexOf("quic")==-1&&g1.indexOf("h2")==-1||(Ue.j=Ue.l,Ue.g=new Set,Ue.h&&(ne(Ue,Ue.h),Ue.h=null))}if(oe.D){const y1=to.g?to.g.getResponseHeader("X-HTTP-Session-Id"):null;y1&&(oe.ya=y1,qt(oe.I,oe.D,y1))}}X.G=3,X.l&&X.l.ua(),X.ba&&(X.R=Date.now()-I.F,X.j.info("Handshake RTT: "+X.R+"ms")),oe=X;var Et=I;if(oe.qa=gA(oe,oe.J?oe.ia:null,oe.W),Et.K){ge(oe.h,Et);var yr=Et,is=oe.L;is&&(yr.I=is),yr.B&&(Ji(yr),$n(yr)),oe.g=Et}else fg(oe);0<X.i.length&&Dd(X)}else Un[0]!="stop"&&Un[0]!="close"||uh(X,7);else X.G==3&&(Un[0]=="stop"||Un[0]=="close"?Un[0]=="stop"?uh(X,7):Ui(X):Un[0]!="noop"&&X.l&&X.l.ta(Un),X.v=0)}}nr(4)}catch{}}var Jp=class{constructor(I,q){this.g=I,this.map=q}};function ou(I){this.l=I||10,a.PerformanceNavigationTiming?(I=a.performance.getEntriesByType("navigation"),I=0<I.length&&(I[0].nextHopProtocol=="hq"||I[0].nextHopProtocol=="h2")):I=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=I?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function es(I){return I.h?!0:I.g?I.g.size>=I.j:!1}function Zp(I){return I.h?1:I.g?I.g.size:0}function ts(I,q){return I.h?I.h==q:I.g?I.g.has(q):!1}function ne(I,q){I.g?I.g.add(q):I.h=q}function ge(I,q){I.h&&I.h==q?I.h=null:I.g&&I.g.has(q)&&I.g.delete(q)}ou.prototype.cancel=function(){if(this.i=ue(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const I of this.g.values())I.cancel();this.g.clear()}};function ue(I){if(I.h!=null)return I.i.concat(I.h.D);if(I.g!=null&&I.g.size!==0){let q=I.i;for(const X of I.g.values())q=q.concat(X.D);return q}return m(I.i)}function _e(I){if(I.V&&typeof I.V=="function")return I.V();if(typeof Map<"u"&&I instanceof Map||typeof Set<"u"&&I instanceof Set)return Array.from(I.values());if(typeof I=="string")return I.split("");if(l(I)){for(var q=[],X=I.length,oe=0;oe<X;oe++)q.push(I[oe]);return q}q=[],X=0;for(oe in I)q[X++]=I[oe];return q}function Ae(I){if(I.na&&typeof I.na=="function")return I.na();if(!I.V||typeof I.V!="function"){if(typeof Map<"u"&&I instanceof Map)return Array.from(I.keys());if(!(typeof Set<"u"&&I instanceof Set)){if(l(I)||typeof I=="string"){var q=[];I=I.length;for(var X=0;X<I;X++)q.push(X);return q}q=[],X=0;for(const oe in I)q[X++]=oe;return q}}}function xe(I,q){if(I.forEach&&typeof I.forEach=="function")I.forEach(q,void 0);else if(l(I)||typeof I=="string")Array.prototype.forEach.call(I,q,void 0);else for(var X=Ae(I),oe=_e(I),ke=oe.length,Ue=0;Ue<ke;Ue++)q.call(void 0,oe[Ue],X&&X[Ue],I)}var Ye=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function et(I,q){if(I){I=I.split("&");for(var X=0;X<I.length;X++){var oe=I[X].indexOf("="),ke=null;if(0<=oe){var Ue=I[X].substring(0,oe);ke=I[X].substring(oe+1)}else Ue=I[X];q(Ue,ke?decodeURIComponent(ke.replace(/\+/g," ")):"")}}}function nt(I){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,I instanceof nt){this.h=I.h,pt(this,I.j),this.o=I.o,this.g=I.g,Pt(this,I.s),this.l=I.l;var q=I.i,X=new eo;X.i=q.i,q.g&&(X.g=new Map(q.g),X.h=q.h),rn(this,X),this.m=I.m}else I&&(q=String(I).match(Ye))?(this.h=!1,pt(this,q[1]||"",!0),this.o=Vt(q[2]||""),this.g=Vt(q[3]||"",!0),Pt(this,q[4]),this.l=Vt(q[5]||"",!0),rn(this,q[6]||"",!0),this.m=Vt(q[7]||"")):(this.h=!1,this.i=new eo(null,this.h))}nt.prototype.toString=function(){var I=[],q=this.j;q&&I.push(rr(q,$a,!0),":");var X=this.g;return(X||q=="file")&&(I.push("//"),(q=this.o)&&I.push(rr(q,$a,!0),"@"),I.push(encodeURIComponent(String(X)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),X=this.s,X!=null&&I.push(":",String(X))),(X=this.l)&&(this.g&&X.charAt(0)!="/"&&I.push("/"),I.push(rr(X,X.charAt(0)=="/"?em:au,!0))),(X=this.i.toString())&&I.push("?",X),(X=this.m)&&I.push("#",rr(X,tm)),I.join("")};function tt(I){return new nt(I)}function pt(I,q,X){I.j=X?Vt(q,!0):q,I.j&&(I.j=I.j.replace(/:$/,""))}function Pt(I,q){if(q){if(q=Number(q),isNaN(q)||0>q)throw Error("Bad port number "+q);I.s=q}else I.s=null}function rn(I,q,X){q instanceof eo?(I.i=q,Ma(I.i,I.h)):(X||(q=rr(q,kd)),I.i=new eo(q,I.h))}function qt(I,q,X){I.i.set(q,X)}function _n(I){return qt(I,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),I}function Vt(I,q){return I?q?decodeURI(I.replace(/%25/g,"%2525")):decodeURIComponent(I):""}function rr(I,q,X){return typeof I=="string"?(I=encodeURI(I).replace(q,ns),X&&(I=I.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),I):null}function ns(I){return I=I.charCodeAt(0),"%"+(I>>4&15).toString(16)+(I&15).toString(16)}var $a=/[#\/\?@]/g,au=/[#\?:]/g,em=/[#\?]/g,kd=/[#\?@]/g,tm=/#/g;function eo(I,q){this.h=this.g=null,this.i=I||null,this.j=!!q}function ci(I){I.g||(I.g=new Map,I.h=0,I.i&&et(I.i,function(q,X){I.add(decodeURIComponent(q.replace(/\+/g," ")),X)}))}e=eo.prototype,e.add=function(I,q){ci(this),this.i=null,I=ra(this,I);var X=this.g.get(I);return X||this.g.set(I,X=[]),X.push(q),this.h+=1,this};function Es(I,q){ci(I),q=ra(I,q),I.g.has(q)&&(I.i=null,I.h-=I.g.get(q).length,I.g.delete(q))}function na(I,q){return ci(I),q=ra(I,q),I.g.has(q)}e.forEach=function(I,q){ci(this),this.g.forEach(function(X,oe){X.forEach(function(ke){I.call(q,ke,oe,this)},this)},this)},e.na=function(){ci(this);const I=Array.from(this.g.values()),q=Array.from(this.g.keys()),X=[];for(let oe=0;oe<q.length;oe++){const ke=I[oe];for(let Ue=0;Ue<ke.length;Ue++)X.push(q[oe])}return X},e.V=function(I){ci(this);let q=[];if(typeof I=="string")na(this,I)&&(q=q.concat(this.g.get(ra(this,I))));else{I=Array.from(this.g.values());for(let X=0;X<I.length;X++)q=q.concat(I[X])}return q},e.set=function(I,q){return ci(this),this.i=null,I=ra(this,I),na(this,I)&&(this.h-=this.g.get(I).length),this.g.set(I,[q]),this.h+=1,this},e.get=function(I,q){return I?(I=this.V(I),0<I.length?String(I[0]):q):q};function Id(I,q,X){Es(I,q),0<X.length&&(I.i=null,I.g.set(ra(I,q),m(X)),I.h+=X.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const I=[],q=Array.from(this.g.keys());for(var X=0;X<q.length;X++){var oe=q[X];const Ue=encodeURIComponent(String(oe)),Et=this.V(oe);for(oe=0;oe<Et.length;oe++){var ke=Ue;Et[oe]!==""&&(ke+="="+encodeURIComponent(String(Et[oe]))),I.push(ke)}}return this.i=I.join("&")};function ra(I,q){return q=String(q),I.j&&(q=q.toLowerCase()),q}function Ma(I,q){q&&!I.j&&(ci(I),I.i=null,I.g.forEach(function(X,oe){var ke=oe.toLowerCase();oe!=ke&&(Es(this,oe),Id(this,ke,X))},I)),I.j=q}function u1(I,q){const X=new li;if(a.Image){const oe=new Image;oe.onload=h(zi,X,"TestLoadImage: loaded",!0,q,oe),oe.onerror=h(zi,X,"TestLoadImage: error",!1,q,oe),oe.onabort=h(zi,X,"TestLoadImage: abort",!1,q,oe),oe.ontimeout=h(zi,X,"TestLoadImage: timeout",!1,q,oe),a.setTimeout(function(){oe.ontimeout&&oe.ontimeout()},1e4),oe.src=I}else q(!1)}function lu(I,q){const X=new li,oe=new AbortController,ke=setTimeout(()=>{oe.abort(),zi(X,"TestPingServer: timeout",!1,q)},1e4);fetch(I,{signal:oe.signal}).then(Ue=>{clearTimeout(ke),Ue.ok?zi(X,"TestPingServer: ok",!0,q):zi(X,"TestPingServer: server error",!1,q)}).catch(()=>{clearTimeout(ke),zi(X,"TestPingServer: error",!1,q)})}function zi(I,q,X,oe,ke){try{ke&&(ke.onload=null,ke.onerror=null,ke.onabort=null,ke.ontimeout=null),oe(X)}catch{}}function SE(){this.g=new Mr}function dg(I,q,X){const oe=X||"";try{xe(I,function(ke,Ue){let Et=ke;u(ke)&&(Et=pn(ke)),q.push(oe+Ue+"="+encodeURIComponent(Et))})}catch(ke){throw q.push(oe+"type="+encodeURIComponent("_badmap")),ke}}function rc(I){this.l=I.Ub||null,this.j=I.eb||!1}p(rc,On),rc.prototype.g=function(){return new Rd(this.l,this.j)},rc.prototype.i=function(I){return function(){return I}}({});function Rd(I,q){Ce.call(this),this.D=I,this.o=q,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}p(Rd,Ce),e=Rd.prototype,e.open=function(I,q){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=I,this.A=q,this.readyState=1,La(this)},e.send=function(I){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const q={headers:this.u,method:this.B,credentials:this.m,cache:void 0};I&&(q.body=I),(this.D||a).fetch(new Request(this.A,q)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Cl(this)),this.readyState=0},e.Sa=function(I){if(this.g&&(this.l=I,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=I.headers,this.readyState=2,La(this)),this.g&&(this.readyState=3,La(this),this.g)))if(this.responseType==="arraybuffer")I.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in I){if(this.j=I.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;c1(this)}else I.text().then(this.Ra.bind(this),this.ga.bind(this))};function c1(I){I.j.read().then(I.Pa.bind(I)).catch(I.ga.bind(I))}e.Pa=function(I){if(this.g){if(this.o&&I.value)this.response.push(I.value);else if(!this.o){var q=I.value?I.value:new Uint8Array(0);(q=this.v.decode(q,{stream:!I.done}))&&(this.response=this.responseText+=q)}I.done?Cl(this):La(this),this.readyState==3&&c1(this)}},e.Ra=function(I){this.g&&(this.response=this.responseText=I,Cl(this))},e.Qa=function(I){this.g&&(this.response=I,Cl(this))},e.ga=function(){this.g&&Cl(this)};function Cl(I){I.readyState=4,I.l=null,I.j=null,I.v=null,La(I)}e.setRequestHeader=function(I,q){this.u.append(I,q)},e.getResponseHeader=function(I){return this.h&&this.h.get(I.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const I=[],q=this.h.entries();for(var X=q.next();!X.done;)X=X.value,I.push(X[0]+": "+X[1]),X=q.next();return I.join(`\r
`)};function La(I){I.onreadystatechange&&I.onreadystatechange.call(I)}Object.defineProperty(Rd.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(I){this.m=I?"include":"same-origin"}});function ic(I){let q="";return C(I,function(X,oe){q+=oe,q+=":",q+=X,q+=`\r
`}),q}function ce(I,q,X){e:{for(oe in X){var oe=!1;break e}oe=!0}oe||(X=ic(X),typeof I=="string"?X!=null&&encodeURIComponent(String(X)):qt(I,q,X))}function ye(I){Ce.call(this),this.headers=new Map,this.o=I||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}p(ye,Ce);var je=/^https?$/i,$t=["POST","PUT"];e=ye.prototype,e.Ha=function(I){this.J=I},e.ea=function(I,q,X,oe){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+I);q=q?q.toUpperCase():"GET",this.D=I,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ui.g(),this.v=this.o?bs(this.o):bs(ui),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(q,String(I),!0),this.B=!1}catch(Ue){vn(this,Ue);return}if(I=X||"",X=new Map(this.headers),oe)if(Object.getPrototypeOf(oe)===Object.prototype)for(var ke in oe)X.set(ke,oe[ke]);else if(typeof oe.keys=="function"&&typeof oe.get=="function")for(const Ue of oe.keys())X.set(Ue,oe.get(Ue));else throw Error("Unknown input type for opt_headers: "+String(oe));oe=Array.from(X.keys()).find(Ue=>Ue.toLowerCase()=="content-type"),ke=a.FormData&&I instanceof a.FormData,!(0<=Array.prototype.indexOf.call($t,q,void 0))||oe||ke||X.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Ue,Et]of X)this.g.setRequestHeader(Ue,Et);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{fr(this),this.u=!0,this.g.send(I),this.u=!1}catch(Ue){vn(this,Ue)}};function vn(I,q){I.h=!1,I.g&&(I.j=!0,I.g.abort(),I.j=!1),I.l=q,I.m=5,zn(I),dn(I)}function zn(I){I.A||(I.A=!0,Ne(I,"complete"),Ne(I,"error"))}e.abort=function(I){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=I||7,Ne(this,"complete"),Ne(this,"abort"),dn(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),dn(this,!0)),ye.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?pr(this):this.bb())},e.bb=function(){pr(this)};function pr(I){if(I.h&&typeof o<"u"&&(!I.v[1]||jr(I)!=4||I.Z()!=2)){if(I.u&&jr(I)==4)xt(I.Ea,0,I);else if(Ne(I,"readystatechange"),jr(I)==4){I.h=!1;try{const Et=I.Z();e:switch(Et){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var q=!0;break e;default:q=!1}var X;if(!(X=q)){var oe;if(oe=Et===0){var ke=String(I.D).match(Ye)[1]||null;!ke&&a.self&&a.self.location&&(ke=a.self.location.protocol.slice(0,-1)),oe=!je.test(ke?ke.toLowerCase():"")}X=oe}if(X)Ne(I,"complete"),Ne(I,"success");else{I.m=6;try{var Ue=2<jr(I)?I.g.statusText:""}catch{Ue=""}I.l=Ue+" ["+I.Z()+"]",zn(I)}}finally{dn(I)}}}}function dn(I,q){if(I.g){fr(I);const X=I.g,oe=I.v[0]?()=>{}:null;I.g=null,I.v=null,q||Ne(I,"ready");try{X.onreadystatechange=oe}catch{}}}function fr(I){I.I&&(a.clearTimeout(I.I),I.I=null)}e.isActive=function(){return!!this.g};function jr(I){return I.g?I.g.readyState:0}e.Z=function(){try{return 2<jr(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(I){if(this.g){var q=this.g.responseText;return I&&q.indexOf(I)==0&&(q=q.substring(I.length)),En(q)}};function rs(I){try{if(!I.g)return null;if("response"in I.g)return I.g.response;switch(I.H){case"":case"text":return I.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in I.g)return I.g.mozResponseArrayBuffer}return null}catch{return null}}function uu(I){const q={};I=(I.g&&2<=jr(I)&&I.g.getAllResponseHeaders()||"").split(`\r
`);for(let oe=0;oe<I.length;oe++){if(v(I[oe]))continue;var X=N(I[oe]);const ke=X[0];if(X=X[1],typeof X!="string")continue;X=X.trim();const Ue=q[ke]||[];q[ke]=Ue,Ue.push(X)}S(q,function(oe){return oe.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Fa(I,q,X){return X&&X.internalChannelParams&&X.internalChannelParams[I]||q}function ah(I){this.Aa=0,this.i=[],this.j=new li,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Fa("failFast",!1,I),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Fa("baseRetryDelayMs",5e3,I),this.cb=Fa("retryDelaySeedMs",1e4,I),this.Wa=Fa("forwardChannelMaxRetries",2,I),this.wa=Fa("forwardChannelRequestTimeoutMs",2e4,I),this.pa=I&&I.xmlHttpFactory||void 0,this.Xa=I&&I.Tb||void 0,this.Ca=I&&I.useFetchStreams||!1,this.L=void 0,this.J=I&&I.supportsCrossDomainXhr||!1,this.K="",this.h=new ou(I&&I.concurrentRequestLimit),this.Da=new SE,this.P=I&&I.fastHandshake||!1,this.O=I&&I.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=I&&I.Rb||!1,I&&I.xa&&this.j.xa(),I&&I.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&I&&I.detectBufferingProxy||!1,this.ja=void 0,I&&I.longPollingTimeout&&0<I.longPollingTimeout&&(this.ja=I.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=ah.prototype,e.la=8,e.G=1,e.connect=function(I,q,X,oe){dr(0),this.W=I,this.H=q||{},X&&oe!==void 0&&(this.H.OSID=X,this.H.OAID=oe),this.F=this.X,this.I=gA(this,null,this.W),Dd(this)};function Ui(I){if(d1(I),I.G==3){var q=I.U++,X=tt(I.I);if(qt(X,"SID",I.K),qt(X,"RID",q),qt(X,"TYPE","terminate"),lh(I,X),q=new Zs(I,I.j,q),q.L=2,q.v=_n(tt(X)),X=!1,a.navigator&&a.navigator.sendBeacon)try{X=a.navigator.sendBeacon(q.v.toString(),"")}catch{}!X&&a.Image&&(new Image().src=q.v,X=!0),X||(q.g=yA(q.j,null),q.g.ea(q.v)),q.F=Date.now(),$n(q)}mA(I)}function sc(I){I.g&&(AE(I),I.g.cancel(),I.g=null)}function d1(I){sc(I),I.u&&(a.clearTimeout(I.u),I.u=null),p1(I),I.h.cancel(),I.s&&(typeof I.s=="number"&&a.clearTimeout(I.s),I.s=null)}function Dd(I){if(!es(I.h)&&!I.s){I.s=!0;var q=I.Ga;J||U(),K||(J(),K=!0),Z.add(q,I),I.B=0}}function e5(I,q){return Zp(I.h)>=I.h.j-(I.s?1:0)?!1:I.s?(I.i=q.D.concat(I.i),!0):I.G==1||I.G==2||I.B>=(I.Va?0:I.Wa)?!1:(I.s=Gn(f(I.Ga,I,q),pA(I,I.B)),I.B++,!0)}e.Ga=function(I){if(this.s)if(this.s=null,this.G==1){if(!I){this.U=Math.floor(1e5*Math.random()),I=this.U++;const ke=new Zs(this,this.j,I);let Ue=this.o;if(this.S&&(Ue?(Ue=k(Ue),O(Ue,this.S)):Ue=this.S),this.m!==null||this.O||(ke.H=Ue,Ue=null),this.P)e:{for(var q=0,X=0;X<this.i.length;X++){t:{var oe=this.i[X];if("__data__"in oe.map&&(oe=oe.map.__data__,typeof oe=="string")){oe=oe.length;break t}oe=void 0}if(oe===void 0)break;if(q+=oe,4096<q){q=X;break e}if(q===4096||X===this.i.length-1){q=X+1;break e}}q=1e3}else q=1e3;q=nm(this,ke,q),X=tt(this.I),qt(X,"RID",I),qt(X,"CVER",22),this.D&&qt(X,"X-HTTP-Session-Id",this.D),lh(this,X),Ue&&(this.O?q="headers="+encodeURIComponent(String(ic(Ue)))+"&"+q:this.m&&ce(X,this.m,Ue)),ne(this.h,ke),this.Ua&&qt(X,"TYPE","init"),this.P?(qt(X,"$req",q),qt(X,"SID","null"),ke.T=!0,Ad(ke,X,null)):Ad(ke,X,q),this.G=2}}else this.G==3&&(I?f1(this,I):this.i.length==0||es(this.h)||f1(this))};function f1(I,q){var X;q?X=q.l:X=I.U++;const oe=tt(I.I);qt(oe,"SID",I.K),qt(oe,"RID",X),qt(oe,"AID",I.T),lh(I,oe),I.m&&I.o&&ce(oe,I.m,I.o),X=new Zs(I,I.j,X,I.B+1),I.m===null&&(X.H=I.o),q&&(I.i=q.D.concat(I.i)),q=nm(I,X,1e3),X.I=Math.round(.5*I.wa)+Math.round(.5*I.wa*Math.random()),ne(I.h,X),Ad(X,oe,q)}function lh(I,q){I.H&&C(I.H,function(X,oe){qt(q,oe,X)}),I.l&&xe({},function(X,oe){qt(q,oe,X)})}function nm(I,q,X){X=Math.min(I.i.length,X);var oe=I.l?f(I.l.Na,I.l,I):null;e:{var ke=I.i;let Ue=-1;for(;;){const Et=["count="+X];Ue==-1?0<X?(Ue=ke[0].g,Et.push("ofs="+Ue)):Ue=0:Et.push("ofs="+Ue);let yr=!0;for(let is=0;is<X;is++){let Un=ke[is].g;const _s=ke[is].map;if(Un-=Ue,0>Un)Ue=Math.max(0,ke[is].g-100),yr=!1;else try{dg(_s,Et,"req"+Un+"_")}catch{oe&&oe(_s)}}if(yr){oe=Et.join("&");break e}}}return I=I.i.splice(0,X),q.D=I,oe}function fg(I){if(!I.g&&!I.u){I.Y=1;var q=I.Fa;J||U(),K||(J(),K=!0),Z.add(q,I),I.v=0}}function h1(I){return I.g||I.u||3<=I.v?!1:(I.Y++,I.u=Gn(f(I.Fa,I),pA(I,I.v)),I.v++,!0)}e.Fa=function(){if(this.u=null,hA(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var I=2*this.R;this.j.info("BP detection timer enabled: "+I),this.A=Gn(f(this.ab,this),I)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,dr(10),sc(this),hA(this))};function AE(I){I.A!=null&&(a.clearTimeout(I.A),I.A=null)}function hA(I){I.g=new Zs(I,I.j,"rpc",I.Y),I.m===null&&(I.g.H=I.o),I.g.O=0;var q=tt(I.qa);qt(q,"RID","rpc"),qt(q,"SID",I.K),qt(q,"AID",I.T),qt(q,"CI",I.F?"0":"1"),!I.F&&I.ja&&qt(q,"TO",I.ja),qt(q,"TYPE","xmlhttp"),lh(I,q),I.m&&I.o&&ce(q,I.m,I.o),I.L&&(I.g.I=I.L);var X=I.g;I=I.ia,X.L=1,X.v=_n(tt(q)),X.m=null,X.P=!0,ec(X,I)}e.Za=function(){this.C!=null&&(this.C=null,sc(this),h1(this),dr(19))};function p1(I){I.C!=null&&(a.clearTimeout(I.C),I.C=null)}function m1(I,q){var X=null;if(I.g==q){p1(I),AE(I),I.g=null;var oe=2}else if(ts(I.h,q))X=q.D,ge(I.h,q),oe=1;else return;if(I.G!=0){if(q.o)if(oe==1){X=q.m?q.m.length:0,q=Date.now()-q.F;var ke=I.B;oe=ta(),Ne(oe,new ws(oe,X)),Dd(I)}else fg(I);else if(ke=q.s,ke==3||ke==0&&0<q.X||!(oe==1&&e5(I,q)||oe==2&&h1(I)))switch(X&&0<X.length&&(q=I.h,q.i=q.i.concat(X)),ke){case 1:uh(I,5);break;case 4:uh(I,10);break;case 3:uh(I,6);break;default:uh(I,2)}}}function pA(I,q){let X=I.Ta+Math.floor(Math.random()*I.cb);return I.isActive()||(X*=2),X*q}function uh(I,q){if(I.j.info("Error code "+q),q==2){var X=f(I.fb,I),oe=I.Xa;const ke=!oe;oe=new nt(oe||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||pt(oe,"https"),_n(oe),ke?u1(oe.toString(),X):lu(oe.toString(),X)}else dr(2);I.G=0,I.l&&I.l.sa(q),mA(I),d1(I)}e.fb=function(I){I?(this.j.info("Successfully pinged google.com"),dr(2)):(this.j.info("Failed to ping google.com"),dr(1))};function mA(I){if(I.G=0,I.ka=[],I.l){const q=ue(I.h);(q.length!=0||I.i.length!=0)&&(g(I.ka,q),g(I.ka,I.i),I.h.i.length=0,m(I.i),I.i.length=0),I.l.ra()}}function gA(I,q,X){var oe=X instanceof nt?tt(X):new nt(X);if(oe.g!="")q&&(oe.g=q+"."+oe.g),Pt(oe,oe.s);else{var ke=a.location;oe=ke.protocol,q=q?q+"."+ke.hostname:ke.hostname,ke=+ke.port;var Ue=new nt(null);oe&&pt(Ue,oe),q&&(Ue.g=q),ke&&Pt(Ue,ke),X&&(Ue.l=X),oe=Ue}return X=I.D,q=I.ya,X&&q&&qt(oe,X,q),qt(oe,"VER",I.la),lh(I,oe),oe}function yA(I,q,X){if(q&&!I.J)throw Error("Can't create secondary domain capable XhrIo object.");return q=I.Ca&&!I.pa?new ye(new rc({eb:X})):new ye(I.pa),q.Ha(I.J),q}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function kE(){}e=kE.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function ja(I,q){Ce.call(this),this.g=new ah(q),this.l=I,this.h=q&&q.messageUrlParams||null,I=q&&q.messageHeaders||null,q&&q.clientProtocolHeaderRequired&&(I?I["X-Client-Protocol"]="webchannel":I={"X-Client-Protocol":"webchannel"}),this.g.o=I,I=q&&q.initMessageHeaders||null,q&&q.messageContentType&&(I?I["X-WebChannel-Content-Type"]=q.messageContentType:I={"X-WebChannel-Content-Type":q.messageContentType}),q&&q.va&&(I?I["X-WebChannel-Client-Profile"]=q.va:I={"X-WebChannel-Client-Profile":q.va}),this.g.S=I,(I=q&&q.Sb)&&!v(I)&&(this.g.m=I),this.v=q&&q.supportsCrossDomainXhr||!1,this.u=q&&q.sendRawJson||!1,(q=q&&q.httpSessionIdParam)&&!v(q)&&(this.g.D=q,I=this.h,I!==null&&q in I&&(I=this.h,q in I&&delete I[q])),this.j=new rm(this)}p(ja,Ce),ja.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ja.prototype.close=function(){Ui(this.g)},ja.prototype.o=function(I){var q=this.g;if(typeof I=="string"){var X={};X.__data__=I,I=X}else this.u&&(X={},X.__data__=pn(I),I=X);q.i.push(new Jp(q.Ya++,I)),q.G==3&&Dd(q)},ja.prototype.N=function(){this.g.l=null,delete this.j,Ui(this.g),delete this.g,ja.aa.N.call(this)};function vA(I){Jr.call(this),I.__headers__&&(this.headers=I.__headers__,this.statusCode=I.__status__,delete I.__headers__,delete I.__status__);var q=I.__sm__;if(q){e:{for(const X in q){I=X;break e}I=void 0}(this.i=I)&&(I=this.i,q=q!==null&&I in q?q[I]:void 0),this.data=q}else this.data=I}p(vA,Jr);function bA(){tr.call(this),this.status=1}p(bA,tr);function rm(I){this.g=I}p(rm,kE),rm.prototype.ua=function(){Ne(this.g,"a")},rm.prototype.ta=function(I){Ne(this.g,new vA(I))},rm.prototype.sa=function(I){Ne(this.g,new bA)},rm.prototype.ra=function(){Ne(this.g,"b")},ja.prototype.send=ja.prototype.o,ja.prototype.open=ja.prototype.m,ja.prototype.close=ja.prototype.close,Yn.NO_ERROR=0,Yn.TIMEOUT=8,Yn.HTTP_ERROR=6,Zu.COMPLETE="complete",Qr.EventType=Lr,Lr.OPEN="a",Lr.CLOSE="b",Lr.ERROR="c",Lr.MESSAGE="d",Ce.prototype.listen=Ce.prototype.K,ye.prototype.listenOnce=ye.prototype.L,ye.prototype.getLastError=ye.prototype.Ka,ye.prototype.getLastErrorCode=ye.prototype.Ba,ye.prototype.getStatus=ye.prototype.Z,ye.prototype.getResponseJson=ye.prototype.Oa,ye.prototype.getResponseText=ye.prototype.oa,ye.prototype.send=ye.prototype.ea,ye.prototype.setWithCredentials=ye.prototype.Ha}).apply(typeof bR<"u"?bR:typeof self<"u"?self:typeof window<"u"?window:{});const ghe="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Ol.UNAUTHENTICATED=new Ol(null),Ol.GOOGLE_CREDENTIALS=new Ol("google-credentials-uid"),Ol.FIRST_PARTY=new Ol("first-party-uid"),Ol.MOCK_USER=new Ol("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let J6="11.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FN=new BO("@firebase/firestore");function Uc(e,...t){if(FN.logLevel<=wr.DEBUG){const n=t.map(YDe);FN.debug(`Firestore (${J6}): ${e}`,...n)}}function GDe(e,...t){if(FN.logLevel<=wr.ERROR){const n=t.map(YDe);FN.error(`Firestore (${J6}): ${e}`,...n)}}function YDe(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KDe(e="Unexpected state"){const t=`FIRESTORE (${J6}) INTERNAL ASSERTION FAILED: `+e;throw GDe(t),new Error(t)}function dT(e,t){e||KDe()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pc={CANCELLED:"cancelled",INVALID_ARGUMENT:"invalid-argument",FAILED_PRECONDITION:"failed-precondition"};class Nc extends Uf{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fT{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h7t{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class p7t{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(Ol.UNAUTHENTICATED))}shutdown(){}}class m7t{constructor(t){this.t=t,this.currentUser=Ol.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){dT(this.o===void 0);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new fT;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new fT,t.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;t.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{Uc("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(Uc("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new fT)}},0),o()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==t?(Uc("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(dT(typeof r.accessToken=="string"),new h7t(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return dT(t===null||typeof t=="string"),new Ol(t)}}class g7t{constructor(t,n,r){this.l=t,this.h=n,this.P=r,this.type="FirstParty",this.user=Ol.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const t=this.I();return t&&this.T.set("Authorization",t),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class y7t{constructor(t,n,r){this.l=t,this.h=n,this.P=r}getToken(){return Promise.resolve(new g7t(this.l,this.h,this.P))}start(t,n){t.enqueueRetryable(()=>n(Ol.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class v7t{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class b7t{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,n){dT(this.o===void 0);const r=s=>{s.error!=null&&Uc("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,Uc("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>r(s))};const i=s=>{Uc("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):Uc("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(dT(typeof n.token=="string"),this.R=n.token,new v7t(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function w7t(e){return e.name==="IndexedDbTransactionError"}class jN{constructor(t,n){this.projectId=t,this.database=n||"(default)"}static empty(){return new jN("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof jN&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yhe,qn;(qn=yhe||(yhe={}))[qn.OK=0]="OK",qn[qn.CANCELLED=1]="CANCELLED",qn[qn.UNKNOWN=2]="UNKNOWN",qn[qn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",qn[qn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",qn[qn.NOT_FOUND=5]="NOT_FOUND",qn[qn.ALREADY_EXISTS=6]="ALREADY_EXISTS",qn[qn.PERMISSION_DENIED=7]="PERMISSION_DENIED",qn[qn.UNAUTHENTICATED=16]="UNAUTHENTICATED",qn[qn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",qn[qn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",qn[qn.ABORTED=10]="ABORTED",qn[qn.OUT_OF_RANGE=11]="OUT_OF_RANGE",qn[qn.UNIMPLEMENTED=12]="UNIMPLEMENTED",qn[qn.INTERNAL=13]="INTERNAL",qn[qn.UNAVAILABLE=14]="UNAVAILABLE",qn[qn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new VDe([4294967295,4294967295],0);function y9(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x7t{constructor(t,n,r=1e3,i=1.5,s=6e4){this.li=t,this.timerId=n,this.Qo=r,this.Ko=i,this.$o=s,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(t){this.cancel();const n=Math.floor(this.Uo+this.Ho()),r=Math.max(0,Date.now()-this.Go),i=Math.max(0,n-r);i>0&&Uc("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Uo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,i,()=>(this.Go=Date.now(),t())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qQ{constructor(t,n,r,i,s){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new fT,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,i,s){const o=Date.now()+r,a=new qQ(t,n,o,i,s);return a.start(r),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Nc(Pc.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}var vhe,bhe;(bhe=vhe||(vhe={})).na="default",bhe.Cache="cache";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E7t(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const whe=new Map;function _7t(e,t,n,r){if(t===!0&&r===!0)throw new Nc(Pc.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xhe{constructor(t){var n,r;if(t.host===void 0){if(t.ssl!==void 0)throw new Nc(Pc.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(n=t.ssl)===null||n===void 0||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new Nc(Pc.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}_7t("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=E7t((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Nc(Pc.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Nc(Pc.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Nc(Pc.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class T7t{constructor(t,n,r,i){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new xhe({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Nc(Pc.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Nc(Pc.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new xhe(t),t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new p7t;switch(r.type){case"firstParty":return new y7t(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Nc(Pc.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=whe.get(n);r&&(Uc("ComponentProvider","Removing Datastore"),whe.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ehe{constructor(t=Promise.resolve()){this.Iu=[],this.du=!1,this.Eu=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new x7t(this,"async_queue_retry"),this.fu=()=>{const r=y9();r&&Uc("AsyncQueue","Visibility state changed to "+r.visibilityState),this.r_.Jo()},this.gu=t;const n=y9();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.du}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.pu(),this.yu(t)}enterRestrictedMode(t){if(!this.du){this.du=!0,this.Vu=t||!1;const n=y9();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.fu)}}enqueue(t){if(this.pu(),this.du)return new Promise(()=>{});const n=new fT;return this.yu(()=>this.du&&this.Vu?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Iu.push(t),this.wu()))}async wu(){if(this.Iu.length!==0){try{await this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(t){if(!w7t(t))throw t;Uc("AsyncQueue","Operation failed with retryable error: "+t)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}}yu(t){const n=this.gu.then(()=>(this.Ru=!0,t().catch(r=>{this.Au=r,this.Ru=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw GDe("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Ru=!1,r))));return this.gu=n,n}enqueueAfterDelay(t,n,r){this.pu(),this.mu.indexOf(t)>-1&&(n=0);const i=qQ.createAndSchedule(this,t,n,r,s=>this.Su(s));return this.Eu.push(i),i}pu(){this.Au&&KDe()}verifyOperationInProgress(){}async bu(){let t;do t=this.gu,await t;while(t!==this.gu)}Du(t){for(const n of this.Eu)if(n.timerId===t)return!0;return!1}vu(t){return this.bu().then(()=>{this.Eu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Eu)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.bu()})}Cu(t){this.mu.push(t)}Su(t){const n=this.Eu.indexOf(t);this.Eu.splice(n,1)}}class C7t extends T7t{constructor(t,n,r,i){super(t,n,r,i),this.type="firestore",this._queue=new Ehe,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new Ehe(t),this._firestoreClient=void 0,await t}}}(function(t,n=!0){(function(i){J6=i})(Mv),vp(new Tf("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new C7t(new m7t(r.getProvider("auth-internal")),new b7t(r.getProvider("app-check-internal")),function(u,c){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Nc(Pc.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new jN(u.options.projectId,c)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Wc(ghe,"4.7.6",t),Wc(ghe,"4.7.6","esm2017")})();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S7t=new Map,A7t={activated:!1,tokenObservers:[]};function ad(e){return S7t.get(e)||Object.assign({},A7t)}const _he={RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k7t{constructor(t,n,r,i,s){if(this.operation=t,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(t){this.stop();try{this.pending=new aj,this.pending.promise.catch(n=>{}),await I7t(this.getNextRun(t)),this.pending.resolve(),await this.pending.promise,this.pending=new aj,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function I7t(e){return new Promise(t=>{setTimeout(t,e)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R7t={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},BN=new Ux("appCheck","AppCheck",R7t);function XDe(e){if(!ad(e).activated)throw BN.create("use-before-activation",{appName:e.name})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D7t="firebase-app-check-database",P7t=1,zz="firebase-app-check-store";let wR=null;function N7t(){return wR||(wR=new Promise((e,t)=>{try{const n=indexedDB.open(D7t,P7t);n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{var i;t(BN.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{const i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(zz,{keyPath:"compositeKey"})}}}catch(n){t(BN.create("storage-open",{originalErrorMessage:n==null?void 0:n.message}))}}),wR)}function O7t(e,t){return $7t(M7t(e),t)}async function $7t(e,t){const r=(await N7t()).transaction(zz,"readwrite"),s=r.objectStore(zz).put({compositeKey:e,value:t});return new Promise((o,a)=>{s.onsuccess=l=>{o()},r.onerror=l=>{var u;a(BN.create("storage-set",{originalErrorMessage:(u=l.target.error)===null||u===void 0?void 0:u.message}))}})}function M7t(e){return`${e.options.appId}-${e.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uz=new BO("@firebase/app-check");function The(e,t){return ive()?O7t(e,t).catch(n=>{Uz.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L7t={error:"UNKNOWN_ERROR"};function F7t(e){return NH.encodeString(JSON.stringify(e),!1)}async function qz(e,t=!1){const n=e.app;XDe(n);const r=ad(n);let i=r.token,s;if(i&&!D2(i)&&(r.token=void 0,i=void 0),!i){const l=await r.cachedTokenPromise;l&&(D2(l)?i=l:await The(n,void 0))}if(!t&&i&&D2(i))return{token:i.token};let o=!1;try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=await ad(n).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"?Uz.warn(l.message):Uz.error(l),s=l}let a;return i?s?D2(i)?a={token:i.token,internalError:s}:a=She(s):(a={token:i.token},r.token=i,await The(n,i)):a=She(s),o&&U7t(n,a),a}async function j7t(e){const t=e.app;XDe(t);const{provider:n}=ad(t);{const{token:r}=await n.getToken();return{token:r}}}function B7t(e,t,n,r){const{app:i}=e,s=ad(i),o={next:n,error:r,type:t};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&D2(s.token)){const a=s.token;Promise.resolve().then(()=>{n({token:a.token}),Che(e)}).catch(()=>{})}s.cachedTokenPromise.then(()=>Che(e))}function QDe(e,t){const n=ad(e),r=n.tokenObservers.filter(i=>i.next!==t);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function Che(e){const{app:t}=e,n=ad(t);let r=n.tokenRefresher;r||(r=z7t(e),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function z7t(e){const{app:t}=e;return new k7t(async()=>{const n=ad(t);let r;if(n.token?r=await qz(e,!0):r=await qz(e),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{const n=ad(t);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},_he.RETRIAL_MIN_WAIT,_he.RETRIAL_MAX_WAIT)}function U7t(e,t){const n=ad(e).tokenObservers;for(const r of n)try{r.type==="EXTERNAL"&&t.error!=null?r.error(t.error):r.next(t)}catch{}}function D2(e){return e.expireTimeMillis-Date.now()>0}function She(e){return{token:F7t(L7t),error:e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q7t{constructor(t,n){this.app=t,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:t}=ad(this.app);for(const n of t)QDe(this.app,n.next);return Promise.resolve()}}function H7t(e,t){return new q7t(e,t)}function W7t(e){return{getToken:t=>qz(e,t),getLimitedUseToken:()=>j7t(e),addTokenListener:t=>B7t(e,"INTERNAL",t),removeTokenListener:t=>QDe(e.app,t)}}const V7t="@firebase/app-check",G7t="0.8.11",Y7t="app-check",Ahe="app-check-internal";function K7t(){vp(new Tf(Y7t,e=>{const t=e.getProvider("app").getImmediate(),n=e.getProvider("heartbeat");return H7t(t,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider(Ahe).initialize()})),vp(new Tf(Ahe,e=>{const t=e.getProvider("app-check").getImmediate();return W7t(t)},"PUBLIC").setInstantiationMode("EXPLICIT")),Wc(V7t,G7t)}K7t();const X7t=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Jy(async()=>{const{default:r}=await Promise.resolve().then(()=>dA);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)};class HQ extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class Q7t extends HQ{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class khe extends HQ{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Ihe extends HQ{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Hz;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Hz||(Hz={}));var J7t=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{u(r.next(c))}catch(d){o(d)}}function l(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};class Z7t{constructor(t,{headers:n={},customFetch:r,region:i=Hz.Any}={}){this.url=t,this.headers=n,this.region=i,this.fetch=X7t(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,n={}){var r;return J7t(this,void 0,void 0,function*(){try{const{headers:i,method:s,body:o}=n;let a={},{region:l}=n;l||(l=this.region);const u=new URL(`${this.url}/${t}`);l&&l!=="any"&&(a["x-region"]=l,u.searchParams.set("forceFunctionRegion",l));let c;o&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",c=o):typeof o=="string"?(a["Content-Type"]="text/plain",c=o):typeof FormData<"u"&&o instanceof FormData?c=o:(a["Content-Type"]="application/json",c=JSON.stringify(o)));const d=yield this.fetch(u.toString(),{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),i),body:c}).catch(m=>{throw new Q7t(m)}),f=d.headers.get("x-relay-error");if(f&&f==="true")throw new khe(d);if(!d.ok)throw new Ihe(d);let h=((r=d.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),p;return h==="application/json"?p=yield d.json():h==="application/octet-stream"?p=yield d.blob():h==="text/event-stream"?p=d:h==="multipart/form-data"?p=yield d.formData():p=yield d.text(),{data:p,error:null,response:d}}catch(i){return{data:null,error:i,response:i instanceof Ihe||i instanceof khe?i.context:void 0}}})}}var ks={},hb={},pb={},mb={},gb={},yb={},ezt=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},mx=ezt();const tzt=mx.fetch,JDe=mx.fetch.bind(mx),ZDe=mx.Headers,nzt=mx.Request,rzt=mx.Response,dA=Object.freeze(Object.defineProperty({__proto__:null,Headers:ZDe,Request:nzt,Response:rzt,default:JDe,fetch:tzt},Symbol.toStringTag,{value:"Module"})),izt=tpe(dA);var xR={},Rhe;function ePe(){if(Rhe)return xR;Rhe=1,Object.defineProperty(xR,"__esModule",{value:!0});class e extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return xR.default=e,xR}var Dhe;function tPe(){if(Dhe)return yb;Dhe=1;var e=yb&&yb.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(yb,"__esModule",{value:!0});const t=e(izt),n=e(ePe());class r{constructor(s){this.shouldThrowOnError=!1,this.method=s.method,this.url=s.url,this.headers=s.headers,this.schema=s.schema,this.body=s.body,this.shouldThrowOnError=s.shouldThrowOnError,this.signal=s.signal,this.isMaybeSingle=s.isMaybeSingle,s.fetch?this.fetch=s.fetch:typeof fetch>"u"?this.fetch=t.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(s,o){return this.headers=Object.assign({},this.headers),this.headers[s]=o,this}then(s,o){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const a=this.fetch;let l=a(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async u=>{var c,d,f;let h=null,p=null,m=null,g=u.status,b=u.statusText;if(u.ok){if(this.method!=="HEAD"){const _=await u.text();_===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?p=_:p=JSON.parse(_))}const x=(c=this.headers.Prefer)===null||c===void 0?void 0:c.match(/count=(exact|planned|estimated)/),E=(d=u.headers.get("content-range"))===null||d===void 0?void 0:d.split("/");x&&E&&E.length>1&&(m=parseInt(E[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(p)&&(p.length>1?(h={code:"PGRST116",details:`Results contain ${p.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},p=null,m=null,g=406,b="Not Acceptable"):p.length===1?p=p[0]:p=null)}else{const x=await u.text();try{h=JSON.parse(x),Array.isArray(h)&&u.status===404&&(p=[],h=null,g=200,b="OK")}catch{u.status===404&&x===""?(g=204,b="No Content"):h={message:x}}if(h&&this.isMaybeSingle&&(!((f=h==null?void 0:h.details)===null||f===void 0)&&f.includes("0 rows"))&&(h=null,g=200,b="OK"),h&&this.shouldThrowOnError)throw new n.default(h)}return{error:h,data:p,count:m,status:g,statusText:b}});return this.shouldThrowOnError||(l=l.catch(u=>{var c,d,f;return{error:{message:`${(c=u==null?void 0:u.name)!==null&&c!==void 0?c:"FetchError"}: ${u==null?void 0:u.message}`,details:`${(d=u==null?void 0:u.stack)!==null&&d!==void 0?d:""}`,hint:"",code:`${(f=u==null?void 0:u.code)!==null&&f!==void 0?f:""}`},data:null,count:null,status:0,statusText:""}})),l.then(s,o)}returns(){return this}overrideTypes(){return this}}return yb.default=r,yb}var Phe;function nPe(){if(Phe)return gb;Phe=1;var e=gb&&gb.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(gb,"__esModule",{value:!0});const t=e(tPe());class n extends t.default{select(i){let s=!1;const o=(i??"*").split("").map(a=>/\s/.test(a)&&!s?"":(a==='"'&&(s=!s),a)).join("");return this.url.searchParams.set("select",o),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(i,{ascending:s=!0,nullsFirst:o,foreignTable:a,referencedTable:l=a}={}){const u=l?`${l}.order`:"order",c=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${c?`${c},`:""}${i}.${s?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:s,referencedTable:o=s}={}){const a=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(a,`${i}`),this}range(i,s,{foreignTable:o,referencedTable:a=o}={}){const l=typeof a>"u"?"offset":`${a}.offset`,u=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(l,`${i}`),this.url.searchParams.set(u,`${s-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:i=!1,verbose:s=!1,settings:o=!1,buffers:a=!1,wal:l=!1,format:u="text"}={}){var c;const d=[i?"analyze":null,s?"verbose":null,o?"settings":null,a?"buffers":null,l?"wal":null].filter(Boolean).join("|"),f=(c=this.headers.Accept)!==null&&c!==void 0?c:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${u}; for="${f}"; options=${d};`,u==="json"?this:this}rollback(){var i;return((i=this.headers.Prefer)!==null&&i!==void 0?i:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return gb.default=n,gb}var Nhe;function WQ(){if(Nhe)return mb;Nhe=1;var e=mb&&mb.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(mb,"__esModule",{value:!0});const t=e(nPe());class n extends t.default{eq(i,s){return this.url.searchParams.append(i,`eq.${s}`),this}neq(i,s){return this.url.searchParams.append(i,`neq.${s}`),this}gt(i,s){return this.url.searchParams.append(i,`gt.${s}`),this}gte(i,s){return this.url.searchParams.append(i,`gte.${s}`),this}lt(i,s){return this.url.searchParams.append(i,`lt.${s}`),this}lte(i,s){return this.url.searchParams.append(i,`lte.${s}`),this}like(i,s){return this.url.searchParams.append(i,`like.${s}`),this}likeAllOf(i,s){return this.url.searchParams.append(i,`like(all).{${s.join(",")}}`),this}likeAnyOf(i,s){return this.url.searchParams.append(i,`like(any).{${s.join(",")}}`),this}ilike(i,s){return this.url.searchParams.append(i,`ilike.${s}`),this}ilikeAllOf(i,s){return this.url.searchParams.append(i,`ilike(all).{${s.join(",")}}`),this}ilikeAnyOf(i,s){return this.url.searchParams.append(i,`ilike(any).{${s.join(",")}}`),this}is(i,s){return this.url.searchParams.append(i,`is.${s}`),this}in(i,s){const o=Array.from(new Set(s)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(i,`in.(${o})`),this}contains(i,s){return typeof s=="string"?this.url.searchParams.append(i,`cs.${s}`):Array.isArray(s)?this.url.searchParams.append(i,`cs.{${s.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(s)}`),this}containedBy(i,s){return typeof s=="string"?this.url.searchParams.append(i,`cd.${s}`):Array.isArray(s)?this.url.searchParams.append(i,`cd.{${s.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(s)}`),this}rangeGt(i,s){return this.url.searchParams.append(i,`sr.${s}`),this}rangeGte(i,s){return this.url.searchParams.append(i,`nxl.${s}`),this}rangeLt(i,s){return this.url.searchParams.append(i,`sl.${s}`),this}rangeLte(i,s){return this.url.searchParams.append(i,`nxr.${s}`),this}rangeAdjacent(i,s){return this.url.searchParams.append(i,`adj.${s}`),this}overlaps(i,s){return typeof s=="string"?this.url.searchParams.append(i,`ov.${s}`):this.url.searchParams.append(i,`ov.{${s.join(",")}}`),this}textSearch(i,s,{config:o,type:a}={}){let l="";a==="plain"?l="pl":a==="phrase"?l="ph":a==="websearch"&&(l="w");const u=o===void 0?"":`(${o})`;return this.url.searchParams.append(i,`${l}fts${u}.${s}`),this}match(i){return Object.entries(i).forEach(([s,o])=>{this.url.searchParams.append(s,`eq.${o}`)}),this}not(i,s,o){return this.url.searchParams.append(i,`not.${s}.${o}`),this}or(i,{foreignTable:s,referencedTable:o=s}={}){const a=o?`${o}.or`:"or";return this.url.searchParams.append(a,`(${i})`),this}filter(i,s,o){return this.url.searchParams.append(i,`${s}.${o}`),this}}return mb.default=n,mb}var Ohe;function rPe(){if(Ohe)return pb;Ohe=1;var e=pb&&pb.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(pb,"__esModule",{value:!0});const t=e(WQ());class n{constructor(i,{headers:s={},schema:o,fetch:a}){this.url=i,this.headers=s,this.schema=o,this.fetch=a}select(i,{head:s=!1,count:o}={}){const a=s?"HEAD":"GET";let l=!1;const u=(i??"*").split("").map(c=>/\s/.test(c)&&!l?"":(c==='"'&&(l=!l),c)).join("");return this.url.searchParams.set("select",u),o&&(this.headers.Prefer=`count=${o}`),new t.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(i,{count:s,defaultToNull:o=!0}={}){const a="POST",l=[];if(this.headers.Prefer&&l.push(this.headers.Prefer),s&&l.push(`count=${s}`),o||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(i)){const u=i.reduce((c,d)=>c.concat(Object.keys(d)),[]);if(u.length>0){const c=[...new Set(u)].map(d=>`"${d}"`);this.url.searchParams.set("columns",c.join(","))}}return new t.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:this.fetch,allowEmpty:!1})}upsert(i,{onConflict:s,ignoreDuplicates:o=!1,count:a,defaultToNull:l=!0}={}){const u="POST",c=[`resolution=${o?"ignore":"merge"}-duplicates`];if(s!==void 0&&this.url.searchParams.set("on_conflict",s),this.headers.Prefer&&c.push(this.headers.Prefer),a&&c.push(`count=${a}`),l||c.push("missing=default"),this.headers.Prefer=c.join(","),Array.isArray(i)){const d=i.reduce((f,h)=>f.concat(Object.keys(h)),[]);if(d.length>0){const f=[...new Set(d)].map(h=>`"${h}"`);this.url.searchParams.set("columns",f.join(","))}}return new t.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:this.fetch,allowEmpty:!1})}update(i,{count:s}={}){const o="PATCH",a=[];return this.headers.Prefer&&a.push(this.headers.Prefer),s&&a.push(`count=${s}`),this.headers.Prefer=a.join(","),new t.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:this.fetch,allowEmpty:!1})}delete({count:i}={}){const s="DELETE",o=[];return i&&o.push(`count=${i}`),this.headers.Prefer&&o.unshift(this.headers.Prefer),this.headers.Prefer=o.join(","),new t.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return pb.default=n,pb}var H_={},W_={},$he;function szt(){return $he||($he=1,Object.defineProperty(W_,"__esModule",{value:!0}),W_.version=void 0,W_.version="0.0.0-automated"),W_}var Mhe;function ozt(){if(Mhe)return H_;Mhe=1,Object.defineProperty(H_,"__esModule",{value:!0}),H_.DEFAULT_HEADERS=void 0;const e=szt();return H_.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${e.version}`},H_}var Lhe;function azt(){if(Lhe)return hb;Lhe=1;var e=hb&&hb.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(hb,"__esModule",{value:!0});const t=e(rPe()),n=e(WQ()),r=ozt();class i{constructor(o,{headers:a={},schema:l,fetch:u}={}){this.url=o,this.headers=Object.assign(Object.assign({},r.DEFAULT_HEADERS),a),this.schemaName=l,this.fetch=u}from(o){const a=new URL(`${this.url}/${o}`);return new t.default(a,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(o){return new i(this.url,{headers:this.headers,schema:o,fetch:this.fetch})}rpc(o,a={},{head:l=!1,get:u=!1,count:c}={}){let d;const f=new URL(`${this.url}/rpc/${o}`);let h;l||u?(d=l?"HEAD":"GET",Object.entries(a).filter(([m,g])=>g!==void 0).map(([m,g])=>[m,Array.isArray(g)?`{${g.join(",")}}`:`${g}`]).forEach(([m,g])=>{f.searchParams.append(m,g)})):(d="POST",h=a);const p=Object.assign({},this.headers);return c&&(p.Prefer=`count=${c}`),new n.default({method:d,url:f,headers:p,schema:this.schemaName,body:h,fetch:this.fetch,allowEmpty:!1})}}return hb.default=i,hb}var Fhe;function lzt(){if(Fhe)return ks;Fhe=1;var e=ks&&ks.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(ks,"__esModule",{value:!0}),ks.PostgrestError=ks.PostgrestBuilder=ks.PostgrestTransformBuilder=ks.PostgrestFilterBuilder=ks.PostgrestQueryBuilder=ks.PostgrestClient=void 0;const t=e(azt());ks.PostgrestClient=t.default;const n=e(rPe());ks.PostgrestQueryBuilder=n.default;const r=e(WQ());ks.PostgrestFilterBuilder=r.default;const i=e(nPe());ks.PostgrestTransformBuilder=i.default;const s=e(tPe());ks.PostgrestBuilder=s.default;const o=e(ePe());return ks.PostgrestError=o.default,ks.default={PostgrestClient:t.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:i.default,PostgrestBuilder:s.default,PostgrestError:o.default},ks}var uzt=lzt();const czt=vl(uzt),{PostgrestClient:dzt,PostgrestQueryBuilder:tHt,PostgrestFilterBuilder:nHt,PostgrestTransformBuilder:rHt,PostgrestBuilder:iHt,PostgrestError:sHt}=czt;function fzt(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const hzt=fzt(),pzt="2.11.15",mzt=`realtime-js/${pzt}`,gzt="1.0.0",iPe=1e4,yzt=1e3;var hT;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(hT||(hT={}));var Mo;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Mo||(Mo={}));var _c;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(_c||(_c={}));var Wz;(function(e){e.websocket="websocket"})(Wz||(Wz={}));var cy;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(cy||(cy={}));class vzt{constructor(){this.HEADER_LENGTH=1}decode(t,n){return t.constructor===ArrayBuffer?n(this._binaryDecode(t)):n(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const n=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,n,r)}_decodeBroadcast(t,n,r){const i=n.getUint8(1),s=n.getUint8(2);let o=this.HEADER_LENGTH+2;const a=r.decode(t.slice(o,o+i));o=o+i;const l=r.decode(t.slice(o,o+s));o=o+s;const u=JSON.parse(r.decode(t.slice(o,t.byteLength)));return{ref:null,topic:a,event:l,payload:u}}}class sPe{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var zr;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(zr||(zr={}));const jhe=(e,t,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(t).reduce((s,o)=>(s[o]=bzt(o,e,t,i),s),{})},bzt=(e,t,n,r)=>{const i=t.find(a=>a.name===e),s=i==null?void 0:i.type,o=n[e];return s&&!r.includes(s)?oPe(s,o):Vz(o)},oPe=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return _zt(t,n)}switch(e){case zr.bool:return wzt(t);case zr.float4:case zr.float8:case zr.int2:case zr.int4:case zr.int8:case zr.numeric:case zr.oid:return xzt(t);case zr.json:case zr.jsonb:return Ezt(t);case zr.timestamp:return Tzt(t);case zr.abstime:case zr.date:case zr.daterange:case zr.int4range:case zr.int8range:case zr.money:case zr.reltime:case zr.text:case zr.time:case zr.timestamptz:case zr.timetz:case zr.tsrange:case zr.tstzrange:return Vz(t);default:return Vz(t)}},Vz=e=>e,wzt=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},xzt=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},Ezt=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},_zt=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let s;const o=e.slice(1,n);try{s=JSON.parse("["+o+"]")}catch{s=o?o.split(","):[]}return s.map(a=>oPe(t,a))}return e},Tzt=e=>typeof e=="string"?e.replace(" ","T"):e,aPe=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class v9{constructor(t,n,r={},i=iPe){this.channel=t,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Bhe;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Bhe||(Bhe={}));class pT{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=pT.syncState(this.state,i,s,o),this.pendingDiffs.forEach(l=>{this.state=pT.syncDiff(this.state,l,s,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=pT.syncDiff(this.state,i,s,o),a())}),this.onJoin((i,s,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:o})}),this.onLeave((i,s,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,i){const s=this.cloneDeep(t),o=this.transformState(n),a={},l={};return this.map(s,(u,c)=>{o[u]||(l[u]=c)}),this.map(o,(u,c)=>{const d=s[u];if(d){const f=c.map(g=>g.presence_ref),h=d.map(g=>g.presence_ref),p=c.filter(g=>h.indexOf(g.presence_ref)<0),m=d.filter(g=>f.indexOf(g.presence_ref)<0);p.length>0&&(a[u]=p),m.length>0&&(l[u]=m)}else a[u]=c}),this.syncDiff(s,{joins:a,leaves:l},r,i)}static syncDiff(t,n,r,i){const{joins:s,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(s,(a,l)=>{var u;const c=(u=t[a])!==null&&u!==void 0?u:[];if(t[a]=this.cloneDeep(l),c.length>0){const d=t[a].map(h=>h.presence_ref),f=c.filter(h=>d.indexOf(h.presence_ref)<0);t[a].unshift(...f)}r(a,c,l)}),this.map(o,(a,l)=>{let u=t[a];if(!u)return;const c=l.map(d=>d.presence_ref);u=u.filter(d=>c.indexOf(d.presence_ref)<0),t[a]=u,i(a,u,l),u.length===0&&delete t[a]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const i=t[r];return"metas"in i?n[r]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):n[r]=i,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var zhe;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(zhe||(zhe={}));var Uhe;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Uhe||(Uhe={}));var Rh;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Rh||(Rh={}));class VQ{constructor(t,n={config:{}},r){this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=Mo.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new v9(this,_c.join,this.params,this.timeout),this.rejoinTimer=new sPe(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Mo.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Mo.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=Mo.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Mo.errored,this.rejoinTimer.scheduleTimeout())}),this._on(_c.reply,{},(i,s)=>{this._trigger(this._replyEventName(s),i)}),this.presence=new pT(this),this.broadcastEndpointURL=aPe(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,n=this.timeout){var r,i;if(this.socket.isConnected()||this.socket.connect(),this.state==Mo.closed){const{config:{broadcast:s,presence:o,private:a}}=this.params;this._onError(c=>t==null?void 0:t(Rh.CHANNEL_ERROR,c)),this._onClose(()=>t==null?void 0:t(Rh.CLOSED));const l={},u={broadcast:s,presence:o,postgres_changes:(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(c=>c.filter))!==null&&i!==void 0?i:[],private:a};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:u},l)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:c})=>{var d;if(this.socket.setAuth(),c===void 0){t==null||t(Rh.SUBSCRIBED);return}else{const f=this.bindings.postgres_changes,h=(d=f==null?void 0:f.length)!==null&&d!==void 0?d:0,p=[];for(let m=0;m<h;m++){const g=f[m],{filter:{event:b,schema:v,table:x,filter:E}}=g,_=c&&c[m];if(_&&_.event===b&&_.schema===v&&_.table===x&&_.filter===E)p.push(Object.assign(Object.assign({},g),{id:_.id}));else{this.unsubscribe(),this.state=Mo.errored,t==null||t(Rh.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=p,t&&t(Rh.SUBSCRIBED);return}}).receive("error",c=>{this.state=Mo.errored,t==null||t(Rh.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(c).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Rh.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this._on(t,n,r)}async send(t,n={}){var r,i;if(!this._canPush()&&t.type==="broadcast"){const{event:s,payload:o}=t,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=u.body)===null||i===void 0?void 0:i.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var o,a,l;const u=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&s("ok"),u.receive("ok",()=>s("ok")),u.receive("error",()=>s("error")),u.receive("timeout",()=>s("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Mo.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(_c.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new v9(this,_c.leave,{},t),r.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(t,n,r){const i=new AbortController,s=setTimeout(()=>i.abort(),r),o=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(s),o}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new v9(this,t,n,r);return this._canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var i,s;const o=t.toLocaleLowerCase(),{close:a,error:l,leave:u,join:c}=_c;if(r&&[a,l,u,c].indexOf(o)>=0&&r!==this._joinRef())return;let f=this._onMessage(o,n,r);if(n&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(h=>{var p,m,g;return((p=h.filter)===null||p===void 0?void 0:p.event)==="*"||((g=(m=h.filter)===null||m===void 0?void 0:m.event)===null||g===void 0?void 0:g.toLocaleLowerCase())===o}).map(h=>h.callback(f,r)):(s=this.bindings[o])===null||s===void 0||s.filter(h=>{var p,m,g,b,v,x;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in h){const E=h.id,_=(p=h.filter)===null||p===void 0?void 0:p.event;return E&&((m=n.ids)===null||m===void 0?void 0:m.includes(E))&&(_==="*"||(_==null?void 0:_.toLocaleLowerCase())===((g=n.data)===null||g===void 0?void 0:g.type.toLocaleLowerCase()))}else{const E=(v=(b=h==null?void 0:h.filter)===null||b===void 0?void 0:b.event)===null||v===void 0?void 0:v.toLocaleLowerCase();return E==="*"||E===((x=n==null?void 0:n.event)===null||x===void 0?void 0:x.toLocaleLowerCase())}else return h.type.toLocaleLowerCase()===o}).map(h=>{if(typeof f=="object"&&"ids"in f){const p=f.data,{schema:m,table:g,commit_timestamp:b,type:v,errors:x}=p;f=Object.assign(Object.assign({},{schema:m,table:g,commit_timestamp:b,eventType:v,new:{},old:{},errors:x}),this._getPayloadRecords(p))}h.callback(f,r)})}_isClosed(){return this.state===Mo.closed}_isJoined(){return this.state===Mo.joined}_isJoining(){return this.state===Mo.joining}_isLeaving(){return this.state===Mo.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const i=t.toLocaleLowerCase(),s={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&VQ.isEqual(i.filter,n))}),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(_c.close,{},t)}_onError(t){this._on(_c.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Mo.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=jhe(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=jhe(t.columns,t.old_record)),n}}const qhe=()=>{},Czt=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Szt{constructor(t,n){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=iPe,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=qhe,this.ref=0,this.logger=qhe,this.conn=null,this.sendBuffer=[],this.serializer=new vzt,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=s=>{let o;return s?o=s:typeof fetch>"u"?o=(...a)=>Jy(async()=>{const{default:l}=await import("./index-BbtBbZ3G.js");return{default:l}},[]).then(({default:l})=>l(...a)):o=fetch,(...a)=>o(...a)},this.endPoint=`${t}/${Wz.websocket}`,this.httpEndpoint=aPe(t),n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),(n!=null&&n.logLevel||n!=null&&n.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const i=(r=n==null?void 0:n.params)===null||r===void 0?void 0:r.apikey;if(i&&(this.accessTokenValue=i,this.apiKey=i),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:s=>[1e3,2e3,5e3,1e4][s-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(s,o)=>o(JSON.stringify(s)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new sPe(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch),n!=null&&n.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(n==null?void 0:n.worker)||!1,this.workerUrl=n==null?void 0:n.workerUrl}this.accessToken=(n==null?void 0:n.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=hzt),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:gzt}))}disconnect(t,n){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(r=>r.teardown()))}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case hT.connecting:return cy.Connecting;case hT.open:return cy.Open;case hT.closing:return cy.Closing;default:return cy.Closed}}isConnected(){return this.connectionState()===cy.Open}channel(t,n={config:{}}){const r=`realtime:${t}`,i=this.getChannels().find(s=>s.topic===r);if(i)return i;{const s=new VQ(`realtime:${t}`,n,this);return this.channels.push(s),s}}push(t){const{topic:n,event:r,payload:i,ref:s}=t,o=()=>{this.encode(t,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${n} ${r} (${s})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){let n=t||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const i={access_token:n,version:mzt};n&&r.updateJoinPayload(i),r.joinedOnce&&r._isJoined()&&r._push(_c.access_token,{access_token:n})}))}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(t=this.conn)===null||t===void 0||t.close(yzt,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,n=>{let{topic:r,event:i,payload:s,ref:o}=n;r==="phoenix"&&i==="phx_reply"&&this.heartbeatCallback(n.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${s.status||""} ${r} ${i} ${o&&"("+o+")"||""}`,s),Array.from(this.channels).filter(a=>a._isMember(r)).forEach(a=>a._trigger(i,s,o)),this.stateChangeCallbacks.message.forEach(a=>a(n))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(t=>t())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(t))}_onConnError(t){this.log("transport",`${t}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(_c.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${t}${r}${i}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([Czt],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}}class GQ extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Ps(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class Azt extends GQ{constructor(t,n){super(t),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Gz extends GQ{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}var kzt=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{u(r.next(c))}catch(d){o(d)}}function l(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};const lPe=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Jy(async()=>{const{default:r}=await Promise.resolve().then(()=>dA);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},Izt=()=>kzt(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Jy(()=>Promise.resolve().then(()=>dA),void 0)).Response:Response}),Yz=e=>{if(Array.isArray(e))return e.map(n=>Yz(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));t[i]=Yz(r)}),t};var l1=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{u(r.next(c))}catch(d){o(d)}}function l(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};const b9=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Rzt=(e,t,n)=>l1(void 0,void 0,void 0,function*(){const r=yield Izt();e instanceof r&&!(n!=null&&n.noResolveJson)?e.json().then(i=>{t(new Azt(b9(i),e.status||500))}).catch(i=>{t(new Gz(b9(i),i))}):t(new Gz(b9(e),e))}),Dzt=(e,t,n,r)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),r&&(i.body=JSON.stringify(r)),Object.assign(Object.assign({},i),n))};function fA(e,t,n,r,i,s){return l1(this,void 0,void 0,function*(){return new Promise((o,a)=>{e(n,Dzt(t,r,i,s)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>Rzt(l,a,r))})})}function zN(e,t,n,r){return l1(this,void 0,void 0,function*(){return fA(e,"GET",t,n,r)})}function Mm(e,t,n,r,i){return l1(this,void 0,void 0,function*(){return fA(e,"POST",t,r,i,n)})}function Pzt(e,t,n,r,i){return l1(this,void 0,void 0,function*(){return fA(e,"PUT",t,r,i,n)})}function Nzt(e,t,n,r){return l1(this,void 0,void 0,function*(){return fA(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function uPe(e,t,n,r,i){return l1(this,void 0,void 0,function*(){return fA(e,"DELETE",t,r,i,n)})}var Ya=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{u(r.next(c))}catch(d){o(d)}}function l(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};const Ozt={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Hhe={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class $zt{constructor(t,n={},r,i){this.url=t,this.headers=n,this.bucketId=r,this.fetch=lPe(i)}uploadOrUpdate(t,n,r,i){return Ya(this,void 0,void 0,function*(){try{let s;const o=Object.assign(Object.assign({},Hhe),i);let a=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&r instanceof Blob?(s=new FormData,s.append("cacheControl",o.cacheControl),l&&s.append("metadata",this.encodeMetadata(l)),s.append("",r)):typeof FormData<"u"&&r instanceof FormData?(s=r,s.append("cacheControl",o.cacheControl),l&&s.append("metadata",this.encodeMetadata(l))):(s=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),i!=null&&i.headers&&(a=Object.assign(Object.assign({},a),i.headers));const u=this._removeEmptyFolders(n),c=this._getFinalPath(u),d=yield this.fetch(`${this.url}/object/${c}`,Object.assign({method:t,body:s,headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{})),f=yield d.json();return d.ok?{data:{path:u,id:f.Id,fullPath:f.Key},error:null}:{data:null,error:f}}catch(s){if(Ps(s))return{data:null,error:s};throw s}})}upload(t,n,r){return Ya(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,r)})}uploadToSignedUrl(t,n,r,i){return Ya(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(t),o=this._getFinalPath(s),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",n);try{let l;const u=Object.assign({upsert:Hhe.upsert},i),c=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",u.cacheControl)):(l=r,c["cache-control"]=`max-age=${u.cacheControl}`,c["content-type"]=u.contentType);const d=yield this.fetch(a.toString(),{method:"PUT",body:l,headers:c}),f=yield d.json();return d.ok?{data:{path:s,fullPath:f.Key},error:null}:{data:null,error:f}}catch(l){if(Ps(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(t,n){return Ya(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t);const i=Object.assign({},this.headers);n!=null&&n.upsert&&(i["x-upsert"]="true");const s=yield Mm(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),o=new URL(this.url+s.url),a=o.searchParams.get("token");if(!a)throw new GQ("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:a},error:null}}catch(r){if(Ps(r))return{data:null,error:r};throw r}})}update(t,n,r){return Ya(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,r)})}move(t,n,r){return Ya(this,void 0,void 0,function*(){try{return{data:yield Mm(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(Ps(i))return{data:null,error:i};throw i}})}copy(t,n,r){return Ya(this,void 0,void 0,function*(){try{return{data:{path:(yield Mm(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(Ps(i))return{data:null,error:i};throw i}})}createSignedUrl(t,n,r){return Ya(this,void 0,void 0,function*(){try{let i=this._getFinalPath(t),s=yield Mm(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${o}`)},{data:s,error:null}}catch(i){if(Ps(i))return{data:null,error:i};throw i}})}createSignedUrls(t,n,r){return Ya(this,void 0,void 0,function*(){try{const i=yield Mm(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),s=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${s}`):null})),error:null}}catch(i){if(Ps(i))return{data:null,error:i};throw i}})}download(t,n){return Ya(this,void 0,void 0,function*(){const i=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=s?`?${s}`:"";try{const a=this._getFinalPath(t);return{data:yield(yield zN(this.fetch,`${this.url}/${i}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(Ps(a))return{data:null,error:a};throw a}})}info(t){return Ya(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const r=yield zN(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Yz(r),error:null}}catch(r){if(Ps(r))return{data:null,error:r};throw r}})}exists(t){return Ya(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield Nzt(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(Ps(r)&&r instanceof Gz){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,n){const r=this._getFinalPath(t),i=[],s=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";s!==""&&i.push(s);const a=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});l!==""&&i.push(l);let u=i.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${u}`)}}}remove(t){return Ya(this,void 0,void 0,function*(){try{return{data:yield uPe(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(Ps(n))return{data:null,error:n};throw n}})}list(t,n,r){return Ya(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},Ozt),n),{prefix:t||""});return{data:yield Mm(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(Ps(i))return{data:null,error:i};throw i}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const Mzt="2.7.1",Lzt={"X-Client-Info":`storage-js/${Mzt}`};var vb=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{u(r.next(c))}catch(d){o(d)}}function l(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};class Fzt{constructor(t,n={},r){this.url=t,this.headers=Object.assign(Object.assign({},Lzt),n),this.fetch=lPe(r)}listBuckets(){return vb(this,void 0,void 0,function*(){try{return{data:yield zN(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(Ps(t))return{data:null,error:t};throw t}})}getBucket(t){return vb(this,void 0,void 0,function*(){try{return{data:yield zN(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(Ps(n))return{data:null,error:n};throw n}})}createBucket(t,n={public:!1}){return vb(this,void 0,void 0,function*(){try{return{data:yield Mm(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Ps(r))return{data:null,error:r};throw r}})}updateBucket(t,n){return vb(this,void 0,void 0,function*(){try{return{data:yield Pzt(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Ps(r))return{data:null,error:r};throw r}})}emptyBucket(t){return vb(this,void 0,void 0,function*(){try{return{data:yield Mm(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(Ps(n))return{data:null,error:n};throw n}})}deleteBucket(t){return vb(this,void 0,void 0,function*(){try{return{data:yield uPe(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(Ps(n))return{data:null,error:n};throw n}})}}class jzt extends Fzt{constructor(t,n={},r){super(t,n,r)}from(t){return new $zt(this.url,this.headers,t,this.fetch)}}const Bzt="2.50.3";let P2="";typeof Deno<"u"?P2="deno":typeof document<"u"?P2="web":typeof navigator<"u"&&navigator.product==="ReactNative"?P2="react-native":P2="node";const zzt={"X-Client-Info":`supabase-js-${P2}/${Bzt}`},Uzt={headers:zzt},qzt={schema:"public"},Hzt={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Wzt={};var Vzt=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{u(r.next(c))}catch(d){o(d)}}function l(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};const Gzt=e=>{let t;return e?t=e:typeof fetch>"u"?t=JDe:t=fetch,(...n)=>t(...n)},Yzt=()=>typeof Headers>"u"?ZDe:Headers,Kzt=(e,t,n)=>{const r=Gzt(n),i=Yzt();return(s,o)=>Vzt(void 0,void 0,void 0,function*(){var a;const l=(a=yield t())!==null&&a!==void 0?a:e;let u=new i(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),r(s,Object.assign(Object.assign({},o),{headers:u}))})};var Xzt=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{u(r.next(c))}catch(d){o(d)}}function l(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};function Qzt(e){return e.endsWith("/")?e:e+"/"}function Jzt(e,t){var n,r;const{db:i,auth:s,realtime:o,global:a}=e,{db:l,auth:u,realtime:c,global:d}=t,f={db:Object.assign(Object.assign({},l),i),auth:Object.assign(Object.assign({},u),s),realtime:Object.assign(Object.assign({},c),o),global:Object.assign(Object.assign(Object.assign({},d),a),{headers:Object.assign(Object.assign({},(n=d==null?void 0:d.headers)!==null&&n!==void 0?n:{}),(r=a==null?void 0:a.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>Xzt(this,void 0,void 0,function*(){return""})};return e.accessToken?f.accessToken=e.accessToken:delete f.accessToken,f}const cPe="2.70.0",kb=30*1e3,Kz=3,w9=Kz*kb,Zzt="http://localhost:9999",eUt="supabase.auth.token",tUt={"X-Client-Info":`gotrue-js/${cPe}`},Xz="X-Supabase-Api-Version",dPe={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},nUt=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,rUt=6e5;class YQ extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function wn(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class iUt extends YQ{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function sUt(e){return wn(e)&&e.name==="AuthApiError"}class fPe extends YQ{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class cg extends YQ{constructor(t,n,r,i){super(t,r,i),this.name=n,this.status=r}}class Am extends cg{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function oUt(e){return wn(e)&&e.name==="AuthSessionMissingError"}class ER extends cg{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class _R extends cg{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class TR extends cg{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function aUt(e){return wn(e)&&e.name==="AuthImplicitGrantRedirectError"}class Whe extends cg{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Qz extends cg{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function x9(e){return wn(e)&&e.name==="AuthRetryableFetchError"}class Vhe extends cg{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class mT extends cg{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const UN="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Ghe=` 	
\r=`.split(""),lUt=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Ghe.length;t+=1)e[Ghe[t].charCodeAt(0)]=-2;for(let t=0;t<UN.length;t+=1)e[UN[t].charCodeAt(0)]=t;return e})();function Yhe(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(UN[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(UN[r]),t.queuedBits-=6}}function hPe(e,t,n){const r=lUt[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Khe(e){const t=[],n=o=>{t.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},s=o=>{dUt(o,r,n)};for(let o=0;o<e.length;o+=1)hPe(e.charCodeAt(o),i,s);return t.join("")}function uUt(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function cUt(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}uUt(r,t)}}function dUt(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if((e>>7-r&1)===0){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function fUt(e){const t=[],n={queue:0,queuedBits:0},r=i=>{t.push(i)};for(let i=0;i<e.length;i+=1)hPe(e.charCodeAt(i),n,r);return new Uint8Array(t)}function hUt(e){const t=[];return cUt(e,n=>t.push(n)),new Uint8Array(t)}function pUt(e){const t=[],n={queue:0,queuedBits:0},r=i=>{t.push(i)};return e.forEach(i=>Yhe(i,n,r)),Yhe(null,n,r),t.join("")}function mUt(e){return Math.round(Date.now()/1e3)+e}function gUt(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const yc=()=>typeof window<"u"&&typeof document<"u",zg={tested:!1,writable:!1},gT=()=>{if(!yc())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(zg.tested)return zg.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),zg.tested=!0,zg.writable=!0}catch{zg.tested=!0,zg.writable=!1}return zg.writable};function yUt(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,s)=>{t[s]=i})}catch{}return n.searchParams.forEach((r,i)=>{t[i]=r}),t}const pPe=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Jy(async()=>{const{default:r}=await Promise.resolve().then(()=>dA);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},vUt=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",mPe=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},CR=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},SR=async(e,t)=>{await e.removeItem(t)};class Z6{constructor(){this.promise=new Z6.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}Z6.promiseConstructor=Promise;function E9(e){const t=e.split(".");if(t.length!==3)throw new mT("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!nUt.test(t[r]))throw new mT("JWT not in base64url format");return{header:JSON.parse(Khe(t[0])),payload:JSON.parse(Khe(t[1])),signature:fUt(t[2]),raw:{header:t[0],payload:t[1]}}}async function bUt(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function wUt(e,t){return new Promise((r,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const o=await e(s);if(!t(s,null,o)){r(o);return}}catch(o){if(!t(s,o)){i(o);return}}})()})}function xUt(e){return("0"+e.toString(16)).substr(-2)}function EUt(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let s=0;s<56;s++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(t),Array.from(t,xUt).join("")}async function _Ut(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}async function TUt(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await _Ut(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function bb(e,t,n=!1){const r=EUt();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await mPe(e,`${t}-code-verifier`,i);const s=await TUt(r);return[s,r===s?"plain":"s256"]}const CUt=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function SUt(e){const t=e.headers.get(Xz);if(!t||!t.match(CUt))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function AUt(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function kUt(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const IUt=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function wb(e){if(!IUt.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var RUt=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const ey=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),DUt=[502,503,504];async function Xhe(e){var t;if(!vUt(e))throw new Qz(ey(e),0);if(DUt.includes(e.status))throw new Qz(ey(e),e.status);let n;try{n=await e.json()}catch(s){throw new fPe(ey(s),s)}let r;const i=SUt(e);if(i&&i.getTime()>=dPe["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Vhe(ey(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new Am}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((s,o)=>s&&typeof o=="string",!0))throw new Vhe(ey(n),e.status,n.weak_password.reasons);throw new iUt(ey(n),e.status||500,r)}const PUt=(e,t,n,r)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function Pn(e,t,n,r){var i;const s=Object.assign({},r==null?void 0:r.headers);s[Xz]||(s[Xz]=dPe["2024-01-01"].name),r!=null&&r.jwt&&(s.Authorization=`Bearer ${r.jwt}`);const o=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await NUt(e,t,n+a,{headers:s,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function NUt(e,t,n,r,i,s){const o=PUt(t,r,i,s);let a;try{a=await e(n,Object.assign({},o))}catch(l){throw console.error(l),new Qz(ey(l),0)}if(a.ok||await Xhe(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(l){await Xhe(l)}}function Sh(e){var t;let n=null;LUt(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=mUt(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function Qhe(e){const t=Sh(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Wm(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function OUt(e){return{data:e,error:null}}function $Ut(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s}=e,o=RUt(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function MUt(e){return e}function LUt(e){return e.access_token&&e.refresh_token&&e.expires_in}const _9=["global","local","others"];var FUt=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};class jUt{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=pPe(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,n=_9[0]){if(_9.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${_9.join(", ")}`);try{return await Pn(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(wn(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await Pn(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Wm})}catch(r){if(wn(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=FUt(t,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await Pn(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:$Ut,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(wn(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await Pn(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Wm})}catch(n){if(wn(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,i,s,o,a,l;try{const u={nextPage:null,lastPage:0,total:0},c=await Pn(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=t==null?void 0:t.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:MUt});if(c.error)throw c.error;const d=await c.json(),f=(o=c.headers.get("x-total-count"))!==null&&o!==void 0?o:0,h=(l=(a=c.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return h.length>0&&(h.forEach(p=>{const m=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),g=JSON.parse(p.split(";")[1].split("=")[1]);u[`${g}Page`]=m}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},d),u),error:null}}catch(u){if(wn(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){wb(t);try{return await Pn(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Wm})}catch(n){if(wn(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){wb(t);try{return await Pn(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:Wm})}catch(r){if(wn(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){wb(t);try{return await Pn(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:Wm})}catch(r){if(wn(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){wb(t.userId);try{const{data:n,error:r}=await Pn(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(wn(n))return{data:null,error:n};throw n}}async _deleteFactor(t){wb(t.userId),wb(t.id);try{return{data:await Pn(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(wn(n))return{data:null,error:n};throw n}}}const BUt={getItem:e=>gT()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{gT()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{gT()&&globalThis.localStorage.removeItem(e)}};function Jhe(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}function zUt(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const xb={debug:!!(globalThis&&gT()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class gPe extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class UUt extends gPe{}async function qUt(e,t,n){xb.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),xb.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){xb.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,i.name);try{return await n()}finally{xb.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,i.name)}}else{if(t===0)throw xb.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new UUt(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(xb.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}zUt();const HUt={url:Zzt,storageKey:eUt,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:tUt,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Zhe(e,t,n){return await n()}class SC{constructor(t){var n,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=SC.nextInstanceID,SC.nextInstanceID+=1,this.instanceID>0&&yc()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},HUt),t);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new jUt({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=pPe(i.fetch),this.lock=i.lock||Zhe,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:yc()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=qUt:this.lock=Zhe,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?i.storage?this.storage=i.storage:gT()?this.storage=BUt:(this.memoryStorage={},this.storage=Jhe(this.memoryStorage)):(this.memoryStorage={},this.storage=Jhe(this.memoryStorage)),yc()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${cPe}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const n=yUt(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),yc()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:s}=await this._getSessionFromURL(n,r);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),aUt(s)){const l=(t=s.details)===null||t===void 0?void 0:t.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:o,redirectType:a}=i;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return wn(n)?{error:n}:{error:new fPe("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,i;try{const s=await Pn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=t==null?void 0:t.options)===null||i===void 0?void 0:i.captchaToken}},xform:Sh}),{data:o,error:a}=s;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(s){if(wn(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(t){var n,r,i;try{let s;if("email"in t){const{email:c,password:d,options:f}=t;let h=null,p=null;this.flowType==="pkce"&&([h,p]=await bb(this.storage,this.storageKey)),s=await Pn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:c,password:d,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:h,code_challenge_method:p},xform:Sh})}else if("phone"in t){const{phone:c,password:d,options:f}=t;s=await Pn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:c,password:d,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},channel:(i=f==null?void 0:f.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Sh})}else throw new _R("You must provide either an email or phone number and a password");const{data:o,error:a}=s;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(s){if(wn(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(t){try{let n;if("email"in t){const{email:s,password:o,options:a}=t;n=await Pn(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Qhe})}else if("phone"in t){const{phone:s,password:o,options:a}=t;n=await Pn(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Qhe})}else throw new _R("You must provide either an email or phone number and a password");const{data:r,error:i}=n;return i?{data:{user:null,session:null},error:i}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new ER}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(wn(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(t){var n,r,i,s;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=t.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=t.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;if(n==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(t){var n,r,i,s,o,a,l,u,c,d,f,h;let p,m;if("message"in t)p=t.message,m=t.signature;else{const{chain:g,wallet:b,statement:v,options:x}=t;let E;if(yc())if(typeof b=="object")E=b;else{const C=window;if("solana"in C&&typeof C.solana=="object"&&("signIn"in C.solana&&typeof C.solana.signIn=="function"||"signMessage"in C.solana&&typeof C.solana.signMessage=="function"))E=C.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof b!="object"||!(x!=null&&x.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");E=b}const _=new URL((n=x==null?void 0:x.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in E&&E.signIn){const C=await E.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},x==null?void 0:x.signInWithSolana),{version:"1",domain:_.host,uri:_.href}),v?{statement:v}:null));let S;if(Array.isArray(C)&&C[0]&&typeof C[0]=="object")S=C[0];else if(C&&typeof C=="object"&&"signedMessage"in C&&"signature"in C)S=C;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in S&&"signature"in S&&(typeof S.signedMessage=="string"||S.signedMessage instanceof Uint8Array)&&S.signature instanceof Uint8Array)p=typeof S.signedMessage=="string"?S.signedMessage:new TextDecoder().decode(S.signedMessage),m=S.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in E)||typeof E.signMessage!="function"||!("publicKey"in E)||typeof E!="object"||!E.publicKey||!("toBase58"in E.publicKey)||typeof E.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");p=[`${_.host} wants you to sign in with your Solana account:`,E.publicKey.toBase58(),...v?["",v,""]:[""],"Version: 1",`URI: ${_.href}`,`Issued At: ${(i=(r=x==null?void 0:x.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((s=x==null?void 0:x.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${x.signInWithSolana.notBefore}`]:[],...!((o=x==null?void 0:x.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${x.signInWithSolana.expirationTime}`]:[],...!((a=x==null?void 0:x.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${x.signInWithSolana.chainId}`]:[],...!((l=x==null?void 0:x.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${x.signInWithSolana.nonce}`]:[],...!((u=x==null?void 0:x.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${x.signInWithSolana.requestId}`]:[],...!((d=(c=x==null?void 0:x.signInWithSolana)===null||c===void 0?void 0:c.resources)===null||d===void 0)&&d.length?["Resources",...x.signInWithSolana.resources.map(S=>`- ${S}`)]:[]].join(`
`);const C=await E.signMessage(new TextEncoder().encode(p),"utf8");if(!C||!(C instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");m=C}}try{const{data:g,error:b}=await Pn(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:p,signature:pUt(m)},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(h=t.options)===null||h===void 0?void 0:h.captchaToken}}:null),xform:Sh});if(b)throw b;return!g||!g.session||!g.user?{data:{user:null,session:null},error:new ER}:(g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),{data:Object.assign({},g),error:b})}catch(g){if(wn(g))return{data:{user:null,session:null},error:g};throw g}}async _exchangeCodeForSession(t){const n=await CR(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{const{data:s,error:o}=await Pn(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:Sh});if(await SR(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new ER}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:i??null}),error:o})}catch(s){if(wn(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}}async signInWithIdToken(t){try{const{options:n,provider:r,token:i,access_token:s,nonce:o}=t,a=await Pn(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:s,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Sh}),{data:l,error:u}=a;return u?{data:{user:null,session:null},error:u}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new ER}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:u})}catch(n){if(wn(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(t){var n,r,i,s,o;try{if("email"in t){const{email:a,options:l}=t;let u=null,c=null;this.flowType==="pkce"&&([u,c]=await bb(this.storage,this.storageKey));const{error:d}=await Pn(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:c},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:d}}if("phone"in t){const{phone:a,options:l}=t,{data:u,error:c}=await Pn(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(i=l==null?void 0:l.data)!==null&&i!==void 0?i:{},create_user:(s=l==null?void 0:l.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:c}}throw new _R("You must provide either an email or phone number.")}catch(a){if(wn(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(t){var n,r;try{let i,s;"options"in t&&(i=(n=t.options)===null||n===void 0?void 0:n.redirectTo,s=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await Pn(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:Sh});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,u=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(wn(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(t){var n,r,i;try{let s=null,o=null;return this.flowType==="pkce"&&([s,o]=await bb(this.storage,this.storageKey)),await Pn(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=t==null?void 0:t.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:o}),headers:this.headers,xform:OUt})}catch(s){if(wn(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new Am;const{error:i}=await Pn(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:i}})}catch(t){if(wn(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:i,options:s}=t,{error:o}=await Pn(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:r,type:i,options:s}=t,{data:o,error:a}=await Pn(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new _R("You must provide either an email or phone number and a type")}catch(n){if(wn(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await CR(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<w9:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.storage.isServer){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(l,u,c)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,u,c))})}return{data:{session:t},error:null}}const{session:i,error:s}=await this._callRefreshToken(t.refresh_token);return s?{data:{session:null},error:s}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await Pn(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Wm}):await this._useSession(async n=>{var r,i,s;const{data:o,error:a}=n;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Am}:await Pn(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0,xform:Wm})})}catch(n){if(wn(n))return oUt(n)&&(await this._removeSession(),await SR(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:i,error:s}=r;if(s)throw s;if(!i.session)throw new Am;const o=i.session;let a=null,l=null;this.flowType==="pkce"&&t.email!=null&&([a,l]=await bb(this.storage,this.storageKey));const{data:u,error:c}=await Pn(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:Wm});if(c)throw c;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(wn(r))return{data:{user:null},error:r};throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Am;const n=Date.now()/1e3;let r=n,i=!0,s=null;const{payload:o}=E9(t.access_token);if(o.exp&&(r=o.exp,i=r<=n),i){const{session:a,error:l}=await this._callRefreshToken(t.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};s=a}else{const{data:a,error:l}=await this._getUser(t.access_token);if(l)throw l;s={access_token:t.access_token,refresh_token:t.refresh_token,user:a.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(n){if(wn(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:o,error:a}=n;if(a)throw a;t=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new Am;const{session:i,error:s}=await this._callRefreshToken(t.refresh_token);return s?{data:{user:null,session:null},error:s}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(wn(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(t,n){try{if(!yc())throw new TR("No browser detected.");if(t.error||t.error_description||t.error_code)throw new TR(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Whe("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new TR("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Whe("No code detected.");const{data:v,error:x}=await this._exchangeCodeForSession(t.code);if(x)throw x;const E=new URL(window.location.href);return E.searchParams.delete("code"),window.history.replaceState(window.history.state,"",E.toString()),{data:{session:v.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:s,refresh_token:o,expires_in:a,expires_at:l,token_type:u}=t;if(!s||!a||!o||!u)throw new TR("No session defined in URL");const c=Math.round(Date.now()/1e3),d=parseInt(a);let f=c+d;l&&(f=parseInt(l));const h=f-c;h*1e3<=kb&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${h}s, should have been closer to ${d}s`);const p=f-d;c-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,f,c):c-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",p,f,c);const{data:m,error:g}=await this._getUser(s);if(g)throw g;const b={provider_token:r,provider_refresh_token:i,access_token:s,expires_in:d,expires_at:f,refresh_token:o,token_type:u,user:m.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:b,redirectType:t.type},error:null}}catch(r){if(wn(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await CR(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return{error:s};const o=(r=i.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,t);if(a&&!(sUt(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return t!=="others"&&(await this._removeSession(),await SR(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const n=gUt(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,i;try{const{data:{session:s},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",t,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",s),console.error(s)}})}async resetPasswordForEmail(t,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await bb(this.storage,this.storageKey,!0));try{return await Pn(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(s){if(wn(s))return{data:null,error:s};throw s}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(n){if(wn(n))return{data:null,error:n};throw n}}async linkIdentity(t){var n;try{const{data:r,error:i}=await this._useSession(async s=>{var o,a,l,u,c;const{data:d,error:f}=s;if(f)throw f;const h=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=t.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=t.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await Pn(this.fetch,"GET",h,{headers:this.headers,jwt:(c=(u=d.session)===null||u===void 0?void 0:u.access_token)!==null&&c!==void 0?c:void 0})});if(i)throw i;return yc()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:t.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(wn(r))return{data:{provider:t.provider,url:null},error:r};throw r}}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,i;const{data:s,error:o}=n;if(o)throw o;return await Pn(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(i=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(wn(n))return{data:null,error:n};throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await wUt(async i=>(i>0&&await bUt(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await Pn(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Sh})),(i,s)=>{const o=200*Math.pow(2,i);return s&&x9(s)&&Date.now()+o-r<kb})}catch(r){if(this._debug(n,"error",r),wn(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),yc()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await CR(this.storage,this.storageKey);if(this._debug(n,"session from storage",r),!this._isValidSession(r)){this._debug(n,"session is not valid"),r!==null&&await this._removeSession();return}const i=((t=r.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<w9;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${w9}s`),i){if(this.autoRefreshToken&&r.refresh_token){const{error:s}=await this._callRefreshToken(r.refresh_token);s&&(console.error(s),x9(s)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",s),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(n,"error",r),console.error(r);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new Am;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Z6;const{data:s,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!s.session)throw new Am;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const a={session:s.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(s){if(this._debug(i,"error",s),wn(s)){const o={session:null,error:s};return x9(s)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(t,n,r=!0){const i=`#_notifyAllSubscribers(${t})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const s=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(t,n)}catch(l){s.push(l)}});if(await Promise.all(o),s.length>0){for(let a=0;a<s.length;a+=1)console.error(s[a]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await mPe(this.storage,this.storageKey,t)}async _removeSession(){this._debug("#_removeSession()"),await SR(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&yc()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),kb);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-t)/kb);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${kb}ms, refresh threshold is ${Kz} ticks`),i<=Kz&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof gPe)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!yc()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[s,o]=await bb(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(a.toString())}if(r!=null&&r.queryParams){const s=new URLSearchParams(r.queryParams);i.push(s.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${i.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;return s?{data:null,error:s}:await Pn(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(wn(n))return{data:null,error:n};throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,i;const{data:s,error:o}=n;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:l,error:u}=await Pn(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(t.factorType==="totp"&&(!((i=l==null?void 0:l.totp)===null||i===void 0)&&i.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(n){if(wn(n))return{data:null,error:n};throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return{data:null,error:s};const{data:o,error:a}=await Pn(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(n){if(wn(n))return{data:null,error:n};throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;return s?{data:null,error:s}:await Pn(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(wn(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?{data:null,error:r}:await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){const{data:{user:t},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(t==null?void 0:t.factors)||[],i=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),s=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:i,phone:s},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var n,r;const{data:{session:i},error:s}=t;if(s)return{data:null,error:s};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=E9(i.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((r=(n=i.user.factors)===null||n===void 0?void 0:n.filter(d=>d.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const c=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:c},error:null}}))}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(o=>o.kid===t);if(r||(r=this.jwks.keys.find(o=>o.kid===t),r&&this.jwks_cached_at+rUt>Date.now()))return r;const{data:i,error:s}=await Pn(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(s)throw s;if(!i.keys||i.keys.length===0)throw new mT("JWKS is empty");if(this.jwks=i,this.jwks_cached_at=Date.now(),r=i.keys.find(o=>o.kid===t),!r)throw new mT("No matching signing key found in JWKS");return r}async getClaims(t,n={keys:[]}){try{let r=t;if(!r){const{data:h,error:p}=await this.getSession();if(p||!h.session)return{data:null,error:p};r=h.session.access_token}const{header:i,payload:s,signature:o,raw:{header:a,payload:l}}=E9(r);if(AUt(s.exp),!i.kid||i.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:h}=await this.getUser(r);if(h)throw h;return{data:{claims:s,header:i,signature:o},error:null}}const u=kUt(i.alg),c=await this.fetchJwk(i.kid,n),d=await crypto.subtle.importKey("jwk",c,u,!0,["verify"]);if(!await crypto.subtle.verify(u,d,o,hUt(`${a}.${l}`)))throw new mT("Invalid JWT signature");return{data:{claims:s,header:i,signature:o},error:null}}catch(r){if(wn(r))return{data:null,error:r};throw r}}}SC.nextInstanceID=0;const WUt=SC;class VUt extends WUt{constructor(t){super(t)}}var GUt=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{u(r.next(c))}catch(d){o(d)}}function l(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};class YUt{constructor(t,n,r){var i,s,o;if(this.supabaseUrl=t,this.supabaseKey=n,!t)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const a=Qzt(t),l=new URL(a);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const u=`sb-${l.hostname.split(".")[0]}-auth-token`,c={db:qzt,realtime:Wzt,auth:Object.assign(Object.assign({},Hzt),{storageKey:u}),global:Uzt},d=Jzt(r??{},c);this.storageKey=(i=d.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(s=d.global.headers)!==null&&s!==void 0?s:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(f,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=d.auth)!==null&&o!==void 0?o:{},this.headers,d.global.fetch),this.fetch=Kzt(n,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new dzt(new URL("rest/v1",l).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),d.accessToken||this._listenForAuthEvents()}get functions(){return new Z7t(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new jzt(this.storageUrl.href,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},r={}){return this.rest.rpc(t,n,r)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,n;return GUt(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:i,storageKey:s,flowType:o,lock:a,debug:l},u,c){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new VUt({url:this.authUrl.href,headers:Object.assign(Object.assign({},d),u),storageKey:s,autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:i,flowType:o,lock:a,debug:l,fetch:c,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new Szt(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(t,n,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:t==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const KUt=(e,t,n)=>new YUt(e,t,n);class XUt extends UDe{constructor(n=!1){super("supabase",n);Wa(this,"supabase",KUt("https://olmo.datsi.fi.upm.es/revisitDB","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyAgCiAgICAicm9sZSI6ICJhbm9uIiwKICAgICJpc3MiOiAic3VwYWJhc2UtZGVtbyIsCiAgICAiaWF0IjogMTY0MTc2OTIwMCwKICAgICJleHAiOiAxNzk5NTM1NjAwCn0.dc_X5iR_VP_qT0zsiyj_I_OZ2T9FtRU2BBNWN8Bu4GE"))}async _getFromStorage(n,r,i){const{data:s,error:o}=await this.supabase.storage.from("revisit").download(`${this.collectionPrefix}${i||this.studyId}/${n}_${r}`);if(o)return{};const a=this.testing?new Blob([s],{type:"application/json"}):s;try{const l=await a.text();return JSON.parse(l)}catch{return a}}async _pushToStorage(n,r,i){await this.verifyStudyDatabase();let s=new Blob;i instanceof Blob?s=this.testing?Buffer.from(JSON.stringify(i)):i:s=new Blob([JSON.stringify(i)],{type:"application/json"});const{error:o}=await this.supabase.storage.from("revisit").upload(`${this.collectionPrefix}${this.studyId}/${n}_${r}`,s,{upsert:!0});if(o)throw new Error("Failed to upload to Supabase")}async _deleteFromStorage(n,r){await this.verifyStudyDatabase();const{error:i}=await this.supabase.storage.from("revisit").remove([`${this.collectionPrefix}${this.studyId}/${n}_${r}`]);if(i)throw new Error("Failed to delete from Supabase")}async _cacheStorageObject(n,r){await this.verifyStudyDatabase();const{data:i,error:s}=await this.supabase.storage.from("revisit").download(`${this.collectionPrefix}${this.studyId}/${n}_${r}`);if(s||!i)throw new Error("Failed to download object for cache update");const{error:o}=await this.supabase.storage.from("revisit").upload(`${this.collectionPrefix}${this.studyId}/${n}_${r}`,i,{upsert:!0,cacheControl:"31536000"});if(o)throw new Error("Failed to update cache header for Supabase object")}async _verifyStudyDatabase(){const{error:n}=await this.supabase.from("revisit").select("*").eq("studyId",`${this.collectionPrefix}${this.studyId}`);if(n||!this.studyId)throw new Error("Study database not initialized or does not exist")}async _getCurrentConfigHash(){var r;await this.verifyStudyDatabase();const{data:n}=await this.supabase.from("revisit").select("data").eq("studyId",`${this.collectionPrefix}${this.studyId}`).eq("docId","currentConfigHash").single();return((r=n==null?void 0:n.data)==null?void 0:r.configHash)||null}async _setCurrentConfigHash(n){await this.verifyStudyDatabase(),await this.supabase.from("revisit").upsert({studyId:`${this.collectionPrefix}${this.studyId}`,docId:"currentConfigHash",data:{configHash:n}}).eq("studyId",`${this.collectionPrefix}${this.studyId}`).eq("docId","currentConfigHash")}async _getAllSequenceAssignments(n){const{data:r,error:i}=await this.supabase.from("revisit").select("data, createdAt").eq("studyId",`${this.collectionPrefix}${n}`).like("docId","sequenceAssignment_%");if(i)throw new Error("Failed to get sequence assignments");return r.map(s=>({...s.data,timestamp:s.data.withServerTimestamp?new Date(s.createdAt).getTime():s.data.timestamp,createdTime:new Date(s.createdAt).getTime()})).sort((s,o)=>s.timestamp-o.timestamp)}async _createSequenceAssignment(n,r,i=!1){if(await this.verifyStudyDatabase(),!this.studyId)throw new Error("Study ID is not set");await this.supabase.from("revisit").upsert({studyId:`${this.collectionPrefix}${this.studyId}`,docId:`sequenceAssignment_${n}`,data:{...r,withServerTimestamp:i}}).eq("studyId",`${this.collectionPrefix}${this.studyId}`).eq("docId",`sequenceAssignment_${n}`)}async _completeCurrentParticipantRealtime(){if(await this.verifyStudyDatabase(),!this.currentParticipantId)throw new Error("Participant not initialized");if(!this.studyId)throw new Error("Study ID is not set");const{data:n,error:r}=await this.supabase.from("revisit").select("data").eq("studyId",`${this.collectionPrefix}${this.studyId}`).eq("docId",`sequenceAssignment_${this.currentParticipantId}`).single();if(r||!n)throw new Error("Failed to retrieve sequence assignment for current participant");const i=`sequenceAssignment_${this.currentParticipantId}`;await this.supabase.from("revisit").update({data:{...n.data,completed:new Date().getTime()}}).eq("studyId",`${this.collectionPrefix}${this.studyId}`).eq("docId",i)}async _rejectParticipantRealtime(n){if(await this.verifyStudyDatabase(),!this.currentParticipantId)throw new Error("Participant not initialized");if(!this.studyId)throw new Error("Study ID is not set");const r=`sequenceAssignment_${n}`,{data:i,error:s}=await this.supabase.from("revisit").select("data").eq("studyId",`${this.collectionPrefix}${this.studyId}`).eq("docId",r).single();if(s||!i)throw new Error("Failed to retrieve sequence assignment for current participant");await this.supabase.from("revisit").update({data:{...i.data,rejected:!0,timestamp:new Date().getTime()}}).eq("studyId",`${this.collectionPrefix}${this.studyId}`).eq("docId",r);const{data:o,error:a}=await this.supabase.from("revisit").select("data").eq("studyId",`${this.collectionPrefix}${this.studyId}`).eq("data->timestamp",i.data.timestamp).single();if(a||!o)throw new Error("Failed to retrieve claimed sequence assignment for rejection");await this.supabase.from("revisit").update({data:{...o.data,claimed:!1}}).eq("studyId",`${this.collectionPrefix}${this.studyId}`).eq("docId",`sequenceAssignment_${o.data.participantId}`)}async _claimSequenceAssignment(n,r){if(await this.verifyStudyDatabase(),!this.currentParticipantId)throw new Error("Participant not initialized");if(!this.studyId)throw new Error("Study ID is not set");const i=`sequenceAssignment_${n}`;await this.supabase.from("revisit").update({data:{...r,claimed:!0}}).eq("studyId",`${this.collectionPrefix}${this.studyId}`).eq("docId",i)}async initializeStudyDb(n){const{error:r}=await this.supabase.auth.signInAnonymously(),{error:i}=await this.supabase.from("revisit").upsert({studyId:`${this.collectionPrefix}${n}`,docId:"connect",data:{}});this.studyId=n,(r||i&&i.code!=="23505")&&console.error("Error initializing study DB:",r||i)}async connect(){return new Promise((n,r)=>{this.supabase?(this.connected=!0,n()):r(new Error("Failed to connect to Supabase"))})}async getModes(n){const{data:r,error:i}=await this.supabase.from("revisit").select("data").eq("studyId",`${this.collectionPrefix}${n}`).eq("docId","metadata");if(i)throw new Error("Failed to get modes");if(r.length>0){const o=r[0].data;if(o)return o}const s={dataCollectionEnabled:!0,studyNavigatorEnabled:!0,analyticsInterfacePubliclyAccessible:!0};return await this.supabase.from("revisit").upsert({studyId:`${this.collectionPrefix}${n}`,docId:"metadata",data:s}).eq("studyId",`${this.collectionPrefix}${n}`).eq("docId","metadata"),s}async setMode(n,r,i){const s=await this.getModes(n);s[r]=i,await this.supabase.from("revisit").upsert({studyId:`${this.collectionPrefix}${n}`,docId:"metadata",data:s}).eq("studyId",`${this.collectionPrefix}${n}`).eq("docId","metadata")}async _getAudioUrl(n,r){await this.verifyStudyDatabase();const i=r||this.currentParticipantId;if(!i)throw new Error("Participant not initialized");const s=await this._getFromStorage(`/audio/${i}`,n);return s?URL.createObjectURL(s):null}async _testingReset(n){const{error:r}=await this.supabase.from("revisit").delete().eq("studyId",`${this.collectionPrefix}${n}`);if(r)throw new Error("Failed to reset study database");const{data:i,error:s}=await this.supabase.schema("storage").from("objects").select("name").eq("bucket_id","revisit").like("name",`${this.collectionPrefix}${n}%`);if(s)throw new Error("Failed to retrieve file paths for reset");if(i&&i.length>0){const{error:o}=await this.supabase.storage.from("revisit").remove(i.map(a=>a.name));if(o)throw new Error("Failed to delete files from storage during reset")}await super.__testingReset()}async getSnapshots(n){const{data:r,error:i}=await this.supabase.from("revisit").select("data").eq("studyId",`${this.collectionPrefix}${n}`).eq("docId","snapshots").single();return i?{}:(r==null?void 0:r.data)||{}}async _directoryExists(n){const{data:r,error:i}=await this.supabase.storage.from("revisit").list(n,{limit:1});return i?(console.error("Error checking directory existence:",i),!1):r.length>0}async _copyDirectory(n,r){const{data:i,error:s}=await this.supabase.storage.from("revisit").list(n);if(s)throw console.error("Error listing directory contents:",s),new Error("Failed to copy directory");const o=i.map(async a=>{const{data:l,error:u}=await this.supabase.storage.from("revisit").download(`${n}/${a.name}`);if(u)return;const{error:c}=await this.supabase.storage.from("revisit").upload(`${r}/${a.name}`,l,{upsert:!0});c&&console.error(`Error uploading file to ${r}/${a.name}:`,c)});await Promise.all(o)}async _deleteDirectory(n){const{data:r,error:i}=await this.supabase.storage.from("revisit").list(n);if(i)throw console.error("Error listing directory contents:",i),new Error("Failed to delete directory");if(r.length===0)return;const s=r.map(a=>`${n}/${a.name}`),{error:o}=await this.supabase.storage.from("revisit").remove(s);if(o)throw new Error("Failed to delete directory")}async _copyRealtimeData(n,r){const{data:i,error:s}=await this.supabase.from("revisit").select("createdAt, studyId, docId, data").eq("studyId",n).like("docId","sequenceAssignment_%");if(s)throw new Error("Failed to copy realtime data");const o=i.map(l=>({...l,studyId:r})),{error:a}=await this.supabase.from("revisit").upsert(o);a&&console.error("Error uploading realtime data for:",a)}async _deleteRealtimeData(n){const{error:r}=await this.supabase.from("revisit").delete().eq("studyId",n).like("docId","sequenceAssignment_%");if(r)throw new Error("Failed to delete realtime data")}async _addDirectoryNameToSnapshots(n,r){const i=await this.getSnapshots(r);i[n]||(i[n]={name:n},await this.supabase.from("revisit").upsert({studyId:`${this.collectionPrefix}${r}`,docId:"snapshots",data:i}))}async _removeDirectoryNameFromSnapshots(n,r){const i=await this.getSnapshots(r);i[n]&&(delete i[n],await this.supabase.from("revisit").upsert({studyId:`${this.collectionPrefix}${r}`,docId:"snapshots",data:i}))}async _changeDirectoryNameInSnapshots(n,r,i){const s=await this.getSnapshots(i);s[n]&&(s[n]={name:r},await this.supabase.from("revisit").upsert({studyId:`${this.collectionPrefix}${i}`,docId:"snapshots",data:s}))}}async function QUt(){let e,t=!1;{const n=new XUt;await n.connect(),n.isConnected()?e=n:t=!0}if(t){const n=new PBt;await n.connect(),e=n}return e}function V_({title:e}){const t=Wu();return D.useEffect(()=>{document.title=e},[t,e]),null}async function JUt(){const t=await(await fetch(`${Vi}global.json`)).text();return tBt(t)}function ZUt(){const[e,t]=D.useState(null),[n,r]=D.useState({});D.useEffect(()=>{async function a(){e&&r(await iBt(e))}a()},[e]),D.useEffect(()=>{e||JUt().then(a=>{t(a)})},[e]);const{storageEngine:i,setStorageEngine:s}=Ai();D.useEffect(()=>{if(i!==void 0)return;async function a(){const l=await QUt();s(l)}a()},[s,i]);const o=async a=>i&&vu(i)?!(await i.getModes(a)).analyticsInterfacePubliclyAccessible:!1;return e?T.jsx(FBe,{basename:Vi,children:T.jsx(JQe,{children:T.jsx(ZBe,{children:T.jsxs(hBe,{children:[T.jsx(Hg,{path:"/",element:T.jsxs(T.Fragment,{children:[T.jsx(V_,{title:"ReVISit | Home"}),T.jsxs(Ar,{padding:"md",header:{height:70},children:[T.jsx(aD,{studyIds:e.configsList}),T.jsx(eJe,{globalConfig:e,studyConfigs:n})]})]})}),T.jsx(Hg,{path:"/:studyId/*",element:T.jsxs(T.Fragment,{children:[T.jsx(V_,{title:"ReVISit | Study"}),T.jsx(sBt,{globalConfig:e})]})}),T.jsx(Hg,{path:"/analysis/stats/:studyId/:analysisTab/:trialId?",element:T.jsxs(T.Fragment,{children:[T.jsx(V_,{title:"ReVISit | Analysis"}),T.jsx(Jfe,{paramToCheck:"studyId",paramCallback:o,children:T.jsx(Ar,{padding:"md",header:{height:70},children:T.jsx(wBt,{globalConfig:e})})})]})}),T.jsx(Hg,{path:"/analysis/stats/:studyId",element:T.jsx(F3e,{to:"./table",replace:!0})}),T.jsx(Hg,{path:"/settings",element:T.jsxs(Jfe,{children:[T.jsx(V_,{title:"ReVISit | Settings"}),T.jsxs(Ar,{padding:"md",header:{height:70},children:[T.jsx(aD,{studyIds:e.configsList}),T.jsx(Ar.Main,{children:T.jsx(EBt,{})})]})]})}),T.jsx(Hg,{path:"/login",element:T.jsxs(T.Fragment,{children:[T.jsx(V_,{title:"ReVISit | Login"}),T.jsxs(Ar,{padding:"md",header:{height:70},children:[T.jsx(aD,{studyIds:e.configsList}),T.jsx(Ar.Main,{children:T.jsx(xBt,{})})]})]})})]})})})}):null}PNe.createRoot(document.getElementById("root")).render(T.jsx(Jn.StrictMode,{children:T.jsx(Eje,{children:T.jsxs(_pe,{children:[T.jsx(jp,{}),T.jsx(ZUt,{})]})})}));export{vl as a,tpe as g,qft as z};
